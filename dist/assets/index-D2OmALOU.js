var YO=Object.defineProperty;var kS=t=>{throw TypeError(t)};var VO=(t,e,n)=>e in t?YO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ar=(t,e,n)=>VO(t,typeof e!="symbol"?e+"":e,n),B1=(t,e,n)=>e.has(t)||kS("Cannot "+n);var xt=(t,e,n)=>(B1(t,e,"read from private field"),n?n.call(t):e.get(t)),sn=(t,e,n)=>e.has(t)?kS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),As=(t,e,n,r)=>(B1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),En=(t,e,n)=>(B1(t,e,"access private method"),n);var vx=(t,e,n,r)=>({set _(i){As(t,e,i,n)},get _(){return xt(t,e,r)}});function $O(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const l=Object.getOwnPropertyDescriptor(r,i);l&&Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();var _Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F1={exports:{}},Cm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function HO(){if(US)return Cm;US=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var d in i)d!=="key"&&(l[d]=i[d])}else l=i;return i=l.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:l}}return Cm.Fragment=e,Cm.jsx=n,Cm.jsxs=n,Cm}var WS;function zO(){return WS||(WS=1,F1.exports=HO()),F1.exports}var s=zO(),K1={exports:{}},yn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS;function qO(){if(BS)return yn;BS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,v={};function R(T,I,U){this.props=T,this.context=I,this.refs=v,this.updater=U||N}R.prototype.isReactComponent={},R.prototype.setState=function(T,I){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,I,"setState")},R.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function A(){}A.prototype=R.prototype;function M(T,I,U){this.props=T,this.context=I,this.refs=v,this.updater=U||N}var L=M.prototype=new A;L.constructor=M,C(L,R.prototype),L.isPureReactComponent=!0;var k=Array.isArray;function V(){}var G={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function j(T,I,U){var Q=U.ref;return{$$typeof:t,type:T,key:I,ref:Q!==void 0?Q:null,props:U}}function S(T,I){return j(T.type,I,T.props)}function P(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function F(T){var I={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(U){return I[U]})}var ee=/\/+/g;function J(T,I){return typeof T=="object"&&T!==null&&T.key!=null?F(""+T.key):I.toString(36)}function $(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(V,V):(T.status="pending",T.then(function(I){T.status==="pending"&&(T.status="fulfilled",T.value=I)},function(I){T.status==="pending"&&(T.status="rejected",T.reason=I)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Y(T,I,U,Q,H){var q=typeof T;(q==="undefined"||q==="boolean")&&(T=null);var ae=!1;if(T===null)ae=!0;else switch(q){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(T.$$typeof){case t:case e:ae=!0;break;case m:return ae=T._init,Y(ae(T._payload),I,U,Q,H)}}if(ae)return H=H(T),ae=Q===""?"."+J(T,0):Q,k(H)?(U="",ae!=null&&(U=ae.replace(ee,"$&/")+"/"),Y(H,I,U,"",function(ce){return ce})):H!=null&&(P(H)&&(H=S(H,U+(H.key==null||T&&T.key===H.key?"":(""+H.key).replace(ee,"$&/")+"/")+ae)),I.push(H)),1;ae=0;var fe=Q===""?".":Q+":";if(k(T))for(var ge=0;ge<T.length;ge++)Q=T[ge],q=fe+J(Q,ge),ae+=Y(Q,I,U,q,H);else if(ge=g(T),typeof ge=="function")for(T=ge.call(T),ge=0;!(Q=T.next()).done;)Q=Q.value,q=fe+J(Q,ge++),ae+=Y(Q,I,U,q,H);else if(q==="object"){if(typeof T.then=="function")return Y($(T),I,U,Q,H);throw I=String(T),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ae}function K(T,I,U){if(T==null)return T;var Q=[],H=0;return Y(T,Q,"","",function(q){return I.call(U,q,H++)}),Q}function w(T){if(T._status===-1){var I=T._result;I=I(),I.then(function(U){(T._status===0||T._status===-1)&&(T._status=1,T._result=U)},function(U){(T._status===0||T._status===-1)&&(T._status=2,T._result=U)}),T._status===-1&&(T._status=0,T._result=I)}if(T._status===1)return T._result.default;throw T._result}var se=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},oe={map:K,forEach:function(T,I,U){K(T,function(){I.apply(this,arguments)},U)},count:function(T){var I=0;return K(T,function(){I++}),I},toArray:function(T){return K(T,function(I){return I})||[]},only:function(T){if(!P(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return yn.Activity=p,yn.Children=oe,yn.Component=R,yn.Fragment=n,yn.Profiler=i,yn.PureComponent=M,yn.StrictMode=r,yn.Suspense=u,yn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,yn.__COMPILER_RUNTIME={__proto__:null,c:function(T){return G.H.useMemoCache(T)}},yn.cache=function(T){return function(){return T.apply(null,arguments)}},yn.cacheSignal=function(){return null},yn.cloneElement=function(T,I,U){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Q=C({},T.props),H=T.key;if(I!=null)for(q in I.key!==void 0&&(H=""+I.key),I)!W.call(I,q)||q==="key"||q==="__self"||q==="__source"||q==="ref"&&I.ref===void 0||(Q[q]=I[q]);var q=arguments.length-2;if(q===1)Q.children=U;else if(1<q){for(var ae=Array(q),fe=0;fe<q;fe++)ae[fe]=arguments[fe+2];Q.children=ae}return j(T.type,H,Q)},yn.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:l,_context:T},T},yn.createElement=function(T,I,U){var Q,H={},q=null;if(I!=null)for(Q in I.key!==void 0&&(q=""+I.key),I)W.call(I,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(H[Q]=I[Q]);var ae=arguments.length-2;if(ae===1)H.children=U;else if(1<ae){for(var fe=Array(ae),ge=0;ge<ae;ge++)fe[ge]=arguments[ge+2];H.children=fe}if(T&&T.defaultProps)for(Q in ae=T.defaultProps,ae)H[Q]===void 0&&(H[Q]=ae[Q]);return j(T,q,H)},yn.createRef=function(){return{current:null}},yn.forwardRef=function(T){return{$$typeof:d,render:T}},yn.isValidElement=P,yn.lazy=function(T){return{$$typeof:m,_payload:{_status:-1,_result:T},_init:w}},yn.memo=function(T,I){return{$$typeof:f,type:T,compare:I===void 0?null:I}},yn.startTransition=function(T){var I=G.T,U={};G.T=U;try{var Q=T(),H=G.S;H!==null&&H(U,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(V,se)}catch(q){se(q)}finally{I!==null&&U.types!==null&&(I.types=U.types),G.T=I}},yn.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},yn.use=function(T){return G.H.use(T)},yn.useActionState=function(T,I,U){return G.H.useActionState(T,I,U)},yn.useCallback=function(T,I){return G.H.useCallback(T,I)},yn.useContext=function(T){return G.H.useContext(T)},yn.useDebugValue=function(){},yn.useDeferredValue=function(T,I){return G.H.useDeferredValue(T,I)},yn.useEffect=function(T,I){return G.H.useEffect(T,I)},yn.useEffectEvent=function(T){return G.H.useEffectEvent(T)},yn.useId=function(){return G.H.useId()},yn.useImperativeHandle=function(T,I,U){return G.H.useImperativeHandle(T,I,U)},yn.useInsertionEffect=function(T,I){return G.H.useInsertionEffect(T,I)},yn.useLayoutEffect=function(T,I){return G.H.useLayoutEffect(T,I)},yn.useMemo=function(T,I){return G.H.useMemo(T,I)},yn.useOptimistic=function(T,I){return G.H.useOptimistic(T,I)},yn.useReducer=function(T,I,U){return G.H.useReducer(T,I,U)},yn.useRef=function(T){return G.H.useRef(T)},yn.useState=function(T){return G.H.useState(T)},yn.useSyncExternalStore=function(T,I,U){return G.H.useSyncExternalStore(T,I,U)},yn.useTransition=function(){return G.H.useTransition()},yn.version="19.2.3",yn}var FS;function rb(){return FS||(FS=1,K1.exports=qO()),K1.exports}var _=rb();const Gi=nb(_),AT=$O({__proto__:null,default:Gi},[_]);var Q1={exports:{}},ym={},G1={exports:{}},Y1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS;function XO(){return KS||(KS=1,(function(t){function e(Y,K){var w=Y.length;Y.push(K);e:for(;0<w;){var se=w-1>>>1,oe=Y[se];if(0<i(oe,K))Y[se]=K,Y[w]=oe,w=se;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var K=Y[0],w=Y.pop();if(w!==K){Y[0]=w;e:for(var se=0,oe=Y.length,T=oe>>>1;se<T;){var I=2*(se+1)-1,U=Y[I],Q=I+1,H=Y[Q];if(0>i(U,w))Q<oe&&0>i(H,U)?(Y[se]=H,Y[Q]=w,se=Q):(Y[se]=U,Y[I]=w,se=I);else if(Q<oe&&0>i(H,w))Y[se]=H,Y[Q]=w,se=Q;else break e}}return K}function i(Y,K){var w=Y.sortIndex-K.sortIndex;return w!==0?w:Y.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var u=[],f=[],m=1,p=null,y=3,g=!1,N=!1,C=!1,v=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function L(Y){for(var K=n(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=Y)r(f),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(f)}}function k(Y){if(C=!1,L(Y),!N)if(n(u)!==null)N=!0,V||(V=!0,F());else{var K=n(f);K!==null&&$(k,K.startTime-Y)}}var V=!1,G=-1,W=5,j=-1;function S(){return v?!0:!(t.unstable_now()-j<W)}function P(){if(v=!1,V){var Y=t.unstable_now();j=Y;var K=!0;try{e:{N=!1,C&&(C=!1,A(G),G=-1),g=!0;var w=y;try{t:{for(L(Y),p=n(u);p!==null&&!(p.expirationTime>Y&&S());){var se=p.callback;if(typeof se=="function"){p.callback=null,y=p.priorityLevel;var oe=se(p.expirationTime<=Y);if(Y=t.unstable_now(),typeof oe=="function"){p.callback=oe,L(Y),K=!0;break t}p===n(u)&&r(u),L(Y)}else r(u);p=n(u)}if(p!==null)K=!0;else{var T=n(f);T!==null&&$(k,T.startTime-Y),K=!1}}break e}finally{p=null,y=w,g=!1}K=void 0}}finally{K?F():V=!1}}}var F;if(typeof M=="function")F=function(){M(P)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,J=ee.port2;ee.port1.onmessage=P,F=function(){J.postMessage(null)}}else F=function(){R(P,0)};function $(Y,K){G=R(function(){Y(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var w=y;y=K;try{return Y()}finally{y=w}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(Y,K){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var w=y;y=Y;try{return K()}finally{y=w}},t.unstable_scheduleCallback=function(Y,K,w){var se=t.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?se+w:se):w=se,Y){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=w+oe,Y={id:m++,callback:K,priorityLevel:Y,startTime:w,expirationTime:oe,sortIndex:-1},w>se?(Y.sortIndex=w,e(f,Y),n(u)===null&&Y===n(f)&&(C?(A(G),G=-1):C=!0,$(k,w-se))):(Y.sortIndex=oe,e(u,Y),N||g||(N=!0,V||(V=!0,F()))),Y},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(Y){var K=y;return function(){var w=y;y=K;try{return Y.apply(this,arguments)}finally{y=w}}}})(Y1)),Y1}var QS;function JO(){return QS||(QS=1,G1.exports=XO()),G1.exports}var V1={exports:{}},ya={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS;function ZO(){if(GS)return ya;GS=1;var t=rb();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(u,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:f,implementation:m}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ya.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ya.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(u,f,null,m)},ya.flushSync=function(u){var f=c.T,m=r.p;try{if(c.T=null,r.p=2,u)return u()}finally{c.T=f,r.p=m,r.d.f()}},ya.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},ya.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},ya.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,p=d(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):m==="script"&&r.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ya.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=d(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},ya.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=d(m,f.crossOrigin);r.d.L(u,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ya.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=d(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},ya.requestFormReset=function(u){r.d.r(u)},ya.unstable_batchedUpdates=function(u,f){return u(f)},ya.useFormState=function(u,f,m){return c.H.useFormState(u,f,m)},ya.useFormStatus=function(){return c.H.useHostTransitionStatus()},ya.version="19.2.3",ya}var YS;function kT(){if(YS)return V1.exports;YS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),V1.exports=ZO(),V1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function eM(){if(VS)return ym;VS=1;var t=JO(),e=rb(),n=kT();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var o=a,h=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(h=o.return),a=o.return;while(a)}return o.tag===3?h:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(l(a)!==a)throw Error(r(188))}function f(a){var o=a.alternate;if(!o){if(o=l(a),o===null)throw Error(r(188));return o!==a?null:a}for(var h=a,x=o;;){var D=h.return;if(D===null)break;var O=D.alternate;if(O===null){if(x=D.return,x!==null){h=x;continue}break}if(D.child===O.child){for(O=D.child;O;){if(O===h)return u(D),a;if(O===x)return u(D),o;O=O.sibling}throw Error(r(188))}if(h.return!==x.return)h=D,x=O;else{for(var le=!1,Ae=D.child;Ae;){if(Ae===h){le=!0,h=D,x=O;break}if(Ae===x){le=!0,x=D,h=O;break}Ae=Ae.sibling}if(!le){for(Ae=O.child;Ae;){if(Ae===h){le=!0,h=O,x=D;break}if(Ae===x){le=!0,x=O,h=D;break}Ae=Ae.sibling}if(!le)throw Error(r(189))}}if(h.alternate!==x)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:o}function m(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=m(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),S=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function F(a){return a===null||typeof a!="object"?null:(a=P&&a[P]||a["@@iterator"],typeof a=="function"?a:null)}var ee=Symbol.for("react.client.reference");function J(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ee?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case R:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case V:return"SuspenseList";case j:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case N:return"Portal";case M:return a.displayName||"Context";case A:return(a._context.displayName||"Context")+".Consumer";case L:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case G:return o=a.displayName||null,o!==null?o:J(a.type)||"Memo";case W:o=a._payload,a=a._init;try{return J(a(o))}catch{}}return null}var $=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w={pending:!1,data:null,method:null,action:null},se=[],oe=-1;function T(a){return{current:a}}function I(a){0>oe||(a.current=se[oe],se[oe]=null,oe--)}function U(a,o){oe++,se[oe]=a.current,a.current=o}var Q=T(null),H=T(null),q=T(null),ae=T(null);function fe(a,o){switch(U(q,o),U(H,a),U(Q,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?aS(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=aS(o),a=lS(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}I(Q),U(Q,a)}function ge(){I(Q),I(H),I(q)}function ce(a){a.memoizedState!==null&&U(ae,a);var o=Q.current,h=lS(o,a.type);o!==h&&(U(H,a),U(Q,h))}function Re(a){H.current===a&&(I(Q),I(H)),ae.current===a&&(I(ae),gm._currentValue=w)}var X,me;function he(a){if(X===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);X=o&&o[1]||"",me=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+X+a+me}var Z=!1;function ie(a,o){if(!a||Z)return"";Z=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(o){var us=function(){throw Error()};if(Object.defineProperty(us.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(us,[])}catch(zt){var $t=zt}Reflect.construct(a,[],us)}else{try{us.call()}catch(zt){$t=zt}a.call(us.prototype)}}else{try{throw Error()}catch(zt){$t=zt}(us=a())&&typeof us.catch=="function"&&us.catch(function(){})}}catch(zt){if(zt&&$t&&typeof zt.stack=="string")return[zt.stack,$t.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=x.DetermineComponentFrameRoot(),le=O[0],Ae=O[1];if(le&&Ae){var ft=le.split(`
`),Yt=Ae.split(`
`);for(D=x=0;x<ft.length&&!ft[x].includes("DetermineComponentFrameRoot");)x++;for(;D<Yt.length&&!Yt[D].includes("DetermineComponentFrameRoot");)D++;if(x===ft.length||D===Yt.length)for(x=ft.length-1,D=Yt.length-1;1<=x&&0<=D&&ft[x]!==Yt[D];)D--;for(;1<=x&&0<=D;x--,D--)if(ft[x]!==Yt[D]){if(x!==1||D!==1)do if(x--,D--,0>D||ft[x]!==Yt[D]){var ns=`
`+ft[x].replace(" at new "," at ");return a.displayName&&ns.includes("<anonymous>")&&(ns=ns.replace("<anonymous>",a.displayName)),ns}while(1<=x&&0<=D);break}}}finally{Z=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?he(h):""}function te(a,o){switch(a.tag){case 26:case 27:case 5:return he(a.type);case 16:return he("Lazy");case 13:return a.child!==o&&o!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return ie(a.type,!1);case 11:return ie(a.type.render,!1);case 1:return ie(a.type,!0);case 31:return he("Activity");default:return""}}function je(a){try{var o="",h=null;do o+=te(a,h),h=a,a=a.return;while(a);return o}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var be=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,re=t.unstable_cancelCallback,pe=t.unstable_shouldYield,Se=t.unstable_requestPaint,st=t.unstable_now,Nt=t.unstable_getCurrentPriorityLevel,lt=t.unstable_ImmediatePriority,At=t.unstable_UserBlockingPriority,ot=t.unstable_NormalPriority,We=t.unstable_LowPriority,Dt=t.unstable_IdlePriority,Et=t.log,Rt=t.unstable_setDisableYieldValue,$e=null,gt=null;function Fe(a){if(typeof Et=="function"&&Rt(a),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode($e,a)}catch{}}var rt=Math.clz32?Math.clz32:ht,at=Math.log,It=Math.LN2;function ht(a){return a>>>=0,a===0?32:31-(at(a)/It|0)|0}var Je=256,ve=262144,Ge=4194304;function _e(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xe(a,o,h){var x=a.pendingLanes;if(x===0)return 0;var D=0,O=a.suspendedLanes,le=a.pingedLanes;a=a.warmLanes;var Ae=x&134217727;return Ae!==0?(x=Ae&~O,x!==0?D=_e(x):(le&=Ae,le!==0?D=_e(le):h||(h=Ae&~a,h!==0&&(D=_e(h))))):(Ae=x&~O,Ae!==0?D=_e(Ae):le!==0?D=_e(le):h||(h=x&~a,h!==0&&(D=_e(h)))),D===0?0:o!==0&&o!==D&&(o&O)===0&&(O=D&-D,h=o&-o,O>=h||O===32&&(h&4194048)!==0)?o:D}function Ue(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Pe(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ye(){var a=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),a}function mt(a){for(var o=[],h=0;31>h;h++)o.push(a);return o}function de(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function tt(a,o,h,x,D,O){var le=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var Ae=a.entanglements,ft=a.expirationTimes,Yt=a.hiddenUpdates;for(h=le&~h;0<h;){var ns=31-rt(h),us=1<<ns;Ae[ns]=0,ft[ns]=-1;var $t=Yt[ns];if($t!==null)for(Yt[ns]=null,ns=0;ns<$t.length;ns++){var zt=$t[ns];zt!==null&&(zt.lane&=-536870913)}h&=~us}x!==0&&De(a,x,0),O!==0&&D===0&&a.tag!==0&&(a.suspendedLanes|=O&~(le&~o))}function De(a,o,h){a.pendingLanes|=o,a.suspendedLanes&=~o;var x=31-rt(o);a.entangledLanes|=o,a.entanglements[x]=a.entanglements[x]|1073741824|h&261930}function it(a,o){var h=a.entangledLanes|=o;for(a=a.entanglements;h;){var x=31-rt(h),D=1<<x;D&o|a[x]&o&&(a[x]|=o),h&=~D}}function St(a,o){var h=o&-o;return h=(h&42)!==0?1:Lt(h),(h&(a.suspendedLanes|o))!==0?0:h}function Lt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ve(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function kt(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:IS(a.type))}function Oe(a,o){var h=K.p;try{return K.p=a,o()}finally{K.p=h}}var Xt=Math.random().toString(36).slice(2),rs="__reactFiber$"+Xt,ds="__reactProps$"+Xt,Ss="__reactContainer$"+Xt,Ns="__reactEvents$"+Xt,ke="__reactListeners$"+Xt,dt="__reactHandles$"+Xt,et="__reactResources$"+Xt,Qt="__reactMarker$"+Xt;function ut(a){delete a[rs],delete a[ds],delete a[Ns],delete a[ke],delete a[dt]}function qt(a){var o=a[rs];if(o)return o;for(var h=a.parentNode;h;){if(o=h[Ss]||h[rs]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(a=mS(a);a!==null;){if(h=a[rs])return h;a=mS(a)}return o}a=h,h=a.parentNode}return null}function jt(a){if(a=a[rs]||a[Ss]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function ue(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Ce(a){var o=a[et];return o||(o=a[et]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Le(a){a[Qt]=!0}var Ie=new Set,Ze={};function Ee(a,o){pt(a,o),pt(a+"Capture",o)}function pt(a,o){for(Ze[a]=o,a=0;a<o.length;a++)Ie.add(o[a])}var Ke=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ct={},bt={};function He(a){return be.call(bt,a)?!0:be.call(Ct,a)?!1:Ke.test(a)?bt[a]=!0:(Ct[a]=!0,!1)}function ct(a,o,h){if(He(o))if(h===null)a.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var x=o.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+h)}}function wt(a,o,h){if(h===null)a.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+h)}}function Bt(a,o,h,x){if(x===null)a.removeAttribute(h);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(o,h,""+x)}}function Vt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Jt(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ss(a,o,h){var x=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var D=x.get,O=x.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return D.call(this)},set:function(le){h=""+le,O.call(this,le)}}),Object.defineProperty(a,o,{enumerable:x.enumerable}),{getValue:function(){return h},setValue:function(le){h=""+le},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Wt(a){if(!a._valueTracker){var o=Jt(a)?"checked":"value";a._valueTracker=ss(a,o,""+a[o])}}function Es(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var h=o.getValue(),x="";return a&&(x=Jt(a)?a.checked?"true":"false":a.value),a=x,a!==h?(o.setValue(a),!0):!1}function ys(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ps=/[\n"\\]/g;function xs(a){return a.replace(Ps,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function vs(a,o,h,x,D,O,le,Ae){a.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?a.type=le:a.removeAttribute("type"),o!=null?le==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Vt(o)):a.value!==""+Vt(o)&&(a.value=""+Vt(o)):le!=="submit"&&le!=="reset"||a.removeAttribute("value"),o!=null?cs(a,le,Vt(o)):h!=null?cs(a,le,Vt(h)):x!=null&&a.removeAttribute("value"),D==null&&O!=null&&(a.defaultChecked=!!O),D!=null&&(a.checked=D&&typeof D!="function"&&typeof D!="symbol"),Ae!=null&&typeof Ae!="function"&&typeof Ae!="symbol"&&typeof Ae!="boolean"?a.name=""+Vt(Ae):a.removeAttribute("name")}function Ms(a,o,h,x,D,O,le,Ae){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(a.type=O),o!=null||h!=null){if(!(O!=="submit"&&O!=="reset"||o!=null)){Wt(a);return}h=h!=null?""+Vt(h):"",o=o!=null?""+Vt(o):h,Ae||o===a.value||(a.value=o),a.defaultValue=o}x=x??D,x=typeof x!="function"&&typeof x!="symbol"&&!!x,a.checked=Ae?a.checked:!!x,a.defaultChecked=!!x,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(a.name=le),Wt(a)}function cs(a,o,h){o==="number"&&ys(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function ms(a,o,h,x){if(a=a.options,o){o={};for(var D=0;D<h.length;D++)o["$"+h[D]]=!0;for(h=0;h<a.length;h++)D=o.hasOwnProperty("$"+a[h].value),a[h].selected!==D&&(a[h].selected=D),D&&x&&(a[h].defaultSelected=!0)}else{for(h=""+Vt(h),o=null,D=0;D<a.length;D++){if(a[D].value===h){a[D].selected=!0,x&&(a[D].defaultSelected=!0);return}o!==null||a[D].disabled||(o=a[D])}o!==null&&(o.selected=!0)}}function Ks(a,o,h){if(o!=null&&(o=""+Vt(o),o!==a.value&&(a.value=o),h==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=h!=null?""+Vt(h):""}function Ls(a,o,h,x){if(o==null){if(x!=null){if(h!=null)throw Error(r(92));if($(x)){if(1<x.length)throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),o=h}h=Vt(o),a.defaultValue=h,x=a.textContent,x===h&&x!==""&&x!==null&&(a.value=x),Wt(a)}function nt(a,o){if(o){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=o;return}}a.textContent=o}var Kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cs(a,o,h){var x=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?x?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":x?a.setProperty(o,h):typeof h!="number"||h===0||Kt.has(o)?o==="float"?a.cssFloat=h:a[o]=(""+h).trim():a[o]=h+"px"}function Ht(a,o,h){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,h!=null){for(var x in h)!h.hasOwnProperty(x)||o!=null&&o.hasOwnProperty(x)||(x.indexOf("--")===0?a.setProperty(x,""):x==="float"?a.cssFloat="":a[x]="");for(var D in o)x=o[D],o.hasOwnProperty(D)&&h[D]!==x&&Cs(a,D,x)}else for(var O in o)o.hasOwnProperty(O)&&Cs(a,O,o[O])}function Os(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var es=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ds=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function js(a){return Ds.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function hs(){}var Us=null;function Qs(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Is=null,ps=null;function Lr(a){var o=jt(a);if(o&&(a=o.stateNode)){var h=a[ds]||null;e:switch(a=o.stateNode,o.type){case"input":if(vs(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+xs(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var x=h[o];if(x!==a&&x.form===a.form){var D=x[ds]||null;if(!D)throw Error(r(90));vs(x,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(o=0;o<h.length;o++)x=h[o],x.form===a.form&&Es(x)}break e;case"textarea":Ks(a,h.value,h.defaultValue);break e;case"select":o=h.value,o!=null&&ms(a,!!h.multiple,o,!1)}}}var Ir=!1;function qr(a,o,h){if(Ir)return a(o,h);Ir=!0;try{var x=a(o);return x}finally{if(Ir=!1,(Is!==null||ps!==null)&&(sx(),Is&&(o=Is,a=ps,ps=Is=null,Lr(o),a)))for(o=0;o<a.length;o++)Lr(a[o])}}function vr(a,o){var h=a.stateNode;if(h===null)return null;var x=h[ds]||null;if(x===null)return null;h=x[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(a=a.type,x=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!x;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,o,typeof h));return h}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cr=!1;if(cn)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){cr=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{cr=!1}var Fr=null,Hi=null,Or=null;function zi(){if(Or)return Or;var a,o=Hi,h=o.length,x,D="value"in Fr?Fr.value:Fr.textContent,O=D.length;for(a=0;a<h&&o[a]===D[a];a++);var le=h-a;for(x=1;x<=le&&o[h-x]===D[O-x];x++);return Or=D.slice(a,1<x?1-x:void 0)}function Dr(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Ta(){return!0}function Fa(){return!1}function Rs(a){function o(h,x,D,O,le){this._reactName=h,this._targetInst=D,this.type=x,this.nativeEvent=O,this.target=le,this.currentTarget=null;for(var Ae in a)a.hasOwnProperty(Ae)&&(h=a[Ae],this[Ae]=h?h(O):O[Ae]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Ta:Fa,this.isPropagationStopped=Fa,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),o}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qn=Rs(Pn),Xr=p({},Pn,{view:0,detail:0}),Ni=Rs(Xr),so,ml,ws,Hn=p({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:un,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ws&&(ws&&a.type==="mousemove"?(so=a.screenX-ws.screenX,ml=a.screenY-ws.screenY):ml=so=0,ws=a),so)},movementY:function(a){return"movementY"in a?a.movementY:ml}}),Kr=Rs(Hn),Si=p({},Hn,{dataTransfer:0}),Oi=Rs(Si),Fh=p({},Xr,{relatedTarget:0}),no=Rs(Fh),Kh=p({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),B=Rs(Kh),ye=p({},Pn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Xe=Rs(ye),_t=p({},Pn,{data:0}),Ot=Rs(_t),is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ys={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xs(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Ys[a])?!!o[a]:!1}function un(){return Xs}var _n=p({},Xr,{key:function(a){if(a.key){var o=is[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Dr(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?gs[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:un,charCode:function(a){return a.type==="keypress"?Dr(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Dr(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Wn=Rs(_n),wr=p({},Hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jr=Rs(wr),_r=p({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:un}),mi=Rs(_r),ri=p({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mi=Rs(ri),ro=p({},Hn,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),gl=Rs(ro),io=p({},Pn,{newState:0,oldState:0}),Ru=Rs(io),ud=[9,13,27,32],Rl=cn&&"CompositionEvent"in window,xl=null;cn&&"documentMode"in document&&(xl=document.documentMode);var pc=cn&&"TextEvent"in window&&!xl,ao=cn&&(!Rl||xl&&8<xl&&11>=xl),vi=" ",Ao=!1;function ko(a,o){switch(a){case"keyup":return ud.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Tl=!1;function ca(a,o){switch(a){case"compositionend":return hd(o);case"keypress":return o.which!==32?null:(Ao=!0,vi);case"textInput":return a=o.data,a===vi&&Ao?null:a;default:return null}}function lo(a,o){if(Tl)return a==="compositionend"||!Rl&&ko(a,o)?(a=zi(),Or=Hi=Fr=null,Tl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ao&&o.locale!=="ko"?null:o.data;default:return null}}var fd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!fd[a.type]:o==="textarea"}function Ea(a,o,h,x){Is?ps?ps.push(x):ps=[x]:Is=x,o=cx(o,"onChange"),0<o.length&&(h=new Qn("onChange","change",null,h,x),a.push({event:h,listeners:o}))}var pl=null,oo=null;function Eu(a){eS(a,0)}function _l(a){var o=ue(a);if(Es(o))return a}function Uo(a,o){if(a==="change")return o}var _a=!1;if(cn){var da;if(cn){var El="oninput"in document;if(!El){var jl=document.createElement("div");jl.setAttribute("oninput","return;"),El=typeof jl.oninput=="function"}da=El}else da=!1;_a=da&&(!document.documentMode||9<document.documentMode)}function co(){pl&&(pl.detachEvent("onpropertychange",md),oo=pl=null)}function md(a){if(a.propertyName==="value"&&_l(oo)){var o=[];Ea(o,oo,a,Qs(a)),qr(Eu,o)}}function gd(a,o,h){a==="focusin"?(co(),pl=o,oo=h,pl.attachEvent("onpropertychange",md)):a==="focusout"&&co()}function Zr(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return _l(oo)}function Qh(a,o){if(a==="click")return _l(o)}function Il(a,o){if(a==="input"||a==="change")return _l(o)}function Ol(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Li=typeof Object.is=="function"?Object.is:Ol;function uo(a,o){if(Li(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var h=Object.keys(a),x=Object.keys(o);if(h.length!==x.length)return!1;for(x=0;x<h.length;x++){var D=h[x];if(!be.call(o,D)||!Li(a[D],o[D]))return!1}return!0}function xd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function pd(a,o){var h=xd(a);a=0;for(var x;h;){if(h.nodeType===3){if(x=a+h.textContent.length,a<=o&&x>=o)return{node:h,offset:o-a};a=x}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=xd(h)}}function ho(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?ho(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function fo(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ys(a.document);o instanceof a.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)a=o.contentWindow;else break;o=ys(a.document)}return o}function Ml(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var _c=cn&&"documentMode"in document&&11>=document.documentMode,ja=null,mo=null,qi=null,Ka=!1;function zn(a,o,h){var x=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ka||ja==null||ja!==ys(x)||(x=ja,"selectionStart"in x&&Ml(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),qi&&uo(qi,x)||(qi=x,x=cx(mo,"onSelect"),0<x.length&&(o=new Qn("onSelect","select",null,o,h),a.push({event:o,listeners:x}),o.target=ja)))}function Bn(a,o){var h={};return h[a.toLowerCase()]=o.toLowerCase(),h["Webkit"+a]="webkit"+o,h["Moz"+a]="moz"+o,h}var Cr={animationend:Bn("Animation","AnimationEnd"),animationiteration:Bn("Animation","AnimationIteration"),animationstart:Bn("Animation","AnimationStart"),transitionrun:Bn("Transition","TransitionRun"),transitionstart:Bn("Transition","TransitionStart"),transitioncancel:Bn("Transition","TransitionCancel"),transitionend:Bn("Transition","TransitionEnd")},ei={},Ll={};cn&&(Ll=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function Cl(a){if(ei[a])return ei[a];if(!Cr[a])return a;var o=Cr[a],h;for(h in o)if(o.hasOwnProperty(h)&&h in Ll)return ei[a]=o[h];return a}var Cc=Cl("animationend"),ju=Cl("animationiteration"),Uf=Cl("animationstart"),Mg=Cl("transitionrun"),Lg=Cl("transitionstart"),wg=Cl("transitioncancel"),Wf=Cl("transitionend"),Bf=new Map,yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yc.push("scrollEnd");function Qa(a,o){Bf.set(a,o),Ee(o,[a])}var Iu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ia=[],bc=0,Gh=0;function Ou(){for(var a=bc,o=Gh=bc=0;o<a;){var h=Ia[o];Ia[o++]=null;var x=Ia[o];Ia[o++]=null;var D=Ia[o];Ia[o++]=null;var O=Ia[o];if(Ia[o++]=null,x!==null&&D!==null){var le=x.pending;le===null?D.next=D:(D.next=le.next,le.next=D),x.pending=D}O!==0&&Lu(h,D,O)}}function Mu(a,o,h,x){Ia[bc++]=a,Ia[bc++]=o,Ia[bc++]=h,Ia[bc++]=x,Gh|=x,a.lanes|=x,a=a.alternate,a!==null&&(a.lanes|=x)}function Yh(a,o,h,x){return Mu(a,o,h,x),Xi(a)}function go(a,o){return Mu(a,null,null,o),Xi(a)}function Lu(a,o,h){a.lanes|=h;var x=a.alternate;x!==null&&(x.lanes|=h);for(var D=!1,O=a.return;O!==null;)O.childLanes|=h,x=O.alternate,x!==null&&(x.childLanes|=h),O.tag===22&&(a=O.stateNode,a===null||a._visibility&1||(D=!0)),a=O,O=O.return;return a.tag===3?(O=a.stateNode,D&&o!==null&&(D=31-rt(h),a=O.hiddenUpdates,x=a[D],x===null?a[D]=[o]:x.push(o),o.lane=h|536870912),O):null}function Xi(a){if(50<om)throw om=0,d1=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var wi={};function Vh(a,o,h,x){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(a,o,h,x){return new Vh(a,o,h,x)}function $h(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ga(a,o){var h=a.alternate;return h===null?(h=Ji(a.tag,o,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=o,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,o=a.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function wu(a,o){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,o=h.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function _d(a,o,h,x,D,O){var le=0;if(x=a,typeof a=="function")$h(a)&&(le=1);else if(typeof a=="string")le=LO(a,h,Q.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case j:return a=Ji(31,h,o,D),a.elementType=j,a.lanes=O,a;case C:return Wo(h.children,D,O,o);case v:le=8,D|=24;break;case R:return a=Ji(12,h,o,D|2),a.elementType=R,a.lanes=O,a;case k:return a=Ji(13,h,o,D),a.elementType=k,a.lanes=O,a;case V:return a=Ji(19,h,o,D),a.elementType=V,a.lanes=O,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:le=10;break e;case A:le=9;break e;case L:le=11;break e;case G:le=14;break e;case W:le=16,x=null;break e}le=29,h=Error(r(130,a===null?"null":typeof a,"")),x=null}return o=Ji(le,h,o,D),o.elementType=a,o.type=x,o.lanes=O,o}function Wo(a,o,h,x){return a=Ji(7,a,x,o),a.lanes=h,a}function Pu(a,o,h){return a=Ji(6,a,null,o),a.lanes=h,a}function Hh(a){var o=Ji(18,null,null,0);return o.stateNode=a,o}function Cd(a,o,h){return o=Ji(4,a.children!==null?a.children:[],a.key,o),o.lanes=h,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var zh=new WeakMap;function Ya(a,o){if(typeof a=="object"&&a!==null){var h=zh.get(a);return h!==void 0?h:(o={value:a,source:o,stack:je(o)},zh.set(a,o),o)}return{value:a,source:o,stack:je(o)}}var yd=[],Nc=0,qh=null,Au=0,Va=[],$a=0,Bo=null,Ha=1,za="";function Oa(a,o){yd[Nc++]=Au,yd[Nc++]=qh,qh=a,Au=o}function Pg(a,o,h){Va[$a++]=Ha,Va[$a++]=za,Va[$a++]=Bo,Bo=a;var x=Ha;a=za;var D=32-rt(x)-1;x&=~(1<<D),h+=1;var O=32-rt(o)+D;if(30<O){var le=D-D%5;O=(x&(1<<le)-1).toString(32),x>>=le,D-=le,Ha=1<<32-rt(o)+D|h<<D|x,za=O+a}else Ha=1<<O|h<<D|x,za=a}function Ff(a){a.return!==null&&(Oa(a,1),Pg(a,1,0))}function Xh(a){for(;a===qh;)qh=yd[--Nc],yd[Nc]=null,Au=yd[--Nc],yd[Nc]=null;for(;a===Bo;)Bo=Va[--$a],Va[$a]=null,za=Va[--$a],Va[$a]=null,Ha=Va[--$a],Va[$a]=null}function Ag(a,o){Va[$a++]=Ha,Va[$a++]=za,Va[$a++]=Bo,Ha=o.id,za=o.overflow,Bo=a}var Pi=null,Rr=null,Mn=!1,ua=null,Qr=!1,yl=Error(r(519));function Fo(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bd(Ya(o,a)),yl}function Kf(a){var o=a.stateNode,h=a.type,x=a.memoizedProps;switch(o[rs]=a,o[ds]=x,h){case"dialog":wn("cancel",o),wn("close",o);break;case"iframe":case"object":case"embed":wn("load",o);break;case"video":case"audio":for(h=0;h<dm.length;h++)wn(dm[h],o);break;case"source":wn("error",o);break;case"img":case"image":case"link":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"input":wn("invalid",o),Ms(o,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":wn("invalid",o);break;case"textarea":wn("invalid",o),Ls(o,x.value,x.defaultValue,x.children)}h=x.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||x.suppressHydrationWarning===!0||rS(o.textContent,h)?(x.popover!=null&&(wn("beforetoggle",o),wn("toggle",o)),x.onScroll!=null&&wn("scroll",o),x.onScrollEnd!=null&&wn("scrollend",o),x.onClick!=null&&(o.onclick=hs),o=!0):o=!1,o||Fo(a,!0)}function xo(a){for(Pi=a.return;Pi;)switch(Pi.tag){case 5:case 31:case 13:Qr=!1;return;case 27:case 3:Qr=!0;return;default:Pi=Pi.return}}function Ai(a){if(a!==Pi)return!1;if(!Mn)return xo(a),Mn=!0,!1;var o=a.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||D1(a.type,a.memoizedProps)),h=!h),h&&Rr&&Fo(a),xo(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Rr=fS(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Rr=fS(a)}else o===27?(o=Rr,Pd(a.type)?(a=I1,I1=null,Rr=a):Rr=o):Rr=Pi?kl(a.stateNode.nextSibling):null;return!0}function Sc(){Rr=Pi=null,Mn=!1}function Qf(){var a=ua;return a!==null&&(tl===null?tl=a:tl.push.apply(tl,a),ua=null),a}function bd(a){ua===null?ua=[a]:ua.push(a)}var Jh=T(null),Ko=null,wl=null;function Qo(a,o,h){U(Jh,o._currentValue),o._currentValue=h}function qa(a){a._currentValue=Jh.current,I(Jh)}function Nd(a,o,h){for(;a!==null;){var x=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,x!==null&&(x.childLanes|=o)):x!==null&&(x.childLanes&o)!==o&&(x.childLanes|=o),a===h)break;a=a.return}}function vc(a,o,h,x){var D=a.child;for(D!==null&&(D.return=a);D!==null;){var O=D.dependencies;if(O!==null){var le=D.child;O=O.firstContext;e:for(;O!==null;){var Ae=O;O=D;for(var ft=0;ft<o.length;ft++)if(Ae.context===o[ft]){O.lanes|=h,Ae=O.alternate,Ae!==null&&(Ae.lanes|=h),Nd(O.return,h,a),x||(le=null);break e}O=Ae.next}}else if(D.tag===18){if(le=D.return,le===null)throw Error(r(341));le.lanes|=h,O=le.alternate,O!==null&&(O.lanes|=h),Nd(le,h,a),le=null}else le=D.child;if(le!==null)le.return=D;else for(le=D;le!==null;){if(le===a){le=null;break}if(D=le.sibling,D!==null){D.return=le.return,le=D;break}le=le.return}D=le}}function Go(a,o,h,x){a=null;for(var D=o,O=!1;D!==null;){if(!O){if((D.flags&524288)!==0)O=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var le=D.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var Ae=D.type;Li(D.pendingProps.value,le.value)||(a!==null?a.push(Ae):a=[Ae])}}else if(D===ae.current){if(le=D.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(a!==null?a.push(gm):a=[gm])}D=D.return}a!==null&&vc(o,a,h,x),o.flags|=262144}function Zh(a){for(a=a.firstContext;a!==null;){if(!Li(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Yo(a){Ko=a,wl=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ki(a){return kg(Ko,a)}function e0(a,o){return Ko===null&&Yo(a),kg(a,o)}function kg(a,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},wl===null){if(a===null)throw Error(r(308));wl=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else wl=wl.next=o;return h}var j_=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(h,x){a.push(x)}};this.abort=function(){o.aborted=!0,a.forEach(function(h){return h()})}},I_=t.unstable_scheduleCallback,O_=t.unstable_NormalPriority,ti={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new j_,data:new Map,refCount:0}}function ku(a){a.refCount--,a.refCount===0&&I_(O_,function(){a.controller.abort()})}var Uu=null,t0=0,b=0,E=null;function z(a,o){if(Uu===null){var h=Uu=[];t0=0,b=x1(),E={status:"pending",value:void 0,then:function(x){h.push(x)}}}return t0++,o.then(ne,ne),o}function ne(){if(--t0===0&&Uu!==null){E!==null&&(E.status="fulfilled");var a=Uu;Uu=null,b=0,E=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function Ne(a,o){var h=[],x={status:"pending",value:null,reason:null,then:function(D){h.push(D)}};return a.then(function(){x.status="fulfilled",x.value=o;for(var D=0;D<h.length;D++)(0,h[D])(o)},function(D){for(x.status="rejected",x.reason=D,D=0;D<h.length;D++)(0,h[D])(void 0)}),x}var Me=Y.S;Y.S=function(a,o){E2=st(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&z(a,o),Me!==null&&Me(a,o)};var we=T(null);function Be(){var a=we.current;return a!==null?a:Er.pooledCache}function Qe(a,o){o===null?U(we,we.current):U(we,o.pool)}function qe(){var a=Be();return a===null?null:{parent:ti._currentValue,pool:a}}var yt=Error(r(460)),Ft=Error(r(474)),ze=Error(r(542)),Tt={then:function(){}};function Pt(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ts(a,o,h){switch(h=a[h],h===void 0?a.push(o):h!==o&&(o.then(hs,hs),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,_s(a),a;default:if(typeof o.status=="string")o.then(hs,hs);else{if(a=Er,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(x){if(o.status==="pending"){var D=o;D.status="fulfilled",D.value=x}},function(x){if(o.status==="pending"){var D=o;D.status="rejected",D.reason=x}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,_s(a),a}throw Zt=o,yt}}function Ut(a){try{var o=a._init;return o(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Zt=h,yt):h}}var Zt=null;function as(){if(Zt===null)throw Error(r(459));var a=Zt;return Zt=null,a}function _s(a){if(a===yt||a===ze)throw Error(r(483))}var fs=null,$s=0;function Ws(a){var o=$s;return $s+=1,fs===null&&(fs=[]),ts(fs,a,o)}function mn(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Gs(a,o){throw o.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function On(a){function o(Mt,vt){if(a){var Gt=Mt.deletions;Gt===null?(Mt.deletions=[vt],Mt.flags|=16):Gt.push(vt)}}function h(Mt,vt){if(!a)return null;for(;vt!==null;)o(Mt,vt),vt=vt.sibling;return null}function x(Mt){for(var vt=new Map;Mt!==null;)Mt.key!==null?vt.set(Mt.key,Mt):vt.set(Mt.index,Mt),Mt=Mt.sibling;return vt}function D(Mt,vt){return Mt=Ga(Mt,vt),Mt.index=0,Mt.sibling=null,Mt}function O(Mt,vt,Gt){return Mt.index=Gt,a?(Gt=Mt.alternate,Gt!==null?(Gt=Gt.index,Gt<vt?(Mt.flags|=67108866,vt):Gt):(Mt.flags|=67108866,vt)):(Mt.flags|=1048576,vt)}function le(Mt){return a&&Mt.alternate===null&&(Mt.flags|=67108866),Mt}function Ae(Mt,vt,Gt,os){return vt===null||vt.tag!==6?(vt=Pu(Gt,Mt.mode,os),vt.return=Mt,vt):(vt=D(vt,Gt),vt.return=Mt,vt)}function ft(Mt,vt,Gt,os){var rn=Gt.type;return rn===C?ns(Mt,vt,Gt.props.children,os,Gt.key):vt!==null&&(vt.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===W&&Ut(rn)===vt.type)?(vt=D(vt,Gt.props),mn(vt,Gt),vt.return=Mt,vt):(vt=_d(Gt.type,Gt.key,Gt.props,null,Mt.mode,os),mn(vt,Gt),vt.return=Mt,vt)}function Yt(Mt,vt,Gt,os){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==Gt.containerInfo||vt.stateNode.implementation!==Gt.implementation?(vt=Cd(Gt,Mt.mode,os),vt.return=Mt,vt):(vt=D(vt,Gt.children||[]),vt.return=Mt,vt)}function ns(Mt,vt,Gt,os,rn){return vt===null||vt.tag!==7?(vt=Wo(Gt,Mt.mode,os,rn),vt.return=Mt,vt):(vt=D(vt,Gt),vt.return=Mt,vt)}function us(Mt,vt,Gt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return vt=Pu(""+vt,Mt.mode,Gt),vt.return=Mt,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case g:return Gt=_d(vt.type,vt.key,vt.props,null,Mt.mode,Gt),mn(Gt,vt),Gt.return=Mt,Gt;case N:return vt=Cd(vt,Mt.mode,Gt),vt.return=Mt,vt;case W:return vt=Ut(vt),us(Mt,vt,Gt)}if($(vt)||F(vt))return vt=Wo(vt,Mt.mode,Gt,null),vt.return=Mt,vt;if(typeof vt.then=="function")return us(Mt,Ws(vt),Gt);if(vt.$$typeof===M)return us(Mt,e0(Mt,vt),Gt);Gs(Mt,vt)}return null}function $t(Mt,vt,Gt,os){var rn=vt!==null?vt.key:null;if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return rn!==null?null:Ae(Mt,vt,""+Gt,os);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case g:return Gt.key===rn?ft(Mt,vt,Gt,os):null;case N:return Gt.key===rn?Yt(Mt,vt,Gt,os):null;case W:return Gt=Ut(Gt),$t(Mt,vt,Gt,os)}if($(Gt)||F(Gt))return rn!==null?null:ns(Mt,vt,Gt,os,null);if(typeof Gt.then=="function")return $t(Mt,vt,Ws(Gt),os);if(Gt.$$typeof===M)return $t(Mt,vt,e0(Mt,Gt),os);Gs(Mt,Gt)}return null}function zt(Mt,vt,Gt,os,rn){if(typeof os=="string"&&os!==""||typeof os=="number"||typeof os=="bigint")return Mt=Mt.get(Gt)||null,Ae(vt,Mt,""+os,rn);if(typeof os=="object"&&os!==null){switch(os.$$typeof){case g:return Mt=Mt.get(os.key===null?Gt:os.key)||null,ft(vt,Mt,os,rn);case N:return Mt=Mt.get(os.key===null?Gt:os.key)||null,Yt(vt,Mt,os,rn);case W:return os=Ut(os),zt(Mt,vt,Gt,os,rn)}if($(os)||F(os))return Mt=Mt.get(Gt)||null,ns(vt,Mt,os,rn,null);if(typeof os.then=="function")return zt(Mt,vt,Gt,Ws(os),rn);if(os.$$typeof===M)return zt(Mt,vt,Gt,e0(vt,os),rn);Gs(vt,os)}return null}function Vs(Mt,vt,Gt,os){for(var rn=null,Xn=null,Js=vt,vn=vt=0,kn=null;Js!==null&&vn<Gt.length;vn++){Js.index>vn?(kn=Js,Js=null):kn=Js.sibling;var Jn=$t(Mt,Js,Gt[vn],os);if(Jn===null){Js===null&&(Js=kn);break}a&&Js&&Jn.alternate===null&&o(Mt,Js),vt=O(Jn,vt,vn),Xn===null?rn=Jn:Xn.sibling=Jn,Xn=Jn,Js=kn}if(vn===Gt.length)return h(Mt,Js),Mn&&Oa(Mt,vn),rn;if(Js===null){for(;vn<Gt.length;vn++)Js=us(Mt,Gt[vn],os),Js!==null&&(vt=O(Js,vt,vn),Xn===null?rn=Js:Xn.sibling=Js,Xn=Js);return Mn&&Oa(Mt,vn),rn}for(Js=x(Js);vn<Gt.length;vn++)kn=zt(Js,Mt,vn,Gt[vn],os),kn!==null&&(a&&kn.alternate!==null&&Js.delete(kn.key===null?vn:kn.key),vt=O(kn,vt,vn),Xn===null?rn=kn:Xn.sibling=kn,Xn=kn);return a&&Js.forEach(function(Bd){return o(Mt,Bd)}),Mn&&Oa(Mt,vn),rn}function dn(Mt,vt,Gt,os){if(Gt==null)throw Error(r(151));for(var rn=null,Xn=null,Js=vt,vn=vt=0,kn=null,Jn=Gt.next();Js!==null&&!Jn.done;vn++,Jn=Gt.next()){Js.index>vn?(kn=Js,Js=null):kn=Js.sibling;var Bd=$t(Mt,Js,Jn.value,os);if(Bd===null){Js===null&&(Js=kn);break}a&&Js&&Bd.alternate===null&&o(Mt,Js),vt=O(Bd,vt,vn),Xn===null?rn=Bd:Xn.sibling=Bd,Xn=Bd,Js=kn}if(Jn.done)return h(Mt,Js),Mn&&Oa(Mt,vn),rn;if(Js===null){for(;!Jn.done;vn++,Jn=Gt.next())Jn=us(Mt,Jn.value,os),Jn!==null&&(vt=O(Jn,vt,vn),Xn===null?rn=Jn:Xn.sibling=Jn,Xn=Jn);return Mn&&Oa(Mt,vn),rn}for(Js=x(Js);!Jn.done;vn++,Jn=Gt.next())Jn=zt(Js,Mt,vn,Jn.value,os),Jn!==null&&(a&&Jn.alternate!==null&&Js.delete(Jn.key===null?vn:Jn.key),vt=O(Jn,vt,vn),Xn===null?rn=Jn:Xn.sibling=Jn,Xn=Jn);return a&&Js.forEach(function(GO){return o(Mt,GO)}),Mn&&Oa(Mt,vn),rn}function Sr(Mt,vt,Gt,os){if(typeof Gt=="object"&&Gt!==null&&Gt.type===C&&Gt.key===null&&(Gt=Gt.props.children),typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case g:e:{for(var rn=Gt.key;vt!==null;){if(vt.key===rn){if(rn=Gt.type,rn===C){if(vt.tag===7){h(Mt,vt.sibling),os=D(vt,Gt.props.children),os.return=Mt,Mt=os;break e}}else if(vt.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===W&&Ut(rn)===vt.type){h(Mt,vt.sibling),os=D(vt,Gt.props),mn(os,Gt),os.return=Mt,Mt=os;break e}h(Mt,vt);break}else o(Mt,vt);vt=vt.sibling}Gt.type===C?(os=Wo(Gt.props.children,Mt.mode,os,Gt.key),os.return=Mt,Mt=os):(os=_d(Gt.type,Gt.key,Gt.props,null,Mt.mode,os),mn(os,Gt),os.return=Mt,Mt=os)}return le(Mt);case N:e:{for(rn=Gt.key;vt!==null;){if(vt.key===rn)if(vt.tag===4&&vt.stateNode.containerInfo===Gt.containerInfo&&vt.stateNode.implementation===Gt.implementation){h(Mt,vt.sibling),os=D(vt,Gt.children||[]),os.return=Mt,Mt=os;break e}else{h(Mt,vt);break}else o(Mt,vt);vt=vt.sibling}os=Cd(Gt,Mt.mode,os),os.return=Mt,Mt=os}return le(Mt);case W:return Gt=Ut(Gt),Sr(Mt,vt,Gt,os)}if($(Gt))return Vs(Mt,vt,Gt,os);if(F(Gt)){if(rn=F(Gt),typeof rn!="function")throw Error(r(150));return Gt=rn.call(Gt),dn(Mt,vt,Gt,os)}if(typeof Gt.then=="function")return Sr(Mt,vt,Ws(Gt),os);if(Gt.$$typeof===M)return Sr(Mt,vt,e0(Mt,Gt),os);Gs(Mt,Gt)}return typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint"?(Gt=""+Gt,vt!==null&&vt.tag===6?(h(Mt,vt.sibling),os=D(vt,Gt),os.return=Mt,Mt=os):(h(Mt,vt),os=Pu(Gt,Mt.mode,os),os.return=Mt,Mt=os),le(Mt)):h(Mt,vt)}return function(Mt,vt,Gt,os){try{$s=0;var rn=Sr(Mt,vt,Gt,os);return fs=null,rn}catch(Js){if(Js===yt||Js===ze)throw Js;var Xn=Ji(29,Js,null,Mt.mode);return Xn.lanes=os,Xn.return=Mt,Xn}finally{}}}var Tr=On(!0),Cn=On(!1),Bs=!1;function Ts(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pr(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function on(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Nn(a,o,h){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,(ir&2)!==0){var D=x.pending;return D===null?o.next=o:(o.next=D.next,D.next=o),x.pending=o,o=Xi(a),Lu(a,null,h),o}return Mu(a,x,o,h),Xi(a)}function nr(a,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var x=o.lanes;x&=a.pendingLanes,h|=x,o.lanes=h,it(a,h)}}function gi(a,o){var h=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,h===x)){var D=null,O=null;if(h=h.firstBaseUpdate,h!==null){do{var le={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};O===null?D=O=le:O=O.next=le,h=h.next}while(h!==null);O===null?D=O=o:O=O.next=o}else D=O=o;h={baseState:x.baseState,firstBaseUpdate:D,lastBaseUpdate:O,shared:x.shared,callbacks:x.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=o:a.next=o,h.lastBaseUpdate=o}var Ui=!1;function yr(){if(Ui){var a=E;if(a!==null)throw a}}function ii(a,o,h,x){Ui=!1;var D=a.updateQueue;Bs=!1;var O=D.firstBaseUpdate,le=D.lastBaseUpdate,Ae=D.shared.pending;if(Ae!==null){D.shared.pending=null;var ft=Ae,Yt=ft.next;ft.next=null,le===null?O=Yt:le.next=Yt,le=ft;var ns=a.alternate;ns!==null&&(ns=ns.updateQueue,Ae=ns.lastBaseUpdate,Ae!==le&&(Ae===null?ns.firstBaseUpdate=Yt:Ae.next=Yt,ns.lastBaseUpdate=ft))}if(O!==null){var us=D.baseState;le=0,ns=Yt=ft=null,Ae=O;do{var $t=Ae.lane&-536870913,zt=$t!==Ae.lane;if(zt?(An&$t)===$t:(x&$t)===$t){$t!==0&&$t===b&&(Ui=!0),ns!==null&&(ns=ns.next={lane:0,tag:Ae.tag,payload:Ae.payload,callback:null,next:null});e:{var Vs=a,dn=Ae;$t=o;var Sr=h;switch(dn.tag){case 1:if(Vs=dn.payload,typeof Vs=="function"){us=Vs.call(Sr,us,$t);break e}us=Vs;break e;case 3:Vs.flags=Vs.flags&-65537|128;case 0:if(Vs=dn.payload,$t=typeof Vs=="function"?Vs.call(Sr,us,$t):Vs,$t==null)break e;us=p({},us,$t);break e;case 2:Bs=!0}}$t=Ae.callback,$t!==null&&(a.flags|=64,zt&&(a.flags|=8192),zt=D.callbacks,zt===null?D.callbacks=[$t]:zt.push($t))}else zt={lane:$t,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},ns===null?(Yt=ns=zt,ft=us):ns=ns.next=zt,le|=$t;if(Ae=Ae.next,Ae===null){if(Ae=D.shared.pending,Ae===null)break;zt=Ae,Ae=zt.next,zt.next=null,D.lastBaseUpdate=zt,D.shared.pending=null}}while(!0);ns===null&&(ft=us),D.baseState=ft,D.firstBaseUpdate=Yt,D.lastBaseUpdate=ns,O===null&&(D.shared.lanes=0),Id|=le,a.lanes=le,a.memoizedState=us}}function Zi(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function ai(a,o){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)Zi(h[a],o)}var Tn=T(null),Gn=T(0);function Ar(a,o){a=wc,U(Gn,a),U(Tn,o),wc=a|o.baseLanes}function qn(){U(Gn,wc),U(Tn,Tn.current)}function xi(){wc=Gn.current,I(Tn),I(Gn)}var kr=T(null),Yn=null;function si(a){var o=a.alternate;U(Fn,Fn.current&1),U(kr,a),Yn===null&&(o===null||Tn.current!==null||o.memoizedState!==null)&&(Yn=a)}function rr(a){U(Fn,Fn.current),U(kr,a),Yn===null&&(Yn=a)}function li(a){a.tag===22?(U(Fn,Fn.current),U(kr,a),Yn===null&&(Yn=a)):oi()}function oi(){U(Fn,Fn.current),U(kr,kr.current)}function hr(a){I(kr),Yn===a&&(Yn=null),I(Fn)}var Fn=T(0);function ea(a){for(var o=a;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||E1(h)||j1(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Gr=0,tn=null,nn=null,Vn=null,Ca=!1,Xa=!1,ha=!1,ci=0,Vo=0,$o=null,s0=0;function br(){throw Error(r(321))}function Gf(a,o){if(o===null)return!1;for(var h=0;h<o.length&&h<a.length;h++)if(!Li(a[h],o[h]))return!1;return!0}function Yf(a,o,h,x,D,O){return Gr=O,tn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=a===null||a.memoizedState===null?WN:W_,ha=!1,O=h(x,D),ha=!1,Xa&&(O=po(o,h,x,D)),n0(a),O}function n0(a){Y.H=Zf;var o=nn!==null&&nn.next!==null;if(Gr=0,Vn=nn=tn=null,Ca=!1,Vo=0,$o=null,o)throw Error(r(300));a===null||Ri||(a=a.dependencies,a!==null&&Zh(a)&&(Ri=!0))}function po(a,o,h,x){tn=a;var D=0;do{if(Xa&&($o=null),Vo=0,Xa=!1,25<=D)throw Error(r(301));if(D+=1,Vn=nn=null,a.updateQueue!=null){var O=a.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Y.H=BN,O=o(h,x)}while(Xa);return O}function M_(){var a=Y.H,o=a.useState()[0];return o=typeof o.then=="function"?Ho(o):o,a=a.useState()[0],(nn!==null?nn.memoizedState:null)!==a&&(tn.flags|=1024),o}function Vf(){var a=ci!==0;return ci=0,a}function $f(a,o,h){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~h}function r0(a){if(Ca){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ca=!1}Gr=0,Vn=nn=tn=null,Xa=!1,Vo=ci=0,$o=null}function Di(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?tn.memoizedState=Vn=a:Vn=Vn.next=a,Vn}function Yr(){if(nn===null){var a=tn.alternate;a=a!==null?a.memoizedState:null}else a=nn.next;var o=Vn===null?tn.memoizedState:Vn.next;if(o!==null)Vn=o,nn=a;else{if(a===null)throw tn.alternate===null?Error(r(467)):Error(r(310));nn=a,a={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Vn===null?tn.memoizedState=Vn=a:Vn=Vn.next=a}return Vn}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ho(a){var o=Vo;return Vo+=1,$o===null&&($o=[]),a=ts($o,a,o),o=tn,(Vn===null?o.memoizedState:Vn.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?WN:W_),a}function vd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ho(a);if(a.$$typeof===M)return ki(a)}throw Error(r(438,String(a)))}function Dc(a){var o=null,h=tn.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var x=tn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(o={data:x.data.map(function(D){return D.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=Wu(),tn.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(a),x=0;x<a;x++)h[x]=S;return o.index++,h}function Pl(a,o){return typeof o=="function"?o(a):o}function i0(a){var o=Yr();return Dd(o,nn,a)}function Dd(a,o,h){var x=a.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=h;var D=a.baseQueue,O=x.pending;if(O!==null){if(D!==null){var le=D.next;D.next=O.next,O.next=le}o.baseQueue=D=O,x.pending=null}if(O=a.baseState,D===null)a.memoizedState=O;else{o=D.next;var Ae=le=null,ft=null,Yt=o,ns=!1;do{var us=Yt.lane&-536870913;if(us!==Yt.lane?(An&us)===us:(Gr&us)===us){var $t=Yt.revertLane;if($t===0)ft!==null&&(ft=ft.next={lane:0,revertLane:0,gesture:null,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null}),us===b&&(ns=!0);else if((Gr&$t)===$t){Yt=Yt.next,$t===b&&(ns=!0);continue}else us={lane:0,revertLane:Yt.revertLane,gesture:null,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},ft===null?(Ae=ft=us,le=O):ft=ft.next=us,tn.lanes|=$t,Id|=$t;us=Yt.action,ha&&h(O,us),O=Yt.hasEagerState?Yt.eagerState:h(O,us)}else $t={lane:us,revertLane:Yt.revertLane,gesture:Yt.gesture,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},ft===null?(Ae=ft=$t,le=O):ft=ft.next=$t,tn.lanes|=us,Id|=us;Yt=Yt.next}while(Yt!==null&&Yt!==o);if(ft===null?le=O:ft.next=Ae,!Li(O,a.memoizedState)&&(Ri=!0,ns&&(h=E,h!==null)))throw h;a.memoizedState=O,a.baseState=le,a.baseQueue=ft,x.lastRenderedState=O}return D===null&&(x.lanes=0),[a.memoizedState,x.dispatch]}function a0(a){var o=Yr(),h=o.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var x=h.dispatch,D=h.pending,O=o.memoizedState;if(D!==null){h.pending=null;var le=D=D.next;do O=a(O,le.action),le=le.next;while(le!==D);Li(O,o.memoizedState)||(Ri=!0),o.memoizedState=O,o.baseQueue===null&&(o.baseState=O),h.lastRenderedState=O}return[O,x]}function l0(a,o,h){var x=tn,D=Yr(),O=Mn;if(O){if(h===void 0)throw Error(r(407));h=h()}else h=o();var le=!Li((nn||D).memoizedState,h);if(le&&(D.memoizedState=h,Ri=!0),D=D.queue,L_(zf.bind(null,x,D,a),[a]),D.getSnapshot!==o||le||Vn!==null&&Vn.memoizedState.tag&1){if(x.flags|=2048,Tc(9,{destroy:void 0},Hf.bind(null,x,D,h,o),null),Er===null)throw Error(r(349));O||(Gr&127)!==0||_o(x,o,h)}return h}function _o(a,o,h){a.flags|=16384,a={getSnapshot:o,value:h},o=tn.updateQueue,o===null?(o=Wu(),tn.updateQueue=o,o.stores=[a]):(h=o.stores,h===null?o.stores=[a]:h.push(a))}function Hf(a,o,h,x){o.value=h,o.getSnapshot=x,Ug(o)&&qf(a)}function zf(a,o,h){return h(function(){Ug(o)&&qf(a)})}function Ug(a){var o=a.getSnapshot;a=a.value;try{var h=o();return!Li(a,h)}catch{return!0}}function qf(a){var o=go(a,2);o!==null&&sl(o,a,2)}function zo(a){var o=Di();if(typeof a=="function"){var h=a;if(a=h(),ha){Fe(!0);try{h()}finally{Fe(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:a},o}function Wg(a,o,h,x){return a.baseState=h,Dd(a,nn,typeof x=="function"?x:Pl)}function Bg(a,o,h,x,D){if(Gg(a))throw Error(r(485));if(a=o.action,a!==null){var O={payload:D,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){O.listeners.push(le)}};Y.T!==null?h(!0):O.isTransition=!1,x(O),h=o.pending,h===null?(O.next=o.pending=O,Fg(o,O)):(O.next=h.next,o.pending=h.next=O)}}function Fg(a,o){var h=o.action,x=o.payload,D=a.state;if(o.isTransition){var O=Y.T,le={};Y.T=le;try{var Ae=h(D,x),ft=Y.S;ft!==null&&ft(le,Ae),Xf(a,o,Ae)}catch(Yt){Rc(a,o,Yt)}finally{O!==null&&le.types!==null&&(O.types=le.types),Y.T=O}}else try{O=h(D,x),Xf(a,o,O)}catch(Yt){Rc(a,o,Yt)}}function Xf(a,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(x){Kg(a,o,x)},function(x){return Rc(a,o,x)}):Kg(a,o,h)}function Kg(a,o,h){o.status="fulfilled",o.value=h,o0(o),a.state=h,o=a.pending,o!==null&&(h=o.next,h===o?a.pending=null:(h=h.next,o.next=h,Fg(a,h)))}function Rc(a,o,h){var x=a.pending;if(a.pending=null,x!==null){x=x.next;do o.status="rejected",o.reason=h,o0(o),o=o.next;while(o!==x)}a.action=null}function o0(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Bu(a,o){return o}function Al(a,o){if(Mn){var h=Er.formState;if(h!==null){e:{var x=tn;if(Mn){if(Rr){t:{for(var D=Rr,O=Qr;D.nodeType!==8;){if(!O){D=null;break t}if(D=kl(D.nextSibling),D===null){D=null;break t}}O=D.data,D=O==="F!"||O==="F"?D:null}if(D){Rr=kl(D.nextSibling),x=D.data==="F!";break e}}Fo(x)}x=!1}x&&(o=h[0])}}return h=Di(),h.memoizedState=h.baseState=o,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:o},h.queue=x,h=AN.bind(null,tn,x),x.dispatch=h,x=zo(!1),O=U_.bind(null,tn,!1,x.queue),x=Di(),D={state:o,dispatch:null,action:a,pending:null},x.queue=D,h=Bg.bind(null,tn,D,O,h),D.dispatch=h,x.memoizedState=a,[o,h,!1]}function Co(a){var o=Yr();return yo(o,nn,a)}function yo(a,o,h){if(o=Dd(a,o,Bu)[0],a=i0(Pl)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var x=Ho(o)}catch(le){throw le===yt?ze:le}else x=o;o=Yr();var D=o.queue,O=D.dispatch;return h!==o.memoizedState&&(tn.flags|=2048,Tc(9,{destroy:void 0},c0.bind(null,D,h),null)),[x,O,a]}function c0(a,o){a.action=o}function d0(a){var o=Yr(),h=nn;if(h!==null)return yo(o,h,a);Yr(),o=o.memoizedState,h=Yr();var x=h.queue.dispatch;return h.memoizedState=a,[o,x,!1]}function Tc(a,o,h,x){return a={tag:a,create:h,deps:x,inst:o,next:null},o=tn.updateQueue,o===null&&(o=Wu(),tn.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=a.next=a:(x=h.next,h.next=a,a.next=x,o.lastEffect=a),a}function Qg(){return Yr().memoizedState}function Rd(a,o,h,x){var D=Di();tn.flags|=a,D.memoizedState=Tc(1|o,{destroy:void 0},h,x===void 0?null:x)}function Td(a,o,h,x){var D=Yr();x=x===void 0?null:x;var O=D.memoizedState.inst;nn!==null&&x!==null&&Gf(x,nn.memoizedState.deps)?D.memoizedState=Tc(o,O,h,x):(tn.flags|=a,D.memoizedState=Tc(1|o,O,h,x))}function NN(a,o){Rd(8390656,8,a,o)}function L_(a,o){Td(2048,8,a,o)}function UI(a){tn.flags|=4;var o=tn.updateQueue;if(o===null)o=Wu(),tn.updateQueue=o,o.events=[a];else{var h=o.events;h===null?o.events=[a]:h.push(a)}}function SN(a){var o=Yr().memoizedState;return UI({ref:o,nextImpl:a}),function(){if((ir&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function vN(a,o){return Td(4,2,a,o)}function DN(a,o){return Td(4,4,a,o)}function RN(a,o){if(typeof o=="function"){a=a();var h=o(a);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function TN(a,o,h){h=h!=null?h.concat([a]):null,Td(4,4,RN.bind(null,o,a),h)}function w_(){}function EN(a,o){var h=Yr();o=o===void 0?null:o;var x=h.memoizedState;return o!==null&&Gf(o,x[1])?x[0]:(h.memoizedState=[a,o],a)}function jN(a,o){var h=Yr();o=o===void 0?null:o;var x=h.memoizedState;if(o!==null&&Gf(o,x[1]))return x[0];if(x=a(),ha){Fe(!0);try{a()}finally{Fe(!1)}}return h.memoizedState=[x,o],x}function P_(a,o,h){return h===void 0||(Gr&1073741824)!==0&&(An&261930)===0?a.memoizedState=o:(a.memoizedState=h,a=I2(),tn.lanes|=a,Id|=a,h)}function IN(a,o,h,x){return Li(h,o)?h:Tn.current!==null?(a=P_(a,h,x),Li(a,o)||(Ri=!0),a):(Gr&42)===0||(Gr&1073741824)!==0&&(An&261930)===0?(Ri=!0,a.memoizedState=h):(a=I2(),tn.lanes|=a,Id|=a,o)}function ON(a,o,h,x,D){var O=K.p;K.p=O!==0&&8>O?O:8;var le=Y.T,Ae={};Y.T=Ae,U_(a,!1,o,h);try{var ft=D(),Yt=Y.S;if(Yt!==null&&Yt(Ae,ft),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var ns=Ne(ft,x);Jf(a,o,ns,Sl(a))}else Jf(a,o,x,Sl(a))}catch(us){Jf(a,o,{then:function(){},status:"rejected",reason:us},Sl())}finally{K.p=O,le!==null&&Ae.types!==null&&(le.types=Ae.types),Y.T=le}}function WI(){}function A_(a,o,h,x){if(a.tag!==5)throw Error(r(476));var D=MN(a).queue;ON(a,D,o,w,h===null?WI:function(){return LN(a),h(x)})}function MN(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:w},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:h},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function LN(a){var o=MN(a);o.next===null&&(o=a.alternate.memoizedState),Jf(a,o.next.queue,{},Sl())}function k_(){return ki(gm)}function wN(){return Yr().memoizedState}function PN(){return Yr().memoizedState}function BI(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var h=Sl();a=on(h);var x=Nn(o,a,h);x!==null&&(sl(x,o,h),nr(x,o,h)),o={cache:Sd()},a.payload=o;return}o=o.return}}function FI(a,o,h){var x=Sl();h={lane:x,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Gg(a)?kN(o,h):(h=Yh(a,o,h,x),h!==null&&(sl(h,a,x),UN(h,o,x)))}function AN(a,o,h){var x=Sl();Jf(a,o,h,x)}function Jf(a,o,h,x){var D={lane:x,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Gg(a))kN(o,D);else{var O=a.alternate;if(a.lanes===0&&(O===null||O.lanes===0)&&(O=o.lastRenderedReducer,O!==null))try{var le=o.lastRenderedState,Ae=O(le,h);if(D.hasEagerState=!0,D.eagerState=Ae,Li(Ae,le))return Mu(a,o,D,0),Er===null&&Ou(),!1}catch{}finally{}if(h=Yh(a,o,D,x),h!==null)return sl(h,a,x),UN(h,o,x),!0}return!1}function U_(a,o,h,x){if(x={lane:2,revertLane:x1(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Gg(a)){if(o)throw Error(r(479))}else o=Yh(a,h,x,2),o!==null&&sl(o,a,2)}function Gg(a){var o=a.alternate;return a===tn||o!==null&&o===tn}function kN(a,o){Xa=Ca=!0;var h=a.pending;h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o}function UN(a,o,h){if((h&4194048)!==0){var x=o.lanes;x&=a.pendingLanes,h|=x,o.lanes=h,it(a,h)}}var Zf={readContext:ki,use:vd,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useLayoutEffect:br,useInsertionEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useSyncExternalStore:br,useId:br,useHostTransitionStatus:br,useFormState:br,useActionState:br,useOptimistic:br,useMemoCache:br,useCacheRefresh:br};Zf.useEffectEvent=br;var WN={readContext:ki,use:vd,useCallback:function(a,o){return Di().memoizedState=[a,o===void 0?null:o],a},useContext:ki,useEffect:NN,useImperativeHandle:function(a,o,h){h=h!=null?h.concat([a]):null,Rd(4194308,4,RN.bind(null,o,a),h)},useLayoutEffect:function(a,o){return Rd(4194308,4,a,o)},useInsertionEffect:function(a,o){Rd(4,2,a,o)},useMemo:function(a,o){var h=Di();o=o===void 0?null:o;var x=a();if(ha){Fe(!0);try{a()}finally{Fe(!1)}}return h.memoizedState=[x,o],x},useReducer:function(a,o,h){var x=Di();if(h!==void 0){var D=h(o);if(ha){Fe(!0);try{h(o)}finally{Fe(!1)}}}else D=o;return x.memoizedState=x.baseState=D,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:D},x.queue=a,a=a.dispatch=FI.bind(null,tn,a),[x.memoizedState,a]},useRef:function(a){var o=Di();return a={current:a},o.memoizedState=a},useState:function(a){a=zo(a);var o=a.queue,h=AN.bind(null,tn,o);return o.dispatch=h,[a.memoizedState,h]},useDebugValue:w_,useDeferredValue:function(a,o){var h=Di();return P_(h,a,o)},useTransition:function(){var a=zo(!1);return a=ON.bind(null,tn,a.queue,!0,!1),Di().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,h){var x=tn,D=Di();if(Mn){if(h===void 0)throw Error(r(407));h=h()}else{if(h=o(),Er===null)throw Error(r(349));(An&127)!==0||_o(x,o,h)}D.memoizedState=h;var O={value:h,getSnapshot:o};return D.queue=O,NN(zf.bind(null,x,O,a),[a]),x.flags|=2048,Tc(9,{destroy:void 0},Hf.bind(null,x,O,h,o),null),h},useId:function(){var a=Di(),o=Er.identifierPrefix;if(Mn){var h=za,x=Ha;h=(x&~(1<<32-rt(x)-1)).toString(32)+h,o="_"+o+"R_"+h,h=ci++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=s0++,o="_"+o+"r_"+h.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:k_,useFormState:Al,useActionState:Al,useOptimistic:function(a){var o=Di();o.memoizedState=o.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=U_.bind(null,tn,!0,h),h.dispatch=o,[a,o]},useMemoCache:Dc,useCacheRefresh:function(){return Di().memoizedState=BI.bind(null,tn)},useEffectEvent:function(a){var o=Di(),h={impl:a};return o.memoizedState=h,function(){if((ir&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},W_={readContext:ki,use:vd,useCallback:EN,useContext:ki,useEffect:L_,useImperativeHandle:TN,useInsertionEffect:vN,useLayoutEffect:DN,useMemo:jN,useReducer:i0,useRef:Qg,useState:function(){return i0(Pl)},useDebugValue:w_,useDeferredValue:function(a,o){var h=Yr();return IN(h,nn.memoizedState,a,o)},useTransition:function(){var a=i0(Pl)[0],o=Yr().memoizedState;return[typeof a=="boolean"?a:Ho(a),o]},useSyncExternalStore:l0,useId:wN,useHostTransitionStatus:k_,useFormState:Co,useActionState:Co,useOptimistic:function(a,o){var h=Yr();return Wg(h,nn,a,o)},useMemoCache:Dc,useCacheRefresh:PN};W_.useEffectEvent=SN;var BN={readContext:ki,use:vd,useCallback:EN,useContext:ki,useEffect:L_,useImperativeHandle:TN,useInsertionEffect:vN,useLayoutEffect:DN,useMemo:jN,useReducer:a0,useRef:Qg,useState:function(){return a0(Pl)},useDebugValue:w_,useDeferredValue:function(a,o){var h=Yr();return nn===null?P_(h,a,o):IN(h,nn.memoizedState,a,o)},useTransition:function(){var a=a0(Pl)[0],o=Yr().memoizedState;return[typeof a=="boolean"?a:Ho(a),o]},useSyncExternalStore:l0,useId:wN,useHostTransitionStatus:k_,useFormState:d0,useActionState:d0,useOptimistic:function(a,o){var h=Yr();return nn!==null?Wg(h,nn,a,o):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:Dc,useCacheRefresh:PN};BN.useEffectEvent=SN;function B_(a,o,h,x){o=a.memoizedState,h=h(x,o),h=h==null?o:p({},o,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var F_={enqueueSetState:function(a,o,h){a=a._reactInternals;var x=Sl(),D=on(x);D.payload=o,h!=null&&(D.callback=h),o=Nn(a,D,x),o!==null&&(sl(o,a,x),nr(o,a,x))},enqueueReplaceState:function(a,o,h){a=a._reactInternals;var x=Sl(),D=on(x);D.tag=1,D.payload=o,h!=null&&(D.callback=h),o=Nn(a,D,x),o!==null&&(sl(o,a,x),nr(o,a,x))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var h=Sl(),x=on(h);x.tag=2,o!=null&&(x.callback=o),o=Nn(a,x,h),o!==null&&(sl(o,a,h),nr(o,a,h))}};function FN(a,o,h,x,D,O,le){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,O,le):o.prototype&&o.prototype.isPureReactComponent?!uo(h,x)||!uo(D,O):!0}function KN(a,o,h,x){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,x),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,x),o.state!==a&&F_.enqueueReplaceState(o,o.state,null)}function Fu(a,o){var h=o;if("ref"in o){h={};for(var x in o)x!=="ref"&&(h[x]=o[x])}if(a=a.defaultProps){h===o&&(h=p({},h));for(var D in a)h[D]===void 0&&(h[D]=a[D])}return h}function QN(a){Iu(a)}function GN(a){console.error(a)}function YN(a){Iu(a)}function Yg(a,o){try{var h=a.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(x){setTimeout(function(){throw x})}}function VN(a,o,h){try{var x=a.onCaughtError;x(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function K_(a,o,h){return h=on(h),h.tag=3,h.payload={element:null},h.callback=function(){Yg(a,o)},h}function $N(a){return a=on(a),a.tag=3,a}function HN(a,o,h,x){var D=h.type.getDerivedStateFromError;if(typeof D=="function"){var O=x.value;a.payload=function(){return D(O)},a.callback=function(){VN(o,h,x)}}var le=h.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(a.callback=function(){VN(o,h,x),typeof D!="function"&&(Od===null?Od=new Set([this]):Od.add(this));var Ae=x.stack;this.componentDidCatch(x.value,{componentStack:Ae!==null?Ae:""})})}function KI(a,o,h,x,D){if(h.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(o=h.alternate,o!==null&&Go(o,h,D,!0),h=kr.current,h!==null){switch(h.tag){case 31:case 13:return Yn===null?nx():h.alternate===null&&di===0&&(di=3),h.flags&=-257,h.flags|=65536,h.lanes=D,x===Tt?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([x]):o.add(x),f1(a,x,D)),!1;case 22:return h.flags|=65536,x===Tt?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([x])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([x]):h.add(x)),f1(a,x,D)),!1}throw Error(r(435,h.tag))}return f1(a,x,D),nx(),!1}if(Mn)return o=kr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=D,x!==yl&&(a=Error(r(422),{cause:x}),bd(Ya(a,h)))):(x!==yl&&(o=Error(r(423),{cause:x}),bd(Ya(o,h))),a=a.current.alternate,a.flags|=65536,D&=-D,a.lanes|=D,x=Ya(x,h),D=K_(a.stateNode,x,D),gi(a,D),di!==4&&(di=2)),!1;var O=Error(r(520),{cause:x});if(O=Ya(O,h),lm===null?lm=[O]:lm.push(O),di!==4&&(di=2),o===null)return!0;x=Ya(x,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,a=D&-D,h.lanes|=a,a=K_(h.stateNode,x,a),gi(h,a),!1;case 1:if(o=h.type,O=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Od===null||!Od.has(O))))return h.flags|=65536,D&=-D,h.lanes|=D,D=$N(D),HN(D,a,h,x),gi(h,D),!1}h=h.return}while(h!==null);return!1}var Q_=Error(r(461)),Ri=!1;function fa(a,o,h,x){o.child=a===null?Cn(o,null,h,x):Tr(o,a.child,h,x)}function zN(a,o,h,x,D){h=h.render;var O=o.ref;if("ref"in x){var le={};for(var Ae in x)Ae!=="ref"&&(le[Ae]=x[Ae])}else le=x;return Yo(o),x=Yf(a,o,h,le,O,D),Ae=Vf(),a!==null&&!Ri?($f(a,o,D),Ec(a,o,D)):(Mn&&Ae&&Ff(o),o.flags|=1,fa(a,o,x,D),o.child)}function qN(a,o,h,x,D){if(a===null){var O=h.type;return typeof O=="function"&&!$h(O)&&O.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=O,XN(a,o,O,x,D)):(a=_d(h.type,null,x,o,o.mode,D),a.ref=o.ref,a.return=o,o.child=a)}if(O=a.child,!X_(a,D)){var le=O.memoizedProps;if(h=h.compare,h=h!==null?h:uo,h(le,x)&&a.ref===o.ref)return Ec(a,o,D)}return o.flags|=1,a=Ga(O,x),a.ref=o.ref,a.return=o,o.child=a}function XN(a,o,h,x,D){if(a!==null){var O=a.memoizedProps;if(uo(O,x)&&a.ref===o.ref)if(Ri=!1,o.pendingProps=x=O,X_(a,D))(a.flags&131072)!==0&&(Ri=!0);else return o.lanes=a.lanes,Ec(a,o,D)}return G_(a,o,h,x,D)}function JN(a,o,h,x){var D=x.children,O=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((o.flags&128)!==0){if(O=O!==null?O.baseLanes|h:h,a!==null){for(x=o.child=a.child,D=0;x!==null;)D=D|x.lanes|x.childLanes,x=x.sibling;x=D&~O}else x=0,o.child=null;return ZN(a,o,O,h,x)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Qe(o,O!==null?O.cachePool:null),O!==null?Ar(o,O):qn(),li(o);else return x=o.lanes=536870912,ZN(a,o,O!==null?O.baseLanes|h:h,h,x)}else O!==null?(Qe(o,O.cachePool),Ar(o,O),oi(),o.memoizedState=null):(a!==null&&Qe(o,null),qn(),oi());return fa(a,o,D,h),o.child}function em(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function ZN(a,o,h,x,D){var O=Be();return O=O===null?null:{parent:ti._currentValue,pool:O},o.memoizedState={baseLanes:h,cachePool:O},a!==null&&Qe(o,null),qn(),li(o),a!==null&&Go(a,o,x,!0),o.childLanes=D,null}function Vg(a,o){return o=Hg({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function e2(a,o,h){return Tr(o,a.child,null,h),a=Vg(o,o.pendingProps),a.flags|=2,hr(o),o.memoizedState=null,a}function QI(a,o,h){var x=o.pendingProps,D=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Mn){if(x.mode==="hidden")return a=Vg(o,x),o.lanes=536870912,em(null,a);if(rr(o),(a=Rr)?(a=hS(a,Qr),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Bo!==null?{id:Ha,overflow:za}:null,retryLane:536870912,hydrationErrors:null},h=Hh(a),h.return=o,o.child=h,Pi=o,Rr=null)):a=null,a===null)throw Fo(o);return o.lanes=536870912,null}return Vg(o,x)}var O=a.memoizedState;if(O!==null){var le=O.dehydrated;if(rr(o),D)if(o.flags&256)o.flags&=-257,o=e2(a,o,h);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(Ri||Go(a,o,h,!1),D=(h&a.childLanes)!==0,Ri||D){if(x=Er,x!==null&&(le=St(x,h),le!==0&&le!==O.retryLane))throw O.retryLane=le,go(a,le),sl(x,a,le),Q_;nx(),o=e2(a,o,h)}else a=O.treeContext,Rr=kl(le.nextSibling),Pi=o,Mn=!0,ua=null,Qr=!1,a!==null&&Ag(o,a),o=Vg(o,x),o.flags|=4096;return o}return a=Ga(a.child,{mode:x.mode,children:x.children}),a.ref=o.ref,o.child=a,a.return=o,a}function $g(a,o){var h=o.ref;if(h===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(a===null||a.ref!==h)&&(o.flags|=4194816)}}function G_(a,o,h,x,D){return Yo(o),h=Yf(a,o,h,x,void 0,D),x=Vf(),a!==null&&!Ri?($f(a,o,D),Ec(a,o,D)):(Mn&&x&&Ff(o),o.flags|=1,fa(a,o,h,D),o.child)}function t2(a,o,h,x,D,O){return Yo(o),o.updateQueue=null,h=po(o,x,h,D),n0(a),x=Vf(),a!==null&&!Ri?($f(a,o,O),Ec(a,o,O)):(Mn&&x&&Ff(o),o.flags|=1,fa(a,o,h,O),o.child)}function s2(a,o,h,x,D){if(Yo(o),o.stateNode===null){var O=wi,le=h.contextType;typeof le=="object"&&le!==null&&(O=ki(le)),O=new h(x,O),o.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=F_,o.stateNode=O,O._reactInternals=o,O=o.stateNode,O.props=x,O.state=o.memoizedState,O.refs={},Ts(o),le=h.contextType,O.context=typeof le=="object"&&le!==null?ki(le):wi,O.state=o.memoizedState,le=h.getDerivedStateFromProps,typeof le=="function"&&(B_(o,h,le,x),O.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(le=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),le!==O.state&&F_.enqueueReplaceState(O,O.state,null),ii(o,x,O,D),yr(),O.state=o.memoizedState),typeof O.componentDidMount=="function"&&(o.flags|=4194308),x=!0}else if(a===null){O=o.stateNode;var Ae=o.memoizedProps,ft=Fu(h,Ae);O.props=ft;var Yt=O.context,ns=h.contextType;le=wi,typeof ns=="object"&&ns!==null&&(le=ki(ns));var us=h.getDerivedStateFromProps;ns=typeof us=="function"||typeof O.getSnapshotBeforeUpdate=="function",Ae=o.pendingProps!==Ae,ns||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Ae||Yt!==le)&&KN(o,O,x,le),Bs=!1;var $t=o.memoizedState;O.state=$t,ii(o,x,O,D),yr(),Yt=o.memoizedState,Ae||$t!==Yt||Bs?(typeof us=="function"&&(B_(o,h,us,x),Yt=o.memoizedState),(ft=Bs||FN(o,h,ft,x,$t,Yt,le))?(ns||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(o.flags|=4194308)):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=x,o.memoizedState=Yt),O.props=x,O.state=Yt,O.context=le,x=ft):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),x=!1)}else{O=o.stateNode,Pr(a,o),le=o.memoizedProps,ns=Fu(h,le),O.props=ns,us=o.pendingProps,$t=O.context,Yt=h.contextType,ft=wi,typeof Yt=="object"&&Yt!==null&&(ft=ki(Yt)),Ae=h.getDerivedStateFromProps,(Yt=typeof Ae=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(le!==us||$t!==ft)&&KN(o,O,x,ft),Bs=!1,$t=o.memoizedState,O.state=$t,ii(o,x,O,D),yr();var zt=o.memoizedState;le!==us||$t!==zt||Bs||a!==null&&a.dependencies!==null&&Zh(a.dependencies)?(typeof Ae=="function"&&(B_(o,h,Ae,x),zt=o.memoizedState),(ns=Bs||FN(o,h,ns,x,$t,zt,ft)||a!==null&&a.dependencies!==null&&Zh(a.dependencies))?(Yt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,zt,ft),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,zt,ft)),typeof O.componentDidUpdate=="function"&&(o.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof O.componentDidUpdate!="function"||le===a.memoizedProps&&$t===a.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||le===a.memoizedProps&&$t===a.memoizedState||(o.flags|=1024),o.memoizedProps=x,o.memoizedState=zt),O.props=x,O.state=zt,O.context=ft,x=ns):(typeof O.componentDidUpdate!="function"||le===a.memoizedProps&&$t===a.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||le===a.memoizedProps&&$t===a.memoizedState||(o.flags|=1024),x=!1)}return O=x,$g(a,o),x=(o.flags&128)!==0,O||x?(O=o.stateNode,h=x&&typeof h.getDerivedStateFromError!="function"?null:O.render(),o.flags|=1,a!==null&&x?(o.child=Tr(o,a.child,null,D),o.child=Tr(o,null,h,D)):fa(a,o,h,D),o.memoizedState=O.state,a=o.child):a=Ec(a,o,D),a}function n2(a,o,h,x){return Sc(),o.flags|=256,fa(a,o,h,x),o.child}var Y_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function V_(a){return{baseLanes:a,cachePool:qe()}}function $_(a,o,h){return a=a!==null?a.childLanes&~h:0,o&&(a|=Nl),a}function r2(a,o,h){var x=o.pendingProps,D=!1,O=(o.flags&128)!==0,le;if((le=O)||(le=a!==null&&a.memoizedState===null?!1:(Fn.current&2)!==0),le&&(D=!0,o.flags&=-129),le=(o.flags&32)!==0,o.flags&=-33,a===null){if(Mn){if(D?si(o):oi(),(a=Rr)?(a=hS(a,Qr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Bo!==null?{id:Ha,overflow:za}:null,retryLane:536870912,hydrationErrors:null},h=Hh(a),h.return=o,o.child=h,Pi=o,Rr=null)):a=null,a===null)throw Fo(o);return j1(a)?o.lanes=32:o.lanes=536870912,null}var Ae=x.children;return x=x.fallback,D?(oi(),D=o.mode,Ae=Hg({mode:"hidden",children:Ae},D),x=Wo(x,D,h,null),Ae.return=o,x.return=o,Ae.sibling=x,o.child=Ae,x=o.child,x.memoizedState=V_(h),x.childLanes=$_(a,le,h),o.memoizedState=Y_,em(null,x)):(si(o),H_(o,Ae))}var ft=a.memoizedState;if(ft!==null&&(Ae=ft.dehydrated,Ae!==null)){if(O)o.flags&256?(si(o),o.flags&=-257,o=z_(a,o,h)):o.memoizedState!==null?(oi(),o.child=a.child,o.flags|=128,o=null):(oi(),Ae=x.fallback,D=o.mode,x=Hg({mode:"visible",children:x.children},D),Ae=Wo(Ae,D,h,null),Ae.flags|=2,x.return=o,Ae.return=o,x.sibling=Ae,o.child=x,Tr(o,a.child,null,h),x=o.child,x.memoizedState=V_(h),x.childLanes=$_(a,le,h),o.memoizedState=Y_,o=em(null,x));else if(si(o),j1(Ae)){if(le=Ae.nextSibling&&Ae.nextSibling.dataset,le)var Yt=le.dgst;le=Yt,x=Error(r(419)),x.stack="",x.digest=le,bd({value:x,source:null,stack:null}),o=z_(a,o,h)}else if(Ri||Go(a,o,h,!1),le=(h&a.childLanes)!==0,Ri||le){if(le=Er,le!==null&&(x=St(le,h),x!==0&&x!==ft.retryLane))throw ft.retryLane=x,go(a,x),sl(le,a,x),Q_;E1(Ae)||nx(),o=z_(a,o,h)}else E1(Ae)?(o.flags|=192,o.child=a.child,o=null):(a=ft.treeContext,Rr=kl(Ae.nextSibling),Pi=o,Mn=!0,ua=null,Qr=!1,a!==null&&Ag(o,a),o=H_(o,x.children),o.flags|=4096);return o}return D?(oi(),Ae=x.fallback,D=o.mode,ft=a.child,Yt=ft.sibling,x=Ga(ft,{mode:"hidden",children:x.children}),x.subtreeFlags=ft.subtreeFlags&65011712,Yt!==null?Ae=Ga(Yt,Ae):(Ae=Wo(Ae,D,h,null),Ae.flags|=2),Ae.return=o,x.return=o,x.sibling=Ae,o.child=x,em(null,x),x=o.child,Ae=a.child.memoizedState,Ae===null?Ae=V_(h):(D=Ae.cachePool,D!==null?(ft=ti._currentValue,D=D.parent!==ft?{parent:ft,pool:ft}:D):D=qe(),Ae={baseLanes:Ae.baseLanes|h,cachePool:D}),x.memoizedState=Ae,x.childLanes=$_(a,le,h),o.memoizedState=Y_,em(a.child,x)):(si(o),h=a.child,a=h.sibling,h=Ga(h,{mode:"visible",children:x.children}),h.return=o,h.sibling=null,a!==null&&(le=o.deletions,le===null?(o.deletions=[a],o.flags|=16):le.push(a)),o.child=h,o.memoizedState=null,h)}function H_(a,o){return o=Hg({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Hg(a,o){return a=Ji(22,a,null,o),a.lanes=0,a}function z_(a,o,h){return Tr(o,a.child,null,h),a=H_(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function i2(a,o,h){a.lanes|=o;var x=a.alternate;x!==null&&(x.lanes|=o),Nd(a.return,o,h)}function q_(a,o,h,x,D,O){var le=a.memoizedState;le===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:x,tail:h,tailMode:D,treeForkCount:O}:(le.isBackwards=o,le.rendering=null,le.renderingStartTime=0,le.last=x,le.tail=h,le.tailMode=D,le.treeForkCount=O)}function a2(a,o,h){var x=o.pendingProps,D=x.revealOrder,O=x.tail;x=x.children;var le=Fn.current,Ae=(le&2)!==0;if(Ae?(le=le&1|2,o.flags|=128):le&=1,U(Fn,le),fa(a,o,x,h),x=Mn?Au:0,!Ae&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&i2(a,h,o);else if(a.tag===19)i2(a,h,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(D){case"forwards":for(h=o.child,D=null;h!==null;)a=h.alternate,a!==null&&ea(a)===null&&(D=h),h=h.sibling;h=D,h===null?(D=o.child,o.child=null):(D=h.sibling,h.sibling=null),q_(o,!1,D,h,O,x);break;case"backwards":case"unstable_legacy-backwards":for(h=null,D=o.child,o.child=null;D!==null;){if(a=D.alternate,a!==null&&ea(a)===null){o.child=D;break}a=D.sibling,D.sibling=h,h=D,D=a}q_(o,!0,h,null,O,x);break;case"together":q_(o,!1,null,null,void 0,x);break;default:o.memoizedState=null}return o.child}function Ec(a,o,h){if(a!==null&&(o.dependencies=a.dependencies),Id|=o.lanes,(h&o.childLanes)===0)if(a!==null){if(Go(a,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,h=Ga(a,a.pendingProps),o.child=h,h.return=o;a.sibling!==null;)a=a.sibling,h=h.sibling=Ga(a,a.pendingProps),h.return=o;h.sibling=null}return o.child}function X_(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Zh(a)))}function GI(a,o,h){switch(o.tag){case 3:fe(o,o.stateNode.containerInfo),Qo(o,ti,a.memoizedState.cache),Sc();break;case 27:case 5:ce(o);break;case 4:fe(o,o.stateNode.containerInfo);break;case 10:Qo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,rr(o),null;break;case 13:var x=o.memoizedState;if(x!==null)return x.dehydrated!==null?(si(o),o.flags|=128,null):(h&o.child.childLanes)!==0?r2(a,o,h):(si(o),a=Ec(a,o,h),a!==null?a.sibling:null);si(o);break;case 19:var D=(a.flags&128)!==0;if(x=(h&o.childLanes)!==0,x||(Go(a,o,h,!1),x=(h&o.childLanes)!==0),D){if(x)return a2(a,o,h);o.flags|=128}if(D=o.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),U(Fn,Fn.current),x)break;return null;case 22:return o.lanes=0,JN(a,o,h,o.pendingProps);case 24:Qo(o,ti,a.memoizedState.cache)}return Ec(a,o,h)}function l2(a,o,h){if(a!==null)if(a.memoizedProps!==o.pendingProps)Ri=!0;else{if(!X_(a,h)&&(o.flags&128)===0)return Ri=!1,GI(a,o,h);Ri=(a.flags&131072)!==0}else Ri=!1,Mn&&(o.flags&1048576)!==0&&Pg(o,Au,o.index);switch(o.lanes=0,o.tag){case 16:e:{var x=o.pendingProps;if(a=Ut(o.elementType),o.type=a,typeof a=="function")$h(a)?(x=Fu(a,x),o.tag=1,o=s2(null,o,a,x,h)):(o.tag=0,o=G_(null,o,a,x,h));else{if(a!=null){var D=a.$$typeof;if(D===L){o.tag=11,o=zN(null,o,a,x,h);break e}else if(D===G){o.tag=14,o=qN(null,o,a,x,h);break e}}throw o=J(a)||a,Error(r(306,o,""))}}return o;case 0:return G_(a,o,o.type,o.pendingProps,h);case 1:return x=o.type,D=Fu(x,o.pendingProps),s2(a,o,x,D,h);case 3:e:{if(fe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));x=o.pendingProps;var O=o.memoizedState;D=O.element,Pr(a,o),ii(o,x,null,h);var le=o.memoizedState;if(x=le.cache,Qo(o,ti,x),x!==O.cache&&vc(o,[ti],h,!0),yr(),x=le.element,O.isDehydrated)if(O={element:x,isDehydrated:!1,cache:le.cache},o.updateQueue.baseState=O,o.memoizedState=O,o.flags&256){o=n2(a,o,x,h);break e}else if(x!==D){D=Ya(Error(r(424)),o),bd(D),o=n2(a,o,x,h);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Rr=kl(a.firstChild),Pi=o,Mn=!0,ua=null,Qr=!0,h=Cn(o,null,x,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Sc(),x===D){o=Ec(a,o,h);break e}fa(a,o,x,h)}o=o.child}return o;case 26:return $g(a,o),a===null?(h=_S(o.type,null,o.pendingProps,null))?o.memoizedState=h:Mn||(h=o.type,a=o.pendingProps,x=dx(q.current).createElement(h),x[rs]=o,x[ds]=a,ma(x,h,a),Le(x),o.stateNode=x):o.memoizedState=_S(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return ce(o),a===null&&Mn&&(x=o.stateNode=gS(o.type,o.pendingProps,q.current),Pi=o,Qr=!0,D=Rr,Pd(o.type)?(I1=D,Rr=kl(x.firstChild)):Rr=D),fa(a,o,o.pendingProps.children,h),$g(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Mn&&((D=x=Rr)&&(x=yO(x,o.type,o.pendingProps,Qr),x!==null?(o.stateNode=x,Pi=o,Rr=kl(x.firstChild),Qr=!1,D=!0):D=!1),D||Fo(o)),ce(o),D=o.type,O=o.pendingProps,le=a!==null?a.memoizedProps:null,x=O.children,D1(D,O)?x=null:le!==null&&D1(D,le)&&(o.flags|=32),o.memoizedState!==null&&(D=Yf(a,o,M_,null,null,h),gm._currentValue=D),$g(a,o),fa(a,o,x,h),o.child;case 6:return a===null&&Mn&&((a=h=Rr)&&(h=bO(h,o.pendingProps,Qr),h!==null?(o.stateNode=h,Pi=o,Rr=null,a=!0):a=!1),a||Fo(o)),null;case 13:return r2(a,o,h);case 4:return fe(o,o.stateNode.containerInfo),x=o.pendingProps,a===null?o.child=Tr(o,null,x,h):fa(a,o,x,h),o.child;case 11:return zN(a,o,o.type,o.pendingProps,h);case 7:return fa(a,o,o.pendingProps,h),o.child;case 8:return fa(a,o,o.pendingProps.children,h),o.child;case 12:return fa(a,o,o.pendingProps.children,h),o.child;case 10:return x=o.pendingProps,Qo(o,o.type,x.value),fa(a,o,x.children,h),o.child;case 9:return D=o.type._context,x=o.pendingProps.children,Yo(o),D=ki(D),x=x(D),o.flags|=1,fa(a,o,x,h),o.child;case 14:return qN(a,o,o.type,o.pendingProps,h);case 15:return XN(a,o,o.type,o.pendingProps,h);case 19:return a2(a,o,h);case 31:return QI(a,o,h);case 22:return JN(a,o,h,o.pendingProps);case 24:return Yo(o),x=ki(ti),a===null?(D=Be(),D===null&&(D=Er,O=Sd(),D.pooledCache=O,O.refCount++,O!==null&&(D.pooledCacheLanes|=h),D=O),o.memoizedState={parent:x,cache:D},Ts(o),Qo(o,ti,D)):((a.lanes&h)!==0&&(Pr(a,o),ii(o,null,null,h),yr()),D=a.memoizedState,O=o.memoizedState,D.parent!==x?(D={parent:x,cache:x},o.memoizedState=D,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=D),Qo(o,ti,x)):(x=O.cache,Qo(o,ti,x),x!==D.cache&&vc(o,[ti],h,!0))),fa(a,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function jc(a){a.flags|=4}function J_(a,o,h,x,D){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(D&335544128)===D)if(a.stateNode.complete)a.flags|=8192;else if(w2())a.flags|=8192;else throw Zt=Tt,Ft}else a.flags&=-16777217}function o2(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!SS(o))if(w2())a.flags|=8192;else throw Zt=Tt,Ft}function zg(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Ye():536870912,a.lanes|=o,m0|=o)}function tm(a,o){if(!Mn)switch(a.tailMode){case"hidden":o=a.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function Ur(a){var o=a.alternate!==null&&a.alternate.child===a.child,h=0,x=0;if(o)for(var D=a.child;D!==null;)h|=D.lanes|D.childLanes,x|=D.subtreeFlags&65011712,x|=D.flags&65011712,D.return=a,D=D.sibling;else for(D=a.child;D!==null;)h|=D.lanes|D.childLanes,x|=D.subtreeFlags,x|=D.flags,D.return=a,D=D.sibling;return a.subtreeFlags|=x,a.childLanes=h,o}function YI(a,o,h){var x=o.pendingProps;switch(Xh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(o),null;case 1:return Ur(o),null;case 3:return h=o.stateNode,x=null,a!==null&&(x=a.memoizedState.cache),o.memoizedState.cache!==x&&(o.flags|=2048),qa(ti),ge(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(Ai(o)?jc(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Qf())),Ur(o),null;case 26:var D=o.type,O=o.memoizedState;return a===null?(jc(o),O!==null?(Ur(o),o2(o,O)):(Ur(o),J_(o,D,null,x,h))):O?O!==a.memoizedState?(jc(o),Ur(o),o2(o,O)):(Ur(o),o.flags&=-16777217):(a=a.memoizedProps,a!==x&&jc(o),Ur(o),J_(o,D,a,x,h)),null;case 27:if(Re(o),h=q.current,D=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==x&&jc(o);else{if(!x){if(o.stateNode===null)throw Error(r(166));return Ur(o),null}a=Q.current,Ai(o)?Kf(o):(a=gS(D,x,h),o.stateNode=a,jc(o))}return Ur(o),null;case 5:if(Re(o),D=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==x&&jc(o);else{if(!x){if(o.stateNode===null)throw Error(r(166));return Ur(o),null}if(O=Q.current,Ai(o))Kf(o);else{var le=dx(q.current);switch(O){case 1:O=le.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:O=le.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":O=le.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":O=le.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":O=le.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof x.is=="string"?le.createElement("select",{is:x.is}):le.createElement("select"),x.multiple?O.multiple=!0:x.size&&(O.size=x.size);break;default:O=typeof x.is=="string"?le.createElement(D,{is:x.is}):le.createElement(D)}}O[rs]=o,O[ds]=x;e:for(le=o.child;le!==null;){if(le.tag===5||le.tag===6)O.appendChild(le.stateNode);else if(le.tag!==4&&le.tag!==27&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===o)break e;for(;le.sibling===null;){if(le.return===null||le.return===o)break e;le=le.return}le.sibling.return=le.return,le=le.sibling}o.stateNode=O;e:switch(ma(O,D,x),D){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&jc(o)}}return Ur(o),J_(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,h),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==x&&jc(o);else{if(typeof x!="string"&&o.stateNode===null)throw Error(r(166));if(a=q.current,Ai(o)){if(a=o.stateNode,h=o.memoizedProps,x=null,D=Pi,D!==null)switch(D.tag){case 27:case 5:x=D.memoizedProps}a[rs]=o,a=!!(a.nodeValue===h||x!==null&&x.suppressHydrationWarning===!0||rS(a.nodeValue,h)),a||Fo(o,!0)}else a=dx(a).createTextNode(x),a[rs]=o,o.stateNode=a}return Ur(o),null;case 31:if(h=o.memoizedState,a===null||a.memoizedState!==null){if(x=Ai(o),h!==null){if(a===null){if(!x)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[rs]=o}else Sc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ur(o),a=!1}else h=Qf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return o.flags&256?(hr(o),o):(hr(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Ur(o),null;case 13:if(x=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(D=Ai(o),x!==null&&x.dehydrated!==null){if(a===null){if(!D)throw Error(r(318));if(D=o.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[rs]=o}else Sc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ur(o),D=!1}else D=Qf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=D),D=!0;if(!D)return o.flags&256?(hr(o),o):(hr(o),null)}return hr(o),(o.flags&128)!==0?(o.lanes=h,o):(h=x!==null,a=a!==null&&a.memoizedState!==null,h&&(x=o.child,D=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(D=x.alternate.memoizedState.cachePool.pool),O=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(O=x.memoizedState.cachePool.pool),O!==D&&(x.flags|=2048)),h!==a&&h&&(o.child.flags|=8192),zg(o,o.updateQueue),Ur(o),null);case 4:return ge(),a===null&&y1(o.stateNode.containerInfo),Ur(o),null;case 10:return qa(o.type),Ur(o),null;case 19:if(I(Fn),x=o.memoizedState,x===null)return Ur(o),null;if(D=(o.flags&128)!==0,O=x.rendering,O===null)if(D)tm(x,!1);else{if(di!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(O=ea(a),O!==null){for(o.flags|=128,tm(x,!1),a=O.updateQueue,o.updateQueue=a,zg(o,a),o.subtreeFlags=0,a=h,h=o.child;h!==null;)wu(h,a),h=h.sibling;return U(Fn,Fn.current&1|2),Mn&&Oa(o,x.treeForkCount),o.child}a=a.sibling}x.tail!==null&&st()>ex&&(o.flags|=128,D=!0,tm(x,!1),o.lanes=4194304)}else{if(!D)if(a=ea(O),a!==null){if(o.flags|=128,D=!0,a=a.updateQueue,o.updateQueue=a,zg(o,a),tm(x,!0),x.tail===null&&x.tailMode==="hidden"&&!O.alternate&&!Mn)return Ur(o),null}else 2*st()-x.renderingStartTime>ex&&h!==536870912&&(o.flags|=128,D=!0,tm(x,!1),o.lanes=4194304);x.isBackwards?(O.sibling=o.child,o.child=O):(a=x.last,a!==null?a.sibling=O:o.child=O,x.last=O)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=st(),a.sibling=null,h=Fn.current,U(Fn,D?h&1|2:h&1),Mn&&Oa(o,x.treeForkCount),a):(Ur(o),null);case 22:case 23:return hr(o),xi(),x=o.memoizedState!==null,a!==null?a.memoizedState!==null!==x&&(o.flags|=8192):x&&(o.flags|=8192),x?(h&536870912)!==0&&(o.flags&128)===0&&(Ur(o),o.subtreeFlags&6&&(o.flags|=8192)):Ur(o),h=o.updateQueue,h!==null&&zg(o,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),x=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),x!==h&&(o.flags|=2048),a!==null&&I(we),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),qa(ti),Ur(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function VI(a,o){switch(Xh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return qa(ti),ge(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Re(o),null;case 31:if(o.memoizedState!==null){if(hr(o),o.alternate===null)throw Error(r(340));Sc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(hr(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Sc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return I(Fn),null;case 4:return ge(),null;case 10:return qa(o.type),null;case 22:case 23:return hr(o),xi(),a!==null&&I(we),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return qa(ti),null;case 25:return null;default:return null}}function c2(a,o){switch(Xh(o),o.tag){case 3:qa(ti),ge();break;case 26:case 27:case 5:Re(o);break;case 4:ge();break;case 31:o.memoizedState!==null&&hr(o);break;case 13:hr(o);break;case 19:I(Fn);break;case 10:qa(o.type);break;case 22:case 23:hr(o),xi(),a!==null&&I(we);break;case 24:qa(ti)}}function sm(a,o){try{var h=o.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var D=x.next;h=D;do{if((h.tag&a)===a){x=void 0;var O=h.create,le=h.inst;x=O(),le.destroy=x}h=h.next}while(h!==D)}}catch(Ae){mr(o,o.return,Ae)}}function Ed(a,o,h){try{var x=o.updateQueue,D=x!==null?x.lastEffect:null;if(D!==null){var O=D.next;x=O;do{if((x.tag&a)===a){var le=x.inst,Ae=le.destroy;if(Ae!==void 0){le.destroy=void 0,D=o;var ft=h,Yt=Ae;try{Yt()}catch(ns){mr(D,ft,ns)}}}x=x.next}while(x!==O)}}catch(ns){mr(o,o.return,ns)}}function d2(a){var o=a.updateQueue;if(o!==null){var h=a.stateNode;try{ai(o,h)}catch(x){mr(a,a.return,x)}}}function u2(a,o,h){h.props=Fu(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(x){mr(a,o,x)}}function nm(a,o){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var x=a.stateNode;break;case 30:x=a.stateNode;break;default:x=a.stateNode}typeof h=="function"?a.refCleanup=h(x):h.current=x}}catch(D){mr(a,o,D)}}function qo(a,o){var h=a.ref,x=a.refCleanup;if(h!==null)if(typeof x=="function")try{x()}catch(D){mr(a,o,D)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(D){mr(a,o,D)}else h.current=null}function h2(a){var o=a.type,h=a.memoizedProps,x=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&x.focus();break e;case"img":h.src?x.src=h.src:h.srcSet&&(x.srcset=h.srcSet)}}catch(D){mr(a,a.return,D)}}function Z_(a,o,h){try{var x=a.stateNode;mO(x,a.type,h,o),x[ds]=o}catch(D){mr(a,a.return,D)}}function f2(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Pd(a.type)||a.tag===4}function e1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||f2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Pd(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function t1(a,o,h){var x=a.tag;if(x===5||x===6)a=a.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(a),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=hs));else if(x!==4&&(x===27&&Pd(a.type)&&(h=a.stateNode,o=null),a=a.child,a!==null))for(t1(a,o,h),a=a.sibling;a!==null;)t1(a,o,h),a=a.sibling}function qg(a,o,h){var x=a.tag;if(x===5||x===6)a=a.stateNode,o?h.insertBefore(a,o):h.appendChild(a);else if(x!==4&&(x===27&&Pd(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(qg(a,o,h),a=a.sibling;a!==null;)qg(a,o,h),a=a.sibling}function m2(a){var o=a.stateNode,h=a.memoizedProps;try{for(var x=a.type,D=o.attributes;D.length;)o.removeAttributeNode(D[0]);ma(o,x,h),o[rs]=a,o[ds]=h}catch(O){mr(a,a.return,O)}}var Ic=!1,Ti=!1,s1=!1,g2=typeof WeakSet=="function"?WeakSet:Set,ta=null;function $I(a,o){if(a=a.containerInfo,S1=px,a=fo(a),Ml(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var x=h.getSelection&&h.getSelection();if(x&&x.rangeCount!==0){h=x.anchorNode;var D=x.anchorOffset,O=x.focusNode;x=x.focusOffset;try{h.nodeType,O.nodeType}catch{h=null;break e}var le=0,Ae=-1,ft=-1,Yt=0,ns=0,us=a,$t=null;t:for(;;){for(var zt;us!==h||D!==0&&us.nodeType!==3||(Ae=le+D),us!==O||x!==0&&us.nodeType!==3||(ft=le+x),us.nodeType===3&&(le+=us.nodeValue.length),(zt=us.firstChild)!==null;)$t=us,us=zt;for(;;){if(us===a)break t;if($t===h&&++Yt===D&&(Ae=le),$t===O&&++ns===x&&(ft=le),(zt=us.nextSibling)!==null)break;us=$t,$t=us.parentNode}us=zt}h=Ae===-1||ft===-1?null:{start:Ae,end:ft}}else h=null}h=h||{start:0,end:0}}else h=null;for(v1={focusedElem:a,selectionRange:h},px=!1,ta=o;ta!==null;)if(o=ta,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,ta=a;else for(;ta!==null;){switch(o=ta,O=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)D=a[h],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&O!==null){a=void 0,h=o,D=O.memoizedProps,O=O.memoizedState,x=h.stateNode;try{var Vs=Fu(h.type,D);a=x.getSnapshotBeforeUpdate(Vs,O),x.__reactInternalSnapshotBeforeUpdate=a}catch(dn){mr(h,h.return,dn)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,h=a.nodeType,h===9)T1(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":T1(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,ta=a;break}ta=o.return}}function x2(a,o,h){var x=h.flags;switch(h.tag){case 0:case 11:case 15:Mc(a,h),x&4&&sm(5,h);break;case 1:if(Mc(a,h),x&4)if(a=h.stateNode,o===null)try{a.componentDidMount()}catch(le){mr(h,h.return,le)}else{var D=Fu(h.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(D,o,a.__reactInternalSnapshotBeforeUpdate)}catch(le){mr(h,h.return,le)}}x&64&&d2(h),x&512&&nm(h,h.return);break;case 3:if(Mc(a,h),x&64&&(a=h.updateQueue,a!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{ai(a,o)}catch(le){mr(h,h.return,le)}}break;case 27:o===null&&x&4&&m2(h);case 26:case 5:Mc(a,h),o===null&&x&4&&h2(h),x&512&&nm(h,h.return);break;case 12:Mc(a,h);break;case 31:Mc(a,h),x&4&&C2(a,h);break;case 13:Mc(a,h),x&4&&y2(a,h),x&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=sO.bind(null,h),NO(a,h))));break;case 22:if(x=h.memoizedState!==null||Ic,!x){o=o!==null&&o.memoizedState!==null||Ti,D=Ic;var O=Ti;Ic=x,(Ti=o)&&!O?Lc(a,h,(h.subtreeFlags&8772)!==0):Mc(a,h),Ic=D,Ti=O}break;case 30:break;default:Mc(a,h)}}function p2(a){var o=a.alternate;o!==null&&(a.alternate=null,p2(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&ut(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Vr=null,Ja=!1;function Oc(a,o,h){for(h=h.child;h!==null;)_2(a,o,h),h=h.sibling}function _2(a,o,h){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount($e,h)}catch{}switch(h.tag){case 26:Ti||qo(h,o),Oc(a,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Ti||qo(h,o);var x=Vr,D=Ja;Pd(h.type)&&(Vr=h.stateNode,Ja=!1),Oc(a,o,h),hm(h.stateNode),Vr=x,Ja=D;break;case 5:Ti||qo(h,o);case 6:if(x=Vr,D=Ja,Vr=null,Oc(a,o,h),Vr=x,Ja=D,Vr!==null)if(Ja)try{(Vr.nodeType===9?Vr.body:Vr.nodeName==="HTML"?Vr.ownerDocument.body:Vr).removeChild(h.stateNode)}catch(O){mr(h,o,O)}else try{Vr.removeChild(h.stateNode)}catch(O){mr(h,o,O)}break;case 18:Vr!==null&&(Ja?(a=Vr,dS(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),N0(a)):dS(Vr,h.stateNode));break;case 4:x=Vr,D=Ja,Vr=h.stateNode.containerInfo,Ja=!0,Oc(a,o,h),Vr=x,Ja=D;break;case 0:case 11:case 14:case 15:Ed(2,h,o),Ti||Ed(4,h,o),Oc(a,o,h);break;case 1:Ti||(qo(h,o),x=h.stateNode,typeof x.componentWillUnmount=="function"&&u2(h,o,x)),Oc(a,o,h);break;case 21:Oc(a,o,h);break;case 22:Ti=(x=Ti)||h.memoizedState!==null,Oc(a,o,h),Ti=x;break;default:Oc(a,o,h)}}function C2(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{N0(a)}catch(h){mr(o,o.return,h)}}}function y2(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{N0(a)}catch(h){mr(o,o.return,h)}}function HI(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new g2),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new g2),o;default:throw Error(r(435,a.tag))}}function Xg(a,o){var h=HI(a);o.forEach(function(x){if(!h.has(x)){h.add(x);var D=nO.bind(null,a,x);x.then(D,D)}})}function Za(a,o){var h=o.deletions;if(h!==null)for(var x=0;x<h.length;x++){var D=h[x],O=a,le=o,Ae=le;e:for(;Ae!==null;){switch(Ae.tag){case 27:if(Pd(Ae.type)){Vr=Ae.stateNode,Ja=!1;break e}break;case 5:Vr=Ae.stateNode,Ja=!1;break e;case 3:case 4:Vr=Ae.stateNode.containerInfo,Ja=!0;break e}Ae=Ae.return}if(Vr===null)throw Error(r(160));_2(O,le,D),Vr=null,Ja=!1,O=D.alternate,O!==null&&(O.return=null),D.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)b2(o,a),o=o.sibling}var bo=null;function b2(a,o){var h=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Za(o,a),el(a),x&4&&(Ed(3,a,a.return),sm(3,a),Ed(5,a,a.return));break;case 1:Za(o,a),el(a),x&512&&(Ti||h===null||qo(h,h.return)),x&64&&Ic&&(a=a.updateQueue,a!==null&&(x=a.callbacks,x!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?x:h.concat(x))));break;case 26:var D=bo;if(Za(o,a),el(a),x&512&&(Ti||h===null||qo(h,h.return)),x&4){var O=h!==null?h.memoizedState:null;if(x=a.memoizedState,h===null)if(x===null)if(a.stateNode===null){e:{x=a.type,h=a.memoizedProps,D=D.ownerDocument||D;t:switch(x){case"title":O=D.getElementsByTagName("title")[0],(!O||O[Qt]||O[rs]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=D.createElement(x),D.head.insertBefore(O,D.querySelector("head > title"))),ma(O,x,h),O[rs]=a,Le(O),x=O;break e;case"link":var le=bS("link","href",D).get(x+(h.href||""));if(le){for(var Ae=0;Ae<le.length;Ae++)if(O=le[Ae],O.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&O.getAttribute("rel")===(h.rel==null?null:h.rel)&&O.getAttribute("title")===(h.title==null?null:h.title)&&O.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){le.splice(Ae,1);break t}}O=D.createElement(x),ma(O,x,h),D.head.appendChild(O);break;case"meta":if(le=bS("meta","content",D).get(x+(h.content||""))){for(Ae=0;Ae<le.length;Ae++)if(O=le[Ae],O.getAttribute("content")===(h.content==null?null:""+h.content)&&O.getAttribute("name")===(h.name==null?null:h.name)&&O.getAttribute("property")===(h.property==null?null:h.property)&&O.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&O.getAttribute("charset")===(h.charSet==null?null:h.charSet)){le.splice(Ae,1);break t}}O=D.createElement(x),ma(O,x,h),D.head.appendChild(O);break;default:throw Error(r(468,x))}O[rs]=a,Le(O),x=O}a.stateNode=x}else NS(D,a.type,a.stateNode);else a.stateNode=yS(D,x,a.memoizedProps);else O!==x?(O===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):O.count--,x===null?NS(D,a.type,a.stateNode):yS(D,x,a.memoizedProps)):x===null&&a.stateNode!==null&&Z_(a,a.memoizedProps,h.memoizedProps)}break;case 27:Za(o,a),el(a),x&512&&(Ti||h===null||qo(h,h.return)),h!==null&&x&4&&Z_(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Za(o,a),el(a),x&512&&(Ti||h===null||qo(h,h.return)),a.flags&32){D=a.stateNode;try{nt(D,"")}catch(Vs){mr(a,a.return,Vs)}}x&4&&a.stateNode!=null&&(D=a.memoizedProps,Z_(a,D,h!==null?h.memoizedProps:D)),x&1024&&(s1=!0);break;case 6:if(Za(o,a),el(a),x&4){if(a.stateNode===null)throw Error(r(162));x=a.memoizedProps,h=a.stateNode;try{h.nodeValue=x}catch(Vs){mr(a,a.return,Vs)}}break;case 3:if(fx=null,D=bo,bo=ux(o.containerInfo),Za(o,a),bo=D,el(a),x&4&&h!==null&&h.memoizedState.isDehydrated)try{N0(o.containerInfo)}catch(Vs){mr(a,a.return,Vs)}s1&&(s1=!1,N2(a));break;case 4:x=bo,bo=ux(a.stateNode.containerInfo),Za(o,a),el(a),bo=x;break;case 12:Za(o,a),el(a);break;case 31:Za(o,a),el(a),x&4&&(x=a.updateQueue,x!==null&&(a.updateQueue=null,Xg(a,x)));break;case 13:Za(o,a),el(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Zg=st()),x&4&&(x=a.updateQueue,x!==null&&(a.updateQueue=null,Xg(a,x)));break;case 22:D=a.memoizedState!==null;var ft=h!==null&&h.memoizedState!==null,Yt=Ic,ns=Ti;if(Ic=Yt||D,Ti=ns||ft,Za(o,a),Ti=ns,Ic=Yt,el(a),x&8192)e:for(o=a.stateNode,o._visibility=D?o._visibility&-2:o._visibility|1,D&&(h===null||ft||Ic||Ti||Ku(a)),h=null,o=a;;){if(o.tag===5||o.tag===26){if(h===null){ft=h=o;try{if(O=ft.stateNode,D)le=O.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{Ae=ft.stateNode;var us=ft.memoizedProps.style,$t=us!=null&&us.hasOwnProperty("display")?us.display:null;Ae.style.display=$t==null||typeof $t=="boolean"?"":(""+$t).trim()}}catch(Vs){mr(ft,ft.return,Vs)}}}else if(o.tag===6){if(h===null){ft=o;try{ft.stateNode.nodeValue=D?"":ft.memoizedProps}catch(Vs){mr(ft,ft.return,Vs)}}}else if(o.tag===18){if(h===null){ft=o;try{var zt=ft.stateNode;D?uS(zt,!0):uS(ft.stateNode,!1)}catch(Vs){mr(ft,ft.return,Vs)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}x&4&&(x=a.updateQueue,x!==null&&(h=x.retryQueue,h!==null&&(x.retryQueue=null,Xg(a,h))));break;case 19:Za(o,a),el(a),x&4&&(x=a.updateQueue,x!==null&&(a.updateQueue=null,Xg(a,x)));break;case 30:break;case 21:break;default:Za(o,a),el(a)}}function el(a){var o=a.flags;if(o&2){try{for(var h,x=a.return;x!==null;){if(f2(x)){h=x;break}x=x.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var D=h.stateNode,O=e1(a);qg(a,O,D);break;case 5:var le=h.stateNode;h.flags&32&&(nt(le,""),h.flags&=-33);var Ae=e1(a);qg(a,Ae,le);break;case 3:case 4:var ft=h.stateNode.containerInfo,Yt=e1(a);t1(a,Yt,ft);break;default:throw Error(r(161))}}catch(ns){mr(a,a.return,ns)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function N2(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;N2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Mc(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)x2(a,o.alternate,o),o=o.sibling}function Ku(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ed(4,o,o.return),Ku(o);break;case 1:qo(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&u2(o,o.return,h),Ku(o);break;case 27:hm(o.stateNode);case 26:case 5:qo(o,o.return),Ku(o);break;case 22:o.memoizedState===null&&Ku(o);break;case 30:Ku(o);break;default:Ku(o)}a=a.sibling}}function Lc(a,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var x=o.alternate,D=a,O=o,le=O.flags;switch(O.tag){case 0:case 11:case 15:Lc(D,O,h),sm(4,O);break;case 1:if(Lc(D,O,h),x=O,D=x.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Yt){mr(x,x.return,Yt)}if(x=O,D=x.updateQueue,D!==null){var Ae=x.stateNode;try{var ft=D.shared.hiddenCallbacks;if(ft!==null)for(D.shared.hiddenCallbacks=null,D=0;D<ft.length;D++)Zi(ft[D],Ae)}catch(Yt){mr(x,x.return,Yt)}}h&&le&64&&d2(O),nm(O,O.return);break;case 27:m2(O);case 26:case 5:Lc(D,O,h),h&&x===null&&le&4&&h2(O),nm(O,O.return);break;case 12:Lc(D,O,h);break;case 31:Lc(D,O,h),h&&le&4&&C2(D,O);break;case 13:Lc(D,O,h),h&&le&4&&y2(D,O);break;case 22:O.memoizedState===null&&Lc(D,O,h),nm(O,O.return);break;case 30:break;default:Lc(D,O,h)}o=o.sibling}}function n1(a,o){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&ku(h))}function r1(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ku(a))}function No(a,o,h,x){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)S2(a,o,h,x),o=o.sibling}function S2(a,o,h,x){var D=o.flags;switch(o.tag){case 0:case 11:case 15:No(a,o,h,x),D&2048&&sm(9,o);break;case 1:No(a,o,h,x);break;case 3:No(a,o,h,x),D&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ku(a)));break;case 12:if(D&2048){No(a,o,h,x),a=o.stateNode;try{var O=o.memoizedProps,le=O.id,Ae=O.onPostCommit;typeof Ae=="function"&&Ae(le,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ft){mr(o,o.return,ft)}}else No(a,o,h,x);break;case 31:No(a,o,h,x);break;case 13:No(a,o,h,x);break;case 23:break;case 22:O=o.stateNode,le=o.alternate,o.memoizedState!==null?O._visibility&2?No(a,o,h,x):rm(a,o):O._visibility&2?No(a,o,h,x):(O._visibility|=2,u0(a,o,h,x,(o.subtreeFlags&10256)!==0||!1)),D&2048&&n1(le,o);break;case 24:No(a,o,h,x),D&2048&&r1(o.alternate,o);break;default:No(a,o,h,x)}}function u0(a,o,h,x,D){for(D=D&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var O=a,le=o,Ae=h,ft=x,Yt=le.flags;switch(le.tag){case 0:case 11:case 15:u0(O,le,Ae,ft,D),sm(8,le);break;case 23:break;case 22:var ns=le.stateNode;le.memoizedState!==null?ns._visibility&2?u0(O,le,Ae,ft,D):rm(O,le):(ns._visibility|=2,u0(O,le,Ae,ft,D)),D&&Yt&2048&&n1(le.alternate,le);break;case 24:u0(O,le,Ae,ft,D),D&&Yt&2048&&r1(le.alternate,le);break;default:u0(O,le,Ae,ft,D)}o=o.sibling}}function rm(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=a,x=o,D=x.flags;switch(x.tag){case 22:rm(h,x),D&2048&&n1(x.alternate,x);break;case 24:rm(h,x),D&2048&&r1(x.alternate,x);break;default:rm(h,x)}o=o.sibling}}var im=8192;function h0(a,o,h){if(a.subtreeFlags&im)for(a=a.child;a!==null;)v2(a,o,h),a=a.sibling}function v2(a,o,h){switch(a.tag){case 26:h0(a,o,h),a.flags&im&&a.memoizedState!==null&&wO(h,bo,a.memoizedState,a.memoizedProps);break;case 5:h0(a,o,h);break;case 3:case 4:var x=bo;bo=ux(a.stateNode.containerInfo),h0(a,o,h),bo=x;break;case 22:a.memoizedState===null&&(x=a.alternate,x!==null&&x.memoizedState!==null?(x=im,im=16777216,h0(a,o,h),im=x):h0(a,o,h));break;default:h0(a,o,h)}}function D2(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function am(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var x=o[h];ta=x,T2(x,a)}D2(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)R2(a),a=a.sibling}function R2(a){switch(a.tag){case 0:case 11:case 15:am(a),a.flags&2048&&Ed(9,a,a.return);break;case 3:am(a);break;case 12:am(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Jg(a)):am(a);break;default:am(a)}}function Jg(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var x=o[h];ta=x,T2(x,a)}D2(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ed(8,o,o.return),Jg(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,Jg(o));break;default:Jg(o)}a=a.sibling}}function T2(a,o){for(;ta!==null;){var h=ta;switch(h.tag){case 0:case 11:case 15:Ed(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var x=h.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:ku(h.memoizedState.cache)}if(x=h.child,x!==null)x.return=h,ta=x;else e:for(h=a;ta!==null;){x=ta;var D=x.sibling,O=x.return;if(p2(x),x===h){ta=null;break e}if(D!==null){D.return=O,ta=D;break e}ta=O}}}var zI={getCacheForType:function(a){var o=ki(ti),h=o.data.get(a);return h===void 0&&(h=a(),o.data.set(a,h)),h},cacheSignal:function(){return ki(ti).controller.signal}},qI=typeof WeakMap=="function"?WeakMap:Map,ir=0,Er=null,Ln=null,An=0,fr=0,bl=null,jd=!1,f0=!1,i1=!1,wc=0,di=0,Id=0,Qu=0,a1=0,Nl=0,m0=0,lm=null,tl=null,l1=!1,Zg=0,E2=0,ex=1/0,tx=null,Od=null,Wi=0,Md=null,g0=null,Pc=0,o1=0,c1=null,j2=null,om=0,d1=null;function Sl(){return(ir&2)!==0&&An!==0?An&-An:Y.T!==null?x1():kt()}function I2(){if(Nl===0)if((An&536870912)===0||Mn){var a=ve;ve<<=1,(ve&3932160)===0&&(ve=262144),Nl=a}else Nl=536870912;return a=kr.current,a!==null&&(a.flags|=32),Nl}function sl(a,o,h){(a===Er&&(fr===2||fr===9)||a.cancelPendingCommit!==null)&&(x0(a,0),Ld(a,An,Nl,!1)),de(a,h),((ir&2)===0||a!==Er)&&(a===Er&&((ir&2)===0&&(Qu|=h),di===4&&Ld(a,An,Nl,!1)),Xo(a))}function O2(a,o,h){if((ir&6)!==0)throw Error(r(327));var x=!h&&(o&127)===0&&(o&a.expiredLanes)===0||Ue(a,o),D=x?ZI(a,o):h1(a,o,!0),O=x;do{if(D===0){f0&&!x&&Ld(a,o,0,!1);break}else{if(h=a.current.alternate,O&&!XI(h)){D=h1(a,o,!1),O=!1;continue}if(D===2){if(O=o,a.errorRecoveryDisabledLanes&O)var le=0;else le=a.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){o=le;e:{var Ae=a;D=lm;var ft=Ae.current.memoizedState.isDehydrated;if(ft&&(x0(Ae,le).flags|=256),le=h1(Ae,le,!1),le!==2){if(i1&&!ft){Ae.errorRecoveryDisabledLanes|=O,Qu|=O,D=4;break e}O=tl,tl=D,O!==null&&(tl===null?tl=O:tl.push.apply(tl,O))}D=le}if(O=!1,D!==2)continue}}if(D===1){x0(a,0),Ld(a,o,0,!0);break}e:{switch(x=a,O=D,O){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ld(x,o,Nl,!jd);break e;case 2:tl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(D=Zg+300-st(),10<D)){if(Ld(x,o,Nl,!jd),xe(x,0,!0)!==0)break e;Pc=o,x.timeoutHandle=oS(M2.bind(null,x,h,tl,tx,l1,o,Nl,Qu,m0,jd,O,"Throttled",-0,0),D);break e}M2(x,h,tl,tx,l1,o,Nl,Qu,m0,jd,O,null,-0,0)}}break}while(!0);Xo(a)}function M2(a,o,h,x,D,O,le,Ae,ft,Yt,ns,us,$t,zt){if(a.timeoutHandle=-1,us=o.subtreeFlags,us&8192||(us&16785408)===16785408){us={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hs},v2(o,O,us);var Vs=(O&62914560)===O?Zg-st():(O&4194048)===O?E2-st():0;if(Vs=PO(us,Vs),Vs!==null){Pc=O,a.cancelPendingCommit=Vs(B2.bind(null,a,o,O,h,x,D,le,Ae,ft,ns,us,null,$t,zt)),Ld(a,O,le,!Yt);return}}B2(a,o,O,h,x,D,le,Ae,ft)}function XI(a){for(var o=a;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var x=0;x<h.length;x++){var D=h[x],O=D.getSnapshot;D=D.value;try{if(!Li(O(),D))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ld(a,o,h,x){o&=~a1,o&=~Qu,a.suspendedLanes|=o,a.pingedLanes&=~o,x&&(a.warmLanes|=o),x=a.expirationTimes;for(var D=o;0<D;){var O=31-rt(D),le=1<<O;x[O]=-1,D&=~le}h!==0&&De(a,h,o)}function sx(){return(ir&6)===0?(cm(0),!1):!0}function u1(){if(Ln!==null){if(fr===0)var a=Ln.return;else a=Ln,wl=Ko=null,r0(a),fs=null,$s=0,a=Ln;for(;a!==null;)c2(a.alternate,a),a=a.return;Ln=null}}function x0(a,o){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,pO(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Pc=0,u1(),Er=a,Ln=h=Ga(a.current,null),An=o,fr=0,bl=null,jd=!1,f0=Ue(a,o),i1=!1,m0=Nl=a1=Qu=Id=di=0,tl=lm=null,l1=!1,(o&8)!==0&&(o|=o&32);var x=a.entangledLanes;if(x!==0)for(a=a.entanglements,x&=o;0<x;){var D=31-rt(x),O=1<<D;o|=a[D],x&=~O}return wc=o,Ou(),h}function L2(a,o){tn=null,Y.H=Zf,o===yt||o===ze?(o=as(),fr=3):o===Ft?(o=as(),fr=4):fr=o===Q_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bl=o,Ln===null&&(di=1,Yg(a,Ya(o,a.current)))}function w2(){var a=kr.current;return a===null?!0:(An&4194048)===An?Yn===null:(An&62914560)===An||(An&536870912)!==0?a===Yn:!1}function P2(){var a=Y.H;return Y.H=Zf,a===null?Zf:a}function A2(){var a=Y.A;return Y.A=zI,a}function nx(){di=4,jd||(An&4194048)!==An&&kr.current!==null||(f0=!0),(Id&134217727)===0&&(Qu&134217727)===0||Er===null||Ld(Er,An,Nl,!1)}function h1(a,o,h){var x=ir;ir|=2;var D=P2(),O=A2();(Er!==a||An!==o)&&(tx=null,x0(a,o)),o=!1;var le=di;e:do try{if(fr!==0&&Ln!==null){var Ae=Ln,ft=bl;switch(fr){case 8:u1(),le=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(o=!0);var Yt=fr;if(fr=0,bl=null,p0(a,Ae,ft,Yt),h&&f0){le=0;break e}break;default:Yt=fr,fr=0,bl=null,p0(a,Ae,ft,Yt)}}JI(),le=di;break}catch(ns){L2(a,ns)}while(!0);return o&&a.shellSuspendCounter++,wl=Ko=null,ir=x,Y.H=D,Y.A=O,Ln===null&&(Er=null,An=0,Ou()),le}function JI(){for(;Ln!==null;)k2(Ln)}function ZI(a,o){var h=ir;ir|=2;var x=P2(),D=A2();Er!==a||An!==o?(tx=null,ex=st()+500,x0(a,o)):f0=Ue(a,o);e:do try{if(fr!==0&&Ln!==null){o=Ln;var O=bl;t:switch(fr){case 1:fr=0,bl=null,p0(a,o,O,1);break;case 2:case 9:if(Pt(O)){fr=0,bl=null,U2(o);break}o=function(){fr!==2&&fr!==9||Er!==a||(fr=7),Xo(a)},O.then(o,o);break e;case 3:fr=7;break e;case 4:fr=5;break e;case 7:Pt(O)?(fr=0,bl=null,U2(o)):(fr=0,bl=null,p0(a,o,O,7));break;case 5:var le=null;switch(Ln.tag){case 26:le=Ln.memoizedState;case 5:case 27:var Ae=Ln;if(le?SS(le):Ae.stateNode.complete){fr=0,bl=null;var ft=Ae.sibling;if(ft!==null)Ln=ft;else{var Yt=Ae.return;Yt!==null?(Ln=Yt,rx(Yt)):Ln=null}break t}}fr=0,bl=null,p0(a,o,O,5);break;case 6:fr=0,bl=null,p0(a,o,O,6);break;case 8:u1(),di=6;break e;default:throw Error(r(462))}}eO();break}catch(ns){L2(a,ns)}while(!0);return wl=Ko=null,Y.H=x,Y.A=D,ir=h,Ln!==null?0:(Er=null,An=0,Ou(),di)}function eO(){for(;Ln!==null&&!pe();)k2(Ln)}function k2(a){var o=l2(a.alternate,a,wc);a.memoizedProps=a.pendingProps,o===null?rx(a):Ln=o}function U2(a){var o=a,h=o.alternate;switch(o.tag){case 15:case 0:o=t2(h,o,o.pendingProps,o.type,void 0,An);break;case 11:o=t2(h,o,o.pendingProps,o.type.render,o.ref,An);break;case 5:r0(o);default:c2(h,o),o=Ln=wu(o,wc),o=l2(h,o,wc)}a.memoizedProps=a.pendingProps,o===null?rx(a):Ln=o}function p0(a,o,h,x){wl=Ko=null,r0(o),fs=null,$s=0;var D=o.return;try{if(KI(a,D,o,h,An)){di=1,Yg(a,Ya(h,a.current)),Ln=null;return}}catch(O){if(D!==null)throw Ln=D,O;di=1,Yg(a,Ya(h,a.current)),Ln=null;return}o.flags&32768?(Mn||x===1?a=!0:f0||(An&536870912)!==0?a=!1:(jd=a=!0,(x===2||x===9||x===3||x===6)&&(x=kr.current,x!==null&&x.tag===13&&(x.flags|=16384))),W2(o,a)):rx(o)}function rx(a){var o=a;do{if((o.flags&32768)!==0){W2(o,jd);return}a=o.return;var h=YI(o.alternate,o,wc);if(h!==null){Ln=h;return}if(o=o.sibling,o!==null){Ln=o;return}Ln=o=a}while(o!==null);di===0&&(di=5)}function W2(a,o){do{var h=VI(a.alternate,a);if(h!==null){h.flags&=32767,Ln=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(a=a.sibling,a!==null)){Ln=a;return}Ln=a=h}while(a!==null);di=6,Ln=null}function B2(a,o,h,x,D,O,le,Ae,ft){a.cancelPendingCommit=null;do ix();while(Wi!==0);if((ir&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(O=o.lanes|o.childLanes,O|=Gh,tt(a,h,O,le,Ae,ft),a===Er&&(Ln=Er=null,An=0),g0=o,Md=a,Pc=h,o1=O,c1=D,j2=x,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,rO(ot,function(){return Y2(),null})):(a.callbackNode=null,a.callbackPriority=0),x=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||x){x=Y.T,Y.T=null,D=K.p,K.p=2,le=ir,ir|=4;try{$I(a,o,h)}finally{ir=le,K.p=D,Y.T=x}}Wi=1,F2(),K2(),Q2()}}function F2(){if(Wi===1){Wi=0;var a=Md,o=g0,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null;var x=K.p;K.p=2;var D=ir;ir|=4;try{b2(o,a);var O=v1,le=fo(a.containerInfo),Ae=O.focusedElem,ft=O.selectionRange;if(le!==Ae&&Ae&&Ae.ownerDocument&&ho(Ae.ownerDocument.documentElement,Ae)){if(ft!==null&&Ml(Ae)){var Yt=ft.start,ns=ft.end;if(ns===void 0&&(ns=Yt),"selectionStart"in Ae)Ae.selectionStart=Yt,Ae.selectionEnd=Math.min(ns,Ae.value.length);else{var us=Ae.ownerDocument||document,$t=us&&us.defaultView||window;if($t.getSelection){var zt=$t.getSelection(),Vs=Ae.textContent.length,dn=Math.min(ft.start,Vs),Sr=ft.end===void 0?dn:Math.min(ft.end,Vs);!zt.extend&&dn>Sr&&(le=Sr,Sr=dn,dn=le);var Mt=pd(Ae,dn),vt=pd(Ae,Sr);if(Mt&&vt&&(zt.rangeCount!==1||zt.anchorNode!==Mt.node||zt.anchorOffset!==Mt.offset||zt.focusNode!==vt.node||zt.focusOffset!==vt.offset)){var Gt=us.createRange();Gt.setStart(Mt.node,Mt.offset),zt.removeAllRanges(),dn>Sr?(zt.addRange(Gt),zt.extend(vt.node,vt.offset)):(Gt.setEnd(vt.node,vt.offset),zt.addRange(Gt))}}}}for(us=[],zt=Ae;zt=zt.parentNode;)zt.nodeType===1&&us.push({element:zt,left:zt.scrollLeft,top:zt.scrollTop});for(typeof Ae.focus=="function"&&Ae.focus(),Ae=0;Ae<us.length;Ae++){var os=us[Ae];os.element.scrollLeft=os.left,os.element.scrollTop=os.top}}px=!!S1,v1=S1=null}finally{ir=D,K.p=x,Y.T=h}}a.current=o,Wi=2}}function K2(){if(Wi===2){Wi=0;var a=Md,o=g0,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=Y.T,Y.T=null;var x=K.p;K.p=2;var D=ir;ir|=4;try{x2(a,o.alternate,o)}finally{ir=D,K.p=x,Y.T=h}}Wi=3}}function Q2(){if(Wi===4||Wi===3){Wi=0,Se();var a=Md,o=g0,h=Pc,x=j2;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Wi=5:(Wi=0,g0=Md=null,G2(a,a.pendingLanes));var D=a.pendingLanes;if(D===0&&(Od=null),Ve(h),o=o.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot($e,o,void 0,(o.current.flags&128)===128)}catch{}if(x!==null){o=Y.T,D=K.p,K.p=2,Y.T=null;try{for(var O=a.onRecoverableError,le=0;le<x.length;le++){var Ae=x[le];O(Ae.value,{componentStack:Ae.stack})}}finally{Y.T=o,K.p=D}}(Pc&3)!==0&&ix(),Xo(a),D=a.pendingLanes,(h&261930)!==0&&(D&42)!==0?a===d1?om++:(om=0,d1=a):om=0,cm(0)}}function G2(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,ku(o)))}function ix(){return F2(),K2(),Q2(),Y2()}function Y2(){if(Wi!==5)return!1;var a=Md,o=o1;o1=0;var h=Ve(Pc),x=Y.T,D=K.p;try{K.p=32>h?32:h,Y.T=null,h=c1,c1=null;var O=Md,le=Pc;if(Wi=0,g0=Md=null,Pc=0,(ir&6)!==0)throw Error(r(331));var Ae=ir;if(ir|=4,R2(O.current),S2(O,O.current,le,h),ir=Ae,cm(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot($e,O)}catch{}return!0}finally{K.p=D,Y.T=x,G2(a,o)}}function V2(a,o,h){o=Ya(h,o),o=K_(a.stateNode,o,2),a=Nn(a,o,2),a!==null&&(de(a,2),Xo(a))}function mr(a,o,h){if(a.tag===3)V2(a,a,h);else for(;o!==null;){if(o.tag===3){V2(o,a,h);break}else if(o.tag===1){var x=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Od===null||!Od.has(x))){a=Ya(h,a),h=$N(2),x=Nn(o,h,2),x!==null&&(HN(h,x,o,a),de(x,2),Xo(x));break}}o=o.return}}function f1(a,o,h){var x=a.pingCache;if(x===null){x=a.pingCache=new qI;var D=new Set;x.set(o,D)}else D=x.get(o),D===void 0&&(D=new Set,x.set(o,D));D.has(h)||(i1=!0,D.add(h),a=tO.bind(null,a,o,h),o.then(a,a))}function tO(a,o,h){var x=a.pingCache;x!==null&&x.delete(o),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,Er===a&&(An&h)===h&&(di===4||di===3&&(An&62914560)===An&&300>st()-Zg?(ir&2)===0&&x0(a,0):a1|=h,m0===An&&(m0=0)),Xo(a)}function $2(a,o){o===0&&(o=Ye()),a=go(a,o),a!==null&&(de(a,o),Xo(a))}function sO(a){var o=a.memoizedState,h=0;o!==null&&(h=o.retryLane),$2(a,h)}function nO(a,o){var h=0;switch(a.tag){case 31:case 13:var x=a.stateNode,D=a.memoizedState;D!==null&&(h=D.retryLane);break;case 19:x=a.stateNode;break;case 22:x=a.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(o),$2(a,h)}function rO(a,o){return Te(a,o)}var ax=null,_0=null,m1=!1,lx=!1,g1=!1,wd=0;function Xo(a){a!==_0&&a.next===null&&(_0===null?ax=_0=a:_0=_0.next=a),lx=!0,m1||(m1=!0,aO())}function cm(a,o){if(!g1&&lx){g1=!0;do for(var h=!1,x=ax;x!==null;){if(a!==0){var D=x.pendingLanes;if(D===0)var O=0;else{var le=x.suspendedLanes,Ae=x.pingedLanes;O=(1<<31-rt(42|a)+1)-1,O&=D&~(le&~Ae),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(h=!0,X2(x,O))}else O=An,O=xe(x,x===Er?O:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(O&3)===0||Ue(x,O)||(h=!0,X2(x,O));x=x.next}while(h);g1=!1}}function iO(){H2()}function H2(){lx=m1=!1;var a=0;wd!==0&&xO()&&(a=wd);for(var o=st(),h=null,x=ax;x!==null;){var D=x.next,O=z2(x,o);O===0?(x.next=null,h===null?ax=D:h.next=D,D===null&&(_0=h)):(h=x,(a!==0||(O&3)!==0)&&(lx=!0)),x=D}Wi!==0&&Wi!==5||cm(a),wd!==0&&(wd=0)}function z2(a,o){for(var h=a.suspendedLanes,x=a.pingedLanes,D=a.expirationTimes,O=a.pendingLanes&-62914561;0<O;){var le=31-rt(O),Ae=1<<le,ft=D[le];ft===-1?((Ae&h)===0||(Ae&x)!==0)&&(D[le]=Pe(Ae,o)):ft<=o&&(a.expiredLanes|=Ae),O&=~Ae}if(o=Er,h=An,h=xe(a,a===o?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),x=a.callbackNode,h===0||a===o&&(fr===2||fr===9)||a.cancelPendingCommit!==null)return x!==null&&x!==null&&re(x),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||Ue(a,h)){if(o=h&-h,o===a.callbackPriority)return o;switch(x!==null&&re(x),Ve(h)){case 2:case 8:h=At;break;case 32:h=ot;break;case 268435456:h=Dt;break;default:h=ot}return x=q2.bind(null,a),h=Te(h,x),a.callbackPriority=o,a.callbackNode=h,o}return x!==null&&x!==null&&re(x),a.callbackPriority=2,a.callbackNode=null,2}function q2(a,o){if(Wi!==0&&Wi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(ix()&&a.callbackNode!==h)return null;var x=An;return x=xe(a,a===Er?x:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),x===0?null:(O2(a,x,o),z2(a,st()),a.callbackNode!=null&&a.callbackNode===h?q2.bind(null,a):null)}function X2(a,o){if(ix())return null;O2(a,o,!0)}function aO(){_O(function(){(ir&6)!==0?Te(lt,iO):H2()})}function x1(){if(wd===0){var a=b;a===0&&(a=Je,Je<<=1,(Je&261888)===0&&(Je=256)),wd=a}return wd}function J2(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:js(""+a)}function Z2(a,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,a.id&&h.setAttribute("form",a.id),o.parentNode.insertBefore(h,o),a=new FormData(a),h.parentNode.removeChild(h),a}function lO(a,o,h,x,D){if(o==="submit"&&h&&h.stateNode===D){var O=J2((D[ds]||null).action),le=x.submitter;le&&(o=(o=le[ds]||null)?J2(o.formAction):le.getAttribute("formAction"),o!==null&&(O=o,le=null));var Ae=new Qn("action","action",null,x,D);a.push({event:Ae,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(wd!==0){var ft=le?Z2(D,le):new FormData(D);A_(h,{pending:!0,data:ft,method:D.method,action:O},null,ft)}}else typeof O=="function"&&(Ae.preventDefault(),ft=le?Z2(D,le):new FormData(D),A_(h,{pending:!0,data:ft,method:D.method,action:O},O,ft))},currentTarget:D}]})}}for(var p1=0;p1<yc.length;p1++){var _1=yc[p1],oO=_1.toLowerCase(),cO=_1[0].toUpperCase()+_1.slice(1);Qa(oO,"on"+cO)}Qa(Cc,"onAnimationEnd"),Qa(ju,"onAnimationIteration"),Qa(Uf,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(Mg,"onTransitionRun"),Qa(Lg,"onTransitionStart"),Qa(wg,"onTransitionCancel"),Qa(Wf,"onTransitionEnd"),pt("onMouseEnter",["mouseout","mouseover"]),pt("onMouseLeave",["mouseout","mouseover"]),pt("onPointerEnter",["pointerout","pointerover"]),pt("onPointerLeave",["pointerout","pointerover"]),Ee("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ee("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ee("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ee("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dm));function eS(a,o){o=(o&4)!==0;for(var h=0;h<a.length;h++){var x=a[h],D=x.event;x=x.listeners;e:{var O=void 0;if(o)for(var le=x.length-1;0<=le;le--){var Ae=x[le],ft=Ae.instance,Yt=Ae.currentTarget;if(Ae=Ae.listener,ft!==O&&D.isPropagationStopped())break e;O=Ae,D.currentTarget=Yt;try{O(D)}catch(ns){Iu(ns)}D.currentTarget=null,O=ft}else for(le=0;le<x.length;le++){if(Ae=x[le],ft=Ae.instance,Yt=Ae.currentTarget,Ae=Ae.listener,ft!==O&&D.isPropagationStopped())break e;O=Ae,D.currentTarget=Yt;try{O(D)}catch(ns){Iu(ns)}D.currentTarget=null,O=ft}}}}function wn(a,o){var h=o[Ns];h===void 0&&(h=o[Ns]=new Set);var x=a+"__bubble";h.has(x)||(tS(o,a,2,!1),h.add(x))}function C1(a,o,h){var x=0;o&&(x|=4),tS(h,a,x,o)}var ox="_reactListening"+Math.random().toString(36).slice(2);function y1(a){if(!a[ox]){a[ox]=!0,Ie.forEach(function(h){h!=="selectionchange"&&(dO.has(h)||C1(h,!1,a),C1(h,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[ox]||(o[ox]=!0,C1("selectionchange",!1,o))}}function tS(a,o,h,x){switch(IS(o)){case 2:var D=UO;break;case 8:D=WO;break;default:D=P1}h=D.bind(null,o,h,a),D=void 0,!cr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(D=!0),x?D!==void 0?a.addEventListener(o,h,{capture:!0,passive:D}):a.addEventListener(o,h,!0):D!==void 0?a.addEventListener(o,h,{passive:D}):a.addEventListener(o,h,!1)}function b1(a,o,h,x,D){var O=x;if((o&1)===0&&(o&2)===0&&x!==null)e:for(;;){if(x===null)return;var le=x.tag;if(le===3||le===4){var Ae=x.stateNode.containerInfo;if(Ae===D)break;if(le===4)for(le=x.return;le!==null;){var ft=le.tag;if((ft===3||ft===4)&&le.stateNode.containerInfo===D)return;le=le.return}for(;Ae!==null;){if(le=qt(Ae),le===null)return;if(ft=le.tag,ft===5||ft===6||ft===26||ft===27){x=O=le;continue e}Ae=Ae.parentNode}}x=x.return}qr(function(){var Yt=O,ns=Qs(h),us=[];e:{var $t=Bf.get(a);if($t!==void 0){var zt=Qn,Vs=a;switch(a){case"keypress":if(Dr(h)===0)break e;case"keydown":case"keyup":zt=Wn;break;case"focusin":Vs="focus",zt=no;break;case"focusout":Vs="blur",zt=no;break;case"beforeblur":case"afterblur":zt=no;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zt=Kr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zt=Oi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zt=mi;break;case Cc:case ju:case Uf:zt=B;break;case Wf:zt=Mi;break;case"scroll":case"scrollend":zt=Ni;break;case"wheel":zt=gl;break;case"copy":case"cut":case"paste":zt=Xe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zt=Jr;break;case"toggle":case"beforetoggle":zt=Ru}var dn=(o&4)!==0,Sr=!dn&&(a==="scroll"||a==="scrollend"),Mt=dn?$t!==null?$t+"Capture":null:$t;dn=[];for(var vt=Yt,Gt;vt!==null;){var os=vt;if(Gt=os.stateNode,os=os.tag,os!==5&&os!==26&&os!==27||Gt===null||Mt===null||(os=vr(vt,Mt),os!=null&&dn.push(um(vt,os,Gt))),Sr)break;vt=vt.return}0<dn.length&&($t=new zt($t,Vs,null,h,ns),us.push({event:$t,listeners:dn}))}}if((o&7)===0){e:{if($t=a==="mouseover"||a==="pointerover",zt=a==="mouseout"||a==="pointerout",$t&&h!==Us&&(Vs=h.relatedTarget||h.fromElement)&&(qt(Vs)||Vs[Ss]))break e;if((zt||$t)&&($t=ns.window===ns?ns:($t=ns.ownerDocument)?$t.defaultView||$t.parentWindow:window,zt?(Vs=h.relatedTarget||h.toElement,zt=Yt,Vs=Vs?qt(Vs):null,Vs!==null&&(Sr=l(Vs),dn=Vs.tag,Vs!==Sr||dn!==5&&dn!==27&&dn!==6)&&(Vs=null)):(zt=null,Vs=Yt),zt!==Vs)){if(dn=Kr,os="onMouseLeave",Mt="onMouseEnter",vt="mouse",(a==="pointerout"||a==="pointerover")&&(dn=Jr,os="onPointerLeave",Mt="onPointerEnter",vt="pointer"),Sr=zt==null?$t:ue(zt),Gt=Vs==null?$t:ue(Vs),$t=new dn(os,vt+"leave",zt,h,ns),$t.target=Sr,$t.relatedTarget=Gt,os=null,qt(ns)===Yt&&(dn=new dn(Mt,vt+"enter",Vs,h,ns),dn.target=Gt,dn.relatedTarget=Sr,os=dn),Sr=os,zt&&Vs)t:{for(dn=uO,Mt=zt,vt=Vs,Gt=0,os=Mt;os;os=dn(os))Gt++;os=0;for(var rn=vt;rn;rn=dn(rn))os++;for(;0<Gt-os;)Mt=dn(Mt),Gt--;for(;0<os-Gt;)vt=dn(vt),os--;for(;Gt--;){if(Mt===vt||vt!==null&&Mt===vt.alternate){dn=Mt;break t}Mt=dn(Mt),vt=dn(vt)}dn=null}else dn=null;zt!==null&&sS(us,$t,zt,dn,!1),Vs!==null&&Sr!==null&&sS(us,Sr,Vs,dn,!0)}}e:{if($t=Yt?ue(Yt):window,zt=$t.nodeName&&$t.nodeName.toLowerCase(),zt==="select"||zt==="input"&&$t.type==="file")var Xn=Uo;else if(Tu($t))if(_a)Xn=Il;else{Xn=Zr;var Js=gd}else zt=$t.nodeName,!zt||zt.toLowerCase()!=="input"||$t.type!=="checkbox"&&$t.type!=="radio"?Yt&&Os(Yt.elementType)&&(Xn=Uo):Xn=Qh;if(Xn&&(Xn=Xn(a,Yt))){Ea(us,Xn,h,ns);break e}Js&&Js(a,$t,Yt),a==="focusout"&&Yt&&$t.type==="number"&&Yt.memoizedProps.value!=null&&cs($t,"number",$t.value)}switch(Js=Yt?ue(Yt):window,a){case"focusin":(Tu(Js)||Js.contentEditable==="true")&&(ja=Js,mo=Yt,qi=null);break;case"focusout":qi=mo=ja=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,zn(us,h,ns);break;case"selectionchange":if(_c)break;case"keydown":case"keyup":zn(us,h,ns)}var vn;if(Rl)e:{switch(a){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else Tl?ko(a,h)&&(kn="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(kn="onCompositionStart");kn&&(ao&&h.locale!=="ko"&&(Tl||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&Tl&&(vn=zi()):(Fr=ns,Hi="value"in Fr?Fr.value:Fr.textContent,Tl=!0)),Js=cx(Yt,kn),0<Js.length&&(kn=new Ot(kn,a,null,h,ns),us.push({event:kn,listeners:Js}),vn?kn.data=vn:(vn=hd(h),vn!==null&&(kn.data=vn)))),(vn=pc?ca(a,h):lo(a,h))&&(kn=cx(Yt,"onBeforeInput"),0<kn.length&&(Js=new Ot("onBeforeInput","beforeinput",null,h,ns),us.push({event:Js,listeners:kn}),Js.data=vn)),lO(us,a,Yt,h,ns)}eS(us,o)})}function um(a,o,h){return{instance:a,listener:o,currentTarget:h}}function cx(a,o){for(var h=o+"Capture",x=[];a!==null;){var D=a,O=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||O===null||(D=vr(a,h),D!=null&&x.unshift(um(a,D,O)),D=vr(a,o),D!=null&&x.push(um(a,D,O))),a.tag===3)return x;a=a.return}return[]}function uO(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function sS(a,o,h,x,D){for(var O=o._reactName,le=[];h!==null&&h!==x;){var Ae=h,ft=Ae.alternate,Yt=Ae.stateNode;if(Ae=Ae.tag,ft!==null&&ft===x)break;Ae!==5&&Ae!==26&&Ae!==27||Yt===null||(ft=Yt,D?(Yt=vr(h,O),Yt!=null&&le.unshift(um(h,Yt,ft))):D||(Yt=vr(h,O),Yt!=null&&le.push(um(h,Yt,ft)))),h=h.return}le.length!==0&&a.push({event:o,listeners:le})}var hO=/\r\n?/g,fO=/\u0000|\uFFFD/g;function nS(a){return(typeof a=="string"?a:""+a).replace(hO,`
`).replace(fO,"")}function rS(a,o){return o=nS(o),nS(a)===o}function Nr(a,o,h,x,D,O){switch(h){case"children":typeof x=="string"?o==="body"||o==="textarea"&&x===""||nt(a,x):(typeof x=="number"||typeof x=="bigint")&&o!=="body"&&nt(a,""+x);break;case"className":wt(a,"class",x);break;case"tabIndex":wt(a,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":wt(a,h,x);break;case"style":Ht(a,x,O);break;case"data":if(o!=="object"){wt(a,"data",x);break}case"src":case"href":if(x===""&&(o!=="a"||h!=="href")){a.removeAttribute(h);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){a.removeAttribute(h);break}x=js(""+x),a.setAttribute(h,x);break;case"action":case"formAction":if(typeof x=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(h==="formAction"?(o!=="input"&&Nr(a,o,"name",D.name,D,null),Nr(a,o,"formEncType",D.formEncType,D,null),Nr(a,o,"formMethod",D.formMethod,D,null),Nr(a,o,"formTarget",D.formTarget,D,null)):(Nr(a,o,"encType",D.encType,D,null),Nr(a,o,"method",D.method,D,null),Nr(a,o,"target",D.target,D,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){a.removeAttribute(h);break}x=js(""+x),a.setAttribute(h,x);break;case"onClick":x!=null&&(a.onclick=hs);break;case"onScroll":x!=null&&wn("scroll",a);break;case"onScrollEnd":x!=null&&wn("scrollend",a);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(h=x.__html,h!=null){if(D.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"multiple":a.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":a.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){a.removeAttribute("xlink:href");break}h=js(""+x),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?a.setAttribute(h,""+x):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":x===!0?a.setAttribute(h,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?a.setAttribute(h,x):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?a.setAttribute(h,x):a.removeAttribute(h);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?a.removeAttribute(h):a.setAttribute(h,x);break;case"popover":wn("beforetoggle",a),wn("toggle",a),ct(a,"popover",x);break;case"xlinkActuate":Bt(a,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Bt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Bt(a,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Bt(a,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Bt(a,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Bt(a,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Bt(a,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Bt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Bt(a,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":ct(a,"is",x);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=es.get(h)||h,ct(a,h,x))}}function N1(a,o,h,x,D,O){switch(h){case"style":Ht(a,x,O);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(h=x.__html,h!=null){if(D.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"children":typeof x=="string"?nt(a,x):(typeof x=="number"||typeof x=="bigint")&&nt(a,""+x);break;case"onScroll":x!=null&&wn("scroll",a);break;case"onScrollEnd":x!=null&&wn("scrollend",a);break;case"onClick":x!=null&&(a.onclick=hs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ze.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(D=h.endsWith("Capture"),o=h.slice(2,D?h.length-7:void 0),O=a[ds]||null,O=O!=null?O[h]:null,typeof O=="function"&&a.removeEventListener(o,O,D),typeof x=="function")){typeof O!="function"&&O!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(o,x,D);break e}h in a?a[h]=x:x===!0?a.setAttribute(h,""):ct(a,h,x)}}}function ma(a,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",a),wn("load",a);var x=!1,D=!1,O;for(O in h)if(h.hasOwnProperty(O)){var le=h[O];if(le!=null)switch(O){case"src":x=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Nr(a,o,O,le,h,null)}}D&&Nr(a,o,"srcSet",h.srcSet,h,null),x&&Nr(a,o,"src",h.src,h,null);return;case"input":wn("invalid",a);var Ae=O=le=D=null,ft=null,Yt=null;for(x in h)if(h.hasOwnProperty(x)){var ns=h[x];if(ns!=null)switch(x){case"name":D=ns;break;case"type":le=ns;break;case"checked":ft=ns;break;case"defaultChecked":Yt=ns;break;case"value":O=ns;break;case"defaultValue":Ae=ns;break;case"children":case"dangerouslySetInnerHTML":if(ns!=null)throw Error(r(137,o));break;default:Nr(a,o,x,ns,h,null)}}Ms(a,O,Ae,ft,Yt,le,D,!1);return;case"select":wn("invalid",a),x=le=O=null;for(D in h)if(h.hasOwnProperty(D)&&(Ae=h[D],Ae!=null))switch(D){case"value":O=Ae;break;case"defaultValue":le=Ae;break;case"multiple":x=Ae;default:Nr(a,o,D,Ae,h,null)}o=O,h=le,a.multiple=!!x,o!=null?ms(a,!!x,o,!1):h!=null&&ms(a,!!x,h,!0);return;case"textarea":wn("invalid",a),O=D=x=null;for(le in h)if(h.hasOwnProperty(le)&&(Ae=h[le],Ae!=null))switch(le){case"value":x=Ae;break;case"defaultValue":D=Ae;break;case"children":O=Ae;break;case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(91));break;default:Nr(a,o,le,Ae,h,null)}Ls(a,x,D,O);return;case"option":for(ft in h)if(h.hasOwnProperty(ft)&&(x=h[ft],x!=null))switch(ft){case"selected":a.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Nr(a,o,ft,x,h,null)}return;case"dialog":wn("beforetoggle",a),wn("toggle",a),wn("cancel",a),wn("close",a);break;case"iframe":case"object":wn("load",a);break;case"video":case"audio":for(x=0;x<dm.length;x++)wn(dm[x],a);break;case"image":wn("error",a),wn("load",a);break;case"details":wn("toggle",a);break;case"embed":case"source":case"link":wn("error",a),wn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Yt in h)if(h.hasOwnProperty(Yt)&&(x=h[Yt],x!=null))switch(Yt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Nr(a,o,Yt,x,h,null)}return;default:if(Os(o)){for(ns in h)h.hasOwnProperty(ns)&&(x=h[ns],x!==void 0&&N1(a,o,ns,x,h,void 0));return}}for(Ae in h)h.hasOwnProperty(Ae)&&(x=h[Ae],x!=null&&Nr(a,o,Ae,x,h,null))}function mO(a,o,h,x){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,O=null,le=null,Ae=null,ft=null,Yt=null,ns=null;for(zt in h){var us=h[zt];if(h.hasOwnProperty(zt)&&us!=null)switch(zt){case"checked":break;case"value":break;case"defaultValue":ft=us;default:x.hasOwnProperty(zt)||Nr(a,o,zt,null,x,us)}}for(var $t in x){var zt=x[$t];if(us=h[$t],x.hasOwnProperty($t)&&(zt!=null||us!=null))switch($t){case"type":O=zt;break;case"name":D=zt;break;case"checked":Yt=zt;break;case"defaultChecked":ns=zt;break;case"value":le=zt;break;case"defaultValue":Ae=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(r(137,o));break;default:zt!==us&&Nr(a,o,$t,zt,x,us)}}vs(a,le,Ae,ft,Yt,ns,O,D);return;case"select":zt=le=Ae=$t=null;for(O in h)if(ft=h[O],h.hasOwnProperty(O)&&ft!=null)switch(O){case"value":break;case"multiple":zt=ft;default:x.hasOwnProperty(O)||Nr(a,o,O,null,x,ft)}for(D in x)if(O=x[D],ft=h[D],x.hasOwnProperty(D)&&(O!=null||ft!=null))switch(D){case"value":$t=O;break;case"defaultValue":Ae=O;break;case"multiple":le=O;default:O!==ft&&Nr(a,o,D,O,x,ft)}o=Ae,h=le,x=zt,$t!=null?ms(a,!!h,$t,!1):!!x!=!!h&&(o!=null?ms(a,!!h,o,!0):ms(a,!!h,h?[]:"",!1));return;case"textarea":zt=$t=null;for(Ae in h)if(D=h[Ae],h.hasOwnProperty(Ae)&&D!=null&&!x.hasOwnProperty(Ae))switch(Ae){case"value":break;case"children":break;default:Nr(a,o,Ae,null,x,D)}for(le in x)if(D=x[le],O=h[le],x.hasOwnProperty(le)&&(D!=null||O!=null))switch(le){case"value":$t=D;break;case"defaultValue":zt=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:D!==O&&Nr(a,o,le,D,x,O)}Ks(a,$t,zt);return;case"option":for(var Vs in h)if($t=h[Vs],h.hasOwnProperty(Vs)&&$t!=null&&!x.hasOwnProperty(Vs))switch(Vs){case"selected":a.selected=!1;break;default:Nr(a,o,Vs,null,x,$t)}for(ft in x)if($t=x[ft],zt=h[ft],x.hasOwnProperty(ft)&&$t!==zt&&($t!=null||zt!=null))switch(ft){case"selected":a.selected=$t&&typeof $t!="function"&&typeof $t!="symbol";break;default:Nr(a,o,ft,$t,x,zt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dn in h)$t=h[dn],h.hasOwnProperty(dn)&&$t!=null&&!x.hasOwnProperty(dn)&&Nr(a,o,dn,null,x,$t);for(Yt in x)if($t=x[Yt],zt=h[Yt],x.hasOwnProperty(Yt)&&$t!==zt&&($t!=null||zt!=null))switch(Yt){case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(r(137,o));break;default:Nr(a,o,Yt,$t,x,zt)}return;default:if(Os(o)){for(var Sr in h)$t=h[Sr],h.hasOwnProperty(Sr)&&$t!==void 0&&!x.hasOwnProperty(Sr)&&N1(a,o,Sr,void 0,x,$t);for(ns in x)$t=x[ns],zt=h[ns],!x.hasOwnProperty(ns)||$t===zt||$t===void 0&&zt===void 0||N1(a,o,ns,$t,x,zt);return}}for(var Mt in h)$t=h[Mt],h.hasOwnProperty(Mt)&&$t!=null&&!x.hasOwnProperty(Mt)&&Nr(a,o,Mt,null,x,$t);for(us in x)$t=x[us],zt=h[us],!x.hasOwnProperty(us)||$t===zt||$t==null&&zt==null||Nr(a,o,us,$t,x,zt)}function iS(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gO(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,h=performance.getEntriesByType("resource"),x=0;x<h.length;x++){var D=h[x],O=D.transferSize,le=D.initiatorType,Ae=D.duration;if(O&&Ae&&iS(le)){for(le=0,Ae=D.responseEnd,x+=1;x<h.length;x++){var ft=h[x],Yt=ft.startTime;if(Yt>Ae)break;var ns=ft.transferSize,us=ft.initiatorType;ns&&iS(us)&&(ft=ft.responseEnd,le+=ns*(ft<Ae?1:(Ae-Yt)/(ft-Yt)))}if(--x,o+=8*(O+le)/(D.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var S1=null,v1=null;function dx(a){return a.nodeType===9?a:a.ownerDocument}function aS(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lS(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function D1(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var R1=null;function xO(){var a=window.event;return a&&a.type==="popstate"?a===R1?!1:(R1=a,!0):(R1=null,!1)}var oS=typeof setTimeout=="function"?setTimeout:void 0,pO=typeof clearTimeout=="function"?clearTimeout:void 0,cS=typeof Promise=="function"?Promise:void 0,_O=typeof queueMicrotask=="function"?queueMicrotask:typeof cS<"u"?function(a){return cS.resolve(null).then(a).catch(CO)}:oS;function CO(a){setTimeout(function(){throw a})}function Pd(a){return a==="head"}function dS(a,o){var h=o,x=0;do{var D=h.nextSibling;if(a.removeChild(h),D&&D.nodeType===8)if(h=D.data,h==="/$"||h==="/&"){if(x===0){a.removeChild(D),N0(o);return}x--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")x++;else if(h==="html")hm(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,hm(h);for(var O=h.firstChild;O;){var le=O.nextSibling,Ae=O.nodeName;O[Qt]||Ae==="SCRIPT"||Ae==="STYLE"||Ae==="LINK"&&O.rel.toLowerCase()==="stylesheet"||h.removeChild(O),O=le}}else h==="body"&&hm(a.ownerDocument.body);h=D}while(h);N0(o)}function uS(a,o){var h=a;a=0;do{var x=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=x}while(h)}function T1(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":T1(h),ut(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function yO(a,o,h,x){for(;a.nodeType===1;){var D=h;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!x&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(x){if(!a[Qt])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(O=a.getAttribute("rel"),O==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(O!==D.rel||a.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||a.getAttribute("title")!==(D.title==null?null:D.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(O=a.getAttribute("src"),(O!==(D.src==null?null:D.src)||a.getAttribute("type")!==(D.type==null?null:D.type)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&O&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var O=D.name==null?null:""+D.name;if(D.type==="hidden"&&a.getAttribute("name")===O)return a}else return a;if(a=kl(a.nextSibling),a===null)break}return null}function bO(a,o,h){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=kl(a.nextSibling),a===null))return null;return a}function hS(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=kl(a.nextSibling),a===null))return null;return a}function E1(a){return a.data==="$?"||a.data==="$~"}function j1(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function NO(a,o){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||h.readyState!=="loading")o();else{var x=function(){o(),h.removeEventListener("DOMContentLoaded",x)};h.addEventListener("DOMContentLoaded",x),a._reactRetry=x}}function kl(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var I1=null;function fS(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(o===0)return kl(a.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}a=a.nextSibling}return null}function mS(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return a;o--}else h!=="/$"&&h!=="/&"||o++}a=a.previousSibling}return null}function gS(a,o,h){switch(o=dx(h),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function hm(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);ut(a)}var Ul=new Map,xS=new Set;function ux(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ac=K.d;K.d={f:SO,r:vO,D:DO,C:RO,L:TO,m:EO,X:IO,S:jO,M:OO};function SO(){var a=Ac.f(),o=sx();return a||o}function vO(a){var o=jt(a);o!==null&&o.tag===5&&o.type==="form"?LN(o):Ac.r(a)}var C0=typeof document>"u"?null:document;function pS(a,o,h){var x=C0;if(x&&typeof o=="string"&&o){var D=xs(o);D='link[rel="'+a+'"][href="'+D+'"]',typeof h=="string"&&(D+='[crossorigin="'+h+'"]'),xS.has(D)||(xS.add(D),a={rel:a,crossOrigin:h,href:o},x.querySelector(D)===null&&(o=x.createElement("link"),ma(o,"link",a),Le(o),x.head.appendChild(o)))}}function DO(a){Ac.D(a),pS("dns-prefetch",a,null)}function RO(a,o){Ac.C(a,o),pS("preconnect",a,o)}function TO(a,o,h){Ac.L(a,o,h);var x=C0;if(x&&a&&o){var D='link[rel="preload"][as="'+xs(o)+'"]';o==="image"&&h&&h.imageSrcSet?(D+='[imagesrcset="'+xs(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(D+='[imagesizes="'+xs(h.imageSizes)+'"]')):D+='[href="'+xs(a)+'"]';var O=D;switch(o){case"style":O=y0(a);break;case"script":O=b0(a)}Ul.has(O)||(a=p({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:a,as:o},h),Ul.set(O,a),x.querySelector(D)!==null||o==="style"&&x.querySelector(fm(O))||o==="script"&&x.querySelector(mm(O))||(o=x.createElement("link"),ma(o,"link",a),Le(o),x.head.appendChild(o)))}}function EO(a,o){Ac.m(a,o);var h=C0;if(h&&a){var x=o&&typeof o.as=="string"?o.as:"script",D='link[rel="modulepreload"][as="'+xs(x)+'"][href="'+xs(a)+'"]',O=D;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=b0(a)}if(!Ul.has(O)&&(a=p({rel:"modulepreload",href:a},o),Ul.set(O,a),h.querySelector(D)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(mm(O)))return}x=h.createElement("link"),ma(x,"link",a),Le(x),h.head.appendChild(x)}}}function jO(a,o,h){Ac.S(a,o,h);var x=C0;if(x&&a){var D=Ce(x).hoistableStyles,O=y0(a);o=o||"default";var le=D.get(O);if(!le){var Ae={loading:0,preload:null};if(le=x.querySelector(fm(O)))Ae.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},h),(h=Ul.get(O))&&O1(a,h);var ft=le=x.createElement("link");Le(ft),ma(ft,"link",a),ft._p=new Promise(function(Yt,ns){ft.onload=Yt,ft.onerror=ns}),ft.addEventListener("load",function(){Ae.loading|=1}),ft.addEventListener("error",function(){Ae.loading|=2}),Ae.loading|=4,hx(le,o,x)}le={type:"stylesheet",instance:le,count:1,state:Ae},D.set(O,le)}}}function IO(a,o){Ac.X(a,o);var h=C0;if(h&&a){var x=Ce(h).hoistableScripts,D=b0(a),O=x.get(D);O||(O=h.querySelector(mm(D)),O||(a=p({src:a,async:!0},o),(o=Ul.get(D))&&M1(a,o),O=h.createElement("script"),Le(O),ma(O,"link",a),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(D,O))}}function OO(a,o){Ac.M(a,o);var h=C0;if(h&&a){var x=Ce(h).hoistableScripts,D=b0(a),O=x.get(D);O||(O=h.querySelector(mm(D)),O||(a=p({src:a,async:!0,type:"module"},o),(o=Ul.get(D))&&M1(a,o),O=h.createElement("script"),Le(O),ma(O,"link",a),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(D,O))}}function _S(a,o,h,x){var D=(D=q.current)?ux(D):null;if(!D)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=y0(h.href),h=Ce(D).hoistableStyles,x=h.get(o),x||(x={type:"style",instance:null,count:0,state:null},h.set(o,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=y0(h.href);var O=Ce(D).hoistableStyles,le=O.get(a);if(le||(D=D.ownerDocument||D,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(a,le),(O=D.querySelector(fm(a)))&&!O._p&&(le.instance=O,le.state.loading=5),Ul.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Ul.set(a,h),O||MO(D,a,h,le.state))),o&&x===null)throw Error(r(528,""));return le}if(o&&x!==null)throw Error(r(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=b0(h),h=Ce(D).hoistableScripts,x=h.get(o),x||(x={type:"script",instance:null,count:0,state:null},h.set(o,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function y0(a){return'href="'+xs(a)+'"'}function fm(a){return'link[rel="stylesheet"]['+a+"]"}function CS(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function MO(a,o,h,x){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?x.loading=1:(o=a.createElement("link"),x.preload=o,o.addEventListener("load",function(){return x.loading|=1}),o.addEventListener("error",function(){return x.loading|=2}),ma(o,"link",h),Le(o),a.head.appendChild(o))}function b0(a){return'[src="'+xs(a)+'"]'}function mm(a){return"script[async]"+a}function yS(a,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var x=a.querySelector('style[data-href~="'+xs(h.href)+'"]');if(x)return o.instance=x,Le(x),x;var D=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return x=(a.ownerDocument||a).createElement("style"),Le(x),ma(x,"style",D),hx(x,h.precedence,a),o.instance=x;case"stylesheet":D=y0(h.href);var O=a.querySelector(fm(D));if(O)return o.state.loading|=4,o.instance=O,Le(O),O;x=CS(h),(D=Ul.get(D))&&O1(x,D),O=(a.ownerDocument||a).createElement("link"),Le(O);var le=O;return le._p=new Promise(function(Ae,ft){le.onload=Ae,le.onerror=ft}),ma(O,"link",x),o.state.loading|=4,hx(O,h.precedence,a),o.instance=O;case"script":return O=b0(h.src),(D=a.querySelector(mm(O)))?(o.instance=D,Le(D),D):(x=h,(D=Ul.get(O))&&(x=p({},h),M1(x,D)),a=a.ownerDocument||a,D=a.createElement("script"),Le(D),ma(D,"link",x),a.head.appendChild(D),o.instance=D);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(x=o.instance,o.state.loading|=4,hx(x,h.precedence,a));return o.instance}function hx(a,o,h){for(var x=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=x.length?x[x.length-1]:null,O=D,le=0;le<x.length;le++){var Ae=x[le];if(Ae.dataset.precedence===o)O=Ae;else if(O!==D)break}O?O.parentNode.insertBefore(a,O.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(a,o.firstChild))}function O1(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function M1(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var fx=null;function bS(a,o,h){if(fx===null){var x=new Map,D=fx=new Map;D.set(h,x)}else D=fx,x=D.get(h),x||(x=new Map,D.set(h,x));if(x.has(a))return x;for(x.set(a,null),h=h.getElementsByTagName(a),D=0;D<h.length;D++){var O=h[D];if(!(O[Qt]||O[rs]||a==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var le=O.getAttribute(o)||"";le=a+le;var Ae=x.get(le);Ae?Ae.push(O):x.set(le,[O])}}return x}function NS(a,o,h){a=a.ownerDocument||a,a.head.insertBefore(h,o==="title"?a.querySelector("head > title"):null)}function LO(a,o,h){if(h===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function SS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function wO(a,o,h,x){if(h.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var D=y0(x.href),O=o.querySelector(fm(D));if(O){o=O._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=mx.bind(a),o.then(a,a)),h.state.loading|=4,h.instance=O,Le(O);return}O=o.ownerDocument||o,x=CS(x),(D=Ul.get(D))&&O1(x,D),O=O.createElement("link"),Le(O);var le=O;le._p=new Promise(function(Ae,ft){le.onload=Ae,le.onerror=ft}),ma(O,"link",x),h.instance=O}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=mx.bind(a),o.addEventListener("load",h),o.addEventListener("error",h))}}var L1=0;function PO(a,o){return a.stylesheets&&a.count===0&&xx(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var x=setTimeout(function(){if(a.stylesheets&&xx(a,a.stylesheets),a.unsuspend){var O=a.unsuspend;a.unsuspend=null,O()}},6e4+o);0<a.imgBytes&&L1===0&&(L1=62500*gO());var D=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&xx(a,a.stylesheets),a.unsuspend)){var O=a.unsuspend;a.unsuspend=null,O()}},(a.imgBytes>L1?50:800)+o);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(x),clearTimeout(D)}}:null}function mx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xx(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var gx=null;function xx(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,gx=new Map,o.forEach(AO,a),gx=null,mx.call(a))}function AO(a,o){if(!(o.state.loading&4)){var h=gx.get(a);if(h)var x=h.get(null);else{h=new Map,gx.set(a,h);for(var D=a.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<D.length;O++){var le=D[O];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(h.set(le.dataset.precedence,le),x=le)}x&&h.set(null,x)}D=o.instance,le=D.getAttribute("data-precedence"),O=h.get(le)||x,O===x&&h.set(null,D),h.set(le,D),this.count++,x=mx.bind(this),D.addEventListener("load",x),D.addEventListener("error",x),O?O.parentNode.insertBefore(D,O.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(D,a.firstChild)),o.state.loading|=4}}var gm={$$typeof:M,Provider:null,Consumer:null,_currentValue:w,_currentValue2:w,_threadCount:0};function kO(a,o,h,x,D,O,le,Ae,ft){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=x,this.onUncaughtError=D,this.onCaughtError=O,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ft,this.incompleteTransitions=new Map}function vS(a,o,h,x,D,O,le,Ae,ft,Yt,ns,us){return a=new kO(a,o,h,le,ft,Yt,ns,us,Ae),o=1,O===!0&&(o|=24),O=Ji(3,null,null,o),a.current=O,O.stateNode=a,o=Sd(),o.refCount++,a.pooledCache=o,o.refCount++,O.memoizedState={element:x,isDehydrated:h,cache:o},Ts(O),a}function DS(a){return a?(a=wi,a):wi}function RS(a,o,h,x,D,O){D=DS(D),x.context===null?x.context=D:x.pendingContext=D,x=on(o),x.payload={element:h},O=O===void 0?null:O,O!==null&&(x.callback=O),h=Nn(a,x,o),h!==null&&(sl(h,a,o),nr(h,a,o))}function TS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<o?h:o}}function w1(a,o){TS(a,o),(a=a.alternate)&&TS(a,o)}function ES(a){if(a.tag===13||a.tag===31){var o=go(a,67108864);o!==null&&sl(o,a,67108864),w1(a,67108864)}}function jS(a){if(a.tag===13||a.tag===31){var o=Sl();o=Lt(o);var h=go(a,o);h!==null&&sl(h,a,o),w1(a,o)}}var px=!0;function UO(a,o,h,x){var D=Y.T;Y.T=null;var O=K.p;try{K.p=2,P1(a,o,h,x)}finally{K.p=O,Y.T=D}}function WO(a,o,h,x){var D=Y.T;Y.T=null;var O=K.p;try{K.p=8,P1(a,o,h,x)}finally{K.p=O,Y.T=D}}function P1(a,o,h,x){if(px){var D=A1(x);if(D===null)b1(a,o,x,_x,h),OS(a,x);else if(FO(D,a,o,h,x))x.stopPropagation();else if(OS(a,x),o&4&&-1<BO.indexOf(a)){for(;D!==null;){var O=jt(D);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var le=_e(O.pendingLanes);if(le!==0){var Ae=O;for(Ae.pendingLanes|=2,Ae.entangledLanes|=2;le;){var ft=1<<31-rt(le);Ae.entanglements[1]|=ft,le&=~ft}Xo(O),(ir&6)===0&&(ex=st()+500,cm(0))}}break;case 31:case 13:Ae=go(O,2),Ae!==null&&sl(Ae,O,2),sx(),w1(O,2)}if(O=A1(x),O===null&&b1(a,o,x,_x,h),O===D)break;D=O}D!==null&&x.stopPropagation()}else b1(a,o,x,null,h)}}function A1(a){return a=Qs(a),k1(a)}var _x=null;function k1(a){if(_x=null,a=qt(a),a!==null){var o=l(a);if(o===null)a=null;else{var h=o.tag;if(h===13){if(a=c(o),a!==null)return a;a=null}else if(h===31){if(a=d(o),a!==null)return a;a=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return _x=a,null}function IS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case lt:return 2;case At:return 8;case ot:case We:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var U1=!1,Ad=null,kd=null,Ud=null,xm=new Map,pm=new Map,Wd=[],BO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OS(a,o){switch(a){case"focusin":case"focusout":Ad=null;break;case"dragenter":case"dragleave":kd=null;break;case"mouseover":case"mouseout":Ud=null;break;case"pointerover":case"pointerout":xm.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pm.delete(o.pointerId)}}function _m(a,o,h,x,D,O){return a===null||a.nativeEvent!==O?(a={blockedOn:o,domEventName:h,eventSystemFlags:x,nativeEvent:O,targetContainers:[D]},o!==null&&(o=jt(o),o!==null&&ES(o)),a):(a.eventSystemFlags|=x,o=a.targetContainers,D!==null&&o.indexOf(D)===-1&&o.push(D),a)}function FO(a,o,h,x,D){switch(o){case"focusin":return Ad=_m(Ad,a,o,h,x,D),!0;case"dragenter":return kd=_m(kd,a,o,h,x,D),!0;case"mouseover":return Ud=_m(Ud,a,o,h,x,D),!0;case"pointerover":var O=D.pointerId;return xm.set(O,_m(xm.get(O)||null,a,o,h,x,D)),!0;case"gotpointercapture":return O=D.pointerId,pm.set(O,_m(pm.get(O)||null,a,o,h,x,D)),!0}return!1}function MS(a){var o=qt(a.target);if(o!==null){var h=l(o);if(h!==null){if(o=h.tag,o===13){if(o=c(h),o!==null){a.blockedOn=o,Oe(a.priority,function(){jS(h)});return}}else if(o===31){if(o=d(h),o!==null){a.blockedOn=o,Oe(a.priority,function(){jS(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Cx(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var h=A1(a.nativeEvent);if(h===null){h=a.nativeEvent;var x=new h.constructor(h.type,h);Us=x,h.target.dispatchEvent(x),Us=null}else return o=jt(h),o!==null&&ES(o),a.blockedOn=h,!1;o.shift()}return!0}function LS(a,o,h){Cx(a)&&h.delete(o)}function KO(){U1=!1,Ad!==null&&Cx(Ad)&&(Ad=null),kd!==null&&Cx(kd)&&(kd=null),Ud!==null&&Cx(Ud)&&(Ud=null),xm.forEach(LS),pm.forEach(LS)}function yx(a,o){a.blockedOn===o&&(a.blockedOn=null,U1||(U1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KO)))}var bx=null;function wS(a){bx!==a&&(bx=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bx===a&&(bx=null);for(var o=0;o<a.length;o+=3){var h=a[o],x=a[o+1],D=a[o+2];if(typeof x!="function"){if(k1(x||h)===null)continue;break}var O=jt(h);O!==null&&(a.splice(o,3),o-=3,A_(O,{pending:!0,data:D,method:h.method,action:x},x,D))}}))}function N0(a){function o(ft){return yx(ft,a)}Ad!==null&&yx(Ad,a),kd!==null&&yx(kd,a),Ud!==null&&yx(Ud,a),xm.forEach(o),pm.forEach(o);for(var h=0;h<Wd.length;h++){var x=Wd[h];x.blockedOn===a&&(x.blockedOn=null)}for(;0<Wd.length&&(h=Wd[0],h.blockedOn===null);)MS(h),h.blockedOn===null&&Wd.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(x=0;x<h.length;x+=3){var D=h[x],O=h[x+1],le=D[ds]||null;if(typeof O=="function")le||wS(h);else if(le){var Ae=null;if(O&&O.hasAttribute("formAction")){if(D=O,le=O[ds]||null)Ae=le.formAction;else if(k1(D)!==null)continue}else Ae=le.action;typeof Ae=="function"?h[x+1]=Ae:(h.splice(x,3),x-=3),wS(h)}}}function PS(){function a(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(le){return D=le})},focusReset:"manual",scroll:"manual"})}function o(){D!==null&&(D(),D=null),x||setTimeout(h,20)}function h(){if(!x&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,D=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){x=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),D!==null&&(D(),D=null)}}}function W1(a){this._internalRoot=a}Nx.prototype.render=W1.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var h=o.current,x=Sl();RS(h,x,a,o,null,null)},Nx.prototype.unmount=W1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;RS(a.current,2,null,a,null,null),sx(),o[Ss]=null}};function Nx(a){this._internalRoot=a}Nx.prototype.unstable_scheduleHydration=function(a){if(a){var o=kt();a={blockedOn:null,target:a,priority:o};for(var h=0;h<Wd.length&&o!==0&&o<Wd[h].priority;h++);Wd.splice(h,0,a),h===0&&MS(a)}};var AS=e.version;if(AS!=="19.2.3")throw Error(r(527,AS,"19.2.3"));K.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=f(o),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var QO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sx.isDisabled&&Sx.supportsFiber)try{$e=Sx.inject(QO),gt=Sx}catch{}}return ym.createRoot=function(a,o){if(!i(a))throw Error(r(299));var h=!1,x="",D=QN,O=GN,le=YN;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(x=o.identifierPrefix),o.onUncaughtError!==void 0&&(D=o.onUncaughtError),o.onCaughtError!==void 0&&(O=o.onCaughtError),o.onRecoverableError!==void 0&&(le=o.onRecoverableError)),o=vS(a,1,!1,null,null,h,x,null,D,O,le,PS),a[Ss]=o.current,y1(a),new W1(o)},ym.hydrateRoot=function(a,o,h){if(!i(a))throw Error(r(299));var x=!1,D="",O=QN,le=GN,Ae=YN,ft=null;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(D=h.identifierPrefix),h.onUncaughtError!==void 0&&(O=h.onUncaughtError),h.onCaughtError!==void 0&&(le=h.onCaughtError),h.onRecoverableError!==void 0&&(Ae=h.onRecoverableError),h.formState!==void 0&&(ft=h.formState)),o=vS(a,1,!0,o,h??null,x,D,ft,O,le,Ae,PS),o.context=DS(null),h=o.current,x=Sl(),x=Lt(x),D=on(x),D.callback=null,Nn(h,D,x),h=x,o.current.lanes=h,de(o,h),Xo(o),a[Ss]=o.current,y1(a),new Nx(o)},ym.version="19.2.3",ym}var $S;function tM(){if($S)return Q1.exports;$S=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Q1.exports=eM(),Q1.exports}var sM=tM();const nM=nb(sM);var Ef=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rM={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},su,sb,DT,iM=(DT=class{constructor(){sn(this,su,rM);sn(this,sb,!1)}setTimeoutProvider(t){As(this,su,t)}setTimeout(t,e){return xt(this,su).setTimeout(t,e)}clearTimeout(t){xt(this,su).clearTimeout(t)}setInterval(t,e){return xt(this,su).setInterval(t,e)}clearInterval(t){xt(this,su).clearInterval(t)}},su=new WeakMap,sb=new WeakMap,DT),Zu=new iM;function aM(t){setTimeout(t,0)}var xh=typeof window>"u"||"Deno"in globalThis;function Pa(){}function lM(t,e){return typeof t=="function"?t(e):t}function sy(t){return typeof t=="number"&&t>=0&&t!==1/0}function UT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function gu(t,e){return typeof t=="function"?t(e):t}function Kl(t,e){return typeof t=="function"?t(e):t}function HS(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:l,queryKey:c,stale:d}=t;if(c){if(r){if(e.queryHash!==ib(c,e.options))return!1}else if(!zm(e.queryKey,c))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||i&&i!==e.state.fetchStatus||l&&!l(e))}function zS(t,e){const{exact:n,status:r,predicate:i,mutationKey:l}=t;if(l){if(!e.options.mutationKey)return!1;if(n){if(ph(e.options.mutationKey)!==ph(l))return!1}else if(!zm(e.options.mutationKey,l))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function ib(t,e){return((e==null?void 0:e.queryKeyHashFn)||ph)(t)}function ph(t){return JSON.stringify(t,(e,n)=>ny(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function zm(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>zm(t[n],e[n])):!1}var oM=Object.prototype.hasOwnProperty;function WT(t,e){if(t===e)return t;const n=qS(t)&&qS(e);if(!n&&!(ny(t)&&ny(e)))return e;const i=(n?t:Object.keys(t)).length,l=n?e:Object.keys(e),c=l.length,d=n?new Array(c):{};let u=0;for(let f=0;f<c;f++){const m=n?f:l[f],p=t[m],y=e[m];if(p===y){d[m]=p,(n?f<i:oM.call(t,m))&&u++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){d[m]=y;continue}const g=WT(p,y);d[m]=g,g===p&&u++}return i===c&&u===i?t:d}function gp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function qS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ny(t){if(!XS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!XS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function XS(t){return Object.prototype.toString.call(t)==="[object Object]"}function cM(t){return new Promise(e=>{Zu.setTimeout(e,t)})}function ry(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?WT(t,e):e}function dM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function uM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ab=Symbol();function BT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ab?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function FT(t,e){return typeof t=="function"?t(...e):!!t}var rh,nu,lf,RT,hM=(RT=class extends Ef{constructor(){super();sn(this,rh);sn(this,nu);sn(this,lf);As(this,lf,e=>{if(!xh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){xt(this,nu)||this.setEventListener(xt(this,lf))}onUnsubscribe(){var e;this.hasListeners()||((e=xt(this,nu))==null||e.call(this),As(this,nu,void 0))}setEventListener(e){var n;As(this,lf,e),(n=xt(this,nu))==null||n.call(this),As(this,nu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){xt(this,rh)!==e&&(As(this,rh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof xt(this,rh)=="boolean"?xt(this,rh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},rh=new WeakMap,nu=new WeakMap,lf=new WeakMap,RT),lb=new hM;function iy(){let t,e;const n=new Promise((i,l)=>{t=i,e=l});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var fM=aM;function mM(){let t=[],e=0,n=d=>{d()},r=d=>{d()},i=fM;const l=d=>{e?t.push(d):i(()=>{n(d)})},c=()=>{const d=t;t=[],d.length&&i(()=>{r(()=>{d.forEach(u=>{n(u)})})})};return{batch:d=>{let u;e++;try{u=d()}finally{e--,e||c()}return u},batchCalls:d=>(...u)=>{l(()=>{d(...u)})},schedule:l,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{i=d}}}var Yi=mM(),of,ru,cf,TT,gM=(TT=class extends Ef{constructor(){super();sn(this,of,!0);sn(this,ru);sn(this,cf);As(this,cf,e=>{if(!xh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){xt(this,ru)||this.setEventListener(xt(this,cf))}onUnsubscribe(){var e;this.hasListeners()||((e=xt(this,ru))==null||e.call(this),As(this,ru,void 0))}setEventListener(e){var n;As(this,cf,e),(n=xt(this,ru))==null||n.call(this),As(this,ru,e(this.setOnline.bind(this)))}setOnline(e){xt(this,of)!==e&&(As(this,of,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return xt(this,of)}},of=new WeakMap,ru=new WeakMap,cf=new WeakMap,TT),xp=new gM;function xM(t){return Math.min(1e3*2**t,3e4)}function KT(t){return(t??"online")==="online"?xp.isOnline():!0}var ay=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function QT(t){let e=!1,n=0,r;const i=iy(),l=()=>i.status!=="pending",c=C=>{var v;if(!l()){const R=new ay(C);y(R),(v=t.onCancel)==null||v.call(t,R)}},d=()=>{e=!0},u=()=>{e=!1},f=()=>lb.isFocused()&&(t.networkMode==="always"||xp.isOnline())&&t.canRun(),m=()=>KT(t.networkMode)&&t.canRun(),p=C=>{l()||(r==null||r(),i.resolve(C))},y=C=>{l()||(r==null||r(),i.reject(C))},g=()=>new Promise(C=>{var v;r=R=>{(l()||f())&&C(R)},(v=t.onPause)==null||v.call(t)}).then(()=>{var C;r=void 0,l()||(C=t.onContinue)==null||C.call(t)}),N=()=>{if(l())return;let C;const v=n===0?t.initialPromise:void 0;try{C=v??t.fn()}catch(R){C=Promise.reject(R)}Promise.resolve(C).then(p).catch(R=>{var V;if(l())return;const A=t.retry??(xh?0:3),M=t.retryDelay??xM,L=typeof M=="function"?M(n,R):M,k=A===!0||typeof A=="number"&&n<A||typeof A=="function"&&A(n,R);if(e||!k){y(R);return}n++,(V=t.onFail)==null||V.call(t,n,R),cM(L).then(()=>f()?void 0:g()).then(()=>{e?y(R):N()})})};return{promise:i,status:()=>i.status,cancel:c,continue:()=>(r==null||r(),i),cancelRetry:d,continueRetry:u,canStart:m,start:()=>(m()?N():g().then(N),i)}}var ih,ET,GT=(ET=class{constructor(){sn(this,ih)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sy(this.gcTime)&&As(this,ih,Zu.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(xh?1/0:300*1e3))}clearGcTimeout(){xt(this,ih)&&(Zu.clearTimeout(xt(this,ih)),As(this,ih,void 0))}},ih=new WeakMap,ET),ah,df,Fl,lh,sa,hg,oh,Do,Qc,jT,pM=(jT=class extends GT{constructor(e){super();sn(this,Do);sn(this,ah);sn(this,df);sn(this,Fl);sn(this,lh);sn(this,sa);sn(this,hg);sn(this,oh);As(this,oh,!1),As(this,hg,e.defaultOptions),this.setOptions(e.options),this.observers=[],As(this,lh,e.client),As(this,Fl,xt(this,lh).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,As(this,ah,ZS(this.options)),this.state=e.state??xt(this,ah),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=xt(this,sa))==null?void 0:e.promise}setOptions(e){if(this.options={...xt(this,hg),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ZS(this.options);n.data!==void 0&&(this.setState(JS(n.data,n.dataUpdatedAt)),As(this,ah,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&xt(this,Fl).remove(this)}setData(e,n){const r=ry(this.state.data,e,this.options);return En(this,Do,Qc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){En(this,Do,Qc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=xt(this,sa))==null?void 0:r.promise;return(i=xt(this,sa))==null||i.cancel(e),n?n.then(Pa).catch(Pa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(xt(this,ah))}isActive(){return this.observers.some(e=>Kl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ab||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>gu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!UT(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=xt(this,sa))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=xt(this,sa))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),xt(this,Fl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(xt(this,sa)&&(xt(this,oh)?xt(this,sa).cancel({revert:!0}):xt(this,sa).cancelRetry()),this.scheduleGc()),xt(this,Fl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||En(this,Do,Qc).call(this,{type:"invalidate"})}async fetch(e,n){var u,f,m,p,y,g,N,C,v,R,A,M;if(this.state.fetchStatus!=="idle"&&((u=xt(this,sa))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(xt(this,sa))return xt(this,sa).continueRetry(),xt(this,sa).promise}if(e&&this.setOptions(e),!this.options.queryFn){const L=this.observers.find(k=>k.options.queryFn);L&&this.setOptions(L.options)}const r=new AbortController,i=L=>{Object.defineProperty(L,"signal",{enumerable:!0,get:()=>(As(this,oh,!0),r.signal)})},l=()=>{const L=BT(this.options,n),V=(()=>{const G={client:xt(this,lh),queryKey:this.queryKey,meta:this.meta};return i(G),G})();return As(this,oh,!1),this.options.persister?this.options.persister(L,V,this):L(V)},d=(()=>{const L={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:xt(this,lh),state:this.state,fetchFn:l};return i(L),L})();(f=this.options.behavior)==null||f.onFetch(d,this),As(this,df,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=d.fetchOptions)==null?void 0:m.meta))&&En(this,Do,Qc).call(this,{type:"fetch",meta:(p=d.fetchOptions)==null?void 0:p.meta}),As(this,sa,QT({initialPromise:n==null?void 0:n.initialPromise,fn:d.fetchFn,onCancel:L=>{L instanceof ay&&L.revert&&this.setState({...xt(this,df),fetchStatus:"idle"}),r.abort()},onFail:(L,k)=>{En(this,Do,Qc).call(this,{type:"failed",failureCount:L,error:k})},onPause:()=>{En(this,Do,Qc).call(this,{type:"pause"})},onContinue:()=>{En(this,Do,Qc).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const L=await xt(this,sa).start();if(L===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(L),(g=(y=xt(this,Fl).config).onSuccess)==null||g.call(y,L,this),(C=(N=xt(this,Fl).config).onSettled)==null||C.call(N,L,this.state.error,this),L}catch(L){if(L instanceof ay){if(L.silent)return xt(this,sa).promise;if(L.revert){if(this.state.data===void 0)throw L;return this.state.data}}throw En(this,Do,Qc).call(this,{type:"error",error:L}),(R=(v=xt(this,Fl).config).onError)==null||R.call(v,L,this),(M=(A=xt(this,Fl).config).onSettled)==null||M.call(A,this.state.data,L,this),L}finally{this.scheduleGc()}}},ah=new WeakMap,df=new WeakMap,Fl=new WeakMap,lh=new WeakMap,sa=new WeakMap,hg=new WeakMap,oh=new WeakMap,Do=new WeakSet,Qc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...YT(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...JS(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return As(this,df,e.manual?i:void 0),i;case"error":const l=e.error;return{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Yi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),xt(this,Fl).notify({query:this,type:"updated",action:e})})},jT);function YT(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:KT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function JS(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ZS(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var nl,Kn,fg,La,ch,uf,Hc,iu,mg,hf,ff,dh,uh,au,mf,ur,Om,ly,oy,cy,dy,uy,hy,fy,VT,IT,_M=(IT=class extends Ef{constructor(e,n){super();sn(this,ur);sn(this,nl);sn(this,Kn);sn(this,fg);sn(this,La);sn(this,ch);sn(this,uf);sn(this,Hc);sn(this,iu);sn(this,mg);sn(this,hf);sn(this,ff);sn(this,dh);sn(this,uh);sn(this,au);sn(this,mf,new Set);this.options=n,As(this,nl,e),As(this,iu,null),As(this,Hc,iy()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(xt(this,Kn).addObserver(this),ev(xt(this,Kn),this.options)?En(this,ur,Om).call(this):this.updateResult(),En(this,ur,dy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return my(xt(this,Kn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return my(xt(this,Kn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,En(this,ur,uy).call(this),En(this,ur,hy).call(this),xt(this,Kn).removeObserver(this)}setOptions(e){const n=this.options,r=xt(this,Kn);if(this.options=xt(this,nl).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Kl(this.options.enabled,xt(this,Kn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");En(this,ur,fy).call(this),xt(this,Kn).setOptions(this.options),n._defaulted&&!gp(this.options,n)&&xt(this,nl).getQueryCache().notify({type:"observerOptionsUpdated",query:xt(this,Kn),observer:this});const i=this.hasListeners();i&&tv(xt(this,Kn),r,this.options,n)&&En(this,ur,Om).call(this),this.updateResult(),i&&(xt(this,Kn)!==r||Kl(this.options.enabled,xt(this,Kn))!==Kl(n.enabled,xt(this,Kn))||gu(this.options.staleTime,xt(this,Kn))!==gu(n.staleTime,xt(this,Kn)))&&En(this,ur,ly).call(this);const l=En(this,ur,oy).call(this);i&&(xt(this,Kn)!==r||Kl(this.options.enabled,xt(this,Kn))!==Kl(n.enabled,xt(this,Kn))||l!==xt(this,au))&&En(this,ur,cy).call(this,l)}getOptimisticResult(e){const n=xt(this,nl).getQueryCache().build(xt(this,nl),e),r=this.createResult(n,e);return yM(this,r)&&(As(this,La,r),As(this,uf,this.options),As(this,ch,xt(this,Kn).state)),r}getCurrentResult(){return xt(this,La)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&xt(this,Hc).status==="pending"&&xt(this,Hc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){xt(this,mf).add(e)}getCurrentQuery(){return xt(this,Kn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=xt(this,nl).defaultQueryOptions(e),r=xt(this,nl).getQueryCache().build(xt(this,nl),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return En(this,ur,Om).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),xt(this,La)))}createResult(e,n){var j;const r=xt(this,Kn),i=this.options,l=xt(this,La),c=xt(this,ch),d=xt(this,uf),f=e!==r?e.state:xt(this,fg),{state:m}=e;let p={...m},y=!1,g;if(n._optimisticResults){const S=this.hasListeners(),P=!S&&ev(e,n),F=S&&tv(e,r,n,i);(P||F)&&(p={...p,...YT(m.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:N,errorUpdatedAt:C,status:v}=p;g=p.data;let R=!1;if(n.placeholderData!==void 0&&g===void 0&&v==="pending"){let S;l!=null&&l.isPlaceholderData&&n.placeholderData===(d==null?void 0:d.placeholderData)?(S=l.data,R=!0):S=typeof n.placeholderData=="function"?n.placeholderData((j=xt(this,ff))==null?void 0:j.state.data,xt(this,ff)):n.placeholderData,S!==void 0&&(v="success",g=ry(l==null?void 0:l.data,S,n),y=!0)}if(n.select&&g!==void 0&&!R)if(l&&g===(c==null?void 0:c.data)&&n.select===xt(this,mg))g=xt(this,hf);else try{As(this,mg,n.select),g=n.select(g),g=ry(l==null?void 0:l.data,g,n),As(this,hf,g),As(this,iu,null)}catch(S){As(this,iu,S)}xt(this,iu)&&(N=xt(this,iu),g=xt(this,hf),C=Date.now(),v="error");const A=p.fetchStatus==="fetching",M=v==="pending",L=v==="error",k=M&&A,V=g!==void 0,W={status:v,fetchStatus:p.fetchStatus,isPending:M,isSuccess:v==="success",isError:L,isInitialLoading:k,isLoading:k,data:g,dataUpdatedAt:p.dataUpdatedAt,error:N,errorUpdatedAt:C,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:A,isRefetching:A&&!M,isLoadingError:L&&!V,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:L&&V,isStale:ob(e,n),refetch:this.refetch,promise:xt(this,Hc),isEnabled:Kl(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const S=ee=>{W.status==="error"?ee.reject(W.error):W.data!==void 0&&ee.resolve(W.data)},P=()=>{const ee=As(this,Hc,W.promise=iy());S(ee)},F=xt(this,Hc);switch(F.status){case"pending":e.queryHash===r.queryHash&&S(F);break;case"fulfilled":(W.status==="error"||W.data!==F.value)&&P();break;case"rejected":(W.status!=="error"||W.error!==F.reason)&&P();break}}return W}updateResult(){const e=xt(this,La),n=this.createResult(xt(this,Kn),this.options);if(As(this,ch,xt(this,Kn).state),As(this,uf,this.options),xt(this,ch).data!==void 0&&As(this,ff,xt(this,Kn)),gp(n,e))return;As(this,La,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!xt(this,mf).size)return!0;const c=new Set(l??xt(this,mf));return this.options.throwOnError&&c.add("error"),Object.keys(xt(this,La)).some(d=>{const u=d;return xt(this,La)[u]!==e[u]&&c.has(u)})};En(this,ur,VT).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&En(this,ur,dy).call(this)}},nl=new WeakMap,Kn=new WeakMap,fg=new WeakMap,La=new WeakMap,ch=new WeakMap,uf=new WeakMap,Hc=new WeakMap,iu=new WeakMap,mg=new WeakMap,hf=new WeakMap,ff=new WeakMap,dh=new WeakMap,uh=new WeakMap,au=new WeakMap,mf=new WeakMap,ur=new WeakSet,Om=function(e){En(this,ur,fy).call(this);let n=xt(this,Kn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Pa)),n},ly=function(){En(this,ur,uy).call(this);const e=gu(this.options.staleTime,xt(this,Kn));if(xh||xt(this,La).isStale||!sy(e))return;const r=UT(xt(this,La).dataUpdatedAt,e)+1;As(this,dh,Zu.setTimeout(()=>{xt(this,La).isStale||this.updateResult()},r))},oy=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(xt(this,Kn)):this.options.refetchInterval)??!1},cy=function(e){En(this,ur,hy).call(this),As(this,au,e),!(xh||Kl(this.options.enabled,xt(this,Kn))===!1||!sy(xt(this,au))||xt(this,au)===0)&&As(this,uh,Zu.setInterval(()=>{(this.options.refetchIntervalInBackground||lb.isFocused())&&En(this,ur,Om).call(this)},xt(this,au)))},dy=function(){En(this,ur,ly).call(this),En(this,ur,cy).call(this,En(this,ur,oy).call(this))},uy=function(){xt(this,dh)&&(Zu.clearTimeout(xt(this,dh)),As(this,dh,void 0))},hy=function(){xt(this,uh)&&(Zu.clearInterval(xt(this,uh)),As(this,uh,void 0))},fy=function(){const e=xt(this,nl).getQueryCache().build(xt(this,nl),this.options);if(e===xt(this,Kn))return;const n=xt(this,Kn);As(this,Kn,e),As(this,fg,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},VT=function(e){Yi.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(xt(this,La))}),xt(this,nl).getQueryCache().notify({query:xt(this,Kn),type:"observerResultsUpdated"})})},IT);function CM(t,e){return Kl(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ev(t,e){return CM(t,e)||t.state.data!==void 0&&my(t,e,e.refetchOnMount)}function my(t,e,n){if(Kl(e.enabled,t)!==!1&&gu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&ob(t,e)}return!1}function tv(t,e,n,r){return(t!==e||Kl(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&ob(t,n)}function ob(t,e){return Kl(e.enabled,t)!==!1&&t.isStaleByTime(gu(e.staleTime,t))}function yM(t,e){return!gp(t.getCurrentResult(),e)}function sv(t){return{onFetch:(e,n)=>{var m,p,y,g,N;const r=e.options,i=(y=(p=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:p.fetchMore)==null?void 0:y.direction,l=((g=e.state.data)==null?void 0:g.pages)||[],c=((N=e.state.data)==null?void 0:N.pageParams)||[];let d={pages:[],pageParams:[]},u=0;const f=async()=>{let C=!1;const v=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(e.signal.aborted?C=!0:e.signal.addEventListener("abort",()=>{C=!0}),e.signal)})},R=BT(e.options,e.fetchOptions),A=async(M,L,k)=>{if(C)return Promise.reject();if(L==null&&M.pages.length)return Promise.resolve(M);const G=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:L,direction:k?"backward":"forward",meta:e.options.meta};return v(P),P})(),W=await R(G),{maxPages:j}=e.options,S=k?uM:dM;return{pages:S(M.pages,W,j),pageParams:S(M.pageParams,L,j)}};if(i&&l.length){const M=i==="backward",L=M?bM:nv,k={pages:l,pageParams:c},V=L(r,k);d=await A(k,V,M)}else{const M=t??l.length;do{const L=u===0?c[0]??r.initialPageParam:nv(r,d);if(u>0&&L==null)break;d=await A(d,L),u++}while(u<M)}return d};e.options.persister?e.fetchFn=()=>{var C,v;return(v=(C=e.options).persister)==null?void 0:v.call(C,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function nv(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function bM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var gg,sc,wa,hh,nc,Xd,OT,NM=(OT=class extends GT{constructor(e){super();sn(this,nc);sn(this,gg);sn(this,sc);sn(this,wa);sn(this,hh);As(this,gg,e.client),this.mutationId=e.mutationId,As(this,wa,e.mutationCache),As(this,sc,[]),this.state=e.state||$T(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){xt(this,sc).includes(e)||(xt(this,sc).push(e),this.clearGcTimeout(),xt(this,wa).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){As(this,sc,xt(this,sc).filter(n=>n!==e)),this.scheduleGc(),xt(this,wa).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){xt(this,sc).length||(this.state.status==="pending"?this.scheduleGc():xt(this,wa).remove(this))}continue(){var e;return((e=xt(this,hh))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var c,d,u,f,m,p,y,g,N,C,v,R,A,M,L,k,V,G,W,j;const n=()=>{En(this,nc,Xd).call(this,{type:"continue"})},r={client:xt(this,gg),meta:this.options.meta,mutationKey:this.options.mutationKey};As(this,hh,QT({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(S,P)=>{En(this,nc,Xd).call(this,{type:"failed",failureCount:S,error:P})},onPause:()=>{En(this,nc,Xd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>xt(this,wa).canRun(this)}));const i=this.state.status==="pending",l=!xt(this,hh).canStart();try{if(i)n();else{En(this,nc,Xd).call(this,{type:"pending",variables:e,isPaused:l}),await((d=(c=xt(this,wa).config).onMutate)==null?void 0:d.call(c,e,this,r));const P=await((f=(u=this.options).onMutate)==null?void 0:f.call(u,e,r));P!==this.state.context&&En(this,nc,Xd).call(this,{type:"pending",context:P,variables:e,isPaused:l})}const S=await xt(this,hh).start();return await((p=(m=xt(this,wa).config).onSuccess)==null?void 0:p.call(m,S,e,this.state.context,this,r)),await((g=(y=this.options).onSuccess)==null?void 0:g.call(y,S,e,this.state.context,r)),await((C=(N=xt(this,wa).config).onSettled)==null?void 0:C.call(N,S,null,this.state.variables,this.state.context,this,r)),await((R=(v=this.options).onSettled)==null?void 0:R.call(v,S,null,e,this.state.context,r)),En(this,nc,Xd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((M=(A=xt(this,wa).config).onError)==null?void 0:M.call(A,S,e,this.state.context,this,r)),await((k=(L=this.options).onError)==null?void 0:k.call(L,S,e,this.state.context,r)),await((G=(V=xt(this,wa).config).onSettled)==null?void 0:G.call(V,void 0,S,this.state.variables,this.state.context,this,r)),await((j=(W=this.options).onSettled)==null?void 0:j.call(W,void 0,S,e,this.state.context,r)),S}finally{En(this,nc,Xd).call(this,{type:"error",error:S})}}finally{xt(this,wa).runNext(this)}}},gg=new WeakMap,sc=new WeakMap,wa=new WeakMap,hh=new WeakMap,nc=new WeakSet,Xd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Yi.batch(()=>{xt(this,sc).forEach(r=>{r.onMutationUpdate(e)}),xt(this,wa).notify({mutation:this,type:"updated",action:e})})},OT);function $T(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zc,Ro,xg,MT,SM=(MT=class extends Ef{constructor(e={}){super();sn(this,zc);sn(this,Ro);sn(this,xg);this.config=e,As(this,zc,new Set),As(this,Ro,new Map),As(this,xg,0)}build(e,n,r){const i=new NM({client:e,mutationCache:this,mutationId:++vx(this,xg)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){xt(this,zc).add(e);const n=Dx(e);if(typeof n=="string"){const r=xt(this,Ro).get(n);r?r.push(e):xt(this,Ro).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(xt(this,zc).delete(e)){const n=Dx(e);if(typeof n=="string"){const r=xt(this,Ro).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&xt(this,Ro).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Dx(e);if(typeof n=="string"){const r=xt(this,Ro).get(n),i=r==null?void 0:r.find(l=>l.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Dx(e);if(typeof n=="string"){const i=(r=xt(this,Ro).get(n))==null?void 0:r.find(l=>l!==e&&l.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yi.batch(()=>{xt(this,zc).forEach(e=>{this.notify({type:"removed",mutation:e})}),xt(this,zc).clear(),xt(this,Ro).clear()})}getAll(){return Array.from(xt(this,zc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>zS(n,r))}findAll(e={}){return this.getAll().filter(n=>zS(e,n))}notify(e){Yi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Yi.batch(()=>Promise.all(e.map(n=>n.continue().catch(Pa))))}},zc=new WeakMap,Ro=new WeakMap,xg=new WeakMap,MT);function Dx(t){var e;return(e=t.options.scope)==null?void 0:e.id}var qc,lu,rl,Xc,sd,sp,gy,LT,vM=(LT=class extends Ef{constructor(n,r){super();sn(this,sd);sn(this,qc);sn(this,lu);sn(this,rl);sn(this,Xc);As(this,qc,n),this.setOptions(r),this.bindMethods(),En(this,sd,sp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=xt(this,qc).defaultMutationOptions(n),gp(this.options,r)||xt(this,qc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:xt(this,rl),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ph(r.mutationKey)!==ph(this.options.mutationKey)?this.reset():((i=xt(this,rl))==null?void 0:i.state.status)==="pending"&&xt(this,rl).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=xt(this,rl))==null||n.removeObserver(this)}onMutationUpdate(n){En(this,sd,sp).call(this),En(this,sd,gy).call(this,n)}getCurrentResult(){return xt(this,lu)}reset(){var n;(n=xt(this,rl))==null||n.removeObserver(this),As(this,rl,void 0),En(this,sd,sp).call(this),En(this,sd,gy).call(this)}mutate(n,r){var i;return As(this,Xc,r),(i=xt(this,rl))==null||i.removeObserver(this),As(this,rl,xt(this,qc).getMutationCache().build(xt(this,qc),this.options)),xt(this,rl).addObserver(this),xt(this,rl).execute(n)}},qc=new WeakMap,lu=new WeakMap,rl=new WeakMap,Xc=new WeakMap,sd=new WeakSet,sp=function(){var r;const n=((r=xt(this,rl))==null?void 0:r.state)??$T();As(this,lu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},gy=function(n){Yi.batch(()=>{var r,i,l,c,d,u,f,m;if(xt(this,Xc)&&this.hasListeners()){const p=xt(this,lu).variables,y=xt(this,lu).context,g={client:xt(this,qc),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(r=xt(this,Xc)).onSuccess)==null||i.call(r,n.data,p,y,g),(c=(l=xt(this,Xc)).onSettled)==null||c.call(l,n.data,null,p,y,g)):(n==null?void 0:n.type)==="error"&&((u=(d=xt(this,Xc)).onError)==null||u.call(d,n.error,p,y,g),(m=(f=xt(this,Xc)).onSettled)==null||m.call(f,void 0,n.error,p,y,g))}this.listeners.forEach(p=>{p(xt(this,lu))})})},LT),rc,wT,DM=(wT=class extends Ef{constructor(e={}){super();sn(this,rc);this.config=e,As(this,rc,new Map)}build(e,n,r){const i=n.queryKey,l=n.queryHash??ib(i,n);let c=this.get(l);return c||(c=new pM({client:e,queryKey:i,queryHash:l,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(c)),c}add(e){xt(this,rc).has(e.queryHash)||(xt(this,rc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=xt(this,rc).get(e.queryHash);n&&(e.destroy(),n===e&&xt(this,rc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return xt(this,rc).get(e)}getAll(){return[...xt(this,rc).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>HS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>HS(e,r)):n}notify(e){Yi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Yi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},rc=new WeakMap,wT),ui,ou,cu,gf,xf,du,pf,_f,PT,RM=(PT=class{constructor(t={}){sn(this,ui);sn(this,ou);sn(this,cu);sn(this,gf);sn(this,xf);sn(this,du);sn(this,pf);sn(this,_f);As(this,ui,t.queryCache||new DM),As(this,ou,t.mutationCache||new SM),As(this,cu,t.defaultOptions||{}),As(this,gf,new Map),As(this,xf,new Map),As(this,du,0)}mount(){vx(this,du)._++,xt(this,du)===1&&(As(this,pf,lb.subscribe(async t=>{t&&(await this.resumePausedMutations(),xt(this,ui).onFocus())})),As(this,_f,xp.subscribe(async t=>{t&&(await this.resumePausedMutations(),xt(this,ui).onOnline())})))}unmount(){var t,e;vx(this,du)._--,xt(this,du)===0&&((t=xt(this,pf))==null||t.call(this),As(this,pf,void 0),(e=xt(this,_f))==null||e.call(this),As(this,_f,void 0))}isFetching(t){return xt(this,ui).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return xt(this,ou).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=xt(this,ui).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=xt(this,ui).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(gu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return xt(this,ui).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=xt(this,ui).get(r.queryHash),l=i==null?void 0:i.state.data,c=lM(e,l);if(c!==void 0)return xt(this,ui).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return Yi.batch(()=>xt(this,ui).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=xt(this,ui).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=xt(this,ui);Yi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=xt(this,ui);return Yi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Yi.batch(()=>xt(this,ui).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Pa).catch(Pa)}invalidateQueries(t,e={}){return Yi.batch(()=>(xt(this,ui).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Yi.batch(()=>xt(this,ui).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let l=i.fetch(void 0,n);return n.throwOnError||(l=l.catch(Pa)),i.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(Pa)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=xt(this,ui).build(this,e);return n.isStaleByTime(gu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Pa).catch(Pa)}fetchInfiniteQuery(t){return t.behavior=sv(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Pa).catch(Pa)}ensureInfiniteQueryData(t){return t.behavior=sv(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xp.isOnline()?xt(this,ou).resumePausedMutations():Promise.resolve()}getQueryCache(){return xt(this,ui)}getMutationCache(){return xt(this,ou)}getDefaultOptions(){return xt(this,cu)}setDefaultOptions(t){As(this,cu,t)}setQueryDefaults(t,e){xt(this,gf).set(ph(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...xt(this,gf).values()],n={};return e.forEach(r=>{zm(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){xt(this,xf).set(ph(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...xt(this,xf).values()],n={};return e.forEach(r=>{zm(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...xt(this,cu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ib(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ab&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...xt(this,cu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){xt(this,ui).clear(),xt(this,ou).clear()}},ui=new WeakMap,ou=new WeakMap,cu=new WeakMap,gf=new WeakMap,xf=new WeakMap,du=new WeakMap,pf=new WeakMap,_f=new WeakMap,PT),HT=_.createContext(void 0),cb=t=>{const e=_.useContext(HT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},TM=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(HT.Provider,{value:t,children:e})),zT=_.createContext(!1),EM=()=>_.useContext(zT);zT.Provider;function jM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var IM=_.createContext(jM()),OM=()=>_.useContext(IM),MM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},LM=t=>{_.useEffect(()=>{t.clearReset()},[t])},wM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||FT(n,[t.error,r])),PM=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},AM=(t,e)=>t.isLoading&&t.isFetching&&!e,kM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,rv=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function UM(t,e,n){var p,y,g,N,C;const r=EM(),i=OM(),l=cb(),c=l.defaultQueryOptions(t);(y=(p=l.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||y.call(p,c),c._optimisticResults=r?"isRestoring":"optimistic",PM(c),MM(c,i),LM(i);const d=!l.getQueryCache().get(c.queryHash),[u]=_.useState(()=>new e(l,c)),f=u.getOptimisticResult(c),m=!r&&t.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(v=>{const R=m?u.subscribe(Yi.batchCalls(v)):Pa;return u.updateResult(),R},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),_.useEffect(()=>{u.setOptions(c)},[c,u]),kM(c,f))throw rv(c,u,i);if(wM({result:f,errorResetBoundary:i,throwOnError:c.throwOnError,query:l.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((N=(g=l.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||N.call(g,c,f),c.experimental_prefetchInRender&&!xh&&AM(f,r)){const v=d?rv(c,u,i):(C=l.getQueryCache().get(c.queryHash))==null?void 0:C.promise;v==null||v.catch(Pa).finally(()=>{u.updateResult()})}return c.notifyOnChangeProps?f:u.trackResult(f)}function WM(t,e){return UM(t,_M)}function BM(t,e){const n=cb(),[r]=_.useState(()=>new vM(n,t));_.useEffect(()=>{r.setOptions(t)},[r,t]);const i=_.useSyncExternalStore(_.useCallback(c=>r.subscribe(Yi.batchCalls(c)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),l=_.useCallback((c,d)=>{r.mutate(c,d).catch(Pa)},[r]);if(i.error&&FT(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:l,mutateAsync:i.mutate}}const FM="modulepreload",KM=function(t){return"/"+t},iv={},$1=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(n.map(f=>{if(f=KM(f),f in iv)return;iv[f]=!0;const m=f.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":FM,m||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),m)return new Promise((g,N)=>{y.addEventListener("load",g),y.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};var QM=function(){return null};const av=new RM({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1,retryDelay:1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0,networkMode:"online"},mutations:{retry:0,networkMode:"online"}}});/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YM=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),lv=t=>{const e=YM(t);return e.charAt(0).toUpperCase()+e.slice(1)},qT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),VM=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:l,iconNode:c,...d},u)=>_.createElement("svg",{ref:u,...$M,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qT("lucide",i),...!l&&!VM(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,m])=>_.createElement(f,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=(t,e)=>{const n=_.forwardRef(({className:r,...i},l)=>_.createElement(HM,{ref:l,iconNode:e,className:qT(`lucide-${GM(lv(t))}`,`lucide-${t}`,r),...i}));return n.displayName=lv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Th=ks("arrow-down",zM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],db=ks("arrow-left",qM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],JM=ks("arrow-right-left",XM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],eL=ks("arrow-right",ZM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Eh=ks("arrow-up",tL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],nL=ks("boxes",sL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],iL=ks("building-2",rL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],lL=ks("cable",aL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_h=ks("calendar",oL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ov=ks("camera",cL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dc=ks("check",dL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],or=ks("chevron-down",uL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],XT=ks("chevron-left",hL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mL=ks("chevron-right",fL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Wr=ks("chevron-up",gL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mr=ks("circle-alert",xL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vi=ks("circle-check-big",pL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jh=ks("circle-check",_L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Lo=ks("circle-x",CL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],zp=ks("clipboard-list",yL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pp=ks("clock",bL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],_p=ks("credit-card",NL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vL=ks("crown",SL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],JT=ks("database",DL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ZT=ks("ellipsis",RL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],bm=ks("external-link",TL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],jL=ks("file-down",EL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ch=ks("file-text",IL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],e5=ks("funnel",OL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],nd=ks("history",ML);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],wL=ks("house",LL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],t5=ks("info",PL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],kL=ks("layers",AL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ub=ks("list",UL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],jn=ks("loader-circle",WL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],FL=ks("log-out",BL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rd=ks("map-pin",KL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],GL=ks("map",QL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],VL=ks("menu",YL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],cv=ks("message-square",$L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],zL=ks("monitor",HL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],XL=ks("navigation",qL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Cf=ks("package",JL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ew=ks("pause",ZL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],sw=ks("pen-tool",tw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xy=ks("phone",nw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],iw=ks("play",rw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lw=ks("plus",aw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],uc=ks("refresh-cw",ow);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ei=ks("rotate-ccw",cw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]],uw=ks("router",dw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fw=ks("save",hw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],Ih=ks("scan-barcode",mw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yu=ks("search",gw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],hb=ks("send",xw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],dv=ks("server",pw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fb=ks("settings",_w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],uv=ks("shield",Cw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],py=ks("smartphone",yw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cp=ks("square-check-big",bw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],yp=ks("square-x",Nw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],vw=ks("test-tube",Sw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rw=ks("trash-2",Dw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ql=ks("triangle-alert",Tw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],jw=ks("tv",Ew);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ow=ks("user-check",Iw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Lw=ks("user-plus",Mw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Oh=ks("user",ww);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],s5=ks("users",Pw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],bp=ks("wifi",Aw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],xu=ks("wrench",kw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bi=ks("x",Uw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hv=ks("zap",Ww),Bw=({className:t})=>s.jsx("div",{className:`font-extrabold tracking-tight ${t}`,style:{fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"},children:"D'LIVE"}),Fw=({onLogout:t,onNavigateHome:e,onNavigateBack:n,onMenuClick:r,currentView:i,userInfo:l,selectedWorkItem:c})=>{const[d,u]=_.useState(!1),f=_.useRef(null);_.useEffect(()=>{const g=N=>{f.current&&!f.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const p=(g=>{const N=(c==null?void 0:c.WRK_CD_NM)||(c==null?void 0:c.typeDisplay)||"";switch(g){case"today-work":return{title:" "};case"work-management":return{title:""};case"work-order-detail":return{title:""};case"work-complete-form":return{title:"",workType:N};case"work-complete-detail":return{title:"",workType:N};case"work-item-list":return{title:""};case"work-process-flow":return{title:"",workType:N};case"customer-management":return{title:""};case"equipment-management":return{title:""};case"other-management":return{title:""};case"coming-soon":return{title:""};default:return null}})(i),y=i==="today-work"||i==="menu"||!i;return s.jsx("header",{className:"bg-white shadow-sm fixed top-0 left-0 right-0 z-[100] border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6",children:s.jsxs("div",{className:"flex items-center h-12",children:[s.jsxs("div",{className:"flex items-center gap-0 w-24 flex-shrink-0",children:[!y&&s.jsx("button",{onClick:n||e,className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors duration-200","aria-label":"",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),r&&s.jsx("button",{onClick:r,className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors duration-200","aria-label":" ",children:s.jsx(VL,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:y?s.jsx("button",{onClick:e,className:"flex items-center cursor-pointer","aria-label":"  ",children:s.jsx(Bw,{className:"text-xl text-blue-600"})}):p?s.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[p.title,p.workType&&s.jsxs("span",{className:"text-blue-600",children:["(",p.workType,")"]})]}):null}),s.jsx("div",{className:"w-24 flex-shrink-0 flex justify-end",children:s.jsxs("div",{className:"relative",ref:f,children:[s.jsxs("button",{onClick:()=>u(!d),className:`flex flex-col items-center p-1.5 rounded-lg transition-colors duration-200 ${d?"text-blue-700 bg-blue-50":"text-blue-600 hover:text-blue-700 hover:bg-blue-50"}`,"aria-label":" ",children:[s.jsx(Oh,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[0.5625rem] mt-0.5 truncate max-w-[60px]",children:l?`${l.userName||""}`:""})]}),d&&s.jsxs("div",{className:"fixed right-2 top-12 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-[9999]",children:[s.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:(l==null?void 0:l.userName)||""}),s.jsx("p",{className:"text-xs text-gray-500",children:(l==null?void 0:l.userId)||""}),s.jsx("p",{className:"text-xs text-gray-400",children:(l==null?void 0:l.userRole)||""})]}),s.jsx("button",{onClick:()=>{u(!1),t()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:""})]})]})})]})})})};var np={exports:{}},Kw=np.exports,fv;function Qw(){return fv||(fv=1,(function(t,e){(function(n,r){t.exports=r()})(Kw,(function(){var n=1e3,r=6e4,i=36e5,l="millisecond",c="second",d="minute",u="hour",f="day",m="week",p="month",y="quarter",g="year",N="date",C="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(J){var $=["th","st","nd","rd"],Y=J%100;return"["+J+($[(Y-20)%10]||$[Y]||$[0])+"]"}},M=function(J,$,Y){var K=String(J);return!K||K.length>=$?J:""+Array($+1-K.length).join(Y)+J},L={s:M,z:function(J){var $=-J.utcOffset(),Y=Math.abs($),K=Math.floor(Y/60),w=Y%60;return($<=0?"+":"-")+M(K,2,"0")+":"+M(w,2,"0")},m:function J($,Y){if($.date()<Y.date())return-J(Y,$);var K=12*(Y.year()-$.year())+(Y.month()-$.month()),w=$.clone().add(K,p),se=Y-w<0,oe=$.clone().add(K+(se?-1:1),p);return+(-(K+(Y-w)/(se?w-oe:oe-w))||0)},a:function(J){return J<0?Math.ceil(J)||0:Math.floor(J)},p:function(J){return{M:p,y:g,w:m,d:f,D:N,h:u,m:d,s:c,ms:l,Q:y}[J]||String(J||"").toLowerCase().replace(/s$/,"")},u:function(J){return J===void 0}},k="en",V={};V[k]=A;var G="$isDayjsObject",W=function(J){return J instanceof F||!(!J||!J[G])},j=function J($,Y,K){var w;if(!$)return k;if(typeof $=="string"){var se=$.toLowerCase();V[se]&&(w=se),Y&&(V[se]=Y,w=se);var oe=$.split("-");if(!w&&oe.length>1)return J(oe[0])}else{var T=$.name;V[T]=$,w=T}return!K&&w&&(k=w),w||!K&&k},S=function(J,$){if(W(J))return J.clone();var Y=typeof $=="object"?$:{};return Y.date=J,Y.args=arguments,new F(Y)},P=L;P.l=j,P.i=W,P.w=function(J,$){return S(J,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var F=(function(){function J(Y){this.$L=j(Y.locale,null,!0),this.parse(Y),this.$x=this.$x||Y.x||{},this[G]=!0}var $=J.prototype;return $.parse=function(Y){this.$d=(function(K){var w=K.date,se=K.utc;if(w===null)return new Date(NaN);if(P.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var oe=w.match(v);if(oe){var T=oe[2]-1||0,I=(oe[7]||"0").substring(0,3);return se?new Date(Date.UTC(oe[1],T,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,I)):new Date(oe[1],T,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,I)}}return new Date(w)})(Y),this.init()},$.init=function(){var Y=this.$d;this.$y=Y.getFullYear(),this.$M=Y.getMonth(),this.$D=Y.getDate(),this.$W=Y.getDay(),this.$H=Y.getHours(),this.$m=Y.getMinutes(),this.$s=Y.getSeconds(),this.$ms=Y.getMilliseconds()},$.$utils=function(){return P},$.isValid=function(){return this.$d.toString()!==C},$.isSame=function(Y,K){var w=S(Y);return this.startOf(K)<=w&&w<=this.endOf(K)},$.isAfter=function(Y,K){return S(Y)<this.startOf(K)},$.isBefore=function(Y,K){return this.endOf(K)<S(Y)},$.$g=function(Y,K,w){return P.u(Y)?this[K]:this.set(w,Y)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(Y,K){var w=this,se=!!P.u(K)||K,oe=P.p(Y),T=function(ge,ce){var Re=P.w(w.$u?Date.UTC(w.$y,ce,ge):new Date(w.$y,ce,ge),w);return se?Re:Re.endOf(f)},I=function(ge,ce){return P.w(w.toDate()[ge].apply(w.toDate("s"),(se?[0,0,0,0]:[23,59,59,999]).slice(ce)),w)},U=this.$W,Q=this.$M,H=this.$D,q="set"+(this.$u?"UTC":"");switch(oe){case g:return se?T(1,0):T(31,11);case p:return se?T(1,Q):T(0,Q+1);case m:var ae=this.$locale().weekStart||0,fe=(U<ae?U+7:U)-ae;return T(se?H-fe:H+(6-fe),Q);case f:case N:return I(q+"Hours",0);case u:return I(q+"Minutes",1);case d:return I(q+"Seconds",2);case c:return I(q+"Milliseconds",3);default:return this.clone()}},$.endOf=function(Y){return this.startOf(Y,!1)},$.$set=function(Y,K){var w,se=P.p(Y),oe="set"+(this.$u?"UTC":""),T=(w={},w[f]=oe+"Date",w[N]=oe+"Date",w[p]=oe+"Month",w[g]=oe+"FullYear",w[u]=oe+"Hours",w[d]=oe+"Minutes",w[c]=oe+"Seconds",w[l]=oe+"Milliseconds",w)[se],I=se===f?this.$D+(K-this.$W):K;if(se===p||se===g){var U=this.clone().set(N,1);U.$d[T](I),U.init(),this.$d=U.set(N,Math.min(this.$D,U.daysInMonth())).$d}else T&&this.$d[T](I);return this.init(),this},$.set=function(Y,K){return this.clone().$set(Y,K)},$.get=function(Y){return this[P.p(Y)]()},$.add=function(Y,K){var w,se=this;Y=Number(Y);var oe=P.p(K),T=function(Q){var H=S(se);return P.w(H.date(H.date()+Math.round(Q*Y)),se)};if(oe===p)return this.set(p,this.$M+Y);if(oe===g)return this.set(g,this.$y+Y);if(oe===f)return T(1);if(oe===m)return T(7);var I=(w={},w[d]=r,w[u]=i,w[c]=n,w)[oe]||1,U=this.$d.getTime()+Y*I;return P.w(U,this)},$.subtract=function(Y,K){return this.add(-1*Y,K)},$.format=function(Y){var K=this,w=this.$locale();if(!this.isValid())return w.invalidDate||C;var se=Y||"YYYY-MM-DDTHH:mm:ssZ",oe=P.z(this),T=this.$H,I=this.$m,U=this.$M,Q=w.weekdays,H=w.months,q=w.meridiem,ae=function(ce,Re,X,me){return ce&&(ce[Re]||ce(K,se))||X[Re].slice(0,me)},fe=function(ce){return P.s(T%12||12,ce,"0")},ge=q||function(ce,Re,X){var me=ce<12?"AM":"PM";return X?me.toLowerCase():me};return se.replace(R,(function(ce,Re){return Re||(function(X){switch(X){case"YY":return String(K.$y).slice(-2);case"YYYY":return P.s(K.$y,4,"0");case"M":return U+1;case"MM":return P.s(U+1,2,"0");case"MMM":return ae(w.monthsShort,U,H,3);case"MMMM":return ae(H,U);case"D":return K.$D;case"DD":return P.s(K.$D,2,"0");case"d":return String(K.$W);case"dd":return ae(w.weekdaysMin,K.$W,Q,2);case"ddd":return ae(w.weekdaysShort,K.$W,Q,3);case"dddd":return Q[K.$W];case"H":return String(T);case"HH":return P.s(T,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return ge(T,I,!0);case"A":return ge(T,I,!1);case"m":return String(I);case"mm":return P.s(I,2,"0");case"s":return String(K.$s);case"ss":return P.s(K.$s,2,"0");case"SSS":return P.s(K.$ms,3,"0");case"Z":return oe}return null})(ce)||oe.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(Y,K,w){var se,oe=this,T=P.p(K),I=S(Y),U=(I.utcOffset()-this.utcOffset())*r,Q=this-I,H=function(){return P.m(oe,I)};switch(T){case g:se=H()/12;break;case p:se=H();break;case y:se=H()/3;break;case m:se=(Q-U)/6048e5;break;case f:se=(Q-U)/864e5;break;case u:se=Q/i;break;case d:se=Q/r;break;case c:se=Q/n;break;default:se=Q}return w?se:P.a(se)},$.daysInMonth=function(){return this.endOf(p).$D},$.$locale=function(){return V[this.$L]},$.locale=function(Y,K){if(!Y)return this.$L;var w=this.clone(),se=j(Y,K,!0);return se&&(w.$L=se),w},$.clone=function(){return P.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},J})(),ee=F.prototype;return S.prototype=ee,[["$ms",l],["$s",c],["$m",d],["$H",u],["$W",f],["$M",p],["$y",g],["$D",N]].forEach((function(J){ee[J[1]]=function($){return this.$g($,J[0],J[1])}})),S.extend=function(J,$){return J.$i||(J($,F,S),J.$i=!0),S},S.locale=j,S.isDayjs=W,S.unix=function(J){return S(1e3*J)},S.en=V[k],S.Ls=V,S.p={},S}))})(np)),np.exports}var Gw=Qw();const Yc=nb(Gw);var hn=(t=>(t.Pending="",t.Completed="",t.Cancelled="",t))(hn||{}),aa=(t=>(t.Installation="",t.AS="A/S",t.Change="",t.Move="",t.Etc="",t))(aa||{});const H1=[{code:"020",name:"",template:"[$1]",kkoMsgId:"KKO020_003",refCode:"WK"},{code:"021",name:"",template:"[$1]      .",kkoMsgId:"KKO021_001",refCode:"WK"},{code:"027",name:"",template:"[$1]  [$2]    .()",kkoMsgId:"KKO027_001",refCode:"WK"},{code:"028",name:"",template:"[$1]  [$2]    [$3]   .",kkoMsgId:"KKO028_001",refCode:"WK"},{code:"138",name:"",template:"[$1] .   .",kkoMsgId:"KKO138_003",refCode:"AS"},{code:"139",name:"",template:"[$1]AS    . :$2",kkoMsgId:"KKO139_001",refCode:"AS"},{code:"141",name:"",template:"[$1][$2]",kkoMsgId:"KKO141_001",refCode:"AS"},{code:"059_002",name:"KB",template:"[$1][$2]",kkoMsgId:"KKO059_002",refCode:"WK"},{code:"059",name:"URL",template:"[$1][$2]",kkoMsgId:"KKO059_001",refCode:"WK"},{code:"271",name:"",template:"[]  1644-1100 . .",kkoMsgId:"KKO271_001",refCode:"AS"},{code:"235",name:"()",template:"[$1] [$2]",kkoMsgId:"KKO059_002",refCode:"WK"},{code:"059_005",name:"()SE",template:"[$1] [$2]",kkoMsgId:"KKO059_002",refCode:"WK"}],mb=({customer:t,className:e=""})=>{if(!t.isVip)return null;const r=(()=>{switch(t.vipLevel){case"VVIP":return{bgColor:"bg-gradient-to-r from-yellow-400 to-yellow-500",textColor:"text-yellow-900",borderColor:"border-yellow-300",shadow:"shadow-yellow-200",label:"VVIP"};case"VIP":default:return{bgColor:"bg-gradient-to-r from-purple-400 to-purple-500",textColor:"text-purple-900",borderColor:"border-purple-300",shadow:"shadow-purple-200",label:"VIP"}}})();return s.jsxs("div",{className:`
        inline-flex items-center px-2 py-1 rounded-full text-xs font-bold
        ${r.bgColor} ${r.textColor} ${r.borderColor}
        border shadow-sm ${r.shadow}
        ${e}
      `,children:[s.jsx(vL,{className:"w-3 h-3 mr-1"}),r.label]})},Yw=t=>{try{const e=new Date(t);if(isNaN(e.getTime()))return"  ";const n=e.getMonth()+1,r=e.getDate();return`${n} ${r}`}catch{return"  "}},Np=t=>{try{const e=new Date(t);if(isNaN(e.getTime()))return"  ";const n=e.getMonth()+1,r=e.getDate();let i=e.getHours();const l=i>=12?"":"";i=i%12||12;const c=e.getMinutes().toString().padStart(2,"0");return`${n} ${r} ${l} ${i}:${c}`}catch{return"  "}},Qi=t=>{if(!t)return"-";const e=String(t).replace(/\D/g,"");return e.length!==10?String(t):`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`},Vw=({direction:t,onSelect:e,onSms:n,onWorkerAdjust:r,workStatusCounts:i,index:l})=>{const c=i||{pending:1,completed:0,cancelled:0},d=()=>{const p=c.pendingByProdGrp||{},y=c.completedByProdGrp||{},g={};[...Object.keys(p),...Object.keys(y)].forEach(v=>{g[v]=(p[v]||0)+(y[v]||0)});const N=["D","I","V","C"],C=[];return N.forEach(v=>{g[v]&&g[v]>0&&C.push(`${v}_${g[v]}`)}),Object.keys(g).forEach(v=>{!N.includes(v)&&g[v]>0&&C.push(`${v}_${g[v]}`)}),C.join(" / ")},u=()=>{const p=d();return{statusBadges:s.jsxs("div",{className:"flex items-center gap-1",children:[c.pending>0&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-semibold bg-amber-50 text-amber-700 border border-amber-200",children:[" ",c.pending]}),c.completed>0&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-semibold bg-emerald-50 text-emerald-700 border border-emerald-200",children:[" ",c.completed]}),c.cancelled>0&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-semibold bg-rose-50 text-rose-700 border border-rose-200",children:[" ",c.cancelled]})]}),serviceBadge:p?s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium bg-slate-100 text-slate-600 border border-slate-200",children:p}):null}},f=p=>{p.stopPropagation(),t.customer.phone&&(window.location.href=`tel:${t.customer.phone}`)},m=p=>{p.stopPropagation(),n&&n(t)};return s.jsx("div",{onClick:()=>e(t),className:"bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 transition-all duration-200 cursor-pointer active:scale-[0.99] mb-3 touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"p-4",children:[(()=>{const{statusBadges:p,serviceBadge:y}=u();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[l!==void 0&&s.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center rounded-full bg-blue-500 text-white text-sm font-bold",children:l}),s.jsxs("h3",{className:"font-bold text-gray-900 text-base truncate",children:[t.customer.name,t.customer.id&&s.jsxs("span",{className:"font-normal ml-1",children:["(",t.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200 flex-shrink-0",children:t.typeDisplay}),t.WRK_CD==="04"&&t.WRK_DTL_TCD==="0440"&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-50 text-amber-700 border border-amber-200 flex-shrink-0",children:""})]}),s.jsx("div",{className:"flex-shrink-0",children:p})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm text-gray-600",children:Np(t.scheduledAt)}),s.jsx(mb,{customer:t.customer})]}),s.jsx("div",{className:"flex-shrink-0",children:y})]})]})})(),s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsxs("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:t.customer.address||"  "})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("button",{onClick:f,className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),""]}),n&&s.jsxs("button",{onClick:m,className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),""]}),r&&s.jsxs("button",{onClick:p=>{p.stopPropagation(),r(t)},className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"whitespace-nowrap",children:""})]})]})]})})},z1=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),mv=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})}),gv=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),q1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),X1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})}),Fd=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),$w=t=>[{id:`${t}_1`,directionId:t,type:aa.AS,typeDisplay:"A/S ",status:hn.Completed,scheduledAt:"2025-09-30T14:00:00",customer:{id:"1001857578",name:"",phone:"01044586687",address:"   261 17"},details:"   ",assignedEquipment:[],productName:"ISP  ",cellNo:"-",installLocation:""},{id:`${t}_2`,directionId:t,type:aa.AS,typeDisplay:"A/S ",status:hn.Pending,scheduledAt:"2025-09-30T14:30:00",customer:{id:"1001857578",name:"",phone:"01044586687",address:"   261 17"},details:"  ",assignedEquipment:[],productName:"ISP ",cellNo:"C001",installLocation:""},{id:`${t}_3`,directionId:t,type:aa.AS,typeDisplay:"A/S ",status:hn.Pending,scheduledAt:"2025-09-30T15:00:00",customer:{id:"1001857578",name:"",phone:"01044586687",address:"   261 17"},details:"  ",assignedEquipment:[],productName:"ISP  ",cellNo:"C002",installLocation:""}],_y=async t=>{console.log("[LGU API] getUplsCtrtInfo params:",t);try{const e=await fetch(`${bs}/customer/etc/getUplsCtrtInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[LGU API] getUplsCtrtInfo HTTP error:",e.status),null;const n=await e.json();return console.log("[LGU API] getUplsCtrtInfo response:",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:n?[n]:null}catch(e){return console.error("[LGU API] getUplsCtrtInfo error:",e),null}},xv=async t=>{console.log("[L2 API] getUplsNwcs params:",t);try{const e=await fetch(`${bs}/customer/etc/getUplsNwcs`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[L2 API] getUplsNwcs HTTP error:",e.status),null;const n=await e.json();return console.log("[L2 API] getUplsNwcs response:",n),Array.isArray(n)&&n.length>0?n[0]:n&&typeof n=="object"?n:null}catch(e){return console.error("[L2 API] getUplsNwcs error:",e),null}},pv=async t=>{console.log("[L2 API] getUplsEntrEqipDtl params:",t);try{const e=await fetch(`${bs}/customer/etc/getUplsEntrEqipDtl`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[L2 API] getUplsEntrEqipDtl HTTP error:",e.status),null;const n=await e.json();return console.log("[L2 API] getUplsEntrEqipDtl response:",n),n}catch(e){return console.error("[L2 API] getUplsEntrEqipDtl error:",e),null}},Hw=async t=>{if(console.log("[ API] setCertifyCL04 params:",t),$n())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"   "};try{const e=await fetch(`${bs}/customer/etc/setCertifyCL04`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CMD:"CL-04",...t})});if(!e.ok)return console.error("[ API] setCertifyCL04 HTTP error:",e.status),{code:"ERROR",message:`HTTP error: ${e.status}`};const n=await e.json();return console.log("[ API] setCertifyCL04 response:",n),{code:n.code||n.RESULT_CODE||"SUCCESS",message:n.message||n.RESULT_MSG||"   "}}catch(e){return console.error("[ API] setCertifyCL04 error:",e),{code:"ERROR",message:String(e)}}},Sp=async t=>{console.log("[Certify API] setCertifyCL06 params:",t);try{const e=await fetch(`${bs}/customer/etc/setCertifyCL06`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,CONT_ID:t.CTRT_ID})});if(!e.ok)return console.error("[Certify API] setCertifyCL06 HTTP error:",e.status),{ERROR:`HTTP ${e.status}`};const n=await e.json();return console.log("[Certify API] setCertifyCL06 response:",n),n.data?n.data:n}catch(e){return console.error("[Certify API] setCertifyCL06 error:",e),{ERROR:String(e)}}},qm=async t=>{console.log("[Certify API] getCertifyCL08 params:",t);try{const e=await fetch(`${bs}/customer/etc/getCertifyCL08`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,CONT_ID:t.CTRT_ID})});if(!e.ok)return console.error("[Certify API] getCertifyCL08 HTTP error:",e.status),{ERROR:`HTTP ${e.status}`};const n=await e.json();return console.log("[Certify API] getCertifyCL08 response:",n),n.data?n.data:n}catch(e){return console.error("[Certify API] getCertifyCL08 error:",e),{ERROR:String(e)}}},qp=async()=>{var t;if(console.log("[FTTH API] getCertifyProdMap "),$n())return await new Promise(e=>setTimeout(e,300)),["PD10007399","PD10007400"];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${bs}/customer/work/getCertifyProdMap`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify({})});if(!n.ok)return console.error("[FTTH API] getCertifyProdMap HTTP error:",n.status),[];const r=await n.json();console.log("[FTTH API] getCertifyProdMap response:",r);const i=((t=r.output)==null?void 0:t.output)||r.output;if(i&&Array.isArray(i)){const l=i.map(c=>c.PROD_CD).filter(Boolean);return console.log("[FTTH API] FTTH   :",l.length,""),l}if(Array.isArray(r)){const l=r.map(c=>c.PROD_CD).filter(Boolean);return console.log("[FTTH API] FTTH   :",l.length,""),l}return[]}catch(e){return console.error("[FTTH API] getCertifyProdMap error:",e),[]}},gb=async t=>{console.log("[Certify API] getUplsLdapRslt CTRT_ID:",t);try{const e=await fetch(`${bs}/customer/etc/getUplsLdapRslt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CTRT_ID:t})});if(!e.ok)return console.error("[Certify API] getUplsLdapRslt HTTP error:",e.status),{exists:!1,data:[]};const n=await e.json();console.log("[Certify API] getUplsLdapRslt response:",n);const r=n.output||n.data||[];return{exists:(n.rowcount||r.length||0)>0,data:Array.isArray(r)?r:[]}}catch(e){return console.error("[Certify API] getUplsLdapRslt error:",e),{exists:!1,data:[]}}},zw=async t=>{try{const e=await fetch(`${bs}/customer/etc/getCertifyApiHist`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});return e.ok?(await e.json()).output||[]:[]}catch(e){return console.error("[Signal API] getCertifyApiHist error:",e),[]}},qw=async t=>{if($n())return await new Promise(e=>setTimeout(e,1e3)),[{CONSREQNO:"20240101001",CTRT_ID:"CTRT001",CONSCHRRNM:"",CONSCHRRTLNO:"010-1234-5678",CONSCHRRMAKRMKS:"LGU+   ",CONSFNSHSCDLDT:"20240115",CONSFNSHDT:"20240114",CONSNEEDDIVSNM:"",CONSDLYRSNNM:"",CONSIPSBPRSSDT:"",CONSIPSBRSNNM:"",CONSNREQPRSSDT:"",CONSNREQRSNNM:"",ENTR_NO:"500030621784",ENTR_RQST_NO:"300241327941",MSTR_FL:"Y",SBGNEGNRNM:"LGU+"},{CONSREQNO:"20240102002",CTRT_ID:"CTRT002",CONSCHRRNM:"",CONSCHRRTLNO:"010-2345-6789",CONSCHRRMAKRMKS:"  ",CONSFNSHSCDLDT:"20240120",CONSFNSHDT:"",CONSNEEDDIVSNM:"",CONSDLYRSNNM:" ",CONSIPSBPRSSDT:"",CONSIPSBRSNNM:"",CONSNREQPRSSDT:"",CONSNREQRSNNM:"",ENTR_NO:"500030621785",ENTR_RQST_NO:"300241327942",MSTR_FL:"Y",SBGNEGNRNM:"LGU+"}];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${bs}/customer/etc/getUplsRqstConsList`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error(`LGU    : ${n.status}`);return await n.json()}catch(e){throw console.error("LGU    :",e),e}},Xw=async t=>{console.log("[LGU API] uplsEntrBgnEstbChg params:",t);try{const e=await fetch(`${bs}/customer/receipt/uplsEntrBgnEstbChg`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[LGU API] uplsEntrBgnEstbChg HTTP error:",e.status),{RESULT_CD:"N",RESULT_MSG:`HTTP error: ${e.status}`};const n=await e.json();return console.log("[LGU API] uplsEntrBgnEstbChg response:",n),{RESULT_CD:n.RESULT_CD||"N",RESULT_MSG:n.RESULT_MSG||"",ENTR_NO:n.ENTR_NO||"",ENTR_RQST_NO:n.ENTR_RQST_NO||"",ENTR_CNTRT_NO:n.ENTR_CNTRT_NO||"",SVC_CD:n.SVC_CD||"",UPLS_PROD_YN:n.UPLS_PROD_YN||"",RQST_DV_CD:n.RQST_DV_CD||"",NET_TYP:n.NET_TYP||""}}catch(e){return console.error("[LGU API] uplsEntrBgnEstbChg error:",e),{RESULT_CD:"N",RESULT_MSG:String(e)}}},_v=async t=>{console.log("[LGU API] reqUplsHspdLdap params:",t);try{const e=await fetch(`${bs}/lgu/construction-request`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw console.error("[LGU API] reqUplsHspdLdap HTTP error:",e.status),new Error(`LDAP request failed: ${e.status}`);const n=await e.json();return console.log("[LGU API] reqUplsHspdLdap response:",n),n}catch(e){throw console.error("[LGU API] reqUplsHspdLdap error:",e),e}},Jw=async t=>{console.log("[LGU API] getUplsDuplicationMember params:",t);try{const e=await fetch(`${bs}/customer/etc/getUplsDuplicationMember`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return{success:!1,ENTR_EXIST:"N",RESULT_CD:"N",RESULT_MSG:`HTTP error: ${e.status}`};const n=await e.json();console.log("[LGU API] getUplsDuplicationMember response:",n);const r=Array.isArray(n)?n[0]:n,i=(r==null?void 0:r.RESULT_CD)||"";return i.startsWith("N")?{success:!1,ENTR_EXIST:"N",RESULT_CD:i,RESULT_MSG:(r==null?void 0:r.RESULT_MSG)||""}:{success:!0,ENTR_EXIST:(r==null?void 0:r.ENTR_EXIST)||"N",RESULT_CD:i,RESULT_MSG:(r==null?void 0:r.RESULT_MSG)||""}}catch(e){return console.error("[LGU API] getUplsDuplicationMember error:",e),{success:!1,ENTR_EXIST:"N",RESULT_CD:"N",RESULT_MSG:String(e)}}},n5=async t=>{console.log("[LGU API] getUplsEqipInfo params:",t);try{const e=await fetch(`${bs}/customer/etc/getUplsEqipInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return[];const n=await e.json();return console.log("[LGU API] getUplsEqipInfo response:",n),Array.isArray(n)?n:n.output&&Array.isArray(n.output)?n.output:n?[n]:[]}catch(e){return console.error("[LGU API] getUplsEqipInfo error:",e),[]}},Cy=async t=>{console.log("[LGU API] getUplsEqipPortInfo params:",t);try{const e=await fetch(`${bs}/customer/etc/getUplsEqipPortInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return[];const n=await e.json();return console.log("[LGU API] getUplsEqipPortInfo response:",n),Array.isArray(n)?n:n.output&&Array.isArray(n.output)?n.output:n?[n]:[]}catch(e){return console.error("[LGU API] getUplsEqipPortInfo error:",e),[]}},Zw=async t=>{console.log("[LGU API] setUplsRqstConsReq params:",t);try{const e=await fetch(`${bs}/customer/etc/setUplsRqstConsReq`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw new Error(`Port : ${e.status}`);const n=await e.json();return console.log("[LGU API] setUplsRqstConsReq response:",n),n}catch(e){throw console.error("[LGU API] setUplsRqstConsReq error:",e),e}},r5=async t=>{if($n())return await new Promise(e=>setTimeout(e,1500)),[{code:"SUCCESS",message:"LGU    ()",CANCEL_ID:"FAULT"+Date.now(),STATUS:""}];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${bs}/lgu/network-fault`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error(`LGU   : ${n.status}`);return await n.json()}catch(e){throw console.error("LGU   :",e),e}};class Fs extends Error{constructor(e,n,r){super(e),this.name="NetworkError",this.statusCode=n,this.details=r}}class e4{constructor(){this.states=new Map,this.failureThreshold=5,this.openDuration=3e4,this.halfOpenDuration=1e4}getState(e){return this.states.has(e)||this.states.set(e,{failureCount:0,lastFailureTime:0,state:"CLOSED"}),this.states.get(e)}canRequest(e){const n=this.getState(e),r=Date.now();return n.state==="CLOSED"?!0:n.state==="OPEN"?r-n.lastFailureTime>=this.openDuration?(console.log(`[Circuit Breaker] ${e} - OPEN  HALF_OPEN ( )`),n.state="HALF_OPEN",!0):(console.warn(` Circuit Breaker: ${e} -   (${Math.round((this.openDuration-(r-n.lastFailureTime))/1e3)}   )`),!1):n.state==="HALF_OPEN"}recordSuccess(e){const n=this.getState(e);n.state==="HALF_OPEN"&&console.log(`[Circuit Breaker] ${e} - HALF_OPEN  CLOSED ()`),n.failureCount=0,n.state="CLOSED"}recordFailure(e){const n=this.getState(e);n.failureCount++,n.lastFailureTime=Date.now(),n.failureCount>=this.failureThreshold?(n.state!=="OPEN"&&console.error(` Circuit Breaker: ${e} - CLOSED  OPEN (${this.failureThreshold}  , ${this.openDuration/1e3}  )`),n.state="OPEN"):n.state==="HALF_OPEN"&&(console.warn(`[Circuit Breaker] ${e} - HALF_OPEN  OPEN ( )`),n.state="OPEN")}reset(){this.states.clear()}}class t4{constructor(){this.pendingRequests=new Map,this.maxAge=5e3}getOrCreate(e,n){this.cleanup();const r=this.pendingRequests.get(e);if(r)return console.log(`[Request Dedup]   : ${e} (  )`),r.promise;const i=n();return this.pendingRequests.set(e,{promise:i,timestamp:Date.now()}),i.finally(()=>{this.pendingRequests.delete(e)}),i}cleanup(){const e=Date.now();for(const[n,r]of this.pendingRequests.entries())e-r.timestamp>this.maxAge&&this.pendingRequests.delete(n)}reset(){this.pendingRequests.clear()}}const Jd=new e4,i5=new t4;typeof window<"u"&&(window.resetCircuitBreaker=()=>{Jd.reset(),i5.reset(),console.log("[API ] Circuit Breaker  Request Deduplicator ")});const Cv=(t,e=" .")=>{switch(t){case 400:return" .   .";case 401:return" .";case 403:return"  .";case 404:return"    .";case 408:return"  .  .";case 429:return"   .    .";case 500:return"  .    .";case 502:case 503:return"   .    .";case 504:return"   .  .";default:return e}},sr=async(t,e,n=3,r=3e4)=>{if(!Jd.canRequest(t))throw new Fs("  .    .",503);if(!(e.method==="GET"||!e.method))return l();return i5.getOrCreate(t,l);async function l(){let c=null;for(let d=0;d<n;d++)try{const u=new AbortController,f=setTimeout(()=>u.abort(),r),m=await fetch(t,{...e,signal:u.signal});if(clearTimeout(f),m.ok)return Jd.recordSuccess(t),m;if(m.status>=400&&m.status<500)throw Jd.recordFailure(t),new Fs(Cv(m.status),m.status);if(m.status>=500){Jd.recordFailure(t);let p=Cv(m.status);try{const y=await m.json();y&&y.message&&(p=y.message)}catch{}throw new Fs(p,m.status)}return m}catch(u){if(c=u,u.name==="AbortError"){if(console.error(`API  ( ${d+1}/${n}):`,t),Jd.recordFailure(t),d===n-1)throw new Fs("  .  .",408)}else if(u instanceof TypeError&&u.message.includes("fetch")){if(console.error(`  ( ${d+1}/${n}):`,u),Jd.recordFailure(t),d===n-1)throw new Fs("  .",void 0,u)}else if(u instanceof Fs){if(u.statusCode&&u.statusCode>=400&&u.statusCode<500||d===n-1)throw u}else if(console.error(`API   ( ${d+1}/${n}):`,u),Jd.recordFailure(t),d===n-1)throw new Fs(u.message||"    .");if(d<n-1){const f=Math.min(1e3*Math.pow(2,d),5e3);console.log(`${f}ms  ...`),await new Promise(m=>setTimeout(m,f))}}throw c||new Fs("    .")}},s4=(t,e)=>{const n=["","","","","","","",""],r=[{type:aa.AS,display:"A/S"},{type:aa.Installation,display:""},{type:aa.Move,display:""},{type:aa.Change,display:""},{type:aa.Etc,display:""}],i=[hn.Pending,hn.Completed,hn.Cancelled],l=["   15 1","   123 5","   456 12","   789 3","   321 8","   654 2","   987 15","   147 7"];return n.map((d,u)=>{const f=r[u%r.length],m=i[u%i.length],p=9+u%8,y=u%4*15;return{id:`WRK${String(u+1).padStart(3,"0")}`,type:f.type,typeDisplay:f.display,status:m,scheduledAt:`2025-09-30T${String(p).padStart(2,"0")}:${String(y).padStart(2,"0")}:00`,customer:{id:`CUST${String(u+1).padStart(3,"0")}`,name:d,phone:`010-${String(Math.floor(Math.random()*9e3)+1e3)}-${String(Math.floor(Math.random()*9e3)+1e3)}`,address:l[u%l.length]},details:`${f.display}  `,assignedEquipment:[],directionId:`WRK${String(u+1).padStart(3,"0")}`}})},yv=async(t,e,n="N")=>{const r=typeof window<"u"?window.location.origin:"http://localhost:3000";try{return await(await sr(`${bs}/login`,{method:"POST",headers:{"Content-Type":"application/json",Origin:r},credentials:"include",body:JSON.stringify({USR_ID:t,USR_PWD:e,DISCONN_YN:n})},1)).json()}catch(i){throw console.error(" API  :",i),i instanceof Fs?i:new Fs("   .  .")}},$n=()=>typeof window<"u"&&localStorage.getItem("demoMode")==="true",n4=()=>[{INSP_ID:"INSP001",SO_ID:"209",CRR_ID:"01",INSP_END_DT:"20251015",STTL_YN:"Y",CUST_ID:"CUST001",CUST_NM:"",TEL_NO:"010-1234-5678",PASS_YN:"Y",PROD_GRP_NM:"+TV"},{INSP_ID:"INSP002",SO_ID:"209",CRR_ID:"01",INSP_END_DT:"20251014",STTL_YN:"N",CUST_ID:"CUST002",CUST_NM:"",TEL_NO:"010-2345-6789",PASS_YN:"N",FAIL_GRADE:"B",DAPPR_RESN:" ",PROD_GRP_NM:""},{INSP_ID:"INSP003",SO_ID:"209",CRR_ID:"01",INSP_END_DT:"20251013",STTL_YN:"Y",CUST_ID:"CUST003",CUST_NM:"",TEL_NO:"010-3456-7890",PASS_YN:"Y",PROD_GRP_NM:"+TV+"}],r4=()=>[{WRK_DRCTN_ID:"WRK001",WRK_ID:"1008409324",CUST_ID:"CUST001",CUST_NM:"",SO_ID:"209",SO_NM:"",CRR_ID:"01",CRR_NM:"LG",PROD_CD:"PROD001",PROD_NM:" 100M",WRK_CD:"02",WRK_CD_NM:"A/S",WRK_STAT_CD:"4",WRK_STAT_NM:"",SIGNAL_RESULT:"",SIGNAL_DATE:"2025-10-16 15:30"},{WRK_DRCTN_ID:"WRK002",WRK_ID:"1008409325",CUST_ID:"CUST002",CUST_NM:"",SO_ID:"209",SO_NM:"",CRR_ID:"01",CRR_NM:"LG",PROD_CD:"PROD002",PROD_NM:" 500M + TV",WRK_CD:"01",WRK_CD_NM:"",WRK_STAT_CD:"2",WRK_STAT_NM:"",SIGNAL_RESULT:""},{WRK_DRCTN_ID:"WRK003",WRK_ID:"1008409326",CUST_ID:"CUST003",CUST_NM:"",SO_ID:"209",SO_NM:"",CRR_ID:"01",CRR_NM:"LG",PROD_CD:"PROD003",PROD_NM:" 1G",WRK_CD:"03",WRK_CD_NM:"",WRK_STAT_CD:"1",WRK_STAT_NM:"",SIGNAL_RESULT:""}],i4=(t,e)=>{if(!t&&!e)return null;const n={total:0,pending:0,completed:0,cancelled:0,pendingByProdGrp:{},completedByProdGrp:{}},r={DTV:"D",D:"D",ISP:"I",I:"I",VOIP:"V",VoIP:"V",V:"V",C:"C",:"C",:"C"},i={:"pending",:"pending",:"pending",:"completed",:"completed","()":"completed",:"cancelled"};if(e){const l=e.split(/\s*\/\s*/).filter(c=>c.trim());n.total=l.length,l.forEach(c=>{const d=c.trim();let u=i[d];u||(d.includes("")?u="cancelled":d.includes("")&&!d.includes("")||d.includes("")&&d.includes("")?u="completed":u="pending",console.log("[parseWorkStatusFromStrings] :",d,"->",u)),n[u]++})}if(t){const l=t.split(/\s*\/\s*/).filter(c=>c.trim());n.total===0&&(n.total=l.length,n.pending=l.length),l.forEach(c=>{const d=c.trim().toUpperCase(),u=r[d]||d.charAt(0);n.pendingByProdGrp[u]=(n.pendingByProdGrp[u]||0)+1})}return n},yy=async t=>{if($n())return $w(t);try{const n=typeof window<"u"?window.location.origin:"http://localhost:3000";return await(await sr(`${bs}/work/receipts`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify({WRK_DRCTN_ID:t})})).json()}catch(n){throw n instanceof Fs?n:new Fs("   .")}},xb=async t=>{if(typeof window<"u"&&localStorage.getItem("demoMode")==="true")return await new Promise(n=>setTimeout(n,1e3)),{code:"SUCCESS",message:"   ()"};try{const n=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await fetch(`${bs}/work/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify(t)});if(!r.ok)throw new Error(` : ${r.status}`);return await r.json()}catch(n){throw console.error(" API  :",n),n}},Xp=async t=>{if(console.log("[] API :",t),$n())return await new Promise(e=>setTimeout(e,300)),{WRK_ID:t.WRK_ID,RCPT_ID:t.RCPT_ID||"",CUST_ID:t.CUST_ID||"",CTRT_ID:"CT001",SO_ID:"100",WRK_CD:"01",WRK_CD_NM:"",WRK_STAT_CD:"2",WRK_STAT_CD_NM:"",WRK_RCPT_CL:"",OST_WORKABLE_STAT:"X",HOTBILL_YN:"N"};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/work/getDetailWorkInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[] :",r),Array.isArray(r)&&r.length>0?r[0]:r&&!Array.isArray(r)?r:null}catch(e){throw console.error("[] API :",e),e}},a4=async t=>{if(console.log("[OST] API :",t),$n())return await new Promise(e=>setTimeout(e,300)),{AGENT_FL:"1",BUSI_TYPE:"031",RES_CD:"0BS0000"};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/etc/getOSTInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify({AGENT_FL:t.AGENT_FL||"1",RCPT_ID:t.RCPT_ID,CUST_ID:t.CUST_ID})})).json();return console.log("[OST] :",r),Array.isArray(r)&&r.length>0?r[0]:r&&!Array.isArray(r)?r:null}catch(e){return console.error("[OST] API :",e),null}},l4=async t=>{if(console.log("[OST] API :",t),$n())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:" ."};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/etc/modOstWorkCancel`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[OST] :",r),r.MESSAGE==="SUCCESS"||r.code==="SUCCESS"?{code:"SUCCESS",message:" .",RCPT_ID:r.RCPT_ID}:{code:r.code||"ERROR",message:r.message||r.MESSAGE||"  "}}catch(e){throw console.error("[OST] API :",e),new Fs(e.message||"OST     .")}},bs=typeof window<"u"?(()=>{const t=window.location.hostname,e=window.location.protocol;return console.log("[ API]  :",{hostname:t,protocol:e}),t==="localhost"||t==="127.0.0.1"?"http://58.143.140.222:8080/api":"/api"})():"/api",o4=t=>{switch(t){case"":return aa.Installation;case"A/S":return aa.AS;case"":return aa.Change;case"":return aa.Move;default:return aa.Etc}},c4=(t,e)=>{if(e){if(e==="4"||e==="7")return hn.Completed;if(e==="3")return hn.Cancelled;if(e==="1"||e==="2")return hn.Pending}switch(t){case"":return hn.Pending;case"":return hn.Completed;case"":return hn.Cancelled;default:return hn.Pending}},d4=async({startDate:t,endDate:e})=>{if($n())return s4();const r=t.replace(/-/g,""),i=e.replace(/-/g,""),l=typeof window<"u"?localStorage.getItem("userInfo"):null,c=l?JSON.parse(l):{},d={WRKR_ID:c.userId||"",SO_ID:c.soId||"",PROC_CL:"A02",VIEW_TYP:"MOBILE",SCH_HOPEDT_GB:"2",PRT_STAT:"%",WRK_DTL_TCD:"%",HOPE_DT_STRT:r,HOPE_DT_END:i,PDA_WORK_STATUS:"%",EMRG_YN:"",WRK_CD:"",DATE_GBN:""};try{const u=typeof window<"u"?window.location.origin:"http://localhost:3000",m=await(await sr(`${bs}/work/directions`,{method:"POST",headers:{"Content-Type":"application/json",Origin:u},credentials:"include",body:JSON.stringify(d)},3,6e4)).json();return!Array.isArray(m)||m.length===0?[]:m.map(y=>{const g=y.HOPE_DT,N=y.HOPE_TM,C=new Date(`${g.slice(0,4)}-${g.slice(4,6)}-${g.slice(6,8)}T${N}:00`).toISOString();return{id:y.WRK_DRCTN_ID,type:o4(y.WRK_CD_NM),typeDisplay:y.WRK_CD_NM||"",status:c4(y.WRK_STAT,y.MIN_WRK_STAT_CD||y.WRK_STAT_CD),scheduledAt:C,customer:{id:y.CUST_ID,name:y.NONMASK_CUST_NM||y.CUST_NM,phone:y.CUST_TEL_NO||y.REQ_CUST_TEL_NO||"",address:y.ADDR,isVip:!!(y.VIP_GB&&String(y.VIP_GB).length>0),vipLevel:y.VIP_GB==="VIP_VVIP"?"VVIP":y.VIP_GB?"VIP":void 0},details:y.REQ_CTX,assignedEquipment:[],directionId:y.WRK_DRCTN_ID,installLocation:y.INSTL_LOC||"",WRK_CD:y.WRK_CD,WRK_CD_NM:y.WRK_CD_NM,WRK_DTL_TCD:y.WRK_DTL_TCD,PROD_CD:y.PROD_CD,PROD_NM:y.PROD_NM,PROD_GRP:y.PROD_GRP,CTRT_ID:y.CTRT_ID,CTRT_STAT:y.CTRT_STAT,CTRT_STAT_NM:y.CTRT_STAT_NM,SO_ID:y.SO_ID,SO_NM:y.SO_NM,CRR_ID:y.CRR_ID,CUST_REL:y.CUST_REL||"",UP_CTRL_CL:y.UP_CTRL_CL||"",PSN_USE_CORP:y.PSN_USE_CORP||"",VOIP_USE_CORP:y.VOIP_USE_CORP||"",DTV_USE_CORP:y.DTV_USE_CORP||"",VIEW_MOD_CD:y.VIEW_MOD_CD||"",VIEW_MOD_NM:y.VIEW_MOD_NM||"",VIP_GB:y.VIP_GB||"",PROD_GRPS:y.PROD_GRPS||"",WRK_STATS:y.WRK_STATS||"",OST_WORKABLE_STAT:y.OST_WORKABLE_STAT||""}})}catch(u){throw console.error("API  :",u),u instanceof Fs?u:new Fs("   .")}},ad=async t=>{if($n())return null;try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n={PROC_CL:"A02",WRK_DRCTN_ID:t.WRK_DRCTN_ID,WRK_ID:t.WRK_ID||"",SO_ID:t.SO_ID||""};console.log("[getWorkReceiptDetail] Requesting with:",n);const r=await fetch(`${bs}/work/receipts`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(n)});if(!r.ok)return console.error("[getWorkReceiptDetail] HTTP Error:",r.status),null;const i=await r.json();if(console.log("[getWorkReceiptDetail] Response:",i),Array.isArray(i)&&i.length>0){if(t.WRK_ID){const l=i.find(c=>String(c.WRK_ID)===String(t.WRK_ID));if(l)return console.log("[getWorkReceiptDetail] Found matching WRK_ID:",t.WRK_ID,"MEMO:",l.MEMO,"NET_CL:",l.NET_CL),l;console.log("[getWorkReceiptDetail] WRK_ID not found in response, params.WRK_ID:",t.WRK_ID,"available WRK_IDs:",i.map(c=>c.WRK_ID))}return i[0]}return null}catch(e){return console.error("[getWorkReceiptDetail] Error:",e),null}},u4=async t=>{try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${bs}/customer/work/getSafeCheckList_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},body:JSON.stringify(t||{}),credentials:"include"});if(!n.ok)return console.warn(`[SafetyChecklist API] Failed: ${n.status}`),[];const r=await n.json();return r.data&&Array.isArray(r.data)?r.data:Array.isArray(r)?r:[]}catch(e){return console.warn("[SafetyChecklist API] Error:",e),[]}},h4=async t=>{try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${bs}/customer/work/saveSafeCheckList_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},body:JSON.stringify({USR_ID:t.USR_ID,IMG_PATHS:t.IMG_PATHS||"",ANS_ITEM_IDS:t.ANS_ITEM_IDS,ANS_VALUES:t.ANS_VALUES}),credentials:"include"});if(!n.ok)return console.warn(`[SafetyChecklist Save API] Failed: ${n.status}`),{code:"ERROR",message:`HTTP ${n.status}`};const r=await n.json();return{code:r.code||"SUCCESS",message:r.message||"Safety checklist saved"}}catch(e){return console.warn("[SafetyChecklist Save API] Error:",e),{code:"ERROR",message:String(e)}}},a5=async t=>{try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${bs}/customer/work/getSafeCheckResultInfo_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},body:JSON.stringify({WRKR_ID:t}),credentials:"include"});if(!n.ok)return console.warn(`[SafetyCheckResult API] Failed: ${n.status}`),[];const r=await n.json();return r.code==="SUCCESS"&&r.output?r.output:[]}catch(e){return console.warn("[SafetyCheckResult API] Error:",e),[]}},f4=async t=>{if($n())return await new Promise(e=>setTimeout(e,500)),n4();try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=new URLSearchParams;n.append("SO_ID",t.SO_ID),n.append("CRR_ID",t.CRR_ID);const r=new Date,i=new Date(r.getFullYear(),r.getMonth()-3,r.getDate()),l=m=>{const p=m.getFullYear(),y=String(m.getMonth()+1).padStart(2,"0"),g=String(m.getDate()).padStart(2,"0");return`${p}${y}${g}`},c=t.INSP_DT_FROM||l(i),d=t.INSP_DT_TO||l(r);n.append("INSP_DT_FROM",c),n.append("INSP_DT_TO",d),t.INSP_ID&&n.append("INSP_ID",t.INSP_ID);const u=await fetch(`${bs}/work/safety-checks?${n.toString()}`,{method:"GET",headers:{Origin:e},credentials:"include"});return u.ok?await u.json():(console.warn(`[ API]   : ${u.status} -    `),[])}catch(e){return console.warn("[ API]    -   :",e),[]}},m4=async t=>{if($n())return await new Promise(e=>setTimeout(e,500)),r4();try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=new URLSearchParams;Object.entries(t).forEach(([l,c])=>{c&&n.append(l,c)});const r=await fetch(`${bs}/work/result-signals?${n.toString()}`,{method:"GET",headers:{Origin:e},credentials:"include"});return r.ok?await r.json():(console.warn(`[ API]   : ${r.status} -    `),[])}catch(e){return console.warn("[ API]    -   :",e),[]}},to=async t=>{var n;if($n())return await new Promise(r=>setTimeout(r,500)),{contractEquipments:[{SVC_CMPS_ID:"SVC001",ITEM_MID_NM:"",EQT_CL_NM:"RS-M100",ITEM_MID_CD:"04"},{SVC_CMPS_ID:"SVC002",ITEM_MID_NM:"",EQT_CL_NM:"DTV-STB100",ITEM_MID_CD:"05"}],technicianEquipments:[{EQT_NO:"EQT001",ITEM_MID_NM:"",EQT_CL_NM:"RS-M100",EQT_SERNO:"RSM100001",ITEM_MID_CD:"04",MAC_ADDRESS:"AA:BB:CC:DD:EE:01"},{EQT_NO:"EQT002",ITEM_MID_NM:"",EQT_CL_NM:"RS-M200",EQT_SERNO:"RSM200001",ITEM_MID_CD:"04",MAC_ADDRESS:"AA:BB:CC:DD:EE:02"},{EQT_NO:"EQT003",ITEM_MID_NM:"",EQT_CL_NM:"DTV-STB100",EQT_SERNO:"DTV100001",ITEM_MID_CD:"05"},{EQT_NO:"EQT004",ITEM_MID_NM:"",EQT_CL_NM:"DTV-STB200",EQT_SERNO:"DTV200001",ITEM_MID_CD:"05"}],customerEquipments:[],removedEquipments:[]};try{const r=typeof window<"u"?window.location.origin:"http://localhost:3000",{WORK_ID:i,...l}=t,c={...l,WRK_ID:t.WRK_ID||i,EQT_SEL:"0",EQT_CL:"ALL"},f=(await(await sr(`${bs}/customer/work/getCustProdInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:r},credentials:"include",body:JSON.stringify(c)})).text()).replace(/[\x00-\x1f\x7f]/g,g=>g===`
`||g==="\r"||g==="	"?" ":""),m=JSON.parse(f),p=((n=m==null?void 0:m.output1)==null?void 0:n[0])||{},y=c.WRK_CD==="02";return{contractEquipments:(m==null?void 0:m.output2)||[],technicianEquipments:(m==null?void 0:m.output3)||[],customerEquipments:y?[]:(m==null?void 0:m.output4)||[],removedEquipments:y?(m==null?void 0:m.output4)||[]:(m==null?void 0:m.output5)||[],kpiProdGrpCd:p.KPI_PROD_GRP_CD,prodChgGb:p.PROD_CHG_GB,chgKpiProdGrpCd:p.CHG_KPI_PROD_GRP_CD,prodGrp:p.PROD_GRP,upCtrlCl:p.UP_CTRL_CL,prodPromoInfo:(m==null?void 0:m.output1)||[]}}catch(r){throw console.error("[ API]    :",r),r instanceof Fs?r:new Fs("   .")}},Mh=async t=>{if($n())return await new Promise(l=>setTimeout(l,1e3)),{code:"SUCCESS",message:"   ()"};const e=typeof window<"u"?localStorage.getItem("userInfo"):null,n=e?JSON.parse(e):{},r=n.userId||n.id||"",i=t.WRKR_ID||n.userId||"";try{const l=typeof window<"u"?window.location.origin:"http://localhost:3000",c=(V,G,W)=>{const j=(V==null?"":String(V)).trim();return j.length>=G?j.substring(0,G):j+new Array(G-j.length+1).join(W)};let d="",u="",f="",m="",p="",y="",g="",N="",C="",v="",R=0;const A=(t.equipments||[]).filter(V=>String(V.SEL||"1")==="1").map((V,G)=>({eq:V,order:Number(V.EQUIP_SEQ||V.SVC_CMPS_ID||G+1),idx:G})).sort((V,G)=>(V.order||0)-(G.order||0));for(let V=0;V<A.length;V++){const{eq:G,idx:W}=A[V],j=String(G.PROD_GRP||"");d+=j;const S=String(G.PROD_TYP||""),P=String(G.EQUIP_SEQ||G.SVC_CMPS_ID||"");u+=S+P,f+=String(G.PROD_CD||""),m+=String(G.SVC_CD||"");const F=c(G.ITEM_MID_CD||G.EQT||G.EQT_CD||"",10," ");p+=F;const ee=c(G.EQT_CL||G.EQT_CL_CD||"",10," ");y+=ee;const J=String(G.LENT||"");g+=J;const $=c(String(G.EQT_USE_STAT_CD||""),1," ");N+=$,C=c(G.EQT_SALE_AMT||0,10," ");const Y=c(G.ITLLMT_PRD||"00",2," ");v+=Y,R+=1}const M={RCPT_ID:t.RCPT_ID||"",WRK_ID:t.WRK_ID,CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:i,REG_UID:r,PROD_GRPS:d,PROD_CMPS_CLS:u,PROD_CDS:f,SVC_CDS:m,ITEM_MID_CDS:p,EQT_CLS:y,LENTS:g,EQT_USE_STATS:N,EQT_SALE_AMTS:C,ITLLMT_PRDS:v,SERVICE_CNT:String(R),PROM_CNT:t.PROM_CNT||""},L=await fetch(`${bs}/customer/work/eqtCmpsInfoChg`,{method:"POST",headers:{"Content-Type":"application/json",Origin:l},credentials:"include",body:JSON.stringify({parameters:M})});if(!L.ok){let V=`HTTP ${L.status}: ${L.statusText}`;try{const G=await L.json();V=G.MESSAGE||G.message||V}catch{try{const G=await L.text();G&&(V=G)}catch{}}throw new Fs(V)}return await L.json()}catch(l){throw console.error("[ API]     :",l),l instanceof Fs?l:new Fs("    .")}},g4=async(t,e)=>{if($n())return await new Promise(n=>setTimeout(n,500)),[{EQT_CD:"05",EQT_CL_CD:"STB001",EQT_CL_NM:"STB-HD"},{EQT_CD:"05",EQT_CL_CD:"STB002",EQT_CL_NM:"STB-UHD"},{EQT_CD:"05",EQT_CL_CD:"STB003",EQT_CL_NM:"STB-4K"},{EQT_CD:"04",EQT_CL_CD:"MDM001",EQT_CL_NM:"DOCSIS 3.0"},{EQT_CD:"04",EQT_CL_CD:"MDM002",EQT_CL_NM:"DOCSIS 3.1"}];try{const n={EQT_SEL:"0",PROD_CD:t,BUGA_EQT_SEL:"Y"};e&&(n.CTRT_ID=e);const r=await fetch(`${bs}/customer/receipt/contract/getEquipmentNmListOfProd`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const i=await r.json();if(Array.isArray(i))return i;throw i.code&&i.message?new Error(i.message||"    "):new Error("    :   ")}catch(n){throw console.error("[ API]     API :",n),n}},x4=async(t,e)=>{if(console.log("[ API]     API :"),console.log("  - PROD_CD:",t),console.log("  - CTRT_ID:",e),$n())return await new Promise(n=>setTimeout(n,500)),{output1:[{ITEM_MID_CDS:"05        10        ",EQT_CLS:"STB001    MDM001    ",LENTS:"1030",EQT_USE_STATS:"11",ITLLMT_PRDS:"0000",EQT_SALE_AMTS:"0         0         "}],output2:[{SEL:"1",PROD_CD:t,SVC_CD:"SVC001",PROD_TYP:"01",PROD_GRP:"V",EQT:"05",EQT_CD:"05",EQT_CL:"STB001",EQT_CL_NM:"STB-HD",ITM_MID_CD:"05",LENT:"10",EQT_USE_STAT_CD:"1",ITLLMT_PRD:"00",LENT_YN:"Y",EQT_SALE_AMT:0,EQUIP_SEQ:"1",EQT_BASIC_YN:"Y",EQT_NM:""},{SEL:"1",PROD_CD:t,SVC_CD:"SVC001",PROD_TYP:"01",PROD_GRP:"V",EQT:"04",EQT_CD:"04",EQT_CL:"MDM001",EQT_CL_NM:"DOCSIS 3.0",ITM_MID_CD:"04",LENT:"30",EQT_USE_STAT_CD:"1",ITLLMT_PRD:"00",LENT_YN:"Y",EQT_SALE_AMT:0,EQUIP_SEQ:"2",EQT_BASIC_YN:"Y",EQT_NM:""}],output3:[]};try{const n={EQT_SEL:"0",PROD_CD:t,BUGA_EQT_SEL:"Y"};e&&(n.CTRT_ID=e),console.log("[ API]  :",n);const r=await fetch(`${bs}/customer/receipt/contract/getContractEqtList`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const i=await r.json();return console.log("[ API] getContractEqtList  :",i),i}catch(n){throw console.error("[ API]     API :",n),n}},Jl=async t=>{if(console.log("[ API]   API :",t),$n()){await new Promise(n=>setTimeout(n,300));const e={};return t.includes("CMCU027")&&(e.CMCU027=[{COMMON_CD:"10",COMMON_CD_NM:""},{COMMON_CD:"30",COMMON_CD_NM:""},{COMMON_CD:"31",COMMON_CD_NM:""},{COMMON_CD:"60",COMMON_CD_NM:""}]),t.includes("CMEP314")&&(e.CMEP314=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU064")&&(e.CMCU064=[{COMMON_CD:"0",COMMON_CD_NM:""},{COMMON_CD:"1",COMMON_CD_NM:"1"},{COMMON_CD:"2",COMMON_CD_NM:"2"},{COMMON_CD:"3",COMMON_CD_NM:"3"}]),t.includes("CMCU057")&&(e.CMCU057=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU110")&&(e.CMCU110=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU148")&&(e.CMCU148=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU005")&&(e.CMCU005=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""},{COMMON_CD:"4",COMMON_CD_NM:""},{COMMON_CD:"5",COMMON_CD_NM:""}]),t.includes("CMCT015")&&(e.CMCT015=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""}]),e}try{const e={CODE_IDS:t.join(",")};console.log("[ API]  :",e);const n=await fetch(`${bs}/common/getCommonCodeList`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const r=await n.json();return console.log("[ API] getCommonCodeList  :",r),r}catch(e){throw console.error("[ API]   API :",e),e}},p4=async t=>{try{const e={P_COMM_GRP_CD:t},n=await fetch(`${bs}/common/getCommonCodeList`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return await n.json()}catch(e){throw console.error("[ API]    API :",e),e}},Su=async(t,e,n,r,i,l)=>{if(console.log("[STB API]    API "),console.log("[STB API]  :",{regUid:t,ctrtId:e,wrkId:n,msgId:r,stbEqtNo:i,modemEqtNo:l}),$n())return await new Promise(d=>setTimeout(d,800)),{MSGCODE:"SUCCESS",MESSAGE:"STB server connection check completed",O_IFSVC_RESULT:"TRUE0000000001SMR03000000"};try{const u=`${typeof window<"u"?window.location.origin:"http://localhost:3000"}/api/customer/work/checkStbServerConnection`,f={REG_UID:t,CTRT_ID:e,WRK_ID:n,MSG_ID:r,STB_EQT_NO:i,MODEM_EQT_NO:l};console.log("[STB API] API URL:",u),console.log("[STB API]  :",f),console.log("[STB API] fetch  ...");const m=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(console.log("[STB API]  :",m.status,m.statusText),!m.ok){const y=await m.text();throw console.error("[STB API] HTTP  :",y),new Error(`HTTP ${m.status}: ${m.statusText}`)}const p=await m.json();return console.log("[STB API]  :",p),Array.isArray(p)&&p.length>0?(console.log("[STB API]      :",p[0]),p[0]):p}catch(d){throw console.error("[STB API] STB    API :",d),d}},_4=async t=>{if(console.log("  API :",t),$n())return await new Promise(e=>setTimeout(e,1500)),{code:"SUCCESS",message:"   ()",data:{WRK_ID:t.workInfo.WRK_ID,WRK_STAT_CD:"4",CMPL_DT:t.workInfo.WRKR_CMPL_DT}};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000";console.log("    API :",`${bs}/customer/work/workComplete`);const n=await sr(`${bs}/customer/work/workComplete`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)},1);console.log("   API  :",n.status,n.statusText);const r=await n.json();return console.log("  API :",r),Array.isArray(r)?(console.log("   -  "),{code:"SUCCESS",message:" .",data:r}):r}catch(e){throw console.error("  API :",e),e instanceof Fs?e:new Fs(e.message||"     .")}},C4=async t=>{if(console.log(" [  ] API :",t),$n())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"  ."};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000";console.log("     API :",`${bs}/customer/work/saveInstallInfo`);const n=await sr(`${bs}/customer/work/saveInstallInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)},1);console.log("    API  :",n.status,n.statusText);const r=await n.json();return console.log("   API :",r),r}catch(e){throw console.error("   API :",e),e instanceof Fs?e:new Fs(e.message||"     .")}},ka=async t=>{if(console.log("[  ] API :",t),$n())return await new Promise(n=>setTimeout(n,300)),{CMCU048:[{code:"1",name:"HFC"},{code:"2",name:"FTTH"},{code:"3",name:"FTTB"}],BLST010:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:""}],BLST014:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:""}],CMCU030:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:"UTP"}],BLST016:[{code:"1",name:""},{code:"2",name:""}],CMCU046:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:""}],CMCU050:[{code:"1",name:"HDMI"},{code:"2",name:"Component"},{code:"3",name:"Composite"}],CMCU051:[{code:"1",name:""},{code:"2",name:""}],CMCU049:[{code:"1",name:""},{code:"2",name:""}]}[t]||[];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/common/getCommonCodes`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify({CODE_GROUP:t})})).json();return Array.isArray(r)?r.map(i=>({code:i.COMMON_CD||i.code||"",name:i.COMMON_CD_NM||i.name||"",description:i.DESCRIPTION||i.description||"",ref_code:i.REF_CODE||i.ref_code||"",ref_code2:i.REF_CODE2||i.ref_code2||"",ref_code3:i.REF_CODE3||i.ref_code3||"",ref_code8:i.REF_CODE8||i.ref_code8||"",ref_code12:i.REF_CODE12||i.ref_code12||""})):[]}catch{return[]}},bv=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/equipment/getEquipmentOutList`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("    :",r),Array.isArray(r)?r:r.output1||[]}catch(e){throw console.error("    :",e),e instanceof Fs?e:new Fs("    .")}},y4=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/equipment/addCorporationEquipmentQuota`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",r),r}catch(e){throw console.error("   :",e),e instanceof Fs?e:new Fs("   .")}},b4=async(t,e)=>{console.log("[addEquipmentReturnRequest]  :",t);try{if(!t.WRKR_ID||!t.CRR_ID)throw new Fs("  .");if(!t.equipmentList||t.equipmentList.length===0)throw new Fs("  .");const n=typeof window<"u"?window.location.origin:"http://localhost:3000",r=t.equipmentList.length;let i=0,l=[],c=0;for(const d of t.equipmentList){c++,e==null||e(c,r,d.EQT_SERNO||d.EQT_NO);const u={EQT_NO:d.EQT_NO,EQT_SERNO:d.EQT_SERNO||"",RETN_RESN_CD:d.RETN_RESN_CD||"01",ACTION:d.ACTION||"RETURN",WRKR_ID:t.WRKR_ID,CRR_ID:t.CRR_ID,SO_ID:t.SO_ID||"",MST_SO_ID:t.MST_SO_ID||t.SO_ID||"",RETURN_TP:t.RETURN_TP||"2",PROC_STAT:"1",RETN_PSN_ID:t.WRKR_ID};console.log("[addEquipmentReturnRequest]  :",d.EQT_SERNO,u);try{const m=await(await sr(`${bs}/customer/equipment/addEquipmentReturnRequest`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify(u)})).json();console.log("[addEquipmentReturnRequest]  :",d.EQT_SERNO,m),m&&(m.MSGCODE==="0"||m.MSGCODE==="SUCCESS"||m.success===!0)?i++:l.push(d.EQT_SERNO||d.EQT_NO)}catch(f){console.error("[addEquipmentReturnRequest]  :",d.EQT_SERNO,f),l.push(d.EQT_SERNO||d.EQT_NO)}}if(console.log("[addEquipmentReturnRequest] : ",i,"/ ",l.length),i>0)return{success:!0,MSGCODE:"SUCCESS",message:l.length>0?`${i}  , ${l.length} `:`${i}  .`,data:{successCount:i,failedItems:l}};throw new Fs(` : ${l.join(", ")}`)}catch(n){throw console.error("[addEquipmentReturnRequest]  :",n),n instanceof Fs?n:new Fs(n.message||"  .")}},N4=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/equipment/cmplEqtCustLossIndem`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),r}catch(e){throw console.error("  :",e),e instanceof Fs?e:new Fs("  .")}},S4=async t=>{console.log("[fn:setEquipmentCheckStandby -> req:setEquipmentChkStndByY_ForM] API:",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${bs}/customer/equipment/setEquipmentChkStndByY_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)}),r=await n.json();if(r.debugLogs&&(console.log("[backend debug logs]"),r.debugLogs.forEach(i=>console.log(i))),n.status===400&&r.code==="BUSINESS_RULE_ERROR")throw console.error("business rule error:",r.message),new Error(r.message||"business rule error");if(!n.ok){console.error("equipment status change failed:",r);const i=r.message||r.error||`server error (HTTP ${n.status})`;throw new Error(i)}return console.log("equipment status change success:",r),r}catch(e){throw console.error("equipment status change failed:",e),e instanceof Error?e:new Error("equipment status change failed.")}},yf=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/statistics/equipment/getEquipmentHistoryInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();console.log("  :",r);const i=(r==null?void 0:r.data)||r;return Array.isArray(i)?i:[i]}catch(e){throw console.error("  :",e),e instanceof Fs?e:new Fs("  .")}},v4=async t=>{const e=`API_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,n=Date.now(),r={...t,TO_WRKR_ID:t.MV_WRKR_ID,WRKR_ID:t.MV_WRKR_ID};console.log(`[fn:changeEquipmentWorker -> req:changeEqtWrkr_3_ForM] ${e}`),console.log("params:",JSON.stringify(r,null,2));try{const i=`${bs}/customer/equipment/changeEqtWrkr_3_ForM`,l=new AbortController,c=setTimeout(()=>l.abort(),3e4),d=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r),signal:l.signal});clearTimeout(c);const u=Date.now()-n;console.log(`[${e}] HTTP ${d.status} (${u}ms)`);const f=await d.text();console.log(`[${e}] RAW:`,f);let m;try{m=JSON.parse(f),console.log(`[${e}] PARSED:`,JSON.stringify(m,null,2))}catch{throw console.error(`[${e}] JSON parse failed`),new Error("server response parse failed")}const p=m==null?void 0:m.MSGCODE,y=(m==null?void 0:m.MESSAGE)||(m==null?void 0:m.message)||"";if(p==="SUCCESS")return console.log(`[${e}] SUCCESS (MSGCODE=SUCCESS, ${u}ms)`),m;if(p==="FAIL")throw new Error(y||"Oracle procedure failed (MSGCODE=FAIL)");if(!d.ok){const g=y||(m==null?void 0:m.error)||(m==null?void 0:m.code)||`server error (HTTP ${d.status})`;throw new Error(g)}if(y&&(y.includes("ERROR")||y.includes("FAIL")))throw new Error(y);return console.log(`[${e}] SUCCESS (${u}ms)`),m}catch(i){const l=Date.now()-n;throw console.error(`[${e}] FAILED (${l}ms):`,i.message),i.name==="AbortError"?new Error("Request timeout (30s)."):i instanceof Error?i:new Error("equipment transfer failed.")}},D4=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/work/worker-adjustment`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),r}catch(e){throw console.error("  :",e),e instanceof Fs?e:new Fs("  .")}},rp=async t=>{console.log("[fn:findUserList -> req:getFindUsrList3] API:",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n={};t.USR_NM&&t.USR_NM.trim()&&(n.USR_NM=t.USR_NM.trim(),n.WRKR_NM=t.USR_NM.trim()),t.USR_ID&&t.USR_ID.trim()&&(n.USR_ID=t.USR_ID.trim(),n.WRKR_ID=t.USR_ID.trim()),t.SO_ID&&(n.SO_ID=t.SO_ID),t.CRR_ID&&(n.CRR_ID=t.CRR_ID),console.log("[findUserList] cleaned params:",n);const i=await(await sr(`${bs}/system/cm/getFindUsrList3`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(n)})).json();return console.log("findUserList result:",i),Array.isArray(i)?i:i.output1&&Array.isArray(i.output1)?i.output1:i.data&&Array.isArray(i.data)?i.data:[]}catch(e){throw console.error("findUserList failed:",e),e instanceof Fs?e:new Fs("findUserList failed.")}},R4=async(t,e,n)=>{console.log(" [] API :",{custId:t,startDate:e,endDate:n});try{const r=new Date,i=r.toISOString().slice(0,10).replace(/-/g,""),c=new Date(r.getTime()-10080*60*1e3).toISOString().slice(0,10).replace(/-/g,""),d={CUST_ID:t,SMS_PROCESS:"ALL",REG_DATE1:e||c,REG_DATE2:n||i},u=typeof window<"u"?window.location.origin:"http://localhost:3000",m=await(await sr(`${bs}/customer/sigtrans/getENSSendHist`,{method:"POST",headers:{"Content-Type":"application/json",Origin:u},credentials:"include",body:JSON.stringify(d)})).json();return console.log("  :",m),Array.isArray(m)?m:m.output&&Array.isArray(m.output)?m.output:m.data&&Array.isArray(m.data)?m.data:[]}catch(r){throw console.error("  :",r),r instanceof Fs?r:new Fs("  .")}},T4=async t=>{console.log(" [] API :",{custId:t});try{const e={CUST_ID:t},n=typeof window<"u"?window.location.origin:"http://localhost:3000",i=await(await sr(`${bs}/customer/negociation/getCustConslHist`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify(e)})).json();return console.log("  :",i),Array.isArray(i)?i:i.output&&Array.isArray(i.output)?i.output:i.data&&Array.isArray(i.data)?i.data:[]}catch(e){throw console.error("  :",e),e instanceof Fs?e:new Fs("  .")}},J1=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/work/getEquipLossInfo_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",r),Array.isArray(r)?r:r.output1||[]}catch(e){throw console.error("   :",e),e instanceof Fs?e:new Fs("   .")}},E4=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/work/modEquipLoss_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),r}catch(e){throw console.error("  :",e),e instanceof Fs?e:new Fs("  .")}},l5=async t=>{console.log("[ ] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/contract/getFullContractInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",r),{contracts:r.contracts||[],billing:r.billing||null,currentContract:r.currentContract||null}}catch(e){throw console.error("   :",e),e instanceof Fs?e:new Fs("  .")}},jf=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/contract/getContractInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),Array.isArray(r)?r:[]}catch(e){throw console.error("  :",e),e instanceof Fs?e:new Fs("  .")}},dl=async t=>{console.log("[getProdPromotionInfo]  :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/customer/work/getProdPromotionInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[getProdPromotionInfo] :",r),Array.isArray(r)?r:(r==null?void 0:r.data)||(r==null?void 0:r.output)||[]}catch(e){return console.error("[getProdPromotionInfo] :",e),[]}},la=async t=>{console.log(" [] sendSignal :",t.MSG_ID,t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await sr(`${bs}/signal/send`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log(" [] :",r),r}catch(e){return console.error("[] :",e),{code:"ERROR",message:e.message||"  .",MSG_ID:t.MSG_ID}}},vp=async t=>{if(console.log("[ API] insertWorkRemoveStat :",t),$n())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"  ()"};try{const e=localStorage.getItem("userInfo"),n=e?JSON.parse(e):{},r=t.REG_UID||n.userId||"A20130708",i={WRK_ID:t.WRK_ID,REMOVE_LINE_TP:t.REMOVE_LINE_TP,REMOVE_GB:t.REMOVE_GB,REMOVE_STAT:t.REMOVE_STAT||"",REG_UID:r};console.log("[ API]  :",i);const c=await(await fetch(`${bs}/customer/work/insertWorkRemoveStat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)})).json();return console.log("[ API] :",c),Array.isArray(c)||c.code==="SUCCESS"||c.success===!0?{code:"SUCCESS",message:" ."}:{code:"ERROR",message:c.message||c.msg||"  ."}}catch(e){return console.error("[ API] :",e),{code:"ERROR",message:e.message||"    ."}}},o5=async t=>{if(console.log("[AS API] modAsPdaReceipt :",t),$n())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"AS  ()"};try{const e=localStorage.getItem("userInfo"),n=e?JSON.parse(e):{},r=t.REG_UID||n.userId||"A20130708",i=t.CRR_ID||n.crrId||"01",l={CUST_ID:t.CUST_ID,RCPT_ID:t.RCPT_ID||"",WRK_DTL_TCD:t.WRK_DTL_TCD,WRK_RCPT_CL:t.WRK_RCPT_CL,WRK_RCPT_CL_DTL:t.WRK_RCPT_CL_DTL,WRK_HOPE_DTTM:t.WRK_HOPE_DTTM,HOPE_DTTM:t.WRK_HOPE_DTTM,MEMO:t.MEMO||"",EMRG_YN:t.EMRG_YN||"N",HOLY_YN:t.HOLY_YN||"N",CRR_ID:i,WRKR_ID:t.WRKR_ID||r,REG_UID:r,WRK_DIV_ID:"",POST_ID:t.POST_ID||"",BLD_ID:t.BLD_ID||"",BLD_CL:t.BLD_CL||"",BLD_NM:t.BLD_NM||"",BUN_CL:t.BUN_CL||"",BUN_NO:t.BUN_NO||"",HO_NM:t.HO_NM||"",APT_DONG_NO:t.APT_DONG_NO||"",APT_HO_CNT:t.APT_HO_CNT||"",ADDR:t.ADDR||"",ADDR_DTL:t.ADDR_DTL||""};console.log("[AS API]  :",l);const d=await(await fetch(`${bs}/customer/work/modAsPdaReceipt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)})).json();return console.log("[AS API] :",d),Array.isArray(d)||d.code==="SUCCESS"||d.success===!0?{code:"SUCCESS",message:"AS ."}:{code:"ERROR",message:d.message||d.msg||"AS ."}}catch(e){return console.error("[AS API] :",e),{code:"ERROR",message:e.message||"AS   ."}}},Nv=async(t,e)=>{if(console.log("[Hotbill API] getHotbillSummary :",{custId:t,rcptId:e}),$n())return await new Promise(n=>setTimeout(n,500)),{details:[{BILL_SEQ_NO:"202412001",PROD_GRP:"DTV",SO_ID:"01",CHG_NM:"DTV ",BILL_AMT:15e3,PYM_AMT:15e3,UPYM_AMT:0},{BILL_SEQ_NO:"202412002",PROD_GRP:"ISP",SO_ID:"01",CHG_NM:" ",BILL_AMT:25e3,PYM_AMT:0,UPYM_AMT:25e3}],refund:{TOT_RFND_AMT:5e3,RFND_RSN:" "},totalAmount:4e4,paidAmount:15e3,unpaidAmount:25e3,refundAmount:5e3};try{const n=await fetch(`${bs}/hotbill/summary`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CUST_ID:t,RCPT_ID:e})});if(!n.ok)throw console.error("[Hotbill API] HTTP :",n.status),new Error(`Hot Bill API   . (HTTP ${n.status})`);const r=n.headers.get("content-type");if(!r||!r.includes("application/json"))throw console.error("[Hotbill API]   :",r),new Error("Hot Bill API   .");const i=await n.json();return console.log("[Hotbill API] getHotbillSummary :",i),{details:Array.isArray(i.details)?i.details.map(l=>({...l,BILL_AMT:Number(l.BILL_AMT)||0,PYM_AMT:Number(l.PYM_AMT)||0,UPYM_AMT:Number(l.UPYM_AMT)||0})):[],refund:i.refund?{...i.refund,TOT_RFND_AMT:Number(i.refund.TOT_RFND_AMT)||0}:null,totalAmount:Number(i.totalAmount)||0,paidAmount:Number(i.paidAmount)||0,unpaidAmount:Number(i.unpaidAmount)||0,refundAmount:Number(i.refundAmount)||0}}catch(n){throw console.error("[Hotbill API] getHotbillSummary :",n),n}},j4=async t=>{if(console.log("[Hotbill API] runHotbillSimulation :",t),$n())return await new Promise(e=>setTimeout(e,300)),{code:"SUCCESS",RCPT_ID:t.RCPT_ID||"1044931550",message:"OK (Demo)",simulatedCount:1};try{const e={CUST_ID:t.CUST_ID,CTRT_ID:t.CTRT_ID,SO_ID:t.SO_ID,HOPE_DT:t.HOPE_DT,CLC_WRK_CL:t.CLC_WRK_CL||"2",RCPT_ID:t.RCPT_ID||"",IS_NEW:t.IS_NEW||"false",PNTY_EXMP_YN:t.PNTY_EXMP_YN||"N"},n=await fetch(`${bs}/hotbill/simulate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!n.ok)throw console.error("[Hotbill API] HTTP :",n.status),new Error(`Hot Bill  API  (HTTP ${n.status})`);const r=await n.json();return console.log("[Hotbill API] runHotbillSimulation :",r),{code:r.code||"ERROR",RCPT_ID:r.RCPT_ID||"",message:r.message||"",simulatedCount:r.simulatedCount||0}}catch(e){throw console.error("[Hotbill API] runHotbillSimulation :",e),e}},Sv=async(t,e,n,r,i)=>{if(console.log("[Hotbill API] getHotbillByContract :",{billSeqNo:t,prodGrp:e,soId:n,clcWrkCl:r,rcptId:i}),$n())return await new Promise(l=>setTimeout(l,200)),[{BILL_SEQ_NO:t,PROD_GRP:e,SO_ID:n,CTRT_ID:"0000000001",CLC_WRK_NO:"20241201001",BILL_AMT:2e4}];try{const l=await fetch(`${bs}/hotbill/byContract`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({BILL_SEQ_NO:t,PROD_GRP:e,SO_ID:n,CLC_WRK_CL:r,RCPT_ID:i})});if(!l.ok)throw console.error("[Hotbill API] HTTP :",l.status),new Error(`Hot Bill   API  (HTTP ${l.status})`);const c=await l.json();return console.log("[Hotbill API] getHotbillByContract :",c),Array.isArray(c)?c.map(d=>({BILL_SEQ_NO:d.BILL_SEQ_NO||"",PROD_GRP:d.PROD_GRP||"",SO_ID:d.SO_ID||"",CTRT_ID:d.CTRT_ID||"",CLC_WRK_NO:d.CLC_WRK_NO||"",BILL_AMT:Number(d.BILL_AMT)||0})):[]}catch(l){throw console.error("[Hotbill API] getHotbillByContract :",l),l}},vv=async(t,e,n)=>{if(console.log("[Hotbill API] getHotbillByCharge :",{billSeqNo:t,clcWrkNo:e,ctrtId:n}),$n())return await new Promise(r=>setTimeout(r,300)),[{CLC_WRK_NO:e,BILL_SEQ_NO:t,CUST_ID:"0000000001",CTRT_ID:n,SORT_SEQ:"1",CHRG_ITEM_NM:"",REQ_YN:"Y",BILL_AMT:15e3},{CLC_WRK_NO:e,BILL_SEQ_NO:t,CUST_ID:"0000000001",CTRT_ID:n,SORT_SEQ:"2",CHRG_ITEM_NM:"",REQ_YN:"N",BILL_AMT:5e3}];try{const i=await(await fetch(`${bs}/hotbill/byCharge`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({BILL_SEQ_NO:t,CLC_WRK_NO:e,CTRT_ID:n})})).json();return console.log("[Hotbill API] getHotbillByCharge :",i),Array.isArray(i)?i.map(l=>({CLC_WRK_NO:l.CLC_WRK_NO||"",BILL_SEQ_NO:l.BILL_SEQ_NO||"",CUST_ID:l.CUST_ID||"",CTRT_ID:l.CTRT_ID||"",SORT_SEQ:l.SORT_SEQ||"0",CHRG_ITEM_NM:l.CHRG_ITEM_NM||"",REQ_YN:l.REQ_YN||"N",BILL_AMT:Number(l.BILL_AMT)||0})):[]}catch(r){throw console.error("[Hotbill API] getHotbillByCharge :",r),r}},I4=async t=>{if(console.log("[SMS API] sendVisitSms :",t),$n())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"  . (Demo)"};try{const e={SMS_EML_TYPE:t.SMS_EML_TYPE,SO_ID:t.SO_ID,USER_SMS:t.USER_SMS.replace(/-/g,"").replace(/\s/g,""),SEND_SMS:t.SEND_SMS.replace(/-/g,"").replace(/\s/g,""),USER_ID:t.USER_ID,USER_NAME:t.USER_NAME,MAP01:t.MAP01,KKO_MSG_ID:t.KKO_MSG_ID,REG_UID:t.REG_UID,TRANS_YN:t.TRANS_YN||"N",SMS_EML_CL:t.SMS_EML_CL||"20"},n=await fetch(`${bs}/customer/sigtrans/saveENSSendHist`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!n.ok)throw console.error("[SMS API] HTTP :",n.status),new Error(`  API  (HTTP ${n.status})`);const r=await n.json();return console.log("[SMS API] sendVisitSms :",r),r.MSGCODE==="SUCCESS"||r.code==="SUCCESS"?{code:"SUCCESS",message:r.MESSAGE||r.message||"  ."}:{code:r.MSGCODE||r.code||"ERROR",message:r.MESSAGE||r.message||"  ."}}catch(e){throw console.error("[SMS API] sendVisitSms :",e),e}},c5=async t=>{console.log("[ API] getMmtSusInfo :",t);try{const e=await fetch(`${bs}/customer/etc/getMmtSusInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw console.error("[ API] HTTP :",e.status),new Error(`  API  (HTTP ${e.status})`);const n=await e.json();if(console.log("[ API] getMmtSusInfo :",n),n&&(n.SUS_HOPE_DD||n.output)){const r=n.output?n.output[0]:n;return{SUS_HOPE_DD:r.SUS_HOPE_DD||"",MMT_SUS_HOPE_DD:r.MMT_SUS_HOPE_DD||"",VALID_SUS_DAYS:r.VALID_SUS_DAYS||"",MMT_SUS_CD:r.MMT_SUS_CD||"",WRK_DTL_TCD:r.WRK_DTL_TCD||""}}return null}catch(e){throw console.error("[ API] getMmtSusInfo :",e),e}},d5=async t=>{console.log("[ API] modMmtSusInfo :",t);try{const e=await fetch(`${bs}/customer/etc/modMmtSusInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw console.error("[ API] HTTP :",e.status),new Error(`  API  (HTTP ${e.status})`);const n=await e.json();return console.log("[ API] modMmtSusInfo :",n),n.MSGCODE==="SUCCESS"||n.code==="SUCCESS"?{code:"SUCCESS",message:n.MESSAGE||n.message||" ."}:{code:n.MSGCODE||n.code||"ERROR",message:n.MESSAGE||n.message||"  ."}}catch(e){throw console.error("[ API] modMmtSusInfo :",e),e}},u5=async(t,e)=>{console.log("[Contract API] getCtrtDetailInfo:",t,e);try{const n={CTRT_ID:t};e&&(n.CUST_ID=e);const r=await fetch(`${bs}/customer/contract/getCtrtDetailInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(!r.ok)return console.error("[Contract API] getCtrtDetailInfo HTTP error:",r.status),null;const i=await r.json();return console.log("[Contract API] getCtrtDetailInfo response:",i),i}catch(n){return console.error("[Contract API] getCtrtDetailInfo error:",n),null}},h5=async t=>{console.log("[Work API] getAfterProcInfo:",t);try{const e=await fetch(`${bs}/customer/work/getAfterProcInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({WRK_DRCTN_ID:t})});if(!e.ok)return console.error("[Work API] getAfterProcInfo HTTP error:",e.status),null;const n=await e.json();return console.log("[Work API] getAfterProcInfo response:",n),n}catch(e){return console.error("[Work API] getAfterProcInfo error:",e),null}},O4=async(t,e)=>{console.log("[Alarm API] getAllAlarmInfo:",{custId:t,wrkDrctnId:e});try{const n=await fetch(`${bs}/customer/alarm/getAllAlarmInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CUST_ID:t,WRK_DRCTN_ID:e||""})});if(!n.ok)return console.error("[Alarm API] HTTP error:",n.status),{};const r=await n.json();return console.log("[Alarm API] getAllAlarmInfo response:",r),r}catch(n){return console.error("[Alarm API] getAllAlarmInfo error:",n),{}}},pg=async t=>{if(console.log("[ API] getMoveWorkInfo:",t),$n())return await new Promise(e=>setTimeout(e,500)),{MVM_TP:"01",MVM_TP_NM:"",WRK_ID:t.WRK_ID,PROD_NM:"DTV ",HOPE_DTTM:"2024-12-29 10:00",WRK_STAT_NM:"",ADDR_ORD:"   123",WRK_CD:t.WRK_CD};try{const e=await fetch(`${bs}/customer/work/getMoveWorkInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),null;const n=await e.json();return console.log("[ API] getMoveWorkInfo response:",n),n.data?n.data:Array.isArray(n)&&n.length>0?n[0]:n}catch(e){return console.error("[ API] getMoveWorkInfo error:",e),null}},f5=async t=>{if(console.log("[ API] getMVRemoveEqtInfo:",t),$n())return await new Promise(e=>setTimeout(e,500)),[{CHK:1,CTRT_ID:"CT123456",EQT_CL_NM:"DTV ",LENT_YN_NM:"",EQT_USE_STAT_CD:"",NOTRECEV:"",EQT_LOC_TP_CD:"",EQT_STAT_CD:"",WRKR_NM:"",EQT_SERNO:"STB123456789",MAC_ADDRESS:"AA:BB:CC:DD:EE:FF",ITEM_NM:"UHD ",WRK_CD:"08"},{CHK:1,CTRT_ID:"CT123456",EQT_CL_NM:"",LENT_YN_NM:"",EQT_USE_STAT_CD:"",NOTRECEV:"",EQT_LOC_TP_CD:"",EQT_STAT_CD:"",WRKR_NM:"",EQT_SERNO:"MDM987654321",MAC_ADDRESS:"11:22:33:44:55:66",ITEM_NM:" ",WRK_CD:"08"}];try{const e=await fetch(`${bs}/customer/equipment/getMVRemoveEqtInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),[];const n=await e.json();return console.log("[ API] getMVRemoveEqtInfo response:",n),n.data?Array.isArray(n.data)?n.data:[n.data]:Array.isArray(n)?n:[]}catch(e){return console.error("[ API] getMVRemoveEqtInfo error:",e),[]}},m5=async t=>{if(console.log("[ API] getEqtSoMoveInfo:",t),$n())return await new Promise(e=>setTimeout(e,500)),[];try{const e=await fetch(`${bs}/customer/work/getEqtSoMoveInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),[];const n=await e.json();return console.log("[ API] getEqtSoMoveInfo response:",n),n.data?Array.isArray(n.data)?n.data:[n.data]:Array.isArray(n)?n:[]}catch(e){return console.error("[ API] getEqtSoMoveInfo error:",e),[]}},M4=async t=>{if(console.log("[ API] excuteSoMoveEqtChg:",t),$n())return await new Promise(e=>setTimeout(e,1e3)),{MSGCODE:"SUCCESS",MESSAGE:" ."};try{const e=await fetch(`${bs}/customer/work/excuteSoMoveEqtChg`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),null;const n=await e.json();return console.log("[ API] excuteSoMoveEqtChg response:",n),n.data?n.data:n}catch(e){return console.error("[ API] excuteSoMoveEqtChg error:",e),null}},L4=async t=>{if(console.log("[ API] custEqtInfoDel:",t),$n())return await new Promise(e=>setTimeout(e,500)),{MSGCODE:"SUCCESS",MESSAGE:" ."};try{const e=await fetch(`${bs}/customer/work/custEqtInfoDel`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),null;const n=await e.json();return console.log("[ API] custEqtInfoDel response:",n),n.data?n.data:n}catch(e){return console.error("[ API] custEqtInfoDel error:",e),null}},mc=async()=>{console.log("[Work API] getLghvProdMap called");try{const t=await fetch(`${bs}/customer/work/getLghvProdMap`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(!t.ok)return console.error("[Work API] getLghvProdMap HTTP error:",t.status),[];const e=await t.json();return console.log("[Work API] getLghvProdMap response:",e),Array.isArray(e)?e:e.data&&Array.isArray(e.data)?e.data:[]}catch(t){return console.error("[Work API] getLghvProdMap error:",t),[]}},Jp=async t=>{console.log("[Work API] getOttSale called:",t);try{const e=await fetch(`${bs}/customer/work/getOttSale`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] getOttSale HTTP error:",e.status),null;const n=await e.json();return console.log("[Work API] getOttSale response:",n),Array.isArray(n)&&n.length>0?n[0]:n.data&&Array.isArray(n.data)&&n.data.length>0?n.data[0]:n.output&&Array.isArray(n.output)&&n.output.length>0?n.output[0]:n}catch(e){return console.error("[Work API] getOttSale error:",e),null}},w4=async t=>{console.log("[Work API] saveOttSale called:",t);try{const e=await fetch(`${bs}/customer/work/saveOttSale`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] saveOttSale HTTP error:",e.status),{code:"ERROR",message:`HTTP ${e.status}`};const n=await e.json();return console.log("[Work API] saveOttSale response:",n),{code:n.code||n.CODE||"SUCCESS",message:n.message||n.MESSAGE||""}}catch(e){return console.error("[Work API] saveOttSale error:",e),{code:"ERROR",message:e.message||"Unknown error"}}},P4=async t=>{console.log("[Work API] getOttSerno called:",t);try{const e=await fetch(`${bs}/customer/work/getOttSerno`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] getOttSerno HTTP error:",e.status),[];const n=await e.json();return console.log("[Work API] getOttSerno response:",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:n.output&&Array.isArray(n.output)?n.output:[]}catch(e){return console.error("[Work API] getOttSerno error:",e),[]}},A4=async t=>{console.log("[Work API] getOttType called:",t);try{const e=await fetch(`${bs}/customer/work/getOttType`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] getOttType HTTP error:",e.status),null;const n=await e.json();return console.log("[Work API] getOttType response:",n),Array.isArray(n)&&n.length>0?n[0]:n.data&&Array.isArray(n.data)&&n.data.length>0?n.data[0]:n.output&&Array.isArray(n.output)&&n.output.length>0?n.output[0]:n}catch(e){return console.error("[Work API] getOttType error:",e),null}},Xm=async t=>{console.log("[Common Code API] getCodeDetail params:",t);try{const e=await fetch(`${bs}/system/common/getCodeDetail`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Common Code API] getCodeDetail HTTP error:",e.status),[];const n=await e.json();return console.log("[Common Code API] getCodeDetail response:",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:[]}catch(e){return console.error("[Common Code API] getCodeDetail error:",e),[]}},k4=async t=>{console.log("[getEqtMasterInfo] API :",t);try{const n=await(await sr(`${bs}/customer/equipment/getEqtMasterInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:n.output1&&Array.isArray(n.output1)?n.output1:n}catch(e){throw console.error("   :",e),e}},Dv=async t=>{console.log("[getOutEquipmentTargetList] API :",t);try{const n=await(await sr(`${bs}/customer/equipment/getOutEquipmentTargetList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("    :",n),n}catch(e){throw console.error("    :",e),e instanceof Fs?e:new Fs("    .")}},Rv=async t=>{const e={...t,RETURN_TP:t.RETURN_TP||"2",RETURN_STAT:t.RETURN_STAT||"2"};console.log("[getEquipmentReturnRequestListAll] API :",e);try{const r=await(await sr(`${bs}/customer/equipment/getEquipmentReturnRequestList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).json();return console.log("   :",r),Array.isArray(r)?r:r.output1||r.data||[]}catch(n){throw console.error("   :",n),n instanceof Fs?n:new Fs("   .")}},U4=async(t,e)=>{console.log("[delEquipmentReturnRequest]  :",t);try{if(!t.WRKR_ID||!t.CRR_ID)throw new Fs("  .");if(!t.equipmentList||t.equipmentList.length===0)throw new Fs("  .");const n=t.equipmentList.length;let r=0,i=[],l=0;for(const c of t.equipmentList){l++,e==null||e(l,n,c.EQT_SERNO||c.EQT_NO);const d={EQT_NO:c.EQT_NO,REQ_DT:c.REQ_DT||"",RETURN_TP:c.RETURN_TP||"2",EQT_USE_ARR_YN:c.EQT_USE_ARR_YN==="A"?"A":"Y",WRKR_ID:t.WRKR_ID,CRR_ID:t.CRR_ID,SO_ID:t.SO_ID||""};console.log("[delEquipmentReturnRequest]  :",c.EQT_SERNO,d);try{const f=await(await sr(`${bs}/customer/equipment/delEquipmentReturnRequest`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(d)})).json();console.log("[delEquipmentReturnRequest]  :",c.EQT_SERNO,f),f&&(f.MSGCODE==="0"||f.MSGCODE==="SUCCESS"||f.success===!0)?r++:i.push(c.EQT_SERNO||c.EQT_NO)}catch(u){console.error("[delEquipmentReturnRequest]  :",c.EQT_SERNO,u),i.push(c.EQT_SERNO||c.EQT_NO)}}if(console.log("[delEquipmentReturnRequest] : ",r,"/ ",i.length),r>0)return{success:!0,message:i.length>0?`${r}  , ${i.length} `:`${r}  .`,data:{successCount:r,failedItems:i}};throw new Fs(` : ${i.join(", ")}`)}catch(n){throw console.error("[delEquipmentReturnRequest]  :",n),n instanceof Fs?n:new Fs(n.message||"  .")}},Bm=async t=>{console.log("[getWrkrHaveEqtListAll] API :",t);try{const n=await(await sr(`${bs}/customer/equipment/getWrkrHaveEqtList_All`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",n),n?n.data&&Array.isArray(n.data)?n.data:Array.isArray(n)?n:n.output1||[]:[]}catch(e){throw console.error("   :",e),e instanceof Fs?e:new Fs("   .")}},Tv=async t=>{console.log("[getEquipmentChkStndByAAll] API :",t);try{const n=await(await sr(`${bs}/customer/equipment/getEquipmentChkStndByA_All`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",n),n?n.data&&Array.isArray(n.data)?n.data:Array.isArray(n)?n:n.output1||[]:[]}catch(e){throw console.error("   :",e),e instanceof Fs?e:new Fs("   .")}},g5=async t=>{console.log("[getEquipmentTypeList] API call:",t);try{const n=await(await sr(`${bs}/customer/equipment/getEquipmentTypeList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[getEquipmentTypeList] Result:",n),n?n.data&&Array.isArray(n.data)?n.data:Array.isArray(n)?n:n.output1||[]:[]}catch(e){return console.error("[getEquipmentTypeList] Failed:",e),[]}},Dp="dlive_transferred_equipment",W4=48,B4=t=>{try{const n=pb().filter(i=>i.EQT_SERNO!==t.EQT_SERNO),r={...t,transferredAt:Date.now(),isTransferred:!0};n.push(r),localStorage.setItem(Dp,JSON.stringify(n)),console.log("[TransferredEquipment] Saved:",t.EQT_SERNO)}catch(e){console.error("[TransferredEquipment] Save error:",e)}},pb=()=>{try{const t=localStorage.getItem(Dp);if(!t)return[];const e=JSON.parse(t),n=Date.now(),r=W4*60*60*1e3,i=e.filter(l=>n-l.transferredAt<r);return i.length!==e.length&&localStorage.setItem(Dp,JSON.stringify(i)),i}catch(t){return console.error("[TransferredEquipment] Get error:",t),[]}},F4=async t=>{try{const e=await fetch(`${bs}/customer/sigtrans/getLghvSendHist`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});return e.ok?(await e.json()).output||[]:(console.error("[Signal API] getLghvSendHist HTTP error:",e.status),[])}catch(e){return console.error("[Signal API] getLghvSendHist error:",e),[]}},K4=t=>pb().filter(n=>n.TO_WRKR_ID===t),Q4=t=>{try{const n=pb().filter(r=>r.EQT_SERNO!==t);localStorage.setItem(Dp,JSON.stringify(n)),console.log("[TransferredEquipment] Removed:",t)}catch(e){console.error("[TransferredEquipment] Remove error:",e)}},G4=(t,e)=>{const n=K4(e);if(n.length===0)return{merged:t,transferredCount:0};const r=new Set(t.map(l=>l.EQT_SERNO)),i=[];return n.forEach(l=>{r.has(l.EQT_SERNO)?Q4(l.EQT_SERNO):i.push({EQT_NO:l.EQT_NO,EQT_SERNO:l.EQT_SERNO,ITEM_NM:l.ITEM_NM,ITEM_MID_NM:l.ITEM_MID_NM||"",ITEM_MAX_NM:l.ITEM_MAX_NM||"",EQT_CL_NM:l.EQT_CL_NM||"",SO_ID:l.SO_ID,SO_NM:l.SO_NM||"",WRKR_ID:l.TO_WRKR_ID,FROM_WRKR_ID:l.FROM_WRKR_ID,FROM_WRKR_NM:l.FROM_WRKR_NM||"",isTransferred:!0,transferredAt:l.transferredAt})}),console.log("[TransferredEquipment] Merging:",i.length,"items not in API"),{merged:[...t,...i],transferredCount:i.length}},Y4=async t=>{try{const e=await fetch(`${bs}/customer/sigtrans/getLghvSvcRslt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({JOB_ID:t})});return e.ok?(await e.json()).output||[]:(console.error("[Signal API] getLghvSvcRslt HTTP error:",e.status),[])}catch(e){return console.error("[Signal API] getLghvSvcRslt error:",e),[]}},V4=async t=>{try{const e=await fetch(`${bs}/customer/sigtrans/getSendHistory`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});return e.ok?((await e.json()).output||[]).map(i=>{const l={};for(const c of Object.keys(i))l[c.toUpperCase()]=i[c];return l}):[]}catch(e){return console.error("[Signal API] getSendHistory error:",e),[]}},$4=async t=>{const e=n=>n.map(r=>{const i={};for(const l of Object.keys(r))i[l.toUpperCase()]=r[l];return i});try{const n=await fetch(`${bs}/customer/sigtrans/getSvcRsltAndDtlRslt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({IF_DTL_ID:t})});if(!n.ok)return{svcRslt:[],svcDtlRslt:[]};const r=await n.json(),i=r.output1||r.ds_svc_rest||r.ds_svc_rslt||[],l=r.output2||r.ds_svc_dtl_rslt||r.ds_svc_dtl||[];return{svcRslt:e(i),svcDtlRslt:e(l)}}catch(n){return console.error("[Signal API] getSvcRsltAndDtlRslt error:",n),{svcRslt:[],svcDtlRslt:[]}}},H4=()=>{try{const t=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(t){const e=JSON.parse(t);return e.userId||e.USR_ID||e.LOGIN_ID||"SYSTEM"}}catch{}return"SYSTEM"},Zp=async t=>{try{const e=await fetch(`${bs}/customer/common/customercommon/getConditionalCustList2`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,SERCH_GB:"3",LOGIN_ID:H4()})});if(!e.ok)return[];const n=await e.json();return n.output||n.data||[]}catch(e){return console.error("[Customer Search] error:",e),[]}},z4=async t=>Zp({TEL_NO:t}),q4=async t=>Zp({CUST_ID:t}),X4=async t=>Zp({CTRT_ID:t}),J4=async t=>Zp({EQT_SERNO:t}),Z4=async t=>{try{const e=await fetch(`${bs}/customer/contract/getContractInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CUST_ID:t})});if(!e.ok)return[];const n=await e.json();return Array.isArray(n)?n:n.output||n.data||[]}catch(e){return console.error("[Customer Search] getContractList error:",e),[]}};var vu=kT();const Zs=({value:t,onValueChange:e,options:n=[],placeholder:r="",className:i="",required:l=!1,disabled:c=!1})=>{const[d,u]=_.useState(!1),[f,m]=_.useState(!1);_.useEffect(()=>{m(!0)},[]);const p=n==null?void 0:n.find(g=>g.value===t);_.useEffect(()=>{const g=N=>{N.key==="Escape"&&u(!1)};if(d)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[d]);const y=g=>{e(g),u(!1)};return s.jsxs("div",{className:`relative ${i}`,style:{zIndex:"auto"},children:[s.jsxs("button",{type:"button",onClick:()=>!c&&u(!d),disabled:c,className:`
          w-full p-3 text-left border border-gray-300 rounded-lg
          transition-colors duration-200 flex items-center justify-between
          ${c?"bg-gray-100 cursor-not-allowed opacity-60":"bg-white hover:border-gray-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"}
          ${d&&!c?"ring-2 ring-cyan-500 border-cyan-500":""}
        `,"aria-expanded":d,"aria-haspopup":"listbox",required:l,children:[s.jsx("span",{className:`text-base ${p?"text-gray-900":"text-gray-500"}`,children:p?p.label:r}),s.jsx(or,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${d?"rotate-180":""}`})]}),d&&f&&typeof window<"u"&&vu.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50",style:{zIndex:99999},onClick:()=>u(!1)}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-2xl",style:{zIndex:1e5,maxHeight:"60vh",display:"flex",flexDirection:"column"},children:[s.jsx("div",{className:"flex justify-center py-3 bg-white rounded-t-xl",style:{flexShrink:0},children:s.jsx("div",{className:"w-8 h-1 bg-gray-300 rounded-full"})}),s.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:0,WebkitOverflowScrolling:"touch"},children:s.jsx("div",{className:"py-1",children:(n==null?void 0:n.length)>0?n.map(g=>s.jsxs("button",{type:"button",onClick:()=>y(g.value),className:`
                      w-full px-4 py-3 text-left text-base hover:bg-gray-50
                      transition-colors duration-150 flex items-center justify-between
                      ${t===g.value?"bg-cyan-50 text-cyan-700":"text-gray-900"}
                    `,role:"option","aria-selected":t===g.value,children:[s.jsx("span",{className:"font-medium",children:g.label}),t===g.value&&s.jsx(dc,{className:"w-5 h-5 text-cyan-600"})]},g.value)):s.jsx("div",{className:"px-4 py-3 text-center text-gray-500 text-sm",children:" "})})}),s.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",style:{flexShrink:0,paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:s.jsx("button",{type:"button",onClick:()=>u(!1),className:"w-full py-3 text-center text-gray-600 font-medium",children:""})})]})]}),document.body)]})},e3=(t,e=10,n=500)=>{if(!t||typeof t!="string")return{valid:!1,message:" ."};const r=t.trim();return r.length<e?{valid:!1,message:` ${e}  . ( ${r.length})`}:r.length>n?{valid:!1,message:` ${n}  . ( ${r.length})`}:{valid:!0}},fn={INSTALLATION:"01",REMOVAL:"02",AS:"03",SUSPENSION:"04",PRODUCT_CHANGE:"05",HOME_RELOCATION:"06",RELOCATION_INSTALL:"07",RELOCATION_REMOVAL:"08",ADDITIONAL_PRODUCT:"09",TEMP_REMOVAL:"0430",TEMP_REMOVAL_RESTORE:"0440"},Jo={INSTALL_SCHEDULED:"10",ACTIVE:"20",SUSPENDED:"30",SUSPENDED_SPECIFIC:"37",TERMINATED:"90"},Ev={RECEIVED:"1",ASSIGNED:"2"},A0=t=>t===fn.INSTALLATION,k0=t=>t===fn.AS,Fm=t=>t===fn.REMOVAL,Km=t=>t===fn.RELOCATION_INSTALL||t===fn.RELOCATION_REMOVAL,ip=t=>t===fn.PRODUCT_CHANGE,Z1=t=>t===fn.SUSPENSION,t3=(t,e)=>t===fn.SUSPENSION&&e===fn.TEMP_REMOVAL,x5=t3,s3=(t,e)=>t===fn.SUSPENSION&&e===fn.TEMP_REMOVAL_RESTORE,p5=s3,n3=(t,e)=>{if(!t||!e)return!1;switch(t){case fn.INSTALLATION:return e===Jo.INSTALL_SCHEDULED;case fn.REMOVAL:return e===Jo.ACTIVE||e===Jo.SUSPENDED||e===Jo.SUSPENDED_SPECIFIC;case fn.AS:return e!==Jo.TERMINATED;case fn.TEMP_REMOVAL:return e===Jo.ACTIVE;case fn.TEMP_REMOVAL_RESTORE:return e===Jo.SUSPENDED||e===Jo.SUSPENDED_SPECIFIC;case fn.HOME_RELOCATION:case fn.PRODUCT_CHANGE:case fn.RELOCATION_INSTALL:case fn.RELOCATION_REMOVAL:return e===Jo.ACTIVE;default:return e!==Jo.TERMINATED}},r3=(t,e)=>{if(n3(t,e))return{valid:!0};let r="       .";switch(t){case fn.INSTALLATION:r="    .";break;case fn.REMOVAL:r="      .";break;case fn.TEMP_REMOVAL:r="   .";break;case fn.TEMP_REMOVAL_RESTORE:r="   .";break;case fn.AS:r="A/S    .";break}return{valid:!1,message:r}},_b=t=>t?t===Ev.RECEIVED||t===Ev.ASSIGNED:!1,i3=(t,e,n)=>{const r=[];return(!e||e.trim()==="")&&r.push("   ."),t.WRK_STAT_CD&&(_b(t.WRK_STAT_CD)||r.push("       .")),e==="099Z"&&(!n||n.trim().length<10)&&r.push("      10   ."),t.WRK_CD,fn.RELOCATION_INSTALL,{valid:r.length===0,errors:r}},a3=t=>{switch(t){case fn.INSTALLATION:return" ";case fn.AS:return"A/S ";case fn.REMOVAL:return" ";case fn.RELOCATION_INSTALL:return" ";case fn.RELOCATION_REMOVAL:return" ";case fn.PRODUCT_CHANGE:return" ";case fn.SUSPENSION:case fn.TEMP_REMOVAL:return" ";case fn.TEMP_REMOVAL_RESTORE:return" ";case fn.HOME_RELOCATION:return" ";case fn.ADDITIONAL_PRODUCT:return" ";default:return" "}},jv=t=>{switch(t){case fn.INSTALLATION:return"  .";case fn.AS:return"A/S .";case fn.REMOVAL:return" .";case fn.RELOCATION_INSTALL:return" .";case fn.RELOCATION_REMOVAL:return" .";case fn.PRODUCT_CHANGE:return" .";case fn.SUSPENSION:case fn.TEMP_REMOVAL:return" .";case fn.TEMP_REMOVAL_RESTORE:return" .";case fn.HOME_RELOCATION:return" .";case fn.ADDITIONAL_PRODUCT:return" .";default:return" ."}},Lh=t=>t?["F","FG","Z","ZG"].includes(t):!1,Cb=({isOpen:t,onClose:e,onConfirm:n,workOrder:r,userId:i,showToast:l})=>{var se;const[c,d]=_.useState("[]"),[u,f]=_.useState(new Date().toISOString().slice(0,10)),m=oe=>{if(!oe)return"";const T=oe.replace(/\D/g,"");return T.length!==10?oe:`${T.slice(0,3)}-${T.slice(3,6)}-${T.slice(6)}`},[p,y]=_.useState(""),[g,N]=_.useState({}),[C,v]=_.useState(!1),[R,A]=_.useState([]),[M,L]=_.useState("X"),[k,V]=_.useState("N"),[G,W]=_.useState(!1),[j,S]=_.useState(!1),P=["600","700","701","710","800","802","803","804"];_.useEffect(()=>{(async()=>{var T;if(console.log("[WorkCancelModal] useEffect  - isOpen:",t,"WRK_STAT_CD:",r.WRK_STAT_CD,"workOrder.id:",r.id),!!t){if(r.WRK_STAT_CD&&!_b(r.WRK_STAT_CD)){l&&l("       .","error"),e();return}if(!r.id){console.log("[OST] workOrder.id  - ");return}W(!0);try{console.log("[OST] getWorkCancelInfo :",r.id);const I=await Xp({WRK_ID:r.id,RCPT_ID:r.RCPT_ID,CUST_ID:(T=r.customer)==null?void 0:T.id});if(I){console.log("[OST] :",I),L(I.OST_WORKABLE_STAT||"X"),V(I.HOTBILL_YN||"N");const U=I.OST_WORKABLE_STAT,Q=r.WRK_CD;if(U==="0"||U==="3"||U==="4"){let H="";Q==="01"?H="    .":Q==="02"?H="    .":H="     .",l&&l(H,"error"),e();return}}}catch(I){console.error("[OST] :",I),L("X")}finally{W(!1)}}})()},[t,r.id,r.WRK_STAT_CD,r.RCPT_ID,(se=r.customer)==null?void 0:se.id,r.WRK_CD,l,e]),_.useEffect(()=>{t&&F()},[t]);const F=async()=>{try{console.log(" [] CMWO200   ");const oe=await ka("CMWO200");console.log(" [] API   :",oe[0]),console.log(" []   :",oe.length);const T=oe.filter(I=>I.code!=="[]").map(I=>({value:I.code,label:`[${I.code}] ${I.name}`,refCode:I.ref_code||"",refCode2:I.ref_code2||"",refCode12:I.ref_code12||""}));T.unshift({value:"[]",label:"( )",refCode:"",refCode2:"",refCode12:""}),A(T),console.log("[]   :",T.length,""),console.log(" []  :",T.slice(0,3))}catch(oe){console.error("[]   :",oe),A([{value:"[]",label:"( )",refCode:"",refCode2:"",refCode12:""}])}};_.useEffect(()=>{const oe={};if(c!=="[]"&&c.endsWith("Z")){const T=e3(p,10,200);T.valid||(oe.procCt=T.message||"  10  .")}N(oe)},[c,p]);const ee=oe=>!oe||oe==="05"||oe==="06"||oe==="07"||oe==="09"?"01":oe==="08"?"02":oe==="03"?"03":oe,J=_.useMemo(()=>{const oe=r.WRK_CD,T=r.asReasonCode,I=r.SO_ID,U=ee(oe),Q=U+"3";console.log(""),console.log("[ ]  "),console.log(""),console.log(" WRK_CD:",oe," refCode:",U," refCodeWithSuffix:",Q),console.log(" WRK_RCPT_CL:",T),console.log(" SO_ID:",I),console.log("   :",R.length);let H=R.filter(q=>q.value==="[]"?(console.log("    "),!0):q.refCode!==Q?(console.log(`  [${q.value}] ${q.label}: refCode="${q.refCode}" != "${Q}"`),!1):(console.log(`  [${q.value}] ${q.label}: refCode="${q.refCode}" `),!0));return U==="03"&&(console.log("[AS ] AS    "),console.log("[AS ] WRK_RCPT_CL:",T),T==="JJ"?(console.log("[AS ] CS(JJ) - 033G "),H=H.filter(q=>q.value==="033G")):T==="JH"?(console.log("[AS ] (JH) - 033H "),H=H.filter(q=>q.value==="033H")):(console.log("[AS ]  AS -   "),H=H.filter(q=>{if(q.value==="033G")return console.log(`    [${q.value}] 033G `),!1;if(q.refCode2==="Y"){const ae=P.includes(I||"");if(console.log(`     [${q.value}] refCode2='Y' (), isCallCenter=${ae}`),!ae)return console.log(`    [${q.value}]   `),!1}return q.refCode12==="JH"?(console.log(`    [${q.value}] refCode12='JH' (033H) `),!1):(console.log(`    [${q.value}] `),!0)}))),console.log(""),console.log("[ ]  :",H.length,""),console.log(""),H},[r.WRK_CD,r.asReasonCode,r.SO_ID,R]),$=oe=>{const T=oe.type,I=oe.typeDisplay;return T===aa.Installation||T==="Installation"||T===""||I===""?"01":T===aa.AS||T==="AS"||T==="A/S"||I==="A/S"?"02":T===aa.Move||T==="Move"||T===""||I===""?"03":T===aa.Change||T==="Change"||T===""||I===""?"04":"05"},Y=async()=>{S(!1),await K()},K=async()=>{var U;v(!0);const oe=r.WRK_CD||"";if(console.log("[] OST_WORKABLE_STAT:",M,"WRK_CD:",oe),(M==="1"||M==="2")&&(oe==="01"||oe==="02")){console.log("[] OST   ");try{const Q=await a4({RCPT_ID:r.RCPT_ID||"",CUST_ID:((U=r.customer)==null?void 0:U.id)||"",AGENT_FL:"1"});if(Q){const H=(Q.AGENT_FL||"")+(Q.BUSI_TYPE||"")+(Q.RES_CD||"");if(console.log("[] OST_BUSI:",H),H==="10310BS0000"||H==="10320BS0000"){console.log("[] modOstWorkCancel API ");const q=await l4({RCPT_ID:r.RCPT_ID||"",WRK_CD:oe,UNPROC_RESN_CD:c,WRK_STAT_CD:"3",PROC_CT:p||"",REG_UID:i||""});q.code==="SUCCESS"||q.message==="SUCCESS"?(l&&l(" .","success"),e()):l&&l(q.message||"  .","error"),v(!1);return}}}catch(Q){console.error("[] OST  :",Q),l&&l("OST    .","error"),v(!1);return}}const T=$(r),I={WRK_ID:r.id,WRK_STAT_CD:"3",UNPROC_RESN_CD:c,CALL_CNTN_DATE:u.replace(/-/g,""),CHG_UID:i||"",REG_UID:i||"",PROC_CT:p||"",RCPT_ID:r.RCPT_ID||"",WRK_CD:T};console.log("  :",I),n(I),v(!1)},w=async oe=>{if(oe.preventDefault(),C)return;const T=i3(r,c,p);if(!T.valid){const U=T.errors.join(`
`);l&&l(U,"error",!0);return}if(c!=="[]"&&c.endsWith("Z")&&p.trim().length<10){l&&l("      10  .","error");return}if(!i){l&&l(" () .  .","error");return}if((r.WRK_CD||"")==="07"&&k==="Y"){S(!0);return}await K()};return t?s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-[9999]",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto mx-2 sm:mx-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-4 sm:p-6 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:" "}),s.jsx("button",{onClick:e,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(bi,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-3 text-sm sm:text-base",children:"  "}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:":"}),s.jsx("span",{className:"text-sm font-medium",children:r.customer.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:" :"}),s.jsx("span",{className:"text-sm font-medium",children:r.typeDisplay})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:" ID:"}),s.jsx("span",{className:"text-sm font-mono",children:m(r.id)})]})]})]}),s.jsxs("form",{onSubmit:w,className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:c,onValueChange:d,options:J,placeholder:"",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:u,onChange:oe=>f(oe.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 opacity-0 absolute inset-0 cursor-pointer",required:!0}),s.jsx("div",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-gray-900",children:u||"YYYY-MM-DD"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",c!=="[]"&&c.endsWith("Z")&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:p,onChange:oe=>y(oe.target.value),placeholder:c!=="[]"&&c.endsWith("Z")?"      10  ":"     ",className:`w-full p-3 border rounded-lg focus:ring-cyan-500 focus:border-cyan-500 min-h-[80px] resize-y ${g.procCt?"border-red-500":"border-gray-300"}`,maxLength:200,required:c!=="[]"&&c.endsWith("Z")}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsxs("p",{className:"text-xs text-gray-500",children:[p.length,"/200"]}),c!=="[]"&&c.endsWith("Z")&&s.jsx("p",{className:"text-xs text-blue-600",children:"( 10 )"})]}),g.procCt&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:g.procCt})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:""}),s.jsx("button",{type:"submit",disabled:C||G||c&&c.endsWith("Z")&&p.trim().length<10,className:`flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-semibold transition-all duration-200 ${C||G||c&&c.endsWith("Z")&&p.trim().length<10?"opacity-50 cursor-not-allowed":""}`,children:G?"...":C?"...":"  "})]})]})]}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[10000]",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center",children:s.jsx(ql,{className:"w-6 h-6 text-amber-600"})}),s.jsx("h4",{className:"text-lg font-bold text-gray-800",children:" "})]}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-2 mb-6",children:[s.jsxs("p",{children:["   ",s.jsx("strong",{className:"text-amber-700",children:" "}),"."]}),s.jsx("p",{className:"text-gray-600",children:"    CONA       ."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>S(!1),className:"flex-1 px-4 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:""}),s.jsx("button",{type:"button",onClick:Y,className:"flex-1 px-4 py-2.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors",children:"  "})]})]})})]}):null},l3=t=>{const e=t.toLowerCase();return e.includes("a/s")||e.includes("as")||e.includes("")||e.includes("")?xu:e.includes("")&&(e.includes("")||e.includes(""))?lw:e.includes("")||e.includes("")||e.includes("")?JM:e.includes("")||e.includes("")?wL:e.includes("")||e.includes("")||e.includes("wifi")||e.includes("")?bp:e.includes("tv")||e.includes("")||e.includes("")?jw:e.includes("")||e.includes("phone")?py:e.includes("")||e.includes("")||e.includes("")?zL:e.includes("")||e.includes("")||e.includes("")?lL:e.includes("")||e.includes("")||e.includes("")?uw:fb},o3=t=>{const e=t.toLowerCase();return e.includes("")||e.includes("")&&e.includes("")?"text-emerald-500":e.includes("a/s")||e.includes("as")||e.includes("")||e.includes("")?"text-orange-500":e.includes("")||e.includes("")?"text-red-500":e.includes("")||e.includes("")||e.includes("")?"text-blue-500":e.includes("")||e.includes("")?"text-purple-500":e.includes("")||e.includes("")?"text-gray-500":e.includes("")?"text-blue-500":e.includes("")||e.includes("")||e.includes("wifi")||e.includes("")?"text-cyan-500":e.includes("tv")||e.includes("")||e.includes("")?"text-indigo-500":e.includes("")||e.includes("phone")?"text-pink-500":"text-gray-500"},eC=({label:t,value:e,children:n})=>s.jsx("div",{className:"py-2 sm:py-3 border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 hover:bg-gray-50/50 transition-colors duration-150 rounded-lg px-2 sm:px-3 py-1 sm:py-2",children:[s.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-600 flex items-center",children:t}),s.jsx("dd",{className:"sm:col-span-2 flex items-center text-sm sm:text-base text-gray-900 mt-0.5 sm:mt-0",children:n||e||"-"})]})}),c3=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-orange-800 mb-2 flex items-center",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-orange-500 rounded-full mr-2"}),"A/S  "]}),s.jsxs("div",{className:"space-y-1 text-sm text-orange-700",children:[s.jsx(eC,{label:"A/S ",value:t.WRK_DTL_TCD||"AS "}),s.jsx(eC,{label:" ID",value:t.CTRT_ID}),s.jsx(eC,{label:" ID",value:t.RCPT_ID})]})]}),t.asHistory&&t.asHistory.length>0&&s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})," A/S "]}),s.jsx("div",{className:"space-y-2",children:t.asHistory.map((e,n)=>s.jsxs("div",{className:"border-l-2 border-blue-300 pl-3 py-2 hover:bg-blue-50 transition-colors rounded",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:e.asDate}),s.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-800 rounded-full",children:e.asResult})]}),s.jsx("div",{className:"text-sm text-gray-600",children:e.asReason}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",e.asWorker]})]},n))})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-blue-800 mb-2",children:" A/S      "}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"/    "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"A/S      "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"   "})]})]})]})]}),Rx=({label:t,value:e,children:n})=>s.jsx("div",{className:"py-2 sm:py-3 border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 hover:bg-gray-50/50 transition-colors duration-150 rounded-lg px-2 sm:px-3 py-1 sm:py-2",children:[s.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-600 flex items-center",children:t}),s.jsx("dd",{className:"sm:col-span-2 flex items-center text-sm sm:text-base text-gray-900 mt-0.5 sm:mt-0",children:n||e||"-"})]})}),d3=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-2 flex items-center",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-2"}),"  "]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Rx,{label:"",value:t.productName||" "}),s.jsx(Rx,{label:" ",value:t.installLocation||t.customer.address}),s.jsx(Rx,{label:" ID",value:t.CTRT_ID}),s.jsx(Rx,{label:" ID",value:t.RCPT_ID})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})," "]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"    "})]})]})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-green-800 mb-2",children:"       "}),s.jsxs("ul",{className:"text-xs text-green-700 space-y-1",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     (,  )"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"    ()"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"  "})]})]})]})]}),Tx=({label:t,value:e,children:n})=>s.jsx("div",{className:"py-2 sm:py-3 border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 hover:bg-gray-50/50 transition-colors duration-150 rounded-lg px-2 sm:px-3 py-1 sm:py-2",children:[s.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-600 flex items-center",children:t}),s.jsx("dd",{className:"sm:col-span-2 flex items-center text-sm sm:text-base text-gray-900 mt-0.5 sm:mt-0",children:n||e||"-"})]})}),u3=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-red-800 mb-2 flex items-center",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mr-2"}),"  "]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Tx,{label:"() ",value:t.termReasonCode||" "}),s.jsx(Tx,{label:"",value:t.termFee?`${t.termFee.toLocaleString()}`:""}),s.jsx(Tx,{label:" ID",value:t.CTRT_ID}),s.jsx(Tx,{label:" ID",value:t.RCPT_ID})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"  "]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"   "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"   "})]})]})]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-red-800 mb-2 flex items-center gap-1",children:[s.jsx(ql,{size:14}),"      "]}),s.jsxs("ul",{className:"text-xs text-red-700 space-y-1",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     (,  )"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"()      "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"   "})]})]})]}),t.termFee&&t.termFee>0&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-yellow-800 mb-2 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"  "]}),s.jsxs("p",{className:"text-xs text-yellow-700",children:[" ",s.jsxs("strong",{className:"text-yellow-900",children:[t.termFee.toLocaleString(),""]})," .       ."]})]})]}),Wl=({label:t,value:e,highlight:n})=>s.jsxs("div",{className:`flex py-2 border-b border-gray-100 ${n?"bg-yellow-50":""}`,children:[s.jsx("div",{className:"w-1/3 text-xs sm:text-sm font-medium text-gray-700",children:t}),s.jsx("div",{className:"w-2/3 text-xs sm:text-sm text-gray-900",children:e||"-"})]}),h3=({order:t})=>{const e=x5(t.WRK_CD,t.WRK_DTL_TCD),n=p5(t.WRK_CD,t.WRK_DTL_TCD);return s.jsxs("div",{className:"space-y-4",children:[e&&s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-orange-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-orange-100 divide-y divide-gray-100",children:[s.jsx(Wl,{label:" ",value:t.mmtSusCd||"",highlight:!t.mmtSusCd}),s.jsx(Wl,{label:" ",value:t.susHopeDd?Ex(t.susHopeDd):"",highlight:!t.susHopeDd}),s.jsx(Wl,{label:" ",value:t.mmtSusHopeDd?Ex(t.mmtSusHopeDd):"",highlight:!t.mmtSusHopeDd}),s.jsx(Wl,{label:" ",value:t.susProcYn==="Y"?"":""}),t.termDays&&s.jsx(Wl,{label:"  ",value:`${t.termDays}`}),t.mmtCnt&&s.jsx(Wl,{label:"   ",value:`${t.mmtCnt}`})]}),s.jsxs("div",{className:"mt-3 bg-orange-100 border border-orange-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-orange-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-orange-700 space-y-1",children:[s.jsx("li",{children:"    (MMT_SUS_CD)"}),s.jsx("li",{children:"   (SUS_HOPE_DD)"}),s.jsx("li",{children:"   (MMT_SUS_HOPE_DD)"}),s.jsx("li",{children:"    (SUS_PROC_YN)"})]})]}),s.jsxs("div",{className:"mt-3 bg-white border border-orange-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-1",children:[s.jsx(ql,{size:14}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600",children:["   ",s.jsx("span",{className:"font-semibold text-orange-600",children:"'20'()"}),"  ."]}),s.jsxs("div",{className:"mt-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="20"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="20"?s.jsx(Cp,{size:14}):s.jsx(yp,{size:14})]})]})]})]}),n&&s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[s.jsx(iw,{size:16}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-blue-100 divide-y divide-gray-100",children:[s.jsx(Wl,{label:" ",value:t.mmtSusCd||""}),s.jsx(Wl,{label:" ",value:t.susHopeDd?Ex(t.susHopeDd):""}),s.jsx(Wl,{label:" ",value:t.mmtSusHopeDd?Ex(t.mmtSusHopeDd):""}),t.termDays&&s.jsx(Wl,{label:"  ",value:`${t.termDays}`})]}),s.jsxs("div",{className:"mt-3 bg-blue-100 border border-blue-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[s.jsx(ub,{size:14}),"  "]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:"  "}),s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"mt-3 bg-white border border-blue-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-1",children:[s.jsx(ql,{size:14}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600",children:["    ",s.jsx("span",{className:"font-semibold text-blue-600",children:"'30'()"})," "," ",s.jsx("span",{className:"font-semibold text-blue-600",children:"'37'(-)"}),"  ."]}),s.jsxs("div",{className:"mt-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="30"||t.CTRT_STAT==="37"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="30"||t.CTRT_STAT==="37"?s.jsx(Cp,{size:14}):s.jsx(yp,{size:14})]})]})]})]}),t.WRK_CD==="06"&&s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 divide-y divide-gray-100",children:[s.jsx(Wl,{label:" ",value:t.WRK_DTL_TCD==="0610"?"":t.WRK_DTL_TCD==="0620"?"":t.WRK_DTL_TCD||""}),s.jsx(Wl,{label:" ",value:t.details||""})]}),s.jsxs("div",{className:"mt-3 bg-gray-100 border border-gray-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0610 ()"}),":    "]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0620 ()"}),":     "]})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"  "}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-2",children:[e&&s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"1."}),s.jsx("span",{children:"     ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"2."}),s.jsx("span",{children:" (~)   ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"3."}),s.jsx("span",{children:"  '(20)' ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"4."}),s.jsx("span",{children:"        ."})]})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"1."}),s.jsx("span",{children:"    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"2."}),s.jsx("span",{children:"    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"3."}),s.jsx("span",{children:"     ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"4."}),s.jsx("span",{children:"     ."})]})]})]})]})]})},Ex=t=>!t||t.length!==8?t:`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`,Nm=({label:t,value:e,highlight:n})=>s.jsxs("div",{className:`flex py-2 border-b border-gray-100 ${n?"bg-yellow-50":""}`,children:[s.jsx("div",{className:"w-1/3 text-xs sm:text-sm font-medium text-gray-700",children:t}),s.jsx("div",{className:"w-2/3 text-xs sm:text-sm text-gray-900",children:e||"-"})]}),f3=({order:t})=>{const n=(r=>{switch(r){case"0510":case"0520":return" ";case"0550":case"0560":return" ";default:return" "}})(t.WRK_DTL_TCD);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[s.jsx(uc,{size:16})," "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-purple-100 divide-y divide-gray-100",children:[s.jsx(Nm,{label:" ",value:n}),s.jsx(Nm,{label:"  ",value:t.WRK_DTL_TCD||""}),s.jsx(Nm,{label:" ",value:t.currentProduct||t.productName||"",highlight:!t.currentProduct&&!t.productName}),s.jsx(Nm,{label:" ",value:t.newProduct||"",highlight:!t.newProduct}),s.jsx(Nm,{label:"",value:t.productName||""})]}),s.jsxs("div",{className:"mt-3 bg-purple-100 border border-purple-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-purple-800 mb-2 flex items-center gap-1",children:[s.jsx(ub,{size:14}),"   "]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0510"}),":   (  )"]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0520"}),":    ",s.jsx("span",{className:"text-red-600",children:"0510  "})]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0550"}),":   ( )"]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0560"}),":  2  ",s.jsx("span",{className:"text-red-600",children:"0550  "})]})]})]}),s.jsxs("div",{className:"mt-3 bg-white border border-purple-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-purple-800 mb-2 flex items-center gap-1",children:[s.jsx(Vi,{size:14}),"  "]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[s.jsx("li",{children:"    (BASIC_PROD_CD)"}),s.jsx("li",{children:"    (NEW_PROD_CD)"}),s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "})]})]})]}),(t.WRK_DTL_TCD==="0510"||t.WRK_DTL_TCD==="0520")&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-green-100 p-3",children:[s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[" / ,  ",s.jsx("span",{className:"font-semibold text-green-600",children:"'01'()"}),"    'Y'    ."]}),s.jsx("div",{className:"mt-2 bg-green-50 border border-green-200 rounded p-2",children:s.jsx("p",{className:"text-xs font-semibold text-green-700",children:"SQL : WRK_CD IN ('01','05','07') AND PYM_MTHD = '01' AND ATMT_YN = 'Y'"})})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-3",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"      ."}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700",children:" :"}),s.jsxs("ul",{className:"text-xs text-gray-600 mt-1 space-y-1",children:[s.jsx("li",{children:" WRK_CD IN ('01','05','07','09')"}),s.jsx("li",{children:" PROD_CMPS_CL = '21' ()"})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"  "}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"1."}),s.jsx("span",{children:"     ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"2."}),s.jsx("span",{children:"       ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"3."}),s.jsx("span",{children:"       ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"4."}),s.jsx("span",{children:"   ,    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"5."}),s.jsx("span",{children:"    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"6."}),s.jsx("span",{children:"     ."})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center gap-1",children:[s.jsx(ql,{size:16,className:"text-gray-600"}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["   ",s.jsx("span",{className:"font-semibold text-purple-600",children:"'20'()"}),"   ."]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="20"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="20"?s.jsx(Cp,{size:14}):s.jsx(yp,{size:14})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-yellow-800 mb-2 flex items-center gap-1",children:[s.jsx(ql,{size:16}),""]}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[s.jsx("li",{children:"    0520 0560   "}),s.jsx("li",{children:"      ,     "}),s.jsx("li",{children:"        "}),s.jsx("li",{children:"           "})]})]})]})},jx=({label:t,value:e,highlight:n})=>s.jsxs("div",{className:`flex py-2 border-b border-gray-100 ${n?"bg-yellow-50":""}`,children:[s.jsx("div",{className:"w-1/3 text-xs sm:text-sm font-medium text-gray-700",children:t}),s.jsx("div",{className:"w-2/3 text-xs sm:text-sm text-gray-900",children:e||"-"})]}),m3=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 border border-teal-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-teal-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-teal-100 divide-y divide-gray-100",children:[s.jsx(jx,{label:"  ",value:t.customer.address}),s.jsx(jx,{label:"  ",value:t.installLocation||"",highlight:!t.installLocation}),s.jsx(jx,{label:"",value:t.productName||""}),s.jsx(jx,{label:" ID",value:t.CTRT_ID||""})]}),s.jsxs("div",{className:"mt-3 bg-teal-100 border border-teal-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-teal-800 mb-2 flex items-center gap-1",children:[s.jsx(Vi,{size:14}),"  "]}),s.jsxs("ul",{className:"text-xs text-teal-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(Cf,{size:16})," "]}),t.assignedEquipment&&t.assignedEquipment.length>0?s.jsx("div",{className:"space-y-2",children:t.assignedEquipment.map((e,n)=>s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:e.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:e.model})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:e.serialNumber})]})]})},e.id||n))}):s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-xs text-yellow-700 flex items-center gap-1",children:[s.jsx(ql,{size:14}),"   ."]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(yu,{size:16}),"  "]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2",children:"1"}),s.jsx("h5",{className:"text-xs font-semibold text-blue-800",children:"  "})]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 ml-8",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"bg-green-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2",children:"2"}),s.jsx("h5",{className:"text-xs font-semibold text-green-800",children:"  "})]}),s.jsxs("ul",{className:"text-xs text-green-700 space-y-1 ml-8",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"    "})]})]}),s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2",children:"3"}),s.jsx("h5",{className:"text-xs font-semibold text-purple-800",children:" "})]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1 ml-8",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"      "}),s.jsx("li",{children:"    "})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-green-100 p-3",children:[s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["  ,  ",s.jsx("span",{className:"font-semibold text-green-600",children:"'01'()"}),"    'Y'    ."]}),s.jsx("div",{className:"mt-2 bg-green-50 border border-green-200 rounded p-2",children:s.jsx("p",{className:"text-xs font-semibold text-green-700",children:"SQL : WRK_CD IN ('01','05','07') AND PYM_MTHD = '01' AND ATMT_YN = 'Y'"})})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:" (WRK_CD='07')      :"}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"()"})," WRK_CD='07':      "]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"()"})," WRK_CD='08':    "]})]}),s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:s.jsx("p",{className:"text-xs text-blue-700",children:"         ."})})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center gap-1",children:[s.jsx(ql,{size:16,className:"text-gray-600"}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["    ",s.jsx("span",{className:"font-semibold text-teal-600",children:"'20'()"}),"   ."]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="20"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="20"?s.jsx(Cp,{size:14}):s.jsx(yp,{size:14})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-yellow-800 mb-2 flex items-center gap-1",children:[s.jsx(ql,{size:16}),""]}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"       "}),s.jsx("li",{children:"      "}),s.jsx("li",{children:"       "}),s.jsx("li",{children:"      "})]})]})]}),Ma=({label:t,value:e,children:n,icon:r})=>s.jsxs("div",{className:"bg-gray-50 rounded-md px-3 py-2 flex items-center justify-between gap-3",children:[s.jsxs("dt",{className:"flex items-center gap-1.5 text-xs text-gray-700 font-semibold flex-shrink-0",children:[r&&s.jsx("span",{className:"text-gray-500",children:r}),t]}),s.jsx("dd",{className:"text-sm text-black font-semibold text-right break-words",children:n||e})]}),_5=({order:t,onBack:e,onUpdateStatus:n,onComplete:r,onStartWorkProcess:i,showToast:l})=>{const c=t.WRK_STAT_CD==="4"||t.status===hn.Completed||t.status==="",[d,u]=_.useState("info"),[f,m]=_.useState(!1),[p,y]=_.useState(!1),g=c;_.useEffect(()=>{(async()=>{var k;try{const V=localStorage.getItem("userInfo");if(!V)return;const G=JSON.parse(V),W={WRKR_ID:G.userId||G.workerId||"",SO_ID:t.SO_ID||G.soId,WORK_ID:t.id,CUST_ID:(k=t.customer)==null?void 0:k.id,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};await to(W)}catch{}})()},[t.id]);const N=()=>{if(t.WRK_CD&&t.CTRT_STAT){const L=r3(t.WRK_CD,t.CTRT_STAT);if(!L.valid){l&&l(L.message||"   .","error",!0);return}}i?i(t):r&&r(t)},C=()=>{if(t.WRK_STAT_CD&&!_b(t.WRK_STAT_CD)){l&&l("       .","warning");return}y(!0)},v=async L=>{m(!0),y(!1);try{const k=await xb(L);k.code==="SUCCESS"||k.code==="OK"?(l&&l("  .","success"),n&&n(t.id,hn.Cancelled)):l&&l(` : ${k.message}`,"error",!0)}catch(k){l&&l(k.message||"   .","error",!0),console.error(" :",k)}finally{m(!1)}},R=({tabId:L,title:k,icon:V})=>{const G=c,W=d===L;return s.jsxs("button",{onClick:()=>u(L),className:`relative px-4 sm:px-6 py-3 sm:py-3.5 text-sm sm:text-base font-semibold transition-all duration-200 flex items-center gap-2 ${W?"text-blue-600 bg-blue-50":c?"text-green-600 bg-green-50 hover:text-green-700 hover:bg-green-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[G?s.jsx("svg",{className:`w-5 h-5 ${W?"text-blue-600":"text-green-600"}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):V,k,W&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 rounded-t-lg bg-blue-600"})]})},A=l3(t.typeDisplay);o3(t.typeDisplay);const M=L=>L?A0(L)?"bg-green-600":k0(L)?"bg-orange-500":Fm(L)?"bg-red-600":Km(L)?"bg-blue-600":ip(L)?"bg-purple-600":Z1(L)?"bg-gray-600":"bg-blue-500":"bg-blue-500";return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"pb-40",style:{minHeight:"calc(100vh - 80px)"},children:[s.jsxs("div",{className:"bg-white overflow-hidden",children:[s.jsxs("div",{className:"bg-blue-600 px-4 py-4 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center",children:s.jsx(A,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("h1",{className:"text-xl font-bold text-white truncate",children:t.customer.name}),t.customer.isVip&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-bold bg-yellow-400 text-yellow-900 flex-shrink-0",children:t.customer.vipLevel||"VIP"})]})]}),s.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold flex-shrink-0 ${t.status===""?"bg-yellow-400 text-yellow-900":t.status===""?"bg-green-400 text-green-900":"bg-red-400 text-red-900"}`,children:t.status})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-md font-semibold bg-white/20 border border-white/30",children:t.typeDisplay}),s.jsxs("div",{className:"text-right flex items-center gap-1.5",children:[s.jsx(X1,{className:"w-4 h-4 text-white/80"}),s.jsx("span",{className:"font-semibold",children:Np(t.scheduledAt)})]})]})]}),s.jsx("div",{className:"border-b-2 border-gray-200 bg-white shadow-sm",children:s.jsxs("div",{className:"flex overflow-x-auto",children:[s.jsx(R,{tabId:"info",title:"/ ",icon:s.jsx(gv,{className:"w-5 h-5"})}),s.jsx(R,{tabId:"equipment",title:" ",icon:s.jsx(q1,{className:"w-5 h-5"})}),s.jsx(R,{tabId:"workflow",title:" ",icon:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})}),s.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-6 pb-28",children:[d==="info"&&s.jsxs("div",{className:"space-y-4",children:[t.WRK_CD&&s.jsx("div",{className:`${M(t.WRK_CD)} rounded-lg p-4`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:s.jsx(Fd,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm font-semibold text-white leading-relaxed",children:jv(t.WRK_CD)})})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"})," "]}),s.jsx(Ma,{label:"ID",value:Qi(t.directionId||t.id),icon:s.jsx(Fd,{className:"w-4 h-4"})}),s.jsx(Ma,{label:"ID",value:Qi(t.id),icon:s.jsx(Fd,{className:"w-4 h-4"})}),s.jsx(Ma,{label:"ID",value:Qi(t.RCPT_ID),icon:s.jsx(Fd,{className:"w-4 h-4"})}),s.jsx(Ma,{label:" ",value:t.typeDisplay,icon:s.jsx(A,{className:"w-4 h-4"})}),t.WRK_CD&&s.jsx(Ma,{label:" ",icon:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.738-5.42-1.233-.617a1 1 0 01.894-1.788l1.599.799L11 4.323V3a1 1 0 011-1h-2zm-5 8.274l-.818 2.552c-.25.78.409 1.565 1.237 1.474L9 13.796l3.581.504c.828.091 1.487-.694 1.237-1.474l-.818-2.552-3-1.2-3 1.2z"})}),children:s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold ${A0(t.WRK_CD)?"bg-red-100 text-red-800":k0(t.WRK_CD)?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:A0(t.WRK_CD)?" ()":k0(t.WRK_CD)?" (A/S)":""})}),t.CTRT_STAT&&s.jsx(Ma,{label:" ",icon:s.jsx(Fd,{className:"w-4 h-4"}),children:s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold ${t.CTRT_STAT==="20"?"bg-green-100 text-green-800":t.CTRT_STAT==="10"?"bg-blue-100 text-blue-800":t.CTRT_STAT==="30"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.CTRT_STAT==="20"?"":t.CTRT_STAT==="10"?"":t.CTRT_STAT==="30"?"":t.CTRT_STAT==="90"?"":`: ${t.CTRT_STAT}`})}),t.CTRT_ID&&s.jsx(Ma,{label:"ID",value:Qi(t.CTRT_ID),icon:s.jsx(Fd,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"})," "]}),s.jsx(Ma,{label:"",value:t.customer.name,icon:s.jsx(gv,{className:"w-4 h-4"})}),s.jsx(Ma,{label:"",icon:s.jsx(mv,{className:"w-4 h-4"}),children:s.jsxs("div",{className:"flex flex-col xs:flex-row items-start xs:items-center justify-between gap-2 xs:gap-2 w-full",children:[s.jsx("span",{className:"text-gray-900 font-medium flex-1 min-w-0 break-all",children:t.customer.phone||" "}),s.jsxs("button",{onClick:()=>{l&&l("   .","info")},className:"flex-shrink-0 w-full xs:w-9 py-2 xs:py-0 xs:h-9 rounded-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 flex items-center justify-center gap-1.5",disabled:!t.customer.phone,children:[s.jsx(mv,{className:"h-4 w-4 text-white"}),s.jsx("span",{className:"xs:hidden text-white text-sm font-medium",children:" "})]})]})}),s.jsx(Ma,{label:" ",icon:s.jsx(z1,{className:"w-4 h-4"}),children:s.jsxs("div",{className:"flex flex-col xs:flex-row items-start justify-between gap-2 xs:gap-2 w-full",children:[s.jsx("span",{className:"text-gray-900 flex-1 min-w-0 leading-relaxed break-all",children:t.customer.address}),s.jsxs("button",{onClick:()=>{l&&l("    .","info")},className:"flex-shrink-0 w-full xs:w-9 py-2 xs:py-0 xs:h-9 rounded-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95 xs:mt-0.5 flex items-center justify-center gap-1.5",children:[s.jsx(z1,{className:"h-4 w-4 text-white"}),s.jsx("span",{className:"xs:hidden text-white text-sm font-medium",children:" "})]})]})}),t.installLocation&&s.jsx(Ma,{label:"  ",value:t.installLocation,icon:s.jsx(z1,{className:"w-4 h-4"})}),t.cellNo&&s.jsx(Ma,{label:"CELL NO",value:t.cellNo,icon:s.jsx(Fd,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"})," "]}),s.jsx(Ma,{label:" ",value:Np(t.scheduledAt),icon:s.jsx(X1,{className:"w-4 h-4"})}),s.jsx(Ma,{label:"",value:Yw(t.scheduledAt),icon:s.jsx(X1,{className:"w-4 h-4"})}),s.jsx(Ma,{label:" ",icon:s.jsx(Fd,{className:"w-4 h-4"}),children:s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-blue-600 w-full",children:s.jsx("p",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:t.details})})})]}),(k0(t.WRK_CD)||A0(t.WRK_CD)||Fm(t.WRK_CD)||Z1(t.WRK_CD)||ip(t.WRK_CD)||Km(t.WRK_CD))&&s.jsxs("div",{className:"mt-6 pt-6 border-t-2 border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-6 bg-blue-600 rounded-full"}),"  "]}),k0(t.WRK_CD)&&s.jsx(c3,{order:t}),A0(t.WRK_CD)&&s.jsx(d3,{order:t}),Fm(t.WRK_CD)&&s.jsx(u3,{order:t}),Z1(t.WRK_CD)&&s.jsx(h3,{order:t}),ip(t.WRK_CD)&&s.jsx(f3,{order:t}),Km(t.WRK_CD)&&s.jsx(m3,{order:t})]}),t.status===hn.Pending&&s.jsx("div",{className:"mt-8 pt-6 border-t-2 border-gray-200",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-600 p-5 rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:" ?"}),s.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-3",children:jv(t.WRK_CD)}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-xs text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:"  "})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:" /"})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:" "})]})]})]})]})})})]}),d==="equipment"&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-4 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"}),"  "]}),t.assignedEquipment.length>0?s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.assignedEquipment.map(L=>{const V=(G=>G==="04"?{color:"bg-blue-600",label:"",status:""}:G==="05"?{color:"bg-purple-600",label:"",status:""}:G==="07"?{color:"bg-orange-500",label:"",status:""}:G==="03"?{color:"bg-green-600",label:"",status:""}:{color:"bg-gray-600",label:"",status:""})(L.itemMidCd);return s.jsx("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-200 p-4 border border-gray-200 hover:border-blue-300",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg ${V.color} flex items-center justify-center`,children:s.jsx(q1,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("p",{className:"font-bold text-gray-800 text-base",children:L.type}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-green-100 text-green-800 flex-shrink-0",children:V.status})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:L.model}),s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[s.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["S/N: ",L.serialNumber]}),L.itemMidCd&&s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[": ",V.label]})]})]})]})},L.id)})})}):s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[s.jsx(q1,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"  ."}),s.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"    ."})]})]}),d==="workflow"&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"}),"  "]}),s.jsxs("div",{className:"mb-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-bold text-gray-800",children:" "}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:c?"100%":g&&t.assignedEquipment.length>0?"50%":g?"25%":"0%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-2.5 rounded-full transition-all duration-500 shadow-sm",style:{width:`${c?100:g&&t.assignedEquipment.length>0?50:g?25:0}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-1.5",children:c?"  ":g&&t.assignedEquipment.length>0?"   ":g?" ":" "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${g?"bg-green-50 border-green-500 shadow-sm":!g&&!t.assignedEquipment.length&&t.status!==hn.Completed?"bg-blue-50 border-blue-500 shadow-md ring-2 ring-blue-200":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${g?"bg-green-500":!g&&!t.assignedEquipment.length&&t.status!==hn.Completed?"bg-blue-500 animate-pulse":"bg-gray-400"}`,children:g?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${g?"text-green-800":!g&&!t.assignedEquipment.length&&t.status!==hn.Completed?"text-blue-800":"text-gray-700"}`,children:""}),g?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):!g&&!t.assignedEquipment.length&&t.status!==hn.Completed?s.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded-full animate-pulse",children:" "}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:g?" .":"   ."})]})]})}),s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${c||t.assignedEquipment.length>0?"bg-green-50 border-green-500 shadow-sm":g&&!t.assignedEquipment.length&&t.status!==hn.Completed?"bg-blue-50 border-blue-500 shadow-md ring-2 ring-blue-200":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${c||t.assignedEquipment.length>0?"bg-green-500":g&&!t.assignedEquipment.length&&t.status!==hn.Completed?"bg-blue-500 animate-pulse":"bg-gray-400"}`,children:c||t.assignedEquipment.length>0?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${c||t.assignedEquipment.length>0?"text-green-800":g&&!t.assignedEquipment.length&&t.status!==hn.Completed?"text-blue-800":"text-gray-700"}`,children:" "}),c||t.assignedEquipment.length>0?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):g&&!t.assignedEquipment.length&&t.status!==hn.Completed?s.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded-full animate-pulse",children:" "}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:t.assignedEquipment.length>0?`${t.assignedEquipment.length}  .`:"  ."})]})]})}),s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${c?"bg-green-50 border-green-500 shadow-sm":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${c?"bg-green-500":"bg-gray-400"}`,children:c?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${c?"text-green-800":"text-gray-700"}`,children:" /  "}),c?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"LGU      ()"})]})]})}),s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${c?"bg-green-50 border-green-500 shadow-sm":g&&t.assignedEquipment.length>0&&t.status!==hn.Completed?"bg-blue-50 border-blue-500 shadow-md ring-2 ring-blue-200":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${c?"bg-green-500":g&&t.assignedEquipment.length>0&&t.status!==hn.Completed?"bg-blue-500 animate-pulse":"bg-gray-400"}`,children:c?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${c?"text-green-800":g&&t.assignedEquipment.length>0&&t.status!==hn.Completed?"text-blue-800":"text-gray-700"}`,children:"  "}),c?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):g&&t.assignedEquipment.length>0&&t.status!==hn.Completed?s.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded-full animate-pulse",children:" "}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:c?"  .":"      ."})]})]})})]})]})]})]}),s.jsx(Cb,{isOpen:p,onClose:()=>y(!1),onConfirm:v,workOrder:t,showToast:l})]}),t.status===hn.Pending&&s.jsx("div",{className:"bg-white border-t border-gray-200 shadow-2xl mt-4",children:s.jsx("div",{className:"max-w-4xl mx-auto px-3 py-2",children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsxs("button",{onClick:C,disabled:f,className:"flex-shrink-0 w-24 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-xl font-bold transition-all duration-200 flex flex-col items-center justify-center gap-0.5 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-xs font-bold",children:f?"":""})]}),s.jsxs("button",{onClick:N,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl active:scale-[0.98]",children:[s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"text-base leading-tight font-bold",children:""}),s.jsx("span",{className:"text-[0.625rem] opacity-90 leading-tight",children:t.typeDisplay})]})]})]})})})]})},Iv=t=>{let e;const n=new Set,r=(f,m)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const y=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(g=>g(e,y))}},i=()=>e,d={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f))},u=e=t(r,i,d);return d},g3=(t=>t?Iv(t):Iv),x3=t=>t;function p3(t,e=x3){const n=Gi.useSyncExternalStore(t.subscribe,Gi.useCallback(()=>e(t.getState()),[t,e]),Gi.useCallback(()=>e(t.getInitialState()),[t,e]));return Gi.useDebugValue(n),n}const _3=t=>{const e=g3(t),n=r=>p3(e,r);return Object.assign(n,e),n},e_=(t=>_3);function C3(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var l;const c=u=>u===null?null:JSON.parse(u,void 0),d=(l=n.getItem(i))!=null?l:null;return d instanceof Promise?d.then(c):c(d)},setItem:(i,l)=>n.setItem(i,JSON.stringify(l,void 0)),removeItem:i=>n.removeItem(i)}}const by=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return by(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return by(r)(n)}}}},y3=(t,e)=>(n,r,i)=>{let l={storage:C3(()=>localStorage),partialize:C=>C,version:0,merge:(C,v)=>({...v,...C}),...e},c=!1;const d=new Set,u=new Set;let f=l.storage;if(!f)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...C)},r,i);const m=()=>{const C=l.partialize({...r()});return f.setItem(l.name,{state:C,version:l.version})},p=i.setState;i.setState=(C,v)=>(p(C,v),m());const y=t((...C)=>(n(...C),m()),r,i);i.getInitialState=()=>y;let g;const N=()=>{var C,v;if(!f)return;c=!1,d.forEach(A=>{var M;return A((M=r())!=null?M:y)});const R=((v=l.onRehydrateStorage)==null?void 0:v.call(l,(C=r())!=null?C:y))||void 0;return by(f.getItem.bind(f))(l.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==l.version){if(l.migrate){const M=l.migrate(A.state,A.version);return M instanceof Promise?M.then(L=>[!0,L]):[!0,M]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var M;const[L,k]=A;if(g=l.merge(k,(M=r())!=null?M:y),n(g,!0),L)return m()}).then(()=>{R==null||R(g,void 0),g=r(),c=!0,u.forEach(A=>A(g))}).catch(A=>{R==null||R(void 0,A)})};return i.persist={setOptions:C=>{l={...l,...C},C.storage&&(f=C.storage)},clearStorage:()=>{f==null||f.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>N(),hasHydrated:()=>c,onHydrate:C=>(d.add(C),()=>{d.delete(C)}),onFinishHydration:C=>(u.add(C),()=>{u.delete(C)})},l.skipHydration||N(),g||y},t_=y3,Wa=e_()(t_(t=>({certifyRegconfInfo:null,ldapResult:null,certifyProdList:[],isCertifyProd:!1,certifyOpLnkdCd:"",entrNo:null,entrRqstNo:null,lguMarketCd:"",lguOperatorId:"",lguJobType:"",lguJobTypeConf:"",cl02PortData:null,isSubscriptionDone:!1,isLineRegistrationDone:!1,setCertifyRegconfInfo:e=>t({certifyRegconfInfo:e}),setLdapResult:e=>t({ldapResult:e}),setCertifyProdList:e=>t({certifyProdList:e}),setIsCertifyProd:e=>t({isCertifyProd:e}),setCertifyOpLnkdCd:e=>t({certifyOpLnkdCd:e}),setEntrNo:(e,n)=>t({entrNo:e,entrRqstNo:n??null}),setLguCommonCd:(e,n,r,i)=>t({lguMarketCd:e,lguOperatorId:n,...r!==void 0?{lguJobType:r}:{},...i!==void 0?{lguJobTypeConf:i}:{}}),setCl02PortData:e=>t({cl02PortData:e}),setIsSubscriptionDone:e=>t({isSubscriptionDone:e}),setIsLineRegistrationDone:e=>t({isLineRegistrationDone:e}),reset:()=>t({certifyRegconfInfo:null,ldapResult:null,certifyProdList:[],isCertifyProd:!1,certifyOpLnkdCd:"",entrNo:null,entrRqstNo:null,lguMarketCd:"",lguOperatorId:"",lguJobType:"",lguJobTypeConf:"",cl02PortData:null,isSubscriptionDone:!1,isLineRegistrationDone:!1})}),{name:"dlive-certify-storage",partialize:t=>({certifyRegconfInfo:t.certifyRegconfInfo,ldapResult:t.ldapResult,entrNo:t.entrNo,entrRqstNo:t.entrRqstNo,isSubscriptionDone:t.isSubscriptionDone,isLineRegistrationDone:t.isLineRegistrationDone})})),_g=async({order:t,workerId:e,certifyRegconfInfo:n,addOnParam:r="",reason:i="",certifyType:l,contIdOld:c})=>{var d,u;if(!n)return{success:!1,code:"NO_DATA",message:" ."};try{const f=await Hw({CONT_ID:t.CTRT_ID||"",CUST_ID:((d=t.customer)==null?void 0:d.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:t.SO_ID||"",REG_UID:e,CERTIFY_TYPE:l,ADDR:t.ADDR||((u=t.customer)==null?void 0:u.address)||"",BLD_NM:t.BLD_NM||"",T:n.T||"",ONT_MAC:n.ONT_MAC||"",ONT_SERIAL:n.ONT_SERIAL||"",AP_MAC:n.AP_MAC||"",DEV_ID:n.DEV_ID||"",IP:n.IP||"",PORT:n.PORT||"",MAX_SPEED:n.MAX_SPEED||"",ST:n.ST||"",EQIP_ID:n.EQIP_ID||"",EQIP_PORT_NO:n.EQIP_PORT_NO||"",EQIP_DIVS:n.EQIP_DIVS||"",SVC:t.PROD_CD||t.PROD_CD||"",ADD_ON:r,REASON:i,...c?{CONT_ID_OLD:c}:{}});return console.log("[useCertifyComplete] CL-04 :",f),f.code!=="SUCCESS"&&f.code!=="OK"?{success:!1,code:f.code,message:f.message}:{success:!0,code:f.code,message:f.message}}catch(f){return console.error("[useCertifyComplete] CL-04 :",f),{success:!1,code:"ERROR",message:f.message||"CL-04  "}}},C5=async(t,e,n)=>{var u;const r=n||t.CTRT_ID||"",i=t.SO_ID||"";let l=!1;try{const f=await qm({CTRT_ID:r,CUST_ID:((u=t.customer)==null?void 0:u.id)||t.CUST_ID||"",SO_ID:i,REG_UID:e,WRK_ID:t.id||""}),m=Array.isArray(f)?f[0]:f;m&&!m.ERROR&&m.CONT_ID===r&&(l=!0,console.log("[useCertifyComplete] CL-08  "))}catch(f){console.log("[useCertifyComplete] CL-08  :",f)}let c=!1;try{c=(await ka("CMIF006")).map(p=>p.code||p.COMMON_CD).includes(i)}catch(f){console.error("[useCertifyComplete] CMIF006  :",f)}let d="";return l&&c?d="U":!l&&c?d="C":l&&!c&&(d="D"),console.log("[useCertifyComplete] CERTIFY_TYPE:",d,"| bCl08:",l,"| SO in CMIF006:",c),{certifyType:d,bCl08:l}},b3=async(t,e)=>{var i,l;const n=t.CTRT_ID||"";let r="N";try{const c=await qm({CTRT_ID:n,CUST_ID:((i=t.customer)==null?void 0:i.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:e,WRK_ID:t.id||""}),d=Array.isArray(c)?c[0]:c;d&&!d.ERROR&&d.CONT_ID===n&&(r="Y",console.log("[useCertifyComplete] CL-08  , CERTIFY_TG=Y"))}catch(c){console.log("[useCertifyComplete] CL-08  :",c)}if(r==="Y")try{const c=await Sp({CTRT_ID:n,CUST_ID:((l=t.customer)==null?void 0:l.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:t.SO_ID||"",REG_UID:e});if(c!=null&&c.ERROR)return console.error("[useCertifyComplete] CL-06 :",c.ERROR),{success:!1,certifyTg:r,error:c.ERROR};console.log("[useCertifyComplete] CL-06  ")}catch(c){return console.error("[useCertifyComplete] CL-06  :",c),{success:!1,certifyTg:r,error:c.message}}return{success:!0,certifyTg:r}},N3=async(t,e,n)=>{var r;try{const i=await Sp({CTRT_ID:n,CUST_ID:((r=t.customer)==null?void 0:r.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:t.SO_ID||"",REG_UID:e});return i!=null&&i.ERROR?(console.error("[useCertifyComplete] CL-06 (Change) :",i.ERROR),{success:!1,error:i.ERROR}):{success:!0}}catch(i){return{success:!1,error:i.message}}},Cg=async(t,e)=>{if(!(e==1||e==="1"))return!1;try{return(await ka("CMIF006")).map(l=>l.code||l.COMMON_CD).includes(t)}catch(r){return console.error("[useCertifySignal] CMIF006  :",r),!1}},pa=({isOpen:t,onClose:e,title:n,size:r="medium",children:i,footer:l,subHeader:c})=>{if(_.useEffect(()=>{if(t){const u=window.scrollY,f={overflow:document.body.style.overflow,position:document.body.style.position,top:document.body.style.top,width:document.body.style.width};return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${u}px`,document.body.style.width="100%",()=>{document.body.style.overflow=f.overflow,document.body.style.position=f.position,document.body.style.top=f.top,document.body.style.width=f.width,window.scrollTo(0,u)}}},[t]),!t)return null;const d={small:"modal-sm",medium:"modal-md",large:"modal-lg"}[r];return s.jsx("div",{className:"base-modal-overlay",onClick:e,children:s.jsxs("div",{className:`base-modal-container ${d}`,onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"base-modal-header",children:[s.jsx("h2",{className:"base-modal-title",children:n}),s.jsx("button",{onClick:e,className:"base-modal-close-btn","aria-label":"",children:s.jsx(bi,{size:18})})]}),c&&s.jsx("div",{className:"base-modal-subheader",children:c}),s.jsx("div",{className:"base-modal-body",children:i}),l&&s.jsx("div",{className:"base-modal-footer",children:l})]})})},hc=({isOpen:t,onClose:e,onSave:n,workId:r,initialData:i,workType:l,customerId:c,customerName:d,contractId:u,addrOrd:f,kpiProdGrpCd:m,prodChgGb:p,chgKpiProdGrpCd:y,prodGrp:g,wrkDtlTcd:N,readOnly:C=!1})=>{const[v,R]=_.useState({NET_CL:"",INSTL_TP:"",WRNG_TP:"",CB_INSTL_TP:"",CB_WRNG_TP:"",INOUT_LINE_TP:"N",INOUT_LEN:"",DVDR_YN:"N",BFR_LINE_YN:"N",CUT_YN:"N",TERM_NO:"",RCV_STS:"",SUBTAP_ID:"",PORT_NUM:"",EXTN_TP:"",TAB_LBL:"",CVT_LBL:"",STB_LBL:""}),[A,M]=_.useState([]),[L,k]=_.useState([]),[V,G]=_.useState([]),[W,j]=_.useState([]),[S,P]=_.useState([]),[F,ee]=_.useState([]),[J,$]=_.useState(!1),[Y,K]=_.useState(!1);_.useEffect(()=>{t&&r&&oe()},[t,r]),_.useEffect(()=>{if(i){const X=l==="02"||l==="04"||l==="08",me={...i};X&&((!i.NET_CL||i.NET_CL.trim()==="")&&(delete me.NET_CL,delete me.NET_CL_NM),(!i.INSTL_TP||i.INSTL_TP.trim()==="")&&delete me.INSTL_TP),R(he=>({...he,...me}))}},[i,l]);const w=(X,me)=>!X||!me?-1:X.indexOf(me),se=(X,me,he,Z)=>{const ie=l,te=m,je=p,be=y,Te=g,re=N;console.log(" [Filter]   :",{WRK_CD:ie,KPI_PROD_GRP_CD:te,PROD_CHG_GB:je,PROD_GRP:Te,WRK_DTL_TCD:re}),console.log(" [Filter]    :",{instlTpList:X.length,wrngTpList:me.length,cbInstlTpList:he.length,cbWrngTpList:Z.length});let pe=X,Se=he,st=Z;ie==="01"||ie==="03"||ie==="06"||ie==="07"||ie==="09"?(console.log(" [Filter] :",ie,"- /AS/ "),re==="0920"?(console.log(" [Filter] :",re,"- code=77 "),pe=X.filter(lt=>w(lt.ref_code,te||"")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77")):(console.log(" [Filter] :",re,"- code!=77 "),pe=X.filter(lt=>w(lt.ref_code,te||"")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77")),console.log(" [Filter]   :",pe.length,""),Te==="C"&&(re==="0920"?Se=he.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"):Se=he.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77"))):ie==="05"?je==="01"?(pe=X.filter(lt=>w(lt.ref_code,be||"")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77"),Te==="C"&&(Se=he.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77"),st=Z.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77"))):je==="02"&&(pe=X.filter(lt=>w(lt.ref_code,te||"")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"),Te==="C"&&(Se=he.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"),st=Z.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"))):ie==="04"?re==="0440"?(pe=X.filter(lt=>w(lt.ref_code,te||"")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77"),Te==="C"&&(Se=he.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77"),st=Z.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code!=="77"))):re==="0430"&&(pe=X.filter(lt=>w(lt.ref_code,te||"")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"),Te==="C"&&(Se=he.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"),st=Z.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"))):(pe=X.filter(lt=>{const At=lt.code==="77",ot=(lt.ref_code3||"")>="20090901",We=te?w(lt.ref_code,te)>-1:!0;return At&&ot&&We}),Te==="C"&&(Se=he.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77"),st=Z.filter(lt=>w(lt.ref_code,"I")>-1&&(lt.ref_code3||"")>="20090901"&&lt.code==="77")));const Nt=me.filter(lt=>w(lt.ref_code,te||"")>-1&&(lt.ref_code3||"")>="20090901");return console.log(" [Filter]   :",{instlTp:pe.length,wrngTp:Nt.length,cbInstlTp:Se.length,cbWrngTp:st.length}),{filteredInstlTp:pe,filteredWrngTp:Nt,filteredCbInstlTp:Se,filteredCbWrngTp:st}},oe=async()=>{$(!0);try{console.log(" [InstallInfoModal]   "),console.log(" [InstallInfoModal]  :",{workType:l,kpiProdGrpCd:m,prodChgGb:p,chgKpiProdGrpCd:y,prodGrp:g,wrkDtlTcd:N});const[X,me,he,Z,ie]=await Promise.all([ka("CMCU048"),ka("BLST014"),ka("BLST010"),ka("CMCU030"),ka("CMCU046")]);console.log(" [InstallInfoModal]  :",{netCl:X.length,wrngTp:me.length,instlTp:he.length,cbWrngTp:Z.length,cbInstlTp:ie.length}),he.length>0&&(console.log(" [InstallInfoModal] (BLST010)    ():",he[0]),console.log(" [InstallInfoModal]   ref_code :",{ref_code:he[0].ref_code,ref_code2:he[0].ref_code2,ref_code3:he[0].ref_code3})),he.length>1&&(console.log(" [InstallInfoModal] (BLST010)    ( ):",he[1]),console.log(" [InstallInfoModal]   ref_code :",{ref_code:he[1].ref_code,ref_code2:he[1].ref_code2,ref_code3:he[1].ref_code3}),console.log(" [InstallInfoModal]     :",Object.keys(he[1]))),me.length>1&&console.log(" [InstallInfoModal] (BLST014)   :",me[1]);const te=l==="02"||l==="04"||l==="08";if(l&&(m||te)){const je=se(he,me,ie,Z);M(X),k(je.filteredWrngTp),G(me),j(je.filteredInstlTp),P(je.filteredCbWrngTp),ee(je.filteredCbInstlTp),console.log(" [Filter]    - instlTp:",je.filteredInstlTp.length,"")}else M(X),k(me),G(me),j(he),P(Z),ee(ie),console.log(" [Filter]    -   ");if(console.log(" [InstallInfoModal]  state  "),te){const je=(i==null?void 0:i.NET_CL)&&i.NET_CL.trim()!=="",be=(i==null?void 0:i.INSTL_TP)&&i.INSTL_TP.trim()!=="";console.log(" [InstallInfoModal]     - hasNetCl:",je,"hasInstlTp:",be);const Te={};if(!je&&X.length>0){console.log(" [InstallInfoModal] netCl :",X.map(Se=>({code:Se.code,name:Se.name})));const pe=X.find(Se=>Se.name&&(Se.name.includes("DLIVE")||Se.name.includes("")));console.log(" [InstallInfoModal]   NET_CL:",pe),pe&&(Te.NET_CL=pe.code,Te.NET_CL_NM=pe.name,console.log(" [InstallInfoModal] NET_CL  :",pe.code,pe.name))}if(be||(Te.INSTL_TP="77",console.log(" [InstallInfoModal] INSTL_TP  : 77()")),Object.keys(Te).length>0&&R(pe=>({...pe,...Te})),(be?i==null?void 0:i.INSTL_TP:"77")==="77"){const pe=me.filter(Se=>w(Se.ref_code2,"77")>-1);console.log(" [InstallInfoModal]   -  :",pe.length,""),k(pe)}}}catch(X){console.error(" [InstallInfoModal] Failed to load common codes:",X)}finally{$(!1)}},T=_.useMemo(()=>A.map(X=>({value:X.code,label:X.name})),[A]),I=_.useMemo(()=>W.map(X=>({value:X.code,label:X.name})),[W]),U=_.useMemo(()=>L.map(X=>({value:X.code,label:X.name})),[L]),Q=_.useMemo(()=>F.map(X=>({value:X.code,label:X.name})),[F]),H=_.useMemo(()=>S.map(X=>({value:X.code,label:X.name})),[S]);if(!t)return null;const q=(X,me)=>{C||(R(he=>({...he,[X]:me})),X==="INSTL_TP"&&(R(he=>({...he,WRNG_TP:""})),me?ae(me):k(V)),X==="CB_INSTL_TP"&&(R(he=>({...he,CB_WRNG_TP:""})),me&&fe(me)))},ae=X=>{if(console.log(" [Filter]  :",{instlTpValue:X,workType:l,prodChgGb:p,kpiProdGrpCd:m,chgKpiProdGrpCd:y}),!X||V.length===0){k(V);return}if(!m&&!y){console.log(" [Filter] KPI_PROD_GRP_CD  - ref_code2 ");const he=V.filter(Z=>w(Z.ref_code2,X)>-1);console.log(" [Filter]   :",he.length,""),k(he);return}let me=V;l==="05"?p==="01"?me=V.filter(he=>w(he.ref_code2,X)>-1&&w(he.ref_code,y||"")>-1):p==="02"?me=V.filter(he=>w(he.ref_code2,X)>-1&&w(he.ref_code,m||"")>-1):me=V.filter(he=>w(he.ref_code2,X)>-1&&w(he.ref_code,m||"")>-1):me=V.filter(he=>w(he.ref_code2,X)>-1&&w(he.ref_code,m||"")>-1),console.log(" [Filter]   :",me.length,""),k(me),v.WRNG_TP&&!me.find(he=>he.code===v.WRNG_TP)&&R(he=>({...he,WRNG_TP:""}))},fe=X=>{if(console.log(" [Filter]  :",X),!X)return;const me=S.filter(he=>w(he.ref_code2,X)>-1&&w(he.ref_code,"I")>-1);console.log(" [Filter]   :",me.length,""),P(me)},ge=async()=>{var X;if(!v.NET_CL){alert(" .");return}if(!v.INSTL_TP){alert(" .");return}if(!v.WRNG_TP){alert(" .");return}K(!0);try{const me=((X=A.find(ie=>ie.code===v.NET_CL))==null?void 0:X.name)||"",he={...v,NET_CL_NM:me},Z=await C4({WRK_ID:r,CTRT_ID:u||"",ADDR_ORD:f||"",WRK_DTL_TCD:N||"",...v});Z.code==="SUCCESS"?(n(he),e()):alert(Z.message||" .")}catch(me){console.error("Save failed:",me),alert(me.message||"     .")}finally{K(!1)}},ce=J?null:s.jsxs("div",{className:"install-subheader",children:[s.jsxs("div",{className:"info-row whitespace-nowrap",children:[s.jsx("span",{className:"info-label",children:"ID:"}),s.jsx("span",{className:"info-value",children:Qi(c)})]}),s.jsxs("div",{className:"info-row whitespace-nowrap",children:[s.jsx("span",{className:"info-label",children:":"}),s.jsx("span",{className:"info-value",children:d||"-"})]}),s.jsxs("div",{className:"info-row whitespace-nowrap",children:[s.jsx("span",{className:"info-label",children:"ID:"}),s.jsx("span",{className:"info-value",children:Qi(u)})]})]}),Re=C?s.jsx("button",{className:"btn btn-secondary btn-sm",onClick:e,children:""}):s.jsx("button",{className:"btn btn-primary btn-sm",onClick:ge,disabled:J||Y,children:Y?" ...":""});return s.jsx(pa,{isOpen:t,onClose:e,title:l==="02"||l==="04"||l==="08"||l==="09"?"":"",size:"medium",subHeader:ce,footer:Re,children:s.jsx("div",{className:"install-modal-content",children:J?s.jsxs("div",{className:"loading-message",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"  ..."})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"install-info-section",children:[s.jsxs("div",{className:"install-form-row",children:[s.jsxs("label",{className:"install-label",children:[" ",!C&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx(Zs,{value:v.NET_CL||"",onValueChange:X=>q("NET_CL",X),options:T,placeholder:"",required:!C,disabled:C})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsxs("label",{className:"install-label",children:[" ",!C&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx(Zs,{value:v.INSTL_TP||"",onValueChange:X=>q("INSTL_TP",X),options:I,placeholder:"",required:!C,disabled:C})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsxs("label",{className:"install-label",children:[" ",!C&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx(Zs,{value:v.WRNG_TP||"",onValueChange:X=>q("WRNG_TP",X),options:U,placeholder:v.INSTL_TP?"":"  ",disabled:C||!v.INSTL_TP,required:!C})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsx("label",{className:"install-label",children:""}),s.jsx(Zs,{value:v.CB_INSTL_TP||"",onValueChange:X=>q("CB_INSTL_TP",X),options:Q,placeholder:"",disabled:!0})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsx("label",{className:"install-label",children:""}),s.jsx(Zs,{value:v.CB_WRNG_TP||"",onValueChange:X=>q("CB_WRNG_TP",X),options:H,placeholder:"",disabled:!0})]}),s.jsxs("div",{className:"install-form-row-inline",children:[s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:v.INOUT_LINE_TP==="Y",onChange:X=>q("INOUT_LINE_TP",X.target.checked?"Y":"N"),disabled:C}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"install-inline-group",children:[s.jsx("label",{className:"install-inline-label",children:""}),s.jsx("input",{type:"text",className:"install-input-inline",value:v.INOUT_LEN||"",onChange:X=>q("INOUT_LEN",X.target.value),disabled:C})]})]}),s.jsxs("div",{className:"install-form-row-inline",children:[s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:v.DVDR_YN==="Y",onChange:X=>q("DVDR_YN",X.target.checked?"Y":"N"),disabled:C}),s.jsx("span",{children:""})]}),l==="02"||l==="08"?s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:v.CUT_YN==="Y",onChange:X=>q("CUT_YN",X.target.checked?"Y":"N"),disabled:C}),s.jsx("span",{children:""})]}):s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:v.BFR_LINE_YN==="Y",onChange:X=>q("BFR_LINE_YN",X.target.checked?"Y":"N"),disabled:C}),s.jsx("span",{children:""})]})]})]})})})})},Ba=({isOpen:t,onClose:e,ctrtId:n,custId:r})=>{const[i,l]=_.useState([]),[c,d]=_.useState(!1),[u,f]=_.useState(null),m=v=>{const R=v.getFullYear(),A=String(v.getMonth()+1).padStart(2,"0"),M=String(v.getDate()).padStart(2,"0");return`${R}${A}${M}`},p=(v,R)=>{const A=new Date(v);return A.setDate(A.getDate()+R),A},y=v=>{if(!v||v.length<14)return v;const R=v.substring(0,4),A=v.substring(4,6),M=v.substring(6,8),L=v.substring(8,10),k=v.substring(10,12),V=v.substring(12,14);return`${R}-${A}-${M} ${L}:${k}:${V}`},g=async()=>{if(!n){console.error("[] ID ");return}d(!0),f(null);try{const v=new Date,R=m(p(v,-7)),A=m(p(v,1));console.log("[]  :",{ctrtId:n,custId:r,startDate:R,endDate:A});const M=typeof window<"u"?window.location.origin:"http://localhost:3000",L=await fetch(`${bs}/integration/history`,{method:"POST",headers:{"Content-Type":"application/json",Origin:M},credentials:"include",body:JSON.stringify({CTRT_ID:n,CUST_ID:r||"",STRT_DTTM1:R,STRT_DTTM2:A})});if(!L.ok)throw new Error(`API  : ${L.status}`);const k=await L.json();console.log("[] API :",k);const V=k.output||k.ds_svc_dtl||[];l(Array.isArray(V)?V:[]),console.log("[]  :",V.length,"")}catch(v){console.error("[]  :",v),f(v instanceof Error?v.message:"   ")}finally{d(!1)}};_.useEffect(()=>{t&&n&&g()},[t,n]);const N=s.jsxs("div",{className:"text-xs text-gray-700 space-y-0.5",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-600",children:"ID:"})," ",s.jsx("span",{className:"font-medium text-blue-700",children:Qi(n)})]}),s.jsx("div",{className:"text-gray-600",children:":  7"})]}),C=s.jsx("button",{onClick:e,className:"btn btn-secondary btn-sm",children:""});return s.jsx(pa,{isOpen:t,onClose:e,title:"",size:"medium",subHeader:N,footer:C,children:s.jsxs("div",{children:[c&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:" ..."})}),u&&s.jsx("div",{className:"flex items-center justify-center py-8 px-4",children:s.jsx("div",{className:"text-red-500 text-xs text-center",children:u})}),!c&&!u&&i.length===0&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:" "})}),!c&&!u&&i.length>0&&s.jsx("div",{className:"space-y-2.5 p-2.5",children:i.map((v,R)=>s.jsx("div",{className:`rounded-lg border shadow-sm p-2.5 ${R%2===0?"bg-white border-gray-200":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",v.prod_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"ID:"})," ",Qi(v.ctrt_id)]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",v.msg_id_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",v.proc_rslt_cd_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",v.rslt_cd_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",v.strt_dttm?y(v.strt_dttm):"-"]})})]})},R))})]})})},Ov=[{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"()",label:"()"},{value:"()",label:"()"},{value:"()",label:"()"},{value:"99",label:"()"}],S3=[{value:"01",label:"HDMI1"},{value:"02",label:"HDMI2"},{value:"03",label:"HDMI3"},{value:"04",label:"HDMI4"},{value:"05",label:""},{value:"06",label:"1"},{value:"07",label:"2"},{value:"08",label:"3"},{value:"09",label:"4"},{value:"11",label:"RF "}],If=({isOpen:t,onClose:e,onSave:n,workId:r,ctrtId:i,prodGrp:l,initialInstlLoc:c,initialViewModCd:d,initialViewModNm:u,showToast:f,readOnly:m=!1})=>{const[p,y]=_.useState(""),[g,N]=_.useState(""),[C,v]=_.useState(""),[R,A]=_.useState(S3),M=l==="D";_.useEffect(()=>{t&&M&&(async()=>{try{const G=await ka("CMWO048");if(console.log("[InstallLocationModal] API  :",G),G&&G.length>0){const W=G.map(j=>({value:j.code||j.COMMON_CD||"",label:j.name||j.COMMON_CD_NM||""})).filter(j=>j.value&&j.label);W.length>0?(A(W),console.log("[InstallLocationModal]    :",W)):console.log("[InstallLocationModal]   ,  ")}}catch(G){console.error("[InstallLocationModal]    ,  :",G)}})()},[t,M]),_.useEffect(()=>{if(t){if(c){const V=Ov.find(G=>G.value===c||G.label===c);V&&V.value!=="99"?(y(V.value),N("")):(y("99"),N(c))}else y(""),N("");v(d||"")}},[t,c,d]);const L=()=>!p||p==="[]"?" .":p==="99"&&!g.trim()?"   . ()":M&&(!C||C==="[]")?" .":null,k=async()=>{var S;const V=L();if(V){f?f(V,"warning"):alert(V);return}const G=p==="99"?g:p,W=((S=R.find(P=>P.value===C))==null?void 0:S.label)||"",j=M&&C?`${G}${C}`:G;f&&f(".","success"),n({INSTL_LOC:G,VIEW_MOD_CD:C,VIEW_MOD_NM:W,INSTL_LOC_FULL:j}),e()};return t?s.jsxs(pa,{isOpen:t,onClose:e,title:"(, )",size:"md",children:[s.jsxs("div",{className:"space-y-5 p-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!m&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:p,onValueChange:V=>{m||(y(V),V!=="99"&&N(""))},options:Ov,placeholder:" ",required:!m,disabled:m})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:["  ",!m&&p==="99"&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:g,onChange:V=>!m&&N(V.target.value),placeholder:p==="99"?", ,     ":"    ",disabled:m||p!=="99",maxLength:512,rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border rounded-lg text-sm sm:text-base resize-none
              ${m?"border-gray-200 bg-gray-100 text-gray-700 cursor-not-allowed":p==="99"?"border-gray-300 bg-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"}`}),!m&&s.jsx("p",{className:"mt-1 text-xs text-red-500 font-medium",children:"* "})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!m&&M&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:C,onValueChange:V=>!m&&v(V),options:R,placeholder:" ",disabled:m||!M,required:!m&&M}),!m&&!M&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"DTV    ."})]})]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 p-3 sm:p-4 border-t border-gray-200 bg-gray-50",children:[s.jsx("button",{type:"button",onClick:e,className:"py-2 sm:py-3 px-3 sm:px-4 font-semibold rounded-lg transition-colors text-sm sm:text-base flex-1 bg-gray-200 text-gray-700 hover:bg-gray-300",children:""}),!m&&s.jsx("button",{type:"button",onClick:k,className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors text-sm sm:text-base",children:""})]})]}):null},yb=({isOpen:t,onClose:e,onSave:n,wrkId:r,wrkDrctnId:i,crrId:l,wrkrId:c,dataType:d,showToast:u,readOnly:f=!1})=>{const[m,p]=_.useState(""),[y,g]=_.useState([]),[N,C]=_.useState(""),[v,R]=_.useState(!1),[A,M]=_.useState(!1);_.useEffect(()=>{t&&r&&i&&(L(),d==="C"&&k())},[t,r,i,d]);const L=async()=>{try{const S=await Jp({WRK_ID:r,WRK_DRCTN_ID:i,DATA_TYPE:d});S!=null&&S.EQT_SERNO&&p(S.EQT_SERNO)}catch(S){console.error("[OttSerialModal]    :",S)}},k=async()=>{try{const S=await A4({WRK_ID:r});S!=null&&S.OTT_TYPE?C(S.OTT_TYPE):(u==null||u("OTT BOX   .      .","warning"),e())}catch(S){console.error("[OttSerialModal] OTT   :",S)}},V=async()=>{if(!m.trim()){u==null||u("OTT BOX  .","warning");return}M(!0);try{const S={EQT_SERNO:m,DATA_TYPE:d};d==="C"&&(S.CRR_ID=l||"",S.OTT_TYPE=N,S.WRKR_ID=c||"");const P=await P4(S),F=d==="C"?P.filter(ee=>ee.EQT_STAT==="OK"):P;g(F),F.length===0&&(u==null||u("  .","info"))}catch(S){console.error("[OttSerialModal]   :",S),u==null||u("    .","error")}finally{M(!1)}},G=S=>{p(S.EQT_SERNO||"")},W=async()=>{if(!m.trim()){u==null||u("OTT BOX  .","warning");return}if(d==="C"&&y.length<1){u==null||u("    .","warning");return}R(!0);try{const S=localStorage.getItem("userInfo"),P=S?JSON.parse(S):{},F=await w4({WRK_ID:r,WRK_DRCTN_ID:i,EQT_SERNO:m,DATA_TYPE:d,REG_UID:P.userId||""});F.code==="SUCCESS"||F.code==="OK"?(u==null||u("OTT  .","success"),n(m),e()):u==null||u(F.message||" .","error")}catch(S){console.error("[OttSerialModal]  :",S),u==null||u(S.message||"   .","error")}finally{R(!1)}},j=S=>{S.key==="Enter"&&(S.preventDefault(),V())};return s.jsx(pa,{isOpen:t,onClose:e,title:d==="C"?" OTT  ":"OTT  ",maxWidth:"md",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"BOX S/N"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:m,onChange:S=>p(S.target.value),onKeyDown:j,placeholder:" ",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",readOnly:f,disabled:f}),s.jsxs("button",{onClick:V,disabled:A||f,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 disabled:bg-gray-300",children:[A?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(yu,{className:"w-4 h-4"}),s.jsx("span",{children:""})]})]})]}),d==="C"&&N&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),s.jsx("input",{type:"text",value:N,readOnly:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-600"})]}),y.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ( )"}),s.jsx("div",{className:"border border-gray-300 rounded-lg max-h-48 overflow-y-auto",children:y.map((S,P)=>s.jsxs("div",{onClick:()=>!f&&G(S),className:`px-4 py-3 border-b last:border-b-0 cursor-pointer transition-colors ${m===S.EQT_SERNO?"bg-blue-50 text-blue-700":"hover:bg-gray-50"} ${f?"cursor-not-allowed":""}`,children:[s.jsx("span",{className:"font-medium",children:S.EQT_SERNO}),S.EQT_STAT&&s.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded ${S.EQT_STAT==="OK"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:S.EQT_STAT})]},P))})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[!f&&s.jsx("button",{onClick:W,disabled:v||!m.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg disabled:bg-gray-300 disabled:cursor-not-allowed",children:v?" ...":""}),s.jsx("button",{onClick:e,className:"flex-1 py-3 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg",children:f?"":""})]})]})})},v3=[{value:"0",label:""},{value:"1",label:" "},{value:"2",label:" "},{value:"3",label:" "}],yg=({isOpen:t,onClose:e,onSave:n,soId:r})=>{const[i,l]=_.useState("");_.useEffect(()=>{t&&l("")},[t]);const c=()=>{if(!i){alert("  .");return}n({POLE_YN:i,LAN_GB:""})};return t?s.jsxs(pa,{isOpen:t,onClose:e,title:"",size:"sm",children:[s.jsx("div",{className:"space-y-5 p-4",children:s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:i,onValueChange:l,options:v3,placeholder:"",required:!0})]})}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 p-3 sm:p-4 border-t border-gray-200 bg-gray-50",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition-colors text-sm sm:text-base",children:""}),s.jsx("button",{type:"button",onClick:c,className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors text-sm sm:text-base",children:""})]})]}):null},ul=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,type:l="confirm",confirmText:c="",cancelText:d="",showCancel:u=!0,children:f})=>{if(!t)return null;const m=()=>{switch(l){case"warning":return s.jsx(ql,{className:"w-12 h-12 text-yellow-500"});case"error":return s.jsx(Lo,{className:"w-12 h-12 text-red-500"});case"info":return s.jsx(t5,{className:"w-12 h-12 text-blue-500"});case"confirm":default:return s.jsx(Vi,{className:"w-12 h-12 text-green-500"})}},p=()=>{switch(l){case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";case"info":return"bg-blue-50 border-blue-200";case"confirm":default:return"bg-green-50 border-green-200"}},y=()=>{switch(l){case"warning":return"bg-yellow-500 hover:bg-yellow-600";case"error":return"bg-red-500 hover:bg-red-600";case"info":return"bg-blue-500 hover:bg-blue-600";case"confirm":default:return"bg-blue-500 hover:bg-blue-600"}},g=()=>{n(),e()};return s.jsxs("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-[90%] max-w-sm mx-4 overflow-hidden animate-in fade-in zoom-in duration-200",children:[s.jsxs("div",{className:`px-4 sm:px-6 py-4 sm:py-5 flex flex-col items-center border-b ${p()}`,children:[m(),r&&s.jsx("h3",{className:"mt-2 sm:mt-3 text-base sm:text-lg font-bold text-gray-900 text-center",children:r})]}),s.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-5 max-h-[60vh] overflow-y-auto",children:[f,s.jsx("p",{className:"text-center text-gray-700 whitespace-pre-line text-sm sm:text-base",children:i})]}),s.jsxs("div",{className:"px-3 sm:px-4 py-3 sm:py-4 bg-gray-50 flex gap-2 sm:gap-3",children:[u&&s.jsx("button",{onClick:e,className:"flex-1 px-3 sm:px-4 py-2 sm:py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors text-sm sm:text-base",children:d}),s.jsx("button",{onClick:g,className:`flex-1 px-3 sm:px-4 py-2 sm:py-3 text-white rounded-lg font-semibold transition-colors text-sm sm:text-base ${y()}`,children:c})]})]})]})},Mv={isOpen:!1,message:"",title:void 0,type:"confirm",onConfirm:()=>{}},D3={"01":"","02":"","03":"A/S","04":"","05":"","06":"","07":"","08":"","09":""},R3={11:"",22:"",33:"",44:"IF",55:"FTTB",66:"FTTH",77:"",88:""},ld=({workType:t,workTypeName:e,custRel:n,custRelName:r,networkType:i,networkTypeName:l,installType:c,installTypeName:d,installedEquipments:u,removedEquipments:f,installLocation:m,upCtrlCl:p,upCtrlClName:y,memo:g,kpiProdGrp:N,kpiProdGrpName:C,obsRcptCd:v,obsRcptCdName:R,obsRcptDtlCd:A,obsRcptDtlCdName:M,extraItems:L=[],equipmentData:k,installInfoData:V,order:G,custRelOptions:W,installLocationText:j})=>{var H;const S=t||(G==null?void 0:G.WRK_CD)||"",P=e||(G==null?void 0:G.WRK_CD_NM)||D3[S]||"",F=r||((H=W==null?void 0:W.find(q=>q.value===n))==null?void 0:H.label),ee=i||(V==null?void 0:V.networkType)||(V==null?void 0:V.NET_CL),J=l||(V==null?void 0:V.networkTypeName)||(V==null?void 0:V.NET_CL_NM),$=c||(V==null?void 0:V.installType)||(V==null?void 0:V.INSTL_TP),Y=d||(V==null?void 0:V.installTypeName)||(V==null?void 0:V.INSTL_TP_NM),K=p||(V==null?void 0:V.upCtrlCl),w=y||(V==null?void 0:V.upCtrlClName),se=u||(k==null?void 0:k.installedEquipments)||[],oe=f||(k==null?void 0:k.removedEquipments)||[],T=m||(V?{floor:V.floor,room:V.room,position:V.position}:void 0),I=q=>{var ae,fe,ge,ce,Re,X,me,he;return(ae=q.contractEquipment)!=null&&ae.EQT_NM?q.contractEquipment.EQT_NM:(fe=q.contractEquipment)!=null&&fe.eqtNm?q.contractEquipment.eqtNm:(ge=q.contractEquipment)!=null&&ge.type?q.contractEquipment.type:(ce=q.contractEquipment)!=null&&ce.ITEM_MID_NM?q.contractEquipment.ITEM_MID_NM:(Re=q.actualEquipment)!=null&&Re.EQT_NM?q.actualEquipment.EQT_NM:(X=q.actualEquipment)!=null&&X.eqtNm?q.actualEquipment.eqtNm:(me=q.actualEquipment)!=null&&me.type?q.actualEquipment.type:(he=q.actualEquipment)!=null&&he.ITEM_MID_NM?q.actualEquipment.ITEM_MID_NM:q.EQT_NM?q.EQT_NM:q.eqtNm?q.eqtNm:q.type?q.type:q.ITEM_MID_NM?q.ITEM_MID_NM:q.name||""},U=q=>{var ae,fe,ge,ce,Re;return(ae=q.actualEquipment)!=null&&ae.EQT_SERNO?q.actualEquipment.EQT_SERNO:(fe=q.actualEquipment)!=null&&fe.eqtSerno?q.actualEquipment.eqtSerno:(ge=q.actualEquipment)!=null&&ge.serialNumber?q.actualEquipment.serialNumber:(ce=q.contractEquipment)!=null&&ce.EQT_SERNO?q.contractEquipment.EQT_SERNO:(Re=q.contractEquipment)!=null&&Re.serialNumber?q.contractEquipment.serialNumber:q.EQT_SERNO?q.EQT_SERNO:q.eqtSerno?q.eqtSerno:q.serialNumber?q.serialNumber:""},Q=j||T&&[T.floor,T.room,T.position].filter(Boolean).join(" / ")||"-";return s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-blue-200",children:[s.jsx(Vi,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-bold text-blue-800 text-sm",children:" "}),s.jsx("span",{className:"text-xs text-blue-600 ml-auto",children:P})]}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oh,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:`font-medium ${n?"text-gray-900":"text-red-500"}`,children:F||n||""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bp,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:`font-medium ${ee?"text-gray-900":"text-red-500"}`,children:J||ee||""})]}),$&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xu,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:Y||R3[$]||$})]}),K&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bp,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:w||K})]}),Q!=="-"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rd,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900 truncate max-w-[180px]",children:Q})]}),N&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cf,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:"KPI"}),s.jsx("span",{className:"font-medium text-gray-900",children:C||N})]}),v&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xu,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsxs("span",{className:"font-medium text-gray-900",children:[R||v,A&&` > ${M||A}`]})]}),(se.length>0||oe.length>0)&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Cf,{className:"w-3.5 h-3.5 text-gray-500"}),s.jsx("span",{className:"text-gray-600 font-medium",children:""})]}),s.jsxs("div",{className:"space-y-2",children:[se.length>0&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2",children:[s.jsx("div",{className:"mb-1.5",children:s.jsx("span",{className:"text-green-600 font-semibold text-xs",children:""})}),s.jsx("div",{className:"space-y-1",children:se.map((q,ae)=>s.jsxs("div",{className:"text-green-700",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-green-500 font-bold",children:"+"}),s.jsx("span",{className:"font-medium text-xs",children:I(q)})]}),U(q)&&s.jsxs("div",{className:"ml-4 text-green-600/70 text-[0.625rem] break-all",children:["S/N: ",U(q)]})]},`install-${ae}`))})]}),oe.length>0&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2",children:[s.jsx("div",{className:"mb-1.5",children:s.jsx("span",{className:"text-red-600 font-semibold text-xs",children:""})}),s.jsx("div",{className:"space-y-1",children:oe.map((q,ae)=>s.jsxs("div",{className:"text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-red-500 font-bold",children:"-"}),s.jsx("span",{className:"font-medium text-xs",children:I(q)})]}),U(q)&&s.jsxs("div",{className:"ml-4 text-red-600/70 text-[0.625rem] break-all",children:["S/N: ",U(q)]})]},`remove-${ae}`))})]})]})]}),L.map((q,ae)=>s.jsxs("div",{className:"flex items-center gap-2",children:[q.icon||s.jsx(Ch,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:q.label}),s.jsx("span",{className:`font-medium ${q.isWarning?"text-orange-600":"text-gray-900"}`,children:q.value||"-"})]},ae)),g&&s.jsx("div",{className:"mt-2 pt-2 border-t border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ch,{className:"w-3.5 h-3.5 text-gray-500 mt-0.5"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900 flex-1 break-all line-clamp-2",children:g})]})})]})]})},$i=e_()(t_((t,e)=>({currentWorkId:null,workSteps:{},currentStep:1,workItem:null,equipmentData:null,filteringData:null,removalLineData:null,setCurrentWorkId:n=>{const{workSteps:r}=e(),i=n&&r[n]||1;t({currentWorkId:n,currentStep:i})},setCurrentStep:n=>t(r=>{const i=typeof n=="function"?n(r.currentStep):n,l={...r.workSteps};return r.currentWorkId&&(l[r.currentWorkId]=i),{currentStep:i,workSteps:l}}),setWorkItem:n=>t({workItem:n}),setEquipmentData:n=>t({equipmentData:n}),setFilteringData:n=>t({filteringData:n}),setRemovalLineData:n=>t({removalLineData:n}),getStepForWork:n=>{const{workSteps:r}=e();return r[n]||1},reset:()=>t({currentWorkId:null,workSteps:{},currentStep:1,workItem:null,equipmentData:null,filteringData:null,removalLineData:null}),resetWork:n=>t(r=>{const i={...r.workSteps};return delete i[n],{workSteps:i}}),clearPreviousWorkDraft:n=>{const{currentWorkId:r,workSteps:i}=e();if(r&&r!==n){console.log(`[WorkProcessStore]  (${r}) draft `);try{localStorage.removeItem(`work_complete_draft_${r}`),localStorage.removeItem(`equipment_draft_${r}`),console.log("localStorage draft  ")}catch(c){console.error("localStorage  :",c)}const l={...i};delete l[r],t({currentWorkId:n,workSteps:l,currentStep:l[n]||1,workItem:null,equipmentData:null,filteringData:null,removalLineData:null})}else{const l=i[n]||1;t({currentWorkId:n,currentStep:l})}}}),{name:"dlive-work-process-storage",partialize:t=>({workSteps:t.workSteps,currentWorkId:t.currentWorkId,filteringData:t.filteringData,equipmentData:t.equipmentData,removalLineData:t.removalLineData})})),Bi=()=>({contractEquipments:[],technicianEquipments:[],customerEquipments:[],removeEquipments:[],installedEquipments:[],removalStatus:{},markedForRemoval:[],pendingLossStatusList:[],reuseAll:!1,selectedContract:null,selectedStock:null,signalStatus:"idle",signalResult:"",filteringData:{},lastUpdated:null,isDataLoaded:!1}),ji=e_()(t_((t,e)=>({workStates:{},currentWorkId:null,initWorkState:n=>{t(r=>r.workStates[n]?r:{...r,workStates:{...r.workStates,[n]:Bi()}})},setCurrentWorkId:n=>{t(r=>{const i={...r.workStates};return n&&!i[n]&&(i[n]=Bi()),{...r,currentWorkId:n,workStates:i}})},clearWorkState:n=>{t(r=>{const i={...r.workStates};return delete i[n],{...r,workStates:i}})},clearAllWorkStates:()=>{t({workStates:{},currentWorkId:null})},setApiData:(n,r)=>{var i,l,c,d,u,f;console.log("[Equipment Store] API  ",{workId:n,:((i=r.contractEquipments)==null?void 0:i.length)??0,:((l=r.technicianEquipments)==null?void 0:l.length)??0,:((c=r.customerEquipments)==null?void 0:c.length)??0,:((d=r.removeEquipments)==null?void 0:d.length)??0,:{contractEquipments:(u=r.contractEquipments)==null?void 0:u.map(m=>({id:m.id,model:m.model,type:m.type})),removeEquipments:(f=r.removeEquipments)==null?void 0:f.map(m=>({id:m.id,model:m.model,EQT_NO:m.EQT_NO}))}}),t(m=>{const y={...m.workStates[n]||Bi(),lastUpdated:new Date().toISOString()};return r.contractEquipments!==void 0&&(y.contractEquipments=r.contractEquipments),r.technicianEquipments!==void 0&&(y.technicianEquipments=r.technicianEquipments),r.customerEquipments!==void 0&&(y.customerEquipments=r.customerEquipments),r.removeEquipments!==void 0&&(y.removeEquipments=r.removeEquipments),r.filteringData!==void 0&&(y.filteringData=r.filteringData),{...m,workStates:{...m.workStates,[n]:y}}})},addInstalledEquipment:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi(),c=l.installedEquipments.findIndex(u=>u.contractEquipment.id===r.contractEquipment.id);let d;return c>=0?(d=[...l.installedEquipments],d[c]=r):d=[...l.installedEquipments,r],console.log("[Equipment Store]  ",{workId:n,action:c>=0?"":"",equipment:{contractId:r.contractEquipment.id,contractModel:r.contractEquipment.model,actualId:r.actualEquipment.id,actualModel:r.actualEquipment.model,EQT_CHG_GB:r.actualEquipment.EQT_CHG_GB},:d.length}),{...i,workStates:{...i.workStates,[n]:{...l,installedEquipments:d,lastUpdated:new Date().toISOString()}}}})},removeInstalledEquipment:(n,r)=>{t(i=>{const l=i.workStates[n];if(!l)return i;const c=l.installedEquipments.find(u=>u.contractEquipment.id===r),d=l.installedEquipments.filter(u=>u.contractEquipment.id!==r);return console.log("[Equipment Store]   ",{workId:n,removed:c?{contractId:c.contractEquipment.id,actualId:c.actualEquipment.id,model:c.actualEquipment.model}:null,:d.length}),{...i,workStates:{...i.workStates,[n]:{...l,installedEquipments:d,lastUpdated:new Date().toISOString()}}}})},updateInstalledEquipment:(n,r,i)=>{t(l=>{const c=l.workStates[n];if(!c)return l;const d=c.installedEquipments.findIndex(f=>f.contractEquipment.id===r);if(d<0)return l;const u=[...c.installedEquipments];return u[d]={...u[d],...i},{...l,workStates:{...l.workStates,[n]:{...c,installedEquipments:u,lastUpdated:new Date().toISOString()}}}})},setInstalledEquipments:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,installedEquipments:r,lastUpdated:new Date().toISOString()}}}})},clearInstalledEquipments:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,installedEquipments:[],lastUpdated:new Date().toISOString()}}}:r})},setRemovalStatus:(n,r,i,l)=>{t(c=>{const d=c.workStates[n]||Bi(),u=d.removalStatus[r]||{};return{...c,workStates:{...c.workStates,[n]:{...d,removalStatus:{...d.removalStatus,[r]:{...u,[i]:l}},lastUpdated:new Date().toISOString()}}}})},toggleRemovalStatus:(n,r,i)=>{t(l=>{const c=l.workStates[n]||Bi(),d=c.removalStatus[r]||{},f=(d[i]||"0")==="1"?"0":"1";return console.log("[Equipment Store] / ",{workId:n,eqtNo:r,field:{EQT_LOSS_YN:"",PART_LOSS_BRK_YN:"/",EQT_BRK_YN:"",EQT_CABL_LOSS_YN:"",EQT_CRDL_LOSS_YN:""}[i]||i,:f==="1"?"Y":"N",:{...d,[i]:f}}),{...l,workStates:{...l.workStates,[n]:{...c,removalStatus:{...c.removalStatus,[r]:{...d,[i]:f}},lastUpdated:new Date().toISOString()}}}})},setFullRemovalStatus:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,removalStatus:r,lastUpdated:new Date().toISOString()}}}})},clearRemovalStatus:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,removalStatus:{},lastUpdated:new Date().toISOString()}}}:r})},addMarkedForRemoval:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();if(l.markedForRemoval.some(u=>u.id===r.id))return i;const d=[...l.markedForRemoval,r];return console.log("[Equipment Store]  ",{workId:n,equipment:{id:r.id,model:r.model,serialNumber:r.serialNumber,itemMidCd:r.itemMidCd},:d.length}),{...i,workStates:{...i.workStates,[n]:{...l,markedForRemoval:d,lastUpdated:new Date().toISOString()}}}})},removeMarkedForRemoval:(n,r)=>{t(i=>{const l=i.workStates[n];if(!l)return i;const c=l.markedForRemoval.find(u=>u.id===r),d=l.markedForRemoval.filter(u=>u.id!==r);return console.log("[Equipment Store]  ",{workId:n,removed:c?{id:c.id,model:c.model}:null,:d.length}),{...i,workStates:{...i.workStates,[n]:{...l,markedForRemoval:d,lastUpdated:new Date().toISOString()}}}})},setMarkedForRemoval:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return console.log("[Equipment Store]   ",{workId:n,:r.length,:r.map(c=>({id:c.id,model:c.model}))}),{...i,workStates:{...i.workStates,[n]:{...l,markedForRemoval:r,lastUpdated:new Date().toISOString()}}}})},clearMarkedForRemoval:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,markedForRemoval:[],lastUpdated:new Date().toISOString()}}}:r})},addPendingLossStatus:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi(),c=l.pendingLossStatusList.filter(d=>d.EQT_SERNO!==r.EQT_SERNO);return{...i,workStates:{...i.workStates,[n]:{...l,pendingLossStatusList:[...c,r],lastUpdated:new Date().toISOString()}}}})},setPendingLossStatusList:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,pendingLossStatusList:r,lastUpdated:new Date().toISOString()}}}})},clearPendingLossStatusList:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,pendingLossStatusList:[],lastUpdated:new Date().toISOString()}}}:r})},setReuseAll:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return console.log("[Equipment Store]   ",{workId:n,value:r?"Y":"N"}),{...i,workStates:{...i.workStates,[n]:{...l,reuseAll:r,lastUpdated:new Date().toISOString()}}}})},setSelectedContract:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,selectedContract:r}}}})},setSelectedStock:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,selectedStock:r}}}})},clearSelection:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,selectedContract:null,selectedStock:null}}}:r})},setSignalStatus:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,signalStatus:r}}}})},setSignalResult:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,signalResult:r}}}})},setDataLoaded:(n,r)=>{t(i=>{const l=i.workStates[n]||Bi();return{...i,workStates:{...i.workStates,[n]:{...l,isDataLoaded:r}}}})},getCurrentWorkState:()=>{const{currentWorkId:n,workStates:r}=e();return n&&r[n]||null},getWorkState:n=>e().workStates[n]||null}),{name:"dlive-work-equipment-storage",partialize:t=>({workStates:Object.fromEntries(Object.entries(t.workStates).map(([e,n])=>[e,{installedEquipments:n.installedEquipments,removalStatus:n.removalStatus,markedForRemoval:n.markedForRemoval,pendingLossStatusList:n.pendingLossStatusList,reuseAll:n.reuseAll,signalStatus:n.signalStatus,signalResult:n.signalResult,filteringData:n.filteringData,lastUpdated:n.lastUpdated}])),currentWorkId:t.currentWorkId}),merge:(t,e)=>{const n={...e};if(t!=null&&t.workStates){n.workStates={};for(const[r,i]of Object.entries(t.workStates))n.workStates[r]={...Bi(),...i}}return t!=null&&t.currentWorkId&&(n.currentWorkId=t.currentWorkId),n}})),Lv={workId:null,state:null,isReady:!1,contractEquipments:[],technicianEquipments:[],customerEquipments:[],removeEquipments:[],installedEquipments:[],removalStatus:{},markedForRemoval:[],pendingLossStatusList:[],selectedContract:null,selectedStock:null,signalStatus:"idle",signalResult:"",filteringData:{}},oa=t=>{const e=ji(n=>t?n.workStates[t]??null:null);return t?e?{workId:t,state:e,isReady:e.isDataLoaded??!1,contractEquipments:e.contractEquipments??[],technicianEquipments:e.technicianEquipments??[],customerEquipments:e.customerEquipments??[],removeEquipments:e.removeEquipments??[],installedEquipments:e.installedEquipments??[],removalStatus:e.removalStatus??{},markedForRemoval:e.markedForRemoval??[],pendingLossStatusList:e.pendingLossStatusList??[],selectedContract:e.selectedContract??null,selectedStock:e.selectedStock??null,signalStatus:e.signalStatus??"idle",signalResult:e.signalResult??"",filteringData:e.filteringData??{}}:{...Lv,workId:t}:Lv},od=()=>{const t=cb();return BM({mutationFn:e=>_4(e),onSuccess:e=>(t.invalidateQueries({queryKey:["workOrders"]}),console.log(" [useCompleteWork]    -    "),e),onError:e=>{console.error(" [useCompleteWork]   :",e)}})},Ny=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1,certifyMode:c=!1,certifyReason:d})=>{var Qt,ut,qt,jt;const u=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[f,m]=_.useState(""),[p,y]=_.useState(!1),g=f==="0"||f==="1"||f==="4",[N,C]=_.useState(!1),{equipmentData:v,filteringData:R}=$i(),{certifyRegconfInfo:A}=Wa(),M=t.id||"",L=oa(M),k={...v||i||R||{},installedEquipments:L.installedEquipments.length>0?L.installedEquipments:(v==null?void 0:v.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:L.markedForRemoval.length>0?L.markedForRemoval:(v==null?void 0:v.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(L.removalStatus).length>0?L.removalStatus:(v==null?void 0:v.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:V,isPending:G}=od(),W=()=>`work_complete_draft_${t.id}`,[j,S]=_.useState(""),[P,F]=_.useState(""),[ee,J]=_.useState(""),[$,Y]=_.useState(!1),[K,w]=_.useState(""),[se,oe]=_.useState(""),[T,I]=_.useState(void 0),[U,Q]=_.useState(!1),[H,q]=_.useState(!1),[ae,fe]=_.useState(""),[ge,ce]=_.useState(""),[Re,X]=_.useState(""),[me,he]=_.useState(""),[Z,ie]=_.useState(""),[te,je]=_.useState(""),[be,Te]=_.useState(!1),[re,pe]=_.useState(""),[Se,st]=_.useState([]),[Nt,lt]=_.useState(!1),[At,ot]=_.useState([]),[We,Dt]=_.useState(!1),[Et,Rt]=_.useState(""),[$e,gt]=_.useState(!1),[Fe,rt]=_.useState([]),[at,It]=_.useState(!1),[ht,Je]=_.useState(""),[ve,Ge]=_.useState(!1),[_e,xe]=_.useState("B"),[Ue,Pe]=_.useState(!1),[Ye,mt]=_.useState(null),[de,tt]=_.useState([]),[De,it]=_.useState([]),[St,Lt]=_.useState([]),[Ve,kt]=_.useState([]),[Oe,Xt]=_.useState([]),[rs,ds]=_.useState(()=>{const ue=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(ue&&ue.length>=8)return`${ue.slice(0,4)}-${ue.slice(4,6)}-${ue.slice(6,8)}`;const Ce=new Date;return Ce.getFullYear()+"-"+String(Ce.getMonth()+1).padStart(2,"0")+"-"+String(Ce.getDate()).padStart(2,"0")});_.useEffect(()=>{if(u){console.log("[WorkCompleteInstall]   - getWorkReceiptDetail API "),(async()=>{try{const Le=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(Le){console.log("[WorkCompleteInstall] API :",Le);const Ie=Le.INSTL_LOC||"";if(Ie.includes("")){const[Ee,pt]=Ie.split("");fe(Ee),ce(pt)}else fe(Ie),ce(Le.VIEW_MOD_CD||""),X(Le.VIEW_MOD_NM||"");const Ze=Le.UP_CTRL_CL||(k==null?void 0:k.upCtrlCl)||"";console.log("[CompleteInstall]  :",{API:Le.UP_CTRL_CL,:k==null?void 0:k.upCtrlCl,:Ze}),F(Ze),he(Le.PSN_USE_CORP||""),ie(Le.VOIP_USE_CORP||""),je(Le.DTV_USE_CORP||""),w(Le.NET_CL||""),oe(Le.NET_CL_NM||""),I({NET_CL:Le.NET_CL||"",NET_CL_NM:Le.NET_CL_NM||"",WRNG_TP:Le.WRNG_TP||"",INSTL_TP:Le.INSTL_TP||"",CB_WRNG_TP:Le.CB_WRNG_TP||"",CB_INSTL_TP:Le.CB_INSTL_TP||"",INOUT_LINE_TP:Le.INOUT_LINE_TP||"",INOUT_LEN:Le.INOUT_LEN||"",DVDR_YN:Le.DVDR_YN||"",BFR_LINE_YN:Le.BFR_LINE_YN||"",CUT_YN:Le.CUT_YN||"",TERM_NO:Le.TERM_NO||"",RCV_STS:Le.RCV_STS||"",SUBTAP_ID:Le.SUBTAP_ID||"",PORT_NUM:Le.PORT_NUM||"",EXTN_TP:Le.EXTN_TP||"",TAB_LBL:Le.TAB_LBL||"",CVT_LBL:Le.CVT_LBL||"",STB_LBL:Le.STB_LBL||""}),S(Le.CUST_REL||""),J((Le.WRK_PROC_CT||"").replace(/\\n/g,`
`)),Le.VOIP_JOIN_CTRT_ID&&pe(Le.VOIP_JOIN_CTRT_ID),Le.WRKR_CMPL_DT&&Le.WRKR_CMPL_DT.length>=8&&ds(`${Le.WRKR_CMPL_DT.slice(0,4)}-${Le.WRKR_CMPL_DT.slice(4,6)}-${Le.WRKR_CMPL_DT.slice(6,8)}`)}else console.log("[WorkCompleteInstall] API  - order  "),S(t.CUST_REL||""),w(t.NET_CL||""),oe(t.NET_CL_NM||"")}catch(Le){console.error("[WorkCompleteInstall] API  :",Le),S(t.CUST_REL||""),w(t.NET_CL||""),oe(t.NET_CL_NM||"")}finally{C(!0)}})();return}const ue=localStorage.getItem(W());if(ue)try{const Ce=JSON.parse(ue);S(Ce.custRel||""),F(Ce.upCtrlCl||""),J(Ce.memo||""),he(Ce.internetUse||""),ie(Ce.voipUse||""),je(Ce.dtvUse||""),w(Ce.networkType||""),oe(Ce.networkTypeName||""),I(Ce.installInfoData),fe(Ce.installLocationText||""),ce(Ce.viewModCd||""),X(Ce.viewModNm||""),Ce.voipJoinCtrtId&&pe(Ce.voipJoinCtrtId)}catch(Ce){console.error("[WorkCompleteInstall] localStorage  :",Ce)}C(!0)},[t.id,u]),_.useEffect(()=>{if(!N||u)return;const ue={custRel:j,upCtrlCl:P,memo:ee,internetUse:me,voipUse:Z,dtvUse:te,networkType:K,networkTypeName:se,installInfoData:T,installLocationText:ae,viewModCd:ge,viewModNm:Re,voipJoinCtrtId:re,savedAt:new Date().toISOString()};localStorage.setItem(W(),JSON.stringify(ue))},[j,P,ee,me,Z,te,K,se,T,ae,ge,Re,re,N,u]),_.useEffect(()=>{(async()=>{try{const Ce=await Jl(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);Ce.CMCU005&&tt(Ce.CMCU005.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM}))),Ce.CMCT015&&(console.log("[CompleteInstall]  CMCT015 :",Ce.CMCT015),it(Ce.CMCT015.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM})))),Ce.CMCU057&&Lt(Ce.CMCU057.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM}))),Ce.CMCU110&&kt(Ce.CMCU110.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM}))),Ce.CMCU148&&Xt(Ce.CMCU148.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM})))}catch(Ce){console.error("[WorkCompleteInstall]    :",Ce)}})()},[]),_.useEffect(()=>{(async()=>{var Ce;if(!(!t.id||u)){y(!0);try{console.log("[CompleteInstall] OST  :",t.id);const Le=await Xp({WRK_ID:t.id,RCPT_ID:t.RCPT_ID,CUST_ID:(Ce=t.customer)==null?void 0:Ce.id});if(Le){const Ie=Le.OST_WORKABLE_STAT||"";console.log("[CompleteInstall] OST  :",Ie),m(Ie),(Ie==="0"||Ie==="1"||Ie==="4")&&(r==null||r("    .","warning",!0))}}catch(Le){console.error("[CompleteInstall] OST   :",Le)}finally{y(!1)}}})()},[t.id,t.RCPT_ID,(Qt=t.customer)==null?void 0:Qt.id,u]),_.useEffect(()=>{console.log("[CompleteInstall] OST  :",{OST_WORKABLE_STAT:f,isOstBlocked:g,isOstChecking:p,isWorkCompleted:u,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,:f==="0"?"":f==="1"?"":f==="2"?"":f==="3"?"":f==="4"?"/":f==="X"?"OST":f===""?"  ":""})},[f,g,p,u]),_.useEffect(()=>{(async()=>{try{const Ce=await mc(),Le=(Ce==null?void 0:Ce.output)||Ce||[];rt(Le);const Ie=t.PROD_CD||t.PROD_CD||"",Ze=Le.some(Ee=>Ee.PROD_CD===Ie);gt(Ze),console.log("[CompleteInstall] LGHV :",{currentProdCd:Ie,isLghv:Ze,prodListCount:Le.length})}catch(Ce){console.error("[CompleteInstall] LGHV   :",Ce)}})()},[t.PROD_CD]),_.useEffect(()=>{(async()=>{const Ce=t.PROD_CD||t.PROD_CD||"",Le=(k==null?void 0:k.prodPromoInfo)||[];if(Ce==="PD10018480")console.log("[CompleteInstall] OTT   :",Ce),Ge(!0),xe("C");else if(Le.some(Ee=>Ee.PROD_CD==="PD10018160"))console.log("[CompleteInstall] OTT   : PD10018160"),Ge(!0),xe("B");else{Ge(!1);return}const Ie=t.id||"",Ze=t.directionId||t.WRK_DRCTN_ID||"";if(Ie&&Ze)try{const Ee=await Jp({WRK_ID:Ie,WRK_DRCTN_ID:Ze,DATA_TYPE:Ce==="PD10018480"?"C":"B"});Ee!=null&&Ee.EQT_SERNO&&(console.log("[CompleteInstall]  OTT :",Ee.EQT_SERNO),Je(Ee.EQT_SERNO))}catch(Ee){console.error("[CompleteInstall] OTT   :",Ee)}})()},[t.PROD_CD,t.id,t.directionId,k==null?void 0:k.prodPromoInfo]),_.useEffect(()=>{k!=null&&k.upCtrlCl&&!P?(console.log("[CompleteInstall] equipmentData  :",k.upCtrlCl),F(k.upCtrlCl)):!P&&N&&!u&&(console.log("[CompleteInstall]   : 01 ()"),F("01"))},[k==null?void 0:k.upCtrlCl,N,u,P]),_.useEffect(()=>{var Le,Ie;if(u)return;const ue=((Le=t.customer)==null?void 0:Le.id)||t.CUST_ID||t.customerId;if(console.log("[WorkCompleteInstall] CUST_ID :",{"order.customer?.id":(Ie=t.customer)==null?void 0:Ie.id,"order.CUST_ID":t.CUST_ID,"order.customerId":t.customerId,custId:ue}),!ue){console.log("[WorkCompleteInstall] CUST_ID  -    ");return}(async()=>{try{console.log("[WorkCompleteInstall]     :",ue);const Ze=await jf({CUST_ID:ue});console.log("[WorkCompleteInstall]   :",Ze),ot(Ze||[])}catch(Ze){console.error("[WorkCompleteInstall]     :",Ze),ot([])}})()},[(ut=t.customer)==null?void 0:ut.id,t.CUST_ID,u]),_.useEffect(()=>{if(u)return;if(At.length===0){console.log("[WorkCompleteInstall]     ...");return}const ue=t.PROD_GRP||"",Ce=t.VOIP_PROD_CD||"",Le=t.ISP_PROD_CD||"",Ie=t.WRK_STAT_CD||"",Ze=t.ADDR_ORD||"";if(console.log("[WorkCompleteInstall]   :",{prodGrp:ue,voipProdCd:Ce,ispProdCd:Le,wrkStatCd:Ie,addrOrd:Ze,customerCtrtListCount:At.length}),ue==="V"&&!Ce){const Ee=At.filter(Ke=>{const Ct=Ke.PROD_GRP||"",bt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"";return(Ct==="C"||Ct==="D"||Ct==="I")&&bt==="20"&&(!Ze||He===Ze)});console.log("[WorkCompleteInstall] VoIP   :",Ee),Ee.length<1&&Ie==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const pt=[{value:"",label:""},...Ee.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];st(pt),lt(!0);return}if(ue==="I"&&Le){const Ee=At.filter(Ke=>{const Ct=Ke.PROD_GRP||"",bt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"",ct=Ke.ISP_JOIN_ID||"",wt=Ke.KPI_PROD_GRP_CD||"";return(Ct==="D"||Ct==="C")&&bt==="20"&&!ct&&wt==="D"&&(!Ze||He===Ze)});console.log("[WorkCompleteInstall] ISP   :",Ee),Ee.length<1&&Ie==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const pt=[{value:"",label:""},...Ee.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];st(pt),lt(!0);return}lt(!1),st([])},[t.id,t.WRK_STAT_CD,u,r,At]);const Ss=()=>{const ue=[];(!j||j==="[]")&&ue.push("  ."),T!=null&&T.NET_CL||ue.push(" ."),!t.installLocation&&!ae&&ue.push(" ."),rs||ue.push(" .");const Ce=t.PROD_GRP||"",Le=t.VOIP_PROD_CD||"",Ie=t.ISP_PROD_CD||"";Ce==="V"&&!Le&&Nt&&(re||ue.push("VOIP    .")),Ce==="I"&&Ie&&Nt&&(re||ue.push("  ISP .    ."));const Ze=(k==null?void 0:k.installedEquipments)||[];return Ce!=="V"&&Ze.length<1&&ue.push("()  ."),ve&&!ht&&ue.push("OTT   OTT BOX   ."),ue},Ns=ue=>{I(ue),ue.NET_CL&&w(ue.NET_CL),ue.NET_CL_NM&&oe(ue.NET_CL_NM),r==null||r("  .","success")},ke=()=>{if(G)return;if(g){r==null||r("    .","warning");return}const ue=Ss();if(ue.length>0){ue.forEach(Le=>r==null?void 0:r(Le,"error"));return}(t.PROD_GRP||"")!=="V"?Pe(!0):(Rt(" ?"),Dt(!0))},dt=ue=>{mt(ue),Pe(!1),Rt(" ?"),Dt(!0)},et=async()=>{var He,ct,wt,Bt;console.log("[WorkCompleteInstall]   ");const ue=rs.replace(/-/g,""),Ce=localStorage.getItem("userInfo"),Le=Ce?JSON.parse(Ce):{},Ie=Le.userId||"A20130708",Ze=c||Lh(t.OP_LNKD_CD);let Ee="";if(Ze){let Vt=(k==null?void 0:k.prodPromoInfo)||[];if(Vt.length===0)try{console.log("[CompleteInstall] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),Vt=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"01"}),console.log("[CompleteInstall] getProdPromotionInfo fallback :",Vt.length,"")}catch(ss){console.log("[CompleteInstall] getProdPromotionInfo fallback :",ss)}const Jt=Vt.filter(ss=>(ss.PROD_CMPS_CL==="21"||ss.PROD_CMPS_CL==="22")&&ss.PROD_STAT_CD==="10").map(ss=>ss.PROD_CD).filter(ss=>ss);Ee=Jt.join(","),console.log("[CompleteInstall] ADD_ON :",Ee,"(",Jt.length," )")}const pt=(k==null?void 0:k.installedEquipments)||[];if(Ze&&pt.length>0&&!A){r==null||r("  .","error");return}if(Ze&&A)try{const Vt=await _g({order:t,workerId:Ie,certifyRegconfInfo:A,addOnParam:Ee,reason:d||""});if(!Vt.success){r==null||r(` : ${Vt.message}`,"error");return}console.log("[CompleteInstall] CL-04    ")}catch(Vt){console.error("[CompleteInstall] CL-04  :",Vt),r==null||r(`  : ${Vt.message||"   "}`,"error");return}const Ke=async()=>{var ys,Ps;const Vt=(k==null?void 0:k.installedEquipments)||[],Jt=!!t.ISP_PROD_CD;let ss=!1;const Wt=(k==null?void 0:k.customerEquipments)||Vt;for(const xs of Wt){const vs=xs.actualEquipment||xs,Ms=vs.eqtClCd||vs.EQT_CL_CD||"";if(Ms==="090901"||Ms==="091001"||Ms==="091005")continue;(vs.EQT_KND||vs.eqtKnd||"WRKER")==="WRKER"&&(ss=!0)}if(Wt.some(xs=>{const vs=xs.actualEquipment||xs;return(vs.itemMidCd||vs.ITEM_MID_CD)==="23"})&&(ss=!1),Jt&&(ss=!0),await Cg(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD)&&(ss=!1),ss&&(Vt.length>0||Jt))try{const xs=t.PROD_GRP||"";let vs="SMR03",Ms="",cs="",ms="",Ks="",Ls="",nt="";$e&&(vs="STB_CRT"),xs==="V"&&(vs="SMR60");let Kt=(k==null?void 0:k.prodPromoInfo)||[];if(Kt.length===0)try{Kt=await dl({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:Ie,PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"01",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||"",WRK_CD:t.WRK_CD||"01",WRK_STAT_CD:t.WRK_STAT_CD||""})}catch(Is){console.log("[CompleteInstall] prodPromoInfo  :",Is)}const Cs=((ys=Kt.find(Is=>Is.PROD_CMPS_CL==="23"))==null?void 0:ys.PROD_CMPS_ID)||"",Ht=Kt.find(Is=>Is.PROD_CMPS_CL==="11"),Os=(Ht==null?void 0:Ht.PROD_CD)||"",es=(Ht==null?void 0:Ht.PROD_GRP)||xs,Ds=Kt.filter(Is=>Is.BASIC_PROD_FL==="V").map(Is=>Is.PROD_CD),js=Ds.length>0?Ds.join(","):"",hs=Is=>{const ps=Vt.find(Ir=>{const qr=Ir.actualEquipment||Ir;return(qr.itemMidCd||qr.ITEM_MID_CD)===Is});if(!ps)return"";const Lr=ps.actualEquipment||ps;return Lr.id||Lr.EQT_NO||""};t.VOIP_PROD_CD?(Ms=hs("08"),cs=hs("02")):(Ms=hs("05")||hs("01")||hs("03")||(es==="I"?hs("02"):"")||hs("08")||"",cs=hs("04"),!cs&&es==="A"&&(cs=(T==null?void 0:T.NET_CL)||"")),ms=hs("07"),es==="C"&&(Ks=hs("02")),es==="V"&&(Ls=hs("10")),Jt&&(Ls=hs("21")),(xs==="V"||Jt)&&(nt=re||t.CTRT_ID||"");let Us=t.id||"";for(const Is of Vt){const ps=Is.actualEquipment||Is,Lr=ps.eqtClCd||ps.EQT_CL_CD||"";if(Lr==="091003"||Lr==="091004"){Us=ps.id||ps.EQT_NO||t.id||"";break}if(Lr==="092201"){Us=ps.macAddress||ps.MAC_ADDRESS||ps.id||ps.EQT_NO||t.id||"";break}}console.log("[CompleteInstall]   :",{msgId:vs,eqtNo:Ms,prodCd:Os,subProdCd:js,etc1:cs,etc2:ms,etc3:Ks,etc4:Ls});const Qs=await la({MSG_ID:vs,CUST_ID:((Ps=t.customer)==null?void 0:Ps.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:Ms,EQT_PROD_CMPS_ID:Cs,PROD_CD:Os,ITV_USR_ID:"",IP_CNT:"",ETC_1:cs,ETC_2:ms,ETC_3:Ks,ETC_4:Ls,SUB_PROD_CD:js,IF_DTL_ID:"",WRK_ID:Us,REG_UID:Ie,VOIP_JOIN_CTRT_ID:nt,WTIME:"3"});Qs.code!=="SUCCESS"&&Qs.code!=="OK"?console.warn("[CompleteInstall]    :",Qs.message):console.log("[CompleteInstall]    ")}catch(xs){console.log("[CompleteInstall]      (  ):",xs)}},Ct=(Vt,Jt=!1)=>{if(!Vt||Vt.length===0)return[];const ss=(k==null?void 0:k.removalStatus)||{};return Vt.map(Wt=>{var xs,vs,Ms;const Es=Wt.EQT_NO||Wt.id||((xs=Wt.actualEquipment)==null?void 0:xs.id)||"",ys=ss[Es]||{},Ps=Jt?{CRR_TSK_CL:t.WRK_CD||"01",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Le.crrId||"01",WRKR_ID:Ie,EQT_LOSS_YN:ys.isLost?"1":"0",EQT_BRK_YN:ys.isDamaged?"1":"0",REUSE_YN:ys.isReusable?"1":"0"}:{};if(Wt.actualEquipment){const cs=Wt.actualEquipment,ms=Wt.contractEquipment||{};return{...cs,EQT_NO:cs.id,EQT_SERNO:cs.serialNumber,ITEM_MID_CD:cs.itemMidCd,EQT_CL_CD:cs.eqtClCd,MAC_ADDRESS:Wt.macAddress||cs.macAddress,WRK_ID:t.id,CUST_ID:(vs=t.customer)==null?void 0:vs.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:ms.id||ms.SVC_CMPS_ID||cs.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:cs.BASIC_PROD_CMPS_ID||ms.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:cs.EQT_PROD_CMPS_ID||ms.id,PROD_CD:cs.PROD_CD||ms.PROD_CD||t.PROD_CD||"",SVC_CD:cs.SVC_CD||ms.SVC_CD||"",EQT_SALE_AMT:cs.EQT_SALE_AMT||"0",MST_SO_ID:cs.MST_SO_ID||t.SO_ID||"",SO_ID:cs.SO_ID||t.SO_ID||"",REG_UID:Ie,CHG_UID:Ie,OLD_LENT_YN:cs.OLD_LENT_YN||"N",LENT:cs.LENT||"10",LENT_KND:cs.LENT_KND||"",ITLLMT_PRD:cs.ITLLMT_PRD||"00",EQT_USE_STAT_CD:cs.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:cs.IF_DTL_ID||"",...Ps}}return{...Wt,EQT_NO:Wt.EQT_NO||Wt.id||"",EQT_SERNO:Wt.EQT_SERNO||Wt.serialNumber||"",ITEM_MID_CD:Wt.ITEM_MID_CD||Wt.itemMidCd||"",EQT_CL_CD:Wt.EQT_CL_CD||Wt.eqtClCd||"",MAC_ADDRESS:Wt.MAC_ADDRESS||Wt.macAddress||"",SVC_CMPS_ID:Wt.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Wt.BASIC_PROD_CMPS_ID||"",PROD_CD:Wt.PROD_CD||"",SVC_CD:Wt.SVC_CD||"",WRK_ID:Wt.WRK_ID||t.id,CUST_ID:Wt.CUST_ID||((Ms=t.customer)==null?void 0:Ms.id),CTRT_ID:Wt.CTRT_ID||t.CTRT_ID,WRK_CD:Wt.WRK_CD||t.WRK_CD,REG_UID:Ie,CHG_UID:Ie,LENT_KND:Wt.LENT_KND||"",...Ps}})},bt={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(He=t.customer)==null?void 0:He.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Le.crrId||"01",WRKR_ID:Ie,WRKR_CMPL_DT:ue,MEMO:ee||" ",STTL_YN:"Y",REG_UID:Ie,CUST_REL:j,CNFM_CUST_NM:(ct=t.customer)==null?void 0:ct.name,CNFM_CUST_TELNO:((wt=t.customer)==null?void 0:wt.contactNumber)||"",REQ_CUST_TEL_NO:((Bt=t.customer)==null?void 0:Bt.contactNumber)||"",INSTL_LOC:t.installLocation||ae||"",UP_CTRL_CL:P||"",PSN_USE_CORP:me||"",VOIP_USE_CORP:Z||"",DTV_USE_CORP:te||"",WRK_ACT_CL:"20",NET_CL:(T==null?void 0:T.NET_CL)||"",WRNG_TP:(T==null?void 0:T.WRNG_TP)||"",INSTL_TP:(T==null?void 0:T.INSTL_TP)||"",CB_WRNG_TP:(T==null?void 0:T.CB_WRNG_TP)||"",CB_INSTL_TP:(T==null?void 0:T.CB_INSTL_TP)||"",INOUT_LINE_TP:(T==null?void 0:T.INOUT_LINE_TP)||"",INOUT_LEN:(T==null?void 0:T.INOUT_LEN)||"",DVDR_YN:(T==null?void 0:T.DVDR_YN)||"",BFR_LINE_YN:(T==null?void 0:T.BFR_LINE_YN)||"",CUT_YN:(T==null?void 0:T.CUT_YN)||"",TERM_NO:(T==null?void 0:T.TERM_NO)||"",RCV_STS:(T==null?void 0:T.RCV_STS)||"",SUBTAP_ID:(T==null?void 0:T.SUBTAP_ID)||"",PORT_NUM:(T==null?void 0:T.PORT_NUM)||"",EXTN_TP:(T==null?void 0:T.EXTN_TP)||"",TAB_LBL:(T==null?void 0:T.TAB_LBL)||"",CVT_LBL:(T==null?void 0:T.CVT_LBL)||"",STB_LBL:(T==null?void 0:T.STB_LBL)||"",KPI_PROD_GRP:"",OBS_RCPT_CD:"",OBS_RCPT_DTL_CD:"",VOIP_JOIN_CTRT_ID:re||"",AGREE_YN:"",ISP_YN:"",AGREE_GB:"",CUST_CLEAN_YN:"",EQT_RMV_FLAG:"",TV_TYPE:"",ADD_ON:Ee||""},equipmentList:Ct((k==null?void 0:k.installedEquipments)||[],!1),removeEquipmentList:Ct((k==null?void 0:k.removedEquipments)||[],!0),spendItemList:(k==null?void 0:k.spendItems)||[],agreementList:(k==null?void 0:k.agreements)||[],poleList:Ye?[{WRK_ID:t.id,POLE_YN:Ye.POLE_YN,LAN_GB:Ye.LAN_GB||"",REG_UID:Ie}]:[]};V(bt,{onSuccess:Vt=>{Vt.code==="SUCCESS"||Vt.code==="OK"?(localStorage.removeItem(W()),t.WRK_STAT_CD="3",Ke(),r==null||r("  .","success"),n()):r==null||r(Vt.message||"   .","error",!0)},onError:Vt=>{r==null||r(Vt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[G&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",Nt&&!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),Nt?s.jsx(Zs,{value:re,onValueChange:pe,options:Se,placeholder:" ",required:!0,disabled:u}):s.jsx("input",{type:"text",value:"",readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:se||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>Y(!0),className:`min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:u?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:j,onValueChange:S,options:de,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-xs sm:text-sm",children:[s.jsx("span",{className:"truncate",children:ae||t.installLocation||""}),Re&&s.jsxs("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm text-gray-500 flex-shrink-0 whitespace-nowrap",children:["(: ",Re,")"]})]}),s.jsxs("button",{type:"button",onClick:()=>q(!0),className:`min-h-10 sm:min-h-12 px-3 sm:px-4 rounded-lg font-bold transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm flex-shrink-0 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:[s.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{children:u?"":""})]})]})]}),((k==null?void 0:k.kpiProdGrpCd)==="D"||(k==null?void 0:k.prodGrp)==="D"||t.PROD_GRP==="D"||(t.PROD_NM||"").includes("DTV"))&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx(Zs,{value:P,onValueChange:F,options:De,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:ee,onChange:ue=>J(ue.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${u?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:u,disabled:u}),!u&&s.jsxs("p",{className:`text-xs text-right mt-1 ${ee.length>=500?"text-red-500":"text-gray-400"}`,children:[ee.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:rs,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>Te(!be),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${be?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),be&&s.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"DTV ()"}),s.jsx(Zs,{value:te,onValueChange:je,options:Oe,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"ISP ()"}),s.jsx(Zs,{value:me,onValueChange:he,options:St,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"VoIP (VoIP)"}),s.jsx(Zs,{value:Z,onValueChange:ie,options:Ve,placeholder:"",disabled:u})]})]})]}),ve&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["OTT BOX  ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:ht,readOnly:!0,placeholder:"SER_NO   ",className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-600"}),s.jsxs("button",{type:"button",onClick:()=>It(!0),disabled:u,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${u?"bg-gray-400 text-white cursor-not-allowed":ht?"bg-green-500 hover:bg-green-600 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"SER_NO"]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!u&&s.jsx("button",{onClick:ke,disabled:G||p||g,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${G||p||g?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:G?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>Q(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:$,onClose:()=>Y(!1),onSave:Ns,workId:t.id,initialData:T,workType:t.WRK_CD,customerId:t.customer.id,customerName:t.customer.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(k==null?void 0:k.kpiProdGrpCd)||(k==null?void 0:k.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(k==null?void 0:k.prodChgGb)||(k==null?void 0:k.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(k==null?void 0:k.chgKpiProdGrpCd)||(k==null?void 0:k.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(k==null?void 0:k.prodGrp)||(k==null?void 0:k.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:u}),s.jsx(Ba,{isOpen:U,onClose:()=>Q(!1),ctrtId:t.CTRT_ID,custId:t.customer.id}),s.jsx(If,{isOpen:H,onClose:()=>q(!1),onSave:ue=>{fe(ue.INSTL_LOC),ce(ue.VIEW_MOD_CD),X(ue.VIEW_MOD_NM),q(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(k==null?void 0:k.prodGrp)||(k==null?void 0:k.PROD_GRP),initialInstlLoc:ae||t.installLocation,initialViewModCd:ge,initialViewModNm:Re,showToast:r,readOnly:u}),s.jsx(ul,{isOpen:We,onClose:()=>Dt(!1),onConfirm:et,title:" ",message:Et,type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{workType:"01",workTypeName:"",custRel:j,custRelName:(qt=de.find(ue=>ue.value===j))==null?void 0:qt.label,networkType:K,networkTypeName:se,upCtrlCl:P,upCtrlClName:(jt=De.find(ue=>ue.value===P))==null?void 0:jt.label,installedEquipments:(k==null?void 0:k.installedEquipments)||[],removedEquipments:(k==null?void 0:k.removedEquipments)||[],installLocation:ae?{position:ae}:void 0,memo:ee})}),s.jsx(yg,{isOpen:Ue,onClose:()=>Pe(!1),onSave:dt,soId:t.SO_ID||""}),s.jsx(yb,{isOpen:at,onClose:()=>It(!1),onSave:ue=>{Je(ue),r==null||r("OTT  .","success")},wrkId:t.id||"",wrkDrctnId:t.directionId||t.WRK_DRCTN_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",dataType:_e,showToast:r,readOnly:u})]})},bb=({custId:t,rcptId:e,ctrtId:n,soId:r,termHopeDt:i,wrkCd:l,wrkStatCd:c,showToast:d,onHotbillConfirmChange:u,onSimulatingChange:f,readOnly:m=!1})=>{const[p,y]=_.useState(null),[g,N]=_.useState(!0),[C,v]=_.useState(!1),[R,A]=_.useState(null),[M,L]=_.useState([]),[k,V]=_.useState(0),[G,W]=_.useState(!1),[j,S]=_.useState(!1),[P,F]=_.useState(!1),[ee,J]=_.useState(!1),[$,Y]=_.useState(!1),[K,w]=_.useState(!1),[se,oe]=_.useState(!1),T=l==="02"&&c!=="7",I=()=>{const fe=new Date;return fe.getFullYear().toString()+String(fe.getMonth()+1).padStart(2,"0")+String(fe.getDate()).padStart(2,"0")},U=fe=>{if(!fe)return"-";const ge=fe.replace(/-/g,"");return ge.length>=8?`${ge.slice(0,4)}-${ge.slice(4,6)}-${ge.slice(6,8)}`:fe},Q=fe=>fe.toLocaleString("ko-KR"),H=async()=>{if(!t||!e){N(!1);return}N(!0),A(null);try{const fe=await Nv(t,e);y(fe);const ge=fe&&fe.details&&fe.details.length>0;if(W(ge),ge&&fe.details.length>0){const X=fe.details[0],me=X.BILL_SEQ_NO||"",he=X.PROD_GRP||"",Z=X.SO_ID||r||"",ie=X.CTRT_ID||n||"",te=X.CLC_WRK_CL||"4";if(console.log("[HotbillSection] Step 2 -   :",{billSeqNo:me,prodGrp:he,detailSoId:Z,clcWrkCl:te,rcptId:e}),me&&he&&Z&&e)try{const je=await Sv(me,he,Z,te,e);console.log("[HotbillSection]   :",je);let be="",Te=ie;if(je.length>0){const re=je.find(pe=>pe.CTRT_ID===ie);re?(be=re.CLC_WRK_NO,Te=re.CTRT_ID):(be=je[0].CLC_WRK_NO,Te=je[0].CTRT_ID||ie)}if(console.log("[HotbillSection] Step 3 -   :",{billSeqNo:me,clcWrkNo:be,targetCtrtId:Te}),me&&be&&Te){const re=await vv(me,be,Te);console.log("[HotbillSection] ==========    =========="),console.log("[HotbillSection]  :",re.length),re.forEach((st,Nt)=>{console.log(`[HotbillSection] [${Nt}] CHRG_ITEM_NM: ${st.CHRG_ITEM_NM}, BILL_AMT: ${st.BILL_AMT}, REQ_YN: ${st.REQ_YN}, SORT_SEQ: ${st.SORT_SEQ}`)});const pe=re.filter(st=>st.BILL_AMT>0||st.REQ_YN==="Y").sort((st,Nt)=>parseInt(st.SORT_SEQ||"0")-parseInt(Nt.SORT_SEQ||"0"));console.log("[HotbillSection] ==========    (BILL_AMT > 0 OR REQ_YN = Y) =========="),console.log("[HotbillSection]   :",pe.length),pe.forEach((st,Nt)=>{console.log(`[HotbillSection] [${Nt}] CHRG_ITEM_NM: ${st.CHRG_ITEM_NM}, BILL_AMT: ${st.BILL_AMT}, REQ_YN: ${st.REQ_YN}, SORT_SEQ: ${st.SORT_SEQ}`)}),L(pe);const Se=pe.reduce((st,Nt)=>st+Nt.BILL_AMT,0);console.log("[HotbillSection] :",Se),V(Se)}}catch(je){console.warn("[HotbillSection]    ():",je)}}const ce=I(),Re=(i||"").replace(/-/g,"");!ge||Re>ce?S(!0):S(!1)}catch(fe){console.error("[HotbillSection]  :",fe),A("  "),W(!1),S(!0)}finally{N(!1)}},q=async()=>{if(!t||!n||!r){d==null||d("    ","error");return}const fe=I();v(!0),f==null||f(!0),A(null);try{const ge=await j4({CUST_ID:t,CTRT_ID:n,SO_ID:r,HOPE_DT:fe,CLC_WRK_CL:"2",PNTY_EXMP_YN:"N"});if(ge.code==="SUCCESS"||ge.code==="OK"){d==null||d("  .","success"),F(!0);const ce=ge.RCPT_ID||e,Re=await Nv(t,ce);y(Re);const X=Re&&Re.details&&Re.details.length>0;if(W(X),X&&Re.details.length>0){const me=Re.details[0],he=me.BILL_SEQ_NO||"",Z=me.PROD_GRP||"",ie=me.SO_ID||r||"",te=me.CTRT_ID||n||"";if(he&&Z&&ie&&e)try{const je=await Sv(he,Z,ie,"4",e);let be="",Te=te;if(je.length>0){const re=je.find(pe=>pe.CTRT_ID===te);re?(be=re.CLC_WRK_NO,Te=re.CTRT_ID):(be=je[0].CLC_WRK_NO,Te=je[0].CTRT_ID||te)}if(he&&be&&Te){const pe=(await vv(he,be,Te)).filter(st=>st.BILL_AMT>0||st.REQ_YN==="Y").sort((st,Nt)=>parseInt(st.SORT_SEQ||"0")-parseInt(Nt.SORT_SEQ||"0"));L(pe);const Se=pe.reduce((st,Nt)=>st+Nt.BILL_AMT,0);V(Se)}}catch(je){console.warn("[HotbillSection]    ():",je)}}}else A(ge.message||"  "),d==null||d(ge.message||"  ","error",!0)}catch(ge){console.error("[HotbillSection]  :",ge),A(ge.message||"    "),d==null||d(ge.message||"    ","error",!0)}finally{v(!1),f==null||f(!1)}};if(_.useEffect(()=>{T&&t?H():N(!1)},[t,e,T]),_.useEffect(()=>{if(!T){u==null||u(!0);return}let fe=!1;j?fe=$||K:fe=ee,u==null||u(fe)},[T,j,ee,$,K]),!T)return null;const ae=p&&p.details&&p.details.length>0;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 sm:px-4 py-2.5 sm:py-3 flex items-center bg-orange-50",children:s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-xs sm:text-sm font-bold text-orange-800",children:""})]})}),s.jsxs("div",{className:"p-2.5 sm:p-3 space-y-2.5 sm:space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-2.5 sm:p-3",children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:U(i)})]}),g&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-5 sm:py-6 gap-1.5 sm:gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-blue-600"}),s.jsx("div",{className:"text-gray-500 text-[0.625rem] sm:text-xs",children:"   ..."})]}),!g&&R&&s.jsx("div",{className:"flex items-center justify-center py-3 sm:py-4 px-3 sm:px-4",children:s.jsx("div",{className:"text-red-500 text-[0.625rem] sm:text-xs text-center",children:R})}),!g&&!R&&s.jsxs(s.Fragment,{children:[ae&&s.jsxs("div",{className:"space-y-2.5 sm:space-y-3",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-12 bg-gray-100 border-b border-gray-200",children:[s.jsx("div",{className:"col-span-8 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-semibold text-gray-700 text-center",children:""}),s.jsx("div",{className:"col-span-4 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-semibold text-gray-700 text-center",children:""})]}),s.jsx("div",{className:"divide-y divide-gray-100 max-h-40 sm:max-h-48 overflow-y-auto",children:M.length>0?M.map((fe,ge)=>s.jsxs("div",{className:`grid grid-cols-12 ${ge%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("div",{className:"col-span-8 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs text-gray-900",children:fe.CHRG_ITEM_NM||"-"}),s.jsx("div",{className:"col-span-4 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-medium text-gray-900 text-right",children:Q(fe.BILL_AMT)})]},ge)):p.details.map((fe,ge)=>s.jsxs("div",{className:`grid grid-cols-12 ${ge%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("div",{className:"col-span-8 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs text-gray-900",children:fe.CHRG_ITM_NM||fe.CHG_NM||"-"}),s.jsx("div",{className:"col-span-4 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-medium text-gray-900 text-right",children:Q(fe.BILL_AMT)})]},ge))})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-2.5 sm:p-3",children:s.jsxs("div",{className:"flex items-center justify-end gap-1.5 sm:gap-2",children:[s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800 whitespace-nowrap",children:":"}),s.jsxs("span",{className:"text-base sm:text-lg font-bold text-blue-700",children:[Q(k>0?k:p.refundAmount||p.totalAmount),""]})]})})]}),!ae&&s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 py-2.5 sm:py-3 px-2.5 sm:px-3 bg-amber-50 rounded-lg border border-amber-200",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs sm:text-sm text-amber-800",children:"  "})]}),s.jsx("div",{className:"space-y-2",children:j?s.jsxs(s.Fragment,{children:[(()=>{const fe=I();return(i||"").replace(/-/g,"")>fe?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 py-2 px-2.5 sm:px-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs sm:text-sm text-red-800 font-medium",children:"  ."})]}),s.jsxs("button",{type:"button",onClick:()=>{m||(oe(!se),se&&Y(!1))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":se?"bg-amber-50 border-amber-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${se?"bg-amber-500 border-amber-500":"bg-white border-gray-400"}`,children:se&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":se?"text-amber-700":"text-gray-700"}`,children:"  "})]}),se&&!m&&s.jsx("div",{className:"space-y-2",children:P?s.jsxs("button",{type:"button",onClick:()=>{m||(Y(!$),$||w(!1))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":$?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${$?"bg-green-500 border-green-500":"bg-white border-gray-400"}`,children:$&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":$?"text-green-700":"text-gray-700"}`,children:"  "})]}):s.jsx("button",{type:"button",onClick:q,disabled:C||m,className:"w-full py-3 bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:C?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:" "})]})})})]}):s.jsx("div",{className:"space-y-2",children:!P&&!m?s.jsx("button",{type:"button",onClick:q,disabled:C||m,className:"w-full py-3 bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:C?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:" "})]})}):P?s.jsxs("button",{type:"button",onClick:()=>{m||(Y(!$),$||w(!1))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":$?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${$?"bg-green-500 border-green-500":"bg-white border-gray-400"}`,children:$&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":$?"text-green-700":"text-gray-700"}`,children:"  "})]}):null})})(),s.jsxs("button",{type:"button",onClick:()=>{m||(w(!K),K||(Y(!1),oe(!1)))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":K?"bg-gray-100 border-gray-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${K?"bg-gray-500 border-gray-500":"bg-white border-gray-400"}`,children:K&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":K?"text-gray-700":"text-gray-600"}`,children:"  "})]})]}):s.jsxs("button",{type:"button",onClick:()=>!m&&J(!ee),disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":ee?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${ee?"bg-green-500 border-green-500":"bg-white border-gray-400"}`,children:ee&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":ee?"text-green-700":"text-gray-700"}`,children:" "})]})})]})]})]})},T3={1:"",2:"1:1",3:"",4:""},E3={4:"",1:""},j3={5:"",6:"21",7:""},y5=({onComplete:t,onAssignAS:e,showToast:n,disabled:r=!1,savedData:i,onReset:l})=>{const[c,d]=_.useState(""),[u,f]=_.useState("4"),[m,p]=_.useState(""),[y,g]=_.useState(!1);_.useEffect(()=>{i&&(d(i.REMOVE_LINE_TP||""),f(i.REMOVE_GB||"4"),p(i.REMOVE_STAT||""),g(!1))},[i]);const N=[{value:"1",label:""},{value:"2",label:"1:1"},{value:"3",label:""},{value:"4",label:""}],C=[{value:"4",label:""},{value:"1",label:""}],v=[{value:"5",label:""},{value:"6",label:"21"},{value:"7",label:""}],R=W=>{d(W),f("4"),p("")},A=W=>{f(W),W==="4"&&p("")},M=()=>{if(!c){n==null||n("  ","warning");return}if(!u){n==null||n(" ","warning");return}const W={REMOVE_LINE_TP:c,REMOVE_GB:u,REMOVE_STAT:m};g(!1),t(W)},L=()=>{if(!c){n==null||n("  ","warning");return}if(!u){n==null||n(" ","warning");return}if(u==="1"&&!m){n==null||n("  ","warning");return}const W={REMOVE_LINE_TP:c,REMOVE_GB:u,REMOVE_STAT:m};g(!1),e(W)},k=()=>{g(!0),l==null||l()};if(r)return null;const V=i&&!y,G=(i==null?void 0:i.REMOVE_GB)==="1";return s.jsxs("div",{className:`bg-white rounded-xl shadow-sm border overflow-hidden ${V?G?"border-orange-300":"border-green-300":"border-gray-200"}`,id:"removal-line-section",children:[s.jsx("div",{className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 flex items-center justify-between ${V?G?"bg-orange-50":"bg-green-50":"bg-teal-50"}`,children:s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 ${V?G?"text-orange-600":"text-green-600":"text-teal-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),s.jsx("span",{className:`text-xs sm:text-sm font-bold ${V?G?"text-orange-800":"text-green-800":"text-teal-800"}`,children:" "}),V&&(G?s.jsx("span",{className:"ml-1 inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-orange-500 text-white text-xs font-bold",children:"AS"}):s.jsxs("span",{className:"ml-1 inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-500 text-white text-xs font-bold",children:[s.jsx(Vi,{className:"w-3 h-3"}),""]}))]})}),V&&i&&s.jsx("div",{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"font-semibold text-gray-900",children:T3[i.REMOVE_LINE_TP]||i.REMOVE_LINE_TP})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:`font-semibold ${i.REMOVE_GB==="4"?"text-blue-600":"text-red-600"}`,children:E3[i.REMOVE_GB]||i.REMOVE_GB}),i.REMOVE_GB==="1"&&i.REMOVE_STAT&&s.jsxs("span",{className:"text-yellow-600 font-medium",children:["(",j3[i.REMOVE_STAT]||i.REMOVE_STAT,")"]})]})]}),s.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(Ei,{className:"w-4 h-4"}),""]})]})}),!V&&s.jsxs("div",{className:"p-2.5 sm:p-3 space-y-3 sm:space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:""}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2",children:N.map(W=>s.jsx("button",{type:"button",onClick:()=>R(W.value),className:`min-h-10 sm:min-h-12 py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-medium text-xs sm:text-sm transition-colors border-2 ${c===W.value?"bg-green-100 border-green-500 text-green-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:W.label},W.value))})]}),c&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:""}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2",children:C.map(W=>s.jsx("button",{type:"button",onClick:()=>A(W.value),className:`min-h-10 sm:min-h-12 py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-bold text-sm sm:text-base transition-colors border-2 ${u===W.value?W.value==="4"?"bg-blue-100 border-blue-500 text-blue-700":"bg-red-100 border-red-500 text-red-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:W.label},W.value))})]}),c&&u==="1"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-1.5 sm:gap-2",children:v.map(W=>s.jsx("button",{type:"button",onClick:()=>p(W.value),className:`min-h-10 sm:min-h-12 py-2 sm:py-3 px-1.5 sm:px-2 rounded-lg font-bold text-xs sm:text-sm transition-colors border-2 ${m===W.value?"bg-yellow-100 border-yellow-500 text-yellow-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:W.label},W.value))})]}),c&&s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-1.5 sm:pt-2",children:[s.jsx("button",{type:"button",onClick:M,disabled:!c||!u||u==="1",className:`flex-1 min-h-12 py-2 sm:py-3 rounded-lg font-bold text-sm sm:text-base transition-colors ${c&&u==="4"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:""}),s.jsx("button",{type:"button",onClick:L,disabled:!c||u!=="1"||!m,className:`flex-1 min-h-12 py-2 sm:py-3 rounded-lg font-bold text-sm sm:text-base transition-colors ${c&&u==="1"&&m?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"AS"})]})]})]})},I3={5:"JHA",6:"JHB",7:"JHC"},b5=({isOpen:t,onClose:e,onSave:n,removalLineData:r,custId:i,custNm:l,addrOrd:c,address:d,showToast:u,addressInfo:f})=>{const[m,p]=_.useState(""),[y,g]=_.useState("10"),[N,C]=_.useState("00"),[v,R]=_.useState(""),A=Array.from({length:13},(V,G)=>{const W=(9+G).toString().padStart(2,"0");return{value:W,label:W}}),M=["00","10","20","30","40","50"].map(V=>({value:V,label:V}));_.useEffect(()=>{if(t){const V=new Date,G=V.getFullYear(),W=V.getMonth(),j=new Date(G,W+1,0).getDate(),P=V.getDate()>j-7;let F;P?F=new Date(G,W+2,0):F=new Date(G,W+1,0);const ee=F.getFullYear(),J=String(F.getMonth()+1).padStart(2,"0"),$=String(F.getDate()).padStart(2,"0");p(`${ee}-${J}-${$}`),g("10"),C("00"),R("")}},[t]);const L=()=>{if(!m){u&&u(" ","warning");return}const V=new Date,G=m.replace(/-/g,"")+y+N,W=V.getFullYear().toString()+String(V.getMonth()+1).padStart(2,"0")+String(V.getDate()).padStart(2,"0")+String(V.getHours()).padStart(2,"0")+String(V.getMinutes()).padStart(2,"0");if(Number(G)<Number(W)){u&&u("   ","warning");return}const j=localStorage.getItem("userInfo"),S=j?JSON.parse(j):{},P=S.userId||"A20130708",F=S.crrId||"01",ee=r!=null&&r.REMOVE_STAT&&I3[r.REMOVE_STAT]||"",J={CUST_ID:i,RCPT_ID:"",WRK_DTL_TCD:"0380",WRK_RCPT_CL:"JH",WRK_RCPT_CL_DTL:ee,WRK_HOPE_DTTM:G,HOPE_DTTM:G,MEMO:v,EMRG_YN:"N",HOLY_YN:"N",CRR_ID:F,WRKR_ID:P,REG_UID:P,REMOVE_LINE_TP:(r==null?void 0:r.REMOVE_LINE_TP)||"",REMOVE_GB:(r==null?void 0:r.REMOVE_GB)||"",REMOVE_STAT:(r==null?void 0:r.REMOVE_STAT)||"",POST_ID:(f==null?void 0:f.POST_ID)||"",BLD_ID:(f==null?void 0:f.BLD_ID)||"",BLD_CL:(f==null?void 0:f.BLD_CL)||"",BLD_NM:(f==null?void 0:f.BLD_NM)||"",BUN_CL:(f==null?void 0:f.BUN_CL)||"",BUN_NO:(f==null?void 0:f.BUN_NO)||"",HO_NM:(f==null?void 0:f.HO_NM)||"",APT_DONG_NO:(f==null?void 0:f.APT_DONG_NO)||"",APT_HO_CNT:(f==null?void 0:f.APT_HO_CNT)||"",ADDR:(f==null?void 0:f.ADDR)||d||"",ADDR_DTL:(f==null?void 0:f.ADDR_DTL)||""};n(J)},k=V=>({5:"",6:"21",7:""})[V]||V;return t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-[90%] max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-purple-600 text-white px-3 sm:px-4 py-2.5 sm:py-3 flex items-center justify-between sticky top-0",children:[s.jsx("h2",{className:"text-sm sm:text-lg font-bold",children:" AS"}),s.jsx("button",{onClick:e,className:"p-1 hover:bg-purple-700 rounded-full transition-colors",children:s.jsx(bi,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-2.5 sm:p-3 space-y-1.5 sm:space-y-2",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20",children:""}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[i," / ",l]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium truncate",children:d})]})]}),(r==null?void 0:r.REMOVE_STAT)&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("span",{className:"text-sm text-yellow-700 font-medium",children:[" : ",k(r.REMOVE_STAT)]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"AS"}),s.jsx("input",{type:"text",value:"(AS)",readOnly:!0,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-gray-100 border border-gray-300 rounded-lg text-xs sm:text-sm text-gray-600"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"AS()"}),s.jsx("input",{type:"text",value:"CS()",readOnly:!0,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-gray-100 border border-gray-300 rounded-lg text-xs sm:text-sm text-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"AS()"}),s.jsx("input",{type:"text",value:k((r==null?void 0:r.REMOVE_STAT)||""),readOnly:!0,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-gray-100 border border-gray-300 rounded-lg text-xs sm:text-sm text-gray-600"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_h,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"date",value:m,onChange:V=>p(V.target.value),min:new Date().toISOString().split("T")[0],className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pp,{className:"w-4 h-4 text-gray-400"}),s.jsx("select",{value:y,onChange:V=>g(V.target.value),className:"px-2 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500",children:A.map(V=>s.jsx("option",{value:V.value,children:V.label},V.value))}),s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("select",{value:N,onChange:V=>C(V.target.value),className:"px-2 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500",children:M.map(V=>s.jsx("option",{value:V.value,children:V.label},V.value))})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:""}),s.jsx("textarea",{value:v,onChange:V=>R(V.target.value),placeholder:"  ...",rows:3,maxLength:512,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 border border-gray-300 rounded-lg text-xs sm:text-sm resize-none focus:ring-2 focus:ring-purple-500"})]})]}),s.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 border-t border-gray-200 sticky bottom-0",children:s.jsx("button",{onClick:L,className:"w-full py-2 sm:py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",children:""})})]})]}):null},N5=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1,certifyMode:c=!1})=>{var _e,xe,Ue,Pe,Ye,mt,de,tt;const d=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[u,f]=_.useState(!1),[m,p]=_.useState(""),[y,g]=_.useState(!1),{equipmentData:N,filteringData:C,removalLineData:v,setRemovalLineData:R}=$i(),{certifyRegconfInfo:A}=Wa(),M=t.id||"",L=oa(M),k={...N||i||C||{},installedEquipments:L.installedEquipments.length>0?L.installedEquipments:(N==null?void 0:N.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:L.removeEquipments.length>0?L.removeEquipments:(N==null?void 0:N.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(L.removalStatus).length>0?L.removalStatus:(N==null?void 0:N.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:V,isPending:G}=od(),W=()=>`work_complete_draft_${t.id}`,[j,S]=_.useState(""),[P,F]=_.useState(""),[ee,J]=_.useState(!1),[$,Y]=_.useState(""),[K,w]=_.useState(""),[se,oe]=_.useState(void 0),T=v,I=R,[U,Q]=_.useState(!1),[H,q]=_.useState(!1),[ae,fe]=_.useState(null),[ge,ce]=_.useState(!1),[Re,X]=_.useState(""),[me,he]=_.useState(!1),[Z,ie]=_.useState(!1),[te,je]=_.useState(!1),[be,Te]=_.useState(!1),[re,pe]=_.useState(!1),[Se,st]=_.useState([]),[Nt,lt]=_.useState([]),[At,ot]=_.useState(()=>{const De=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(De&&De.length>=8)return`${De.slice(0,4)}-${De.slice(4,6)}-${De.slice(6,8)}`;const it=new Date;return it.getFullYear()+"-"+String(it.getMonth()+1).padStart(2,"0")+"-"+String(it.getDate()).padStart(2,"0")});t.SO_ID;const We=t.VOIP_CTX||"",Dt=t.WRK_STAT_CD||"";t.KPI_PROD_GRP_CD;const Et=m==="0"||m==="1"||m==="4",Rt=d||y||Et||We?!1:Dt==="1"||Dt==="2",$e=d||y||Et?!1:Dt==="1"||Dt==="2"||Dt==="7";_.useEffect(()=>{(async()=>{var it;if(!(!t.id||d)){g(!0);try{console.log("[CompleteTerminate] OST  :",t.id);const St=await Xp({WRK_ID:t.id,RCPT_ID:t.RCPT_ID,CUST_ID:(it=t.customer)==null?void 0:it.id});if(St){const Lt=St.OST_WORKABLE_STAT||"";console.log("[CompleteTerminate] OST  :",Lt),p(Lt),(Lt==="0"||Lt==="1"||Lt==="4")&&(r==null||r("    .","warning",!0))}}catch(St){console.error("[CompleteTerminate] OST   :",St)}finally{g(!1)}}})()},[t.id,t.RCPT_ID,(_e=t.customer)==null?void 0:_e.id,d]),_.useEffect(()=>{(async()=>{try{console.log("[WorkCompleteTerminate]    ");const it=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});it&&(console.log("[WorkCompleteTerminate] API  :",it),console.log("[WorkCompleteTerminate] :",{NET_CL:it.NET_CL,NET_CL_NM:it.NET_CL_NM}),console.log("[WorkCompleteTerminate] :",{INSTL_TP:it.INSTL_TP,WRNG_TP:it.WRNG_TP}),console.log("[WorkCompleteTerminate] /:",{CUST_REL:it.CUST_REL,WRK_PROC_CT:it.WRK_PROC_CT}),console.log("[WorkCompleteTerminate] isWorkCompleted:",d),d&&(console.log("[WorkCompleteTerminate]   -   "),S(it.CUST_REL||""),F((it.WRK_PROC_CT||"").replace(/\\n/g,`
`)),it.WRKR_CMPL_DT&&it.WRKR_CMPL_DT.length>=8&&ot(`${it.WRKR_CMPL_DT.slice(0,4)}-${it.WRKR_CMPL_DT.slice(4,6)}-${it.WRKR_CMPL_DT.slice(6,8)}`)),Y(it.NET_CL||""),w(it.NET_CL_NM||""),oe(St=>St||{NET_CL:it.NET_CL||"",NET_CL_NM:it.NET_CL_NM||"",WRNG_TP:it.WRNG_TP||"",INSTL_TP:it.INSTL_TP||"",CB_WRNG_TP:it.CB_WRNG_TP||"",CB_INSTL_TP:it.CB_INSTL_TP||"",INOUT_LINE_TP:it.INOUT_LINE_TP||"",INOUT_LEN:it.INOUT_LEN||"",DVDR_YN:it.DVDR_YN||"",BFR_LINE_YN:it.BFR_LINE_YN||"",CUT_YN:it.CUT_YN||"",TERM_NO:it.TERM_NO||"",RCV_STS:it.RCV_STS||"",SUBTAP_ID:it.SUBTAP_ID||"",PORT_NUM:it.PORT_NUM||"",EXTN_TP:it.EXTN_TP||"",TAB_LBL:it.TAB_LBL||"",CVT_LBL:it.CVT_LBL||"",STB_LBL:it.STB_LBL||""}))}catch(it){console.error("[WorkCompleteTerminate]    :",it)}if(!d){const it=localStorage.getItem(W());if(it)try{const St=JSON.parse(it);S(St.custRel||""),F(St.memo||""),St.installInfoData&&(Y(St.networkType||""),w(St.networkTypeName||""),oe(St.installInfoData))}catch(St){console.error("[WorkCompleteTerminate] localStorage  :",St)}}f(!0)})()},[t.id,d]),_.useEffect(()=>{if(!u||d)return;const De={custRel:j,memo:P,networkType:$,networkTypeName:K,installInfoData:se,savedAt:new Date().toISOString()};localStorage.setItem(W(),JSON.stringify(De))},[j,P,$,K,se,u,d]),_.useEffect(()=>{(async()=>{try{const it=await Jl(["CMCU005"]);it.CMCU005&&lt(it.CMCU005.map(St=>({value:St.COMMON_CD,label:St.COMMON_CD_NM})))}catch(it){console.error("[WorkCompleteTerminate]   :",it)}})()},[]),_.useEffect(()=>{(async()=>{try{const it=await mc(),St=(it==null?void 0:it.output)||it||[];st(St);const Lt=t.PROD_CD||t.PROD_CD||"",Ve=St.some(kt=>kt.PROD_CD===Lt);pe(Ve),console.log("[CompleteTerminate] LGHV :",{currentProdCd:Lt,isLghv:Ve,prodListCount:St.length})}catch(it){console.error("[CompleteTerminate] LGHV   :",it)}})()},[t.PROD_CD]),_.useEffect(()=>{console.log("[CompleteTerminate] OST  :",{OST_WORKABLE_STAT:m,isOstBlocked:Et,isOstChecking:y,isWorkCompleted:d,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,:m==="0"?"":m==="1"?"":m==="2"?"":m==="3"?"":m==="4"?"/":m==="X"?"OST":m===""?"  ":""})},[m,Et,y,d]);const gt=()=>{const De=[];j||De.push("  ."),se!=null&&se.NET_CL||De.push(" . ( )"),At||De.push(" ."),t.WRK_CD==="02"&&Dt!=="7"&&!be&&De.push("  .");const it=t.PROD_GRP||"",St=(k==null?void 0:k.removedEquipments)||[];return it!=="V"&&St.length<1&&De.push("  .   ."),It()&&!T&&De.push("   ."),De},Fe=De=>{oe(De),De.NET_CL&&Y(De.NET_CL),De.NET_CL_NM&&w(De.NET_CL_NM),r==null||r("  .","success")},rt=()=>{at(!0)},at=(De=!1)=>{if(G)return;if(Et){r==null||r("    .","warning");return}if(!De){const Ve=t.KPI_PROD_GRP_CD||"";if(Ve==="C"||Ve==="D"){r==null||r("    .","error");return}}const it=gt();if(it.length>0){if(it.forEach(Ve=>r==null?void 0:r(Ve,"error")),it.some(Ve=>Ve.includes(""))){const Ve=document.getElementById("removal-line-section");Ve&&(Ve.scrollIntoView({behavior:"smooth",block:"center"}),Ve.classList.add("ring-2","ring-red-500","ring-offset-2"),setTimeout(()=>{Ve.classList.remove("ring-2","ring-red-500","ring-offset-2")},2e3))}return}const St=t.TERM_HOPE_DT||t.HOPE_DT||"";if(St&&At){const Ve=St.replace(/-/g,"");At.replace(/-/g,"")<Ve&&(r==null||r("  .","warning"))}X(De?" ?":" ?"),he(De),ce(!0)},It=()=>{const De=t.KPI_PROD_GRP_CD||"",it=t.VOIP_CTX||"";return["C","D","I"].includes(De)&&it!=="T"&&it!=="R"},ht=De=>{console.log("[WorkCompleteTerminate]   () :",De),I(De),r==null||r("  .   .","info")},Je=De=>{console.log("[WorkCompleteTerminate]   - AS  :",De),I(De),Q(!0)},ve=De=>{console.log("[WorkCompleteTerminate] AS  :",De),fe(De),Q(!1),r==null||r("  AS  .","info")},Ge=async()=>{var Ns,ke,dt,et,Qt,ut,qt;const De=At.replace(/-/g,""),it=localStorage.getItem("userInfo"),St=it?JSON.parse(it):{},Lt=St.userId||"A20130708";let Ve="N";if(c||Lh(t.OP_LNKD_CD)){const jt=await b3(t,Lt);if(Ve=jt.certifyTg,!jt.success){r==null||r(`  : ${jt.error}`,"error");return}}if(T&&T.REMOVE_GB==="4")try{console.log("[WorkCompleteTerminate]   API :",T);const jt=await vp({WRK_ID:t.id||t.WRK_ID||"",REMOVE_LINE_TP:T.REMOVE_LINE_TP||"",REMOVE_GB:T.REMOVE_GB||"4",REMOVE_STAT:T.REMOVE_STAT||"",REG_UID:Lt});if(jt.code!=="SUCCESS"&&jt.code!=="OK"){r==null||r(jt.message||"   .","error",!0);return}console.log("[WorkCompleteTerminate]    ")}catch(jt){r==null||r(jt.message||"     .","error",!0);return}const Oe=(k==null?void 0:k.removedEquipments)||[],Xt=!!t.ISP_PROD_CD;if(Ve!=="Y"&&(Oe.length>0||Xt))try{let jt="SMR05",ue="";if(re){jt="STB_DEL";const Ke=Oe.find(Ct=>{var bt,He;return(Ct.ITEM_MID_CD||Ct.itemMidCd||((bt=Ct.actualEquipment)==null?void 0:bt.ITEM_MID_CD)||((He=Ct.actualEquipment)==null?void 0:He.itemMidCd))==="04"});Ke&&(ue=Ke.EQT_NO||Ke.id||((Ns=Ke.actualEquipment)==null?void 0:Ns.EQT_NO)||((ke=Ke.actualEquipment)==null?void 0:ke.id)||"")}const Ce=Oe[0],Le=Ce?Ce.actualEquipment||Ce:{},Ie=Le.PROD_CMPS_ID||(Ce==null?void 0:Ce.PROD_CMPS_ID)||Le.EQT_PROD_CMPS_ID||(Ce==null?void 0:Ce.EQT_PROD_CMPS_ID)||"",Ee=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"";console.log("[CompleteTerminate]   :",{msgId:jt,isLghvStb:re,etc1:ue,eqtProdCmpsId:Ie,voipJoinCtrtId:Ee});const pt=await la({MSG_ID:jt,CUST_ID:((dt=t.customer)==null?void 0:dt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:Ie,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Lt,ETC_1:ue,VOIP_JOIN_CTRT_ID:Ee,WTIME:"3"});if(pt.code!=="SUCCESS"&&pt.code!=="OK"){if((t.PROD_GRP||"")==="V"&&((et=pt.message)==null?void 0:et.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteTerminate] VoIP    -  :",pt.message),r==null||r("   .","error",!0);return}if((t.MSO_OUT_YN||"")==="Y"){r==null||r("MSO      .  .","error",!0);return}if(!window.confirm(` .
  ?`)){console.log("[CompleteTerminate]      ");return}console.log("[CompleteTerminate]      ")}else console.log("[CompleteTerminate]    ")}catch(jt){if(console.warn("[CompleteTerminate]     :",jt),!window.confirm(` .
  ?`))return}const rs=(k==null?void 0:k.removalStatus)||{},ds=Oe.map(jt=>{var Ee;const ue=jt.actualEquipment||jt,Ce=jt.contractEquipment||{},Le=ue.id||jt.EQT_NO||jt.id||"",Ie=rs[Le]||rs[jt.id]||rs[jt.EQT_NO]||rs[ue.id]||rs[jt.serialNumber]||rs[ue.serialNumber]||{},Ze=(pt,Ke)=>pt==="1"||pt==="Y"||Ke==="1"||Ke==="Y"?"1":"0";return{...ue,EQT_NO:Le,ITEM_MID_CD:ue.ITEM_MID_CD||ue.itemMidCd||jt.ITEM_MID_CD||jt.itemMidCd||"",ITEM_MID_NM:ue.ITEM_MID_NM||ue.type||jt.ITEM_MID_NM||jt.type||"",EQT_CL_CD:ue.EQT_CL_CD||ue.eqtClCd||jt.EQT_CL_CD||jt.eqtClCd||"",EQT_CL_NM:ue.EQT_CL_NM||ue.model||jt.EQT_CL_NM||jt.model||"",EQT_SERNO:ue.EQT_SERNO||ue.serialNumber||jt.EQT_SERNO||jt.serialNumber||"",MAC_ADDRESS:jt.macAddress||ue.MAC_ADDRESS||ue.macAddress||jt.MAC_ADDRESS||"",CRR_TSK_CL:"02",RCPT_ID:t.RCPT_ID||"",WRK_ID:t.id||"",CUST_ID:jt.CUST_ID||((Ee=t.customer)==null?void 0:Ee.id)||"",CTRT_ID:jt.CTRT_ID||t.CTRT_ID||"",CRR_ID:t.CRR_ID||St.crrId||"01",WRKR_ID:Lt,REG_UID:Lt,SVC_CMPS_ID:Ce.SVC_CMPS_ID||jt.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ce.BASIC_PROD_CMPS_ID||jt.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:jt.EQT_PROD_CMPS_ID||"",PROD_CD:Ce.PROD_CD||jt.PROD_CD||"",SVC_CD:Ce.SVC_CD||jt.SVC_CD||"",MST_SO_ID:jt.MST_SO_ID||t.SO_ID||"",SO_ID:jt.SO_ID||t.SO_ID||"",OLD_LENT_YN:jt.OLD_LENT_YN||"N",LENT_YN:jt.lentYn||jt.LENT_YN||Ce.LENT_YN||"10",...(console.log("[CompleteTerminate]  :",{eqtNo:Le,"eq.EQT_LOSS_YN":jt.EQT_LOSS_YN,"status.EQT_LOSS_YN":Ie.EQT_LOSS_YN,"status ":Ie,"removalStatus ":Object.keys(rs)}),{}),EQT_LOSS_YN:Ze(jt.EQT_LOSS_YN,Ie.EQT_LOSS_YN),PART_LOSS_BRK_YN:Ze(jt.PART_LOSS_BRK_YN,Ie.PART_LOSS_BRK_YN),EQT_BRK_YN:Ze(jt.EQT_BRK_YN,Ie.EQT_BRK_YN),EQT_CABL_LOSS_YN:Ze(jt.EQT_CABL_LOSS_YN,Ie.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Ze(jt.EQT_CRDL_LOSS_YN,Ie.EQT_CRDL_LOSS_YN),REUSE_YN:jt.REUSE_YN||Ie.REUSE_YN||"1"}}),Ss={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Qt=t.customer)==null?void 0:Qt.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||St.crrId||"01",WRKR_ID:Lt,WRKR_CMPL_DT:De,MEMO:P||" ",STTL_YN:"Y",REG_UID:Lt,CUST_REL:j,CNFM_CUST_NM:(ut=t.customer)==null?void 0:ut.name,CNFM_CUST_TELNO:((qt=t.customer)==null?void 0:qt.contactNumber)||"",WRK_ACT_CL:"20",NET_CL:(se==null?void 0:se.NET_CL)||"",WRNG_TP:(se==null?void 0:se.WRNG_TP)||"",INSTL_TP:(se==null?void 0:se.INSTL_TP)||"",EQT_RMV_FLAG:me?"Y":""},equipmentList:[],removeEquipmentList:ds,spendItemList:(k==null?void 0:k.spendItems)||[],agreementList:(k==null?void 0:k.agreements)||[],poleList:(k==null?void 0:k.poleResults)||[]};console.log("[CompleteTerminate]   :"),console.log("  - workInfo:",Ss.workInfo),console.log("  -  modNetInfo   :"),console.log("    - NET_CL:",Ss.workInfo.NET_CL,"( modNetInfo )"),console.log("    - INSTL_TP:",Ss.workInfo.INSTL_TP),console.log("    - WRNG_TP:",Ss.workInfo.WRNG_TP),console.log("    - WRK_ID:",Ss.workInfo.WRK_ID),console.log("    - CTRT_ID:",Ss.workInfo.CTRT_ID),console.log("    - installInfoData :",se),console.log("  - removeEquipmentList :",ds.length),ds.length>0&&(console.log("  - removeEquipmentList[0] :",ds[0]),console.log("  -   [0]:",Oe[0])),V(Ss,{onSuccess:async jt=>{var ue;if(jt.code==="SUCCESS"||jt.code==="OK"){if(localStorage.removeItem(W()),t.WRK_STAT_CD="3",ae)try{const Ce=await vp({WRK_ID:t.id||t.WRK_ID||"",REMOVE_LINE_TP:ae.REMOVE_LINE_TP||"",REMOVE_GB:ae.REMOVE_GB||"1",REMOVE_STAT:ae.REMOVE_STAT||"",REG_UID:ae.REG_UID||Lt});Ce.code!=="SUCCESS"&&Ce.code!=="OK"&&console.error("[WorkCompleteTerminate]    :",Ce.message);const Le=await o5({CUST_ID:ae.CUST_ID||((ue=t.customer)==null?void 0:ue.id)||"",RCPT_ID:ae.RCPT_ID||"",WRK_DTL_TCD:ae.WRK_DTL_TCD||"0380",WRK_RCPT_CL:ae.WRK_RCPT_CL||"JH",WRK_RCPT_CL_DTL:ae.WRK_RCPT_CL_DTL||"",WRK_HOPE_DTTM:ae.WRK_HOPE_DTTM||"",MEMO:ae.MEMO||"",EMRG_YN:ae.EMRG_YN||"N",HOLY_YN:ae.HOLY_YN||"N",CRR_ID:ae.CRR_ID||"",WRKR_ID:ae.WRKR_ID||"",REG_UID:ae.REG_UID||Lt,POST_ID:ae.POST_ID||"",BLD_ID:ae.BLD_ID||"",BLD_CL:ae.BLD_CL||"",BLD_NM:ae.BLD_NM||"",BUN_CL:ae.BUN_CL||"",BUN_NO:ae.BUN_NO||"",HO_NM:ae.HO_NM||"",APT_DONG_NO:ae.APT_DONG_NO||"",APT_HO_CNT:ae.APT_HO_CNT||"",ADDR:ae.ADDR||"",ADDR_DTL:ae.ADDR_DTL||""});Le.code==="SUCCESS"||Le.code==="OK"?console.log("[WorkCompleteTerminate] AS "):console.error("[WorkCompleteTerminate] AS :",Le.message)}catch(Ce){console.error("[WorkCompleteTerminate] AS  :",Ce)}r==null||r("  .","success"),n()}else r==null||r(jt.message||"   .","error",!0)},onError:jt=>{r==null||r(jt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[te&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",onClick:De=>De.stopPropagation(),onTouchStart:De=>De.stopPropagation(),children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-4 shadow-xl",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-gray-700 font-medium",children:"  ..."}),s.jsx("p",{className:"text-gray-500 text-sm",children:" "})]})}),G&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("input",{type:"text",value:"",readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:K||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>J(!0),className:`min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${d?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:d?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:j,onValueChange:S,options:Nt,placeholder:" ",required:!0,disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:P,onChange:De=>F(De.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${d?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:d,disabled:d}),!d&&s.jsxs("p",{className:`text-xs text-right mt-1 ${P.length>=500?"text-red-500":"text-gray-400"}`,children:[P.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:At,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsx(bb,{custId:((xe=t.customer)==null?void 0:xe.id)||"",rcptId:t.RCPT_ID||"",ctrtId:t.CTRT_ID||"",soId:t.SO_ID||"",termHopeDt:t.TERM_HOPE_DT||t.HOPE_DT||"",wrkCd:t.WRK_CD||"02",wrkStatCd:Dt,showToast:r,onHotbillConfirmChange:Te,onSimulatingChange:je,readOnly:d}),It()&&s.jsx(y5,{onComplete:ht,onAssignAS:Je,showToast:r,disabled:d,savedData:T,onReset:()=>I(null)}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!d&&s.jsxs("button",{onClick:()=>rt(),disabled:G||!Rt,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${Rt?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{children:""})]}),!d&&s.jsx("button",{onClick:()=>at(!1),disabled:G||!$e,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${$e?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:G?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{onClick:()=>ie(!0),className:"flex-1 btn btn-lg flex items-center justify-center gap-2 bg-gray-500 hover:bg-gray-600 text-white",children:[s.jsx(nd,{className:"w-5 h-5"}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:ee,onClose:()=>J(!1),onSave:Fe,workId:t.id,initialData:se,workType:t.WRK_CD,customerId:(Ue=t.customer)==null?void 0:Ue.id,customerName:(Pe=t.customer)==null?void 0:Pe.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||t.addrOrd||"",kpiProdGrpCd:t.KPI_PROD_GRP_CD||"",prodChgGb:t.PROD_CHG_GB||"",chgKpiProdGrpCd:t.CHG_KPI_PROD_GRP_CD||"",prodGrp:t.PROD_GRP||"",wrkDtlTcd:t.WRK_DTL_TCD||"",readOnly:d}),s.jsx(b5,{isOpen:U,onClose:()=>Q(!1),onSave:ve,removalLineData:T,custId:((Ye=t.customer)==null?void 0:Ye.id)||"",custNm:((mt=t.customer)==null?void 0:mt.name)||"",addrOrd:((de=t.customer)==null?void 0:de.ADDR_ORD)||"",address:t.address||"",showToast:r,addressInfo:{POST_ID:t.POST_ID||"",BLD_ID:t.BLD_ID||"",BLD_CL:t.BLD_CL||"",BLD_NM:t.BLD_NM||"",BUN_CL:t.BUN_CL||"",BUN_NO:t.BUN_NO||"",HO_NM:t.HO_NM||"",APT_DONG_NO:t.APT_DONG_NO||"",APT_HO_CNT:t.APT_HO_CNT||"",ADDR:t.ADDR_TOTAL||t.ADDR||t.address||"",ADDR_DTL:t.ADDR_DTL||""}}),s.jsx(ul,{isOpen:ge,onClose:()=>ce(!1),onConfirm:Ge,title:me?" ":" ",message:Re,type:"confirm",confirmText:me?"":"",cancelText:"",children:s.jsx(ld,{workType:"02",workTypeName:me?"":"",custRel:j,custRelName:(tt=Nt.find(De=>De.value===j))==null?void 0:tt.label,networkType:$,networkTypeName:K,installType:se==null?void 0:se.INSTL_TP,installTypeName:se==null?void 0:se.INSTL_TP_NM,removedEquipments:(k==null?void 0:k.removedEquipments)||[],memo:P})}),s.jsx(Ba,{isOpen:Z,onClose:()=>ie(!1),ctrtId:t.CTRT_ID,prodCmpsId:t.BASIC_PROD_CMPS_ID||t.PROD_CMPS_ID})]})},S5=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1,certifyMode:c=!1})=>{var Ce,Le,Ie,Ze,Ee,pt,Ke,Ct,bt;const d=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[u,f]=_.useState(!1),{equipmentData:m,filteringData:p}=$i(),{certifyRegconfInfo:y}=Wa(),g=t.id||"",N=oa(g),C={...m||i||p||{},installedEquipments:N.installedEquipments.length>0?N.installedEquipments:(m==null?void 0:m.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:N.markedForRemoval.length>0?N.markedForRemoval:(m==null?void 0:m.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(N.removalStatus).length>0?N.removalStatus:(m==null?void 0:m.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:v,isPending:R}=od(),A=()=>`work_complete_draft_${t.id}`,[M,L]=_.useState(""),[k,V]=_.useState(""),[G,W]=_.useState(""),[j,S]=_.useState(""),[P,F]=_.useState(""),[ee,J]=_.useState(""),[$,Y]=_.useState(""),[K,w]=_.useState(""),[se,oe]=_.useState(!1),[T,I]=_.useState(""),[U,Q]=_.useState([]),[H,q]=_.useState(!1),[ae,fe]=_.useState([]),[ge,ce]=_.useState(""),[Re,X]=_.useState(""),[me,he]=_.useState(!1),[Z,ie]=_.useState(""),[te,je]=_.useState(""),[be,Te]=_.useState(void 0),[re,pe]=_.useState(!1),[Se,st]=_.useState(!1),[Nt,lt]=_.useState(""),[At,ot]=_.useState(""),[We,Dt]=_.useState(""),[Et,Rt]=_.useState(!1),[$e,gt]=_.useState(!1),[Fe,rt]=_.useState([]),[at,It]=_.useState(!1),[ht,Je]=_.useState(null),[ve,Ge]=_.useState([]),[_e,xe]=_.useState([]),[Ue,Pe]=_.useState([]),[Ye,mt]=_.useState([]),[de,tt]=_.useState([]),[De,it]=_.useState([]),[St,Lt]=_.useState([]),[Ve,kt]=_.useState([]),[Oe,Xt]=_.useState([]),[rs,ds]=_.useState([]),[Ss,Ns]=_.useState([]),[ke,dt]=_.useState(()=>{const He=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(He&&He.length>=8)return`${He.slice(0,4)}-${He.slice(4,6)}-${He.slice(6,8)}`;const ct=new Date;return ct.getFullYear()+"-"+String(ct.getMonth()+1).padStart(2,"0")+"-"+String(ct.getDate()).padStart(2,"0")});_.useEffect(()=>{if(d){(async()=>{try{const wt=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(wt){L(wt.CUST_REL||""),V((wt.WRK_PROC_CT||"").replace(/\\n/g,`
`)),W(wt.KPI_PROD_GRP||""),S(wt.OBS_RCPT_CD||""),F(wt.OBS_RCPT_DTL_CD||""),J(wt.PSN_USE_CORP||""),Y(wt.VOIP_USE_CORP||""),w(wt.DTV_USE_CORP||""),ie(wt.NET_CL||""),je(wt.NET_CL_NM||""),lt(wt.INSTL_LOC||"");const Bt=wt.UP_CTRL_CL||(C==null?void 0:C.upCtrlCl)||"";ce(Bt),X(wt.TV_TYPE||""),Te({NET_CL:wt.NET_CL||"",NET_CL_NM:wt.NET_CL_NM||"",WRNG_TP:wt.WRNG_TP||"",INSTL_TP:wt.INSTL_TP||"",CB_WRNG_TP:wt.CB_WRNG_TP||"",CB_INSTL_TP:wt.CB_INSTL_TP||"",INOUT_LINE_TP:wt.INOUT_LINE_TP||"",INOUT_LEN:wt.INOUT_LEN||"",DVDR_YN:wt.DVDR_YN||"",BFR_LINE_YN:wt.BFR_LINE_YN||"",CUT_YN:wt.CUT_YN||"",TERM_NO:wt.TERM_NO||"",RCV_STS:wt.RCV_STS||"",SUBTAP_ID:wt.SUBTAP_ID||"",PORT_NUM:wt.PORT_NUM||"",EXTN_TP:wt.EXTN_TP||"",TAB_LBL:wt.TAB_LBL||"",CVT_LBL:wt.CVT_LBL||"",STB_LBL:wt.STB_LBL||""}),wt.VOIP_JOIN_CTRT_ID&&I(wt.VOIP_JOIN_CTRT_ID),wt.WRKR_CMPL_DT&&wt.WRKR_CMPL_DT.length>=8&&dt(`${wt.WRKR_CMPL_DT.slice(0,4)}-${wt.WRKR_CMPL_DT.slice(4,6)}-${wt.WRKR_CMPL_DT.slice(6,8)}`)}}catch(wt){console.error("[WorkCompleteAS]     :",wt)}f(!0)})();return}const He=localStorage.getItem(A());if(He)try{const ct=JSON.parse(He);L(ct.custRel||""),V(ct.memo||""),W(ct.kpiProdGrp||""),S(ct.obsRcptCd||""),F(ct.obsRcptDtlCd||""),J(ct.internetUse||""),Y(ct.voipUse||""),w(ct.dtvUse||""),ie(ct.networkType||""),je(ct.networkTypeName||""),lt(ct.installLocationText||""),Te(ct.installInfoData),ct.upCtrlCl&&ce(ct.upCtrlCl),ct.tvType&&X(ct.tvType),ct.voipJoinCtrtId&&I(ct.voipJoinCtrtId)}catch(ct){console.error("[WorkCompleteAS] localStorage  :",ct)}f(!0)},[t.id,d]),_.useEffect(()=>{if(!u||d)return;const He={custRel:M,memo:k,kpiProdGrp:G,obsRcptCd:j,obsRcptDtlCd:P,internetUse:ee,voipUse:$,dtvUse:K,networkType:Z,networkTypeName:te,installLocationText:Nt,installInfoData:be,upCtrlCl:ge,tvType:Re,voipJoinCtrtId:T,savedAt:new Date().toISOString()};localStorage.setItem(A(),JSON.stringify(He))},[M,k,G,j,P,ee,$,K,Z,te,Nt,be,ge,Re,T,u,d]),_.useEffect(()=>{(async()=>{try{const ct=await Jl(["CMCU005","CMCU057","CMCU110","CMCU148","CMCT015"]);ct.CMCU005&&Ge(ct.CMCU005.map(ss=>({value:ss.COMMON_CD,label:ss.COMMON_CD_NM}))),ct.CMCU057&&Pe(ct.CMCU057.map(ss=>({value:ss.COMMON_CD,label:ss.COMMON_CD_NM}))),ct.CMCU110&&mt(ct.CMCU110.map(ss=>({value:ss.COMMON_CD,label:ss.COMMON_CD_NM}))),ct.CMCU148&&tt(ct.CMCU148.map(ss=>({value:ss.COMMON_CD,label:ss.COMMON_CD_NM}))),ct.CMCT015&&xe(ct.CMCT015.map(ss=>({value:ss.COMMON_CD,label:ss.COMMON_CD_NM})));const wt=await Jl(["PP00933","CMOB000","CMOB001"]),Bt=wt.PP00933||[],Vt=wt.CMOB000||[],Jt=wt.CMOB001||[];it(Bt),Lt(Vt),kt(Jt),Xt(Bt.map(ss=>({value:ss.COMMON_CD||"",label:ss.COMMON_CD_NM||""})))}catch(ct){console.error("[WorkCompleteAS]   :",ct)}})()},[]),_.useEffect(()=>{(async()=>{try{const ct=await mc(),wt=(ct==null?void 0:ct.output)||ct||[];rt(wt);const Bt=t.PROD_CD||t.PROD_CD||"",Vt=wt.some(Jt=>Jt.PROD_CD===Bt);gt(Vt)}catch(ct){console.error("[CompleteAS] LGHV   :",ct)}})()},[t.PROD_CD]),_.useEffect(()=>{C!=null&&C.upCtrlCl&&!ge?ce(C.upCtrlCl):!ge&&u&&!d&&ce("01")},[C==null?void 0:C.upCtrlCl,u,d,ge]),_.useEffect(()=>{if(De.length===0)return;const He=t.KPI_PROD_GRP_CD||(C==null?void 0:C.kpiProdGrpCd)||"",ct=t.PROD_GRP||(C==null?void 0:C.prodGrp)||"";let wt=De;He&&(wt=De.filter(Vt=>{const Jt=Vt.COMMON_CD||"";return Jt===He||ct==="C"&&Jt==="I"}));const Bt=[{value:"",label:""},...wt.map(Vt=>({value:Vt.COMMON_CD||"",label:Vt.COMMON_CD_NM||""}))];Xt(Bt),He&&!G&&!d&&W(He)},[De,t,C==null?void 0:C.kpiProdGrpCd,C==null?void 0:C.prodGrp,d]),_.useEffect(()=>{if(St.length===0)return;const He=t.WRK_STAT_CD||"",ct=t.WRK_DTL_TCD||"",wt=t.asReasonCode||t.WRK_RCPT_CL||"",Bt=t.asDetailCode||t.WRK_RCPT_CL_DTL||"";if(Ns([{value:"",label:""}]),!G){ds([{value:"",label:"  "}]);return}const Vt=Bt&&St.some(ys=>ys.REF_CODE12===Bt),Jt=wt&&St.some(ys=>ys.REF_CODE12===wt);let ss;Vt?ss="clDtl":Jt?ss="cl":ss="empty",console.log("[CompleteAS]   :",{kpiProdGrp:G,wrkStatCd:He,wrkDtlTcd:ct,wrkRcptCl:wt,wrkRcptClDtl:Bt,hasRefCode12ClDtl:Vt,hasRefCode12Cl:Jt,refCode12Filter:ss,totalCodes:St.length});const Wt=St.filter(ys=>{const Ps=ys.COMMON_CD||"",xs=ys.REF_CODE2||"",vs=ys.REF_CODE12||"",Ms=ys.REF_CODE16||"";if(!xs.includes(G)||He==="2"&&Ps==="KA")return!1;if(ct==="0350"){if(Ms!=="A"&&Ms!=="Y")return!1}else if(Ms&&Ms!=="A")return!1;if(ss==="clDtl"){if(vs!==Bt)return!1}else if(ss==="cl"){if(vs!==wt)return!1}else if(vs)return!1;return!0});console.log("[CompleteAS]   :",Wt.map(ys=>({code:ys.COMMON_CD,name:ys.COMMON_CD_NM,REF_CODE12:ys.REF_CODE12,REF_CODE16:ys.REF_CODE16})));const Es=[{value:"",label:""},...Wt.map(ys=>({value:ys.COMMON_CD||"",label:ys.COMMON_CD_NM||""}))];ds(Es),j&&!Wt.some(ys=>ys.COMMON_CD===j)&&(S(""),F(""))},[G,St,t.WRK_STAT_CD,t.WRK_DTL_TCD,t.asReasonCode,t.asDetailCode]),_.useEffect(()=>{if(Ve.length===0)return;const He=t.WRK_DTL_TCD||"",ct=t.asReasonCode||t.WRK_RCPT_CL||"",wt=t.asDetailCode||t.WRK_RCPT_CL_DTL||"";if(!j||!G){Ns([{value:"",label:"  "}]);return}const Bt=wt&&Ve.some(Es=>Es.REF_CODE12===wt),Vt=ct&&Ve.some(Es=>Es.REF_CODE12===ct);let Jt;Bt?Jt="clDtl":Vt?Jt="cl":Jt="empty";const ss=Ve.filter(Es=>{const ys=Es.COMMON_CD||"",Ps=Es.REF_CODE||"",xs=Es.REF_CODE2||"",vs=Es.REF_CODE12||"",Ms=Es.REF_CODE16||"";if(!Ps.includes(j)||!xs.includes(G))return!1;if(He==="0350"){if(Ms!=="A"&&Ms!=="Y")return!1}else if(Ms&&Ms!=="A")return!1;if(Jt==="clDtl"){if(vs!==wt)return!1}else if(Jt==="cl"){if(vs!==ct)return!1}else if(vs)return!1;return!(wt==="JJO"&&ys!=="OOI")}),Wt=[{value:"",label:""},...ss.map(Es=>({value:Es.COMMON_CD||"",label:Es.COMMON_CD_NM||""}))];Ns(Wt),P&&!ss.some(Es=>Es.COMMON_CD===P)&&F("")},[j,G,Ve,t.WRK_DTL_TCD,t.asReasonCode,t.asDetailCode]),_.useEffect(()=>{var wt;if(d)return;const He=((wt=t.customer)==null?void 0:wt.id)||t.CUST_ID;if(!He)return;(async()=>{try{const Bt=await jf({CUST_ID:He});fe(Bt||[])}catch{fe([])}})()},[(Ce=t.customer)==null?void 0:Ce.id,t.CUST_ID,d]),_.useEffect(()=>{if(d||ae.length===0)return;const He=t.PROD_GRP||"",ct=t.VOIP_PROD_CD||"",wt=t.ISP_PROD_CD||"",Bt=t.WRK_STAT_CD||"",Vt=t.ADDR_ORD||"";if(He==="V"&&!ct){const Jt=ae.filter(Wt=>{const Es=Wt.PROD_GRP||"",ys=Wt.CTRT_STAT||"",Ps=Wt.ADDR_ORD||Wt.addr_ord||"";return(Es==="C"||Es==="D"||Es==="I")&&ys==="20"&&(!Vt||Ps===Vt)});Jt.length<1&&Bt==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const ss=[{value:"",label:""},...Jt.map(Wt=>({value:Wt.CTRT_ID||"",label:`[${Wt.CTRT_ID}] ${Wt.BASIC_PROD_CD_NM||Wt.PROD_NM||""}`}))];Q(ss),q(!0);return}if(He==="I"&&wt){const Jt=ae.filter(Wt=>{const Es=Wt.PROD_GRP||"",ys=Wt.CTRT_STAT||"",Ps=Wt.ADDR_ORD||Wt.addr_ord||"",xs=Wt.ISP_JOIN_ID||"",vs=Wt.KPI_PROD_GRP_CD||"";return(Es==="D"||Es==="C")&&ys==="20"&&!xs&&vs==="D"&&(!Vt||Ps===Vt)});Jt.length<1&&Bt==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const ss=[{value:"",label:""},...Jt.map(Wt=>({value:Wt.CTRT_ID||"",label:`[${Wt.CTRT_ID}] ${Wt.BASIC_PROD_CD_NM||Wt.PROD_NM||""}`}))];Q(ss),q(!0);return}q(!1),Q([])},[t.id,t.WRK_STAT_CD,d,r,ae]);const et=()=>{const He=[];M||He.push("  ."),G||He.push(" ."),j||He.push(" ."),P||He.push(" ."),be!=null&&be.NET_CL||He.push(" ."),ke||He.push(" .");const ct=t.PROD_GRP||"",wt=t.VOIP_PROD_CD||"",Bt=t.ISP_PROD_CD||"";ct==="V"&&!wt&&H&&(T||He.push("VOIP    .")),ct==="I"&&Bt&&H&&(T||He.push("  ISP .    ."));const Vt=(C==null?void 0:C.installedEquipments)||[],Jt=(C==null?void 0:C.removedEquipments)||[];return Vt.length>0||Jt.length>0,He},Qt=He=>{Te(He),He.NET_CL&&ie(He.NET_CL),He.NET_CL_NM&&je(He.NET_CL_NM),r==null||r("  .","success")},ut=()=>{if(R)return;const He=et();if(He.length>0){He.forEach(wt=>r==null?void 0:r(wt,"error"));return}(t.PROD_GRP||"")!=="V"?It(!0):Rt(!0)},qt=He=>{Je(He),It(!1),Rt(!0)},jt=(He,ct=!1)=>{if(!He||He.length===0)return[];const wt=localStorage.getItem("userInfo"),Bt=wt?JSON.parse(wt):{},Vt=Bt.userId||"A20130708",Jt=(C==null?void 0:C.removalStatus)||{},ss=(Wt,Es)=>Wt==="1"||Wt==="Y"||Es==="1"||Es==="Y"?"1":"0";return He.map(Wt=>{var xs,vs,Ms,cs;const Es=Wt.EQT_NO||Wt.id||((xs=Wt.actualEquipment)==null?void 0:xs.id)||"",ys=Jt[Es]||Jt[Wt.id]||Jt[Wt.EQT_NO]||Jt[(vs=Wt.actualEquipment)==null?void 0:vs.id]||Jt[Wt.serialNumber]||{},Ps=ct?{CRR_TSK_CL:t.WRK_CD||"03",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Bt.crrId||"01",WRKR_ID:Vt,EQT_LOSS_YN:ss(Wt.EQT_LOSS_YN,ys.EQT_LOSS_YN),PART_LOSS_BRK_YN:ss(Wt.PART_LOSS_BRK_YN,ys.PART_LOSS_BRK_YN),EQT_BRK_YN:ss(Wt.EQT_BRK_YN,ys.EQT_BRK_YN),EQT_CABL_LOSS_YN:ss(Wt.EQT_CABL_LOSS_YN,ys.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:ss(Wt.EQT_CRDL_LOSS_YN,ys.EQT_CRDL_LOSS_YN)}:{};if(Wt.actualEquipment){const ms=Wt.actualEquipment,Ks=Wt.contractEquipment||{};return{...ms,EQT_NO:ms.id,EQT_SERNO:ms.serialNumber,ITEM_MID_CD:ms.itemMidCd,EQT_CL_CD:ms.eqtClCd,MAC_ADDRESS:Wt.macAddress||ms.macAddress,WRK_ID:t.id,CUST_ID:(Ms=t.customer)==null?void 0:Ms.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:Ks.id||Ks.SVC_CMPS_ID||ms.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ms.BASIC_PROD_CMPS_ID||Ks.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:ms.EQT_PROD_CMPS_ID||Ks.id,PROD_CD:ms.PROD_CD||Ks.PROD_CD||t.PROD_CD||"",SVC_CD:ms.SVC_CD||Ks.SVC_CD||"",EQT_SALE_AMT:ms.EQT_SALE_AMT||"0",MST_SO_ID:ms.MST_SO_ID||t.SO_ID||"",SO_ID:ms.SO_ID||t.SO_ID||"",REG_UID:Vt,OLD_LENT_YN:ms.OLD_LENT_YN||"N",LENT:ms.LENT||"10",LENT_YN:ms.LENT_YN||"10",ITLLMT_PRD:ms.ITLLMT_PRD||"00",EQT_USE_STAT_CD:ms.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:ms.IF_DTL_ID||"",VOIP_CUSTOWN_EQT:ms.VOIP_CUSTOWN_EQT||"N",...Ps}}return{...Wt,EQT_NO:Wt.EQT_NO||Wt.id||"",EQT_SERNO:Wt.EQT_SERNO||Wt.serialNumber||"",ITEM_MID_CD:Wt.ITEM_MID_CD||Wt.itemMidCd||"",EQT_CL_CD:Wt.EQT_CL_CD||Wt.eqtClCd||"",MAC_ADDRESS:Wt.MAC_ADDRESS||Wt.macAddress||"",SVC_CMPS_ID:Wt.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Wt.BASIC_PROD_CMPS_ID||"",PROD_CD:Wt.PROD_CD||"",SVC_CD:Wt.SVC_CD||"",WRK_ID:t.id,CUST_ID:(cs=t.customer)==null?void 0:cs.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Vt,...Ps}})},ue=async()=>{var Ks,Ls,nt,Kt,Cs,Ht,Os;const He=ke.replace(/-/g,""),ct=localStorage.getItem("userInfo"),wt=ct?JSON.parse(ct):{},Bt=wt.userId||"A20130708",Vt=c||Lh(t.OP_LNKD_CD),Jt=await Cg(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let ss="";if(Vt){let es=(C==null?void 0:C.prodPromoInfo)||[];if(es.length===0)try{es=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"03"})}catch(js){console.log("[CompleteAS] getProdPromotionInfo fallback :",js)}const Ds=es.filter(js=>(js.PROD_CMPS_CL==="21"||js.PROD_CMPS_CL==="22")&&(js.PROD_STAT_CD==="10"||js.PROD_STAT_CD==="20")).map(js=>js.PROD_CD).filter(js=>js);ss=Ds.length>0?Ds.join(",")+",":"",console.log("[CompleteAS] ADD_ON :",ss)}const Wt=(C==null?void 0:C.installedEquipments)||[];if(Vt&&Wt.length>0&&!y){r==null||r("  .","error");return}if(Vt&&y)try{const es=await _g({order:t,workerId:Bt,certifyRegconfInfo:y,addOnParam:ss,reason:"AS"});if(!es.success){r==null||r(` : ${es.message}`,"error");return}}catch(es){console.error("[CompleteAS] CL-04  :",es),r==null||r(`  : ${es.message||"   "}`,"error");return}let Es="";const ys=(C==null?void 0:C.removedEquipments)||[],Ps=t.VOIP_CTX==="1",xs=Ps&&(t.PROD_CD||t.PROD_CD)==="PD10004499",vs=["090901","091001","091002","091005"],Ms=ys.some(es=>{var js,hs;const Ds=es.EQT_CL_CD||es.eqtClCd||((js=es.actualEquipment)==null?void 0:js.EQT_CL_CD)||((hs=es.actualEquipment)==null?void 0:hs.eqtClCd)||"";return!vs.includes(Ds)});if($e)console.log("[CompleteAS] LGHV :   skip ( )");else if(!Jt&&!Ps&&ys.length>0)try{let es="";try{const Qs=(await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"TERM",WRK_CD:"03"})).find(Is=>Is.PROD_CMPS_CL==="23");Qs&&(es=Qs.PROD_CMPS_ID||""),console.log("[CompleteAS] EQT_PROD_CMPS_ID:",es)}catch(Us){console.log("[CompleteAS] getProdPromotionInfo   ():",Us)}const js=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"",hs=await la({MSG_ID:"SMR05",CUST_ID:((Ks=t.customer)==null?void 0:Ks.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:es,PROD_CD:"",ITV_USR_ID:"",IP_CNT:"",ETC_1:"",ETC_2:"",ETC_3:"",ETC_4:"",SUB_PROD_CD:"",IF_DTL_ID:"",WRK_ID:t.id||"",REG_UID:Bt,VOIP_JOIN_CTRT_ID:js,WTIME:"3"});if((hs==null?void 0:hs.code)==="SUCCESS"||(hs==null?void 0:hs.code)==="PARTIAL")Es=(hs==null?void 0:hs.IF_DTL_ID)||"",console.log("[CompleteAS] SMR05 SUCCESS, IF_DTL_ID:",Es);else{const Us=(hs==null?void 0:hs.message)||(hs==null?void 0:hs.rawResult)||"";console.error("[CompleteAS] SMR05 FAILED:",Us),r==null||r(`   : ${Us}`,"error");return}}catch(es){console.error("[CompleteAS] SMR05 error:",es),r==null||r("     .","error");return}if(xs&&ys.length>0&&Ms)try{const Ds=((C==null?void 0:C.installedEquipments)||[]).find(Us=>{var Qs,Is;return(Us.ITEM_MID_CD||Us.itemMidCd||((Qs=Us.actualEquipment)==null?void 0:Qs.ITEM_MID_CD)||((Is=Us.actualEquipment)==null?void 0:Is.itemMidCd))==="08"}),js=(Ds==null?void 0:Ds.EQT_NO)||(Ds==null?void 0:Ds.id)||((Ls=Ds==null?void 0:Ds.actualEquipment)==null?void 0:Ls.EQT_NO)||((nt=Ds==null?void 0:Ds.actualEquipment)==null?void 0:nt.id)||"";console.log("[CompleteAS] VoIP IPC (SMR65) :",{eqtNo:js});const hs=await la({MSG_ID:"SMR65",CUST_ID:((Kt=t.customer)==null?void 0:Kt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:js,EQT_PROD_CMPS_ID:"",PROD_CD:t.PROD_CD||t.PROD_CD||"",ITV_USR_ID:"",IP_CNT:"",ETC_1:"",ETC_2:"",ETC_3:"",ETC_4:"",SUB_PROD_CD:"",IF_DTL_ID:"",WRK_ID:t.id||"",REG_UID:Bt,WTIME:"3"});if((hs==null?void 0:hs.code)==="SUCCESS"||(hs==null?void 0:hs.code)==="PARTIAL")Es=(hs==null?void 0:hs.IF_DTL_ID)||"",console.log("[CompleteAS] SMR65 SUCCESS, IF_DTL_ID:",Es);else{const Us=(hs==null?void 0:hs.message)||(hs==null?void 0:hs.rawResult)||"";console.error("[CompleteAS] SMR65 FAILED:",Us),r==null||r(`IPC   : ${Us}`,"error");return}}catch(es){console.error("[CompleteAS] SMR65 error:",es),r==null||r("IPC     .","error");return}const cs={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Cs=t.customer)==null?void 0:Cs.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||wt.crrId||"01",WRKR_ID:Bt,WRKR_CMPL_DT:He,MEMO:k||" ",STTL_YN:"Y",REG_UID:Bt,CUST_REL:M,CNFM_CUST_NM:((Ht=t.customer)==null?void 0:Ht.name)||"",CNFM_CUST_TELNO:((Os=t.customer)==null?void 0:Os.contactNumber)||"",INSTL_LOC:Nt||"",PSN_USE_CORP:ee||"",VOIP_USE_CORP:$||"",DTV_USE_CORP:K||"",WRK_ACT_CL:"20",NET_CL:(be==null?void 0:be.NET_CL)||"",WRNG_TP:(be==null?void 0:be.WRNG_TP)||"",INSTL_TP:(be==null?void 0:be.INSTL_TP)||"",KPI_PROD_GRP:G,OBS_RCPT_CD:j,OBS_RCPT_DTL_CD:P,CUST_CLEAN_YN:["MMA","MMB","MMC","II5"].includes(P)?"A":"",UP_CTRL_CL:ge.replace("[]",""),TV_TYPE:Re||"",VOIP_JOIN_CTRT_ID:T||"",ADD_ON:ss||""},equipmentList:jt((C==null?void 0:C.installedEquipments)||[],!1),removeEquipmentList:jt((C==null?void 0:C.removedEquipments)||[],!0),spendItemList:(C==null?void 0:C.spendItems)||[],agreementList:(C==null?void 0:C.agreements)||[],poleList:ht?[{WRK_ID:t.id,POLE_YN:ht.POLE_YN,LAN_GB:ht.LAN_GB||"",REG_UID:Bt}]:[]},ms=async()=>{var es,Ds,js,hs,Us,Qs;try{if((t.CERTIFY_TG||"")==="Y"){console.log("[CompleteAS] FTTH :  skip ( )");return}const ps=(C==null?void 0:C.installedEquipments)||[],Lr=["090901","091001","091002","091005"];let Ir=!1;for(const ws of ps){const Hn=ws.EQT_CL_CD||ws.eqtClCd||((es=ws.actualEquipment)==null?void 0:es.EQT_CL_CD)||((Ds=ws.actualEquipment)==null?void 0:Ds.eqtClCd)||"";if(Lr.includes(Hn))continue;(ws.EQT_KND||((js=ws.actualEquipment)==null?void 0:js.EQT_KND)||"WRKER")==="WRKER"&&(Ir=!0)}if(t.VOIP_CTX==="1"&&(Ir=!1),t.COLOR_RING_YN==="Y"&&(Ir=!1),!Ir){console.log("[CompleteAS]   : skip");return}const qr=t.PROD_GRP||"",vr=t.VOIP_PROD_CD||"";let cn="SMR03";qr==="V"?cn="SMR60":$e&&(cn="STB_CHG");let cr="",ni=t.PROD_CD||"",Fr="",Hi=qr;try{const ws=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"03"}),Hn=ws.find(Oi=>Oi.PROD_CMPS_CL==="23");Hn&&(cr=Hn.PROD_CMPS_ID||"");const Kr=ws.find(Oi=>Oi.PROD_CMPS_CL==="11");Kr&&(ni=Kr.PROD_CD||ni,Hi=Kr.PROD_GRP||qr);const Si=ws.filter(Oi=>Oi.BASIC_PROD_FL==="V").map(Oi=>Oi.PROD_CD);Si.length>0&&(Fr=Si.join(","))}catch(ws){console.log("[CompleteAS] getProdPromotionInfo for install signal failed:",ws)}const Or=ws=>ps.find(Hn=>{var Kr,Si;return(Hn.ITEM_MID_CD||Hn.itemMidCd||((Kr=Hn.actualEquipment)==null?void 0:Kr.ITEM_MID_CD)||((Si=Hn.actualEquipment)==null?void 0:Si.itemMidCd))===ws}),zi=ws=>{var Hn,Kr;return(ws==null?void 0:ws.EQT_NO)||(ws==null?void 0:ws.id)||((Hn=ws==null?void 0:ws.actualEquipment)==null?void 0:Hn.EQT_NO)||((Kr=ws==null?void 0:ws.actualEquipment)==null?void 0:Kr.id)||""};let Dr="";if(vr){const ws=Or("08");ws&&(Dr=zi(ws))}else{for(const ws of["05","01","03"]){const Hn=Or(ws);if(Hn){Dr=zi(Hn);break}}if(!Dr&&Hi==="I"){const ws=Or("02");ws&&(Dr=zi(ws))}if(!Dr){const ws=Or("08");ws&&(Dr=zi(ws))}}let Ta="";if(vr){const ws=Or("02");ws&&(Ta=zi(ws))}else{const ws=Or("04");ws&&(Ta=zi(ws))}const Fa=zi(Or("07")),Rs=Hi==="C"?zi(Or("02")):"",Pn=zi(Or("10"));let Qn=t.id||"";const Xr=ps.find(ws=>{var Hn,Kr;return(ws.EQT_CL_CD||ws.eqtClCd||((Hn=ws.actualEquipment)==null?void 0:Hn.EQT_CL_CD)||((Kr=ws.actualEquipment)==null?void 0:Kr.eqtClCd))==="091003"});if(Xr)Qn=zi(Xr);else{const ws=ps.find(Hn=>{var Kr,Si;return(Hn.EQT_CL_CD||Hn.eqtClCd||((Kr=Hn.actualEquipment)==null?void 0:Kr.EQT_CL_CD)||((Si=Hn.actualEquipment)==null?void 0:Si.eqtClCd))==="092201"});ws&&(Qn=(ws==null?void 0:ws.MAC_ADDRESS)||(ws==null?void 0:ws.macAddress)||((hs=ws==null?void 0:ws.actualEquipment)==null?void 0:hs.MAC_ADDRESS)||((Us=ws==null?void 0:ws.actualEquipment)==null?void 0:Us.macAddress)||"")}let Ni="";qr==="V"?Ni=vr?t.CTRT_ID||"":T||"":t.ISP_PROD_CD&&(Ni=T||"");const so=Es||t.IF_DTL_ID||"",ml=qr==="V"||cn==="SMR03"?"":so;console.log("[CompleteAS]  :",{msgId:cn,eqtNo:Dr,instProdCd:ni,instEqtProdCmpsId:cr,subProdCd:Fr}),await la({MSG_ID:cn,CUST_ID:((Qs=t.customer)==null?void 0:Qs.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:Dr,EQT_PROD_CMPS_ID:cr,PROD_CD:ni,ITV_USR_ID:"",IP_CNT:"",ETC_1:Ta,ETC_2:Fa,ETC_3:Rs,ETC_4:Pn,SUB_PROD_CD:Fr,IF_DTL_ID:ml,WRK_ID:Qn,REG_UID:Bt,VOIP_JOIN_CTRT_ID:Ni,WTIME:"3"}),console.log("[CompleteAS]   ")}catch(Is){console.log("[CompleteAS]     (  ):",Is)}};v(cs,{onSuccess:es=>{es.code==="SUCCESS"||es.code==="OK"?(localStorage.removeItem(A()),t.WRK_STAT_CD="3",ms(),r==null||r("  .","success"),n()):r==null||r(es.message||"   .","error",!0)},onError:es=>{r==null||r(es.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[R&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[H&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:T,onValueChange:I,options:U,placeholder:" ",required:!0,disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:te||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>he(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg ${d?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:d?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:M,onValueChange:L,options:ve,placeholder:" ",required:!0,disabled:d})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:G,onValueChange:W,options:Oe,placeholder:" ",required:!0,disabled:d})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:j,onValueChange:S,options:rs,placeholder:" ",required:!0,disabled:d})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:P,onValueChange:F,options:Ss,placeholder:j?" ":"  ",required:!0,disabled:d||!j})]}),((C==null?void 0:C.kpiProdGrpCd)==="D"||(C==null?void 0:C.prodGrp)==="D"||t.PROD_GRP==="D")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(Zs,{value:ge,onValueChange:ce,options:_e,placeholder:" ",disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{className:"truncate",children:Nt||t.installLocation||""}),We&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500 flex-shrink-0 whitespace-nowrap",children:["(: ",We,")"]})]}),s.jsx("button",{type:"button",onClick:()=>st(!0),className:`min-h-10 px-4 py-2 rounded-lg font-bold text-sm whitespace-nowrap ${d?"bg-gray-500 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:d?"":""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:k,onChange:He=>V(He.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${d?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:d,disabled:d}),!d&&s.jsxs("p",{className:`text-xs text-right mt-1 ${k.length>=500?"text-red-500":"text-gray-400"}`,children:[k.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:ke,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>oe(!se),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${se?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),se&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"DTV ()"}),s.jsx(Zs,{value:K,onValueChange:w,options:de,placeholder:"",disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"ISP ()"}),s.jsx(Zs,{value:ee,onValueChange:J,options:Ue,placeholder:"",disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"VoIP (VoIP)"}),s.jsx(Zs,{value:$,onValueChange:Y,options:Ye,placeholder:"",disabled:d})]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!d&&s.jsx("button",{onClick:ut,disabled:R,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${R?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:R?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>pe(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:me,onClose:()=>he(!1),onSave:Qt,workId:t.id,initialData:be,workType:t.WRK_CD,customerId:(Le=t.customer)==null?void 0:Le.id,customerName:(Ie=t.customer)==null?void 0:Ie.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD,kpiProdGrpCd:(C==null?void 0:C.kpiProdGrpCd)||(C==null?void 0:C.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(C==null?void 0:C.prodChgGb)||(C==null?void 0:C.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(C==null?void 0:C.chgKpiProdGrpCd)||(C==null?void 0:C.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(C==null?void 0:C.prodGrp)||(C==null?void 0:C.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:d}),s.jsx(Ba,{isOpen:re,onClose:()=>pe(!1),ctrtId:t.CTRT_ID,custId:(Ze=t.customer)==null?void 0:Ze.id}),s.jsx(If,{isOpen:Se,onClose:()=>st(!1),onSave:He=>{lt(He.INSTL_LOC),ot(He.VIEW_MOD_CD),Dt(He.VIEW_MOD_NM),st(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(C==null?void 0:C.prodGrp)||(C==null?void 0:C.PROD_GRP),initialInstlLoc:Nt||t.installLocation,initialViewModCd:At,initialViewModNm:We,showToast:r,readOnly:d}),s.jsx(yg,{isOpen:at,onClose:()=>It(!1),onSave:qt,soId:t.SO_ID||""}),s.jsx(ul,{isOpen:Et,onClose:()=>Rt(!1),onConfirm:ue,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{workType:"03",workTypeName:"A/S",custRel:M,custRelName:(Ee=ve.find(He=>He.value===M))==null?void 0:Ee.label,networkType:Z,networkTypeName:te,upCtrlCl:ge,upCtrlClName:(pt=_e.find(He=>He.value===ge))==null?void 0:pt.label,kpiProdGrp:G,kpiProdGrpName:(Ke=Oe.find(He=>He.value===G))==null?void 0:Ke.label,obsRcptCd:j,obsRcptCdName:(Ct=rs.find(He=>He.value===j))==null?void 0:Ct.label,obsRcptDtlCd:P,obsRcptDtlCdName:(bt=Ss.find(He=>He.value===P))==null?void 0:bt.label,installedEquipments:(C==null?void 0:C.installedEquipments)||[],removedEquipments:(C==null?void 0:C.removedEquipments)||[],installLocation:Nt?{position:Nt}:void 0,memo:k})})]})},O3=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1})=>{var Qt,ut,qt,jt;const c=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",d=t.WRK_DTL_TCD==="0440";t.WRK_DTL_TCD;const[u,f]=_.useState(!1),{equipmentData:m,filteringData:p}=$i(),{certifyRegconfInfo:y}=Wa(),g=t.id||"",N=oa(g),C={...m||i||p||{},installedEquipments:N.installedEquipments.length>0?N.installedEquipments:(m==null?void 0:m.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:N.markedForRemoval.length>0?N.markedForRemoval:(m==null?void 0:m.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(N.removalStatus).length>0?N.removalStatus:(m==null?void 0:m.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:v,isPending:R}=od(),A=()=>`work_complete_draft_${t.id}`,[M,L]=_.useState(""),[k,V]=_.useState(""),[G,W]=_.useState(""),[j,S]=_.useState(""),[P,F]=_.useState(""),[ee,J]=_.useState(!1),[$,Y]=_.useState(""),[K,w]=_.useState([]),[se,oe]=_.useState(!1),[T,I]=_.useState([]),[U,Q]=_.useState(!1),[H,q]=_.useState(t.NET_CL||""),[ae,fe]=_.useState(t.NET_CL_NM||""),[ge,ce]=_.useState(()=>{if(t.NET_CL)return{NET_CL:t.NET_CL||"",NET_CL_NM:t.NET_CL_NM||"",WRNG_TP:t.WRNG_TP||"",INSTL_TP:t.INSTL_TP||"",CB_WRNG_TP:t.CB_WRNG_TP||"",CB_INSTL_TP:t.CB_INSTL_TP||"",INOUT_LINE_TP:t.INOUT_LINE_TP||"",INOUT_LEN:t.INOUT_LEN||"",DVDR_YN:t.DVDR_YN||"",BFR_LINE_YN:t.BFR_LINE_YN||"",CUT_YN:t.CUT_YN||"",TERM_NO:t.TERM_NO||"",RCV_STS:t.RCV_STS||"",SUBTAP_ID:t.SUBTAP_ID||"",PORT_NUM:t.PORT_NUM||"",EXTN_TP:t.EXTN_TP||"",TAB_LBL:t.TAB_LBL||"",CVT_LBL:t.CVT_LBL||"",STB_LBL:t.STB_LBL||""}}),[Re,X]=_.useState(!1),[me,he]=_.useState(!1),[Z,ie]=_.useState(""),[te,je]=_.useState(""),[be,Te]=_.useState(""),[re,pe]=_.useState(!1),[Se,st]=_.useState(null),[Nt,lt]=_.useState(!1),[At,ot]=_.useState(""),[We,Dt]=_.useState(!1),[Et,Rt]=_.useState(null),[$e,gt]=_.useState(!1),[Fe,rt]=_.useState(!1),[at,It]=_.useState(!1),[ht,Je]=_.useState([]),[ve,Ge]=_.useState([]),[_e,xe]=_.useState([]),[Ue,Pe]=_.useState([]),[Ye,mt]=_.useState([]),[de,tt]=_.useState(()=>{const ue=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(ue&&ue.length>=8)return`${ue.slice(0,4)}-${ue.slice(4,6)}-${ue.slice(6,8)}`;const Ce=new Date;return Ce.getFullYear()+"-"+String(Ce.getMonth()+1).padStart(2,"0")+"-"+String(Ce.getDate()).padStart(2,"0")});_.useEffect(()=>{(async()=>{try{console.log("[WorkCompleteMove]    ");const Ce=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});Ce&&(console.log("[WorkCompleteMove]    :",{NET_CL:Ce.NET_CL,NET_CL_NM:Ce.NET_CL_NM}),c&&(L(Ce.CUST_REL||""),V((Ce.WRK_PROC_CT||"").replace(/\\n/g,`
`)),W(Ce.PSN_USE_CORP||""),S(Ce.VOIP_USE_CORP||""),F(Ce.DTV_USE_CORP||""),Ce.WRKR_CMPL_DT&&Ce.WRKR_CMPL_DT.length>=8&&tt(`${Ce.WRKR_CMPL_DT.slice(0,4)}-${Ce.WRKR_CMPL_DT.slice(4,6)}-${Ce.WRKR_CMPL_DT.slice(6,8)}`),Ce.VOIP_JOIN_CTRT_ID&&Y(Ce.VOIP_JOIN_CTRT_ID)),q(Ce.NET_CL||""),fe(Ce.NET_CL_NM||""),ie(Le=>Le||Ce.INSTL_LOC||""),ce(Le=>Le||{NET_CL:Ce.NET_CL||"",NET_CL_NM:Ce.NET_CL_NM||"",WRNG_TP:Ce.WRNG_TP||"",INSTL_TP:Ce.INSTL_TP||"",CB_WRNG_TP:Ce.CB_WRNG_TP||"",CB_INSTL_TP:Ce.CB_INSTL_TP||"",INOUT_LINE_TP:Ce.INOUT_LINE_TP||"",INOUT_LEN:Ce.INOUT_LEN||"",DVDR_YN:Ce.DVDR_YN||"",BFR_LINE_YN:Ce.BFR_LINE_YN||"",CUT_YN:Ce.CUT_YN||"",TERM_NO:Ce.TERM_NO||"",RCV_STS:Ce.RCV_STS||"",SUBTAP_ID:Ce.SUBTAP_ID||"",PORT_NUM:Ce.PORT_NUM||"",EXTN_TP:Ce.EXTN_TP||"",TAB_LBL:Ce.TAB_LBL||"",CVT_LBL:Ce.CVT_LBL||"",STB_LBL:Ce.STB_LBL||""}))}catch(Ce){console.error("[WorkCompleteMove]    :",Ce)}if(!c){const Ce=localStorage.getItem(A());if(Ce)try{const Le=JSON.parse(Ce);L(Le.custRel||""),V(Le.memo||""),Le.installInfoData&&(q(Le.networkType||""),fe(Le.networkTypeName||""),ie(Le.installLocationText||""),ce(Le.installInfoData)),Le.voipJoinCtrtId&&Y(Le.voipJoinCtrtId)}catch(Le){console.error("[WorkCompleteMove] localStorage  :",Le)}}f(!0)})()},[t.id,c]),_.useEffect(()=>{if(!u||c)return;const ue={custRel:M,memo:k,internetUse:G,voipUse:j,dtvUse:P,networkType:H,networkTypeName:ae,installLocationText:Z,installInfoData:ge,voipJoinCtrtId:$,savedAt:new Date().toISOString()};localStorage.setItem(A(),JSON.stringify(ue))},[M,k,G,j,P,H,ae,Z,ge,$,u,c]);const De=ue=>!ue||ue.length!==8?"":`${ue.slice(0,4)}-${ue.slice(4,6)}-${ue.slice(6,8)}`,it=ue=>ue.replace(/-/g,""),St=()=>new Date().toISOString().slice(0,10).replace(/-/g,""),Lt=(ue,Ce)=>{if(!ue||!Ce)return 0;const Le=new Date(De(ue)),Ie=new Date(De(Ce));return Math.ceil((Ie.getTime()-Le.getTime())/(1e3*60*60*24))},Ve=ue=>new Date(ue.getFullYear(),ue.getMonth()+1,0),kt=ue=>Ve(ue).getDate()-ue.getDate()<7,Oe=()=>{const ue=new Date;let Ce;return kt(ue)?Ce=new Date(ue.getFullYear(),ue.getMonth()+2,0):Ce=Ve(ue),Ce.toISOString().slice(0,10)},Xt=_.useCallback(async()=>{const ue=t.RCPT_ID||"",Ce=t.CTRT_ID||"";if(!(!ue||!Ce)){lt(!0),Rt(null);try{const Le=await c5({RCPT_ID:ue,CTRT_ID:Ce});if(console.log("[CompleteMove]   :",Le),Le){st(Le);const Ie=St();if(Le.WRK_DTL_TCD==="0430"&&Le.MMT_SUS_HOPE_DD<=Ie){const Ze=Oe();ot(Ze),Dt(!0),console.log("[CompleteMove]   -   :",Ze),r==null||r("  .   .","warning")}else ot(De(Le.MMT_SUS_HOPE_DD)),Dt(!1)}}catch(Le){console.error("[CompleteMove]   :",Le),Rt(Le.message||"   ")}finally{lt(!1)}}},[t.RCPT_ID,t.CTRT_ID,r]);_.useEffect(()=>{Xt()},[Xt]);const rs=ue=>{const Ce=ue.target.value;if(ot(Ce),Rt(null),!Se)return;const Le=De(Se.SUS_HOPE_DD);if(Ce<Le){Rt("   .");return}if(Se.VALID_SUS_DAYS&&parseInt(Se.VALID_SUS_DAYS)>0){const Ie=parseInt(Se.VALID_SUS_DAYS),Ze=new Date(Le),Ee=new Date(Ze);Ee.setDate(Ee.getDate()+Ie-1),new Date(Ce)>Ee&&Rt(`   ${Ee.toISOString().slice(0,10)}  .`)}},ds=()=>{if(!Se||!At)return;const ue=De(Se.SUS_HOPE_DD);if(At<ue){r==null||r("   .","error");return}rt(!0),Dt(!1),r==null||r(" .   .","info")};_.useEffect(()=>{(async()=>{try{const Ce=await Jl(["CMCU005","CMCU057","CMCU110","CMCU148"]);Ce.CMCU005&&Ge(Ce.CMCU005.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM}))),Ce.CMCU057&&xe(Ce.CMCU057.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM}))),Ce.CMCU110&&Pe(Ce.CMCU110.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM}))),Ce.CMCU148&&mt(Ce.CMCU148.map(Le=>({value:Le.COMMON_CD,label:Le.COMMON_CD_NM})))}catch(Ce){console.error("[WorkCompleteMove]   :",Ce)}})()},[]),_.useEffect(()=>{(async()=>{try{const Ce=await mc(),Le=(Ce==null?void 0:Ce.output)||Ce||[];Je(Le);const Ie=t.PROD_CD||t.PROD_CD||"",Ze=Le.some(Ee=>Ee.PROD_CD===Ie);It(Ze),console.log("[CompleteSuspend] LGHV :",{currentProdCd:Ie,isLghv:Ze,prodListCount:Le.length})}catch(Ce){console.error("[CompleteSuspend] LGHV   :",Ce)}})()},[t.PROD_CD]),_.useEffect(()=>{var Le;if(c)return;const ue=((Le=t.customer)==null?void 0:Le.id)||t.CUST_ID;if(!ue)return;(async()=>{try{console.log("[WorkCompleteMove]     :",ue);const Ie=await jf({CUST_ID:ue});console.log("[WorkCompleteMove]   :",Ie),I(Ie||[])}catch(Ie){console.error("[WorkCompleteMove]     :",Ie),I([])}})()},[(Qt=t.customer)==null?void 0:Qt.id,t.CUST_ID,c]),_.useEffect(()=>{if(c)return;if(T.length===0){console.log("[WorkCompleteMove]     ...");return}const ue=t.PROD_GRP||"",Ce=t.VOIP_PROD_CD||"",Le=t.ISP_PROD_CD||"",Ie=t.WRK_STAT_CD||"",Ze=t.ADDR_ORD||"";if(console.log("[WorkCompleteMove]   :",{prodGrp:ue,voipProdCd:Ce,ispProdCd:Le,wrkStatCd:Ie,addrOrd:Ze,customerCtrtListCount:T.length}),ue==="V"&&!Ce){const Ee=T.filter(Ke=>{const Ct=Ke.PROD_GRP||"",bt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"";return(Ct==="C"||Ct==="D"||Ct==="I")&&bt==="20"&&(!Ze||He===Ze)});console.log("[WorkCompleteMove] VoIP   :",Ee),Ee.length<1&&Ie==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const pt=[{value:"",label:""},...Ee.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];w(pt),oe(!0);return}if(ue==="I"&&Le){const Ee=T.filter(Ke=>{const Ct=Ke.PROD_GRP||"",bt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"",ct=Ke.ISP_JOIN_ID||"",wt=Ke.KPI_PROD_GRP_CD||"";return(Ct==="D"||Ct==="C")&&bt==="20"&&!ct&&wt==="D"&&(!Ze||He===Ze)});console.log("[WorkCompleteMove] ISP   :",Ee),Ee.length<1&&Ie==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const pt=[{value:"",label:""},...Ee.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];w(pt),oe(!0);return}oe(!1),w([])},[t.id,t.WRK_STAT_CD,c,r,T]);const Ss=()=>{var Ze;const ue=[];M||ue.push("  ."),ge!=null&&ge.NET_CL||ue.push(" ."),t.WRK_CD!=="04"&&!Z&&!t.installLocation&&ue.push(" ."),de||ue.push(" .");const Ce=t.PROD_GRP||"";if(t.WRK_DTL_TCD==="0430")(((Ze=C==null?void 0:C.installedEquipments)==null?void 0:Ze.length)||0)>0&&ue.push("  .");else{const Ee=(C==null?void 0:C.installedEquipments)||[];Ce!=="V"&&Ee.length<1&&ue.push("()  .")}const Le=t.VOIP_PROD_CD||"",Ie=t.ISP_PROD_CD||"";return Ce==="V"&&!Le&&se&&($||ue.push("VOIP    .")),Ce==="I"&&Ie&&se&&($||ue.push("  ISP .    .")),ue},Ns=ue=>{ce(ue),ue.NET_CL&&q(ue.NET_CL),ue.NET_CL_NM&&fe(ue.NET_CL_NM),r==null||r("  .","success")},ke=()=>{if(R)return;const ue=Ss();if(ue.length>0){ue.forEach(Ce=>r==null?void 0:r(Ce,"error"));return}pe(!0)},dt=(ue,Ce=!1)=>{if(!ue||ue.length===0)return[];const Le=localStorage.getItem("userInfo"),Ie=Le?JSON.parse(Le):{},Ze=Ie.userId||"A20130708",Ee=(C==null?void 0:C.removalStatus)||{},pt=(Ke,Ct)=>Ke==="1"||Ke==="Y"||Ct==="1"||Ct==="Y"?"1":"0";return ue.map(Ke=>{var ct,wt,Bt;const Ct=Ke.EQT_NO||Ke.id||((ct=Ke.actualEquipment)==null?void 0:ct.id)||"",bt=Ee[Ct]||{},He=Ce?{CRR_TSK_CL:t.WRK_CD||"04",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Ie.crrId||"01",WRKR_ID:Ze,EQT_LOSS_YN:pt(Ke.EQT_LOSS_YN,bt.EQT_LOSS_YN),PART_LOSS_BRK_YN:pt(Ke.PART_LOSS_BRK_YN,bt.PART_LOSS_BRK_YN),EQT_BRK_YN:pt(Ke.EQT_BRK_YN,bt.EQT_BRK_YN),EQT_CABL_LOSS_YN:pt(Ke.EQT_CABL_LOSS_YN,bt.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:pt(Ke.EQT_CRDL_LOSS_YN,bt.EQT_CRDL_LOSS_YN)}:{};if(Ke.actualEquipment){const Vt=Ke.actualEquipment,Jt=Ke.contractEquipment||{};return{...Vt,EQT_NO:Vt.id,EQT_SERNO:Vt.serialNumber,ITEM_MID_CD:Vt.itemMidCd,EQT_CL_CD:Vt.eqtClCd,MAC_ADDRESS:Ke.macAddress||Vt.macAddress,WRK_ID:t.id,CUST_ID:(wt=t.customer)==null?void 0:wt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Ze,SVC_CMPS_ID:Jt.SVC_CMPS_ID||Ke.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Jt.BASIC_PROD_CMPS_ID||Ke.BASIC_PROD_CMPS_ID||"",PROD_CMPS_ID:Jt.PROD_CMPS_ID||Ke.PROD_CMPS_ID||"",SVC_CD:Jt.SVC_CD||Ke.SVC_CD||"",PROD_CD:Jt.PROD_CD||Ke.PROD_CD||"",LENT_YN:Ke.lentYn||Ke.LENT_YN||Jt.LENT_YN||"",EQT_CHG_GB:Ke.EQT_CHG_GB||"01",...He}}return{...Ke,EQT_NO:Ke.EQT_NO||Ke.id||"",EQT_SERNO:Ke.EQT_SERNO||Ke.serialNumber||"",ITEM_MID_CD:Ke.ITEM_MID_CD||Ke.itemMidCd||"",EQT_CL_CD:Ke.EQT_CL_CD||Ke.eqtClCd||"",MAC_ADDRESS:Ke.MAC_ADDRESS||Ke.macAddress||"",SVC_CMPS_ID:Ke.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ke.BASIC_PROD_CMPS_ID||"",PROD_CD:Ke.PROD_CD||"",SVC_CD:Ke.SVC_CD||"",WRK_ID:t.id,CUST_ID:(Bt=t.customer)==null?void 0:Bt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Ze,...He}})},et=async()=>{var ct,wt,Bt,Vt;const ue=de.replace(/-/g,""),Ce=localStorage.getItem("userInfo"),Le=Ce?JSON.parse(Ce):{},Ie=Le.userId||"A20130708";if(Fe&&Se&&At){gt(!0);try{const Jt=Se.SUS_HOPE_DD,ss=it(At),Wt=Lt(Jt,ss),Es=await d5({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",SUS_HOPE_DD:Jt,MMT_SUS_HOPE_DD:ss,SUS_DD_NUM:String(Wt),REG_UID:Ie});if(Es.code!=="SUCCESS"){r==null||r(Es.message||"  ","error",!0),gt(!1);return}console.log("[CompleteMove]   ")}catch(Jt){r==null||r(Jt.message||"  ","error",!0),gt(!1);return}gt(!1)}const Ze=(C==null?void 0:C.removedEquipments)||[],Ee=(C==null?void 0:C.customerEquipments)||[],pt=(C==null?void 0:C.installedEquipments)||[],Ke=!!t.ISP_PROD_CD;if((t.WRK_DTL_TCD==="0430"||t.WRK_DTL_TCD==="0470")&&(Ze.length>0||Ee.length>0||pt.length>0||Ke))try{let Jt="SMR05",ss="";at&&(Jt="STB_DEL");const Wt=Ze[0],Es=Wt.actualEquipment||Wt,ys=Es.PROD_CMPS_ID||Wt.PROD_CMPS_ID||Es.EQT_PROD_CMPS_ID||Wt.EQT_PROD_CMPS_ID||"",xs=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"";console.log("[CompleteMove]   :",{msgId:Jt,isLghvStb:at,etc1:ss,eqtProdCmpsId:ys});const vs=await la({MSG_ID:Jt,CUST_ID:((ct=t.customer)==null?void 0:ct.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:ys,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Ie,ETC_1:ss,VOIP_JOIN_CTRT_ID:xs,WTIME:"3"});vs.code!=="SUCCESS"&&vs.code!=="OK"?(console.warn("[CompleteMove]    -  :",vs.message),r==null||r("   .","warning")):console.log("[CompleteMove]    ")}catch(Jt){console.warn("[CompleteMove]      -  :",Jt),r==null||r("     .","warning")}const bt=async()=>{var Es,ys;const Jt=(C==null?void 0:C.customerEquipments)||[],ss=(C==null?void 0:C.installedEquipments)||[],Wt=!!t.ISP_PROD_CD;if(t.WRK_DTL_TCD==="0440"&&(Jt.length>0||ss.length>0||Wt))try{const Ps=t.PROD_GRP||"";let xs="SMR03",vs="",Ms="",cs="",ms="",Ks="",Ls="";Ps==="V"?xs="SMR60":at&&(xs="STB_CRT");let nt=(C==null?void 0:C.prodPromoInfo)||[];if(nt.length===0)try{nt=await dl({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:Ie,PROD_CD:t.PROD_CD||"",CRR_TSK_CL:t.WRK_CD||"04",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||"",WRK_CD:t.WRK_CD||"04",WRK_STAT_CD:t.WRK_STAT_CD||""})}catch(Qs){console.log("[CompleteSuspend] prodPromoInfo  :",Qs)}const Kt=((Es=nt.find(Qs=>Qs.PROD_CMPS_CL==="23"))==null?void 0:Es.PROD_CMPS_ID)||"",Cs=nt.find(Qs=>Qs.PROD_CMPS_CL==="11"),Ht=(Cs==null?void 0:Cs.PROD_CD)||"",Os=(Cs==null?void 0:Cs.PROD_GRP)||Ps,es=nt.filter(Qs=>Qs.BASIC_PROD_FL==="V").map(Qs=>Qs.PROD_CD),Ds=es.length>0?es.join(","):"",js=[...Jt,...ss],hs=Qs=>{const Is=js.find(Lr=>{const Ir=Lr.actualEquipment||Lr;return(Ir.itemMidCd||Ir.ITEM_MID_CD)===Qs});if(!Is)return"";const ps=Is.actualEquipment||Is;return ps.id||ps.EQT_NO||""};t.VOIP_PROD_CD?(vs=hs("08"),Ms=hs("02")):(vs=hs("05")||hs("01")||hs("03")||(Os==="I"?hs("02"):"")||hs("08")||"",Ms=hs("04")),cs=hs("07"),Os==="C"&&(ms=hs("02")),Os==="V"&&(Ks=hs("10")),Wt&&(Ks=hs("21")),(Ps==="V"||Wt)&&(Ls=$||t.CTRT_ID||"");let Us=t.id||"";for(const Qs of js){const Is=Qs.actualEquipment||Qs,ps=Is.eqtClCd||Is.EQT_CL_CD||"";if(ps==="091003"||ps==="091004"){Us=Is.id||Is.EQT_NO||t.id||"";break}if(ps==="092201"){Us=Is.macAddress||Is.MAC_ADDRESS||Is.id||Is.EQT_NO||t.id||"";break}}console.log("[CompleteSuspend]   :",{msgId:xs,eqtNo:vs,prodCd:Ht,subProdCd:Ds,etc1:Ms,etc2:cs,etc3:ms,etc4:Ks}),await la({MSG_ID:xs,CUST_ID:((ys=t.customer)==null?void 0:ys.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:vs,EQT_PROD_CMPS_ID:Kt,PROD_CD:Ht,ITV_USR_ID:"",IP_CNT:"",ETC_1:Ms,ETC_2:cs,ETC_3:ms,ETC_4:Ks,SUB_PROD_CD:Ds,IF_DTL_ID:"",WRK_ID:Us,REG_UID:Ie,VOIP_JOIN_CTRT_ID:Ls,WTIME:"3"}),console.log("[CompleteSuspend]    ")}catch(Ps){console.log("[CompleteSuspend]      (  ):",Ps)}},He={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(wt=t.customer)==null?void 0:wt.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Le.crrId||"01",WRKR_ID:Ie,WRKR_CMPL_DT:ue,MEMO:k||" ",STTL_YN:"Y",REG_UID:Ie,CUST_REL:M,CNFM_CUST_NM:((Bt=t.customer)==null?void 0:Bt.name)||"",CNFM_CUST_TELNO:((Vt=t.customer)==null?void 0:Vt.contactNumber)||"",INSTL_LOC:Z||t.installLocation||"",PSN_USE_CORP:G||"",VOIP_USE_CORP:j||"",DTV_USE_CORP:P||"",WRK_ACT_CL:"20",NET_CL:(ge==null?void 0:ge.NET_CL)||"",WRNG_TP:(ge==null?void 0:ge.WRNG_TP)||"",INSTL_TP:(ge==null?void 0:ge.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:$||""},equipmentList:dt((C==null?void 0:C.installedEquipments)||[],!1),removeEquipmentList:dt((C==null?void 0:C.removedEquipments)||[],!0),spendItemList:(C==null?void 0:C.spendItems)||[],agreementList:(C==null?void 0:C.agreements)||[],poleList:(C==null?void 0:C.poleResults)||[]};v(He,{onSuccess:Jt=>{Jt.code==="SUCCESS"||Jt.code==="OK"?(localStorage.removeItem(A()),t.WRK_STAT_CD="3",bt(),r==null||r("  .","success"),n()):r==null||r(Jt.message||"   .","error",!0)},onError:Jt=>{r==null||r(Jt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[R&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[d&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:" .   ."})}),se&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:$,onValueChange:Y,options:K,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:ae||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>Q(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg ${c?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:c?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:M,onValueChange:L,options:ve,placeholder:" ",required:!0,disabled:c})]}),t.WRK_CD!=="04"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{className:"truncate",children:Z||t.installLocation||""}),be&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500 flex-shrink-0 whitespace-nowrap",children:["(: ",be,")"]})]}),s.jsx("button",{type:"button",onClick:()=>he(!0),className:`min-h-10 px-4 py-2 rounded-lg font-bold text-sm whitespace-nowrap ${c?"bg-gray-500 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:c?"":""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:k,onChange:ue=>V(ue.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:c,disabled:c}),!c&&s.jsxs("p",{className:`text-xs text-right mt-1 ${k.length>=500?"text-red-500":"text-gray-400"}`,children:[k.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:de,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 border border-indigo-200",children:[s.jsxs("div",{className:"text-sm font-semibold text-indigo-800 mb-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_h,{size:16}),""]}),!c&&Se&&!We&&s.jsx("button",{type:"button",onClick:()=>Dt(!0),className:"px-2 py-0.5 bg-indigo-500 hover:bg-indigo-600 text-white rounded text-xs font-medium",children:""})]}),Nt?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500"})," ..."]}):Se?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"date",value:De(Se.SUS_HOPE_DD),disabled:!0,className:"flex-1 px-2 py-1.5 border border-gray-300 rounded bg-gray-100 text-gray-600 text-sm"}),s.jsx("span",{className:"text-gray-500",children:"~"}),We&&!c?s.jsx("input",{type:"date",value:At,onChange:rs,min:De(Se.SUS_HOPE_DD),className:"flex-1 px-2 py-1.5 border border-indigo-300 rounded bg-white text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}):s.jsx("input",{type:"date",value:Fe?At:De(Se.MMT_SUS_HOPE_DD),disabled:!0,className:`flex-1 px-2 py-1.5 border rounded text-sm ${Fe?"border-orange-300 bg-orange-50 text-orange-700":"border-gray-300 bg-gray-100 text-gray-600"}`})]}),We&&!c&&At&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-indigo-600",children:[": ",Lt(Se.SUS_HOPE_DD,it(At)),""]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{Dt(!1),rt(!1),ot(De(Se.MMT_SUS_HOPE_DD)),Rt(null)},className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white rounded text-xs font-medium",children:""}),s.jsx("button",{type:"button",onClick:ds,disabled:!!Et,className:"px-3 py-1 bg-indigo-500 hover:bg-indigo-600 text-white rounded text-xs font-medium disabled:opacity-50",children:""})]})]}),Fe&&!We&&!c&&s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"  (  )"}),s.jsx("button",{type:"button",onClick:()=>Dt(!0),className:"px-2 py-0.5 bg-orange-500 hover:bg-orange-600 text-white rounded text-xs font-medium",children:" "})]}),Et&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[s.jsx(Mr,{size:12}),Et]})]}):s.jsx("div",{className:"text-sm text-gray-500",children:"  "})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!c&&s.jsx("button",{onClick:ke,disabled:R,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${R?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:R?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>X(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:U,onClose:()=>Q(!1),onSave:Ns,workId:t.id,initialData:ge,workType:t.WRK_CD,customerId:(ut=t.customer)==null?void 0:ut.id,customerName:(qt=t.customer)==null?void 0:qt.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(C==null?void 0:C.kpiProdGrpCd)||(C==null?void 0:C.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(C==null?void 0:C.prodChgGb)||(C==null?void 0:C.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(C==null?void 0:C.chgKpiProdGrpCd)||(C==null?void 0:C.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(C==null?void 0:C.prodGrp)||(C==null?void 0:C.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:c}),s.jsx(Ba,{isOpen:Re,onClose:()=>X(!1),ctrtId:t.CTRT_ID,custId:(jt=t.customer)==null?void 0:jt.id}),s.jsx(If,{isOpen:me,onClose:()=>he(!1),onSave:ue=>{ie(ue.INSTL_LOC),je(ue.VIEW_MOD_CD),Te(ue.VIEW_MOD_NM),he(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(C==null?void 0:C.prodGrp)||(C==null?void 0:C.PROD_GRP),initialInstlLoc:Z||t.installLocation,initialViewModCd:te,initialViewModNm:be,showToast:r,readOnly:c}),s.jsx(ul,{isOpen:re,onClose:()=>pe(!1),onConfirm:et,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{equipmentData:C,installInfoData:ge,custRel:M,custRelOptions:ve,memo:k,installLocationText:Z,order:t})})]})},v5=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1,certifyMode:c=!1})=>{var et,Qt,ut,qt,jt,ue;const d=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",u=t.WRK_DTL_TCD!=="0510",[f,m]=_.useState(!1),{equipmentData:p,filteringData:y}=$i(),{certifyRegconfInfo:g}=Wa(),N=t.id||"",C=oa(N),v={...p||i||y||{},installedEquipments:C.installedEquipments.length>0?C.installedEquipments:(p==null?void 0:p.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:C.markedForRemoval.length>0?C.markedForRemoval:(p==null?void 0:p.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(C.removalStatus).length>0?C.removalStatus:(p==null?void 0:p.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:R,isPending:A}=od(),M=()=>`work_complete_draft_${t.id}`,[L,k]=_.useState(""),[V,G]=_.useState(""),[W,j]=_.useState(""),[S,P]=_.useState(""),[F,ee]=_.useState(""),[J,$]=_.useState(""),[Y,K]=_.useState(!1),[w,se]=_.useState(""),[oe,T]=_.useState([]),[I,U]=_.useState(!1),[Q,H]=_.useState([]),[q,ae]=_.useState(!1),[fe,ge]=_.useState(!1),[ce,Re]=_.useState(""),[X,me]=_.useState(""),[he,Z]=_.useState(void 0),[ie,te]=_.useState(void 0),[je,be]=_.useState(!1),[Te,re]=_.useState(!1),[pe,Se]=_.useState(""),[st,Nt]=_.useState(""),[lt,At]=_.useState(""),[ot,We]=_.useState(!1),[Dt,Et]=_.useState(!1),[Rt,$e]=_.useState(null),[gt,Fe]=_.useState([]),[rt,at]=_.useState([]),[It,ht]=_.useState([]),[Je,ve]=_.useState([]),[Ge,_e]=_.useState([]),[xe,Ue]=_.useState(!1),[Pe,Ye]=_.useState([]),[mt,de]=_.useState(!1),[tt,De]=_.useState(""),[it,St]=_.useState(!1),[Lt,Ve]=_.useState("B"),[kt,Oe]=_.useState(()=>{const Ce=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Ce&&Ce.length>=8)return`${Ce.slice(0,4)}-${Ce.slice(4,6)}-${Ce.slice(6,8)}`;const Le=new Date;return Le.getFullYear()+"-"+String(Le.getMonth()+1).padStart(2,"0")+"-"+String(Le.getDate()).padStart(2,"0")});_.useEffect(()=>{if(d){(async()=>{try{const Ie=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(Ie){k(Ie.CUST_REL||""),G((Ie.WRK_PROC_CT||"").replace(/\\n/g,`
`)),j(Ie.PSN_USE_CORP||""),P(Ie.VOIP_USE_CORP||""),ee(Ie.DTV_USE_CORP||"");const Ze=Ie.UP_CTRL_CL||(v==null?void 0:v.upCtrlCl)||"";console.log("[CompleteChange]  :",{API:Ie.UP_CTRL_CL,:v==null?void 0:v.upCtrlCl,:Ze}),$(Ze),Re(Ie.NET_CL||""),me(Ie.NET_CL_NM||""),Se(Ie.INSTL_LOC||""),Z({NET_CL:Ie.NET_CL||"",NET_CL_NM:Ie.NET_CL_NM||"",WRNG_TP:Ie.WRNG_TP||"",INSTL_TP:Ie.INSTL_TP||"",CB_WRNG_TP:Ie.CB_WRNG_TP||"",CB_INSTL_TP:Ie.CB_INSTL_TP||"",INOUT_LINE_TP:Ie.INOUT_LINE_TP||"",INOUT_LEN:Ie.INOUT_LEN||"",DVDR_YN:Ie.DVDR_YN||"",BFR_LINE_YN:Ie.BFR_LINE_YN||"",CUT_YN:Ie.CUT_YN||"",TERM_NO:Ie.TERM_NO||"",RCV_STS:Ie.RCV_STS||"",SUBTAP_ID:Ie.SUBTAP_ID||"",PORT_NUM:Ie.PORT_NUM||"",EXTN_TP:Ie.EXTN_TP||"",TAB_LBL:Ie.TAB_LBL||"",CVT_LBL:Ie.CVT_LBL||"",STB_LBL:Ie.STB_LBL||""}),Nt(Ie.VIEW_MOD_CD||""),At(Ie.VIEW_MOD_NM||""),Ie.VOIP_JOIN_CTRT_ID&&se(Ie.VOIP_JOIN_CTRT_ID),Ie.WRKR_CMPL_DT&&Ie.WRKR_CMPL_DT.length>=8&&Oe(`${Ie.WRKR_CMPL_DT.slice(0,4)}-${Ie.WRKR_CMPL_DT.slice(4,6)}-${Ie.WRKR_CMPL_DT.slice(6,8)}`)}}catch(Ie){console.error("[WorkCompleteChange]     :",Ie)}m(!0)})();return}const Ce=localStorage.getItem(M());if(Ce)try{const Le=JSON.parse(Ce);k(Le.custRel||""),G(Le.memo||""),j(Le.internetUse||""),P(Le.voipUse||""),ee(Le.dtvUse||""),$(Le.upCtrlCl||""),Re(Le.networkType||""),me(Le.networkTypeName||""),Se(Le.installLocationText||""),Z(Le.installInfoData),te(Le.removalInfoData),Nt(Le.viewModCd||""),At(Le.viewModNm||""),Le.voipJoinCtrtId&&se(Le.voipJoinCtrtId)}catch(Le){console.error("[WorkCompleteChange] localStorage  :",Le)}m(!0)},[t.id,d]),_.useEffect(()=>{if(!f||d)return;const Ce={custRel:L,memo:V,internetUse:W,voipUse:S,dtvUse:F,upCtrlCl:J,networkType:ce,networkTypeName:X,installLocationText:pe,installInfoData:he,removalInfoData:ie,viewModCd:st,viewModNm:lt,voipJoinCtrtId:w,savedAt:new Date().toISOString()};localStorage.setItem(M(),JSON.stringify(Ce))},[L,V,W,S,F,J,ce,X,pe,he,ie,st,lt,w,f,d]),_.useEffect(()=>{(async()=>{try{const Le=await Jl(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);Le.CMCU005&&Fe(Le.CMCU005.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Le.CMCT015&&(console.log("[CompleteChange]  CMCT015 :",Le.CMCT015),at(Le.CMCT015.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM})))),Le.CMCU057&&ht(Le.CMCU057.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Le.CMCU110&&ve(Le.CMCU110.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Le.CMCU148&&_e(Le.CMCU148.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM})))}catch(Le){console.error("[WorkCompleteChange]   :",Le)}})()},[]),_.useEffect(()=>{(async()=>{try{const Le=await mc();Ye(Le||[]),console.log("[CompleteChange] LGHV  :",Le==null?void 0:Le.length);const Ie=t.PROD_CD||t.BASIC_PROD_CD||"";if(Ie&&Le&&Le.length>0){const Ze=Le.some(Ee=>Ee.PROD_CD===Ie);Ue(Ze),console.log("[CompleteChange] LGHV STB :",Ze,"PROD_CD:",Ie)}}catch(Le){console.error("[CompleteChange] LGHV    :",Le)}})()},[t.id]),_.useEffect(()=>{(async()=>{const Le=t.PROD_CD||t.PROD_CD||"",Ie=(v==null?void 0:v.prodPromoInfo)||[];if(Le==="PD10018480")console.log("[CompleteChange] OTT   :",Le),St(!0),Ve("C");else if(Ie.some(pt=>pt.PROD_CD==="PD10018160"))console.log("[CompleteChange] OTT   : PD10018160"),St(!0),Ve("B");else{St(!1);return}const Ze=t.id||"",Ee=t.directionId||t.WRK_DRCTN_ID||"";if(Ze&&Ee)try{const pt=await Jp({WRK_ID:Ze,WRK_DRCTN_ID:Ee,DATA_TYPE:Le==="PD10018480"?"C":"B"});pt!=null&&pt.EQT_SERNO&&(console.log("[CompleteChange]  OTT :",pt.EQT_SERNO),De(pt.EQT_SERNO))}catch(pt){console.error("[CompleteChange] OTT   :",pt)}})()},[t.PROD_CD,t.id,t.directionId,v==null?void 0:v.prodPromoInfo]),_.useEffect(()=>{v!=null&&v.upCtrlCl&&!J?(console.log("[CompleteChange] equipmentData  :",v.upCtrlCl),$(v.upCtrlCl)):!J&&f&&!d&&(console.log("[CompleteChange]   : 01 ()"),$("01"))},[v==null?void 0:v.upCtrlCl,f,d,J]),_.useEffect(()=>{var Ie;if(d)return;const Ce=((Ie=t.customer)==null?void 0:Ie.id)||t.CUST_ID;if(!Ce)return;(async()=>{try{console.log("[WorkCompleteChange]     :",Ce);const Ze=await jf({CUST_ID:Ce});console.log("[WorkCompleteChange]   :",Ze),H(Ze||[])}catch(Ze){console.error("[WorkCompleteChange]     :",Ze),H([])}})()},[(et=t.customer)==null?void 0:et.id,t.CUST_ID,d]),_.useEffect(()=>{if(d)return;if(Q.length===0){console.log("[WorkCompleteChange]     ...");return}const Ce=t.PROD_GRP||"",Le=t.VOIP_PROD_CD||"",Ie=t.ISP_PROD_CD||"",Ze=t.WRK_STAT_CD||"",Ee=t.ADDR_ORD||"";if(console.log("[WorkCompleteChange]   :",{prodGrp:Ce,voipProdCd:Le,ispProdCd:Ie,wrkStatCd:Ze,addrOrd:Ee,customerCtrtListCount:Q.length}),Ce==="V"&&!Le){const pt=Q.filter(Ct=>{const bt=Ct.PROD_GRP||"",He=Ct.CTRT_STAT||"",ct=Ct.ADDR_ORD||Ct.addr_ord||"";return(bt==="C"||bt==="D"||bt==="I")&&He==="20"&&(!Ee||ct===Ee)});console.log("[WorkCompleteChange] VoIP   :",pt),pt.length<1&&Ze==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const Ke=[{value:"",label:""},...pt.map(Ct=>({value:Ct.CTRT_ID||"",label:`[${Ct.CTRT_ID}] ${Ct.BASIC_PROD_CD_NM||Ct.PROD_NM||""}`}))];T(Ke),U(!0);return}if(Ce==="I"&&Ie){const pt=Q.filter(Ct=>{const bt=Ct.PROD_GRP||"",He=Ct.CTRT_STAT||"",ct=Ct.ADDR_ORD||Ct.addr_ord||"",wt=Ct.ISP_JOIN_ID||"",Bt=Ct.KPI_PROD_GRP_CD||"";return(bt==="D"||bt==="C")&&He==="20"&&!wt&&Bt==="D"&&(!Ee||ct===Ee)});console.log("[WorkCompleteChange] ISP   :",pt),pt.length<1&&Ze==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const Ke=[{value:"",label:""},...pt.map(Ct=>({value:Ct.CTRT_ID||"",label:`[${Ct.CTRT_ID}] ${Ct.BASIC_PROD_CD_NM||Ct.PROD_NM||""}`}))];T(Ke),U(!0);return}U(!1),T([])},[t.id,t.WRK_STAT_CD,d,r,Q]);const Xt=()=>{const Ce=[];t.WRKR_ID||""||Ce.push("  ."),L||Ce.push("  ."),he!=null&&he.NET_CL||Ce.push(" ."),he!=null&&he.WRNG_TP||Ce.push(" ."),he!=null&&he.INSTL_TP||Ce.push(" ."),!pe&&!t.installLocation&&Ce.push(" ."),kt||Ce.push(" ."),W||Ce.push("  ."),S||Ce.push("VoIP  ."),F||Ce.push("DTV  .");const Ie=t.PROD_GRP||"",Ze=t.VOIP_PROD_CD||"",Ee=t.ISP_PROD_CD||"";Ie==="V"&&!Ze&&I&&(w||Ce.push("VOIP    .")),Ie==="I"&&Ee&&I&&(w||Ce.push("  ISP .    ."));const pt=(v==null?void 0:v.installedEquipments)||[];return Ie!=="V"&&pt.length<1&&Ce.push("()  ."),it&&!tt&&Ce.push("OTT   OTT BOX   ."),Ce},rs=Ce=>{Z(Ce),Ce.NET_CL&&Re(Ce.NET_CL),Ce.NET_CL_NM&&me(Ce.NET_CL_NM),r==null||r("  .","success")},ds=Ce=>{te(Ce),r==null||r("  .","success")},Ss=()=>{if(A)return;const Ce=Xt();if(Ce.length>0){Ce.forEach(Ie=>r==null?void 0:r(Ie,"error"));return}(t.PROD_GRP||"")!=="V"?Et(!0):We(!0)},Ns=Ce=>{$e(Ce),Et(!1),We(!0)},ke=(Ce,Le=!1)=>{if(!Ce||Ce.length===0)return[];const Ie=localStorage.getItem("userInfo"),Ze=Ie?JSON.parse(Ie):{},Ee=Ze.userId||"A20130708",pt=(v==null?void 0:v.removalStatus)||{},Ke=(Bt,Vt)=>Bt==="1"||Bt==="Y"||Vt==="1"||Vt==="Y"?"1":"0",Ct=(v==null?void 0:v.removedEquipments)||[],bt=(Bt,Vt)=>{const Jt=Ct.find(ss=>(ss.itemMidCd===Bt||ss.ITEM_MID_CD===Bt)&&ss[Vt]);return(Jt==null?void 0:Jt[Vt])||""},He=Bt=>bt(Bt,"BASIC_PROD_CMPS_ID"),ct=Bt=>bt(Bt,"LENT")||bt(Bt,"LENT_YN"),wt=Bt=>bt(Bt,"SVC_CMPS_ID");return Ce.map(Bt=>{var cs,ms,Ks;const Vt=Bt.EQT_NO||Bt.id||((cs=Bt.actualEquipment)==null?void 0:cs.id)||"",Jt=pt[Vt]||{},ss=Le?{}:{CRR_TSK_CL:"01",CHG_UID:Ee},Wt=Le?{CRR_TSK_CL:"02",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Ze.crrId||"01",WRKR_ID:Ee,REG_UID:Ee,EQT_LOSS_YN:Ke(Bt.EQT_LOSS_YN,Jt.EQT_LOSS_YN),PART_LOSS_BRK_YN:Ke(Bt.PART_LOSS_BRK_YN,Jt.PART_LOSS_BRK_YN),EQT_BRK_YN:Ke(Bt.EQT_BRK_YN,Jt.EQT_BRK_YN),EQT_CABL_LOSS_YN:Ke(Bt.EQT_CABL_LOSS_YN,Jt.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Ke(Bt.EQT_CRDL_LOSS_YN,Jt.EQT_CRDL_LOSS_YN)}:{},Es=t.DTL_CTRT_ID||t.CTRT_ID||"",ys=Bt.CTRT_ID||t.CTRT_ID||"";if(Bt.actualEquipment){const Ls=Bt.actualEquipment,nt=Bt.contractEquipment||{},Kt=Ls.itemMidCd||Ls.ITEM_MID_CD||"",Cs=nt.BASIC_PROD_CMPS_ID||Bt.BASIC_PROD_CMPS_ID||He(Kt),Ht=nt.LENT||nt.LENT_YN||Bt.LENT||Bt.lentYn||Bt.LENT_YN||ct(Kt),Os=nt.SVC_CMPS_ID||Bt.SVC_CMPS_ID||wt(Kt);return{...Ls,EQT_NO:Ls.id,EQT_SERNO:Ls.serialNumber,ITEM_MID_CD:Kt,EQT_CL_CD:Ls.eqtClCd,MAC_ADDRESS:Bt.macAddress||Ls.macAddress,WRK_ID:t.id,CUST_ID:(ms=t.customer)==null?void 0:ms.id,CTRT_ID:Le?ys:Es,WRK_CD:t.WRK_CD,REG_UID:Ee,SVC_CMPS_ID:Os,BASIC_PROD_CMPS_ID:Cs,PROD_CMPS_ID:nt.PROD_CMPS_ID||Bt.PROD_CMPS_ID||"",SVC_CD:nt.SVC_CD||Bt.SVC_CD||"",PROD_CD:nt.PROD_CD||Bt.PROD_CD||"",LENT_YN:Ht,EQT_CHG_GB:Bt.EQT_CHG_GB||"01",...ss,...Wt}}const Ps=Bt.ITEM_MID_CD||Bt.itemMidCd||"",xs=Bt.BASIC_PROD_CMPS_ID||He(Ps),vs=Bt.LENT||Bt.LENT_YN||Bt.lentYn||ct(Ps),Ms=Bt.SVC_CMPS_ID||wt(Ps);return{...Bt,EQT_NO:Bt.EQT_NO||Bt.id||"",EQT_SERNO:Bt.EQT_SERNO||Bt.serialNumber||"",ITEM_MID_CD:Ps,EQT_CL_CD:Bt.EQT_CL_CD||Bt.eqtClCd||"",MAC_ADDRESS:Bt.MAC_ADDRESS||Bt.macAddress||"",SVC_CMPS_ID:Ms,BASIC_PROD_CMPS_ID:xs,LENT_YN:vs,PROD_CD:Bt.PROD_CD||"",SVC_CD:Bt.SVC_CD||"",WRK_ID:t.id,CUST_ID:(Ks=t.customer)==null?void 0:Ks.id,CTRT_ID:Le?ys:Es,WRK_CD:t.WRK_CD,REG_UID:Ee,...ss,...Wt}})},dt=async()=>{var Ps,xs,vs,Ms,cs,ms,Ks,Ls,nt,Kt,Cs;const Ce=kt.replace(/-/g,""),Le=localStorage.getItem("userInfo"),Ie=Le?JSON.parse(Le):{},Ze=Ie.userId||"A20130708",Ee=c||Lh(t.OP_LNKD_CD),pt=await Cg(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let Ke="";if(Ee){let Ht=(v==null?void 0:v.prodPromoInfo)||[];if(Ht.length===0)try{console.log("[CompleteChange] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),Ht=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"05"}),console.log("[CompleteChange] getProdPromotionInfo fallback :",Ht.length,"")}catch(es){console.log("[CompleteChange] getProdPromotionInfo fallback :",es)}const Os=Ht.filter(es=>(es.PROD_CMPS_CL==="21"||es.PROD_CMPS_CL==="22")&&(es.PROD_STAT_CD==="10"||es.PROD_STAT_CD==="20")).map(es=>es.PROD_CD).filter(es=>es);Ke=Os.length>0?Os.join(",")+",":"",console.log("[CompleteChange] ADD_ON :",Ke)}const Ct=(v==null?void 0:v.installedEquipments)||[];if(Ee&&Ct.length>0&&!g){r==null||r("  .","error");return}if(Ee&&g)try{const Ht=t.OLD_PROD_CD||"",Os=t.CTRT_ID||"",es=t.SO_ID||"";let Ds="";const js=await qp(),Us=(await ka("CMIF006")).map(Is=>Is.code);console.log("[CompleteChange] certifyProdList:",js.length,"certifySoIds:",Us);let Qs=!1;if(js.includes(Ht))try{const Is=await qm({CTRT_ID:Os,CUST_ID:((Ps=t.customer)==null?void 0:Ps.id)||t.CUST_ID||"",SO_ID:es,REG_UID:Ze,WRK_ID:t.id||""}),ps=Array.isArray(Is)?Is[0]:Is;console.log("[CompleteChange] CL-08 result:",ps,"oldCtrtId:",Os),ps&&!ps.ERROR&&ps.CONT_ID===Os&&(Qs=!0)}catch(Is){console.log("[CompleteChange] CL-08 query failed:",Is)}else console.log("[CompleteChange] OLD_PROD_CD not in certify_prod, skip CL-08");if(Qs)if(t.IS_CERTIFY_PROD==1&&Us.includes(es))Ds="U",console.log("[CompleteChange] CERTIFY_TYPE=U (OLD+NEW certified)");else{const Is=await N3(t,Ze,Os);if(!Is.success){r==null||r(`  : ${Is.error}`,"error");return}}else t.IS_CERTIFY_PROD==1&&Us.includes(es)&&(Ds="C",console.log("[CompleteChange] CERTIFY_TYPE=C (NEW only certified)"));if(Ds){const Is=await _g({order:t,workerId:Ze,certifyRegconfInfo:g,addOnParam:Ke,reason:Ds==="U"?"":"",certifyType:Ds,contIdOld:Ds==="U"?Os:void 0});if(!Is.success){r==null||r(` : ${Is.message}`,"error");return}console.log("[CompleteChange] CL-04    ")}}catch(Ht){console.error("[CompleteChange] CL-04  :",Ht),r==null||r(`  : ${Ht.message||"   "}`,"error");return}let bt="";const He=t.CTRT_ID||"",ct=t.OLD_PROD_CD||"",wt=ct&&Pe.length>0&&Pe.some(Ht=>Ht.PROD_CD===ct),Bt=(v==null?void 0:v.removedEquipments)||[];if(xe&&wt)console.log("[CompleteChange] LGHVLGHV :   skip ( )");else if(!pt&&Bt.length>0)try{let Ht="SMR05",Os="";if(wt){Ht="STB_DEL";const Us=Bt.find(Qs=>{var Is,ps;return(Qs.ITEM_MID_CD||Qs.itemMidCd||((Is=Qs.actualEquipment)==null?void 0:Is.ITEM_MID_CD)||((ps=Qs.actualEquipment)==null?void 0:ps.itemMidCd))==="04"});Us&&(Os=Us.EQT_NO||Us.id||((xs=Us.actualEquipment)==null?void 0:xs.EQT_NO)||((vs=Us.actualEquipment)==null?void 0:vs.id)||"")}let es="";try{const Us=await dl({CTRT_ID:He,RCPT_ID:t.RCPT_ID||"",PROC_CL:"TERM",WRK_CD:"05"});console.log("[CompleteChange] getProdPromotionInfo :",Us);const Qs=Us.find(Is=>Is.PROD_CMPS_CL==="23");Qs&&(es=Qs.PROD_CMPS_ID||""),console.log("[CompleteChange] EQT_PROD_CMPS_ID:",es)}catch(Us){console.log("[CompleteChange] getProdPromotionInfo   ():",Us)}const Ds=t.END_PROD_CD||t.VOIP_PROD_CD||"";let js="";Ds&&(js=He),console.log("[CompleteChange]   :",{msgId:Ht,ctrtId:He,eqtProdCmpsId:es});const hs=await la({MSG_ID:Ht,CUST_ID:((Ms=t.customer)==null?void 0:Ms.id)||t.CUST_ID||"",CTRT_ID:He,SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:es,PROD_CD:"",ITV_USR_ID:"",IP_CNT:"",ETC_1:Os,ETC_2:"",ETC_3:"",ETC_4:"",SUB_PROD_CD:"",IF_DTL_ID:"",WRK_ID:t.id||"",REG_UID:Ze,VOIP_JOIN_CTRT_ID:js||w||"",WTIME:"3"});if(console.log("[CompleteChange]    :",hs),(hs==null?void 0:hs.code)==="SUCCESS"||(hs==null?void 0:hs.code)==="PARTIAL")bt=(hs==null?void 0:hs.IF_DTL_ID)||"",console.log("[CompleteChange] removal signal SUCCESS, IF_DTL_ID:",bt);else{const Us=(hs==null?void 0:hs.message)||(hs==null?void 0:hs.rawResult)||"";console.warn("[CompleteChange] removal signal FAILED -  :",Us),r==null||r(`   : ${Us}`,"warning")}}catch(Ht){console.warn("[CompleteChange] removal signal error -  :",Ht),r==null||r("     .","warning")}const Vt=t.DTL_CTRT_ID||t.CTRT_ID||"";console.log("========== [CompleteChange]    =========="),console.log("[DEBUG] order.CTRT_ID (OLD ):",t.CTRT_ID),console.log("[DEBUG] order.DTL_CTRT_ID (NEW ):",t.DTL_CTRT_ID),console.log("[DEBUG] order.OLD_CTRT_ID:",t.OLD_CTRT_ID),console.log("[DEBUG] ctrtIdForProductChange (workInfo ):",Vt),console.log("[DEBUG]   (installedEquipments):",((cs=v==null?void 0:v.installedEquipments)==null?void 0:cs.length)||0,""),(ms=v==null?void 0:v.installedEquipments)==null||ms.forEach((Ht,Os)=>{var es,Ds,js,hs,Us;console.log(`[DEBUG] [${Os}]:`,{EQT_NO:Ht.EQT_NO||Ht.id||((es=Ht.actualEquipment)==null?void 0:es.id),EQT_SERNO:Ht.EQT_SERNO||Ht.serialNumber||((Ds=Ht.actualEquipment)==null?void 0:Ds.serialNumber),CTRT_ID:Ht.CTRT_ID,SVC_CMPS_ID:Ht.SVC_CMPS_ID||((js=Ht.contractEquipment)==null?void 0:js.SVC_CMPS_ID),BASIC_PROD_CMPS_ID:Ht.BASIC_PROD_CMPS_ID||((hs=Ht.contractEquipment)==null?void 0:hs.BASIC_PROD_CMPS_ID),LENT_YN:Ht.LENT_YN||Ht.LENT||((Us=Ht.contractEquipment)==null?void 0:Us.LENT)})}),console.log("[DEBUG]   (removedEquipments):",((Ks=v==null?void 0:v.removedEquipments)==null?void 0:Ks.length)||0,""),(Ls=v==null?void 0:v.removedEquipments)==null||Ls.forEach((Ht,Os)=>{var es,Ds,js,hs,Us;console.log(`[DEBUG] [${Os}]  :`,JSON.stringify(Ht,null,2)),console.log(`[DEBUG] [${Os}] :`,{EQT_NO:Ht.EQT_NO||Ht.id||((es=Ht.actualEquipment)==null?void 0:es.id),EQT_SERNO:Ht.EQT_SERNO||Ht.serialNumber||((Ds=Ht.actualEquipment)==null?void 0:Ds.serialNumber),CTRT_ID:Ht.CTRT_ID,SVC_CMPS_ID:Ht.SVC_CMPS_ID||((js=Ht.contractEquipment)==null?void 0:js.SVC_CMPS_ID),BASIC_PROD_CMPS_ID:Ht.BASIC_PROD_CMPS_ID||((hs=Ht.contractEquipment)==null?void 0:hs.BASIC_PROD_CMPS_ID),LENT_YN:Ht.LENT_YN||Ht.LENT||((Us=Ht.contractEquipment)==null?void 0:Us.LENT),ITEM_MID_CD:Ht.ITEM_MID_CD||Ht.itemMidCd,ITEM_CD:Ht.ITEM_CD,EQT_CL_CD:Ht.EQT_CL_CD||Ht.eqtClCd,PROD_CMPS_ID:Ht.PROD_CMPS_ID})});const Jt=ke((v==null?void 0:v.installedEquipments)||[],!1),ss=ke((v==null?void 0:v.removedEquipments)||[],!0);console.log("[DEBUG]   (equipmentList):",Jt.length,""),Jt.forEach((Ht,Os)=>{console.log(`[DEBUG]  [${Os}]:`,{EQT_NO:Ht.EQT_NO,CTRT_ID:Ht.CTRT_ID,CRR_TSK_CL:Ht.CRR_TSK_CL,SVC_CMPS_ID:Ht.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Ht.BASIC_PROD_CMPS_ID})}),console.log("[DEBUG]   (removeEquipmentList):",ss.length,""),ss.forEach((Ht,Os)=>{console.log(`[DEBUG]  [${Os}] :`,JSON.stringify(Ht,null,2))}),console.log("========== [CompleteChange]    ==========");let Wt=t.WRK_DTL_TCD||"";Wt==="0550"?Wt="0560":Wt==="0510"&&(Wt="0520");const Es={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:Wt,CUST_ID:(nt=t.customer)==null?void 0:nt.id,CTRT_ID:Vt,RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Ie.crrId||"01",WRKR_ID:Ze,WRKR_CMPL_DT:Ce,MEMO:V||" ",STTL_YN:"Y",REG_UID:Ze,CUST_REL:L,CNFM_CUST_NM:((Kt=t.customer)==null?void 0:Kt.name)||"",CNFM_CUST_TELNO:((Cs=t.customer)==null?void 0:Cs.contactNumber)||"",INSTL_LOC:pe||t.installLocation||"",UP_CTRL_CL:J||"",PSN_USE_CORP:W||"",VOIP_USE_CORP:S||"",DTV_USE_CORP:F||"",WRK_ACT_CL:"20",TV_TYPE:"",NET_CL:(he==null?void 0:he.NET_CL)||"",WRNG_TP:(he==null?void 0:he.WRNG_TP)||"",INSTL_TP:(he==null?void 0:he.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:w||"",ADD_ON:Ke||""},equipmentList:Jt,removeEquipmentList:ss,spendItemList:(v==null?void 0:v.spendItems)||[],agreementList:(v==null?void 0:v.agreements)||[],poleList:Rt?[{WRK_ID:t.id,POLE_YN:Rt.POLE_YN,LAN_GB:Rt.LAN_GB||"",REG_UID:Ze}]:[]},ys=async()=>{var Ht,Os,es;try{if(pt){console.log("[CompleteChange] FTTH :  skip ( )");return}const Ds=(v==null?void 0:v.installedEquipments)||[],js=t.OLD_PROD_CD||"",hs=Pe.some(Rs=>Rs.PROD_CD===js);let Us="SMR03";xe&&(Us=hs?"PKG_CHG":"STB_CRT");const Qs=Rs=>Ds.find(Pn=>{var Qn,Xr;return(Pn.ITEM_MID_CD||Pn.itemMidCd||((Qn=Pn.actualEquipment)==null?void 0:Qn.ITEM_MID_CD)||((Xr=Pn.actualEquipment)==null?void 0:Xr.itemMidCd))===Rs}),Is=Rs=>{var Pn,Qn;return(Rs==null?void 0:Rs.EQT_NO)||(Rs==null?void 0:Rs.id)||((Pn=Rs==null?void 0:Rs.actualEquipment)==null?void 0:Pn.EQT_NO)||((Qn=Rs==null?void 0:Rs.actualEquipment)==null?void 0:Qn.id)||""},ps=t.BGN_PROD_CD||t.VOIP_PROD_CD||"",Lr=t.BGN_PROD_GRP||t.PROD_GRP||"";let Ir="",qr="",vr="",cn="";try{const Rs=await dl({CTRT_ID:t.DTL_CTRT_ID||t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"05"}),Pn=Rs.find(Ni=>Ni.PROD_CMPS_CL==="23");Pn&&(Ir=Pn.PROD_CMPS_ID||"");const Qn=Rs.find(Ni=>Ni.PROD_CMPS_CL==="11");Qn&&(qr=Qn.PROD_CD||"",cn=Qn.PROD_GRP||"");const Xr=Rs.filter(Ni=>Ni.BASIC_PROD_FL==="V").map(Ni=>Ni.PROD_CD);Xr.length>0&&(vr=Xr.join(","))}catch(Rs){console.log("[CompleteChange] getProdPromotionInfo for install signal failed:",Rs)}let cr="";if(ps){const Rs=Qs("08");Rs&&(cr=Is(Rs))}else{for(const Rs of["05","01","03"]){const Pn=Qs(Rs);if(Pn){cr=Is(Pn);break}}if(!cr&&cn==="I"){const Rs=Qs("02");Rs&&(cr=Is(Rs))}if(!cr){const Rs=Qs("08");Rs&&(cr=Is(Rs))}}let ni="";if(ps){const Rs=Qs("02");Rs&&(ni=Is(Rs))}else{const Rs=Qs("04");Rs?ni=Is(Rs):ni=(he==null?void 0:he.NET_CL)||""}const Fr=Is(Qs("07")),Hi=cn==="C"?Is(Qs("02")):"";let Or="";if(Qs("10")&&Lr==="V"&&(Or=Is(Qs("10"))),t.BGN_ISP_PROD_CD||t.ISP_PROD_CD||""){const Rs=Qs("21");Rs&&(Or=Is(Rs))}let Dr=t.id||"";const Ta=Ds.find(Rs=>{var Pn,Qn;return(Rs.EQT_CL_CD||Rs.eqtClCd||((Pn=Rs.actualEquipment)==null?void 0:Pn.EQT_CL_CD)||((Qn=Rs.actualEquipment)==null?void 0:Qn.eqtClCd))==="091003"});if(Ta)Dr=Is(Ta);else{const Rs=Ds.find(Pn=>{var Qn,Xr;return(Pn.EQT_CL_CD||Pn.eqtClCd||((Qn=Pn.actualEquipment)==null?void 0:Qn.EQT_CL_CD)||((Xr=Pn.actualEquipment)==null?void 0:Xr.eqtClCd))==="092201"});Rs&&(Dr=(Rs==null?void 0:Rs.MAC_ADDRESS)||(Rs==null?void 0:Rs.macAddress)||((Ht=Rs==null?void 0:Rs.actualEquipment)==null?void 0:Ht.MAC_ADDRESS)||((Os=Rs==null?void 0:Rs.actualEquipment)==null?void 0:Os.macAddress)||"")}let Fa="";ps?Fa=t.CTRT_ID||"":Fa=w||"",console.log("[CompleteChange]  :",{msgId:Us,eqtNo:cr,instProdCd:qr,instEqtProdCmpsId:Ir,subProdCd:vr}),await la({MSG_ID:Us,CUST_ID:((es=t.customer)==null?void 0:es.id)||t.CUST_ID||"",CTRT_ID:t.DTL_CTRT_ID||t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:cr,EQT_PROD_CMPS_ID:Ir,PROD_CD:qr,ITV_USR_ID:"",IP_CNT:"",ETC_1:ni,ETC_2:Fr,ETC_3:Hi,ETC_4:Or,SUB_PROD_CD:vr,IF_DTL_ID:"",WRK_ID:Dr,REG_UID:Ze,VOIP_JOIN_CTRT_ID:Fa,WTIME:"3"}),console.log("[CompleteChange]   ")}catch(Ds){console.log("[CompleteChange]     (  ):",Ds)}};R(Es,{onSuccess:Ht=>{Ht.code==="SUCCESS"||Ht.code==="OK"?(localStorage.removeItem(M()),t.WRK_STAT_CD="3",ys(),r==null||r("  .","success"),n()):r==null||r(Ht.message||"   .","error",!0)},onError:Ht=>{r==null||r(Ht.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[A&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[I?s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:w,onValueChange:se,options:oe,placeholder:" ",required:!0,disabled:d})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx("input",{type:"text",value:"",readOnly:!0,disabled:!0,className:"w-full min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:X||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>ae(!0),className:`px-3 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${d?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:d?"":""}),u&&s.jsx("button",{type:"button",onClick:()=>ge(!0),className:`px-3 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${d?"bg-gray-500 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:d?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:L,onValueChange:k,options:gt,placeholder:" ",required:!0,disabled:d})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{children:pe||t.installLocation||""}),lt&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(: ",lt,")"]})]}),s.jsx("button",{type:"button",onClick:()=>re(!0),className:`px-4 py-2 rounded-lg font-bold text-sm whitespace-nowrap ${d?"bg-gray-500 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:d?"":""})]})]}),((v==null?void 0:v.kpiProdGrpCd)==="D"||(v==null?void 0:v.prodGrp)==="D"||t.PROD_GRP==="D"||(t.PROD_NM||"").includes("DTV"))&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(Zs,{value:J,onValueChange:$,options:rt,placeholder:"",disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:V,onChange:Ce=>G(Ce.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${d?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:d,disabled:d}),!d&&s.jsxs("p",{className:`text-xs text-right mt-1 ${V.length>=500?"text-red-500":"text-gray-400"}`,children:[V.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:kt,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>K(!Y),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${Y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Y&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"DTV ()"}),s.jsx(Zs,{value:F,onValueChange:ee,options:Ge,placeholder:"",disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"ISP ()"}),s.jsx(Zs,{value:W,onValueChange:j,options:It,placeholder:"",disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"VoIP (VoIP)"}),s.jsx(Zs,{value:S,onValueChange:P,options:Je,placeholder:"",disabled:d})]})]})]}),it&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["OTT BOX  ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:tt,readOnly:!0,placeholder:"SER_NO   ",className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-600"}),s.jsxs("button",{type:"button",onClick:()=>de(!0),disabled:d,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${d?"bg-gray-400 text-white cursor-not-allowed":tt?"bg-green-500 hover:bg-green-600 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"SER_NO"]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!d&&s.jsx("button",{onClick:Ss,disabled:A,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${A?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:A?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>be(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:q,onClose:()=>ae(!1),onSave:rs,workId:t.id,initialData:he,workType:t.WRK_CD,customerId:(Qt=t.customer)==null?void 0:Qt.id,customerName:(ut=t.customer)==null?void 0:ut.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD,kpiProdGrpCd:(v==null?void 0:v.kpiProdGrpCd)||(v==null?void 0:v.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:"01",chgKpiProdGrpCd:(v==null?void 0:v.chgKpiProdGrpCd)||(v==null?void 0:v.CHG_KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodGrp:(v==null?void 0:v.prodGrp)||(v==null?void 0:v.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:d}),s.jsx(hc,{isOpen:fe,onClose:()=>ge(!1),onSave:ds,workId:t.id,initialData:ie,workType:"08",customerId:(qt=t.customer)==null?void 0:qt.id,customerName:(jt=t.customer)==null?void 0:jt.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD,kpiProdGrpCd:(v==null?void 0:v.kpiProdGrpCd)||(v==null?void 0:v.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:"02",chgKpiProdGrpCd:(v==null?void 0:v.chgKpiProdGrpCd)||(v==null?void 0:v.CHG_KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodGrp:(v==null?void 0:v.prodGrp)||(v==null?void 0:v.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:d}),s.jsx(Ba,{isOpen:je,onClose:()=>be(!1),ctrtId:t.CTRT_ID,custId:(ue=t.customer)==null?void 0:ue.id}),s.jsx(If,{isOpen:Te,onClose:()=>re(!1),onSave:Ce=>{Se(Ce.INSTL_LOC),Nt(Ce.VIEW_MOD_CD),At(Ce.VIEW_MOD_NM),re(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(v==null?void 0:v.prodGrp)||(v==null?void 0:v.PROD_GRP),initialInstlLoc:pe||t.installLocation,initialViewModCd:st,initialViewModNm:lt,showToast:r,readOnly:d}),s.jsx(yg,{isOpen:Dt,onClose:()=>Et(!1),onSave:Ns,soId:t.SO_ID||""}),s.jsx(ul,{isOpen:ot,onClose:()=>We(!1),onConfirm:dt,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{equipmentData:v,installInfoData:he,custRel:L,custRelOptions:gt,memo:V,installLocationText:pe,order:t})}),s.jsx(yb,{isOpen:mt,onClose:()=>de(!1),onSave:Ce=>{De(Ce),r==null||r("OTT  .","success")},wrkId:t.id||"",wrkDrctnId:t.directionId||t.WRK_DRCTN_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",dataType:Lt,showToast:r,readOnly:d})]})},Nb=({isOpen:t,onClose:e,wrkCd:n,wrkId:r,rcptId:i})=>{const[l,c]=_.useState(!1),[d,u]=_.useState(null),[f,m]=_.useState(null),p=n==="07"?"":"";_.useEffect(()=>{t&&r&&y()},[t,r,n]);const y=async()=>{c(!0),m(null);try{const N=await pg({WRK_CD:n,WRK_ID:r,RCPT_ID:i});N?u(N):m("   .")}catch(N){console.error("  :",N),m(N.message||"  .")}finally{c(!1)}},g=s.jsx("button",{onClick:e,className:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors",children:""});return s.jsx(pa,{isOpen:t,onClose:e,title:p,size:"medium",footer:g,children:l?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:" ..."})]}):f?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-red-500 mb-2",children:f}),s.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:" "})]}):d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:d.MVM_TP_NM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:d.PROD_NM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:d.HOPE_DTTM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:d.WRK_STAT_NM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium whitespace-pre-wrap",children:d.ADDR_ORD||"-"})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:" ."})})},D5=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1,certifyMode:c=!1,certifyReason:d})=>{var rs,ds,Ss,Ns;const u=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",f=t.WRK_CD==="07",[m,p]=_.useState(!1),{equipmentData:y,filteringData:g}=$i(),{certifyRegconfInfo:N}=Wa(),C=t.id||"",v=oa(C),R={...y||i||g||{},installedEquipments:v.installedEquipments.length>0?v.installedEquipments:(y==null?void 0:y.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:v.markedForRemoval.length>0?v.markedForRemoval:(y==null?void 0:y.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(v.removalStatus).length>0?v.removalStatus:(y==null?void 0:y.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:A,isPending:M}=od(),L=()=>`work_complete_draft_${t.id}`,[k,V]=_.useState(""),[G,W]=_.useState(""),[j,S]=_.useState(""),[P,F]=_.useState(""),[ee,J]=_.useState(""),[$,Y]=_.useState(""),[K,w]=_.useState(!1),[se,oe]=_.useState(!1),[T,I]=_.useState(!1),[U,Q]=_.useState(""),[H,q]=_.useState([]),[ae,fe]=_.useState(!1),[ge,ce]=_.useState([]),[Re,X]=_.useState(!1),[me,he]=_.useState(""),[Z,ie]=_.useState(""),[te,je]=_.useState(void 0),[be,Te]=_.useState(!1),[re,pe]=_.useState(!1),[Se,st]=_.useState(""),[Nt,lt]=_.useState(""),[At,ot]=_.useState(""),[We,Dt]=_.useState(!1),[Et,Rt]=_.useState(!1),[$e,gt]=_.useState(!1),[Fe,rt]=_.useState(null),[at,It]=_.useState([]),[ht,Je]=_.useState([]),[ve,Ge]=_.useState([]),[_e,xe]=_.useState([]),[Ue,Pe]=_.useState([]),[Ye,mt]=_.useState(!1),[de,tt]=_.useState([]),[De,it]=_.useState(()=>{const ke=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(ke&&ke.length>=8)return`${ke.slice(0,4)}-${ke.slice(4,6)}-${ke.slice(6,8)}`;const dt=new Date;return dt.getFullYear()+"-"+String(dt.getMonth()+1).padStart(2,"0")+"-"+String(dt.getDate()).padStart(2,"0")});_.useEffect(()=>{if(u){(async()=>{try{const et=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(et){V(et.CUST_REL||""),W((et.WRK_PROC_CT||"").replace(/\\n/g,`
`)),S(et.PSN_USE_CORP||""),F(et.VOIP_USE_CORP||""),J(et.DTV_USE_CORP||"");const Qt=et.UP_CTRL_CL||(R==null?void 0:R.upCtrlCl)||"";console.log("[CompleteMoveRemoval]  :",{API:et.UP_CTRL_CL,:R==null?void 0:R.upCtrlCl,:Qt}),Y(Qt),he(et.NET_CL||""),ie(et.NET_CL_NM||""),st(et.INSTL_LOC||""),je({NET_CL:et.NET_CL||"",NET_CL_NM:et.NET_CL_NM||"",WRNG_TP:et.WRNG_TP||"",INSTL_TP:et.INSTL_TP||"",CB_WRNG_TP:et.CB_WRNG_TP||"",CB_INSTL_TP:et.CB_INSTL_TP||"",INOUT_LINE_TP:et.INOUT_LINE_TP||"",INOUT_LEN:et.INOUT_LEN||"",DVDR_YN:et.DVDR_YN||"",BFR_LINE_YN:et.BFR_LINE_YN||"",CUT_YN:et.CUT_YN||"",TERM_NO:et.TERM_NO||"",RCV_STS:et.RCV_STS||"",SUBTAP_ID:et.SUBTAP_ID||"",PORT_NUM:et.PORT_NUM||"",EXTN_TP:et.EXTN_TP||"",TAB_LBL:et.TAB_LBL||"",CVT_LBL:et.CVT_LBL||"",STB_LBL:et.STB_LBL||""}),et.VOIP_JOIN_CTRT_ID&&Q(et.VOIP_JOIN_CTRT_ID),(et.CHK_CUST_ADDR==="true"||et.CHK_CUST_ADDR==="Y")&&w(!0),(et.CHK_PYM_ADDR==="true"||et.CHK_PYM_ADDR==="Y")&&oe(!0),et.WRKR_CMPL_DT&&et.WRKR_CMPL_DT.length>=8&&it(`${et.WRKR_CMPL_DT.slice(0,4)}-${et.WRKR_CMPL_DT.slice(4,6)}-${et.WRKR_CMPL_DT.slice(6,8)}`)}}catch(et){console.error("[WorkCompleteMoveRemoval]     :",et)}p(!0)})();return}const ke=localStorage.getItem(L());if(ke)try{const dt=JSON.parse(ke);V(dt.custRel||""),W(dt.memo||""),S(dt.internetUse||""),F(dt.voipUse||""),J(dt.dtvUse||""),Y(dt.upCtrlCl||""),he(dt.networkType||""),ie(dt.networkTypeName||""),st(dt.installLocationText||""),je(dt.installInfoData),dt.voipJoinCtrtId&&Q(dt.voipJoinCtrtId),dt.chkCustAddr!==void 0&&w(dt.chkCustAddr),dt.chkPymAddr!==void 0&&oe(dt.chkPymAddr)}catch(dt){console.error("[WorkCompleteMoveRemoval] localStorage  :",dt)}p(!0)},[t.id,u]),_.useEffect(()=>{if(!m||u)return;const ke={custRel:k,memo:G,internetUse:j,voipUse:P,dtvUse:ee,upCtrlCl:$,networkType:me,networkTypeName:Z,installLocationText:Se,installInfoData:te,voipJoinCtrtId:U,chkCustAddr:K,chkPymAddr:se,savedAt:new Date().toISOString()};localStorage.setItem(L(),JSON.stringify(ke))},[k,G,j,P,ee,$,me,Z,Se,te,U,K,se,m,u]),_.useEffect(()=>{(async()=>{try{const dt=await Jl(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);dt.CMCU005&&It(dt.CMCU005.map(et=>({value:et.COMMON_CD,label:et.COMMON_CD_NM}))),dt.CMCT015&&(console.log("[CompleteMoveRemoval]  CMCT015 :",dt.CMCT015),Je(dt.CMCT015.map(et=>({value:et.COMMON_CD,label:et.COMMON_CD_NM})))),dt.CMCU057&&Ge(dt.CMCU057.map(et=>({value:et.COMMON_CD,label:et.COMMON_CD_NM}))),dt.CMCU110&&xe(dt.CMCU110.map(et=>({value:et.COMMON_CD,label:et.COMMON_CD_NM}))),dt.CMCU148&&Pe(dt.CMCU148.map(et=>({value:et.COMMON_CD,label:et.COMMON_CD_NM})))}catch(dt){console.error("[WorkCompleteMoveRemoval]   :",dt)}})()},[]),_.useEffect(()=>{(async()=>{try{const dt=await mc();tt(dt||[]),console.log("[CompleteInternalMove] LGHV  :",dt==null?void 0:dt.length);const et=t.PROD_CD||t.BASIC_PROD_CD||"";if(et&&dt&&dt.length>0){const Qt=dt.some(ut=>ut.PROD_CD===et);mt(Qt),console.log("[CompleteInternalMove] LGHV STB :",Qt,"PROD_CD:",et)}}catch(dt){console.error("[CompleteInternalMove] LGHV    :",dt)}})()},[t.id]),_.useEffect(()=>{R!=null&&R.upCtrlCl&&!$?(console.log("[CompleteMoveRemoval] equipmentData  :",R.upCtrlCl),Y(R.upCtrlCl)):!$&&m&&!u&&(console.log("[CompleteMoveRemoval]   : 01 ()"),Y("01"))},[R==null?void 0:R.upCtrlCl,m,u,$]),_.useEffect(()=>{var et;if(u)return;const ke=((et=t.customer)==null?void 0:et.id)||t.CUST_ID;if(!ke)return;(async()=>{try{console.log("[WorkCompleteMoveRemoval]     :",ke);const Qt=await jf({CUST_ID:ke});console.log("[WorkCompleteMoveRemoval]   :",Qt),ce(Qt||[])}catch(Qt){console.error("[WorkCompleteMoveRemoval]     :",Qt),ce([])}})()},[(rs=t.customer)==null?void 0:rs.id,t.CUST_ID,u]),_.useEffect(()=>{if(u)return;if(ge.length===0){console.log("[WorkCompleteMoveRemoval]     ...");return}const ke=t.PROD_GRP||"",dt=t.VOIP_PROD_CD||"",et=t.ISP_PROD_CD||"",Qt=t.WRK_STAT_CD||"",ut=t.ADDR_ORD||"";if(console.log("[WorkCompleteMoveRemoval]   :",{prodGrp:ke,voipProdCd:dt,ispProdCd:et,wrkStatCd:Qt,addrOrd:ut,customerCtrtListCount:ge.length}),ke==="V"&&!dt){const qt=ge.filter(ue=>{const Ce=ue.PROD_GRP||"",Le=ue.CTRT_STAT||"",Ie=ue.ADDR_ORD||ue.addr_ord||"";return(Ce==="C"||Ce==="D"||Ce==="I")&&Le==="20"&&(!ut||Ie===ut)});console.log("[WorkCompleteMoveRemoval] VoIP   :",qt),qt.length<1&&Qt==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const jt=[{value:"",label:""},...qt.map(ue=>({value:ue.CTRT_ID||"",label:`[${ue.CTRT_ID}] ${ue.BASIC_PROD_CD_NM||ue.PROD_NM||""}`}))];q(jt),fe(!0);return}if(ke==="I"&&et){const qt=ge.filter(ue=>{const Ce=ue.PROD_GRP||"",Le=ue.CTRT_STAT||"",Ie=ue.ADDR_ORD||ue.addr_ord||"",Ze=ue.ISP_JOIN_ID||"",Ee=ue.KPI_PROD_GRP_CD||"";return(Ce==="D"||Ce==="C")&&Le==="20"&&!Ze&&Ee==="D"&&(!ut||Ie===ut)});console.log("[WorkCompleteMoveRemoval] ISP   :",qt),qt.length<1&&Qt==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const jt=[{value:"",label:""},...qt.map(ue=>({value:ue.CTRT_ID||"",label:`[${ue.CTRT_ID}] ${ue.BASIC_PROD_CD_NM||ue.PROD_NM||""}`}))];q(jt),fe(!0);return}fe(!1),q([])},[t.id,t.WRK_STAT_CD,u,r,ge]);const St=()=>{const ke=[];k||ke.push("  ."),te!=null&&te.NET_CL||ke.push(" ."),Se||ke.push(" ."),De||ke.push(" .");const dt=t.PROD_GRP||"",et=t.VOIP_PROD_CD||"",Qt=t.ISP_PROD_CD||"";dt==="V"&&!et&&ae&&(U||ke.push("VOIP    .")),dt==="I"&&Qt&&ae&&(U||ke.push("  ISP .    ."));const ut=(R==null?void 0:R.installedEquipments)||[];return dt!=="V"&&ut.length<1&&ke.push("()  ."),ke},Lt=ke=>{je(ke),ke.NET_CL&&he(ke.NET_CL),ke.NET_CL_NM&&ie(ke.NET_CL_NM),r==null||r("  .","success")},Ve=()=>{if(M)return;const ke=St();if(ke.length>0){ke.forEach(et=>r==null?void 0:r(et,"error"));return}(t.PROD_GRP||"")!=="V"?gt(!0):Dt(!0)},kt=ke=>{rt(ke),gt(!1),Dt(!0)},Oe=(ke,dt=!1)=>{if(!ke||ke.length===0)return[];const et=localStorage.getItem("userInfo"),Qt=et?JSON.parse(et):{},ut=Qt.userId||"A20130708",qt=(R==null?void 0:R.removalStatus)||{},jt=(ue,Ce)=>ue==="1"||ue==="Y"||Ce==="1"||Ce==="Y"?"1":"0";return ke.map(ue=>{var Ze,Ee,pt;const Ce=ue.EQT_NO||ue.id||((Ze=ue.actualEquipment)==null?void 0:Ze.id)||"",Le=qt[Ce]||{},Ie=dt?{CRR_TSK_CL:t.WRK_CD||"06",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Qt.crrId||"01",WRKR_ID:ut,EQT_LOSS_YN:jt(ue.EQT_LOSS_YN,Le.EQT_LOSS_YN),PART_LOSS_BRK_YN:jt(ue.PART_LOSS_BRK_YN,Le.PART_LOSS_BRK_YN),EQT_BRK_YN:jt(ue.EQT_BRK_YN,Le.EQT_BRK_YN),EQT_CABL_LOSS_YN:jt(ue.EQT_CABL_LOSS_YN,Le.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:jt(ue.EQT_CRDL_LOSS_YN,Le.EQT_CRDL_LOSS_YN)}:{};if(ue.actualEquipment){const Ke=ue.actualEquipment,Ct=ue.contractEquipment||{};return{...Ke,EQT_NO:Ke.id,EQT_SERNO:Ke.serialNumber,ITEM_MID_CD:Ke.itemMidCd,EQT_CL_CD:Ke.eqtClCd,MAC_ADDRESS:ue.macAddress||Ke.macAddress,WRK_ID:t.id,CUST_ID:(Ee=t.customer)==null?void 0:Ee.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:ut,SVC_CMPS_ID:Ct.SVC_CMPS_ID||ue.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ct.BASIC_PROD_CMPS_ID||ue.BASIC_PROD_CMPS_ID||"",PROD_CMPS_ID:Ct.PROD_CMPS_ID||ue.PROD_CMPS_ID||"",SVC_CD:Ct.SVC_CD||ue.SVC_CD||"",PROD_CD:Ct.PROD_CD||ue.PROD_CD||"",LENT_YN:ue.lentYn||ue.LENT_YN||Ct.LENT_YN||"",EQT_CHG_GB:ue.EQT_CHG_GB||"01",...Ie}}return{...ue,EQT_NO:ue.EQT_NO||ue.id||"",EQT_SERNO:ue.EQT_SERNO||ue.serialNumber||"",ITEM_MID_CD:ue.ITEM_MID_CD||ue.itemMidCd||"",EQT_CL_CD:ue.EQT_CL_CD||ue.eqtClCd||"",MAC_ADDRESS:ue.MAC_ADDRESS||ue.macAddress||"",SVC_CMPS_ID:ue.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:ue.BASIC_PROD_CMPS_ID||"",PROD_CD:ue.PROD_CD||"",SVC_CD:ue.SVC_CD||"",WRK_ID:t.id,CUST_ID:(pt=t.customer)==null?void 0:pt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:ut,...Ie}})},Xt=async()=>{var Ze,Ee,pt,Ke,Ct;const ke=De.replace(/-/g,""),dt=localStorage.getItem("userInfo"),et=dt?JSON.parse(dt):{},Qt=et.userId||"A20130708",ut=c||Lh(t.OP_LNKD_CD),qt=await Cg(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let jt="";if(ut){let bt=(R==null?void 0:R.prodPromoInfo)||[];if(bt.length===0)try{console.log("[CompleteInternalMove] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),bt=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"06"}),console.log("[CompleteInternalMove] getProdPromotionInfo fallback :",bt.length,"")}catch(ct){console.log("[CompleteInternalMove] getProdPromotionInfo fallback :",ct)}const He=bt.filter(ct=>(ct.PROD_CMPS_CL==="21"||ct.PROD_CMPS_CL==="22")&&(ct.PROD_STAT_CD==="10"||ct.PROD_STAT_CD==="20")).map(ct=>ct.PROD_CD).filter(ct=>ct);jt=He.length>0?He.join(",")+",":"",console.log("[CompleteInternalMove] ADD_ON :",jt)}const ue=(R==null?void 0:R.installedEquipments)||[];if(ut&&ue.length>0&&!N){r==null||r("  .","error");return}if(ut&&N)try{const bt=t.OLD_CTRT_ID||t.CTRT_ID||"",{certifyType:He}=await C5(t,Qt,bt);if(He){const ct=d||(He==="C"?"":""),wt=He==="U"?(t.CTRT_ID||"")!==bt?bt:t.CTRT_ID||"":void 0,Bt=await _g({order:t,workerId:Qt,certifyRegconfInfo:N,addOnParam:jt,reason:ct,certifyType:He,contIdOld:wt});if(!Bt.success){r==null||r(` : ${Bt.message}`,"error");return}console.log("[CompleteInternalMove] CL-04    ")}}catch(bt){console.error("[CompleteInternalMove] CL-04  :",bt),r==null||r(`  : ${bt.message||"   "}`,"error");return}const Ce=(R==null?void 0:R.removedEquipments)||[];if(Ce.length>0&&!qt&&!Ye){let bt=!1;for(const He of Ce){const ct=He.actualEquipment||He,wt=ct.eqtClCd||ct.EQT_CL_CD||"";wt==="090901"||wt==="091001"||wt==="091005"||(bt=!0)}if(bt)try{const He=Ce[0],ct=He.EQT_PROD_CMPS_ID||((Ze=He.actualEquipment)==null?void 0:Ze.EQT_PROD_CMPS_ID)||t.EQT_PROD_CMPS_ID||"";console.log("[CompleteInternalMove]   :",{eqtProdCmpsId:ct,voipJoinCtrtId:U});const wt=await la({MSG_ID:"SMR05",CUST_ID:((Ee=t.customer)==null?void 0:Ee.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:ct,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Qt,ETC_1:"",VOIP_JOIN_CTRT_ID:U||"",WTIME:"3"});if(console.log("[CompleteInternalMove]    :",wt),wt&&wt.PROC_VOIP&&wt.PROC_VOIP.includes("KCT-029"))console.log("[CompleteInternalMove] VoIP KCT-029  ");else if(wt.code!=="SUCCESS"&&wt.code!=="OK"){console.warn("[CompleteInternalMove]    -  :",wt.message),r==null||r("   .","error",!0);return}}catch(He){console.warn("[CompleteInternalMove]      -  :",He),r==null||r("     .","error",!0);return}}const Le=async()=>{var wt,Bt;const bt=!!t.ISP_PROD_CD,He=(R==null?void 0:R.installedEquipments)||[];let ct=!1;if(!qt){const Vt=(R==null?void 0:R.customerEquipments)||He;for(const Jt of Vt){const ss=Jt.actualEquipment||Jt,Wt=ss.eqtClCd||ss.EQT_CL_CD||"";if(Wt==="090901"||Wt==="091001"||Wt==="091005")continue;(ss.EQT_KND||ss.eqtKnd||"WRKER")==="WRKER"&&(ct=!0)}(bt||Vt.length>0)&&(ct=!0)}if(ct)try{const Vt=t.PROD_GRP||"";let Jt="SMR03",ss="",Wt="",Es="",ys="",Ps="",xs="";Ye&&(Jt="STB_CRT"),Vt==="V"&&(Jt="SMR60");let vs=(R==null?void 0:R.prodPromoInfo)||[];if(vs.length===0)try{vs=await dl({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:Qt,PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"01",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||"",WRK_CD:t.WRK_CD||"06",WRK_STAT_CD:t.WRK_STAT_CD||""})}catch(Os){console.log("[CompleteInternalMove] prodPromoInfo  :",Os)}const Ms=((wt=vs.find(Os=>Os.PROD_CMPS_CL==="23"))==null?void 0:wt.PROD_CMPS_ID)||"",cs=vs.find(Os=>Os.PROD_CMPS_CL==="11"),ms=(cs==null?void 0:cs.PROD_CD)||"",Ks=(cs==null?void 0:cs.PROD_GRP)||Vt,Ls=vs.filter(Os=>Os.BASIC_PROD_FL==="V").map(Os=>Os.PROD_CD),nt=Ls.length>0?Ls.join(","):"",Kt=Os=>{const es=He.find(js=>{const hs=js.actualEquipment||js;return(hs.itemMidCd||hs.ITEM_MID_CD)===Os});if(!es)return"";const Ds=es.actualEquipment||es;return Ds.id||Ds.EQT_NO||""};t.VOIP_PROD_CD?(ss=Kt("08"),Wt=Kt("02")):(ss=Kt("05")||Kt("01")||Kt("03")||(Ks==="I"?Kt("02"):"")||Kt("08")||"",Wt=Kt("04")),Es=Kt("07"),Ks==="C"&&(ys=Kt("02")),Ks==="V"&&(Ps=Kt("10")),bt&&(Ps=Kt("21")),(Vt==="V"||bt)&&(xs=U||t.CTRT_ID||"");let Cs=t.id||"";for(const Os of He){const es=Os.actualEquipment||Os,Ds=es.eqtClCd||es.EQT_CL_CD||"";if(Ds==="091003"||Ds==="091004"){Cs=es.id||es.EQT_NO||t.id||"";break}if(Ds==="092201"){Cs=es.macAddress||es.MAC_ADDRESS||es.id||es.EQT_NO||t.id||"";break}}console.log("[CompleteInternalMove]   :",{msgId:Jt,eqtNo:ss,prodCd:ms,subProdCd:nt,etc1:Wt,etc2:Es,etc3:ys,etc4:Ps});const Ht=await la({MSG_ID:Jt,CUST_ID:((Bt=t.customer)==null?void 0:Bt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:ss,EQT_PROD_CMPS_ID:Ms,PROD_CD:ms,ITV_USR_ID:"",IP_CNT:"",ETC_1:Wt,ETC_2:Es,ETC_3:ys,ETC_4:Ps,SUB_PROD_CD:nt,IF_DTL_ID:"",WRK_ID:Cs,REG_UID:Qt,VOIP_JOIN_CTRT_ID:xs,WTIME:"3"});Ht.code==="SUCCESS"||Ht.code==="OK"?console.log("[CompleteInternalMove]    "):console.warn("[CompleteInternalMove]    :",Ht.message)}catch(Vt){console.log("[CompleteInternalMove]      (  ):",Vt)}},Ie={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(pt=t.customer)==null?void 0:pt.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||et.crrId||"01",WRKR_ID:Qt,WRKR_CMPL_DT:ke,MEMO:G||" ",STTL_YN:"Y",REG_UID:Qt,CUST_REL:k,CNFM_CUST_NM:((Ke=t.customer)==null?void 0:Ke.name)||"",CNFM_CUST_TELNO:((Ct=t.customer)==null?void 0:Ct.contactNumber)||"",INSTL_LOC:Se||"",UP_CTRL_CL:$||"",PSN_USE_CORP:j||"",VOIP_USE_CORP:P||"",DTV_USE_CORP:ee||"",WRK_ACT_CL:"20",TV_TYPE:"",NET_CL:(te==null?void 0:te.NET_CL)||"",WRNG_TP:(te==null?void 0:te.WRNG_TP)||"",INSTL_TP:(te==null?void 0:te.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:U||"",CHK_CUST_ADDR:f?K?"true":"false":"",CHK_PYM_ADDR:f?se?"true":"false":"",ADD_ON:jt||""},equipmentList:Oe((R==null?void 0:R.installedEquipments)||[],!1),removeEquipmentList:Oe((R==null?void 0:R.removedEquipments)||[],!0),spendItemList:(R==null?void 0:R.spendItems)||[],agreementList:(R==null?void 0:R.agreements)||[],poleList:Fe?[{WRK_ID:t.id,POLE_YN:Fe.POLE_YN,LAN_GB:Fe.LAN_GB||"",REG_UID:Qt}]:[]};A(Ie,{onSuccess:bt=>{bt.code==="SUCCESS"||bt.code==="OK"?(localStorage.removeItem(L()),t.WRK_STAT_CD="3",Le(),r==null||r("  .","success"),n()):r==null||r(bt.message||"   .","error",!0)},onError:bt=>{r==null||r(bt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[M&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[ae&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:U,onValueChange:Q,options:H,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:Z||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>X(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${u?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:u?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:k,onValueChange:V,options:at,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{children:Se||""}),At&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(: ",At,")"]})]}),s.jsxs("button",{type:"button",onClick:()=>pe(!0),className:`min-h-10 px-3 sm:px-4 rounded-lg font-bold text-sm whitespace-nowrap flex items-center gap-1.5 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:[s.jsx(rd,{className:"w-4 h-4"}),s.jsx("span",{children:u?"":""})]})]})]}),((R==null?void 0:R.kpiProdGrpCd)==="D"||(R==null?void 0:R.prodGrp)==="D"||t.PROD_GRP==="D")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(Zs,{value:$,onValueChange:Y,options:ht,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:G,onChange:ke=>W(ke.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${u?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:u,disabled:u}),!u&&s.jsxs("p",{className:`text-xs text-right mt-1 ${G.length>=500?"text-red-500":"text-gray-400"}`,children:[G.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:De,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>I(!T),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"DTV ()"}),s.jsx(Zs,{value:ee,onValueChange:J,options:Ue,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"ISP ()"}),s.jsx(Zs,{value:j,onValueChange:S,options:ve,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"VoIP (VoIP)"}),s.jsx(Zs,{value:P,onValueChange:F,options:_e,placeholder:"",disabled:u})]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!u&&s.jsx("button",{onClick:Ve,disabled:M,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${M?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:M?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>Te(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:Re,onClose:()=>X(!1),onSave:Lt,workId:t.id,initialData:te,workType:t.WRK_CD,customerId:(ds=t.customer)==null?void 0:ds.id,customerName:(Ss=t.customer)==null?void 0:Ss.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:t.KPI_PROD_GRP_CD||"",prodChgGb:t.PROD_CHG_GB||"",chgKpiProdGrpCd:t.CHG_KPI_PROD_GRP_CD||"",prodGrp:t.PROD_GRP||"",wrkDtlTcd:t.WRK_DTL_TCD||"",readOnly:u}),s.jsx(Ba,{isOpen:be,onClose:()=>Te(!1),ctrtId:t.CTRT_ID,custId:(Ns=t.customer)==null?void 0:Ns.id}),s.jsx(If,{isOpen:re,onClose:()=>pe(!1),onSave:ke=>{st(ke.INSTL_LOC),lt(ke.VIEW_MOD_CD),ot(ke.VIEW_MOD_NM),pe(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(R==null?void 0:R.prodGrp)||(R==null?void 0:R.PROD_GRP),initialInstlLoc:Se,initialViewModCd:Nt,initialViewModNm:At,showToast:r,readOnly:u}),s.jsx(yg,{isOpen:$e,onClose:()=>gt(!1),onSave:kt,soId:t.SO_ID||""}),s.jsx(ul,{isOpen:We,onClose:()=>Dt(!1),onConfirm:Xt,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{equipmentData:R,installInfoData:te,custRel:k,custRelOptions:at,memo:G,installLocationText:Se,order:t})}),s.jsx(Nb,{isOpen:Et,onClose:()=>Rt(!1),wrkCd:t.WRK_CD,wrkId:t.id,rcptId:t.RCPT_ID})]})},R5=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1,certifyMode:c=!1,certifyReason:d})=>{var jt,ue,Ce,Le;const u=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",f=t.WRK_CD==="07",[m,p]=_.useState(!1),{equipmentData:y,filteringData:g}=$i(),{certifyRegconfInfo:N}=Wa(),C=t.id||"",v=oa(C),R={...y||i||g||{},installedEquipments:v.installedEquipments.length>0?v.installedEquipments:(y==null?void 0:y.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:v.markedForRemoval.length>0?v.markedForRemoval:(y==null?void 0:y.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(v.removalStatus).length>0?v.removalStatus:(y==null?void 0:y.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:A,isPending:M}=od(),L=()=>`work_complete_draft_${t.id}`,[k,V]=_.useState(""),[G,W]=_.useState(""),[j,S]=_.useState(""),[P,F]=_.useState(""),[ee,J]=_.useState(""),[$,Y]=_.useState(""),[K,w]=_.useState(!1),[se,oe]=_.useState(!1),[T,I]=_.useState(!1),[U,Q]=_.useState(""),[H,q]=_.useState([]),[ae,fe]=_.useState(!1),[ge,ce]=_.useState([]),[Re,X]=_.useState(!1),[me,he]=_.useState(""),[Z,ie]=_.useState(""),[te,je]=_.useState(void 0),[be,Te]=_.useState(!1),[re,pe]=_.useState(!1),[Se,st]=_.useState(""),[Nt,lt]=_.useState(""),[At,ot]=_.useState(""),[We,Dt]=_.useState(!1),[Et,Rt]=_.useState(!1),[$e,gt]=_.useState(!1),[Fe,rt]=_.useState(null),[at,It]=_.useState(!1),[ht,Je]=_.useState([]),[ve,Ge]=_.useState(null),[_e,xe]=_.useState(!1),[Ue,Pe]=_.useState(""),[Ye,mt]=_.useState(!1),[de,tt]=_.useState("B"),[De,it]=_.useState([]),[St,Lt]=_.useState([]),[Ve,kt]=_.useState([]),[Oe,Xt]=_.useState([]),[rs,ds]=_.useState([]),[Ss,Ns]=_.useState(()=>{const Ie=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Ie&&Ie.length>=8)return`${Ie.slice(0,4)}-${Ie.slice(4,6)}-${Ie.slice(6,8)}`;const Ze=new Date;return Ze.getFullYear()+"-"+String(Ze.getMonth()+1).padStart(2,"0")+"-"+String(Ze.getDate()).padStart(2,"0")});_.useEffect(()=>{if(u){(async()=>{try{const Ee=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(Ee){V(Ee.CUST_REL||""),W((Ee.WRK_PROC_CT||"").replace(/\\n/g,`
`)),S(Ee.PSN_USE_CORP||""),F(Ee.VOIP_USE_CORP||""),J(Ee.DTV_USE_CORP||"");const pt=Ee.UP_CTRL_CL||(R==null?void 0:R.upCtrlCl)||"";console.log("[CompleteMoveRemoval]  :",{API:Ee.UP_CTRL_CL,:R==null?void 0:R.upCtrlCl,:pt}),Y(pt),he(Ee.NET_CL||""),ie(Ee.NET_CL_NM||""),st(Ee.INSTL_LOC||""),je({NET_CL:Ee.NET_CL||"",NET_CL_NM:Ee.NET_CL_NM||"",WRNG_TP:Ee.WRNG_TP||"",INSTL_TP:Ee.INSTL_TP||"",CB_WRNG_TP:Ee.CB_WRNG_TP||"",CB_INSTL_TP:Ee.CB_INSTL_TP||"",INOUT_LINE_TP:Ee.INOUT_LINE_TP||"",INOUT_LEN:Ee.INOUT_LEN||"",DVDR_YN:Ee.DVDR_YN||"",BFR_LINE_YN:Ee.BFR_LINE_YN||"",CUT_YN:Ee.CUT_YN||"",TERM_NO:Ee.TERM_NO||"",RCV_STS:Ee.RCV_STS||"",SUBTAP_ID:Ee.SUBTAP_ID||"",PORT_NUM:Ee.PORT_NUM||"",EXTN_TP:Ee.EXTN_TP||"",TAB_LBL:Ee.TAB_LBL||"",CVT_LBL:Ee.CVT_LBL||"",STB_LBL:Ee.STB_LBL||""}),Ee.VOIP_JOIN_CTRT_ID&&Q(Ee.VOIP_JOIN_CTRT_ID),(Ee.CHK_CUST_ADDR==="true"||Ee.CHK_CUST_ADDR==="Y")&&w(!0),(Ee.CHK_PYM_ADDR==="true"||Ee.CHK_PYM_ADDR==="Y")&&oe(!0),Ee.WRKR_CMPL_DT&&Ee.WRKR_CMPL_DT.length>=8&&Ns(`${Ee.WRKR_CMPL_DT.slice(0,4)}-${Ee.WRKR_CMPL_DT.slice(4,6)}-${Ee.WRKR_CMPL_DT.slice(6,8)}`)}}catch(Ee){console.error("[WorkCompleteMoveRemoval]     :",Ee)}p(!0)})();return}const Ie=localStorage.getItem(L());if(Ie)try{const Ze=JSON.parse(Ie);V(Ze.custRel||""),W(Ze.memo||""),S(Ze.internetUse||""),F(Ze.voipUse||""),J(Ze.dtvUse||""),Y(Ze.upCtrlCl||""),he(Ze.networkType||""),ie(Ze.networkTypeName||""),st(Ze.installLocationText||""),je(Ze.installInfoData),Ze.voipJoinCtrtId&&Q(Ze.voipJoinCtrtId),Ze.chkCustAddr!==void 0&&w(Ze.chkCustAddr),Ze.chkPymAddr!==void 0&&oe(Ze.chkPymAddr)}catch(Ze){console.error("[WorkCompleteMoveRemoval] localStorage  :",Ze)}p(!0)},[t.id,u]),_.useEffect(()=>{if(!m||u)return;const Ie={custRel:k,memo:G,internetUse:j,voipUse:P,dtvUse:ee,upCtrlCl:$,networkType:me,networkTypeName:Z,installLocationText:Se,installInfoData:te,voipJoinCtrtId:U,chkCustAddr:K,chkPymAddr:se,savedAt:new Date().toISOString()};localStorage.setItem(L(),JSON.stringify(Ie))},[k,G,j,P,ee,$,me,Z,Se,te,U,K,se,m,u]),_.useEffect(()=>{(async()=>{try{const Ze=await Jl(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);Ze.CMCU005&&it(Ze.CMCU005.map(Ee=>({value:Ee.COMMON_CD,label:Ee.COMMON_CD_NM}))),Ze.CMCT015&&(console.log("[CompleteMoveRemoval]  CMCT015 :",Ze.CMCT015),Lt(Ze.CMCT015.map(Ee=>({value:Ee.COMMON_CD,label:Ee.COMMON_CD_NM})))),Ze.CMCU057&&kt(Ze.CMCU057.map(Ee=>({value:Ee.COMMON_CD,label:Ee.COMMON_CD_NM}))),Ze.CMCU110&&Xt(Ze.CMCU110.map(Ee=>({value:Ee.COMMON_CD,label:Ee.COMMON_CD_NM}))),Ze.CMCU148&&ds(Ze.CMCU148.map(Ee=>({value:Ee.COMMON_CD,label:Ee.COMMON_CD_NM})))}catch(Ze){console.error("[WorkCompleteMoveRemoval]   :",Ze)}})()},[]),_.useEffect(()=>{(async()=>{try{const Ze=await mc(),Ee=(Ze==null?void 0:Ze.output)||Ze||[];Je(Ee);const pt=t.PROD_CD||t.PROD_CD||"",Ke=Ee.some(Ct=>Ct.PROD_CD===pt);It(Ke),console.log("[CompleteRelocate] LGHV :",{currentProdCd:pt,isLghv:Ke,prodListCount:Ee.length})}catch(Ze){console.error("[CompleteRelocate] LGHV   :",Ze)}})()},[t.PROD_CD]),_.useEffect(()=>{if(t.WRK_CD!=="07")return;(async()=>{try{const Ze=await pg({WRK_CD:t.WRK_CD||"07",WRK_ID:t.id||"",RCPT_ID:t.RCPT_ID||""});Ge(Ze),console.log("[CompleteRelocate] getMoveWorkInfo:",Ze)}catch(Ze){console.error("[CompleteRelocate] getMoveWorkInfo :",Ze)}})()},[t.id,t.WRK_CD]),_.useEffect(()=>{(async()=>{const Ze=t.PROD_CD||t.PROD_CD||"",Ee=(R==null?void 0:R.prodPromoInfo)||[];if(Ze==="PD10018480")console.log("[CompleteRelocate] OTT   :",Ze),mt(!0),tt("C");else if(Ee.some(Ct=>Ct.PROD_CD==="PD10018160"))console.log("[CompleteRelocate] OTT   : PD10018160"),mt(!0),tt("B");else{mt(!1);return}const pt=t.id||"",Ke=t.directionId||t.WRK_DRCTN_ID||"";if(pt&&Ke)try{const Ct=await Jp({WRK_ID:pt,WRK_DRCTN_ID:Ke,DATA_TYPE:Ze==="PD10018480"?"C":"B"});Ct!=null&&Ct.EQT_SERNO&&(console.log("[CompleteRelocate]  OTT :",Ct.EQT_SERNO),Pe(Ct.EQT_SERNO))}catch(Ct){console.error("[CompleteRelocate] OTT   :",Ct)}})()},[t.PROD_CD,t.id,t.directionId,R==null?void 0:R.prodPromoInfo]),_.useEffect(()=>{R!=null&&R.upCtrlCl&&!$?(console.log("[CompleteMoveRemoval] equipmentData  :",R.upCtrlCl),Y(R.upCtrlCl)):!$&&m&&!u&&(console.log("[CompleteMoveRemoval]   : 01 ()"),Y("01"))},[R==null?void 0:R.upCtrlCl,m,u,$]),_.useEffect(()=>{var Ee;if(u)return;const Ie=((Ee=t.customer)==null?void 0:Ee.id)||t.CUST_ID;if(!Ie)return;(async()=>{try{console.log("[WorkCompleteMoveRemoval]     :",Ie);const pt=await jf({CUST_ID:Ie});console.log("[WorkCompleteMoveRemoval]   :",pt),ce(pt||[])}catch(pt){console.error("[WorkCompleteMoveRemoval]     :",pt),ce([])}})()},[(jt=t.customer)==null?void 0:jt.id,t.CUST_ID,u]),_.useEffect(()=>{if(u)return;if(ge.length===0){console.log("[WorkCompleteMoveRemoval]     ...");return}const Ie=t.PROD_GRP||"",Ze=t.VOIP_PROD_CD||"",Ee=t.ISP_PROD_CD||"",pt=t.WRK_STAT_CD||"",Ke=t.ADDR_ORD||"";if(console.log("[WorkCompleteMoveRemoval]   :",{prodGrp:Ie,voipProdCd:Ze,ispProdCd:Ee,wrkStatCd:pt,addrOrd:Ke,customerCtrtListCount:ge.length}),Ie==="V"&&!Ze){const Ct=ge.filter(He=>{const ct=He.PROD_GRP||"",wt=He.CTRT_STAT||"",Bt=He.ADDR_ORD||He.addr_ord||"";return(ct==="C"||ct==="D"||ct==="I")&&wt==="20"&&(!Ke||Bt===Ke)});console.log("[WorkCompleteMoveRemoval] VoIP   :",Ct),Ct.length<1&&pt==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const bt=[{value:"",label:""},...Ct.map(He=>({value:He.CTRT_ID||"",label:`[${He.CTRT_ID}] ${He.BASIC_PROD_CD_NM||He.PROD_NM||""}`}))];q(bt),fe(!0);return}if(Ie==="I"&&Ee){const Ct=ge.filter(He=>{const ct=He.PROD_GRP||"",wt=He.CTRT_STAT||"",Bt=He.ADDR_ORD||He.addr_ord||"",Vt=He.ISP_JOIN_ID||"",Jt=He.KPI_PROD_GRP_CD||"";return(ct==="D"||ct==="C")&&wt==="20"&&!Vt&&Jt==="D"&&(!Ke||Bt===Ke)});console.log("[WorkCompleteMoveRemoval] ISP   :",Ct),Ct.length<1&&pt==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const bt=[{value:"",label:""},...Ct.map(He=>({value:He.CTRT_ID||"",label:`[${He.CTRT_ID}] ${He.BASIC_PROD_CD_NM||He.PROD_NM||""}`}))];q(bt),fe(!0);return}fe(!1),q([])},[t.id,t.WRK_STAT_CD,u,r,ge]);const ke=()=>{const Ie=[];k||Ie.push("  ."),te!=null&&te.NET_CL||Ie.push(" ."),Se||Ie.push(" ."),Ss||Ie.push(" .");const Ze=t.PROD_GRP||"",Ee=t.VOIP_PROD_CD||"",pt=t.ISP_PROD_CD||"";if(Ze==="V"&&t.WRK_CD==="07"&&ve&&ve.WRK_STAT_CD!=="4"&&Ie.push("VOIP         ."),at&&ve&&t.WRK_CD==="07"){const Ct=t.CTRT_ID||"",bt=ve.OLD_CTRT_ID||"";if(Ct!==bt){const He=ve.WRK_STAT_CD||"";if(He==="1"||He==="2"){const ct=ve.OLD_PROD_CD||"";ht.some(wt=>wt.PROD_CD===ct)&&Ie.push("LGHV STB  ,     .")}}}Ze==="V"&&!Ee&&ae&&(U||Ie.push("VOIP    .")),Ze==="I"&&pt&&ae&&(U||Ie.push("  ISP .    .")),Ye&&!Ue&&Ie.push("OTT   OTT BOX   .");const Ke=(R==null?void 0:R.installedEquipments)||[];return Ze!=="V"&&Ke.length<1&&Ie.push("()  ."),Ie},dt=Ie=>{je(Ie),Ie.NET_CL&&he(Ie.NET_CL),Ie.NET_CL_NM&&ie(Ie.NET_CL_NM),r==null||r("  .","success")},et=()=>{if(M)return;const Ie=ke();if(Ie.length>0){Ie.forEach(Ee=>r==null?void 0:r(Ee,"error"));return}(t.PROD_GRP||"")!=="V"?gt(!0):Dt(!0)},Qt=Ie=>{rt(Ie),gt(!1),Dt(!0)},ut=(Ie,Ze=!1)=>{if(!Ie||Ie.length===0)return[];const Ee=localStorage.getItem("userInfo"),pt=Ee?JSON.parse(Ee):{},Ke=pt.userId||"A20130708",Ct=(R==null?void 0:R.removalStatus)||{},bt=(He,ct)=>He==="1"||He==="Y"||ct==="1"||ct==="Y"?"1":"0";return Ie.map(He=>{var Vt,Jt,ss;const ct=He.EQT_NO||He.id||((Vt=He.actualEquipment)==null?void 0:Vt.id)||"",wt=Ct[ct]||{},Bt=Ze?{CRR_TSK_CL:t.WRK_CD||"07",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||pt.crrId||"01",WRKR_ID:Ke,EQT_LOSS_YN:bt(He.EQT_LOSS_YN,wt.EQT_LOSS_YN),PART_LOSS_BRK_YN:bt(He.PART_LOSS_BRK_YN,wt.PART_LOSS_BRK_YN),EQT_BRK_YN:bt(He.EQT_BRK_YN,wt.EQT_BRK_YN),EQT_CABL_LOSS_YN:bt(He.EQT_CABL_LOSS_YN,wt.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:bt(He.EQT_CRDL_LOSS_YN,wt.EQT_CRDL_LOSS_YN)}:{};if(He.actualEquipment){const Wt=He.actualEquipment,Es=He.contractEquipment||{};return{...Wt,EQT_NO:Wt.id,EQT_SERNO:Wt.serialNumber,ITEM_MID_CD:Wt.itemMidCd,EQT_CL_CD:Wt.eqtClCd,MAC_ADDRESS:He.macAddress||Wt.macAddress,WRK_ID:t.id,CUST_ID:(Jt=t.customer)==null?void 0:Jt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Ke,SVC_CMPS_ID:Es.SVC_CMPS_ID||He.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Es.BASIC_PROD_CMPS_ID||He.BASIC_PROD_CMPS_ID||"",PROD_CMPS_ID:Es.PROD_CMPS_ID||He.PROD_CMPS_ID||"",SVC_CD:Es.SVC_CD||He.SVC_CD||"",PROD_CD:Es.PROD_CD||He.PROD_CD||"",LENT_YN:He.lentYn||He.LENT_YN||Es.LENT_YN||"",EQT_CHG_GB:He.EQT_CHG_GB||"01",...Bt}}return{...He,EQT_NO:He.EQT_NO||He.id||"",EQT_SERNO:He.EQT_SERNO||He.serialNumber||"",ITEM_MID_CD:He.ITEM_MID_CD||He.itemMidCd||"",EQT_CL_CD:He.EQT_CL_CD||He.eqtClCd||"",MAC_ADDRESS:He.MAC_ADDRESS||He.macAddress||"",SVC_CMPS_ID:He.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:He.BASIC_PROD_CMPS_ID||"",PROD_CD:He.PROD_CD||"",SVC_CD:He.SVC_CD||"",WRK_ID:t.id,CUST_ID:(ss=t.customer)==null?void 0:ss.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Ke,...Bt}})},qt=async()=>{var Jt,ss,Wt,Es,ys,Ps,xs,vs,Ms,cs;const Ie=Ss.replace(/-/g,""),Ze=localStorage.getItem("userInfo"),Ee=Ze?JSON.parse(Ze):{},pt=Ee.userId||"A20130708",Ke=c||Lh(t.OP_LNKD_CD),Ct=await Cg(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let bt="";if(Ke){let ms=(R==null?void 0:R.prodPromoInfo)||[];if(ms.length===0)try{console.log("[CompleteRelocate] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),ms=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"07"}),console.log("[CompleteRelocate] getProdPromotionInfo fallback :",ms.length,"")}catch(Ls){console.log("[CompleteRelocate] getProdPromotionInfo fallback :",Ls)}const Ks=ms.filter(Ls=>(Ls.PROD_CMPS_CL==="21"||Ls.PROD_CMPS_CL==="22")&&(Ls.PROD_STAT_CD==="10"||Ls.PROD_STAT_CD==="20")).map(Ls=>Ls.PROD_CD).filter(Ls=>Ls);bt=Ks.length>0?Ks.join(",")+",":"",console.log("[CompleteRelocate] ADD_ON :",bt)}const He=(R==null?void 0:R.installedEquipments)||[];if(Ke&&He.length>0&&!N){r==null||r("  .","error");return}if(Ke&&N)try{const ms=t.OLD_CTRT_ID||t.CTRT_ID||"",{certifyType:Ks}=await C5(t,pt,ms);if(Ks){const Ls=d||(Ks==="C"?"":""),nt=Ks==="U"?(t.CTRT_ID||"")!==ms?ms:t.CTRT_ID||"":void 0,Kt=await _g({order:t,workerId:pt,certifyRegconfInfo:N,addOnParam:bt,reason:Ls,certifyType:Ks,contIdOld:nt});if(!Kt.success){r==null||r(` : ${Kt.message}`,"error");return}console.log("[CompleteRelocate] CL-04    ")}}catch(ms){console.error("[CompleteRelocate] CL-04  :",ms),r==null||r(`  : ${ms.message||"   "}`,"error");return}const ct=(R==null?void 0:R.installedEquipments)||[],wt=!!t.ISP_PROD_CD;if(!Ct&&(wt||ct.length>0))try{const ms=t.PROD_GRP||"";let Ks="SMR03",Ls="",nt="",Kt="",Cs="",Ht="",Os="";at&&(Ks="STB_CRT"),ms==="V"&&(Ks="SMR60");const es=(R==null?void 0:R.prodPromoInfo)||[],Ds=((Jt=es.find(cn=>cn.PROD_CMPS_CL==="23"))==null?void 0:Jt.PROD_CMPS_ID)||"",js=es.find(cn=>cn.PROD_CMPS_CL==="11"),hs=(js==null?void 0:js.PROD_CD)||"",Us=(js==null?void 0:js.PROD_GRP)||ms,Qs=es.filter(cn=>cn.BASIC_PROD_FL==="V").map(cn=>cn.PROD_CD),Is=Qs.length>0?Qs.join(","):"",ps=cn=>{const cr=ct.find(Fr=>{const Hi=Fr.actualEquipment||Fr;return(Hi.itemMidCd||Hi.ITEM_MID_CD)===cn});if(!cr)return"";const ni=cr.actualEquipment||cr;return ni.id||ni.EQT_NO||""};t.VOIP_PROD_CD?(Ls=ps("08"),nt=ps("02")):(Ls=ps("05")||ps("01")||ps("03")||(Us==="I"?ps("02"):"")||ps("08")||"",nt=ps("04")),Kt=ps("07"),Us==="C"&&(Cs=ps("02")),Us==="V"&&(Ht=ps("10")),wt&&(Ht=ps("21")),(ms==="V"||wt)&&(Os=U||t.CTRT_ID||"");let Lr=t.id||"";const Ir=ct.find(cn=>{const cr=cn.actualEquipment||cn;return(cr.eqtClCd||cr.EQT_CL_CD)==="091003"}),qr=ct.find(cn=>{const cr=cn.actualEquipment||cn;return(cr.eqtClCd||cr.EQT_CL_CD)==="092201"});if(Ir){const cn=Ir.actualEquipment||Ir;Lr=cn.id||cn.EQT_NO||t.id||""}else if(qr){const cn=qr.actualEquipment||qr;Lr=cn.macAddress||cn.MAC_ADDRESS||t.id||""}console.log("[CompleteRelocate]   :",{msgId:Ks,eqtNo:Ls,eqtProdCmpsId:Ds,prodCd:hs,subProdCd:Is,etc1:nt,etc2:Kt,etc3:Cs,etc4:Ht,signalWrkId:Lr});const vr=await la({MSG_ID:Ks,CUST_ID:((ss=t.customer)==null?void 0:ss.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:Ls,EQT_PROD_CMPS_ID:Ds,PROD_CD:hs,ITV_USR_ID:"",IP_CNT:"",ETC_1:nt,ETC_2:Kt,ETC_3:Cs,ETC_4:Ht,SUB_PROD_CD:Is,IF_DTL_ID:"",WRK_ID:Lr,REG_UID:pt,VOIP_JOIN_CTRT_ID:Os,WTIME:"3"});vr.code==="SUCCESS"||vr.code==="OK"?console.log("[CompleteRelocate]    "):(console.warn("[CompleteRelocate]    :",vr.message),ms!=="V"&&(r==null||r("   .  .","warning")))}catch(ms){console.error("[CompleteRelocate]    :",ms),r==null||r("   .  .","warning")}const Bt=(R==null?void 0:R.removedEquipments)||[];if(Bt.length>0&&!Ct&&!at){let ms=!1;for(const Ls of Bt){const nt=Ls.actualEquipment||Ls,Kt=nt.eqtClCd||nt.EQT_CL_CD||"";Kt==="090901"||Kt==="091001"||Kt==="091005"||(ms=!0)}const Ks=t.PROD_GRP||"";if(t.WRK_CD==="07"&&Ks==="V"&&(ms=!1),ms)try{const Ls=(R==null?void 0:R.removedProdPromoInfo)||(R==null?void 0:R.prodPromoInfo)||[],nt=((Es=(Wt=Ls.find)==null?void 0:Wt.call(Ls,Ht=>Ht.PROD_CMPS_CL==="23"))==null?void 0:Es.PROD_CMPS_ID)||"";let Kt="";Ks==="V"&&(Kt=t.VOIP_PROD_CD?t.CTRT_ID||"":U||t.CTRT_ID||""),console.log("[CompleteRelocate]   :",{msgId:"SMR05",delEqtProdCmpsId:nt,prodGrpForDel:Ks});const Cs=await la({MSG_ID:"SMR05",CUST_ID:((ys=t.customer)==null?void 0:ys.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:nt,PROD_CD:"",WRK_ID:t.id||"",REG_UID:pt,ETC_1:"",ETC_2:"",ETC_3:"",ETC_4:"",VOIP_JOIN_CTRT_ID:Kt,WTIME:"3"});if(Cs.code!=="SUCCESS"&&Cs.code!=="OK"){if((((Ps=Cs.O_IFSVC_RESULT)==null?void 0:Ps.substring(14,20))||"")!=="029"&&((xs=Cs.message)==null?void 0:xs.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteRelocate]    -  :",Cs.message),r==null||r("   .","error",!0);return}}else console.log("[CompleteRelocate]    ")}catch(Ls){console.error("[CompleteRelocate]     :",Ls),r==null||r("   .","error",!0);return}}else Bt.length>0&&at&&console.log("[CompleteRelocate] LGHV STB  -  skip ( )");const Vt={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(vs=t.customer)==null?void 0:vs.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Ee.crrId||"01",WRKR_ID:pt,WRKR_CMPL_DT:Ie,MEMO:G||" ",STTL_YN:"Y",REG_UID:pt,CUST_REL:k,CNFM_CUST_NM:((Ms=t.customer)==null?void 0:Ms.name)||"",CNFM_CUST_TELNO:((cs=t.customer)==null?void 0:cs.contactNumber)||"",INSTL_LOC:Se||"",UP_CTRL_CL:$||"",PSN_USE_CORP:j||"",VOIP_USE_CORP:P||"",DTV_USE_CORP:ee||"",WRK_ACT_CL:"20",TV_TYPE:"",NET_CL:(te==null?void 0:te.NET_CL)||"",WRNG_TP:(te==null?void 0:te.WRNG_TP)||"",INSTL_TP:(te==null?void 0:te.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:U||"",OLD_CTRT_ID:t.OLD_CTRT_ID||"",CHK_CUST_ADDR:f?K?"true":"false":"",CHK_PYM_ADDR:f?se?"true":"false":"",ADD_ON:bt||""},equipmentList:ut((R==null?void 0:R.installedEquipments)||[],!1),removeEquipmentList:ut((R==null?void 0:R.removedEquipments)||[],!0),spendItemList:(R==null?void 0:R.spendItems)||[],agreementList:(R==null?void 0:R.agreements)||[],poleList:Fe?[{WRK_ID:t.id,POLE_YN:Fe.POLE_YN,LAN_GB:Fe.LAN_GB||"",REG_UID:pt}]:[]};A(Vt,{onSuccess:ms=>{ms.code==="SUCCESS"||ms.code==="OK"?(localStorage.removeItem(L()),t.WRK_STAT_CD="3",r==null||r("  .","success"),n()):r==null||r(ms.message||"   .","error",!0)},onError:ms=>{r==null||r(ms.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[M&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[ae&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:U,onValueChange:Q,options:H,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:Z||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>X(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${u?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:u?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:k,onValueChange:V,options:De,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{children:Se||""}),At&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(: ",At,")"]})]}),s.jsxs("button",{type:"button",onClick:()=>pe(!0),className:`min-h-10 px-3 sm:px-4 rounded-lg font-bold text-sm whitespace-nowrap flex items-center gap-1.5 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:[s.jsx(rd,{className:"w-4 h-4"}),s.jsx("span",{children:u?"":""})]})]})]}),((R==null?void 0:R.kpiProdGrpCd)==="D"||(R==null?void 0:R.prodGrp)==="D"||t.PROD_GRP==="D")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(Zs,{value:$,onValueChange:Y,options:St,placeholder:"",disabled:u})]}),Ye&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["OTT BOX  ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:Ue,readOnly:!0,placeholder:"SER_NO   ",className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-600"}),s.jsxs("button",{type:"button",onClick:()=>xe(!0),disabled:u,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${u?"bg-gray-400 text-white cursor-not-allowed":Ue?"bg-green-500 hover:bg-green-600 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"SER_NO"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:G,onChange:Ie=>W(Ie.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${u?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:u,disabled:u}),!u&&s.jsxs("p",{className:`text-xs text-right mt-1 ${G.length>=500?"text-red-500":"text-gray-400"}`,children:[G.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Ss,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>I(!T),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"DTV ()"}),s.jsx(Zs,{value:ee,onValueChange:J,options:rs,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"ISP ()"}),s.jsx(Zs,{value:j,onValueChange:S,options:Ve,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"VoIP (VoIP)"}),s.jsx(Zs,{value:P,onValueChange:F,options:Oe,placeholder:"",disabled:u})]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!u&&s.jsx("button",{onClick:et,disabled:M,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${M?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:M?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>Te(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:Re,onClose:()=>X(!1),onSave:dt,workId:t.id,initialData:te,workType:t.WRK_CD,customerId:(ue=t.customer)==null?void 0:ue.id,customerName:(Ce=t.customer)==null?void 0:Ce.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:t.KPI_PROD_GRP_CD||"",prodChgGb:t.PROD_CHG_GB||"",chgKpiProdGrpCd:t.CHG_KPI_PROD_GRP_CD||"",prodGrp:t.PROD_GRP||"",wrkDtlTcd:t.WRK_DTL_TCD||"",readOnly:u}),s.jsx(Ba,{isOpen:be,onClose:()=>Te(!1),ctrtId:t.CTRT_ID,custId:(Le=t.customer)==null?void 0:Le.id}),s.jsx(If,{isOpen:re,onClose:()=>pe(!1),onSave:Ie=>{st(Ie.INSTL_LOC),lt(Ie.VIEW_MOD_CD),ot(Ie.VIEW_MOD_NM),pe(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(R==null?void 0:R.prodGrp)||(R==null?void 0:R.PROD_GRP),initialInstlLoc:Se,initialViewModCd:Nt,initialViewModNm:At,showToast:r,readOnly:u}),s.jsx(yg,{isOpen:$e,onClose:()=>gt(!1),onSave:Qt,soId:t.SO_ID||""}),s.jsx(ul,{isOpen:We,onClose:()=>Dt(!1),onConfirm:qt,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{equipmentData:R,installInfoData:te,custRel:k,custRelOptions:De,memo:G,installLocationText:Se,order:t})}),s.jsx(Nb,{isOpen:Et,onClose:()=>Rt(!1),wrkCd:t.WRK_CD,wrkId:t.id,rcptId:t.RCPT_ID}),s.jsx(yb,{isOpen:_e,onClose:()=>xe(!1),onSave:Ie=>{Pe(Ie),r==null||r("OTT  .","success")},wrkId:t.id||"",wrkDrctnId:t.directionId||t.WRK_DRCTN_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",dataType:de,showToast:r,readOnly:u})]})},T5=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1,certifyMode:c=!1})=>{var Ce,Le,Ie,Ze;const d=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[u,f]=_.useState(!1),{equipmentData:m,filteringData:p,removalLineData:y,setRemovalLineData:g}=$i(),{certifyRegconfInfo:N}=Wa(),C=t.id||"",v=oa(C),R=ji(Ee=>{var pt;return((pt=Ee.workStates[C])==null?void 0:pt.reuseAll)??!1}),A=ji(Ee=>Ee.setReuseAll),M={...m||i||p||{},installedEquipments:v.installedEquipments.length>0?v.installedEquipments:(m==null?void 0:m.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:v.removeEquipments.length>0?v.removeEquipments:(m==null?void 0:m.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(v.removalStatus).length>0?v.removalStatus:(m==null?void 0:m.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:L,isPending:k}=od(),V=()=>`work_complete_draft_${t.id}`,[G,W]=_.useState(""),[j,S]=_.useState(""),[P,F]=_.useState(""),[ee,J]=_.useState(""),[$,Y]=_.useState(!1),[K,w]=_.useState(""),[se,oe]=_.useState(""),[T,I]=_.useState(void 0),[U,Q]=_.useState(!1),H=y,q=g,[ae,fe]=_.useState(!1),[ge,ce]=_.useState(!1),[Re,X]=_.useState(!1),[me,he]=_.useState(null),[Z,ie]=_.useState(!1),[te,je]=_.useState(null),[be,Te]=_.useState(!1),[re,pe]=_.useState(""),[Se,st]=_.useState(!1),[Nt,lt]=_.useState(!1),[At,ot]=_.useState("none"),[We,Dt]=_.useState(""),[Et,Rt]=_.useState(!1),[$e,gt]=_.useState([]),[Fe,rt]=_.useState([]),[at,It]=_.useState([]),[ht,Je]=_.useState(null),[ve,Ge]=_.useState(!1),[_e,xe]=_.useState(""),[Ue,Pe]=_.useState(!1),[Ye,mt]=_.useState(null),[de,tt]=_.useState(!1),[De,it]=_.useState(!1),[St,Lt]=_.useState(()=>{const Ee=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Ee&&Ee.length>=8)return`${Ee.slice(0,4)}-${Ee.slice(4,6)}-${Ee.slice(6,8)}`;const pt=new Date;return pt.getFullYear()+"-"+String(pt.getMonth()+1).padStart(2,"0")+"-"+String(pt.getDate()).padStart(2,"0")});_.useEffect(()=>{var pt,Ke;if(F(((pt=t.customer)==null?void 0:pt.name)||""),J(((Ke=t.customer)==null?void 0:Ke.contactNumber)||t.REQ_CUST_TEL_NO||""),d){console.log("[WorkCompleteRemovalTerminate]   - getWorkReceiptDetail API "),(async()=>{try{const bt=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});bt?(console.log("[WorkCompleteRemovalTerminate] API :",bt),W(bt.CUST_REL||""),S((bt.WRK_PROC_CT||"").replace(/\\n/g,`
`)),w(bt.NET_CL||""),oe(bt.NET_CL_NM||""),I({NET_CL:bt.NET_CL||"",NET_CL_NM:bt.NET_CL_NM||"",WRNG_TP:bt.WRNG_TP||"",INSTL_TP:bt.INSTL_TP||"",CB_WRNG_TP:bt.CB_WRNG_TP||"",CB_INSTL_TP:bt.CB_INSTL_TP||"",INOUT_LINE_TP:bt.INOUT_LINE_TP||"",INOUT_LEN:bt.INOUT_LEN||"",DVDR_YN:bt.DVDR_YN||"",BFR_LINE_YN:bt.BFR_LINE_YN||"",CUT_YN:bt.CUT_YN||"",TERM_NO:bt.TERM_NO||"",RCV_STS:bt.RCV_STS||"",SUBTAP_ID:bt.SUBTAP_ID||"",PORT_NUM:bt.PORT_NUM||"",EXTN_TP:bt.EXTN_TP||"",TAB_LBL:bt.TAB_LBL||"",CVT_LBL:bt.CVT_LBL||"",STB_LBL:bt.STB_LBL||""}),S((bt.WRK_PROC_CT||"").replace(/\\n/g,`
`)),bt.WRKR_CMPL_DT&&bt.WRKR_CMPL_DT.length>=8&&Lt(`${bt.WRKR_CMPL_DT.slice(0,4)}-${bt.WRKR_CMPL_DT.slice(4,6)}-${bt.WRKR_CMPL_DT.slice(6,8)}`)):(console.log("[WorkCompleteRemovalTerminate] API  - order  "),W(t.CUST_REL||""),w(t.NET_CL||""),oe(t.NET_CL_NM||""))}catch(bt){console.error("[WorkCompleteRemovalTerminate] API  :",bt),W(t.CUST_REL||""),w(t.NET_CL||""),oe(t.NET_CL_NM||"")}finally{f(!0)}})();return}const Ee=localStorage.getItem(V());if(Ee)try{const Ct=JSON.parse(Ee);W(Ct.custRel||""),S(Ct.memo||""),w(Ct.networkType||""),oe(Ct.networkTypeName||""),I(Ct.installInfoData),Ct.cnfmCustNm&&F(Ct.cnfmCustNm),Ct.cnfmCustTelno&&J(Ct.cnfmCustTelno)}catch(Ct){console.error("[WorkCompleteRemovalTerminate] localStorage  :",Ct)}f(!0)},[t.id,d]),_.useEffect(()=>{if(!u||d)return;const Ee={custRel:G,memo:j,networkType:K,networkTypeName:se,installInfoData:T,cnfmCustNm:P,cnfmCustTelno:ee,savedAt:new Date().toISOString()};localStorage.setItem(V(),JSON.stringify(Ee))},[G,j,K,se,T,P,ee,u,d]),_.useEffect(()=>{(async()=>{var pt;try{const Ke=await Jl(["CMCU005"]);Ke.CMCU005&&It(Ke.CMCU005.map(He=>({value:He.COMMON_CD,label:He.COMMON_CD_NM})));try{const He=await pg({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:t.WRKR_ID||"",PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"02",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||((pt=t.customer)==null?void 0:pt.ADDR_ORD)||"",WRK_CD:t.WRK_CD||"08",WRK_STAT_CD:t.WRK_STAT_CD||""});console.log("[CompleteRelocateTerminate] :",He),he(He);const ct=(He==null?void 0:He.MVM_TP)||"",wt=(He==null?void 0:He.WRK_STAT_CD)||"",Bt=(He==null?void 0:He.CTRT_ID)||"",Vt=(He==null?void 0:He.OLD_CTRT_ID)||"",Jt=wt==="2";console.log("[CompleteRelocateTerminate]  :",{MVM_TP:ct,WRK_STAT_CD:wt,CTRT_ID:Bt,OLD_CTRT_ID:Vt,shouldReuse:Jt}),!Jt&&R&&A(C,!1)}catch(He){console.error("[CompleteRelocateTerminate]   :",He)}const Ct=await mc();if(Ct&&Ct.length>0){gt(Ct);const He=t.PROD_CD||t.BASIC_PROD_CD||"",ct=Ct.some(wt=>wt.PROD_CD===He);Rt(ct),console.log("[WorkCompleteRemovalTerminate] LGHV STB :",{prodCd:He,isLghv:ct,lghvListCount:Ct.length})}const bt=t.CERTIFY_TG||"";if(bt==="Y"){const He=await qp();rt(He);const ct=t.NEW_PROD_CD||t.PROD_CD||"",wt=t.SO_ID||"",Bt=He.some(Vt=>Vt.PROD_CD===ct);console.log("[WorkCompleteRemovalTerminate]  :",{certifyTg:bt,newProdCd:ct,soId:wt,isCertifyProd:Bt}),Bt||st(!0)}}catch(Ke){console.error("[WorkCompleteRemovalTerminate]    :",Ke)}})()},[t]);const Ve=Ee=>!Ee||Ee.length!==8?"":`${Ee.slice(0,4)}-${Ee.slice(4,6)}-${Ee.slice(6,8)}`,kt=Ee=>Ee.replace(/-/g,""),Oe=()=>new Date().toISOString().slice(0,10).replace(/-/g,""),Xt=(Ee,pt)=>{if(!Ee||!pt)return 0;const Ke=new Date(Ve(Ee)),Ct=new Date(Ve(pt));return Math.ceil((Ct.getTime()-Ke.getTime())/(1e3*60*60*24))},rs=_.useCallback(async()=>{const Ee=t.RCPT_ID||"",pt=t.CTRT_ID||"";if(!(!Ee||!pt)){Ge(!0),mt(null);try{const Ke=await c5({RCPT_ID:Ee,CTRT_ID:pt});if(console.log("[CompleteRemovalTerminate]   :",Ke),Ke){Je(Ke),xe(Ve(Ke.MMT_SUS_HOPE_DD));const Ct=Oe();Ke.WRK_DTL_TCD==="0430"&&Ke.MMT_SUS_HOPE_DD<=Ct?(Pe(!0),r==null||r("  .   .","warning")):Pe(!1)}}catch(Ke){console.error("[CompleteRemovalTerminate]   :",Ke),mt(Ke.message||"   ")}finally{Ge(!1)}}},[t.RCPT_ID,t.CTRT_ID,r]);_.useEffect(()=>{rs()},[rs]);const ds=()=>{const Ee=[];return(!G||G==="[]")&&Ee.push("  ."),T!=null&&T.NET_CL||Ee.push("  ."),T!=null&&T.WRNG_TP||Ee.push("  ."),T!=null&&T.INSTL_TP?T.INSTL_TP!=="77"&&Ee.push('   "(77)" .'):Ee.push("  ."),St||Ee.push(" ."),et()&&!H&&Ee.push("   ."),Ee},Ss=Ee=>{I(Ee),Ee.NET_CL&&w(Ee.NET_CL),Ee.NET_CL_NM&&oe(Ee.NET_CL_NM),r==null||r("  .","success")},Ns=async()=>{var Ee;lt(!0),Dt(""),ot("none");try{const pt=localStorage.getItem("userInfo"),Ke=pt?JSON.parse(pt):{},Ct=await Sp({CTRT_ID:t.CTRT_ID||"",CUST_ID:((Ee=t.customer)==null?void 0:Ee.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:Ke.userId||"",WRK_ID:t.id||""});Ct!=null&&Ct.ERROR?(ot("error"),Dt(Ct.ERROR),r==null||r(` : ${Ct.ERROR}`,"error")):(ot("success"),Dt(" ."),r==null||r(" .","success"))}catch(pt){console.error("[ CL-06 ]:",pt),ot("error"),Dt(pt.message||"    ."),r==null||r(pt.message||"    .","error",!0)}finally{lt(!1)}},ke=async()=>{var Ee;lt(!0),Dt("");try{const pt=localStorage.getItem("userInfo"),Ke=pt?JSON.parse(pt):{},Ct=await qm({CTRT_ID:t.CTRT_ID||"",CUST_ID:((Ee=t.customer)==null?void 0:Ee.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:Ke.userId||"",WRK_ID:t.id||""}),bt=Array.isArray(Ct)?Ct[0]:Ct;if(bt!=null&&bt.ERROR)ot("error"),Dt(` : ${bt.ERROR}`),r==null||r(` : ${bt.ERROR}`,"warning");else{const He=(bt==null?void 0:bt.RESULT)||(bt==null?void 0:bt.MSG)||JSON.stringify(bt);Dt(` : ${He}`),r==null||r(" ","info")}}catch(pt){console.error("[ CL-08 ]:",pt),Dt(pt.message||"   ."),r==null||r(pt.message||"   .","error",!0)}finally{lt(!1)}},dt=async()=>{var Ke,Ct,bt,He,ct;const Ee=(M==null?void 0:M.removedEquipments)||[];if((t.CTRT_STAT||"")==="20")return console.log("[]  20 - "),!0;try{const wt=localStorage.getItem("userInfo"),Vt=(wt?JSON.parse(wt):{}).userId||"A20130708";let Jt="SMR05",ss="";if(Et){const cs=(me==null?void 0:me.NEW_PROD_CD)||"",ms=(me==null?void 0:me.OLD_PROD_CD)||"",Ks=(me==null?void 0:me.CTRT_ID)||t.CTRT_ID||"",Ls=(me==null?void 0:me.OLD_CTRT_ID)||"",nt=$e.some(Cs=>Cs.PROD_CD===cs),Kt=$e.some(Cs=>Cs.PROD_CD===ms);if(nt&&Kt){if(Ks===Ls)return console.log("[] LGHV LL  -   "),ie(!0),!0}else{const Cs=Ee.find(Ht=>{var Os,es;return(Ht.ITEM_MID_CD||Ht.itemMidCd||((Os=Ht.actualEquipment)==null?void 0:Os.ITEM_MID_CD)||((es=Ht.actualEquipment)==null?void 0:es.itemMidCd))==="04"});Cs&&(ss=Cs.EQT_NO||Cs.id||((Ke=Cs.actualEquipment)==null?void 0:Ke.EQT_NO)||((Ct=Cs.actualEquipment)==null?void 0:Ct.id)||"")}Jt="STB_DEL"}const Wt=t.DTL_CTRT_ID||t.CTRT_ID||"",Es=Ee.some(cs=>{var ms;return cs.CTRT_ID===Wt||((ms=cs.actualEquipment)==null?void 0:ms.CTRT_ID)===Wt});Ee.length>0&&!Es&&(console.warn("[]    -   "),r==null||r("    .","warning"));const ys=Ee.find(cs=>{var ms;return cs.PROD_CMPS_CL==="23"||((ms=cs.actualEquipment)==null?void 0:ms.PROD_CMPS_CL)==="23"}),Ps=(ys==null?void 0:ys.PROD_CMPS_ID)||((bt=ys==null?void 0:ys.actualEquipment)==null?void 0:bt.PROD_CMPS_ID)||(ys==null?void 0:ys.EQT_PROD_CMPS_ID)||((He=ys==null?void 0:ys.actualEquipment)==null?void 0:He.EQT_PROD_CMPS_ID)||"",vs=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"";console.log(`[] ${Jt}  `,{isLghvStb:Et,eqtProdCmpsId:Ps,etc1:ss,voipJoinCtrtId:vs});const Ms=await la({MSG_ID:Jt,CUST_ID:((ct=t.customer)==null?void 0:ct.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:Ps,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Vt,ETC_1:ss,ETC_2:"",ETC_3:"",ETC_4:"",VOIP_JOIN_CTRT_ID:vs,WTIME:"3"});return Ms.code==="SUCCESS"||Ms.code==="OK"||Ms.message&&Ms.message.indexOf("TRUE")>-1&&Ms.message.indexOf("000000")>-1?(console.log("[] :",Ms),ie(!0),je({success:!0,message:"  "}),!0):(console.warn("[] :",Ms),je({success:!1,message:Ms.message||"  "}),!1)}catch(wt){return console.error("[] :",wt),je({success:!1,message:wt.message||"  "}),!1}},et=()=>{const Ee=t.KPI_PROD_GRP_CD||"",pt=t.VOIP_CTX||"";return["C","D","I"].includes(Ee)&&pt!=="T"&&pt!=="R"},Qt=Ee=>{console.log("[WorkCompleteRemovalTerminate]   () :",Ee),q(Ee),r==null||r("  .   .","info")},ut=Ee=>{console.log("[WorkCompleteRemovalTerminate]   - AS  :",Ee),q(Ee),fe(!0)},qt=async Ee=>{console.log("[WorkCompleteRemovalTerminate] AS :",Ee),ce(!0);try{const pt=localStorage.getItem("userInfo"),Ct=(pt?JSON.parse(pt):{}).userId||"A20130708",bt=await vp({WRK_ID:t.id,REMOVE_LINE_TP:Ee.REMOVE_LINE_TP,REMOVE_GB:Ee.REMOVE_GB,REMOVE_STAT:Ee.REMOVE_STAT||"",REG_UID:Ct});if(bt.code!=="SUCCESS"&&bt.code!=="OK")throw new Error(bt.message||"   .");const He=await o5({CUST_ID:Ee.CUST_ID,RCPT_ID:Ee.RCPT_ID||"",WRK_DTL_TCD:Ee.WRK_DTL_TCD,WRK_RCPT_CL:Ee.WRK_RCPT_CL,WRK_RCPT_CL_DTL:Ee.WRK_RCPT_CL_DTL,WRK_HOPE_DTTM:Ee.WRK_HOPE_DTTM,MEMO:Ee.MEMO||"",EMRG_YN:Ee.EMRG_YN||"N",HOLY_YN:Ee.HOLY_YN||"N",CRR_ID:Ee.CRR_ID||"01",WRKR_ID:Ee.WRKR_ID||Ct,REG_UID:Ee.REG_UID||Ct});if(He.code==="SUCCESS"||He.code==="OK")fe(!1),r==null||r("AS .   .","success");else throw new Error(He.message||"AS .")}catch(pt){r==null||r(pt.message||"AS   .","error",!0)}finally{ce(!1)}},jt=()=>{if(k)return;if(((M==null?void 0:M.removedEquipments)||[]).some(bt=>{var He;return bt.PROD_CMPS_CL==="23"||((He=bt.actualEquipment)==null?void 0:He.PROD_CMPS_CL)==="23"})){r==null||r("      .  .","error");return}const Ke=ds();if(Ke.length>0){if(Ke.forEach(bt=>r==null?void 0:r(bt,"error")),Ke.some(bt=>bt.includes(""))){const bt=document.getElementById("removal-line-section");bt&&(bt.scrollIntoView({behavior:"smooth",block:"center"}),bt.classList.add("ring-2","ring-red-500","ring-offset-2"),setTimeout(()=>{bt.classList.remove("ring-2","ring-red-500","ring-offset-2")},2e3))}return}const Ct=t.TERM_HOPE_DT||t.HOPE_DT||"";if(Ct&&St){const bt=Ct.replace(/-/g,"");St.replace(/-/g,"")<bt&&(r==null||r("  .","warning"))}pe(" ?"),Te(!0)},ue=async()=>{var Es,ys,Ps;console.log("[WorkCompleteRemovalTerminate]   ");const Ee=localStorage.getItem("userInfo"),pt=Ee?JSON.parse(Ee):{},Ke=pt.userId||"A20130708";let Ct="N";const bt=c||Lh(t.OP_LNKD_CD);if(console.log("[CompleteRelocateTerminate] FTTH :",{IS_CERTIFY_PROD:t.IS_CERTIFY_PROD,OP_LNKD_CD:t.OP_LNKD_CD,isFtth:bt}),bt)try{const xs=t.CTRT_ID||"",vs=await qm({CTRT_ID:xs,CUST_ID:((Es=t.customer)==null?void 0:Es.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:Ke,WRK_ID:t.id||""}),Ms=Array.isArray(vs)?vs[0]:vs;console.log("[CompleteRelocateTerminate] CL-08 result:",Ms,"ctrtId:",xs),Ms&&!Ms.ERROR&&Ms.CONT_ID===xs&&(Ct="Y",console.log("[CompleteRelocateTerminate] CERTIFY_TG=Y (IS_CERTIFY_PROD=1 + CL-08 confirmed)"))}catch(xs){console.log("[CompleteRelocateTerminate] CL-08 query failed:",xs)}if(Ct==="Y")try{const xs=(me==null?void 0:me.NEW_PROD_CD)||"",vs=(me==null?void 0:me.SO_ID)||t.SO_ID||"",Ms=Fe.some(Ls=>Ls.PROD_CD===xs),Ks=(await ka("CMIF006")).map(Ls=>Ls.code).includes(vs);if(console.log("[CompleteRelocateTerminate] CL-06  :",{certifyTg:Ct,newProdCd:xs,newSoId:vs,isNewProdCertify:Ms,isNewSoCertify:Ks}),!Ms||!Ks){console.log("[CompleteRelocateTerminate] FTTH CL-06    ");const Ls=await Sp({CTRT_ID:t.CTRT_ID||"",CUST_ID:((ys=t.customer)==null?void 0:ys.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:vs||t.SO_ID||"",REG_UID:Ke});if(Ls!=null&&Ls.ERROR){console.error("[CompleteRelocateTerminate] CL-06  :",Ls.ERROR),r==null||r(`  : ${Ls.ERROR}`,"error");return}console.log("[CompleteRelocateTerminate] CL-06    ")}else console.log("[CompleteRelocateTerminate]  /SO certify  CL-06 ")}catch(xs){console.error("[CompleteRelocateTerminate] CL-06  :",xs),r==null||r(`   : ${xs.message||"   "}`,"error");return}if(H&&H.REMOVE_GB==="4")try{console.log("[WorkCompleteRemovalTerminate]   API :",H);const xs=await vp({WRK_ID:t.id||"",REMOVE_LINE_TP:H.REMOVE_LINE_TP||"",REMOVE_GB:H.REMOVE_GB||"4",REMOVE_STAT:H.REMOVE_STAT||"",REG_UID:Ke});if(xs.code!=="SUCCESS"&&xs.code!=="OK"){r==null||r(xs.message||"   .","error",!0);return}console.log("[WorkCompleteRemovalTerminate]    ")}catch(xs){r==null||r(xs.message||"     .","error",!0);return}if(De&&ht&&_e){tt(!0);try{const xs=ht.SUS_HOPE_DD,vs=kt(_e),Ms=Xt(xs,vs),cs=await d5({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",SUS_HOPE_DD:xs,MMT_SUS_HOPE_DD:vs,SUS_DD_NUM:String(Ms),REG_UID:Ke});if(cs.code!=="SUCCESS"){r==null||r(cs.message||"  ","error",!0),tt(!1);return}console.log("[CompleteRemovalTerminate]   ")}catch(xs){r==null||r(xs.message||"  ","error",!0),tt(!1);return}tt(!1)}const He=(M==null?void 0:M.removedEquipments)||[],ct=(M==null?void 0:M.customerEquipments)||[],wt=(M==null?void 0:M.installedEquipments)||[],Bt=!!t.ISP_PROD_CD,Vt=t.CTRT_STAT||"";if(console.log("[CompleteRelocateTerminate]   :",{signalSent:Z,certifyTg:Ct,removedEquipments:He.length,customerEquipments:ct.length,installedEquipments:wt.length,hasIspProdForSignal:Bt,ctrtStat:Vt,ISP_PROD_CD:t.ISP_PROD_CD,CTRT_STAT:t.CTRT_STAT,shouldSendSignal:!Z&&Ct!=="Y"&&(He.length>0||ct.length>0||wt.length>0||Bt)&&Vt!=="20"}),!Z&&Ct!=="Y"&&(He.length>0||ct.length>0||wt.length>0||Bt)&&Vt!=="20"&&(r==null||r(" ...","info"),!await dt())){const vs=t.PROD_GRP||"",Ms=(te==null?void 0:te.message)||"";if(vs==="V"&&Ms.indexOf("PROC_VOIP_KCT-029")<0){r==null||r("VoIP   .","error",!0);return}if((t.MSO_OUT_YN||"")==="Y"){r==null||r("MSO      .  .","error");return}if(!window.confirm(` .
  ?`)){console.log("[CompleteRemovalTerminate]      ");return}console.log("[CompleteRemovalTerminate]      ")}const Jt=St.replace(/-/g,""),ss=xs=>{if(!xs||xs.length===0)return[];const vs=(M==null?void 0:M.removalStatus)||{},Ms=(cs,ms)=>cs==="1"||cs==="Y"||ms==="1"||ms==="Y"?"1":"0";return xs.map(cs=>{var Kt,Cs,Ht,Os;const ms=cs.EQT_NO||cs.id||((Kt=cs.actualEquipment)==null?void 0:Kt.id)||"",Ks=vs[ms]||vs[cs.id]||vs[cs.EQT_NO]||vs[(Cs=cs.actualEquipment)==null?void 0:Cs.id]||vs[cs.serialNumber]||{},Ls=R?"1":"0",nt={CRR_TSK_CL:"02",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||pt.crrId||"01",WRKR_ID:Ke,EQT_LOSS_YN:Ms(cs.EQT_LOSS_YN,Ks.EQT_LOSS_YN),PART_LOSS_BRK_YN:Ms(cs.PART_LOSS_BRK_YN,Ks.PART_LOSS_BRK_YN),EQT_BRK_YN:Ms(cs.EQT_BRK_YN,Ks.EQT_BRK_YN),EQT_CABL_LOSS_YN:Ms(cs.EQT_CABL_LOSS_YN,Ks.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Ms(cs.EQT_CRDL_LOSS_YN,Ks.EQT_CRDL_LOSS_YN),REUSE_YN:Ls};if(cs.actualEquipment){const es=cs.actualEquipment,Ds=cs.contractEquipment||{};return{...es,EQT_NO:es.id,EQT_SERNO:es.serialNumber,ITEM_MID_CD:es.itemMidCd,EQT_CL_CD:es.eqtClCd,MAC_ADDRESS:cs.macAddress||es.macAddress,WRK_ID:t.id,CUST_ID:(Ht=t.customer)==null?void 0:Ht.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:Ds.id||Ds.SVC_CMPS_ID||es.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:es.BASIC_PROD_CMPS_ID||Ds.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:es.EQT_PROD_CMPS_ID||Ds.id,PROD_CD:es.PROD_CD||Ds.PROD_CD||t.PROD_CD||"",SVC_CD:es.SVC_CD||Ds.SVC_CD||"",EQT_SALE_AMT:es.EQT_SALE_AMT||"0",MST_SO_ID:es.MST_SO_ID||t.SO_ID||"",SO_ID:es.SO_ID||t.SO_ID||"",REG_UID:Ke,OLD_LENT_YN:es.OLD_LENT_YN||"N",LENT:es.LENT||"10",ITLLMT_PRD:es.ITLLMT_PRD||"00",EQT_USE_STAT_CD:es.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:es.IF_DTL_ID||"",...nt}}return{...cs,EQT_NO:cs.EQT_NO||cs.id||"",EQT_SERNO:cs.EQT_SERNO||cs.serialNumber||"",ITEM_MID_CD:cs.ITEM_MID_CD||cs.itemMidCd||"",EQT_CL_CD:cs.EQT_CL_CD||cs.eqtClCd||"",MAC_ADDRESS:cs.MAC_ADDRESS||cs.macAddress||"",SVC_CMPS_ID:cs.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:cs.BASIC_PROD_CMPS_ID||"",PROD_CD:cs.PROD_CD||"",SVC_CD:cs.SVC_CD||"",WRK_ID:cs.WRK_ID||t.id,CUST_ID:cs.CUST_ID||((Os=t.customer)==null?void 0:Os.id),CTRT_ID:cs.CTRT_ID||t.CTRT_ID,WRK_CD:cs.WRK_CD||t.WRK_CD,REG_UID:Ke,...nt}})},Wt={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Ps=t.customer)==null?void 0:Ps.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||pt.crrId||"01",WRKR_ID:Ke,WRKR_CMPL_DT:Jt,MEMO:j||" ",STTL_YN:"Y",REG_UID:Ke,CUST_REL:G,CNFM_CUST_NM:P,CNFM_CUST_TELNO:ee,REQ_CUST_TEL_NO:ee,INSTL_LOC:"",UP_CTRL_CL:"",PSN_USE_CORP:"",VOIP_USE_CORP:"",DTV_USE_CORP:"",WRK_ACT_CL:"20",NET_CL:(T==null?void 0:T.NET_CL)||"",WRNG_TP:(T==null?void 0:T.WRNG_TP)||"",INSTL_TP:(T==null?void 0:T.INSTL_TP)||"77",CB_WRNG_TP:(T==null?void 0:T.CB_WRNG_TP)||"",CB_INSTL_TP:(T==null?void 0:T.CB_INSTL_TP)||"",INOUT_LINE_TP:(T==null?void 0:T.INOUT_LINE_TP)||"",INOUT_LEN:(T==null?void 0:T.INOUT_LEN)||"",DVDR_YN:(T==null?void 0:T.DVDR_YN)||"",BFR_LINE_YN:(T==null?void 0:T.BFR_LINE_YN)||"",CUT_YN:(T==null?void 0:T.CUT_YN)||"",TERM_NO:(T==null?void 0:T.TERM_NO)||"",RCV_STS:(T==null?void 0:T.RCV_STS)||"",SUBTAP_ID:(T==null?void 0:T.SUBTAP_ID)||"",PORT_NUM:(T==null?void 0:T.PORT_NUM)||"",EXTN_TP:(T==null?void 0:T.EXTN_TP)||"",TAB_LBL:(T==null?void 0:T.TAB_LBL)||"",CVT_LBL:(T==null?void 0:T.CVT_LBL)||"",STB_LBL:(T==null?void 0:T.STB_LBL)||"",KPI_PROD_GRP:"",OBS_RCPT_CD:"",OBS_RCPT_DTL_CD:"",VOIP_JOIN_CTRT_ID:"",AGREE_YN:"",ISP_YN:"",AGREE_GB:"",CUST_CLEAN_YN:"",EQT_RMV_FLAG:"",TV_TYPE:""},equipmentList:[],removeEquipmentList:ss((M==null?void 0:M.removedEquipments)||[]),spendItemList:(M==null?void 0:M.spendItems)||[],agreementList:(M==null?void 0:M.agreements)||[],poleList:(M==null?void 0:M.poleResults)||[]};L(Wt,{onSuccess:xs=>{xs.code==="SUCCESS"||xs.code==="OK"?(localStorage.removeItem(V()),t.WRK_STAT_CD="3",r==null||r("  .","success"),n()):r==null||r(xs.message||"   .","error",!0)},onError:xs=>{r==null||r(xs.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[k&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:se||"",readOnly:!0,disabled:!0,placeholder:"  ()",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>Y(!0),className:`px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${d?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:d?"":""})]}),!d&&!(T!=null&&T.NET_CL)&&s.jsx("p",{className:"mt-1 text-xs text-red-500",children:"*    ."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!d&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:G,onValueChange:W,options:at,placeholder:" ",required:!0,disabled:d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:j,onChange:Ee=>S(Ee.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${d?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:d,disabled:d}),!d&&s.jsxs("p",{className:`text-xs text-right mt-1 ${j.length>=500?"text-red-500":"text-gray-400"}`,children:[j.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:St,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),Se&&!d&&s.jsxs("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-semibold text-indigo-800",children:""}),At==="success"&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full",children:""}),At==="error"&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:""})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:Ns,disabled:Nt,className:"flex-1 px-3 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-1.5",children:[Nt?s.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.jsx("span",{children:""})]}),s.jsxs("button",{type:"button",onClick:ke,disabled:Nt,className:"flex-1 px-3 py-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsx("span",{children:""})]})]}),We&&s.jsx("p",{className:`mt-2 text-xs ${At==="error"?"text-red-600":At==="success"?"text-green-600":"text-gray-600"}`,children:We})]}),Et&&!d&&s.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-orange-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-sm font-medium text-orange-800",children:"LGHV STB .    STB   ."})]})}),s.jsx(bb,{custId:((Ce=t.customer)==null?void 0:Ce.id)||t.CUST_ID||"",rcptId:t.RCPT_ID||"",ctrtId:t.CTRT_ID||"",soId:t.SO_ID||"",termDt:t.TERM_DT||"",wrkCd:t.WRK_CD,showToast:r}),et()&&s.jsx(y5,{onComplete:Qt,onAssignAS:ut,showToast:r,disabled:d,savedData:H,onReset:()=>q(null)}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!d&&s.jsx("button",{onClick:jt,disabled:k,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${k?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:k?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>Q(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(hc,{isOpen:$,onClose:()=>Y(!1),onSave:Ss,workId:t.id,initialData:T,workType:t.WRK_CD,customerId:t.customer.id,customerName:t.customer.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(M==null?void 0:M.kpiProdGrpCd)||(M==null?void 0:M.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(M==null?void 0:M.prodChgGb)||(M==null?void 0:M.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(M==null?void 0:M.chgKpiProdGrpCd)||(M==null?void 0:M.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(M==null?void 0:M.prodGrp)||(M==null?void 0:M.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:d}),s.jsx(Ba,{isOpen:U,onClose:()=>Q(!1),ctrtId:t.CTRT_ID,custId:t.customer.id}),s.jsx(Nb,{isOpen:Re,onClose:()=>X(!1),moveWorkData:me,order:t}),s.jsx(b5,{isOpen:ae,onClose:()=>fe(!1),onSave:qt,removalLineData:H,custId:((Le=t.customer)==null?void 0:Le.id)||"",custNm:((Ie=t.customer)==null?void 0:Ie.name)||"",addrOrd:((Ze=t.customer)==null?void 0:Ze.ADDR_ORD)||"",address:t.address||"",showToast:r}),s.jsx(ul,{isOpen:be,onClose:()=>Te(!1),onConfirm:ue,title:" ",message:re,type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{equipmentData:M,installInfoData:T,custRel:G,custRelOptions:at,memo:j,order:t})})]})},M3=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:l=!1})=>{var te,je,be;const c=l||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[d,u]=_.useState(!1),{equipmentData:f,filteringData:m}=$i(),{certifyRegconfInfo:p}=Wa(),y=t.id||"",g=oa(y),N={...f||i||m||{},installedEquipments:g.installedEquipments.length>0?g.installedEquipments:(f==null?void 0:f.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:g.markedForRemoval.length>0?g.markedForRemoval:(f==null?void 0:f.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(g.removalStatus).length>0?g.removalStatus:(f==null?void 0:f.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:C,isPending:v}=od(),R=()=>`work_complete_draft_${t.id}`,[A,M]=_.useState(""),[L,k]=_.useState(""),[V,G]=_.useState(((te=t.customer)==null?void 0:te.name)||""),[W,j]=_.useState(((je=t.customer)==null?void 0:je.phone)||""),[S,P]=_.useState(!1),[F,ee]=_.useState(!1),[J,$]=_.useState(""),[Y,K]=_.useState(""),[w,se]=_.useState(void 0),[oe,T]=_.useState(!1),[I,U]=_.useState(""),Q=t.MVM_TP==="1"&&["1","2"].includes(t.WRK_STAT_CD||"")&&t.CTRT_ID,[H,q]=_.useState([]),[ae,fe]=_.useState(!1),[ge,ce]=_.useState([]),[Re,X]=_.useState(()=>{const Te=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Te&&Te.length>=8)return`${Te.slice(0,4)}-${Te.slice(4,6)}-${Te.slice(6,8)}`;const re=new Date;return re.getFullYear()+"-"+String(re.getMonth()+1).padStart(2,"0")+"-"+String(re.getDate()).padStart(2,"0")});_.useEffect(()=>{(async()=>{try{console.log("[WorkCompleteRemoval] getWorkReceiptDetail API ");const re=await ad({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(re)if(console.log("[WorkCompleteRemoval] API :",re),c)M(re.CUST_REL||""),k((re.WRK_PROC_CT||"").replace(/\\n/g,`
`)),$(re.NET_CL||""),K(re.NET_CL_NM||""),se({NET_CL:re.NET_CL||"",NET_CL_NM:re.NET_CL_NM||"",WRNG_TP:re.WRNG_TP||"",INSTL_TP:re.INSTL_TP||"",CB_WRNG_TP:re.CB_WRNG_TP||"",CB_INSTL_TP:re.CB_INSTL_TP||"",INOUT_LINE_TP:re.INOUT_LINE_TP||"",INOUT_LEN:re.INOUT_LEN||"",DVDR_YN:re.DVDR_YN||"",BFR_LINE_YN:re.BFR_LINE_YN||"",CUT_YN:re.CUT_YN||"",TERM_NO:re.TERM_NO||"",RCV_STS:re.RCV_STS||"",SUBTAP_ID:re.SUBTAP_ID||"",PORT_NUM:re.PORT_NUM||"",EXTN_TP:re.EXTN_TP||"",TAB_LBL:re.TAB_LBL||"",CVT_LBL:re.CVT_LBL||"",STB_LBL:re.STB_LBL||""}),k((re.WRK_PROC_CT||"").replace(/\\n/g,`
`)),re.WRKR_CMPL_DT&&re.WRKR_CMPL_DT.length>=8&&X(`${re.WRKR_CMPL_DT.slice(0,4)}-${re.WRKR_CMPL_DT.slice(4,6)}-${re.WRKR_CMPL_DT.slice(6,8)}`);else{const pe=localStorage.getItem(R());if(pe)try{const Se=JSON.parse(pe);Se.installInfoData&&Se.installInfoData.NET_CL?(console.log("[WorkCompleteRemoval] localStorage  "),M(Se.custRel||""),k(Se.memo||""),$(Se.networkType||""),K(Se.networkTypeName||""),se(Se.installInfoData)):(console.log("[WorkCompleteRemoval] API   "),$(re.NET_CL||""),K(re.NET_CL_NM||""),se({NET_CL:re.NET_CL||"",NET_CL_NM:re.NET_CL_NM||"",WRNG_TP:re.WRNG_TP||"",INSTL_TP:re.INSTL_TP||"",CB_WRNG_TP:re.CB_WRNG_TP||"",CB_INSTL_TP:re.CB_INSTL_TP||"",INOUT_LINE_TP:re.INOUT_LINE_TP||"",INOUT_LEN:re.INOUT_LEN||"",DVDR_YN:re.DVDR_YN||"",BFR_LINE_YN:re.BFR_LINE_YN||"",CUT_YN:re.CUT_YN||""}),M(Se.custRel||""),k(Se.memo||""))}catch(Se){console.error("[WorkCompleteRemoval] localStorage  :",Se),$(re.NET_CL||""),K(re.NET_CL_NM||""),se({NET_CL:re.NET_CL||"",NET_CL_NM:re.NET_CL_NM||"",WRNG_TP:re.WRNG_TP||"",INSTL_TP:re.INSTL_TP||"",CB_WRNG_TP:re.CB_WRNG_TP||"",CB_INSTL_TP:re.CB_INSTL_TP||"",INOUT_LINE_TP:re.INOUT_LINE_TP||"",INOUT_LEN:re.INOUT_LEN||"",DVDR_YN:re.DVDR_YN||"",BFR_LINE_YN:re.BFR_LINE_YN||"",CUT_YN:re.CUT_YN||""})}else console.log("[WorkCompleteRemoval] localStorage  - API   "),$(re.NET_CL||""),K(re.NET_CL_NM||""),se({NET_CL:re.NET_CL||"",NET_CL_NM:re.NET_CL_NM||"",WRNG_TP:re.WRNG_TP||"",INSTL_TP:re.INSTL_TP||"",CB_WRNG_TP:re.CB_WRNG_TP||"",CB_INSTL_TP:re.CB_INSTL_TP||"",INOUT_LINE_TP:re.INOUT_LINE_TP||"",INOUT_LEN:re.INOUT_LEN||"",DVDR_YN:re.DVDR_YN||"",BFR_LINE_YN:re.BFR_LINE_YN||"",CUT_YN:re.CUT_YN||""})}else{console.log("[WorkCompleteRemoval] API   - localStorage  ");const pe=localStorage.getItem(R());if(pe)try{const Se=JSON.parse(pe);M(Se.custRel||""),k(Se.memo||""),$(Se.networkType||""),K(Se.networkTypeName||""),se(Se.installInfoData)}catch(Se){console.error("[WorkCompleteRemoval] localStorage  :",Se)}}}catch(re){console.error("[WorkCompleteRemoval] API  :",re);const pe=localStorage.getItem(R());if(pe)try{const Se=JSON.parse(pe);M(Se.custRel||""),k(Se.memo||""),$(Se.networkType||""),K(Se.networkTypeName||""),se(Se.installInfoData)}catch(Se){console.error("[WorkCompleteRemoval] localStorage  :",Se)}}finally{u(!0)}})()},[t.id,c]),_.useEffect(()=>{if(!d||c)return;const Te={custRel:A,memo:L,networkType:J,networkTypeName:Y,installInfoData:w,savedAt:new Date().toISOString()};localStorage.setItem(R(),JSON.stringify(Te))},[A,L,J,Y,w,d,c]),_.useEffect(()=>{(async()=>{try{const re=await Jl(["CMCU005"]);re.CMCU005&&q(re.CMCU005.map(pe=>({value:pe.COMMON_CD,label:pe.COMMON_CD_NM})))}catch(re){console.error("[WorkCompleteRemoval]    :",re)}})()},[]),_.useEffect(()=>{(async()=>{try{const re=await mc(),pe=(re==null?void 0:re.output)||re||[];ce(pe);const Se=t.PROD_CD||t.PROD_CD||"",st=pe.some(Nt=>Nt.PROD_CD===Se);fe(st),console.log("[CompleteRemoval] LGHV :",{currentProdCd:Se,isLghv:st,prodListCount:pe.length})}catch(re){console.error("[CompleteRemoval] LGHV   :",re)}})()},[t.PROD_CD]);const me=()=>{const Te=[];(!V||V.trim()==="")&&Te.push(" ."),(!W||W.trim()==="")&&Te.push(" ."),(!A||A==="[]")&&Te.push("  ."),w!=null&&w.NET_CL||Te.push("  ."),w!=null&&w.WRNG_TP||Te.push("  ."),w!=null&&w.INSTL_TP||Te.push("  ."),Re||Te.push(" .");const re=t.PROD_GRP||"",pe=(N==null?void 0:N.removedEquipments)||[];return re!=="V"&&pe.length<1&&Te.push("  .   ."),Te},he=Te=>{se(Te),Te.NET_CL&&$(Te.NET_CL),Te.NET_CL_NM&&K(Te.NET_CL_NM),r==null||r("  .","success")},Z=()=>{var Nt,lt;if(v)return;if(((N==null?void 0:N.removedEquipments)||[]).some(At=>{var ot;return At.PROD_CMPS_CL==="23"||((ot=At.actualEquipment)==null?void 0:ot.PROD_CMPS_CL)==="23"})){r==null||r("      .  .","error");return}const pe=me();if(pe.length>0){pe.forEach(At=>r==null?void 0:r(At,"error"));return}const Se=t.TERM_HOPE_DT||t.HOPE_DT||"";if(Se&&Re){const At=Se.replace(/-/g,"");Re.replace(/-/g,"")<At&&(r==null||r("  .","warning"))}const st=((Nt=N==null?void 0:N.removedEquipments)==null?void 0:Nt.length)>0||((lt=N==null?void 0:N.installedEquipments)==null?void 0:lt.length)>0?` ?
(      .)`:" ?";U(st),T(!0)},ie=async()=>{var Et,Rt,$e,gt,Fe,rt,at,It;console.log("[WorkCompleteRemoval]   ");const Te=Re.replace(/-/g,""),re=localStorage.getItem("userInfo"),pe=re?JSON.parse(re):{},Se=pe.userId||"A20130708",st=t.WRK_DTL_TCD||"";if(st==="0910"||st==="0920"){const ht=st==="0910"?"SMR06":"SMR08";try{const Je=t.PROD_GRP||"",ve=t.VOIP_PROD_CD||"",Ge=Je==="V"&&ve&&t.CTRT_ID||"";let _e=t.PROD_CD||"",xe="";try{const Pe=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"09"}),Ye=Pe.find(tt=>tt.PROD_CMPS_CL==="11");Ye&&(_e=Ye.PROD_CD||_e);const mt=st==="0910"?"10":"80",de=Pe.filter(tt=>tt.BASIC_PROD_FL==="V"&&tt.PROD_STAT_CD===mt).map(tt=>tt.PROD_CD);de.length>0&&(xe=de.join(","))}catch(Pe){console.log("[CompleteRemoval] getProdPromotionInfo for buga signal failed:",Pe)}console.log(`[CompleteRemoval]  (${ht}) :`,{wrkDtlTcd:st,bugaProdCd:_e,subProdCd:xe,voipJoinCtrtId:Ge});const Ue=await la({MSG_ID:ht,CUST_ID:((Et=t.customer)==null?void 0:Et.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:"",PROD_CD:_e,WRK_ID:t.id||"",REG_UID:Se,SUB_PROD_CD:xe,VOIP_JOIN_CTRT_ID:Ge,WTIME:"99"});Ue.code!=="SUCCESS"&&Ue.code!=="OK"?console.log(`[CompleteRemoval]  (${ht})   ():`,Ue.message):console.log(`[CompleteRemoval]  (${ht})  `)}catch(Je){console.log("[CompleteRemoval]      (  ):",Je)}}const Nt=(N==null?void 0:N.removedEquipments)||[];let lt=!1,At=!1;if(Nt.length>0){for(const ht of Nt){const Je=ht.actualEquipment||ht,ve=Je.eqtClCd||Je.EQT_CL_CD||"";ve==="090901"||ve==="091001"||ve==="091005"||(lt=!0)}if(lt)try{const ht=Nt[0],Je=ht.actualEquipment||ht,ve=Je.PROD_CMPS_ID||ht.PROD_CMPS_ID||Je.EQT_PROD_CMPS_ID||ht.EQT_PROD_CMPS_ID||"",Ge=t.PROD_GRP||"",_e=t.VOIP_PROD_CD||"",xe=Ge==="V"&&_e&&t.CTRT_ID||"";console.log("[CompleteRemoval]  (SMR05) :",{eqtProdCmpsId:ve,voipJoinCtrtId:xe});const Ue=await la({MSG_ID:"SMR05",CUST_ID:((Rt=t.customer)==null?void 0:Rt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:ve,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Se,VOIP_JOIN_CTRT_ID:xe,WTIME:"3"});if(Ue.code!=="SUCCESS"&&Ue.code!=="OK"){if(((($e=Ue.O_IFSVC_RESULT)==null?void 0:$e.substring(14,20))||"")!=="029"&&((gt=Ue.message)==null?void 0:gt.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteRemoval]    -  :",Ue.message),r==null||r("   .","error",!0);return}}else console.log("[CompleteRemoval]  (SMR05)  ");At=!0}catch(ht){console.error("[CompleteRemoval]     :",ht),r==null||r("   .","error",!0);return}}if(!lt){const ht=(N==null?void 0:N.customerEquipments)||[],Je=(N==null?void 0:N.installedEquipments)||[],ve=!!t.ISP_PROD_CD;if(ht.length>0||Je.length>0||ve)try{const Ge=t.PROD_GRP||"",_e=t.VOIP_PROD_CD||"",xe=Ge==="V"&&_e&&t.CTRT_ID||"";console.log("[CompleteRemoval]  (SMR05) fallback - del_signal_flag=false, eqt/ISP exists");const Ue=await la({MSG_ID:"SMR05",CUST_ID:((Fe=t.customer)==null?void 0:Fe.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:"",PROD_CD:"",WRK_ID:t.id||"",REG_UID:Se,VOIP_JOIN_CTRT_ID:xe,WTIME:"3"});if(Ue.code!=="SUCCESS"&&Ue.code!=="OK"){if((((rt=Ue.O_IFSVC_RESULT)==null?void 0:rt.substring(14,20))||"")!=="029"&&((at=Ue.message)==null?void 0:at.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteRemoval]   fallback  -  :",Ue.message),r==null||r("   .","error",!0);return}}else console.log("[CompleteRemoval]  (SMR05) fallback ");At=!0}catch(Ge){console.error("[CompleteRemoval]   fallback :",Ge),r==null||r("   .","error",!0);return}}const ot=(ht,Je=!1)=>{if(!ht||ht.length===0)return[];const ve=(N==null?void 0:N.removalStatus)||{},Ge=(_e,xe)=>_e==="1"||_e==="Y"||xe==="1"||xe==="Y"?"1":"0";return ht.map(_e=>{var Ye,mt,de,tt;const xe=_e.EQT_NO||_e.id||((Ye=_e.actualEquipment)==null?void 0:Ye.id)||"",Ue=ve[xe]||ve[_e.id]||ve[_e.EQT_NO]||ve[(mt=_e.actualEquipment)==null?void 0:mt.id]||ve[_e.serialNumber]||{},Pe=Je?{CRR_TSK_CL:t.WRK_CD||"09",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||pe.crrId||"01",WRKR_ID:Se,EQT_LOSS_YN:Ge(_e.EQT_LOSS_YN,Ue.EQT_LOSS_YN),PART_LOSS_BRK_YN:Ge(_e.PART_LOSS_BRK_YN,Ue.PART_LOSS_BRK_YN),EQT_BRK_YN:Ge(_e.EQT_BRK_YN,Ue.EQT_BRK_YN),EQT_CABL_LOSS_YN:Ge(_e.EQT_CABL_LOSS_YN,Ue.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Ge(_e.EQT_CRDL_LOSS_YN,Ue.EQT_CRDL_LOSS_YN),REUSE_YN:_e.REUSE_YN==="1"||Ue.REUSE_YN==="1"?"1":"0"}:{};if(_e.actualEquipment){const De=_e.actualEquipment,it=_e.contractEquipment||{};return{...De,EQT_NO:De.id,EQT_SERNO:De.serialNumber,ITEM_MID_CD:De.itemMidCd,EQT_CL_CD:De.eqtClCd,MAC_ADDRESS:_e.macAddress||De.macAddress,WRK_ID:t.id,CUST_ID:(de=t.customer)==null?void 0:de.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:it.id||it.SVC_CMPS_ID||De.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:De.BASIC_PROD_CMPS_ID||it.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:De.EQT_PROD_CMPS_ID||it.id,PROD_CD:De.PROD_CD||it.PROD_CD||t.PROD_CD||"",SVC_CD:De.SVC_CD||it.SVC_CD||"",EQT_SALE_AMT:De.EQT_SALE_AMT||"0",MST_SO_ID:De.MST_SO_ID||t.SO_ID||"",SO_ID:De.SO_ID||t.SO_ID||"",REG_UID:Se,OLD_LENT_YN:De.OLD_LENT_YN||"N",LENT:De.LENT||"10",ITLLMT_PRD:De.ITLLMT_PRD||"00",EQT_USE_STAT_CD:De.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:De.IF_DTL_ID||"",...Pe}}return{..._e,EQT_NO:_e.EQT_NO||_e.id||"",EQT_SERNO:_e.EQT_SERNO||_e.serialNumber||"",ITEM_MID_CD:_e.ITEM_MID_CD||_e.itemMidCd||"",EQT_CL_CD:_e.EQT_CL_CD||_e.eqtClCd||"",MAC_ADDRESS:_e.MAC_ADDRESS||_e.macAddress||"",SVC_CMPS_ID:_e.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:_e.BASIC_PROD_CMPS_ID||"",PROD_CD:_e.PROD_CD||"",SVC_CD:_e.SVC_CD||"",WRK_ID:_e.WRK_ID||t.id,CUST_ID:_e.CUST_ID||((tt=t.customer)==null?void 0:tt.id),CTRT_ID:_e.CTRT_ID||t.CTRT_ID,WRK_CD:_e.WRK_CD||t.WRK_CD,REG_UID:Se,...Pe}})},We={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(It=t.customer)==null?void 0:It.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||pe.crrId||"01",WRKR_ID:Se,WRKR_CMPL_DT:Te,MEMO:L||" ",STTL_YN:"Y",REG_UID:Se,CUST_REL:A,CNFM_CUST_NM:V,CNFM_CUST_TELNO:W,REUSE_YN:S?"Y":"N",INSTL_LOC:t.INSTL_LOC||t.installLocation||"",UP_CTRL_CL:"",PSN_USE_CORP:"",VOIP_USE_CORP:"",DTV_USE_CORP:"",WRK_ACT_CL:"20",NET_CL:(w==null?void 0:w.NET_CL)||"",WRNG_TP:(w==null?void 0:w.WRNG_TP)||"",INSTL_TP:(w==null?void 0:w.INSTL_TP)||"",CB_WRNG_TP:(w==null?void 0:w.CB_WRNG_TP)||"",CB_INSTL_TP:(w==null?void 0:w.CB_INSTL_TP)||"",INOUT_LINE_TP:(w==null?void 0:w.INOUT_LINE_TP)||"",INOUT_LEN:(w==null?void 0:w.INOUT_LEN)||"",DVDR_YN:(w==null?void 0:w.DVDR_YN)||"",BFR_LINE_YN:(w==null?void 0:w.BFR_LINE_YN)||"",CUT_YN:(w==null?void 0:w.CUT_YN)||"",TERM_NO:(w==null?void 0:w.TERM_NO)||"",RCV_STS:(w==null?void 0:w.RCV_STS)||"",SUBTAP_ID:(w==null?void 0:w.SUBTAP_ID)||"",PORT_NUM:(w==null?void 0:w.PORT_NUM)||"",EXTN_TP:(w==null?void 0:w.EXTN_TP)||"",TAB_LBL:(w==null?void 0:w.TAB_LBL)||"",CVT_LBL:(w==null?void 0:w.CVT_LBL)||"",STB_LBL:(w==null?void 0:w.STB_LBL)||"",KPI_PROD_GRP:"",OBS_RCPT_CD:"",OBS_RCPT_DTL_CD:"",VOIP_JOIN_CTRT_ID:"",AGREE_YN:"",ISP_YN:"",AGREE_GB:"",CUST_CLEAN_YN:"",EQT_RMV_FLAG:"",TV_TYPE:""},equipmentList:ot((N==null?void 0:N.installedEquipments)||[],!1),removeEquipmentList:ot((N==null?void 0:N.removedEquipments)||[],!0),spendItemList:(N==null?void 0:N.spendItems)||[],agreementList:(N==null?void 0:N.agreements)||[],poleList:(N==null?void 0:N.poleResults)||[]},Dt=async()=>{var ht;try{const Je=(N==null?void 0:N.customerEquipments)||[],ve=(N==null?void 0:N.installedEquipments)||[],Ge=[...Je,...ve],_e=["090901","091001","091005"];let xe=!1;for(const ke of Ge){const dt=ke.actualEquipment||ke,et=dt.eqtClCd||dt.EQT_CL_CD||"";if(_e.includes(et))continue;(dt.EQT_KND||dt.eqtKnd||"WRKER")==="WRKER"&&(xe=!0)}if(!xe&&At&&(xe=!0),!xe){console.log("[CompleteRemoval] SMR03 skip - no WRKER equipment and no SMR05 sent");return}const Ue=t.PROD_GRP||"",Pe=t.VOIP_PROD_CD||"";let Ye=Ue==="V"?"SMR60":"SMR03";ae&&Ue!=="V"&&(Ye="STB_CHG");let mt=[];try{mt=await dl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"09"})}catch(ke){console.log("[CompleteRemoval] getProdPromotionInfo failed:",ke)}const de=mt.find(ke=>ke.PROD_CMPS_CL==="23"),tt=(de==null?void 0:de.PROD_CMPS_ID)||"",De=mt.find(ke=>ke.PROD_CMPS_CL==="11"),it=(De==null?void 0:De.PROD_CD)||"",St=(De==null?void 0:De.PROD_GRP)||Ue,Lt=mt.filter(ke=>ke.BASIC_PROD_FL==="V").map(ke=>ke.PROD_CD),Ve=Lt.length>0?Lt.join(","):"",kt=ke=>{var et,Qt;const dt=Ge.find(ut=>{var qt,jt;return(ut.ITEM_MID_CD||ut.itemMidCd||((qt=ut.actualEquipment)==null?void 0:qt.ITEM_MID_CD)||((jt=ut.actualEquipment)==null?void 0:jt.itemMidCd))===ke});return(dt==null?void 0:dt.EQT_NO)||(dt==null?void 0:dt.id)||((et=dt==null?void 0:dt.actualEquipment)==null?void 0:et.EQT_NO)||((Qt=dt==null?void 0:dt.actualEquipment)==null?void 0:Qt.id)||""};let Oe="";Pe?Oe=kt("08"):Oe=kt("05")||kt("01")||kt("03")||(St==="I"?kt("02"):"")||kt("08")||"";let Xt="";Pe?Xt=kt("02"):Xt=kt("04");const rs=kt("07"),ds=St==="C"?kt("02"):"";let Ss="";kt("10")&&St==="V"&&(Ss=kt("10")),t.ISP_PROD_CD&&(Ss=kt("21"));let Ns="";Ue==="V"&&Pe&&(Ns=t.CTRT_ID||""),console.log("[CompleteRemoval] SMR03 installation signal:",{msgId:Ye,eqtNo:Oe,eqtProdCmpsId:tt}),await la({MSG_ID:Ye,CUST_ID:((ht=t.customer)==null?void 0:ht.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:Oe,EQT_PROD_CMPS_ID:tt,PROD_CD:it,WRK_ID:t.id||"",REG_UID:Se,ETC_1:Xt,ETC_2:rs,ETC_3:ds,ETC_4:Ss,SUB_PROD_CD:Ve,VOIP_JOIN_CTRT_ID:Ns,WTIME:"3"}),console.log("[CompleteRemoval] SMR03 installation signal sent")}catch(Je){console.warn("[CompleteRemoval] SMR03 installation signal error (ignored):",Je)}};C(We,{onSuccess:ht=>{ht.code==="SUCCESS"||ht.code==="OK"?(localStorage.removeItem(R()),t.WRK_STAT_CD="3",Dt(),r==null||r("  .","success"),n()):r==null||r(ht.message||"   .","error",!0)},onError:ht=>{r==null||r(ht.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[v&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:Y||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>ee(!0),className:`px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${c?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:c?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:V,onChange:Te=>G(Te.target.value),placeholder:" ",className:`w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:c,disabled:c})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:W,onChange:Te=>j(Te.target.value),placeholder:" ",className:`w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:c,disabled:c})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:A,onValueChange:M,options:H,placeholder:" ",required:!0,disabled:c})]}),Q&&!c&&s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("input",{type:"checkbox",id:"reuseYn",checked:S,onChange:Te=>P(Te.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"reuseYn",className:"text-sm font-medium text-gray-700",children:" (    )"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:L,onChange:Te=>k(Te.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:c,disabled:c}),!c&&s.jsxs("p",{className:`text-xs text-right mt-1 ${L.length>=500?"text-red-500":"text-gray-400"}`,children:[L.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Re,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsx(bb,{custId:((be=t.customer)==null?void 0:be.id)||t.CUST_ID||"",rcptId:t.RCPT_ID||"",ctrtId:t.CTRT_ID||"",soId:t.SO_ID||"",termDt:t.TERM_DT||"",wrkCd:t.WRK_CD,showToast:r}),!c&&s.jsx("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:s.jsx("button",{onClick:Z,disabled:v,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${v?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:v?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})})})]})})}),s.jsx(hc,{isOpen:F,onClose:()=>ee(!1),onSave:he,workId:t.id,initialData:w,workType:t.WRK_CD,customerId:t.customer.id,customerName:t.customer.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(N==null?void 0:N.kpiProdGrpCd)||(N==null?void 0:N.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(N==null?void 0:N.prodChgGb)||(N==null?void 0:N.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(N==null?void 0:N.chgKpiProdGrpCd)||(N==null?void 0:N.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(N==null?void 0:N.prodGrp)||(N==null?void 0:N.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:c}),s.jsx(ul,{isOpen:oe,onClose:()=>T(!1),onConfirm:ie,title:" ",message:I,type:"confirm",confirmText:"",cancelText:"",children:s.jsx(ld,{equipmentData:N,installInfoData:w,custRel:A,custRelOptions:H,memo:L,order:t})})]})},L3=t=>{const{order:e}=t,[n,r]=_.useState(""),[i,l]=_.useState(!1);if(_.useEffect(()=>{(async()=>{try{const f=e.DTL_CTRT_ID||e.CTRT_ID||"";if(f){console.log("[CompleteLGUInstall] LDAP subscription check:",f,"(DTL_CTRT_ID:",e.DTL_CTRT_ID,", CTRT_ID:",e.CTRT_ID,")");const m=await gb(f),p=m.exists?"":"";r(p),console.log("[CompleteLGUInstall] LDAP result:",{exists:m.exists,reason:p})}}catch(f){console.log("[CompleteLGUInstall] LDAP check failed, using default:",f),r("")}l(!0)})()},[e.CTRT_ID]),!i)return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-sm text-gray-500",children:"LGU+    ..."})]})});const c={certifyMode:!0,certifyReason:n};switch(e.WRK_CD){case"06":return s.jsx(D5,{...t,...c});case"07":return s.jsx(R5,{...t,...c});default:return s.jsx(Ny,{...t,...c})}},w3=t=>{const{order:e}=t,n={certifyMode:!0};return e.WRK_CD==="08"?s.jsx(T5,{...t,...n}):s.jsx(N5,{...t,...n})},P3=t=>s.jsx(S5,{...t,certifyMode:!0}),A3=t=>s.jsx(v5,{...t,certifyMode:!0}),Rp=t=>{const{order:e,isCertifyProd:n}=t,r=e.WRK_CD;if(n)switch(r){case"01":case"06":case"07":return s.jsx(L3,{...t});case"02":case"08":return s.jsx(w3,{...t});case"03":return s.jsx(P3,{...t});case"05":return s.jsx(A3,{...t})}switch(r){case"01":return s.jsx(Ny,{...t});case"02":return s.jsx(N5,{...t});case"03":return s.jsx(S5,{...t});case"04":return s.jsx(O3,{...t});case"05":return s.jsx(v5,{...t});case"06":return s.jsx(D5,{...t});case"07":return s.jsx(R5,{...t});case"08":return s.jsx(T5,{...t});case"09":return s.jsx(M3,{...t});default:return console.warn(`[WorkCompleteRouter] Unknown WRK_CD: ${r}, using default form`),s.jsx(Ny,{...t})}},k3=t=>({"01":"","02":"","03":"A/S","04":"","05":"","06":"","07":"","08":"","09":""})[t]||"",U3=()=>Yc().startOf("month").format("YYYY-MM-DD"),W3=()=>Yc().endOf("month").format("YYYY-MM-DD"),Yl=e_()(t_(t=>({isDrawerOpen:!1,activeTab:"work-receipt",currentView:"today-work",workFilters:{startDate:U3(),endDate:W3(),filter:"",workTypeFilter:""},selectedWorkItem:null,selectedWorkDirection:null,fontScale:"medium",preferredNavApp:"kakao",showMapView:!1,openDrawer:()=>t({isDrawerOpen:!0}),closeDrawer:()=>t({isDrawerOpen:!1}),setActiveTab:e=>t({activeTab:e}),setCurrentView:e=>t({currentView:e,showMapView:!1}),setShowMapView:e=>t({showMapView:e}),setWorkFilters:e=>t({workFilters:e}),setSelectedWorkItem:e=>t({selectedWorkItem:e}),setSelectedWorkDirection:e=>t({selectedWorkDirection:e}),setFontScale:e=>t({fontScale:e}),setPreferredNavApp:e=>t({preferredNavApp:e})}),{name:"dlive-ui-storage",partialize:t=>({activeTab:t.activeTab,currentView:t.currentView,fontScale:t.fontScale,preferredNavApp:t.preferredNavApp,workFilters:{workTypeFilter:t.workFilters.workTypeFilter}}),merge:(t,e)=>{var u;const n=["","","",""],r=(u=t==null?void 0:t.workFilters)==null?void 0:u.workTypeFilter,i=["small","medium","large","xlarge"],l=t==null?void 0:t.fontScale,c=["kakao","tmap","naver"],d=t==null?void 0:t.preferredNavApp;return{...e,activeTab:(t==null?void 0:t.activeTab)??e.activeTab,currentView:(t==null?void 0:t.currentView)??e.currentView,fontScale:l&&i.includes(l)?l:"medium",preferredNavApp:d&&c.includes(d)?d:"kakao",workFilters:{...e.workFilters,workTypeFilter:r&&n.includes(r)?r:""}}}})),Sb=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),B3=({lat:t,lng:e,name:n})=>{const r=`kakaomap://route?ep=${t},${e}&by=car`,i=`https://map.kakao.com/link/to/${encodeURIComponent(n)},${t},${e}`;vb(r,i)},F3=({lat:t,lng:e,name:n})=>{const r=`tmap://route?goaly=${t}&goalx=${e}&goalname=${encodeURIComponent(n)}`,i=Sb()?"https://apps.apple.com/kr/app/tmap/id431589174":"market://details?id=com.skt.tmap.ku";vb(r,i)},K3=({lat:t,lng:e,name:n})=>{const r=`nmap://navigation?dlat=${t}&dlng=${e}&dname=${encodeURIComponent(n)}&appname=com.dlive.cona`,i=Sb()?"https://apps.apple.com/kr/app/naver-map/id311867728":"market://details?id=com.nhn.android.nmap";vb(r,i)};function vb(t,e){const n=/Android/i.test(navigator.userAgent);if(Sb()||n){if(n&&t.startsWith("kakaomap://")){window.location.href=`intent://route?ep=${t.split("ep=")[1]}#Intent;scheme=kakaomap;package=net.daum.android.map;S.browser_fallback_url=${encodeURIComponent(e)};end`;return}if(n&&t.startsWith("tmap://")){window.location.href=`intent://${t.replace("tmap://","")}#Intent;scheme=tmap;package=com.skt.tmap.ku;S.browser_fallback_url=${encodeURIComponent(e)};end`;return}if(n&&t.startsWith("nmap://")){window.location.href=`intent://${t.replace("nmap://","")}#Intent;scheme=nmap;package=com.nhn.android.nmap;S.browser_fallback_url=${encodeURIComponent(e)};end`;return}window.location.href=t,setTimeout(()=>{document.hidden||(window.location.href=e)},2e3)}else window.open(e,"_blank")}const E5=(t,e)=>{switch(t){case"kakao":B3(e);break;case"tmap":F3(e);break;case"naver":K3(e);break}};function Q3(){return new Promise(t=>{var r,i,l;if((i=(r=window.kakao)==null?void 0:r.maps)!=null&&i.services){t(!0);return}if((l=window.kakao)!=null&&l.maps){window.kakao.maps.load(()=>t(!!window.kakao.maps.services));return}let e=0;const n=setInterval(()=>{var c;if(e++,(c=window.kakao)!=null&&c.maps){if(clearInterval(n),window.kakao.maps.services){t(!0);return}window.kakao.maps.load(()=>t(!!window.kakao.maps.services))}else if(e>25){clearInterval(n);const d=document.createElement("script");d.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=60a7bd1a64feb3d63955a9165bb4bc79&libraries=services&autoload=false",d.onload=()=>{var u;(u=window.kakao)!=null&&u.maps?window.kakao.maps.load(()=>t(!!window.kakao.maps.services)):t(!1)},d.onerror=()=>t(!1),document.head.appendChild(d)}},200)})}function G3(t){return new Promise(e=>{var i;const n=window.kakao;if(!((i=n==null?void 0:n.maps)!=null&&i.services)){e(null);return}const r=new n.maps.services.Geocoder;r.addressSearch(t,(l,c)=>{if(c===n.maps.services.Status.OK&&l[0])e({lat:parseFloat(l[0].y),lng:parseFloat(l[0].x)});else{const d=t.replace(/\(.*?\)/g,"").replace(/\d+[]/g,"").replace(/\s{2,}/g," ").trim();d!==t?r.addressSearch(d,(u,f)=>{f===n.maps.services.Status.OK&&u[0]?e({lat:parseFloat(u[0].y),lng:parseFloat(u[0].x)}):e(null)}):e(null)}})})}async function Y3(t,e){if(!await Q3())return!1;const r=await G3(t);return r?(E5(e,{lat:r.lat,lng:r.lng,name:t}),!0):!1}const V3=t=>t===""||t===""?"bg-blue-50 text-blue-700":t===""?"bg-green-50 text-green-700":t===""?"bg-red-50 text-red-700":"bg-gray-50 text-gray-700",$3=t=>{switch(t){case"D":return"bg-purple-100 text-purple-700 border-purple-200";case"I":return"bg-blue-100 text-blue-700 border-blue-200";case"V":return"bg-green-100 text-green-700 border-green-200";case"C":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-gray-100 text-gray-600 border-gray-200"}},H3=({item:t,onSelect:e,onComplete:n,onCancel:r,index:i})=>{const[l,c]=_.useState(!1),d=Yl(N=>N.preferredNavApp),u=t.WRK_STAT_CD_NM||t.status||"",f=u===""||u===""||u===hn.Pending,m=t.ADDR||t.address||"",p=t.PROD_GRP||t.KPI_PROD_GRP_CD,y=async N=>{if(N.stopPropagation(),!(!m||l)){c(!0);try{await Y3(m,d)||alert("   .")}catch{alert("  .")}finally{c(!1)}}},g=(N,C)=>{N.stopPropagation(),C==="complete"?n(t):C==="cancel"&&r(t)};return s.jsx("div",{onClick:()=>e(t),className:`bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-md overflow-hidden cursor-pointer transition-all duration-200 active:scale-[0.98] ${f?"":"opacity-60"}`,style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i!==void 0&&s.jsx("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center rounded-full bg-blue-500 text-white text-xs font-bold",children:i}),s.jsx("span",{className:`flex-shrink-0 px-2 py-1 text-xs font-semibold rounded-md ${V3(u)} whitespace-nowrap`,children:u})]}),s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[p&&s.jsx("span",{className:`px-1.5 py-0.5 text-[0.625rem] font-bold rounded border ${$3(p)}`,children:p}),s.jsx("span",{className:"text-xs font-medium text-gray-900 truncate",children:t.WRK_DTL_TCD_NM||t.WRK_CD_NM||t.typeDisplay||"-"})]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs font-medium text-gray-900 truncate",children:t.PROD_NM||"-"})]})]}),f&&s.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-100",children:[s.jsx("button",{onClick:N=>g(N,"complete"),className:"flex-1 py-2 rounded-md bg-blue-500 hover:bg-blue-600 text-white text-xs font-semibold transition-colors",children:""}),s.jsx("button",{onClick:N=>g(N,"cancel"),className:"flex-1 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs font-semibold transition-colors",children:""}),s.jsx("button",{onClick:y,disabled:!m||l,className:`flex-shrink-0 w-10 py-2 rounded-md flex items-center justify-center transition-colors ${m?"bg-orange-500 hover:bg-orange-600 text-white shadow-sm shadow-orange-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:"",children:l?s.jsx(jn,{className:"w-4 h-4 animate-spin"}):s.jsx(rd,{className:"w-5 h-5",fill:"currentColor"})})]})]})})},z0=({size:t="medium",color:e="cyan",message:n,fullScreen:r=!1,className:i=""})=>{const l={small:"h-4 w-4 border-2",medium:"h-8 w-8 border-2",large:"h-12 w-12 border-3"},c={blue:"border-blue-500 border-t-transparent",cyan:"border-cyan-500 border-t-transparent",gray:"border-gray-500 border-t-transparent",white:"border-white border-t-transparent"},d={small:"text-xs",medium:"text-sm",large:"text-base"},u=s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 sm:gap-3",children:[s.jsx("div",{className:`
          ${l[t]}
          ${c[e]}
          rounded-full animate-spin
        `}),n&&s.jsx("p",{className:`${d[t]} text-gray-600 text-center`,children:n})]});return r?s.jsx("div",{className:`fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50 ${i}`,children:u}):s.jsx("div",{className:`flex items-center justify-center p-8 ${i}`,children:u})},Db=({type:t="error",message:e,onRetry:n,onClose:r,className:i=""})=>{const c={error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",iconBg:"bg-red-100",iconColor:"text-red-500",buttonBg:"bg-red-500 hover:bg-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",iconBg:"bg-yellow-100",iconColor:"text-yellow-500",buttonBg:"bg-yellow-500 hover:bg-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",iconBg:"bg-blue-100",iconColor:"text-blue-500",buttonBg:"bg-blue-500 hover:bg-blue-600"}}[t],d=()=>{switch(t){case"error":return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return s.jsx("div",{className:`
        ${c.bg}
        ${c.border}
        border rounded-lg p-4
        ${i}
      `,children:s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[s.jsx("div",{className:`${c.iconBg} ${c.iconColor} rounded-full p-2 flex-shrink-0`,children:d()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`${c.text} text-sm font-medium`,children:e}),n&&s.jsxs("button",{onClick:n,className:`
                mt-3
                ${c.buttonBg}
                text-white
                px-4 py-2
                rounded-lg
                text-sm
                font-medium
                transition-colors
                duration-200
                flex
                items-center
                gap-2
              `,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})," "]})]}),r&&s.jsx("button",{onClick:r,className:`${c.text} hover:opacity-70 transition-opacity flex-shrink-0`,"aria-label":"",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},j5=({direction:t,onBack:e,onNavigateToView:n,userId:r,showToast:i})=>{var j;const[l,c]=_.useState([]),[d,u]=_.useState(null),[f,m]=_.useState(null),[p,y]=_.useState(!1),[g,N]=_.useState(null),[C,v]=_.useState(!1),[R,A]=_.useState(null),M=$i(S=>S.clearPreviousWorkDraft),L=ji(S=>S.clearAllWorkStates);_.useEffect(()=>{(async()=>{var P;try{v(!0),A(null),console.log("WorkItemList - direction  :",t),console.log("WorkItemList - direction.id:",t.id),console.log("API   - WRK_DRCTN_ID:",t.id);const ee=(await yy(t.id)).sort((J,$)=>{const Y=oe=>oe===""||oe===""?1:oe===""?2:3,K=Y(J.WRK_STAT_CD_NM)-Y($.WRK_STAT_CD_NM);if(K!==0)return K;const w=oe=>{const T=oe.WRK_CD,I=oe.WRK_DTL_TCD;return T==="02"||T==="08"||I==="0430"},se=oe=>{const T=oe.PROD_GRP||"";if(w(oe)){if(T==="I")return 1;if(T==="D")return 2;if(T==="V")return 3}else{if(T==="V")return 1;if(T==="D")return 2;if(T==="I")return 3}return 4};return se(J)-se($)});if(ee.length===0){console.log("[WorkItemList]   -    WorkItem ");const J=t,$=K=>K===""?"4":K===""?"3":"2",Y={id:t.id,directionId:t.id,type:t.type,typeDisplay:t.typeDisplay,status:t.status===""?"":t.status===""?"":"",scheduledAt:t.scheduledAt,customer:{...t.customer},details:t.details||"",assignedEquipment:[],WRK_CD:J.WRK_CD,WRK_CD_NM:J.WRK_CD_NM,WRK_DTL_TCD:J.WRK_DTL_TCD,WRK_STAT_CD:J.MIN_WRK_STAT_CD||J.WRK_STAT_CD||$(t.status),WRK_STAT_NM:J.WRK_STAT_NM||t.status,WRK_DRCTN_ID:t.id,CTRT_ID:J.CTRT_ID,PROD_NM:J.PROD_NM,PROD_CD:J.PROD_CD,PROD_GRP:J.PROD_GRP,PROD_GRP_NM:J.PROD_GRP_NM,productName:J.PROD_NM,SO_ID:J.SO_ID,SO_NM:J.SO_NM,MST_SO_ID:J.MST_SO_ID,CRR_ID:J.CRR_ID,CRR_NM:J.CRR_NM,CUST_ID:J.CUST_ID||((P=t.customer)==null?void 0:P.id),VIP_GB:J.VIP_GB||"",OST_WORKABLE_STAT:J.OST_WORKABLE_STAT,installLocation:J.installLocation||J.INSTL_LOC,CTRT_STAT:J.CTRT_STAT,CTRT_STAT_NM:J.CTRT_STAT_NM};ee.push(Y)}c(ee),console.log("Work items loaded - :",ee.length),console.log("Work items :",ee)}catch(F){console.error("   :",F),F instanceof Fs||F instanceof Error?(A(F.message),i&&i(F.message,"error",!0)):(A("   ."),i&&i("   .","error",!0)),c([])}finally{v(!1)}})()},[t.id,i]);const k=S=>{var J,$,Y,K,w,se,oe;console.log("  :",S),console.log("  ID:",S.WRK_ID||S.id),console.log("  :",{WRK_ID:S.WRK_ID,WRK_CD_NM:S.WRK_CD_NM,CUST_NM:S.CUST_NM,PROD_NM:S.PROD_NM});const P=S.WRK_ID||S.id;M(P),Wa.getState().reset(),L(),console.log("[] REQ_CTX :",S.REQ_CTX),console.log("[] REQ_CTX JSON:",JSON.stringify(S.REQ_CTX)),console.log("[VIP ] item.VIP_GB:",S.VIP_GB,"| direction.VIP_GB:",t.VIP_GB,"| direction.customer.isVip:",(J=t.customer)==null?void 0:J.isVip);let F=S.PROD_NM;if(S.WRK_DTL_TCD==="0520"||S.WRK_DTL_TCD==="0560"){const T=S.WRK_DTL_TCD==="0520"?"0510":"0550",I=l.find(U=>U.WRK_DTL_TCD===T&&U.PROD_GRP===S.PROD_GRP);I&&(F=I.PROD_NM)}const ee={id:S.WRK_ID||S.id,directionId:S.WRK_DRCTN_ID||S.directionId,type:S.WRK_CD_NM==="A/S"?"A/S":"Installation",typeDisplay:S.WRK_CD_NM||S.typeDisplay||"",status:S.WRK_STAT_CD==="3"?"":S.WRK_STAT_CD==="4"||S.WRK_STAT_CD==="7"?"":S.WRK_STAT_CD==="1"||S.WRK_STAT_CD==="2"?"":S.WRK_STAT_CD_NM||S.status||"",scheduledAt:S.WRK_HOPE_DTTM?`${S.WRK_HOPE_DTTM.slice(0,4)}-${S.WRK_HOPE_DTTM.slice(4,6)}-${S.WRK_HOPE_DTTM.slice(6,8)}T${S.WRK_HOPE_DTTM.slice(8,10)}:${S.WRK_HOPE_DTTM.slice(10,12)}:00`:S.scheduledAt||new Date().toISOString(),customer:{id:S.CUST_ID||(($=S.customer)==null?void 0:$.id)||"",name:S.CUST_NM||((Y=S.customer)==null?void 0:Y.name)||" ",phone:S.REQ_CUST_TEL_NO||((K=S.customer)==null?void 0:K.phone),address:S.ADDR||((w=S.customer)==null?void 0:w.address)||"  ",isVip:!!(S.VIP_GB&&String(S.VIP_GB).length>0)||((se=t.customer)==null?void 0:se.isVip)||!1,vipLevel:S.VIP_GB==="VIP_VVIP"?"VVIP":S.VIP_GB?"VIP":(oe=t.customer)==null?void 0:oe.vipLevel},details:S.REQ_CTX||"",assignedEquipment:S.assignedEquipment||[],WRK_CD:S.WRK_CD,WRK_DTL_TCD:S.WRK_DTL_TCD,WRK_STAT_CD:S.WRK_STAT_CD,WRK_STAT_NM:S.WRK_STAT_CD_NM||S.WRK_STAT_NM,WRK_DRCTN_ID:S.WRK_DRCTN_ID,CTRT_ID:S.CTRT_ID,DTL_CTRT_ID:S.DTL_CTRT_ID,RCPT_ID:S.RCPT_ID,productName:S.PROD_NM,PROD_NM:S.PROD_NM,OLD_PROD_CD:S.OLD_PROD_CD,OLD_PROD_NM:S.OLD_PROD_NM,OLD_CTRT_ID:S.OLD_CTRT_ID,OLD_CTRT_STAT:S.OLD_CTRT_STAT,OLD_CTRT_STAT_NM:S.OLD_CTRT_STAT_NM,OLD_PROM_CNT:S.OLD_PROM_CNT,currentProduct:S.OLD_PROD_NM||S.OLD_PROD_CD,newProduct:F,installLocation:S.INSTL_LOC,MST_SO_ID:S.MST_SO_ID,SO_ID:S.SO_ID,PROD_CD:S.PROD_CD,ADDR_ORD:S.ADDR_ORD,CRR_ID:S.CRR_ID,BLD_ID:S.BLD_ID,CUST_ID:S.CUST_ID,WRKR_ID:S.WRKR_ID,CTRT_STAT:S.CTRT_STAT,CTRT_STAT_NM:S.CTRT_STAT_NM,SO_NM:S.SO_NM,MSO_NM:S.MSO_NM,PYM_MTHD:S.PYM_MTHD,PYM_ACNT_ID:S.PYM_ACNT_ID,APLYMONTH:S.APLYMONTH,PROM_CNT:S.PROM_CNT,CTRT_APLY_STRT_DT:S.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:S.CTRT_APLY_END_DT,VOIP_TEL_NO:S.VOIP_TEL_NO,GRP_ID:S.GRP_ID,GRP_NM:S.GRP_NM,CRR_NM:S.CRR_NM,PROD_GRP:S.PROD_GRP,PROD_GRP_NM:S.PROD_GRP_NM,WRKR_NM:S.WRKR_NM,ACNT_PYM_MTHD:S.ACNT_PYM_MTHD,KPI_PROD_GRP_CD:S.KPI_PROD_GRP_CD,PROD_CHG_GB:S.PROD_CHG_GB,CHG_KPI_PROD_GRP_CD:S.CHG_KPI_PROD_GRP_CD,VOIP_CTX:S.VOIP_CTX,VIP_GB:S.VIP_GB||t.VIP_GB||"",IS_CERTIFY_PROD:S.IS_CERTIFY_PROD,OP_LNKD_CD:S.OP_LNKD_CD,VOIP_PROD_CD:S.VOIP_PROD_CD,ISP_PROD_CD:S.ISP_PROD_CD,WRKR_CMPL_DT:S.WRKR_CMPL_DT,WRK_END_DTTM:S.WRK_END_DTTM,NET_CL:S.NET_CL,NET_CL_NM:S.NET_CL_NM,WRNG_TP:S.WRNG_TP,WRNG_TP_NM:S.WRNG_TP_NM,INSTL_TP:S.INSTL_TP,INSTL_TP_NM:S.INSTL_TP_NM,CB_WRNG_TP:S.CB_WRNG_TP,CB_INSTL_TP:S.CB_INSTL_TP,INOUT_LINE_TP:S.INOUT_LINE_TP,INOUT_LEN:S.INOUT_LEN,DVDR_YN:S.DVDR_YN,BFR_LINE_YN:S.BFR_LINE_YN,CUT_YN:S.CUT_YN,TERM_NO:S.TERM_NO,RCV_STS:S.RCV_STS,SUBTAP_ID:S.SUBTAP_ID,PORT_NUM:S.PORT_NUM,EXTN_TP:S.EXTN_TP,TAB_LBL:S.TAB_LBL,CVT_LBL:S.CVT_LBL,STB_LBL:S.STB_LBL,CUST_REL:S.CUST_REL,UP_CTRL_CL:S.UP_CTRL_CL,PSN_USE_CORP:S.PSN_USE_CORP,VOIP_USE_CORP:S.VOIP_USE_CORP,DTV_USE_CORP:S.DTV_USE_CORP,VIEW_MOD_CD:S.VIEW_MOD_CD,VIEW_MOD_NM:S.VIEW_MOD_NM,MEMO:S.MEMO,TERM_HOPE_DT:S.TERM_HOPE_DT,HOPE_DT:S.HOPE_DT,asReasonCode:S.WRK_RCPT_CL,asDetailCode:S.WRK_RCPT_CL_DTL,OST_WORKABLE_STAT:S.OST_WORKABLE_STAT,WRK_HOPE_DTTM:S.WRK_HOPE_DTTM};console.log("[WorkItemList] handleSelectItem - OST_WORKABLE_STAT:",S.OST_WORKABLE_STAT,"| WRK_CD:",S.WRK_CD),console.log("  :",ee),n?n("work-process-flow",ee):u(ee)},V=S=>{var J,$,Y,K,w,se;console.log("   -  :",S);const P=S.WRK_ID||S.id;M(P),Wa.getState().reset();let F=S.PROD_NM;if(S.WRK_DTL_TCD==="0520"||S.WRK_DTL_TCD==="0560"){const oe=S.WRK_DTL_TCD==="0520"?"0510":"0550",T=l.find(I=>I.WRK_DTL_TCD===oe&&I.PROD_GRP===S.PROD_GRP);T&&(F=T.PROD_NM)}const ee={id:S.WRK_ID||S.id,directionId:S.WRK_DRCTN_ID||S.directionId,type:S.WRK_CD_NM==="A/S"?"A/S":"Installation",typeDisplay:S.WRK_CD_NM||S.typeDisplay||"",status:S.WRK_STAT_CD==="3"?"":S.WRK_STAT_CD==="4"||S.WRK_STAT_CD==="7"?"":S.WRK_STAT_CD==="1"||S.WRK_STAT_CD==="2"?"":S.WRK_STAT_CD_NM||S.status||"",scheduledAt:S.WRK_HOPE_DTTM?`${S.WRK_HOPE_DTTM.slice(0,4)}-${S.WRK_HOPE_DTTM.slice(4,6)}-${S.WRK_HOPE_DTTM.slice(6,8)}T${S.WRK_HOPE_DTTM.slice(8,10)}:${S.WRK_HOPE_DTTM.slice(10,12)}:00`:S.scheduledAt||new Date().toISOString(),customer:{id:S.CUST_ID||((J=S.customer)==null?void 0:J.id)||"",name:S.CUST_NM||(($=S.customer)==null?void 0:$.name)||" ",phone:S.REQ_CUST_TEL_NO||((Y=S.customer)==null?void 0:Y.phone),address:S.ADDR||((K=S.customer)==null?void 0:K.address)||"  ",isVip:!!(S.VIP_GB&&String(S.VIP_GB).length>0)||((w=t.customer)==null?void 0:w.isVip)||!1,vipLevel:S.VIP_GB==="VIP_VVIP"?"VVIP":S.VIP_GB?"VIP":(se=t.customer)==null?void 0:se.vipLevel},details:S.REQ_CTX||"",assignedEquipment:S.assignedEquipment||[],WRK_CD:S.WRK_CD,WRK_DTL_TCD:S.WRK_DTL_TCD,WRK_STAT_CD:S.WRK_STAT_CD,WRK_STAT_NM:S.WRK_STAT_CD_NM||S.WRK_STAT_NM,WRK_DRCTN_ID:S.WRK_DRCTN_ID,CTRT_ID:S.CTRT_ID,DTL_CTRT_ID:S.DTL_CTRT_ID,RCPT_ID:S.RCPT_ID,productName:S.PROD_NM,PROD_NM:S.PROD_NM,OLD_PROD_CD:S.OLD_PROD_CD,OLD_PROD_NM:S.OLD_PROD_NM,OLD_CTRT_ID:S.OLD_CTRT_ID,OLD_CTRT_STAT:S.OLD_CTRT_STAT,OLD_CTRT_STAT_NM:S.OLD_CTRT_STAT_NM,OLD_PROM_CNT:S.OLD_PROM_CNT,currentProduct:S.OLD_PROD_NM||S.OLD_PROD_CD,newProduct:F,installLocation:S.INSTL_LOC,MST_SO_ID:S.MST_SO_ID,SO_ID:S.SO_ID,PROD_CD:S.PROD_CD,ADDR_ORD:S.ADDR_ORD,CRR_ID:S.CRR_ID,BLD_ID:S.BLD_ID,CUST_ID:S.CUST_ID,WRKR_ID:S.WRKR_ID,CTRT_STAT:S.CTRT_STAT,CTRT_STAT_NM:S.CTRT_STAT_NM,SO_NM:S.SO_NM,MSO_NM:S.MSO_NM,PYM_MTHD:S.PYM_MTHD,PYM_ACNT_ID:S.PYM_ACNT_ID,APLYMONTH:S.APLYMONTH,PROM_CNT:S.PROM_CNT,CTRT_APLY_STRT_DT:S.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:S.CTRT_APLY_END_DT,VOIP_TEL_NO:S.VOIP_TEL_NO,GRP_ID:S.GRP_ID,GRP_NM:S.GRP_NM,CRR_NM:S.CRR_NM,PROD_GRP:S.PROD_GRP,PROD_GRP_NM:S.PROD_GRP_NM,WRKR_NM:S.WRKR_NM,ACNT_PYM_MTHD:S.ACNT_PYM_MTHD,KPI_PROD_GRP_CD:S.KPI_PROD_GRP_CD,PROD_CHG_GB:S.PROD_CHG_GB,CHG_KPI_PROD_GRP_CD:S.CHG_KPI_PROD_GRP_CD,VOIP_CTX:S.VOIP_CTX,VIP_GB:S.VIP_GB||t.VIP_GB||"",IS_CERTIFY_PROD:S.IS_CERTIFY_PROD,OP_LNKD_CD:S.OP_LNKD_CD,VOIP_PROD_CD:S.VOIP_PROD_CD,ISP_PROD_CD:S.ISP_PROD_CD,WRKR_CMPL_DT:S.WRKR_CMPL_DT,WRK_END_DTTM:S.WRK_END_DTTM,NET_CL:S.NET_CL,NET_CL_NM:S.NET_CL_NM,WRNG_TP:S.WRNG_TP,WRNG_TP_NM:S.WRNG_TP_NM,INSTL_TP:S.INSTL_TP,INSTL_TP_NM:S.INSTL_TP_NM,CB_WRNG_TP:S.CB_WRNG_TP,CB_INSTL_TP:S.CB_INSTL_TP,INOUT_LINE_TP:S.INOUT_LINE_TP,INOUT_LEN:S.INOUT_LEN,DVDR_YN:S.DVDR_YN,BFR_LINE_YN:S.BFR_LINE_YN,CUT_YN:S.CUT_YN,TERM_NO:S.TERM_NO,RCV_STS:S.RCV_STS,SUBTAP_ID:S.SUBTAP_ID,PORT_NUM:S.PORT_NUM,EXTN_TP:S.EXTN_TP,TAB_LBL:S.TAB_LBL,CVT_LBL:S.CVT_LBL,STB_LBL:S.STB_LBL,CUST_REL:S.CUST_REL,UP_CTRL_CL:S.UP_CTRL_CL,PSN_USE_CORP:S.PSN_USE_CORP,VOIP_USE_CORP:S.VOIP_USE_CORP,DTV_USE_CORP:S.DTV_USE_CORP,VIEW_MOD_CD:S.VIEW_MOD_CD,VIEW_MOD_NM:S.VIEW_MOD_NM,MEMO:S.MEMO,TERM_HOPE_DT:S.TERM_HOPE_DT,HOPE_DT:S.HOPE_DT,asReasonCode:S.WRK_RCPT_CL,asDetailCode:S.WRK_RCPT_CL_DTL,OST_WORKABLE_STAT:S.OST_WORKABLE_STAT,WRK_HOPE_DTTM:S.WRK_HOPE_DTTM};console.log("[WorkItemList] handleCompleteWork - OST_WORKABLE_STAT:",S.OST_WORKABLE_STAT,"| WRK_CD:",S.WRK_CD),console.log(" -   :",ee),n?n("work-process-flow",ee):u(ee)},G=S=>{var F,ee;if(console.log("   -  :",S),S.WRK_CD==="08"&&l.find($=>$.WRK_CD==="07"&&$.CTRT_ID===S.CTRT_ID&&($.WRK_STAT_CD==="4"||$.WRK_STAT_CD==="7"))){i&&i("      .","error");return}const P={id:S.WRK_ID||S.id,directionId:S.WRK_DRCTN_ID||S.directionId,type:S.WRK_CD_NM==="A/S"?"A/S":"Installation",typeDisplay:S.WRK_CD_NM||S.typeDisplay||"",status:S.WRK_STAT_CD==="3"?"":S.WRK_STAT_CD==="4"||S.WRK_STAT_CD==="7"?"":S.WRK_STAT_CD==="1"||S.WRK_STAT_CD==="2"?"":S.WRK_STAT_CD_NM||"",scheduledAt:S.WRK_HOPE_DTTM?`${S.WRK_HOPE_DTTM.slice(0,4)}-${S.WRK_HOPE_DTTM.slice(4,6)}-${S.WRK_HOPE_DTTM.slice(6,8)}T${S.WRK_HOPE_DTTM.slice(8,10)}:${S.WRK_HOPE_DTTM.slice(10,12)}:00`:new Date().toISOString(),customer:{id:S.CUST_ID||"",name:S.CUST_NM||" ",phone:S.REQ_CUST_TEL_NO,address:S.ADDR||"  ",isVip:!!(S.VIP_GB&&String(S.VIP_GB).length>0)||((F=t.customer)==null?void 0:F.isVip)||!1,vipLevel:S.VIP_GB==="VIP_VVIP"?"VVIP":S.VIP_GB?"VIP":(ee=t.customer)==null?void 0:ee.vipLevel},details:S.REQ_CTX||"",assignedEquipment:[],WRK_CD:S.WRK_CD,CTRT_ID:S.CTRT_ID,WRK_STAT_CD:S.WRK_STAT_CD,RCPT_ID:S.RCPT_ID,SO_ID:S.SO_ID};console.log(" -  :",P),N(P),y(!0)},W=async S=>{if(g){console.log("  - cancelData:",S),console.log("  - cancelTarget:",g),v(!0),y(!1);try{console.log(" API  -  :",S);const P=await xb(S);if(console.log("  API :",P),P.code==="SUCCESS"||P.code==="OK"){i&&i("  .","success");const ee=(await yy(t.id)).sort((J,$)=>{const Y=K=>K===""||K===""?1:K===""?2:3;return Y(J.WRK_STAT_CD_NM)-Y($.WRK_STAT_CD_NM)});c(ee)}else i&&i(` : ${P.message}`,"error",!0)}catch(P){console.error(" :",P);const F=P instanceof Fs?P.message:P.message||"   .";i&&i(F,"error",!0)}finally{v(!1),N(null)}}};return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-blue-500 to-blue-600 px-4 py-3 shadow-md z-40",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsxs("h1",{className:"text-base font-bold text-white truncate",children:[((j=l[0])==null?void 0:j.CUST_NM)||t.customer.name,t.customer.id&&s.jsxs("span",{className:"font-normal ml-1",children:["(",t.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-white/20 text-white border border-white/30 flex-shrink-0",children:t.typeDisplay})]}),s.jsxs("div",{className:"flex items-center gap-2 text-white/90 flex-shrink-0",children:[s.jsx(mb,{customer:t.customer}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-3.5 h-3.5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),s.jsx("span",{className:"text-xs font-medium",children:Np(t.scheduledAt)})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[s.jsxs("svg",{className:"w-3.5 h-3.5 text-white/70 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs text-white/80 truncate",children:t.customer.address})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:C?s.jsx(z0,{size:"medium",message:"   ..."}):R?s.jsx(Db,{type:"error",message:R,onRetry:()=>window.location.reload()}):l.length===0?s.jsxs("div",{className:"text-center py-10 sm:py-12 px-4 sm:px-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(zp,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2 whitespace-nowrap",children:"  "})]}):s.jsx("div",{className:"space-y-3 pb-4",children:l.map((S,P)=>s.jsx(H3,{item:S,index:P+1,onSelect:k,onComplete:V,onCancel:G},S.WRK_ID||S.id||P))})}),g&&s.jsx(Cb,{isOpen:p,onClose:()=>y(!1),onConfirm:W,workOrder:g,userId:r,showToast:i})]})},I5=({isOpen:t,onClose:e,smsData:n,userId:r})=>{const[i,l]=_.useState(""),[c,d]=_.useState([]),[u,f]=_.useState(""),[m,p]=_.useState(""),[y,g]=_.useState("020"),[N,C]=_.useState(""),[v,R]=_.useState(!1),[A,M]=_.useState(!1),[L,k]=_.useState(null),V=_.useMemo(()=>{let K=0;for(let w=0;w<N.length;w++){const se=N.charCodeAt(w);K+=se>127?2:1}return K},[N]),G=2e3,W=V>G,j=_.useMemo(()=>((n==null?void 0:n.WRK_CD)||"")==="03"?H1:H1.filter(w=>w.refCode==="WK"),[n==null?void 0:n.WRK_CD]),S=K=>K.replace(/[-\s\(\)]/g,""),P=K=>{const w=S(K);return w.length>=9&&/^\d+$/.test(w)},F=K=>{if(!K)return"";const w=K.split(/\s*\[[A-Z]\]|\s*[,\/]\s*/);for(const se of w){const oe=se.trim();if(P(oe))return oe}return K.trim()};_.useEffect(()=>{t&&n&&(async()=>{var I;M(!0),k(null);const w=[],se=new Set,oe=(U,Q)=>{if(!Q)return;const H=F(Q);if(!H||!P(H))return;const q=S(H);se.has(q)||(se.add(q),w.push({type:U,number:H}))};if(n.CUST_ID)try{const U=await l5({CUST_ID:n.CUST_ID}),Q=U.currentContract||((I=U.contracts)==null?void 0:I[0]);Q&&(oe("",n.WORK_REQ_TEL_NO||Q.WORK_REQ_TEL_NO),oe("",n.REQ_CUST_TEL_NO||Q.REQ_CUST_TEL_NO),oe("",Q.TEL_NO2||n.CUST_TEL_NO2),oe("",Q.TEL_NO1||n.CUST_TEL_NO1))}catch(U){console.error("[SMS] Failed to get phone from contract:",U)}n.SMS_RCV_TEL&&w.length===0&&oe("",n.SMS_RCV_TEL),d(w),w.length>0?(f(w[0].type),l(w[0].number)):(f(""),l(""));let T=n.SMS_SEND_TEL||"";if(!T)try{const U=localStorage.getItem("userInfo");U&&(T=JSON.parse(U).telNo2||"")}catch(U){console.error("[SMS] Failed to get telNo2 from userInfo:",U)}p(T),g("020"),J("020",n),M(!1)})()},[t,n]);const ee=K=>K?K.includes(" ")&&K.length>=16?{hour:K.substring(11,13),minute:K.substring(14,16)}:K.includes("T")&&K.length>=16?{hour:K.substring(11,13),minute:K.substring(14,16)}:K.length>=12&&!K.includes("-")?{hour:K.substring(8,10),minute:K.substring(10,12)}:{hour:"",minute:""}:{hour:"",minute:""},J=(K,w)=>{if(!w)return;const se=w.SO_ID==="328"?"[]":"[]",oe=w.WRK_HOPE_DTTM||"",{hour:T,minute:I}=ee(oe),U=w.WRKR_NM_EN||w.WRKR_NM||"",Q=w.WRK_CD_NM||"",H=w.SMS_SEND_TEL||"";let q="";if(K==="020"){const fe=["100","600","327","210"].includes(w.SO_ID)&&w.SO_ID!=="201";q=`${se} 

`,q+=`!   ''.
`,q+=`     CS  .

`,q+=` : ${Q}
`,fe?q+=` : ${T} ${I}
`:q+=` : ${T}
`,q+=`* CS    .
`,q+=` : ${U} CS ${H}

`,q+=`[]
`,q+=`*           .
`,q+=`* CS         .
`,q+=`* CS   .   .
`}else if(K==="021")q=`${se}      .`;else if(K==="027")q=`${se}  ${U}    .()`;else if(K==="028")q=`${se}  ${U}    ${Q}   .`;else if(K==="138")q=`${se} .   .`;else if(K==="139"){const ae=H.replace(/-/g,"").replace(/ /g,"");q=`${se}AS    . :${ae}`}else if(K==="141")q=`${se}   

`,q+=`    .

`,q+="        ,   ",q+="     .  URL  ",q+=`   .

`,q+="            . .";else if(K==="059_002")q=`${se} KB  

`,q+=`1. 
`,q+=`https://m.dlive.kr/mobile/event/JoinAction.do?method=view
`,q+=`2.   ,  URL    . (     )
`,q+=`3.     (1644-1100)      .
`,q+=`4.      .    !

`,q+=`<   >
`,q+=`https://m.kbcard.com/CXHIACRC0002.cms?mainCC=b&allianceCode=04345&solicitorcode=702${r}
`;else if(K==="059"){const ae=(w.CUST_ID||"").slice(-5);q=`${se}     

`,q+=`1. 
`,q+=`https://m.dlive.kr/mobile/event/JoinAction.do?method=view
`,q+=`2.   ,  URL    . (     )
`,q+=`3.     (1644-1100)      .
`,q+=`4.      .    !

`,q+=`<   >
`,q+=`https://m.hanacard.co.kr/MPACMM101M.web?_frame=no&CD_PD_SEQ=17176&eno=${r}&${ae}`}else if(K==="235")q=`${se}    

`,q+=`1. 
`,q+=`https://m.dlive.kr/mobile/event/JoinAction.do?method=view
`,q+=`2.   ,  URL    . (     )
`,q+=`3.     (1644-1100)      .
`,q+=`4.      .    !

`,q+=`<   >
`,q+=`https://m.hanacard.co.kr/MPACMM101M.web?_frame=no&CD_PD_SEQ=18122&eno=${r}

`,q+=" 1800-0170";else if(K==="059_005"){const ae=w.CUST_ID||"";q=`${se}  LOCA X Special SE   

`,q+=`1. 
`,q+=`https://m.dlive.kr/front/join/join/DiscountAction.do?method=view
`,q+=`2.   ,  URL    . (     )
`,q+=`3.     (1644-1100)      .
`,q+=`4.      .    !

`,q+=`<   >
`,q+=`http://m.lottecard.co.kr/spa/card/booth?bId=96893&vtCdKndC=P13791-A13791&cInfo=${ae}${r}
`}else K==="271"&&(q="[]  1644-1100 . .");C(q)},$=async()=>{if(!n){k("SMS data missing");return}if(!P(i)){k("   . (010, 011 )");return}if(!m.trim()){k(" .");return}if(!N.trim()){k("  .");return}R(!0),k(null);try{const K=H1.find(oe=>oe.code===y),w={SMS_EML_TYPE:y.substring(0,3),SO_ID:n.SO_ID,USER_SMS:i,SEND_SMS:m,USER_ID:n.CUST_ID,USER_NAME:n.CUST_NM,MAP01:N,KKO_MSG_ID:(K==null?void 0:K.kkoMsgId)||"KKO020_003",REG_UID:r,TRANS_YN:"N",SMS_EML_CL:"20"},se=await I4(w);se.code==="SUCCESS"?(alert("  ."),e()):k(se.message||"  .")}catch(K){console.error("[SMS] Send error:",K),k(K.message||"    .")}finally{R(!1)}},Y=s.jsxs("div",{className:"flex gap-2 w-full",children:[s.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",disabled:v,children:""}),s.jsx("button",{onClick:$,disabled:v||W,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hb,{size:16}),""]})})]});return s.jsx(pa,{isOpen:t,onClose:e,title:"",size:"medium",footer:A?void 0:Y,children:A?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-4 text-gray-500 text-sm",children:"  ..."})]}):s.jsxs("div",{className:"space-y-4",children:[L&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:L}),n&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"font-medium",children:n.CUST_NM})]}),n.WRK_CD_NM&&s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"font-medium",children:n.WRK_CD_NM})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.length>1?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-24 flex-shrink-0",children:s.jsx(Zs,{value:u,onValueChange:K=>{f(K);const w=c.find(se=>se.type===K);w&&l(w.number)},options:c.map(K=>({value:K.type,label:K.type})),placeholder:""})}),s.jsx("input",{type:"tel",value:i,onChange:K=>l(K.target.value),className:"flex-1 px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm"})]}):s.jsx("input",{type:"tel",value:i,onChange:K=>l(K.target.value),placeholder:"010-1234-5678",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"tel",value:m,onChange:K=>p(K.target.value),placeholder:"010-1234-5678",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx(Zs,{value:y,onValueChange:K=>{g(K),n&&J(K,n),["059_002","059","235","059_005","271"].includes(K)&&p("1644-1100")},options:j.map(K=>({value:K.code,label:K.name})),placeholder:"  "})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s.jsx("textarea",{value:N,onChange:K=>C(K.target.value),rows:8,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none",placeholder:"  "}),s.jsxs("div",{className:`mt-1 text-right text-sm ${W?"text-red-600 font-medium":"text-gray-500"}`,children:[V," / ",G," bytes",W&&" ()"]})]})]})})},z3=Array.from({length:13},(t,e)=>{const n=(e+9).toString().padStart(2,"0");return{value:n,label:`${n}`}}),q3=Array.from({length:6},(t,e)=>{const n=(e*10).toString().padStart(2,"0");return{value:n,label:`${n}`}}),tC=t=>{if(!t)return"-";const e=t.replace(/\D/g,"");return e.length>=10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:e.length>=6?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6)}`:t},O5=({isOpen:t,onClose:e,direction:n,onSuccess:r,showToast:i,userInfo:l})=>{const[c,d]=_.useState(""),[u,f]=_.useState(null),[m,p]=_.useState([]),[y,g]=_.useState(!1),[N,C]=_.useState(!1),[v,R]=_.useState(!1),[A,M]=_.useState(""),[L,k]=_.useState(""),[V,G]=_.useState(""),[W,j]=_.useState(""),[S,P]=_.useState([]),[F,ee]=_.useState(""),[J,$]=_.useState(""),[Y,K]=_.useState(""),[w,se]=_.useState(""),[oe,T]=_.useState(""),[I,U]=_.useState(!0),Q=_.useRef(null),H=_.useRef(null),q=_.useRef(null);_.useEffect(()=>{if(t){const te=n.WRK_HOPE_DTTM||"",je=n.scheduledAt||"";let be=new Date().toISOString().split("T")[0],Te="",re="";if(te&&te.length>=8)be=`${te.substring(0,4)}-${te.substring(4,6)}-${te.substring(6,8)}`,te.length>=12&&(Te=te.substring(8,10),re=te.substring(10,12));else if(je){const pe=new Date(je);isNaN(pe.getTime())||(be=pe.toISOString().split("T")[0],Te=String(pe.getHours()).padStart(2,"0"),re=String(pe.getMinutes()).padStart(2,"0"))}M(be),k(Te),G(re),ee(be),$(Te),K(re),d(""),f(null),p([]),j(""),se(""),T(""),U(!0),ae()}},[t,n]);const ae=async()=>{try{await Promise.all([ge(),fe()])}finally{U(!1)}},fe=async()=>{try{const te=n.WRK_DRCTN_ID||n.id;if(!te)return;const je=n.CRR_NM||"",be=n.WRKR_NM||"";if(je||be){se(je),T(be);return}const Te=await yy(te);if(Te&&Te.length>0){const re=Te[0];se(re.CRR_NM||""),T(re.WRKR_NM||""),console.log("[]   :",{CRR_NM:re.CRR_NM,WRKR_NM:re.WRKR_NM})}}catch(te){console.error("    :",te)}},ge=async()=>{try{const te=await ka("CMWO224");P(te||[])}catch(te){console.error("   :",te)}},ce=()=>A!==F||L!==J||V!==Y;_.useEffect(()=>{const te=je=>{Q.current&&!Q.current.contains(je.target)&&g(!1)};if(y)return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[y]);const Re=te=>{d(te),f(null),H.current&&clearTimeout(H.current),te.trim().length>=2?H.current=setTimeout(()=>{X(te.trim())},300):(p([]),g(!1))},X=async te=>{C(!0),g(!0);try{const je=await rp({USR_NM:te,SO_ID:(l==null?void 0:l.soId)||""});p(je||[])}catch(je){console.error("Worker search failed:",je),p([])}finally{C(!1)}},me=te=>{f(te),d(te.USR_NM),g(!1)},he=async()=>{const te=A.replace(/-/g,"");if(te.length<8){i==null||i(" .","error");return}if(!L){i==null||i(" .","error");return}if(!V){i==null||i(" .","error");return}const je=new Date,be=`${je.getFullYear()}${String(je.getMonth()+1).padStart(2,"0")}${String(je.getDate()).padStart(2,"0")}${String(je.getHours()).padStart(2,"0")}${String(je.getMinutes()).padStart(2,"0")}`,Te=`${te}${L}${V}`;if(Number(Te)<Number(be)){i==null||i("   .","error");return}if(!u){i==null||i(" .","error");return}if(!n.WRK_DRCTN_ID&&!n.id){i==null||i(" ID .","error");return}if(ce()&&!W){i==null||i(" .  .","error");return}R(!0);try{const re=A.replace(/-/g,""),pe=L&&V?`${re}${L}${V}`:void 0,Se=ce(),st=!0;let Nt="";Se&&st?Nt="AL":st&&(Nt="WR");const lt=n,At=new Date,ot=`${At.getFullYear()}${String(At.getMonth()+1).padStart(2,"0")}${String(At.getDate()).padStart(2,"0")}`,We=re===ot,Dt={CNTL_FG:"UPMODE",NMLEVEL:"3",WRK_DRCTN_ID:n.WRK_DRCTN_ID||n.id,WRKR_ID:u.USR_ID,CRR_ID:u.CRR_ID||(l==null?void 0:l.crrId)||"",POST_ID:u.POST_ID||"",DIV_DATE:re,DIV_DT:re,DIV_HH:L||"",DIV_MI:V||"",WRK_HOPE_DTTM:pe||"",RCPT_ID:lt.RCPT_ID||"",WRK_ID:n.id||lt.WRK_ID||"",REG_UID:(l==null?void 0:l.userId)||"",CHG_UID:(l==null?void 0:l.userId)||"",HOLY_YN:"N",SMS_YN:We?"Y":"N",DIV_RESULT:"",O_WRK_DIV_ID:"",WRK_DIV_CL:"",...W&&{CHG_RSN:W},...Nt&&{CHG_GB:Nt}};console.log("Worker adjustment params:",Dt);const Et=await D4(Dt);console.log("Worker adjustment result:",Et);const Rt=Et==null?void 0:Et.result;if(Array.isArray(Rt)&&Rt.length>0){const $e=Rt[0];if($e.MSGCODE&&$e.MSGCODE!=="SUCCESS"&&$e.MSGCODE!=="0"){const gt=$e.MESSAGE||$e.MSG||"  .";i==null||i(gt,"error");return}}if(Et!=null&&Et.code&&Et.code!=="SUCCESS"&&Et.code!=="0"){const $e=Et.message||Et.MESSAGE||"  .";i==null||i($e,"error");return}i==null||i("  .","success"),r==null||r(),e()}catch(re){console.error("Worker adjustment failed:",re),i==null||i(re.message||"  .","error")}finally{R(!1)}},Z=()=>{var te;return s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:s.jsxs("div",{className:"space-y-1.5 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"font-mono text-gray-700",children:tC(n.WRK_DRCTN_ID||n.id)})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"text-blue-600 font-medium",children:n.typeDisplay||n.WRK_CD_NM})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:((te=n.customer)==null?void 0:te.name)||n.CUST_NM})]})]})})},ie=s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:e,disabled:v,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 whitespace-nowrap",children:""}),s.jsx("button",{type:"button",onClick:he,disabled:v||!u,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:v?"...":""})]});return s.jsxs(pa,{isOpen:t,onClose:e,title:" ",size:"medium",footer:I?void 0:ie,children:[I?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(z0,{size:"medium",message:"  ..."})}):s.jsxs("div",{className:"space-y-4",children:[Z(),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",ref:Q,children:[s.jsxs("div",{className:"relative",children:[s.jsx(yu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:c,onChange:te=>Re(te.target.value),onFocus:()=>m.length>0&&g(!0),placeholder:"  (2 )",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),u&&s.jsx("button",{type:"button",onClick:()=>{f(null),d(""),p([])},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s.jsx(bi,{className:"w-4 h-4"})})]}),y&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto z-30",children:N?s.jsx("div",{className:"p-4 text-center",children:s.jsx(z0,{size:"small",message:"..."})}):m.length===0?s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx(Oh,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"  ."})]}):m.map(te=>{const je=te.CORP_NM||te.CRR_NM||"",be=te.TEL_NO3||te.TEL_NO2||te.HP_NO||te.PDATEL_NO||"";return s.jsxs("button",{type:"button",onMouseDown:Te=>Te.preventDefault(),onClick:()=>me(te),className:"w-full p-3 text-left hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-gray-900",children:te.USR_NM}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[te.USR_ID,je&&`  ${je}`,be&&`  ${tC(be)}`]})]},te.USR_ID)})})]})]}),u&&(()=>{const te=u.CORP_NM||u.CRR_NM||"",je=u.TEL_NO3||u.TEL_NO2||u.HP_NO||u.PDATEL_NO||"";return s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-gray-900 text-base mb-2",children:u.USR_NM}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:u.USR_ID})]}),te&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:te})]}),je&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:tC(je)})]})]})]})})(),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",s.jsx("span",{className:"font-normal text-blue-600"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",ref:q,value:A,onChange:te=>M(te.target.value),className:"absolute opacity-0 pointer-events-none h-0 w-0",tabIndex:-1}),s.jsxs("button",{type:"button",onClick:()=>{var te,je;return(je=(te=q.current)==null?void 0:te.showPicker)==null?void 0:je.call(te)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer bg-white flex items-center justify-between",children:[s.jsx("span",{className:`text-sm sm:text-base ${A?"text-gray-900":"text-gray-500"}`,children:A||" "}),s.jsx(_h,{className:"w-4 h-4 text-gray-400"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Zs,{value:L,onValueChange:k,options:[{value:"",label:" "},...z3.map(te=>({value:te.value,label:te.label}))],placeholder:" "})}),s.jsx("div",{className:"flex-1",children:s.jsx(Zs,{value:V,onValueChange:G,options:[{value:"",label:" "},...q3.map(te=>({value:te.value,label:te.label}))],placeholder:" "})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",ce()&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:W,onValueChange:j,options:[{value:"",label:" "},...S.map(te=>({value:te.code,label:te.name}))],placeholder:" "}),ce()&&s.jsx("p",{className:"mt-1 text-xs text-orange-600",children:"      ."})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 rounded-lg",children:[s.jsx(Mr,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-amber-700",children:"         ."})]})]}),v&&s.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center rounded-lg",children:s.jsx(z0,{size:"medium",message:"  ..."})})]})},X3=({onBack:t,userInfo:e,showToast:n})=>{const[r,i]=_.useState(null),[l,c]=_.useState(!1),[d,u]=_.useState(!0),[f,m]=_.useState(!1),[p,y]=_.useState(!1),[g,N]=_.useState([]);_.useEffect(()=>{C(),v()},[e]);const C=async()=>{u(!0);try{const W=await u4({SO_ID:e==null?void 0:e.soId,CRR_ID:e==null?void 0:e.crrId,WRKR_ID:e==null?void 0:e.userId});if(console.log("[SafetyCheckList] Raw API items:",W),W&&W.length>0){let j=[];e!=null&&e.userId&&(j=await a5(e.userId),console.log("[SafetyCheckList] Today results:",j),j.length>0&&y(!0));const S=new Map;j.forEach(F=>{F.ITEM_ID&&S.set(F.ITEM_ID,F.ANSWER_VALUE||"N")});const P=W.sort((F,ee)=>(F.DISPLAY_ORDER||0)-(ee.DISPLAY_ORDER||0)).map(F=>({id:F.ITEM_ID,label:F.QUESTION_TEXT,required:F.IS_REQUIRED==="Y",imageRequired:F.IMAGE_REQUIRED_YN==="Y",checked:S.get(String(F.ITEM_ID))==="Y",photo:void 0}));console.log("[SafetyCheckList] Mapped items:",P),N(P)}else console.log("[SafetyCheckList] No items from API"),n&&n("    .","warning")}catch(W){console.error("[SafetyCheckList] Failed to load checklist:",W),n&&n("   ","error",!0)}finally{u(!1)}},v=async()=>{const W=(e==null?void 0:e.soId)||"",j=(e==null?void 0:e.crrId)||"";if(!(!W||!j))try{const S=await f4({SO_ID:W,CRR_ID:j});if(S&&S.length>0){const P=S.sort((ee,J)=>J.INSP_END_DT.localeCompare(ee.INSP_END_DT))[0];i(P);const F=new Date().toISOString().slice(0,10).replace(/-/g,"");P.INSP_END_DT<F&&(c(!0),n&&n(" .   .","warning"))}}catch(S){console.error("  :",S)}},R=W=>{N(j=>j.map(S=>S.id===W?{...S,checked:!S.checked}:S))},A=W=>new Promise((j,S)=>{const P=new Image;P.onload=()=>{try{const F=document.createElement("canvas"),ee=1920;let J=P.width,$=P.height;(J>ee||$>ee)&&(J>$?($=$/J*ee,J=ee):(J=J/$*ee,$=ee)),F.width=J,F.height=$;const Y=F.getContext("2d");if(!Y){S(new Error("Canvas context not available"));return}Y.drawImage(P,0,0,J,$);const K=new Date,w=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")} ${String(K.getHours()).padStart(2,"0")}:${String(K.getMinutes()).padStart(2,"0")}:${String(K.getSeconds()).padStart(2,"0")}`,se=Math.max(16,Math.floor(J/25));Y.font=`bold ${se}px Arial`;const oe=Y.measureText(w).width,T=10,I=se+T*2,U=oe+T*2;Y.fillStyle="rgba(0, 0, 0, 0.6)",Y.fillRect(J-U-10,$-I-10,U,I),Y.fillStyle="#FFFFFF",Y.fillText(w,J-oe-T-10,$-T-15);const Q=F.toDataURL("image/jpeg",.85);j(Q)}catch(F){S(F)}},P.onerror=()=>S(new Error("Image load failed")),P.src=URL.createObjectURL(W)}),M=async(W,j)=>{const S=j.target.files;if(S&&S.length>0)try{const P=await A(S[0]);N(F=>F.map(ee=>ee.id===W?{...ee,photo:P,checked:!0}:ee)),console.log("[SafetyCheckList]    ( , Base64 )")}catch(P){console.error("[SafetyCheckList]   :",P),n&&n("  .","error")}},L=W=>{N(j=>j.map(S=>S.id===W?{...S,photo:void 0}:S))},k=()=>g.filter(S=>S.required&&!S.checked).length>0?(n&&n("    .","warning"),!1):g.filter(S=>S.imageRequired&&!S.photo).length>0?(n&&n("   .","warning"),!1):!0,V=async()=>{if(!k())return;const W=(e==null?void 0:e.userId)||"mobile_user";m(!0);try{const j=g.map(ee=>String(ee.id)).join(","),S=g.map(ee=>ee.checked?"Y":"N").join(","),P="N";console.log("   :",{USR_ID:W,ANS_ITEM_IDS:j,ANS_VALUES:S,IMG_PATHS:"(empty - image upload not implemented)"});const F=await h4({USR_ID:W,IMG_PATHS:P,ANS_ITEM_IDS:j,ANS_VALUES:S});console.log("  :",F),F.code==="SUCCESS"||F.code==="OK"?(n&&n(" .","success"),await C(),await v()):n&&n(`  : ${F.message||"   "}`,"error",!0)}catch(j){console.error("  :",j),n&&n("  API  .","warning")}finally{m(!1)}},G=()=>{const W=g.filter(S=>S.required);if(W.length===0)return 100;const j=W.filter(S=>S.checked).length;return Math.round(j/W.length*100)};return d?s.jsxs("div",{className:"text-center p-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-cyan-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-gray-600",children:" ..."})]}):g.length===0?s.jsx("div",{className:"max-w-4xl mx-auto pb-6",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Mr,{className:"w-6 h-6 text-yellow-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-yellow-800 font-bold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-yellow-700",children:"DB     .  ."})]})]})})}):s.jsxs("div",{className:"max-w-4xl mx-auto pb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-500 text-white p-4 sm:p-5 rounded-xl shadow-lg mb-6 relative",children:s.jsxs("div",{className:"flex items-start gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex-1 z-10 min-w-0 flex flex-col justify-between h-36 sm:h-44",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"p-1.5 sm:p-2 bg-white/20 rounded-lg flex-shrink-0",children:s.jsx(uv,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),s.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:""})]}),s.jsx("p",{className:"text-xs sm:text-sm text-white/90",children:"  "}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 text-xs",children:[s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""})]})]}),s.jsx("div",{className:"flex-shrink-0 w-28 h-28 sm:w-36 sm:h-36 relative",children:s.jsx("img",{src:"/safeimage1-Photoroom.png",alt:" ",className:"absolute -right-4 -bottom-10 drop-shadow-xl !w-[170px] !h-auto !max-w-none"})})]})}),l&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Mr,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-red-800 font-bold mb-1",children:" "}),s.jsx("p",{className:"text-sm text-red-700",children:" .      ."})]})]})}),r&&!l&&s.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-6 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Vi,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-green-800 font-bold mb-1",children:"  "}),s.jsxs("p",{className:"text-sm text-green-700",children:[": ",r.INSP_END_DT.slice(0,4),"-",r.INSP_END_DT.slice(4,6),"-",r.INSP_END_DT.slice(6,8)]})]})]})}),p&&s.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Vi,{className:"w-6 h-6 text-blue-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-blue-800 font-bold mb-1",children:"   "}),s.jsx("p",{className:"text-sm text-blue-700",children:"   .     ."})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden mb-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 p-3 sm:p-4 flex items-center gap-2 sm:gap-3",children:[s.jsx(uv,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"}),s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white",children:" "}),s.jsxs("span",{className:"ml-auto text-white/80 text-sm",children:[g.length," "]})]}),s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:g.map((W,j)=>{var S;return s.jsxs("div",{className:`p-3 rounded-lg border ${W.checked?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:W.checked,onChange:()=>R(W.id),className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-900 whitespace-pre-line",children:[j+1,". ",(S=W.label)==null?void 0:S.replace(/\r\n/g,`
`).replace(/  - /g,`
- `),W.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),W.imageRequired&&s.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-0.5 rounded bg-orange-100 text-orange-700 text-xs",children:[s.jsx(ov,{className:"w-3 h-3"}),""]})]}),W.checked&&s.jsx(Vi,{className:"w-5 h-5 text-green-500 flex-shrink-0"})]}),W.imageRequired&&s.jsx("div",{className:"mt-3 ml-8",children:W.photo?s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:W.photo,alt:" ",className:"w-24 h-24 object-cover rounded-lg border-2 border-green-300"}),s.jsx("button",{onClick:()=>L(W.id),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:s.jsx(bi,{className:"w-3 h-3"})})]}):s.jsxs("label",{className:"inline-flex items-center gap-2 px-4 py-2 border-2 border-dashed border-orange-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 cursor-pointer transition-all",children:[s.jsx(ov,{className:"w-4 h-4 text-orange-500"}),s.jsx("span",{className:"text-sm font-medium text-orange-600",children:" "}),s.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:P=>M(W.id,P),className:"hidden"})]})})]},W.id)})})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("button",{onClick:V,disabled:f||G()<100,className:"w-full py-3 sm:py-4 bg-gradient-to-r from-blue-600 to-cyan-500 text-white rounded-xl font-bold text-base sm:text-lg shadow-lg hover:from-blue-700 hover:to-cyan-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"})," ..."]}):" "}),G()<100&&s.jsx("p",{className:"text-center text-sm text-red-600 mt-2",children:"   "})]}),s.jsx("div",{className:"mt-3 p-2.5 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("span",{className:"text-red-500 font-bold",children:"*"}),"     "]})})]})},J3=({onBack:t})=>{const[e,n]=_.useState([]),[r,i]=_.useState(!1),[l,c]=_.useState(null),[d,u]=_.useState(new Date().toISOString().slice(0,10));_.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0),c(null);const m={};d&&(m.HOPE_DT=d.replace(/-/g,""));const p=await m4(m);n(p),console.log("  :",p.length)}catch(m){console.error("  :",m),c("  .")}finally{i(!1)}};return s.jsxs("div",{children:[s.jsx("div",{className:"mb-3",children:s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"mb-3 bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"date",value:d,onChange:m=>u(m.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",style:{colorScheme:"light"}})]}),s.jsx("button",{onClick:f,disabled:r,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded font-medium text-sm shadow-md transition-all disabled:opacity-50",children:""})]})}),r?s.jsxs("div",{className:"text-center p-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-orange-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-gray-600",children:" ..."})]}):l?s.jsxs("div",{className:"text-center p-10 bg-white rounded-lg shadow-sm border border-red-200",children:[s.jsx("p",{className:"text-red-500",children:l}),s.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:" "})]}):s.jsx(s.Fragment,{children:e.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""})]})}),s.jsx("tbody",{children:e.map((m,p)=>s.jsxs("tr",{className:"hover:bg-orange-50 transition-colors",children:[s.jsx("td",{className:"px-2 py-2 text-xs text-gray-900 border-b",children:m.WRKR_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.WRK_CD_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.ING_CNT||0}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.CMPL_CNT||0}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.SUM_CNT||0})]},`${m.WRK_ID}-${p}`))})]})})}):s.jsx("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"   "})})})]})},Z3=({isOpen:t,onClose:e,onSelectCustomer:n})=>{const[r,i]=_.useState(""),[l,c]=_.useState(""),[d,u]=_.useState(""),[f,m]=_.useState(""),[p,y]=_.useState([]),[g,N]=_.useState(!1),[C,v]=_.useState(!1),R=()=>{i(""),c(""),u(""),m(""),y([]),v(!1)},A=async()=>{N(!0),v(!0),y([]);try{let L=[];if(l.trim())L=await X4(l.trim());else if(r.trim())L=await q4(r.trim());else if(d.trim())L=await z4(d.trim());else if(f.trim())L=await J4(f.trim());else{alert("  ."),N(!1);return}y(L)}catch(L){console.error("Customer search error:",L)}finally{N(!1)}},M=L=>{const k={...L};l.trim()&&!k.CTRT_ID&&(k.CTRT_ID=l.trim()),n(k),e()};return t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-12 bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[90%] max-w-md max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500 rounded-t-xl",children:[s.jsx("h3",{className:"text-white font-bold text-base",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:R,className:"px-3 py-1 text-xs bg-white/20 text-white rounded-full hover:bg-white/30",children:""}),s.jsx("button",{onClick:e,className:"text-white",children:s.jsx(bi,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"p-4 space-y-3 border-b",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:r,onChange:L=>i(L.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:"ID ",maxLength:10})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:l,onChange:L=>c(L.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:"ID ",maxLength:15})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:""}),s.jsx("input",{type:"tel",value:d,onChange:L=>u(L.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:" ",maxLength:15})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:f,onChange:L=>m(L.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:" ",maxLength:20})]}),s.jsxs("div",{className:"flex gap-2 pt-1",children:[s.jsxs("button",{onClick:A,disabled:g,className:"flex-1 flex items-center justify-center gap-1 bg-blue-500 hover:bg-blue-600 text-white py-2.5 rounded-lg font-medium text-sm disabled:opacity-50",children:[s.jsx(yu,{className:"h-4 w-4"}),""]}),s.jsx("button",{onClick:e,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2.5 rounded-lg font-medium text-sm",children:""})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:g?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-3 border-blue-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:" ..."})]}):p.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[" ",p.length,""]}),p.map((L,k)=>s.jsx("button",{onClick:()=>M(L),className:"w-full text-left p-3 bg-gray-50 hover:bg-blue-50 border border-gray-200 rounded-lg transition-colors",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[L.CUST_NM||"-"," ",s.jsxs("span",{className:"text-gray-400 text-xs",children:["(",L.CUST_ID,")"]})]}),L.CTRT_ID&&s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[": ",L.CTRT_ID," | ",L.BASIC_PROD_CD_NM||L.PROD_NM||"-"]}),L.ADDR&&s.jsx("p",{className:"text-xs text-gray-400 mt-0.5 truncate",children:L.ADDR})]}),s.jsxs("div",{className:"text-right",children:[L.CTRT_STAT_NM&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:L.CTRT_STAT_NM}),L.SO_NM&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:L.SO_NM})]})]})},k))]}):C?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-sm text-gray-500",children:"  ."})}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-sm text-gray-400",children:"     ."})})})]})}):null},M5=({onBack:t,userInfo:e,showToast:n})=>{const[r,i]=_.useState(!1),[l,c]=_.useState(null),[d,u]=_.useState([]),[f,m]=_.useState(null),[p,y]=_.useState(!1),[g,N]=_.useState("all"),[C,v]=_.useState(""),[R,A]=_.useState(!1),[M,L]=_.useState(!1),[k,V]=_.useState("basic"),G=_.useRef([]),W=_.useRef([]),j=_.useRef([]),S=_.useRef(!1);_.useEffect(()=>{S.current||(S.current=!0,(async()=>{try{const[$e,gt,Fe]=await Promise.all([mc().catch(()=>[]),qp().catch(()=>[]),ka("CMIF006").catch(()=>[])]);G.current=$e||[],W.current=gt||[],j.current=(Fe||[]).map(rt=>rt.code||rt.COMMON_CD)}catch($e){console.error("[SignalIntegration]    :",$e)}})())},[]);const P=$e=>{const gt=$e.BASIC_PROD_CD||$e.PROD_CD||"",Fe=$e.SO_ID||"";return gt&&G.current.some(rt=>rt.PROD_CD===gt)?"lgu":gt&&W.current.includes(gt)&&Fe&&j.current.includes(Fe)?"ftth":"basic"},[F,ee]=_.useState(!1),[J,$]=_.useState(""),[Y,K]=_.useState(()=>{const $e=new Date;return $e.setDate($e.getDate()-7),$e.toISOString().slice(0,10)}),[w,se]=_.useState(new Date().toISOString().slice(0,10)),[oe,T]=_.useState(!1),[I,U]=_.useState(!1),[Q,H]=_.useState([]),[q,ae]=_.useState(null),[fe,ge]=_.useState([]),[ce,Re]=_.useState([]),[X,me]=_.useState([]),[he,Z]=_.useState(null),[ie,te]=_.useState([]),[je,be]=_.useState([]),Te=$e=>{if(!$e)return"-";const gt=$e.replace(/[^0-9]/g,"");return gt.length===10?`${gt.slice(0,3)}-${gt.slice(3,6)}-${gt.slice(6)}`:$e},re=$e=>{if(!$e)return"-";const gt=$e.replace(/[-: T]/g,"");return gt.length>=14?`${gt.slice(0,4)}-${gt.slice(4,6)}-${gt.slice(6,8)} ${gt.slice(8,10)}:${gt.slice(10,12)}:${gt.slice(12,14)}`:gt.length>=8?`${gt.slice(0,4)}-${gt.slice(4,6)}-${gt.slice(6,8)}`:$e},pe=()=>{H([]),ae(null),ge([]),Re([]),me([]),Z(null),te([]),be([])},Se=async $e=>{if(c($e),u([]),m(null),pe(),L(!0),$e.CTRT_ID){const gt={CTRT_ID:$e.CTRT_ID,CUST_ID:$e.CUST_ID,BASIC_PROD_CD_NM:$e.BASIC_PROD_CD_NM||$e.PROD_NM,CTRT_STAT_NM:$e.CTRT_STAT_NM,SO_NM:$e.SO_NM,ADDR:$e.ADDR};m(gt),$($e.CTRT_ID)}if($e.CUST_ID)try{const gt=await Z4($e.CUST_ID);if(gt.length>0){u(gt);const Fe=$e.CTRT_ID;if(Fe){const rt=gt.find(at=>at.CTRT_ID===Fe);if(rt){m(rt),$(rt.CTRT_ID);const at=P(rt);V(at)}else console.log("[SignalIntegration]   CTRT_ID  ,  CTRT_ID :",Fe),$(Fe)}else if(!f&&gt.length===1){m(gt[0]),$(gt[0].CTRT_ID);const rt=P(gt[0]);V(rt)}}}catch(gt){console.error("Failed to load contract list:",gt)}finally{L(!1)}else L(!1);$e.CTRT_ID&&ee(!0)};_.useEffect(()=>{F&&!M&&J&&(ee(!1),Nt())},[F,M,J]);const st=$e=>{if((f==null?void 0:f.CTRT_ID)===$e.CTRT_ID&&R){A(!1);return}m($e),$($e.CTRT_ID),pe();const gt=P($e);V(gt),A(!1)},Nt=async()=>{const $e=J.trim();if(!$e){n==null||n("ID .","warning");return}T(!0),pe(),A(!0);try{const gt=Y.replace(/-/g,""),Fe=new Date(w);Fe.setDate(Fe.getDate()+1);const rt=Fe.toISOString().slice(0,10).replace(/-/g,"");if(k==="basic"){const It=await V4({CTRT_ID:$e,STRT_DTTM1:gt,STRT_DTTM2:rt,CALL_GB:"M"});H(It.slice(0,100))}else if(k==="lgu"){const It=await F4({CTRT_ID:$e,STRT_DTTM1:gt,STRT_DTTM2:rt,CALL_GB:"M"});me(It.slice(0,100))}else{const It=await zw({CTRT_ID:$e,STRT_DTTM1:gt,STRT_DTTM2:rt});be(It.slice(0,100))}const at=k==="basic"?Q.length:k==="lgu"?X.length:je.length;n==null||n(" .","success")}catch(gt){console.error("Signal history query error:",gt),n==null||n("  .","error")}finally{T(!1)}},lt=async $e=>{if(ae($e),ge([]),Re([]),!!$e.IF_DTL_ID){U(!0);try{const{svcRslt:gt,svcDtlRslt:Fe}=await $4($e.IF_DTL_ID);ge(gt),Re(Fe)}catch(gt){console.error("Detail query error:",gt)}finally{U(!1)}}},At=async $e=>{if(Z($e),te([]),!!$e.JOB_ID){U(!0);try{const gt=await Y4($e.JOB_ID);te(gt)}catch(gt){console.error("LGU detail query error:",gt)}finally{U(!1)}}},ot=d.filter($e=>$e.CTRT_STAT_NM===""||$e.CTRT_STAT==="10"),We=g==="active"?ot:d,Dt=C?We.filter($e=>($e.CTRT_ID||"").includes(C)||($e.BASIC_PROD_CD_NM||$e.PROD_NM||"").includes(C)||($e.ADDR||$e.INSTL_ADDR||"").includes(C)):We,Rt=(k==="basic"?Q.length:k==="lgu"?X.length:je.length)>0;return s.jsxs("div",{className:"flex-1 overflow-y-auto px-3 pt-2 pb-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 w-14 flex-shrink-0",children:""}),s.jsxs("button",{onClick:()=>i(!0),className:"flex-1 flex items-center gap-2 px-3 py-2.5 border border-gray-300 rounded-lg text-left hover:bg-gray-50 transition-colors",children:[l?s.jsxs("span",{className:"text-sm text-gray-900 truncate",children:[l.CUST_NM||"-"," (",l.CUST_ID,")"]}):s.jsx("span",{className:"text-sm text-gray-400",children:", ID, ID, "}),s.jsx(yu,{className:"h-4 w-4 text-gray-400 ml-auto flex-shrink-0"})]})]})}),M&&s.jsxs("div",{className:"text-center py-8 bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-[3px] border-blue-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"   ..."})]}),d.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("button",{onClick:()=>A(!R),className:"w-full px-3 py-2.5 border-b border-gray-100 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-800 flex items-center gap-1.5",children:[s.jsx("span",{className:"text-blue-500",children:"|"}),"   ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",Dt.length,")"]}),R&&f&&s.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-1",children:["- ",Te(f.CTRT_ID)," (",f.BASIC_PROD_CD_NM||f.PROD_NM||"",")"]})]}),R?s.jsx(or,{className:"h-4 w-4 text-gray-400"}):s.jsx(Wr,{className:"h-4 w-4 text-gray-400"})]}),!R&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-3 py-1.5 border-b border-gray-100 flex items-center justify-end",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsxs("button",{onClick:()=>N("all"),className:`px-2.5 py-1 text-xs rounded-full font-medium ${g==="all"?"bg-blue-500 text-white":"bg-gray-100 text-gray-500"}`,children:["(",d.length,")"]}),s.jsxs("button",{onClick:()=>N("active"),className:`px-2.5 py-1 text-xs rounded-full font-medium ${g==="active"?"bg-blue-500 text-white":"bg-gray-100 text-gray-500"}`,children:["(",ot.length,")"]})]})}),s.jsx("div",{className:"px-3 py-2 border-b border-gray-50",children:s.jsxs("div",{className:"relative",children:[s.jsx(e5,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-400"}),s.jsx("input",{type:"text",value:C,onChange:$e=>v($e.target.value),className:"w-full pl-8 pr-3 py-1.5 text-xs border border-gray-200 rounded-md bg-gray-50 focus:bg-white focus:border-blue-300 focus:outline-none",placeholder:"ID, ,  "})]})}),s.jsx("div",{className:`${p?"max-h-72":"max-h-44"} overflow-y-auto`,children:Dt.map(($e,gt)=>s.jsx("button",{onClick:()=>st($e),className:`w-full text-left px-3 py-2.5 border-b border-gray-50 transition-colors ${(f==null?void 0:f.CTRT_ID)===$e.CTRT_ID?"bg-blue-50 border-l-3 border-l-blue-500":"hover:bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-start gap-2.5",children:[s.jsx("span",{className:`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${(f==null?void 0:f.CTRT_ID)===$e.CTRT_ID?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:gt+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:$e.BASIC_PROD_CD_NM||$e.PROD_NM||"-"}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full flex-shrink-0 ml-2 ${$e.CTRT_STAT_NM===""?"bg-green-100 text-green-700":$e.CTRT_STAT_NM===""?"bg-blue-100 text-blue-600":$e.CTRT_STAT_NM===""?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:$e.CTRT_STAT_NM||"-"})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[s.jsxs("span",{children:[" ID: ",Te($e.CTRT_ID)]}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("span",{children:$e.SO_NM||"N/A"})]}),($e.ADDR||$e.INSTL_ADDR)&&s.jsx("p",{className:"mt-0.5 text-xs text-gray-400 truncate",children:$e.INSTL_ADDR||$e.ADDR})]})]})},$e.CTRT_ID||gt))}),Dt.length>3&&s.jsx("button",{onClick:()=>y(!p),className:"w-full py-1.5 text-xs text-blue-500 hover:bg-blue-50 flex items-center justify-center gap-1",children:p?s.jsxs(s.Fragment,{children:[s.jsx(Wr,{className:"h-3 w-3"})," "]}):s.jsxs(s.Fragment,{children:[s.jsx(or,{className:"h-3 w-3"})," "]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:J,onChange:$e=>$($e.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-blue-400 focus:outline-none",placeholder:"ID ",maxLength:15})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsx("input",{type:"date",value:Y,onChange:$e=>K($e.target.value),className:"flex-1 px-2 py-2 text-sm border border-gray-300 rounded-lg",style:{colorScheme:"light"}}),s.jsx("span",{className:"text-gray-400 text-sm",children:"~"}),s.jsx("input",{type:"date",value:w,onChange:$e=>se($e.target.value),className:"flex-1 px-2 py-2 text-sm border border-gray-300 rounded-lg",style:{colorScheme:"light"}})]}),s.jsx("button",{onClick:Nt,disabled:oe,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2.5 rounded-lg font-medium text-sm shadow-sm transition-all disabled:opacity-50",children:oe?" ...":""})]}),oe?s.jsxs("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-7 w-7 border-[3px] border-blue-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"  ..."})]}):Rt?s.jsxs(s.Fragment,{children:[k==="basic"&&Q.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",Q.length,")"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"w-full min-w-[780px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"(KCT)"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"SO_ID"})]})}),s.jsx("tbody",{children:Q.map(($e,gt)=>s.jsxs("tr",{onClick:()=>lt($e),className:`cursor-pointer transition-colors ${(q==null?void 0:q.IF_DTL_ID)===$e.IF_DTL_ID?"bg-blue-100":gt%2===0?"bg-white":"bg-gray-50/50"} hover:bg-blue-50`,children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.IF_DTL_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[140px] truncate",children:$e.PROD_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.MSG_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[120px] truncate",children:$e.MSG_ID_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:$e.RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:$e.RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:$e.PROC_RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:$e.PROC_RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.SO_ID||"-"})]},`${$e.IF_DTL_ID}-${gt}`))})]})})})]}),k==="basic"&&q&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["ID: ",q.IF_DTL_ID]})]})}),I?s.jsx("div",{className:"text-center py-6",children:s.jsx("div",{className:"inline-block animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent"})}):fe.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[700px]",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:fe.map(($e,gt)=>s.jsxs("tr",{className:gt%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.REQ_SYSTEM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.IF_DTL_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:re($e.REG_DTTM)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.IF_TP||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:$e.SYSTEM_RSLT_CD&&$e.SYSTEM_RSLT_CD.startsWith("0")?"text-green-600":"text-red-600",children:$e.SYSTEM_RSLT_CD||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.SYSTEM_RSLT_MSG||"-"})]},gt))})]})}):s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-xs text-gray-400",children:"  "})}),ce.length>0&&s.jsxs("div",{className:"border-t border-gray-200",children:[s.jsx("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-100",children:s.jsx("h4",{className:"text-xs font-semibold text-gray-700",children:" "})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[700px]",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-2 py-1.5 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-2 py-1.5 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "})]})}),s.jsx("tbody",{children:ce.map(($e,gt)=>{var Fe,rt;return s.jsxs("tr",{className:gt%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.IF_DTL_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.IF_TP||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:(Fe=$e.TMS_PROC_STATUS_NM)!=null&&Fe.includes("")?"text-green-600":"text-orange-600",children:$e.TMS_PROC_STATUS_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:(rt=$e.LS_PROC_STATUS_NM)!=null&&rt.includes("")?"text-green-600":"text-orange-600",children:$e.LS_PROC_STATUS_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.TMS_ERR_MSG||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.LS_ERR_MSG||"-"})]},gt)})})]})})]})]}),k==="lgu"&&X.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",X.length,")"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"w-full min-w-[780px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"(KCT)"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"SO_ID"})]})}),s.jsx("tbody",{children:X.map(($e,gt)=>s.jsxs("tr",{onClick:()=>At($e),className:`cursor-pointer transition-colors ${(he==null?void 0:he.JOB_ID)===$e.JOB_ID?"bg-blue-100":gt%2===0?"bg-white":"bg-gray-50/50"} hover:bg-blue-50`,children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.JOB_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[140px] truncate",children:$e.PROD_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.MSG_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[120px] truncate",children:$e.MSG_ID_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:$e.RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:$e.RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:$e.PROC_RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:$e.PROC_RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.SO_ID||"-"})]},`${$e.JOB_ID}-${gt}`))})]})})})]}),k==="lgu"&&he&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["ID: ",he.JOB_ID]})]})}),I?s.jsx("div",{className:"text-center py-6",children:s.jsx("div",{className:"inline-block animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent"})}):ie.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[700px]",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:ie.map(($e,gt)=>s.jsxs("tr",{className:gt%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.REQ_SYSTEM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.JOB_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:re($e.REG_DTTM)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.RS_FCODE||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:$e.RS_FCODE&&$e.RS_FCODE.startsWith("0")?"text-green-600":"text-red-600",children:$e.RS_FCODE||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.RS_FMSG||"-"})]},gt))})]})}):s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-xs text-gray-400",children:"  "})})]}),k==="ftth"&&je.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:["  ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",je.length,")"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"w-full min-w-[850px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"AP_MAC"}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:je.map(($e,gt)=>s.jsxs("tr",{className:gt%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.SEQ_API||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:$e.CMD||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[120px] truncate",children:$e.MSG_TP_DESC||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:re($e.REQ_DATE)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[140px] truncate",children:$e.RESULT||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:re($e.RES_DATE)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.MAC_ADDR||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:$e.SO_NM||"-"})]},`${$e.SEQ_API}-${gt}`))})]})})})]})]}):!oe&&J||oe?null:s.jsx("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-400",children:"  ID   "})}),s.jsx(Z3,{isOpen:r,onClose:()=>i(!1),onSelectCustomer:Se})]})},L5=({onClick:t,workCount:e})=>s.jsxs("button",{onClick:t,className:"fixed bottom-24 right-4 z-40 w-14 h-14 bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95",style:{boxShadow:"0 4px 14px rgba(59, 130, 246, 0.4)"},title:" ",children:[s.jsx(GL,{className:"w-6 h-6"}),e!==void 0&&e>0&&s.jsx("span",{className:"absolute -top-1 -right-1 min-w-5 h-5 px-1.5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:e>99?"99+":e})]}),il={ADD:"add",REMOVE:"remove"},bf={PROPERTYCHANGE:"propertychange"},Rn={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class s_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function eP(t,e,n){let r,i;n=n||Jc;let l=0,c=t.length,d=!1;for(;l<c;)r=l+(c-l>>1),i=+n(t[r],e),i<0?l=r+1:(c=r,d=!i);return d?l:~l}function Jc(t,e){return t>e?1:t<e?-1:0}function tP(t,e){return t<e?1:t>e?-1:0}function Rb(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){const l=t[i];if(l===e)return i;if(l<e)return n(e,t[i-1],l)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function sP(t,e,n){for(;e<n;){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function Tb(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function Du(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function nP(t,e,n){const r=e||Jc;return t.every(function(i,l){if(l===0)return!0;const c=r(t[l-1],i);return!(c>0||c===0)})}function Jm(){return!0}function n_(){return!1}function Zm(){}function w5(t){let e,n,r;return function(){const i=Array.prototype.slice.call(arguments);return(!n||this!==r||!Du(i,n))&&(r=this,n=i,e=t.apply(this,arguments)),e}}function rP(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function bg(t){for(const e in t)delete t[e]}function Nf(t){let e;for(e in t)return!1;return!e}class cd{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class r_ extends s_{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){const n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const l=n?new cd(e):e;l.target||(l.target=this.eventTarget_||this);const c=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});r in c||(c[r]=0,d[r]=0),++c[r];let u;for(let f=0,m=i.length;f<m;++f)if("handleEvent"in i[f]?u=i[f].handleEvent(l):u=i[f].call(this,l),u===!1||l.propagationStopped){u=!1;break}if(--c[r]===0){let f=d[r];for(delete d[r];f--;)this.removeEventListener(r,Zm);delete c[r]}return u}disposeInternal(){this.listeners_&&bg(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Zm,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function er(t,e,n,r,i){if(i){const c=n;n=function(d){return t.removeEventListener(e,n),c.call(r??this,d)}}else r&&r!==t&&(n=n.bind(r));const l={target:t,type:e,listener:n};return t.addEventListener(e,n),l}function Tp(t,e,n,r){return er(t,e,n,r,!0)}function Hr(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),bg(t))}class Ng extends r_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Rn.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let l=0;l<r;++l)i[l]=er(this,e[l],n);return i}return er(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let l=0;l<i;++l)r[l]=Tp(this,e[l],n)}else r=Tp(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)iP(r);else if(Array.isArray(e))for(let i=0,l=e.length;i<l;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}}Ng.prototype.on;Ng.prototype.once;Ng.prototype.un;function iP(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Hr(t[e]);else Hr(t)}function Zn(){throw new Error("Unimplemented abstract method.")}let aP=0;function tr(t){return t.ol_uid||(t.ol_uid=String(++aP))}class wv extends cd{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}class gc extends Ng{constructor(e){super(),this.on,this.once,this.un,tr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new wv(r,e,n)),r=bf.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new wv(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const i=this.values_||(this.values_={});if(r)i[e]=n;else{const l=i[e];i[e]=n,l!==n&&this.notify(e,l)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Nf(this.values_)&&(this.values_=null),n||this.notify(e,r)}}}const Pv={LENGTH:"length"};class Ix extends cd{constructor(e,n,r){super(e),this.element=n,this.index=r}}let Vl=class extends gc{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Pv.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new Ix(il.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Ix(il.REMOVE,n,e)),n}setAt(e,n){const r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new Ix(il.REMOVE,i,e)),this.dispatchEvent(new Ix(il.ADD,n,e))}updateLength_(){this.set(Pv.LENGTH,this.array_.length)}assertUnique_(e,n){const r=this.array_;for(let i=0,l=r.length;i<l;++i)if(r[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}};class U0 extends cd{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}}class Zd extends U0{constructor(e,n,r,i,l,c){super(e,n,l),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=c}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const hi={SINGLECLICK:"singleclick",CLICK:Rn.CLICK,DBLCLICK:Rn.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},yh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",lP=yh.includes("safari")&&!yh.includes("chrom");lP&&(yh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(yh));const oP=yh.includes("webkit")&&!yh.includes("edge"),P5=yh.includes("macintosh"),cP=typeof devicePixelRatio<"u"?devicePixelRatio:1,$l=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,A5=typeof Image<"u"&&Image.prototype.decode,k5=(function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t})(),Sy={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class dP extends r_{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=er(r,Sy.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=er(r,Sy.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Rn.TOUCHMOVE,this.boundHandleTouchMove_,k5?{passive:!1}:!1)}emulateClick_(e){let n=new Zd(hi.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Zd(hi.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Zd(hi.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const n=e,r=n.pointerId;if(n.type==hi.POINTERUP||n.type==hi.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==hi.POINTERDOWN||n.type==hi.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Zd(hi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Hr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Zd(hi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(er(r,hi.POINTERMOVE,this.handlePointerMove_,this),er(r,hi.POINTERUP,this.handlePointerUp_,this),er(this.element_,hi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(er(this.element_.getRootNode(),hi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Zd(hi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Zd(hi.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Hr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Rn.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Hr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Hr),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const eu={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Da={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ln={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function dr(t,e){if(!t)throw new Error(e)}const Ep=1/0;class uP{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,bg(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){dr(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=Ep?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,r=this.priorities_,i=n.length,l=n[e],c=r[e],d=e;for(;e<i>>1;){const u=this.getLeftChildIndex_(e),f=this.getRightChildIndex_(e),m=f<i&&r[f]<r[u]?f:u;n[e]=n[m],r[e]=r[m],e=m}n[e]=l,r[e]=c,this.siftDown_(d,e)}siftDown_(e,n){const r=this.elements_,i=this.priorities_,l=r[n],c=i[n];for(;n>e;){const d=this.getParentIndex_(n);if(i[d]>c)r[n]=r[d],i[n]=i[d],n=d;else break}r[n]=l,i[n]=c}reprioritize(){const e=this.priorityFunction_,n=this.elements_,r=this.priorities_;let i=0;const l=n.length;let c,d,u;for(d=0;d<l;++d)c=n[d],u=e(c),u==Ep?delete this.queuedElements_[this.keyFunction_(c)]:(r[i]=u,n[i++]=c);n.length=i,r.length=i,this.heapify_()}}class hP extends uP{constructor(e,n){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(Rn.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,r=n.getState();if(r===ln.LOADED||r===ln.ERROR||r===ln.EMPTY){r!==ln.ERROR&&n.removeEventListener(Rn.CHANGE,this.boundHandleTileChange_);const i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;){const i=this.dequeue()[0],l=i.getKey();i.getState()===ln.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++r,i.load())}}}function fP(t,e,n,r,i){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return Ep;const l=t.viewState.center,c=r[0]-l[0],d=r[1]-l[1];return 65536*Math.log(i)+Math.sqrt(c*c+d*d)/i}const Ra={ANIMATING:0,INTERACTING:1},So={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function zr(t,e,n){return Math.min(Math.max(t,e),n)}function mP(t,e,n,r,i,l){const c=i-n,d=l-r;if(c!==0||d!==0){const u=((t-n)*c+(e-r)*d)/(c*c+d*d);u>1?(n=i,r=l):u>0&&(n+=c*u,r+=d*u)}return q0(t,e,n,r)}function q0(t,e,n,r){const i=n-t,l=r-e;return i*i+l*l}function gP(t){const e=t.length;for(let r=0;r<e;r++){let i=r,l=Math.abs(t[r][r]);for(let d=r+1;d<e;d++){const u=Math.abs(t[d][r]);u>l&&(l=u,i=d)}if(l===0)return null;const c=t[i];t[i]=t[r],t[r]=c;for(let d=r+1;d<e;d++){const u=-t[d][r]/t[r][r];for(let f=r;f<e+1;f++)r==f?t[d][f]=0:t[d][f]+=u*t[r][f]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function Av(t){return t*180/Math.PI}function pu(t){return t*Math.PI/180}function X0(t,e){const n=t%e;return n*e<0?n+e:n}function Gl(t,e,n){return t+n*(e-t)}function i_(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function Ox(t,e){return Math.floor(i_(t,e))}function Mx(t,e){return Math.ceil(i_(t,e))}function vy(t,e,n){if(t>=e&&t<n)return t;const r=n-e;return((t-e)%r+r)%r+e}function kv(t,e,n){return(function(r,i,l,c,d){if(!r)return;if(!i&&!e)return r;const u=e?0:l[0]*i,f=e?0:l[1]*i,m=d?d[0]:0,p=d?d[1]:0;let y=t[0]+u/2+m,g=t[2]-u/2+m,N=t[1]+f/2+p,C=t[3]-f/2+p;y>g&&(y=(g+y)/2,g=y),N>C&&(N=(C+N)/2,C=N);let v=zr(r[0],y,g),R=zr(r[1],N,C);if(c&&n&&i){const A=30*i;v+=-A*Math.log(1+Math.max(0,y-r[0])/A)+A*Math.log(1+Math.max(0,r[0]-g)/A),R+=-A*Math.log(1+Math.max(0,N-r[1])/A)+A*Math.log(1+Math.max(0,r[1]-C)/A)}return[v,R]})}function xP(t){return t}const na={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Dy(t){const e=Zl();for(let n=0,r=t.length;n<r;++n)Qm(e,t[n]);return e}function Eb(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function U5(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function W5(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function Sf(t,e){return B5(t,e[0],e[1])}function Mm(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function B5(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Ry(t,e){const n=t[0],r=t[1],i=t[2],l=t[3],c=e[0],d=e[1];let u=na.UNKNOWN;return c<n?u=u|na.LEFT:c>i&&(u=u|na.RIGHT),d<r?u=u|na.BELOW:d>l&&(u=u|na.ABOVE),u===na.UNKNOWN&&(u=na.INTERSECTING),u}function Zl(){return[1/0,1/0,-1/0,-1/0]}function bu(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function a_(t){return bu(1/0,1/0,-1/0,-1/0,t)}function F5(t,e){const n=t[0],r=t[1];return bu(n,r,n,r,e)}function jb(t,e,n,r,i){const l=a_(i);return K5(l,t,e,n,r)}function eg(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function pP(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Qm(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function K5(t,e,n,r,i){for(;n<r;n+=i)_P(t,e[n],e[n+1]);return t}function _P(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Q5(t,e){let n;return n=e(l_(t)),n||(n=e(o_(t)),n)||(n=e(c_(t)),n)||(n=e(wh(t)),n)?n:!1}function Ty(t){let e=0;return Sg(t)||(e=pr(t)*Ua(t)),e}function l_(t){return[t[0],t[1]]}function o_(t){return[t[2],t[1]]}function bh(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function CP(t,e){let n;if(e==="bottom-left")n=l_(t);else if(e==="bottom-right")n=o_(t);else if(e==="top-left")n=wh(t);else if(e==="top-right")n=c_(t);else throw new Error("Invalid corner");return n}function Ey(t,e,n,r,i){const[l,c,d,u,f,m,p,y]=G5(t,e,n,r);return bu(Math.min(l,d,f,p),Math.min(c,u,m,y),Math.max(l,d,f,p),Math.max(c,u,m,y),i)}function G5(t,e,n,r){const i=e*r[0]/2,l=e*r[1]/2,c=Math.cos(n),d=Math.sin(n),u=i*c,f=i*d,m=l*c,p=l*d,y=t[0],g=t[1];return[y-u+p,g-f-m,y-u-p,g-f+m,y+u-p,g+f+m,y+u+p,g+f-m,y-u+p,g-f-m]}function Ua(t){return t[3]-t[1]}function fh(t,e,n){const r=n||Zl();return ol(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):a_(r),r}function wh(t){return[t[0],t[3]]}function c_(t){return[t[2],t[3]]}function pr(t){return t[2]-t[0]}function ol(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Sg(t){return t[2]<t[0]||t[3]<t[1]}function yP(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function bP(t,e,n){let r=!1;const i=Ry(t,e),l=Ry(t,n);if(i===na.INTERSECTING||l===na.INTERSECTING)r=!0;else{const c=t[0],d=t[1],u=t[2],f=t[3],m=e[0],p=e[1],y=n[0],g=n[1],N=(g-p)/(y-m);let C,v;l&na.ABOVE&&!(i&na.ABOVE)&&(C=y-(g-f)/N,r=C>=c&&C<=u),!r&&l&na.RIGHT&&!(i&na.RIGHT)&&(v=g-(y-u)*N,r=v>=d&&v<=f),!r&&l&na.BELOW&&!(i&na.BELOW)&&(C=y-(g-d)/N,r=C>=c&&C<=u),!r&&l&na.LEFT&&!(i&na.LEFT)&&(v=g-(y-c)*N,r=v>=d&&v<=f)}return r}function Y5(t,e){const n=e.getExtent(),r=bh(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const i=pr(n),c=Math.floor((r[0]-n[0])/i)*i;t[0]-=c,t[2]-=c}return t}function V5(t,e,n){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];Y5(t,e);const i=pr(r);if(pr(t)>i&&!n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+i,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-i,t[3]]]}return[t]}function NP(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function jp(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function Ib(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,l=t[1]*n+t[0]*r;return t[0]=i,t[1]=l,t}function SP(t,e){return t[0]*=e,t[1]*=e,t}function $5(t,e){if(e.canWrapX()){const n=pr(e.getExtent()),r=vP(t,e,n);r&&(t[0]-=r*n)}return t}function vP(t,e,n){const r=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||pr(r),i=Math.floor((t[0]-r[0])/n)),i}function DP(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=[(e[0]-t[0])/r,(e[1]-t[1])/r],l=[-i[1],i[0]],c=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),d=[(n[0]-t[0])/c,(n[1]-t[1])/c];let u=r===0||c===0?0:Math.acos(zr(d[0]*i[0]+d[1]*i[1],-1,1));return u=Math.max(u,1e-5),d[0]*l[0]+d[1]*l[1]>0?u:Math.PI*2-u}function H5(t){return Math.pow(t,3)}function Of(t){return 1-H5(1-t)}function RP(t){return 3*t*t-2*t*t*t}function TP(t){return t}const EP=63710088e-1;function Uv(t,e,n){n=n||EP;const r=pu(t[1]),i=pu(e[1]),l=(i-r)/2,c=pu(e[0]-t[0])/2,d=Math.sin(l)*Math.sin(l)+Math.sin(c)*Math.sin(c)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}function z5(...t){console.warn(...t)}const Ob={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Mb{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ob[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const vg=6378137,G0=Math.PI*vg,jP=[-G0,-G0,G0,G0],IP=[-180,-85,180,85],Lx=vg*Math.log(Math.tan(Math.PI/2));class S0 extends Mb{constructor(e){super({code:e,units:"m",extent:jP,global:!0,worldExtent:IP,getPointResolution:function(n,r){return n/Math.cosh(r[1]/vg)}})}}const Wv=[new S0("EPSG:3857"),new S0("EPSG:102100"),new S0("EPSG:102113"),new S0("EPSG:900913"),new S0("http://www.opengis.net/def/crs/EPSG/0/3857"),new S0("http://www.opengis.net/gml/srs/epsg.xml#3857")];function OP(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let l=0;l<i;l+=r){e[l]=G0*t[l]/180;let c=vg*Math.log(Math.tan(Math.PI*(+t[l+1]+90)/360));c>Lx?c=Lx:c<-Lx&&(c=-Lx),e[l+1]=c}return e}function MP(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let l=0;l<i;l+=r)e[l]=180*t[l]/G0,e[l+1]=360*Math.atan(Math.exp(t[l+1]/vg))/Math.PI-90;return e}const LP=6378137,Bv=[-180,-90,180,90],wP=Math.PI*LP/180;class Gu extends Mb{constructor(e,n){super({code:e,units:"degrees",extent:Bv,axisOrientation:n,global:!0,metersPerUnit:wP,worldExtent:Bv})}}const Fv=[new Gu("CRS:84"),new Gu("EPSG:4326","neu"),new Gu("urn:ogc:def:crs:OGC:1.3:CRS84"),new Gu("urn:ogc:def:crs:OGC:2:84"),new Gu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Gu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Gu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let jy={};function PP(t){return jy[t]||jy[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function AP(t,e){jy[t]=e}let J0={};function tg(t,e,n){const r=t.getCode(),i=e.getCode();r in J0||(J0[r]={}),J0[r][i]=n}function sC(t,e){return t in J0&&e in J0[t]?J0[t][e]:null}const Ip=.9996,Xl=.00669438,d_=Xl*Xl,u_=d_*Xl,eh=Xl/(1-Xl),Kv=Math.sqrt(1-Xl),vf=(1-Kv)/(1+Kv),q5=vf*vf,Lb=q5*vf,wb=Lb*vf,X5=wb*vf,J5=1-Xl/4-3*d_/64-5*u_/256,kP=3*Xl/8+3*d_/32+45*u_/1024,UP=15*d_/256+45*u_/1024,WP=35*u_/3072,BP=3/2*vf-27/32*Lb+269/512*X5,FP=21/16*q5-55/32*wb,KP=151/96*Lb-417/128*X5,QP=1097/512*wb,Op=6378137;function GP(t,e,n){const r=t-5e5,c=(n.north?e:e-1e7)/Ip/(Op*J5),d=c+BP*Math.sin(2*c)+FP*Math.sin(4*c)+KP*Math.sin(6*c)+QP*Math.sin(8*c),u=Math.sin(d),f=u*u,m=Math.cos(d),p=u/m,y=p*p,g=y*y,N=1-Xl*f,C=Math.sqrt(1-Xl*f),v=Op/C,R=(1-Xl)/N,A=eh*m**2,M=A*A,L=r/(v*Ip),k=L*L,V=k*L,G=V*L,W=G*L,j=W*L,S=d-p/R*(k/2-G/24*(5+3*y+10*A-4*M-9*eh))+j/720*(61+90*y+298*A+45*g-252*eh-3*M);let P=(L-V/6*(1+2*y+A)+W/120*(5-2*A+28*y-3*M+8*eh+24*g))/m;return P=vy(P+pu(Z5(n.number)),-Math.PI,Math.PI),[Av(P),Av(S)]}const Qv=-80,Gv=84,YP=-180,VP=180;function $P(t,e,n){t=vy(t,YP,VP),e<Qv?e=Qv:e>Gv&&(e=Gv);const r=pu(e),i=Math.sin(r),l=Math.cos(r),c=i/l,d=c*c,u=d*d,f=pu(t),m=Z5(n.number),p=pu(m),y=Op/Math.sqrt(1-Xl*i**2),g=eh*l**2,N=l*vy(f-p,-Math.PI,Math.PI),C=N*N,v=C*N,R=v*N,A=R*N,M=A*N,L=Op*(J5*r-kP*Math.sin(2*r)+UP*Math.sin(4*r)-WP*Math.sin(6*r)),k=Ip*y*(N+v/6*(1-d+g)+A/120*(5-18*d+u+72*g-58*eh))+5e5;let V=Ip*(L+y*c*(C/2+R/24*(5-d+9*g+4*g**2)+M/720*(61-58*d+u+600*g-330*eh)));return n.north||(V+=1e7),[k,V]}function Z5(t){return(t-1)*6-180+3}const HP=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function eE(t){let e=0;for(const i of HP){const l=t.match(i);if(l){e=parseInt(l[1]);break}}if(!e)return null;let n=0,r=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(r=!0,n=e-32600),n?{number:n,north:r}:null}function Yv(t,e){return function(n,r,i,l){const c=n.length;i=i>1?i:2,l=l??i,r||(i>2?r=n.slice():r=new Array(c));for(let d=0;d<c;d+=l){const u=n[d],f=n[d+1],m=t(u,f,e);r[d]=m[0],r[d+1]=m[1]}return r}}function zP(t){return eE(t)?new Mb({code:t,units:"m"}):null}function qP(t){const e=eE(t.getCode());return e?{forward:Yv($P,e),inverse:Yv(GP,e)}:null}const XP=[qP],JP=[zP];let Iy=!0;function tE(t){Iy=!1}function Pb(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function Oy(t){AP(t.getCode(),t),tg(t,t,Pb)}function ZP(t){t.forEach(Oy)}function hl(t){if(typeof t!="string")return t;const e=PP(t);if(e)return e;for(const n of JP){const r=n(t);if(r)return r}return null}function Vv(t,e,n,r){t=hl(t);let i;const l=t.getPointResolutionFunc();if(l)i=l(e,n);else{const c=t.getUnits();if(c=="degrees"&&!r||r=="degrees")i=e;else{const d=kb(t,hl("EPSG:4326"));if(!d&&c!=="degrees")i=e*t.getMetersPerUnit();else{let f=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];f=d(f,f,2);const m=Uv(f.slice(0,2),f.slice(2,4)),p=Uv(f.slice(4,6),f.slice(6,8));i=(m+p)/2}const u=t.getMetersPerUnit();u!==void 0&&(i/=u)}}return i}function $v(t){ZP(t),t.forEach(function(e){t.forEach(function(n){e!==n&&tg(e,n,Pb)})})}function eA(t,e,n,r){t.forEach(function(i){e.forEach(function(l){tg(i,l,n),tg(l,i,r)})})}function Ab(t,e){return t?typeof t=="string"?hl(t):t:hl(e)}function tA(t){return(function(e,n,r,i){const l=e.length;r=r!==void 0?r:2,i=i??r,n=n!==void 0?n:new Array(l);for(let c=0;c<l;c+=i){const d=t(e.slice(c,c+r)),u=d.length;for(let f=0,m=i;f<m;++f)n[c+f]=f>=u?e[c+f]:d[f]}return n})}function kc(t,e){return tE(),Ub(t,"EPSG:4326","EPSG:3857")}function ap(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||kb(t,e)===Pb)&&n}function kb(t,e){const n=t.getCode(),r=e.getCode();let i=sC(n,r);if(i)return i;let l=null,c=null;for(const u of XP)l||(l=u(t)),c||(c=u(e));if(!l&&!c)return null;const d="EPSG:4326";if(c)if(l)i=nC(l.inverse,c.forward);else{const u=sC(n,d);u&&(i=nC(u,c.forward))}else{const u=sC(d,r);u&&(i=nC(l.inverse,u))}return i&&(Oy(t),Oy(e),tg(t,e,i)),i}function nC(t,e){return function(n,r,i,l){return r=t(n,r,i,l),e(r,r,i,l)}}function Mp(t,e){const n=hl(t),r=hl(e);return kb(n,r)}function Ub(t,e,n){const r=Mp(e,n);if(!r){const i=hl(e).getCode(),l=hl(n).getCode();throw new Error(`No transform available between ${i} and ${l}`)}return r(t,void 0,t.length)}function My(t,e){return t}function Gc(t,e){return Iy&&!jp(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Iy=!1,z5("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function sE(t,e){return t}function uu(t,e){return t}function sA(){$v(Wv),$v(Fv),eA(Fv,Wv,OP,MP)}sA();new Array(6);function Io(){return[1,0,0,1,0,0]}function nA(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ra(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function id(t,e,n,r,i,l,c,d){const u=Math.sin(l),f=Math.cos(l);return t[0]=r*f,t[1]=i*u,t[2]=-r*u,t[3]=i*f,t[4]=c*r*f-d*r*u+e,t[5]=c*i*u+d*i*f+n,t}function nE(t,e){const n=rA(e);dr(n!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],l=e[2],c=e[3],d=e[4],u=e[5];return t[0]=c/n,t[1]=-i/n,t[2]=-l/n,t[3]=r/n,t[4]=(l*u-c*d)/n,t[5]=-(r*u-i*d)/n,t}function rA(t){return t[0]*t[3]-t[1]*t[2]}const iA=[1e5,1e5,1e5,1e5,2,2];function aA(t){return"matrix("+t.join(", ")+")"}function Ly(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function lA(t,e){const n=Ly(t),r=Ly(e);for(let i=0;i<6;++i)if(Math.round((n[i]-r[i])*iA[i])!==0)return!1;return!0}function _u(t,e,n,r,i,l,c){l=l||[],c=c||2;let d=0;for(let u=e;u<n;u+=r){const f=t[u],m=t[u+1];l[d++]=i[0]*f+i[2]*m+i[4],l[d++]=i[1]*f+i[3]*m+i[5];for(let p=2;p<c;p++)l[d++]=t[u+p]}return l&&l.length!=d&&(l.length=d),l}function rE(t,e,n,r,i,l,c){c=c||[];const d=Math.cos(i),u=Math.sin(i),f=l[0],m=l[1];let p=0;for(let y=e;y<n;y+=r){const g=t[y]-f,N=t[y+1]-m;c[p++]=f+g*d-N*u,c[p++]=m+g*u+N*d;for(let C=y+2;C<y+r;++C)c[p++]=t[C]}return c&&c.length!=p&&(c.length=p),c}function oA(t,e,n,r,i,l,c,d){d=d||[];const u=c[0],f=c[1];let m=0;for(let p=e;p<n;p+=r){const y=t[p]-u,g=t[p+1]-f;d[m++]=u+i*y,d[m++]=f+l*g;for(let N=p+2;N<p+r;++N)d[m++]=t[N]}return d&&d.length!=m&&(d.length=m),d}function cA(t,e,n,r,i,l,c){c=c||[];let d=0;for(let u=e;u<n;u+=r){c[d++]=t[u]+i,c[d++]=t[u+1]+l;for(let f=u+2;f<u+r;++f)c[d++]=t[f]}return c&&c.length!=d&&(c.length=d),c}const Hv=Io(),dA=[NaN,NaN];class uA extends gc{constructor(){super(),this.extent_=Zl(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=w5((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return Zn()}closestPointXY(e,n,r,i){return Zn()}containsXY(e,n){return this.closestPointXY(e,n,dA,Number.MIN_VALUE)===0}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Zn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&a_(n),this.extentRevision_=this.getRevision()}return yP(this.extent_,e)}rotate(e,n){Zn()}scale(e,n,r){Zn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Zn()}getType(){return Zn()}applyTransform(e){Zn()}intersectsExtent(e){return Zn()}translate(e,n){Zn()}transform(e,n){const r=hl(e),i=r.getUnits()=="tile-pixels"?function(l,c,d){const u=r.getExtent(),f=r.getWorldExtent(),m=Ua(f)/Ua(u);id(Hv,f[0],f[3],m,-m,0,0,0);const p=_u(l,0,l.length,d,Hv,c),y=Mp(r,n);return y?y(p,p,d):p}:Mp(r,n);return this.applyTransform(i),this}}class Wb extends uA{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return jb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Zn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=zv(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){Zn()}setLayout(e,n,r){let i;if(e)i=zv(e);else{for(let l=0;l<r;++l){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=hA(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();rE(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=bh(this.getExtent()));const i=this.getFlatCoordinates();if(i){const l=this.getStride();oA(i,0,i.length,l,e,n,r,i),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();cA(r,0,r.length,i,e,n,r),this.changed()}}}function hA(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function zv(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function fA(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return _u(r,0,r.length,i,e,n)}function iE(t,e,n,r){let i=0;const l=t[n-r],c=t[n-r+1];let d=0,u=0;for(;e<n;e+=r){const f=t[e]-l,m=t[e+1]-c;i+=u*f-d*m,d=f,u=m}return i/2}function mA(t,e,n,r){let i=0;for(let l=0,c=n.length;l<c;++l){const d=n[l];i+=iE(t,e,d,r),e=d}return i}function qv(t,e,n,r,i,l,c){const d=t[e],u=t[e+1],f=t[n]-d,m=t[n+1]-u;let p;if(f===0&&m===0)p=e;else{const y=((i-d)*f+(l-u)*m)/(f*f+m*m);if(y>1)p=n;else if(y>0){for(let g=0;g<r;++g)c[g]=Gl(t[e+g],t[n+g],y);c.length=r;return}else p=e}for(let y=0;y<r;++y)c[y]=t[p+y];c.length=r}function aE(t,e,n,r,i){let l=t[e],c=t[e+1];for(e+=r;e<n;e+=r){const d=t[e],u=t[e+1],f=q0(l,c,d,u);f>i&&(i=f),l=d,c=u}return i}function gA(t,e,n,r,i){for(let l=0,c=n.length;l<c;++l){const d=n[l];i=aE(t,e,d,r,i),e=d}return i}function lE(t,e,n,r,i,l,c,d,u,f,m){if(e==n)return f;let p,y;if(i===0){if(y=q0(c,d,t[e],t[e+1]),y<f){for(p=0;p<r;++p)u[p]=t[e+p];return u.length=r,y}return f}m=m||[NaN,NaN];let g=e+r;for(;g<n;)if(qv(t,g-r,g,r,c,d,m),y=q0(c,d,m[0],m[1]),y<f){for(f=y,p=0;p<r;++p)u[p]=m[p];u.length=r,g+=r}else g+=r*Math.max((Math.sqrt(y)-Math.sqrt(f))/i|0,1);if(qv(t,n-r,e,r,c,d,m),y=q0(c,d,m[0],m[1]),y<f){for(f=y,p=0;p<r;++p)u[p]=m[p];u.length=r}return f}function xA(t,e,n,r,i,l,c,d,u,f,m){m=m||[NaN,NaN];for(let p=0,y=n.length;p<y;++p){const g=n[p];f=lE(t,e,g,r,i,l,c,d,u,f,m),e=g}return f}function pA(t,e,n,r){for(let i=0,l=n.length;i<l;++i)t[e++]=n[i];return e}function oE(t,e,n,r){for(let i=0,l=n.length;i<l;++i){const c=n[i];for(let d=0;d<r;++d)t[e++]=c[d]}return e}function _A(t,e,n,r,i){i=i||[];let l=0;for(let c=0,d=n.length;c<d;++c){const u=oE(t,e,n[c],r);i[l++]=u,e=u}return i.length=l,i}function Y0(t,e,n,r,i){i=i!==void 0?i:[];let l=0;for(let c=e;c<n;c+=r)i[l++]=t.slice(c,c+r);return i.length=l,i}function Lp(t,e,n,r,i){i=i!==void 0?i:[];let l=0;for(let c=0,d=n.length;c<d;++c){const u=n[c];i[l++]=Y0(t,e,u,r,i[l]),e=u}return i.length=l,i}function Xv(t,e,n,r,i){i=i!==void 0?i:[];let l=0;for(let c=0,d=n.length;c<d;++c){const u=n[c];i[l++]=u.length===1&&u[0]===e?[]:Lp(t,e,u,r,i[l]),e=u[u.length-1]}return i.length=l,i}function Bb(t,e,n,r,i,l,c){const d=(n-e)/r;if(d<3){for(;e<n;e+=r)l[c++]=t[e],l[c++]=t[e+1];return c}const u=new Array(d);u[0]=1,u[d-1]=1;const f=[e,n-r];let m=0;for(;f.length>0;){const p=f.pop(),y=f.pop();let g=0;const N=t[y],C=t[y+1],v=t[p],R=t[p+1];for(let A=y+r;A<p;A+=r){const M=t[A],L=t[A+1],k=mP(M,L,N,C,v,R);k>g&&(m=A,g=k)}g>i&&(u[(m-e)/r]=1,y+r<m&&f.push(y,m),m+r<p&&f.push(m,p))}for(let p=0;p<d;++p)u[p]&&(l[c++]=t[e+p*r],l[c++]=t[e+p*r+1]);return c}function CA(t,e,n,r,i,l,c,d){for(let u=0,f=n.length;u<f;++u){const m=n[u];c=Bb(t,e,m,r,i,l,c),d.push(c),e=m}return c}function Hu(t,e){return e*Math.round(t/e)}function yA(t,e,n,r,i,l,c){if(e==n)return c;let d=Hu(t[e],i),u=Hu(t[e+1],i);e+=r,l[c++]=d,l[c++]=u;let f,m;do if(f=Hu(t[e],i),m=Hu(t[e+1],i),e+=r,e==n)return l[c++]=f,l[c++]=m,c;while(f==d&&m==u);for(;e<n;){const p=Hu(t[e],i),y=Hu(t[e+1],i);if(e+=r,p==f&&y==m)continue;const g=f-d,N=m-u,C=p-d,v=y-u;if(g*v==N*C&&(g<0&&C<g||g==C||g>0&&C>g)&&(N<0&&v<N||N==v||N>0&&v>N)){f=p,m=y;continue}l[c++]=f,l[c++]=m,d=f,u=m,f=p,m=y}return l[c++]=f,l[c++]=m,c}function cE(t,e,n,r,i,l,c,d){for(let u=0,f=n.length;u<f;++u){const m=n[u];c=yA(t,e,m,r,i,l,c),d.push(c),e=m}return c}class sg extends Wb{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new sg(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<W5(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return iE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Y0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=Bb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new sg(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=oE(this.flatCoordinates,0,e,this.stride),this.changed()}}class Z0 extends Wb{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Z0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const l=this.flatCoordinates,c=q0(e,n,l[0],l[1]);if(c<i){const d=this.stride;for(let u=0;u<d;++u)r[u]=l[u];return r.length=d,c}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return F5(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return B5(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pA(this.flatCoordinates,0,e,this.stride),this.changed()}}function bA(t,e,n,r,i){return!Q5(i,function(c){return!th(t,e,n,r,c[0],c[1])})}function th(t,e,n,r,i,l){let c=0,d=t[n-r],u=t[n-r+1];for(;e<n;e+=r){const f=t[e],m=t[e+1];u<=l?m>l&&(f-d)*(l-u)-(i-d)*(m-u)>0&&c++:m<=l&&(f-d)*(l-u)-(i-d)*(m-u)<0&&c--,d=f,u=m}return c!==0}function dE(t,e,n,r,i,l){if(n.length===0||!th(t,e,n[0],r,i,l))return!1;for(let c=1,d=n.length;c<d;++c)if(th(t,n[c-1],n[c],r,i,l))return!1;return!0}function Fb(t,e,n,r,i,l,c){let d,u,f,m,p,y,g;const N=i[l+1],C=[];for(let A=0,M=n.length;A<M;++A){const L=n[A];for(m=t[L-r],y=t[L-r+1],d=e;d<L;d+=r)p=t[d],g=t[d+1],(N<=y&&g<=N||y<=N&&N<=g)&&(f=(N-y)/(g-y)*(p-m)+m,C.push(f)),m=p,y=g}let v=NaN,R=-1/0;for(C.sort(Jc),m=C[0],d=1,u=C.length;d<u;++d){p=C[d];const A=Math.abs(p-m);A>R&&(f=(m+p)/2,dE(t,e,n,r,f,N)&&(v=f,R=A)),m=p}return isNaN(v)&&(v=i[l]),c?(c.push(v,N,R),c):[v,N,R]}function NA(t,e,n,r,i){let l=[];for(let c=0,d=n.length;c<d;++c){const u=n[c];l=Fb(t,e,u,r,i,2*c,l),e=u[u.length-1]}return l}function SA(t,e,n,r,i){let l;for(e+=r;e<n;e+=r)if(l=i(t.slice(e-r,e),t.slice(e,e+r)),l)return l;return!1}function uE(t,e,n,r,i,l){return l=l??K5(Zl(),t,e,n,r),ol(i,l)?l[0]>=i[0]&&l[2]<=i[2]||l[1]>=i[1]&&l[3]<=i[3]?!0:SA(t,e,n,r,function(c,d){return bP(i,c,d)}):!1}function hE(t,e,n,r,i){return!!(uE(t,e,n,r,i)||th(t,e,n,r,i[0],i[1])||th(t,e,n,r,i[0],i[3])||th(t,e,n,r,i[2],i[1])||th(t,e,n,r,i[2],i[3]))}function vA(t,e,n,r,i){if(!hE(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let l=1,c=n.length;l<c;++l)if(bA(t,n[l-1],n[l],r,i)&&!uE(t,n[l-1],n[l],r,i))return!1;return!0}function DA(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){const l=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=l}e+=r,n-=r}}function Kb(t,e,n,r){let i=0,l=t[n-r],c=t[n-r+1];for(;e<n;e+=r){const d=t[e],u=t[e+1];i+=(d-l)*(u+c),l=d,c=u}return i===0?void 0:i>0}function RA(t,e,n,r,i){i=i!==void 0?i:!1;for(let l=0,c=n.length;l<c;++l){const d=n[l],u=Kb(t,e,d,r);if(l===0){if(i&&u||!i&&!u)return!1}else if(i&&!u||!i&&u)return!1;e=d}return!0}function Jv(t,e,n,r,i){i=i!==void 0?i:!1;for(let l=0,c=n.length;l<c;++l){const d=n[l],u=Kb(t,e,d,r);(l===0?i&&u||!i&&!u:i&&!u||!i&&u)&&DA(t,e,d,r),e=d}return e}function TA(t,e){const n=[];let r=0,i=0,l;for(let c=0,d=e.length;c<d;++c){const u=e[c],f=Kb(t,r,u,2);if(l===void 0&&(l=f),f===l)n.push(e.slice(i,c+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=c+1,r=u}return n}class ng extends Wb{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?Tb(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ng(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<W5(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gA(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xA(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return dE(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return mA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Jv(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,Lp(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=bh(this.getExtent());this.flatInteriorPoint_=Fb(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Z0(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new sg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[];let l=0;for(let c=0,d=r.length;c<d;++c){const u=r[c],f=new sg(n.slice(l,u),e);i.push(f),l=u}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;RA(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Jv(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=cE(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new ng(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return vA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=_A(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function Zv(t){if(Sg(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],l=[e,n,e,i,r,i,r,n,e,n];return new ng(l,"XY",[l.length])}function Qb(t,e,n,r){const i=pr(e)/n[0],l=Ua(e)/n[1];return r?Math.min(t,Math.max(i,l)):Math.min(t,Math.min(i,l))}function Gb(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),zr(r,n/2,e*2)}function EA(t,e,n,r){return e=e!==void 0?e:!0,(function(i,l,c,d){if(i!==void 0){const u=t[0],f=t[t.length-1],m=n?Qb(u,n,c,r):u;if(d)return e?Gb(i,m,f):zr(i,f,m);const p=Math.min(m,i),y=Math.floor(Rb(t,p,l));return t[y]>m&&y<t.length-1?t[y+1]:t[y]}})}function jA(t,e,n,r,i,l){return r=r!==void 0?r:!0,n=n!==void 0?n:0,(function(c,d,u,f){if(c!==void 0){const m=i?Qb(e,i,u,l):e;if(f)return r?Gb(c,m,n):zr(c,n,m);const p=1e-9,y=Math.ceil(Math.log(e/m)/Math.log(t)-p),g=-d*(.5-p)+.5,N=Math.min(m,c),C=Math.floor(Math.log(e/N)/Math.log(t)+g),v=Math.max(y,C),R=e/Math.pow(t,v);return zr(R,n,m)}})}function eD(t,e,n,r,i){return n=n!==void 0?n:!0,(function(l,c,d,u){if(l!==void 0){const f=r?Qb(t,r,d,i):t;return!n||!u?zr(l,e,f):Gb(l,f,e)}})}function Yb(t){if(t!==void 0)return 0}function tD(t){if(t!==void 0)return t}function IA(t){const e=2*Math.PI/t;return(function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n})}function OA(t){const e=pu(5);return(function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n})}const MA=42,Vb=256,rC=0;class ic extends gc{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Ab(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&tE(),e.center&&(e.center=Gc(e.center,this.projection_)),e.extent&&(e.extent=uu(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const d in So)delete n[d];this.setProperties(n,!0);const r=wA(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=LA(e),l=r.constraint,c=PA(e);this.constraints_={center:i,resolution:l,rotation:c},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];n=n||[0,0,0,0];const l=this.getResolution(),c=l/2*(i[3]-n[3]+n[1]-i[1]),d=l/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+c,r[1]-d])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Gc(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Gc(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const m=arguments[i];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(i===n){r&&wx(r,!0);return}let l=Date.now(),c=this.targetCenter_.slice(),d=this.targetResolution_,u=this.targetRotation_;const f=[];for(;i<n;++i){const m=arguments[i],p={start:l,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||RP,callback:r};if(m.center&&(p.sourceCenter=c,p.targetCenter=m.center.slice(),c=p.targetCenter),m.zoom!==void 0?(p.sourceResolution=d,p.targetResolution=this.getResolutionForZoom(m.zoom),d=p.targetResolution):m.resolution&&(p.sourceResolution=d,p.targetResolution=m.resolution,d=p.targetResolution),m.rotation!==void 0){p.sourceRotation=u;const y=X0(m.rotation-u+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=u+y,u=p.targetRotation}AA(p)?p.complete=!0:l+=p.duration,f.push(p)}this.animations_.push(f),this.setHint(Ra.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ra.ANIMATING]>0}getInteracting(){return this.hints_[Ra.INTERACTING]>0}cancelAnimations(){this.setHint(Ra.ANIMATING,-this.hints_[Ra.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){const i=this.animations_[n];if(i[0].callback&&wx(i[0].callback,!1),!e)for(let l=0,c=i.length;l<c;++l){const d=i[l];if(!d.complete){e=d.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let l=!0;for(let c=0,d=i.length;c<d;++c){const u=i[c];if(u.complete)continue;const f=e-u.start;let m=u.duration>0?f/u.duration:1;m>=1?(u.complete=!0,m=1):l=!1;const p=u.easing(m);if(u.sourceCenter){const y=u.sourceCenter[0],g=u.sourceCenter[1],N=u.targetCenter[0],C=u.targetCenter[1];this.nextCenter_=u.targetCenter;const v=y+p*(N-y),R=g+p*(C-g);this.targetCenter_=[v,R]}if(u.sourceResolution&&u.targetResolution){const y=p===1?u.targetResolution:u.sourceResolution+p*(u.targetResolution-u.sourceResolution);if(u.anchor){const g=this.getViewportSize_(this.getRotation()),N=this.constraints_.resolution(y,0,g,!0);this.targetCenter_=this.calculateCenterZoom(N,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){const y=p===1?X0(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+p*(u.targetRotation-u.sourceRotation);if(u.anchor){const g=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(g,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),n=!0,!u.complete)break}if(l){this.animations_[r]=null,this.setHint(Ra.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const c=i[0].callback;c&&wx(c,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],Ib(r,e-this.getRotation()),NP(r,n)),r}calculateCenterZoom(e,n){let r;const i=this.getCenterInternal(),l=this.getResolution();if(i!==void 0&&l!==void 0){const c=n[0]-e*(n[0]-i[0])/l,d=n[1]-e*(n[1]-i[1])/l;r=[c,d]}return r}getViewportSize_(e){const n=this.viewportSize_;if(e){const r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&My(e,this.getProjection())}getCenterInternal(){return this.get(So.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return sE(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();dr(n,"The view center is not defined");const r=this.getResolution();dr(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return dr(i!==void 0,"The view rotation is not defined"),Ey(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(So.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(uu(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const r=pr(e)/n[0],i=Ua(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return(function(l){return n/Math.pow(e,l*i)})}getRotation(){return this.get(So.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,l=Math.log(r/i)/n;return(function(c){return Math.log(r/c)/n/l})}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const l=this.padding_;if(l){const c=this.getViewportSizeMinusPadding_();i=iC(i,this.getViewportSize_(),[c[0]/2+l[3],c[1]/2+l[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){const l=Rb(this.resolutions_,e,1);n=l,r=this.resolutions_[l],l==this.resolutions_.length-1?i=2:i=r/this.resolutions_[l+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var n;if((n=this.resolutions_)!=null&&n.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=zr(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,zr(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if(dr(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){dr(!Sg(e),"Cannot fit empty extent provided as `geometry`");const i=uu(e,this.getProjection());r=Zv(i)}else if(e.getType()==="Circle"){const i=uu(e.getExtent(),this.getProjection());r=Zv(i),r.rotate(this.getRotation(),bh(i))}else r=e;this.fitInternal(r,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),l=e.getFlatCoordinates(),c=e.getStride();let d=1/0,u=1/0,f=-1/0,m=-1/0;for(let p=0,y=l.length;p<y;p+=c){const g=l[p]*r-l[p+1]*i,N=l[p]*i+l[p+1]*r;d=Math.min(d,g),u=Math.min(u,N),f=Math.max(f,g),m=Math.max(m,N)}return[d,u,f,m]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const i=n.padding!==void 0?n.padding:[0,0,0,0],l=n.nearest!==void 0?n.nearest:!1;let c;n.minResolution!==void 0?c=n.minResolution:n.maxZoom!==void 0?c=this.getResolutionForZoom(n.maxZoom):c=0;const d=this.rotatedExtentForGeometry(e);let u=this.getResolutionForExtentInternal(d,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);u=isNaN(u)?c:Math.max(u,c),u=this.getConstrainedResolution(u,l?0:1);const f=this.getRotation(),m=Math.sin(f),p=Math.cos(f),y=bh(d);y[0]+=(i[1]-i[3])/2*u,y[1]+=(i[0]-i[2])/2*u;const g=y[0]*p-y[1]*m,N=y[1]*p+y[0]*m,C=this.getConstrainedCenter([g,N],u),v=n.callback?n.callback:Zm;n.duration!==void 0?this.animateInternal({resolution:u,center:C,duration:n.duration,easing:n.easing},v):(this.targetResolution_=u,this.targetCenter_=C,this.applyTargetState_(!1,!0),wx(v,!0))}centerOn(e,n,r){this.centerOnInternal(Gc(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(iC(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let l;const c=this.padding_;if(c&&e){const d=this.getViewportSizeMinusPadding_(-r),u=iC(e,i,[d[0]/2+c[3],d[1]/2+c[0]],n,r);l=[e[0]-u[0],e[1]-u[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=My(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&Gc(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(l,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=Gc(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Gc(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),l=this.getViewportSize_(i),c=this.constraints_.resolution(this.targetResolution_,0,l,r),d=this.constraints_.center(this.targetCenter_,c,l,r,this.calculateCenterShift(this.targetCenter_,c,i,l));this.get(So.ROTATION)!==i&&this.set(So.ROTATION,i),this.get(So.RESOLUTION)!==c&&(this.set(So.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!d||!this.get(So.CENTER)||!jp(this.get(So.CENTER),d))&&this.set(So.CENTER,d),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;const i=n||0,l=this.constraints_.rotation(this.targetRotation_),c=this.getViewportSize_(l),d=this.constraints_.resolution(this.targetResolution_,i,c),u=this.constraints_.center(this.targetCenter_,d,c,!1,this.calculateCenterShift(this.targetCenter_,d,l,c));if(e===0&&!this.cancelAnchor_){this.targetResolution_=d,this.targetRotation_=l,this.targetCenter_=u,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==d||this.getRotation()!==l||!this.getCenterInternal()||!jp(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:u,resolution:d,duration:e,easing:Of,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ra.INTERACTING,1)}endInteraction(e,n,r){r=r&&Gc(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(Ra.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}}function wx(t,e){setTimeout(function(){t(e)},0)}function LA(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return kv(t.extent,t.constrainOnlyCenter,n)}const e=Ab(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,kv(n,!1,!1)}return xP}function wA(t){let e,n,r,c=t.minZoom!==void 0?t.minZoom:rC,d=t.maxZoom!==void 0?t.maxZoom:28;const u=t.zoomFactor!==void 0?t.zoomFactor:2,f=t.multiWorld!==void 0?t.multiWorld:!1,m=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,p=t.showFullExtent!==void 0?t.showFullExtent:!1,y=Ab(t.projection,"EPSG:3857"),g=y.getExtent();let N=t.constrainOnlyCenter,C=t.extent;if(!f&&!C&&y.isGlobal()&&(N=!1,C=g),t.resolutions!==void 0){const v=t.resolutions;n=v[c],r=v[d]!==void 0?v[d]:v[v.length-1],t.constrainResolution?e=EA(v,m,!N&&C,p):e=eD(n,r,m,!N&&C,p)}else{const R=(g?Math.max(pr(g),Ua(g)):360*Ob.degrees/y.getMetersPerUnit())/Vb/Math.pow(2,rC),A=R/Math.pow(2,28-rC);n=t.maxResolution,n!==void 0?c=0:n=R/Math.pow(u,c),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(u,d):r=R/Math.pow(u,d):r=A),d=c+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,d-c),t.constrainResolution?e=jA(u,n,r,m,!N&&C,p):e=eD(n,r,m,!N&&C,p)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:c,zoomFactor:u}}function PA(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?OA():n===!1?tD:typeof n=="number"?IA(n):tD}return Yb}function AA(t){return!(t.sourceCenter&&t.targetCenter&&!jp(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function iC(t,e,n,r,i){const l=Math.cos(-i);let c=Math.sin(-i),d=t[0]*l-t[1]*c,u=t[1]*l+t[0]*c;d+=(e[0]/2-n[0])*r,u+=(n[1]-e[1]/2)*r,c=-c;const f=d*l-u*c,m=u*l+d*c;return[f,m]}const Px="ol-hidden",h_="ol-unselectable",$b="ol-control",sD="ol-collapsed",kA=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),nD=["style","variant","weight","size","lineHeight","family"],wy={normal:400,bold:700},Py=function(t){const e=t.match(kA);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=nD.length;r<i;++r){const l=e[r+1];l!==void 0&&(n[nD[r]]=typeof l=="string"?l.trim():l)}return isNaN(Number(n.weight))&&n.weight in wy&&(n.weight=wy[n.weight]),n.families=n.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),n};function Ii(t,e,n,r){let i;return n&&n.length?i=n.shift():$l?i=new class extends OffscreenCanvas{constructor(){super(...arguments);ar(this,"style",{})}}(t??300,e??150):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}let aC;function wp(){return aC||(aC=Ii(1,1)),aC}function f_(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function rD(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function UA(t){for(;t.lastChild;)t.lastChild.remove()}function WA(t,e){const n=t.childNodes;for(let r=0;;++r){const i=n[r],l=e[r];if(!i&&!l)break;if(i!==l){if(!i){t.appendChild(l);continue}if(!l){t.removeChild(i),--r;continue}t.insertBefore(l,i)}}}function fE(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const n=this.childNodes.indexOf(e);if(n===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(n,1),e},insertBefore:function(e,n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,n,r){return n==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,n,r)}})}function hu(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}class Hb extends gc{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var n;this.map_&&((n=this.element)==null||n.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)Hr(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==Zm&&this.listenerKeys.push(er(e,eu.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class BA extends Hb{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"",c=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=c):this.collapseLabel_=l;const d=e.label!==void 0?e.label:"i";typeof d=="string"?(this.label_=document.createElement("span"),this.label_.textContent=d,this.label_.className=i):this.label_=d;const u=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(u),this.toggleButton_.addEventListener(Rn.CLICK,this.handleClick_.bind(this),!1);const f=n+" "+h_+" "+$b+(this.collapsed_&&this.collapsible_?" "+sD:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=f,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),r=new Set(n.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!n.some(l=>{var c;return((c=l.getSource())==null?void 0:c.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(i=>rP(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Du(n,this.renderedAttributions_)){UA(this.ulElement_);for(let i=0,l=n.length;i<l;++i){const c=document.createElement("li");c.innerHTML=n[i],this.ulElement_.appendChild(c)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(sD),this.collapsed_?rD(this.collapseLabel_,this.label_):rD(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class FA extends Hb{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const l=e.tipLabel?e.tipLabel:"Reset rotation",c=document.createElement("button");c.className=n+"-reset",c.setAttribute("type","button"),c.title=l,c.appendChild(this.label_),c.addEventListener(Rn.CLICK,this.handleClick_.bind(this),!1);const d=n+" "+h_+" "+$b,u=this.element;u.className=d,u.appendChild(c),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Px)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Of}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const l=this.element.classList.contains(Px);!l&&r===0?this.element.classList.add(Px):l&&r!==0&&this.element.classList.remove(Px)}this.label_.style.transform=i}this.rotation_=r}}class KA extends Hb{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",c=e.zoomInLabel!==void 0?e.zoomInLabel:"+",d=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",u=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",f=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=i,m.setAttribute("type","button"),m.title=u,m.appendChild(typeof c=="string"?document.createTextNode(c):c),m.addEventListener(Rn.CLICK,this.handleClick_.bind(this,r),!1);const p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=f,p.appendChild(typeof d=="string"?document.createTextNode(d):d),p.addEventListener(Rn.CLICK,this.handleClick_.bind(this,-r),!1);const y=n+" "+h_+" "+$b,g=this.element;g.className=y,g.appendChild(m),g.appendChild(p),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const l=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:l,duration:this.duration_,easing:Of})):r.setZoom(l)}}}function QA(t){t=t||{};const e=new Vl;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new KA(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new FA(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new BA(t.attributionOptions)),e}class GA{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;const l=this.points_[n]-this.points_[r],c=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(c,l),this.initialVelocity_=Math.sqrt(l*l+c*c)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const iD={ACTIVE:"active"};class Dg extends gc{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(iD.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(iD.ACTIVE,e)}setMap(e){this.map_=e}}function YA(t,e,n){const r=t.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:TP,center:t.getConstrainedCenter(i)})}}function zb(t,e,n,r){const i=t.getZoom();if(i===void 0)return;const l=t.getConstrainedZoom(i+e),c=t.getResolutionForZoom(l);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:c,anchor:n,duration:r!==void 0?r:250,easing:Of})}class VA extends Dg{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==hi.DBLCLICK){const r=e.originalEvent,i=e.map,l=e.coordinate,c=r.shiftKey?-this.delta_:this.delta_,d=i.getView();zb(d,c,l,this.duration_),r.preventDefault(),n=!0}return!n}}function Ay(t){const e=arguments;return function(n){let r=!0;for(let i=0,l=e.length;i<l&&(r=r&&e[i](n),!!r);++i);return r}}const $A=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},HA=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),r=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):e.contains(r)},mE=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?HA(t):!0},zA=Jm,gE=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(oP&&P5&&e.ctrlKey)},xE=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},qA=function(t){const e=t.originalEvent;return P5?e.metaKey:e.ctrlKey},XA=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},pE=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},lC=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},JA=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Rg extends Dg{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==hi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==hi.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==hi.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==hi.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function qb(t){const e=t.length;let n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}class ZA extends Rg{constructor(e){super({stopDown:n_}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:Ay(xE,JA);this.condition_=e.onFocusOnly?Ay(mE,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,i=n.getEventPixel(qb(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const l=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],d=e.map.getView();SP(l,d.getResolution()),Ib(l,d.getRotation()),d.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),c=r.getCenterInternal(),d=n.getPixelFromCoordinateInternal(c),u=n.getCoordinateFromPixelInternal([d[0]-i*Math.cos(l),d[1]-i*Math.sin(l)]);r.animateInternal({center:r.getConstrainedCenter(u),duration:500,easing:Of})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class e6 extends Rg{constructor(e){e=e||{},super({stopDown:n_}),this.condition_=e.condition?e.condition:$A,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!lC(e))return;const n=e.map,r=n.getView();if(r.getConstraints().rotation===Yb)return;const i=n.getSize(),l=e.pixel,c=Math.atan2(i[1]/2-l[1],l[0]-i[0]/2);if(this.lastAngle_!==void 0){const d=c-this.lastAngle_;r.adjustRotationInternal(-d)}this.lastAngle_=c}handleUpEvent(e){return lC(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return lC(e)&&gE(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class t6 extends s_{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new ng([i])}getGeometry(){return this.geometry_}}const v0={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Sm extends cd{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}}class s6 extends Rg{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new t6(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??gE,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){const i=r[0]-n[0],l=r[1]-n[1];return i*i+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Sm(v0.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new Sm(n?v0.BOXEND:v0.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Sm(v0.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Sm(v0.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Sm(v0.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class n6 extends s6{constructor(e){e=e||{};const n=e.condition?e.condition:XA;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const l=r.rotatedExtentForGeometry(i),c=r.getResolutionForExtentInternal(l),d=r.getResolution()/c;i=i.clone(),i.scale(d*d)}r.fitInternal(i,{duration:this.duration_,easing:Of})}}const Yu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class r6 extends Dg{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return xE(n)&&pE(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==Rn.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Yu.DOWN||i==Yu.LEFT||i==Yu.RIGHT||i==Yu.UP)){const c=e.map.getView(),d=c.getResolution()*this.pixelDelta_;let u=0,f=0;i==Yu.DOWN?f=-d:i==Yu.LEFT?u=-d:i==Yu.RIGHT?u=d:f=d;const m=[u,f];Ib(m,c.getRotation()),YA(c,m,this.duration_),r.preventDefault(),n=!0}}return!n}}class i6 extends Dg{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!qA(n)&&pE(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==Rn.KEYDOWN||e.type==Rn.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const l=e.map,c=i==="+"?this.delta_:-this.delta_,d=l.getView();zb(d,c,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}const a6=40,l6=300;class o6 extends Dg{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:zA;this.condition_=e.onFocusOnly?Ay(mE,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Rn.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:l*=a6;break;case WheelEvent.DOM_DELTA_PAGE:l*=l6;break}if(l===0)return!1;this.lastDelta_=l;const c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const d=r.getView();if(this.mode_==="trackpad"&&!(d.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(d.getAnimating()&&d.cancelAnimations(),d.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),d.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=c,!1;this.totalDelta_+=l;const u=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),u),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-zr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),zb(n,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class c6 extends Rg{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=n_),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const r=this.targetPointers[0],i=this.targetPointers[1],l=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const u=l-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=l;const c=e.map,d=c.getView();d.getConstraints().rotation!==Yb&&(this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(qb(this.targetPointers))),this.rotating_&&(c.render(),d.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class d6 extends Rg{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=n_),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],l=r.clientX-i.clientX,c=r.clientY-i.clientY,d=Math.sqrt(l*l+c*c);this.lastDistance_!==void 0&&(n=this.lastDistance_/d),this.lastDistance_=d;const u=e.map,f=u.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(qb(this.targetPointers))),u.render(),f.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function u6(t){t=t||{};const e=new Vl,n=new GA(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new e6),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new VA({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new ZA({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new c6),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new d6({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new r6),e.push(new i6({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new o6({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new n6({duration:t.zoomDuration})),e}const gr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class _E extends gc{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[gr.OPACITY]=e.opacity!==void 0?e.opacity:1,dr(typeof n[gr.OPACITY]=="number","Layer opacity must be a number"),n[gr.VISIBLE]=e.visible!==void 0?e.visible:!0,n[gr.Z_INDEX]=e.zIndex,n[gr.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[gr.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[gr.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[gr.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=zr(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return Zn()}getLayerStatesArray(e){return Zn()}getExtent(){return this.get(gr.EXTENT)}getMaxResolution(){return this.get(gr.MAX_RESOLUTION)}getMinResolution(){return this.get(gr.MIN_RESOLUTION)}getMinZoom(){return this.get(gr.MIN_ZOOM)}getMaxZoom(){return this.get(gr.MAX_ZOOM)}getOpacity(){return this.get(gr.OPACITY)}getSourceState(){return Zn()}getVisible(){return this.get(gr.VISIBLE)}getZIndex(){return this.get(gr.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(gr.EXTENT,e)}setMaxResolution(e){this.set(gr.MAX_RESOLUTION,e)}setMinResolution(e){this.set(gr.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(gr.MAX_ZOOM,e)}setMinZoom(e){this.set(gr.MIN_ZOOM,e)}setOpacity(e){dr(typeof e=="number","Layer opacity must be a number"),this.set(gr.OPACITY,e)}setVisible(e){this.set(gr.VISIBLE,e)}setZIndex(e){this.set(gr.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Kd={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class tu extends cd{constructor(e,n){super(e),this.layer=n}}const oC={LAYERS:"layers"};class Mf extends _E{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(oC.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Vl(r.slice(),{unique:!0}):dr(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Vl(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Hr),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(er(e,il.ADD,this.handleLayersAdd_,this),er(e,il.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Hr);bg(this.listenerKeys_);const n=e.getArray();for(let r=0,i=n.length;r<i;r++){const l=n[r];this.registerLayerListeners_(l),this.dispatchEvent(new tu(Kd.ADDLAYER,l))}this.changed()}registerLayerListeners_(e){const n=[er(e,bf.PROPERTYCHANGE,this.handleLayerChange_,this),er(e,Rn.CHANGE,this.handleLayerChange_,this)];e instanceof Mf&&n.push(er(e,Kd.ADDLAYER,this.handleLayerGroupAdd_,this),er(e,Kd.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[tr(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new tu(Kd.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new tu(Kd.REMOVELAYER,e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new tu(Kd.ADDLAYER,n)),this.changed()}handleLayersRemove_(e){const n=e.element,r=tr(n);this.listenerKeys_[r].forEach(Hr),delete this.listenerKeys_[r],this.dispatchEvent(new tu(Kd.REMOVELAYER,n)),this.changed()}getLayers(){return this.get(oC.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const r=n.getArray();for(let i=0,l=r.length;i<l;++i)this.dispatchEvent(new tu(Kd.REMOVELAYER,r[i]))}this.set(oC.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(n)});const i=this.getLayerState();let l=i.zIndex;!e&&i.zIndex===void 0&&(l=0);for(let c=r,d=n.length;c<d;c++){const u=n[c];u.opacity*=i.opacity,u.visible=u.visible&&i.visible,u.maxResolution=Math.min(u.maxResolution,i.maxResolution),u.minResolution=Math.max(u.minResolution,i.minResolution),u.minZoom=Math.max(u.minZoom,i.minZoom),u.maxZoom=Math.min(u.maxZoom,i.maxZoom),i.extent!==void 0&&(u.extent!==void 0?u.extent=fh(u.extent,i.extent):u.extent=i.extent),u.zIndex===void 0&&(u.zIndex=l)}return n}getSourceState(){return"ready"}}const Hl={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class m_ extends _E{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(gr.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(gr.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Hr(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=er(e,Rn.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof ic?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(n.layerStatesArray){if(i=n.layerStatesArray.find(c=>c.layer===this),!i)return!1}else i=this.getLayerState();const l=this.getExtent();return Xb(i,n.viewState)&&(!l||ol(l,n.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const n=(l=this.getSource())==null?void 0:l.getAttributions();if(!n)return[];const r=e instanceof ic?e.getViewStateAndExtent():e;let i=n(r);return Array.isArray(i)||(i=[i]),i}render(e,n){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(gr.MAP,e)}getMapInternal(){return this.get(gr.MAP)}setMap(e){this.mapPrecomposeKey_&&(Hr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Hr(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=er(e,Hl.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=er(this,Rn.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,r=this.getLayerState(!1);dr(!n.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}setSource(e){this.set(gr.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Xb(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}function CE(t,e,n=0,r=t.length-1,i=h6){for(;r>n;){if(r-n>600){const u=r-n+1,f=e-n+1,m=Math.log(u),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(u-p)/u)*(f-u/2<0?-1:1),g=Math.max(n,Math.floor(e-f*p/u+y)),N=Math.min(r,Math.floor(e+(u-f)*p/u+y));CE(t,e,g,N,i)}const l=t[e];let c=n,d=r;for(vm(t,n,e),i(t[r],l)>0&&vm(t,n,r);c<d;){for(vm(t,c,d),c++,d--;i(t[c],l)<0;)c++;for(;i(t[d],l)>0;)d--}i(t[n],l)===0?vm(t,n,d):(d++,vm(t,d,r)),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function vm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function h6(t,e){return t<e?-1:t>e?1:0}let yE=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!kx(e,n))return r;const i=this.toBBox,l=[];for(;n;){for(let c=0;c<n.children.length;c++){const d=n.children[c],u=n.leaf?i(d):d;kx(e,u)&&(n.leaf?r.push(d):dC(e,u)?this._all(d,r):l.push(d))}n=l.pop()}return r}collides(e){let n=this.data;if(!kx(e,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const l=n.children[i],c=n.leaf?this.toBBox(l):l;if(kx(e,c)){if(n.leaf||dC(e,c))return!0;r.push(l)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=W0([]),this}remove(e,n){if(!e)return this;let r=this.data;const i=this.toBBox(e),l=[],c=[];let d,u,f;for(;r||l.length;){if(r||(r=l.pop(),u=l[l.length-1],d=c.pop(),f=!0),r.leaf){const m=f6(e,r.children,n);if(m!==-1)return r.children.splice(m,1),l.push(r),this._condense(l),this}!f&&!r.leaf&&dC(r,i)?(l.push(r),c.push(d),d=0,u=r,r=r.children[0]):u?(d++,r=u.children[d],f=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,i){const l=r-n+1;let c=this._maxEntries,d;if(l<=c)return d=W0(e.slice(n,r+1)),D0(d,this.toBBox),d;i||(i=Math.ceil(Math.log(l)/Math.log(c)),c=Math.ceil(l/Math.pow(c,i-1))),d=W0([]),d.leaf=!1,d.height=i;const u=Math.ceil(l/c),f=u*Math.ceil(Math.sqrt(c));aD(e,n,r,f,this.compareMinX);for(let m=n;m<=r;m+=f){const p=Math.min(m+f-1,r);aD(e,m,p,u,this.compareMinY);for(let y=m;y<=p;y+=u){const g=Math.min(y+u-1,p);d.children.push(this._build(e,y,g,i-1))}}return D0(d,this.toBBox),d}_chooseSubtree(e,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let l=1/0,c=1/0,d;for(let u=0;u<n.children.length;u++){const f=n.children[u],m=cC(f),p=x6(e,f)-m;p<c?(c=p,l=m<l?m:l,d=f):p===c&&m<l&&(l=m,d=f)}n=d||n.children[0]}return n}_insert(e,n,r){const i=r?e:this.toBBox(e),l=[],c=this._chooseSubtree(i,this.data,n,l);for(c.children.push(e),wm(c,i);n>=0&&l[n].children.length>this._maxEntries;)this._split(l,n),n--;this._adjustParentBBoxes(i,l,n)}_split(e,n){const r=e[n],i=r.children.length,l=this._minEntries;this._chooseSplitAxis(r,l,i);const c=this._chooseSplitIndex(r,l,i),d=W0(r.children.splice(c,r.children.length-c));d.height=r.height,d.leaf=r.leaf,D0(r,this.toBBox),D0(d,this.toBBox),n?e[n-1].children.push(d):this._splitRoot(r,d)}_splitRoot(e,n){this.data=W0([e,n]),this.data.height=e.height+1,this.data.leaf=!1,D0(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,l=1/0,c=1/0;for(let d=n;d<=r-n;d++){const u=Lm(e,0,d,this.toBBox),f=Lm(e,d,r,this.toBBox),m=p6(u,f),p=cC(u)+cC(f);m<l?(l=m,i=d,c=p<c?p:c):m===l&&p<c&&(c=p,i=d)}return i||r-n}_chooseSplitAxis(e,n,r){const i=e.leaf?this.compareMinX:m6,l=e.leaf?this.compareMinY:g6,c=this._allDistMargin(e,n,r,i),d=this._allDistMargin(e,n,r,l);c<d&&e.children.sort(i)}_allDistMargin(e,n,r,i){e.children.sort(i);const l=this.toBBox,c=Lm(e,0,n,l),d=Lm(e,r-n,r,l);let u=Ax(c)+Ax(d);for(let f=n;f<r-n;f++){const m=e.children[f];wm(c,e.leaf?l(m):m),u+=Ax(c)}for(let f=r-n-1;f>=n;f--){const m=e.children[f];wm(d,e.leaf?l(m):m),u+=Ax(d)}return u}_adjustParentBBoxes(e,n,r){for(let i=r;i>=0;i--)wm(n[i],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():D0(e[n],this.toBBox)}};function f6(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function D0(t,e){Lm(t,0,t.children.length,e,t)}function Lm(t,e,n,r,i){i||(i=W0(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let l=e;l<n;l++){const c=t.children[l];wm(i,t.leaf?r(c):c)}return i}function wm(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function m6(t,e){return t.minX-e.minX}function g6(t,e){return t.minY-e.minY}function cC(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ax(t){return t.maxX-t.minX+(t.maxY-t.minY)}function x6(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p6(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),l=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,l-r)}function dC(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function kx(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function W0(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function aD(t,e,n,r,i){const l=[e,n];for(;l.length;){if(n=l.pop(),e=l.pop(),n-e<=r)continue;const c=e+Math.ceil((n-e)/r/2)*r;CE(t,c,e,n,i),l.push(e,c,c,n)}}const Jb=[NaN,NaN,NaN,0];let uC;function _6(){return uC||(uC=Ii(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),uC}const C6=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,y6=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,b6=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,N6=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Ux(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function Gm(t){throw new Error('failed to parse "'+t+'" as color')}function bE(t){if(t.toLowerCase().startsWith("rgb")){const l=t.match(y6)||t.match(C6)||t.match(b6);if(l){const c=l[4],d=100/255;return[zr(Ux(l[1],d)+.5|0,0,255),zr(Ux(l[2],d)+.5|0,0,255),zr(Ux(l[3],d)+.5|0,0,255),c!==void 0?zr(Ux(c,100),0,1):1]}Gm(t)}if(t.startsWith("#")){if(N6.test(t)){const l=t.substring(1),c=l.length<=4?1:2,d=[0,0,0,255];for(let u=0,f=l.length;u<f;u+=c){let m=parseInt(l.substring(u,u+c),16);c===1&&(m+=m<<4),d[u/c]=m}return d[3]=d[3]/255,d}Gm(t)}const e=_6();e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&Gm(t));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return bE(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=i_(i[3]/255,3),i}function S6(t){return typeof t=="string"?t:eN(t)}const v6=1024,Dm={};let hC=0;function D6(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function fC(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function mC(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function gC(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function xC(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function lD(t){const e=gC(t[0]),n=gC(t[1]),r=gC(t[2]),i=xC(e*.222488403+n*.716873169+r*.06060791),l=500*(xC(e*.452247074+n*.399439023+r*.148375274)-i),c=200*(i-xC(e*.016863605+n*.117638439+r*.865350722)),d=Math.atan2(c,l)*(180/Math.PI);return[116*i-16,Math.sqrt(l*l+c*c),d<0?d+360:d,t[3]]}function R6(t){const e=(t[0]+16)/116,n=t[1],r=t[2]*Math.PI/180,i=mC(e),l=mC(e+n/500*Math.cos(r)),c=mC(e-n/200*Math.sin(r)),d=fC(l*3.021973625-i*1.617392459-c*.404875592),u=fC(l*-.943766287+i*1.916279586+c*.027607165),f=fC(l*.069407491-i*.22898585+c*1.159737864);return[zr(d+.5|0,0,255),zr(u+.5|0,0,255),zr(f+.5|0,0,255),t[3]]}function Zb(t){if(t==="none")return Jb;if(Dm.hasOwnProperty(t))return Dm[t];if(hC>=v6){let n=0;for(const r in Dm)(n++&3)===0&&(delete Dm[r],--hC)}const e=bE(t);e.length!==4&&Gm(t);for(const n of e)isNaN(n)&&Gm(t);return Dm[t]=e,++hC,e}function Nh(t){return Array.isArray(t)?t:Zb(t)}function eN(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}function oD(t){return t[0]>0&&t[1]>0}function T6(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function cl(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}let Ph=0;const Aa=1<<Ph++,Un=1<<Ph++,al=1<<Ph++,Eo=1<<Ph++,Sh=1<<Ph++,Pm=1<<Ph++,Wx=Math.pow(2,Ph)-1,tN={[Aa]:"boolean",[Un]:"number",[al]:"string",[Eo]:"color",[Sh]:"number[]",[Pm]:"size"},E6=Object.keys(tN).map(Number).sort(Jc);function j6(t){return t in tN}function Am(t){const e=[];for(const n of E6)km(t,n)&&e.push(tN[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function km(t,e){return(t&e)===e}function Qd(t,e){return t===e}class Ki{constructor(e,n){if(!j6(e))throw new Error(`literal expressions must have a specific type, got ${Am(e)}`);this.type=e,this.value=n}}class I6{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}}function NE(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function xa(t,e,n){switch(typeof t){case"boolean":{if(Qd(e,al))return new Ki(al,t?"true":"false");if(!km(e,Aa))throw new Error(`got a boolean, but expected ${Am(e)}`);return new Ki(Aa,t)}case"number":{if(Qd(e,Pm))return new Ki(Pm,cl(t));if(Qd(e,Aa))return new Ki(Aa,!!t);if(Qd(e,al))return new Ki(al,t.toString());if(!km(e,Un))throw new Error(`got a number, but expected ${Am(e)}`);return new Ki(Un,t)}case"string":{if(Qd(e,Eo))return new Ki(Eo,Zb(t));if(Qd(e,Aa))return new Ki(Aa,!!t);if(!km(e,al))throw new Error(`got a string, but expected ${Am(e)}`);return new Ki(al,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return F6(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("expected an array of numbers");if(Qd(e,Pm)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Ki(Pm,t)}if(Qd(e,Eo)){if(t.length===3)return new Ki(Eo,[...t,1]);if(t.length===4)return new Ki(Eo,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!km(e,Sh))throw new Error(`got an array of numbers, but expected ${Am(e)}`);return new Ki(Sh,t)}const ls={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},O6={[ls.Get]:gn(Dn(1,1/0),cD),[ls.Var]:gn(Dn(1,1),M6),[ls.Has]:gn(Dn(1,1/0),cD),[ls.Id]:gn(L6,R0),[ls.Concat]:gn(Dn(2,1/0),lr(al)),[ls.GeometryType]:gn(w6,R0),[ls.LineMetric]:gn(R0),[ls.Resolution]:gn(pC,R0),[ls.Zoom]:gn(pC,R0),[ls.Time]:gn(pC,R0),[ls.Any]:gn(Dn(2,1/0),lr(Aa)),[ls.All]:gn(Dn(2,1/0),lr(Aa)),[ls.Not]:gn(Dn(1,1),lr(Aa)),[ls.Equal]:gn(Dn(2,2),lr(Wx)),[ls.NotEqual]:gn(Dn(2,2),lr(Wx)),[ls.GreaterThan]:gn(Dn(2,2),lr(Un)),[ls.GreaterThanOrEqualTo]:gn(Dn(2,2),lr(Un)),[ls.LessThan]:gn(Dn(2,2),lr(Un)),[ls.LessThanOrEqualTo]:gn(Dn(2,2),lr(Un)),[ls.Multiply]:gn(Dn(2,1/0),dD),[ls.Coalesce]:gn(Dn(2,1/0),dD),[ls.Divide]:gn(Dn(2,2),lr(Un)),[ls.Add]:gn(Dn(2,1/0),lr(Un)),[ls.Subtract]:gn(Dn(2,2),lr(Un)),[ls.Clamp]:gn(Dn(3,3),lr(Un)),[ls.Mod]:gn(Dn(2,2),lr(Un)),[ls.Pow]:gn(Dn(2,2),lr(Un)),[ls.Abs]:gn(Dn(1,1),lr(Un)),[ls.Floor]:gn(Dn(1,1),lr(Un)),[ls.Ceil]:gn(Dn(1,1),lr(Un)),[ls.Round]:gn(Dn(1,1),lr(Un)),[ls.Sin]:gn(Dn(1,1),lr(Un)),[ls.Cos]:gn(Dn(1,1),lr(Un)),[ls.Atan]:gn(Dn(1,2),lr(Un)),[ls.Sqrt]:gn(Dn(1,1),lr(Un)),[ls.Match]:gn(Dn(4,1/0),uD,A6),[ls.Between]:gn(Dn(3,3),lr(Un)),[ls.Interpolate]:gn(Dn(6,1/0),uD,k6),[ls.Case]:gn(Dn(3,1/0),P6,U6),[ls.In]:gn(Dn(2,2),W6),[ls.Number]:gn(Dn(1,1/0),lr(Wx)),[ls.String]:gn(Dn(1,1/0),lr(Wx)),[ls.Array]:gn(Dn(1,1/0),lr(Un)),[ls.Color]:gn(Dn(1,4),lr(Un)),[ls.Band]:gn(Dn(1,3),lr(Un)),[ls.Palette]:gn(Dn(2,2),B6),[ls.ToString]:gn(Dn(1,1),lr(Aa|Un|al|Eo))};function cD(t,e,n){const r=t.length-1,i=new Array(r);for(let l=0;l<r;++l){const c=t[l+1];switch(typeof c){case"number":{i[l]=new Ki(Un,c);break}case"string":{i[l]=new Ki(al,c);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${c}`)}l===0&&n.properties.add(String(c))}return i}function M6(t,e,n){const r=t[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return n.variables.add(r),[new Ki(al,r)]}function L6(t,e,n){n.featureId=!0}function w6(t,e,n){n.geometryType=!0}function pC(t,e,n){n.mapState=!0}function R0(t,e,n){const r=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Dn(t,e){return function(n,r,i){const l=n[0],c=n.length-1;if(t===e){if(c!==t){const d=t===1?"":"s";throw new Error(`expected ${t} argument${d} for ${l}, got ${c}`)}}else if(c<t||c>e){const d=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${d} arguments for ${l}, got ${c}`)}}}function dD(t,e,n){const r=t.length-1,i=new Array(r);for(let l=0;l<r;++l){const c=xa(t[l+1],e,n);i[l]=c}return i}function lr(t){return function(e,n,r){const i=e.length-1,l=new Array(i);for(let c=0;c<i;++c){const d=xa(e[c+1],t,r);l[c]=d}return l}}function P6(t,e,n){const r=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function uD(t,e,n){const r=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function A6(t,e,n){const r=t.length-1,i=al|Un|Aa,l=xa(t[1],i,n),c=xa(t[t.length-1],e,n),d=new Array(r-2);for(let u=0;u<r-2;u+=2){try{const f=xa(t[u+2],l.type,n);d[u]=f}catch(f){throw new Error(`failed to parse argument ${u+1} of match expression: ${f.message}`)}try{const f=xa(t[u+3],c.type,n);d[u+1]=f}catch(f){throw new Error(`failed to parse argument ${u+2} of match expression: ${f.message}`)}}return[l,...d,c]}function k6(t,e,n){const r=t[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const u=r[1];if(typeof u!="number"||u<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(u)} instead`);i=u;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const l=new Ki(Un,i);let c;try{c=xa(t[2],Un,n)}catch(u){throw new Error(`failed to parse argument 1 in interpolate expression: ${u.message}`)}const d=new Array(t.length-3);for(let u=0;u<d.length;u+=2){try{const f=xa(t[u+3],Un,n);d[u]=f}catch(f){throw new Error(`failed to parse argument ${u+2} for interpolate expression: ${f.message}`)}try{const f=xa(t[u+4],e,n);d[u+1]=f}catch(f){throw new Error(`failed to parse argument ${u+3} for interpolate expression: ${f.message}`)}}return[l,c,...d]}function U6(t,e,n){const r=xa(t[t.length-1],e,n),i=new Array(t.length-1);for(let l=0;l<i.length-1;l+=2){try{const c=xa(t[l+1],Aa,n);i[l]=c}catch(c){throw new Error(`failed to parse argument ${l} of case expression: ${c.message}`)}try{const c=xa(t[l+2],r.type,n);i[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of case expression: ${c.message}`)}}return i[i.length-1]=r,i}function W6(t,e,n){let r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=al}else i=Un;const l=new Array(r.length);for(let d=0;d<l.length;d++)try{const u=xa(r[d],i,n);l[d]=u}catch(u){throw new Error(`failed to parse haystack item ${d} for "in" expression: ${u.message}`)}return[xa(t[1],i,n),...l]}function B6(t,e,n){let r;try{r=xa(t[1],Un,n)}catch(c){throw new Error(`failed to parse first argument in palette expression: ${c.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const l=new Array(i.length);for(let c=0;c<l.length;c++){let d;try{d=xa(i[c],Eo,n)}catch(u){throw new Error(`failed to parse color at index ${c} in palette expression: ${u.message}`)}if(!(d instanceof Ki))throw new Error(`the palette color at index ${c} must be a literal value`);l[c]=d}return[r,...l]}function gn(...t){return function(e,n,r){const i=e[0];let l;for(let c=0;c<t.length;c++){const d=t[c](e,n,r);if(c==t.length-1){if(!d)throw new Error("expected last argument validator to return the parsed args");l=d}}return new I6(n,i,...l)}}function F6(t,e,n){const r=t[0],i=O6[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(t,e,n)}function SE(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return SE(t.getGeometries()[0]);default:return""}}function vE(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function fc(t,e,n){const r=xa(t,e,n);return Oo(r)}function Oo(t,e){if(t instanceof Ki){if(t.type===Eo&&typeof t.value=="string"){const r=Zb(t.value);return function(){return r}}return function(){return t.value}}const n=t.operator;switch(n){case ls.Number:case ls.String:case ls.Coalesce:return K6(t);case ls.Get:case ls.Var:case ls.Has:return Q6(t);case ls.Id:return r=>r.featureId;case ls.GeometryType:return r=>r.geometryType;case ls.Concat:{const r=t.args.map(i=>Oo(i));return i=>"".concat(...r.map(l=>l(i).toString()))}case ls.Resolution:return r=>r.resolution;case ls.Any:case ls.All:case ls.Between:case ls.In:case ls.Not:return Y6(t);case ls.Equal:case ls.NotEqual:case ls.LessThan:case ls.LessThanOrEqualTo:case ls.GreaterThan:case ls.GreaterThanOrEqualTo:return G6(t);case ls.Multiply:case ls.Divide:case ls.Add:case ls.Subtract:case ls.Clamp:case ls.Mod:case ls.Pow:case ls.Abs:case ls.Floor:case ls.Ceil:case ls.Round:case ls.Sin:case ls.Cos:case ls.Atan:case ls.Sqrt:return V6(t);case ls.Case:return $6(t);case ls.Match:return H6(t);case ls.Interpolate:return z6(t);case ls.ToString:return q6(t);default:throw new Error(`Unsupported operator ${n}`)}}function K6(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let l=0;l<r;++l)i[l]=Oo(t.args[l]);switch(n){case ls.Coalesce:return l=>{for(let c=0;c<r;++c){const d=i[c](l);if(typeof d<"u"&&d!==null)return d}throw new Error("Expected one of the values to be non-null")};case ls.Number:case ls.String:return l=>{for(let c=0;c<r;++c){const d=i[c](l);if(typeof d===n)return d}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function Q6(t,e){const r=t.args[0].value;switch(t.operator){case ls.Get:return i=>{const l=t.args;let c=i.properties[r];for(let d=1,u=l.length;d<u;++d){const m=l[d].value;c=c[m]}return c};case ls.Var:return i=>i.variables[r];case ls.Has:return i=>{const l=t.args;if(!(r in i.properties))return!1;let c=i.properties[r];for(let d=1,u=l.length;d<u;++d){const m=l[d].value;if(!c||!Object.hasOwn(c,m))return!1;c=c[m]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function G6(t,e){const n=t.operator,r=Oo(t.args[0]),i=Oo(t.args[1]);switch(n){case ls.Equal:return l=>r(l)===i(l);case ls.NotEqual:return l=>r(l)!==i(l);case ls.LessThan:return l=>r(l)<i(l);case ls.LessThanOrEqualTo:return l=>r(l)<=i(l);case ls.GreaterThan:return l=>r(l)>i(l);case ls.GreaterThanOrEqualTo:return l=>r(l)>=i(l);default:throw new Error(`Unsupported comparison operator ${n}`)}}function Y6(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let l=0;l<r;++l)i[l]=Oo(t.args[l]);switch(n){case ls.Any:return l=>{for(let c=0;c<r;++c)if(i[c](l))return!0;return!1};case ls.All:return l=>{for(let c=0;c<r;++c)if(!i[c](l))return!1;return!0};case ls.Between:return l=>{const c=i[0](l),d=i[1](l),u=i[2](l);return c>=d&&c<=u};case ls.In:return l=>{const c=i[0](l);for(let d=1;d<r;++d)if(c===i[d](l))return!0;return!1};case ls.Not:return l=>!i[0](l);default:throw new Error(`Unsupported logical operator ${n}`)}}function V6(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let l=0;l<r;++l)i[l]=Oo(t.args[l]);switch(n){case ls.Multiply:return l=>{let c=1;for(let d=0;d<r;++d)c*=i[d](l);return c};case ls.Divide:return l=>i[0](l)/i[1](l);case ls.Add:return l=>{let c=0;for(let d=0;d<r;++d)c+=i[d](l);return c};case ls.Subtract:return l=>i[0](l)-i[1](l);case ls.Clamp:return l=>{const c=i[0](l),d=i[1](l);if(c<d)return d;const u=i[2](l);return c>u?u:c};case ls.Mod:return l=>i[0](l)%i[1](l);case ls.Pow:return l=>Math.pow(i[0](l),i[1](l));case ls.Abs:return l=>Math.abs(i[0](l));case ls.Floor:return l=>Math.floor(i[0](l));case ls.Ceil:return l=>Math.ceil(i[0](l));case ls.Round:return l=>Math.round(i[0](l));case ls.Sin:return l=>Math.sin(i[0](l));case ls.Cos:return l=>Math.cos(i[0](l));case ls.Atan:return r===2?l=>Math.atan2(i[0](l),i[1](l)):l=>Math.atan(i[0](l));case ls.Sqrt:return l=>Math.sqrt(i[0](l));default:throw new Error(`Unsupported numeric operator ${n}`)}}function $6(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=Oo(t.args[i]);return i=>{for(let l=0;l<n-1;l+=2)if(r[l](i))return r[l+1](i);return r[n-1](i)}}function H6(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=Oo(t.args[i]);return i=>{const l=r[0](i);for(let c=1;c<n-1;c+=2)if(l===r[c](i))return r[c+1](i);return r[n-1](i)}}function z6(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=Oo(t.args[i]);return i=>{const l=r[0](i),c=r[1](i);let d,u;for(let f=2;f<n;f+=2){const m=r[f](i);let p=r[f+1](i);const y=Array.isArray(p);if(y&&(p=D6(p)),m>=c)return f===2?p:y?X6(l,c,d,u,m,p):Um(l,c,d,u,m,p);d=m,u=p}return u}}function q6(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let l=0;l<r;++l)i[l]=Oo(t.args[l]);switch(n){case ls.ToString:return l=>{const c=i[0](l);return t.args[0].type===Eo?eN(c):c.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Um(t,e,n,r,i,l){const c=i-n;if(c===0)return r;const d=e-n,u=t===1?d/c:(Math.pow(t,d)-1)/(Math.pow(t,c)-1);return r+u*(l-r)}function X6(t,e,n,r,i,l){if(i-n===0)return r;const d=lD(r),u=lD(l);let f=u[2]-d[2];f>180?f-=360:f<-180&&(f+=360);const m=[Um(t,e,n,d[0],i,u[0]),Um(t,e,n,d[1],i,u[1]),d[2]+Um(t,e,n,0,i,f),Um(t,e,n,r[3],i,l[3])];return R6(m)}const Sn={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function J6(t,e,n){const r=t;let i=!0,l=!1,c=!1;const d=[Tp(r,Rn.LOAD,function(){c=!0,l||e()})];return r.src&&A5?(l=!0,r.decode().then(function(){i&&e()}).catch(function(u){i&&(c?e():n())})):d.push(Tp(r,Rn.ERROR,n)),function(){i=!1,d.forEach(Hr)}}function Z6(t,e){return new Promise((n,r)=>{function i(){c(),n(t)}function l(){c(),r(new Error("Image load error"))}function c(){t.removeEventListener("load",i),t.removeEventListener("error",l)}t.addEventListener("load",i),t.addEventListener("error",l)})}function ek(t,e){return e&&(t.src=e),t.src&&A5?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):Z6(t)}class tk{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const r=this.cache_[n];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n){const r=_C(e,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,n){const r=_C(e,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,n,r,i){const l=_C(e,n),c=l in this.cache_;this.cache_[l]=r,i&&(r.getImageState()===Sn.IDLE&&r.load(),r.getImageState()===Sn.LOADING?r.ready().then(()=>{this.patternCache_[l]=wp().createPattern(r.getImage(1),"repeat")}):this.patternCache_[l]=wp().createPattern(r.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function _C(t,e){const n=e?Nh(e):"null";return t+":"+n}const zl=new tk;let Rm=null;class DE extends r_{constructor(e,n,r,i,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r==null?void 0:r.crossOrigin,this.referrerPolicy_=r==null?void 0:r.referrerPolicy,this.canvas_={},this.color_=l,this.imageState_=i===void 0?Sn.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_),this.referrerPolicy_!==void 0&&(this.image_.referrerPolicy=this.referrerPolicy_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Sn.LOADED){Rm||(Rm=Ii(1,1,void 0,{willReadFrequently:!0})),Rm.drawImage(this.image_,0,0);try{Rm.getImageData(0,0,1,1),this.tainted_=!1}catch{Rm=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Rn.CHANGE)}handleImageError_(){this.imageState_=Sn.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Sn.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}setImage(e){this.image_=e}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],r=Ii(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Sn.IDLE){this.image_||this.initializeImage_(),this.imageState_=Sn.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ek(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Sn.LOADED)return;const n=this.image_,r=Ii(Math.ceil(n.width*e),Math.ceil(n.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=S6(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Sn.LOADED||this.imageState_===Sn.ERROR)e();else{const n=()=>{(this.imageState_===Sn.LOADED||this.imageState_===Sn.ERROR)&&(this.removeEventListener(Rn.CHANGE,n),e())};this.addEventListener(Rn.CHANGE,n)}})),this.ready_}}function Ym(t,e,n,r,i,l){let c=e===void 0?void 0:zl.get(e,i);return c||(c=new DE(t,t&&"src"in t?t.src||void 0:e,n,r,i),zl.set(e,i,c,l)),l&&c&&!zl.getPattern(e,i)&&zl.set(e,i,c,l),c}function lc(t){return t?Array.isArray(t)?eN(t):typeof t=="object"&&"src"in t?sk(t):t:null}function sk(t){if(!t.offset||!t.size)return zl.getPattern(t.src,t.color);const e=t.src+":"+t.offset,n=zl.getPattern(e,t.color);if(n)return n;const r=zl.get(t.src,null);if(r.getImageState()!==Sn.LOADED)return null;const i=Ii(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Ym(i.canvas,e,void 0,Sn.LOADED,t.color,!0),zl.getPattern(e,t.color)}const RE="10px sans-serif",ll="#000",Df="round",Zc=[],ed=0,Rf="round",rg=10,nk=0,ig="#000",ag="center",Pp="middle",sh=[0,0,0,0],lg=1,B0=new gc;let Tm=null,hD;const ky={},rk=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function ik(t,e,n){return`${t} ${e} 16px "${n}"`}const ak=(function(){let e,n;async function r(l){await n.ready;const c=await n.load(l);if(c.length===0)return!1;const d=Py(l),u=d.families[0].toLowerCase(),f=d.weight;return c.some(m=>{const p=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),y=wy[m.weight]||m.weight;return p===u&&m.style===d.style&&y==f})}async function i(){await n.ready;let l=!0;const c=B0.getProperties(),d=Object.keys(c).filter(u=>c[u]<100);for(let u=d.length-1;u>=0;--u){const f=d[u];let m=c[f];m<100&&(await r(f)?(bg(ky),B0.set(f,100)):(m+=10,B0.set(f,m,!0),m<100&&(l=!1)))}e=void 0,l||(e=setTimeout(i,100))}return async function(l){n||(n=$l?self.fonts:document.fonts);const c=Py(l);if(!c)return;const d=c.families;let u=!1;for(const f of d){if(rk.has(f))continue;const m=ik(c.style,c.weight,f);B0.get(m)===void 0&&(B0.set(m,0,!0),u=!0)}u&&(clearTimeout(e),e=setTimeout(i,100))}})(),lk=(function(){let t;return function(e){let n=ky[e];if(n==null){if($l){const r=Py(e),i=TE(e,"g");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);ky[e]=n}return n}})();function TE(t,e){return Tm||(Tm=Ii(1,1)),t!=hD&&(Tm.font=t,hD=Tm.font),Tm.measureText(e)}function EE(t,e){return TE(t,e).width}function fD(t,e,n){if(e in n)return n[e];const r=e.split(`
`).reduce((i,l)=>Math.max(i,EE(t,l)),0);return n[e]=r,r}function ok(t,e){const n=[],r=[],i=[];let l=0,c=0,d=0,u=0;for(let f=0,m=e.length;f<=m;f+=2){const p=e[f];if(p===`
`||f===m){l=Math.max(l,c),i.push(c),c=0,d+=u,u=0;continue}const y=e[f+1]||t.font,g=EE(y,p);n.push(g),c+=g;const N=lk(y);r.push(N),u=Math.max(u,N)}return{width:l,height:d,widths:n,heights:r,lineWidths:i}}function ck(t,e,n,r,i,l,c,d,u,f,m){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=p=>p.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(u,f),t.scale(m[0],m[1]),dk(r,t)):m[0]<0||m[1]<0?(t.translate(u,f),t.scale(m[0],m[1]),t.drawImage(r,i,l,c,d,0,0,c,d)):t.drawImage(r,i,l,c,d,u,f,c*m[0],d*m[1]),t.restore()}function dk(t,e){const n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}class g_{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=cl(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new g_({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Zn()}getImage(e){return Zn()}getHitDetectionImage(){return Zn()}getPixelRatio(e){return 1}getImageState(){return Zn()}getImageSize(){return Zn()}getOrigin(){return Zn()}getSize(){return Zn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=cl(e)}listenImageChange(e){Zn()}load(){Zn()}unlistenImageChange(e){Zn()}ready(){return Promise.resolve()}}class x_ extends g_{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Sn.LOADING:Sn.LOADED,this.imageState_===Sn.LOADING&&this.ready().then(()=>this.imageState_=Sn.LOADED),this.render()}clone(){const e=this.getScale(),n=new x_({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,c;const n=(l=this.fill_)==null?void 0:l.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let i=(c=zl.get(r,null))==null?void 0:c.getImage(1);if(!i){const d=this.renderOptions_,u=Math.ceil(d.size*e),f=Ii(u,u);this.draw_(d,f,e),i=f.canvas;const m=new DE(i,void 0,null,Sn.LOADED,null);zl.set(r,null,m),createImageBitmap(i).then(p=>{m.setImage(p)})}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}setRadius(e){this.radius!==e&&(this.radius=e,this.render())}getRadius2(){return this.radius2_}setRadius2(e){this.radius2_!==e&&(this.radius2_=e,this.render())}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius,l=this.radius2_===void 0?i:this.radius2_;if(i<l){const V=i;i=l,l=V}const c=this.radius2_===void 0?this.points_:this.points_*2,d=2*Math.PI/c,u=l*Math.sin(d),f=Math.sqrt(l*l-u*u),m=i-f,p=Math.sqrt(u*u+m*m),y=p/u;if(e==="miter"&&y<=r)return y*n;const g=n/2/y,N=n/2*(m/p),v=Math.sqrt((i+g)*(i+g)+N*N)-i;if(this.radius2_===void 0||e==="bevel")return v*2;const R=i*Math.sin(d),A=Math.sqrt(i*i-R*R),M=l-A,k=Math.sqrt(R*R+M*M)/R;if(k<=r){const V=k*n/2-l-i;return 2*Math.max(v,V)}return v*2}createRenderOptions(){let e=Df,n=Rf,r=0,i=null,l=0,c,d=0;this.stroke_&&(c=lc(this.stroke_.getColor()??ig),d=this.stroke_.getWidth()??lg,i=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Rf,e=this.stroke_.getLineCap()??Df,r=this.stroke_.getMiterLimit()??rg);const u=this.calculateLineJoinSize_(n,d,r),f=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*f+u);return{strokeStyle:c,strokeWidth:d,size:m,lineCap:e,lineDash:i,lineDashOffset:l,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=ll),n.fillStyle=lc(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Nh(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=Ii(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const r=this.radius;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const l=this.angle_-Math.PI/2,c=2*Math.PI/n;for(let d=0;d<n;d++){const u=l+d*c,f=d%2===0?r:i;e.lineTo(f*Math.cos(u),f*Math.sin(u))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=ll,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class p_ extends x_{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new p_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}}class Tf{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Tf({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=Ym(null,e.src,{crossOrigin:"anonymous"},void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Sn.IDLE&&n.load(),n.getImageState()===Sn.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?tr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Nh(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function mD(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}class mh extends g_{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.referrerPolicy_=e.referrerPolicy;const c=e.img!==void 0?e.img:null;let d=e.src;dr(!(d!==void 0&&c),"`image` and `src` cannot be provided at the same time"),(d===void 0||d.length===0)&&c&&(d=c.src||tr(c)),dr(d!==void 0&&d.length>0,"A defined and non-empty `src` or `image` must be provided"),dr(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let u;if(e.src!==void 0?u=Sn.IDLE:c!==void 0&&("complete"in c?c.complete?u=c.src?Sn.LOADED:Sn.IDLE:u=Sn.LOADING:u=Sn.LOADED),this.color_=e.color!==void 0?Nh(e.color):null,this.iconImage_=Ym(c,d,{crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_},u,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let f,m;if(e.size)[f,m]=e.size;else{const p=this.getImage(1);if(p.width&&p.height)f=p.width,m=p.height;else if(p instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(mD(g[0],g[1],e.width,e.height))};this.listenImageChange(y);return}}f!==void 0&&this.setScale(mD(f,m,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new mh({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}setColor(e){const n=e?Nh(e):null;if(this.color_===n||this.color_&&n&&this.color_.length===n.length&&this.color_.every((c,d)=>c===n[d]))return;this.color_=n;const r=this.getSrc(),i=r!==void 0?null:this.getHitDetectionImage(),l=r!==void 0?Sn.IDLE:this.iconImage_.getImageState();this.iconImage_=Ym(i,r,{crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_},l,this.color_)}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=Ym(null,e,{crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_},Sn.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Sn.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Sn.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Rn.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Rn.CHANGE,e)}ready(){return this.iconImage_.ready()}}class __{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.offset_=e.offset,this.width_=e.width}clone(){const e=this.getColor();return new __({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),offset:this.getOffset(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getOffset(){return this.offset_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setOffset(e){this.offset_=e}setWidth(e){this.width_=e}}class cc{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=gD,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new cc({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=gD,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function uk(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(dr(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let CC=null;function jE(t,e){if(!CC){const n=new Tf({color:"rgba(255,255,255,0.4)"}),r=new __({color:"#3399CC",width:1.25});CC=[new cc({image:new p_({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return CC}function gD(t){return t.getGeometry()}const hk="#333";class sN{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=cl(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Tf({color:hk}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new sN({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Tf?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=cl(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function fk(t){return!0}function mk(t){const e=NE(),n=gk(t,e),r=vE();return function(i,l){if(r.properties=i.getPropertiesInternal(),r.resolution=l,e.featureId){const c=i.getId();c!==void 0?r.featureId=c:r.featureId=null}return e.geometryType&&(r.geometryType=SE(i.getGeometry())),n(r)}}function xD(t){const e=NE(),n=t.length,r=new Array(n);for(let c=0;c<n;++c)r[c]=Uy(t[c],e);const i=vE(),l=new Array(n);return function(c,d){if(i.properties=c.getPropertiesInternal(),i.resolution=d,e.featureId){const f=c.getId();f!==void 0?i.featureId=f:i.featureId=null}let u=0;for(let f=0;f<n;++f){const m=r[f](i);m&&(l[u]=m,u+=1)}return l.length=u,l}}function gk(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i){const l=t[i],c="filter"in l?fc(l.filter,Aa,e):fk;let d;if(Array.isArray(l.style)){const u=l.style.length;d=new Array(u);for(let f=0;f<u;++f)d[f]=Uy(l.style[f],e)}else d=[Uy(l.style,e)];r[i]={filter:c,styles:d}}return function(i){const l=[];let c=!1;for(let d=0;d<n;++d){const u=r[d].filter;if(u(i)&&!(t[d].else&&c)){c=!0;for(const f of r[d].styles){const m=f(i);m&&l.push(m)}}}return l}}function Uy(t,e){const n=og(t,"",e),r=cg(t,"",e),i=xk(t,e),l=pk(t,e),c=ga(t,"z-index",e);if(!n&&!r&&!i&&!l&&!Nf(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const d=new cc;return function(u){let f=!0;if(n){const m=n(u);m&&(f=!1),d.setFill(m)}if(r){const m=r(u);m&&(f=!1),d.setStroke(m)}if(i){const m=i(u);m&&(f=!1),d.setText(m)}if(l){const m=l(u);m&&(f=!1),d.setImage(m)}return c&&d.setZIndex(c(u)),f?null:d}}function og(t,e,n){let r;if(e+"fill-pattern-src"in t)r=bk(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return l=>null;r=C_(t,e+"fill-color",n)}if(!r)return null;const i=new Tf;return function(l){const c=r(l);return c===Jb?null:(i.setColor(c),i)}}function cg(t,e,n){const r=ga(t,e+"stroke-width",n),i=C_(t,e+"stroke-color",n);if(!r&&!i)return null;const l=Vc(t,e+"stroke-line-cap",n),c=Vc(t,e+"stroke-line-join",n),d=IE(t,e+"stroke-line-dash",n),u=ga(t,e+"stroke-line-dash-offset",n),f=ga(t,e+"stroke-miter-limit",n),m=ga(t,e+"stroke-offset",n),p=new __;return function(y){if(i){const g=i(y);if(g===Jb)return null;p.setColor(g)}if(r&&p.setWidth(r(y)),l){const g=l(y);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(g)}if(c){const g=c(y);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(g)}return d&&p.setLineDash(d(y)),u&&p.setLineDashOffset(u(y)),f&&p.setMiterLimit(f(y)),m&&p.setOffset(m(y)),p}}function xk(t,e){const n="text-",r=Vc(t,n+"value",e);if(!r)return null;const i=og(t,n,e),l=og(t,n+"background-",e),c=cg(t,n,e),d=cg(t,n+"background-",e),u=Vc(t,n+"font",e),f=ga(t,n+"max-angle",e),m=ga(t,n+"offset-x",e),p=ga(t,n+"offset-y",e),y=ef(t,n+"overflow",e),g=Vc(t,n+"placement",e),N=ga(t,n+"repeat",e),C=y_(t,n+"scale",e),v=ef(t,n+"rotate-with-view",e),R=ga(t,n+"rotation",e),A=Vc(t,n+"align",e),M=Vc(t,n+"justify",e),L=Vc(t,n+"baseline",e),k=ef(t,n+"keep-upright",e),V=IE(t,n+"padding",e),G=b_(t,n+"declutter-mode"),W=new sN({declutterMode:G});return function(j){if(W.setText(r(j)),i&&W.setFill(i(j)),l&&W.setBackgroundFill(l(j)),c&&W.setStroke(c(j)),d&&W.setBackgroundStroke(d(j)),u&&W.setFont(u(j)),f&&W.setMaxAngle(f(j)),m&&W.setOffsetX(m(j)),p&&W.setOffsetY(p(j)),y&&W.setOverflow(y(j)),g){const S=g(j);if(S!=="point"&&S!=="line")throw new Error("Expected point or line for text-placement");W.setPlacement(S)}if(N&&W.setRepeat(N(j)),C&&W.setScale(C(j)),v&&W.setRotateWithView(v(j)),R&&W.setRotation(R(j)),A){const S=A(j);if(S!=="left"&&S!=="center"&&S!=="right"&&S!=="end"&&S!=="start")throw new Error("Expected left, right, center, start, or end for text-align");W.setTextAlign(S)}if(M){const S=M(j);if(S!=="left"&&S!=="right"&&S!=="center")throw new Error("Expected left, right, or center for text-justify");W.setJustify(S)}if(L){const S=L(j);if(S!=="bottom"&&S!=="top"&&S!=="middle"&&S!=="alphabetic"&&S!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");W.setTextBaseline(S)}return V&&W.setPadding(V(j)),k&&W.setKeepUpright(k(j)),W}}function pk(t,e){return"icon-src"in t?_k(t,e):"shape-points"in t?Ck(t,e):"circle-radius"in t?yk(t,e):null}function _k(t,e){const n="icon-",r=n+"src",i=OE(t[r],r),l=Ap(t,n+"anchor",e),c=y_(t,n+"scale",e),d=ga(t,n+"opacity",e),u=Ap(t,n+"displacement",e),f=ga(t,n+"rotation",e),m=ef(t,n+"rotate-with-view",e),p=_D(t,n+"anchor-origin"),y=CD(t,n+"anchor-x-units"),g=CD(t,n+"anchor-y-units"),N=dd(t,n+"color");let C,v=null;N!==void 0&&(Array.isArray(N)&&N.length>0&&typeof N[0]=="string"?v=C_(t,n+"color",e):C=ME(N,n+"color"));const R=Sk(t,n+"cross-origin"),A=vk(t,n+"offset"),M=_D(t,n+"offset-origin"),L=Wy(t,n+"width"),k=Wy(t,n+"height"),V=Nk(t,n+"size"),G=b_(t,n+"declutter-mode"),W={src:i,anchorOrigin:p,anchorXUnits:y,anchorYUnits:g,crossOrigin:R,offset:A,offsetOrigin:M,height:k,width:L,size:V,declutterMode:G};let j=null;return function(S){if(j)v&&j.setColor(v(S));else{const P=v?v(S):C;j=new mh(P!==void 0?Object.assign({},W,{color:P}):Object.assign({},W))}return d&&j.setOpacity(d(S)),u&&j.setDisplacement(u(S)),f&&j.setRotation(f(S)),m&&j.setRotateWithView(m(S)),c&&j.setScale(c(S)),l&&j.setAnchor(l(S)),j}}function Ck(t,e){const n="shape-",r=n+"points",i=n+"radius",l=nN(t[r],r);if(!(i in t))throw new Error(`Expected a number for ${i}`);const c=ga(t,i,e),d=typeof t[i]=="number"?t[i]:5,u=n+"radius2",f=ga(t,u,e),m=typeof t[u]=="number"?t[u]:void 0,p=og(t,n,e),y=cg(t,n,e),g=y_(t,n+"scale",e),N=Ap(t,n+"displacement",e),C=ga(t,n+"rotation",e),v=ef(t,n+"rotate-with-view",e),R=Wy(t,n+"angle"),A=b_(t,n+"declutter-mode"),M=new x_({points:l,radius:d,radius2:m,angle:R,declutterMode:A});return function(L){return c&&M.setRadius(c(L)),f&&M.setRadius2(f(L)),p&&M.setFill(p(L)),y&&M.setStroke(y(L)),N&&M.setDisplacement(N(L)),C&&M.setRotation(C(L)),v&&M.setRotateWithView(v(L)),g&&M.setScale(g(L)),M}}function yk(t,e){const n="circle-",r=og(t,n,e),i=cg(t,n,e),l=ga(t,n+"radius",e),c=y_(t,n+"scale",e),d=Ap(t,n+"displacement",e),u=ga(t,n+"rotation",e),f=ef(t,n+"rotate-with-view",e),m=b_(t,n+"declutter-mode"),p=new p_({radius:5,declutterMode:m});return function(y){return l&&p.setRadius(l(y)),r&&p.setFill(r(y)),i&&p.setStroke(i(y)),d&&p.setDisplacement(d(y)),u&&p.setRotation(u(y)),f&&p.setRotateWithView(f(y)),c&&p.setScale(c(y)),p}}function dd(t,e){if(!(e in t))return;const n=t[e];return n===void 0?void 0:n}function ga(t,e,n){const r=dd(t,e);if(r===void 0)return;const i=fc(r,Un,n);return function(l){return nN(i(l),e)}}function Vc(t,e,n){const r=dd(t,e);if(r===void 0)return null;const i=fc(r,al,n);return function(l){return OE(i(l),e)}}function bk(t,e,n){const r=Vc(t,e+"pattern-src",n),i=pD(t,e+"pattern-offset",n),l=pD(t,e+"pattern-size",n),c=C_(t,e+"color",n);return function(d){return{src:r(d),offset:i&&i(d),size:l&&l(d),color:c&&c(d)}}}function ef(t,e,n){const r=dd(t,e);if(r===void 0)return null;const i=fc(r,Aa,n);return function(l){const c=i(l);if(typeof c!="boolean")throw new Error(`Expected a boolean for ${e}`);return c}}function C_(t,e,n){const r=dd(t,e);if(r===void 0)return null;const i=fc(r,Eo,n);return function(l){return ME(i(l),e)}}function IE(t,e,n){const r=dd(t,e);if(r===void 0)return null;if(Array.isArray(r)&&(r.length===0||typeof r[0]!="string")){const l=r.map((c,d)=>{if(typeof c=="number")return()=>c;const u=fc(c,Un,n);return function(f){return nN(u(f),`${e}[${d}]`)}});return function(c){const d=new Array(l.length);for(let u=0;u<l.length;++u)d[u]=l[u](c);return d}}const i=fc(r,Sh,n);return function(l){return Tg(i(l),e)}}function Ap(t,e,n){const r=dd(t,e);if(r===void 0)return null;const i=fc(r,Sh,n);return function(l){const c=Tg(i(l),e);if(c.length!==2)throw new Error(`Expected two numbers for ${e}`);return c}}function pD(t,e,n){const r=dd(t,e);if(r===void 0)return null;const i=fc(r,Sh,n);return function(l){return LE(i(l),e)}}function y_(t,e,n){const r=dd(t,e);if(r===void 0)return null;const i=fc(r,Sh|Un,n);return function(l){return Dk(i(l),e)}}function Wy(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function Nk(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return cl(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function Sk(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function _D(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function CD(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function vk(t,e){const n=t[e];if(n!==void 0)return Tg(n,e)}function b_(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function Tg(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function OE(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function nN(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function ME(t,e){if(typeof t=="string")return t;const n=Tg(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function LE(t,e){const n=Tg(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function Dk(t,e){return typeof t=="number"?t:LE(t,e)}const yD={RENDER_ORDER:"renderOrder"};class wE extends m_{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(yD.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new yE(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(yD.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?jE:e;const n=Rk(e);this.styleFunction_=e===null?void 0:uk(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Rk(t){if(t===void 0)return jE;if(!t)return null;if(typeof t=="function"||t instanceof cc)return t;if(!Array.isArray(t))return xD([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof cc){const i=new Array(e);for(let l=0;l<e;++l){const c=t[l];if(!(c instanceof cc))throw new Error("Expected a list of style instances");i[l]=c}return i}if("style"in n){const i=new Array(e);for(let l=0;l<e;++l){const c=t[l];if(!("style"in c))throw new Error("Expected a list of rules with a style property");i[l]=c}return mk(i)}return xD(t)}class PE extends cd{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}}class Tk extends s_{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){Zn()}calculateMatrices2D(e){const n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;id(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),nE(i,r)}forEachFeatureAtCoordinate(e,n,r,i,l,c,d,u){let f;const m=n.viewState;function p(L,k,V,G){return l.call(c,k,L?V:null,G)}const y=m.projection,g=$5(e.slice(),y),N=[[0,0]];if(y.canWrapX()&&i){const L=y.getExtent(),k=pr(L);N.push([-k,0],[k,0])}const C=n.layerStatesArray,v=C.length,R=[],A=[];for(let L=0;L<N.length;L++)for(let k=v-1;k>=0;--k){const V=C[k],G=V.layer;if(G.hasRenderer()&&Xb(V,m)&&d.call(u,G)){const W=G.getRenderer(),j=G.getSource();if(W&&j){const S=j.getWrapX()?g:e,P=p.bind(null,V.managed);A[0]=S[0]+N[L][0],A[1]=S[1]+N[L][1],f=W.forEachFeatureAtCoordinate(A,n,r,P,R)}if(f)return f}}if(R.length===0)return;const M=1/R.length;return R.forEach((L,k)=>L.distanceSq+=k*M),R.sort((L,k)=>L.distanceSq-k.distanceSq),R.some(L=>f=L.callback(L.feature,L.layer,L.geometry)),f}hasFeatureAtCoordinate(e,n,r,i,l,c){return this.forEachFeatureAtCoordinate(e,n,r,i,Jm,this,l,c)!==void 0}getMap(){return this.map_}renderFrame(e){Zn()}scheduleExpireIconCache(e){zl.canExpireCache()&&e.postRenderFunctions.push(Ek)}}function Ek(t,e){zl.expire()}class jk extends Tk{constructor(e){super(e),this.fontChangeListenerKey_=er(B0,bf.PROPERTYCHANGE,e.redrawText,e),this.element_=$l?fE():document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=h_+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const r=this.getMap();if(r.hasListener(e)){const i=new PE(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){Hr(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Hl.PRECOMPOSE,e);const n=e.layerStatesArray.sort((f,m)=>f.zIndex-m.zIndex);n.some(f=>f.layer instanceof wE&&f.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const l=[];let c=null;for(let f=0,m=n.length;f<m;++f){const p=n[f];e.layerIndex=f;const y=p.layer,g=y.getSourceState();if(!Xb(p,i)||g!="ready"&&g!="undefined"){y.unrender();continue}const N=y.render(e,c);N&&(N!==c&&(this.children_.push(N),c=N),l.push(p))}this.declutter(e,l),WA(this.element_,this.children_);const u=this.getMap().getTargetElement();if(hu(u)){const f=u.getContext("2d");for(const m of this.children_){const p=m.firstElementChild||m,y=m.style.backgroundColor;if(y&&(!hu(p)||p.width>0)&&(f.fillStyle=y,f.fillRect(0,0,u.width,u.height)),hu(p)&&p.width>0){f.save();const g=m.style.opacity||p.style.opacity;f.globalAlpha=g===""?1:Number(g);const N=p.style.transform;if(N)f.transform(...Ly(N));else{const C=parseFloat(p.style.width)/p.width,v=parseFloat(p.style.height)/p.height;f.transform(C,0,0,v,0,0)}f.drawImage(p,0,0),f.restore()}}}this.dispatchRenderEvent(Hl.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let r=n.length-1;r>=0;--r){const i=n[r],l=i.layer;l.getDeclutter()&&l.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}}}function AE(t){if(t instanceof m_){t.setMapInternal(null);return}t instanceof Mf&&t.getLayers().forEach(AE)}function kE(t,e){if(t instanceof m_){t.setMapInternal(e);return}if(t instanceof Mf){const n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)kE(n[r],e)}}let Ik=class extends gc{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=Ok(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:cP,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Io(),this.pixelToCoordinateTransform_=Io(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,$l||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,$l||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=n.controls||($l?new Vl:QA()),this.interactions=n.interactions||($l?new Vl:u6({onFocusOnly:!0})),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new hP(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Da.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Da.VIEW,this.handleViewChanged_),this.addChangeListener(Da.SIZE,this.handleSizeChanged_),this.addChangeListener(Da.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;e.view&&!(e.view instanceof ic)&&e.view.then(function(i){r.setView(new ic(i))}),this.controls.addEventListener(il.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(il.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(il.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(il.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(il.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(il.REMOVE,i=>{const l=i.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){kE(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){var e;this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),(e=this.resizeObserver_)==null||e.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const l=r.hitTolerance!==void 0?r.hitTolerance:0,c=r.layerFilter!==void 0?r.layerFilter:Jm,d=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,l,d,n,null,c,null)}getFeaturesAtPixel(e,n){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){const e=[];function n(r){r.forEach(function(i){i instanceof Mf?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const i=n.layerFilter!==void 0?n.layerFilter:Jm,l=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,l,c,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),l=r.width/i[0],c=r.height/i[1],d="changedTouches"in e?e.changedTouches[0]:e;return[(d.clientX-r.left)/l,(d.clientY-r.top)/c]}getTarget(){return this.get(Da.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return My(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?ra(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Da.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof Vl){n.setLayers(e);return}const r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n];if(!i.visible)continue;const l=i.layer.getRenderer();if(l&&!l.ready)return!0;const c=i.layer.getSource();if(c&&c.loading)return!0}return!1}getPixelFromCoordinate(e){const n=Gc(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?ra(n.coordinateToPixelTransform,e.slice(0,2)):null}getPixelRatio(){return this.pixelRatio_}setPixelRatio(e){this.pixelRatio_!==e&&(this.pixelRatio_=e,this.render())}getRenderer(){return this.renderer_}getSize(){return this.get(Da.SIZE)}getView(){return this.get(Da.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return fP(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;const r=new Zd(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,r=n.type;if(r===Sy.POINTERDOWN||r===Rn.WHEEL||r===Rn.KEYDOWN){const i=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():i,c=n.target,d=l instanceof ShadowRoot?l.host===c?l.host.ownerDocument:l:l===i?i.documentElement:l;if(this.overlayContainerStopEvent_.contains(c)||!d.contains(c))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let l=i.length-1;l>=0;l--){const c=i[l];if(c.getMap()!==this||!c.getActive()||!this.getTargetElement())continue;if(!c.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,l=i;if(e){const c=e.viewHints;if(c[Ra.ANIMATING]||c[Ra.INTERACTING]){const d=Date.now()-e.time>8;i=d?0:8,l=d?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Hl.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Hl.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new U0(eu.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new U0(eu.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,l=r.length;i<l;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){var r,i;if(this.mapBrowserEventHandler_){for(let l=0,c=this.targetChangeHandlerKeys_.length;l<c;++l)Hr(this.targetChangeHandlerKeys_[l]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Rn.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Rn.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!hu(this.targetElement_)){(r=this.resizeObserver_)==null||r.unobserve(this.targetElement_);const l=this.targetElement_.getRootNode();l instanceof ShadowRoot&&this.resizeObserver_.unobserve(l.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(hu(n)||n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new jk(this)),!hu(n)){this.mapBrowserEventHandler_=new dP(this,this.moveTolerance_);for(const c in hi)this.mapBrowserEventHandler_.addEventListener(hi[c],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Rn.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Rn.WHEEL,this.boundHandleBrowserEvent_,k5?{passive:!1}:!1);let l;if(this.keyboardEventTarget_)l=this.keyboardEventTarget_;else{const c=n.getRootNode();l=c instanceof ShadowRoot?c.host:n}if(this.targetChangeHandlerKeys_=[er(l,Rn.KEYDOWN,this.handleBrowserEvent,this),er(l,Rn.KEYPRESS,this.handleBrowserEvent,this)],n instanceof HTMLElement){const c=n.getRootNode();c instanceof ShadowRoot&&this.resizeObserver_.observe(c.host),(i=this.resizeObserver_)==null||i.observe(n)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Hr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Hr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=er(e,bf.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=er(e,Rn.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Hr),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new tu("addlayer",e)),this.layerGroupPropertyListenerKeys_=[er(e,bf.PROPERTYCHANGE,this.render,this),er(e,Rn.CHANGE,this.render,this),er(e,"addlayer",this.handleLayerAdd_,this),er(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let n=0,r=e.length;n<r;++n){const i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){AE(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),r=this.getView(),i=this.frameState_;let l=null;if(n!==void 0&&oD(n)&&r&&r.isDef()){const c=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),d=r.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Ey(d.center,d.resolution,d.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:d,viewHints:c,wantedTiles:{},mapId:tr(this),renderTargets:{}},d.nextCenter&&d.nextResolution){const u=isNaN(d.nextRotation)?d.rotation:d.nextRotation;l.nextExtent=Ey(d.nextCenter,d.nextResolution,u,n)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),i&&(!this.previousExtent_||!Sg(this.previousExtent_)&&!eg(l.extent,this.previousExtent_))&&(this.dispatchEvent(new U0(eu.MOVESTART,this,i)),this.previousExtent_=a_(this.previousExtent_)),this.previousExtent_&&!l.viewHints[Ra.ANIMATING]&&!l.viewHints[Ra.INTERACTING]&&!eg(l.extent,this.previousExtent_)&&(this.dispatchEvent(new U0(eu.MOVEEND,this,l)),U5(l.extent,this.previousExtent_))),this.dispatchEvent(new U0(eu.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(eu.LOADSTART)||this.hasListener(eu.LOADEND)||this.hasListener(Hl.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new tu("removelayer",n)),this.set(Da.LAYERGROUP,e)}setSize(e){this.set(Da.SIZE,e)}setTarget(e){this.set(Da.TARGET,e)}setView(e){if(!e||e instanceof ic){this.set(Da.VIEW,e);return}this.set(Da.VIEW,new ic);const n=this;e.then(function(r){n.setView(new ic(r))})}updateSize(){const e=this.getTargetElement();let n;if(e){let i,l;if(hu(e)){const c=e.getContext("2d").getTransform();i=e.width/c.a,l=e.height/c.d}else{const c=getComputedStyle(e);i=e.offsetWidth-parseFloat(c.borderLeftWidth)-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)-parseFloat(c.borderRightWidth),l=e.offsetHeight-parseFloat(c.borderTopWidth)-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)-parseFloat(c.borderBottomWidth)}!isNaN(i)&&!isNaN(l)&&(n=[Math.max(0,i),Math.max(0,l)],!oD(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&z5("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!Du(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function Ok(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new Mf({layers:t.layers});n[Da.LAYERGROUP]=r,n[Da.TARGET]=t.target,n[Da.VIEW]=t.view instanceof ic?t.view:new ic;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new Vl(t.controls.slice()):(dr(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let l;t.interactions!==void 0&&(Array.isArray(t.interactions)?l=new Vl(t.interactions.slice()):(dr(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=t.interactions));let c;return t.overlays!==void 0?Array.isArray(t.overlays)?c=new Vl(t.overlays.slice()):(dr(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),c=t.overlays):c=new Vl,{controls:i,interactions:l,keyboardEventTarget:e,overlays:c,values:n}}class rN extends r_{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Rn.CHANGE)}release(){this.setState(ln.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ln.EMPTY){if(this.state!==ln.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Zn()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=n-r+1e3/60;return i>=this.transition_?1:H5(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function By(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const Mk=new Error("disposed"),Lk=[256,256];class bD extends rN{constructor(e){const n=ln.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=By(this.data_);return e?[e.width,e.height]:Lk}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ln.IDLE&&this.state!==ln.ERROR)return;this.state=ln.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=ln.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=ln.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Mk),this.controller_=null),super.disposeInternal()}}class UE extends rN{constructor(e,n,r,i,l,c){super(e,n,c),this.crossOrigin_=i==null?void 0:i.crossOrigin,this.referrerPolicy_=i==null?void 0:i.referrerPolicy,this.src_=r,this.key=r,this.image_,$l?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_),this.referrerPolicy_!==void 0&&(this.image_.referrerPolicy=this.referrerPolicy_)),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ln.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}getReferrerPolicy(){return this.referrerPolicy_}handleImageError_(){this.state=ln.ERROR,this.unlistenImage_(),this.image_=wk(),this.changed()}handleImageLoad_(){if($l)this.state=ln.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ln.LOADED:this.state=ln.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==ln.ERROR&&(this.state=ln.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_),this.referrerPolicy_!==void 0&&(this.image_.referrerPolicy=this.referrerPolicy_)),this.state==ln.IDLE&&(this.state=ln.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=J6(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function wk(){const t=Ii(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class iN{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function T0(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new iN(t,e,n,r)}let yC;const tf=[];function ND(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function bC(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function Pk(){if(yC===void 0){const t=Ii(6,6,tf);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",ND(t,4,5,4,0),ND(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;yC=bC(e,0)||bC(e,4)||bC(e,8),f_(t),tf.push(t.canvas)}return yC}function SD(t,e,n,r){const i=Ub(n,e,t);let l=Vv(e,r,n);const c=e.getMetersPerUnit();c!==void 0&&(l*=c);const d=t.getMetersPerUnit();d!==void 0&&(l/=d);const u=t.getExtent();if(!u||Sf(u,i)){const f=Vv(t,l,i)/l;isFinite(f)&&f>0&&(l/=f)}return l}function Ak(t,e,n,r){const i=bh(n);let l=SD(t,e,i,r);return(!isFinite(l)||l<=0)&&Q5(n,function(c){return l=SD(t,e,c,r),isFinite(l)&&l>0}),l}function kk(t,e,n,r,i,l,c,d,u,f,m,p,y,g){const N=Ii(Math.round(n*t),Math.round(n*e),tf);if(p||(N.imageSmoothingEnabled=!1),u.length===0)return N.canvas;N.scale(n,n);function C(k){return Math.round(k*n)/n}N.globalCompositeOperation="lighter";const v=Zl();u.forEach(function(k,V,G){pP(v,k.extent)});let R;const A=n/r,M=(p?1:1+Math.pow(2,-24))/A;R=Ii(Math.round(pr(v)*A),Math.round(Ua(v)*A),tf),p||(R.imageSmoothingEnabled=!1),u.forEach(function(k,V,G){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){R.save();const F=(k.clipExtent[0]-v[0])*A,ee=-(k.clipExtent[3]-v[3])*A,J=pr(k.clipExtent)*A,$=Ua(k.clipExtent)*A;R.rect(p?F:Math.round(F),p?ee:Math.round(ee),p?J:Math.round(F+J)-Math.round(F),p?$:Math.round(ee+$)-Math.round(ee)),R.clip()}const W=(k.extent[0]-v[0])*A,j=-(k.extent[3]-v[3])*A,S=pr(k.extent)*A,P=Ua(k.extent)*A;R.drawImage(k.image,f,f,k.image.width-2*f,k.image.height-2*f,p?W:Math.round(W),p?j:Math.round(j),p?S:Math.round(W+S)-Math.round(W),p?P:Math.round(j+P)-Math.round(j)),k.clipExtent&&R.restore()}});const L=wh(c);return d.getTriangles().forEach(function(k,V,G){const W=k.source,j=k.target;let S=W[0][0],P=W[0][1],F=W[1][0],ee=W[1][1],J=W[2][0],$=W[2][1];const Y=C((j[0][0]-L[0])/l),K=C(-(j[0][1]-L[1])/l),w=C((j[1][0]-L[0])/l),se=C(-(j[1][1]-L[1])/l),oe=C((j[2][0]-L[0])/l),T=C(-(j[2][1]-L[1])/l),I=S,U=P;S=0,P=0,F-=I,ee-=U,J-=I,$-=U;const Q=[[F,ee,0,0,w-Y],[J,$,0,0,oe-Y],[0,0,F,ee,se-K],[0,0,J,$,T-K]],H=gP(Q);if(!H)return;if(N.save(),N.beginPath(),Pk()||!p){N.moveTo(w,se);const ae=4,fe=Y-w,ge=K-se;for(let ce=0;ce<ae;ce++)N.lineTo(w+C((ce+1)*fe/ae),se+C(ce*ge/(ae-1))),ce!=ae-1&&N.lineTo(w+C((ce+1)*fe/ae),se+C((ce+1)*ge/(ae-1)));N.lineTo(oe,T)}else N.moveTo(w,se),N.lineTo(Y,K),N.lineTo(oe,T);N.clip(),N.transform(H[0],H[2],H[1],H[3],Y,K),N.translate(v[0]-I,v[3]-U);let q;if(R)q=R.canvas,N.scale(M,-M);else{const ae=u[0],fe=ae.extent;q=ae.image,N.scale(pr(fe)/q.width,-Ua(fe)/q.height)}N.drawImage(q,0,0),N.restore()}),R&&(f_(R),tf.push(R.canvas)),m&&(N.save(),N.globalCompositeOperation="source-over",N.strokeStyle="black",N.lineWidth=1,d.getTriangles().forEach(function(k,V,G){const W=k.target,j=(W[0][0]-L[0])/l,S=-(W[0][1]-L[1])/l,P=(W[1][0]-L[0])/l,F=-(W[1][1]-L[1])/l,ee=(W[2][0]-L[0])/l,J=-(W[2][1]-L[1])/l;N.beginPath(),N.moveTo(P,F),N.lineTo(j,S),N.lineTo(ee,J),N.closePath(),N.stroke()}),N.restore()),N.canvas}const Uk=10,vD=.25;class Wk{constructor(e,n,r,i,l,c,d){this.sourceProj_=e,this.targetProj_=n;let u={};const f=d?tA(M=>ra(d,Ub(M,this.targetProj_,this.sourceProj_))):Mp(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){const L=M[0]+"/"+M[1];return u[L]||(u[L]=f(M)),u[L]},this.maxSourceExtent_=i,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&pr(i)>=pr(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?pr(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?pr(this.targetProj_.getExtent()):null;const m=wh(r),p=c_(r),y=o_(r),g=l_(r),N=this.transformInv_(m),C=this.transformInv_(p),v=this.transformInv_(y),R=this.transformInv_(g),A=Uk+(c?Math.max(0,Math.ceil(Math.log2(Ty(r)/(c*c*256*256)))):0);if(this.addQuad_(m,p,y,g,N,C,v,R,A),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(L,k,V){M=Math.min(M,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(L=>{if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-M>this.sourceWorldWidth_/2){const k=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];k[0][0]-M>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-M>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-M>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);const V=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-V<this.sourceWorldWidth_/2&&(L.source=k)}})}u={}}addTriangle_(e,n,r,i,l,c){this.triangles_.push({source:[i,l,c],target:[e,n,r]})}addQuad_(e,n,r,i,l,c,d,u,f){const m=Dy([l,c,d,u]),p=this.sourceWorldWidth_?pr(m)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&p>.5&&p<1;let N=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=Dy([e,n,r,i]);N=pr(v)/this.targetWorldWidth_>vD||N}!g&&this.sourceProj_.isGlobal()&&p&&(N=p>vD||N)}if(!N&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!ol(m,this.maxSourceExtent_))return;let C=0;if(!N&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(d[0])||!isFinite(d[1])||!isFinite(u[0])||!isFinite(u[1]))){if(f>0)N=!0;else if(C=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(c[0])||!isFinite(c[1])?4:0)+(!isFinite(d[0])||!isFinite(d[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),C!=1&&C!=2&&C!=4&&C!=8)return}if(f>0){if(!N){const v=[(e[0]+r[0])/2,(e[1]+r[1])/2],R=this.transformInv_(v);let A;g?A=(X0(l[0],y)+X0(d[0],y))/2-X0(R[0],y):A=(l[0]+d[0])/2-R[0];const M=(l[1]+d[1])/2-R[1];N=A*A+M*M>this.errorThresholdSquared_}if(N){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const v=[(n[0]+r[0])/2,(n[1]+r[1])/2],R=this.transformInv_(v),A=[(i[0]+e[0])/2,(i[1]+e[1])/2],M=this.transformInv_(A);this.addQuad_(e,n,v,A,l,c,R,M,f-1),this.addQuad_(A,v,r,i,M,R,d,u,f-1)}else{const v=[(e[0]+n[0])/2,(e[1]+n[1])/2],R=this.transformInv_(v),A=[(r[0]+i[0])/2,(r[1]+i[1])/2],M=this.transformInv_(A);this.addQuad_(e,v,A,i,l,R,M,u,f-1),this.addQuad_(v,n,r,A,R,c,d,M,f-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(C&11)==0&&this.addTriangle_(e,r,i,l,d,u),(C&14)==0&&this.addTriangle_(e,r,n,l,d,c),C&&((C&13)==0&&this.addTriangle_(n,i,e,c,u,l),(C&7)==0&&this.addTriangle_(n,i,r,c,u,d))}calculateSourceExtent(){const e=Zl();return this.triangles_.forEach(function(n,r,i){const l=n.source;Qm(e,l[0]),Qm(e,l[1]),Qm(e,l[2])}),e}getTriangles(){return this.triangles_}}const Bk=.5;class WE extends rN{constructor(e,n,r,i,l,c,d,u,f,m,p,y){super(l,ln.IDLE,y),this.renderEdges_=p!==void 0?p:!1,this.pixelRatio_=d,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=c||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=i.getTileCoordExtent(this.wrappedTileCoord_),N=this.targetTileGrid_.getExtent();let C=this.sourceTileGrid_.getExtent();const v=N?fh(g,N):g;if(Ty(v)===0){this.state=ln.EMPTY;return}const R=e.getExtent();R&&(C?C=fh(C,R):C=R);const A=i.getResolution(this.wrappedTileCoord_[0]),M=Ak(e,r,v,A);if(!isFinite(M)||M<=0){this.state=ln.EMPTY;return}const L=m!==void 0?m:Bk;if(this.triangulation_=new Wk(e,r,v,C,M*L,A),this.triangulation_.getTriangles().length===0){this.state=ln.EMPTY;return}this.sourceZ_=n.getZForResolution(M);let k=this.triangulation_.calculateSourceExtent();if(C&&(e.canWrapX()?(k[1]=zr(k[1],C[1],C[3]),k[3]=zr(k[3],C[1],C[3])):k=fh(k,C)),!Ty(k))this.state=ln.EMPTY;else{let V=0,G=0;e.canWrapX()&&(V=pr(R),G=Math.floor((k[0]-R[0])/V)),V5(k.slice(),e,!0).forEach(j=>{const S=n.getTileRangeForExtentAndZ(j,this.sourceZ_);for(let P=S.minX;P<=S.maxX;P++)for(let F=S.minY;F<=S.maxY;F++){const ee=G*V;this.sourceTiles_.push({getTile:()=>f(this.sourceZ_,P,F,d),offset:ee})}++G}),this.sourceTiles_.length===0&&(this.state=ln.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{var i;const r=n.tile;if(r&&r.getState()==ln.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);l[0]+=n.offset,l[2]+=n.offset;const c=(i=this.clipExtent_)==null?void 0:i.slice();c&&(c[0]+=n.offset,c[2]+=n.offset),e.push({extent:l,clipExtent:c,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ln.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],l=typeof r=="number"?r:r[1],c=this.targetTileGrid_.getResolution(n),d=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=kk(i,l,this.pixelRatio_,d,this.sourceTileGrid_.getExtent(),c,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ln.LOADED}this.changed()}load(){for(const e of this.sourceTiles_)e.tile=e.getTile();if(this.state==ln.IDLE){this.state=ln.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==ln.IDLE||r==ln.LOADING){e++;const i=er(n,Rn.CHANGE,l=>{const c=n.getState();(c==ln.LOADED||c==ln.ERROR||c==ln.EMPTY)&&(Hr(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,i){n.getState()==ln.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Hr),this.sourcesListenerKeys_=null}release(){this.canvas_&&(f_(this.canvas_.getContext("2d")),tf.push(this.canvas_),this.canvas_=null),this.sourceTiles_.length=0,super.release()}}class DD{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof s_&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return dr(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return dr(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){dr(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function kp(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function Fk(t,e,n){return t+"/"+e+"/"+n}function lp(t,e,n,r,i){return`${tr(t)},${e},${Fk(n,r,i)}`}function Kk(t){return Qk(t[0],t[1],t[2])}function Qk(t,e,n){return(e<<t)+n}function Gk(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const l=e.getFullTileRange(n);return l?l.containsXY(r,i):!0}class BE{constructor(){ar(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(wp(),{get:(e,n)=>{if(typeof wp()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(e,n,r)=>(this.push_(n,r),!0)})}push_(...e){const n=this.instructions_,r=this.zIndex+this.offset_;n[r]||(n[r]=[]),n[r].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;++r){const l=n[r];if(typeof l=="function"){l(e);continue}const c=n[++r];if(typeof e[l]=="function")e[l](...c);else{if(typeof c=="function"){e[l]=c(e);continue}e[l]=c}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Yk=5;class Vk extends Ng{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Yk}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Zn()}getData(e){return null}prepareFrame(e){return Zn()}renderFrame(e,n){return Zn()}forEachFeatureAtCoordinate(e,n,r,i,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===Sn.LOADED||n.getState()===Sn.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=Sn.LOADED&&n!=Sn.ERROR&&e.addEventListener(Rn.CHANGE,this.boundHandleImageChange_),n==Sn.IDLE&&(e.load(),n=e.getState()),n==Sn.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const RD=[];let F0=null;function $k(){F0=Ii(1,1,void 0,{willReadFrequently:!0})}class FE extends Vk{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Io(),this.pixelTransform=Io(),this.inversePixelTransform=Io(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,r){F0||$k(),F0.clearRect(0,0,1,1);let i;try{F0.drawImage(e,n,r,1,1,0,0,1,1),i=F0.getImageData(0,0,1,1).data}catch{return F0=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){const i=this.getLayer().getClassName();let l,c;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Du(Nh(e.style.backgroundColor),Nh(r)))){const d=e.firstElementChild;hu(d)&&(c=d.getContext("2d"))}if(c&&lA(c.canvas.style.transform,n)?(this.container=e,this.context=c,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=$l?fE():document.createElement("div"),l.className=i;let d=l.style;d.position="absolute",d.width="100%",d.height="100%",c=Ii();const u=c.canvas;l.appendChild(u),d=u.style,d.position="absolute",d.left="0",d.transformOrigin="top left",this.container=l,this.context=c}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){const i=wh(r),l=c_(r),c=o_(r),d=l_(r);ra(n.coordinateToPixelTransform,i),ra(n.coordinateToPixelTransform,l),ra(n.coordinateToPixelTransform,c),ra(n.coordinateToPixelTransform,d);const u=this.inversePixelTransform;ra(u,i),ra(u,l),ra(u,c),ra(u,d),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.lineTo(Math.round(d[0]),Math.round(d[1])),e.clip()}prepareContainer(e,n){const r=e.extent,i=e.viewState.resolution,l=e.viewState.rotation,c=e.pixelRatio,d=Math.round(pr(r)/i*c),u=Math.round(Ua(r)/i*c);id(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-d/2,-u/2),nE(this.inversePixelTransform,this.pixelTransform);const f=aA(this.pixelTransform);if(this.useContainer(n,f,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=d||m.height!=u?(m.width=d,m.height=u):this.context.clearRect(0,0,d,u),f!==m.style.transform&&(m.style.transform=f)}}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){const l=new PE(e,this.inversePixelTransform,r,n);i.dispatchEvent(l)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(Hl.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(Hl.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new BE),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Hl.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Hl.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,l,c,d){const u=l/2,f=c/2,m=i/n,p=-m,y=-e[0]+d,g=-e[1];return id(this.tempTransform,u,f,m,p,-r,y,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function NC(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const r=t[n],i=r.has(e);return i||r.add(e),!i}function Hk(t,e,n){const r=t[n];return r?r.delete(e):!1}function TD(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=fh(e,uu(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=fh(e,i))}return e}class zk extends FE{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Zl(),this.tempTileRange_=new iN(0,0,0,0),this.tempTileCoord_=kp(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new DD(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new DD(512)),this.sourceTileCache_}getOrCreateTile(e,n,r,i){const l=this.tileCache_,d=this.getLayer().getSource(),u=lp(d,d.getKey(),e,n,r);let f;if(l.containsKey(u))f=l.get(u);else{const m=i.viewState.projection,p=d.getProjection();if(f=d.getTile(e,n,r,i.pixelRatio,m,!p||ap(p,m)?void 0:this.getSourceTileCache()),!f)return null;l.set(u,f)}return f}getTile(e,n,r,i){const l=this.getOrCreateTile(e,n,r,i);return l||null}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=ra(n.pixelToCoordinateTransform,e.slice()),l=r.getExtent();if(l&&!Sf(l,i))return null;const c=n.viewState,d=r.getRenderSource(),u=d.getTileGridForProjection(c.projection),f=d.getTilePixelRatio(n.pixelRatio);for(let m=u.getZForResolution(c.resolution);m>=u.getMinZoom();--m){const p=u.getTileCoordForCoordAndZ(i,m),y=this.getTile(m,p[1],p[2],n);if(!y||y.getState()!==ln.LOADED)continue;const g=u.getOrigin(m),N=cl(u.getTileSize(m)),C=u.getResolution(m);let v;if(y instanceof UE||y instanceof WE)v=y.getImage();else if(y instanceof bD){if(v=By(y.getData()),!v)continue}else continue;const R=Math.floor(f*((i[0]-g[0])/C-p[1]*N[0])),A=Math.floor(f*((g[1]-i[1])/C-p[2]*N[1])),M=Math.round(f*d.getGutterForProjection(c.projection));return this.getImageData(v,R+M,A+M)}return null}prepareFrame(e){var i;this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===n.getKey()&&(this.tileCache_.clear(),(i=this.sourceTileCache_)==null||i.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,n,r,i,l){const c=e.viewState,d=this.getLayer(),u=d.getRenderSource(),f=u.getTileGridForProjection(c.projection),m=tr(u);m in e.wantedTiles||(e.wantedTiles[m]={});const p=e.wantedTiles[m],y=d.getMapInternal(),g=Math.max(r-l,f.getMinZoom(),f.getZForResolution(Math.min(d.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(d.getMinZoom(),0)):f.getResolution(0)),u.zDirection)),N=c.rotation,C=N?G5(c.center,c.resolution,N,e.size):void 0;for(let v=r;v>=g;--v){const R=f.getTileRangeForExtentAndZ(n,v,this.tempTileRange_),A=f.getResolution(v);for(let M=R.minX;M<=R.maxX;++M)for(let L=R.minY;L<=R.maxY;++L){if(N&&!f.tileCoordIntersectsViewport([v,M,L],C))continue;const k=this.getTile(v,M,L,e);if(!k||!NC(i,k,v))continue;const G=k.getKey();if(p[G]=!0,k.getState()===ln.IDLE&&!e.tileQueue.isKeyQueued(G)){const W=kp(v,M,L,this.tempTileCoord_);e.tileQueue.enqueue([k,m,f.getTileCoordCenter(W),A])}}}}findStaleTile_(e,n){const r=this.tileCache_,i=e[0],l=e[1],c=e[2],d=this.getStaleKeys();for(let u=0;u<d.length;++u){const f=lp(this.getLayer().getSource(),d[u],i,l,c);if(r.containsKey(f)){const m=r.peek(f);if(m.getState()===ln.LOADED)return m.endTransition(tr(this)),NC(n,m,i),!0}}return!1}findAltTiles_(e,n,r,i){const l=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!l)return!1;let c=!0;const d=this.tileCache_,u=this.getLayer().getRenderSource(),f=u.getKey();for(let m=l.minX;m<=l.maxX;++m)for(let p=l.minY;p<=l.maxY;++p){const y=lp(u,f,r,m,p);let g=!1;if(d.containsKey(y)){const N=d.peek(y);N.getState()===ln.LOADED&&(NC(i,N,r),g=!0)}g||(c=!1)}return c}renderFrame(e,n){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,l=i.projection,c=i.resolution,d=i.center,u=e.pixelRatio,f=this.getLayer(),m=f.getSource(),p=m.getTileGridForProjection(l),y=p.getZForResolution(c,m.zDirection),g=p.getResolution(y),N=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==N&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=N):this.renderedSourceKey_=N;let C=e.extent;const v=m.getTilePixelRatio(u);this.prepareContainer(e,n);const R=this.context.canvas.width,A=this.context.canvas.height,M=r.extent&&uu(r.extent);M&&(C=fh(C,uu(r.extent)));const L=g*R/2/v,k=g*A/2/v,V=[d[0]-L,d[1]-k,d[0]+L,d[1]+k],G={};this.renderedTiles.length=0;const W=f.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const w=p.getZForResolution(i.nextResolution,m.zDirection),se=TD(e,e.nextExtent);this.enqueueTiles(e,se,w,G,W)}const j=TD(e,C);if(this.enqueueTiles(e,j,y,G,0),W>0&&setTimeout(()=>{this.enqueueTiles(e,j,y-1,G,W-1)},0),!(y in G))return this.container;const S=tr(this),P=e.time;for(const w of G[y]){const se=w.getState();if(se===ln.EMPTY)continue;const oe=w.tileCoord;if(se===ln.LOADED&&w.getAlpha(S,P)===1){w.endTransition(S);continue}if(se!==ln.ERROR&&(this.renderComplete=!1),this.findStaleTile_(oe,G)){Hk(G,w,y),e.animate=!0;continue}if(this.findAltTiles_(p,oe,y+1,G))continue;const U=p.getMinZoom();for(let Q=y-1;Q>=U&&!this.findAltTiles_(p,oe,Q,G);--Q);}const F=g/c*u/v,ee=this.getRenderContext(e);id(this.tempTransform,R/2,A/2,F,F,0,-R/2,-A/2),r.extent&&this.clipUnrotated(ee,e,M),m.getInterpolate()||(ee.imageSmoothingEnabled=!1),this.preRender(ee,e);const J=Object.keys(G).map(Number);J.sort(Jc);let $;const Y=[],K=[];for(let w=J.length-1;w>=0;--w){const se=J[w],oe=m.getTilePixelSize(se,u,l),I=p.getResolution(se)/g,U=oe[0]*I*F,Q=oe[1]*I*F,H=p.getTileCoordForCoordAndZ(wh(V),se),q=p.getTileCoordExtent(H),ae=ra(this.tempTransform,[v*(q[0]-V[0])/g,v*(V[3]-q[3])/g]),fe=v*m.getGutterForProjection(l);for(const ge of G[se]){if(ge.getState()!==ln.LOADED)continue;const ce=ge.tileCoord,Re=H[1]-ce[1],X=Math.round(ae[0]-(Re-1)*U),me=H[2]-ce[2],he=Math.round(ae[1]-(me-1)*Q),Z=Math.round(ae[0]-Re*U),ie=Math.round(ae[1]-me*Q),te=X-Z,je=he-ie,be=J.length===1;let Te=!1;$=[Z,ie,Z+te,ie,Z+te,ie+je,Z,ie+je];for(let re=0,pe=Y.length;re<pe;++re)if(!be&&se<K[re]){const Se=Y[re];ol([Z,ie,Z+te,ie+je],[Se[0],Se[3],Se[4],Se[7]])&&(Te||(ee.save(),Te=!0),ee.beginPath(),ee.moveTo($[0],$[1]),ee.lineTo($[2],$[3]),ee.lineTo($[4],$[5]),ee.lineTo($[6],$[7]),ee.moveTo(Se[6],Se[7]),ee.lineTo(Se[4],Se[5]),ee.lineTo(Se[2],Se[3]),ee.lineTo(Se[0],Se[1]),ee.clip())}Y.push($),K.push(se),this.drawTile(ge,e,Z,ie,te,je,fe,be),Te&&ee.restore(),this.renderedTiles.unshift(ge),this.updateUsedTiles(e.usedTiles,m,ge)}}if(this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!eg(this.renderedExtent_,V),this.renderedExtent_=V,this.renderedPixelRatio=u,this.postRender(this.context,e),r.extent&&ee.restore(),ee.imageSmoothingEnabled=!0,this.renderComplete){const w=(se,oe)=>{var Q;const T=tr(m),I=oe.wantedTiles[T],U=I?Object.keys(I).length:0;this.updateCacheSize(U),this.tileCache_.expireCache(),(Q=this.sourceTileCache_)==null||Q.expireCache()};e.postRenderFunctions.push(w)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,r,i,l,c,d,u){let f;if(e instanceof bD){if(f=By(e.getData()),!f)throw new Error("Rendering array data is not yet supported")}else f=this.getTileImage(e);if(!f)return;const m=this.getRenderContext(n),p=tr(this),y=n.layerStatesArray[n.layerIndex],g=y.opacity*(u?e.getAlpha(p,n.time):1),N=g!==m.globalAlpha;N&&(m.save(),m.globalAlpha=g),m.drawImage(f,d,d,f.width-2*d,f.height-2*d,r,i,l,c),N&&m.restore(),g!==y.opacity?n.animate=!0:u&&e.endTransition(p)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,r){const i=tr(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const Bx={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class qk extends m_{constructor(e){e=e||{};const n=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Bx.PRELOAD)}setPreload(e){this.set(Bx.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Bx.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Bx.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Xk extends qk{constructor(e){super(e)}createRenderer(){return new zk(this,{cacheSize:this.getCacheSize()})}}class KE{drawCustom(e,n,r,i,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const an={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Fx=[an.FILL],fu=[an.STROKE],nh=[an.BEGIN_PATH],ED=[an.CLOSE_PATH];class Eg extends KE{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,l=this.coordinates;let c=l.length;for(let d=0,u=e.length;d<u;d+=n)i[0]=e[d],i[1]=e[d+1],Sf(r,i)&&(l[c++]=i[0],l[c++]=i[1]);return c}appendFlatLineCoordinates(e,n,r,i,l,c){const d=this.coordinates;let u=d.length;const f=this.getBufferedMaxExtent();c&&(n+=i);let m=e[n],p=e[n+1];const y=this.tmpCoordinate_;let g=!0,N,C,v;for(N=n+i;N<r;N+=i)y[0]=e[N],y[1]=e[N+1],v=Ry(f,y),v!==C?(g&&(d[u++]=m,d[u++]=p,g=!1),d[u++]=y[0],d[u++]=y[1]):v===na.INTERSECTING?(d[u++]=y[0],d[u++]=y[1],g=!1):g=!0,m=y[0],p=y[1],C=v;return(l&&g||N===n+i)&&(d[u++]=m,d[u++]=p),u}drawCustomCoordinates_(e,n,r,i,l){for(let c=0,d=r.length;c<d;++c){const u=r[c],f=this.appendFlatLineCoordinates(e,n,u,i,!1,!1);l.push(f),n=u}return n}drawCustom(e,n,r,i,l){this.beginGeometry(e,n,l);const c=e.getType(),d=e.getStride(),u=this.coordinates.length;let f,m,p,y,g;switch(c){case"MultiPolygon":f=e.getOrientedFlatCoordinates(),y=[];const N=e.getEndss();g=0;for(let C=0,v=N.length;C<v;++C){const R=[];g=this.drawCustomCoordinates_(f,g,N[C],d,R),y.push(R)}this.instructions.push([an.CUSTOM,u,y,e,r,Xv,l]),this.hitDetectionInstructions.push([an.CUSTOM,u,y,e,i||r,Xv,l]);break;case"Polygon":case"MultiLineString":p=[],f=c=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(f,0,e.getEnds(),d,p),this.instructions.push([an.CUSTOM,u,p,e,r,Lp,l]),this.hitDetectionInstructions.push([an.CUSTOM,u,p,e,i||r,Lp,l]);break;case"LineString":case"Circle":f=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(f,0,f.length,d,!1,!1),this.instructions.push([an.CUSTOM,u,m,e,r,Y0,l]),this.hitDetectionInstructions.push([an.CUSTOM,u,m,e,i||r,Y0,l]);break;case"MultiPoint":f=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(f,d),m>u&&(this.instructions.push([an.CUSTOM,u,m,e,r,Y0,l]),this.hitDetectionInstructions.push([an.CUSTOM,u,m,e,i||r,Y0,l]));break;case"Point":f=e.getFlatCoordinates(),this.coordinates.push(f[0],f[1]),m=this.coordinates.length,this.instructions.push([an.CUSTOM,u,m,e,r,void 0,l]),this.hitDetectionInstructions.push([an.CUSTOM,u,m,e,i||r,void 0,l]);break}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[an.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[an.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const r=e.length;let i,l,c=-1;for(n=0;n<r;++n)i=e[n],l=i[0],l==an.END_GEOMETRY?c=n:l==an.BEGIN_GEOMETRY&&(i[2]=n,sP(this.hitDetectionInstructions,c,n),c=-1)}fillStyleToState(e,n={}){if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=lc(r||ll)}else n.fillStyle=void 0;return n}strokeStyleToState(e,n={}){if(e){const r=e.getColor();n.strokeStyle=lc(r||ig);const i=e.getLineCap();n.lineCap=i!==void 0?i:Df;const l=e.getLineDash();n.lineDash=l?l.slice():Zc;const c=e.getLineDashOffset();n.lineDashOffset=c||ed;const d=e.getLineJoin();n.lineJoin=d!==void 0?d:Rf;const u=e.getWidth();n.lineWidth=u!==void 0?u:lg;const f=e.getMiterLimit();n.miterLimit=f!==void 0?f:rg;const m=e.getOffset();n.strokeOffset=m??nk,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0,n.strokeOffset=void 0;return n}setFillStrokeStyle(e,n){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(n,r)}createFill(e){const n=e.fillStyle,r=[an.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[an.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){const r=e.strokeStyle,i=e.lineCap,l=e.lineDash,c=e.lineDashOffset,d=e.lineJoin,u=e.lineWidth,f=e.miterLimit,m=e.strokeOffset;(e.currentStrokeStyle!=r||e.currentLineCap!=i||l!=e.currentLineDash&&!Du(e.currentLineDash,l)||e.currentLineDashOffset!=c||e.currentLineJoin!=d||e.currentLineWidth!=u||e.currentMiterLimit!=f||e.currentStrokeOffset!=m)&&(n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=l,e.currentLineDashOffset=c,e.currentLineJoin=d,e.currentLineWidth=u,e.currentMiterLimit=f,e.currentStrokeOffset=m)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[an.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=U5(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Eb(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Jk extends Eg{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!Sf(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length,d=this.appendFlatPointCoordinates(i,l);this.instructions.push([an.DRAW_IMAGE,c,d,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([an.DRAW_IMAGE,c,d,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),l=[];for(let u=0,f=i.length;u<f;u+=e.getStride())(!this.maxExtent||Sf(this.maxExtent,i.slice(u,u+2)))&&l.push(i[u],i[u+1]);const c=this.coordinates.length,d=this.appendFlatPointCoordinates(l,2);this.instructions.push([an.DRAW_IMAGE,c,d,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([an.DRAW_IMAGE,c,d,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const r=e.getAnchor(),i=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class Zk extends Eg{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i,l){const c=this.coordinates.length,d=this.appendFlatLineCoordinates(e,n,r,i,!1,!1);return this.instructions.push([an.MOVE_TO_LINE_TO,c,d,l*this.pixelRatio]),this.hitDetectionInstructions.push([an.MOVE_TO_LINE_TO,c,d,l]),r}drawLineString(e,n,r){const i=this.state,l=i.strokeStyle,c=i.lineWidth,d=i.strokeOffset;if(l===void 0||c===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zc,ed],nh);const u=e.getFlatCoordinates(),f=e.getStride();this.drawFlatCoordinates_(u,0,u.length,f,d),this.hitDetectionInstructions.push(fu),this.endGeometry(n)}drawMultiLineString(e,n,r){const i=this.state,l=i.strokeStyle,c=i.lineWidth,d=i.strokeOffset;if(l===void 0||c===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zc,ed],nh);const u=e.getEnds(),f=e.getFlatCoordinates(),m=e.getStride();let p=0;for(let y=0,g=u.length;y<g;++y)p=this.drawFlatCoordinates_(f,p,u[y],m,d);this.hitDetectionInstructions.push(fu),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(fu),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(fu),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(nh)}}class jD extends Eg{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i,l){const c=this.state,d=c.fillStyle!==void 0,u=c.strokeStyle!==void 0,f=r.length;this.instructions.push(nh),this.hitDetectionInstructions.push(nh);for(let m=0;m<f;++m){const p=r[m],y=this.coordinates.length,g=this.appendFlatLineCoordinates(e,n,p,i,!0,!u);this.instructions.push([an.MOVE_TO_LINE_TO,y,g,l*this.pixelRatio,!0]),this.hitDetectionInstructions.push([an.MOVE_TO_LINE_TO,y,g,l,!0]),u&&(this.instructions.push(ED),this.hitDetectionInstructions.push(ED)),n=p}return d&&(this.instructions.push(Fx),this.hitDetectionInstructions.push(Fx)),u&&(this.instructions.push(fu),this.hitDetectionInstructions.push(fu)),n}drawCircle(e,n,r){const i=this.state,l=i.fillStyle,c=i.strokeStyle,d=i.strokeOffset;if(l===void 0&&c===void 0||this.handleStrokeOffset_(()=>this.drawCircle(e,n,r)))return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_FILL_STYLE,ll]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zc,ed]);const u=e.getFlatCoordinates(),f=e.getStride(),m=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,f,!1,!1);const p=[an.CIRCLE,m,d];this.instructions.push(nh,p),this.hitDetectionInstructions.push(nh,p),i.fillStyle!==void 0&&(this.instructions.push(Fx),this.hitDetectionInstructions.push(Fx)),i.strokeStyle!==void 0&&(this.instructions.push(fu),this.hitDetectionInstructions.push(fu)),this.endGeometry(n)}drawPolygon(e,n,r){const i=this.state,l=i.fillStyle,c=i.strokeStyle,d=i.strokeOffset;if(l===void 0&&c===void 0||this.handleStrokeOffset_(()=>this.drawPolygon(e,n,r)))return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_FILL_STYLE,ll]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zc,ed]);const u=e.getEnds(),f=e.getOrientedFlatCoordinates(),m=e.getStride();this.drawFlatCoordinatess_(f,0,u,m,d),this.endGeometry(n)}drawMultiPolygon(e,n,r){const i=this.state,l=i.fillStyle,c=i.strokeStyle,d=i.strokeOffset;if(l===void 0&&c===void 0||this.handleStrokeOffset_(()=>this.drawMultiPolygon(e,n,r)))return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_FILL_STYLE,ll]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zc,ed]);const u=e.getEndss(),f=e.getOrientedFlatCoordinates(),m=e.getStride();let p=0;for(let y=0,g=u.length;y<g;++y)p=this.drawFlatCoordinatess_(f,p,u[y],m,d);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=Hu(n[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}handleStrokeOffset_(e){const n=this.state,r=n.fillStyle,i=n.strokeStyle,l=n.strokeOffset;return Math.abs(l)>0&&r!==void 0&&i!==void 0?(n.strokeStyle=void 0,n.strokeOffset=0,e(),n.fillStyle=void 0,n.strokeStyle=i,n.strokeOffset=l,e(),n.fillStyle=r,!0):!1}}function e8(t,e,n,r,i){const l=[];let c=n,d=0,u=e.slice(n,2);for(;d<t&&c+i<r;){const[f,m]=u.slice(-2),p=e[c+i],y=e[c+i+1],g=Math.sqrt((p-f)*(p-f)+(y-m)*(y-m));if(d+=g,d>=t){const N=(t-d+g)/g,C=Gl(f,p,N),v=Gl(m,y,N);u.push(C,v),l.push(u),u=[C,v],d==t&&(c+=i),d=0}else if(d<t)u.push(e[c+i],e[c+i+1]),c+=i;else{const N=g-d,C=Gl(f,p,N/g),v=Gl(m,y,N/g);u.push(C,v),l.push(u),u=[C,v],d=0,c+=i}}return d>0&&l.push(u),l}function t8(t,e,n,r,i){let l=n,c=n,d=0,u=0,f=n,m,p,y,g,N,C,v,R,A,M;for(p=n;p<r;p+=i){const L=e[p],k=e[p+1];N!==void 0&&(A=L-N,M=k-C,g=Math.sqrt(A*A+M*M),v!==void 0&&(u+=y,m=Math.acos((v*A+R*M)/(y*g)),m>t&&(u>d&&(d=u,l=f,c=p),u=0,f=p-i)),y=g,v=A,R=M),N=L,C=k}return u+=g,u>d?[f,p]:[l,c]}const Up={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class s8 extends Eg{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ll]={fillStyle:ll},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){const i=this.textFillState_,l=this.textStrokeState_,c=this.textState_;if(this.text_===""||!c||!i&&!l)return;const d=this.coordinates;let u=d.length;const f=e.getType();let m=null,p=e.getStride();if(c.placement==="line"&&(f=="LineString"||f=="MultiLineString"||f=="Polygon"||f=="MultiPolygon")){if(!ol(this.maxExtent,e.getExtent()))return;let y;if(m=e.getFlatCoordinates(),f=="LineString")y=[m.length];else if(f=="MultiLineString")y=e.getEnds();else if(f=="Polygon")y=e.getEnds().slice(0,1);else if(f=="MultiPolygon"){const v=e.getEndss();y=[];for(let R=0,A=v.length;R<A;++R)y.push(v[R][0])}this.beginGeometry(e,n,r);const g=c.repeat,N=g?void 0:c.textAlign;let C=0;for(let v=0,R=y.length;v<R;++v){let A;g?A=e8(g*this.resolution,m,C,y[v],p):A=[m.slice(C,y[v])];for(let M=0,L=A.length;M<L;++M){const k=A[M];let V=0,G=k.length;if(N==null){const j=t8(c.maxAngle,k,0,k.length,2);V=j[0],G=j[1]}for(let j=V;j<G;j+=p)d.push(k[j],k[j+1]);const W=d.length;C=y[v],this.drawChars_(u,W),u=W}}this.endGeometry(n)}else{let y=c.overflow?null:[];switch(f){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),p=2;break;case"Polygon":m=e.getFlatInteriorPoint(),c.overflow||y.push(m[2]/this.resolution),p=3;break;case"MultiPolygon":const L=e.getFlatInteriorPoints();m=[];for(let k=0,V=L.length;k<V;k+=3)c.overflow||y.push(L[k+2]/this.resolution),m.push(L[k],L[k+1]);if(m.length===0)return;p=2;break}const g=this.appendFlatPointCoordinates(m,p);if(g===u)return;if(y&&(g-u)/2!==m.length/p){let L=u/2;y=y.filter((k,V)=>{const G=d[(L+V)*2]===m[V*p]&&d[(L+V)*2+1]===m[V*p+1];return G||--L,G})}this.saveTextStates_();const N=c.backgroundFill?this.createFill(this.fillStyleToState(c.backgroundFill)):null,C=c.backgroundStroke?this.createStroke(this.strokeStyleToState(c.backgroundStroke)):null;this.beginGeometry(e,n,r);let v=c.padding;if(v!=sh&&(c.scale[0]<0||c.scale[1]<0)){let L=c.padding[0],k=c.padding[1],V=c.padding[2],G=c.padding[3];c.scale[0]<0&&(k=-k,G=-G),c.scale[1]<0&&(L=-L,V=-V),v=[L,k,V,G]}const R=this.pixelRatio;this.instructions.push([an.DRAW_IMAGE,u,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==sh?sh:v.map(function(L){return L*R}),N,C,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const A=1/R,M=N?N.slice(0):null;M&&(M[1]=ll),this.hitDetectionInstructions.push([an.DRAW_IMAGE,u,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[A,A],NaN,this.declutterMode_,this.declutterImageWithText_,v,M,C,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ll:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:n.font,textAlign:n.textAlign||ag,justify:n.justify,textBaseline:n.textBaseline||Pp,scale:n.scale});const c=this.fillKey_;r&&(c in this.fillStates||(this.fillStates[c]={fillStyle:r.fillStyle}))}drawChars_(e,n){const r=this.textStrokeState_,i=this.textState_,l=this.strokeKey_,c=this.textKey_,d=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,f=Up[i.textBaseline],m=this.textOffsetY_*u,p=this.text_,y=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([an.DRAW_CHARS,e,n,f,i.overflow,d,i.maxAngle,u,m,l,y*u,p,c,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([an.DRAW_CHARS,e,n,f,i.overflow,d&&ll,i.maxAngle,u,m,l,y*u,p,c,1/u,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let r,i,l;if(!e)this.text_="";else{const c=e.getFill();c?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=lc(c.getColor()||ll)):(i=null,this.textFillState_=i);const d=e.getStroke();if(!d)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const C=d.getLineDash(),v=d.getLineDashOffset(),R=d.getWidth(),A=d.getMiterLimit();l.lineCap=d.getLineCap()||Df,l.lineDash=C?C.slice():Zc,l.lineDashOffset=v===void 0?ed:v,l.lineJoin=d.getLineJoin()||Rf,l.lineWidth=R===void 0?lg:R,l.miterLimit=A===void 0?rg:A,l.strokeStyle=lc(d.getColor()||ig)}r=this.textState_;const u=e.getFont()||RE;ak(u);const f=e.getScaleArray();r.overflow=e.getOverflow(),r.font=u,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||Pp,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||sh,r.scale=f===void 0?[1,1]:f;const m=e.getOffsetX(),p=e.getOffsetY(),y=e.getRotateWithView(),g=e.getKeepUpright(),N=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=N===void 0?0:N,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:tr(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+tr(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const n8={Circle:jD,Default:Eg,Image:Jk,LineString:Zk,Polygon:jD,Text:s8};class r8{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const r=this.buildersByZIndex_[n];for(const i in r){const l=r[i].finish();e[n][i]=l}}return e}getBuilder(e,n){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let l=i[n];if(l===void 0){const c=n8[n];l=new c(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=l}return l}}function i8(t,e,n,r){let i=t[e],l=t[e+1],c=0;for(let d=e+r;d<n;d+=r){const u=t[d],f=t[d+1];c+=Math.sqrt((u-i)*(u-i)+(f-l)*(f-l)),i=u,l=f}return c}function a8(t,e,n,r,i,l){i=i??[],l=l??e;const c=t[0],d=t[1],u=t[t.length-4],f=t[t.length-3];let m,p,y,g,N,C,v,R,A=0;for(let M=0;M<t.length;M+=e){y=m,g=p,N=void 0,C=void 0,M+e<t.length&&(N=t[M+e],C=t[M+e+1]),r&&M===0&&(y=u,g=f),r&&M===t.length-2&&(N=c,C=d),m=t[M],p=t[M+1],[v,R]=op(m,p,y,g,N,C,n),i[A++]=v,i[A++]=R;for(let L=2;L<l;L++)i[A++]=t[M+L]}return i.length!=A&&(i.length=A),i}function op(t,e,n,r,i,l,c){let d,u;n!==void 0&&r!==void 0?(d=t-n,u=e-r):i!==void 0&&l!==void 0?(d=i-t,u=l-e):(d=1,u=0);const f=Math.hypot(d,u),m=d/f,p=u/f;if(d=-p,u=m,n===void 0||r===void 0)return[t+d*c,e+u*c];if(i===void 0||l===void 0)return[t+d*c,e+u*c];const y=DP([t,e],[n,r],[i,l]);if(Math.cos(y)>.998)return[t+m*c,e+p*c];const g=Math.cos(y/2),N=Math.sin(y/2),C=N*d+g*u,v=-g*d+N*u,R=C*(1/N),A=v*(1/N);return[t+R*c,e+A*c]}function l8(t,e,n,r,i,l,c,d,u,f,m,p,y=!0){let g=t[e],N=t[e+1],C=0,v=0,R=0,A=0;function M(){C=g,v=N,e+=r,g=t[e],N=t[e+1],A+=R,R=Math.sqrt((g-C)*(g-C)+(N-v)*(N-v))}do M();while(e<n-r&&A+R<l);let L=R===0?0:(l-A)/R;const k=Gl(C,g,L),V=Gl(v,N,L),G=e-r,W=A,j=l+d*u(f,i,m);for(;e<n-r&&A+R<j;)M();L=R===0?0:(j-A)/R;const S=Gl(C,g,L),P=Gl(v,N,L);let F=!1;if(y)if(p){const K=[k,V,S,P];rE(K,0,4,2,p,K,K),F=K[0]>K[2]}else F=k>S;const ee=Math.PI,J=[],$=G+r===e;e=G,R=0,A=W,g=t[e],N=t[e+1];let Y;if($){M(),Y=Math.atan2(N-v,g-C),F&&(Y+=Y>0?-ee:ee);const K=(S+k)/2,w=(P+V)/2;return J[0]=[K,w,(j-l)/2,Y,i],J}i=i.replace(/\n/g," ");for(let K=0,w=i.length;K<w;){M();let se=Math.atan2(N-v,g-C);if(F&&(se+=se>0?-ee:ee),Y!==void 0){let H=se-Y;if(H+=H>ee?-2*ee:H<-ee?2*ee:0,Math.abs(H)>c)return null}Y=se;const oe=K;let T=0;for(;K<w;++K){const H=F?w-K-1:K,q=d*u(f,i[H],m);if(e+r<n&&A+R<l+T+q/2)break;T+=q}if(K===oe)continue;const I=F?i.substring(w-oe,w-K):i.substring(oe,K);L=R===0?0:(l+T/2-A)/R;const U=Gl(C,g,L),Q=Gl(v,N,L);J.push([U,Q,T/2,se,I]),l+=T}return J}const E0=Zl(),Gd=[],Uc=[],Wc=[],Yd=[];function ID(t){return t[3].declutterBox}const OD=new RegExp("[-----]");function SC(t,e){return e==="start"?e=OD.test(t)?"right":"left":e==="end"&&(e=OD.test(t)?"left":"right"),Up[e]}function o8(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}function c8(t,e,n){return n%2===0&&(t+=e),t}class d8{constructor(e,n,r,i,l){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Io(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new BE:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){const l=e+n+r+i;if(this.labels_[l])return this.labels_[l];const c=i?this.strokeStates[i]:null,d=r?this.fillStates[r]:null,u=this.textStates[n],f=this.pixelRatio,m=[u.scale[0]*f,u.scale[1]*f],p=u.justify?Up[u.justify]:SC(Array.isArray(e)?e[0]:e,u.textAlign||ag),y=i&&c.lineWidth?c.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(o8,[]),{width:N,height:C,widths:v,heights:R,lineWidths:A}=ok(u,g),M=N+y,L=[],k=(M+2)*m[0],V=(C+y)*m[1],G={width:k<0?Math.floor(k):Math.ceil(k),height:V<0?Math.floor(V):Math.ceil(V),contextInstructions:L};(m[0]!=1||m[1]!=1)&&L.push("scale",m),i&&(L.push("strokeStyle",c.strokeStyle),L.push("lineWidth",y),L.push("lineCap",c.lineCap),L.push("lineJoin",c.lineJoin),L.push("miterLimit",c.miterLimit),L.push("setLineDash",[c.lineDash]),L.push("lineDashOffset",c.lineDashOffset)),r&&L.push("fillStyle",d.fillStyle),L.push("textBaseline","middle"),L.push("textAlign","center");const W=.5-p;let j=p*M+W*y;const S=[],P=[];let F=0,ee=0,J=0,$=0,Y;for(let K=0,w=g.length;K<w;K+=2){const se=g[K];if(se===`
`){ee+=F,F=0,j=p*M+W*y,++$;continue}const oe=g[K+1]||u.font;oe!==Y&&(i&&S.push("font",oe),r&&P.push("font",oe),Y=oe),F=Math.max(F,R[J]);const T=[se,j+W*v[J]+p*(v[J]-A[$]),.5*(y+F)+ee];j+=v[J],i&&S.push("strokeText",T),r&&P.push("fillText",T),++J}return Array.prototype.push.apply(L,S),Array.prototype.push.apply(L,P),this.labels_[l]=G,G}replayTextBackground_(e,n,r,i,l,c,d){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,l),e.lineTo.apply(e,n),c&&(this.alignAndScaleFill_=c[2],e.fillStyle=c[1],this.fill_(e)),d&&(this.setStrokeStyle_(e,d),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,l,c,d,u,f,m,p,y,g,N,C,v){d*=y[0],u*=y[1];let R=r-d,A=i-u;const M=l+f>e?e-f:l,L=c+m>n?n-m:c,k=N[3]+M*y[0]+N[1],V=N[0]+L*y[1]+N[2],G=R-N[3],W=A-N[0];(C||p!==0)&&(Gd[0]=G,Yd[0]=G,Gd[1]=W,Uc[1]=W,Uc[0]=G+k,Wc[0]=Uc[0],Wc[1]=W+V,Yd[1]=Wc[1]);let j;return p!==0?(j=id(Io(),r,i,1,1,p,-r,-i),ra(j,Gd),ra(j,Uc),ra(j,Wc),ra(j,Yd),bu(Math.min(Gd[0],Uc[0],Wc[0],Yd[0]),Math.min(Gd[1],Uc[1],Wc[1],Yd[1]),Math.max(Gd[0],Uc[0],Wc[0],Yd[0]),Math.max(Gd[1],Uc[1],Wc[1],Yd[1]),E0)):bu(Math.min(G,G+k),Math.min(W,W+V),Math.max(G,G+k),Math.max(W,W+V),E0),g&&(R=Math.round(R),A=Math.round(A)),{drawImageX:R,drawImageY:A,drawImageW:M,drawImageH:L,originX:f,originY:m,declutterBox:{minX:E0[0],minY:E0[1],maxX:E0[2],maxY:E0[3],value:v},canvasTransform:j,scale:y}}replayImageOrLabel_(e,n,r,i,l,c,d){const u=!!(c||d),f=i.declutterBox,m=d?d[2]*i.scale[0]/2:0;return f.minX-m<=n[0]&&f.maxX+m>=0&&f.minY-m<=n[1]&&f.maxY+m>=0&&(u&&this.replayTextBackground_(e,Gd,Uc,Wc,Yd,c,d),ck(e,i.canvasTransform,l,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const r=ra(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],n[1]&&(e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6]))}drawLabelWithPointPlacement_(e,n,r,i){const l=this.textStates[n],c=this.createLabel(e,n,i,r),d=this.strokeStates[r],u=this.pixelRatio,f=SC(Array.isArray(e)?e[0]:e,l.textAlign||ag),m=Up[l.textBaseline||Pp],p=d&&d.lineWidth?d.lineWidth:0,y=c.width/u-2*l.scale[0],g=f*y+2*(.5-f)*p,N=m*c.height/u+2*(.5-m)*p;return{label:c,anchorX:g,anchorY:N}}execute_(e,n,r,i,l,c,d,u){const f=this.zIndexContext_;let m;this.pixelCoordinates_&&Du(r,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=_u(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),nA(this.renderedTransform_,r));let p=0;const y=i.length;let g=0,N,C,v,R,A,M,L,k,V,G,W,j,S,P,F,ee,J=0,$=0;const Y=this.coordinateCache_,K=this.viewRotation_,w=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,se={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:K},oe=this.instructions!=i||this.overlaps?0:200;let T,I,U,Q;for(;p<y;){const H=i[p];switch(H[0]){case an.BEGIN_GEOMETRY:T=H[1],Q=H[3],T.getGeometry()?d!==void 0&&!ol(d,Q.getExtent())?p=H[2]+1:++p:p=H[2],f&&(f.zIndex=H[4]);break;case an.BEGIN_PATH:J>oe&&(this.fill_(e),J=0),$>oe&&(e.stroke(),$=0),!J&&!$&&(e.beginPath(),k=NaN,V=NaN),++p;break;case an.CIRCLE:g=H[1],R=H[2]??0;const ae=m[g],fe=m[g+1],ge=m[g+2]-R,ce=m[g+3]-R,Re=ge-ae,X=ce-fe,me=Math.sqrt(Re*Re+X*X);e.moveTo(ae+me,fe),e.arc(ae,fe,me,0,2*Math.PI,!0),++p;break;case an.CLOSE_PATH:e.closePath(),++p;break;case an.CUSTOM:g=H[1],N=H[2];const he=H[3],Z=H[4],ie=H[5];se.geometry=he,se.feature=T,p in Y||(Y[p]=[]);const te=Y[p];ie?ie(m,g,N,2,te):(te[0]=m[g],te[1]=m[g+1],te.length=2),f&&(f.zIndex=H[6]),Z(te,se),++p;break;case an.DRAW_IMAGE:g=H[1],N=H[2],j=H[3],C=H[4],v=H[5];let je=H[6];const be=H[7],Te=H[8],re=H[9],pe=H[10];let Se=H[11];const st=H[12];let Nt=H[13];L=H[14]||"declutter";const lt=H[15];if(!j&&H.length>=20){S=H[19],P=H[20],F=H[21],ee=H[22];const mt=this.drawLabelWithPointPlacement_(S,P,F,ee);j=mt.label,H[3]=j;const de=H[23];C=(mt.anchorX-de)*this.pixelRatio,H[4]=C;const tt=H[24];v=(mt.anchorY-tt)*this.pixelRatio,H[5]=v,je=j.height,H[6]=je,Nt=j.width,H[13]=Nt}let At;H.length>25&&(At=H[25]);let ot,We,Dt;H.length>17?(ot=H[16],We=H[17],Dt=H[18]):(ot=sh,We=null,Dt=null),pe&&w?Se+=K:!pe&&!w&&(Se-=K);let Et=0;for(;g<N;g+=2){if(At&&At[Et++]<Nt/this.pixelRatio)continue;const mt=this.calculateImageOrLabelDimensions_(j.width,j.height,m[g],m[g+1],Nt,je,C,v,Te,re,Se,st,l,ot,!!We||!!Dt,T),de=[e,n,j,mt,be,We,Dt];if(u){let tt,De,it;if(lt){const Ve=N-g;if(!lt[Ve]){lt[Ve]={args:de,declutterMode:L};continue}const kt=lt[Ve];tt=kt.args,De=kt.declutterMode,delete lt[Ve],it=ID(tt)}let St,Lt;if(tt&&(De!=="declutter"||!u.collides(it))&&(St=!0),(L!=="declutter"||!u.collides(mt.declutterBox))&&(Lt=!0),De==="declutter"&&L==="declutter"){const Ve=St&&Lt;St=Ve,Lt=Ve}St&&(De!=="none"&&u.insert(it),this.replayImageOrLabel_.apply(this,tt)),Lt&&(L!=="none"&&u.insert(mt.declutterBox),this.replayImageOrLabel_.apply(this,de))}else this.replayImageOrLabel_.apply(this,de)}++p;break;case an.DRAW_CHARS:const Rt=H[1],$e=H[2],gt=H[3],Fe=H[4];ee=H[5];const rt=H[6],at=H[7],It=H[8];F=H[9];const ht=H[10];S=H[11],Array.isArray(S)&&(S=S.reduce(c8,"")),P=H[12];const Je=[H[13],H[13]];L=H[14]||"declutter";const ve=H[15],Ge=this.textStates[P],_e=Ge.font,xe=[Ge.scale[0]*at,Ge.scale[1]*at];let Ue;_e in this.widths_?Ue=this.widths_[_e]:(Ue={},this.widths_[_e]=Ue);const Pe=i8(m,Rt,$e,2),Ye=Math.abs(xe[0])*fD(_e,S,Ue);if(Fe||Ye<=Pe){const mt=this.textStates[P].textAlign,de=(Pe-Ye)*SC(S,mt),tt=l8(m,Rt,$e,2,S,de,rt,Math.abs(xe[0]),fD,_e,Ue,w?0:this.viewRotation_,ve);e:if(tt){const De=[];let it,St,Lt,Ve,kt;if(F)for(it=0,St=tt.length;it<St;++it){kt=tt[it],Lt=kt[4],Ve=this.createLabel(Lt,P,"",F),C=kt[2]+(xe[0]<0?-ht:ht),v=gt*Ve.height+(.5-gt)*2*ht*xe[1]/xe[0]-It;const Oe=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,kt[0],kt[1],Ve.width,Ve.height,C,v,0,0,kt[3],Je,!1,sh,!1,T);if(u&&L==="declutter"&&u.collides(Oe.declutterBox))break e;De.push([e,n,Ve,Oe,1,null,null])}if(ee)for(it=0,St=tt.length;it<St;++it){kt=tt[it],Lt=kt[4],Ve=this.createLabel(Lt,P,ee,""),C=kt[2],v=gt*Ve.height-It;const Oe=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,kt[0],kt[1],Ve.width,Ve.height,C,v,0,0,kt[3],Je,!1,sh,!1,T);if(u&&L==="declutter"&&u.collides(Oe.declutterBox))break e;De.push([e,n,Ve,Oe,1,null,null])}u&&L!=="none"&&u.load(De.map(ID));for(let Oe=0,Xt=De.length;Oe<Xt;++Oe)this.replayImageOrLabel_.apply(this,De[Oe])}}++p;break;case an.END_GEOMETRY:if(c!==void 0){T=H[1];const mt=c(T,Q,L);if(mt)return mt}++p;break;case an.FILL:oe?J++:this.fill_(e),++p;break;case an.MOVE_TO_LINE_TO:for(g=H[1],N=H[2],R=H[3],A=H[4]??!1,I=m[g],U=m[g+1],R&&(M=g,[I,U]=op(I,U,A?m[N-4]:void 0,A?m[N-3]:void 0,m[g+2],m[g+3],R)),e.moveTo(I,U),k=I+.5|0,V=U+.5|0,g+=2;g<N;g+=2)I=m[g],U=m[g+1],G=I+.5|0,W=U+.5|0,(g==N-2||G!==k||W!==V)&&(R&&(g==N-2?[I,U]=op(I,U,m[g-2],m[g-1],A?m[M+2]:void 0,A?m[M+3]:void 0,R):[I,U]=op(I,U,m[g-2],m[g-1],m[g+2],m[g+3],R)),e.lineTo(I,U),k=G,V=W);++p;break;case an.SET_FILL_STYLE:this.alignAndScaleFill_=H[2],J&&(this.fill_(e),J=0,$&&(e.stroke(),$=0)),e.fillStyle=H[1],++p;break;case an.SET_STROKE_STYLE:$&&(e.stroke(),$=0),this.setStrokeStyle_(e,H),++p;break;case an.STROKE:oe?$++:e.stroke(),++p;break;default:++p;break}}J&&this.fill_(e),$&&e.stroke()}execute(e,n,r,i,l,c){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,l,void 0,void 0,c)}executeHitDetection(e,n,r,i,l){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,l)}}const Xu=["Polygon","Circle","LineString","Image","Text","Default"],QE=["Image","Text"],u8=Xu.filter(t=>!QE.includes(t));let GE=!1,YE=!1;function h8(){let t=0;const e=r=>{const i=Ii(1,1,null,{willReadFrequently:r});let l=0;const c=performance.now();for(;performance.now()-c<50;++l)i.fillStyle=`rgba(255,0,${l%256},1)`,i.fillRect(0,0,1,1),i.getImageData(0,0,1,1);return t=l>t?l:t,l};GE={[e(!0)]:!0,[e(!1)]:!1,[e(void 0)]:void 0}[t],YE=!0}class f8{constructor(e,n,r,i,l,c,d){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=c,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Io(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,d)}clip(e,n){const r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const l=e[r];for(const c in l){const d=l[c];i[c]=new d8(this.resolution_,this.pixelRatio_,this.overlaps_,d,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const r=this.executorsByZIndex_[n];for(let i=0,l=e.length;i<l;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,l,c){YE===!1&&h8(),i=Math.round(i);const d=i*2+1,u=id(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),f=!this.hitDetectionContext_;f&&(this.hitDetectionContext_=Ii(d,d,null,{willReadFrequently:GE}));const m=this.hitDetectionContext_;m.canvas.width!==d||m.canvas.height!==d?(m.canvas.width=d,m.canvas.height=d):f||m.clearRect(0,0,d,d);let p;this.renderBuffer_!==void 0&&(p=Zl(),Qm(p,e),Eb(p,n*(this.renderBuffer_+i),p));const y=m8(i);let g;function N(k,V,G){const W=m.getImageData(0,0,d,d).data;for(let j=0,S=y.length;j<S;j++)if(W[y[j]]>0){if(!c||G==="none"||g!=="Image"&&g!=="Text"||c.includes(k)){const P=(y[j]-3)/4,F=i-P%d,ee=i-(P/d|0),J=l(k,V,F*F+ee*ee);if(J)return J}m.clearRect(0,0,d,d);break}}const C=Object.keys(this.executorsByZIndex_).map(Number);C.sort(Jc);let v,R,A,M,L;for(v=C.length-1;v>=0;--v){const k=C[v].toString();for(A=this.executorsByZIndex_[k],R=Xu.length-1;R>=0;--R)if(g=Xu[R],M=A[g],M!==void 0&&(L=M.executeHitDetection(m,u,r,N,p),L))return L}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const r=n[0],i=n[1],l=n[2],c=n[3],d=[r,i,r,c,l,c,l,i];return _u(d,0,8,2,e,d),d}isEmpty(){return Nf(this.executorsByZIndex_)}execute(e,n,r,i,l,c,d){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(d?tP:Jc),c=c||Xu;const f=Xu.length;for(let m=0,p=u.length;m<p;++m){const y=u[m].toString(),g=this.executorsByZIndex_[y];for(let N=0,C=c.length;N<C;++N){const v=c[N],R=g[v];if(R!==void 0){const A=d===null?void 0:R.getZIndexContext(),M=A?A.getContext():e,L=this.maxExtent_&&v!=="Image"&&v!=="Text";if(L&&(M.save(),this.clip(M,r)),!A||v==="Text"||v==="Image"?R.execute(M,n,r,i,l,d):A.pushFunction(k=>R.execute(k,n,r,i,l,d)),L&&M.restore(),A){A.offset();const k=u[m]*f+Xu.indexOf(v);this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(A)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(Jc);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[n[r]].length=0}}const vC={};function m8(t){if(vC[t]!==void 0)return vC[t];const e=t*2+1,n=t*t,r=new Array(n+1);for(let l=0;l<=t;++l)for(let c=0;c<=t;++c){const d=l*l+c*c;if(d>n)break;let u=r[d];u||(u=[],r[d]=u),u.push(((t+l)*e+(t+c))*4+3),l>0&&u.push(((t-l)*e+(t+c))*4+3),c>0&&(u.push(((t+l)*e+(t-c))*4+3),l>0&&u.push(((t-l)*e+(t-c))*4+3))}const i=[];for(let l=0,c=r.length;l<c;++l)r[l]&&i.push(...r[l]);return vC[t]=i,i}class g8 extends KE{constructor(e,n,r,i,l,c,d){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?i_(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=c,this.userTransform_=d,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Io()}drawImages_(e,n,r,i){if(!this.image_)return;const l=_u(e,n,r,i,this.transform_,this.pixelCoordinates_),c=this.context_,d=this.tmpLocalTransform_,u=c.globalAlpha;this.imageOpacity_!=1&&(c.globalAlpha=u*this.imageOpacity_);let f=this.imageRotation_;this.transformRotation_===0&&(f-=this.viewRotation_),this.imageRotateWithView_&&(f+=this.viewRotation_);for(let m=0,p=l.length;m<p;m+=2){const y=l[m]-this.imageAnchorX_,g=l[m+1]-this.imageAnchorY_;if(f!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const N=y+this.imageAnchorX_,C=g+this.imageAnchorY_;id(d,N,C,1,1,f,-N,-C),c.save(),c.transform.apply(c,d),c.translate(N,C),c.scale(this.imageScale_[0],this.imageScale_[1]),c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),c.restore()}else c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(c.globalAlpha=u)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=_u(e,n,r,i,this.transform_,this.pixelCoordinates_),c=this.context_;let d=this.textRotation_;for(this.transformRotation_===0&&(d-=this.viewRotation_),this.textRotateWithView_&&(d+=this.viewRotation_);n<r;n+=i){const u=l[n]+this.textOffsetX_,f=l[n+1]+this.textOffsetY_;d!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(c.save(),c.translate(u-this.textOffsetX_,f-this.textOffsetY_),c.rotate(d),c.translate(this.textOffsetX_,this.textOffsetY_),c.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&c.strokeText(this.text_,0,0),this.textFillState_&&c.fillText(this.text_,0,0),c.restore()):(this.textStrokeState_&&c.strokeText(this.text_,u,f),this.textFillState_&&c.fillText(this.text_,u,f))}}moveToLineTo_(e,n,r,i,l,c){const d=this.context_;let u=_u(e,n,r,i,this.transform_,this.pixelCoordinates_);Math.abs(c)>0&&(u=a8(u,i,c,l,u)),d.moveTo(u[0],u[1]);let f=u.length;l&&(f-=2);for(let m=2;m<f;m+=2)d.lineTo(u[m],u[m+1]);return l&&d.closePath(),r}drawRings_(e,n,r,i,l){for(let c=0,d=r.length;c<d;++c)n=this.moveToLineTo_(e,n,r[c],i,!0,l);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ol(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=fA(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],l=Math.sqrt(r*r+i*i),c=this.context_;c.beginPath(),c.arc(n[0],n[1],l,0,2*Math.PI),this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ol(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1,this.strokeState_.strokeOffset),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(ol(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let l=0;const c=e.getEnds(),d=e.getStride();r.beginPath();for(let u=0,f=c.length;u<f;++u)l=this.moveToLineTo_(i,l,c[u],d,!1,this.strokeState_.strokeOffset);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){var n;if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ol(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_;r.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride(),(n=this.strokeState_)==null?void 0:n.strokeOffset),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}}drawMultiPolygon(e){var n;if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ol(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getOrientedFlatCoordinates();let l=0;const c=e.getEndss(),d=e.getStride();r.beginPath();for(let u=0,f=c.length;u<f;++u){const m=c[u];l=this.drawRings_(i,l,m,d,(n=this.strokeState_)==null?void 0:n.strokeOffset)}this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoints();this.drawText_(r,0,r.length,2)}}}setContextFillState_(e){const n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),Du(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:ag;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:lc(r||ll)}}if(!n)this.strokeState_=null;else{const r=n.getColor(),i=n.getLineCap(),l=n.getLineDash(),c=n.getLineDashOffset(),d=n.getLineJoin(),u=n.getWidth(),f=n.getMiterLimit(),m=l||Zc,p=n.getOffset();this.strokeState_={lineCap:i!==void 0?i:Df,lineDash:this.pixelRatio_===1?m:m.map(y=>y*this.pixelRatio_),lineDashOffset:(c||ed)*this.pixelRatio_,lineJoin:d!==void 0?d:Rf,lineWidth:(u!==void 0?u:lg)*this.pixelRatio_,miterLimit:f!==void 0?f:rg,strokeStyle:lc(r||ig),strokeOffset:(p??0)*this.pixelRatio_}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const c=e.getScaleArray();this.imageScale_=[c[0]*this.pixelRatio_/r,c[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const g=n.getColor();this.textFillState_={fillStyle:lc(g||ll)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const g=r.getColor(),N=r.getLineCap(),C=r.getLineDash(),v=r.getLineDashOffset(),R=r.getLineJoin(),A=r.getWidth(),M=r.getMiterLimit();this.textStrokeState_={lineCap:N!==void 0?N:Df,lineDash:C||Zc,lineDashOffset:v||ed,lineJoin:R!==void 0?R:Rf,lineWidth:A!==void 0?A:lg,miterLimit:M!==void 0?M:rg,strokeStyle:lc(g||ig)}}const i=e.getFont(),l=e.getOffsetX(),c=e.getOffsetY(),d=e.getRotateWithView(),u=e.getRotation(),f=e.getScaleArray(),m=e.getText(),p=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:i!==void 0?i:RE,textAlign:p!==void 0?p:ag,textBaseline:y!==void 0?y:Pp},this.text_=m!==void 0?Array.isArray(m)?m.reduce((g,N,C)=>g+=C%2?" ":N,""):m:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=c!==void 0?this.pixelRatio_*c:0,this.textRotateWithView_=d!==void 0?d:!1,this.textRotation_=u!==void 0?u:0,this.textScale_=[this.pixelRatio_*f[0],this.pixelRatio_*f[1]]}}}const ac=.5;function x8(t,e,n,r,i,l,c,d,u){const f=i,m=t[0]*ac,p=t[1]*ac,y=Ii(m,p);y.imageSmoothingEnabled=!1;const g=y.canvas,N=new g8(y,ac,i,null,c,d,null),C=n.length,v=Math.floor((256*256*256-1)/C),R={};for(let M=1;M<=C;++M){const L=n[M-1],k=L.getStyleFunction()||r;if(!k)continue;let V=k(L,l);if(!V)continue;Array.isArray(V)||(V=[V]);const W=(M*v).toString(16).padStart(7,"#00000");for(let j=0,S=V.length;j<S;++j){const P=V[j],F=P.getGeometryFunction()(L);if(!F||!ol(f,F.getExtent()))continue;const ee=P.clone(),J=ee.getFill();J&&J.setColor(W);const $=ee.getStroke();$&&($.setColor(W),$.setLineDash(null)),ee.setText(void 0);const Y=P.getImage();if(Y){const oe=Y.getImageSize();if(!oe)continue;const T=Ii(oe[0],oe[1],void 0,{alpha:!1}),I=T.canvas;T.fillStyle=W,T.fillRect(0,0,I.width,I.height),ee.setImage(new mh({img:I,anchor:Y.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Y.getOrigin(),opacity:1,size:Y.getSize(),scale:Y.getScale(),rotation:Y.getRotation(),rotateWithView:Y.getRotateWithView()}))}const K=ee.getZIndex()||0;let w=R[K];w||(w={},R[K]=w,w.Polygon=[],w.Circle=[],w.LineString=[],w.Point=[]);const se=F.getType();if(se==="GeometryCollection"){const oe=F.getGeometriesArrayRecursive();for(let T=0,I=oe.length;T<I;++T){const U=oe[T];w[U.getType().replace("Multi","")].push(U,ee)}}else w[se.replace("Multi","")].push(F,ee)}}const A=Object.keys(R).map(Number).sort(Jc);for(let M=0,L=A.length;M<L;++M){const k=R[A[M]];for(const V in k){const G=k[V];for(let W=0,j=G.length;W<j;W+=2){N.setStyle(G[W+1]);for(let S=0,P=e.length;S<P;++S)N.setTransform(e[S]),N.drawGeometry(G[W])}}}return y.getImageData(0,0,g.width,g.height)}function p8(t,e,n){const r=[];if(n){const i=Math.floor(Math.round(t[0])*ac),l=Math.floor(Math.round(t[1])*ac),c=(zr(i,0,n.width-1)+zr(l,0,n.height-1)*n.width)*4,d=n.data[c],u=n.data[c+1],m=n.data[c+2]+256*(u+256*d),p=Math.floor((256*256*256-1)/e.length);m&&m%p===0&&r.push(e[m/p-1])}return r}const _8=.5,VE={Point:R8,LineString:S8,Polygon:E8,MultiPoint:T8,MultiLineString:v8,MultiPolygon:D8,GeometryCollection:N8,Circle:y8};function C8(t,e){return parseInt(tr(t),10)-parseInt(tr(e),10)}function MD(t,e){const n=$E(t,e);return n*n}function $E(t,e){return _8*t/e}function y8(t,e,n,r,i){const l=n.getFill(),c=n.getStroke();if(l||c){const u=t.getBuilder(n.getZIndex(),"Circle");u.setFillStrokeStyle(l,c),u.drawCircle(e,r,i)}const d=n.getText();if(d&&d.getText()){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(d),u.drawText(e,r)}}function LD(t,e,n,r,i,l,c,d){const u=[],f=n.getImage();if(f){let y=!0;const g=f.getImageState();g==Sn.LOADED||g==Sn.ERROR?y=!1:g==Sn.IDLE&&f.load(),y&&u.push(f.ready())}const m=n.getFill();m&&m.loading()&&u.push(m.ready());const p=u.length>0;return p&&Promise.all(u).then(()=>i(null)),b8(t,e,n,r,l,c,d),p}function b8(t,e,n,r,i,l,c){const d=n.getGeometryFunction()(e);if(!d)return;const u=d.simplifyTransformed(r,i);if(n.getRenderer())HE(t,u,n,e,c);else{const m=VE[u.getType()];m(t,u,n,e,c,l)}}function HE(t,e,n,r,i){if(e.getType()=="GeometryCollection"){const c=e.getGeometries();for(let d=0,u=c.length;d<u;++d)HE(t,c[d],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function N8(t,e,n,r,i,l){const c=e.getGeometriesArray();let d,u;for(d=0,u=c.length;d<u;++d){const f=VE[c[d].getType()];f(t,c[d],n,r,i,l)}}function S8(t,e,n,r,i){const l=n.getStroke();if(l){const d=t.getBuilder(n.getZIndex(),"LineString");d.setFillStrokeStyle(null,l),d.drawLineString(e,r,i)}const c=n.getText();if(c&&c.getText()){const d=t.getBuilder(n.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,r,i)}}function v8(t,e,n,r,i){const l=n.getStroke();if(l){const d=t.getBuilder(n.getZIndex(),"LineString");d.setFillStrokeStyle(null,l),d.drawMultiLineString(e,r,i)}const c=n.getText();if(c&&c.getText()){const d=t.getBuilder(n.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,r,i)}}function D8(t,e,n,r,i){const l=n.getFill(),c=n.getStroke();if(c||l){const u=t.getBuilder(n.getZIndex(),"Polygon");u.setFillStrokeStyle(l,c),u.drawMultiPolygon(e,r,i)}const d=n.getText();if(d&&d.getText()){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(d),u.drawText(e,r,i)}}function R8(t,e,n,r,i,l){const c=n.getImage(),d=n.getText(),u=d&&d.getText(),f=l&&c&&u?{}:void 0;if(c){if(c.getImageState()!=Sn.LOADED)return;const m=t.getBuilder(n.getZIndex(),"Image");m.setImageStyle(c,f),m.drawPoint(e,r,i)}if(u){const m=t.getBuilder(n.getZIndex(),"Text");m.setTextStyle(d,f),m.drawText(e,r,i)}}function T8(t,e,n,r,i,l){const c=n.getImage(),d=c&&c.getOpacity()!==0,u=n.getText(),f=u&&u.getText(),m=l&&d&&f?{}:void 0;if(d){if(c.getImageState()!=Sn.LOADED)return;const p=t.getBuilder(n.getZIndex(),"Image");p.setImageStyle(c,m),p.drawMultiPoint(e,r,i)}if(f){const p=t.getBuilder(n.getZIndex(),"Text");p.setTextStyle(u,m),p.drawText(e,r,i)}}function E8(t,e,n,r,i){const l=n.getFill(),c=n.getStroke();if(l||c){const u=t.getBuilder(n.getZIndex(),"Polygon");u.setFillStrokeStyle(l,c),u.drawPolygon(e,r,i)}const d=n.getText();if(d&&d.getText()){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(d),u.drawText(e,r,i)}}class j8 extends FE{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipExtent_=null,this.extendX_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Zl(),this.wrappedRenderedExtent_=Zl(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){const i=n.extent,l=n.viewState,c=l.center,d=l.resolution,u=l.projection,f=l.rotation,m=u.getExtent(),p=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),g=n.pixelRatio,N=n.viewHints,C=!(N[Ra.ANIMATING]||N[Ra.INTERACTING]),v=this.context,R=Math.round(pr(i)/d*g),A=Math.round(Ua(i)/d*g),M=p.getWrapX()&&u.canWrapX(),L=M?pr(m):null,k=M?Math.ceil((i[2]-m[2])/L)+(this.extendX_?2:1):1;let V=M?Math.floor((i[0]-m[0])/L)-(this.extendX_?1:0):0;do{let G=this.getRenderTransform(c,d,0,g,R,A,V*L);n.declutter&&(G=G.slice(0)),e.execute(v,[v.canvas.width,v.canvas.height],G,f,C,r===void 0?Xu:r?QE:u8,r?y&&n.declutter[y]:void 0)}while(++V<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ii(this.context.canvas.width,this.context.canvas.height,RD))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,f_(this.context),RD.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.clipExtent_&&this.clipUnrotated(this.context,e,this.clipExtent_),this.replayGroup_.renderDeferred(),this.clipExtent_&&(this.context.restore(),this.clipExtent_=null),this.resetDrawContext_())}renderFrame(e,n){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,n);const l=this.context,c=this.replayGroup_;let d=c&&!c.isEmpty();if(!d&&!(this.getLayer().hasListener(Hl.PRERENDER)||this.getLayer().hasListener(Hl.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(l,e),i.projection,this.clipExtent_=null;let u=!1;if(d&&r.extent&&this.clipping){const f=uu(r.extent);d=ol(f,e.extent),d&&!Mm(f,e.extent)&&(e.declutter?this.clipExtent_=f:(this.clipUnrotated(l,e,f),u=!0))}return d&&this.renderWorlds(c,e,this.getLayer().getDeclutter()?!1:void 0),u&&l.restore(),this.postRender(l,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,l=this.renderedResolution_,c=this.renderedRotation_,d=this.renderedProjection_,u=this.wrappedRenderedExtent_,f=this.getLayer(),m=[],p=r[0]*ac,y=r[1]*ac;m.push(this.getRenderTransform(i,l,c,ac,p,y,0).slice());const g=f.getSource(),N=d.getExtent();if(g.getWrapX()&&d.canWrapX()&&!Mm(N,u)){let C=u[0];const v=pr(N);let R=0,A;for(;C<N[0];)--R,A=v*R,m.push(this.getRenderTransform(i,l,c,ac,p,y,A).slice()),C+=v;for(R=0,C=u[2];C>N[2];)++R,A=v*R,m.push(this.getRenderTransform(i,l,c,ac,p,y,A).slice()),C-=v}this.hitDetectionImageData_=x8(r,m,this.renderedFeatures_,f.getStyleFunction(),u,l,c,MD(l,this.renderedPixelRatio_))}n(p8(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,l){var y,g;if(!this.replayGroup_)return;const c=n.viewState.resolution,d=n.viewState.rotation,u=this.getLayer(),f={},m=function(N,C,v){const R=tr(N),A=f[R];if(A){if(A!==!0&&v<A.distanceSq){if(v===0)return f[R]=!0,l.splice(l.lastIndexOf(A),1),i(N,u,C);A.geometry=C,A.distanceSq=v}}else{if(v===0)return f[R]=!0,i(N,u,C);l.push(f[R]={feature:N,layer:u,geometry:C,distanceSq:v,callback:i})}},p=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,c,d,r,m,p?(g=(y=n.declutter)==null?void 0:y[p])==null?void 0:g.all().map(N=>N.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),r=n.getSource();if(!r)return!1;const i=e.viewHints[Ra.ANIMATING],l=e.viewHints[Ra.INTERACTING],c=n.getUpdateWhileAnimating(),d=n.getUpdateWhileInteracting();if(this.ready&&!c&&i||!d&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=e.extent,f=e.viewState,m=f.projection,p=f.resolution,y=e.pixelRatio,g=n.getRevision(),N=n.getRenderBuffer();let C=n.getRenderOrder();C===void 0&&(C=C8);const v=f.center.slice(),R=Eb(u,N*p),A=R.slice(),M=[R.slice()],L=m.getExtent(),k=r.getWrapX()&&m.canWrapX();if(this.extendX_=!1,k){const $=r.getExtent();$&&!Sg($)&&(this.extendX_=$[0]<L[0]||$[2]>L[2])}if(k&&(!Mm(L,e.extent)||this.extendX_)){const $=pr(L),Y=Math.max(pr(R)/2,$);let K=L[0],w=L[2];this.extendX_&&(K-=$,w+=$),R[0]=K-Y,R[2]=w+Y,$5(v,m);const se=Y5(M[0],m);se[0]<L[0]&&se[2]<L[2]?M.push([se[0]+$,se[1],se[2]+$,se[3]]):se[0]>L[0]&&se[2]>L[2]&&M.push([se[0]-$,se[1],se[2]-$,se[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedPixelRatio_===y&&this.renderedRevision_==g&&this.renderedRenderOrder_==C&&this.renderedFrameDeclutter_===!!e.declutter&&Mm(this.wrappedRenderedExtent_,R))return Du(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new r8($E(p,y),R,p,y);let G;for(let $=0,Y=M.length;$<Y;++$)r.loadFeatures(M[$],p,m);const W=MD(p,y);let j=!0;const S=($,Y)=>{let K;const w=$.getStyleFunction()||n.getStyleFunction();if(w&&(K=w($,p)),K){const se=this.renderFeature($,W,K,V,G,this.getLayer().getDeclutter(),Y);j=j&&!se}},P=sE(R),F=r.getFeaturesInExtent(P);C&&F.sort(C);for(let $=0,Y=F.length;$<Y;++$)S(F[$],$);this.renderedFeatures_=F,this.ready=j;const ee=V.finish(),J=new f8(R,p,y,r.getOverlaps(),ee,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=p,this.renderedRevision_=g,this.renderedRenderOrder_=C,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=A,this.wrappedRenderedExtent_=R,this.renderedCenter_=v,this.renderedProjection_=m,this.renderedPixelRatio_=y,this.replayGroup_=J,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,l,c,d){if(!r)return!1;let u=!1;if(Array.isArray(r))for(let f=0,m=r.length;f<m;++f)u=LD(i,e,r[f],n,this.boundHandleStyleImageChange_,l,c,d)||u;else u=LD(i,e,r,n,this.boundHandleStyleImageChange_,l,c,d);return u}}class I8 extends wE{constructor(e){super(e)}createRenderer(){return new j8(this)}}let O8=!1;function M8(t,e,n,r,i,l,c){const d=new XMLHttpRequest;d.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(d.responseType="arraybuffer"),d.withCredentials=O8,d.onload=function(u){if(!d.status||d.status>=200&&d.status<300){const f=e.getType();try{let m;f=="text"||f=="json"?m=d.responseText:f=="xml"?m=d.responseXML||d.responseText:f=="arraybuffer"&&(m=d.response),m?l(e.readFeatures(m,{extent:n,featureProjection:i}),e.readProjection(m)):c()}catch{c()}}else c()},d.onerror=c,d.send()}function wD(t,e){return function(n,r,i,l,c){M8(t,e,n,r,i,(d,u)=>{this.addFeatures(d),l!==void 0&&l(d)},()=>{this.changed(),c!==void 0&&c()})}}function L8(t,e){return[[-1/0,-1/0,1/0,1/0]]}class Vm extends gc{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Vm(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Hr(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=er(e,Rn.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?w8(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function w8(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(dr(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}function P8(t,e,n,r){const i=[];let l=Zl();for(let c=0,d=n.length;c<d;++c){const u=n[c];l=jb(t,e,u[0],r),i.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=u[u.length-1]}return i}function PD(t,e,n,r,i,l,c){let d,u;const f=(n-e)/r;if(f===1)d=e;else if(f===2)d=e,u=i;else if(f!==0){let m=t[e],p=t[e+1],y=0;const g=[0];for(let v=e+r;v<n;v+=r){const R=t[v],A=t[v+1];y+=Math.sqrt((R-m)*(R-m)+(A-p)*(A-p)),g.push(y),m=R,p=A}const N=i*y,C=eP(g,N);C<0?(u=(N-g[-C-2])/(g[-C-1]-g[-C-2]),d=e+(-C-2)*r):d=e+C*r}c=c>1?c:2,l=l||new Array(c);for(let m=0;m<c;++m)l[m]=d===void 0?NaN:u===void 0?t[d+m]:Gl(t[d+m],t[d+r+m],u);return l}const AD=Io();class To{constructor(e,n,r,i,l,c){this.styleFunction,this.extent_,this.id_=c,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=l,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?F5(this.flatCoordinates_):jb(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=bh(this.getExtent());this.flatInteriorPoints_=Fb(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=TA(this.flatCoordinates_,this.ends_),n=P8(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=NA(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=PD(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let i=0,l=r.length;i<l;++i){const c=r[i],d=PD(e,n,c,2,.5);Tb(this.flatMidpoints_,d),n=c}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=hl(e);const n=e.getExtent(),r=e.getWorldExtent();if(n&&r){const i=Ua(r)/Ua(n);id(AD,r[0],r[3],i,-i,0,0,0),_u(this.flatCoordinates_,0,this.flatCoordinates_.length,2,AD,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new To(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=w5((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Bb(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=CA(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=cE(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new To(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}To.prototype.getFlatCoordinates=To.prototype.getOrientedFlatCoordinates;class kD{constructor(e){this.rbush_=new yE(e),this.items_={}}insert(e,n){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[tr(n)]=r}load(e,n){const r=new Array(n.length);for(let i=0,l=n.length;i<l;i++){const c=e[i],d=n[i],u={minX:c[0],minY:c[1],maxX:c[2],maxY:c[3],value:d};r[i]=u,this.items_[tr(d)]=u}this.rbush_.load(r)}remove(e){const n=tr(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){const r=this.items_[tr(n)],i=[r.minX,r.minY,r.maxX,r.maxY];eg(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,l=e.length;i<l;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return Nf(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return bu(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class zE extends gc{constructor(e){super(),this.projection=hl(e.projection),this.attributions_=UD(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=UD(e),this.changed()}setState(e){this.state_=e,this.changed()}}function UD(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const Bl={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Vd extends cd{constructor(e,n,r){super(e),this.feature=n,this.features=r}}class A8 extends zE{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Zm,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(dr(this.format_,"`format` must be set when `url` is set"),this.loader_=wD(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:L8;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new kD:null,this.loadedExtentsRtree_=new kD,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new Vl(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=tr(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new Vd(Bl.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof To||(this.featureChangeKeys_[e]=[er(n,Rn.CHANGE,this.handleFeatureChange_,this),er(n,bf.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){const i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof To){const l=this.idIndex_[i];l instanceof To?Array.isArray(l)?l.push(n):this.idIndex_[i]=[l,n]:r=!1}else r=!1}return r&&(dr(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],r=[],i=[];for(let l=0,c=e.length;l<c;l++){const d=e[l],u=tr(d);this.addToIndex_(u,d)&&r.push(d)}for(let l=0,c=r.length;l<c;l++){const d=r[l],u=tr(d);this.setupChangeEvents_(u,d);const f=d.getGeometry();if(f){const m=f.getExtent();n.push(m),i.push(d)}else this.nullGeometryFeatures_[u]=d}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(Bl.ADDFEATURE))for(let l=0,c=r.length;l<c;l++)this.dispatchEvent(new Vd(Bl.ADDFEATURE,r[l]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(Bl.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(Bl.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(il.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(il.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Hr);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Vd(Bl.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const l=i.getGeometry();if(l instanceof To||l.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof To||i.intersectsExtent(e)){const l=n(r);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Nf(this.nullGeometryFeatures_)||Tb(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=V5(e,n);return[].concat(...i.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const r=e[0],i=e[1];let l=null;const c=[NaN,NaN];let d=1/0;const u=[-1/0,-1/0,1/0,1/0];return n=n||Jm,this.featuresRtree_.forEachInExtent(u,function(f){if(n(f)){const m=f.getGeometry(),p=d;if(d=m instanceof To?0:m.closestPointXY(r,i,c,d),d<p){l=f;const y=Math.sqrt(d);u[0]=r-y,u[1]=i-y,u[2]=r+y,u[3]=i+y}}}),l}getExtent(e){var n;return((n=this.featuresRtree_)==null?void 0:n.getExtent(e))??null}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,r=tr(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{const c=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(c,n)):this.featuresRtree_&&this.featuresRtree_.update(c,n)}const l=n.getId();if(l!==void 0){const c=l.toString();this.idIndex_[c]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[c]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new Vd(Bl.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:tr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Nf(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){const i=this.loadedExtentsRtree_,l=this.strategy_(e,n,r);for(let c=0,d=l.length;c<d;++c){const u=l[c];i.forEachInExtent(u,function(m){return Mm(m.extent,u)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Vd(Bl.FEATURESLOADSTART)),this.loader_.call(this,u,n,r,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vd(Bl.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vd(Bl.FEATURESLOADERROR))}),i.insert(u,{extent:u.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,r=n.forEachInExtent(e,function(i){if(eg(i.extent,e))return i});r&&n.remove(r)}removeFeatures(e){let n=!1;for(let r=0,i=e.length;r<i;++r)n=this.removeFeatureInternal(e[r])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=tr(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[n];r==null||r.forEach(Hr),delete this.featureChangeKeys_[n];const i=e.getId();if(i!==void 0){const l=i.toString(),c=this.idIndex_[l];c===e?delete this.idIndex_[l]:Array.isArray(c)&&(c.splice(c.indexOf(e),1),c.length===1&&(this.idIndex_[l]=c[0]))}return delete this.uidIndex_[n],this.hasListener(Bl.REMOVEFEATURE)&&this.dispatchEvent(new Vd(Bl.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){dr(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(wD(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const j0=[0,0,0],$d=5;class qE{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,dr(nP(this.resolutions_,(i,l)=>l-i),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,l=this.resolutions_.length-1;i<l;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,dr(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=wh(r)),dr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,dr(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Vb,dr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,l)=>{const c=new iN(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const d=this.getTileRangeForExtentAndZ(r,l);c.minX=Math.max(d.minX,c.minX),c.maxX=Math.min(d.maxX,c.maxX),c.minY=Math.max(d.minY,c.minY),c.maxY=Math.min(d.maxY,c.maxY)}return c}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const i=this.getTileRangeForExtentAndZ(e,n);for(let l=i.minX,c=i.maxX;l<=c;++l)for(let d=i.minY,u=i.maxY;d<=u;++d)r([n,l,d])}forEachTileCoordParentTileRange(e,n,r,i){let l,c,d,u=null,f=e[0]-1;for(this.zoomFactor_===2?(c=e[1],d=e[2]):u=this.getTileCoordExtent(e,i);f>=this.minZoom;){if(c!==void 0&&d!==void 0?(c=Math.floor(c/2),d=Math.floor(d/2),l=T0(c,c,d,d,r)):l=this.getTileRangeForExtentAndZ(u,f,r),n(f,l))return!0;--f}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getOrigins(){return this.origins_}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,c=e[2]*2;return T0(l,l+1,c,c+1,n)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const i=e[0],l=e[1],c=e[2];if(n===i)return T0(l,c,l,c,r);if(this.zoomFactor_){const u=Math.pow(this.zoomFactor_,n-i),f=Math.floor(l*u),m=Math.floor(c*u);if(n<i)return T0(f,f,m,m,r);const p=Math.floor(u*(l+1))-1,y=Math.floor(u*(c+1))-1;return T0(f,p,m,y,r)}const d=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,j0);const i=j0[1],l=j0[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,j0);const c=j0[1],d=j0[2];return T0(i,c,l,d,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=cl(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),l=cl(this.getTileSize(e[0]),this.tmpSize_),c=r[0]+e[1]*l[0]*i,d=r[1]-(e[2]+1)*l[1]*i,u=c+l[0]*i,f=d+l[1]*i;return bu(c,d,u,f,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,l){const c=this.getZForResolution(r),d=r/this.getResolution(c),u=this.getOrigin(c),f=cl(this.getTileSize(c),this.tmpSize_);let m=d*(e-u[0])/r/f[0],p=d*(u[1]-n)/r/f[1];return i?(m=Mx(m,$d)-1,p=Mx(p,$d)-1):(m=Ox(m,$d),p=Ox(p,$d)),kp(c,m,p,l)}getTileCoordForXYAndZ_(e,n,r,i,l){const c=this.getOrigin(r),d=this.getResolution(r),u=cl(this.getTileSize(r),this.tmpSize_);let f=(e-c[0])/d/u[0],m=(c[1]-n)/d/u[1];return i?(f=Mx(f,$d)-1,m=Mx(m,$d)-1):(f=Ox(f,$d),m=Ox(m,$d)),kp(r,f,m,l)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=Rb(this.resolutions_,e,n||0);return zr(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return hE(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function XE(t){let e=t.getDefaultTileGrid();return e||(e=B8(t),t.setDefaultTileGrid(e)),e}function k8(t,e,n){const r=e[0],i=t.getTileCoordCenter(e),l=aN(n);if(!Sf(l,i)){const c=pr(l),d=Math.ceil((l[0]-i[0])/c);return i[0]+=c*d,t.getTileCoordForCoordAndZ(i,r)}return e}function U8(t,e,n,r){r=r!==void 0?r:"top-left";const i=JE(t,e,n);return new qE({extent:t,origin:CP(t,r),resolutions:i,tileSize:n})}function W8(t){const e=t||{},n=e.extent||hl("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:JE(n,e.maxZoom,e.tileSize,e.maxResolution)};return new qE(r)}function JE(t,e,n,r){e=e!==void 0?e:MA,n=cl(n!==void 0?n:Vb);const i=Ua(t),l=pr(t);r=r>0?r:Math.max(l/n[0],i/n[1]);const c=e+1,d=new Array(c);for(let u=0;u<c;++u)d[u]=r/Math.pow(2,u);return d}function B8(t,e,n,r){const i=aN(t);return U8(i,e,n,r)}function aN(t){t=hl(t);let e=t.getExtent();if(!e){const n=180*Ob.degrees/t.getMetersPerUnit();e=bu(-n,-n,n,n)}return e}const F8=/\{z\}/g,K8=/\{x\}/g,Q8=/\{y\}/g,G8=/\{-y\}/g;function Y8(t,e,n,r,i){return t.replace(F8,e.toString()).replace(K8,n.toString()).replace(Q8,r.toString()).replace(G8,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function V8(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let l;for(l=r;l<=i;++l)e.push(t.replace(n[0],String.fromCharCode(l)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}function $8(t,e){return(function(n,r,i){if(!n)return;let l;const c=n[0];if(e){const d=e.getFullTileRange(c);d&&(l=d.getHeight()-1)}return Y8(t,c,n[1],n[2],l)})}function H8(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=$8(t[i],e);return z8(r)}function z8(t){return t.length===1?t[0]:(function(e,n,r){if(!e)return;const i=Kk(e),l=X0(i,t.length);return t[l](e,n,r)})}class q8 extends zE{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&cl(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||tr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,l,c){return Zn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:XE(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),l=this.getTilePixelRatio(n),c=cl(i.getTileSize(e),this.tmpSize);return l==1?c:T6(c,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const r=n!==void 0?n:this.getProjection(),i=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=k8(i,e,r)),Gk(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class X8 extends cd{constructor(e,n){super(e),this.tile=n}}const DC={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class lN extends q8{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===lN.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=tr(n),i=n.getState();let l;i==ln.LOADING?(this.tileLoadingKeys_[r]=!0,l=DC.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],l=i==ln.ERROR?DC.TILELOADERROR:i==ln.LOADED?DC.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new X8(l,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=V8(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(H8(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}}class J8 extends lN{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Z8,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.referrerPolicy=e.referrerPolicy,this.tileClass=e.tileClass!==void 0?e.tileClass:UE,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!ap(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||ap(n,e)))return this.tileGrid;const r=tr(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=XE(e)),this.tileGridForProjection[r]}createTile_(e,n,r,i,l,c){const d=[e,n,r],u=this.getTileCoordForTileUrlFunction(d,l),f=u?this.tileUrlFunction(u,i,l):void 0,m=new this.tileClass(d,f!==void 0?ln.IDLE:ln.EMPTY,f!==void 0?f:"",{crossOrigin:this.crossOrigin,referrerPolicy:this.referrerPolicy},this.tileLoadFunction,this.tileOptions);return m.key=c,m.addEventListener(Rn.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,n,r,i,l,c){const d=this.getProjection();if(!d||!l||ap(d,l))return this.getTileInternal(e,n,r,i,d||l);const u=[e,n,r],f=this.getKey(),m=this.getTileGridForProjection(d),p=this.getTileGridForProjection(l),y=this.getTileCoordForTileUrlFunction(u,l),g=new WE(d,m,l,p,u,y,this.getTilePixelRatio(i),this.getGutter(),(N,C,v,R)=>this.getTileInternal(N,C,v,R,d,c),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=f,g}getTileInternal(e,n,r,i,l,c){const d=this.getKey(),u=lp(this,d,e,n,r);if(c&&c.containsKey(u))return c.get(u);const f=this.createTile_(e,n,r,i,l,d);return c==null||c.set(u,f),f}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const r=hl(e);if(r){const i=tr(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}}function Z8(t,e){if($l){const n=t.getCrossOrigin();let r="same-origin",i="same-origin";n==="anonymous"||n===""?(r="cors",i="omit"):n==="use-credentials"&&(r="cors",i="include");const l={mode:r,credentials:i,referrerPolicy:t.getReferrerPolicy()};fetch(e,l).then(c=>{if(!c.ok)throw new Error(`HTTP ${c.status}`);return c.blob()}).then(c=>createImageBitmap(c)).then(c=>{var f;const d=t.getImage();d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),(f=c.close)==null||f.call(c),d.dispatchEvent(new Event("load"))}).catch(()=>{t.getImage().dispatchEvent(new Event("error"))});return}t.getImage().src=e}class e7 extends J8{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:W8({extent:aN(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,referrerPolicy:e.referrerPolicy,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const I0={:"#DC2626",:"#16A34A",:"#9CA3AF",default:"#EF4444"},t7="A4EED0C3-BED4-315A-AF7B-B47F94357975";function s7(t,e){const n=e+1,r=n>=100?9:n>=10?11:13,i=`<svg xmlns="http://www.w3.org/2000/svg" width="36" height="48" viewBox="0 0 36 48">
    <path fill="${t}" stroke="#fff" stroke-width="2" d="M18 2C9.163 2 2 9.163 2 18c0 12 16 28 16 28s16-16 16-28c0-8.837-7.163-16-16-16z"/>
    <circle fill="#fff" cx="18" cy="18" r="10"/>
    <text x="18" y="22" text-anchor="middle" font-size="${r}" font-weight="bold" fill="${t}" font-family="Arial,sans-serif">${n}</text>
  </svg>`;return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i)}function RC(){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">
    <circle cx="20" cy="20" r="18" fill="#3B82F6" fill-opacity="0.15" stroke="#3B82F6" stroke-width="1.5" stroke-opacity="0.4"/>
    <circle cx="20" cy="20" r="9" fill="#3B82F6" stroke="#fff" stroke-width="3"/>
  </svg>`)}function n7(){return new Promise(t=>{var r,i,l;if((i=(r=window.kakao)==null?void 0:r.maps)!=null&&i.services){t(!0);return}if((l=window.kakao)!=null&&l.maps){window.kakao.maps.load(()=>t(!!window.kakao.maps.services));return}let e=0;const n=setInterval(()=>{var c;if(e++,(c=window.kakao)!=null&&c.maps){if(clearInterval(n),window.kakao.maps.services){t(!0);return}window.kakao.maps.load(()=>t(!!window.kakao.maps.services))}else if(e>25){clearInterval(n);const d=document.createElement("script");d.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=60a7bd1a64feb3d63955a9165bb4bc79&libraries=services&autoload=false",d.onload=()=>{var u;(u=window.kakao)!=null&&u.maps?window.kakao.maps.load(()=>t(!!window.kakao.maps.services)):t(!1)},d.onerror=()=>t(!1),document.head.appendChild(d)}},200)})}function r7(t){return new Promise(e=>{var r,i;if(!((i=(r=window.kakao)==null?void 0:r.maps)!=null&&i.services)){e(null);return}const n=new window.kakao.maps.services.Geocoder;n.addressSearch(t,(l,c)=>{if(c===window.kakao.maps.services.Status.OK&&l[0])e({lat:parseFloat(l[0].y),lng:parseFloat(l[0].x)});else{const d=t.replace(/\(.*?\)/g,"").replace(/\d+[]/g,"").replace(/\s{2,}/g," ").trim();d!==t?n.addressSearch(d,(u,f)=>{f===window.kakao.maps.services.Status.OK&&u[0]?e({lat:parseFloat(u[0].y),lng:parseFloat(u[0].x)}):e(null)}):e(null)}})})}const ZE=({workOrders:t,onBack:e,onSelectWork:n})=>{var w,se;const r=_.useRef(null),i=_.useRef(null),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),u=_.useRef(null),f=_.useRef([]),m=_.useRef(null),p=_.useRef([]),y=_.useRef(null),[g,N]=_.useState("vworld"),[C,v]=_.useState(!0),[R,A]=_.useState(null),M=_.useRef(!0),L=_.useRef(!0),[k,V]=_.useState(0),[G,W]=_.useState(0),[j,S]=_.useState(null),[P,F]=_.useState(null);_.useEffect(()=>{var fe;let oe=!1;const T=new A8;c.current=T;const I=new e7({url:`https://api.vworld.kr/req/wmts/1.0.0/${t7}/Base/{z}/{y}/{x}.png`,maxZoom:19,attributions:" VWorld"});let U=0;I.on("tileloaderror",()=>{U++,U>=3&&M.current&&(M.current=!1,console.warn("[Map] VWorld   ,   "),L.current?N("kakao"):A("    .   ."))});const Q=new Ik({target:r.current,layers:[new Xk({source:I}),new I8({source:T})],view:new ic({center:kc([126.978,37.5665]),zoom:8,maxZoom:19,minZoom:6})});l.current=Q,Q.on("click",ge=>{const ce=Q.forEachFeatureAtPixel(ge.pixel,Re=>Re);if(ce){const Re=ce.get("workId"),X=p.current.find(me=>me.work.id===Re);X&&(S(X.work),F(X.coords),Q.getView().animate({center:kc([X.coords.lng,X.coords.lat]),zoom:Math.max(Q.getView().getZoom()||14,14),duration:300}))}else S(null),F(null)}),Q.on("pointermove",ge=>{const ce=Q.forEachFeatureAtPixel(ge.pixel,()=>!0);Q.getTargetElement().style.cursor=ce?"pointer":""});let H=null;const q=()=>{var ge,ce;try{if(!((ce=(ge=window.kakao)==null?void 0:ge.maps)!=null&&ce.Map)||!i.current)return null;const Re=new window.kakao.maps.Map(i.current,{center:new window.kakao.maps.LatLng(37.5665,126.978),level:8});return u.current=Re,window.kakao.maps.event.addListener(Re,"click",()=>{S(null),F(null)}),Re}catch(Re){return console.warn("[Map]   :",Re),L.current=!1,M.current?N("vworld"):A("    .   ."),null}};(fe=window.kakao)!=null&&fe.maps?window.kakao.maps.Map?H=q():window.kakao.maps.load(()=>{H=q()}):(L.current=!1,console.warn("[Map]  SDK  "));const ae=(ge,ce)=>{y.current={lat:ge,lng:ce};const Re=RC(),X=new Vm({geometry:new Z0(kc([ce,ge]))});if(X.set("isMyLocation",!0),X.setStyle(new cc({image:new mh({src:Re,anchor:[.5,.5],scale:1})})),T.addFeature(X),d.current=X,H){const me=new window.kakao.maps.MarkerImage(Re,new window.kakao.maps.Size(40,40),{offset:new window.kakao.maps.Point(20,20)}),he=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(ge,ce),image:me,map:H,zIndex:10});m.current=he}console.log(`[Map]   : ${ge}, ${ce}`)};return navigator.geolocation&&navigator.geolocation.getCurrentPosition(ge=>{oe||ae(ge.coords.latitude,ge.coords.longitude)},ge=>console.warn("[Map]   :",ge.message),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),(async()=>{var he,Z,ie;if(!await n7()){A("     ."),v(!1);return}!H&&((Z=(he=window.kakao)==null?void 0:he.maps)!=null&&Z.Map)&&(H=q()),console.log(`[Map] Geocoding : ${t.length}`);const ce=[],Re=[];let X=0;for(let te=0;te<t.length;te++){if(oe)return;const je=t[te],be=(ie=je.customer)==null?void 0:ie.address;if(be){te>0&&await new Promise(re=>setTimeout(re,80));const Te=await r7(be);if(Te){const re=I0[je.status]||I0.default,pe=s7(re,te),Se=new Vm({geometry:new Z0(kc([Te.lng,Te.lat]))});if(Se.set("workId",je.id),Se.setStyle(new cc({image:new mh({src:pe,anchor:[.5,1],scale:1})})),T.addFeature(Se),Re.push(kc([Te.lng,Te.lat])),H){const st=new window.kakao.maps.MarkerImage(pe,new window.kakao.maps.Size(36,48),{offset:new window.kakao.maps.Point(18,48)}),Nt=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(Te.lat,Te.lng),image:st,map:H}),lt=je,At=Te;window.kakao.maps.event.addListener(Nt,"click",()=>{S(lt),F(At),H.panTo(new window.kakao.maps.LatLng(At.lat,At.lng))}),f.current.push(Nt)}ce.push({work:je,coords:Te}),X++,console.log(`[Map] ${te+1}/${t.length} : "${be}"  ${Te.lat},${Te.lng}`)}else console.warn(`[Map] ${te+1}/${t.length} : "${be}"`)}V(te+1),W(X)}p.current=ce,console.log(`[Map] Geocoding : ${X}/${t.length} `);const me=y.current;if(me&&Re.push(kc([me.lng,me.lat])),Re.length>0&&(Re.length===1?Q.getView().animate({center:Re[0],zoom:15,duration:300}):Q.getView().fit(Dy(Re),{padding:[60,60,60,60],maxZoom:16,duration:300})),H&&(ce.length>0||me)){const te=new window.kakao.maps.LatLngBounds;ce.forEach(je=>{te.extend(new window.kakao.maps.LatLng(je.coords.lat,je.coords.lng))}),me&&te.extend(new window.kakao.maps.LatLng(me.lat,me.lng)),H.setBounds(te)}v(!1)})(),()=>{oe=!0,Q.setTarget(void 0),l.current=null,c.current=null,d.current=null,f.current.forEach(ge=>ge.setMap(null)),f.current=[],m.current&&m.current.setMap(null),m.current=null,u.current=null,y.current=null}},[t]),_.useEffect(()=>{const oe=setTimeout(()=>{if(g==="vworld"&&l.current)l.current.updateSize();else if(g==="kakao"&&u.current&&(u.current.relayout(),p.current.length>0)){const T=new window.kakao.maps.LatLngBounds;p.current.forEach(I=>{T.extend(new window.kakao.maps.LatLng(I.coords.lat,I.coords.lng))}),u.current.setBounds(T)}},150);return()=>clearTimeout(oe)},[g]);const ee=_.useCallback(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(oe=>{const{latitude:T,longitude:I}=oe.coords;if(y.current={lat:T,lng:I},d.current)d.current.getGeometry().setCoordinates(kc([I,T]));else if(c.current){const U=new Vm({geometry:new Z0(kc([I,T]))});U.set("isMyLocation",!0),U.setStyle(new cc({image:new mh({src:RC(),anchor:[.5,.5],scale:1})})),c.current.addFeature(U),d.current=U}if(m.current)m.current.setPosition(new window.kakao.maps.LatLng(T,I));else if(u.current){const U=new window.kakao.maps.MarkerImage(RC(),new window.kakao.maps.Size(40,40),{offset:new window.kakao.maps.Point(20,20)});m.current=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(T,I),image:U,map:u.current,zIndex:10})}g==="vworld"&&l.current?l.current.getView().animate({center:kc([I,T]),zoom:15,duration:500}):g==="kakao"&&u.current&&(u.current.panTo(new window.kakao.maps.LatLng(T,I)),u.current.setLevel(3))},()=>alert("    ."),{enableHighAccuracy:!0,timeout:1e4})},[g]),J=Yl(oe=>oe.preferredNavApp),$=_.useCallback(()=>{var oe;!P||!j||E5(J,{lat:P.lat,lng:P.lng,name:((oe=j.customer)==null?void 0:oe.address)||""})},[P,j,J]),Y=_.useCallback(()=>{S(null),F(null),setShowNavModal(!1)},[]),K=_.useCallback(()=>{N(oe=>{const T=oe==="vworld"?"kakao":"vworld";return T==="vworld"&&!M.current||T==="kakao"&&!L.current?oe:T}),Y()},[Y]);return s.jsxs("div",{className:"fixed inset-0 bg-white flex flex-col",style:{zIndex:200},children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200",children:[s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-700",children:[s.jsx(db,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:""})]}),s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:" "}),s.jsxs("button",{onClick:K,className:"flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold border",style:{background:g==="vworld"?"#EFF6FF":"#FEF9C3",color:g==="vworld"?"#1D4ED8":"#92400E",borderColor:g==="vworld"?"#BFDBFE":"#FDE68A"},children:[s.jsx(kL,{className:"w-3.5 h-3.5"}),g==="vworld"?"":""]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{ref:r,className:"absolute inset-0",style:{display:g==="vworld"?"block":"none"}}),s.jsx("div",{ref:i,className:"absolute inset-0",style:{display:g==="kakao"?"block":"none"}}),C&&!R&&s.jsxs("div",{className:"absolute inset-0 bg-white/80 flex flex-col items-center justify-center z-10",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsxs("p",{className:"text-gray-600",children:["  ... (",k,"/",t.length,")"]}),G>0&&s.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[G,"  "]})]}),R&&s.jsxs("div",{className:"absolute inset-0 bg-white flex flex-col items-center justify-center z-10 p-6",children:[s.jsx("p",{className:"text-gray-700 text-center mb-4",children:R}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:""})]}),!C&&!R&&s.jsx("div",{className:"absolute top-3 left-3 bg-white/90 backdrop-blur rounded-lg shadow p-2.5 z-20",children:s.jsxs("div",{className:"flex gap-3 text-[11px]",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-blue-500",style:{background:"#3B82F6"}}),s.jsx("span",{className:"text-gray-600 font-semibold",children:" "})]}),[["#DC2626",""],["#16A34A",""],["#EF4444",""],["#9CA3AF",""]].map(([oe,T])=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{background:oe}}),s.jsx("span",{className:"text-gray-600",children:T})]},T))]})}),s.jsx("button",{onClick:ee,title:" ",className:"absolute bottom-20 right-4 w-11 h-11 bg-white rounded-full shadow-lg flex items-center justify-center z-20",style:{bottom:j?"220px":"80px"},children:s.jsx(XL,{className:"w-5 h-5 text-blue-500"})}),s.jsxs("button",{onClick:e,className:"absolute left-4 px-4 py-2.5 bg-white rounded-full shadow-lg flex items-center gap-2 z-20",style:{bottom:j?"220px":"80px"},children:[s.jsx(ub,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:""})]}),j&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-30 px-3 pb-3",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 p-4 max-w-lg mx-auto relative",children:[s.jsx("button",{onClick:Y,className:"absolute top-3 right-3 p-1",children:s.jsx(bi,{size:16,className:"text-gray-400"})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold",style:{background:`${I0[j.status]||I0.default}15`,color:I0[j.status]||I0.default},children:j.typeDisplay||j.type}),s.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-500 text-xs",children:j.status})]}),s.jsx("div",{className:"font-semibold text-[15px] text-gray-900 mb-1 pr-6",children:((w=j.customer)==null?void 0:w.name)||" "}),s.jsx("div",{className:"text-[13px] text-gray-500 mb-3 leading-snug",children:((se=j.customer)==null?void 0:se.address)||" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{var oe;(oe=j.customer)!=null&&oe.phone&&(window.location.href=`tel:${j.customer.phone}`)},className:"flex-1 py-2.5 rounded-lg bg-blue-500 text-white text-xs font-medium active:bg-blue-600",children:""}),s.jsx("button",{onClick:$,className:"flex-1 py-2.5 rounded-lg bg-purple-500 text-white text-xs font-medium active:bg-purple-600",children:""}),s.jsx("button",{onClick:()=>n(j),className:"flex-1 py-2.5 rounded-lg bg-emerald-500 text-white text-xs font-medium active:bg-emerald-600",children:""})]})]})})]}),s.jsx("div",{className:"px-4 py-2.5 bg-white border-t border-gray-200",children:s.jsxs("div",{className:"text-center text-sm text-gray-500",children:[" ",t.length," ",G>0&&!C&&`(${G} )`]})})]})};function td(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function oN(t,e=[]){let n=[];function r(l,c){const d=_.createContext(c),u=n.length;n=[...n,c];const f=p=>{var R;const{scope:y,children:g,...N}=p,C=((R=y==null?void 0:y[t])==null?void 0:R[u])||d,v=_.useMemo(()=>N,Object.values(N));return s.jsx(C.Provider,{value:v,children:g})};f.displayName=l+"Provider";function m(p,y){var C;const g=((C=y==null?void 0:y[t])==null?void 0:C[u])||d,N=_.useContext(g);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${l}\``)}return[f,m]}const i=()=>{const l=n.map(c=>_.createContext(c));return function(d){const u=(d==null?void 0:d[t])||l;return _.useMemo(()=>({[`__scope${t}`]:{...d,[t]:u}}),[d,u])}};return i.scopeName=t,[r,i7(i,...e)]}function i7(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(l){const c=r.reduce((d,{useScope:u,scopeName:f})=>{const p=u(l)[`__scope${f}`];return{...d,...p}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}function WD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ej(...t){return e=>{let n=!1;const r=t.map(i=>{const l=WD(i,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let i=0;i<r.length;i++){const l=r[i];typeof l=="function"?l():WD(t[i],null)}}}}function Wp(...t){return _.useCallback(ej(...t),t)}function Fy(t){const e=a7(t),n=_.forwardRef((r,i)=>{const{children:l,...c}=r,d=_.Children.toArray(l),u=d.find(o7);if(u){const f=u.props.children,m=d.map(p=>p===u?_.Children.count(f)>1?_.Children.only(null):_.isValidElement(f)?f.props.children:null:p);return s.jsx(e,{...c,ref:i,children:_.isValidElement(f)?_.cloneElement(f,void 0,m):null})}return s.jsx(e,{...c,ref:i,children:l})});return n.displayName=`${t}.Slot`,n}function a7(t){const e=_.forwardRef((n,r)=>{const{children:i,...l}=n;if(_.isValidElement(i)){const c=d7(i),d=c7(l,i.props);return i.type!==_.Fragment&&(d.ref=r?ej(r,c):c),_.cloneElement(i,d)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var l7=Symbol("radix.slottable");function o7(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===l7}function c7(t,e){const n={...e};for(const r in e){const i=t[r],l=e[r];/^on[A-Z]/.test(r)?i&&l?n[r]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...l}:r==="className"&&(n[r]=[i,l].filter(Boolean).join(" "))}return{...t,...n}}function d7(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function u7(t){const e=t+"CollectionProvider",[n,r]=oN(e),[i,l]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:v,children:R}=C,A=Gi.useRef(null),M=Gi.useRef(new Map).current;return s.jsx(i,{scope:v,itemMap:M,collectionRef:A,children:R})};c.displayName=e;const d=t+"CollectionSlot",u=Fy(d),f=Gi.forwardRef((C,v)=>{const{scope:R,children:A}=C,M=l(d,R),L=Wp(v,M.collectionRef);return s.jsx(u,{ref:L,children:A})});f.displayName=d;const m=t+"CollectionItemSlot",p="data-radix-collection-item",y=Fy(m),g=Gi.forwardRef((C,v)=>{const{scope:R,children:A,...M}=C,L=Gi.useRef(null),k=Wp(v,L),V=l(m,R);return Gi.useEffect(()=>(V.itemMap.set(L,{ref:L,...M}),()=>void V.itemMap.delete(L))),s.jsx(y,{[p]:"",ref:k,children:A})});g.displayName=m;function N(C){const v=l(t+"CollectionConsumer",C);return Gi.useCallback(()=>{const A=v.collectionRef.current;if(!A)return[];const M=Array.from(A.querySelectorAll(`[${p}]`));return Array.from(v.itemMap.values()).sort((V,G)=>M.indexOf(V.ref.current)-M.indexOf(G.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:c,Slot:f,ItemSlot:g},N,r]}var Bp=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},h7=AT[" useId ".trim().toString()]||(()=>{}),f7=0;function tj(t){const[e,n]=_.useState(h7());return Bp(()=>{n(r=>r??String(f7++))},[t]),e?`radix-${e}`:""}var m7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Lf=m7.reduce((t,e)=>{const n=Fy(`Primitive.${e}`),r=_.forwardRef((i,l)=>{const{asChild:c,...d}=i,u=c?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...d,ref:l})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function g7(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var x7=AT[" useInsertionEffect ".trim().toString()]||Bp;function sj({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,l,c]=p7({defaultProp:e,onChange:n}),d=t!==void 0,u=d?t:i;{const m=_.useRef(t!==void 0);_.useEffect(()=>{const p=m.current;p!==d&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=d},[d,r])}const f=_.useCallback(m=>{var p;if(d){const y=_7(m)?m(t):m;y!==t&&((p=c.current)==null||p.call(c,y))}else l(m)},[d,t,l,c]);return[u,f]}function p7({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),i=_.useRef(n),l=_.useRef(e);return x7(()=>{l.current=e},[e]),_.useEffect(()=>{var c;i.current!==n&&((c=l.current)==null||c.call(l,n),i.current=n)},[n,i]),[n,r,l]}function _7(t){return typeof t=="function"}var C7=_.createContext(void 0);function nj(t){const e=_.useContext(C7);return t||e||"ltr"}var TC="rovingFocusGroup.onEntryFocus",y7={bubbles:!1,cancelable:!0},jg="RovingFocusGroup",[Ky,rj,b7]=u7(jg),[N7,ij]=oN(jg,[b7]),[S7,v7]=N7(jg),aj=_.forwardRef((t,e)=>s.jsx(Ky.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(Ky.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(D7,{...t,ref:e})})}));aj.displayName=jg;var D7=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...p}=t,y=_.useRef(null),g=Wp(e,y),N=nj(l),[C,v]=sj({prop:c,defaultProp:d??null,onChange:u,caller:jg}),[R,A]=_.useState(!1),M=g7(f),L=rj(n),k=_.useRef(!1),[V,G]=_.useState(0);return _.useEffect(()=>{const W=y.current;if(W)return W.addEventListener(TC,M),()=>W.removeEventListener(TC,M)},[M]),s.jsx(S7,{scope:n,orientation:r,dir:N,loop:i,currentTabStopId:C,onItemFocus:_.useCallback(W=>v(W),[v]),onItemShiftTab:_.useCallback(()=>A(!0),[]),onFocusableItemAdd:_.useCallback(()=>G(W=>W+1),[]),onFocusableItemRemove:_.useCallback(()=>G(W=>W-1),[]),children:s.jsx(Lf.div,{tabIndex:R||V===0?-1:0,"data-orientation":r,...p,ref:g,style:{outline:"none",...t.style},onMouseDown:td(t.onMouseDown,()=>{k.current=!0}),onFocus:td(t.onFocus,W=>{const j=!k.current;if(W.target===W.currentTarget&&j&&!R){const S=new CustomEvent(TC,y7);if(W.currentTarget.dispatchEvent(S),!S.defaultPrevented){const P=L().filter(Y=>Y.focusable),F=P.find(Y=>Y.active),ee=P.find(Y=>Y.id===C),$=[F,ee,...P].filter(Boolean).map(Y=>Y.ref.current);cj($,m)}}k.current=!1}),onBlur:td(t.onBlur,()=>A(!1))})})}),lj="RovingFocusGroupItem",oj=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:l,children:c,...d}=t,u=tj(),f=l||u,m=v7(lj,n),p=m.currentTabStopId===f,y=rj(n),{onFocusableItemAdd:g,onFocusableItemRemove:N,currentTabStopId:C}=m;return _.useEffect(()=>{if(r)return g(),()=>N()},[r,g,N]),s.jsx(Ky.ItemSlot,{scope:n,id:f,focusable:r,active:i,children:s.jsx(Lf.span,{tabIndex:p?0:-1,"data-orientation":m.orientation,...d,ref:e,onMouseDown:td(t.onMouseDown,v=>{r?m.onItemFocus(f):v.preventDefault()}),onFocus:td(t.onFocus,()=>m.onItemFocus(f)),onKeyDown:td(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){m.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const R=E7(v,m.orientation,m.dir);if(R!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let M=y().filter(L=>L.focusable).map(L=>L.ref.current);if(R==="last")M.reverse();else if(R==="prev"||R==="next"){R==="prev"&&M.reverse();const L=M.indexOf(v.currentTarget);M=m.loop?j7(M,L+1):M.slice(L+1)}setTimeout(()=>cj(M))}}),children:typeof c=="function"?c({isCurrentTabStop:p,hasTabStop:C!=null}):c})})});oj.displayName=lj;var R7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T7(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function E7(t,e,n){const r=T7(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return R7[r]}function cj(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function j7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var I7=aj,O7=oj;function M7(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var dj=t=>{const{present:e,children:n}=t,r=L7(e),i=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),l=Wp(r.ref,w7(i));return typeof n=="function"||r.isPresent?_.cloneElement(i,{ref:l}):null};dj.displayName="Presence";function L7(t){const[e,n]=_.useState(),r=_.useRef(null),i=_.useRef(t),l=_.useRef("none"),c=t?"mounted":"unmounted",[d,u]=M7(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const f=Kx(r.current);l.current=d==="mounted"?f:"none"},[d]),Bp(()=>{const f=r.current,m=i.current;if(m!==t){const y=l.current,g=Kx(f);t?u("MOUNT"):g==="none"||(f==null?void 0:f.display)==="none"?u("UNMOUNT"):u(m&&y!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Bp(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,p=g=>{const C=Kx(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&C&&(u("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},y=g=>{g.target===e&&(l.current=Kx(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:_.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function Kx(t){return(t==null?void 0:t.animationName)||"none"}function w7(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var N_="Tabs",[P7]=oN(N_,[ij]),uj=ij(),[A7,cN]=P7(N_),hj=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:l,orientation:c="horizontal",dir:d,activationMode:u="automatic",...f}=t,m=nj(d),[p,y]=sj({prop:r,onChange:i,defaultProp:l??"",caller:N_});return s.jsx(A7,{scope:n,baseId:tj(),value:p,onValueChange:y,orientation:c,dir:m,activationMode:u,children:s.jsx(Lf.div,{dir:m,"data-orientation":c,...f,ref:e})})});hj.displayName=N_;var fj="TabsList",mj=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,l=cN(fj,n),c=uj(n);return s.jsx(I7,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:r,children:s.jsx(Lf.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:e})})});mj.displayName=fj;var gj="TabsTrigger",xj=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...l}=t,c=cN(gj,n),d=uj(n),u=Cj(c.baseId,r),f=yj(c.baseId,r),m=r===c.value;return s.jsx(O7,{asChild:!0,...d,focusable:!i,active:m,children:s.jsx(Lf.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...l,ref:e,onMouseDown:td(t.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?c.onValueChange(r):p.preventDefault()}),onKeyDown:td(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&c.onValueChange(r)}),onFocus:td(t.onFocus,()=>{const p=c.activationMode!=="manual";!m&&!i&&p&&c.onValueChange(r)})})})});xj.displayName=gj;var pj="TabsContent",_j=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:l,...c}=t,d=cN(pj,n),u=Cj(d.baseId,r),f=yj(d.baseId,r),m=r===d.value,p=_.useRef(m);return _.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),s.jsx(dj,{present:i||m,children:({present:y})=>s.jsx(Lf.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!y,id:f,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:y&&l})})});_j.displayName=pj;function Cj(t,e){return`${t}-trigger-${e}`}function yj(t,e){return`${t}-content-${e}`}var k7=hj,bj=mj,Nj=xj,Sj=_j;function vj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=vj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function U7(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=vj(t))&&(r&&(r+=" "),r+=e);return r}const W7=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},B7=(t,e)=>({classGroupId:t,validator:e}),Dj=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Fp="-",BD=[],F7="arbitrary..",K7=t=>{const e=G7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return Q7(c);const d=c.split(Fp),u=d[0]===""&&d.length>1?1:0;return Rj(d,u,e)},getConflictingClassGroupIds:(c,d)=>{if(d){const u=r[c],f=n[c];return u?f?W7(f,u):u:f||BD}return n[c]||BD}}},Rj=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],l=n.nextPart.get(i);if(l){const f=Rj(t,e+1,l);if(f)return f}const c=n.validators;if(c===null)return;const d=e===0?t.join(Fp):t.slice(e).join(Fp),u=c.length;for(let f=0;f<u;f++){const m=c[f];if(m.validator(d))return m.classGroupId}},Q7=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?F7+r:void 0})(),G7=t=>{const{theme:e,classGroups:n}=t;return Y7(n,e)},Y7=(t,e)=>{const n=Dj();for(const r in t){const i=t[r];dN(i,n,r,e)}return n},dN=(t,e,n,r)=>{const i=t.length;for(let l=0;l<i;l++){const c=t[l];V7(c,e,n,r)}},V7=(t,e,n,r)=>{if(typeof t=="string"){$7(t,e,n);return}if(typeof t=="function"){H7(t,e,n,r);return}z7(t,e,n,r)},$7=(t,e,n)=>{const r=t===""?e:Tj(e,t);r.classGroupId=n},H7=(t,e,n,r)=>{if(q7(t)){dN(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(B7(n,t))},z7=(t,e,n,r)=>{const i=Object.entries(t),l=i.length;for(let c=0;c<l;c++){const[d,u]=i[c];dN(u,Tj(e,d),n,r)}},Tj=(t,e)=>{let n=t;const r=e.split(Fp),i=r.length;for(let l=0;l<i;l++){const c=r[l];let d=n.nextPart.get(c);d||(d=Dj(),n.nextPart.set(c,d)),n=d}return n},q7=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,X7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(l,c)=>{n[l]=c,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(l){let c=n[l];if(c!==void 0)return c;if((c=r[l])!==void 0)return i(l,c),c},set(l,c){l in n?n[l]=c:i(l,c)}}},Qy="!",FD=":",J7=[],KD=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),Z7=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const l=[];let c=0,d=0,u=0,f;const m=i.length;for(let C=0;C<m;C++){const v=i[C];if(c===0&&d===0){if(v===FD){l.push(i.slice(u,C)),u=C+1;continue}if(v==="/"){f=C;continue}}v==="["?c++:v==="]"?c--:v==="("?d++:v===")"&&d--}const p=l.length===0?i:i.slice(u);let y=p,g=!1;p.endsWith(Qy)?(y=p.slice(0,-1),g=!0):p.startsWith(Qy)&&(y=p.slice(1),g=!0);const N=f&&f>u?f-u:void 0;return KD(l,g,y,N)};if(e){const i=e+FD,l=r;r=c=>c.startsWith(i)?l(c.slice(i.length)):KD(J7,!1,c,void 0,!0)}if(n){const i=r;r=l=>n({className:l,parseClassName:i})}return r},eU=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let l=0;l<n.length;l++){const c=n[l],d=c[0]==="[",u=e.has(c);d||u?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(c)):i.push(c)}return i.length>0&&(i.sort(),r.push(...i)),r}},tU=t=>({cache:X7(t.cacheSize),parseClassName:Z7(t),sortModifiers:eU(t),...K7(t)}),sU=/\s+/,nU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:l}=e,c=[],d=t.trim().split(sU);let u="";for(let f=d.length-1;f>=0;f-=1){const m=d[f],{isExternal:p,modifiers:y,hasImportantModifier:g,baseClassName:N,maybePostfixModifierPosition:C}=n(m);if(p){u=m+(u.length>0?" "+u:u);continue}let v=!!C,R=r(v?N.substring(0,C):N);if(!R){if(!v){u=m+(u.length>0?" "+u:u);continue}if(R=r(N),!R){u=m+(u.length>0?" "+u:u);continue}v=!1}const A=y.length===0?"":y.length===1?y[0]:l(y).join(":"),M=g?A+Qy:A,L=M+R;if(c.indexOf(L)>-1)continue;c.push(L);const k=i(R,v);for(let V=0;V<k.length;++V){const G=k[V];c.push(M+G)}u=m+(u.length>0?" "+u:u)}return u},rU=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=Ej(n))&&(i&&(i+=" "),i+=r);return i},Ej=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Ej(t[r]))&&(n&&(n+=" "),n+=e);return n},iU=(t,...e)=>{let n,r,i,l;const c=u=>{const f=e.reduce((m,p)=>p(m),t());return n=tU(f),r=n.cache.get,i=n.cache.set,l=d,d(u)},d=u=>{const f=r(u);if(f)return f;const m=nU(u,n);return i(u,m),m};return l=c,(...u)=>l(rU(...u))},aU=[],Fi=t=>{const e=n=>n[t]||aU;return e.isThemeGetter=!0,e},jj=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ij=/^\((?:(\w[\w-]*):)?(.+)\)$/i,lU=/^\d+\/\d+$/,oU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,uU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,O0=t=>lU.test(t),In=t=>!!t&&!Number.isNaN(Number(t)),Hd=t=>!!t&&Number.isInteger(Number(t)),EC=t=>t.endsWith("%")&&In(t.slice(0,-1)),Bc=t=>oU.test(t),fU=()=>!0,mU=t=>cU.test(t)&&!dU.test(t),Oj=()=>!1,gU=t=>uU.test(t),xU=t=>hU.test(t),pU=t=>!Hs(t)&&!zs(t),_U=t=>wf(t,wj,Oj),Hs=t=>jj.test(t),Vu=t=>wf(t,Pj,mU),jC=t=>wf(t,SU,In),QD=t=>wf(t,Mj,Oj),CU=t=>wf(t,Lj,xU),Qx=t=>wf(t,Aj,gU),zs=t=>Ij.test(t),Em=t=>Pf(t,Pj),yU=t=>Pf(t,vU),GD=t=>Pf(t,Mj),bU=t=>Pf(t,wj),NU=t=>Pf(t,Lj),Gx=t=>Pf(t,Aj,!0),wf=(t,e,n)=>{const r=jj.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Pf=(t,e,n=!1)=>{const r=Ij.exec(t);return r?r[1]?e(r[1]):n:!1},Mj=t=>t==="position"||t==="percentage",Lj=t=>t==="image"||t==="url",wj=t=>t==="length"||t==="size"||t==="bg-size",Pj=t=>t==="length",SU=t=>t==="number",vU=t=>t==="family-name",Aj=t=>t==="shadow",DU=()=>{const t=Fi("color"),e=Fi("font"),n=Fi("text"),r=Fi("font-weight"),i=Fi("tracking"),l=Fi("leading"),c=Fi("breakpoint"),d=Fi("container"),u=Fi("spacing"),f=Fi("radius"),m=Fi("shadow"),p=Fi("inset-shadow"),y=Fi("text-shadow"),g=Fi("drop-shadow"),N=Fi("blur"),C=Fi("perspective"),v=Fi("aspect"),R=Fi("ease"),A=Fi("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...L(),zs,Hs],V=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto","contain","none"],W=()=>[zs,Hs,u],j=()=>[O0,"full","auto",...W()],S=()=>[Hd,"none","subgrid",zs,Hs],P=()=>["auto",{span:["full",Hd,zs,Hs]},Hd,zs,Hs],F=()=>[Hd,"auto",zs,Hs],ee=()=>["auto","min","max","fr",zs,Hs],J=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...W()],K=()=>[O0,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...W()],w=()=>[t,zs,Hs],se=()=>[...L(),GD,QD,{position:[zs,Hs]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],T=()=>["auto","cover","contain",bU,_U,{size:[zs,Hs]}],I=()=>[EC,Em,Vu],U=()=>["","none","full",f,zs,Hs],Q=()=>["",In,Em,Vu],H=()=>["solid","dashed","dotted","double"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[In,EC,GD,QD],fe=()=>["","none",N,zs,Hs],ge=()=>["none",In,zs,Hs],ce=()=>["none",In,zs,Hs],Re=()=>[In,zs,Hs],X=()=>[O0,"full",...W()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Bc],breakpoint:[Bc],color:[fU],container:[Bc],"drop-shadow":[Bc],ease:["in","out","in-out"],font:[pU],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Bc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Bc],shadow:[Bc],spacing:["px",In],text:[Bc],"text-shadow":[Bc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",O0,Hs,zs,v]}],container:["container"],columns:[{columns:[In,Hs,zs,d]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Hd,"auto",zs,Hs]}],basis:[{basis:[O0,"full","auto",d,...W()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[In,O0,"auto","initial","none",Hs]}],grow:[{grow:["",In,zs,Hs]}],shrink:[{shrink:["",In,zs,Hs]}],order:[{order:[Hd,"first","last","none",zs,Hs]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ee()}],"auto-rows":[{"auto-rows":ee()}],gap:[{gap:W()}],"gap-x":[{"gap-x":W()}],"gap-y":[{"gap-y":W()}],"justify-content":[{justify:[...J(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...J()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":J()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:W()}],px:[{px:W()}],py:[{py:W()}],ps:[{ps:W()}],pe:[{pe:W()}],pt:[{pt:W()}],pr:[{pr:W()}],pb:[{pb:W()}],pl:[{pl:W()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":W()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":W()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[d,"screen",...K()]}],"min-w":[{"min-w":[d,"screen","none",...K()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",n,Em,Vu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,zs,jC]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",EC,Hs]}],"font-family":[{font:[yU,Hs,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,zs,Hs]}],"line-clamp":[{"line-clamp":[In,"none",zs,jC]}],leading:[{leading:[l,...W()]}],"list-image":[{"list-image":["none",zs,Hs]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",zs,Hs]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:w()}],"text-color":[{text:w()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:[In,"from-font","auto",zs,Vu]}],"text-decoration-color":[{decoration:w()}],"underline-offset":[{"underline-offset":[In,"auto",zs,Hs]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",zs,Hs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",zs,Hs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Hd,zs,Hs],radial:["",zs,Hs],conic:[Hd,zs,Hs]},NU,CU]}],"bg-color":[{bg:w()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:w()}],"gradient-via":[{via:w()}],"gradient-to":[{to:w()}],rounded:[{rounded:U()}],"rounded-s":[{"rounded-s":U()}],"rounded-e":[{"rounded-e":U()}],"rounded-t":[{"rounded-t":U()}],"rounded-r":[{"rounded-r":U()}],"rounded-b":[{"rounded-b":U()}],"rounded-l":[{"rounded-l":U()}],"rounded-ss":[{"rounded-ss":U()}],"rounded-se":[{"rounded-se":U()}],"rounded-ee":[{"rounded-ee":U()}],"rounded-es":[{"rounded-es":U()}],"rounded-tl":[{"rounded-tl":U()}],"rounded-tr":[{"rounded-tr":U()}],"rounded-br":[{"rounded-br":U()}],"rounded-bl":[{"rounded-bl":U()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...H(),"hidden","none"]}],"divide-style":[{divide:[...H(),"hidden","none"]}],"border-color":[{border:w()}],"border-color-x":[{"border-x":w()}],"border-color-y":[{"border-y":w()}],"border-color-s":[{"border-s":w()}],"border-color-e":[{"border-e":w()}],"border-color-t":[{"border-t":w()}],"border-color-r":[{"border-r":w()}],"border-color-b":[{"border-b":w()}],"border-color-l":[{"border-l":w()}],"divide-color":[{divide:w()}],"outline-style":[{outline:[...H(),"none","hidden"]}],"outline-offset":[{"outline-offset":[In,zs,Hs]}],"outline-w":[{outline:["",In,Em,Vu]}],"outline-color":[{outline:w()}],shadow:[{shadow:["","none",m,Gx,Qx]}],"shadow-color":[{shadow:w()}],"inset-shadow":[{"inset-shadow":["none",p,Gx,Qx]}],"inset-shadow-color":[{"inset-shadow":w()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:w()}],"ring-offset-w":[{"ring-offset":[In,Vu]}],"ring-offset-color":[{"ring-offset":w()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":w()}],"text-shadow":[{"text-shadow":["none",y,Gx,Qx]}],"text-shadow-color":[{"text-shadow":w()}],opacity:[{opacity:[In,zs,Hs]}],"mix-blend":[{"mix-blend":[...q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[In]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":w()}],"mask-image-linear-to-color":[{"mask-linear-to":w()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":w()}],"mask-image-t-to-color":[{"mask-t-to":w()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":w()}],"mask-image-r-to-color":[{"mask-r-to":w()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":w()}],"mask-image-b-to-color":[{"mask-b-to":w()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":w()}],"mask-image-l-to-color":[{"mask-l-to":w()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":w()}],"mask-image-x-to-color":[{"mask-x-to":w()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":w()}],"mask-image-y-to-color":[{"mask-y-to":w()}],"mask-image-radial":[{"mask-radial":[zs,Hs]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":w()}],"mask-image-radial-to-color":[{"mask-radial-to":w()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[In]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":w()}],"mask-image-conic-to-color":[{"mask-conic-to":w()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",zs,Hs]}],filter:[{filter:["","none",zs,Hs]}],blur:[{blur:fe()}],brightness:[{brightness:[In,zs,Hs]}],contrast:[{contrast:[In,zs,Hs]}],"drop-shadow":[{"drop-shadow":["","none",g,Gx,Qx]}],"drop-shadow-color":[{"drop-shadow":w()}],grayscale:[{grayscale:["",In,zs,Hs]}],"hue-rotate":[{"hue-rotate":[In,zs,Hs]}],invert:[{invert:["",In,zs,Hs]}],saturate:[{saturate:[In,zs,Hs]}],sepia:[{sepia:["",In,zs,Hs]}],"backdrop-filter":[{"backdrop-filter":["","none",zs,Hs]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[In,zs,Hs]}],"backdrop-contrast":[{"backdrop-contrast":[In,zs,Hs]}],"backdrop-grayscale":[{"backdrop-grayscale":["",In,zs,Hs]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[In,zs,Hs]}],"backdrop-invert":[{"backdrop-invert":["",In,zs,Hs]}],"backdrop-opacity":[{"backdrop-opacity":[In,zs,Hs]}],"backdrop-saturate":[{"backdrop-saturate":[In,zs,Hs]}],"backdrop-sepia":[{"backdrop-sepia":["",In,zs,Hs]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":W()}],"border-spacing-x":[{"border-spacing-x":W()}],"border-spacing-y":[{"border-spacing-y":W()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",zs,Hs]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[In,"initial",zs,Hs]}],ease:[{ease:["linear","initial",R,zs,Hs]}],delay:[{delay:[In,zs,Hs]}],animate:[{animate:["none",A,zs,Hs]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,zs,Hs]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:ge()}],"rotate-x":[{"rotate-x":ge()}],"rotate-y":[{"rotate-y":ge()}],"rotate-z":[{"rotate-z":ge()}],scale:[{scale:ce()}],"scale-x":[{"scale-x":ce()}],"scale-y":[{"scale-y":ce()}],"scale-z":[{"scale-z":ce()}],"scale-3d":["scale-3d"],skew:[{skew:Re()}],"skew-x":[{"skew-x":Re()}],"skew-y":[{"skew-y":Re()}],transform:[{transform:[zs,Hs,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:X()}],"translate-x":[{"translate-x":X()}],"translate-y":[{"translate-y":X()}],"translate-z":[{"translate-z":X()}],"translate-none":["translate-none"],accent:[{accent:w()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:w()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",zs,Hs]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",zs,Hs]}],fill:[{fill:["none",...w()]}],"stroke-w":[{stroke:[In,Em,Vu,jC]}],stroke:[{stroke:["none",...w()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},RU=iU(DU);function uN(...t){return RU(U7(t))}const kj=k7,hN=_.forwardRef(({className:t,...e},n)=>s.jsx(bj,{ref:n,className:uN("inline-flex h-10 items-center justify-start rounded-md bg-muted p-1 text-muted-foreground overflow-x-auto scrollbar-hide",t),...e}));hN.displayName=bj.displayName;const fN=_.forwardRef(({className:t,...e},n)=>s.jsx(Nj,{ref:n,className:uN("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));fN.displayName=Nj.displayName;const Ql=_.forwardRef(({className:t,...e},n)=>s.jsx(Sj,{ref:n,className:uN("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ql.displayName=Sj.displayName;const Uj=t=>WM({queryKey:["workOrders",t.startDate,t.endDate],queryFn:()=>d4(t),enabled:!!t.startDate&&!!t.endDate,staleTime:120*1e3,gcTime:300*1e3}),TU=({onNavigateToMenu:t,onNavigateToView:e,onNavigateToComingSoon:n,userInfo:r,showToast:i})=>{const{setSelectedWorkItem:l,setSelectedWorkDirection:c}=Yl(),[d,u]=_.useState(null),[f,m]=_.useState(null),[p,y]=_.useState(null),[g,N]=_.useState(!1),[C,v]=_.useState(null),[R,A]=_.useState(!1),[M,L]=_.useState(null),[k,V]=_.useState(!1),[G,W]=_.useState(null),[j,S]=_.useState({}),[P,F]=_.useState(!1),{activeTab:ee,setActiveTab:J,workFilters:$,setWorkFilters:Y}=Yl(),[K,w]=_.useState(!1),[se,oe]=_.useState(!0),T=_.useRef(null),I=_.useRef([]),U=_.useRef(null),Q=_.useRef(0),[H,q]=_.useState(!1),[ae,fe]=_.useState(()=>{const xe=localStorage.getItem("safety_warning_dismissed");if(xe){const Ue=new Date(xe).toDateString(),Pe=new Date().toDateString();return Ue===Pe}return!1}),{showMapView:ge,setShowMapView:ce}=Yl(),Re=[{id:"safety-check",title:""},{id:"work-receipt",title:""},{id:"work-result-signal",title:""},{id:"signal-interlock",title:""}],X="YYYY-MM-DD",{startDate:me,endDate:he,filter:Z,workTypeFilter:ie=""}=$;_.useEffect(()=>{const xe=setTimeout(()=>{if(ee==="work-receipt"){const Ue=Yl.getState().workFilters;Yl.getState().setWorkFilters({...Ue,filter:""})}},100);return()=>clearTimeout(xe)},[ee]);const{data:te=[],isLoading:je,error:be,refetch:Te}=Uj({startDate:me,endDate:he}),re=(be==null?void 0:be.message)||null,pe=xe=>{Y({...$,...xe})},Se=xe=>{const Ue=Yc(xe);pe({startDate:Ue.startOf("month").format(X),endDate:Ue.endOf("month").format(X)})},st=xe=>{const Ue=Yc(xe);pe({startDate:Ue.startOf("month").format(X),endDate:Ue.endOf("month").format(X)})},Nt=()=>{const xe=Yc(me).subtract(1,"month");pe({startDate:xe.startOf("month").format(X),endDate:xe.endOf("month").format(X)})},lt=()=>{const xe=Yc(me).add(1,"month");pe({startDate:xe.startOf("month").format(X),endDate:xe.endOf("month").format(X)})};_.useEffect(()=>{if(!$n()&&te.length>0){F(!0);const xe={};te.forEach(Ue=>{const Pe=i4(Ue.PROD_GRPS,Ue.WRK_STATS);Pe&&Pe.total>0?xe[Ue.id]=Pe:xe[Ue.id]={total:1,pending:1,completed:0,cancelled:0,pendingByProdGrp:{},completedByProdGrp:{}}}),S(xe),F(!1)}else te.length===0&&F(!1)},[te]),_.useEffect(()=>{if(ee==="work-receipt"){const xe=Yc(me),Ue=Yc(he),Pe=xe.date()===1,Ye=Ue.date()===Ue.endOf("month").date();if(!Pe||!Ye){const mt=Yc();pe({startDate:mt.startOf("month").format(X),endDate:mt.endOf("month").format(X)})}}},[ee]),_.useEffect(()=>{ee==="work-receipt"&&(async()=>{if(r!=null&&r.userId)try{const Ue=await a5(r.userId),Pe=Ue&&Ue.length>0;q(!Pe)}catch(Ue){console.error("  :",Ue),q(!1)}})()},[r,ee]),_.useEffect(()=>{const xe=U.current;if(!xe)return;let Ue=!1,Pe=null;const Ye=tt=>{Pe&&clearTimeout(Pe),Pe=setTimeout(()=>{oe(De=>De===tt?De:tt)},50)},mt=()=>{const tt=xe.scrollTop,De=tt-Q.current,it=xe.scrollHeight-xe.clientHeight;if(it<=30){Ye(!0),Q.current=tt,Ue=!1;return}const St=tt>=it-10,Lt=tt<=10;if(St||Lt){Q.current=tt,Ue=!1;return}if(Math.abs(De)<15){Ue=!1;return}De>0&&tt>80?Ye(!1):De<-5&&Ye(!0),Q.current=tt,Ue=!1},de=()=>{Ue||(requestAnimationFrame(mt),Ue=!0)};return xe.addEventListener("scroll",de,{passive:!0}),()=>{xe.removeEventListener("scroll",de),Pe&&clearTimeout(Pe)}},[]);const At=async(xe,Ue)=>{await Te(),d&&d.id===xe&&u(null)},ot=xe=>{c(xe),e?e("work-item-list"):m(xe)},We=xe=>{var Ye,mt,de;const Ue=tt=>tt?tt.includes("T")||tt.includes("-")?tt.replace(/[-:T]/g,"").substring(0,12):tt:"",Pe={SO_ID:xe.SO_ID||"",CUST_ID:xe.CUST_ID||((Ye=xe.customer)==null?void 0:Ye.id)||"",CUST_NM:((mt=xe.customer)==null?void 0:mt.name)||"",SMS_RCV_TEL:((de=xe.customer)==null?void 0:de.phone)||xe.REQ_CUST_TEL_NO||"",SMS_SEND_TEL:"",WRK_HOPE_DTTM:Ue(xe.scheduledAt),WRKR_NM:(r==null?void 0:r.userName)||"",WRKR_NM_EN:(r==null?void 0:r.userNameEn)||(r==null?void 0:r.userName)||"",WRK_CD:xe.WRK_CD||"",WRK_CD_NM:xe.typeDisplay||"",WRK_DRCTN_ID:xe.WRK_DRCTN_ID||xe.id||"",RCPT_ID:xe.RCPT_ID||""};L(Pe),A(!0)},Dt=xe=>{W(xe),V(!0)},Et=()=>{Te()},Rt=async xe=>{if(C){setIsLoading(!0),N(!1);try{const Ue=await xb(xe);Ue.code==="SUCCESS"||Ue.code==="OK"?(i&&i("  .","success"),await At(C.id,hn.Cancelled)):i&&i(` : ${Ue.message}`,"error",!0)}catch(Ue){console.error(" :",Ue);const Pe=Ue instanceof Fs?Ue.message:Ue.message||"   .";i&&i(Pe,"error",!0)}finally{setIsLoading(!1),v(null)}}},$e=xe=>{l(xe),e?e("work-complete-form"):y(xe)},gt=async()=>{y(null),u(null),await Te(),i&&i("  .","success")};if(!e){if(p)return s.jsx(Rp,{order:p,onBack:()=>y(null),onSuccess:gt,showToast:i});if(f)return s.jsx(j5,{direction:f,onBack:()=>m(null)});if(d)return s.jsx(_5,{order:d,onBack:()=>u(null),onUpdateStatus:At,onComplete:$e},d.id)}const Fe=te.filter(xe=>{if(Z!==""){const Ue=j[xe.id],Pe=(Ue==null?void 0:Ue.isEmpty)===!0;if(Z===hn.Cancelled){if(xe.status!==hn.Cancelled&&!Pe)return!1}else if(Pe||xe.status!==Z)return!1}return!(ie&&ie!==""&&xe.WRK_CD_NM!==ie)}),rt=()=>{let xe=0;return Z!==""&&xe++,ie!==""&&xe++,xe},at=()=>{pe({filter:"",workTypeFilter:""})},It=Fe,ht=xe=>xe===""?te.length:te.filter(Ue=>{const Pe=j[Ue.id],Ye=(Pe==null?void 0:Pe.isEmpty)===!0;return xe===hn.Cancelled?Ue.status===hn.Cancelled||Ye:Ye?!1:Ue.status===xe}).length,Je=xe=>{J(xe);const Ue=()=>{const Ye=T.current;if(!Ye)return;const mt=Re.findIndex(it=>it.id===xe),de=I.current[mt];if(!de)return;const tt=Ye.getBoundingClientRect().width,De=de.offsetLeft-tt/2+de.offsetWidth/2;Ye.scrollTo({left:De,behavior:"smooth"})};if(typeof window<"u"&&("requestAnimationFrame"in window?requestAnimationFrame(Ue):setTimeout(Ue,50)),!["work-receipt","safety-check","signal-interlock","work-result-signal","lgu-construction","lgu-network-fault"].includes(xe)){const Ye=Re.find(mt=>mt.id===xe);Ye&&n&&n(Ye.title)}},ve={:1,:2,"A/S":3,:4,:5,:6,:7,:8,:9},Ge=_.useMemo(()=>{const xe=new Set;te.forEach(Pe=>{Pe.WRK_CD_NM&&xe.add(Pe.WRK_CD_NM)});const Ue=Array.from(xe).sort((Pe,Ye)=>{const mt=ve[Pe]??99,de=ve[Ye]??99;return mt-de});return[{value:"",label:""},...Ue.map(Pe=>({value:Pe,label:Pe}))]},[te]);_.useEffect(()=>{const xe=Ge.map(Ue=>Ue.value);ie&&!xe.includes(ie)&&pe({workTypeFilter:""})},[Ge,ie]);const _e=_.useMemo(()=>[{value:"",label:` (${ht("")})`,shortLabel:""},{value:hn.Pending,label:` (${ht(hn.Pending)})`,shortLabel:""},{value:hn.Completed,label:` (${ht(hn.Completed)})`,shortLabel:""},{value:hn.Cancelled,label:` (${ht(hn.Cancelled)})`,shortLabel:""}],[te]);return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col overflow-hidden",children:[s.jsxs(kj,{value:ee,onValueChange:Je,className:"w-full flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200",children:s.jsx(hN,{ref:T,className:"w-full justify-start bg-white rounded-none h-auto py-2 px-3 overflow-x-auto border-none",children:Re.map((xe,Ue)=>s.jsx(fN,{value:xe.id,ref:Pe=>I.current[Ue]=Pe,className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=inactive]:text-gray-600 rounded-full px-4 py-2 text-sm font-medium flex-shrink-0 mx-1 transition-colors",children:xe.title},xe.id))})}),s.jsxs(Ql,{value:"work-receipt",className:"flex-1 data-[state=active]:flex flex-col overflow-hidden",children:[s.jsx("div",{className:`flex-shrink-0 bg-gray-50 grid transition-[grid-template-rows] duration-300 ease-out ${se?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,style:{willChange:"grid-template-rows"},children:s.jsxs("div",{className:`min-h-0 overflow-hidden px-3 pt-1 transition-opacity duration-200 ${se?"opacity-100":"opacity-0"}`,children:[H&&!ae&&s.jsx("div",{className:"mb-3 bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ql,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-semibold text-yellow-800",children:"   ."})})]}),s.jsx("button",{onClick:()=>{fe(!0),localStorage.setItem("safety_warning_dismissed",new Date().toISOString())},className:"text-yellow-600 hover:text-yellow-800 transition-colors",title:"",children:s.jsx(bi,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 mb-3 overflow-hidden",children:[s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:Nt,className:"p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",children:s.jsx(XT,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:me,onChange:xe=>Se(xe.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",style:{colorScheme:"light"}}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(me).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})})]}),s.jsx("span",{className:"text-gray-300",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:he,onChange:xe=>st(xe.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",style:{colorScheme:"light"}}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(he).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})})]})]}),s.jsx("button",{onClick:lt,className:"p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",children:s.jsx(mL,{className:"w-5 h-5 text-gray-500"})})]})}),s.jsxs("button",{onClick:()=>w(!K),className:"w-full px-4 py-2.5 flex items-center justify-between border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),s.jsx("span",{className:"text-sm text-gray-600",children:""}),rt()>0&&s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500 text-white text-xs font-medium rounded-full",children:rt()})]}),s.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${K?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),K&&s.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),s.jsx(Zs,{value:Z,onValueChange:xe=>pe({filter:xe}),options:_e})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),s.jsx(Zs,{value:ie,onValueChange:xe=>pe({workTypeFilter:xe}),options:Ge})]}),s.jsx("button",{onClick:at,className:`p-2 rounded-lg transition-colors flex-shrink-0 ${rt()>0?"text-blue-600 bg-blue-50 hover:bg-blue-100":"text-gray-400 bg-gray-100"}`,title:" ",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]})]})}),s.jsxs("div",{ref:U,className:"flex-1 overflow-y-auto px-3 pb-4",children:[je||P?s.jsx(z0,{size:"medium",message:je?"   ...":"   ..."}):re?s.jsx(Db,{type:"error",message:re,onRetry:()=>Te()}):s.jsx("div",{children:Fe.length>0?s.jsx("div",{className:"space-y-3",children:It.map((xe,Ue)=>s.jsx(Vw,{direction:xe,index:Ue+1,onSelect:ot,onSms:We,onWorkerAdjust:Dt,workStatusCounts:j[xe.id]},xe.id))}):s.jsxs("div",{className:"text-center py-10 sm:py-12 px-4 sm:px-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(zp,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2 whitespace-nowrap",children:"   "})]})}),C&&s.jsx(Cb,{isOpen:g,onClose:()=>{N(!1),v(null)},onConfirm:Rt,workOrder:C,userId:r==null?void 0:r.userId,showToast:i}),s.jsx(I5,{isOpen:R,onClose:()=>A(!1),smsData:M,userId:(r==null?void 0:r.userId)||""}),G&&s.jsx(O5,{isOpen:k,onClose:()=>{V(!1),W(null)},direction:G,onSuccess:Et,showToast:i,userInfo:r})]})]}),s.jsx(Ql,{value:"safety-check",className:"px-3 pt-1 overflow-y-auto",children:s.jsx(X3,{onBack:t,userInfo:r,showToast:i})}),s.jsx(Ql,{value:"work-result-signal",className:"px-3 pt-1 overflow-y-auto",children:s.jsx(J3,{onBack:t})}),s.jsx(Ql,{value:"signal-interlock",className:"mt-0 flex-1 data-[state=active]:flex flex-col overflow-hidden",children:s.jsx(M5,{onBack:t,userInfo:r,showToast:i})})]}),ee==="work-receipt"&&!je&&!re&&Fe.length>0&&s.jsx(L5,{onClick:()=>ce(!0),workCount:Fe.length}),ge&&s.jsx(ZE,{workOrders:Fe,onBack:()=>ce(!1),onSelectWork:xe=>{ce(!1),ot(xe)}})]})},EU=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),jU=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 00-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H4.5a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),IU=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),OU=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),MU=({onLogin:t})=>{const[e,n]=_.useState("A20117965"),[r,i]=_.useState("dlive12!@#$"),[l,c]=_.useState(!1),[d,u]=_.useState(!1),[f,m]=_.useState(null),[p,y]=_.useState(!1),g=async(v,R=!1)=>{if(v.preventDefault(),!(!e||!r)){u(!0),m(null),y(!1);try{const A=await yv(e,r,R?"Y":"N");if(console.log("[Login] API :",A),console.log("[Login] telNo2:",A.telNo2),A.LOGIN_DUP_YN==="Y"||A.code==="LOGIN_DUP"){y(!0),u(!1);return}A.ok?(localStorage.removeItem("demoMode"),t(A.userId,A.userName,A.userNameEn,A.userRole,A.crrId,A.soId,A.mstSoId,A.telNo2,A.AUTH_SO_List)):m(" .")}catch(A){A.message&&A.message.includes("401")?m("   ."):A.message&&A.message.includes("400")?m("   ."):m("   ."),console.error(" :",A)}finally{u(!1)}}},N=async()=>{u(!0),y(!1);try{const v=await yv(e,r,"Y");console.log("[Login]   :",v),v.ok?(localStorage.removeItem("demoMode"),t(v.userId,v.userName,v.userNameEn,v.userRole,v.crrId,v.soId,v.mstSoId,v.telNo2,v.AUTH_SO_List)):m(" .")}catch(v){m("   ."),console.error("  :",v)}finally{u(!1)}},C="w-full py-3 bg-white border border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition";return s.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 font-sans bg-gray-100",children:[s.jsxs("div",{className:"w-full max-w-sm mx-auto bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[s.jsx("div",{className:"text-center space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-4xl font-bold tracking-wider text-blue-600",children:"D'LIVE"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"CONA"})]})}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"sr-only",children:" ID"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:s.jsx(EU,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:`${C} pl-10 pr-3`,placeholder:" ID",value:e,onChange:v=>n(v.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:s.jsx(jU,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:l?"text":"password",required:!0,className:`${C} pl-10 pr-10`,placeholder:"",value:r,onChange:v=>i(v.target.value)}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3.5 flex items-center",children:s.jsx("button",{type:"button",onClick:()=>c(!l),className:"text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":l?" ":" ",children:l?s.jsx(OU,{className:"h-5 w-5"}):s.jsx(IU,{className:"h-5 w-5"})})})]})]}),f&&s.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-lg",children:f}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-3 px-4 border border-transparent text-base font-bold rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:d?" ...":""}),s.jsxs("button",{type:"button",onClick:()=>{localStorage.setItem("demoMode","true"),t("demo","demo","demo")},className:"w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors shadow-sm",children:[s.jsx(vw,{className:"w-4 h-4"}),"UI  "]})]})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("div",{className:"mb-3",children:s.jsx("p",{className:"text-sm font-medium tracking-wide text-blue-600",children:"Smart Life Coordinator"})}),s.jsx("p",{className:"text-xs font-semibold text-blue-600",children:"COPYRIGHT 2025. D'LIVE CO. LTD"})]})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"   "}),s.jsxs("p",{className:"text-sm text-gray-600",children:["     .",s.jsx("br",{}),"     ."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition",children:""}),s.jsx("button",{onClick:N,disabled:d,className:"flex-1 py-2.5 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:d?" ...":" "})]})]})})]})},LU=[{id:"work-management",title:" ",description:"   ",icon:s.jsx(xu,{className:"h-10 w-10 text-white"})},{id:"customer-management",title:" ",description:"    ",icon:s.jsx(s5,{className:"h-10 w-10 text-white"})},{id:"equipment-management",title:" ",description:" , ,  ",icon:s.jsx(Cf,{className:"h-10 w-10 text-white"})},{id:"other-management",title:" ",description:"     ",icon:s.jsx(fb,{className:"h-10 w-10 text-white"})}],YD=({onSelectMenu:t})=>{const e=n=>{switch(n){case"work-management":t("work-management");break;case"customer-management":t("customer-management");break;case"equipment-management":t("equipment-management");break;case"other-management":t("other-management");break;default:t("coming-soon")}};return s.jsx("div",{className:"px-4 pt-8",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:LU.map((n,r)=>s.jsxs("button",{onClick:()=>e(n.id),className:"group text-left p-6 bg-white rounded-xl shadow-lg hover:shadow-cyan-500/30 transition-all duration-300 transform hover:-translate-y-1 flex items-center space-x-6",style:{animationDelay:`${r*100}ms`},children:[s.jsx("div",{className:"bg-gradient-to-br from-cyan-400 to-cyan-500 rounded-lg p-4 group-hover:scale-110 transition-transform",children:n.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-cyan-500 transition-colors",children:n.title}),s.jsx("p",{className:"text-gray-500 mt-1",children:n.description})]})]},n.id))})})},mN=({tabs:t,activeTab:e,onTabChange:n,className:r=""})=>{const i=_.useRef(null),l=_.useRef([]);return s.jsx("div",{className:`
        bg-white border-b border-gray-200
        ${r}
      `,children:s.jsx("div",{ref:i,className:"w-full justify-start bg-white rounded-none h-auto py-2 px-3 overflow-x-auto border-none",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:s.jsx("div",{className:"flex",children:t.map((c,d)=>s.jsx("button",{ref:u=>l.current[d]=u,onClick:()=>n(c.id),className:`
                rounded-full px-4 py-2 text-sm font-medium flex-shrink-0 mx-1 transition-colors
                ${e===c.id?"bg-blue-500 text-white":"text-gray-600"}
              `,children:c.title},c.id))})})})},Wm=({onNavigateToMenu:t,title:e="  .",description:n="    .  !",category:r})=>{const[i,l]=_.useState(""),d=(()=>{switch(r){case"customer-management":return[{id:"customer-info",title:"",description:"    "},{id:"business-bot",title:"",description:"   "}];case"equipment-management":return[{id:"equipment-assignment",title:"/",description:"    "},{id:"equipment-status",title:"",description:"  "},{id:"equipment-movement",title:" ",description:"    "},{id:"equipment-recovery",title:"  ",description:"   "}];case"other-management":return[{id:"overtime-application",title:"",description:"  "},{id:"overtime-input",title:"",description:"   "},{id:"announcements",title:"",description:" "}];default:return[]}})(),u=d.length>0;Gi.useEffect(()=>{u&&!i&&l(d[0].id)},[u,i,d]);const f=m=>{l(m)};return s.jsxs("div",{className:"",children:[u&&s.jsx(mN,{tabs:d,activeTab:i,onTabChange:f}),s.jsxs("div",{className:"text-center p-10 bg-white rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:e}),s.jsx("p",{className:"text-gray-600 mb-8",children:n}),s.jsx("button",{onClick:t,className:"px-6 py-2 bg-cyan-500 text-white font-bold rounded-md hover:bg-cyan-600 transition-colors",children:"  "})]})]})},wU=({currentView:t,onNavigate:e,onSelectMenu:n})=>{const r=l=>{n(l),e==null||e(l)},i=[{id:"work-management",label:"",icon:zp},{id:"customer-management",label:"",icon:Ow},{id:"equipment-management",label:"",icon:nL},{id:"other-management",label:"",icon:ZT}];return s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex h-[52px]",children:i.map(l=>{const c=t===l.id,d=l.icon;return s.jsxs("button",{onClick:()=>r(l.id),className:"flex-1 flex flex-col items-center justify-center gap-0.5 px-2 py-1 transition-all duration-200 active:scale-95 touch-manipulation",children:[s.jsx(d,{className:`
                    transition-all duration-200
                    ${c?"h-5 w-5 text-blue-600":"h-5 w-5 text-gray-500"}
                  `,strokeWidth:c?2.5:2}),s.jsx("span",{className:`
                    text-[10px] transition-all duration-200
                    ${c?"text-blue-600 font-bold":"text-gray-500 font-medium"}
                  `,children:l.label})]},l.id)})})})})},Zo=({label:t,value:e,children:n})=>s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm font-medium text-gray-700 bg-blue-100 border-r border-gray-200 w-1/3",children:t}),s.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-900 w-2/3",children:n||e||"-"})]}),PU=t=>({1:"",2:"",3:"",4:"",7:"",9:""})[t||""]||t||"-",AU=t=>{if(!t)return new Date().toLocaleString("ko-KR");if(t.length>=8){const e=t.slice(0,4),n=t.slice(4,6),r=t.slice(6,8);if(t.length>=14){const i=t.slice(8,10),l=t.slice(10,12);return`${e}-${n}-${r} ${i}:${l}`}return`${e}-${n}-${r}`}return t},kU=({order:t,onBack:e})=>{var l,c,d,u;const n=localStorage.getItem("userInfo"),r=n?JSON.parse(n):{},i=r.userName||r.userId||"";return s.jsx("div",{className:"h-full overflow-y-auto max-w-4xl mx-auto p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"bg-blue-600 text-white px-3 py-2 text-sm sm:text-base font-semibold",children:[a3(t.WRK_CD)," [1.]"]}),s.jsxs("div",{className:"p-3 sm:p-4",children:[s.jsx("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:s.jsx("table",{className:"w-full",children:s.jsxs("tbody",{children:[s.jsx(Zo,{label:"",value:t.PROD_NM||t.productName||"-"}),s.jsx(Zo,{label:"",value:t.WRK_CD?`${t.WRK_CD} (${t.WRK_CD_NM||t.typeDisplay||""})`:"-"}),s.jsx(Zo,{label:"",value:((l=t.customer)==null?void 0:l.id)||t.CUST_ID||"-"}),s.jsx(Zo,{label:"",value:((c=t.customer)==null?void 0:c.name)||"-"}),s.jsx(Zo,{label:"",value:((d=t.customer)==null?void 0:d.phone)||"-"}),s.jsx(Zo,{label:"",value:t.CTRT_ID||"-"}),s.jsx(Zo,{label:"",value:t.installLocation||"-"}),s.jsx(Zo,{label:"CELL NO",value:t.cellNo||"-"}),s.jsx(Zo,{label:"",value:((u=t.customer)==null?void 0:u.address)||"-"}),s.jsx(Zo,{label:"",value:t.SO_NM||"-"})]})})}),s.jsxs("div",{className:"mt-4",children:[A0(t.WRK_CD)&&s.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-green-800 mb-2 flex items-center gap-1",children:[s.jsx(Vi,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-green-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    ( )"})]})]}),k0(t.WRK_CD)&&s.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-orange-800 mb-2 flex items-center gap-1",children:[s.jsx(xu,{size:16}),"A/S   "]}),s.jsxs("ul",{className:"text-xs text-orange-700 space-y-1",children:[s.jsx("li",{children:" /    "}),s.jsx("li",{children:" A/S      "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "})]})]}),(Fm(t.WRK_CD)||Km(t.WRK_CD))&&s.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-red-800 mb-2 flex items-center gap-1",children:[s.jsx(Cf,{size:16}),"/  "]}),s.jsxs("ul",{className:"text-xs text-red-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsxs("li",{children:[" ",Fm(t.WRK_CD)?"()    ":"  "]}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "})]})]}),ip(t.WRK_CD)&&s.jsxs("div",{className:"bg-purple-50 border border-purple-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-purple-800 mb-2 flex items-center gap-1",children:[s.jsx(uc,{size:16}),"  "]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"     ( )"}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),Km(t.WRK_CD)&&s.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[s.jsx(rd,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),x5(t.WRK_CD,t.WRK_DTL_TCD)&&s.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-orange-800 mb-2 flex items-center gap-1",children:[s.jsx(ew,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-orange-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    (:20)"}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"     "})]})]}),p5(t.WRK_CD,t.WRK_DTL_TCD)&&s.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[s.jsx(Vi,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    (:30/37)"}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),t.WRK_CD==="06"&&s.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3 mb-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "})]})]}),t.WRK_CD==="04"&&s.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3 mb-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsxs("li",{children:[" ",t.WRK_DTL_TCD==="0430"?" ":t.WRK_DTL_TCD==="0440"?" ":"  "]}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),t.WRK_CD==="09"&&s.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3 mb-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]})]}),t.MEMO&&s.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:" "}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 whitespace-pre-wrap",children:t.MEMO})]}),s.jsxs("div",{className:"mt-4 bg-green-50 border border-green-300 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-green-800 mb-2",children:" "}),s.jsxs("div",{className:"space-y-1 text-xs sm:text-sm text-green-700",children:[s.jsxs("div",{children:[": ",AU(t.WRKR_CMPL_DT||t.WRK_END_DTTM)]}),s.jsxs("div",{children:[": ",i]}),s.jsxs("div",{children:[" ID: ",t.id]}),t.WRK_CD&&s.jsxs("div",{children:[" : ",t.WRK_CD," (",t.WRK_CD_NM||t.typeDisplay,")"]}),t.CTRT_ID&&s.jsxs("div",{children:[" ID: ",t.CTRT_ID]}),s.jsxs("div",{children:[": ",PU(t.WRK_STAT_CD)]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:e,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors text-sm sm:text-base",children:""})})]})]})})},UU=({onNavigateToView:t,onNavigateToComingSoon:e,userInfo:n,showToast:r})=>{const{setSelectedWorkItem:i,setSelectedWorkDirection:l}=Yl(),[c,d]=_.useState(!1),[u,f]=_.useState(!1),[m,p]=_.useState(null),[y,g]=_.useState(!1),[N,C]=_.useState(null),{workFilters:v}=Yl(),{startDate:R,endDate:A}=v,M=new Date,L=M.toISOString().split("T")[0],{data:k=[],isLoading:V,error:G,refetch:W}=Uj({startDate:R,endDate:A}),j=k.filter(T=>T.scheduledAt?T.scheduledAt.split("T")[0]===L:!1),S=(G==null?void 0:G.message)||null,F=(T=>{const I=["","","","","","",""],U=T.getFullYear(),Q=T.getMonth()+1,H=T.getDate(),q=I[T.getDay()];return{full:`${U} ${Q} ${H} (${q})`,short:`${Q} ${H}`}})(M),ee={pending:j.filter(T=>T.status===hn.Pending),completed:j.filter(T=>T.status===hn.Completed),cancelled:j.filter(T=>T.status===hn.Cancelled)},J=T=>{l(T),t&&t("work-item-list")},$=(T,I)=>{T.stopPropagation(),I?window.location.href=`tel:${I}`:r&&r(" .","warning")},Y=(T,I)=>{T.stopPropagation(),C(I),g(!0)},K=(T,I)=>{T.stopPropagation();const U=H=>H?H.includes("T")||H.includes("-")?H.replace(/[-:T]/g,"").substring(0,12):H:"",Q={SO_ID:I.SO_ID||"328",CUST_ID:I.CUST_ID||I.customer.id||"",CUST_NM:I.customer.name||"",SMS_RCV_TEL:I.customer.phone||"",SMS_SEND_TEL:"",WRK_HOPE_DTTM:U(I.scheduledAt),WRKR_NM:(n==null?void 0:n.userName)||"",WRKR_NM_EN:(n==null?void 0:n.userNameEn)||(n==null?void 0:n.userName)||"",WRK_CD:I.WRK_CD||"",WRK_CD_NM:I.typeDisplay||"",WRK_DRCTN_ID:I.WRK_DRCTN_ID||I.id||"",RCPT_ID:I.RCPT_ID||""};p(Q),f(!0)},w=T=>{switch(T){case hn.Pending:return"bg-blue-100 text-blue-800 border-blue-300";case hn.Completed:return"bg-green-100 text-green-800 border-green-300";case hn.Cancelled:return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},se=(T,I)=>s.jsx("div",{onClick:()=>J(T),className:"bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 transition-all duration-200 cursor-pointer active:scale-[0.99] mb-3 touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[I!==void 0&&s.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center rounded-full bg-blue-500 text-white text-sm font-bold",children:I}),s.jsxs("h3",{className:"font-bold text-gray-900 text-base truncate",children:[T.customer.name,T.customer.id&&s.jsxs("span",{className:"text-gray-400 font-normal ml-1",children:["(",T.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),s.jsx(mb,{customer:T.customer})]}),s.jsx("div",{className:"flex items-center gap-1.5 flex-shrink-0 flex-wrap justify-end",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${w(T.status)}`,children:T.status})})]}),s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium bg-blue-50 text-blue-700 border border-blue-200",children:T.typeDisplay}),T.WRK_CD==="04"&&T.WRK_DTL_TCD==="0440"&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-cyan-50 text-cyan-700 border border-cyan-200",children:""})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:T.scheduledAt?new Date(T.scheduledAt).toLocaleString("ko-KR",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):" "})]})]}),s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsxs("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:T.customer.address||"  "})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("button",{onClick:U=>$(U,T.customer.phone),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),""]}),s.jsxs("button",{onClick:U=>K(U,T),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),""]}),s.jsxs("button",{onClick:U=>Y(U,T),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"whitespace-nowrap",children:""})]})]})]})},T.id),oe=(T,I,U,Q,H)=>I.length===0?null:s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:`flex items-center justify-between mb-3 px-4 py-2 rounded-lg ${U} shadow-sm`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[H,s.jsx("h3",{className:`font-bold text-base ${Q}`,children:T})]}),s.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full bg-white ${Q} font-bold text-sm shadow-sm`,children:I.length})]}),s.jsx("div",{className:"space-y-3",children:I.map((q,ae)=>se(q,ae+1))})]});return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-blue-600 text-white shadow-lg z-30",children:s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(_h,{className:"w-5 h-5"}),s.jsx("h1",{className:"text-xl font-bold",children:" "})]}),s.jsx("p",{className:"text-blue-100 text-sm",children:F.full})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold",children:j.length}),s.jsx("div",{className:"text-xs text-blue-100",children:" "})]})]})})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:V?s.jsx(z0,{size:"medium",message:"   ..."}):S?s.jsx(Db,{type:"error",message:S,onRetry:()=>window.location.reload()}):j.length===0?s.jsx("div",{className:"text-center py-16 px-6",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-8 mx-auto max-w-sm border border-gray-200",children:[s.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(_h,{className:"w-10 h-10 text-blue-600"})}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 whitespace-nowrap",children:"   "}),s.jsx("p",{className:"text-gray-500",children:"  !"})]})}):s.jsxs("div",{children:[oe("",ee.pending,"bg-blue-100","text-blue-700",s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center",children:s.jsx(pp,{className:"w-4 h-4 text-white"})})),oe("",ee.completed,"bg-green-100","text-green-700",s.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})),oe("",ee.cancelled,"bg-red-100","text-red-700",s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-600 flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}))]})}),!V&&!S&&j.length>0&&s.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-200 shadow-lg px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-around text-center max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ee.pending.length}),s.jsx("div",{className:"text-xs text-gray-600",children:""})]}),s.jsx("div",{className:"w-px h-10 bg-gray-300"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:ee.completed.length}),s.jsx("div",{className:"text-xs text-gray-600",children:""})]}),s.jsx("div",{className:"w-px h-10 bg-gray-300"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:ee.cancelled.length}),s.jsx("div",{className:"text-xs text-gray-600",children:""})]})]})}),!V&&!S&&j.length>0&&s.jsx(L5,{onClick:()=>d(!0),workCount:j.length}),c&&s.jsx(ZE,{workOrders:j,onBack:()=>d(!1),onSelectWork:T=>{d(!1),J(T)}}),s.jsx(I5,{isOpen:u,onClose:()=>f(!1),smsData:m,userId:(n==null?void 0:n.userId)||""}),N&&s.jsx(O5,{isOpen:y,onClose:()=>{g(!1),C(null)},direction:N,onSuccess:()=>{W()},showToast:r,userInfo:n})]})},WU=({workItem:t,onNext:e,onBack:n})=>{var oe,T,I,U,Q;const[r,i]=_.useState(null),[l,c]=_.useState(!1),[d,u]=_.useState(null),[f,m]=_.useState(null),[p,y]=_.useState(!1),[g,N]=_.useState([]),C=t.WRK_CD==="05",v=t.WRK_CD==="07",R=t.WRK_CD==="08",A=v||R,[M,L]=_.useState(null),[k,V]=_.useState(!1),[G,W]=_.useState(null);_.useEffect(()=>{(async()=>{const q=C&&t.DTL_CTRT_ID?t.DTL_CTRT_ID:t.CTRT_ID;if(!q){console.log("[ContractInfo] CTRT_ID  - getCtrtDetailInfo ");return}c(!0),u(null);try{console.log("[ContractInfo] getCtrtDetailInfo  :",{CTRT_ID:q,CUST_ID:t.CUST_ID,isProductChange:C,DTL_CTRT_ID:t.DTL_CTRT_ID});const ae=await u5(q,t.CUST_ID);if(ae&&(console.log("[ContractInfo] getCtrtDetailInfo :",ae),i({PROM_CNT:ae.PROM_CNT,CTRT_APLY_STRT_DT:ae.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:ae.CTRT_APLY_END_DT,GRP_ID:ae.GRP_ID,GRP_NM:ae.GRP_NM,IP_CNT:ae.IP_CNT,SO_NM:ae.SO_NM,BASIC_PROD_CD_NM:ae.BASIC_PROD_CD_NM})),C&&t.CUST_ID){console.log("[ContractInfo]  - getFullContractInfo  ");const fe=await l5({CUST_ID:t.CUST_ID,CTRT_ID:t.CTRT_ID});console.log("[ContractInfo] getFullContractInfo :",fe),N(fe.contracts||[])}}catch(ae){console.error("[ContractInfo]    :",ae),u(ae.message||"   .")}finally{c(!1)}})()},[C,t.CUST_ID,t.CTRT_ID,t.DTL_CTRT_ID]),_.useEffect(()=>{(async()=>{if(!t.CUST_ID){console.log("[ContractInfo] CUST_ID  -    ");return}y(!0);try{console.log("[ContractInfo]    :",{CUST_ID:t.CUST_ID,WRK_DRCTN_ID:t.WRK_DRCTN_ID});const q=await O4(t.CUST_ID,t.WRK_DRCTN_ID);console.log("[ContractInfo]    :",q),m(q)}catch(q){console.error("[ContractInfo]    :",q)}finally{y(!1)}})()},[t.CUST_ID,t.WRK_DRCTN_ID]),_.useEffect(()=>{(async()=>{if(t.WRK_DRCTN_ID)try{const q=await h5(t.WRK_DRCTN_ID);q&&(console.log("[ContractInfo] getAfterProcInfo :",q),W(q))}catch(q){console.error("[ContractInfo] getAfterProcInfo :",q)}})()},[t.WRK_DRCTN_ID]),_.useEffect(()=>{(async()=>{const q=t.WRK_ID||t.id;if(!A||!q){console.log("[ContractInfo]     (WRK_CD:",t.WRK_CD,", WRK_ID:",q,")");return}V(!0);try{console.log("[ContractInfo]    :",{WRK_CD:t.WRK_CD,WRK_ID:q,RCPT_ID:t.RCPT_ID});const ae=await pg({WRK_CD:t.WRK_CD||"",WRK_ID:q,RCPT_ID:t.RCPT_ID});console.log("[ContractInfo]    :",ae),L(ae)}catch(ae){console.error("[ContractInfo]    :",ae)}finally{V(!1)}})()},[A,t.WRK_CD,t.WRK_ID,t.id,t.RCPT_ID]);const[j,S]=_.useState([]),[P,F]=_.useState(null),[ee,J]=_.useState(!1),[$,Y]=_.useState(null),[K,w]=_.useState(!1);_.useEffect(()=>{var q,ae,fe;if(console.log("[ContractInfo] VIP :",{"customer.isVip":(q=t.customer)==null?void 0:q.isVip,VIP_GB:t.VIP_GB,customer:t.customer}),((ae=t.customer)==null?void 0:ae.isVip)||t.VIP_GB&&String(t.VIP_GB).length>0){const ge=((fe=t.customer)==null?void 0:fe.vipLevel)||(t.VIP_GB==="VIP_VVIP"?"VVIP":"VIP");F({label:"VIP",value:`${ge} .`})}else F(null)},[(oe=t.customer)==null?void 0:oe.isVip,(T=t.customer)==null?void 0:T.vipLevel,t.VIP_GB]),_.useEffect(()=>{(async()=>{var ae;if(!(((ae=t.customer)==null?void 0:ae.isVip)||t.VIP_GB&&String(t.VIP_GB).length>0)){Y(null);return}w(!0);try{console.log("[ContractInfo] VIP  DB  ");const fe=await Xm({COMMON_GRP:"MOWO001",COMMON_CD:"AL1"});console.log("[ContractInfo] VIP  DB  :",fe),fe&&fe.length>0&&fe[0].REF_CODE?Y(fe[0].REF_CODE):Y(null)}catch(fe){console.error("[ContractInfo] VIP  DB  :",fe),Y(null)}finally{w(!1)}})()},[(I=t.customer)==null?void 0:I.isVip,t.VIP_GB]),_.useEffect(()=>{var fe,ge,ce,Re,X;const H=[],q=t.WRK_CD||((fe=f==null?void 0:f.workAlarm)==null?void 0:fe.WRK_CD);if(p||!f){S([]);return}G&&(G.CLOSE_DANGER==="Y"?H.push({label:"",value:" "}):H.push({label:"",value:"  "})),f.workAlarm&&(f.workAlarm.OTT_SALE_DESC&&H.push({label:"OTT",value:f.workAlarm.OTT_SALE_DESC}),f.workAlarm.BUNDLE_ISP_TG==="Y"&&H.push({label:"",value:" "}),["01","05","07"].includes(q||"")&&f.workAlarm.PYM_MTHD==="01"&&f.workAlarm.ATMT_YN==="Y"&&H.push({label:"",value:"/Email"}),["01","05","06","07"].includes(q||"")&&f.workAlarm.RLNM_AUTH_YN_NM&&H.push({label:"",value:f.workAlarm.RLNM_AUTH_YN_NM}),f.workAlarm.COUPON_VAL&&f.workAlarm.COUPON_VAL!=="0"&&Number(f.workAlarm.COUPON_VAL)>0&&H.push({label:"VOD",value:` ${Number(f.workAlarm.COUPON_VAL).toLocaleString()}`}));const ae=((ge=f.vodLastDate)==null?void 0:ge.max_dt)||((ce=f.vodLastDate)==null?void 0:ce.MAX_DT);if(ae&&String(ae).trim().length>7&&H.push({label:"VOD",value:`(6M)VOD: ${FU(String(ae))}`}),(Re=f.specialVod5k)!=null&&Re.BIGO&&H.push({label:"",value:f.specialVod5k.BIGO}),(X=f.custBasicInfo)!=null&&X.SMS_RCV_YN){const me=String(f.custBasicInfo.SMS_RCV_YN);me==="Y"?H.push({label:"",value:""}):me==="N"&&H.push({label:"",value:""})}if(f.specialBigo&&f.specialBigo.length>0){const me=f.specialBigo.find(he=>he.SPECIAL_GB==="G"&&he.BIGO);me&&H.push({label:"",value:me.BIGO||""})}H.length>0&&console.log("[ContractInfo]  :",H),S(H)},[f,p,t.WRK_CD,G]);const se={PROM_CNT:(r==null?void 0:r.PROM_CNT)||t.PROM_CNT,CTRT_APLY_STRT_DT:(r==null?void 0:r.CTRT_APLY_STRT_DT)||t.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:(r==null?void 0:r.CTRT_APLY_END_DT)||t.CTRT_APLY_END_DT,GRP_ID:(r==null?void 0:r.GRP_ID)||t.GRP_ID,GRP_NM:(r==null?void 0:r.GRP_NM)||t.GRP_NM,IP_CNT:(r==null?void 0:r.IP_CNT)||t.IP_CNT,SO_NM:(r==null?void 0:r.SO_NM)||t.SO_NM,MSO_NM:t.MSO_NM};return s.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-6 pb-4 space-y-3 sm:space-y-4 overflow-x-hidden",children:[l&&s.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"animate-spin w-4 h-4 sm:w-5 sm:h-5 border-2 border-blue-500 border-t-transparent rounded-full flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm text-blue-700",children:"    ..."})]})}),d&&!l&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-100 rounded-xl p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-xs sm:text-sm text-yellow-700",children:d})]})}),!l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:" "}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:[t.customer.name,t.customer.id&&s.jsxs("span",{className:"text-gray-400 font-normal ml-1",children:["(",t.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),t.customer.isVip&&s.jsx("span",{className:`
                  px-1.5 sm:px-2 py-0.5 rounded-full text-[0.625rem] sm:text-xs font-semibold flex-shrink-0
                  ${t.customer.vipLevel==="VVIP"?"bg-purple-100 text-purple-700":"bg-yellow-100 text-yellow-700"}
                `,children:t.customer.vipLevel})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.customer.phone||"-"})]}),s.jsxs("div",{className:"flex items-start pt-1 border-t border-gray-100",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 leading-relaxed flex-1 break-words",children:t.customer.address})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-all",children:Qi(t.PYM_ACNT_ID)||"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.PYM_MTHD||"-"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:se.PROM_CNT?`${se.PROM_CNT}`:"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:se.CTRT_APLY_STRT_DT?VD(se.CTRT_APLY_STRT_DT):"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:se.CTRT_APLY_END_DT?VD(se.CTRT_APLY_END_DT):"-"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:se.GRP_ID||"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words",children:se.GRP_NM||"-"})]})]})]}),P&&s.jsxs("div",{className:"bg-amber-50 border border-amber-300 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>J(!ee),className:"w-full flex items-center justify-between px-3 py-2 hover:bg-amber-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs sm:text-sm font-bold text-amber-600 w-20 sm:w-24 flex-shrink-0",children:"VIP"}),s.jsx("span",{className:"text-xs sm:text-sm font-bold text-amber-700",children:P.value})]}),s.jsx("svg",{className:`w-4 h-4 text-amber-600 transition-transform duration-200 ${ee?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ee&&s.jsx("div",{className:"px-3 py-3 border-t border-amber-200 bg-amber-50",children:s.jsx("div",{className:"text-xs sm:text-sm text-amber-800",children:K?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-amber-500 border-t-transparent rounded-full"}),s.jsx("span",{children:"VIP   ..."})]}):$?s.jsx("p",{className:"whitespace-pre-wrap",children:$}):s.jsx("p",{className:"text-amber-600",children:"VIP .   ."})})})]}),j.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsx("div",{className:"space-y-2 sm:space-y-3",children:j.map((H,q)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:H.label}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words flex-1",children:H.value})]},q))})]}),C?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 pb-2 border-b border-gray-200",children:" "}),s.jsx("div",{className:"space-y-2",children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words",children:t.OLD_PROD_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:"ID"}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700",children:Qi(t.OLD_CTRT_ID||t.CTRT_ID)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700",children:t.OLD_CTRT_STAT_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700",children:t.OLD_PROM_CNT?`${t.OLD_PROM_CNT}`:"-"})]})]})})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[s.jsx("div",{className:"text-xs font-semibold text-blue-600 mb-2 pb-2 border-b border-blue-200",children:" "}),s.jsx("div",{className:"space-y-2",children:(()=>{const H=g.find(ae=>ae.CTRT_ID===t.DTL_CTRT_ID),q=(r==null?void 0:r.BASIC_PROD_CD_NM)||(H==null?void 0:H.BASIC_PROD_CD_NM);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-700 break-words",children:q||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:"ID"}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600",children:Qi(t.DTL_CTRT_ID||(H==null?void 0:H.CTRT_ID))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600",children:(H==null?void 0:H.CTRT_STAT_NM)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600",children:H!=null&&H.PROM_CNT?`${H.PROM_CNT}`:"-"})]})]})})()})]})]})]}):A?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),k?s.jsxs("div",{className:"flex items-center justify-center gap-2 py-4",children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"   ..."})]}):s.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:`rounded-lg p-3 ${R?"bg-blue-50 border border-blue-200":"bg-gray-50"}`,children:[s.jsx("div",{className:`text-xs font-semibold mb-2 pb-2 border-b ${R?"text-blue-600 border-blue-200":"text-gray-500 border-gray-200"}`,children:""}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${R?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${R?"text-blue-700":"text-gray-900"}`,children:R?(r==null?void 0:r.BASIC_PROD_CD_NM)||"-":(M==null?void 0:M.PROD_NM)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${R?"text-blue-400":"text-gray-400"}`,children:"ID"}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${R?"text-blue-600":"text-gray-700"}`,children:Qi(R?t.CTRT_ID:(M==null?void 0:M.OLD_CTRT_ID)||(M==null?void 0:M.CTRT_ID))})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${R?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${R?"text-blue-600":"text-gray-700"}`,children:R?((U=t.customer)==null?void 0:U.address)||"-":(M==null?void 0:M.ADDR_ORD)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${R?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${R?"text-blue-600":"text-gray-700"}`,children:R?t.WRK_STAT_NM||"-":(M==null?void 0:M.WRK_STAT_NM)||"-"})]})]})]}),s.jsxs("div",{className:`rounded-lg p-3 ${v?"bg-blue-50 border border-blue-200":"bg-gray-50"}`,children:[s.jsx("div",{className:`text-xs font-semibold mb-2 pb-2 border-b ${v?"text-blue-600 border-blue-200":"text-gray-500 border-gray-200"}`,children:""}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${v?"text-blue-700":"text-gray-900"}`,children:v?(r==null?void 0:r.BASIC_PROD_CD_NM)||"-":(M==null?void 0:M.PROD_NM)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:"ID"}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${v?"text-blue-600":"text-gray-700"}`,children:Qi(v?t.CTRT_ID:M==null?void 0:M.CTRT_ID)})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${v?"text-blue-600":"text-gray-700"}`,children:v?((Q=t.customer)==null?void 0:Q.address)||"-":(M==null?void 0:M.ADDR_ORD)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${v?"text-blue-600":"text-gray-700"}`,children:v?t.WRK_STAT_NM||"-":(M==null?void 0:M.WRK_STAT_NM)||"-"})]})]})]})]})]}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:"ID"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:Qi(t.CTRT_ID)})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.CTRT_STAT_NM||BU(t.CTRT_STAT)})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words flex-1",children:(r==null?void 0:r.BASIC_PROD_CD_NM)||t.productName||"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:"IP"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:se.IP_CNT||"-"})]})]})]})]})]})},BU=t=>({10:"",20:"",30:"",37:"()",90:""})[t||""]||"  ",VD=t=>{if(!t)return"-";const e=String(t),n=e.replace(/\D/g,"");return n.length>=8?`${n.slice(0,4)}-${n.slice(4,6)}-${n.slice(6,8)}`:e||"-"},FU=t=>!t||t.length<8?"-":`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`,KU=({workItem:t,onNext:e,onBack:n,showToast:r})=>{var G,W,j;const[i,l]=_.useState(!1),[c,d]=_.useState([]),[u,f]=_.useState(!1),[m,p]=_.useState(!1),[y,g]=_.useState(!1),[N,C]=_.useState([]),[v,R]=_.useState(!1),[A,M]=_.useState(!1);_.useEffect(()=>{(async()=>{var P;if((P=t.customer)!=null&&P.id&&!m){f(!0);try{const F=await R4(t.customer.id);d(F),p(!0)}catch(F){console.error("  :",F),d([]),p(!0)}finally{f(!1)}}})()},[(G=t.customer)==null?void 0:G.id]),_.useEffect(()=>{(async()=>{var P;if((P=t.customer)!=null&&P.id&&!A){R(!0);try{const F=await T4(t.customer.id);C(F),M(!0)}catch(F){console.error("  :",F),C([]),M(!0)}finally{R(!1)}}})()},[(W=t.customer)==null?void 0:W.id]);const L=()=>{l(!i)},k=()=>{g(!y)},V=()=>{r&&r("   .","info")};return s.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-6 pb-3 sm:pb-4 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:"  "}),s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:"ID"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:Qi(t.RCPT_ID)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:"ID"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:Qi(t.id)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-blue-600 whitespace-nowrap",children:t.typeDisplay})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:GU(t.WRK_STAT_CD)})]}),s.jsxs("div",{className:"flex items-center justify-between pt-1.5 sm:pt-2 mt-1.5 sm:mt-2 border-t border-gray-100",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-blue-600 whitespace-nowrap",children:YU(t.scheduledAt)})]})]})]}),QU(t),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2.5 sm:mb-3",children:"  "}),s.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg text-xs sm:text-sm text-gray-700 leading-relaxed min-h-20 whitespace-pre-line",children:(j=t.details)==null?void 0:j.replace(/  /g,`
`)})]}),t.installLocation&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2.5 sm:mb-3",children:" "}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gray-50 rounded-lg",children:[s.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.installLocation})]})]}),t.cellNo&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2.5 sm:mb-3",children:" "}),s.jsxs("div",{className:"flex items-center justify-between gap-2 p-2.5 sm:p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:t.cellNo}),s.jsxs("button",{className:"min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 bg-green-500 hover:bg-green-600 text-white text-xs sm:text-sm font-medium rounded-lg transition-colors flex items-center gap-1.5 sm:gap-2 whitespace-nowrap flex-shrink-0",children:[s.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})," "]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("button",{onClick:L,className:"w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:""}),u?s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-gray-100 text-gray-500 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:"..."}):m&&s.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 bg-blue-100 text-blue-700 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:[c.length,""]})]}),s.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 transition-transform flex-shrink-0 ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&s.jsx("div",{className:"border-t border-gray-100 p-3 sm:p-5",children:u?s.jsxs("div",{className:"flex items-center justify-center py-6 sm:py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2 sm:ml-3 text-xs sm:text-sm text-gray-500",children:" ..."})]}):c.length===0?s.jsx("div",{className:"text-center py-6 sm:py-8 text-gray-500 text-xs sm:text-sm",children:" 7  ."}):s.jsx("div",{className:"space-y-2.5 sm:space-y-3 max-h-64 sm:max-h-80 overflow-y-auto",children:c.map((S,P)=>s.jsxs("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5 sm:mb-2 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[s.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-medium rounded whitespace-nowrap ${S.MSG_TYP==="KKO"?"bg-yellow-100 text-yellow-700":S.MSG_TYP==="LMS"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:S.MSG_TYP||"SMS"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:S.EML_SMS_SND_TP_NM||"-"})]}),s.jsx("span",{className:`text-[0.625rem] sm:text-xs font-medium whitespace-nowrap ${S.RESULT===""?"text-green-600":S.RESULT===""?"text-red-600":"text-gray-500"}`,children:S.RESULT||"-"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs text-gray-500 mb-1.5 sm:mb-2",children:[s.jsxs("div",{className:"truncate",children:[": ",S.CELL_PHN||"-"]}),s.jsxs("div",{className:"truncate",children:[": ",S.SMS_RCV_NO||"-"]}),S.SEND_TIME&&s.jsxs("div",{className:"col-span-2",children:[": ",S.SEND_TIME]}),S.REG_NM&&s.jsxs("div",{className:"col-span-2",children:[": ",S.REG_NM]})]}),S.MESSAGE&&s.jsx("div",{className:"mt-1.5 sm:mt-2 p-2 bg-white rounded border border-gray-200 text-xs sm:text-sm text-gray-700 whitespace-pre-wrap",children:S.MESSAGE})]},P))})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsxs("button",{onClick:V,className:"w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:""})]}),s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("button",{onClick:k,className:"w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:""}),v?s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-gray-100 text-gray-500 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:"..."}):A&&s.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 bg-green-100 text-green-700 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:[N.length,""]})]}),s.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 transition-transform flex-shrink-0 ${y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&s.jsx("div",{className:"border-t border-gray-100 p-3 sm:p-5",children:v?s.jsxs("div",{className:"flex items-center justify-center py-6 sm:py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-green-500"}),s.jsx("span",{className:"ml-2 sm:ml-3 text-xs sm:text-sm text-gray-500",children:" ..."})]}):N.length===0?s.jsx("div",{className:"text-center py-6 sm:py-8 text-gray-500 text-xs sm:text-sm",children:" ."}):s.jsx("div",{className:"space-y-2.5 sm:space-y-3 max-h-64 sm:max-h-80 overflow-y-auto",children:N.map((S,P)=>s.jsxs("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5 sm:mb-2 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-medium rounded whitespace-nowrap bg-green-100 text-green-700",children:S.RCPT_TP_NM||""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:S.CNSL_MST_CL_NM||"-"})]}),s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500 whitespace-nowrap",children:S.START_DD||"-"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs text-gray-500 mb-1.5 sm:mb-2",children:[S.CNSL_MID_CL_NM&&s.jsxs("div",{className:"truncate",children:[": ",S.CNSL_MID_CL_NM]}),S.CNSL_SLV_CL_NM&&s.jsxs("div",{className:"truncate",children:[": ",S.CNSL_SLV_CL_NM]}),S.CNSL_RSLT_NM&&s.jsxs("div",{className:"truncate",children:[": ",S.CNSL_RSLT_NM]}),S.RCPT_PSN_NM&&s.jsxs("div",{className:"truncate",children:[": ",S.RCPT_PSN_NM]})]}),S.REQ_CTX&&s.jsxs("div",{className:"mt-1.5 sm:mt-2 p-2 bg-white rounded border border-gray-200 text-xs sm:text-sm text-gray-700",children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"whitespace-pre-wrap",children:S.REQ_CTX})]}),S.PROC_CT&&s.jsxs("div",{className:"mt-1.5 sm:mt-2 p-2 bg-blue-50 rounded border border-blue-100 text-xs sm:text-sm text-gray-700",children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-600 mb-1",children:""}),s.jsx("div",{className:"whitespace-pre-wrap",children:S.PROC_CT})]})]},P))})})]})]})},QU=t=>{const e=t.WRK_CD;return e==="0410"||e==="06"?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[s.jsx("h4",{className:"text-base font-bold text-gray-900 mb-4",children:"  "}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.mmtSusCd&&s.jsxs("div",{className:"space-y-1 col-span-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"  "}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.mmtSusCd})]}),t.susHopeDd&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:" "}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:$D(t.susHopeDd)})]}),t.mmtSusHopeDd&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:" "}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:$D(t.mmtSusHopeDd)})]}),t.termDays&&s.jsxs("div",{className:"space-y-1 col-span-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"  "}),s.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[t.termDays,""]})]})]})]}):null},GU=t=>({1:"",2:"",3:"",4:"",7:"",9:""})[t||""]||"  ",YU=t=>{try{const e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return`${n}-${r}-${i} ${l}:${c}`}catch{return t}},$D=t=>t&&t.length===8?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t,Ah=({isOpen:t,onClose:e,prodCd:n,ctrtId:r,prodGrp:i,prodNm:l,wrkCdNm:c,onSave:d,showToast:u,customerEquipmentCount:f=0,installedEquipmentCount:m=0})=>{const[p,y]=_.useState([]),[g,N]=_.useState([]),[C,v]=_.useState({}),[R,A]=_.useState([]),[M,L]=_.useState([]),[k,V]=_.useState([]),[G,W]=_.useState([]),[j,S]=_.useState(""),[P,F]=_.useState([]),[ee,J]=_.useState(!1),[$,Y]=_.useState(!1),[K,w]=_.useState(""),[se,oe]=_.useState("1");_.useEffect(()=>{t&&T()},[t,n,r]);const T=async()=>{J(!0);try{console.log("[Modal]     "),console.log("  PROD_CD:",n),console.log("  CTRT_ID:",r);const ie=await x4(n,r);console.log("[Modal]   :",ie);const te=await p4("LENT,EQT_USE_STAT,ITLLMT_PRD");console.log("[Modal]  :",te);let je=[],be=[],Te=[];const re=ot=>Array.isArray(ot)?ot.map(We=>{if(typeof We=="string"||typeof We=="number"){const rt=String(We);return{COMMON_CD:rt,COMMON_CD_NM:rt}}const Dt=(We==null?void 0:We.COMMON_CD)??(We==null?void 0:We.CODE)??(We==null?void 0:We.CD)??(We==null?void 0:We.value)??(We==null?void 0:We.COMMONCODE)??(We==null?void 0:We.code),Et=(We==null?void 0:We.COMMON_CD_NM)??(We==null?void 0:We.CD_NM)??(We==null?void 0:We.NAME)??(We==null?void 0:We.label)??(We==null?void 0:We.text)??(We==null?void 0:We.COMMONCDNM)??(We==null?void 0:We.name),Rt=(We==null?void 0:We.REF_CODE)??(We==null?void 0:We.REF)??(We==null?void 0:We.refCode)??(We==null?void 0:We.ref),$e=(We==null?void 0:We.COMMON_GRP)??(We==null?void 0:We.GROUP)??(We==null?void 0:We.group),gt=(We==null?void 0:We.SORT_NO)??(We==null?void 0:We.SORT)??(We==null?void 0:We.order)??void 0,Fe=(We==null?void 0:We.DEFAULT_YN)??(We==null?void 0:We.DEFAULT)??(We==null?void 0:We.default)??void 0;return{COMMON_CD:typeof Dt=="string"?Dt:Dt!=null?String(Dt):"",COMMON_CD_NM:typeof Et=="string"?Et:Et!=null?String(Et):"",REF_CODE:typeof Rt=="string"?Rt:Rt!=null?String(Rt):void 0,COMMON_GRP:$e!=null?String($e):void 0,SORT_NO:typeof gt=="number"?gt:gt!=null?Number(gt):void 0,DEFAULT_YN:Fe!=null?String(Fe):void 0}}).filter(We=>We.COMMON_CD):[];if(te&&!Array.isArray(te)&&typeof te=="object"){const ot=(Array.isArray(te.LENT)?te.LENT:void 0)??(Array.isArray(te.CMCU027)?te.CMCU027:[]),We=(Array.isArray(te.EQT_USE_STAT)?te.EQT_USE_STAT:void 0)??(Array.isArray(te.CMEP314)?te.CMEP314:[]),Dt=(Array.isArray(te.ITLLMT_PRD)?te.ITLLMT_PRD:void 0)??(Array.isArray(te.CMCU064)?te.CMCU064:[]),Et=(Fe,rt)=>Array.isArray(Fe)?Fe.length>0&&!("COMMON_GRP_NM"in(Fe[0]||{})||"GROUP_NM"in(Fe[0]||{}))?Fe:Fe.filter(at=>{const It=String((at==null?void 0:at.COMMON_GRP_NM)||(at==null?void 0:at.GROUP_NM)||"");return rt.some(ht=>It.indexOf(ht)>=0)}):[],Rt=Et(ot,[""]),$e=Et(We,["",""]),gt=Et(Dt,["","",""]);je=re(Rt.length?Rt:ot),be=re($e.length?$e:We),Te=re(gt.length?gt:Dt)}else{let ot=[];Array.isArray(te)?ot=re(te):te!=null&&te.codes&&Array.isArray(te.codes)&&(ot=re(te.codes)),ot.length>0&&(je=ot.filter(We=>We.COMMON_GRP==="LENT"||We.COMMON_GRP==="CMCU027"),be=ot.filter(We=>We.COMMON_GRP==="EQT_USE_STAT"||We.COMMON_GRP==="CMEP314"),Te=ot.filter(We=>We.COMMON_GRP==="ITLLMT_PRD"||We.COMMON_GRP==="CMCU064"))}console.log("   :",(je==null?void 0:je.length)||0,""),console.log("   :",(be==null?void 0:be.length)||0,""),console.log("   :",(Te==null?void 0:Te.length)||0,""),A(je||[]),L(be||[]),V(Te||[]);try{const We=(await Xm({COMMON_GRP:"LGCT001"})).map(Dt=>Dt.COMMON_CD).filter(Boolean);F(We),console.log("  LG   (LGCT001):",We.length,"")}catch(ot){console.warn("  LGCT001  , AP  :",ot),F([])}const pe=ie.output2||[];console.log("   :",pe.length),console.log("    ( ):",pe[0]);const Se=i==="V"?"09":"10",st=pe.filter(ot=>(!ot.SEL||ot.SEL==="0")&&ot.EQT===Se);N(st),console.log("    :",st.length,"(PROD_GRP:",i,",  EQT:",Se,")");const Nt=pe.map((ot,We)=>(console.log(`  [${We}]:`,{EQT:ot.EQT,PROD_TYP:ot.PROD_TYP,EQUIP_SEQ:ot.EQUIP_SEQ,SVC_CMPS_ID:ot.SVC_CMPS_ID,SEL:ot.SEL}),{...ot,SEL:ot.SEL||"0",LENT:ot.LENT||"10",EQT_USE_STAT_CD:ot.EQT_USE_STAT_CD||"1",ITLLMT_PRD:ot.ITLLMT_PRD||"00",PROD_TYP:ot.PROD_TYP||"2",EQUIP_SEQ:ot.EQUIP_SEQ||ot.SVC_CMPS_ID||String(We+1)}));if(y(Nt),ie.output1&&ie.output1.length>0){const ot=ie.output1[0];console.log("[Modal]   :",ot);const We=ot.ITEM_MID_CDS||"",Dt=ot.EQT_CLS||"",Et=(ot.LENTS||"").replace(/\[|\]/g,""),Rt=ot.EQT_USE_STATS||"",$e=ot.ITLLMT_PRDS||"",gt=ot.EQT_SALE_AMTS||"",Fe=ot.PROD_CMPS_CLS||"",rt=ot.PROD_GRPS||"",at=ot.PROD_CDS||"",It=ot.SVC_CDS||"";console.log("[Modal] PROD_CMPS_CLS :",Fe,"(:",Fe.length,")");const ht=Math.floor(We.length/10),Je=[...Nt],Ge=(_e=>{const xe=[];let Ue=0;for(;Ue<_e.length;){const Pe=_e.charAt(Ue);Ue++;let Ye="";for(;Ue<_e.length&&/\d/.test(_e.charAt(Ue))&&(Ye+=_e.charAt(Ue),Ue++,!(Ye.length>=2)););(Pe||Ye)&&xe.push({prodTyp:Pe,equipSeq:Ye})}return xe})(Fe);console.log("[Modal] PROD_CMPS_CLS :",Ge);for(let _e=0;_e<ht;_e++){const xe=We.substr(_e*10,10).trim(),Ue=Dt.substr(_e*10,10).trim(),Pe=Et.substr(_e*2,2).trim(),Ye=Rt.substr(_e*1,1).trim(),mt=$e.substr(_e*2,2).trim(),de=gt.substr(_e*10,10).trim(),tt=rt.charAt(_e)||"D",De=at.substr(_e*10,10).trim(),it=It.substr(_e*10,10).trim(),St=Ge[_e]||{prodTyp:"2",equipSeq:String(_e+1)},Lt=Je.findIndex(Ve=>Ve.SEL!=="1"&&Ve.EQT===xe);Lt>-1&&(Je[Lt]={...Je[Lt],SEL:"1",EQT_CL:Ue,LENT:Pe||"10",EQT_USE_STAT_CD:Ye||"1",ITLLMT_PRD:mt||"00",EQT_SALE_AMT:parseInt(de)||0,PROD_TYP:Je[Lt].PROD_TYP,EQUIP_SEQ:Je[Lt].EQUIP_SEQ,PROD_GRP:tt||Je[Lt].PROD_GRP,PROD_CD:De||Je[Lt].PROD_CD,SVC_CD:it||Je[Lt].SVC_CD},console.log(`  [${Lt}]  (output2   ):`,{EQT:Je[Lt].EQT,PROD_TYP:Je[Lt].PROD_TYP,EQUIP_SEQ:Je[Lt].EQUIP_SEQ,SEL:"1"}))}console.log("[Modal]   :",Je.filter(_e=>_e.SEL==="1")),y(Je)}W(ie.output3||[]);const lt=await g4(n,r),At={};lt.forEach(ot=>{At[ot.EQT_CD]||(At[ot.EQT_CD]=[]),At[ot.EQT_CD].some(We=>We.EQT_CL_CD===ot.EQT_CL_CD)||At[ot.EQT_CD].push({EQT_CL_CD:ot.EQT_CL_CD,EQT_CL_NM:ot.EQT_CL_NM,SUB_EQT_1:ot.SUB_EQT_1,SUB_EQT_2:ot.SUB_EQT_2,SUB_EQT_3:ot.SUB_EQT_3,DEL_EQT_1:ot.DEL_EQT_1,DEL_EQT_2:ot.DEL_EQT_2,DEL_EQT_3:ot.DEL_EQT_3})}),pe.forEach(ot=>{const We=ot.EQT_CD||ot.EQT;if(!We)return;At[We]||(At[We]=[]),!At[We].some(Et=>Et.EQT_CL_CD===ot.EQT_CL)&&ot.EQT_CL&&ot.EQT_CL_NM&&At[We].push({EQT_CL_CD:ot.EQT_CL,EQT_CL_NM:ot.EQT_CL_NM,SUB_EQT_1:ot.SUB_EQT_1,SUB_EQT_2:ot.SUB_EQT_2,SUB_EQT_3:ot.SUB_EQT_3,DEL_EQT_1:ot.DEL_EQT_1,DEL_EQT_2:ot.DEL_EQT_2,DEL_EQT_3:ot.DEL_EQT_3})}),v(At),console.log("   (API ):",At),console.log("[Modal]   ")}catch(ie){console.error("[Modal]   :",ie),u==null||u("   .","error",!0)}finally{J(!1)}},I=ie=>{const te=[...p],je=te[ie],be=je.SEL,Te=be==="1"?"0":"1";te[ie].SEL=Te,console.log(`[Modal]  : [${ie}] ${je.EQT} - SEL: ${be}  ${Te}`);const re=[];if(je.EQT_CL){const Se=(C[je.EQT_CD]||[]).find(st=>st.EQT_CL_CD===je.EQT_CL);Se&&(Se.SUB_EQT_1&&re.push(Se.SUB_EQT_1),Se.SUB_EQT_2&&re.push(Se.SUB_EQT_2),Se.SUB_EQT_3&&re.push(Se.SUB_EQT_3))}if(Te==="0"&&re.length>0){let pe=0;te.forEach((Se,st)=>{if(st!==ie){const Nt=U(Se.EQT);re.includes(Nt)&&Se.SEL==="1"&&(Se.SEL="0",pe++,console.log(`[Modal]   - SUB_EQT  : ${Se.EQT_NM||Se.EQT}`))}}),pe>0&&(u==null||u(`${pe}    .`,"info"))}if(Te==="1"&&re.length>0&&je.EQT_CL){let pe=0;te.forEach((Se,st)=>{if(st!==ie){const Nt=U(Se.EQT);re.includes(Nt)&&Se.SEL!=="1"&&(Se.SEL="1",pe++,console.log(`[Modal]   - SUB_EQT  : ${Se.EQT_NM||Se.EQT}`))}}),pe>0&&(u==null||u(`${pe}    .`,"info"))}y(te),console.log(`      : ${te.filter(pe=>pe.SEL==="1").length}`)},U=ie=>(ie==null?"":String(ie).trim()).padStart(2,"0"),Q=(ie,te,je)=>{const be=[...p];if(be[ie][te]=je,te==="EQT_CL"){const Te=be[ie],pe=(C[Te.EQT_CD]||[]).find(Se=>Se.EQT_CL_CD===je);if(pe){be[ie].EQT_CL_NM=pe.EQT_CL_NM,console.log("[Modal]  :",{index:ie,EQT_CL_CD:je,EQT_CL_NM:pe.EQT_CL_NM});const Se=[],st=[];pe.SUB_EQT_1&&Se.push(pe.SUB_EQT_1),pe.SUB_EQT_2&&Se.push(pe.SUB_EQT_2),pe.SUB_EQT_3&&Se.push(pe.SUB_EQT_3),pe.DEL_EQT_1&&st.push(pe.DEL_EQT_1),pe.DEL_EQT_2&&st.push(pe.DEL_EQT_2),pe.DEL_EQT_3&&st.push(pe.DEL_EQT_3),console.log("[Modal]   :",{EQT:Te.EQT,model:je,modelName:pe.EQT_CL_NM,SUB_EQTs:Se,DEL_EQTs:st});let Nt=0,lt=0;if(Se.length>0&&be.forEach((We,Dt)=>{if(Dt!==ie){const Et=U(We.EQT);Se.includes(Et)&&We.SEL!=="1"&&(We.SEL="1",Nt++,console.log(`[Modal] SUB_EQT  : ${We.EQT_NM||We.EQT} (EQT: ${Et})`))}}),st.length>0&&be.forEach((We,Dt)=>{if(Dt!==ie){const Et=U(We.EQT);st.includes(Et)&&We.SEL==="1"&&(We.SEL="0",lt++,console.log(`[Modal] DEL_EQT  : ${We.EQT_NM||We.EQT} (EQT: ${Et})`))}}),Nt>0||lt>0){const We=[];Nt>0&&We.push(`${Nt}   `),lt>0&&We.push(`${lt}   `),u==null||u(We.join(", "),"info")}const At=je==="090491",ot=Te.EQT==="21"||Te.EQT==="22";(At||ot)&&(be[ie].LENT="40",console.log(`[Modal]   LENT=40  : ${At?"XCAS":"EQT="+Te.EQT}`))}}te==="LENT"&&(je!=="31"&&(be[ie].ITLLMT_PRD="00"),["30","31","60"].includes(je)||(be[ie].EQT_USE_STAT_CD="1")),y(be)},H=()=>{if(!K){u==null||u("  .","warning");return}const ie=parseInt(se);if(isNaN(ie)||ie<1){u==null||u("  .","warning");return}const te=g.find(be=>be.EQT===K);if(!te)return;const je=[...p];for(let be=0;be<ie;be++)je.push({...te,SEL:"1",LENT:"10",EQT_USE_STAT_CD:"1",ITLLMT_PRD:"00",PROD_TYP:te.PROD_TYP||"2",EQUIP_SEQ:te.EQUIP_SEQ||te.SVC_CMPS_ID||String(je.length+1)});y(je),oe("1")},q=async()=>{if(console.log(`
 [Modal]    `),m>0){u==null||u("      .   .","error");return}console.log("  equipmentList :",p.length,""),console.log("    SEL :"),p.forEach((pe,Se)=>{console.log(`    [${Se}] ${pe.EQT} - SEL: "${pe.SEL}" (: ${pe.SEL==="1"?"O":"X"})`)});const ie=p.filter(pe=>pe.SEL==="1");if(console.log(" :",ie.length,""),ie.forEach((pe,Se)=>{console.log(`  [${Se}] ${pe.EQT} - PROD_TYP: ${pe.PROD_TYP}, EQUIP_SEQ: ${pe.EQUIP_SEQ}`)}),ie.length===0){u==null||u("  .","warning");return}const te=pe=>(pe==null?"":String(pe).trim()).padStart(2,"0"),je=pe=>{const Se=te(pe.EQT),st=te(pe.ITEM_MID_CD),Nt=te(pe.ITM_MID_CD),lt=te(pe.EQT_CD);return Se==="04"||st==="04"||Nt==="04"||lt==="04"};ie.filter(je);const be=ie.filter(pe=>pe.EQT==="10").length,Te=ie[0];if(Te&&Te.CMPS_QTY_FROM==="2"){if(be!==2){u==null||u("   2 .","warning");return}}else if(P.includes(n)&&be>1){u==null||u("    1 .","warning");return}const re=ie.filter(pe=>pe.EQT==="09").length;if(re>180){u==null||u(` 180  . HANDY : ${re}`,"warning");return}if(be>180){u==null||u(` 180  . (AP) : ${be}`,"warning");return}Y(!0);try{console.log(" [Modal] onSave  - selectedEquipments:",ie.length,""),console.log("    :"),ie.forEach((pe,Se)=>{console.log(`    [${Se}]`,{EQT:pe.EQT,SEL:pe.SEL,PROD_TYP:pe.PROD_TYP,EQUIP_SEQ:pe.EQUIP_SEQ,PROD_GRP:pe.PROD_GRP,PROD_CD:pe.PROD_CD,SVC_CD:pe.SVC_CD,EQT_CL:pe.EQT_CL,LENT:pe.LENT,EQT_USE_STAT_CD:pe.EQT_USE_STAT_CD,ITLLMT_PRD:pe.ITLLMT_PRD})}),await d(ie,j),e()}catch(pe){console.error("[Modal]  :",pe)}finally{Y(!1)}},ae=ie=>G.filter(te=>te.PRED==="1"&&te.EQT_USE_STAT_CD===ie.EQT_USE_STAT_CD&&te.EQT_CL_CD===ie.EQT_CL),fe=ie=>{const te=R.find(je=>je.COMMON_CD===ie);return te?te.COMMON_CD_NM:ie},ge=(ie,te)=>{const je=ie.LENT_YN,be=ie.EQT_CL;if(!je||typeof je!="string"||!te||te.length===0)return console.log("[] LENT_YN    ",{lentYn:je,allLentCodesCount:te.length}),[];const Te=je.split("|").map(Se=>Se.trim()).filter(Boolean);if(!Te.length)return console.log("[] LENT_YN     ",{lentYn:je}),[];const re=new Set;if(Te.forEach(Se=>{if(Se.length>=7){const st=Se.substring(0,6),Nt=Se.charAt(6);be&&st===be&&re.add(Nt)}}),console.log("[]  ",{eqtCl:be,lentYn:je,tokens:Te,allowedRefCodes:Array.from(re),allLentCodes:te.map(Se=>({code:Se.COMMON_CD,name:Se.COMMON_CD_NM,refCode:Se.REF_CODE}))}),re.size===0)return console.log("[]  REF_CODE    "),[];const pe=te.filter(Se=>{const st=Se.REF_CODE,Nt=st&&re.has(st);return console.log(`  - ${Se.COMMON_CD} (${Se.COMMON_CD_NM}): REF_CODE=${st}  ${Nt?"":""}`),Nt}).map(Se=>Se.COMMON_CD);return console.log("[]  :",pe),pe},ce=ie=>{const te=M.find(je=>je.COMMON_CD===ie);return te?te.COMMON_CD_NM:ie},Re=_.useMemo(()=>(R||[]).map(te=>({value:te.COMMON_CD,label:te.COMMON_CD_NM||te.COMMON_CD,SORT_NO:te.SORT_NO,DEFAULT_YN:te.DEFAULT_YN,REF_CODE:te.REF_CODE})),[R]);_.useMemo(()=>(M||[]).map(te=>({value:te.COMMON_CD,label:te.COMMON_CD_NM||te.COMMON_CD})),[M]);const X=_.useMemo(()=>(k||[]).map(te=>({value:te.COMMON_CD,label:te.COMMON_CD_NM||te.COMMON_CD})),[k]),me=_.useMemo(()=>(g||[]).map(ie=>({value:ie.EQT,label:ie.EQT_NM})),[g]),he=ee?null:s.jsxs("div",{className:"modal-subheader",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("span",{className:"info-value",title:r,children:r||"-"})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("span",{className:"info-value",title:c,children:c||"-"})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("span",{className:"info-value",title:l,children:l||"-"})]}),i==="V"&&X.length>0&&s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("div",{className:"info-select",children:s.jsx(Zs,{value:j||"",onValueChange:S,options:X,placeholder:""})})]})]}),Z=s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn btn-secondary btn-sm",onClick:e,disabled:$,children:""}),s.jsx("button",{className:"btn btn-primary btn-sm",onClick:q,disabled:$||ee,children:$?" ...":""})]});return s.jsx(pa,{isOpen:t,onClose:e,title:"  ",size:"large",subHeader:he,footer:Z,children:s.jsx("div",{className:"equipment-model-change-modal-content",children:ee?s.jsxs("div",{className:"loading-message",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"   ..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"add-equipment-section",children:[s.jsx("h3",{children:" "}),s.jsxs("div",{className:"add-equipment-form",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Zs,{value:K,onValueChange:w,options:me,placeholder:"  "})}),s.jsx("input",{type:"number",className:"count-input",value:se,onChange:ie=>oe(ie.target.value),min:"1",max:"99"}),s.jsx("span",{className:"unit",children:""}),s.jsx("button",{className:"add-btn",onClick:H,children:""})]})]}),s.jsxs("div",{className:"equipment-section",children:[s.jsxs("h3",{children:["  (",p.filter(ie=>ie.SEL==="1").length," )"]}),p.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"  ."})}):s.jsx("div",{className:"equipment-list",children:p.map((ie,te)=>{const je=C[ie.EQT_CD]||[],be=ie.SEL==="1";be&&["30","31","60"].includes(ie.LENT);const Te=be&&ie.LENT==="31",re=ae(ie);return s.jsxs("div",{className:`equipment-item ${be?"selected":""}`,children:[s.jsx("div",{className:"equipment-header",children:s.jsxs("label",{className:"checkbox-wrapper",children:[s.jsx("input",{type:"checkbox",checked:be,onChange:()=>I(te)}),s.jsxs("span",{className:"equipment-title",children:[ie.EQT_NM,ie.EQT_BASIC_YN==="Y"&&s.jsx("span",{className:"badge",children:""})]})]})}),be&&s.jsxs("div",{className:"equipment-details",children:[s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsx("div",{style:{flex:1},children:s.jsx(Zs,{value:ie.EQT_CL||"",onValueChange:pe=>Q(te,"EQT_CL",pe),options:(()=>{const pe=(je||[]).map(Se=>({value:Se.EQT_CL_CD,label:Se.EQT_CL_NM}));return pe.length===0&&console.warn("  .",{eqtCd:ie.EQT_CD,models:je}),pe})(),placeholder:""})})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsx("div",{style:{flex:1},children:s.jsx(Zs,{value:ie.LENT||"10",onValueChange:pe=>Q(te,"LENT",pe),options:(()=>{let pe=ge(ie,R||[]);pe.includes("31")&&(ae(ie).some(Nt=>Nt.PRED==="1")||(pe=pe.filter(Nt=>Nt!=="31")));const Se=Re.filter(st=>pe.includes(st.value));return Se.length===0&&console.warn("   .",{eq:ie,allowed:pe}),Se.map(st=>({value:st.value,label:st.label}))})(),placeholder:""})})]}),Te&&s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsx("div",{style:{flex:1},children:s.jsx(Zs,{value:ie.ITLLMT_PRD||"00",onValueChange:pe=>Q(te,"ITLLMT_PRD",pe),options:(()=>{const pe=[{value:"00",label:""},...re.map(Se=>({value:Se.INSTL_PERD,label:`${Se.INSTL_PERD}`}))];return re.length===0&&console.warn("  .",{eq:ie,installmentPeriods:re}),pe})(),placeholder:""})})]}),ie.EQT_SALE_AMT>0&&s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsxs("span",{className:"price",children:[ie.EQT_SALE_AMT.toLocaleString(),""]})]})]}),!be&&s.jsxs("div",{className:"equipment-summary",children:[s.jsx("span",{className:"tag",children:fe(ie.LENT)}),s.jsx("span",{className:"tag",children:ce(ie.EQT_USE_STAT_CD)})]})]},te)})})]})]})})})},kh=({isOpen:t,onClose:e,ctrtId:n})=>{const[r,i]=_.useState([]),[l,c]=_.useState(!1),[d,u]=_.useState(null),f=async()=>{if(!n){console.error("[LDAP] ID ");return}c(!0),u(null);try{console.log("[LDAP]   CTRT_ID:",n);const y=await gb(n);console.log("[LDAP]  :",y),i(y.data||[])}catch(y){console.error("[LDAP]  :",y),u(y instanceof Error?y.message:"   ")}finally{c(!1)}};_.useEffect(()=>{t&&n&&f()},[t,n]);const m=s.jsxs("div",{className:"text-xs text-gray-700 space-y-0.5",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-600",children:"ID:"})," ",s.jsx("span",{className:"font-medium text-blue-700",children:Qi(n)})]}),s.jsx("div",{className:"text-gray-600",children:"LGU+ LDAP  "})]}),p=s.jsx("button",{onClick:e,className:"btn btn-secondary btn-sm",children:""});return s.jsx(pa,{isOpen:t,onClose:e,title:"LDAP",size:"medium",subHeader:m,footer:p,children:s.jsxs("div",{children:[l&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:" ..."})}),d&&s.jsx("div",{className:"flex items-center justify-center py-8 px-4",children:s.jsx("div",{className:"text-red-500 text-xs text-center",children:d})}),!l&&!d&&r.length===0&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:"LDAP  "})}),!l&&!d&&r.length>0&&s.jsx("div",{className:"space-y-2.5 p-2.5",children:r.map((y,g)=>s.jsx("div",{className:`rounded-lg border shadow-sm p-2.5 ${g%2===0?"bg-white border-gray-200":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"space-y-1.5",children:[y.ONT_EQT_NO&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"ONT :"})," ",y.ONT_EQT_NO]})}),y.ONT_MAC_ADDR&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"ONT MAC:"})," ",y.ONT_MAC_ADDR]})}),y.AP_EQT_NO&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"AP :"})," ",y.AP_EQT_NO]})}),y.AP_MAC_ADDR&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"AP MAC:"})," ",y.AP_MAC_ADDR]})}),y.PROC_DV_CD&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",y.PROC_DV_CD]})}),y.PRSS_RSLT_CD&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",s.jsx("span",{className:y.PRSS_RSLT_CD==="0000"?"text-green-600":"text-red-600",children:y.PRSS_RSLT_CD})]})}),y.PRSS_RSLT_MSG&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",y.PRSS_RSLT_MSG]})}),y.REG_DTTM&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",y.REG_DTTM]})})]})},g))})]})})},Uh=t=>({"01":"","02":"","03":"A/S","04":"","05":"","06":"","07":"","08":"","09":""})[t||""]||"",Cu=t=>({10:"",20:"",30:"",40:"",90:""})[t||""]||"",VU=["091001","091005","091006","091401","092401","090251"],Ig=t=>!t||["01","05","06","07","09"].includes(t)?"01":["02","08"].includes(t)?"02":t==="03"?"03":t==="04"?"04":"01",gN=t=>t.LENT_YN==="40"||t.VOIP_CUSTOWN_EQT==="Y"||t.eqtClCd==="090852",HD=t=>`equipment_draft_${t}`,zD=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u="",onLdapConnect:f,isLdapDone:m=!1,ldapLoading:p=!1,ldapBlocked:y=!1})=>{var ot;const g=t.id,N=c||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:C}=$i(),{initWorkState:v,setApiData:R,setDataLoaded:A,addInstalledEquipment:M,removeInstalledEquipment:L,setInstalledEquipments:k,clearInstalledEquipments:V,setSelectedContract:G,setSelectedStock:W,setSignalStatus:j,setSignalResult:S}=ji(),{contractEquipments:P,technicianEquipments:F,installedEquipments:ee,selectedContract:J,selectedStock:$,signalStatus:Y,signalResult:K,filteringData:w,isReady:se}=oa(g),[oe,T]=_.useState(!1),[I,U]=_.useState(!1),[Q,H]=_.useState(!1),[q,ae]=_.useState(!1),[fe,ge]=_.useState(!1),[ce,Re]=_.useState(!1),[X,me]=_.useState(!1),[he,Z]=_.useState(0);_.useEffect(()=>{if(se&&(ee.length>0||P.length>0)){console.log("[-]    -   ");return}v(g),ie()},[t.id]);const ie=async(We=!1)=>{var Dt,Et,Rt,$e,gt,Fe;try{let rt;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!We)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),rt=i;else{We?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const xe=localStorage.getItem("userInfo");if(!xe){console.error("  .");return}const Ue=JSON.parse(xe),Pe=t.WRK_CD||"",Ye=t.WRK_DTL_TCD||"",mt={WRKR_ID:t.WRKR_ID||Ue.userId||Ue.workerId||"",SO_ID:t.SO_ID||Ue.soId,WRK_ID:t.id,CUST_ID:(Dt=t.customer)==null?void 0:Dt.id,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:Pe,WRK_DTL_TCD:Ye,WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-]    (API )"),console.log("[-] :",mt),rt=await to(mt),We&&l&&(console.log("[-]   preloadedData "),l(rt))}console.log("[-] :"),console.log("  -  (output2):",((Et=rt.contractEquipments)==null?void 0:Et.length)||0,""),console.log("  -  (output3):",((Rt=rt.technicianEquipments)==null?void 0:Rt.length)||0,""),console.log("  -  (output4):",(($e=rt.customerEquipments)==null?void 0:$e.length)||0,"");const It={kpiProdGrpCd:rt.kpiProdGrpCd,prodChgGb:rt.prodChgGb,chgKpiProdGrpCd:rt.chgKpiProdGrpCd,prodGrp:rt.prodGrp};C(It),window.__equipmentFilterData=It;const ht=(rt.contractEquipments||[]).map(xe=>({id:xe.SVC_CMPS_ID||xe.PROD_CMPS_ID,type:xe.ITEM_MID_NM||xe.EQT_NM,model:xe.EQT_CL_NM,serialNumber:"N/A",itemMidCd:xe.ITEM_MID_CD,eqtClCd:xe.EQT_CL_CD||xe.EQT_CL,SVC_CMPS_ID:xe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:xe.BASIC_PROD_CMPS_ID,PROD_CD:xe.PROD_CD,SVC_CD:xe.SVC_CD})),Je=(rt.technicianEquipments||[]).map(xe=>({id:xe.EQT_NO,type:xe.ITEM_MID_NM,model:xe.EQT_CL_NM,serialNumber:xe.EQT_SERNO,itemMidCd:xe.ITEM_MID_CD,eqtClCd:xe.EQT_CL_CD||xe.EQT_CL,macAddress:xe.MAC_ADDRESS,SVC_CMPS_ID:xe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:xe.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:xe.EQT_PROD_CMPS_ID,PROD_CD:xe.PROD_CD,SVC_CD:xe.SVC_CD,EQT_SALE_AMT:xe.EQT_SALE_AMT,MST_SO_ID:xe.MST_SO_ID,SO_ID:xe.SO_ID,OLD_LENT_YN:xe.OLD_LENT_YN,LENT:xe.LENT,ITLLMT_PRD:xe.ITLLMT_PRD,EQT_USE_STAT_CD:xe.EQT_USE_STAT_CD})),ve=new Set,Ge=(rt.customerEquipments||[]).map(xe=>{const Ue=ht.find(Pe=>Pe.itemMidCd===xe.ITEM_MID_CD&&!ve.has(Pe.id));return Ue&&ve.add(Ue.id),{contractEquipment:Ue||{id:"unknown",type:xe.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:xe.ITEM_MID_CD},actualEquipment:{id:xe.EQT_NO,type:xe.ITEM_MID_NM,model:xe.EQT_CL_NM,serialNumber:xe.EQT_SERNO,itemMidCd:xe.ITEM_MID_CD,macAddress:xe.MAC_ADDRESS||xe.MAC_ADDR,EQT_KND:xe.EQT_KND,EQT_CL_CD:xe.EQT_CL_CD},macAddress:xe.MAC_ADDRESS||xe.MAC_ADDR,installLocation:xe.INSTL_LCTN}});console.log("[-]  :"),console.log("  -  :",ht.length,""),console.log("  -  :",Je.length,""),console.log("  -  :",Ge.length,""),R(g,{contractEquipments:ht,technicianEquipments:Je,filteringData:It}),Z(Ge.length);const _e=ji.getState().getWorkState(g);Ge.length>0&&!((gt=_e==null?void 0:_e.installedEquipments)!=null&&gt.length)?(console.log("[-] API     :",Ge.length,""),k(g,Ge)):(Fe=_e==null?void 0:_e.installedEquipments)!=null&&Fe.length,requestAnimationFrame(()=>A(g,!0))}catch(rt){console.error("[-]    :",rt),R(g,{contractEquipments:[],technicianEquipments:[]}),k(g,[]),requestAnimationFrame(()=>A(g,!0))}},te=_.useCallback(We=>{const Dt=ee.find(Et=>Et.contractEquipment.id===We.id);(J==null?void 0:J.id)===We.id?(G(g,null),W(g,null)):(G(g,We),Dt?W(g,Dt.actualEquipment):W(g,null))},[g,ee,J]),je=_.useCallback(We=>{($==null?void 0:$.id)===We.id?W(g,null):W(g,We)},[g,$]),be=_.useCallback(()=>{if(!J||!$)return;if(J.itemMidCd!==$.itemMidCd||J.model!==$.model){r==null||r("      .","warning");return}console.log("[-]  :",{:J.type,:`${$.type} (S/N: ${$.serialNumber})`});const We={contractEquipment:J,actualEquipment:$,macAddress:$.macAddress||"",installLocation:""};M(g,We),j(g,"idle"),W(g,null)},[g,J,$]),Te=async(We,Dt)=>{try{const Et=localStorage.getItem("userInfo");if(!Et){r==null||r("  .","error");return}const Rt=JSON.parse(Et),$e=We.map((Fe,rt)=>{let at=Fe.ITEM_MID_CD||Fe.ITM_MID_CD||Fe.EQT||Fe.EQT_CD||"",It=Fe.EQT_CL||Fe.EQT_CL_CD||"",ht=Fe.SVC_CMPS_ID||Fe.PROD_CMPS_ID||Fe.SVC_CMPS_SEQ||Fe.EQUIP_SEQ||"";return at=String(at).trim().padStart(2,"0"),It=String(It).trim().padStart(6,"0"),ht=String(ht||rt+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Rt.crrId||"",WRKR_ID:t.WRKR_ID||Rt.userId||Rt.workerId||"",REG_UID:Rt.userId||Rt.workerId||"A20130708",ITEM_MID_CD:at,EQT_CL:It,SVC_CMPS_ID:ht,EQT:at,EQT_CD:at,LENT:String(Fe.LENT||"10"),EQT_USE_STAT_CD:String(Fe.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(Fe.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(Fe.EQT_SALE_AMT||0),PROD_GRP:String(Fe.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(Fe.PROD_CD||t.PROD_CD||""),SVC_CD:String(Fe.SVC_CD||""),PROM_CNT:Dt||"",SEL:"1",EQT_BASIC_YN:String(Fe.EQT_BASIC_YN||"N"),PROD_TYP:Fe.PROD_TYP,EQUIP_SEQ:Fe.EQUIP_SEQ}}),gt=await Mh({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:Dt||"",equipments:$e});if(gt.MSGCODE==="SUCCESS"||gt.MSGCODE==="0"||gt.code==="SUCCESS")r==null||r("  .","success"),V(g),W(g,null),await ie(!0);else throw new Error(gt.MESSAGE||gt.message||"   .")}catch(Et){throw console.error("[-]    :",Et),r==null||r(Et.message||"     .","error",!0),Et}},re=We=>ee.find(Dt=>{var Rt,$e;return(((Rt=Dt.actualEquipment)==null?void 0:Rt.itemMidCd)||(($e=Dt.actualEquipment)==null?void 0:$e.ITEM_MID_CD)||"")===We}),pe=()=>{var rt,at,It,ht,Je,ve,Ge,_e,xe,Ue,Pe,Ye,mt,de;const We=t.PROD_GRP||"";if(t.VOIP_PROD_CD||""){const tt=re("08");return tt?{eqtNo:((rt=tt.actualEquipment)==null?void 0:rt.id)||((at=tt.actualEquipment)==null?void 0:at.EQT_NO)||"",itemMidCd:"08"}:null}const Et=re("05");if(Et)return{eqtNo:((It=Et.actualEquipment)==null?void 0:It.id)||((ht=Et.actualEquipment)==null?void 0:ht.EQT_NO)||"",itemMidCd:"05"};const Rt=re("01");if(Rt)return{eqtNo:((Je=Rt.actualEquipment)==null?void 0:Je.id)||((ve=Rt.actualEquipment)==null?void 0:ve.EQT_NO)||"",itemMidCd:"01"};const $e=re("03");if($e)return{eqtNo:((Ge=$e.actualEquipment)==null?void 0:Ge.id)||((_e=$e.actualEquipment)==null?void 0:_e.EQT_NO)||"",itemMidCd:"03"};if(We==="I"){const tt=re("02");if(tt)return{eqtNo:((xe=tt.actualEquipment)==null?void 0:xe.id)||((Ue=tt.actualEquipment)==null?void 0:Ue.EQT_NO)||"",itemMidCd:"02"}}const gt=re("08");if(gt)return{eqtNo:((Pe=gt.actualEquipment)==null?void 0:Pe.id)||((Ye=gt.actualEquipment)==null?void 0:Ye.EQT_NO)||"",itemMidCd:"08"};const Fe=re("04");return Fe?{eqtNo:((mt=Fe.actualEquipment)==null?void 0:mt.id)||((de=Fe.actualEquipment)==null?void 0:de.EQT_NO)||"",itemMidCd:"04"}:null},Se=()=>(t.PROD_GRP||"")==="V"?"SMR60":"SMR03",st=async()=>{var at,It;const We=ht=>{var _e,xe,Ue;const Je=((_e=ht.actualEquipment)==null?void 0:_e.eqtClCd)||ht.eqtClCd||"",ve=((xe=ht.actualEquipment)==null?void 0:xe.itemMidCd)||ht.itemMidCd||"",Ge=(((Ue=ht.actualEquipment)==null?void 0:Ue.type)||ht.type||"").toLowerCase();return!!(Je.startsWith("0904")||ve==="05"||Ge.includes("stb")||Ge.includes("")||Ge.includes(""))},Dt=ht=>{var _e,xe,Ue;const Je=((_e=ht.actualEquipment)==null?void 0:_e.eqtClCd)||ht.eqtClCd||"",ve=((xe=ht.actualEquipment)==null?void 0:xe.itemMidCd)||ht.itemMidCd||"",Ge=(((Ue=ht.actualEquipment)==null?void 0:Ue.type)||ht.type||"").toLowerCase();return!!(Je.startsWith("0902")||ve==="04"||Ge.includes("modem")||Ge.includes("")||Ge.includes(""))};if(ee.length===0){r==null||r("    . STB    .","warning"),j(g,"fail");return}const Et=t.PROD_GRP||"",Rt=t.VOIP_PROD_CD||"";if(Et==="V"&&!Rt&&!t.CTRT_JOIN_ID){r==null||r("VoIP   .","warning"),j(g,"fail");return}const $e=t.ISP_PROD_CD||"";if(Et==="I"&&$e&&!t.CTRT_JOIN_ID){r==null||r("  ISP .   .","warning"),j(g,"fail");return}const gt=pe(),Fe=ee.some(We),rt=ee.some(Dt);if(!Fe&&!rt&&!gt){r==null||r("  STB    .","warning"),j(g,"fail");return}try{ge(!0),ae(!0),S(g," ...");const ht=localStorage.getItem("userInfo");if(!ht){S(g,"    ."),j(g,"fail"),ge(!1);return}const Je=JSON.parse(ht),ve=Je.userId||Je.id||"UNKNOWN",Ge=(gt==null?void 0:gt.eqtNo)||"",_e=ee.find(We),xe=ee.find(Dt),Ue=((at=_e==null?void 0:_e.actualEquipment)==null?void 0:at.id)||"",Pe=((It=xe==null?void 0:xe.actualEquipment)==null?void 0:It.id)||"",Ye=Se(),mt=await Su(ve,t.CTRT_ID||"",t.id,Ye,Ue||Ge,Pe||"");mt.O_IFSVC_RESULT&&mt.O_IFSVC_RESULT.startsWith("TRUE")?(S(g,` 

: ${mt.O_IFSVC_RESULT||""}`),j(g,"success")):(S(g,` 

${mt.MESSAGE||"   "}`),j(g,"fail"))}catch(ht){S(g,` 

${ht.message||"   "}`),j(g,"fail")}finally{ge(!1)}},Nt=_.useMemo(()=>{const We=new Set(ee.map(Et=>Et.actualEquipment.id));let Dt=F.filter(Et=>!We.has(Et.id));return J&&(Dt=Dt.filter(Et=>Et.itemMidCd===J.itemMidCd&&Et.model===J.model)),Dt},[F,ee,J]),lt=()=>{Re(!0),setTimeout(()=>{Re(!1),r==null||r("    .","info")},500)},At=async()=>{if(!(X||N)){me(!0);try{await ie(!0),r==null||r("  .","success")}catch(We){console.error("[-]  :",We),r==null||r("   .","error")}finally{me(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4 relative",children:[X&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-20 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsx("button",{onClick:At,disabled:X||N,className:`p-1.5 rounded-lg transition-all ${X||N?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:s.jsx(Ei,{className:`w-4 h-4 ${X?"animate-spin":""}`})})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[P.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{N||T(!0)},disabled:N,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":p?"border-yellow-300 bg-yellow-100 text-yellow-700":y?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>f==null?void 0:f(),disabled:p||N,children:[p?s.jsx(jn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N||t.PROD_GRP==="V"?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed opacity-50":Y==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":Y==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>{if(t.PROD_GRP==="V"){r==null||r("VOIP    .","info");return}!N&&!fe&&st()},children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-orange-200 bg-orange-50 text-orange-600 hover:bg-orange-100 hover:border-orange-300 transition-all active:scale-95 min-h-[56px] opacity-50 cursor-not-allowed",disabled:!0,title:"     ",children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300 transition-all active:scale-95 min-h-[56px]",onClick:()=>H(!0),children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${t.PROD_GRP==="V"?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed opacity-50":"border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300"}`,onClick:()=>{if(t.PROD_GRP==="V"){r==null||r("VOIP    .","info");return}U(!0)},children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:""})]})]})]}),se?P.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:P.map(We=>{const Dt=ee.find(Rt=>Rt.contractEquipment.id===We.id),Et=(J==null?void 0:J.id)===We.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${N?Dt?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":Et?"border-blue-500 bg-blue-50 cursor-pointer":Dt?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!N&&te(We),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:We.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:We.model})]}),Dt&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",Dt.actualEquipment.model]})}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",Dt.actualEquipment.serialNumber]}),Dt.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",Dt.macAddress]})]})]})},We.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!N&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!J||!ee.some(We=>We.contractEquipment.id===(J==null?void 0:J.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-red-500 bg-red-50 text-red-600 hover:bg-red-100 cursor-pointer active:scale-95"}`,onClick:()=>{J&&(L(g,J.id),j(g,"idle"),W(g,null),r==null||r("  .","info"))},disabled:!J||!ee.some(We=>We.contractEquipment.id===(J==null?void 0:J.id)),title:"   ",children:s.jsx(Th,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!J||!$||ee.some(We=>We.actualEquipment.id===$.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:be,disabled:!J||!$||ee.some(We=>We.actualEquipment.id===$.id),title:"   ",children:s.jsx(Eh,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!N&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 border-b border-gray-100 gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",J&&s.jsxs("span",{className:"text-blue-600",children:[" (",J.type,")"]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[J?Nt.length:0,""]})]}),J?Nt.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:Nt.map(We=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${($==null?void 0:$.id)===We.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>je(We),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:We.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:We.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",We.serialNumber]}),We.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",We.macAddress]})]})]}),($==null?void 0:$.id)===We.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},We.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})]}),(()=>{var Rt;const We=t.WRK_CD_NM||Uh(t.WRK_CD)||t.workType||"-",Dt=t.PROD_NM||t.productName||((Rt=t.customer)==null?void 0:Rt.productName)||"-",Et=t.CTRT_STAT_NM||Cu(t.CTRT_STAT)||"-";return s.jsx(Ah,{isOpen:oe,onClose:()=>T(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:Et,prodGrp:t.PROD_GRP||"",prodNm:Dt,wrkCdNm:We,onSave:Te,showToast:r,installedEquipmentCount:ee.length})})(),!N&&s.jsx("button",{onClick:lt,disabled:ce,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${ce?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(Ih,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(Ba,{isOpen:I,onClose:()=>U(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((ot=t.customer)==null?void 0:ot.id)}),s.jsx(kh,{isOpen:Q,onClose:()=>H(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),q&&vu.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!fe&&ae(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:We=>We.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:fe?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(jn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):Y==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(jh,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:K})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(Lo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:K})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${Y==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>ae(!1),disabled:fe,children:fe?" ...":""})})]})}),document.body)]})},$U=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1})=>{const d=t.id,u=c||t.WRK_STAT_CD==="4"||t.status==="",{initWorkState:f,setApiData:m,setDataLoaded:p,toggleRemovalStatus:y,setFullRemovalStatus:g}=ji(),{removeEquipments:N,removalStatus:C,isReady:v}=oa(d),[R,A]=_.useState(!1);_.useEffect(()=>{if(v&&N.length>0){console.log("[-]    -   ");return}f(d),M()},[t.id]);const M=async(V=!1)=>{var G,W,j;try{console.log("[-]    - isWorkCompleted:",u,"WRK_STAT_CD:",t.WRK_STAT_CD);let S;if(i&&!V)console.log("[-] Pre-loaded   - API  "),S=i;else{const F=localStorage.getItem("userInfo");if(!F){console.error("  .");return}const ee=JSON.parse(F),J={WRKR_ID:t.WRKR_ID||ee.userId||ee.workerId||"",SO_ID:t.SO_ID||ee.soId,WRK_ID:t.id,CUST_ID:((G=t.customer)==null?void 0:G.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"02",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-]    (API )"),console.log("[-] :",J),S=await to(J)}console.log("[-] :"),console.log("  -  (output5):",((W=S.removedEquipments)==null?void 0:W.length)||0,""),((j=S.removedEquipments)==null?void 0:j.length)>0&&console.log("[-]  API [0]:",S.removedEquipments[0]);const P=(S.removedEquipments||[]).map(F=>({...F,id:F.EQT_NO,type:F.ITEM_MID_NM,model:F.EQT_CL_NM,serialNumber:F.EQT_SERNO,itemMidCd:F.ITEM_MID_CD,eqtClCd:F.EQT_CL_CD||F.EQT_CL,macAddress:F.MAC_ADDRESS||F.MAC_ADDR,installLocation:F.INSTL_LCTN}));console.log("[-]  :"),console.log("  -  :",P.length,""),m(d,{removeEquipments:P}),requestAnimationFrame(()=>p(d,!0))}catch(S){console.error("[-]    :",S),r==null||r("   .","error",!0),m(d,{removeEquipments:[]}),requestAnimationFrame(()=>p(d,!0))}},L=(V,G)=>{y(d,V,G)},k=async()=>{if(!(R||u)){A(!0);try{await M(!0),r==null||r("  .","success")}catch(V){console.error("[-]  :",V),r==null||r("   .","error")}finally{A(!1)}}};return s.jsx("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[R&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(uc,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Ei,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),""]}),s.jsxs("button",{onClick:k,disabled:R||u,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${R||u?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(uc,{className:`w-3.5 h-3.5 ${R?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2 sm:px-2.5 py-0.5 sm:py-1 bg-orange-100 text-orange-700 text-[0.625rem] sm:text-xs font-semibold rounded-full",children:[N.length,""]})]}),N.length===0?s.jsx("div",{className:"py-12 text-center",children:s.jsx("div",{className:"text-sm text-gray-500",children:"   "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:N.map(V=>{const G=V.id,W=C[G]||{},j=gN(V);return s.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-gray-200 bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:V.model||V.type}),s.jsxs("div",{className:"text-xs text-gray-600",children:["S/N: ",V.serialNumber]}),V.macAddress&&s.jsxs("div",{className:"text-xs text-gray-500",children:["MAC: ",V.macAddress]})]}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:V.EQT_LOC_TP_NM||""})]}),!u&&!c&&s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:W.EQT_LOSS_YN==="1",onChange:()=>!j&&L(G,"EQT_LOSS_YN"),disabled:j,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:W.PART_LOSS_BRK_YN==="1",onChange:()=>!j&&L(G,"PART_LOSS_BRK_YN"),disabled:j,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:W.EQT_BRK_YN==="1",onChange:()=>!j&&L(G,"EQT_BRK_YN"),disabled:j,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:W.EQT_CABL_LOSS_YN==="1",onChange:()=>!j&&L(G,"EQT_CABL_LOSS_YN"),disabled:j,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:W.EQT_CRDL_LOSS_YN==="1",onChange:()=>!j&&L(G,"EQT_CRDL_LOSS_YN"),disabled:j,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]})]}),j&&!u&&s.jsx("div",{className:"mt-2 text-xs text-orange-600 bg-orange-50 p-2 rounded",children:"   "})]},V.id)})})]})})},HU=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u="",onLdapConnect:f,isLdapDone:m=!1,ldapLoading:p=!1,ldapBlocked:y=!1})=>{var Ge;const g=t.id,N=c||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:C}=$i(),{initWorkState:v,setApiData:R,setDataLoaded:A,addInstalledEquipment:M,removeInstalledEquipment:L,setInstalledEquipments:k,clearInstalledEquipments:V,setSelectedContract:G,setSelectedStock:W,clearSelection:j,toggleRemovalStatus:S,addMarkedForRemoval:P,removeMarkedForRemoval:F,setMarkedForRemoval:ee,setPendingLossStatusList:J,setSignalStatus:$,setSignalResult:Y,setFullRemovalStatus:K}=ji(),{contractEquipments:w,technicianEquipments:se,removeEquipments:oe,installedEquipments:T,removalStatus:I,markedForRemoval:U,pendingLossStatusList:Q,selectedContract:H,selectedStock:q,signalStatus:ae,signalResult:fe,filteringData:ge,isReady:ce}=oa(g),[Re,X]=_.useState(0),[me,he]=_.useState("removal"),[Z,ie]=_.useState(!1),[te,je]=_.useState(!1),[be,Te]=_.useState(!1),[re,pe]=_.useState(!1),[Se,st]=_.useState(!1),[Nt,lt]=_.useState(!1),[At,ot]=_.useState(!1);_.useEffect(()=>{if(ce&&(T.length>0||U.length>0||w.length>0)){console.log("[-AS]    -   ");return}v(g),We()},[t.id]);const We=async(_e=!1)=>{var xe,Ue,Pe,Ye,mt;try{let de;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!_e)console.log("[-AS] Pre-loaded   -",i.contractEquipments.length," "),de=i;else{_e?console.log("[-AS]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-AS] preloadedApiData   - API ");const Oe=localStorage.getItem("userInfo");if(!Oe){console.error("  .");return}const Xt=JSON.parse(Oe),rs=Ig(t.WRK_CD),ds={WRKR_ID:t.WRKR_ID||Xt.userId||Xt.workerId||"",SO_ID:t.SO_ID||Xt.soId,WRK_ID:t.id,CUST_ID:((xe=t.customer)==null?void 0:xe.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:rs,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-AS] API :",ds),de=await to(ds),_e&&l&&(console.log("[-AS]   preloadedData "),l(de))}console.log("[-AS] API :",{contractEquipments:((Ue=de.contractEquipments)==null?void 0:Ue.length)||0,technicianEquipments:((Pe=de.technicianEquipments)==null?void 0:Pe.length)||0,customerEquipments:((Ye=de.customerEquipments)==null?void 0:Ye.length)||0,removedEquipments:((mt=de.removedEquipments)==null?void 0:mt.length)||0});const De={kpiProdGrpCd:de.kpiProdGrpCd,prodChgGb:de.prodChgGb,chgKpiProdGrpCd:de.chgKpiProdGrpCd,prodGrp:de.prodGrp};C(De),window.__equipmentFilterData=De;const it=(de.contractEquipments||[]).map(Oe=>({id:Oe.SVC_CMPS_ID||Oe.PROD_CMPS_ID,type:Oe.ITEM_MID_NM||Oe.EQT_NM,model:Oe.EQT_CL_NM,serialNumber:"N/A",itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,PROD_CD:Oe.PROD_CD,SVC_CD:Oe.SVC_CD})),St=(de.technicianEquipments||[]).map(Oe=>({id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:Oe.EQT_PROD_CMPS_ID,PROD_CD:Oe.PROD_CD,SVC_CD:Oe.SVC_CD,EQT_SALE_AMT:Oe.EQT_SALE_AMT,MST_SO_ID:Oe.MST_SO_ID,SO_ID:Oe.SO_ID,OLD_LENT_YN:Oe.OLD_LENT_YN,LENT:Oe.LENT,LENT_YN:Oe.LENT_YN,ITLLMT_PRD:Oe.ITLLMT_PRD,EQT_USE_STAT_CD:Oe.EQT_USE_STAT_CD})),Lt=new Set,Ve=(de.customerEquipments||[]).map(Oe=>{const Xt=it.find(rs=>rs.itemMidCd===Oe.ITEM_MID_CD&&!Lt.has(rs.id));return Xt&&Lt.add(Xt.id),{contractEquipment:Xt||{id:"unknown",type:Oe.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:Oe.ITEM_MID_CD},actualEquipment:{id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,LENT_YN:Oe.LENT_YN,VOIP_CUSTOWN_EQT:Oe.VOIP_CUSTOWN_EQT},macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,installLocation:Oe.INSTL_LCTN}}),kt=(de.removedEquipments||[]).map(Oe=>({id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,installLocation:Oe.INSTL_LCTN,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,MST_SO_ID:Oe.MST_SO_ID,SO_ID:Oe.SO_ID,LENT_YN:Oe.LENT_YN,VOIP_CUSTOWN_EQT:Oe.VOIP_CUSTOWN_EQT}));if(R(g,{contractEquipments:it,technicianEquipments:St,removeEquipments:kt}),X(Ve.length),Ve.length>0){const Oe=new Set(U.map(Ns=>Ns.id)),Xt=Ve.filter(Ns=>!Oe.has(Ns.actualEquipment.id)),rs=[],ds=[];if(Xt.forEach(Ns=>{const ke=it.find(dt=>dt.itemMidCd===Ns.actualEquipment.itemMidCd);ke&&ke.eqtClCd===Ns.actualEquipment.eqtClCd?rs.push(Ns):ds.push(Ns.actualEquipment)}),ds.length>0){const Ns=[...U,...ds.filter(ke=>!U.some(dt=>dt.id===ke.id))];ee(g,Ns),console.log("[-AS]     :",ds.length,"")}console.log("[-AS] API    :",Ve.length,"   :",rs.length,",  :",ds.length,""),k(g,rs);const Ss=localStorage.getItem(HD(t.id));if(Ss)try{const Ns=JSON.parse(Ss);Ns.lastSignalStatus&&$(g,Ns.lastSignalStatus),Ns.removalStatus&&Object.keys(Ns.removalStatus).length>0&&K(g,Ns.removalStatus),Ns.pendingLossStatusList&&Ns.pendingLossStatusList.length>0&&J(g,Ns.pendingLossStatusList)}catch{}}else{const Oe=localStorage.getItem(HD(t.id));if(Oe)try{const Xt=JSON.parse(Oe);Xt.installedEquipments&&Xt.installedEquipments.length>0&&(console.log("[-AS] localStorage  :",Xt.installedEquipments.length,""),k(g,Xt.installedEquipments)),Xt.markedForRemoval&&Xt.markedForRemoval.length>0&&ee(g,Xt.markedForRemoval),Xt.removalStatus&&Object.keys(Xt.removalStatus).length>0&&K(g,Xt.removalStatus),Xt.pendingLossStatusList&&Xt.pendingLossStatusList.length>0&&J(g,Xt.pendingLossStatusList),Xt.lastSignalStatus&&$(g,Xt.lastSignalStatus)}catch(Xt){console.warn("[-AS] localStorage   :",Xt)}}requestAnimationFrame(()=>A(g,!0))}catch(de){console.error("[-AS]    :",de),requestAnimationFrame(()=>A(g,!0))}},Dt=_e=>{const xe=T.find(Ue=>Ue.contractEquipment.id===_e.id&&Ue.actualEquipment.eqtClCd===_e.eqtClCd);(H==null?void 0:H.id)===_e.id?(G(g,null),W(g,null)):(G(g,_e),xe?W(g,xe.actualEquipment):W(g,null))},Et=_e=>{(q==null?void 0:q.id)===_e.id?W(g,null):W(g,_e)},Rt=()=>{if(!H||!q)return;if(H.itemMidCd!==q.itemMidCd||H.model!==q.model){r==null||r("      .","warning");return}const _e=t.CTRT_STAT;if(_e&&_e!=="20"){const Ue=Cu(_e);r==null||r(` ${Ue}     .`,"error");return}const xe=T.findIndex(Ue=>Ue.contractEquipment.id===H.id);if(xe>=0){const Ue=[...T];Ue[xe]={contractEquipment:H,actualEquipment:q,macAddress:q.macAddress||"",installLocation:""},k(g,Ue)}else{const Ue={contractEquipment:H,actualEquipment:q,macAddress:q.macAddress||"",installLocation:""};k(g,[...T,Ue])}$(g,"idle"),W(g,null)},$e=()=>{if(!q)return;const _e=t.CTRT_STAT;if(_e&&_e!=="20"){const Ye=Cu(_e);r==null||r(` ${Ye}     .`,"error");return}const xe=T.findIndex(Ye=>Ye.actualEquipment.id===q.id);if(xe>=0){const Ye=[...T],mt=Ye.splice(xe,1)[0];k(g,Ye);const de=mt.actualEquipment;U.some(De=>De.id===de.id)||ee(g,[...U,de]),$(g,"idle"),W(g,null);return}if(U.some(Ye=>Ye.id===q.id))return;oe.some(Ye=>Ye.id===q.id)&&ee(g,[...U,q])},gt=async(_e,xe)=>{try{const Ue=localStorage.getItem("userInfo");if(!Ue){r==null||r("  .","error");return}const Pe=JSON.parse(Ue),Ye=_e.map((de,tt)=>{let De=de.ITEM_MID_CD||de.ITM_MID_CD||de.EQT||de.EQT_CD||"",it=de.EQT_CL||de.EQT_CL_CD||"",St=de.SVC_CMPS_ID||de.PROD_CMPS_ID||de.SVC_CMPS_SEQ||de.EQUIP_SEQ||"";return De=String(De).trim().padStart(2,"0"),it=String(it).trim().padStart(6,"0"),St=String(St||tt+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Pe.crrId||"",WRKR_ID:t.WRKR_ID||Pe.userId||Pe.workerId||"",REG_UID:Pe.userId||Pe.workerId||"A20130708",ITEM_MID_CD:De,EQT_CL:it,SVC_CMPS_ID:St,EQT:De,EQT_CD:De,LENT:String(de.LENT||"10"),EQT_USE_STAT_CD:String(de.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(de.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(de.EQT_SALE_AMT||0),PROD_GRP:String(de.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(de.PROD_CD||t.PROD_CD||""),SVC_CD:String(de.SVC_CD||""),PROM_CNT:xe||"",SEL:"1",EQT_BASIC_YN:String(de.EQT_BASIC_YN||"N"),PROD_TYP:de.PROD_TYP,EQUIP_SEQ:de.EQUIP_SEQ}}),mt=await Mh({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:xe||"",equipments:Ye});if(mt.MSGCODE==="SUCCESS"||mt.MSGCODE==="0"||mt.code==="SUCCESS"){r==null||r("  .","success");const de=T.filter(tt=>!se.some(De=>De.id===tt.actualEquipment.id));if(de.length>0){const tt=de.map(it=>it.actualEquipment),De=[...U,...tt.filter(it=>!U.some(St=>St.id===it.id))];ee(g,De),console.log("[]    :",tt.length,"")}V(g),W(g,null),await We(!0)}else throw new Error(mt.MESSAGE||mt.message||"   .")}catch(Ue){throw console.error("[] :",Ue),r==null||r(Ue.message||"     .","error",!0),Ue}},Fe=async()=>{var _e,xe,Ue,Pe;if(T.length===0){r==null||r("    .","warning"),$(g,"fail");return}try{st(!0),pe(!0),Y(g," ...");const Ye=localStorage.getItem("userInfo");if(!Ye){Y(g,"    ."),$(g,"fail"),st(!1);return}const mt=JSON.parse(Ye),de=mt.userId||mt.id||"UNKNOWN",tt=Oe=>{var Ss,Ns,ke,dt,et;const Xt=((Ss=Oe.actualEquipment)==null?void 0:Ss.eqtClCd)||Oe.eqtClCd||((Ns=Oe.actualEquipment)==null?void 0:Ns.EQT_CL_CD)||"",rs=((ke=Oe.actualEquipment)==null?void 0:ke.itemMidCd)||Oe.itemMidCd||((dt=Oe.actualEquipment)==null?void 0:dt.ITEM_MID_CD)||"",ds=(((et=Oe.actualEquipment)==null?void 0:et.type)||Oe.type||"").toLowerCase();return!!(Xt.startsWith("0904")||rs==="02"||ds.includes("stb")||ds.includes(""))},De=Oe=>{var Ss,Ns,ke,dt,et;const Xt=((Ss=Oe.actualEquipment)==null?void 0:Ss.eqtClCd)||Oe.eqtClCd||((Ns=Oe.actualEquipment)==null?void 0:Ns.EQT_CL_CD)||"",rs=((ke=Oe.actualEquipment)==null?void 0:ke.itemMidCd)||Oe.itemMidCd||((dt=Oe.actualEquipment)==null?void 0:dt.ITEM_MID_CD)||"",ds=(((et=Oe.actualEquipment)==null?void 0:et.type)||Oe.type||"").toLowerCase();return!!(Xt.startsWith("0902")||rs==="03"||ds.includes("modem")||ds.includes(""))},it=T.find(tt),St=T.find(De),Lt=((_e=it==null?void 0:it.actualEquipment)==null?void 0:_e.id)||"",Ve=((xe=St==null?void 0:St.actualEquipment)==null?void 0:xe.id)||"",kt=await Su(de,t.CTRT_ID||"",t.id,"SMR03",Lt||((Pe=(Ue=T[0])==null?void 0:Ue.actualEquipment)==null?void 0:Pe.id)||"",Ve||"");kt.O_IFSVC_RESULT&&kt.O_IFSVC_RESULT.startsWith("TRUE")?(Y(g,` 

: ${kt.O_IFSVC_RESULT||""}`),$(g,"success")):(Y(g,` 

${kt.MESSAGE||"   "}`),$(g,"fail"))}catch(Ye){Y(g,` 

${Ye.message||"   "}`),$(g,"fail")}finally{st(!1)}},rt=(_e,xe,Ue)=>{const Pe={...I,[_e]:{...I[_e]||{},[xe]:Ue==="1"?"0":"1"}};K(g,Pe)},at=()=>{const _e=new Set(T.map(Ue=>Ue.actualEquipment.id));let xe=se.filter(Ue=>!_e.has(Ue.id));return H&&(xe=xe.filter(Ue=>Ue.itemMidCd===H.itemMidCd&&Ue.model===H.model)),xe},It=()=>{const _e=new Set(T.map(Ue=>Ue.actualEquipment.id));let xe=U.filter(Ue=>!_e.has(Ue.id));return H&&(xe=xe.filter(Ue=>Ue.itemMidCd===H.itemMidCd&&Ue.model===H.model)),xe},ht=()=>{lt(!0),setTimeout(()=>{lt(!1),r==null||r("    .","info")},500)},Je=async()=>{if(!(At||N)){ot(!0);try{await We(!0),r==null||r("  .","success")}catch(_e){console.error("[-AS]  :",_e),r==null||r("   .","error")}finally{ot(!1)}}},ve=at();return It(),s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[At&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsxs("button",{onClick:Je,disabled:At||N,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${At||N?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(Ei,{className:`w-3.5 h-3.5 ${At?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[w.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{if(N)return;const _e=t.CTRT_STAT;if(_e&&_e!=="20"){r==null||r("A/S   (20)   .","warning");return}ie(!0)},disabled:N,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":p?"border-yellow-300 bg-yellow-100 text-yellow-700":y?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>f==null?void 0:f(),disabled:p||N,children:[p?s.jsx(jn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":ae==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":ae==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!N&&!Se&&Fe(),disabled:N||Se,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300 transition-all active:scale-95 min-h-[56px]",onClick:()=>d?Te(!0):je(!0),children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:d?"LDAP":""})]})]})]}),ce?w.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:w.map(_e=>{const xe=T.find(Pe=>Pe.contractEquipment.id===_e.id&&Pe.actualEquipment.eqtClCd===_e.eqtClCd),Ue=(H==null?void 0:H.id)===_e.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${N?xe?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":Ue?"border-blue-500 bg-blue-50 cursor-pointer":xe?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!N&&Dt(_e),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:_e.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:_e.model})]}),xe&&(()=>{const Pe=se.some(Ye=>Ye.id===xe.actualEquipment.id);return s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",xe.actualEquipment.model]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Pe?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:Pe?"":""})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",xe.actualEquipment.serialNumber]}),xe.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",xe.macAddress]})]})})()]})},_e.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!N&&s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!q||!T.some(_e=>_e.actualEquipment.id===(q==null?void 0:q.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!q)return;if(se.some(Ye=>Ye.id===q.id)){if(me!=="stock"){r==null||r("  .   .","warning");return}const Ye=T.findIndex(mt=>mt.actualEquipment.id===q.id);if(Ye>=0){const mt=[...T];mt.splice(Ye,1),k(g,mt),W(g,null),console.log("=== [-]     ==="),console.log(":",mt.map(de=>({type:de.actualEquipment.type,model:de.actualEquipment.model,serialNumber:de.actualEquipment.serialNumber,id:de.actualEquipment.id}))),console.log(":",U.map(de=>({type:de.type,model:de.model,serialNumber:de.serialNumber,id:de.id,removalStatus:I[de.id]||{}}))),r==null||r("  .","success")}return}const xe=T.findIndex(Ye=>Ye.actualEquipment.id===q.id);let Ue=[...T],Pe=[...U];if(xe>=0){const mt=Ue.splice(xe,1)[0].actualEquipment;Pe.some(tt=>tt.id===mt.id)||(Pe=[...Pe,mt])}console.log("=== [-]     ==="),console.log(":",Ue.map(Ye=>({type:Ye.actualEquipment.type,model:Ye.actualEquipment.model,serialNumber:Ye.actualEquipment.serialNumber,id:Ye.actualEquipment.id}))),console.log(":",Pe.map(Ye=>({type:Ye.type,model:Ye.model,serialNumber:Ye.serialNumber,id:Ye.id,removalStatus:I[Ye.id]||{}}))),$e(),he("removal")},disabled:!q||!T.some(_e=>_e.actualEquipment.id===(q==null?void 0:q.id)),children:s.jsx(Th,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!q||T.some(_e=>_e.actualEquipment.id===(q==null?void 0:q.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!q)return;if(U.some(de=>de.id===q.id)){if(H&&(H.itemMidCd!==q.itemMidCd||H.eqtClCd!==q.eqtClCd)){r==null||r("      .","warning");return}const de=H||w.find(De=>De.itemMidCd===q.itemMidCd&&De.eqtClCd===q.eqtClCd);if(!de){r==null||r("      .   .","warning");return}if(T.find(De=>De.contractEquipment.id===de.id&&!se.some(it=>it.id===De.actualEquipment.id))){r==null||r("   .","warning");return}if(de){const De={contractEquipment:de,actualEquipment:q,macAddress:q.macAddress},it=[...T,De],St=U.filter(Ve=>Ve.id!==q.id);k(g,it),ee(g,St);const Lt={...I};delete Lt[q.id],K(g,Lt),W(g,null),console.log("=== [-]     ==="),console.log(":",it.map(Ve=>({type:Ve.actualEquipment.type,model:Ve.actualEquipment.model,serialNumber:Ve.actualEquipment.serialNumber,id:Ve.actualEquipment.id}))),console.log(":",St.map(Ve=>({type:Ve.type,model:Ve.model,serialNumber:Ve.serialNumber,id:Ve.id,removalStatus:Lt[Ve.id]||{}}))),r==null||r("   .","success")}else r==null||r("    .","error");return}if(!H){r==null||r("   .","warning");return}const xe=T.find(de=>de.contractEquipment.itemMidCd===H.itemMidCd&&!se.some(tt=>tt.id===de.actualEquipment.id)),Ue=xe&&U.some(de=>de.id===xe.actualEquipment.id);if(xe&&!Ue){r==null||r("   .","warning");return}const Pe={contractEquipment:H,actualEquipment:q,macAddress:q.macAddress||""},Ye=T.findIndex(de=>de.contractEquipment.id===H.id);let mt;Ye>=0?(mt=[...T],mt[Ye]=Pe):mt=[...T,Pe],console.log("=== [-]     ==="),console.log(":",mt.map(de=>({type:de.actualEquipment.type,model:de.actualEquipment.model,serialNumber:de.actualEquipment.serialNumber,id:de.actualEquipment.id}))),console.log(":",U.map(de=>({type:de.type,model:de.model,serialNumber:de.serialNumber,id:de.id,removalStatus:I[de.id]||{}}))),Rt()},disabled:!q||T.some(_e=>_e.actualEquipment.id===(q==null?void 0:q.id)),children:s.jsx(Eh,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!N&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${me==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>he("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),U.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${me==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:U.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${me==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>he("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),H&&ve.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${me==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:ve.length})]})})]}),me==="removal"?s.jsx(s.Fragment,{children:U.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:U.map((_e,xe)=>{const Ue=_e.id,Pe=I[Ue]||{},Ye=Pe.EQT_LOSS_YN==="1"||Pe.PART_LOSS_BRK_YN==="1"||Pe.EQT_BRK_YN==="1"||Pe.EQT_CABL_LOSS_YN==="1"||Pe.EQT_CRDL_LOSS_YN==="1",mt=(q==null?void 0:q.id)===_e.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${mt?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>Et(_e),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:_e.type}),s.jsx("div",{className:"text-xs text-gray-600",children:_e.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",_e.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${Ye?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:Ye?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(de=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${Pe[de.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:tt=>{tt.stopPropagation(),rt(Ue,de.key,Pe[de.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:Pe[de.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:de.label})]},de.key))})]},Ue||xe)})})}):s.jsx(s.Fragment,{children:H?ve.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:ve.map(_e=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(q==null?void 0:q.id)===_e.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>Et(_e),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:_e.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:_e.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",_e.serialNumber]}),_e.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",_e.macAddress]})]})]}),(q==null?void 0:q.id)===_e.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},_e.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var Pe;const _e=t.WRK_CD_NM||Uh(t.WRK_CD)||t.workType||"-",xe=t.PROD_NM||t.productName||((Pe=t.customer)==null?void 0:Pe.productName)||"-",Ue=t.CTRT_STAT_NM||Cu(t.CTRT_STAT)||"-";return s.jsx(Ah,{isOpen:Z,onClose:()=>ie(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:Ue,prodGrp:t.PROD_GRP||"",prodNm:xe,wrkCdNm:_e,onSave:gt,showToast:r,installedEquipmentCount:T.length})})(),!N&&s.jsx("button",{onClick:ht,disabled:Nt,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${Nt?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(Ih,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(Ba,{isOpen:te,onClose:()=>je(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((Ge=t.customer)==null?void 0:Ge.id)}),s.jsx(kh,{isOpen:be,onClose:()=>Te(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),re&&vu.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!Se&&pe(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:_e=>_e.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:Se?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(jn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):ae==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(jh,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:fe})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(Lo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:fe})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${ae==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>pe(!1),disabled:Se,children:Se?" ...":""})})]})}),document.body)]})},zU=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u="",onLdapConnect:f,isLdapDone:m=!1,ldapLoading:p=!1,ldapBlocked:y=!1})=>{var Je;const g=t.id,N=c||t.WRK_STAT_CD==="4"||t.status==="",C=t.WRK_DTL_TCD==="0440",{setFilteringData:v}=$i(),{initWorkState:R,setApiData:A,setDataLoaded:M,addInstalledEquipment:L,removeInstalledEquipment:k,setInstalledEquipments:V,setSelectedContract:G,setSelectedStock:W,clearSelection:j,toggleRemovalStatus:S,setFullRemovalStatus:P,addMarkedForRemoval:F,removeMarkedForRemoval:ee,setMarkedForRemoval:J,setSignalStatus:$,setSignalResult:Y}=ji(),{contractEquipments:K,technicianEquipments:w,removeEquipments:se,installedEquipments:oe,markedForRemoval:T,removalStatus:I,selectedContract:U,selectedStock:Q,signalStatus:H,signalResult:q,filteringData:ae,isReady:fe}=oa(g),[ge,ce]=_.useState(0),[Re,X]=_.useState("removal"),[me,he]=_.useState(!1),[Z,ie]=_.useState(!1),[te,je]=_.useState(!1),[be,Te]=_.useState(!1),[re,pe]=_.useState(!1),[Se,st]=_.useState(!1),[Nt,lt]=_.useState(!1);_.useEffect(()=>{if(fe&&(oe.length>0||T.length>0||K.length>0)){console.log("[-]    -   ");return}R(g),At()},[t.id]);const At=async(ve=!1)=>{var Ge,_e,xe,Ue,Pe;try{let Ye;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!ve)console.log("[-Suspension] Pre-loaded   -",i.contractEquipments.length," "),Ye=i;else{ve?console.log("[-Suspension]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-Suspension] preloadedApiData   - API ");const Oe=localStorage.getItem("userInfo");if(!Oe){console.error("  .");return}const Xt=JSON.parse(Oe),rs=Ig(t.WRK_CD),ds={WRKR_ID:t.WRKR_ID||Xt.userId||Xt.workerId||"",SO_ID:t.SO_ID||Xt.soId,WRK_ID:t.id,CUST_ID:((Ge=t.customer)==null?void 0:Ge.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:rs,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-Suspension] API :",ds),Ye=await to(ds),ve&&l&&(console.log("[-Suspension]   preloadedData "),l(Ye))}console.log("[-Suspension] API :",{contractEquipments:((_e=Ye.contractEquipments)==null?void 0:_e.length)||0,technicianEquipments:((xe=Ye.technicianEquipments)==null?void 0:xe.length)||0,customerEquipments:((Ue=Ye.customerEquipments)==null?void 0:Ue.length)||0,removedEquipments:((Pe=Ye.removedEquipments)==null?void 0:Pe.length)||0});const de={kpiProdGrpCd:Ye.kpiProdGrpCd,prodChgGb:Ye.prodChgGb,chgKpiProdGrpCd:Ye.chgKpiProdGrpCd,prodGrp:Ye.prodGrp};v(de),window.__equipmentFilterData=de;const tt=(Ye.contractEquipments||[]).map(Oe=>({id:Oe.SVC_CMPS_ID||Oe.PROD_CMPS_ID,type:Oe.ITEM_MID_NM||Oe.EQT_NM,model:Oe.EQT_CL_NM,serialNumber:"N/A",itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,PROD_CD:Oe.PROD_CD,SVC_CD:Oe.SVC_CD})),De=(Ye.technicianEquipments||[]).map(Oe=>({id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:Oe.EQT_PROD_CMPS_ID,PROD_CD:Oe.PROD_CD,SVC_CD:Oe.SVC_CD,EQT_SALE_AMT:Oe.EQT_SALE_AMT,MST_SO_ID:Oe.MST_SO_ID,SO_ID:Oe.SO_ID,OLD_LENT_YN:Oe.OLD_LENT_YN,LENT:Oe.LENT,LENT_YN:Oe.LENT_YN,ITLLMT_PRD:Oe.ITLLMT_PRD,EQT_USE_STAT_CD:Oe.EQT_USE_STAT_CD})),it=new Set,St=(Ye.customerEquipments||[]).map(Oe=>{const Xt=tt.find(rs=>rs.itemMidCd===Oe.ITEM_MID_CD&&!it.has(rs.id));return Xt&&it.add(Xt.id),{contractEquipment:Xt||{id:"unknown",type:Oe.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:Oe.ITEM_MID_CD},actualEquipment:{id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,LENT_YN:Oe.LENT_YN,VOIP_CUSTOWN_EQT:Oe.VOIP_CUSTOWN_EQT},macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,installLocation:Oe.INSTL_LCTN}}),Lt=(Ye.removedEquipments||[]).map(Oe=>({id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,installLocation:Oe.INSTL_LCTN,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,MST_SO_ID:Oe.MST_SO_ID,SO_ID:Oe.SO_ID,LENT_YN:Oe.LENT_YN,VOIP_CUSTOWN_EQT:Oe.VOIP_CUSTOWN_EQT}));A(g,{contractEquipments:tt,technicianEquipments:De,removeEquipments:Lt,filteringData:de}),ce(St.length);const Ve=T||[],kt=oe||[];if(St.length>0)if(console.log("[-Suspension] API    :",St.length,""),Ve.length>0){console.log("[-Suspension] Zustand  :",Ve.length,"");const Oe=new Set(Ve.map(rs=>rs.id)),Xt=St.filter(rs=>!Oe.has(rs.actualEquipment.id));console.log("[-Suspension]     :",Xt.length,""),V(g,Xt)}else{const Oe=new Set(tt.map(ds=>ds.SVC_CMPS_ID).filter(Boolean)),Xt=[],rs=[];St.forEach(ds=>{const Ss=ds.actualEquipment.SVC_CMPS_ID,Ns=ds.actualEquipment.EQT_KND;Ss&&!Oe.has(Ss)&&Ns==="CUST"?Xt.push(ds.actualEquipment):rs.push(ds)}),Xt.length>0?(console.log("[-Suspension]  :      :",Xt.length,""),J(g,Xt),V(g,rs)):V(g,St)}else kt.length>0&&console.log("[-Suspension] Zustand  :",kt.length,"");requestAnimationFrame(()=>M(g,!0))}catch(Ye){console.error("[-Suspension]    :",Ye),requestAnimationFrame(()=>M(g,!0))}},ot=async(ve,Ge)=>{try{const _e=localStorage.getItem("userInfo");if(!_e){r==null||r("  .","error");return}const xe=JSON.parse(_e),Ue=ve.map((Ye,mt)=>{let de=Ye.ITEM_MID_CD||Ye.ITM_MID_CD||Ye.EQT||Ye.EQT_CD||"",tt=Ye.EQT_CL||Ye.EQT_CL_CD||"",De=Ye.SVC_CMPS_ID||Ye.PROD_CMPS_ID||Ye.SVC_CMPS_SEQ||Ye.EQUIP_SEQ||"";return de=String(de).trim().padStart(2,"0"),tt=String(tt).trim().padStart(6,"0"),De=String(De||mt+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||xe.crrId||"",WRKR_ID:t.WRKR_ID||xe.userId||xe.workerId||"",REG_UID:xe.userId||xe.workerId||"A20130708",ITEM_MID_CD:de,EQT_CL:tt,SVC_CMPS_ID:De,EQT:de,EQT_CD:de,LENT:String(Ye.LENT||"10"),EQT_USE_STAT_CD:String(Ye.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(Ye.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(Ye.EQT_SALE_AMT||0),PROD_GRP:String(Ye.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(Ye.PROD_CD||t.PROD_CD||""),SVC_CD:String(Ye.SVC_CD||""),PROM_CNT:Ge||"",SEL:"1",EQT_BASIC_YN:String(Ye.EQT_BASIC_YN||"N"),PROD_TYP:Ye.PROD_TYP,EQUIP_SEQ:Ye.EQUIP_SEQ}}),Pe=await Mh({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:Ge||"",equipments:Ue});if(Pe.MSGCODE==="SUCCESS"||Pe.MSGCODE==="0"||Pe.code==="SUCCESS")r==null||r("  .","success"),V(g,[]),J(g,[]),j(g),await At(!0);else throw new Error(Pe.MESSAGE||Pe.message||"   .")}catch(_e){throw console.error("[-]    :",_e),r==null||r(_e.message||"     .","error",!0),_e}},We=ve=>{const Ge=oe.find(_e=>_e.contractEquipment.id===ve.id);(U==null?void 0:U.id)===ve.id?(G(g,null),W(g,null)):(G(g,ve),Ge?W(g,Ge.actualEquipment):W(g,null))},Dt=()=>{if(!U||!Q)return;if(U.itemMidCd!==Q.itemMidCd||U.model!==Q.model){r==null||r("      .","warning");return}if(T.some(Ue=>Ue.id===Q.id)){Rt(Q);return}const Ge=oe.find(Ue=>Ue.contractEquipment.id===U.id&&!w.some(Pe=>Pe.id===Ue.actualEquipment.id)),_e=Ge&&T.some(Ue=>Ue.id===Ge.actualEquipment.id);if(Ge&&!_e){r==null||r("   .","warning");return}const xe=oe.findIndex(Ue=>Ue.contractEquipment.id===U.id);if(xe>=0){const Ue=[...oe];Ue[xe]={contractEquipment:U,actualEquipment:Q,macAddress:Q.macAddress||"",installLocation:""},V(g,Ue)}else{const Ue={contractEquipment:U,actualEquipment:Q,macAddress:Q.macAddress||"",installLocation:""};V(g,[...oe,Ue])}$(g,"idle"),W(g,null)},Et=()=>{if(!Q)return;const ve=oe.findIndex(xe=>xe.actualEquipment.id===Q.id);if(ve>=0){const xe=[...oe],Ue=xe.splice(ve,1)[0];V(g,xe);const Pe=Ue.actualEquipment;T.some(mt=>mt.id===Pe.id)||F(g,Pe),$(g,"idle"),W(g,null);return}if(T.some(xe=>xe.id===Q.id))return;se.some(xe=>xe.id===Q.id)&&F(g,Q)},Rt=ve=>{if(T.findIndex(Pe=>Pe.id===ve.id)===-1){r==null||r("       .","error");return}if(U&&(U.itemMidCd!==ve.itemMidCd||U.model!==ve.model)){r==null||r("      .","warning");return}const _e=U||K.find(Pe=>Pe.itemMidCd===ve.itemMidCd&&Pe.model===ve.model);if(!_e){r==null||r("      .","warning");return}if(_e&&oe.find(Ye=>Ye.contractEquipment.id===_e.id&&!w.some(mt=>mt.id===Ye.actualEquipment.id))){r==null||r("   .","warning");return}const xe={contractEquipment:_e,actualEquipment:{...ve,EQT_CHG_GB:"3"},macAddress:ve.macAddress};V(g,[...oe,xe]),ee(g,ve.id);const Ue={...I};delete Ue[ve.id],P(g,Ue),W(g,null),console.log("[-Suspension]  :",ve.model||ve.type),r==null||r(" .","success")},$e=async()=>{var ve,Ge,_e,xe;if(oe.length===0){r==null||r("    .","warning"),$(g,"fail");return}try{st(!0),pe(!0),Y(g," ...");const Ue=localStorage.getItem("userInfo");if(!Ue){Y(g,"    ."),$(g,"fail"),st(!1);return}const Pe=JSON.parse(Ue),Ye=Pe.userId||Pe.id||"UNKNOWN",mt=Ve=>{var rs,ds,Ss,Ns,ke;const kt=((rs=Ve.actualEquipment)==null?void 0:rs.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",Oe=((Ss=Ve.actualEquipment)==null?void 0:Ss.itemMidCd)||Ve.itemMidCd||((Ns=Ve.actualEquipment)==null?void 0:Ns.ITEM_MID_CD)||"",Xt=(((ke=Ve.actualEquipment)==null?void 0:ke.type)||Ve.type||"").toLowerCase();return!!(kt.startsWith("0904")||Oe==="02"||Xt.includes("stb")||Xt.includes(""))},de=Ve=>{var rs,ds,Ss,Ns,ke;const kt=((rs=Ve.actualEquipment)==null?void 0:rs.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",Oe=((Ss=Ve.actualEquipment)==null?void 0:Ss.itemMidCd)||Ve.itemMidCd||((Ns=Ve.actualEquipment)==null?void 0:Ns.ITEM_MID_CD)||"",Xt=(((ke=Ve.actualEquipment)==null?void 0:ke.type)||Ve.type||"").toLowerCase();return!!(kt.startsWith("0902")||Oe==="03"||Xt.includes("modem")||Xt.includes(""))},tt=oe.find(mt),De=oe.find(de),it=((ve=tt==null?void 0:tt.actualEquipment)==null?void 0:ve.id)||"",St=((Ge=De==null?void 0:De.actualEquipment)==null?void 0:Ge.id)||"",Lt=await Su(Ye,t.CTRT_ID||"",t.id,"SMR03",it||((xe=(_e=oe[0])==null?void 0:_e.actualEquipment)==null?void 0:xe.id)||"",St||"");Lt.O_IFSVC_RESULT&&Lt.O_IFSVC_RESULT.startsWith("TRUE")?(Y(g,` 

: ${Lt.O_IFSVC_RESULT||""}`),$(g,"success")):(Y(g,` 

${Lt.MESSAGE||"   "}`),$(g,"fail"))}catch(Ue){Y(g,` 

${Ue.message||"   "}`),$(g,"fail")}finally{st(!1)}},gt=(ve,Ge,_e)=>{const xe={...I,[ve]:{...I[ve]||{},[Ge]:_e==="1"?"0":"1"}};P(g,xe)},Fe=ve=>{(Q==null?void 0:Q.id)===ve.id?W(g,null):W(g,ve)},rt=()=>{const ve=new Set(oe.map(_e=>_e.actualEquipment.id));let Ge=w.filter(_e=>!ve.has(_e.id));return U&&(Ge=Ge.filter(_e=>_e.itemMidCd===U.itemMidCd&&_e.model===U.model)),Ge},at=()=>{Te(!0),setTimeout(()=>{Te(!1),r==null||r("    .","info")},500)},It=async()=>{if(!(Nt||N)){lt(!0);try{await At(!0),r==null||r("  .","success")}catch(ve){console.error("[-]  :",ve),r==null||r("   .","error")}finally{lt(!1)}}},ht=rt();return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[Nt&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsxs("button",{onClick:It,disabled:Nt||N,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${Nt||N?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(Ei,{className:`w-3.5 h-3.5 ${Nt?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[K.length,""]})]}),s.jsxs("div",{className:`grid gap-2 ${C?"grid-cols-3":"grid-cols-1"}`,children:[C&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{N||je(!0)},disabled:N,children:[s.jsx(fb,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":p?"border-yellow-300 bg-yellow-100 text-yellow-700":y?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>f==null?void 0:f(),disabled:p||N,children:[p?s.jsx(jn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":H==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":H==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!N&&!Se&&$e(),disabled:N||Se,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>d?ie(!0):he(!0),children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:d?"LDAP":""})]})]})]}),fe?K.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:K.map(ve=>{const Ge=oe.find(xe=>xe.contractEquipment.id===ve.id),_e=(U==null?void 0:U.id)===ve.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${N?Ge?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":C?_e?"border-blue-500 bg-blue-50 cursor-pointer":Ge?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer":Ge?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default"}`,onClick:()=>!N&&We(ve),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:ve.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:ve.model})]}),Ge&&(()=>{const xe=w.some(Ue=>Ue.id===Ge.actualEquipment.id);return s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",Ge.actualEquipment.model]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${xe?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:xe?"":""})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",Ge.actualEquipment.serialNumber]}),Ge.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",Ge.macAddress]})]})})()]})},ve.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!N&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!Q||!oe.some(ve=>ve.actualEquipment.id===Q.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!Q)return;if(w.some(Ge=>Ge.id===Q.id)){const Ge=oe.findIndex(_e=>_e.actualEquipment.id===Q.id);if(Ge>=0){const _e=[...oe];_e.splice(Ge,1),V(g,_e),W(g,null),r==null||r("  .","success")}return}Et(),X("removal")},disabled:!Q||!oe.some(ve=>ve.actualEquipment.id===Q.id),children:s.jsx(Th,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),C&&s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!U||!Q||oe.some(ve=>ve.actualEquipment.id===Q.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:Dt,disabled:!U||!Q||oe.some(ve=>ve.actualEquipment.id===Q.id),children:s.jsx(Eh,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!N&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Re==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>X("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),T.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Re==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:T.length})]})}),C&&s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Re==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>X("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),U&&ht.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Re==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:ht.length})]})})]}),Re==="removal"?s.jsx(s.Fragment,{children:T.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:T.map((ve,Ge)=>{const _e=ve.id,xe=I[_e]||{},Ue=xe.EQT_LOSS_YN==="1"||xe.PART_LOSS_BRK_YN==="1"||xe.EQT_BRK_YN==="1"||xe.EQT_CABL_LOSS_YN==="1"||xe.EQT_CRDL_LOSS_YN==="1",Pe=(Q==null?void 0:Q.id)===ve.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Pe?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>Fe(ve),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:ve.type}),s.jsx("div",{className:"text-xs text-gray-600",children:ve.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",ve.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${Ue?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:Ue?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(Ye=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${xe[Ye.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:mt=>{mt.stopPropagation(),gt(_e,Ye.key,xe[Ye.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:xe[Ye.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:Ye.label})]},Ye.key))})]},_e||Ge)})})}):s.jsx(s.Fragment,{children:U?ht.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:ht.map(ve=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(Q==null?void 0:Q.id)===ve.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>Fe(ve),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:ve.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:ve.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",ve.serialNumber]}),ve.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",ve.macAddress]})]})]}),(Q==null?void 0:Q.id)===ve.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},ve.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),!N&&C&&s.jsx("button",{onClick:at,disabled:be,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${be?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(Ih,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(Ba,{isOpen:me,onClose:()=>he(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((Je=t.customer)==null?void 0:Je.id)}),s.jsx(kh,{isOpen:Z,onClose:()=>ie(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),C&&(()=>{const ve=t.PROD_NM||t.details||"-",Ge=t.WRK_CD_NM||Uh(t.WRK_CD)||"-";return s.jsx(Ah,{isOpen:te,onClose:()=>je(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",prodGrp:t.PROD_GRP||"",prodNm:ve,wrkCdNm:Ge,onSave:ot,showToast:r,installedEquipmentCount:oe.length})})(),re&&vu.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!Se&&pe(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:ve=>ve.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:Se?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(jn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):H==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(jh,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:q})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(Lo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:q})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${H==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>pe(!1),disabled:Se,children:Se?" ...":""})})]})}),document.body)]})},qU=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u="",onLdapConnect:f,isLdapDone:m=!1,ldapLoading:p=!1,ldapBlocked:y=!1})=>{var ht;const g=t.id,N=c||t.WRK_STAT_CD==="4"||t.status==="",[C,v]=_.useState(""),{setFilteringData:R}=$i(),{initWorkState:A,setApiData:M,setDataLoaded:L,setInstalledEquipments:k,setSelectedContract:V,setSelectedStock:G,toggleRemovalStatus:W,setFullRemovalStatus:j,addMarkedForRemoval:S,removeMarkedForRemoval:P,setMarkedForRemoval:F,setSignalStatus:ee,setSignalResult:J}=ji(),{contractEquipments:$,technicianEquipments:Y,removeEquipments:K,installedEquipments:w,markedForRemoval:se,removalStatus:oe,pendingLossStatusList:T,selectedContract:I,selectedStock:U,signalStatus:Q,signalResult:H,filteringData:q,isReady:ae}=oa(g),[fe,ge]=_.useState(0),[ce,Re]=_.useState("removal"),[X,me]=_.useState(!1),[he,Z]=_.useState(!1),[ie,te]=_.useState(!1),[je,be]=_.useState(!1),[Te,re]=_.useState(!1),[pe,Se]=_.useState(!1),[st,Nt]=_.useState(!1),[lt,At]=_.useState("");_.useEffect(()=>{const Je=t.DTL_CTRT_ID||t.CTRT_ID;Je&&u5(Je,t.CUST_ID).then(ve=>{ve!=null&&ve.BASIC_PROD_CD_NM&&At(ve.BASIC_PROD_CD_NM)})},[t.DTL_CTRT_ID,t.CTRT_ID,t.CUST_ID]),_.useEffect(()=>{if(ae&&(w.length>0||se.length>0||$.length>0)){console.log("[-]    -   ");return}A(g),ot()},[t.id]);const ot=async(Je=!1)=>{var ve,Ge,_e,xe,Ue;try{let Pe;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Je)console.log("[Equipment-ProductChange] Using preloadedApiData with",i.contractEquipments.length,"contract equipments"),Pe=i;else{Je?console.log("[Equipment-ProductChange] Force refresh - calling API"):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[Equipment-ProductChange] preloadedApiData has no contract equipments, calling API fresh");const Oe=localStorage.getItem("userInfo");if(!Oe){console.error("User info not found");return}const Xt=JSON.parse(Oe),rs=t.DTL_CTRT_ID||t.CTRT_ID,ds={WRKR_ID:t.WRKR_ID||Xt.userId||Xt.workerId||"",SO_ID:t.SO_ID||Xt.soId,WRK_ID:t.id,CUST_ID:((ve=t.customer)==null?void 0:ve.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:rs,OLD_CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"05",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[Equipment-ProductChange] API call (DTL_CTRT_ID ):",ds),Pe=await to(ds),Je&&l&&(console.log("[Equipment-ProductChange] Updating parent preloadedData"),l(Pe))}console.log("[Equipment-ProductChange] API response:",{contractEquipments:((Ge=Pe.contractEquipments)==null?void 0:Ge.length)||0,technicianEquipments:((_e=Pe.technicianEquipments)==null?void 0:_e.length)||0,customerEquipments:((xe=Pe.customerEquipments)==null?void 0:xe.length)||0,removedEquipments:((Ue=Pe.removedEquipments)==null?void 0:Ue.length)||0});const mt={kpiProdGrpCd:Pe.kpiProdGrpCd,prodChgGb:Pe.prodChgGb,chgKpiProdGrpCd:Pe.chgKpiProdGrpCd,prodGrp:Pe.prodGrp};R(mt),window.__equipmentFilterData=mt;const de=(Pe.contractEquipments||[]).map(Oe=>({id:Oe.SVC_CMPS_ID||Oe.PROD_CMPS_ID,type:Oe.ITEM_MID_NM||Oe.EQT_NM,model:Oe.EQT_CL_NM,serialNumber:"N/A",itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,PROD_CD:Oe.PROD_CD,SVC_CD:Oe.SVC_CD})),tt=Pe.chgResnCd||t.CHG_RESN_CD||"";v(tt);let De=(Pe.technicianEquipments||[]).map(Oe=>({id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:Oe.EQT_PROD_CMPS_ID,PROD_CD:Oe.PROD_CD,SVC_CD:Oe.SVC_CD,EQT_SALE_AMT:Oe.EQT_SALE_AMT,MST_SO_ID:Oe.MST_SO_ID,SO_ID:Oe.SO_ID,OLD_LENT_YN:Oe.OLD_LENT_YN,LENT:Oe.LENT,LENT_YN:Oe.LENT_YN,ITLLMT_PRD:Oe.ITLLMT_PRD,EQT_USE_STAT_CD:Oe.EQT_USE_STAT_CD,BAR_CD:Oe.BAR_CD,CHG_RESN_CD:Oe.CHG_RESN_CD}));tt==="H08"&&(De=De.filter(Oe=>(Oe.itemMidCd!=="04",!0)),console.log("[Equipment-ProductChange] CHG_RESN_CD=H08 (ARPU) - STB BAR_CD  "));const it=new Set,St=(Pe.customerEquipments||[]).map(Oe=>{const Xt=de.find(rs=>rs.itemMidCd===Oe.ITEM_MID_CD&&!it.has(rs.id));return Xt&&it.add(Xt.id),{contractEquipment:Xt||{id:"unknown",type:Oe.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:Oe.ITEM_MID_CD},actualEquipment:{id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,LENT_YN:Oe.LENT_YN,VOIP_CUSTOWN_EQT:Oe.VOIP_CUSTOWN_EQT},macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,installLocation:Oe.INSTL_LCTN}}),Lt=(Pe.removedEquipments||[]).map(Oe=>({id:Oe.EQT_NO,type:Oe.ITEM_MID_NM,model:Oe.EQT_CL_NM,serialNumber:Oe.EQT_SERNO,itemMidCd:Oe.ITEM_MID_CD,eqtClCd:Oe.EQT_CL_CD||Oe.EQT_CL,macAddress:Oe.MAC_ADDRESS||Oe.MAC_ADDR,installLocation:Oe.INSTL_LCTN,SVC_CMPS_ID:Oe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Oe.BASIC_PROD_CMPS_ID,MST_SO_ID:Oe.MST_SO_ID,SO_ID:Oe.SO_ID,LENT_YN:Oe.LENT_YN,VOIP_CUSTOWN_EQT:Oe.VOIP_CUSTOWN_EQT}));M(g,{contractEquipments:de,technicianEquipments:De,removeEquipments:Lt,filteringData:mt}),ge(St.length),console.log("[Equipment-ProductChange] ====== Equipment Initialization Started ======");const Ve=w||[],kt=se||[];if(St.length>0?(console.log("[Equipment-ProductChange] Using customer equipment from API:",St.length,"items"),k(g,St)):Ve.length>0&&console.log("[Equipment-ProductChange] Zustand  :",Ve.length,""),Lt.length>0&&kt.length===0)console.log("[Equipment-ProductChange] API output5  markedForRemoval :",Lt.length,""),F(g,Lt);else if(Lt.length>0){const Oe=new Set(kt.map(rs=>rs.id)),Xt=Lt.filter(rs=>!Oe.has(rs.id));Xt.length>0&&(console.log("[Equipment-ProductChange] API output5  :",Xt.length," "),F(g,[...kt,...Xt]))}console.log("[Equipment-ProductChange] ====== Equipment Initialization Complete ======"),requestAnimationFrame(()=>L(g,!0))}catch(Pe){console.error("[Equipment-ProductChange] Failed to load equipment data:",Pe),requestAnimationFrame(()=>L(g,!0))}},We=Je=>{const ve=w.find(Ge=>Ge.contractEquipment.id===Je.id);(I==null?void 0:I.id)===Je.id?(V(g,null),G(g,null)):(V(g,Je),ve?G(g,ve.actualEquipment):G(g,null))},Dt=Je=>{(U==null?void 0:U.id)===Je.id?G(g,null):G(g,Je)},Et=()=>{if(!I||!U)return;if(I.itemMidCd!==U.itemMidCd||I.model!==U.model){r==null||r("      .","warning");return}const Je=K.some(_e=>_e.id===U.id);console.log("[Equipment-ProductChange] Registering equipment:",{contractEquipment:I.type,stockEquipment:`${U.type} (S/N: ${U.serialNumber})`,isReuse:Je});const ve=w.findIndex(_e=>_e.contractEquipment.id===I.id),Ge={...U,EQT_CHG_GB:Je?"3":U.EQT_CHG_GB||"1"};if(ve>=0){const _e=[...w];_e[ve]={contractEquipment:I,actualEquipment:Ge,macAddress:U.macAddress||"",installLocation:""},k(g,_e)}else{const _e={contractEquipment:I,actualEquipment:Ge,macAddress:U.macAddress||"",installLocation:""};k(g,[...w,_e])}Je&&P(g,U.id),ee(g,"idle"),G(g,null)},Rt=()=>{if(!U)return;const Je=w.findIndex(_e=>_e.actualEquipment.id===U.id);if(Je>=0){const _e=[...w],xe=_e.splice(Je,1)[0];k(g,_e);const Ue=xe.actualEquipment;se.some(Ye=>Ye.id===Ue.id)||S(g,Ue),ee(g,"idle"),G(g,null);return}if(se.some(_e=>_e.id===U.id))return;K.some(_e=>_e.id===U.id)&&S(g,U)},$e=async(Je,ve)=>{try{const Ge=localStorage.getItem("userInfo");if(!Ge){r==null||r("  .","error");return}const _e=JSON.parse(Ge),xe=t.DTL_CTRT_ID||t.CTRT_ID,Ue=Je.map((Ye,mt)=>{let de=Ye.ITEM_MID_CD||Ye.ITM_MID_CD||Ye.EQT||Ye.EQT_CD||"",tt=Ye.EQT_CL||Ye.EQT_CL_CD||"",De=Ye.SVC_CMPS_ID||Ye.PROD_CMPS_ID||Ye.SVC_CMPS_SEQ||Ye.EQUIP_SEQ||"";return de=String(de).trim().padStart(2,"0"),tt=String(tt).trim().padStart(6,"0"),De=String(De||mt+1),{CTRT_ID:xe,RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||_e.crrId||"",WRKR_ID:t.WRKR_ID||_e.userId||_e.workerId||"",REG_UID:_e.userId||_e.workerId||"A20130708",ITEM_MID_CD:de,EQT_CL:tt,SVC_CMPS_ID:De,EQT:de,EQT_CD:de,LENT:String(Ye.LENT||"10"),EQT_USE_STAT_CD:String(Ye.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(Ye.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(Ye.EQT_SALE_AMT||0),PROD_GRP:String(Ye.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(Ye.PROD_CD||t.PROD_CD||""),SVC_CD:String(Ye.SVC_CD||""),PROM_CNT:ve||"",SEL:"1",EQT_BASIC_YN:String(Ye.EQT_BASIC_YN||"N"),PROD_TYP:Ye.PROD_TYP,EQUIP_SEQ:Ye.EQUIP_SEQ}}),Pe=await Mh({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:xe,CRR_ID:t.CRR_ID||"",PROM_CNT:ve||"",equipments:Ue});if(Pe.MSGCODE==="SUCCESS"||Pe.MSGCODE==="0"||Pe.code==="SUCCESS")r==null||r("  .","success"),await ot(!0);else throw new Error(Pe.MESSAGE||Pe.message||"   .")}catch(Ge){throw console.error("[] :",Ge),r==null||r(Ge.message||"     .","error",!0),Ge}},gt=async()=>{var Je,ve,Ge,_e;if(w.length===0){r==null||r("    .","warning"),ee(g,"fail");return}try{re(!0),be(!0),J(g," ...");const xe=localStorage.getItem("userInfo");if(!xe){J(g,"    ."),ee(g,"fail"),re(!1);return}const Ue=JSON.parse(xe),Pe=Ue.userId||Ue.id||"UNKNOWN",Ye=Ve=>{var rs,ds,Ss,Ns,ke;const kt=((rs=Ve.actualEquipment)==null?void 0:rs.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",Oe=((Ss=Ve.actualEquipment)==null?void 0:Ss.itemMidCd)||Ve.itemMidCd||((Ns=Ve.actualEquipment)==null?void 0:Ns.ITEM_MID_CD)||"",Xt=(((ke=Ve.actualEquipment)==null?void 0:ke.type)||Ve.type||"").toLowerCase();return!!(kt.startsWith("0904")||Oe==="02"||Xt.includes("stb")||Xt.includes(""))},mt=Ve=>{var rs,ds,Ss,Ns,ke;const kt=((rs=Ve.actualEquipment)==null?void 0:rs.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",Oe=((Ss=Ve.actualEquipment)==null?void 0:Ss.itemMidCd)||Ve.itemMidCd||((Ns=Ve.actualEquipment)==null?void 0:Ns.ITEM_MID_CD)||"",Xt=(((ke=Ve.actualEquipment)==null?void 0:ke.type)||Ve.type||"").toLowerCase();return!!(kt.startsWith("0902")||Oe==="03"||Xt.includes("modem")||Xt.includes(""))},de=w.find(Ye),tt=w.find(mt),De=((Je=de==null?void 0:de.actualEquipment)==null?void 0:Je.id)||"",it=((ve=tt==null?void 0:tt.actualEquipment)==null?void 0:ve.id)||"",St=t.DTL_CTRT_ID||t.CTRT_ID,Lt=await Su(Pe,St,t.id,"SMR03",De||((_e=(Ge=w[0])==null?void 0:Ge.actualEquipment)==null?void 0:_e.id)||"",it||"");Lt.O_IFSVC_RESULT&&Lt.O_IFSVC_RESULT.startsWith("TRUE")?(J(g,` 

: ${Lt.O_IFSVC_RESULT||""}`),ee(g,"success")):(J(g,` 

${Lt.MESSAGE||"   "}`),ee(g,"fail"))}catch(xe){J(g,` 

${xe.message||"   "}`),ee(g,"fail")}finally{re(!1)}},Fe=(Je,ve)=>{W(g,Je,ve)},rt=_.useMemo(()=>{const Je=new Set(w.map(Ge=>Ge.actualEquipment.id));let ve=Y.filter(Ge=>!Je.has(Ge.id));return I&&(ve=ve.filter(Ge=>Ge.itemMidCd===I.itemMidCd&&Ge.model===I.model)),ve},[w,Y,I]);_.useMemo(()=>{const Je=new Set(w.map(Ge=>Ge.actualEquipment.id));let ve=se.filter(Ge=>!Je.has(Ge.id));return I&&(ve=ve.filter(Ge=>Ge.itemMidCd===I.itemMidCd&&Ge.model===I.model)),ve},[w,se,I]);const at=()=>{Se(!0),setTimeout(()=>{Se(!1),r==null||r("    .","info")},500)},It=async()=>{if(!(st||N)){Nt(!0);try{await ot(!0),r==null||r("  .","success")}catch(Je){console.error("[-]  :",Je),r==null||r("   .","error")}finally{Nt(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[st&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:["  ",lt&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",lt,")"]})]}),s.jsxs("button",{onClick:It,disabled:st||N,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${st||N?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(Ei,{className:`w-3.5 h-3.5 ${st?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[$.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{N||me(!0)},disabled:N,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":p?"border-yellow-300 bg-yellow-100 text-yellow-700":y?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>f==null?void 0:f(),disabled:p||N,children:[p?s.jsx(jn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${N?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":Q==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":Q==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!N&&!Te&&gt(),disabled:N||Te,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300 transition-all active:scale-95 min-h-[56px]",onClick:()=>d?te(!0):Z(!0),children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:d?"LDAP":""})]})]})]}),ae?$.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:$.map(Je=>{const ve=w.find(_e=>_e.contractEquipment.id===Je.id),Ge=(I==null?void 0:I.id)===Je.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${N?ve?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":Ge?"border-blue-500 bg-blue-50 cursor-pointer":ve?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!N&&We(Je),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Je.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Je.model})]}),ve&&(()=>{const _e=Y.some(xe=>xe.id===ve.actualEquipment.id);return s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",ve.actualEquipment.model]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${_e?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:_e?"":""})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",ve.actualEquipment.serialNumber]}),ve.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",ve.macAddress]})]})})()]})},Je.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"  ..."})]})})]}),!N&&s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${t.WRK_DTL_TCD==="0510"||!U||!w.some(Je=>Je.actualEquipment.id===(U==null?void 0:U.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(t.WRK_DTL_TCD==="0510"||!U)return;if(Y.some(xe=>xe.id===U.id)){if(ce!=="stock"){r==null||r("  .   .","warning");return}const xe=w.findIndex(Ue=>Ue.actualEquipment.id===U.id);if(xe>=0){const Ue=[...w];Ue.splice(xe,1),k(g,Ue),G(g,null),console.log("=== [-]     ==="),console.log(":",Ue.map(Pe=>({type:Pe.actualEquipment.type,model:Pe.actualEquipment.model,serialNumber:Pe.actualEquipment.serialNumber,id:Pe.actualEquipment.id}))),console.log(":",se.map(Pe=>({type:Pe.type,model:Pe.model,serialNumber:Pe.serialNumber,id:Pe.id,removalStatus:oe[Pe.id]||{}}))),r==null||r("  .","success")}return}const ve=w.findIndex(xe=>xe.actualEquipment.id===U.id);let Ge=[...w],_e=[...se];if(ve>=0){const Ue=Ge.splice(ve,1)[0].actualEquipment;_e.some(Ye=>Ye.id===Ue.id)||(_e=[..._e,Ue])}console.log("=== [-]     ==="),console.log(":",Ge.map(xe=>({type:xe.actualEquipment.type,model:xe.actualEquipment.model,serialNumber:xe.actualEquipment.serialNumber,id:xe.actualEquipment.id}))),console.log(":",_e.map(xe=>({type:xe.type,model:xe.model,serialNumber:xe.serialNumber,id:xe.id,removalStatus:oe[xe.id]||{}}))),Rt(),Re("removal")},disabled:t.WRK_DTL_TCD==="0510"||!U||!w.some(Je=>Je.actualEquipment.id===(U==null?void 0:U.id)),children:s.jsx(Th,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!U||w.some(Je=>Je.actualEquipment.id===(U==null?void 0:U.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!U)return;if(se.some(Ue=>Ue.id===U.id)){if(I&&(I.itemMidCd!==U.itemMidCd||I.eqtClCd!==U.eqtClCd)){r==null||r("      .","warning");return}const Ue=I||$.find(De=>De.itemMidCd===U.itemMidCd&&De.eqtClCd===U.eqtClCd);if(!Ue){r==null||r("      .   .","warning");return}if(w.find(De=>De.contractEquipment.id===Ue.id)){r==null||r("   .","warning");return}const Ye={contractEquipment:Ue,actualEquipment:U,macAddress:U.macAddress},mt=[...w,Ye],de=se.filter(De=>De.id!==U.id);k(g,mt),F(g,de);const tt={...oe};delete tt[U.id],j(g,tt),G(g,null),console.log("=== [-]     ==="),console.log(":",mt.map(De=>({type:De.actualEquipment.type,model:De.actualEquipment.model,serialNumber:De.actualEquipment.serialNumber,id:De.actualEquipment.id}))),console.log(":",de.map(De=>({type:De.type,model:De.model,serialNumber:De.serialNumber,id:De.id,removalStatus:tt[De.id]||{}}))),r==null||r("   .","success");return}if(!I){r==null||r("   .","warning");return}if(w.find(Ue=>Ue.contractEquipment.id===I.id)){r==null||r("   .","warning");return}const Ge={contractEquipment:I,actualEquipment:U,macAddress:U.macAddress||""},_e=w.findIndex(Ue=>Ue.contractEquipment.id===I.id);let xe;_e>=0?(xe=[...w],xe[_e]=Ge):xe=[...w,Ge],console.log("=== [-]     ==="),console.log(":",xe.map(Ue=>({type:Ue.actualEquipment.type,model:Ue.actualEquipment.model,serialNumber:Ue.actualEquipment.serialNumber,id:Ue.actualEquipment.id}))),console.log(":",se.map(Ue=>({type:Ue.type,model:Ue.model,serialNumber:Ue.serialNumber,id:Ue.id,removalStatus:oe[Ue.id]||{}}))),Et()},disabled:!U||w.some(Je=>Je.actualEquipment.id===(U==null?void 0:U.id)),children:s.jsx(Eh,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!N&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${ce==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>Re("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),se.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${ce==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:se.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${ce==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>Re("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),I&&rt.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${ce==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:rt.length})]})})]}),ce==="removal"?s.jsx(s.Fragment,{children:se.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:se.map((Je,ve)=>{const Ge=Je.id,_e=oe[Ge]||{},xe=_e.EQT_LOSS_YN==="1"||_e.PART_LOSS_BRK_YN==="1"||_e.EQT_BRK_YN==="1"||_e.EQT_CABL_LOSS_YN==="1"||_e.EQT_CRDL_LOSS_YN==="1",Ue=(U==null?void 0:U.id)===Je.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Ue?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>Dt(Je),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Je.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Je.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Je.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${xe?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:xe?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(Pe=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${_e[Pe.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:Ye=>{Ye.stopPropagation(),Fe(Ge,Pe.key)},children:[s.jsx("input",{type:"checkbox",checked:_e[Pe.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:Pe.label})]},Pe.key))})]},Ge||ve)})})}):s.jsx(s.Fragment,{children:I?rt.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:rt.map(Je=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(U==null?void 0:U.id)===Je.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>Dt(Je),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Je.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Je.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Je.serialNumber]}),Je.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Je.macAddress]})]})]}),(U==null?void 0:U.id)===Je.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Je.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var _e;const Je=t.WRK_CD_NM||Uh(t.WRK_CD)||t.workType||"-",ve=t.PROD_NM||t.productName||((_e=t.customer)==null?void 0:_e.productName)||"-",Ge=t.CTRT_STAT_NM||Cu(t.CTRT_STAT)||"-";return s.jsx(Ah,{isOpen:X,onClose:()=>me(!1),prodCd:t.PROD_CD||"",ctrtId:t.DTL_CTRT_ID||t.CTRT_ID||"",ctrtStatNm:Ge,prodGrp:t.PROD_GRP||"",prodNm:ve,wrkCdNm:Je,onSave:$e,showToast:r,installedEquipmentCount:w.length,customerEquipmentCount:fe})})(),!N&&s.jsx("button",{onClick:at,disabled:pe,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${pe?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:"Barcode Scan",children:s.jsx(Ih,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(Ba,{isOpen:he,onClose:()=>Z(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID,custId:t.CUST_ID||((ht=t.customer)==null?void 0:ht.id)}),s.jsx(kh,{isOpen:ie,onClose:()=>te(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),je&&vu.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!Te&&be(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Je=>Je.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:Te?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(jn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):Q==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(jh,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:H})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(Lo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:H})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${Q==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>be(!1),disabled:Te,children:Te?" ...":""})})]})}),document.body)]})},XU=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u="",onLdapConnect:f,isLdapDone:m=!1,ldapLoading:p=!1,ldapBlocked:y=!1})=>{var gt;const g=c||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:N}=$i(),C=t.id,{initWorkState:v,setApiData:R,setDataLoaded:A,setInstalledEquipments:M,setMarkedForRemoval:L,addMarkedForRemoval:k,removeMarkedForRemoval:V,setSelectedContract:G,setSelectedStock:W,setSignalStatus:j,setSignalResult:S,setPendingLossStatusList:P,setRemovalStatus:F}=ji(),{contractEquipments:ee,technicianEquipments:J,customerEquipments:$,removeEquipments:Y,installedEquipments:K,markedForRemoval:w,removalStatus:se,pendingLossStatusList:oe,selectedContract:T,selectedStock:I,signalStatus:U,signalResult:Q,isReady:H}=oa(C);$.length;const[q,ae]=_.useState(!1),[fe,ge]=_.useState(!1),[ce,Re]=_.useState(!1),[X,me]=_.useState(!1),[he,Z]=_.useState(!1),[ie,te]=_.useState(!1),[je,be]=_.useState(!1),[Te,re]=_.useState("stock");_.useEffect(()=>{if(H&&(K.length>0||w.length>0||ee.length>0)){console.log("[-]    -   ");return}v(C),pe()},[t.id]);const pe=async(Fe=!1)=>{var rt,at,It,ht,Je;try{let ve;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Fe)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),ve=i;else{Fe?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const De=localStorage.getItem("userInfo");if(!De){console.error("  .");return}const it=JSON.parse(De),St=Ig(t.WRK_CD),Lt={WRKR_ID:t.WRKR_ID||it.userId||it.workerId||"",SO_ID:t.SO_ID||it.soId,WRK_ID:t.id,CUST_ID:((rt=t.customer)==null?void 0:rt.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:St,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-] API :",Lt),ve=await to(Lt),Fe&&l&&(console.log("[-]   preloadedData "),l(ve))}console.log("[-] API :",{contractEquipments:((at=ve.contractEquipments)==null?void 0:at.length)||0,technicianEquipments:((It=ve.technicianEquipments)==null?void 0:It.length)||0,customerEquipments:((ht=ve.customerEquipments)==null?void 0:ht.length)||0,removedEquipments:((Je=ve.removedEquipments)==null?void 0:Je.length)||0});const _e={kpiProdGrpCd:ve.kpiProdGrpCd,prodChgGb:ve.prodChgGb,chgKpiProdGrpCd:ve.chgKpiProdGrpCd,prodGrp:ve.prodGrp};N(_e),window.__equipmentFilterData=_e;const xe=(ve.contractEquipments||[]).map(De=>({id:De.SVC_CMPS_ID||De.PROD_CMPS_ID,type:De.ITEM_MID_NM||De.EQT_NM,model:De.EQT_CL_NM,serialNumber:"N/A",itemMidCd:De.ITEM_MID_CD,eqtClCd:De.EQT_CL_CD||De.EQT_CL,SVC_CMPS_ID:De.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:De.BASIC_PROD_CMPS_ID,PROD_CD:De.PROD_CD,SVC_CD:De.SVC_CD})),Ue=(ve.technicianEquipments||[]).map(De=>({id:De.EQT_NO,type:De.ITEM_MID_NM,model:De.EQT_CL_NM,serialNumber:De.EQT_SERNO,itemMidCd:De.ITEM_MID_CD,eqtClCd:De.EQT_CL_CD||De.EQT_CL,macAddress:De.MAC_ADDRESS,SVC_CMPS_ID:De.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:De.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:De.EQT_PROD_CMPS_ID,PROD_CD:De.PROD_CD,SVC_CD:De.SVC_CD,EQT_SALE_AMT:De.EQT_SALE_AMT,MST_SO_ID:De.MST_SO_ID,SO_ID:De.SO_ID,OLD_LENT_YN:De.OLD_LENT_YN,LENT:De.LENT,LENT_YN:De.LENT_YN,ITLLMT_PRD:De.ITLLMT_PRD,EQT_USE_STAT_CD:De.EQT_USE_STAT_CD})),Pe=new Set,Ye=(ve.customerEquipments||[]).map(De=>{const it=xe.find(St=>St.itemMidCd===De.ITEM_MID_CD&&!Pe.has(St.id));return it&&Pe.add(it.id),{contractEquipment:it||{id:"unknown",type:De.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:De.ITEM_MID_CD},actualEquipment:{id:De.EQT_NO,type:De.ITEM_MID_NM,model:De.EQT_CL_NM,serialNumber:De.EQT_SERNO,itemMidCd:De.ITEM_MID_CD,eqtClCd:De.EQT_CL_CD||De.EQT_CL,macAddress:De.MAC_ADDRESS||De.MAC_ADDR,LENT_YN:De.LENT_YN,VOIP_CUSTOWN_EQT:De.VOIP_CUSTOWN_EQT},macAddress:De.MAC_ADDRESS||De.MAC_ADDR,installLocation:De.INSTL_LCTN}}),mt=(ve.customerEquipments||[]).map(De=>({id:De.EQT_NO,type:De.ITEM_MID_NM,model:De.EQT_CL_NM,serialNumber:De.EQT_SERNO,itemMidCd:De.ITEM_MID_CD,eqtClCd:De.EQT_CL_CD||De.EQT_CL,macAddress:De.MAC_ADDRESS||De.MAC_ADDR,SVC_CMPS_ID:De.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:De.BASIC_PROD_CMPS_ID,LENT_YN:De.LENT_YN,VOIP_CUSTOWN_EQT:De.VOIP_CUSTOWN_EQT})),de=(ve.removedEquipments||[]).map(De=>({id:De.EQT_NO,type:De.ITEM_MID_NM,model:De.EQT_CL_NM,serialNumber:De.EQT_SERNO,itemMidCd:De.ITEM_MID_CD,eqtClCd:De.EQT_CL_CD||De.EQT_CL,macAddress:De.MAC_ADDRESS||De.MAC_ADDR,installLocation:De.INSTL_LCTN,SVC_CMPS_ID:De.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:De.BASIC_PROD_CMPS_ID,MST_SO_ID:De.MST_SO_ID,SO_ID:De.SO_ID,LENT_YN:De.LENT_YN,VOIP_CUSTOWN_EQT:De.VOIP_CUSTOWN_EQT}));R(C,{contractEquipments:xe,technicianEquipments:Ue,customerEquipments:mt,removeEquipments:de,filteringData:_e});const tt=w||[];if(Ye.length>0)if(console.log("[-] API     :",Ye.length,""),tt.length>0){const De=new Set(tt.map(St=>St.id)),it=Ye.filter(St=>!De.has(St.actualEquipment.id));M(C,it)}else M(C,Ye);requestAnimationFrame(()=>A(C,!0))}catch(ve){console.error("[-]    :",ve),requestAnimationFrame(()=>A(C,!0))}},Se=Fe=>Fe?VU.includes(Fe):!1,st=Fe=>{const rt=K.find(at=>at.contractEquipment.id===Fe.id);(T==null?void 0:T.id)===Fe.id?(G(C,null),W(C,null)):(G(C,Fe),rt?W(C,rt.actualEquipment):W(C,null))},Nt=Fe=>{(I==null?void 0:I.id)===Fe.id?W(C,null):W(C,Fe)},lt=()=>{if(!T||!I)return;if(T.itemMidCd!==I.itemMidCd||T.model!==I.model){r==null||r("      .","warning");return}const Fe=I.eqtClCd||I.EQT_CL_CD;if(!Se(Fe)){r==null||r(`     .
`,"error");return}const rt=K.findIndex(at=>at.contractEquipment.id===T.id);if(rt>=0){const at=[...K];at[rt]={contractEquipment:T,actualEquipment:I,macAddress:I.macAddress||"",installLocation:""},M(C,at)}else{const at={contractEquipment:T,actualEquipment:I,macAddress:I.macAddress||"",installLocation:""};M(C,[...K,at])}j(C,"idle"),W(C,null)},At=()=>{if(!I)return;const Fe=I.eqtClCd||I.EQT_CL_CD;if(!Se(Fe)){r==null||r(`     .
`,"error");return}const rt=K.findIndex(ht=>ht.actualEquipment.id===I.id);if(rt>=0){const ht=[...K],Je=ht.splice(rt,1)[0];M(C,ht);const ve=Je.actualEquipment;w.some(_e=>_e.id===ve.id)||k(C,ve),j(C,"idle"),W(C,null),re("removal");return}if(w.some(ht=>ht.id===I.id))return;Y.some(ht=>ht.id===I.id)&&(k(C,I),re("removal"))},ot=async(Fe,rt)=>{try{const at=localStorage.getItem("userInfo");if(!at){r==null||r("  .","error");return}const It=JSON.parse(at),ht=Fe.map((ve,Ge)=>{let _e=ve.ITEM_MID_CD||ve.ITM_MID_CD||ve.EQT||ve.EQT_CD||"",xe=ve.EQT_CL||ve.EQT_CL_CD||"",Ue=ve.SVC_CMPS_ID||ve.PROD_CMPS_ID||ve.SVC_CMPS_SEQ||ve.EQUIP_SEQ||"";return _e=String(_e).trim().padStart(2,"0"),xe=String(xe).trim().padStart(6,"0"),Ue=String(Ue||Ge+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||It.crrId||"",WRKR_ID:t.WRKR_ID||It.userId||It.workerId||"",REG_UID:It.userId||It.workerId||"A20130708",ITEM_MID_CD:_e,EQT_CL:xe,SVC_CMPS_ID:Ue,EQT:_e,EQT_CD:_e,LENT:String(ve.LENT||"10"),EQT_USE_STAT_CD:String(ve.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(ve.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(ve.EQT_SALE_AMT||0),PROD_GRP:String(ve.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(ve.PROD_CD||t.PROD_CD||""),SVC_CD:String(ve.SVC_CD||""),PROM_CNT:rt||"",SEL:"1",EQT_BASIC_YN:String(ve.EQT_BASIC_YN||"N"),PROD_TYP:ve.PROD_TYP,EQUIP_SEQ:ve.EQUIP_SEQ}}),Je=await Mh({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:rt||"",equipments:ht});if(Je.MSGCODE==="SUCCESS"||Je.MSGCODE==="0"||Je.code==="SUCCESS")r==null||r("  .","success"),await pe(!0);else throw new Error(Je.MESSAGE||Je.message||"   .")}catch(at){throw console.error("[] :",at),r==null||r(at.message||"     .","error",!0),at}},We=async()=>{var Fe,rt,at,It;if(K.length===0){r==null||r("    .","warning"),j(C,"fail");return}try{Z(!0),me(!0),S(C," ...");const ht=localStorage.getItem("userInfo");if(!ht){S(C,"    ."),j(C,"fail"),Z(!1);return}const Je=JSON.parse(ht),ve=Je.userId||Je.id||"UNKNOWN",Ge=de=>{var St,Lt,Ve,kt,Oe;const tt=((St=de.actualEquipment)==null?void 0:St.eqtClCd)||de.eqtClCd||((Lt=de.actualEquipment)==null?void 0:Lt.EQT_CL_CD)||"",De=((Ve=de.actualEquipment)==null?void 0:Ve.itemMidCd)||de.itemMidCd||((kt=de.actualEquipment)==null?void 0:kt.ITEM_MID_CD)||"",it=(((Oe=de.actualEquipment)==null?void 0:Oe.type)||de.type||"").toLowerCase();return!!(tt.startsWith("0904")||De==="02"||it.includes("stb")||it.includes(""))},_e=de=>{var St,Lt,Ve,kt,Oe;const tt=((St=de.actualEquipment)==null?void 0:St.eqtClCd)||de.eqtClCd||((Lt=de.actualEquipment)==null?void 0:Lt.EQT_CL_CD)||"",De=((Ve=de.actualEquipment)==null?void 0:Ve.itemMidCd)||de.itemMidCd||((kt=de.actualEquipment)==null?void 0:kt.ITEM_MID_CD)||"",it=(((Oe=de.actualEquipment)==null?void 0:Oe.type)||de.type||"").toLowerCase();return!!(tt.startsWith("0902")||De==="03"||it.includes("modem")||it.includes(""))},xe=K.find(Ge),Ue=K.find(_e),Pe=((Fe=xe==null?void 0:xe.actualEquipment)==null?void 0:Fe.id)||"",Ye=((rt=Ue==null?void 0:Ue.actualEquipment)==null?void 0:rt.id)||"",mt=await Su(ve,t.CTRT_ID||"",t.id,"SMR03",Pe||((It=(at=K[0])==null?void 0:at.actualEquipment)==null?void 0:It.id)||"",Ye||"");mt.O_IFSVC_RESULT&&mt.O_IFSVC_RESULT.startsWith("TRUE")?(S(C,` 

: ${mt.O_IFSVC_RESULT||""}`),j(C,"success")):(S(C,` 

${mt.MESSAGE||"   "}`),j(C,"fail"))}catch(ht){S(C,` 

${ht.message||"   "}`),j(C,"fail")}finally{Z(!1)}},Dt=(Fe,rt,at)=>{F(C,Fe,rt,at==="1"?"0":"1")},Et=_.useMemo(()=>{const Fe=new Set(K.map(at=>at.actualEquipment.id));let rt=J.filter(at=>!Fe.has(at.id));return T&&(rt=rt.filter(at=>at.itemMidCd===T.itemMidCd&&at.model===T.model)),rt},[K,J,T]);_.useMemo(()=>{const Fe=new Set(K.map(at=>at.actualEquipment.id));let rt=w.filter(at=>!Fe.has(at.id));return T&&(rt=rt.filter(at=>at.itemMidCd===T.itemMidCd&&at.model===T.model)),rt},[K,w,T]);const Rt=()=>{te(!0),setTimeout(()=>{te(!1),r==null||r("    .","info")},500)},$e=async()=>{if(!(je||g)){be(!0);try{await pe(!0),r==null||r("  .","success")}catch(Fe){console.error("[-]  :",Fe),r==null||r("   .","error")}finally{be(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[je&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsx("button",{onClick:$e,disabled:je||g,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${je||g?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:s.jsx(Ei,{className:`w-4 h-4 ${je?"animate-spin":""}`})})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[ee.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>!g&&ae(!0),disabled:g,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":p?"border-yellow-300 bg-yellow-100 text-yellow-700":y?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>f==null?void 0:f(),disabled:p||g,children:[p?s.jsx(jn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":U==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":U==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!g&&!he&&We(),disabled:g||he,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>d?Re(!0):ge(!0),children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:d?"LDAP":""})]})]})]}),H?ee.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:ee.map(Fe=>{const rt=K.find(It=>It.contractEquipment.id===Fe.id),at=(T==null?void 0:T.id)===Fe.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${g?rt?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":at?"border-blue-500 bg-blue-50 cursor-pointer":rt?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!g&&st(Fe),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),rt&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",rt.actualEquipment.model]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",rt.actualEquipment.serialNumber]}),rt.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",rt.macAddress]})]})]})},Fe.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!g&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!I||!(K.some(Fe=>Fe.actualEquipment.id===I.id)||Y.some(Fe=>Fe.id===I.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-red-500 bg-red-50 text-red-600 hover:bg-red-100 cursor-pointer active:scale-95"}`,onClick:At,disabled:!I||!(K.some(Fe=>Fe.actualEquipment.id===I.id)||Y.some(Fe=>Fe.id===I.id)),children:s.jsx(Th,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!T||!I||K.some(Fe=>Fe.actualEquipment.id===I.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:lt,disabled:!T||!I||K.some(Fe=>Fe.actualEquipment.id===I.id),children:s.jsx(Eh,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!g&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Te==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>re("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),w.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Te==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:w.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Te==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>re("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),T&&Et.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Te==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:Et.length})]})})]}),Te==="removal"?s.jsx(s.Fragment,{children:w.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:w.map((Fe,rt)=>{const at=Fe.id,It=se[at]||{},ht=It.EQT_LOSS_YN==="1"||It.PART_LOSS_BRK_YN==="1"||It.EQT_BRK_YN==="1"||It.EQT_CABL_LOSS_YN==="1"||It.EQT_CRDL_LOSS_YN==="1",Je=(I==null?void 0:I.id)===Fe.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Je?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>Nt(Fe),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Fe.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Fe.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Fe.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${ht?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:ht?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(ve=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${It[ve.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:Ge=>{Ge.stopPropagation(),Dt(at,ve.key,It[ve.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:It[ve.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:ve.label})]},ve.key))})]},at||rt)})})}):s.jsx(s.Fragment,{children:T?Et.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:Et.map(Fe=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(I==null?void 0:I.id)===Fe.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>Nt(Fe),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Fe.serialNumber]}),Fe.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Fe.macAddress]})]})]}),(I==null?void 0:I.id)===Fe.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Fe.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var It;const Fe=t.WRK_CD_NM||Uh(t.WRK_CD)||t.workType||"-",rt=t.PROD_NM||t.productName||((It=t.customer)==null?void 0:It.productName)||"-",at=t.CTRT_STAT_NM||Cu(t.CTRT_STAT)||"-";return s.jsx(Ah,{isOpen:q,onClose:()=>ae(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:at,prodGrp:t.PROD_GRP||"",prodNm:rt,wrkCdNm:Fe,onSave:ot,showToast:r,installedEquipmentCount:K.length})})(),!g&&s.jsx("button",{onClick:Rt,disabled:ie,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${ie?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(Ih,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(Ba,{isOpen:fe,onClose:()=>ge(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((gt=t.customer)==null?void 0:gt.id)}),s.jsx(kh,{isOpen:ce,onClose:()=>Re(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),X&&vu.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!he&&me(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Fe=>Fe.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:he?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(jn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):U==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(jh,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:Q})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(Lo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:Q})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${U==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>me(!1),disabled:he,children:he?" ...":""})})]})}),document.body)]})},JU=t=>{switch(t){case"10":return"";case"20":return"";case"40":return"";default:return t||"-"}},ZU=({isOpen:t,onClose:e,removedEquipmentsData:n=[],custId:r,rcptId:i,wrkId:l,ctrtId:c,mstSoId:d="",soId:u="",crrId:f="",wrkrId:m="",chgUid:p="",wrkCd:y="07",hideTransfer:g=!1,deferLossProcessing:N=!1,showToast:C,onSuccess:v,onSaveLossStatus:R,alreadyProcessedSerials:A=new Set})=>{const[M,L]=_.useState(!0),[k,V]=_.useState(!1),[G,W]=_.useState([]),[j,S]=_.useState([]),[P,F]=_.useState(new Set),[ee,J]=_.useState(null),[$,Y]=_.useState(!1),[K,w]=_.useState(new Map),[se,oe]=_.useState({}),[T,I]=_.useState([]),[U,Q]=_.useState(new Set),[H,q]=_.useState(!1);_.useEffect(()=>{t&&r&&i&&(L(!0),q(!1),J(null),W([]),S([]),F(new Set),oe({}),Q(new Set),ae())},[t,r,i,l]);const ae=async()=>{L(!0),J(null);try{const[te,je,be]=await Promise.all([f5({CUST_ID:r,RCPT_ID:i}),m5({WRK_ID:l}),to({WRK_ID:l,WRKR_ID:m,SO_ID:u,CUST_ID:r,CTRT_ID:c,RCPT_ID:i})]);S(je);const Te=te.length>0?te.map(pe=>({...pe,ITEM_MID_CD:pe.ITEM_MID_CD||(pe.ITEM_CD?pe.ITEM_CD.substring(2,4):void 0)})):n.map(pe=>({EQT_NO:pe.EQT_NO,EQT_SERNO:pe.EQT_SERNO,EQT_CL_CD:pe.EQT_CL_CD||pe.EQT_CL,EQT_CL:pe.EQT_CL||pe.EQT_CL_CD,EQT_CL_NM:pe.EQT_CL_NM||"",ITEM_MID_CD:pe.ITEM_MID_CD,ITEM_MID_NM:pe.ITEM_MID_NM||"",ITEM_NM:pe.ITEM_MID_NM||"",MAC_ADDRESS:pe.MAC_ADDRESS||"",SVC_CMPS_ID:pe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:pe.BASIC_PROD_CMPS_ID,LENT_YN:pe.LENT_YN,LENT_YN_NM:pe.LENT_YN_NM||JU(pe.LENT_YN),VOIP_CUSTOWN_EQT:pe.VOIP_CUSTOWN_EQT}));if(console.log("[]   :",Te.length,"",te.length>0?"(API )":"(  )"),W(Te),Te&&Te.length>0){console.log("[]   ():",JSON.stringify(Te[0],null,2));const pe=Te.map(Se=>({EQT_NO:Se.EQT_NO,EQT_SERNO:Se.EQT_SERNO,EQT_CL_CD:Se.EQT_CL_CD||Se.EQT_CL,EQT_CL:Se.EQT_CL||Se.EQT_CL_CD,ITEM_MID_CD:Se.ITEM_MID_CD,SVC_CMPS_ID:Se.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Se.BASIC_PROD_CMPS_ID,LENT_YN:Se.LENT_YN}));I(pe),console.log("[] EQT_NO :",pe.length,""),pe.forEach((Se,st)=>{console.log(`[] ${st+1}: EQT_SERNO=${Se.EQT_SERNO}, EQT_NO=${Se.EQT_NO}, EQT_CL_CD=${Se.EQT_CL_CD}`)})}const re=new Map;Te.forEach(pe=>{pe.EQT_SERNO&&re.set(pe.EQT_SERNO,pe.EQT_CL_NM||pe.ITEM_NM||"-")}),w(pe=>new Map([...pe,...re])),Te.length===0&&J("      .")}catch(te){console.error("   :",te),J(te.message||"   .")}finally{L(!1),requestAnimationFrame(()=>{q(!0)})}},fe=te=>{F(je=>{const be=new Set(je);return be.has(te)?(be.delete(te),oe(Te=>{const re={...Te};return delete re[te],re})):be.add(te),be})},ge=()=>{if(P.size===G.length)F(new Set),oe({});else{const te=G.filter(je=>je.EQT_SERNO).map(je=>je.EQT_SERNO);F(new Set(te))}},ce=(te,je)=>{oe(be=>{var Te;return{...be,[te]:{...be[te],[je]:((Te=be[te])==null?void 0:Te[je])==="1"?"0":"1"}}})},Re=te=>{const je=se[te];return je?je.EQT_LOSS_YN==="1"||je.PART_LOSS_BRK_YN==="1"||je.EQT_BRK_YN==="1"||je.EQT_CABL_LOSS_YN==="1"||je.EQT_CRDL_LOSS_YN==="1":!1},X=()=>{if(P.size===0){C==null||C("  .","error");return}if(g){const te=[];if(P.forEach(je=>{Re(je)||te.push(je)}),te.length>0){C==null||C(" (,  ) .","error");return}}Y(!0)},me=async()=>{Y(!1),V(!0);try{const te=new Map(K);P.forEach(ot=>{const We=G.find(Dt=>Dt.EQT_SERNO===ot);We&&We.EQT_SERNO&&te.set(We.EQT_SERNO,We.EQT_CL_NM||We.ITEM_NM||"-")}),w(te);let je=0,be=0,Te=0,re=0;const pe=[],Se=[],st=[],Nt=[];for(const ot of P){const We=G.find(Rt=>Rt.EQT_SERNO===ot),Dt=se[ot]||{};if(Re(ot)&&We){console.log(`[]   - ${ot}`,Dt);const Rt=T.find(ve=>ve.EQT_SERNO===ot)||n.find(ve=>ve.EQT_SERNO===ot),$e=(Rt==null?void 0:Rt.EQT_NO)||We.EQT_NO||"",gt=(Rt==null?void 0:Rt.ITEM_MID_CD)||We.ITEM_MID_CD||"",Fe=(Rt==null?void 0:Rt.EQT_CL_CD)||(Rt==null?void 0:Rt.EQT_CL)||We.EQT_CL_CD||We.EQT_CL||"",rt=(Rt==null?void 0:Rt.EQT_CL_NM)||We.EQT_CL_NM||"",at=(Rt==null?void 0:Rt.SVC_CMPS_ID)||We.SVC_CMPS_ID||"",It=(Rt==null?void 0:Rt.BASIC_PROD_CMPS_ID)||We.BASIC_PROD_CMPS_ID||"",ht=(Rt==null?void 0:Rt.LENT_YN)||We.LENT_YN||"";if(N&&R){console.log(`[]   defer - ${ot}`),Nt.push({EQT_NO:$e,EQT_SERNO:ot,EQT_CL_CD:Fe,EQT_CL:Fe,EQT_CL_NM:rt,ITEM_MID_CD:gt,SVC_CMPS_ID:at,BASIC_PROD_CMPS_ID:It,LENT_YN:ht,EQT_LOSS_YN:Dt.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:Dt.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:Dt.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:Dt.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:Dt.EQT_CRDL_LOSS_YN||"0"}),Te++,st.push(ot);continue}if(!$e){console.error(`[] EQT_NO  - ${ot}`),re++;continue}const Je=await L4({WRK_ID:l,CUST_ID:r,CTRT_ID:c,MST_SO_ID:d,SO_ID:u,EQT_NO:$e,ITEM_MID_CD:gt,EQT_CL_CD:Fe,EQT_CL:Fe,EQT_CL_NM:rt,REG_UID:p,WRK_CD:y,CRR_ID:f,WRKR_ID:m,RCPT_ID:i,SVC_CMPS_ID:at,BASIC_PROD_CMPS_ID:It,OLD_LENT_YN:ht,EQT_CHG_GB:"02",REUSE_YN:"0",EQT_LOSS_YN:Dt.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:Dt.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:Dt.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:Dt.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:Dt.EQT_CRDL_LOSS_YN||"0"});if((Je==null?void 0:Je.MSGCODE)==="SUCCESS"){Te++,st.push(ot),Q(ve=>new Set([...ve,ot]));try{await Su(p||m||"",c,l,"SMR05",$e,"")}catch(ve){console.log("[]    ():",ve)}}else re++,console.error(`[]    - ${ot}:`,Je==null?void 0:Je.MESSAGE)}else{if(g){console.log(`[] hideTransfer=true,   - ${ot} `);continue}const Rt=await M4({MST_SO_ID:d,SO_ID:u,CUST_ID:r,CTRT_ID:c,RCPT_ID:i,WRK_ID:l,WRK_CD:y,CRR_ID:f,WRKR_ID:m,EQT_SERNO:ot,CHG_UID:p});if((Rt==null?void 0:Rt.MSGCODE)==="SUCCESS")je++,st.push(ot);else if((Rt==null?void 0:Rt.MSGCODE)==="CHARGE")pe.push(ot);else{be++;const $e=(Rt==null?void 0:Rt.message)||(Rt==null?void 0:Rt.MESSAGE);$e&&Se.push($e)}}}Nt.length>0&&R&&(console.log("[EquipmentMoveModal]    (  ):",Nt.length,""),R(Nt)),await ae(),F(new Set),oe({});const lt=je+Te,At=be+re;if(pe.length>0)C==null||C(` [${pe.join(", ")}]   .`,"error");else if(At>0){const ot=Se.length>0?Se.join(`
`):`  (: ${je}, : ${Te}, : ${At})`;C==null||C(ot,"error")}else Te>0&&je>0?C==null||C(` ${je},  ${Te} `,"success"):Te>0?C==null||C(` ${Te} `,"success"):C==null||C("  .","success");lt>0&&(v==null||v(st))}catch(te){console.error("  :",te),C==null||C(te.message||"  .","error",!0)}finally{V(!1)}},he=te=>j.some(je=>je.EQT_SERNO===te&&je.SUCCESS_GUBN==="SUCCESS")||U.has(te)||A.has(te),Z=te=>U.has(te)||A.has(te),ie=s.jsxs(s.Fragment,{children:[!g&&s.jsx("button",{onClick:X,disabled:k||P.size===0,className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg text-sm sm:text-base font-semibold transition-colors flex items-center justify-center gap-2",children:k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),s.jsxs("span",{children:[" (",P.size,")"]})]})}),s.jsx("button",{onClick:()=>{if(g&&N&&R&&P.size>0){const te=[];for(const je of P){const be=G.find(re=>re.EQT_SERNO===je),Te=se[je]||{};if(be){const re=T.find(pe=>pe.EQT_SERNO===je)||n.find(pe=>pe.EQT_SERNO===je);te.push({EQT_NO:(re==null?void 0:re.EQT_NO)||be.EQT_NO||"",EQT_SERNO:je,EQT_CL_CD:(re==null?void 0:re.EQT_CL_CD)||(re==null?void 0:re.EQT_CL)||be.EQT_CL_CD||be.EQT_CL||"",EQT_CL:(re==null?void 0:re.EQT_CL)||(re==null?void 0:re.EQT_CL_CD)||be.EQT_CL||be.EQT_CL_CD||"",EQT_CL_NM:(re==null?void 0:re.EQT_CL_NM)||be.EQT_CL_NM||"",ITEM_MID_CD:(re==null?void 0:re.ITEM_MID_CD)||be.ITEM_MID_CD||"",SVC_CMPS_ID:(re==null?void 0:re.SVC_CMPS_ID)||be.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:(re==null?void 0:re.BASIC_PROD_CMPS_ID)||be.BASIC_PROD_CMPS_ID||"",LENT_YN:(re==null?void 0:re.LENT_YN)||be.LENT_YN||"",EQT_LOSS_YN:Te.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:Te.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:Te.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:Te.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:Te.EQT_CRDL_LOSS_YN||"0"})}}te.length>0&&(console.log("[EquipmentMoveModal]    :",te.length,""),R(te),C==null||C(` ${te.length} .`,"success"))}e()},disabled:k,className:`${g?"flex-1":""} px-3 sm:px-4 py-2 sm:py-2.5 ${g?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} rounded-lg text-sm sm:text-base font-semibold transition-colors disabled:opacity-50`,children:g?"":""})]});return s.jsxs(s.Fragment,{children:[s.jsx(pa,{isOpen:t,onClose:k?()=>{}:e,title:g?"":"  ",size:"large",footer:ie,children:M||!H?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"   ..."})]}):ee&&G.length===0&&j.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-red-500 mb-2",children:ee}),s.jsx("button",{onClick:()=>{q(!1),ae()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:" "})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" "}),s.jsx("button",{onClick:ge,className:"text-xs text-blue-600 hover:underline",children:P.size===G.length?"":""})]}),G.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:j.some(te=>te.SUCCESS_GUBN==="SUCCESS")?"   .":"    ."}):s.jsx("div",{className:"space-y-2",children:G.map((te,je)=>{const be=te.EQT_SERNO||"",Te=be?he(be):!1,re=be?P.has(be):!1,pe=se[be]||{},Se=Re(be);return s.jsx("div",{className:`p-3 rounded-lg border ${Te?"bg-green-50 border-green-200":Se?"bg-orange-50 border-orange-300":re?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:re,onChange:()=>be&&fe(be),disabled:Te||k,className:"mt-1 w-5 h-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500 disabled:opacity-50"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:te.EQT_CL_NM||te.ITEM_NM||""}),Te&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full",children:Z(be)?"":""}),Se&&!Te&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded-full",children:""}),re&&!Se&&!Te&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full",children:""})]}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsxs("div",{children:["S/N: ",te.EQT_SERNO||"-"]}),s.jsxs("div",{className:"flex gap-4 mt-1",children:[s.jsx("span",{children:te.LENT_YN_NM||"-"}),s.jsx("span",{children:te.NOTRECEV||"-"}),s.jsx("span",{children:te.EQT_STAT_CD||"-"})]}),te.MAC_ADDRESS&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["MAC: ",te.MAC_ADDRESS]})]}),re&&!Te&&s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 mt-3 border-t border-gray-200",children:[s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:pe.EQT_LOSS_YN==="1",onChange:()=>ce(be,"EQT_LOSS_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:pe.PART_LOSS_BRK_YN==="1",onChange:()=>ce(be,"PART_LOSS_BRK_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:pe.EQT_BRK_YN==="1",onChange:()=>ce(be,"EQT_BRK_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:pe.EQT_CABL_LOSS_YN==="1",onChange:()=>ce(be,"EQT_CABL_LOSS_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:pe.EQT_CRDL_LOSS_YN==="1",onChange:()=>ce(be,"EQT_CRDL_LOSS_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]})]})]})]})},te.EQT_SERNO||je)})})]}),j.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:" "}),s.jsx("div",{className:"max-h-48 overflow-auto space-y-2",children:j.map((te,je)=>s.jsxs("div",{className:`p-3 rounded-lg border ${te.SUCCESS_GUBN==="SUCCESS"?"bg-green-50 border-green-200":te.SUCCESS_GUBN==="CHARGE"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsxs("span",{className:"text-xs text-gray-500 shrink-0",children:["#",je+1]}),s.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:K.get(te.EQT_SERNO||"")||te.EQT_CL_NM||te.ITEM_NM||"-"})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full whitespace-nowrap shrink-0 ${te.SUCCESS_GUBN==="SUCCESS"?"bg-green-500 text-white":te.SUCCESS_GUBN==="CHARGE"?"bg-yellow-500 text-white":"bg-red-500 text-white"}`,children:te.SUCCESS_GUBN==="SUCCESS"?"":te.SUCCESS_GUBN==="CHARGE"?"":te.SUCCESS_GUBN||"-"})]}),s.jsxs("div",{className:"mt-1.5 text-xs text-gray-600 font-mono",children:["S/N: ",te.EQT_SERNO||"-"]})]},te.EQT_SERNO||je))})]})]})}),!g&&s.jsx(ul,{isOpen:$,onClose:()=>Y(!1),onConfirm:me,title:"",message:" ?     .",type:"confirm",confirmText:"",cancelText:""})]})},e9=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u="",onLdapConnect:f,isLdapDone:m=!1,ldapLoading:p=!1,ldapBlocked:y=!1})=>{var xe,Ue;const g=c||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:N}=$i(),C=t.id,{initWorkState:v,setApiData:R,setDataLoaded:A,setInstalledEquipments:M,setMarkedForRemoval:L,addMarkedForRemoval:k,removeMarkedForRemoval:V,setSelectedContract:G,setSelectedStock:W,setSignalStatus:j,setSignalResult:S,setPendingLossStatusList:P,setRemovalStatus:F}=ji(),{contractEquipments:ee,technicianEquipments:J,customerEquipments:$,removeEquipments:Y,installedEquipments:K,markedForRemoval:w,removalStatus:se,pendingLossStatusList:oe,selectedContract:T,selectedStock:I,signalStatus:U,signalResult:Q,isReady:H}=oa(C),q=$.length,[ae,fe]=_.useState(!1),[ge,ce]=_.useState(!1),[Re,X]=_.useState(!1),[me,he]=_.useState(!1),[Z,ie]=_.useState(!1),[te,je]=_.useState(!1),[be,Te]=_.useState(!1),[re,pe]=_.useState(!1),[Se,st]=_.useState("stock"),[Nt,lt]=_.useState([]),[At,ot]=_.useState(new Set),[We,Dt]=_.useState(new Set),Et=t.WRK_CD==="07"&&$.length===0?Nt.filter(Pe=>!At.has(Pe.EQT_SERNO||"")).length:0;_.useEffect(()=>{if(H&&(K.length>0||w.length>0||ee.length>0)){console.log("[-]    -   ");return}v(C),Rt()},[t.id]);const Rt=async(Pe=!1)=>{var Ye,mt,de,tt,De,it;try{let St;const Lt=localStorage.getItem("userInfo"),Ve=Lt?JSON.parse(Lt):null;if(console.log("[-] WRKR_ID :",{"workItem.WRKR_ID":t.WRKR_ID,"user.userId":Ve==null?void 0:Ve.userId,"user.workerId":Ve==null?void 0:Ve.workerId," WRKR_ID":t.WRKR_ID||(Ve==null?void 0:Ve.userId)||(Ve==null?void 0:Ve.workerId)||"",forceRefresh:Pe}),i&&i.contractEquipments&&i.contractEquipments.length>0&&!Pe)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),console.log('[-]  preloaded    -    " "  '),St=i;else{Pe?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const ut=localStorage.getItem("userInfo");if(!ut){console.error("  .");return}const qt=JSON.parse(ut),jt=Ig(t.WRK_CD),ue={WRKR_ID:t.WRKR_ID||qt.userId||qt.workerId||"",SO_ID:t.SO_ID||qt.soId,WRK_ID:t.id,CUST_ID:((Ye=t.customer)==null?void 0:Ye.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:jt,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-] API :",ue),St=await to(ue),Pe&&l&&(console.log("[-]   preloadedData "),l(St))}console.log("[-] API :",{contractEquipments:((mt=St.contractEquipments)==null?void 0:mt.length)||0,technicianEquipments:((de=St.technicianEquipments)==null?void 0:de.length)||0,customerEquipments:((tt=St.customerEquipments)==null?void 0:tt.length)||0,removedEquipments:((De=St.removedEquipments)==null?void 0:De.length)||0});const Oe=((it=t.customer)==null?void 0:it.id)||t.CUST_ID||"",Xt=t.RCPT_ID||"";if(Oe&&Xt)try{const ut=await f5({CUST_ID:Oe,RCPT_ID:Xt});console.log("[-]  :",ut.length,""),lt(ut)}catch(ut){console.error("[-]    :",ut)}const rs={kpiProdGrpCd:St.kpiProdGrpCd,prodChgGb:St.prodChgGb,chgKpiProdGrpCd:St.chgKpiProdGrpCd,prodGrp:St.prodGrp};N(rs),window.__equipmentFilterData=rs;const ds=(St.contractEquipments||[]).map(ut=>({id:ut.SVC_CMPS_ID||ut.PROD_CMPS_ID,type:ut.ITEM_MID_NM||ut.EQT_NM,model:ut.EQT_CL_NM,serialNumber:"N/A",itemMidCd:ut.ITEM_MID_CD,eqtClCd:ut.EQT_CL_CD||ut.EQT_CL,SVC_CMPS_ID:ut.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ut.BASIC_PROD_CMPS_ID,PROD_CD:ut.PROD_CD,SVC_CD:ut.SVC_CD})),Ss=(St.technicianEquipments||[]).map(ut=>({id:ut.EQT_NO,type:ut.ITEM_MID_NM,model:ut.EQT_CL_NM,serialNumber:ut.EQT_SERNO,itemMidCd:ut.ITEM_MID_CD,eqtClCd:ut.EQT_CL_CD||ut.EQT_CL,macAddress:ut.MAC_ADDRESS,SVC_CMPS_ID:ut.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ut.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:ut.EQT_PROD_CMPS_ID,PROD_CD:ut.PROD_CD,SVC_CD:ut.SVC_CD,EQT_SALE_AMT:ut.EQT_SALE_AMT,MST_SO_ID:ut.MST_SO_ID,SO_ID:ut.SO_ID,OLD_LENT_YN:ut.OLD_LENT_YN,LENT:ut.LENT,LENT_YN:ut.LENT_YN,ITLLMT_PRD:ut.ITLLMT_PRD,EQT_USE_STAT_CD:ut.EQT_USE_STAT_CD})),Ns=new Set,ke=(St.customerEquipments||[]).map(ut=>{const qt=ds.find(jt=>jt.itemMidCd===ut.ITEM_MID_CD&&!Ns.has(jt.id));return qt&&Ns.add(qt.id),{contractEquipment:qt||{id:"unknown",type:ut.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:ut.ITEM_MID_CD},actualEquipment:{id:ut.EQT_NO,type:ut.ITEM_MID_NM,model:ut.EQT_CL_NM,serialNumber:ut.EQT_SERNO,itemMidCd:ut.ITEM_MID_CD,eqtClCd:ut.EQT_CL_CD||ut.EQT_CL,macAddress:ut.MAC_ADDRESS||ut.MAC_ADDR,LENT_YN:ut.LENT_YN,VOIP_CUSTOWN_EQT:ut.VOIP_CUSTOWN_EQT},macAddress:ut.MAC_ADDRESS||ut.MAC_ADDR,installLocation:ut.INSTL_LCTN}}),dt=(St.customerEquipments||[]).map(ut=>({id:ut.EQT_NO,type:ut.ITEM_MID_NM,model:ut.EQT_CL_NM,serialNumber:ut.EQT_SERNO,itemMidCd:ut.ITEM_MID_CD,eqtClCd:ut.EQT_CL_CD||ut.EQT_CL,macAddress:ut.MAC_ADDRESS||ut.MAC_ADDR,SVC_CMPS_ID:ut.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ut.BASIC_PROD_CMPS_ID,LENT_YN:ut.LENT_YN,VOIP_CUSTOWN_EQT:ut.VOIP_CUSTOWN_EQT})),et=(St.removedEquipments||[]).map(ut=>({id:ut.EQT_NO,type:ut.ITEM_MID_NM,model:ut.EQT_CL_NM,serialNumber:ut.EQT_SERNO,itemMidCd:ut.ITEM_MID_CD,eqtClCd:ut.EQT_CL_CD||ut.EQT_CL,macAddress:ut.MAC_ADDRESS||ut.MAC_ADDR,installLocation:ut.INSTL_LCTN,SVC_CMPS_ID:ut.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ut.BASIC_PROD_CMPS_ID,MST_SO_ID:ut.MST_SO_ID,SO_ID:ut.SO_ID,LENT_YN:ut.LENT_YN,VOIP_CUSTOWN_EQT:ut.VOIP_CUSTOWN_EQT}));R(C,{contractEquipments:ds,technicianEquipments:Ss,customerEquipments:dt,removeEquipments:et,filteringData:rs}),t.WRK_CD==="07"&&t.id&&m5({WRK_ID:t.id}).then(ut=>{const qt=new Set(ut.filter(jt=>jt.SUCCESS_GUBN==="SUCCESS").map(jt=>jt.EQT_SERNO).filter(Boolean));qt.size>0&&ot(qt)}).catch(()=>{});const Qt=w||[];if(ke.length>0)if(console.log("[-] API     :",ke.length,""),Qt.length>0){const ut=new Set(Qt.map(jt=>jt.id)),qt=ke.filter(jt=>!ut.has(jt.actualEquipment.id));M(C,qt)}else M(C,ke);requestAnimationFrame(()=>A(C,!0))}catch(St){console.error("[-]    :",St),requestAnimationFrame(()=>A(C,!0))}},$e=Pe=>{const Ye=K.find(mt=>mt.contractEquipment.id===Pe.id);(T==null?void 0:T.id)===Pe.id?(G(C,null),W(C,null)):(G(C,Pe),Ye?W(C,Ye.actualEquipment):W(C,null))},gt=Pe=>{(I==null?void 0:I.id)===Pe.id?W(C,null):W(C,Pe)},Fe=()=>{if(!T||!I)return;if(T.itemMidCd!==I.itemMidCd||T.model!==I.model){r==null||r("      .","warning");return}const Pe=K.findIndex(Ye=>Ye.contractEquipment.id===T.id);if(Pe>=0){const Ye=[...K];Ye[Pe]={contractEquipment:T,actualEquipment:I,macAddress:I.macAddress||"",installLocation:""},M(C,Ye)}else{const Ye={contractEquipment:T,actualEquipment:I,macAddress:I.macAddress||"",installLocation:""};M(C,[...K,Ye])}j(C,"idle"),W(C,null)},rt=()=>{if(!I)return;const Pe=K.findIndex(de=>de.actualEquipment.id===I.id);if(Pe>=0){const de=[...K],tt=de.splice(Pe,1)[0];M(C,de);const De=tt.actualEquipment;w.some(St=>St.id===De.id)||k(C,De),j(C,"idle"),W(C,null),st("removal");return}if(w.some(de=>de.id===I.id))return;Y.some(de=>de.id===I.id)&&(k(C,I),st("removal"))},at=async(Pe,Ye)=>{try{const mt=localStorage.getItem("userInfo");if(!mt){r==null||r("  .","error");return}const de=JSON.parse(mt),tt=Pe.map((it,St)=>{let Lt=it.ITEM_MID_CD||it.ITM_MID_CD||it.EQT||it.EQT_CD||"",Ve=it.EQT_CL||it.EQT_CL_CD||"",kt=it.SVC_CMPS_ID||it.PROD_CMPS_ID||it.SVC_CMPS_SEQ||it.EQUIP_SEQ||"";return Lt=String(Lt).trim().padStart(2,"0"),Ve=String(Ve).trim().padStart(6,"0"),kt=String(kt||St+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||de.crrId||"",WRKR_ID:t.WRKR_ID||de.userId||de.workerId||"",REG_UID:de.userId||de.workerId||"A20130708",ITEM_MID_CD:Lt,EQT_CL:Ve,SVC_CMPS_ID:kt,EQT:Lt,EQT_CD:Lt,LENT:String(it.LENT||"10"),EQT_USE_STAT_CD:String(it.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(it.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(it.EQT_SALE_AMT||0),PROD_GRP:String(it.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(it.PROD_CD||t.PROD_CD||""),SVC_CD:String(it.SVC_CD||""),PROM_CNT:Ye||"",SEL:"1",EQT_BASIC_YN:String(it.EQT_BASIC_YN||"N"),PROD_TYP:it.PROD_TYP,EQUIP_SEQ:it.EQUIP_SEQ}}),De=await Mh({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:Ye||"",equipments:tt});if(De.MSGCODE==="SUCCESS"||De.MSGCODE==="0"||De.code==="SUCCESS")r==null||r("  .","success"),await Rt(!0);else throw new Error(De.MESSAGE||De.message||"   .")}catch(mt){throw console.error("[] :",mt),r==null||r(mt.message||"     .","error",!0),mt}},It=async()=>{var Pe,Ye,mt,de;if(K.length===0){r==null||r("    .","warning"),j(C,"fail");return}try{je(!0),ie(!0),S(C," ...");const tt=localStorage.getItem("userInfo");if(!tt){S(C,"    ."),j(C,"fail"),je(!1);return}const De=JSON.parse(tt),it=De.userId||De.id||"UNKNOWN",St=ds=>{var dt,et,Qt,ut,qt;const Ss=((dt=ds.actualEquipment)==null?void 0:dt.eqtClCd)||ds.eqtClCd||((et=ds.actualEquipment)==null?void 0:et.EQT_CL_CD)||"",Ns=((Qt=ds.actualEquipment)==null?void 0:Qt.itemMidCd)||ds.itemMidCd||((ut=ds.actualEquipment)==null?void 0:ut.ITEM_MID_CD)||"",ke=(((qt=ds.actualEquipment)==null?void 0:qt.type)||ds.type||"").toLowerCase();return!!(Ss.startsWith("0904")||Ns==="02"||ke.includes("stb")||ke.includes(""))},Lt=ds=>{var dt,et,Qt,ut,qt;const Ss=((dt=ds.actualEquipment)==null?void 0:dt.eqtClCd)||ds.eqtClCd||((et=ds.actualEquipment)==null?void 0:et.EQT_CL_CD)||"",Ns=((Qt=ds.actualEquipment)==null?void 0:Qt.itemMidCd)||ds.itemMidCd||((ut=ds.actualEquipment)==null?void 0:ut.ITEM_MID_CD)||"",ke=(((qt=ds.actualEquipment)==null?void 0:qt.type)||ds.type||"").toLowerCase();return!!(Ss.startsWith("0902")||Ns==="03"||ke.includes("modem")||ke.includes(""))},Ve=K.find(St),kt=K.find(Lt),Oe=((Pe=Ve==null?void 0:Ve.actualEquipment)==null?void 0:Pe.id)||"",Xt=((Ye=kt==null?void 0:kt.actualEquipment)==null?void 0:Ye.id)||"",rs=await Su(it,t.CTRT_ID||"",t.id,"SMR03",Oe||((de=(mt=K[0])==null?void 0:mt.actualEquipment)==null?void 0:de.id)||"",Xt||"");rs.O_IFSVC_RESULT&&rs.O_IFSVC_RESULT.startsWith("TRUE")?(S(C,` 

: ${rs.O_IFSVC_RESULT||""}`),j(C,"success")):(S(C,` 

${rs.MESSAGE||"   "}`),j(C,"fail"))}catch(tt){S(C,` 

${tt.message||"   "}`),j(C,"fail")}finally{je(!1)}},ht=Pe=>{console.log("[-]    (  API  ):",Pe.length,"");const Ye=new Set(Pe.map(de=>de.EQT_SERNO)),mt=oe.filter(de=>!Ye.has(de.EQT_SERNO));P(C,[...mt,...Pe])},Je=_.useMemo(()=>{const Pe=new Set(K.map(de=>de.actualEquipment.id));let Ye=J.filter(de=>!Pe.has(de.id));return T&&(Ye=Ye.filter(de=>de.itemMidCd===T.itemMidCd&&de.model===T.model)),(At.size>0||We.size>0)&&Ye.sort((de,tt)=>{const De=de.serialNumber||"",it=tt.serialNumber||"",St=We.has(De),Lt=We.has(it),Ve=At.has(De),kt=At.has(it);return St&&!Lt?-1:!St&&Lt?1:Ve&&!kt?-1:!Ve&&kt?1:0}),Ye},[K,J,T,At,We]);_.useMemo(()=>{const Pe=new Set(K.map(mt=>mt.actualEquipment.id));let Ye=w.filter(mt=>!Pe.has(mt.id));return T&&(Ye=Ye.filter(mt=>mt.itemMidCd===T.itemMidCd&&mt.model===T.model)),Ye},[K,w,T]);const ve=_.useMemo(()=>{const Pe=new Set(K.map(mt=>mt.actualEquipment.id));return[...w,...Y.filter(mt=>!Pe.has(mt.id)&&!w.some(de=>de.id===mt.id))]},[w,Y,K]),Ge=()=>{Te(!0),setTimeout(()=>{Te(!1),r==null||r("    .","info")},500)},_e=async()=>{if(!(re||g)){pe(!0);try{await Rt(!0),r==null||r("  .","success")}catch(Pe){console.error("[-]  :",Pe),r==null||r("   .","error")}finally{pe(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[re&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsx("button",{onClick:_e,disabled:re||g,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${re||g?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:s.jsx(Ei,{className:`w-4 h-4 ${re?"animate-spin":""}`})})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[ee.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>!g&&fe(!0),disabled:g,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":p?"border-yellow-300 bg-yellow-100 text-yellow-700":y?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>f==null?void 0:f(),disabled:p||g,children:[p?s.jsx(jn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":U==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":U==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!g&&!te&&It(),disabled:g||te,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:`relative flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g||$.length>0?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-indigo-200 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 hover:border-indigo-300"}`,onClick:()=>!g&&$.length===0&&he(!0),disabled:g||$.length>0,children:[Et>0&&s.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[20px] h-5 px-1.5 flex items-center justify-center text-xs font-bold text-white bg-red-500 rounded-full shadow-sm",children:Et}),s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>d?X(!0):ce(!0),children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:d?"LDAP":""})]})]})]}),H?ee.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:ee.map(Pe=>{const Ye=K.find(de=>de.contractEquipment.id===Pe.id),mt=(T==null?void 0:T.id)===Pe.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${g?Ye?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":mt?"border-blue-500 bg-blue-50 cursor-pointer":Ye?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!g&&$e(Pe),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Pe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Pe.model})]}),Ye&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",Ye.actualEquipment.model]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",Ye.actualEquipment.serialNumber]}),Ye.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",Ye.macAddress]})]})]})},Pe.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!g&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!I||!K.some(Pe=>Pe.actualEquipment.id===(I==null?void 0:I.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-red-500 bg-red-50 text-red-600 hover:bg-red-100 cursor-pointer active:scale-95"}`,onClick:rt,disabled:!I||!K.some(Pe=>Pe.actualEquipment.id===(I==null?void 0:I.id)),children:s.jsx(Th,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!I||K.some(Pe=>Pe.actualEquipment.id===(I==null?void 0:I.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!I)return;if(w.some(mt=>mt.id===I.id)){if(T&&(T.itemMidCd!==I.itemMidCd||T.model!==I.model)){r==null||r("      .","warning");return}const mt=T||ee.find(De=>De.itemMidCd===I.itemMidCd&&De.model===I.model);if(!mt){r==null||r("  .","warning");return}if(K.find(De=>De.contractEquipment.id===mt.id)){r==null||r("   .","warning");return}const tt={contractEquipment:mt,actualEquipment:I,macAddress:I.macAddress||""};M(C,[...K,tt]),V(C,I.id),W(C,null),r==null||r(" .","success");return}if(!T){r==null||r("   .","warning");return}if(K.find(mt=>mt.contractEquipment.id===T.id)){r==null||r("   .","warning");return}Fe()},disabled:!I||K.some(Pe=>Pe.actualEquipment.id===(I==null?void 0:I.id)),children:s.jsx(Eh,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!g&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[re&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),$.length>0?s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Se==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>st("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Se==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:ve.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Se==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>st("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),T&&Je.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Se==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:Je.length})]})})]}):s.jsx("div",{className:"py-3 px-4 border-b-2 border-blue-500",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-blue-600",children:""}),T&&Je.length>0&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-bold rounded-full bg-blue-500 text-white",children:Je.length})]})}),$.length>0&&Se==="removal"?s.jsx("div",{className:"p-3 sm:p-4 space-y-3 max-h-80 overflow-y-auto",children:ve.map((Pe,Ye)=>{const mt=Pe.id,de=(I==null?void 0:I.id)===mt,tt=w.some(De=>De.id===mt);return s.jsx("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${de?"border-blue-500 bg-blue-50":tt?"border-red-200 bg-red-50 hover:border-red-300":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>gt(Pe),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${tt?"bg-red-500 text-white":"bg-orange-500 text-white"}`,children:tt?"":Ye+1}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Pe.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Pe.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Pe.serialNumber]}),Pe.macAddress&&s.jsxs("div",{className:"text-xs text-gray-500",children:["MAC: ",Pe.macAddress]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${tt?"bg-red-500 text-white":"bg-orange-500 text-white"}`,children:tt?"":""})]})},`removal-${mt||Ye}`)})}):s.jsx(s.Fragment,{children:T?Je.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:Je.map(Pe=>{const Ye=Pe.serialNumber||"",mt=We.has(Ye),de=At.has(Ye),tt=mt||de;return s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(I==null?void 0:I.id)===Pe.id?"border-blue-500 bg-blue-50":mt?"border-purple-500 bg-purple-50 ring-2 ring-purple-300 ring-opacity-50 animate-pulse":de?"border-purple-400 bg-purple-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>gt(Pe),children:[tt&&s.jsx("div",{className:`absolute -top-2 left-3 px-2 py-0.5 text-white text-[0.625rem] sm:text-xs font-bold rounded-full shadow-sm ${mt?"bg-purple-600":"bg-purple-500"}`,children:mt?" ":""}),s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Pe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Pe.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Pe.serialNumber]}),Pe.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Pe.macAddress]})]})]}),(I==null?void 0:I.id)===Pe.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Pe.id)})}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var de;const Pe=t.WRK_CD_NM||Uh(t.WRK_CD)||t.workType||"-",Ye=t.PROD_NM||t.productName||((de=t.customer)==null?void 0:de.productName)||"-",mt=t.CTRT_STAT_NM||Cu(t.CTRT_STAT)||"-";return s.jsx(Ah,{isOpen:ae,onClose:()=>fe(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:mt,prodGrp:t.PROD_GRP||"",prodNm:Ye,wrkCdNm:Pe,onSave:at,showToast:r,installedEquipmentCount:K.length,customerEquipmentCount:q})})(),!g&&s.jsx("button",{onClick:Ge,disabled:be,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${be?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(Ih,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(Ba,{isOpen:ge,onClose:()=>ce(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((xe=t.customer)==null?void 0:xe.id)}),s.jsx(kh,{isOpen:Re,onClose:()=>X(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),s.jsx(ZU,{isOpen:me,onClose:()=>{he(!1),Rt(!0)},removedEquipmentsData:(Y.length>0?Y:$).map(Pe=>({EQT_NO:Pe.id||Pe.EQT_NO||"",EQT_SERNO:Pe.serialNumber||Pe.EQT_SERNO||"",EQT_CL_CD:Pe.eqtClCd||Pe.EQT_CL_CD||Pe.EQT_CL||"",EQT_CL_NM:Pe.model||Pe.EQT_CL_NM||"",ITEM_MID_CD:Pe.itemMidCd||Pe.ITEM_MID_CD||"",ITEM_MID_NM:Pe.type||Pe.ITEM_MID_NM||"",MAC_ADDRESS:Pe.macAddress||Pe.MAC_ADDRESS||"",SVC_CMPS_ID:Pe.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Pe.BASIC_PROD_CMPS_ID||"",LENT_YN:Pe.LENT_YN||"",VOIP_CUSTOWN_EQT:Pe.VOIP_CUSTOWN_EQT||""})),custId:t.CUST_ID||((Ue=t.customer)==null?void 0:Ue.id)||"",rcptId:t.RCPT_ID||"",wrkId:t.id,ctrtId:t.CTRT_ID||"",hideTransfer:!1,mstSoId:t.MST_SO_ID||"",soId:t.SO_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",chgUid:t.REG_UID||t.WRKR_ID||"",showToast:r,deferLossProcessing:!1,onSaveLossStatus:ht,alreadyProcessedSerials:At,onSuccess:Pe=>{console.log("[EquipmentMoveRemoval]   -  :",Pe),ot(new Set([...At,...Pe])),Dt(new Set(Pe)),setTimeout(()=>{Dt(new Set)},1e4)}}),Z&&vu.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!te&&ie(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Pe=>Pe.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:te?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(jn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):U==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(jh,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:Q})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(Lo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:Q})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${U==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>ie(!1),disabled:te,children:te?" ...":""})})]})}),document.body)]})},t9=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1})=>{const d=t.id,u=c||t.WRK_STAT_CD==="4"||t.status==="",{initWorkState:f,setApiData:m,setDataLoaded:p,toggleRemovalStatus:y,setFullRemovalStatus:g,setRemovalStatus:N,setReuseAll:C}=ji(),{removeEquipments:v,removalStatus:R,isReady:A}=oa(d),[M,L]=_.useState(!1),[k,V]=_.useState(!1),G=ji(J=>{var $;return(($=J.workStates[d])==null?void 0:$.reuseAll)??!1}),W=J=>{C(d,J)},j=async J=>{var $;try{const Y=localStorage.getItem("userInfo"),K=Y?JSON.parse(Y):{},w=await pg({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:t.WRKR_ID||K.userId||"",PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"02",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||(($=t.customer)==null?void 0:$.ADDR_ORD)||"",WRK_CD:t.WRK_CD||"08",WRK_STAT_CD:t.WRK_STAT_CD||""}),se=(w==null?void 0:w.MVM_TP)||"",oe=(w==null?void 0:w.WRK_STAT_CD)||"",T=(w==null?void 0:w.CTRT_ID)||"",I=(w==null?void 0:w.OLD_CTRT_ID)||"",U=oe==="2";V(U),console.log("[-]  :",{WRK_STAT_CD:oe,CTRT_ID:T,OLD_CTRT_ID:I,:U}),J&&(U?(C(d,!0),console.log("[-]   : true")):C(d,!1))}catch(Y){console.error("[-]   :",Y),V(!1),J&&C(d,!1)}};_.useEffect(()=>{const J=!A||v.length===0;if(j(J),!J){console.log("[-]    -   , reuseAll:",G);return}f(d),S()},[t.id]);const S=async(J=!1)=>{var $,Y;try{console.log("[-]    - isWorkCompleted:",u,"WRK_STAT_CD:",t.WRK_STAT_CD);let K;if(i&&!J)console.log("[-] Pre-loaded   - API  "),K=i;else{const se=localStorage.getItem("userInfo");if(!se){console.error("  .");return}const oe=JSON.parse(se),T={WRKR_ID:t.WRKR_ID||oe.userId||oe.workerId||"",SO_ID:t.SO_ID||oe.soId,WRK_ID:t.id,CUST_ID:(($=t.customer)==null?void 0:$.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"08",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-]    (API )"),console.log("[-] :",T),K=await to(T)}console.log("[-] :"),console.log("  -  (output5):",((Y=K.removedEquipments)==null?void 0:Y.length)||0,"");const w=(K.removedEquipments||[]).map(se=>({...se,id:se.EQT_NO,type:se.ITEM_MID_NM,model:se.EQT_CL_NM,serialNumber:se.EQT_SERNO,itemMidCd:se.ITEM_MID_CD,eqtClCd:se.EQT_CL_CD||se.EQT_CL,macAddress:se.MAC_ADDRESS||se.MAC_ADDR,installLocation:se.INSTL_LCTN}));console.log("[-]  :"),console.log("  -  :",w.length,""),m(d,{removeEquipments:w}),requestAnimationFrame(()=>p(d,!0))}catch(K){console.error("[-]    :",K),r==null||r("   .","error",!0),m(d,{removeEquipments:[]}),requestAnimationFrame(()=>p(d,!0))}},P=()=>{const J=!G;W(J),v.forEach($=>{N(d,$.id,"REUSE_YN",J?"1":"0"),J&&(N(d,$.id,"EQT_LOSS_YN","0"),N(d,$.id,"PART_LOSS_BRK_YN","0"),N(d,$.id,"EQT_BRK_YN","0"),N(d,$.id,"EQT_CABL_LOSS_YN","0"),N(d,$.id,"EQT_CRDL_LOSS_YN","0"))}),J&&(r==null||r("   .   .","info"))},F=(J,$)=>{var K;y(d,J,$),(((K=R[J])==null?void 0:K[$])||"0")==="0"&&G&&(W(!1),v.forEach(w=>{N(d,w.id,"REUSE_YN","0")}),r==null||r("    .","warning"))},ee=async()=>{if(!(M||u)){L(!0);try{await S(!0),r==null||r("  .","success")}catch(J){console.error("[-]  :",J),r==null||r("   .","error")}finally{L(!1)}}};return s.jsx("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[M&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(uc,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Ei,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),""]}),s.jsxs("button",{onClick:ee,disabled:M||u,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${M||u?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(uc,{className:`w-3.5 h-3.5 ${M?"animate-spin":""}`}),s.jsx("span",{children:" "})]}),k&&!u&&!c&&v.length>0&&s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg cursor-pointer hover:bg-blue-50 active:bg-blue-100",children:[s.jsx("input",{type:"checkbox",checked:G,onChange:P,className:"w-4 h-4 rounded border-blue-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-blue-700 font-medium",children:""})]})]}),s.jsxs("span",{className:"px-2 sm:px-2.5 py-0.5 sm:py-1 bg-orange-100 text-orange-700 text-[0.625rem] sm:text-xs font-semibold rounded-full",children:[v.length,""]})]}),v.length===0?s.jsx("div",{className:"py-12 text-center",children:s.jsx("div",{className:"text-sm text-gray-500",children:"   "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:v.map(J=>{const $=J.id,Y=R[$]||{},K=gN(J);return s.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-gray-200 bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:J.model||J.type}),s.jsxs("div",{className:"text-xs text-gray-600",children:["S/N: ",J.serialNumber]}),J.macAddress&&s.jsxs("div",{className:"text-xs text-gray-500",children:["MAC: ",J.macAddress]})]}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:J.EQT_LOC_TP_NM||""})]}),!u&&!c&&s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${K?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:Y.EQT_LOSS_YN==="1",onChange:()=>F($,"EQT_LOSS_YN"),disabled:K,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${K?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:Y.PART_LOSS_BRK_YN==="1",onChange:()=>F($,"PART_LOSS_BRK_YN"),disabled:K,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${K?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:Y.EQT_BRK_YN==="1",onChange:()=>F($,"EQT_BRK_YN"),disabled:K,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${K?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:Y.EQT_CABL_LOSS_YN==="1",onChange:()=>F($,"EQT_CABL_LOSS_YN"),disabled:K,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${K?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:Y.EQT_CRDL_LOSS_YN==="1",onChange:()=>F($,"EQT_CRDL_LOSS_YN"),disabled:K,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]})]}),K&&!u&&s.jsx("div",{className:"mt-2 text-xs text-orange-600 bg-orange-50 p-2 rounded",children:"   "})]},J.id)})})]})})},s9=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u="",onLdapConnect:f,isLdapDone:m=!1,ldapLoading:p=!1,ldapBlocked:y=!1})=>{var gt;const g=c||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:N}=$i(),C=t.id,{initWorkState:v,setApiData:R,setDataLoaded:A,setInstalledEquipments:M,addMarkedForRemoval:L,setMarkedForRemoval:k,toggleRemovalStatus:V,setFullRemovalStatus:G,setSelectedContract:W,setSelectedStock:j,setSignalStatus:S,setSignalResult:P,clearSelection:F}=ji(),{contractEquipments:ee,technicianEquipments:J,customerEquipments:$,removeEquipments:Y,installedEquipments:K,markedForRemoval:w,removalStatus:se,selectedContract:oe,selectedStock:T,signalStatus:I,signalResult:U,isReady:Q}=oa(C),H=$.length,[q,ae]=_.useState(!1),[fe,ge]=_.useState(!1),[ce,Re]=_.useState(!1),[X,me]=_.useState(!1),[he,Z]=_.useState(!1),[ie,te]=_.useState(!1),[je,be]=_.useState(!1),[Te,re]=_.useState("stock");_.useEffect(()=>{if(Q&&(K.length>0||w.length>0||ee.length>0)){console.log("[-]    -   ");return}v(C),pe()},[t.id]);const pe=async(Fe=!1)=>{var rt,at,It,ht,Je,ve,Ge,_e;try{let xe;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Fe)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),xe=i;else{Fe?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const Ve=localStorage.getItem("userInfo");if(!Ve){console.error("  .");return}const kt=JSON.parse(Ve),Oe=Ig(t.WRK_CD),Xt={WRKR_ID:t.WRKR_ID||kt.userId||kt.workerId||"",SO_ID:t.SO_ID||kt.soId,WRK_ID:t.id,CUST_ID:((rt=t.customer)==null?void 0:rt.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:Oe,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-] API :",Xt),xe=await to(Xt),Fe&&l&&(console.log("[-]   preloadedData "),l(xe))}console.log("=== [-] API Output  ==="),console.log("  output1 ():",xe.productInfo||"N/A"),console.log("  output2 ():",((at=xe.contractEquipments)==null?void 0:at.length)||0,""),((It=xe.contractEquipments)==null?void 0:It.length)>0&&xe.contractEquipments.forEach((Ve,kt)=>{console.log(`    [${kt}] ${Ve.ITEM_MID_NM} / ${Ve.EQT_CL_NM} / SVC_CMPS_ID: ${Ve.SVC_CMPS_ID}`)}),console.log("  output3 ():",((ht=xe.technicianEquipments)==null?void 0:ht.length)||0,""),console.log("  output4 ():",((Je=xe.customerEquipments)==null?void 0:Je.length)||0,""),((ve=xe.customerEquipments)==null?void 0:ve.length)>0&&xe.customerEquipments.forEach((Ve,kt)=>{console.log(`    [${kt}] ${Ve.ITEM_MID_NM} / ${Ve.EQT_CL_NM} / EQT_NO: ${Ve.EQT_NO} / S/N: ${Ve.EQT_SERNO}`)}),console.log("  output5 ():",((Ge=xe.removedEquipments)==null?void 0:Ge.length)||0,""),((_e=xe.removedEquipments)==null?void 0:_e.length)>0&&xe.removedEquipments.forEach((Ve,kt)=>{console.log(`    [${kt}] ${Ve.ITEM_MID_NM} / ${Ve.EQT_CL_NM} / EQT_NO: ${Ve.EQT_NO} / S/N: ${Ve.EQT_SERNO}`)}),console.log("==========================================");const Pe={kpiProdGrpCd:xe.kpiProdGrpCd,prodChgGb:xe.prodChgGb,chgKpiProdGrpCd:xe.chgKpiProdGrpCd,prodGrp:xe.prodGrp};N(Pe),window.__equipmentFilterData=Pe;const Ye=(xe.contractEquipments||[]).map(Ve=>({id:Ve.SVC_CMPS_ID||Ve.PROD_CMPS_ID,type:Ve.ITEM_MID_NM||Ve.EQT_NM,model:Ve.EQT_CL_NM,serialNumber:"N/A",itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,SVC_CMPS_ID:Ve.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Ve.BASIC_PROD_CMPS_ID,PROD_CD:Ve.PROD_CD,SVC_CD:Ve.SVC_CD})),mt=(xe.technicianEquipments||[]).map(Ve=>({id:Ve.EQT_NO,type:Ve.ITEM_MID_NM,model:Ve.EQT_CL_NM,serialNumber:Ve.EQT_SERNO,itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,macAddress:Ve.MAC_ADDRESS,SVC_CMPS_ID:Ve.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Ve.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:Ve.EQT_PROD_CMPS_ID,PROD_CD:Ve.PROD_CD,SVC_CD:Ve.SVC_CD,EQT_SALE_AMT:Ve.EQT_SALE_AMT,MST_SO_ID:Ve.MST_SO_ID,SO_ID:Ve.SO_ID,OLD_LENT_YN:Ve.OLD_LENT_YN,LENT:Ve.LENT,LENT_YN:Ve.LENT_YN,ITLLMT_PRD:Ve.ITLLMT_PRD,EQT_USE_STAT_CD:Ve.EQT_USE_STAT_CD})),de=new Set,tt=(xe.customerEquipments||[]).map(Ve=>{const kt=Ye.find(Oe=>Oe.itemMidCd===Ve.ITEM_MID_CD&&!de.has(Oe.id));return kt&&de.add(kt.id),{contractEquipment:kt||{id:"unknown",type:Ve.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:Ve.ITEM_MID_CD},actualEquipment:{id:Ve.EQT_NO,type:Ve.ITEM_MID_NM,model:Ve.EQT_CL_NM,serialNumber:Ve.EQT_SERNO,itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,macAddress:Ve.MAC_ADDRESS||Ve.MAC_ADDR,LENT_YN:Ve.LENT_YN,VOIP_CUSTOWN_EQT:Ve.VOIP_CUSTOWN_EQT},macAddress:Ve.MAC_ADDRESS||Ve.MAC_ADDR,installLocation:Ve.INSTL_LCTN}}),De=(xe.removedEquipments||[]).map(Ve=>({id:Ve.EQT_NO,type:Ve.ITEM_MID_NM,model:Ve.EQT_CL_NM,serialNumber:Ve.EQT_SERNO,itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,macAddress:Ve.MAC_ADDRESS||Ve.MAC_ADDR,installLocation:Ve.INSTL_LCTN,SVC_CMPS_ID:Ve.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Ve.BASIC_PROD_CMPS_ID,MST_SO_ID:Ve.MST_SO_ID,SO_ID:Ve.SO_ID,LENT_YN:Ve.LENT_YN,VOIP_CUSTOWN_EQT:Ve.VOIP_CUSTOWN_EQT}));R(C,{contractEquipments:Ye,technicianEquipments:mt,removeEquipments:De,filteringData:Pe});const it=w||[],St=K||[];if(console.log("[-]   :",{existingMarkedForRemoval:it.length,existingInstalledEquipments:St.length,apiInstalled:tt.length,apiRemoved:De.length}),it.length===0&&St.length===0)console.log("[-]   - API  "),tt.length>0&&(console.log("[-]   :",tt.length,""),M(C,tt)),De.length>0&&(console.log("[-]  markedForRemoval :",De.length,""),k(C,De));else if(console.log("[-]  -   "),tt.length>0){const Ve=new Set(it.map(Oe=>Oe.id)),kt=tt.filter(Oe=>!Ve.has(Oe.actualEquipment.id));M(C,kt)}requestAnimationFrame(()=>A(C,!0))}catch(xe){console.error("[-]    :",xe),requestAnimationFrame(()=>A(C,!0))}},Se=Fe=>{const rt=K.find(at=>at.contractEquipment.id===Fe.id);(oe==null?void 0:oe.id)===Fe.id?(W(C,null),j(C,null)):(W(C,Fe),rt?j(C,rt.actualEquipment):j(C,null))},st=Fe=>{(T==null?void 0:T.id)===Fe.id?j(C,null):j(C,Fe)},Nt=()=>{if(!oe||!T)return;if(oe.itemMidCd!==T.itemMidCd||oe.model!==T.model){r==null||r("      .","warning");return}const Fe=K.findIndex(rt=>rt.contractEquipment.id===oe.id);if(Fe>=0){const rt=[...K];rt[Fe]={contractEquipment:oe,actualEquipment:T,macAddress:T.macAddress||"",installLocation:""},M(C,rt)}else{const rt={contractEquipment:oe,actualEquipment:T,macAddress:T.macAddress||"",installLocation:""};M(C,[...K,rt])}S(C,"idle"),j(C,null)},lt=()=>{if(!T)return;const Fe=K.findIndex(It=>It.actualEquipment.id===T.id);if(Fe>=0){const It=[...K],ht=It.splice(Fe,1)[0];M(C,It);const Je=ht.actualEquipment;w.some(Ge=>Ge.id===Je.id)||L(C,Je),S(C,"idle"),j(C,null);return}if(w.some(It=>It.id===T.id))return;Y.some(It=>It.id===T.id)&&L(C,T)},At=async(Fe,rt)=>{try{const at=localStorage.getItem("userInfo");if(!at){r==null||r("  .","error");return}const It=JSON.parse(at),ht=Fe.map((ve,Ge)=>{let _e=ve.ITEM_MID_CD||ve.ITM_MID_CD||ve.EQT||ve.EQT_CD||"",xe=ve.EQT_CL||ve.EQT_CL_CD||"",Ue=ve.SVC_CMPS_ID||ve.PROD_CMPS_ID||ve.SVC_CMPS_SEQ||ve.EQUIP_SEQ||"";return _e=String(_e).trim().padStart(2,"0"),xe=String(xe).trim().padStart(6,"0"),Ue=String(Ue||Ge+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||It.crrId||"",WRKR_ID:t.WRKR_ID||It.userId||It.workerId||"",REG_UID:It.userId||It.workerId||"A20130708",ITEM_MID_CD:_e,EQT_CL:xe,SVC_CMPS_ID:Ue,EQT:_e,EQT_CD:_e,LENT:String(ve.LENT||"10"),EQT_USE_STAT_CD:String(ve.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(ve.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(ve.EQT_SALE_AMT||0),PROD_GRP:String(ve.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(ve.PROD_CD||t.PROD_CD||""),SVC_CD:String(ve.SVC_CD||""),PROM_CNT:rt||"",SEL:"1",EQT_BASIC_YN:String(ve.EQT_BASIC_YN||"N"),PROD_TYP:ve.PROD_TYP,EQUIP_SEQ:ve.EQUIP_SEQ}}),Je=await Mh({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:rt||"",equipments:ht});if(Je.MSGCODE==="SUCCESS"||Je.MSGCODE==="0"||Je.code==="SUCCESS")r==null||r("  .","success"),await pe(!0);else throw new Error(Je.MESSAGE||Je.message||"   .")}catch(at){throw console.error("[] :",at),r==null||r(at.message||"     .","error",!0),at}},ot=async()=>{var Fe,rt,at,It;if(K.length===0){r==null||r("    .","warning"),S(C,"fail");return}try{Z(!0),me(!0),P(C," ...");const ht=localStorage.getItem("userInfo");if(!ht){P(C,"    ."),S(C,"fail"),Z(!1);return}const Je=JSON.parse(ht),ve=Je.userId||Je.id||"UNKNOWN",Ge=de=>{var St,Lt,Ve,kt,Oe;const tt=((St=de.actualEquipment)==null?void 0:St.eqtClCd)||de.eqtClCd||((Lt=de.actualEquipment)==null?void 0:Lt.EQT_CL_CD)||"",De=((Ve=de.actualEquipment)==null?void 0:Ve.itemMidCd)||de.itemMidCd||((kt=de.actualEquipment)==null?void 0:kt.ITEM_MID_CD)||"",it=(((Oe=de.actualEquipment)==null?void 0:Oe.type)||de.type||"").toLowerCase();return!!(tt.startsWith("0904")||De==="02"||it.includes("stb")||it.includes(""))},_e=de=>{var St,Lt,Ve,kt,Oe;const tt=((St=de.actualEquipment)==null?void 0:St.eqtClCd)||de.eqtClCd||((Lt=de.actualEquipment)==null?void 0:Lt.EQT_CL_CD)||"",De=((Ve=de.actualEquipment)==null?void 0:Ve.itemMidCd)||de.itemMidCd||((kt=de.actualEquipment)==null?void 0:kt.ITEM_MID_CD)||"",it=(((Oe=de.actualEquipment)==null?void 0:Oe.type)||de.type||"").toLowerCase();return!!(tt.startsWith("0902")||De==="03"||it.includes("modem")||it.includes(""))},xe=K.find(Ge),Ue=K.find(_e),Pe=((Fe=xe==null?void 0:xe.actualEquipment)==null?void 0:Fe.id)||"",Ye=((rt=Ue==null?void 0:Ue.actualEquipment)==null?void 0:rt.id)||"",mt=await Su(ve,t.CTRT_ID||"",t.id,"SMR03",Pe||((It=(at=K[0])==null?void 0:at.actualEquipment)==null?void 0:It.id)||"",Ye||"");mt.O_IFSVC_RESULT&&mt.O_IFSVC_RESULT.startsWith("TRUE")?(P(C,` 

: ${mt.O_IFSVC_RESULT||""}`),S(C,"success")):(P(C,` 

${mt.MESSAGE||"   "}`),S(C,"fail"))}catch(ht){P(C,` 

${ht.message||"   "}`),S(C,"fail")}finally{Z(!1)}},We=(Fe,rt,at)=>{const It={...se,[Fe]:{...se[Fe]||{},[rt]:at==="1"?"0":"1"}};G(C,It)},Dt=()=>{if(!T||!w.some(Ge=>Ge.id===T.id))return;if(oe&&(oe.itemMidCd!==T.itemMidCd||oe.model!==T.model)){r==null||r("      .","warning");return}const rt=oe||ee.find(Ge=>Ge.itemMidCd===T.itemMidCd&&Ge.model===T.model);if(!rt){r==null||r("      .","warning");return}if(K.find(Ge=>Ge.contractEquipment.id===rt.id)){r==null||r("   .","warning");return}const It={contractEquipment:rt,actualEquipment:T,macAddress:T.macAddress||"",installLocation:""},ht=[...K,It],Je=w.filter(Ge=>Ge.id!==T.id);M(C,ht),k(C,Je);const ve={...se};delete ve[T.id],G(C,ve),j(C,null),console.log("[-]  :",{:ht.length,:Je.length}),r==null||r("   .","success")},Et=_.useMemo(()=>{const Fe=new Set(K.map(at=>at.actualEquipment.id));let rt=J.filter(at=>!Fe.has(at.id));return oe&&(rt=rt.filter(at=>at.itemMidCd===oe.itemMidCd&&at.model===oe.model)),rt},[K,J,oe]),Rt=()=>{te(!0),setTimeout(()=>{te(!1),r==null||r("    .","info")},500)},$e=async()=>{if(!(je||g)){be(!0);try{await pe(!0),r==null||r("  .","success")}catch(Fe){console.error("[-]  :",Fe),r==null||r("   .","error")}finally{be(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[je&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Ei,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsxs("button",{onClick:$e,disabled:je||g,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${je||g?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(Ei,{className:`w-3.5 h-3.5 ${je?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[ee.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{g||ae(!0)},disabled:g,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),d?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":p?"border-yellow-300 bg-yellow-100 text-yellow-700":y?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>f==null?void 0:f(),disabled:p||g,children:[p?s.jsx(jn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":I==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":I==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!g&&!he&&ot(),disabled:g||he,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>d?Re(!0):ge(!0),children:[s.jsx(nd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:d?"LDAP":""})]})]})]}),Q?ee.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:ee.map(Fe=>{const rt=K.find(It=>It.contractEquipment.id===Fe.id),at=(oe==null?void 0:oe.id)===Fe.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${g?rt?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":at?"border-blue-500 bg-blue-50 cursor-pointer":rt?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!g&&Se(Fe),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),rt&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",rt.actualEquipment.model]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",rt.actualEquipment.serialNumber]}),rt.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",rt.macAddress]})]})]})},Fe.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!g&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!T||!K.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!T)return;if(J.some(rt=>rt.id===T.id)){if(Te!=="stock"){r==null||r("  .   .","warning");return}const rt=K.findIndex(at=>at.actualEquipment.id===T.id);if(rt>=0){const at=[...K];at.splice(rt,1),M(C,at),j(C,null),r==null||r("  .","success")}return}lt(),re("removal")},disabled:!T||!K.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id)),children:s.jsx(Th,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!T||K.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!T)return;if(w.some(It=>It.id===T.id)){Dt();return}if(!oe){r==null||r("   .","warning");return}const rt=K.find(It=>It.contractEquipment.id===oe.id&&!J.some(ht=>ht.id===It.actualEquipment.id)),at=rt&&w.some(It=>It.id===rt.actualEquipment.id);if(rt&&!at){r==null||r("   .","warning");return}Nt()},disabled:!T||K.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id)),children:s.jsx(Eh,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!g&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Te==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>re("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),w.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Te==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:w.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Te==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>re("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),oe&&Et.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Te==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:Et.length})]})})]}),Te==="removal"?s.jsx(s.Fragment,{children:w.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:w.map((Fe,rt)=>{const at=Fe.id,It=se[at]||{},ht=It.EQT_LOSS_YN==="1"||It.PART_LOSS_BRK_YN==="1"||It.EQT_BRK_YN==="1"||It.EQT_CABL_LOSS_YN==="1"||It.EQT_CRDL_LOSS_YN==="1",Je=(T==null?void 0:T.id)===Fe.id,ve=gN(Fe);return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Je?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>st(Fe),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Fe.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Fe.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Fe.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${ht?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:ht?"":""})]}),!ve&&s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(Ge=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${It[Ge.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:_e=>{_e.stopPropagation(),We(at,Ge.key,It[Ge.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:It[Ge.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:Ge.label})]},Ge.key))}),ve&&s.jsx("div",{className:"mt-2 text-xs text-orange-600 bg-orange-100 p-2 rounded",children:"   "})]},at||rt)})})}):s.jsx(s.Fragment,{children:oe?Et.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:Et.map(Fe=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(T==null?void 0:T.id)===Fe.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>st(Fe),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Fe.serialNumber]}),Fe.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Fe.macAddress]})]})]}),(T==null?void 0:T.id)===Fe.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Fe.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var It;const Fe=t.WRK_CD_NM||Uh(t.WRK_CD)||t.workType||"-",rt=t.PROD_NM||t.productName||((It=t.customer)==null?void 0:It.productName)||"-",at=t.CTRT_STAT_NM||Cu(t.CTRT_STAT)||"-";return s.jsx(Ah,{isOpen:q,onClose:()=>ae(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:at,prodGrp:t.PROD_GRP||"",prodNm:rt,wrkCdNm:Fe,onSave:At,showToast:r,installedEquipmentCount:K.length,customerEquipmentCount:H})})(),!g&&s.jsx("button",{onClick:Rt,disabled:ie,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${ie?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(Ih,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(Ba,{isOpen:fe,onClose:()=>ge(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((gt=t.customer)==null?void 0:gt.id)}),s.jsx(kh,{isOpen:ce,onClose:()=>Re(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),X&&vu.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!he&&me(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Fe=>Fe.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:he?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(jn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):I==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(jh,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:U})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(Lo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:U})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${I==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>me(!1),disabled:he,children:he?" ...":""})})]})}),document.body)]})},n9=t=>{const{workItem:e}=t,n=e.WRK_CD;switch(n){case"01":return s.jsx(zD,{...t});case"02":return s.jsx($U,{...t});case"03":return s.jsx(HU,{...t});case"04":return s.jsx(zU,{...t});case"05":return s.jsx(qU,{...t});case"06":return s.jsx(XU,{...t});case"07":return s.jsx(e9,{...t});case"08":return s.jsx(t9,{...t});case"09":return s.jsx(s9,{...t});default:return console.warn(`[EquipmentRouter] Unknown WRK_CD: ${n}, using default (Install)`),s.jsx(zD,{...t})}},r9=({ctrtId:t,certifyOpLnkdCd:e,installedEquipments:n,showToast:r})=>{const[i,l]=_.useState(!1),{ldapResult:c,setLdapResult:d}=Wa();return{handleLdapConnect:async(m=!1)=>{const p=["F","FG","Z","ZG"].includes(e),y=["N","NG"].includes(e),g=n.some(C=>{var R,A,M,L;const v=((R=C.actualEquipment)==null?void 0:R.ITEM_MID_CD)||((A=C.actualEquipment)==null?void 0:A.itemMidCd)||((M=C.contractEquipment)==null?void 0:M.ITEM_MID_CD)||((L=C.contractEquipment)==null?void 0:L.itemMidCd)||C.ITEM_MID_CD||C.itemMidCd||"";return v==="02"||v==="31"}),N=n.some(C=>{var R,A,M,L;const v=((R=C.actualEquipment)==null?void 0:R.ITEM_MID_CD)||((A=C.actualEquipment)==null?void 0:A.itemMidCd)||((M=C.contractEquipment)==null?void 0:M.ITEM_MID_CD)||((L=C.contractEquipment)==null?void 0:L.itemMidCd)||C.ITEM_MID_CD||C.itemMidCd||"";return v==="10"||v==="32"});if(p){if(!g){r==null||r("FTTH  ONT  .","warning");return}if(!N){r==null||r("FTTH  AP  .","warning");return}}else if(y&&!N){r==null||r("  AP  .","warning");return}if(n.length<1){r==null||r(" .","warning");return}if(!t){r==null||r(" ID .","error");return}l(!0);try{console.log("[useLdapConnect]  :",{ctrtId:t,opLnkdCd:e});const C=await gb(t);if(console.log("[useLdapConnect]  :",C),C.exists&&C.data.length>0){const v=C.data[0];d(v),r==null||r("LDAP  .","success")}else d({_empty:!0}),r==null||r("LDAP  . (  )","info")}catch(C){console.error("[useLdapConnect]  :",C),r==null||r(C.message||"LDAP  .","error")}finally{l(!1)}},ldapLoading:i,ldapResult:c,isLdapDone:!!c}},i9=["01","05","06","07"],a9=({equipList:t,portList:e,isFtth:n,onEquipChange:r,selectedEqipId:i,onClose:l,showToast:c,entrNo:d,entrRqstNo:u,workItem:f})=>{const m=t.find($=>$.EQIP_ID===i),p=_.useMemo(()=>t.map($=>({value:$.EQIP_ID,label:`${$.EQIP_ID} - ${$.ESTB_PLC_NM||$.EQIP_NM||""}`})),[t]),[y,g]=_.useState(!1),[N,C]=_.useState([]),[v,R]=_.useState(!1),[A,M]=_.useState(!1),[L,k]=_.useState([]),[V,G]=_.useState(""),[W,j]=_.useState(""),[S,P]=_.useState(!1),F=async()=>{if(g(!0),!(N.length>0)){R(!0);try{const $=await Xm({COMMON_GRP:"LGCT015"});C($||[])}catch($){console.error("[PortStatusModal] LGCT015  :",$)}finally{R(!1)}}},ee=async()=>{if(M(!0),!(L.length>0))try{const $=await Jl(["LGWO001"]),Y=($==null?void 0:$.LGWO001)||($==null?void 0:$.output13)||[];k(Array.isArray(Y)?Y:[])}catch($){console.error("[PortStatusModal] LGWO001  :",$)}},J=async($,Y)=>{if(!V){c==null||c(" .","warning");return}if(!W.trim()){c==null||c("  .","warning");return}P(!0);try{const K=await Zw({ENTR_RQST_NO:$.entrRqstNo||"",CONS_REQ_RSN_CD:V,HSVC_INCR_RSN_CNTN:W,HSVC_CONS_RQMN_DIVS_CD:"2",SBGN_DEAL_NM:Y.crrNm||Y.name||"",SBGN_DEAL_TLNO:"",SBGN_EGNR_NM:Y.name||Y.userName||"",SBGN_EGNR_HPHN_TLNO:Y.phone||Y.hpNo||"",CTRT_ID:$.ctrtId||"",RCPT_ID:$.rcptId||"",WRK_ID:$.wrkId||"",ENTR_NO:d||""});K.RESULT_CD&&!K.RESULT_CD.startsWith("N")?(c==null||c(" .","success"),M(!1),G(""),j("")):c==null||c(K.RESULT_MSG||"  .","error")}catch(K){console.error("[PortStatusModal] Port :",K),c==null||c(K.message||"  .","error")}finally{P(!1)}};return y?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"LGU+ L2  "}),s.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:s.jsx(bi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-3",children:v?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):N.length===0?s.jsx("div",{className:"text-center py-8 text-sm text-gray-500",children:" ."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",style:{minWidth:"400px"},children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:N.map(($,Y)=>s.jsxs("tr",{className:`border-b border-gray-50 ${Y%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("td",{className:"px-2 py-2 text-gray-900 whitespace-nowrap",children:$.COMMON_CD_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:$.REF_CODE||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:$.REF_CODE2||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:$.REF_CODE3||"-"})]},Y))})]})})}),s.jsx("div",{className:"p-3 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700",children:""})})]})}):A?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"Port  "}),s.jsx("button",{onClick:()=>M(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:s.jsx(bi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:""}),s.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-800 font-mono",children:d||"-"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:""}),s.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-800",children:(()=>{try{const $=JSON.parse(localStorage.getItem("userInfo")||"{}");return $.name||$.userName||"-"}catch{return"-"}})()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:""}),s.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-800 font-mono",children:(()=>{try{const $=JSON.parse(localStorage.getItem("userInfo")||"{}");return $.phone||$.hpNo||"-"}catch{return"-"}})()})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zs,{value:V,onChange:$=>G($),placeholder:"",options:L.map(($,Y)=>({value:$.COMMON_CD||$.code||"",label:$.COMMON_CD_NM||$.name||$.COMMON_CD||""}))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:W,onChange:$=>j($.target.value.slice(0,512)),placeholder:"     ",rows:4,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg resize-none focus:border-orange-400 focus:outline-none"}),s.jsxs("div",{className:"text-right text-xs text-gray-400 mt-0.5",children:[W.length,"/512"]})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[s.jsx("button",{onClick:()=>{const $=(()=>{try{return JSON.parse(localStorage.getItem("userInfo")||"{}")}catch{return{}}})(),Y={entrRqstNo:u||"",ctrtId:(f==null?void 0:f.CTRT_ID)||(f==null?void 0:f.ctrtId)||"",rcptId:(f==null?void 0:f.RCPT_ID)||(f==null?void 0:f.rcptId)||(f==null?void 0:f.receiptId)||"",wrkId:(f==null?void 0:f.id)||(f==null?void 0:f.WRK_ID)||"",crrNm:(f==null?void 0:f.CRR_NM)||""};J({...Y,crrNm:Y.crrNm},{...$,crrNm:Y.crrNm})},disabled:S,className:`w-full py-3 rounded-lg text-sm font-semibold transition-colors ${S?"bg-gray-300 text-gray-500":"bg-orange-500 text-white hover:bg-orange-600"}`,children:S?" ...":" "}),s.jsx("button",{onClick:()=>M(!1),className:"w-full py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700",children:""})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 whitespace-nowrap",children:["LGU+ ",n?"RN":"L2"," "]}),s.jsx("button",{onClick:l,className:"p-1 rounded-full hover:bg-gray-100",children:s.jsx(bi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.length===0?s.jsx("div",{className:"text-center text-gray-500 py-8",children:"  ."}):s.jsxs(s.Fragment,{children:[n&&d&&s.jsxs("div",{className:"bg-purple-50 rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-purple-600 font-semibold whitespace-nowrap",children:"LGU+ "}),s.jsx("span",{className:"text-xs font-mono font-bold text-purple-900 whitespace-nowrap",children:d})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 whitespace-nowrap",children:" "}),s.jsx(Zs,{value:i,onValueChange:r,options:p,placeholder:" "})]}),m&&s.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:n?s.jsxs("div",{className:"space-y-1.5 text-xs",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-semibold truncate",children:m.MDL_NM||"-"})]}),s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"truncate",children:m.EQIP_ESTB_FLOO_NM||"-"})]})]}):s.jsxs("div",{className:"space-y-1.5 text-xs",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-semibold truncate",children:m.ESTB_PLC_NM||"-"})]}),s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-semibold truncate",children:m.MDL_NM||"-"})]}),s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"truncate",children:m.EQIP_ESTB_FLOO_NM||"-"})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 whitespace-nowrap",children:" "}),s.jsxs("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:[e.length,""]})]}),s.jsxs("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:[s.jsxs("div",{className:"grid grid-cols-4 bg-gray-100 text-xs font-semibold text-gray-600 px-2 py-2 border-b min-w-[320px]",children:[s.jsx("div",{className:"whitespace-nowrap",children:""}),s.jsx("div",{className:"whitespace-nowrap",children:"U+"}),s.jsx("div",{className:"whitespace-nowrap",children:""}),s.jsx("div",{className:"text-center whitespace-nowrap",children:""})]}),e.length===0?s.jsx("div",{className:"text-center text-gray-400 text-xs py-4",children:" "}):s.jsx("div",{className:"max-h-64 overflow-y-auto divide-y",children:e.map(($,Y)=>s.jsxs("div",{className:`grid grid-cols-4 text-xs px-2 py-2 hover:bg-gray-50 min-w-[320px] ${$.PT_USE==="Y"?"bg-red-50/50":""}`,children:[s.jsx("div",{className:"font-mono whitespace-nowrap",children:$.PORT_NO||"-"}),s.jsx("div",{className:"font-mono text-gray-600 whitespace-nowrap truncate",children:$.ENTR_NO||"-"}),s.jsx("div",{className:"font-mono text-gray-600 whitespace-nowrap truncate",children:$.CTRT_ID||"-"}),s.jsx("div",{className:"text-center whitespace-nowrap",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[0.625rem] font-medium whitespace-nowrap ${$.PT_USE==="Y"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:$.PT_USE==="Y"?"":""})})]},Y))})]})]})]})}),s.jsxs("div",{className:"p-4 border-t space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[!n&&s.jsxs("button",{onClick:F,className:"flex-1 py-2 bg-purple-500 text-white rounded-lg font-semibold text-sm flex items-center justify-center gap-1.5 hover:bg-purple-600 transition-colors whitespace-nowrap",children:[s.jsx(JT,{className:"w-4 h-4 flex-shrink-0"}),"L2 "]}),s.jsx("button",{onClick:ee,className:"flex-1 py-2 bg-orange-500 text-white rounded-lg font-semibold text-sm hover:bg-orange-600 transition-colors whitespace-nowrap",children:"Port"})]}),s.jsx("button",{onClick:l,className:"w-full py-2 bg-gray-600 text-white rounded-lg font-semibold",children:""})]})]})})},l9=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c=!1,isCertifyProd:d=!1,certifyOpLnkdCd:u=""})=>{const{setEquipmentData:f}=$i(),{entrNo:m,entrRqstNo:p,setEntrNo:y,lguMarketCd:g,lguOperatorId:N,lguJobType:C,lguJobTypeConf:v,setLguCommonCd:R,cl02PortData:A,setCl02PortData:M,isSubscriptionDone:L,setIsSubscriptionDone:k}=Wa(),V=t.id||t.WRK_ID||"",G=ji(je=>{var be;return((be=je.workStates[V])==null?void 0:be.installedEquipments)||[]}),{handleLdapConnect:W,ldapLoading:j,ldapResult:S,isLdapDone:P}=r9({ctrtId:t.DTL_CTRT_ID||t.CTRT_ID||"",certifyOpLnkdCd:u,installedEquipments:G,showToast:r}),[F,ee]=_.useState(!1),[J,$]=_.useState(!1),[Y,K]=_.useState(!1),[w,se]=_.useState([]),[oe,T]=_.useState([]),[I,U]=_.useState(""),Q=["F","FG","Z","ZG"].includes(u),[H,q]=_.useState({isOpen:!1,message:"",onConfirm:()=>{}}),ae=t.WRK_CD||"",fe=t.DTL_CTRT_ID||t.CTRT_ID||"",ge=i9.includes(ae),ce=ge&&!L,Re=_.useCallback(()=>{if(ge&&!L){r==null||r("  .","warning");return}q({isOpen:!0,title:"LDAP ",message:"LDAP  ?",type:"confirm",onConfirm:()=>W(!0)})},[W,ge,L,A,r]),X=_.useCallback(()=>{try{const je=localStorage.getItem("userInfo");if(je)return JSON.parse(je)}catch{}return{}},[]);_.useEffect(()=>{if(!d||g)return;(async()=>{try{const be=await Jl(["LGCT002"]),Te=(be==null?void 0:be.LGCT002)||(be==null?void 0:be.output13);if(Te&&Array.isArray(Te)&&Te.length>0){const re=Te[0];R(re.REF_CODE||"",re.REF_CODE2||"",re.REF_CODE4||"",re.REF_CODE5||""),console.log("[LGU+]  : MRKT_CD=",re.REF_CODE,"OPERATOR_ID=",re.REF_CODE2,"JOB_TYPE=",re.REF_CODE4,"JOB_TYPE_CONF=",re.REF_CODE5)}}catch(be){console.error("[LGU+]   :",be)}})()},[d,g,R]),_.useEffect(()=>{if(!d||!ge||!fe||m||L)return;(async()=>{var be;try{const Te=await _y({CTRT_ID:fe}),re=((be=Te==null?void 0:Te[0])==null?void 0:be.ENTR_NO)||"";re&&(console.log("[LGU+]   :",re),y(re,null),k(!0))}catch(Te){console.error("[LGU+]   :",Te)}})()},[d,ge,fe,m,L]);const me=async je=>{var re,pe,Se;const be=X(),Te=be.userId||be.id||"";ee(!0);try{if(je){const Nt=t.CRR_ID||"",lt=t.SO_ID||"",At=t.CUST_ID||((re=t.customer)==null?void 0:re.id)||"";(!Nt||!lt)&&console.warn("[LGU+]    - CRR_ID:",Nt,"SO_ID:",lt),await r5({CTRT_ID:fe,CUST_ID:At,WRK_ID:V,CRR_ID:Nt,SO_ID:lt,REG_UID:Te,CANCEL_TYPE:"SUBSCRIPTION",MRKT_CD:g,OPERATOR_ID:N}),console.log("[LGU+]    ")}const st=await Xw({WRK_ID:V,CTRT_ID:fe,MRKT_CD:g,OPERATOR_ID:N,REG_UID:Te});if(st.RESULT_CD==="Y"){if(r==null||r("  .","success"),y(st.ENTR_NO||null,st.ENTR_RQST_NO||null),k(!0),S&&!S._empty){const Nt=t.SO_ID||"";Nt||console.warn("[LGU+] LDAP   - SO_ID ");try{(S.AP_MAC_ADDR||S.AP_EQT_NO)&&(await _v({MSG_ID:"SMR05",EVNT_CD:"",CUST_ID:t.CUST_ID||((pe=t.customer)==null?void 0:pe.id)||"",CTRT_ID:fe,SO_ID:Nt,AP_MAC:S.AP_MAC_ADDR||"",AP_EQT_NO:S.AP_EQT_NO||"",ONT_MAC:"",ONT_EQT_NO:"",REG_UID:Te,JOB_TYPE:C,JOB_TYPE_CONF:v,ENTR_NO:st.ENTR_NO||""}),console.log("[LGU+] AP   ")),(S.ONT_MAC_ADDR||S.ONT_EQT_NO)&&(await _v({MSG_ID:"SMR05",EVNT_CD:"FM",CUST_ID:t.CUST_ID||((Se=t.customer)==null?void 0:Se.id)||"",CTRT_ID:fe,SO_ID:Nt,AP_MAC:"000000000000",AP_EQT_NO:"",ONT_MAC:"",ONT_EQT_NO:"",REG_UID:Te,JOB_TYPE:C,JOB_TYPE_CONF:v,ENTR_NO:st.ENTR_NO||""}),console.log("[LGU+] ONT   "))}catch(lt){console.warn("[LGU+] LDAP    ():",lt)}}}else r==null||r(st.RESULT_MSG||"  .","error")}catch(st){console.error("[LGU+]  :",st),r==null||r(st.message||" .","error")}finally{ee(!1)}},he=async()=>{var je;if(!fe){r==null||r(" ID .","error");return}if(!g||!N){r==null||r("LGU+    .    .","error"),console.error("[LGU+]   - lguMarketCd:",g,"lguOperatorId:",N);return}ee(!0);try{const be=await _y({CTRT_ID:fe}),Te=((je=be==null?void 0:be[0])==null?void 0:je.ENTR_NO)||"";ee(!1),q(Te?{isOpen:!0,title:"U+  ",message:`  .
 ?`,type:"warning",onConfirm:()=>me(Te)}:{isOpen:!0,title:"U+  ",message:"U+  ?",type:"confirm",onConfirm:()=>me("")})}catch(be){ee(!1),console.error("[LGU+]  :",be),r==null||r(be.message||" .","error")}},Z=async()=>{var re;if(w.length>0){$(!0);return}if(!m){r==null||r("(ENTR_NO) .   .","error");return}const je=p?"01":"02",be=p||"null",Te=Q?"ftthEqipList":"opticEqipList";K(!0);try{const pe=await n5({COMMAND:Te,ENTR_NO:m,ENTR_RQST_NO:be,BIZ_TYPE:je,CTRT_ID:fe});if(!pe||pe.length===0){r==null||r("  .","info"),K(!1);return}if((re=pe[0])!=null&&re.RESULT_CD&&pe[0].RESULT_CD.startsWith("N")){r==null||r(` : ${pe[0].RESULT_MSG||""}`,"error"),K(!1);return}se(pe);const Se=pe[0].EQIP_ID;U(Se);const Nt=await Cy({COMMAND:Q?"ftthEqipPortList":"opticEqipPortList",EQIP_ID:Se,CTRT_ID:fe});T(Nt||[]),$(!0)}catch(pe){console.error("[LGU+]  :",pe),r==null||r(pe.message||" .","error")}finally{K(!1)}},ie=async je=>{U(je);const be=Q?"ftthEqipPortList":"opticEqipPortList";try{const Te=await Cy({COMMAND:be,EQIP_ID:je,CTRT_ID:fe});T(Te||[])}catch(Te){console.error("[LGU+]   :",Te),T([])}},te=je=>{console.log("[WorkEquipmentManagement]  :",je),f(je),e(je)};return s.jsxs("div",{className:"work-equipment-management",children:[d&&!c&&ge&&s.jsx("div",{className:"mx-3 mt-2 mb-1",children:s.jsx("div",{className:`rounded-lg border p-3 ${L?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(Ch,{className:`w-5 h-5 flex-shrink-0 ${L?"text-green-600":"text-orange-600"}`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:`text-sm font-semibold whitespace-nowrap ${L?"text-green-800":"text-orange-800"}`,children:"U+ "}),m&&s.jsxs("div",{className:"text-xs text-gray-600 truncate",children:[": ",s.jsx("span",{className:"font-mono font-semibold",children:m})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:he,disabled:F,className:`px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-colors bg-orange-500 text-white hover:bg-orange-600 ${F?"opacity-50":""}`,children:F?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(jn,{className:"w-4 h-4 animate-spin"}),"..."]}):""}),s.jsx("button",{onClick:Z,disabled:Y,className:"px-3 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200",children:Y?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(jn,{className:"w-3 h-3 animate-spin"}),""]}):s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(yu,{className:"w-3 h-3"}),""]})})]})]})})}),d&&c&&m&&s.jsx("div",{className:"mx-3 mt-2 mb-1",children:s.jsx("div",{className:"rounded-lg border p-3 bg-green-50 border-green-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vi,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-semibold text-green-800",children:""}),s.jsx("span",{className:"text-xs text-gray-600 font-mono",children:m})]})})}),s.jsx(n9,{workItem:t,onSave:te,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:l,readOnly:c,isCertifyProd:d,certifyOpLnkdCd:u,onLdapConnect:Re,isLdapDone:P,ldapLoading:j,ldapBlocked:ce}),J&&s.jsx(a9,{equipList:w,portList:oe,isFtth:Q,onEquipChange:ie,selectedEqipId:I,onClose:()=>$(!1),showToast:r,entrNo:m||"",entrRqstNo:p||"",workItem:t}),s.jsx(ul,{isOpen:H.isOpen,onClose:()=>q(je=>({...je,isOpen:!1})),onConfirm:H.onConfirm,title:H.title,message:H.message,type:H.type})]})},o9=[],c9=({workItem:t,showToast:e,readOnly:n=!1})=>{const[r,i]=_.useState(!1),[l,c]=_.useState(null),[d,u]=_.useState(null),[f,m]=_.useState(!1),[p,y]=_.useState(0),[g,N]=_.useState(null),[C,v]=_.useState(!1),[R,A]=_.useState(!1),[M,L]=_.useState(null),[k,V]=_.useState(null),[G,W]=_.useState([]),[j,S]=_.useState(""),[P,F]=_.useState([]),[ee,J]=_.useState(-1),[$,Y]=_.useState(!1),[K,w]=_.useState(!1),[se,oe]=_.useState(""),[T,I]=_.useState(""),[U,Q]=_.useState(!1),[H,q]=_.useState(!1),[ae,fe]=_.useState([]),[ge,ce]=_.useState(!1),[Re,X]=_.useState(!1),{certifyRegconfInfo:me,setCertifyRegconfInfo:he,certifyOpLnkdCd:Z,isLineRegistrationDone:ie,setIsLineRegistrationDone:te,entrNo:je,lguMarketCd:be}=Wa(),Te=["F","FG","Z","ZG"].includes(Z),re=()=>["F","FG","Z","ZG"].includes(Z)?"ftthEqipList":["V","VG"].includes(Z)?"vdslEqipList":"opticEqipList",pe=()=>["F","FG","Z","ZG"].includes(Z)?"ftthEqipPortList":["V","VG"].includes(Z)?"vdslEqipPortList":"opticEqipPortList",Se=t.id,st=ji(ve=>{var Ge;return((Ge=ve.workStates[Se])==null?void 0:Ge.installedEquipments)??o9}),Nt=_.useMemo(()=>st.map(ve=>{var Ge;return((Ge=ve.actualEquipment)==null?void 0:Ge.id)||""}).sort().join(","),[st]),lt=_.useRef(Nt);_.useEffect(()=>{if(me){const ve=me._equipmentFingerprint;if(ve&&ve!==Nt){he(null);return}c(me),m(!0)}},[]),_.useEffect(()=>{(async()=>{const Ge=t.CTRT_ID||"";if(Ge){Q(!0);try{const _e=await _y({CTRT_ID:Ge});if(_e&&_e.length>0){const xe=_e[0];oe(xe.ENTR_NO||""),I(xe.ENTR_RQST_NO||"")}}catch(_e){console.error("[] ENTR_NO  :",_e)}finally{Q(!1)}}})()},[t.CTRT_ID]),_.useEffect(()=>{lt.current!==Nt&&(lt.current=Nt,f&&(c(null),he(null),m(!1),y(0),te(!1)))},[Nt]),_.useEffect(()=>{lt.current===Nt&&f&&(c(null),he(null),m(!1),te(!1))},[p]);const{ontMac:At,apMac:ot,ontSerial:We,apList:Dt}=_.useMemo(()=>{var Ue;let ve="",Ge="";const _e=[];for(const Pe of st){const Ye=Pe.actualEquipment||{},mt=Pe.contractEquipment||{},de=Ye.itemMidCd||Ye.ITEM_MID_CD||mt.itemMidCd||mt.ITEM_MID_CD||"",tt=Ye.macAddress||Ye.MAC_ADDRESS||Pe.macAddress||"",De=Ye.serialNumber||Ye.EQT_SERNO||"";(de==="02"||de==="31")&&(ve=tt||De,Ge=De),(de==="10"||de==="32")&&_e.push({mac:tt||De,serialNumber:De,model:Ye.model||Ye.EQT_CL_NM||"",type:mt.type||Ye.type||"AP"})}const xe=_e.length>0?((Ue=_e[p])==null?void 0:Ue.mac)||_e[0].mac:"";return{ontMac:ve,apMac:xe,ontSerial:Ge,apList:_e}},[st,p]),Et=_.useCallback(async()=>{if(!n){if(!se){L("ENTR_NO . LGU+  ."),e==null||e("ENTR_NO .","error");return}v(!0),L(null);try{const ve=t.CTRT_ID||"",Ge=await xv({ENTR_NO:se,CTRT_ID:ve});if(!Ge||(Ge.RESULT_CD||"").startsWith("N")){const St=(Ge==null?void 0:Ge.RESULT_MSG)||"L2  ";L(`LGU    (${ve})
${St}`),e==null||e(`L2  : ${St}`,"error");return}const _e=Ge.MDL_NM||"",xe=Ge.EQIP_ID||"",Ue=Ge.PRT_INDX_NM||"",Pe=Ge.ESTB_PLC_NM||"";try{await pv({ENTR_NO:se,ENTR_RQST_NO:T||"null",BIZ_TYPE:"01",CTRT_ID:ve})}catch(St){console.warn("[L2] getUplsEntrEqipDtl error (non-critical):",St)}let Ye="",mt="",de="",tt="";if(_e)try{const St=await Xm({COMMON_GRP:"LGCT015"});if(St){const Lt=St.find(Ve=>Ve.COMMON_CD===_e);Lt&&(Ye=Lt.COMMON_CD_NM||"",mt=Lt.REF_CODE||"",de=Lt.REF_CODE2||"",tt=Lt.REF_CODE3||"")}}catch(St){console.warn("[L2] LGCT015 lookup error:",St)}N({autoYn:"Y",buildingName:Pe,portNo:Ue,equipId:xe,modelNm:Ye,maxSpeed:mt,manufacturer:de,remarks:tt,mdlNmRaw:_e}),A(!0),he({...me||{},EQIP_ID:xe,EQIP_PORT_NO:Ue,EQIP_DIVS:"L2",DEL_YN:"N"}),e==null||e("L2  .","success")}catch{L("L2    ."),e==null||e("L2    .","error")}finally{v(!1)}}},[se,T,t.CTRT_ID,n,me,he,e]),Rt=_.useCallback(async()=>{var ve;if(!(n||!se)){Y(!0),L(null);try{const Ge=t.CTRT_ID||"",_e=await xv({ENTR_NO:se,CTRT_ID:Ge});if(!_e||(_e.RESULT_CD||"").startsWith("N")){const mt=(_e==null?void 0:_e.RESULT_MSG)||"OLT  ";L(`LGU OLT    (${Ge})
${mt}`),e==null||e(`OLT  : ${mt}`,"error");return}const xe={OLT_ID:_e.EQIP_ID||"",OLT_MDL_NM:_e.MDL_NM||"",OLT_PORT_NO:_e.PRT_INDX_NM||"",ESTB_PLC_NM:_e.ESTB_PLC_NM||""};V(xe);try{await pv({ENTR_NO:se,ENTR_RQST_NO:T||"null",BIZ_TYPE:"01",CTRT_ID:Ge})}catch(mt){console.warn("[FTTH] getUplsEntrEqipDtl error:",mt)}const Ue=await n5({COMMAND:re(),ENTR_NO:se,ENTR_RQST_NO:T||"null",BIZ_TYPE:"01",CTRT_ID:Ge});if(!Ue||Ue.length===0){L("RN   ."),e==null||e("RN   .","warning");return}const Pe=Ue.map(mt=>{const de={};for(const tt of Object.keys(mt))de[tt.toUpperCase()]=mt[tt];return de});W(Pe);const Ye=((ve=Pe[0])==null?void 0:ve.EQIP_ID)||"";S(Ye),Ye&&await gt(Ye,Ge),e==null||e("FTTH  ","success")}catch(Ge){console.error("[FTTH]  :",Ge),L("FTTH    ."),e==null||e("FTTH  ","error")}finally{Y(!1)}}},[se,T,t.CTRT_ID,n,Z,e]),$e=_.useRef(!1);_.useEffect(()=>{$e.current||n||!se||U||($e.current=!0,Te?Rt():Et())},[se,U,n,Te,Et,Rt]);const gt=async(ve,Ge)=>{w(!0),J(-1);try{const xe=(await Cy({COMMAND:pe(),EQIP_ID:ve,CTRT_ID:Ge})||[]).map(Ue=>{const Pe={};for(const Ye of Object.keys(Ue))Pe[Ye.toUpperCase()]=Ue[Ye];return Pe});F(xe)}catch(_e){console.error("[FTTH]   :",_e),F([])}finally{w(!1)}},Fe=async ve=>{S(ve),J(-1);const Ge=t.CTRT_ID||"";ve&&await gt(ve,Ge)},rt=ve=>{J(ve);const Ge=P[ve];if(!Ge||!k)return;he({...me||{},OLT_ID:k.OLT_ID,OLT_PORT:k.OLT_PORT_NO,EQIP_ID:j,EQIP_PORT_NO:Ge.PORT_NO,EQIP_PORT_USE:Ge.PT_USE,PORT_ENTR_NO:Ge.ENTR_NO,EQIP_DIVS:"OLT",DEL_YN:"N"})},at=_.useCallback(async()=>{if(q(!0),!(ae.length>0)){ce(!0);try{const ve=await Xm({COMMON_GRP:"LGCT015"});fe(ve||[])}catch(ve){console.error("[L2] LGCT015  :",ve)}finally{ce(!1)}}},[ae.length]),It=async()=>{if(n)return;const ve=me;if(!(ve!=null&&ve.EQIP_PORT_NO)){e==null||e(" .    .","warning");return}X(!0),u(null);try{if(Te&&ve.EQIP_PORT_USE==="Y"&&ve.PORT_ENTR_NO!==(je||se)){e==null||e("  .    .","error"),X(!1);return}if(!Te&&(Z==="N"||Z==="NG")){const Ge=(ve.EQIP_PORT_NO||"").replace(/\//g,"__"),_e=await Jw({ENTR_NO:je||se,EQIP_ID:ve.EQIP_ID||"",PORT_NM:Ge,CTRT_ID:t.CTRT_ID||""});if(!_e.success){e==null||e(`LGU+   
${_e.RESULT_MSG}`,"error"),X(!1);return}if(_e.ENTR_EXIST==="Y"){e==null||e("LGU+  .   .","error"),he(null),X(!1);return}}te(!0),e==null||e("LGU+  .","success")}catch(Ge){console.error("[]  :",Ge),u("    ."),e==null||e("  ","error")}finally{X(!1)}},ht=({label:ve,value:Ge})=>s.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-gray-100 last:border-b-0",children:[s.jsx("span",{className:"text-xs text-gray-500",children:ve}),s.jsx("span",{className:"text-xs font-medium text-gray-900 text-right max-w-[60%] truncate",children:Ge||"-"})]}),Je=G.find(ve=>ve.EQIP_ID===j);return s.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-6 pb-3 sm:pb-4 space-y-3 sm:space-y-4",children:[Dt.length>1&&!n&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 sm:p-4",children:[s.jsxs("h5",{className:"text-xs sm:text-sm font-semibold text-amber-800 mb-2 flex items-center gap-1.5",children:[s.jsx(bp,{className:"w-4 h-4"}),"AP  (",Dt.length," )"]}),s.jsx("div",{className:"space-y-2",children:Dt.map((ve,Ge)=>s.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg border cursor-pointer transition-colors ${p===Ge?"border-amber-400 bg-amber-100":"border-gray-200 bg-white hover:border-amber-300"}`,onClick:()=>y(Ge),children:[s.jsx("input",{type:"radio",name:"apSelect",checked:p===Ge,onChange:()=>y(Ge),className:"w-4 h-4 text-amber-600"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:[ve.type," ",ve.model&&`(${ve.model})`]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono truncate",children:["MAC: ",ve.mac||"-"]})]})]},Ge))})]}),!Te&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("h5",{className:"text-xs sm:text-sm font-bold text-gray-900 flex items-center gap-1.5",children:[s.jsx(hv,{className:"w-4 h-4 text-purple-500"}),"()",R&&s.jsx(Vi,{className:"w-3.5 h-3.5 text-green-500 ml-1"}),C&&s.jsx("div",{className:"w-3.5 h-3.5 border-2 border-purple-500 border-t-transparent rounded-full animate-spin ml-1"})]})}),M&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 mb-2 flex items-start gap-1.5",children:[s.jsx(Mr,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-red-700",children:M})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsx(ht,{label:"",value:"L2"}),s.jsx(ht,{label:"",value:(g==null?void 0:g.autoYn)||"-"}),s.jsx(ht,{label:"",value:(g==null?void 0:g.buildingName)||"-"}),s.jsx(ht,{label:"",value:(g==null?void 0:g.portNo)||"-"}),s.jsx(ht,{label:"ID",value:(g==null?void 0:g.equipId)||"-"}),s.jsx(ht,{label:"",value:(g==null?void 0:g.modelNm)||"-"}),s.jsx(ht,{label:"",value:(g==null?void 0:g.maxSpeed)||"-"}),s.jsx(ht,{label:"",value:(g==null?void 0:g.manufacturer)||"-"}),s.jsx(ht,{label:"",value:(g==null?void 0:g.remarks)||"-"})]}),s.jsx("div",{className:"mt-2 flex justify-end",children:s.jsxs("button",{onClick:at,className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-1 transition-colors",children:[s.jsx(JT,{className:"w-3 h-3"})," L2 "]})})]}),Te&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("h5",{className:"text-xs sm:text-sm font-bold text-gray-900 flex items-center gap-1.5",children:[s.jsx(hv,{className:"w-4 h-4 text-orange-500"}),"(OLT)",k&&s.jsx(Vi,{className:"w-3.5 h-3.5 text-green-500 ml-1"}),$&&s.jsx("div",{className:"w-3.5 h-3.5 border-2 border-orange-500 border-t-transparent rounded-full animate-spin ml-1"})]})}),M&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 mb-2 flex items-start gap-1.5",children:[s.jsx(Mr,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-red-700",children:M})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsx(ht,{label:"",value:"OLT"}),s.jsx(ht,{label:"",value:(k==null?void 0:k.OLT_MDL_NM)||"-"}),s.jsx(ht,{label:"",value:(k==null?void 0:k.OLT_PORT_NO)||"-"}),s.jsx(ht,{label:"",value:(k==null?void 0:k.ESTB_PLC_NM)||"-"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[s.jsxs("h5",{className:"text-xs sm:text-sm font-bold text-gray-900 mb-2 flex items-center gap-1.5",children:[s.jsx(dv,{className:"w-4 h-4 text-orange-500"}),"RN  "]}),G.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:"RN  "}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:j,onChange:ve=>Fe(ve.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg bg-white appearance-none pr-8 focus:border-orange-400 focus:outline-none",children:G.map(ve=>s.jsxs("option",{value:ve.EQIP_ID,children:[ve.EQIP_ID," - ",ve.MDL_NM||ve.EQIP_NM||""]},ve.EQIP_ID))}),s.jsx(or,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none"})]}),Je&&s.jsxs("div",{className:"mt-1.5 grid grid-cols-2 gap-x-4 gap-y-1",children:[s.jsx(ht,{label:"",value:Je.MDL_NM||"-"}),s.jsx(ht,{label:"",value:Je.EQIP_ESTB_FLOO_NM||"-"})]})]}),P.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:["  (",P.length,")"]}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"max-h-48 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-left font-semibold text-gray-600 border-b",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-center font-semibold text-gray-600 border-b",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-left font-semibold text-gray-600 border-b",children:"ID"})]})}),s.jsx("tbody",{children:P.map((ve,Ge)=>s.jsxs("tr",{onClick:()=>!n&&rt(Ge),className:`cursor-pointer transition-colors ${ee===Ge?"bg-orange-100 border-l-2 border-l-orange-500":ve.PT_USE==="Y"?"bg-red-50/50":Ge%2===0?"bg-white":"bg-gray-50/50"} hover:bg-orange-50`,children:[s.jsx("td",{className:"px-2 py-1.5 font-mono border-b",children:ve.PORT_NO||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-center border-b",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[0.625rem] font-medium ${ve.PT_USE==="Y"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ve.PT_USE==="Y"?"":""})}),s.jsx("td",{className:"px-2 py-1.5 font-mono text-gray-600 border-b",children:ve.ENTR_NO||"-"})]},`${ve.EQIP_ID}-${ve.PORT_NO}-${Ge}`))})]})})})]}),K&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"inline-block w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"   ..."})]})]})]}),!n&&s.jsx("button",{onClick:It,disabled:Re||ie,className:`w-full py-3 sm:py-4 rounded-xl font-semibold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${ie?"bg-green-500 text-white cursor-default":Re?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,children:ie?s.jsxs(s.Fragment,{children:[s.jsx(Vi,{className:"w-4 h-4 sm:w-5 sm:h-5"})," "]}):Re?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(dv,{className:"w-4 h-4 sm:w-5 sm:h-5"}),""]})}),d&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 flex items-start gap-2",children:[s.jsx(Mr,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs sm:text-sm text-red-700",children:d})]}),ie&&!n&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 sm:p-4",children:s.jsx("p",{className:"text-xs sm:text-sm text-green-700",children:" .       ."})}),H&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"LGU+ L2  "}),s.jsx("button",{onClick:()=>q(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:s.jsx(bi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-3",children:ge?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):ae.length===0?s.jsx("div",{className:"text-center py-8 text-sm text-gray-500",children:" ."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",style:{minWidth:"400px"},children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:ae.map((ve,Ge)=>s.jsxs("tr",{className:`border-b border-gray-50 ${Ge%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("td",{className:"px-2 py-2 text-gray-900 whitespace-nowrap",children:ve.COMMON_CD_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:ve.REF_CODE||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:ve.REF_CODE2||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:ve.REF_CODE3||"-"})]},Ge))})]})})}),s.jsx("div",{className:"p-3 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700",children:""})})]})})]})},qD=({order:t,onBack:e,onComplete:n,showToast:r})=>{var k,V;const[i,l]=_.useState(!1),[c,d]=_.useState(!0),[u,f]=_.useState(!0),[m,p]=_.useState(!0),[y,g]=_.useState(""),N=t.WRK_CD||"",C=["01","03","05","07"].includes(N);_.useEffect(()=>{const G=t.PYM_MTHD||"",W=t.ATMT_YN||"";["01","05","07"].includes(N)&&G==="01"&&W==="Y"?(p(!1),g("/Email")):(p(!0),g(""))},[N,t]),_.useEffect(()=>{(async()=>{var j,S;const W=t.WRK_DRCTN_ID;if(!W){console.log("[PostProcess] WRK_DRCTN_ID ,    ");const P=t.SIGN_TYP||"",F=t.CUST_CL||((j=t.customer)==null?void 0:j.CUST_CL)||"",ee=t.PDA_CLICK_YN||"";d(P==="NN"||F==="H"||ee==="Y");return}try{console.log("[PostProcess] getAfterProcInfo :",W);const P=await h5(W);if(P)console.log("[PostProcess] getAfterProcInfo :",P),d(P.WRK_DRCTN_PRNT_YN!=="Y"),f(P.CLOSE_DANGER!=="Y"),P.AUTO_PAYMENTS_YN==="Y"&&(p(!1),g("/Email"));else{const F=t.SIGN_TYP||"",ee=t.CUST_CL||((S=t.customer)==null?void 0:S.CUST_CL)||"",J=t.PDA_CLICK_YN||"";d(F==="NN"||ee==="H"||J==="Y")}}catch(P){console.error("[PostProcess] getAfterProcInfo :",P)}})()},[t]);const v=()=>{r==null||r("     .","info")},R=()=>{r==null||r("AS     .","info")},A=()=>{if(c){r==null||r("  .","warning");return}r==null||r("()   ","info")},M=()=>{if(u){r==null||r("  .","warning");return}r==null||r("()   ","info")},L=()=>{if(m){r==null||r("  .","warning");return}r==null||r("   ","info")};return s.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:" "})}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:((k=t.customer)==null?void 0:k.name)||t.CUST_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.typeDisplay||t.WRK_CD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-sm font-medium text-gray-800 text-right max-w-[60%] truncate",children:t.PROD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-start py-1.5",children:[s.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs text-gray-700 text-right ml-2",children:((V=t.customer)==null?void 0:V.address)||t.ST_ADDR||"-"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:" "})}),s.jsx("div",{className:"p-4 space-y-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{type:"button",onClick:v,className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-50 hover:bg-blue-100 active:bg-blue-200 text-blue-700 rounded-lg font-semibold transition-all text-sm border border-blue-200",children:[s.jsx("span",{children:""}),s.jsx(bm,{className:"w-3.5 h-3.5"})]}),s.jsxs("button",{type:"button",onClick:R,className:"flex items-center justify-center gap-2 px-4 py-3 bg-orange-50 hover:bg-orange-100 active:bg-orange-200 text-orange-700 rounded-lg font-semibold transition-all text-sm border border-orange-200",children:[s.jsx("span",{children:"AS"}),s.jsx(bm,{className:"w-3.5 h-3.5"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:""})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("button",{type:"button",onClick:A,disabled:c,className:`w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-lg font-semibold transition-all text-sm ${c?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-500 hover:bg-purple-600 active:bg-purple-700 text-white shadow-sm"}`,children:[s.jsx("span",{children:" ()"}),!c&&s.jsx(bm,{className:"w-3.5 h-3.5"})]}),s.jsxs("button",{type:"button",onClick:M,disabled:u,className:`w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-lg font-semibold transition-all text-sm ${u?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 active:bg-green-700 text-white shadow-sm"}`,children:[s.jsx("span",{children:" ()"}),!u&&s.jsx(bm,{className:"w-3.5 h-3.5"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-cyan-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:"/"})}),s.jsx("div",{className:"p-4",children:s.jsxs("button",{type:"button",onClick:L,disabled:m,className:`w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-lg font-semibold transition-all text-sm ${m?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 active:bg-cyan-700 text-white shadow-sm"}`,children:[s.jsx("span",{children:y}),!m&&s.jsx(bm,{className:"w-3.5 h-3.5"})]})})]}),C&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>l(!i),className:"w-full flex items-center justify-between px-4 py-3.5 bg-amber-50 hover:bg-amber-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-amber-800",children:" "}),i?s.jsx(Wr,{className:"w-5 h-5 text-amber-600"}):s.jsx(or,{className:"w-5 h-5 text-amber-600"})]}),i&&s.jsx("div",{className:"p-4 bg-white border-t border-amber-100",children:s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"  ."})})]}),s.jsx("div",{className:"pt-2 pb-4",children:s.jsx("button",{type:"button",onClick:n,className:"w-full px-4 py-4 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-800 hover:to-slate-900 active:from-slate-900 active:to-black text-white rounded-xl font-bold text-base shadow-lg transition-all",children:""})})]})},d9=({prodCd:t,soId:e,isCertifyProdField:n})=>{const[r,i]=_.useState([]),[l,c]=_.useState(!1),[d,u]=_.useState([]),[f,m]=_.useState(!1),[p,y]=_.useState([]),[g,N]=_.useState(!1),C=l&&f&&g;_.useEffect(()=>{(async()=>{try{const L=(await ka("CMIF006")).map(k=>k.code||k.COMMON_CD);i(L),console.log("[useCertifyDetection] CMIF006 SO :",L.length,"")}catch(M){console.error("[useCertifyDetection] CMIF006  :",M)}c(!0)})()},[]),_.useEffect(()=>{(async()=>{try{const M=await qp();u(M),console.log("[useCertifyDetection] CertifyProdMap:",M.length,"")}catch(M){console.error("[useCertifyDetection] CertifyProdMap  :",M)}m(!0)})()},[]),_.useEffect(()=>{(async()=>{try{const L=(await ka("LGCT001")).map(k=>({code:k.code||k.COMMON_CD,opLnkdCd:k.ref_code8||""}));y(L),console.log("[useCertifyDetection] LGCT001 UPLS :",L.length,"")}catch(M){console.error("[useCertifyDetection] LGCT001  :",M)}N(!0)})()},[]);const v=_.useMemo(()=>{const A=p.find(L=>L.code===t),M=!!A;return console.log("[useCertifyDetection] PROD_CD:",t,"| SO_ID:",e,"| LGCT001:",A?A.opLnkdCd:"N/A","| result:",M),M},[t,e,p]),R=_.useMemo(()=>{const A=p.find(M=>M.code===t);return(A==null?void 0:A.opLnkdCd)||""},[t,p]);return{isCertifyProd:v,certifyOpLnkdCd:R,isLoaded:C,certifyProdList:d,certifySoList:r,uplsProdList:p}},u9=({workItem:t,onComplete:e,onBack:n,showToast:r})=>{var Y;const i=t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status==="";t.WRK_STAT_CD==="1"||t.WRK_STAT_CD;const{currentStep:l,setCurrentStep:c,setCurrentWorkId:d,equipmentData:u,setEquipmentData:f,filteringData:m,setFilteringData:p}=$i(),[y,g]=_.useState(null),{isCertifyProd:N,certifyOpLnkdCd:C,isLoaded:v}=d9({prodCd:t.PROD_CD||"",soId:t.SO_ID||"",isCertifyProdField:t.IS_CERTIFY_PROD});_.useEffect(()=>{d(t.id);const K=()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0};K(),requestAnimationFrame(()=>{K()}),setTimeout(()=>{K()},50)},[t.id,d]),_.useEffect(()=>{(async()=>{var w;if(!(t.WRK_CD!=="01"&&t.WRK_CD!=="02")&&!i)try{const se=await Xp({WRK_ID:t.id,RCPT_ID:t.RCPT_ID,CUST_ID:((w=t.customer)==null?void 0:w.id)||t.CUST_ID});if(se){const oe=se.OST_WORKABLE_STAT||"";if(oe==="0"||oe==="1"||oe==="4"){const T=t.WRK_CD==="01"?"    .":"    .";r==null||r(T,"warning",!0)}}}catch(se){console.error("[WorkProcessFlow] OST   :",se)}})()},[t.id,t.WRK_CD,t.RCPT_ID,(Y=t.customer)==null?void 0:Y.id,t.CUST_ID,i,r]),_.useEffect(()=>{(async()=>{var se;const w=t.WRK_CD==="05"&&t.DTL_CTRT_ID||t.CTRT_ID;try{const oe=localStorage.getItem("userInfo"),T=oe?JSON.parse(oe):{};console.log("[WorkProcessFlow]   - WRK_CD:",t.WRK_CD,"CTRT_ID:",w||"()");const I=await to({WRKR_ID:T.workerId||"A20130708",SO_ID:t.SO_ID||T.soId,WRK_ID:t.id,CUST_ID:((se=t.customer)==null?void 0:se.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:w||"",OLD_CTRT_ID:t.WRK_CD==="05"?t.CTRT_ID:null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null}),U={kpiProdGrpCd:I.kpiProdGrpCd,prodChgGb:I.prodChgGb,chgKpiProdGrpCd:I.chgKpiProdGrpCd,prodGrp:I.prodGrp,upCtrlCl:I.upCtrlCl,prodPromoInfo:I.prodPromoInfo||[]};if(g(I),p(U),["02","08","09"].includes(t.WRK_CD||"")||(f({installedEquipments:[],removedEquipments:[],prodPromoInfo:I.prodPromoInfo||[],...U}),console.log("[WorkProcessFlow]   - prodPromoInfo :",(I.prodPromoInfo||[]).length,"")),["02","08","09"].includes(t.WRK_CD||"")){const q=localStorage.getItem("userInfo"),ae=q?JSON.parse(q):{},fe=(I.removedEquipments||[]).map(ge=>{var ce;return{id:ge.EQT_NO,type:ge.ITEM_MID_NM,model:ge.EQT_CL_NM,serialNumber:ge.EQT_SERNO,itemMidCd:ge.ITEM_MID_CD,eqtClCd:ge.EQT_CL_CD||ge.EQT_CL,macAddress:ge.MAC_ADDRESS||ge.MAC_ADDR,CUST_ID:((ce=t.customer)==null?void 0:ce.id)||t.CUST_ID,CTRT_ID:t.CTRT_ID,EQT_NO:ge.EQT_NO,ITEM_CD:ge.ITEM_CD||"",EQT_SERNO:ge.EQT_SERNO,WRK_ID:t.id,WRK_CD:t.WRK_CD,EQT_CL:ge.EQT_CL||ge.EQT_CL_CD||"",EQT_CL_CD:ge.EQT_CL_CD||ge.EQT_CL||"",ITEM_MID_CD:ge.ITEM_MID_CD||"",SVC_CMPS_ID:ge.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:ge.BASIC_PROD_CMPS_ID||"",MST_SO_ID:ge.MST_SO_ID||t.SO_ID||ae.soId,SO_ID:ge.SO_ID||t.SO_ID||ae.soId,REG_UID:ae.userId||ae.workerId||"A20230019",EQT_LOSS_YN:"0",PART_LOSS_BRK_YN:"0",EQT_BRK_YN:"0",EQT_CABL_LOSS_YN:"0",EQT_CRDL_LOSS_YN:"0"}});f({installedEquipments:[],removedEquipments:fe,prodPromoInfo:I.prodPromoInfo||[],...U}),console.log("[WorkProcessFlow]    :",fe.length,", prodPromoInfo:",(I.prodPromoInfo||[]).length,"")}}catch(oe){console.error(" API Pre-loading :",oe)}})()},[t.id]);const R=()=>{var se,oe,T,I,U,Q;if(((se=u==null?void 0:u.installedEquipments)==null?void 0:se.length)>0||((oe=u==null?void 0:u.removedEquipments)==null?void 0:oe.length)>0)return console.log("[WorkProcessFlow] Store     - "),u;const K=`equipment_draft_${t.id}`,w=localStorage.getItem(K);if(w)try{const H=JSON.parse(w),q=H.installedEquipments&&H.installedEquipments.length>0,ae=H.markedForRemoval&&H.markedForRemoval.length>0;if(q||ae){const fe=localStorage.getItem("userInfo"),ge=fe?JSON.parse(fe):{},ce=t.DTL_CTRT_ID||t.CTRT_ID,Re=(H.markedForRemoval||[]).map(he=>{var ie,te;const Z=((ie=H.removalStatus)==null?void 0:ie[he.id])||{};return{...he,id:he.id,type:he.type,model:he.model,serialNumber:he.serialNumber,itemMidCd:he.itemMidCd,EQT_NO:he.id,EQT_SERNO:he.serialNumber,ITEM_MID_CD:he.itemMidCd,EQT_CL_CD:he.eqtClCd,MAC_ADDRESS:he.macAddress,WRK_ID:t.id,CUST_ID:((te=t.customer)==null?void 0:te.id)||t.CUST_ID,CTRT_ID:ce,WRK_CD:t.WRK_CD,CHG_YN:t.WRK_CD==="05"?"Y":void 0,SVC_CMPS_ID:he.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:he.BASIC_PROD_CMPS_ID||"",MST_SO_ID:he.MST_SO_ID||t.SO_ID||ge.soId,SO_ID:he.SO_ID||t.SO_ID||ge.soId,REG_UID:ge.userId||ge.workerId||"A20230019",EQT_LOSS_YN:Z.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:Z.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:Z.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:Z.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:Z.EQT_CRDL_LOSS_YN||"0"}}),X=(H.installedEquipments||[]).map(he=>{const Z=he.actualEquipment||{},ie=he.contractEquipment||{};return{actualEquipment:{...Z,id:Z.id,type:Z.type,model:Z.model,serialNumber:Z.serialNumber,itemMidCd:Z.itemMidCd,eqtClCd:Z.eqtClCd,macAddress:he.macAddress||Z.macAddress,BASIC_PROD_CMPS_ID:Z.BASIC_PROD_CMPS_ID||ie.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:Z.EQT_PROD_CMPS_ID||ie.SVC_CMPS_ID||ie.id,PROD_CD:Z.PROD_CD||ie.PROD_CD||t.PROD_CD,SVC_CD:Z.SVC_CD||ie.SVC_CD||"",SVC_CMPS_ID:Z.SVC_CMPS_ID||ie.SVC_CMPS_ID||ie.id,EQT_SALE_AMT:Z.EQT_SALE_AMT||"0",MST_SO_ID:Z.MST_SO_ID||t.SO_ID||ge.soId,SO_ID:Z.SO_ID||t.SO_ID||ge.soId,OLD_LENT_YN:Z.OLD_LENT_YN||"N",LENT:Z.LENT||"10",ITLLMT_PRD:Z.ITLLMT_PRD||"00",EQT_USE_STAT_CD:Z.EQT_USE_STAT_CD||"1",EQT_CHG_GB:Z.EQT_CHG_GB||"1",IF_DTL_ID:Z.IF_DTL_ID||""},contractEquipment:{...ie,id:ie.id,SVC_CMPS_ID:ie.SVC_CMPS_ID||ie.id,BASIC_PROD_CMPS_ID:ie.BASIC_PROD_CMPS_ID||"",PROD_CD:ie.PROD_CD||"",SVC_CD:ie.SVC_CD||""},macAddress:he.macAddress||Z.macAddress}}),me={installedEquipments:X,removedEquipments:Re,kpiProdGrpCd:(m==null?void 0:m.kpiProdGrpCd)||H.kpiProdGrpCd,prodChgGb:(m==null?void 0:m.prodChgGb)||H.prodChgGb,chgKpiProdGrpCd:(m==null?void 0:m.chgKpiProdGrpCd)||H.chgKpiProdGrpCd,prodGrp:(m==null?void 0:m.prodGrp)||H.prodGrp,upCtrlCl:(m==null?void 0:m.upCtrlCl)||H.upCtrlCl};return console.log("[WorkProcessFlow] localStorage   :",{installed:me.installedEquipments.length,removed:me.removedEquipments.length,_PROD_CD:(I=(T=X[0])==null?void 0:T.actualEquipment)==null?void 0:I.PROD_CD,_SVC_CMPS_ID:(Q=(U=X[0])==null?void 0:U.actualEquipment)==null?void 0:Q.SVC_CMPS_ID}),me}}catch(H){console.error("   :",H)}return null};k3(t.WRK_CD||"");const A=t.WRK_CD||"",M=N&&!i&&A!=="08"&&A!=="02",L=M?6:5,k=_.useMemo(()=>M?[{id:1,title:" ",completed:i||l>1},{id:2,title:" ",completed:i||l>2},{id:3,title:" ",completed:i||l>3},{id:4,title:" ",completed:i||l>4},{id:5,title:" ",completed:i||l>5},{id:6,title:"",completed:l>6}]:[{id:1,title:" ",completed:i||l>1},{id:2,title:" ",completed:i||l>2},{id:3,title:" ",completed:i||l>3},{id:4,title:" ",completed:i||l>4},{id:5,title:"",completed:l>5}],[M,i,l]);_.useEffect(()=>{l>L&&c(L)},[l,L]);const V=()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},G=()=>{if(!N)return!0;const K=ji.getState().getWorkState(t.id),w=(K==null?void 0:K.installedEquipments)||[],se=(K==null?void 0:K.contractEquipments)||[];if(console.log("[FTTH ] :",se.length," | :",w.length,""),w.length===0)return r==null||r("  .","error"),!1;for(const oe of se)if(!w.some(I=>{var U;return((U=I.contractEquipment)==null?void 0:U.id)===oe.id})){const I=oe.type||oe.EQT_CL_NM||"ONT-PON";return r==null||r(` ${I}  .`,"error"),!1}return console.log("[FTTH ]  -   "),!0},W=K=>{if(!M)return!0;const w=Wa.getState(),se=["N","NG"].includes(C);return K>=4&&se&&!w.ldapResult?(r==null||r("LDAP   .","warning"),!1):K>=5&&!w.certifyRegconfInfo?(r==null||r("  .","warning"),!1):!0},j=(K=!1)=>{var w,se,oe,T,I;if(l<L){const U=l+1;if(M&&U>=4&&(!G()||!W(U)))return;if(l===3&&!K){const Q=R();Q&&f(Q)}if(l===3){const Q=ji.getState().getWorkState(t.id),H=fe=>fe?fe.EQT_LOSS_YN==="Y"||fe.EQT_LOSS_YN==="1"||fe.PART_LOSS_BRK_YN==="Y"||fe.PART_LOSS_BRK_YN==="1"||fe.EQT_BRK_YN==="Y"||fe.EQT_BRK_YN==="1"||fe.EQT_CABL_LOSS_YN==="Y"||fe.EQT_CABL_LOSS_YN==="1"||fe.EQT_CRDL_LOSS_YN==="Y"||fe.EQT_CRDL_LOSS_YN==="1":!1,q=fe=>{if(!fe)return"";const ge=[];return(fe.EQT_LOSS_YN==="Y"||fe.EQT_LOSS_YN==="1")&&ge.push(""),(fe.PART_LOSS_BRK_YN==="Y"||fe.PART_LOSS_BRK_YN==="1")&&ge.push(""),(fe.EQT_BRK_YN==="Y"||fe.EQT_BRK_YN==="1")&&ge.push(""),(fe.EQT_CABL_LOSS_YN==="Y"||fe.EQT_CABL_LOSS_YN==="1")&&ge.push(""),(fe.EQT_CRDL_LOSS_YN==="Y"||fe.EQT_CRDL_LOSS_YN==="1")&&ge.push(""),ge.length>0?ge.join(", "):""};console.log(""),console.log(" [Step 34]    (workEquipmentStore)"),console.log(""),console.log("  (installedEquipments):",((w=Q==null?void 0:Q.installedEquipments)==null?void 0:w.length)||0,""),(se=Q==null?void 0:Q.installedEquipments)==null||se.forEach((fe,ge)=>{const ce=fe.actualEquipment||{},Re=fe.contractEquipment||{};console.log(`  [${ge}] ${Re.type||ce.type||""} | : ${ce.model||"-"} | S/N: ${ce.serialNumber||"-"}`)}),console.log(""),console.log("  (markedForRemoval):",((oe=Q==null?void 0:Q.markedForRemoval)==null?void 0:oe.length)||0,""),(T=Q==null?void 0:Q.markedForRemoval)==null||T.forEach((fe,ge)=>{var Z;const ce=fe.id||fe.EQT_NO,Re=((Z=Q==null?void 0:Q.removalStatus)==null?void 0:Z[ce])||{},X=H(Re),me=q(Re),he=X?`  (${me})`:" ";console.log(`  [${ge}] ${fe.type||fe.ITEM_MID_NM||""} | : ${fe.model||"-"} | S/N: ${fe.serialNumber||"-"}  ${he}`)}),console.log(""),console.log("  (removeEquipments - API):",((I=Q==null?void 0:Q.removeEquipments)==null?void 0:I.length)||0,""),console.log(""),console.log(" removalStatus  :");const ae=Object.keys((Q==null?void 0:Q.removalStatus)||{});ae.length>0?ae.forEach(fe=>{var Re;const ge=(Re=Q==null?void 0:Q.removalStatus)==null?void 0:Re[fe],ce=H(ge);console.log(`  "${fe}"  ${ce?"":""}`,ge)}):console.log("  ( -  )"),console.log("")}c(Q=>Q+1),requestAnimationFrame(()=>V())}},S=()=>{l>1&&(c(K=>K-1),requestAnimationFrame(()=>V()))},P=K=>{var w,se,oe,T,I;if(!(M&&K>=4&&(!G()||!W(K)))){if(l===3&&K!==3){const U=R();if(U&&f(U),K>3){const Q=ji.getState().getWorkState(t.id),H=fe=>fe?fe.EQT_LOSS_YN==="Y"||fe.EQT_LOSS_YN==="1"||fe.PART_LOSS_BRK_YN==="Y"||fe.PART_LOSS_BRK_YN==="1"||fe.EQT_BRK_YN==="Y"||fe.EQT_BRK_YN==="1"||fe.EQT_CABL_LOSS_YN==="Y"||fe.EQT_CABL_LOSS_YN==="1"||fe.EQT_CRDL_LOSS_YN==="Y"||fe.EQT_CRDL_LOSS_YN==="1":!1,q=fe=>{if(!fe)return"";const ge=[];return(fe.EQT_LOSS_YN==="Y"||fe.EQT_LOSS_YN==="1")&&ge.push(""),(fe.PART_LOSS_BRK_YN==="Y"||fe.PART_LOSS_BRK_YN==="1")&&ge.push(""),(fe.EQT_BRK_YN==="Y"||fe.EQT_BRK_YN==="1")&&ge.push(""),(fe.EQT_CABL_LOSS_YN==="Y"||fe.EQT_CABL_LOSS_YN==="1")&&ge.push(""),(fe.EQT_CRDL_LOSS_YN==="Y"||fe.EQT_CRDL_LOSS_YN==="1")&&ge.push(""),ge.length>0?ge.join(", "):""};console.log(""),console.log(` [Step 3${K}]    (workEquipmentStore)`),console.log(""),console.log("  (installedEquipments):",((w=Q==null?void 0:Q.installedEquipments)==null?void 0:w.length)||0,""),(se=Q==null?void 0:Q.installedEquipments)==null||se.forEach((fe,ge)=>{const ce=fe.actualEquipment||{},Re=fe.contractEquipment||{};console.log(`  [${ge}] ${Re.type||ce.type||""} | : ${ce.model||"-"} | S/N: ${ce.serialNumber||"-"}`)}),console.log(""),console.log("  (markedForRemoval):",((oe=Q==null?void 0:Q.markedForRemoval)==null?void 0:oe.length)||0,""),(T=Q==null?void 0:Q.markedForRemoval)==null||T.forEach((fe,ge)=>{var Z;const ce=fe.id||fe.EQT_NO,Re=((Z=Q==null?void 0:Q.removalStatus)==null?void 0:Z[ce])||{},X=H(Re),me=q(Re),he=X?`  (${me})`:" ";console.log(`  [${ge}] ${fe.type||fe.ITEM_MID_NM||""} | : ${fe.model||"-"} | S/N: ${fe.serialNumber||"-"}  ${he}`)}),console.log(""),console.log("  (removeEquipments - API):",((I=Q==null?void 0:Q.removeEquipments)==null?void 0:I.length)||0,""),console.log(""),console.log(" removalStatus  :");const ae=Object.keys((Q==null?void 0:Q.removalStatus)||{});ae.length>0?ae.forEach(fe=>{var Re;const ge=(Re=Q==null?void 0:Q.removalStatus)==null?void 0:Re[fe],ce=H(ge);console.log(`  "${fe}"  ${ce?"":""}`,ge)}):console.log("  ( -  )"),console.log("")}}c(K),requestAnimationFrame(()=>V())}},F=K=>{f({...K,prodPromoInfo:K.prodPromoInfo||(u==null?void 0:u.prodPromoInfo)||[],kpiProdGrpCd:K.kpiProdGrpCd||(u==null?void 0:u.kpiProdGrpCd),prodChgGb:K.prodChgGb||(u==null?void 0:u.prodChgGb),chgKpiProdGrpCd:K.chgKpiProdGrpCd||(u==null?void 0:u.chgKpiProdGrpCd),prodGrp:K.prodGrp||(u==null?void 0:u.prodGrp),upCtrlCl:K.upCtrlCl||(u==null?void 0:u.upCtrlCl)}),j(!0)},ee=()=>{j()},J=()=>s.jsxs("div",{className:"flex items-center px-2 pt-3 sm:pt-4 pb-2 sm:pb-3 bg-white w-full",children:[s.jsx("button",{onClick:S,disabled:l<=1,className:`
          w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full transition-all flex-shrink-0
          ${l<=1?"text-gray-300 cursor-not-allowed":"text-blue-600 hover:bg-blue-50 active:bg-blue-100"}
        `,style:{marginBottom:"18px"},children:s.jsx(db,{className:"w-6 h-6 sm:w-7 sm:h-7",strokeWidth:2.5})}),s.jsx("div",{className:"flex items-center justify-between flex-1 mx-1",children:k.map((K,w)=>s.jsxs(Gi.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center gap-0.5 sm:gap-1 cursor-pointer transition-all",onClick:()=>P(K.id),children:[s.jsx("div",{className:`
                  w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm transition-all
                  ${l===K.id?"bg-blue-500 text-white shadow-lg scale-110":K.completed?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}
                `,children:K.completed?s.jsx(dc,{className:"w-4 h-4 sm:w-5 sm:h-5"}):K.id}),s.jsx("div",{className:`
                  text-[0.5625rem] sm:text-[0.625rem] font-medium text-center transition-all whitespace-nowrap
                  ${l===K.id?"text-blue-600 font-bold":K.completed?"text-green-600":"text-gray-500"}
                `,children:K.title})]}),w<k.length-1&&s.jsx("div",{className:`flex-1 h-0.5 mx-1 rounded-full ${K.completed?"bg-green-400":"bg-gray-200"}`,style:{marginBottom:"18px",maxWidth:"24px"}})]},K.id))}),s.jsx("button",{onClick:j,disabled:l>=L,className:`
          w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full transition-all flex-shrink-0
          ${l>=L?"text-gray-300 cursor-not-allowed":"text-blue-600 hover:bg-blue-50 active:bg-blue-100"}
        `,style:{marginBottom:"18px"},children:s.jsx(eL,{className:"w-6 h-6 sm:w-7 sm:h-7",strokeWidth:2.5})})]}),$=()=>{switch(l){case 1:return s.jsx(WU,{workItem:t,onNext:j,onBack:S});case 2:return s.jsx(KU,{workItem:t,onNext:j,onBack:S,showToast:r});case 3:return s.jsx(l9,{workItem:t,onSave:F,onBack:S,showToast:r,preloadedApiData:y,onPreloadedDataUpdate:g,readOnly:i,isCertifyProd:N,certifyOpLnkdCd:C});case 4:return M?s.jsx(c9,{workItem:t,onNext:j,onBack:S,showToast:r,readOnly:i}):s.jsx(Rp,{order:t,onBack:S,onSuccess:ee,showToast:r,equipmentData:u||m,readOnly:i,isCertifyProd:N,onEquipmentRefreshNeeded:()=>{console.log("[WorkProcessFlow]   -   "),g(null)}});case 5:return M?s.jsx(Rp,{order:t,onBack:S,onSuccess:ee,showToast:r,equipmentData:u||m,readOnly:i,isCertifyProd:N,onEquipmentRefreshNeeded:()=>{console.log("[WorkProcessFlow]   -   "),g(null)}}):s.jsx(qD,{order:t,onBack:S,onComplete:e,showToast:r});case 6:return s.jsx(qD,{order:t,onBack:S,onComplete:e,showToast:r});default:return null}};return v?s.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden",children:[s.jsxs("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 shadow-sm",children:[i&&s.jsx("div",{className:"bg-green-50 border-b border-green-200 px-3 sm:px-4 py-1.5 sm:py-2",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 sm:gap-2",children:[s.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-[0.625rem] sm:text-xs font-medium text-green-800 whitespace-nowrap",children:"  ( )"})]})}),J()]}),s.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:$()})]}):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-gray-50",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"   ..."})]})},h9=({message:t,type:e="info",onClose:n})=>{const r=()=>{switch(e){case"success":return s.jsx(Vi,{className:"w-8 h-8 text-green-500"});case"error":return s.jsx(Lo,{className:"w-8 h-8 text-red-500"});case"warning":return s.jsx(Mr,{className:"w-8 h-8 text-yellow-500"});default:return s.jsx(t5,{className:"w-8 h-8 text-blue-500"})}},i=()=>{switch(e){case"success":return"bg-green-500 hover:bg-green-600 active:bg-green-700";case"error":return"bg-red-500 hover:bg-red-600 active:bg-red-700";case"warning":return"bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700";default:return"bg-blue-500 hover:bg-blue-600 active:bg-blue-700"}},l=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";default:return""}};return s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center",style:{zIndex:9999},children:[s.jsx("div",{className:"fixed inset-0 bg-black/40",onClick:n}),s.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-[85vw] max-w-[320px] overflow-hidden",children:[s.jsxs("div",{className:"flex flex-col items-center px-6 pt-6 pb-4",children:[r(),s.jsx("h3",{className:"mt-3 text-base font-bold text-gray-900",children:l()}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 text-center leading-relaxed whitespace-pre-line",children:t})]}),s.jsx("div",{className:"px-6 pb-6",children:s.jsx("button",{onClick:n,className:`w-full py-3 text-sm font-semibold text-white rounded-xl transition-colors ${i()}`,children:""})})]})]})},f9=({isOpen:t,onClose:e,userName:n="",userId:r="",stats:i={todayInProgress:0,todayCompleted:0,weekTotal:0,monthTotal:0},onLogout:l,onNavigate:c})=>{const{fontScale:d,setFontScale:u,preferredNavApp:f,setPreferredNavApp:m}=Yl(),p=[{key:"small",label:"",size:"14px"},{key:"medium",label:"",size:"16px"},{key:"large",label:"",size:"18px"},{key:"xlarge",label:" ",size:"20px"}],y=[{key:"kakao",label:"",letter:"K",color:"bg-yellow-400 text-yellow-900"},{key:"tmap",label:"T",letter:"T",color:"bg-blue-500 text-white"},{key:"naver",label:"",letter:"N",color:"bg-green-500 text-white"}],g=()=>{l&&(l(),e())},N=C=>{c&&c(C),e()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,"aria-hidden":"true",style:{zIndex:9998}}),s.jsx("div",{className:`fixed top-0 left-0 h-full w-80 bg-white shadow-2xl transform transition-transform duration-300 ease-out ${t?"translate-x-0":"-translate-x-full"}`,style:{touchAction:"pan-y",zIndex:9999},children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"bg-blue-600 p-6 relative",children:[s.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:bg-white/20 rounded-full p-2 transition-colors","aria-label":"",children:s.jsx(bi,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx(Oh,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{className:"text-white",children:[s.jsx("p",{className:"text-xl font-bold",children:n}),s.jsx("p",{className:"text-sm text-white/90",children:r})]})]})]}),s.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-3",children:" "}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:" "}),s.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.todayInProgress})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.todayCompleted})]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:" "}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.weekTotal})]})}),s.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:" "}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.monthTotal})]})})]})]}),s.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>N("today-work"),children:[s.jsx(_h,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:" "})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>N("work-management"),children:[s.jsx(zp,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>N("customer-management"),children:[s.jsx(s5,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>N("equipment-management"),children:[s.jsx(Cf,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>N("other-management"),children:[s.jsx(ZT,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})})]}),s.jsxs("div",{className:"mt-4 px-3",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:p.map(C=>s.jsxs("button",{onClick:()=>u(C.key),className:`flex flex-col items-center py-2 rounded-lg border-2 transition-all ${d===C.key?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[s.jsx("span",{className:`font-bold ${d===C.key?"text-blue-600":"text-gray-700"}`,style:{fontSize:C.size},children:""}),s.jsx("span",{className:`text-[0.625rem] mt-0.5 ${d===C.key?"text-blue-600 font-semibold":"text-gray-500"}`,children:C.label})]},C.key))})]}),s.jsxs("div",{className:"mt-4 px-3",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:y.map(C=>s.jsxs("button",{onClick:()=>m(C.key),className:`flex flex-col items-center py-2 rounded-lg border-2 transition-all ${f===C.key?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[s.jsx("span",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold ${C.color}`,children:C.letter}),s.jsx("span",{className:`text-[0.625rem] mt-1 ${f===C.key?"text-blue-600 font-semibold":"text-gray-500"}`,children:C.label})]},C.key))})]})]}),s.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200",children:s.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors font-medium text-sm sm:text-base",children:[s.jsx(FL,{className:"w-5 h-5"}),s.jsx("span",{children:""})]})})]})})]})};class m9 extends _.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),console.error("Production Error:",{error:e.toString(),componentStack:n.componentStack})}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),s.jsx("p",{className:"text-gray-600",children:"  .      ."})]}),!1,s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:this.handleReload,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})," "]}),!1]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-sm text-gray-500",children:"   ."})]})}):this.props.children}}const g9="/api",x9=(t,e)=>{const n=t.replace(/[-\s]/g,"");if(!n)return" .";if(n.length<9)return"  .";let r="",i="";if(n.slice(-4),n.startsWith("02")?(r=n.substring(0,2),i=n.substring(2,n.length-4)):n.startsWith("0130")?(r=n.substring(0,4),i=n.substring(4,n.length-4)):(r=n.substring(0,3),i=n.substring(3,n.length-4)),i.length<3||i==="111"||i==="1111")return"  .";if(r==="010"&&i.length<4)return"  .";if(e==="hp"&&!["010","011","016","017","018","019"].includes(r))return"  .";if(r!=="0130"&&i.startsWith("0"))return"  .";let l=0;for(let c=0;c<n.length-1;c++)if(n[c]===n[c+1]){if(l++,l>=6)return"  ."}else l=0;return null},p9=t=>{const e=t.replace(/[^0-9]/g,"");let n="",r="";const i=e.slice(-4);return e.startsWith("02")?(n=e.substring(0,2),r=e.substring(2,e.length-4)):e.startsWith("0130")?(n=e.substring(0,4),r=e.substring(4,e.length-4)):(n=e.substring(0,3),r=e.substring(3,e.length-4)),{ddd:n,fix:r,dtl:i}},pn=async(t,e={},n="POST")=>{try{const r=`${g9}${t}`;console.log(`[CustomerAPI] ${n} ${r}`),console.log(JSON.stringify(e,null,2));const i=await fetch(r,{method:n,headers:{"Content-Type":"application/json"},credentials:"include",body:n==="POST"?JSON.stringify(e):void 0});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const l=await i.json();return console.log("[CustomerAPI] Response:"),console.log(JSON.stringify(l,null,2)),Array.isArray(l)?{success:!0,data:l}:l.code==="SUCCESS"||l.resultCode==="0000"||l.success?{success:!0,data:l.data||l.resultData||l,totalCount:l.totalCount||l.resultCount}:{success:!1,message:l.message||l.resultMsg||"  .",errorCode:l.code||l.resultCode||l.errorCode}}catch(r){return console.error("[CustomerAPI] Error:",r),{success:!1,message:r instanceof Error?r.message:"  ."}}},S_=()=>{try{const t=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(t){const e=JSON.parse(t);return e.userId||e.USR_ID||e.LOGIN_ID||"SYSTEM"}}catch{console.log("[CustomerAPI] Failed to get LOGIN_ID from session")}return"SYSTEM"},zu=t=>{const e=()=>{if(t.ADDR_DTL)return t.ADDR_DTL;if(t.ADDR_FULL){const d=t.ADDR_FULL,u=t.ADDRESS||t.ADDR||"";return u&&d.startsWith(u+" "+u)?d.substring(u.length+1):d}const l=[],c=t.ADDRESS||t.ADDR||"";return c&&l.push(c),t.BUN_NO&&l.push(`${t.BUN_NO}`),t.HO_NM&&l.push(`${t.HO_NM}`),t.BLD_NM&&l.push(t.BLD_NM),l.join(" ")||""},n=()=>{const l=[],c=t.TEL_NO||t.TEL_NO1||"";c&&l.push({type:"tel",typeNm:"",number:c,fieldName:"TEL_NO"});const d=t.HP_NO||t.TEL_NO2||"";d&&l.push({type:"hp",typeNm:"",number:d,fieldName:"HP_NO"});for(let u=3;u<=9;u++){const f=`TEL_NO${u}`,m=t[f];if(m){const p=m.startsWith("010")||m.startsWith("011")||m.startsWith("016")||m.startsWith("017")||m.startsWith("018")||m.startsWith("019");l.push({type:p?"hp":"tel",typeNm:p?`${u-1}`:`${u-1}`,number:m,fieldName:f})}}return l},r=e(),i=n();return{CUST_ID:t.CUST_ID||"",CUST_NM:t.CUST_NM||"",TEL_NO:t.TEL_NO||t.TEL_NO1||"",HP_NO:t.HP_NO||t.TEL_NO2||"",PHONE_LIST:i.length>0?i:void 0,CUST_ADDR:r||t.CUST_ADDR||t.ADDR||t.ADDRESS||"",ROAD_ADDR:t.ROAD_ADDR||r||"",INST_ADDR:t.INST_ADDR||r||"",BILL_ADDR:t.BILL_ADDR||"",UNPAY_AMT:t.UNPAY_AMT||0,CUST_TP_CD:t.CUST_TP_CD||t.CUST_TP||"",CUST_TP_NM:t.CUST_TP_NM||t.CUST_CL_NM||"",GRP_NO:t.GRP_NO||t.GRP_ID||"",GRP_NM:t.GRP_NM||"",REG_DT:t.REG_DT||"",CTRT_ID:t.CTRT_ID||""}},_9=t=>{const e=r=>r==null||r==="None"||r==="null"?"":r,n=r=>r==null||r==="None"||r==="null"?0:r;return{CTRT_ID:e(t.CTRT_ID),CTRT_STAT_CD:e(t.CTRT_STAT_CD)||e(t.CTRT_STAT),CTRT_STAT_NM:e(t.CTRT_STAT_NM),PROD_NM:e(t.PROD_NM)||e(t.BASIC_PROD_CD_NM),PROD_GRP_NM:e(t.PROD_GRP_NM),INST_ADDR:e(t.INST_ADDR)||e(t.ADDR_FULL)||e(t.ADDR),INSTL_LOC:e(t.INSTL_LOC),POST_ID:e(t.POST_ID),OPNG_DT:e(t.OPNG_DT)||e(t.OPEN_DD),TERM_DT:e(t.TERM_DT),AGMT_MON:e(t.AGMT_MON)||(t.PROM_CNT!=null&&t.PROM_CNT!=="None"?String(t.PROM_CNT):""),AGMT_ST_DT:e(t.AGMT_ST_DT)||e(t.RATE_STRT_DT),AGMT_END_DT:e(t.AGMT_END_DT)||e(t.RATE_END_DT),GRP_NO:e(t.GRP_NO)||e(t.GRP_ID),GRP_NM:e(t.GRP_NM),PYM_ACNT_ID:e(t.PYM_ACNT_ID),DPST_AMT:n(t.DPST_AMT)||n(t.ASSR_BAL),PREPAY_AMT:n(t.PREPAY_AMT)||n(t.PREPD_BAL),EQT_NM:e(t.EQT_NM),EQT_MDL_NM:e(t.EQT_MDL_NM)||e(t.VIEW_MOD_NM),EQT_SERNO:e(t.EQT_SERNO)||e(t.SERNO_DTOA),PREV_MON_AMT:n(t.PREV_MON_AMT)||n(t.BILL_AMT_BEFORE),CUR_MON_AMT:n(t.CUR_MON_AMT)||n(t.BILL_AMT_NOW),SO_NM:e(t.SO_NM),SO_ID:e(t.SO_ID),PROD_GRP:e(t.PROD_GRP),STREET_ADDR_FULL:e(t.STREET_ADDR_FULL)||e(t.ROAD_ADDR),ADDR_FULL:e(t.ADDR_FULL)||e(t.JIBUN_ADDR),CTRT_APLY_STRT_DT:e(t.CTRT_APLY_STRT_DT),CTRT_APLY_END_DT:e(t.CTRT_APLY_END_DT),NOTRECEV:e(t.NOTRECEV)||e(t.NOT_RECV),CLOSE_DANGER:e(t.CLOSE_DANGER),ADDR_DTL:e(t.ADDR_DTL),BLD_CL:e(t.BLD_CL)||"0",BLD_NM:e(t.BLD_NM),STREET_ID:e(t.STREET_ID)}},C9=async t=>{let e="SYSTEM";try{const n=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(n){const r=JSON.parse(n);e=r.userId||r.USR_ID||r.LOGIN_ID||"SYSTEM"}}catch{console.log("[CustomerAPI] Failed to get LOGIN_ID from session")}if(t.searchType==="CUSTOMER_ID"&&t.customerId){const n={CUST_ID:t.customerId,SERCH_GB:"3",LOGIN_ID:e};console.log(`[CustomerAPI] CUSTOMER_ID search params:
`+JSON.stringify(n,null,2));const r=await pn("/customer/common/customercommon/getConditionalCustList2",n);if(r.success&&r.data){const l=(Array.isArray(r.data)?r.data:[r.data]).map(zu);return{...r,data:l}}return{...r,data:[]}}if(t.searchType==="CONTRACT_ID"&&t.contractId){let n="";try{const i=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(i){const l=JSON.parse(i),c=l.authSoList||l.AUTH_SO_List||[];c.length>0&&(n=c[0].SO_ID||c[0].soId||""),n||(n=l.soId||l.SO_ID||"")}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session")}if(n)try{console.log("[CustomerAPI] Trying getCtrtIDforSmartPhone for CONTRACT_ID: "+t.contractId);const i=await pn("/customer/phoneNumber/getCtrtIDforSmartPhone",{SO_ID:n,CTRT_ID:t.contractId});if(i.success&&i.data){const l=Array.isArray(i.data)?i.data:[i.data];if(l.length>0){console.log("[CustomerAPI] getCtrtIDforSmartPhone success for CONTRACT_ID");const c=l.map(zu);return{...i,data:c}}}console.log("[CustomerAPI] getCtrtIDforSmartPhone returned no data for CONTRACT_ID, trying fallback...")}catch(i){console.log("[CustomerAPI] getCtrtIDforSmartPhone failed for CONTRACT_ID, trying fallback...",i)}const r=await pn("/customer/negociation/getCustomerCtrtInfo",{CTRT_ID:t.contractId});if(r.success&&r.data){const i=Array.isArray(r.data)?r.data[0]:r.data,l=i==null?void 0:i.CUST_ID;if(l){const c=await pn("/customer/common/customercommon/getConditionalCustList2",{CUST_ID:l,SERCH_GB:"3",LOGIN_ID:e});if(c.success&&c.data){const u=(Array.isArray(c.data)?c.data:[c.data]).map(zu);return{...c,data:u}}}}return{success:!1,message:"ID    .",data:[]}}if(t.searchType==="PHONE_NAME"){if(!t.phoneNumber&&!t.customerName)return{success:!1,message:"   .",data:[]};let n="";try{const i=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(i){const l=JSON.parse(i),c=l.authSoList||l.AUTH_SO_List||[];c.length>0&&(n=c[0].SO_ID||c[0].soId||""),n||(n=l.soId||l.SO_ID||"")}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session")}if(n)try{const i={SO_ID:n};t.phoneNumber&&(i.TEL_NO=t.phoneNumber),t.customerName&&(i.CUST_NM=t.customerName),console.log(`[CustomerAPI] Trying getCtrtIDforSmartPhone:
`+JSON.stringify(i,null,2));const l=await pn("/customer/phoneNumber/getCtrtIDforSmartPhone",i);if(l.success&&l.data){const c=Array.isArray(l.data)?l.data:[l.data];if(c.length>0){console.log("[CustomerAPI] getCtrtIDforSmartPhone success:",c.length,"results");const d=c.map(zu);return{...l,data:d}}}console.log("[CustomerAPI] getCtrtIDforSmartPhone returned no data, trying fallback...")}catch(i){console.log("[CustomerAPI] getCtrtIDforSmartPhone failed, trying fallback...",i)}const r={SERCH_GB:"3",LOGIN_ID:e};t.phoneNumber&&(r.TEL_NO=t.phoneNumber),t.customerName&&(r.CUST_NM=t.customerName),console.log(`[CustomerAPI] PHONE_NAME search params:
`+JSON.stringify(r,null,2));try{const i=await pn("/customer/common/customercommon/getConditionalCustList2",r);if(i.success&&i.data){const c=(Array.isArray(i.data)?i.data:[i.data]).map(zu);return{...i,data:c}}return{...i,data:[]}}catch{return{success:!1,message:"   . ID .",data:[]}}}if(t.searchType==="EQUIPMENT_NO"&&t.equipmentNo){const n={SERCH_GB:"3",LOGIN_ID:e,EQT_SERNO:t.equipmentNo,MAC_ADDR:""};console.log(`[CustomerAPI] EQUIPMENT_NO search params:
`+JSON.stringify(n,null,2));try{const r=await pn("/customer/common/customercommon/getConditionalCustList2",n);if(r.success&&r.data){const l=(Array.isArray(r.data)?r.data:[r.data]).map(zu);return{...r,data:l}}return{...r,data:[]}}catch{return{success:!1,message:"   . ID .",data:[]}}}return{success:!1,message:"  .",data:[]}},y9=async t=>{let e="SYSTEM";try{const r=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(r){const i=JSON.parse(r);e=i.userId||i.USR_ID||i.LOGIN_ID||"SYSTEM"}}catch{console.log("[CustomerAPI] Failed to get session info")}const n={SERCH_GB:"3",LOGIN_ID:e};t.custId&&(n.CUST_ID=t.custId),t.contractId&&(n.CTRT_ID=t.contractId),t.phoneNumber&&(n.TEL_NO=t.phoneNumber),t.equipmentNo&&(n.EQT_SERNO=t.equipmentNo),t.customerName&&!t.custId&&!t.contractId&&!t.phoneNumber&&!t.equipmentNo&&(n.CUST_NM=t.customerName),console.log(`[CustomerAPI] searchCustomerAll  :
`+JSON.stringify(n,null,2));try{const r=await pn("/customer/common/customercommon/getConditionalCustList2",n);if(console.log("[CustomerAPI] searchCustomerAll :",r),r.success&&r.data){const l=(Array.isArray(r.data)?r.data:[r.data]).map(zu);return{...r,data:l}}return{...r,data:[]}}catch(r){return console.error("[CustomerAPI] searchCustomerAll :",r),{success:!1,message:"   .",data:[]}}},v_=async t=>{const e=await pn("/customer/negociation/getCustCtrtAll",{CUST_ID:t});if(e.success&&e.data){const r=(Array.isArray(e.data)?e.data:[e.data]).map(_9);return{...e,data:r}}return e},xN=async t=>{const e=S_(),n=await pn("/customer/negociation/getCustAccountInfo_m",{CUST_ID:t,LOGIN_ID:e});return n.success&&n.data?{success:!0,data:n.data.filter(i=>i.PYM_ACNT_ID&&/^\d{10}$/.test(i.PYM_ACNT_ID)).map(i=>({PYM_ACNT_ID:i.PYM_ACNT_ID,PYM_MTHD_NM:i.PYM_MTHD_NM||"",BANK_CARD_NM:i.BANK_CARD_NM||null,BANK_CARD_NO:i.BANK_CARD_NO||null,BILL_MTHD:i.BILL_MTHD||"",UPYM_AMT_ACNT:i.UPYM_AMT??i.UPYM_AMT_ACNT??0,SO_ID:i.SO_ID||void 0})),code:"SUCCESS",message:"OK"}:n},XD=async(t,e)=>{const n=S_(),r={CUST_ID:t,LOGIN_ID:n};return e&&(r.PYM_ACNT_ID=e),pn("/customer/negociation/getCustBillInfo_m",r)},b9=async t=>pn("/customer/negociation/getHPPayList",{CUST_ID:t}),N9=async t=>pn("/customer/negociation/saveHPPayInfo",t),Kp=async(t,e,n=10)=>{const r=S_(),i={CUST_ID:t,PAGE_SIZE:n,LOGIN_ID:r};return e&&(i.CTRT_ID=e),pn("/customer/negociation/getTgtCtrtRcptHist_m",i)},Qp=async(t,e,n=10)=>{const r=S_(),i={CUST_ID:t,PAGE_SIZE:n,LOGIN_ID:r};return e&&(i.CTRT_ID=e),pn("/customer/negociation/getTgtCtrtWorkList_m",i)},S9=async t=>{let e=t.CHG_UID||"SYSTEM";try{const n=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(n){const r=JSON.parse(n);e=r.userId||r.USR_ID||e}}catch{console.log("[CustomerAPI] Failed to get CHG_UID from session")}return pn("/customer/negociation/updateCustTelDetailInfo",{...t,CHG_UID:e,TEL_NO_TP:t.TEL_NO_TP||"2",USE_YN:t.USE_YN||"Y",MAIN_TEL_YN:t.MAIN_TEL_YN||"N",CUST_REL:t.CUST_REL||""})},JD=async t=>{let e=t.CHG_UID||"SYSTEM";try{const n=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(n){const r=JSON.parse(n);e=r.userId||r.USR_ID||e}}catch{console.log("[CustomerAPI] Failed to get CHG_UID from session")}return pn("/customer/etc/saveMargeAddrOrdInfo",{CTRT_ID:t.CTRT_ID,POST_ID:t.POST_ID,BLD_ID:t.BLD_ID||"",BUN_NO:t.BUN_NO||"",HO_NM:t.HO_NM||"",BLD_CL:t.BLD_CL||"0",BLD_NM:t.BLD_NM||"",APT_DONG_NO:t.APT_DONG_NO||"",APT_HO_CNT:t.APT_HO_CNT||"",ADDR_DTL:t.ADDR_DTL||"",STREET_ID:(t.STREET_ID||"").substring(0,10),INSTL_LOC:t.INSTL_LOC||"",CUST_FLAG:t.CUST_FLAG||"0",PYM_FLAG:t.PYM_FLAG||"0",CHG_UID:e})},Wj=async t=>{let e=t.USR_ID||"MOBILE_USER",n=t.SO_ID||"",r=t.MST_SO_ID||"";try{const i=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(i){const l=JSON.parse(i);if(e=l.userId||l.USR_ID||e,!n){const c=l.authSoList||l.AUTH_SO_List||[];c.length>0&&(n=c[0].SO_ID||c[0].soId||""),n||(n=l.soId||l.SO_ID||"")}r||(r=l.mstSoId||l.MST_SO_ID||n)}}catch{console.log("[CustomerAPI] Failed to get session info for payment change")}return pn("/customer/customer/general/customerPymChgAddManager",{...t,USR_ID:e,SO_ID:n,MST_SO_ID:r})},v9=async t=>new Promise(e=>{setTimeout(()=>{t.ACNT_NO&&t.ACNT_NO.length>=10?e({success:!0,data:{verified:!0,ownerName:t.ACNT_OWNER_NM},message:"  ."}):e({success:!1,message:"  ."})},1e3)}),D9=async t=>{try{const e=await pn("/customer/payment/verifyCreditCard",{SO_ID:t.SO_ID||"",PYM_ACNT_ID:t.PYM_ACNT_ID||"",CUST_ID:t.CUST_ID||"",CUST_NM:t.CUST_NM||t.CARD_OWNER_NM||"",CARD_NO:t.CARD_NO,CARD_EXPYEAR:t.CARD_EXPYEAR||(t.CARD_VALID_YM?t.CARD_VALID_YM.substring(0,2):""),CARD_EXPMON:t.CARD_EXPMON||(t.CARD_VALID_YM?t.CARD_VALID_YM.substring(2,4):""),KOR_ID:t.KOR_ID||""});if(e.success&&e.data){const n=e.data;return n.success==="true"||n.RESP_CD==="0000"?{success:!0,data:{verified:!0,RESP_CD:n.RESP_CD},message:"  ."}:{success:!1,data:n,message:n.RESP_MSG||"  ."}}return{success:!1,message:e.message||"  ."}}catch(e){return console.error("[CardVerify] Error:",e),{success:!1,message:(e==null?void 0:e.message)||"    ."}}},R9=async t=>{var e;return console.log("[CustomerAPI] savePaymentSignature stub called:",{CUST_ID:t.CUST_ID,PYM_ACNT_ID:t.PYM_ACNT_ID,SIGN_TYPE:t.SIGN_TYPE,DATA_SIZE:((e=t.SIGNATURE_DATA)==null?void 0:e.length)||0}),Promise.resolve({success:!0,data:{saved:!1,stub:!0},message:"  API  (stub)"})},Bj=async t=>{let e=t.SO_ID||"",n=t.MST_SO_ID||"",r="",i="";try{const u=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(u){const f=JSON.parse(u);if(r=f.userId||f.USR_ID||f.usrId||"",i=f.crrId||f.CRR_ID||"",!e){const m=f.authSoList||f.AUTH_SO_List||[];m.length>0&&(e=m[0].SO_ID||m[0].soId||""),e||(e=f.soId||f.SO_ID||"")}n||(n=f.mstSoId||f.MST_SO_ID||e)}}catch{console.log("[CustomerAPI] Failed to get user info from session/localStorage")}const l=t.CNSL_MST_CL||"";let c=t.CNSL_MID_CL||"",d=t.CNSL_SLV_CL||"";if(c.startsWith(l)&&c.length>l.length&&(c=c.substring(l.length)),d.startsWith(c.length>0?l+c:"")&&d.length>4)d=d.substring((l+c).length);else if(d.length>4){const u=t.CNSL_MID_CL||"";d.startsWith(u)&&d.length>u.length?d=d.substring(u.length):d=d.substring(d.length-3)}return pn("/customer/negociation/saveCnslRcptInfo",{...t,CNSL_MST_CL:l,CNSL_MID_CL:c,CNSL_SLV_CL:d,SO_ID:e,MST_SO_ID:n,USR_ID:r,CRR_ID:i,CALLER_UID:r,CNSL_RSLT:t.CNSL_RSLT||"5",RCPT_TP:"G1",CUST_REL:"A",PRESS_RCPT_YN:"N",SUBS_TP:"1",CTI_CID:"0"})},T9=async t=>{let e="MOBILE_USER",n="",r="",i="";try{const u=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(u){const f=JSON.parse(u);e=f.userId||f.USR_ID||e,n=f.crrId||f.CRR_ID||"";const m=f.authSoList||f.AUTH_SO_List||[];m.length>0&&(r=m[0].SO_ID||m[0].soId||""),r||(r=f.soId||f.SO_ID||""),i=f.mstSoId||f.MST_SO_ID||r}}catch{console.log("[CustomerAPI] Failed to get user info from session")}const l=t,c="AS_CL_CD"in t,d={PG_GUBUN:c&&l.PG_GUBUN||"1",POST_ID:t.POST_ID||"",CUST_ID:t.CUST_ID,CTRT_ID:t.CTRT_ID||"",WRK_HOPE_DTTM:c?l.SCHD_DT+l.SCHD_TM:t.WRK_HOPE_DTTM,HOPE_DTTM:c?l.SCHD_DT+l.SCHD_TM:t.HOPE_DTTM||t.WRK_HOPE_DTTM,WRK_DTL_TCD:c?l.AS_CL_CD:t.WRK_DTL_TCD,WRK_RCPT_CL:c?l.AS_RESN_L_CD:t.WRK_RCPT_CL,WRK_RCPT_CL_DTL:c?l.AS_RESN_M_CD||"":t.WRK_RCPT_CL_DTL,MEMO:c?l.AS_CNTN:t.MEMO,EMRG_YN:"N",HOLY_YN:"N",TRANS_PROC_YN:"Y",CRR_ID:n,WRKR_ID:e,REG_UID:e,SO_ID:c&&l.SO_ID||r,MST_SO_ID:c&&l.MST_SO_ID||i,BLD_CL:c?l.BLD_CL||"":t.BLD_CL||"",BLD_NM:c?l.BLD_NM||"":t.BLD_NM||"",ADDR_DTL:c?l.ADDR_DTL||"":t.ADDR_DTL||"",ADDR:c?l.ADDR||"":t.ADDR||"",ADDR_ORD:c?l.ADDR_ORD||"1":t.ADDR_ORD||"1"};return c&&l.AS_CL_DTL_CD&&(d.AS_BIZ_CL=l.AS_CL_DTL_CD),c&&l.TRIP_FEE_CD&&(d.BIZ_EXPNS_GUIDE=l.TRIP_FEE_CD),pn("/customer/work/modAsPdaReceipt",d)},E9=async t=>pn("/customer/customer/general/customerManager",{...t,ACTION:"INSERT"}),j9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCS010"}),I9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCS020"}),O9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCS030"}),M9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMWT001"}),L9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMAS000"}),w9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMAS001"}),P9=async t=>pn("/customer/work/getProd_Grp",{CTRT_ID:t}),A9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CUST_TP"}),k9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCU052"}),U9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"BLPY015"}),W9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"BLPY016"}),B9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCU005"}),F9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCU002"}),K9=async t=>{if(t.SO_ID){const c={SO_ID:t.SO_ID,MST_SO_ID:"200",USE_FLAG:t.USE_FLAG||"Y"};return t.DONGMYONG&&(c.DONGMYONG=t.DONGMYONG),console.log("[CustomerAPI] searchPostAddress ():",{SO_ID:t.SO_ID,DONGMYONG:t.DONGMYONG}),pn("/statistics/customer/getPostList",c)}let e=[];try{const c=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(c){const d=JSON.parse(c),u=d.authSoList||d.AUTH_SO_List||[];if(u.length>0&&(e=u.map(f=>({soId:f.SO_ID||f.soId||"",mstSoId:f.MST_SO_ID||f.mstSoId||""})).filter(f=>f.soId)),e.length===0){const f=d.soId||d.SO_ID||"",m=d.mstSoId||d.MST_SO_ID||"";f&&(e=[{soId:f,mstSoId:m}])}}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session for address search")}if(e.length===0)return console.log("[CustomerAPI] searchPostAddress: SO_ID   "),{success:!1,data:[],message:"SO_ID   ."};console.log("[CustomerAPI] searchPostAddress ( ):",e.map(c=>c.soId),":",t.DONGMYONG);const n=e.map(c=>{const d={SO_ID:c.soId,MST_SO_ID:c.mstSoId||"200",USE_FLAG:t.USE_FLAG||"Y"};return t.DONGMYONG&&(d.DONGMYONG=t.DONGMYONG),pn("/statistics/customer/getPostList",d).catch(u=>(console.log(`[CustomerAPI] searchPostAddress SO_ID=${c.soId} :`,u),{success:!1,data:[],message:""}))}),r=await Promise.all(n),i=new Set,l=[];for(const c of r)if(c.success&&c.data)for(const d of c.data){const u=d.POST_ID||`${d.SO_ID}_${d.DONGMYON_NM}_${d.ADDR}`;i.has(u)||(i.add(u),l.push(d))}return console.log(`[CustomerAPI] searchPostAddress  : ${l.length} (${e.length} )`),{success:!0,data:l,message:""}},Q9=async t=>{const e={};t.STREET_NM&&(e.STREET_NM=t.STREET_NM),t.STREET_BUN_M&&(e.STREET_BUN_M=t.STREET_BUN_M),t.STREET_BUN_S&&(e.STREET_BUN_S=t.STREET_BUN_S),t.SO_ID&&(e.SO_ID=t.SO_ID);const n=await pn("/customer/common/customercommon/getStreetAddrList",e);return n.success&&n.data?{success:!0,data:n.data,message:""}:{success:!1,data:[],message:n.message||"  "}},IC=t=>{if(!t)return"";const e=t.replace(/\D/g,"");if(e.startsWith("02")){if(e.length===10)return`${e.slice(0,2)}-${e.slice(2,6)}-${e.slice(6)}`;if(e.length===9)return`${e.slice(0,2)}-${e.slice(2,5)}-${e.slice(5)}`}return e.length===11?`${e.slice(0,3)}-${e.slice(3,7)}-${e.slice(7)}`:e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6)}`:t},Gy=t=>{if(!t)return"";const e=t.replace(/\D/g,"");if(e.startsWith("02")){if(e.length===10)return`${e.slice(0,2)}-****-${e.slice(6)}`;if(e.length===9)return`${e.slice(0,2)}-***-${e.slice(5)}`}return e.length===11?`${e.slice(0,3)}-****-${e.slice(7)}`:e.length===10?`${e.slice(0,3)}-***-${e.slice(6)}`:e.length>7?`${e.slice(0,3)}-${"*".repeat(e.length-7)}-${e.slice(-4)}`:t},jo=t=>isNaN(t)?"0":t.toLocaleString("ko-KR"),OC=t=>!t||t.length!==8?t||"":`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6)}`,G9=(t,e=4,n=4)=>{if(!t||t.length<=e+n)return t;const r="*".repeat(t.length-e-n);return t.slice(0,e)+r+t.slice(-n)},Y9=()=>{try{const t=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(t){const e=JSON.parse(t),n=e.authSoList||e.AUTH_SO_List||[];return n.length>0?n[0].SO_ID||n[0].soId||"":e.soId||e.SO_ID||""}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session")}return""},V9=async t=>{const e=t||Y9();return pn("/billing/payment/anony/getCardVendorBySoId",{SO_ID:e})},$9=async t=>{const e={MID:t.master_store_id,OID:t.order_no,ORDER_DT:t.order_dt,SO_ID:t.ctrt_so_id,CUST_ID:t.cust_id,CUST_NM:t.reqr_nm,AMT:t.encrypted_amt,PYM_ACNT_ID:t.pym_acnt_id,USER_ID:t.user_id,RCPT_BILL_EMP_ID:t.rcpt_bill_emp_id,SMRY:t.smry,PYR_REL:t.pyr_rel,PROD_INFO_CD:t.prod_info_cd,CUST_EMAIL:t.cust_email};return t.dtlList&&(e.DTL_LIST=t.dtlList.map(n=>({MID:n.master_store_id,OID:n.order_no,ORDER_DT:n.order_dt,BILL_SEQ_NO:n.BILL_SEQ_NO,SO_ID:n.SO_ID,BILL_AMT:n.BILL_AMT,PRE_RCPT_AMT:n.PRE_RCPT_AMT,RCPT_AMT:n.RCPT_AMT}))),pn("/billing/payment/anony/insertDpstAndDTL",e)},H9=async t=>{const e={MID:t.mid,OID:t.oid,ORDER_DT:t.order_dt,AMT:t.amount,CUST_NM:t.buyer,GOODNAME:t.productinfo,CARD_NO:t.card_no,CARD_EXPIRY:t.card_expyear+t.card_expmon,CARD_EXPYEAR:t.card_expyear,CARD_EXPMON:t.card_expmon,KOR_ID:t.kor_id,INSTALL_PERIOD:t.install,PYM_ACNT_ID:t.pym_acnt_id,ENCRYPTED_AMT:t.encrypted_amt,SO_ID:t.so_id||"",CUST_ID:t.cust_id||"",CTRT_ID:t.ctrt_id||""};return pn("/billing/payment/anony/processCardPayment",e)},z9=()=>{const t=new Date,e=(i,l=2)=>String(i).padStart(l,"0"),n=e(t.getHours())+e(t.getMinutes())+e(t.getSeconds()),r=String(Math.floor(Math.random()*1e4)).padStart(4,"0");return n+r},q9=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}${n}${r}`},X9=async t=>pn("/customer/etc/getPromOfContract",{CTRT_ID:t}),J9=async t=>{const e=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");let n="SYSTEM";if(e)try{const r=JSON.parse(e);n=r.USR_ID||r.userId||"SYSTEM"}catch{}return pn("/customer/etc/saveCtrtAgreeInfo",{...t,AGREE_YN:t.AGREE_YN||"Y",WRKR_ID:t.WRKR_ID||n})},Z9=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCU064"}),eW=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCU072"}),tW=async()=>pn("/common/getCommonCodes",{CODE_GROUP:"CMCU252"}),sW=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},nW=t=>{switch(t){case"10":case"Y":return"bg-green-100 text-green-700";case"20":return"bg-yellow-100 text-yellow-700";case"30":case"90":case"N":return"bg-gray-100 text-gray-600";case"82":return"bg-sky-100 text-sky-700";default:return"bg-blue-100 text-blue-700"}},rW=({contracts:t,isLoading:e,expanded:n,onToggle:r,onContractSelect:i,showToast:l,onNavigateToConsultation:c,onNavigateToAS:d,onNavigateToAddressChange:u,onNavigateToReContract:f,initialSearchKeyword:m})=>{const[p,y]=_.useState("active"),[g,N]=_.useState(m||"");_.useEffect(()=>{N(m||"")},[m]);const[C,v]=_.useState(null),[R,A]=_.useState(null),M=j=>{const S=j.CTRT_STAT_CD||"";return!["10","50","90"].includes(S)},L=j=>{const S=j.CTRT_STAT_CD||"",P=j.CTRT_STAT_NM||"",F=["20","30","82"].includes(S),ee=j.CLOSE_DANGER==="Y"&&P.includes("");return F?{consultation:!0,as:!0,addressChange:!0,reContract:ee}:{consultation:!1,as:!1,addressChange:!1,reContract:!1}},k=t.filter(j=>{var S,P,F,ee;if(p==="active"&&!M(j)||p==="recommit"&&(!M(j)||j.CLOSE_DANGER!=="Y"||!(j.CTRT_STAT_NM||"").includes("")))return!1;if(g){const J=g.toLowerCase(),$=(S=j.CTRT_ID)==null?void 0:S.toLowerCase().includes(J),Y=(P=j.PROD_NM)==null?void 0:P.toLowerCase().includes(J),K=(F=j.EQT_SERNO)==null?void 0:F.toLowerCase().includes(J),w=(ee=j.NOTRECEV)==null?void 0:ee.toLowerCase().includes(J);return $||Y||K||w}return!0}),V={all:t.length,active:t.filter(j=>M(j)).length,recommit:t.filter(j=>M(j)&&j.CLOSE_DANGER==="Y"&&(j.CTRT_STAT_NM||"").includes("")).length},G=j=>{v(j.CTRT_ID),i(j)},W=j=>{const S=j.CTRT_ID;A(R===S?null:S),G(j)};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:r,className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ch,{className:"w-5 h-5 text-purple-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:" "}),s.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.length,")"]})]}),n?s.jsx(Wr,{className:"w-5 h-5 text-gray-400"}):s.jsx(or,{className:"w-5 h-5 text-gray-400"})]}),n&&s.jsx("div",{className:"px-4 pb-4",children:e?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(jn,{className:"w-6 h-6 animate-spin text-gray-400"})}):t.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"  ."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>y("all"),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${p==="all"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",V.all,")"]}),s.jsxs("button",{onClick:()=>y("active"),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${p==="active"?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",V.active,")"]}),s.jsxs("button",{onClick:()=>y("recommit"),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${p==="recommit"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",V.recommit,")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(e5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:g,onChange:j=>N(j.target.value),placeholder:"ID, ,  ",className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),g&&s.jsx("button",{onClick:()=>N(""),className:"flex-shrink-0 px-3 py-2 text-xs font-medium text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors",children:""})]})]}),s.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[k.map((j,S)=>s.jsxs("div",{className:`p-3 rounded-lg border transition-colors ${C===j.CTRT_ID?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>W(j),children:[s.jsxs("div",{className:"flex items-center justify-between mb-1 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center rounded-full bg-blue-500 text-white text-sm font-bold",children:S+1}),s.jsx("span",{className:"text-sm text-gray-600 truncate",children:j.PROD_NM})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded whitespace-nowrap ${j.CLOSE_DANGER==="Y"&&(j.CTRT_STAT_NM||"").includes("")?"bg-orange-100 text-orange-700":nW(j.CTRT_STAT_CD)}`,children:(()=>{const P=j.CTRT_STAT_NM||(j.CTRT_STAT_CD==="90"?"":j.CTRT_STAT_CD==="20"?"":"");return j.CLOSE_DANGER==="Y"&&P.includes("")?"()":P})()}),s.jsx(or,{className:`w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ${R===j.CTRT_ID?"rotate-180":""}`})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1 ml-9 gap-2 flex-nowrap overflow-hidden",children:[s.jsxs("span",{className:"text-sm text-gray-600 flex-shrink-0 whitespace-nowrap",children:[" ID: ",sW(j.CTRT_ID)]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded whitespace-nowrap",children:j.INSTL_LOC||"N/A"}),j.SO_NM&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-purple-50 text-purple-600 rounded whitespace-nowrap",children:j.SO_NM})]})]}),(j.STREET_ADDR_FULL||j.ADDR_FULL||j.INST_ADDR)&&s.jsxs("div",{className:"flex items-start gap-1 text-sm text-gray-600 mt-1",children:[s.jsx(rd,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"min-w-0",children:j.STREET_ADDR_FULL?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs text-blue-600 mr-1",children:"[]"}),s.jsx("span",{children:j.STREET_ADDR_FULL})]}):s.jsx("span",{children:j.ADDR_FULL||j.INST_ADDR})})]})]}),R===j.CTRT_ID&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",j.AGMT_MON?`${j.AGMT_MON} (${OC(j.CTRT_APLY_STRT_DT)||"-"} ~ ${OC(j.CTRT_APLY_END_DT)||"-"})`:"-"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",j.OPNG_DT?OC(j.OPNG_DT):"-"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",j.NOTRECEV||"-"]}),j.GRP_NM&&s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",j.GRP_NM]}),(()=>{const P=L(j);return s.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200",children:[s.jsx("button",{onClick:F=>{F.stopPropagation(),P.consultation&&(G(j),c&&c(j))},disabled:!P.consultation,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${P.consultation?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:""}),s.jsx("button",{onClick:F=>{F.stopPropagation(),P.as&&(G(j),d&&d(j))},disabled:!P.as,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${P.as?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"AS"}),s.jsx("button",{onClick:F=>{F.stopPropagation(),P.addressChange&&(G(j),u&&u(j))},disabled:!P.addressChange,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${P.addressChange?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:""}),s.jsx("button",{onClick:F=>{F.stopPropagation(),P.reContract&&(G(j),f&&f(j))},disabled:!P.reContract,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${P.reContract?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:""})]})})()]})]},j.CTRT_ID)),k.length===0&&s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"   ."})]})]})})]})},Gp="pendingPayment_";function iW(t,e){sessionStorage.setItem(Gp+t,JSON.stringify(e))}function ZD(t){try{const e=sessionStorage.getItem(Gp+t);if(!e)return null;const n=JSON.parse(e);return Date.now()-n.timestamp>1440*60*1e3?(sessionStorage.removeItem(Gp+t),null):n}catch{return null}}function eR(t){sessionStorage.removeItem(Gp+t)}const tR=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},aW=t=>!t||t.length<2?t||"-":t.length===2?t[0]+"*":t[0]+"*".repeat(t.length-2)+t[t.length-1],lW=t=>(t==null?void 0:t.replace(/\d*/g,"").trim())||"",oW=t=>!t||t.length<6?t||"-":`${t.slice(0,4)}-${t.slice(4,6)}`,Fj=t=>{const e=t.replace(/\D/g,"").slice(0,16),n=[];for(let r=0;r<e.length;r+=4)n.push(e.slice(r,r+4));return n.join("-")},cW=t=>{const e=t.replace(/\D/g,"");if(e.length<10)return Fj(t);const n=e.slice(0,4),r=e.slice(-4),i=e.length-8,l=n+"*".repeat(i>0?i:4)+r,c=[];for(let d=0;d<l.length;d+=4)c.push(l.slice(d,d+4));return c.join("-")},dW=({isOpen:t,onClose:e,custId:n,custNm:r,pymAcntId:i,soId:l,unpaymentList:c,showToast:d,onSuccess:u,pendingPayment:f})=>{const m=!!f,[p,y]=_.useState(new Set),[g,N]=_.useState(!1),[C,v]=_.useState(!1),[R,A]=_.useState(""),[M,L]=_.useState(""),[k,V]=_.useState(""),[G,W]=_.useState("00"),[j,S]=_.useState(""),[P,F]=_.useState(null);if(_.useEffect(()=>{t&&(y(new Set(c.map((U,Q)=>Q))),v(!1),f?(A(f.cardNo),L(f.expMonth),V(f.expYear),W(f.installment),S(f.korId),F({mid:f.mid,orderNo:f.orderNo,orderDt:f.orderDt})):(A(""),L(""),V(""),W("00"),S(""),F(null)))},[t,c,f]),_.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),!t)return null;const ee=U=>{const Q=new Set(p);Q.has(U)?Q.delete(U):Q.add(U),y(Q)},J=()=>{p.size===c.length?y(new Set):y(new Set(c.map((U,Q)=>Q)))},$=c.filter((U,Q)=>p.has(Q)).reduce((U,Q)=>U+(Q.UNPAY_AMT||0),0),Y=c.reduce((U,Q)=>U+(Q.UNPAY_AMT||0),0),K=U=>{const Q=U.target.value.replace(/\D/g,"").slice(0,16);A(Q)},w=U=>{const Q=U.target.value.replace(/\D/g,"").slice(0,10);S(Q)},se=()=>p.size===0?"  .":R.length<15?"  .":!M||!k?" .":j.length<6?"(6)  (10) .":null,oe=new Date().getFullYear(),T=Array.from({length:11},(U,Q)=>{const H=oe+Q;return{value:String(H).slice(2),label:String(H)}}),I=async()=>{const U=se();if(U){d==null||d(U,"warning");return}N(!0);try{console.log("[Payment] Step 1: getCardVendorBySoId");const Q=await V9(l);let H="dlivecon";if(Q.success&&Q.data){const ie=Array.isArray(Q.data)?Q.data[0]:Q.data;ie!=null&&ie.CARD_VENDOR&&(H=ie.CARD_VENDOR)}console.log("[Payment] MID:",H);const q=q9(),ae=z9(),fe=H+q+ae,ge=String($);console.log("[Payment] Step 2: insertDpstAndDTL");const ce=sessionStorage.getItem("userInfo")&&JSON.parse(sessionStorage.getItem("userInfo")||"{}").userId||"SYSTEM",X=c.filter((ie,te)=>p.has(te)).map((ie,te)=>({master_store_id:H,order_dt:q,order_no:ae,BILL_SEQ_NO:String(te+1),SO_ID:l||"",BILL_AMT:ie.BILL_AMT||ie.UNPAY_AMT,PRE_RCPT_AMT:(ie.BILL_AMT||0)-(ie.UNPAY_AMT||0),RCPT_AMT:ie.UNPAY_AMT})),he=await $9({master_store_id:H,order_dt:q,order_no:ae,ctrt_so_id:l||"",pym_acnt_id:i||"",cust_id:n,prod_info_cd:"0",encrypted_amt:ge,reqr_nm:r||"",pyr_rel:"01",user_id:ce,rcpt_bill_emp_id:ce,smry:"  ",cust_email:"",dtlList:X});console.log("[Payment] insertDpstAndDTL result:",he.success),i&&iW(i,{cardNo:R,expMonth:M,expYear:k,installment:G,korId:j,mid:H,orderNo:ae,orderDt:q,selectedTotal:$,timestamp:Date.now()}),console.log("[Payment] Step 3: processCardPayment");const Z=await H9({mid:H,order_dt:q,oid:ae,amount:ge,buyer:r||"",productinfo:"",card_no:R,card_expyear:k,card_expmon:M,kor_id:j,install:G,pym_acnt_id:i||"",encrypted_amt:ge,so_id:l||"",cust_id:n});Z.success?(i&&eR(i),v(!0),F({mid:H,orderNo:fe,orderDt:q}),u==null||u()):d==null||d(Z.message||"  .","error")}catch(Q){console.error("[Payment] Error:",Q),d==null||d((Q==null?void 0:Q.message)||"    .","error")}finally{N(!1)}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 max-h-[85vh] flex flex-col",onClick:U=>U.stopPropagation(),children:[s.jsxs("div",{className:`flex items-center justify-between p-4 border-b border-gray-200 rounded-t-xl ${m?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gradient-to-r from-red-500 to-red-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 text-white",children:[m?s.jsx(pp,{className:"w-5 h-5"}):s.jsx(_p,{className:"w-5 h-5"}),s.jsx("h3",{className:"font-semibold",children:m?"  ()":" "})]}),s.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",disabled:g,children:s.jsx(bi,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-medium text-gray-900",children:aW(r)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"ID: "}),s.jsx("span",{className:"font-mono text-blue-600",children:tR(n)})]}),i&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-mono text-purple-600",children:tR(i)})]})]})}),C?s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[s.jsx(Vi,{className:"w-16 h-16 text-green-500 mb-4"}),s.jsxs("p",{className:"text-gray-700 text-center mb-6 text-sm leading-relaxed",children:[jo($),"",s.jsx("br",{}),"   ."]}),s.jsx("button",{onClick:e,className:"w-full max-w-xs py-3 text-sm font-medium text-white bg-green-500 rounded-lg hover:bg-green-600 transition-colors",children:""})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:c.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[s.jsx(Mr,{className:"w-12 h-12 mb-2"}),s.jsx("span",{children:"  ."})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg cursor-pointer border border-blue-200",children:[s.jsx("input",{type:"checkbox",checked:p.size===c.length,onChange:J,className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:g}),s.jsxs("span",{className:"flex-1 font-medium text-blue-700",children:["  (",c.length,")"]}),s.jsxs("span",{className:"font-bold text-blue-700",children:[jo(Y),""]})]}),c.map((U,Q)=>s.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer border transition-colors ${p.has(Q)?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:[s.jsx("input",{type:"checkbox",checked:p.has(Q),onChange:()=>ee(Q),className:"w-5 h-5 rounded border-gray-300 text-red-600 focus:ring-red-500",disabled:g}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:oW(U.BILL_YM)}),s.jsxs("span",{className:`text-sm font-bold ${p.has(Q)?"text-red-600":"text-gray-700"}`,children:[jo(U.UNPAY_AMT),""]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5 truncate",children:[lW(U.PROD_NM),U.UNPAY_DAYS?` |  ${U.UNPAY_DAYS}`:""]})]})]},Q))]})}),s.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-white rounded-lg border border-gray-200",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["  (",p.size,")"]}),s.jsxs("span",{className:"text-xl font-bold text-red-600",children:[jo($),""]})]}),s.jsxs("div",{className:`mb-3 p-3 rounded-lg border ${m?"bg-amber-50 border-amber-200":"bg-white border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-3",children:[s.jsx(_p,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),m&&s.jsxs("span",{className:"ml-auto px-2 py-0.5 text-xs bg-amber-500 text-white rounded-full flex items-center gap-1",children:[s.jsx(pp,{className:"w-3 h-3"})," "]})]}),m&&s.jsxs("div",{className:"mb-3 p-2 bg-amber-100 rounded-lg text-xs text-amber-800 flex items-start gap-2",children:[s.jsx(Mr,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsxs("span",{children:[" .     .",s.jsx("br",{}),"   ."]})]}),s.jsxs("div",{className:"mb-2.5",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("input",{type:"text",inputMode:"numeric",value:m?cW(R):Fj(R),onChange:K,placeholder:"0000-0000-0000-0000",disabled:g||m,readOnly:m,className:`w-full px-3 py-2 text-sm border rounded-lg outline-none font-mono tracking-wider ${m?"border-amber-300 bg-amber-50 text-gray-700 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100"}`,maxLength:19})]}),s.jsxs("div",{className:"flex gap-2 mb-2.5",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsxs("select",{value:M,onChange:U=>L(U.target.value),disabled:g||m,className:`w-full px-2 py-2 text-sm border rounded-lg outline-none appearance-none pr-7 ${m?"border-amber-300 bg-amber-50 text-gray-700 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white disabled:bg-gray-100"}`,children:[s.jsx("option",{value:"",children:""}),Array.from({length:12},(U,Q)=>{const H=String(Q+1).padStart(2,"0");return s.jsx("option",{value:H,children:H},H)})]}),s.jsx(or,{className:"absolute right-1.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none"})]}),s.jsx("span",{className:"self-center text-gray-400 text-sm",children:"/"}),s.jsxs("div",{className:"relative flex-1",children:[s.jsxs("select",{value:k,onChange:U=>V(U.target.value),disabled:g||m,className:`w-full px-2 py-2 text-sm border rounded-lg outline-none appearance-none pr-7 ${m?"border-amber-300 bg-amber-50 text-gray-700 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white disabled:bg-gray-100"}`,children:[s.jsx("option",{value:"",children:""}),T.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))]}),s.jsx(or,{className:"absolute right-1.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none"})]})]})]}),s.jsxs("div",{className:"w-24",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:G,onChange:U=>W(U.target.value),disabled:g||m,className:`w-full px-2 py-2 text-sm border rounded-lg outline-none appearance-none pr-7 ${m?"border-amber-300 bg-amber-50 text-gray-700 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white disabled:bg-gray-100"}`,children:[s.jsx("option",{value:"00",children:""}),[2,3,4,5,6,7,8,9,10,11,12].map(U=>s.jsxs("option",{value:String(U).padStart(2,"0"),children:[U,""]},U))]}),s.jsx(or,{className:"absolute right-1.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"(6) / (10)"}),s.jsx("input",{type:"text",inputMode:"numeric",value:m?j.replace(/./g,"*"):j,onChange:w,placeholder:") 900101",disabled:g||m,readOnly:m,className:`w-full px-3 py-2 text-sm border rounded-lg outline-none ${m?"border-amber-300 bg-amber-50 text-gray-700 cursor-not-allowed":"border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100"}`,maxLength:10})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{m&&i&&eR(i),e()},disabled:g,className:`py-3 text-sm font-medium rounded-lg transition-colors ${m?"flex-1 text-white bg-amber-500 hover:bg-amber-600":"flex-1 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 disabled:opacity-50"}`,children:m?" ( )":""}),!m&&s.jsx("button",{onClick:I,disabled:g||p.size===0,className:"flex-1 py-3 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:g?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-4 h-4 animate-spin"}),"  ..."]}):s.jsxs(s.Fragment,{children:[" ",$>0?jo($)+"":""]})})]}),s.jsx("p",{className:"mt-3 text-xs text-gray-400 text-center",children:m?"*   .   .":"*     ."})]})]})]})})},Kj=({onSave:t,onCancel:e,width:n=340,height:r=200,penColor:i="#000000",backgroundColor:l="#ffffff",title:c=""})=>{const d=_.useRef(null),[u,f]=_.useState(!1),[m,p]=_.useState(!1),y=_.useRef(null),[g,N]=_.useState({isOpen:!1,type:"warning",message:"",onConfirm:()=>{}});_.useEffect(()=>{const V=d.current;if(!V)return;const G=V.getContext("2d");G&&(G.fillStyle=l,G.fillRect(0,0,V.width,V.height),G.strokeStyle=i,G.lineWidth=2,G.lineCap="round",G.lineJoin="round")},[l,i]);const C=_.useCallback(V=>{const G=d.current;if(!G)return null;const W=G.getBoundingClientRect(),j=G.width/W.width,S=G.height/W.height;if("touches"in V){const P=V.touches[0];return{x:(P.clientX-W.left)*j,y:(P.clientY-W.top)*S}}else return{x:(V.clientX-W.left)*j,y:(V.clientY-W.top)*S}},[]),v=_.useCallback(V=>{V.preventDefault();const G=C(V);if(!G)return;f(!0),y.current=G;const W=d.current,j=W==null?void 0:W.getContext("2d");j&&(j.beginPath(),j.moveTo(G.x,G.y))},[C]),R=_.useCallback(V=>{if(!u)return;V.preventDefault();const G=C(V);if(!G||!y.current)return;const W=d.current,j=W==null?void 0:W.getContext("2d");j&&(j.beginPath(),j.moveTo(y.current.x,y.current.y),j.lineTo(G.x,G.y),j.stroke(),y.current=G,p(!0))},[u,C]),A=_.useCallback(()=>{f(!1),y.current=null},[]),M=_.useCallback(()=>{const V=d.current,G=V==null?void 0:V.getContext("2d");!G||!V||(G.fillStyle=l,G.fillRect(0,0,V.width,V.height),p(!1))},[l]),L=_.useCallback(()=>{const V=d.current;if(!V||!m)return;let G=V.toDataURL("image/png");if(G=G.replace(/\+/g,"%2B"),G.length<5e3){N({isOpen:!0,type:"error",message:`    .
  .`,onConfirm:()=>M()});return}if(G.length<1e4){N({isOpen:!0,type:"warning",message:`      .
  .`,onConfirm:()=>M()});return}t(G)},[m,t,M]),k=_.useCallback(()=>{N(V=>({...V,isOpen:!1}))},[]);return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx(ul,{isOpen:g.isOpen,onClose:k,onConfirm:g.onConfirm,title:" ",message:g.message,type:g.type,showCancel:!1,confirmText:""}),s.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[s.jsx("h3",{className:"font-medium",children:c}),s.jsx("p",{className:"text-xs text-blue-100 mt-0.5",children:"  "})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-50",children:s.jsx("canvas",{ref:d,width:n,height:r,className:"touch-none w-full",style:{maxWidth:"100%",height:"auto",aspectRatio:`${n}/${r}`},onMouseDown:v,onMouseMove:R,onMouseUp:A,onMouseLeave:A,onTouchStart:v,onTouchMove:R,onTouchEnd:A})}),!m&&s.jsx("div",{className:"text-center mt-2 text-sm text-gray-400",children:"   "})]}),s.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[s.jsxs("button",{onClick:M,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(Ei,{className:"w-4 h-4"})," "]}),e&&s.jsxs("button",{onClick:e,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(Rw,{className:"w-4 h-4"}),""]}),s.jsxs("button",{onClick:L,disabled:!m,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[s.jsx(dc,{className:"w-4 h-4"}),""]})]})]})};function xr(t){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(t)}var Mo=Uint8Array,Dl=Uint16Array,pN=Int32Array,_N=new Mo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),CN=new Mo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sR=new Mo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qj=function(t,e){for(var n=new Dl(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new pN(n[30]),r=1;r<30;++r)for(var l=n[r];l<n[r+1];++l)i[l]=l-n[r]<<5|r;return{b:n,r:i}},Gj=Qj(_N,2),uW=Gj.b,Yy=Gj.r;uW[28]=258,Yy[258]=28;var hW=Qj(CN,0),nR=hW.r,Vy=new Dl(32768);for(var Br=0;Br<32768;++Br){var zd=(Br&43690)>>1|(Br&21845)<<1;zd=(zd&52428)>>2|(zd&13107)<<2,zd=(zd&61680)>>4|(zd&3855)<<4,Vy[Br]=((zd&65280)>>8|(zd&255)<<8)>>1}var $m=(function(t,e,n){for(var r=t.length,i=0,l=new Dl(e);i<r;++i)t[i]&&++l[t[i]-1];var c=new Dl(e);for(i=1;i<e;++i)c[i]=c[i-1]+l[i-1]<<1;var d;if(n){d=new Dl(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var f=i<<4|t[i],m=e-t[i],p=c[t[i]-1]++<<m,y=p|(1<<m)-1;p<=y;++p)d[Vy[p]>>u]=f}else for(d=new Dl(r),i=0;i<r;++i)t[i]&&(d[i]=Vy[c[t[i]-1]++]>>15-t[i]);return d}),vh=new Mo(288);for(var Br=0;Br<144;++Br)vh[Br]=8;for(var Br=144;Br<256;++Br)vh[Br]=9;for(var Br=256;Br<280;++Br)vh[Br]=7;for(var Br=280;Br<288;++Br)vh[Br]=8;var Yp=new Mo(32);for(var Br=0;Br<32;++Br)Yp[Br]=5;var fW=$m(vh,9,0),mW=$m(Yp,5,0),Yj=function(t){return(t+7)/8|0},gW=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Mo(t.subarray(e,n))},Fc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},jm=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},MC=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,l=n.slice();if(!i)return{t:$j,l:0};if(i==1){var c=new Mo(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(k,V){return k.f-V.f}),n.push({s:-1,f:25001});var d=n[0],u=n[1],f=0,m=1,p=2;for(n[0]={s:-1,f:d.f+u.f,l:d,r:u};m!=i-1;)d=n[n[f].f<n[p].f?f++:p++],u=n[f!=m&&n[f].f<n[p].f?f++:p++],n[m++]={s:-1,f:d.f+u.f,l:d,r:u};for(var y=l[0].s,r=1;r<i;++r)l[r].s>y&&(y=l[r].s);var g=new Dl(y+1),N=$y(n[m-1],g,0);if(N>e){var r=0,C=0,v=N-e,R=1<<v;for(l.sort(function(V,G){return g[G.s]-g[V.s]||V.f-G.f});r<i;++r){var A=l[r].s;if(g[A]>e)C+=R-(1<<N-g[A]),g[A]=e;else break}for(C>>=v;C>0;){var M=l[r].s;g[M]<e?C-=1<<e-g[M]++-1:++r}for(;r>=0&&C;--r){var L=l[r].s;g[L]==e&&(--g[L],++C)}N=e}return{t:new Mo(g),l:N}},$y=function(t,e,n){return t.s==-1?Math.max($y(t.l,e,n+1),$y(t.r,e,n+1)):e[t.s]=n},rR=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Dl(++e),r=0,i=t[0],l=1,c=function(u){n[r++]=u},d=1;d<=e;++d)if(t[d]==i&&d!=e)++l;else{if(!i&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(i),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(i);l=1,i=t[d]}return{c:n.subarray(0,r),n:e}},Im=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Vj=function(t,e,n){var r=n.length,i=Yj(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var l=0;l<r;++l)t[i+l+4]=n[l];return(i+4+r)*8},iR=function(t,e,n,r,i,l,c,d,u,f,m){Fc(e,m++,n),++i[256];for(var p=MC(i,15),y=p.t,g=p.l,N=MC(l,15),C=N.t,v=N.l,R=rR(y),A=R.c,M=R.n,L=rR(C),k=L.c,V=L.n,G=new Dl(19),W=0;W<A.length;++W)++G[A[W]&31];for(var W=0;W<k.length;++W)++G[k[W]&31];for(var j=MC(G,7),S=j.t,P=j.l,F=19;F>4&&!S[sR[F-1]];--F);var ee=f+5<<3,J=Im(i,vh)+Im(l,Yp)+c,$=Im(i,y)+Im(l,C)+c+14+3*F+Im(G,S)+2*G[16]+3*G[17]+7*G[18];if(u>=0&&ee<=J&&ee<=$)return Vj(e,m,t.subarray(u,u+f));var Y,K,w,se;if(Fc(e,m,1+($<J)),m+=2,$<J){Y=$m(y,g,0),K=y,w=$m(C,v,0),se=C;var oe=$m(S,P,0);Fc(e,m,M-257),Fc(e,m+5,V-1),Fc(e,m+10,F-4),m+=14;for(var W=0;W<F;++W)Fc(e,m+3*W,S[sR[W]]);m+=3*F;for(var T=[A,k],I=0;I<2;++I)for(var U=T[I],W=0;W<U.length;++W){var Q=U[W]&31;Fc(e,m,oe[Q]),m+=S[Q],Q>15&&(Fc(e,m,U[W]>>5&127),m+=U[W]>>12)}}else Y=fW,K=vh,w=mW,se=Yp;for(var W=0;W<d;++W){var H=r[W];if(H>255){var Q=H>>18&31;jm(e,m,Y[Q+257]),m+=K[Q+257],Q>7&&(Fc(e,m,H>>23&31),m+=_N[Q]);var q=H&31;jm(e,m,w[q]),m+=se[q],q>3&&(jm(e,m,H>>5&8191),m+=CN[q])}else jm(e,m,Y[H]),m+=K[H]}return jm(e,m,Y[256]),m+K[256]},xW=new pN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$j=new Mo(0),pW=function(t,e,n,r,i,l){var c=l.z||t.length,d=new Mo(r+c+5*(1+Math.ceil(c/7e3))+i),u=d.subarray(r,d.length-i),f=l.l,m=(l.r||0)&7;if(e){m&&(u[0]=l.r>>3);for(var p=xW[e-1],y=p>>13,g=p&8191,N=(1<<n)-1,C=l.p||new Dl(32768),v=l.h||new Dl(N+1),R=Math.ceil(n/3),A=2*R,M=function(he){return(t[he]^t[he+1]<<R^t[he+2]<<A)&N},L=new pN(25e3),k=new Dl(288),V=new Dl(32),G=0,W=0,j=l.i||0,S=0,P=l.w||0,F=0;j+2<c;++j){var ee=M(j),J=j&32767,$=v[ee];if(C[J]=$,v[ee]=J,P<=j){var Y=c-j;if((G>7e3||S>24576)&&(Y>423||!f)){m=iR(t,u,0,L,k,V,W,S,F,j-F,m),S=G=W=0,F=j;for(var K=0;K<286;++K)k[K]=0;for(var K=0;K<30;++K)V[K]=0}var w=2,se=0,oe=g,T=J-$&32767;if(Y>2&&ee==M(j-T))for(var I=Math.min(y,Y)-1,U=Math.min(32767,j),Q=Math.min(258,Y);T<=U&&--oe&&J!=$;){if(t[j+w]==t[j+w-T]){for(var H=0;H<Q&&t[j+H]==t[j+H-T];++H);if(H>w){if(w=H,se=T,H>I)break;for(var q=Math.min(T,H-2),ae=0,K=0;K<q;++K){var fe=j-T+K&32767,ge=C[fe],ce=fe-ge&32767;ce>ae&&(ae=ce,$=fe)}}}J=$,$=C[J],T+=J-$&32767}if(se){L[S++]=268435456|Yy[w]<<18|nR[se];var Re=Yy[w]&31,X=nR[se]&31;W+=_N[Re]+CN[X],++k[257+Re],++V[X],P=j+w,++G}else L[S++]=t[j],++k[t[j]]}}for(j=Math.max(j,P);j<c;++j)L[S++]=t[j],++k[t[j]];m=iR(t,u,f,L,k,V,W,S,F,j-F,m),f||(l.r=m&7|u[m/8|0]<<3,m-=7,l.h=v,l.p=C,l.i=j,l.w=P)}else{for(var j=l.w||0;j<c+f;j+=65535){var me=j+65535;me>=c&&(u[m/8|0]=f,me=c),m=Vj(u,m+1,t.subarray(j,me))}l.i=c}return gW(d,0,r+Yj(m)+i)},Hj=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,l=n.length|0,c=0;c!=l;){for(var d=Math.min(c+2655,l);c<d;++c)i+=r+=n[c];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},_W=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),c=new Mo(l.length+t.length);c.set(l),c.set(t,l.length),t=c,i.w=l.length}return pW(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},zj=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},CW=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Hj();i.p(e.dictionary),zj(t,2,i.d())}};function Hy(t,e){e||(e={});var n=Hj();n.p(t);var r=_W(t,e,e.dictionary?6:2,4);return CW(r,e),zj(r,r.length-4,n.d()),r}var yW=typeof TextDecoder<"u"&&new TextDecoder,bW=0;try{yW.decode($j,{stream:!0}),bW=1}catch{}function NW(t){if(Array.isArray(t))return t}function SW(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,l,c,d=[],u=!0,f=!1;try{if(l=(n=n.call(t)).next,e!==0)for(;!(u=(r=l.call(n)).done)&&(d.push(r.value),d.length!==e);u=!0);}catch(m){f=!0,i=m}finally{try{if(!u&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(f)throw i}}return d}}function aR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function vW(t,e){if(t){if(typeof t=="string")return aR(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aR(t,e):void 0}}function DW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lR(t,e){return NW(t)||SW(t,e)||vW(t,e)||DW()}function oR(t,e="utf8"){return new TextDecoder(e).decode(t)}const RW=new TextEncoder;function TW(t){return RW.encode(t)}const EW=1024*8,jW=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),LC={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class yN{constructor(e=EW,n={}){ar(this,"buffer");ar(this,"byteLength");ar(this,"byteOffset");ar(this,"length");ar(this,"offset");ar(this,"lastWrittenByte");ar(this,"littleEndian");ar(this,"_data");ar(this,"_mark");ar(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,l=e.byteLength-i;let c=i;(ArrayBuffer.isView(e)||e instanceof yN)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=e,this.length=l,this.byteLength=l,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,l),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=LC[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,l=this.buffer.slice(i,i+r);if(this.littleEndian===jW&&n!=="uint8"&&n!=="int8"){const d=new Uint8Array(this.buffer.slice(i,i+r));d.reverse();const u=new LC[n](d.buffer);return this.offset+=r,u.reverse(),u}const c=new LC[n](l);return this.offset+=r,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return oR(this.readBytes(e))}decodeText(e=1,n="utf8"){return oR(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(TW(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Af(t){let e=t.length;for(;--e>=0;)t[e]=0}const IW=3,OW=258,qj=29,MW=256,LW=MW+1+qj,Xj=30,wW=512,PW=new Array((LW+2)*2);Af(PW);const AW=new Array(Xj*2);Af(AW);const kW=new Array(wW);Af(kW);const UW=new Array(OW-IW+1);Af(UW);const WW=new Array(qj);Af(WW);const BW=new Array(Xj);Af(BW);const FW=(t,e,n,r)=>{let i=t&65535|0,l=t>>>16&65535|0,c=0;for(;n!==0;){c=n>2e3?2e3:n,n-=c;do i=i+e[r++]|0,l=l+i|0;while(--c);i%=65521,l%=65521}return i|l<<16|0};var zy=FW;const KW=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},QW=new Uint32Array(KW()),GW=(t,e,n,r)=>{const i=QW,l=r+n;t^=-1;for(let c=r;c<l;c++)t=t>>>8^i[(t^e[c])&255];return t^-1};var ec=GW,qy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Jj={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const YW=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var VW=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)YW(n,r)&&(t[r]=n[r])}}return t},$W=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,l=t.length;r<l;r++){let c=t[r];n.set(c,i),i+=c.length}return n},Zj={assign:VW,flattenChunks:$W};let eI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eI=!1}const dg=new Uint8Array(256);for(let t=0;t<256;t++)dg[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;dg[254]=dg[254]=1;var HW=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,l,c=t.length,d=0;for(i=0;i<c;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<c&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),d+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(d),l=0,i=0;l<d;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<c&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[l++]=n:n<2048?(e[l++]=192|n>>>6,e[l++]=128|n&63):n<65536?(e[l++]=224|n>>>12,e[l++]=128|n>>>6&63,e[l++]=128|n&63):(e[l++]=240|n>>>18,e[l++]=128|n>>>12&63,e[l++]=128|n>>>6&63,e[l++]=128|n&63);return e};const zW=(t,e)=>{if(e<65534&&t.subarray&&eI)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var qW=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const l=new Array(n*2);for(i=0,r=0;r<n;){let c=t[r++];if(c<128){l[i++]=c;continue}let d=dg[c];if(d>4){l[i++]=65533,r+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&r<n;)c=c<<6|t[r++]&63,d--;if(d>1){l[i++]=65533;continue}c<65536?l[i++]=c:(c-=65536,l[i++]=55296|c>>10&1023,l[i++]=56320|c&1023)}return zW(l,i)},XW=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+dg[t[n]]>e?n:e},Xy={string2buf:HW,buf2string:qW,utf8border:XW};function JW(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ZW=JW;const Yx=16209,eB=16191;var tB=function(e,n){let r,i,l,c,d,u,f,m,p,y,g,N,C,v,R,A,M,L,k,V,G,W,j,S;const P=e.state;r=e.next_in,j=e.input,i=r+(e.avail_in-5),l=e.next_out,S=e.output,c=l-(n-e.avail_out),d=l+(e.avail_out-257),u=P.dmax,f=P.wsize,m=P.whave,p=P.wnext,y=P.window,g=P.hold,N=P.bits,C=P.lencode,v=P.distcode,R=(1<<P.lenbits)-1,A=(1<<P.distbits)-1;e:do{N<15&&(g+=j[r++]<<N,N+=8,g+=j[r++]<<N,N+=8),M=C[g&R];t:for(;;){if(L=M>>>24,g>>>=L,N-=L,L=M>>>16&255,L===0)S[l++]=M&65535;else if(L&16){k=M&65535,L&=15,L&&(N<L&&(g+=j[r++]<<N,N+=8),k+=g&(1<<L)-1,g>>>=L,N-=L),N<15&&(g+=j[r++]<<N,N+=8,g+=j[r++]<<N,N+=8),M=v[g&A];s:for(;;){if(L=M>>>24,g>>>=L,N-=L,L=M>>>16&255,L&16){if(V=M&65535,L&=15,N<L&&(g+=j[r++]<<N,N+=8,N<L&&(g+=j[r++]<<N,N+=8)),V+=g&(1<<L)-1,V>u){e.msg="invalid distance too far back",P.mode=Yx;break e}if(g>>>=L,N-=L,L=l-c,V>L){if(L=V-L,L>m&&P.sane){e.msg="invalid distance too far back",P.mode=Yx;break e}if(G=0,W=y,p===0){if(G+=f-L,L<k){k-=L;do S[l++]=y[G++];while(--L);G=l-V,W=S}}else if(p<L){if(G+=f+p-L,L-=p,L<k){k-=L;do S[l++]=y[G++];while(--L);if(G=0,p<k){L=p,k-=L;do S[l++]=y[G++];while(--L);G=l-V,W=S}}}else if(G+=p-L,L<k){k-=L;do S[l++]=y[G++];while(--L);G=l-V,W=S}for(;k>2;)S[l++]=W[G++],S[l++]=W[G++],S[l++]=W[G++],k-=3;k&&(S[l++]=W[G++],k>1&&(S[l++]=W[G++]))}else{G=l-V;do S[l++]=S[G++],S[l++]=S[G++],S[l++]=S[G++],k-=3;while(k>2);k&&(S[l++]=S[G++],k>1&&(S[l++]=S[G++]))}}else if((L&64)===0){M=v[(M&65535)+(g&(1<<L)-1)];continue s}else{e.msg="invalid distance code",P.mode=Yx;break e}break}}else if((L&64)===0){M=C[(M&65535)+(g&(1<<L)-1)];continue t}else if(L&32){P.mode=eB;break e}else{e.msg="invalid literal/length code",P.mode=Yx;break e}break}}while(r<i&&l<d);k=N>>3,r-=k,N-=k<<3,g&=(1<<N)-1,e.next_in=r,e.next_out=l,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=l<d?257+(d-l):257-(l-d),P.hold=g,P.bits=N};const M0=15,cR=852,dR=592,uR=0,wC=1,hR=2,sB=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nB=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),rB=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iB=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),aB=(t,e,n,r,i,l,c,d)=>{const u=d.bits;let f=0,m=0,p=0,y=0,g=0,N=0,C=0,v=0,R=0,A=0,M,L,k,V,G,W=null,j;const S=new Uint16Array(M0+1),P=new Uint16Array(M0+1);let F=null,ee,J,$;for(f=0;f<=M0;f++)S[f]=0;for(m=0;m<r;m++)S[e[n+m]]++;for(g=u,y=M0;y>=1&&S[y]===0;y--);if(g>y&&(g=y),y===0)return i[l++]=1<<24|64<<16|0,i[l++]=1<<24|64<<16|0,d.bits=1,0;for(p=1;p<y&&S[p]===0;p++);for(g<p&&(g=p),v=1,f=1;f<=M0;f++)if(v<<=1,v-=S[f],v<0)return-1;if(v>0&&(t===uR||y!==1))return-1;for(P[1]=0,f=1;f<M0;f++)P[f+1]=P[f]+S[f];for(m=0;m<r;m++)e[n+m]!==0&&(c[P[e[n+m]]++]=m);if(t===uR?(W=F=c,j=20):t===wC?(W=sB,F=nB,j=257):(W=rB,F=iB,j=0),A=0,m=0,f=p,G=l,N=g,C=0,k=-1,R=1<<g,V=R-1,t===wC&&R>cR||t===hR&&R>dR)return 1;for(;;){ee=f-C,c[m]+1<j?(J=0,$=c[m]):c[m]>=j?(J=F[c[m]-j],$=W[c[m]-j]):(J=96,$=0),M=1<<f-C,L=1<<N,p=L;do L-=M,i[G+(A>>C)+L]=ee<<24|J<<16|$|0;while(L!==0);for(M=1<<f-1;A&M;)M>>=1;if(M!==0?(A&=M-1,A+=M):A=0,m++,--S[f]===0){if(f===y)break;f=e[n+c[m]]}if(f>g&&(A&V)!==k){for(C===0&&(C=g),G+=p,N=f-C,v=1<<N;N+C<y&&(v-=S[N+C],!(v<=0));)N++,v<<=1;if(R+=1<<N,t===wC&&R>cR||t===hR&&R>dR)return 1;k=A&V,i[k]=g<<24|N<<16|G-l|0}}return A!==0&&(i[G+A]=f-C<<24|64<<16|0),d.bits=g,0};var Hm=aB;const lB=0,tI=1,sI=2,{Z_FINISH:fR,Z_BLOCK:oB,Z_TREES:Vx,Z_OK:Dh,Z_STREAM_END:cB,Z_NEED_DICT:dB,Z_STREAM_ERROR:eo,Z_DATA_ERROR:nI,Z_MEM_ERROR:rI,Z_BUF_ERROR:uB,Z_DEFLATED:mR}=Jj,D_=16180,gR=16181,xR=16182,pR=16183,_R=16184,CR=16185,yR=16186,bR=16187,NR=16188,SR=16189,Vp=16190,Kc=16191,PC=16192,vR=16193,AC=16194,DR=16195,RR=16196,TR=16197,ER=16198,$x=16199,Hx=16200,jR=16201,IR=16202,OR=16203,MR=16204,LR=16205,kC=16206,wR=16207,PR=16208,$r=16209,iI=16210,aI=16211,hB=852,fB=592,mB=15,gB=mB,AR=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function xB(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Wh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<D_||e.mode>aI?1:0},lI=t=>{if(Wh(t))return eo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=D_,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(hB),e.distcode=e.distdyn=new Int32Array(fB),e.sane=1,e.back=-1,Dh},oI=t=>{if(Wh(t))return eo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,lI(t)},cI=(t,e)=>{let n;if(Wh(t))return eo;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?eo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,oI(t))},dI=(t,e)=>{if(!t)return eo;const n=new xB;t.state=n,n.strm=t,n.window=null,n.mode=D_;const r=cI(t,e);return r!==Dh&&(t.state=null),r},pB=t=>dI(t,gB);let kR=!0,UC,WC;const _B=t=>{if(kR){UC=new Int32Array(512),WC=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Hm(tI,t.lens,0,288,UC,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Hm(sI,t.lens,0,32,WC,0,t.work,{bits:5}),kR=!1}t.lencode=UC,t.lenbits=9,t.distcode=WC,t.distbits=5},uI=(t,e,n,r)=>{let i;const l=t.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),r>=l.wsize?(l.window.set(e.subarray(n-l.wsize,n),0),l.wnext=0,l.whave=l.wsize):(i=l.wsize-l.wnext,i>r&&(i=r),l.window.set(e.subarray(n-r,n-r+i),l.wnext),r-=i,r?(l.window.set(e.subarray(n-r,n),0),l.wnext=r,l.whave=l.wsize):(l.wnext+=i,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=i))),0},CB=(t,e)=>{let n,r,i,l,c,d,u,f,m,p,y,g,N,C,v=0,R,A,M,L,k,V,G,W;const j=new Uint8Array(4);let S,P;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wh(t)||!t.output||!t.input&&t.avail_in!==0)return eo;n=t.state,n.mode===Kc&&(n.mode=PC),c=t.next_out,i=t.output,u=t.avail_out,l=t.next_in,r=t.input,d=t.avail_in,f=n.hold,m=n.bits,p=d,y=u,W=Dh;e:for(;;)switch(n.mode){case D_:if(n.wrap===0){n.mode=PC;break}for(;m<16;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(n.wrap&2&&f===35615){n.wbits===0&&(n.wbits=15),n.check=0,j[0]=f&255,j[1]=f>>>8&255,n.check=ec(n.check,j,2,0),f=0,m=0,n.mode=gR;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){t.msg="incorrect header check",n.mode=$r;break}if((f&15)!==mR){t.msg="unknown compression method",n.mode=$r;break}if(f>>>=4,m-=4,G=(f&15)+8,n.wbits===0&&(n.wbits=G),G>15||G>n.wbits){t.msg="invalid window size",n.mode=$r;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=f&512?SR:Kc,f=0,m=0;break;case gR:for(;m<16;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(n.flags=f,(n.flags&255)!==mR){t.msg="unknown compression method",n.mode=$r;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=$r;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&n.wrap&4&&(j[0]=f&255,j[1]=f>>>8&255,n.check=ec(n.check,j,2,0)),f=0,m=0,n.mode=xR;case xR:for(;m<32;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}n.head&&(n.head.time=f),n.flags&512&&n.wrap&4&&(j[0]=f&255,j[1]=f>>>8&255,j[2]=f>>>16&255,j[3]=f>>>24&255,n.check=ec(n.check,j,4,0)),f=0,m=0,n.mode=pR;case pR:for(;m<16;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&n.wrap&4&&(j[0]=f&255,j[1]=f>>>8&255,n.check=ec(n.check,j,2,0)),f=0,m=0,n.mode=_R;case _R:if(n.flags&1024){for(;m<16;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&n.wrap&4&&(j[0]=f&255,j[1]=f>>>8&255,n.check=ec(n.check,j,2,0)),f=0,m=0}else n.head&&(n.head.extra=null);n.mode=CR;case CR:if(n.flags&1024&&(g=n.length,g>d&&(g=d),g&&(n.head&&(G=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(l,l+g),G)),n.flags&512&&n.wrap&4&&(n.check=ec(n.check,r,g,l)),d-=g,l+=g,n.length-=g),n.length))break e;n.length=0,n.mode=yR;case yR:if(n.flags&2048){if(d===0)break e;g=0;do G=r[l+g++],n.head&&G&&n.length<65536&&(n.head.name+=String.fromCharCode(G));while(G&&g<d);if(n.flags&512&&n.wrap&4&&(n.check=ec(n.check,r,g,l)),d-=g,l+=g,G)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=bR;case bR:if(n.flags&4096){if(d===0)break e;g=0;do G=r[l+g++],n.head&&G&&n.length<65536&&(n.head.comment+=String.fromCharCode(G));while(G&&g<d);if(n.flags&512&&n.wrap&4&&(n.check=ec(n.check,r,g,l)),d-=g,l+=g,G)break e}else n.head&&(n.head.comment=null);n.mode=NR;case NR:if(n.flags&512){for(;m<16;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(n.wrap&4&&f!==(n.check&65535)){t.msg="header crc mismatch",n.mode=$r;break}f=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Kc;break;case SR:for(;m<32;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}t.adler=n.check=AR(f),f=0,m=0,n.mode=Vp;case Vp:if(n.havedict===0)return t.next_out=c,t.avail_out=u,t.next_in=l,t.avail_in=d,n.hold=f,n.bits=m,dB;t.adler=n.check=1,n.mode=Kc;case Kc:if(e===oB||e===Vx)break e;case PC:if(n.last){f>>>=m&7,m-=m&7,n.mode=kC;break}for(;m<3;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}switch(n.last=f&1,f>>>=1,m-=1,f&3){case 0:n.mode=vR;break;case 1:if(_B(n),n.mode=$x,e===Vx){f>>>=2,m-=2;break e}break;case 2:n.mode=RR;break;case 3:t.msg="invalid block type",n.mode=$r}f>>>=2,m-=2;break;case vR:for(f>>>=m&7,m-=m&7;m<32;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if((f&65535)!==(f>>>16^65535)){t.msg="invalid stored block lengths",n.mode=$r;break}if(n.length=f&65535,f=0,m=0,n.mode=AC,e===Vx)break e;case AC:n.mode=DR;case DR:if(g=n.length,g){if(g>d&&(g=d),g>u&&(g=u),g===0)break e;i.set(r.subarray(l,l+g),c),d-=g,l+=g,u-=g,c+=g,n.length-=g;break}n.mode=Kc;break;case RR:for(;m<14;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(n.nlen=(f&31)+257,f>>>=5,m-=5,n.ndist=(f&31)+1,f>>>=5,m-=5,n.ncode=(f&15)+4,f>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=$r;break}n.have=0,n.mode=TR;case TR:for(;n.have<n.ncode;){for(;m<3;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}n.lens[F[n.have++]]=f&7,f>>>=3,m-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},W=Hm(lB,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,W){t.msg="invalid code lengths set",n.mode=$r;break}n.have=0,n.mode=ER;case ER:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[f&(1<<n.lenbits)-1],R=v>>>24,A=v>>>16&255,M=v&65535,!(R<=m);){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(M<16)f>>>=R,m-=R,n.lens[n.have++]=M;else{if(M===16){for(P=R+2;m<P;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(f>>>=R,m-=R,n.have===0){t.msg="invalid bit length repeat",n.mode=$r;break}G=n.lens[n.have-1],g=3+(f&3),f>>>=2,m-=2}else if(M===17){for(P=R+3;m<P;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}f>>>=R,m-=R,G=0,g=3+(f&7),f>>>=3,m-=3}else{for(P=R+7;m<P;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}f>>>=R,m-=R,G=0,g=11+(f&127),f>>>=7,m-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=$r;break}for(;g--;)n.lens[n.have++]=G}}if(n.mode===$r)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=$r;break}if(n.lenbits=9,S={bits:n.lenbits},W=Hm(tI,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,W){t.msg="invalid literal/lengths set",n.mode=$r;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},W=Hm(sI,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,W){t.msg="invalid distances set",n.mode=$r;break}if(n.mode=$x,e===Vx)break e;case $x:n.mode=Hx;case Hx:if(d>=6&&u>=258){t.next_out=c,t.avail_out=u,t.next_in=l,t.avail_in=d,n.hold=f,n.bits=m,tB(t,y),c=t.next_out,i=t.output,u=t.avail_out,l=t.next_in,r=t.input,d=t.avail_in,f=n.hold,m=n.bits,n.mode===Kc&&(n.back=-1);break}for(n.back=0;v=n.lencode[f&(1<<n.lenbits)-1],R=v>>>24,A=v>>>16&255,M=v&65535,!(R<=m);){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(A&&(A&240)===0){for(L=R,k=A,V=M;v=n.lencode[V+((f&(1<<L+k)-1)>>L)],R=v>>>24,A=v>>>16&255,M=v&65535,!(L+R<=m);){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}f>>>=L,m-=L,n.back+=L}if(f>>>=R,m-=R,n.back+=R,n.length=M,A===0){n.mode=LR;break}if(A&32){n.back=-1,n.mode=Kc;break}if(A&64){t.msg="invalid literal/length code",n.mode=$r;break}n.extra=A&15,n.mode=jR;case jR:if(n.extra){for(P=n.extra;m<P;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=IR;case IR:for(;v=n.distcode[f&(1<<n.distbits)-1],R=v>>>24,A=v>>>16&255,M=v&65535,!(R<=m);){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if((A&240)===0){for(L=R,k=A,V=M;v=n.distcode[V+((f&(1<<L+k)-1)>>L)],R=v>>>24,A=v>>>16&255,M=v&65535,!(L+R<=m);){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}f>>>=L,m-=L,n.back+=L}if(f>>>=R,m-=R,n.back+=R,A&64){t.msg="invalid distance code",n.mode=$r;break}n.offset=M,n.extra=A&15,n.mode=OR;case OR:if(n.extra){for(P=n.extra;m<P;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=$r;break}n.mode=MR;case MR:if(u===0)break e;if(g=y-u,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=$r;break}g>n.wnext?(g-=n.wnext,N=n.wsize-g):N=n.wnext-g,g>n.length&&(g=n.length),C=n.window}else C=i,N=c-n.offset,g=n.length;g>u&&(g=u),u-=g,n.length-=g;do i[c++]=C[N++];while(--g);n.length===0&&(n.mode=Hx);break;case LR:if(u===0)break e;i[c++]=n.length,u--,n.mode=Hx;break;case kC:if(n.wrap){for(;m<32;){if(d===0)break e;d--,f|=r[l++]<<m,m+=8}if(y-=u,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?ec(n.check,i,y,c-y):zy(n.check,i,y,c-y)),y=u,n.wrap&4&&(n.flags?f:AR(f))!==n.check){t.msg="incorrect data check",n.mode=$r;break}f=0,m=0}n.mode=wR;case wR:if(n.wrap&&n.flags){for(;m<32;){if(d===0)break e;d--,f+=r[l++]<<m,m+=8}if(n.wrap&4&&f!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=$r;break}f=0,m=0}n.mode=PR;case PR:W=cB;break e;case $r:W=nI;break e;case iI:return rI;case aI:default:return eo}return t.next_out=c,t.avail_out=u,t.next_in=l,t.avail_in=d,n.hold=f,n.bits=m,(n.wsize||y!==t.avail_out&&n.mode<$r&&(n.mode<kC||e!==fR))&&uI(t,t.output,t.next_out,y-t.avail_out),p-=t.avail_in,y-=t.avail_out,t.total_in+=p,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?ec(n.check,i,y,t.next_out-y):zy(n.check,i,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Kc?128:0)+(n.mode===$x||n.mode===AC?256:0),(p===0&&y===0||e===fR)&&W===Dh&&(W=uB),W},yB=t=>{if(Wh(t))return eo;let e=t.state;return e.window&&(e.window=null),t.state=null,Dh},bB=(t,e)=>{if(Wh(t))return eo;const n=t.state;return(n.wrap&2)===0?eo:(n.head=e,e.done=!1,Dh)},NB=(t,e)=>{const n=e.length;let r,i,l;return Wh(t)||(r=t.state,r.wrap!==0&&r.mode!==Vp)?eo:r.mode===Vp&&(i=1,i=zy(i,e,n,0),i!==r.check)?nI:(l=uI(t,e,n,n),l?(r.mode=iI,rI):(r.havedict=1,Dh))};var SB=oI,vB=cI,DB=lI,RB=pB,TB=dI,EB=CB,jB=yB,IB=bB,OB=NB,MB="pako inflate (from Nodeca project)",$c={inflateReset:SB,inflateReset2:vB,inflateResetKeep:DB,inflateInit:RB,inflateInit2:TB,inflate:EB,inflateEnd:jB,inflateGetHeader:IB,inflateSetDictionary:OB,inflateInfo:MB};function LB(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var wB=LB;const hI=Object.prototype.toString,{Z_NO_FLUSH:PB,Z_FINISH:AB,Z_OK:ug,Z_STREAM_END:BC,Z_NEED_DICT:FC,Z_STREAM_ERROR:kB,Z_DATA_ERROR:UR,Z_MEM_ERROR:UB}=Jj;function Og(t){this.options=Zj.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZW,this.strm.avail_out=0;let n=$c.inflateInit2(this.strm,e.windowBits);if(n!==ug)throw new Error(qy[n]);if(this.header=new wB,$c.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Xy.string2buf(e.dictionary):hI.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=$c.inflateSetDictionary(this.strm,e.dictionary),n!==ug)))throw new Error(qy[n])}Og.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let l,c,d;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?AB:PB,hI.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),l=$c.inflate(n,c),l===FC&&i&&(l=$c.inflateSetDictionary(n,i),l===ug?l=$c.inflate(n,c):l===UR&&(l=FC));n.avail_in>0&&l===BC&&n.state.wrap>0&&t[n.next_in]!==0;)$c.inflateReset(n),l=$c.inflate(n,c);switch(l){case kB:case UR:case FC:case UB:return this.onEnd(l),this.ended=!0,!1}if(d=n.avail_out,n.next_out&&(n.avail_out===0||l===BC))if(this.options.to==="string"){let u=Xy.utf8border(n.output,n.next_out),f=n.next_out-u,m=Xy.buf2string(n.output,u);n.next_out=f,n.avail_out=r-f,f&&n.output.set(n.output.subarray(u,u+f),0),this.onData(m)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(l===ug&&d===0)){if(l===BC)return l=$c.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Og.prototype.onData=function(t){this.chunks.push(t)};Og.prototype.onEnd=function(t){t===ug&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Zj.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function WB(t,e){const n=new Og(e);if(n.push(t),n.err)throw n.msg||qy[n.err];return n.result}var BB=Og,FB=WB,KB={Inflate:BB,inflate:FB};const{Inflate:QB,inflate:GB}=KB;var WR=QB,YB=GB;const fI=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;fI[t]=e}const BR=4294967295;function VB(t,e,n){let r=t;for(let i=0;i<n;i++)r=fI[(r^e[i])&255]^r>>>8;return r}function $B(t,e){return(VB(BR,t,e)^BR)>>>0}function FR(t,e,n){const r=t.readUint32(),i=$B(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function mI(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function gI(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function xI(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function pI(t,e,n,r,i){let l=0;if(n.length===0){for(;l<i;l++)e[l]=t[l];for(;l<r;l++)e[l]=t[l]+(e[l-i]>>1)&255}else{for(;l<i;l++)e[l]=t[l]+(n[l]>>1)&255;for(;l<r;l++)e[l]=t[l]+(e[l-i]+n[l]>>1)&255}}function _I(t,e,n,r,i){let l=0;if(n.length===0){for(;l<i;l++)e[l]=t[l];for(;l<r;l++)e[l]=t[l]+e[l-i]&255}else{for(;l<i;l++)e[l]=t[l]+n[l]&255;for(;l<r;l++)e[l]=t[l]+HB(e[l-i],n[l],n[l-i])&255}}function HB(t,e,n){const r=t+e-n,i=Math.abs(r-t),l=Math.abs(r-e),c=Math.abs(r-n);return i<=l&&i<=c?t:l<=c?e:n}function zB(t,e,n,r,i,l){switch(t){case 0:mI(e,n,i);break;case 1:gI(e,n,i,l);break;case 2:xI(e,n,r,i);break;case 3:pI(e,n,r,i,l);break;case 4:_I(e,n,r,i,l);break;default:throw new Error(`Unsupported filter: ${t}`)}}const qB=new Uint16Array([255]),XB=new Uint8Array(qB.buffer),JB=XB[0]===255;function ZB(t){const{data:e,width:n,height:r,channels:i,depth:l}=t,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(l/8)*i,u=new Uint8Array(r*n*d);let f=0;for(let m=0;m<7;m++){const p=c[m],y=Math.ceil((n-p.x)/p.xStep),g=Math.ceil((r-p.y)/p.yStep);if(y<=0||g<=0)continue;const N=y*d,C=new Uint8Array(N);for(let v=0;v<g;v++){const R=e[f++],A=e.subarray(f,f+N);f+=N;const M=new Uint8Array(N);zB(R,A,M,C,N,d),C.set(M);for(let L=0;L<y;L++){const k=p.x+L*p.xStep,V=p.y+v*p.yStep;if(!(k>=n||V>=r))for(let G=0;G<d;G++)u[(V*n+k)*d+G]=M[L*d+G]}}}if(l===16){const m=new Uint16Array(u.buffer);if(JB)for(let p=0;p<m.length;p++)m[p]=eF(m[p]);return m}else return u}function eF(t){return(t&255)<<8|t>>8&255}const tF=new Uint16Array([255]),sF=new Uint8Array(tF.buffer),nF=sF[0]===255,rF=new Uint8Array(0);function KR(t){const{data:e,width:n,height:r,channels:i,depth:l}=t,c=Math.ceil(l/8)*i,d=Math.ceil(l/8*i*n),u=new Uint8Array(r*d);let f=rF,m=0,p,y;for(let g=0;g<r;g++){switch(p=e.subarray(m+1,m+1+d),y=u.subarray(g*d,(g+1)*d),e[m]){case 0:mI(p,y,d);break;case 1:gI(p,y,d,c);break;case 2:xI(p,y,f,d);break;case 3:pI(p,y,f,d,c);break;case 4:_I(p,y,f,d,c);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}f=y,m+=d+1}if(l===16){const g=new Uint16Array(u.buffer);if(nF)for(let N=0;N<g.length;N++)g[N]=iF(g[N]);return g}else return u}function iF(t){return(t&255)<<8|t>>8&255}const cp=Uint8Array.of(137,80,78,71,13,10,26,10);function QR(t){if(!aF(t.readBytes(cp.length)))throw new Error("wrong PNG signature")}function aF(t){if(t.length<cp.length)return!1;for(let e=0;e<cp.length;e++)if(t[e]!==cp[e])return!1;return!0}const lF="tEXt",oF=0,CI=new TextDecoder("latin1");function cF(t){if(uF(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const dF=/^[\u0000-\u00FF]*$/;function uF(t){if(!dF.test(t))throw new Error("invalid latin1 text")}function hF(t,e,n){const r=yI(e);t[r]=fF(e,n-r.length-1)}function yI(t){for(t.mark();t.readByte()!==oF;);const e=t.offset;t.reset();const n=CI.decode(t.readBytes(e-t.offset-1));return t.skip(1),cF(n),n}function fF(t,e){return CI.decode(t.readBytes(e))}const vl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},KC={UNKNOWN:-1,DEFLATE:0},GR={UNKNOWN:-1,ADAPTIVE:0},QC={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},zx={NONE:0,BACKGROUND:1,PREVIOUS:2},GC={SOURCE:0,OVER:1};class mF extends yN{constructor(n,r={}){super(n);ar(this,"_checkCrc");ar(this,"_inflator");ar(this,"_png");ar(this,"_apng");ar(this,"_end");ar(this,"_hasPalette");ar(this,"_palette");ar(this,"_hasTransparency");ar(this,"_transparency");ar(this,"_compressionMethod");ar(this,"_filterMethod");ar(this,"_interlaceMethod");ar(this,"_colorType");ar(this,"_isAnimated");ar(this,"_numberOfFrames");ar(this,"_numberOfPlays");ar(this,"_frames");ar(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new WR,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=KC.UNKNOWN,this._filterMethod=GR.UNKNOWN,this._interlaceMethod=QC.UNKNOWN,this._colorType=vl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(QR(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(QR(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case lF:hF(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?FR(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?FR(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=gF(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case vl.GREYSCALE:i=1;break;case vl.TRUECOLOUR:i=3;break;case vl.INDEXED_COLOUR:i=1;break;case vl.GREYSCALE_ALPHA:i=2;break;case vl.TRUECOLOUR_ALPHA:i=4;break;case vl.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==KC.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let l=0;l<r;l++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case vl.GREYSCALE:case vl.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case vl.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case vl.UNKNOWN:case vl.GREYSCALE_ALPHA:case vl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=yI(this),i=this.readUint8();if(i!==KC.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const l=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:YB(l)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=KR({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const l=this._apng.frames.at(n-1);this.disposeFrame(i,l,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case zx.NONE:break;case zx.BACKGROUND:for(let l=0;l<this._png.height;l++)for(let c=0;c<this._png.width;c++){const d=(l*n.width+c)*this._png.channels;for(let u=0;u<this._png.channels;u++)i.data[d+u]=0}break;case zx.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,l=(c,d)=>{const u=((c+r.yOffset)*this._png.width+r.xOffset+d)*this._png.channels,f=(c*r.width+d)*this._png.channels;return{index:u,frameIndex:f}};switch(r.blendOp){case GC.SOURCE:for(let c=0;c<r.height;c++)for(let d=0;d<r.width;d++){const{index:u,frameIndex:f}=l(c,d);for(let m=0;m<this._png.channels;m++)n.data[u+m]=r.data[f+m]}break;case GC.OVER:for(let c=0;c<r.height;c++)for(let d=0;d<r.width;d++){const{index:u,frameIndex:f}=l(c,d);for(let m=0;m<this._png.channels;m++){const p=r.data[f+this._png.channels-1]/i,y=m%(this._png.channels-1)===0?1:r.data[f+m],g=Math.floor(p*y+(1-p)*n.data[u+m]);n.data[u+m]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==GR.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===QC.NO_INTERLACE)this._png.data=KR({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===QC.ADAM7)this._png.data=ZB({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:zx.NONE,blendOp:GC.SOURCE,data:n}),this._inflator=new WR,this._writingDataChunks=!1}}function gF(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var YR;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(YR||(YR={}));function xF(t,e){return new mF(t,e).decode()}var xn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function YC(){xn.console&&typeof xn.console.log=="function"&&xn.console.log.apply(xn.console,arguments)}var jr={log:YC,warn:function(t){xn.console&&(typeof xn.console.warn=="function"?xn.console.warn.apply(xn.console,arguments):YC.call(null,arguments))},error:function(t){xn.console&&(typeof xn.console.error=="function"?xn.console.error.apply(xn.console,arguments):YC(t))}};function VC(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){qu(r.response,e,n)},r.onerror=function(){jr.error("could not download file")},r.send()}function VR(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function qx(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var qu=xn.saveAs||((typeof window>"u"?"undefined":xr(window))!=="object"||window!==xn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=xn.URL||xn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?VR(i.href)?VC(t,e,n):qx(i,i.target="_blank"):qx(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){qx(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(VR(t))VC(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){qx(r)})}else navigator.msSaveOrOpenBlob((function(i,l){return l===void 0?l={autoBom:!1}:xr(l)!=="object"&&(jr.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return VC(t,e,n);var i=t.type==="application/octet-stream",l=/constructor/i.test(xn.HTMLElement)||xn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l)&&(typeof FileReader>"u"?"undefined":xr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var m=d.result;m=c?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},d.readAsDataURL(t)}else{var u=xn.URL||xn.webkitURL,f=u.createObjectURL(t);r?r.location=f:location.href=f,r=null,setTimeout(function(){u.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function bI(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,l=n[r].process,c=i.exec(t);c&&(e=l(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),u=this.g.toString(16),f=this.b.toString(16);return d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),"#"+d+u+f}}var dp=xn.atob.bind(xn),$R=xn.btoa.bind(xn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $C(t,e){var n=t[0],r=t[1],i=t[2],l=t[3];n=ba(n,r,i,l,e[0],7,-680876936),l=ba(l,n,r,i,e[1],12,-389564586),i=ba(i,l,n,r,e[2],17,606105819),r=ba(r,i,l,n,e[3],22,-1044525330),n=ba(n,r,i,l,e[4],7,-176418897),l=ba(l,n,r,i,e[5],12,1200080426),i=ba(i,l,n,r,e[6],17,-1473231341),r=ba(r,i,l,n,e[7],22,-45705983),n=ba(n,r,i,l,e[8],7,1770035416),l=ba(l,n,r,i,e[9],12,-1958414417),i=ba(i,l,n,r,e[10],17,-42063),r=ba(r,i,l,n,e[11],22,-1990404162),n=ba(n,r,i,l,e[12],7,1804603682),l=ba(l,n,r,i,e[13],12,-40341101),i=ba(i,l,n,r,e[14],17,-1502002290),n=Na(n,r=ba(r,i,l,n,e[15],22,1236535329),i,l,e[1],5,-165796510),l=Na(l,n,r,i,e[6],9,-1069501632),i=Na(i,l,n,r,e[11],14,643717713),r=Na(r,i,l,n,e[0],20,-373897302),n=Na(n,r,i,l,e[5],5,-701558691),l=Na(l,n,r,i,e[10],9,38016083),i=Na(i,l,n,r,e[15],14,-660478335),r=Na(r,i,l,n,e[4],20,-405537848),n=Na(n,r,i,l,e[9],5,568446438),l=Na(l,n,r,i,e[14],9,-1019803690),i=Na(i,l,n,r,e[3],14,-187363961),r=Na(r,i,l,n,e[8],20,1163531501),n=Na(n,r,i,l,e[13],5,-1444681467),l=Na(l,n,r,i,e[2],9,-51403784),i=Na(i,l,n,r,e[7],14,1735328473),n=Sa(n,r=Na(r,i,l,n,e[12],20,-1926607734),i,l,e[5],4,-378558),l=Sa(l,n,r,i,e[8],11,-2022574463),i=Sa(i,l,n,r,e[11],16,1839030562),r=Sa(r,i,l,n,e[14],23,-35309556),n=Sa(n,r,i,l,e[1],4,-1530992060),l=Sa(l,n,r,i,e[4],11,1272893353),i=Sa(i,l,n,r,e[7],16,-155497632),r=Sa(r,i,l,n,e[10],23,-1094730640),n=Sa(n,r,i,l,e[13],4,681279174),l=Sa(l,n,r,i,e[0],11,-358537222),i=Sa(i,l,n,r,e[3],16,-722521979),r=Sa(r,i,l,n,e[6],23,76029189),n=Sa(n,r,i,l,e[9],4,-640364487),l=Sa(l,n,r,i,e[12],11,-421815835),i=Sa(i,l,n,r,e[15],16,530742520),n=va(n,r=Sa(r,i,l,n,e[2],23,-995338651),i,l,e[0],6,-198630844),l=va(l,n,r,i,e[7],10,1126891415),i=va(i,l,n,r,e[14],15,-1416354905),r=va(r,i,l,n,e[5],21,-57434055),n=va(n,r,i,l,e[12],6,1700485571),l=va(l,n,r,i,e[3],10,-1894986606),i=va(i,l,n,r,e[10],15,-1051523),r=va(r,i,l,n,e[1],21,-2054922799),n=va(n,r,i,l,e[8],6,1873313359),l=va(l,n,r,i,e[15],10,-30611744),i=va(i,l,n,r,e[6],15,-1560198380),r=va(r,i,l,n,e[13],21,1309151649),n=va(n,r,i,l,e[4],6,-145523070),l=va(l,n,r,i,e[11],10,-1120210379),i=va(i,l,n,r,e[2],15,718787259),r=va(r,i,l,n,e[9],21,-343485551),t[0]=mu(n,t[0]),t[1]=mu(r,t[1]),t[2]=mu(i,t[2]),t[3]=mu(l,t[3])}function R_(t,e,n,r,i,l){return e=mu(mu(e,t),mu(r,l)),mu(e<<i|e>>>32-i,n)}function ba(t,e,n,r,i,l,c){return R_(e&n|~e&r,t,e,i,l,c)}function Na(t,e,n,r,i,l,c){return R_(e&r|n&~r,t,e,i,l,c)}function Sa(t,e,n,r,i,l,c){return R_(e^n^r,t,e,i,l,c)}function va(t,e,n,r,i,l,c){return R_(n^(e|~r),t,e,i,l,c)}function NI(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)$C(r,pF(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for($C(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,$C(r,i),r}function pF(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var HR="0123456789abcdef".split("");function _F(t){for(var e="",n=0;n<4;n++)e+=HR[t>>8*n+4&15]+HR[t>>8*n&15];return e}function CF(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Jy(t){return NI(t).map(CF).join("")}var yF=(function(t){for(var e=0;e<t.length;e++)t[e]=_F(t[e]);return t.join("")})(NI("hello"))!="5d41402abc4b2a76b9719d911017c592";function mu(t,e){if(yF){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Zy(t,e){var n,r,i,l;if(t!==n){for(var c=(i=t,l=1+(256/t.length|0),new Array(l+1).join(i)),d=[],u=0;u<256;u++)d[u]=u;var f=0;for(u=0;u<256;u++){var m=d[u];f=(f+m+c.charCodeAt(u))%256,d[u]=d[f],d[f]=m}n=t,r=d}else d=r;var p=e.length,y=0,g=0,N="";for(u=0;u<p;u++)g=(g+(m=d[y=(y+1)%256]))%256,d[y]=d[g],d[g]=m,c=d[(d[y]+d[g])%256],N+=String.fromCharCode(e.charCodeAt(u)^c);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var zR={print:4,modify:8,copy:16,"annot-forms":32};function K0(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(d){if(zR.perm!==void 0)throw new Error("Invalid permission: "+d);i+=zR[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(e+this.padding).substr(0,32),c=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^i)),this.encryptionKey=Jy(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Zy(this.encryptionKey,this.padding)}function Q0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function qR(t){if(xr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var l=Math.random().toString(35);return e[n][l]=[r,!!i],l},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var l in e[n]){var c=e[n][l];try{c[0].apply(t,r)}catch(d){xn.console&&jr.error("jsPDF PubSub Error",d.message,d)}c[1]&&i.push(l)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function $p(t){if(!(this instanceof $p))return new $p(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function SI(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ju(t,e,n,r,i){if(!(this instanceof Ju))return new Ju(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,SI.call(this,r,i)}function V0(t,e,n,r,i){if(!(this instanceof V0))return new V0(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,SI.call(this,r,i)}function en(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],l=arguments[3],c=[],d=1,u=16,f="S",m=null;xr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,l=t.compress||t.compressPdf||l,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),d=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),f=t.defaultPathOperation||"S"),c=t.filters||(l===!0?["FlateEncode"]:c),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,y={},g={internal:{},__private__:{}};g.__private__.PubSub=qR;var N="1.3",C=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(B){N=B};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return v};var R=g.__private__.getPageFormat=function(B){return v[B]};i=i||"a4";var A="compat",M="advanced",L=A;function k(){this.saveGraphicsState(),Z(new de(Dt,0,0,-Dt,0,no()*Dt).toString()+" cm"),this.setFontSize(this.getFontSize()/Dt),f="n",L=M}function V(){this.restoreGraphicsState(),f="S",L=A}var G=g.__private__.combineFontStyleAndFontWeight=function(B,ye){if(B=="bold"&&ye=="normal"||B=="bold"&&ye==400||B=="normal"&&ye=="italic"||B=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(B=ye==400||ye==="normal"?B==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||B!=="normal"?(ye==700?"bold":ye)+""+B:"bold"),B};g.advancedAPI=function(B){var ye=L===A;return ye&&k.call(this),typeof B!="function"||(B(this),ye&&V.call(this)),this},g.compatAPI=function(B){var ye=L===M;return ye&&V.call(this),typeof B!="function"||(B(this),ye&&k.call(this)),this},g.isAdvancedAPI=function(){return L===M};var W,j=function(B){if(L!==M)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=g.roundToPrecision=g.__private__.roundToPrecision=function(B,ye){var Xe=e||ye;if(isNaN(B)||isNaN(Xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Xe).replace(/0+$/,"")};W=g.hpf=g.__private__.hpf=typeof u=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return S(B,u)}:u==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return S(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return S(B,16)};var P=g.f2=g.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return S(B,2)},F=g.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return S(B,3)},ee=g.scale=g.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return L===A?B*Dt:L===M?B:void 0},J=function(B){return ee((function(ye){return L===A?no()-ye:L===M?ye:void 0})(B))};g.__private__.setPrecision=g.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var $,Y="00000000000000000000000000000000",K=g.__private__.getFileId=function(){return Y},w=g.__private__.setFileId=function(B){return Y=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Ps=new K0(m.userPermissions,m.userPassword,m.ownerPassword,Y)),Y};g.setFileId=function(B){return w(B),this},g.getFileId=function(){return K()};var se=g.__private__.convertDateToPDFDate=function(B){var ye=B.getTimezoneOffset(),Xe=ye<0?"+":"-",_t=Math.floor(Math.abs(ye/60)),Ot=Math.abs(ye%60),is=[Xe,Q(_t),"'",Q(Ot),"'"].join("");return["D:",B.getFullYear(),Q(B.getMonth()+1),Q(B.getDate()),Q(B.getHours()),Q(B.getMinutes()),Q(B.getSeconds()),is].join("")},oe=g.__private__.convertPDFDateToDate=function(B){var ye=parseInt(B.substr(2,4),10),Xe=parseInt(B.substr(6,2),10)-1,_t=parseInt(B.substr(8,2),10),Ot=parseInt(B.substr(10,2),10),is=parseInt(B.substr(12,2),10),gs=parseInt(B.substr(14,2),10);return new Date(ye,Xe,_t,Ot,is,gs,0)},T=g.__private__.setCreationDate=function(B){var ye;if(B===void 0&&(B=new Date),B instanceof Date)ye=se(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=B}return $=ye},I=g.__private__.getCreationDate=function(B){var ye=$;return B==="jsDate"&&(ye=oe($)),ye};g.setCreationDate=function(B){return T(B),this},g.getCreationDate=function(B){return I(B)};var U,Q=g.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},H=g.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},q=0,ae=[],fe=[],ge=0,ce=[],Re=[],X=!1,me=fe;g.__private__.setCustomOutputDestination=function(B){X=!0,me=B};var he=function(B){X||(me=B)};g.__private__.resetCustomOutputDestination=function(){X=!1,me=fe};var Z=g.__private__.out=function(B){return B=B.toString(),ge+=B.length+1,me.push(B),me},ie=g.__private__.write=function(B){return Z(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},te=g.__private__.getArrayBuffer=function(B){for(var ye=B.length,Xe=new ArrayBuffer(ye),_t=new Uint8Array(Xe);ye--;)_t[ye]=B.charCodeAt(ye);return Xe},je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return je};var be=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(B){return be=L===M?B/Dt:B,this};var Te,re=g.__private__.getFontSize=g.getFontSize=function(){return L===A?be:be*Dt},pe=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(B){return pe=B,this},g.__private__.getR2L=g.getR2L=function(){return pe};var Se,st=g.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))Te=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');Te=B}else Te=parseInt(B,10)};g.__private__.getZoomMode=function(){return Te};var Nt,lt=g.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Se=B};g.__private__.getPageMode=function(){return Se};var At=g.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Nt=B};g.__private__.getLayoutMode=function(){return Nt},g.__private__.setDisplayMode=g.setDisplayMode=function(B,ye,Xe){return st(B),At(ye),lt(Xe),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(B){if(Object.keys(ot).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[B]},g.__private__.getDocumentProperties=function(){return ot},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(B){for(var ye in ot)ot.hasOwnProperty(ye)&&B[ye]&&(ot[ye]=B[ye]);return this},g.__private__.setDocumentProperty=function(B,ye){if(Object.keys(ot).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[B]=ye};var We,Dt,Et,Rt,$e,gt={},Fe={},rt=[],at={},It={},ht={},Je={},ve=null,Ge=0,_e=[],xe=new qR(g),Ue=t.hotfixes||[],Pe={},Ye={},mt=[],de=function B(ye,Xe,_t,Ot,is,gs){if(!(this instanceof B))return new B(ye,Xe,_t,Ot,is,gs);isNaN(ye)&&(ye=1),isNaN(Xe)&&(Xe=0),isNaN(_t)&&(_t=0),isNaN(Ot)&&(Ot=1),isNaN(is)&&(is=0),isNaN(gs)&&(gs=0),this._matrix=[ye,Xe,_t,Ot,is,gs]};Object.defineProperty(de.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(de.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(de.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(de.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(de.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(de.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(de.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(de.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(de.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(de.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(de.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(de.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(de.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(de.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(de.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(de.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),de.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(B)},de.prototype.multiply=function(B){var ye=B.sx*this.sx+B.shy*this.shx,Xe=B.sx*this.shy+B.shy*this.sy,_t=B.shx*this.sx+B.sy*this.shx,Ot=B.shx*this.shy+B.sy*this.sy,is=B.tx*this.sx+B.ty*this.shx+this.tx,gs=B.tx*this.shy+B.ty*this.sy+this.ty;return new de(ye,Xe,_t,Ot,is,gs)},de.prototype.decompose=function(){var B=this.sx,ye=this.shy,Xe=this.shx,_t=this.sy,Ot=this.tx,is=this.ty,gs=Math.sqrt(B*B+ye*ye),Ys=(B/=gs)*Xe+(ye/=gs)*_t;Xe-=B*Ys,_t-=ye*Ys;var Xs=Math.sqrt(Xe*Xe+_t*_t);return Ys/=Xs,B*(_t/=Xs)<ye*(Xe/=Xs)&&(B=-B,ye=-ye,Ys=-Ys,gs=-gs),{scale:new de(gs,0,0,Xs,0,0),translate:new de(1,0,0,1,Ot,is),rotate:new de(B,ye,-ye,B,0,0),skew:new de(1,0,Ys,1,0,0)}},de.prototype.toString=function(B){return this.join(" ")},de.prototype.inversed=function(){var B=this.sx,ye=this.shy,Xe=this.shx,_t=this.sy,Ot=this.tx,is=this.ty,gs=1/(B*_t-ye*Xe),Ys=_t*gs,Xs=-ye*gs,un=-Xe*gs,_n=B*gs;return new de(Ys,Xs,un,_n,-Ys*Ot-un*is,-Xs*Ot-_n*is)},de.prototype.applyToPoint=function(B){var ye=B.x*this.sx+B.y*this.shx+this.tx,Xe=B.x*this.shy+B.y*this.sy+this.ty;return new Qn(ye,Xe)},de.prototype.applyToRectangle=function(B){var ye=this.applyToPoint(B),Xe=this.applyToPoint(new Qn(B.x+B.w,B.y+B.h));return new Xr(ye.x,ye.y,Xe.x-ye.x,Xe.y-ye.y)},de.prototype.clone=function(){var B=this.sx,ye=this.shy,Xe=this.shx,_t=this.sy,Ot=this.tx,is=this.ty;return new de(B,ye,Xe,_t,Ot,is)},g.Matrix=de;var tt=g.matrixMult=function(B,ye){return ye.multiply(B)},De=new de(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=De;var it=function(B,ye){if(!It[B]){var Xe=(ye instanceof Ju?"Sh":"P")+(Object.keys(at).length+1).toString(10);ye.id=Xe,It[B]=Xe,at[Xe]=ye,xe.publish("addPattern",ye)}};g.ShadingPattern=Ju,g.TilingPattern=V0,g.addShadingPattern=function(B,ye){return j("addShadingPattern()"),it(B,ye),this},g.beginTilingPattern=function(B){j("beginTilingPattern()"),so(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},g.endTilingPattern=function(B,ye){j("endTilingPattern()"),ye.stream=Re[U].join(`
`),it(B,ye),xe.publish("endTilingPattern",ye),mt.pop().restore()};var St,Lt=g.__private__.newObject=function(){var B=Ve();return kt(B,!0),B},Ve=g.__private__.newObjectDeferred=function(){return q++,ae[q]=function(){return ge},q},kt=function(B,ye){return ye=typeof ye=="boolean"&&ye,ae[B]=ge,ye&&Z(B+" 0 obj"),B},Oe=g.__private__.newAdditionalObject=function(){var B={objId:Ve(),content:""};return ce.push(B),B},Xt=Ve(),rs=Ve(),ds=g.__private__.decodeColorString=function(B){var ye=B.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length!==5||ye[4]!=="k"&&ye[4]!=="K"||(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Xe=parseFloat(ye[0]);ye=[Xe,Xe,Xe,"r"]}for(var _t="#",Ot=0;Ot<3;Ot++)_t+=("0"+Math.floor(255*parseFloat(ye[Ot])).toString(16)).slice(-2);return _t},Ss=g.__private__.encodeColorString=function(B){var ye;typeof B=="string"&&(B={ch1:B});var Xe=B.ch1,_t=B.ch2,Ot=B.ch3,is=B.ch4,gs=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Xe=="string"&&Xe.charAt(0)!=="#"){var Ys=new bI(Xe);if(Ys.ok)Xe=Ys.toHex();else if(!/^\d*\.?\d*$/.test(Xe))throw new Error('Invalid color "'+Xe+'" passed to jsPDF.encodeColorString.')}if(typeof Xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Xe)&&(Xe="#"+Xe[1]+Xe[1]+Xe[2]+Xe[2]+Xe[3]+Xe[3]),typeof Xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Xe)){var Xs=parseInt(Xe.substr(1),16);Xe=Xs>>16&255,_t=Xs>>8&255,Ot=255&Xs}if(_t===void 0||is===void 0&&Xe===_t&&_t===Ot)ye=typeof Xe=="string"?Xe+" "+gs[0]:B.precision===2?P(Xe/255)+" "+gs[0]:F(Xe/255)+" "+gs[0];else if(is===void 0||xr(is)==="object"){if(is&&!isNaN(is.a)&&is.a===0)return["1.","1.","1.",gs[1]].join(" ");ye=typeof Xe=="string"?[Xe,_t,Ot,gs[1]].join(" "):B.precision===2?[P(Xe/255),P(_t/255),P(Ot/255),gs[1]].join(" "):[F(Xe/255),F(_t/255),F(Ot/255),gs[1]].join(" ")}else ye=typeof Xe=="string"?[Xe,_t,Ot,is,gs[2]].join(" "):B.precision===2?[P(Xe),P(_t),P(Ot),P(is),gs[2]].join(" "):[F(Xe),F(_t),F(Ot),F(is),gs[2]].join(" ");return ye},Ns=g.__private__.getFilters=function(){return c},ke=g.__private__.putStream=function(B){var ye=(B=B||{}).data||"",Xe=B.filters||Ns(),_t=B.alreadyAppliedFilters||[],Ot=B.addLength1||!1,is=ye.length,gs=B.objectId,Ys=function(mi){return mi};if(m!==null&&gs===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Ys=Ps.encryptor(gs,0));var Xs={};Xe===!0&&(Xe=["FlateEncode"]);var un=B.additionalKeyValues||[],_n=(Xs=en.API.processDataByFilters!==void 0?en.API.processDataByFilters(ye,Xe):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(_t)?_t.join(" "):_t.toString());if(Xs.data.length!==0&&(un.push({key:"Length",value:Xs.data.length}),Ot===!0&&un.push({key:"Length1",value:is})),_n.length!=0)if(_n.split("/").length-1==1)un.push({key:"Filter",value:_n});else{un.push({key:"Filter",value:"["+_n+"]"});for(var Wn=0;Wn<un.length;Wn+=1)if(un[Wn].key==="DecodeParms"){for(var wr=[],Jr=0;Jr<Xs.reverseChain.split("/").length-1;Jr+=1)wr.push("null");wr.push(un[Wn].value),un[Wn].value="["+wr.join(" ")+"]"}}Z("<<");for(var _r=0;_r<un.length;_r++)Z("/"+un[_r].key+" "+un[_r].value);Z(">>"),Xs.data.length!==0&&(Z("stream"),Z(Ys(Xs.data)),Z("endstream"))},dt=g.__private__.putPage=function(B){var ye=B.number,Xe=B.data,_t=B.objId,Ot=B.contentsObjId;kt(_t,!0),Z("<</Type /Page"),Z("/Parent "+B.rootDictionaryObjId+" 0 R"),Z("/Resources "+B.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(W(B.mediaBox.bottomLeftX))+" "+parseFloat(W(B.mediaBox.bottomLeftY))+" "+W(B.mediaBox.topRightX)+" "+W(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&Z("/CropBox ["+W(B.cropBox.bottomLeftX)+" "+W(B.cropBox.bottomLeftY)+" "+W(B.cropBox.topRightX)+" "+W(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&Z("/BleedBox ["+W(B.bleedBox.bottomLeftX)+" "+W(B.bleedBox.bottomLeftY)+" "+W(B.bleedBox.topRightX)+" "+W(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&Z("/TrimBox ["+W(B.trimBox.bottomLeftX)+" "+W(B.trimBox.bottomLeftY)+" "+W(B.trimBox.topRightX)+" "+W(B.trimBox.topRightY)+"]"),B.artBox!==null&&Z("/ArtBox ["+W(B.artBox.bottomLeftX)+" "+W(B.artBox.bottomLeftY)+" "+W(B.artBox.topRightX)+" "+W(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&Z("/UserUnit "+B.userUnit),xe.publish("putPage",{objId:_t,pageContext:_e[ye],pageNumber:ye,page:Xe}),Z("/Contents "+Ot+" 0 R"),Z(">>"),Z("endobj");var is=Xe.join(`
`);return L===M&&(is+=`
Q`),kt(Ot,!0),ke({data:is,filters:Ns(),objectId:Ot}),Z("endobj"),_t},et=g.__private__.putPages=function(){var B,ye,Xe=[];for(B=1;B<=Ge;B++)_e[B].objId=Ve(),_e[B].contentsObjId=Ve();for(B=1;B<=Ge;B++)Xe.push(dt({number:B,data:Re[B],objId:_e[B].objId,contentsObjId:_e[B].contentsObjId,mediaBox:_e[B].mediaBox,cropBox:_e[B].cropBox,bleedBox:_e[B].bleedBox,trimBox:_e[B].trimBox,artBox:_e[B].artBox,userUnit:_e[B].userUnit,rootDictionaryObjId:Xt,resourceDictionaryObjId:rs}));kt(Xt,!0),Z("<</Type /Pages");var _t="/Kids [";for(ye=0;ye<Ge;ye++)_t+=Xe[ye]+" 0 R ";Z(_t+"]"),Z("/Count "+Ge),Z(">>"),Z("endobj"),xe.publish("postPutPages")},Qt=function(B){xe.publish("putFont",{font:B,out:Z,newObject:Lt,putStream:ke}),B.isAlreadyPutted!==!0&&(B.objectNumber=Lt(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+Q0(B.postScriptName)),Z("/Subtype /Type1"),typeof B.encoding=="string"&&Z("/Encoding /"+B.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},ut=function(B){B.objectNumber=Lt();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[W(B.x),W(B.y),W(B.x+B.width),W(B.y+B.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Xe=B.pages[1].join(`
`);ke({data:Xe,additionalKeyValues:ye,objectId:B.objectNumber}),Z("endobj")},qt=function(B,ye){ye||(ye=21);var Xe=Lt(),_t=(function(gs,Ys){var Xs,un=[],_n=1/(Ys-1);for(Xs=0;Xs<1;Xs+=_n)un.push(Xs);if(un.push(1),gs[0].offset!=0){var Wn={offset:0,color:gs[0].color};gs.unshift(Wn)}if(gs[gs.length-1].offset!=1){var wr={offset:1,color:gs[gs.length-1].color};gs.push(wr)}for(var Jr="",_r=0,mi=0;mi<un.length;mi++){for(Xs=un[mi];Xs>gs[_r+1].offset;)_r++;var ri=gs[_r].offset,Mi=(Xs-ri)/(gs[_r+1].offset-ri),ro=gs[_r].color,gl=gs[_r+1].color;Jr+=H(Math.round((1-Mi)*ro[0]+Mi*gl[0]).toString(16))+H(Math.round((1-Mi)*ro[1]+Mi*gl[1]).toString(16))+H(Math.round((1-Mi)*ro[2]+Mi*gl[2]).toString(16))}return Jr.trim()})(B.colors,ye),Ot=[];Ot.push({key:"FunctionType",value:"0"}),Ot.push({key:"Domain",value:"[0.0 1.0]"}),Ot.push({key:"Size",value:"["+ye+"]"}),Ot.push({key:"BitsPerSample",value:"8"}),Ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke({data:_t,additionalKeyValues:Ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Xe}),Z("endobj"),B.objectNumber=Lt(),Z("<< /ShadingType "+B.type),Z("/ColorSpace /DeviceRGB");var is="/Coords ["+W(parseFloat(B.coords[0]))+" "+W(parseFloat(B.coords[1]))+" ";B.type===2?is+=W(parseFloat(B.coords[2]))+" "+W(parseFloat(B.coords[3])):is+=W(parseFloat(B.coords[2]))+" "+W(parseFloat(B.coords[3]))+" "+W(parseFloat(B.coords[4]))+" "+W(parseFloat(B.coords[5])),Z(is+="]"),B.matrix&&Z("/Matrix ["+B.matrix.toString()+"]"),Z("/Function "+Xe+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},jt=function(B,ye){var Xe=Ve(),_t=Lt();ye.push({resourcesOid:Xe,objectOid:_t}),B.objectNumber=_t;var Ot=[];Ot.push({key:"Type",value:"/Pattern"}),Ot.push({key:"PatternType",value:"1"}),Ot.push({key:"PaintType",value:"1"}),Ot.push({key:"TilingType",value:"1"}),Ot.push({key:"BBox",value:"["+B.boundingBox.map(W).join(" ")+"]"}),Ot.push({key:"XStep",value:W(B.xStep)}),Ot.push({key:"YStep",value:W(B.yStep)}),Ot.push({key:"Resources",value:Xe+" 0 R"}),B.matrix&&Ot.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),ke({data:B.stream,additionalKeyValues:Ot,objectId:B.objectNumber}),Z("endobj")},ue=function(B){for(var ye in B.objectNumber=Lt(),Z("<<"),B)switch(ye){case"opacity":Z("/ca "+P(B[ye]));break;case"stroke-opacity":Z("/CA "+P(B[ye]))}Z(">>"),Z("endobj")},Ce=function(B){kt(B.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ye in Z("/Font <<"),gt)gt.hasOwnProperty(ye)&&(p===!1||p===!0&&y.hasOwnProperty(ye))&&Z("/"+ye+" "+gt[ye].objectNumber+" 0 R");Z(">>")})(),(function(){if(Object.keys(at).length>0){for(var ye in Z("/Shading <<"),at)at.hasOwnProperty(ye)&&at[ye]instanceof Ju&&at[ye].objectNumber>=0&&Z("/"+ye+" "+at[ye].objectNumber+" 0 R");xe.publish("putShadingPatternDict"),Z(">>")}})(),(function(ye){if(Object.keys(at).length>0){for(var Xe in Z("/Pattern <<"),at)at.hasOwnProperty(Xe)&&at[Xe]instanceof g.TilingPattern&&at[Xe].objectNumber>=0&&at[Xe].objectNumber<ye&&Z("/"+Xe+" "+at[Xe].objectNumber+" 0 R");xe.publish("putTilingPatternDict"),Z(">>")}})(B.objectOid),(function(){if(Object.keys(ht).length>0){var ye;for(ye in Z("/ExtGState <<"),ht)ht.hasOwnProperty(ye)&&ht[ye].objectNumber>=0&&Z("/"+ye+" "+ht[ye].objectNumber+" 0 R");xe.publish("putGStateDict"),Z(">>")}})(),(function(){for(var ye in Z("/XObject <<"),Pe)Pe.hasOwnProperty(ye)&&Pe[ye].objectNumber>=0&&Z("/"+ye+" "+Pe[ye].objectNumber+" 0 R");xe.publish("putXobjectDict"),Z(">>")})(),Z(">>"),Z("endobj")},Le=function(B){Fe[B.fontName]=Fe[B.fontName]||{},Fe[B.fontName][B.fontStyle]=B.id},Ie=function(B,ye,Xe,_t,Ot){var is={id:"F"+(Object.keys(gt).length+1).toString(10),postScriptName:B,fontName:ye,fontStyle:Xe,encoding:_t,isStandardFont:Ot||!1,metadata:{}};return xe.publish("addFont",{font:is,instance:this}),gt[is.id]=is,Le(is),is.id},Ze=g.__private__.pdfEscape=g.pdfEscape=function(B,ye){return(function(Xe,_t){var Ot,is,gs,Ys,Xs,un,_n,Wn,wr;if(gs=(_t=_t||{}).sourceEncoding||"Unicode",Xs=_t.outputEncoding,(_t.autoencode||Xs)&&gt[We].metadata&&gt[We].metadata[gs]&&gt[We].metadata[gs].encoding&&(Ys=gt[We].metadata[gs].encoding,!Xs&&gt[We].encoding&&(Xs=gt[We].encoding),!Xs&&Ys.codePages&&(Xs=Ys.codePages[0]),typeof Xs=="string"&&(Xs=Ys[Xs]),Xs)){for(_n=!1,un=[],Ot=0,is=Xe.length;Ot<is;Ot++)(Wn=Xs[Xe.charCodeAt(Ot)])?un.push(String.fromCharCode(Wn)):un.push(Xe[Ot]),un[Ot].charCodeAt(0)>>8&&(_n=!0);Xe=un.join("")}for(Ot=Xe.length;_n===void 0&&Ot!==0;)Xe.charCodeAt(Ot-1)>>8&&(_n=!0),Ot--;if(!_n)return Xe;for(un=_t.noBOM?[]:[254,255],Ot=0,is=Xe.length;Ot<is;Ot++){if((wr=(Wn=Xe.charCodeAt(Ot))>>8)>>8)throw new Error("Character at position "+Ot+" of string '"+Xe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");un.push(wr),un.push(Wn-(wr<<8))}return String.fromCharCode.apply(void 0,un)})(B,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ee=g.__private__.beginPage=function(B){Re[++Ge]=[],_e[Ge]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Ct(Ge),he(Re[U])},pt=function(B,ye){var Xe,_t,Ot;switch(n=ye||n,typeof B=="string"&&(Xe=R(B.toLowerCase()),Array.isArray(Xe)&&(_t=Xe[0],Ot=Xe[1])),Array.isArray(B)&&(_t=B[0]*Dt,Ot=B[1]*Dt),isNaN(_t)&&(_t=i[0],Ot=i[1]),(_t>14400||Ot>14400)&&(jr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),_t=Math.min(14400,_t),Ot=Math.min(14400,Ot)),i=[_t,Ot],n.substr(0,1)){case"l":Ot>_t&&(i=[Ot,_t]);break;case"p":_t>Ot&&(i=[Ot,_t])}Ee(i),ps(Qs),Z(Fr),Fa!==0&&Z(Fa+" J"),Rs!==0&&Z(Rs+" j"),xe.publish("addPage",{pageNumber:Ge})},Ke=function(B){B>0&&B<=Ge&&(Re.splice(B,1),_e.splice(B,1),Ge--,U>Ge&&(U=Ge),this.setPage(U))},Ct=function(B){B>0&&B<=Ge&&(U=B)},bt=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Re.length-1},He=function(B,ye,Xe){var _t,Ot=void 0;return Xe=Xe||{},B=B!==void 0?B:gt[We].fontName,ye=ye!==void 0?ye:gt[We].fontStyle,_t=B.toLowerCase(),Fe[_t]!==void 0&&Fe[_t][ye]!==void 0?Ot=Fe[_t][ye]:Fe[B]!==void 0&&Fe[B][ye]!==void 0?Ot=Fe[B][ye]:Xe.disableWarning===!1&&jr.warn("Unable to look up font label for font '"+B+"', '"+ye+"'. Refer to getFontList() for available fonts."),Ot||Xe.noFallback||(Ot=Fe.times[ye])==null&&(Ot=Fe.times.normal),Ot},ct=g.__private__.putInfo=function(){var B=Lt(),ye=function(_t){return _t};for(var Xe in m!==null&&(ye=Ps.encryptor(B,0)),Z("<<"),Z("/Producer ("+Ze(ye("jsPDF "+en.version))+")"),ot)ot.hasOwnProperty(Xe)&&ot[Xe]&&Z("/"+Xe.substr(0,1).toUpperCase()+Xe.substr(1)+" ("+Ze(ye(ot[Xe]))+")");Z("/CreationDate ("+Ze(ye($))+")"),Z(">>"),Z("endobj")},wt=g.__private__.putCatalog=function(B){var ye=(B=B||{}).rootDictionaryObjId||Xt;switch(Lt(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+ye+" 0 R"),Te||(Te="fullwidth"),Te){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Xe=""+Te;Xe.substr(Xe.length-1)==="%"&&(Te=parseInt(Te)/100),typeof Te=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+P(Te)+"]")}switch(Nt||(Nt="continuous"),Nt){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}Se&&Z("/PageMode /"+Se),xe.publish("putCatalog"),Z(">>"),Z("endobj")},Bt=g.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(q+1)),Z("/Root "+q+" 0 R"),Z("/Info "+(q-1)+" 0 R"),m!==null&&Z("/Encrypt "+Ps.oid+" 0 R"),Z("/ID [ <"+Y+"> <"+Y+"> ]"),Z(">>")},Vt=g.__private__.putHeader=function(){Z("%PDF-"+N),Z("%")},Jt=g.__private__.putXRef=function(){var B="0000000000";Z("xref"),Z("0 "+(q+1)),Z("0000000000 65535 f ");for(var ye=1;ye<=q;ye++)typeof ae[ye]=="function"?Z((B+ae[ye]()).slice(-10)+" 00000 n "):ae[ye]!==void 0?Z((B+ae[ye]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},ss=g.__private__.buildDocument=function(){var B;q=0,ge=0,fe=[],ae=[],ce=[],Xt=Ve(),rs=Ve(),he(fe),xe.publish("buildDocument"),Vt(),et(),(function(){xe.publish("putAdditionalObjects");for(var Xe=0;Xe<ce.length;Xe++){var _t=ce[Xe];kt(_t.objId,!0),Z(_t.content),Z("endobj")}xe.publish("postPutAdditionalObjects")})(),B=[],(function(){for(var Xe in gt)gt.hasOwnProperty(Xe)&&(p===!1||p===!0&&y.hasOwnProperty(Xe))&&Qt(gt[Xe])})(),(function(){var Xe;for(Xe in ht)ht.hasOwnProperty(Xe)&&ue(ht[Xe])})(),(function(){for(var Xe in Pe)Pe.hasOwnProperty(Xe)&&ut(Pe[Xe])})(),(function(Xe){var _t;for(_t in at)at.hasOwnProperty(_t)&&(at[_t]instanceof Ju?qt(at[_t]):at[_t]instanceof V0&&jt(at[_t],Xe))})(B),xe.publish("putResources"),B.forEach(Ce),Ce({resourcesOid:rs,objectOid:Number.MAX_SAFE_INTEGER}),xe.publish("postPutResources"),m!==null&&(Ps.oid=Lt(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Ps.v),Z("/R "+Ps.r),Z("/U <"+Ps.toHexString(Ps.U)+">"),Z("/O <"+Ps.toHexString(Ps.O)+">"),Z("/P "+Ps.P),Z(">>"),Z("endobj")),ct(),wt();var ye=ge;return Jt(),Bt(),Z("startxref"),Z(""+ye),Z("%%EOF"),he(Re[U]),fe.join(`
`)},Wt=g.__private__.getBlob=function(B){return new Blob([te(B)],{type:"application/pdf"})},Es=g.output=g.__private__.output=(St=function(B,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",B){case void 0:return ss();case"save":g.save(ye.filename);break;case"arraybuffer":return te(ss());case"blob":return Wt(ss());case"bloburi":case"bloburl":if(xn.URL!==void 0&&typeof xn.URL.createObjectURL=="function")return xn.URL&&xn.URL.createObjectURL(Wt(ss()))||void 0;jr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Xe="",_t=ss();try{Xe=$R(_t)}catch{Xe=$R(unescape(encodeURIComponent(_t)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xn)==="[object Window]"){var Ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",is=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(Ot=ye.pdfObjectUrl,is="");var gs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ot+'"'+is+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",Ys=xn.open();return Ys!==null&&Ys.document.write(gs),Ys}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xn)==="[object Window]"){var Xs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',un=xn.open();if(un!==null){un.document.write(Xs);var _n=this;un.document.documentElement.querySelector("#pdfViewer").onload=function(){un.document.title=ye.filename,un.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_n.output("bloburl"))}}return un}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',wr=xn.open();if(wr!==null&&(wr.document.write(Wn),wr.document.title=ye.filename),wr||typeof safari>"u")return wr;break;case"datauri":case"dataurl":return xn.document.location.href=this.output("datauristring",ye);default:return null}},St.foo=function(){try{return St.apply(this,arguments)}catch(Xe){var B=Xe.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var ye="Error in function "+B.split(`
`)[0].split("<")[0]+": "+Xe.message;if(!xn.console)throw new Error(ye);xn.console.error(ye,Xe),xn.alert&&alert(ye)}},St.foo.bar=St,St.foo),ys=function(B){return Array.isArray(Ue)===!0&&Ue.indexOf(B)>-1};switch(r){case"pt":Dt=1;break;case"mm":Dt=72/25.4;break;case"cm":Dt=72/2.54;break;case"in":Dt=72;break;case"px":Dt=ys("px_scaling")==1?.75:96/72;break;case"pc":case"em":Dt=12;break;case"ex":Dt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Dt=r}var Ps=null;T(),w();var xs=g.__private__.getPageInfo=g.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_e[B].objId,pageNumber:B,pageContext:_e[B]}},vs=g.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in _e)if(_e[ye].objId===B)break;return xs(ye)},Ms=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:_e[U].objId,pageNumber:U,pageContext:_e[U]}};g.addPage=function(){return pt.apply(this,arguments),this},g.setPage=function(){return Ct.apply(this,arguments),he.call(this,Re[U]),this},g.insertPage=function(B){return this.addPage(),this.movePage(U,B),this},g.movePage=function(B,ye){var Xe,_t;if(B>ye){Xe=Re[B],_t=_e[B];for(var Ot=B;Ot>ye;Ot--)Re[Ot]=Re[Ot-1],_e[Ot]=_e[Ot-1];Re[ye]=Xe,_e[ye]=_t,this.setPage(ye)}else if(B<ye){Xe=Re[B],_t=_e[B];for(var is=B;is<ye;is++)Re[is]=Re[is+1],_e[is]=_e[is+1];Re[ye]=Xe,_e[ye]=_t,this.setPage(ye)}return this},g.deletePage=function(){return Ke.apply(this,arguments),this},g.__private__.text=g.text=function(B,ye,Xe,_t,Ot){var is,gs,Ys,Xs,un,_n,Wn,wr,Jr,_r=(_t=_t||{}).scope||this;if(typeof B=="number"&&typeof ye=="number"&&(typeof Xe=="string"||Array.isArray(Xe))){var mi=Xe;Xe=ye,ye=B,B=mi}if(arguments[3]instanceof de==0?(Ys=arguments[4],Xs=arguments[5],xr(Wn=arguments[3])==="object"&&Wn!==null||(typeof Ys=="string"&&(Xs=Ys,Ys=null),typeof Wn=="string"&&(Xs=Wn,Wn=null),typeof Wn=="number"&&(Ys=Wn,Wn=null),_t={flags:Wn,angle:Ys,align:Xs})):(j("The transform parameter of text() with a Matrix value"),Jr=Ot),isNaN(ye)||isNaN(Xe)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return _r;var ri,Mi="",ro=typeof _t.lineHeightFactor=="number"?_t.lineHeightFactor:Us,gl=_r.internal.scaleFactor;function io(zn){return zn=zn.split("	").join(Array(_t.TabLen||9).join(" ")),Ze(zn,Wn)}function Ru(zn){for(var Bn,Cr=zn.concat(),ei=[],Ll=Cr.length;Ll--;)typeof(Bn=Cr.shift())=="string"?ei.push(Bn):Array.isArray(zn)&&(Bn.length===1||Bn[1]===void 0&&Bn[2]===void 0)?ei.push(Bn[0]):ei.push([Bn[0],Bn[1],Bn[2]]);return ei}function ud(zn,Bn){var Cr;if(typeof zn=="string")Cr=Bn(zn)[0];else if(Array.isArray(zn)){for(var ei,Ll,Cl=zn.concat(),Cc=[],ju=Cl.length;ju--;)typeof(ei=Cl.shift())=="string"?Cc.push(Bn(ei)[0]):Array.isArray(ei)&&typeof ei[0]=="string"&&(Ll=Bn(ei[0],ei[1],ei[2]),Cc.push([Ll[0],Ll[1],Ll[2]]));Cr=Cc}return Cr}var Rl=!1,xl=!0;if(typeof B=="string")Rl=!0;else if(Array.isArray(B)){var pc=B.concat();gs=[];for(var ao,vi=pc.length;vi--;)(typeof(ao=pc.shift())!="string"||Array.isArray(ao)&&typeof ao[0]!="string")&&(xl=!1);Rl=xl}if(Rl===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var Ao=be/_r.internal.scaleFactor,ko=Ao*(ro-1);switch(_t.baseline){case"bottom":Xe-=ko;break;case"top":Xe+=Ao-ko;break;case"hanging":Xe+=Ao-2*ko;break;case"middle":Xe+=Ao/2-ko}if((_n=_t.maxWidth||0)>0&&(typeof B=="string"?B=_r.splitTextToSize(B,_n):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(zn,Bn){return zn.concat(_r.splitTextToSize(Bn,_n))},[]))),is={text:B,x:ye,y:Xe,options:_t,mutex:{pdfEscape:Ze,activeFontKey:We,fonts:gt,activeFontSize:be}},xe.publish("preProcessText",is),B=is.text,Ys=(_t=is.options).angle,Jr instanceof de==0&&Ys&&typeof Ys=="number"){Ys*=Math.PI/180,_t.rotationDirection===0&&(Ys=-Ys),L===M&&(Ys=-Ys);var hd=Math.cos(Ys),Tl=Math.sin(Ys);Jr=new de(hd,Tl,-Tl,hd,0,0)}else Ys&&Ys instanceof de&&(Jr=Ys);L!==M||Jr||(Jr=De),(un=_t.charSpace||Dr)!==void 0&&(Mi+=W(ee(un))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(wr=_t.horizontalScale)!==void 0&&(Mi+=W(100*wr)+` Tz
`),_t.lang;var ca=-1,lo=_t.renderingMode!==void 0?_t.renderingMode:_t.stroke,fd=_r.internal.getCurrentPageInfo().pageContext;switch(lo){case 0:case!1:case"fill":ca=0;break;case 1:case!0:case"stroke":ca=1;break;case 2:case"fillThenStroke":ca=2;break;case 3:case"invisible":ca=3;break;case 4:case"fillAndAddForClipping":ca=4;break;case 5:case"strokeAndAddPathForClipping":ca=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ca=6;break;case 7:case"addToPathForClipping":ca=7}var Tu=fd.usedRenderingMode!==void 0?fd.usedRenderingMode:-1;ca!==-1?Mi+=ca+` Tr
`:Tu!==-1&&(Mi+=`0 Tr
`),ca!==-1&&(fd.usedRenderingMode=ca),Xs=_t.align||"left";var Ea,pl=be*ro,oo=_r.internal.pageSize.getWidth(),Eu=gt[We];un=_t.charSpace||Dr,_n=_t.maxWidth||0,Wn=Object.assign({autoencode:!0,noBOM:!0},_t.flags);var _l=[],Uo=function(zn){return _r.getStringUnitWidth(zn,{font:Eu,charSpace:un,fontSize:be,doKerning:!1})*be/gl};if(Object.prototype.toString.call(B)==="[object Array]"){var _a;gs=Ru(B),Xs!=="left"&&(Ea=gs.map(Uo));var da,El=0;if(Xs==="right"){ye-=Ea[0],B=[],vi=gs.length;for(var jl=0;jl<vi;jl++)jl===0?(da=vr(ye),_a=cn(Xe)):(da=ee(El-Ea[jl]),_a=-pl),B.push([gs[jl],da,_a]),El=Ea[jl]}else if(Xs==="center"){ye-=Ea[0]/2,B=[],vi=gs.length;for(var co=0;co<vi;co++)co===0?(da=vr(ye),_a=cn(Xe)):(da=ee((El-Ea[co])/2),_a=-pl),B.push([gs[co],da,_a]),El=Ea[co]}else if(Xs==="left"){B=[],vi=gs.length;for(var md=0;md<vi;md++)B.push(gs[md])}else if(Xs==="justify"&&Eu.encoding==="Identity-H"){B=[],vi=gs.length,_n=_n!==0?_n:oo;for(var gd=0,Zr=0;Zr<vi;Zr++)if(_a=Zr===0?cn(Xe):-pl,da=Zr===0?vr(ye):gd,Zr<vi-1){var Qh=ee((_n-Ea[Zr])/(gs[Zr].split(" ").length-1)),Il=gs[Zr].split(" ");B.push([Il[0]+" ",da,_a]),gd=0;for(var Ol=1;Ol<Il.length;Ol++){var Li=(Uo(Il[Ol-1]+" "+Il[Ol])-Uo(Il[Ol]))*gl+Qh;Ol==Il.length-1?B.push([Il[Ol],Li,0]):B.push([Il[Ol]+" ",Li,0]),gd-=Li}}else B.push([gs[Zr],da,_a]);B.push(["",gd,0])}else{if(Xs!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],vi=gs.length,_n=_n!==0?_n:oo,Zr=0;Zr<vi;Zr++){_a=Zr===0?cn(Xe):-pl,da=Zr===0?vr(ye):0;var uo=gs[Zr].split(" ").length-1,xd=uo>0?(_n-Ea[Zr])/uo:0;Zr<vi-1?_l.push(W(ee(xd))):_l.push(0),B.push([gs[Zr],da,_a])}}}(typeof _t.R2L=="boolean"?_t.R2L:pe)===!0&&(B=ud(B,function(zn,Bn,Cr){return[zn.split("").reverse().join(""),Bn,Cr]})),is={text:B,x:ye,y:Xe,options:_t,mutex:{pdfEscape:Ze,activeFontKey:We,fonts:gt,activeFontSize:be}},xe.publish("postProcessText",is),B=is.text,ri=is.mutex.isHex||!1;var pd=gt[We].encoding;pd!=="WinAnsiEncoding"&&pd!=="StandardEncoding"||(B=ud(B,function(zn,Bn,Cr){return[io(zn),Bn,Cr]})),gs=Ru(B),B=[];for(var ho,fo,Ml,_c=Array.isArray(gs[0])?1:0,ja="",mo=function(zn,Bn,Cr){var ei="";return Cr instanceof de?(Cr=typeof _t.angle=="number"?tt(Cr,new de(1,0,0,1,zn,Bn)):tt(new de(1,0,0,1,zn,Bn),Cr),L===M&&(Cr=tt(new de(1,0,0,-1,0,0),Cr)),ei=Cr.join(" ")+` Tm
`):ei=W(zn)+" "+W(Bn)+` Td
`,ei},qi=0;qi<gs.length;qi++){switch(ja="",_c){case 1:Ml=(ri?"<":"(")+gs[qi][0]+(ri?">":")"),ho=parseFloat(gs[qi][1]),fo=parseFloat(gs[qi][2]);break;case 0:Ml=(ri?"<":"(")+gs[qi]+(ri?">":")"),ho=vr(ye),fo=cn(Xe)}_l!==void 0&&_l[qi]!==void 0&&(ja=_l[qi]+` Tw
`),qi===0?B.push(ja+mo(ho,fo,Jr)+Ml):_c===0?B.push(ja+Ml):_c===1&&B.push(ja+mo(ho,fo,Jr)+Ml)}B=_c===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Ka=`BT
/`;return Ka+=We+" "+be+` Tf
`,Ka+=W(be*ro)+` TL
`,Ka+=Or+`
`,Ka+=Mi,Ka+=B,Z(Ka+="ET"),y[We]=!0,_r};var cs=g.__private__.clip=g.clip=function(B){return Z(B==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return cs("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Z("n"),this};var ms=g.__private__.isValidStyle=function(B){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ye=!0),ye};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(B){return ms(B)&&(f=B),this};var Ks=g.__private__.getStyle=g.getStyle=function(B){var ye=f;switch(B){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=B}return ye},Ls=g.close=function(){return Z("h"),this};g.stroke=function(){return Z("S"),this},g.fill=function(B){return nt("f",B),this},g.fillEvenOdd=function(B){return nt("f*",B),this},g.fillStroke=function(B){return nt("B",B),this},g.fillStrokeEvenOdd=function(B){return nt("B*",B),this};var nt=function(B,ye){xr(ye)==="object"?Ht(ye,B):Z(B)},Kt=function(B){B===null||L===M&&B===void 0||(B=Ks(B),Z(B))};function Cs(B,ye,Xe,_t,Ot){var is=new V0(ye||this.boundingBox,Xe||this.xStep,_t||this.yStep,this.gState,Ot||this.matrix);is.stream=this.stream;var gs=B+"$$"+this.cloneIndex+++"$$";return it(gs,is),is}var Ht=function(B,ye){var Xe=It[B.key],_t=at[Xe];if(_t instanceof Ju)Z("q"),Z(Os(ye)),_t.gState&&g.setGState(_t.gState),Z(B.matrix.toString()+" cm"),Z("/"+Xe+" sh"),Z("Q");else if(_t instanceof V0){var Ot=new de(1,0,0,-1,0,no());B.matrix&&(Ot=Ot.multiply(B.matrix||De),Xe=Cs.call(_t,B.key,B.boundingBox,B.xStep,B.yStep,Ot).id),Z("q"),Z("/Pattern cs"),Z("/"+Xe+" scn"),_t.gState&&g.setGState(_t.gState),Z(ye),Z("Q")}},Os=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},es=g.moveTo=function(B,ye){return Z(W(ee(B))+" "+W(J(ye))+" m"),this},Ds=g.lineTo=function(B,ye){return Z(W(ee(B))+" "+W(J(ye))+" l"),this},js=g.curveTo=function(B,ye,Xe,_t,Ot,is){return Z([W(ee(B)),W(J(ye)),W(ee(Xe)),W(J(_t)),W(ee(Ot)),W(J(is)),"c"].join(" ")),this};g.__private__.line=g.line=function(B,ye,Xe,_t,Ot){if(isNaN(B)||isNaN(ye)||isNaN(Xe)||isNaN(_t)||!ms(Ot))throw new Error("Invalid arguments passed to jsPDF.line");return L===A?this.lines([[Xe-B,_t-ye]],B,ye,[1,1],Ot||"S"):this.lines([[Xe-B,_t-ye]],B,ye,[1,1]).stroke()},g.__private__.lines=g.lines=function(B,ye,Xe,_t,Ot,is){var gs,Ys,Xs,un,_n,Wn,wr,Jr,_r,mi,ri,Mi;if(typeof B=="number"&&(Mi=Xe,Xe=ye,ye=B,B=Mi),_t=_t||[1,1],is=is||!1,isNaN(ye)||isNaN(Xe)||!Array.isArray(B)||!Array.isArray(_t)||!ms(Ot)||typeof is!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(es(ye,Xe),gs=_t[0],Ys=_t[1],un=B.length,mi=ye,ri=Xe,Xs=0;Xs<un;Xs++)(_n=B[Xs]).length===2?(mi=_n[0]*gs+mi,ri=_n[1]*Ys+ri,Ds(mi,ri)):(Wn=_n[0]*gs+mi,wr=_n[1]*Ys+ri,Jr=_n[2]*gs+mi,_r=_n[3]*Ys+ri,mi=_n[4]*gs+mi,ri=_n[5]*Ys+ri,js(Wn,wr,Jr,_r,mi,ri));return is&&Ls(),Kt(Ot),this},g.path=function(B){for(var ye=0;ye<B.length;ye++){var Xe=B[ye],_t=Xe.c;switch(Xe.op){case"m":es(_t[0],_t[1]);break;case"l":Ds(_t[0],_t[1]);break;case"c":js.apply(this,_t);break;case"h":Ls()}}return this},g.__private__.rect=g.rect=function(B,ye,Xe,_t,Ot){if(isNaN(B)||isNaN(ye)||isNaN(Xe)||isNaN(_t)||!ms(Ot))throw new Error("Invalid arguments passed to jsPDF.rect");return L===A&&(_t=-_t),Z([W(ee(B)),W(J(ye)),W(ee(Xe)),W(ee(_t)),"re"].join(" ")),Kt(Ot),this},g.__private__.triangle=g.triangle=function(B,ye,Xe,_t,Ot,is,gs){if(isNaN(B)||isNaN(ye)||isNaN(Xe)||isNaN(_t)||isNaN(Ot)||isNaN(is)||!ms(gs))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Xe-B,_t-ye],[Ot-Xe,is-_t],[B-Ot,ye-is]],B,ye,[1,1],gs,!0),this},g.__private__.roundedRect=g.roundedRect=function(B,ye,Xe,_t,Ot,is,gs){if(isNaN(B)||isNaN(ye)||isNaN(Xe)||isNaN(_t)||isNaN(Ot)||isNaN(is)||!ms(gs))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ys=4/3*(Math.SQRT2-1);return Ot=Math.min(Ot,.5*Xe),is=Math.min(is,.5*_t),this.lines([[Xe-2*Ot,0],[Ot*Ys,0,Ot,is-is*Ys,Ot,is],[0,_t-2*is],[0,is*Ys,-Ot*Ys,is,-Ot,is],[2*Ot-Xe,0],[-Ot*Ys,0,-Ot,-is*Ys,-Ot,-is],[0,2*is-_t],[0,-is*Ys,Ot*Ys,-is,Ot,-is]],B+Ot,ye,[1,1],gs,!0),this},g.__private__.ellipse=g.ellipse=function(B,ye,Xe,_t,Ot){if(isNaN(B)||isNaN(ye)||isNaN(Xe)||isNaN(_t)||!ms(Ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var is=4/3*(Math.SQRT2-1)*Xe,gs=4/3*(Math.SQRT2-1)*_t;return es(B+Xe,ye),js(B+Xe,ye-gs,B+is,ye-_t,B,ye-_t),js(B-is,ye-_t,B-Xe,ye-gs,B-Xe,ye),js(B-Xe,ye+gs,B-is,ye+_t,B,ye+_t),js(B+is,ye+_t,B+Xe,ye+gs,B+Xe,ye),Kt(Ot),this},g.__private__.circle=g.circle=function(B,ye,Xe,_t){if(isNaN(B)||isNaN(ye)||isNaN(Xe)||!ms(_t))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ye,Xe,Xe,_t)},g.setFont=function(B,ye,Xe){return Xe&&(ye=G(ye,Xe)),We=He(B,ye,{disableWarning:!1}),this};var hs=g.__private__.getFont=g.getFont=function(){return gt[He.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var B,ye,Xe={};for(B in Fe)if(Fe.hasOwnProperty(B))for(ye in Xe[B]=[],Fe[B])Fe[B].hasOwnProperty(ye)&&Xe[B].push(ye);return Xe},g.addFont=function(B,ye,Xe,_t,Ot){var is=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&is.indexOf(arguments[3])!==-1?Ot=arguments[3]:arguments[3]&&is.indexOf(arguments[3])==-1&&(Xe=G(Xe,_t)),Ie.call(this,B,ye,Xe,Ot=Ot||"Identity-H")};var Us,Qs=t.lineWidth||.200025,Is=g.__private__.getLineWidth=g.getLineWidth=function(){return Qs},ps=g.__private__.setLineWidth=g.setLineWidth=function(B){return Qs=B,Z(W(ee(B))+" w"),this};g.__private__.setLineDash=en.API.setLineDash=en.API.setLineDashPattern=function(B,ye){if(B=B||[],ye=ye||0,isNaN(ye)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Xe){return W(ee(Xe))}).join(" "),ye=W(ee(ye)),Z("["+B+"] "+ye+" d"),this};var Lr=g.__private__.getLineHeight=g.getLineHeight=function(){return be*Us};g.__private__.getLineHeight=g.getLineHeight=function(){return be*Us};var Ir=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Us=B),this},qr=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Us};Ir(t.lineHeight);var vr=g.__private__.getHorizontalCoordinate=function(B){return ee(B)},cn=g.__private__.getVerticalCoordinate=function(B){return L===M?B:_e[U].mediaBox.topRightY-_e[U].mediaBox.bottomLeftY-ee(B)},cr=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(B){return W(vr(B))},ni=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(B){return W(cn(B))},Fr=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ds(Fr)},g.__private__.setStrokeColor=g.setDrawColor=function(B,ye,Xe,_t){return Fr=Ss({ch1:B,ch2:ye,ch3:Xe,ch4:_t,pdfColorType:"draw",precision:2}),Z(Fr),this};var Hi=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ds(Hi)},g.__private__.setFillColor=g.setFillColor=function(B,ye,Xe,_t){return Hi=Ss({ch1:B,ch2:ye,ch3:Xe,ch4:_t,pdfColorType:"fill",precision:2}),Z(Hi),this};var Or=t.textColor||"0 g",zi=g.__private__.getTextColor=g.getTextColor=function(){return ds(Or)};g.__private__.setTextColor=g.setTextColor=function(B,ye,Xe,_t){return Or=Ss({ch1:B,ch2:ye,ch3:Xe,ch4:_t,pdfColorType:"text",precision:3}),this};var Dr=t.charSpace,Ta=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Dr||0)};g.__private__.setCharSpace=g.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Dr=B,this};var Fa=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(B){var ye=g.CapJoinStyles[B];if(ye===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fa=ye,Z(ye+" J"),this};var Rs=0;g.__private__.setLineJoin=g.setLineJoin=function(B){var ye=g.CapJoinStyles[B];if(ye===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rs=ye,Z(ye+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(W(ee(B))+" M"),this},g.GState=$p,g.setGState=function(B){(B=typeof B=="string"?ht[Je[B]]:Pn(null,B)).equals(ve)||(Z("/"+B.id+" gs"),ve=B)};var Pn=function(B,ye){if(!B||!Je[B]){var Xe=!1;for(var _t in ht)if(ht.hasOwnProperty(_t)&&ht[_t].equals(ye)){Xe=!0;break}if(Xe)ye=ht[_t];else{var Ot="GS"+(Object.keys(ht).length+1).toString(10);ht[Ot]=ye,ye.id=Ot}return B&&(Je[B]=ye.id),xe.publish("addGState",ye),ye}};g.addGState=function(B,ye){return Pn(B,ye),this},g.saveGraphicsState=function(){return Z("q"),rt.push({key:We,size:be,color:Or}),this},g.restoreGraphicsState=function(){Z("Q");var B=rt.pop();return We=B.key,be=B.size,Or=B.color,ve=null,this},g.setCurrentTransformationMatrix=function(B){return Z(B.toString()+" cm"),this},g.comment=function(B){return Z("#"+B),this};var Qn=function(B,ye){var Xe=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Xe},set:function(is){isNaN(is)||(Xe=parseFloat(is))}});var _t=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _t},set:function(is){isNaN(is)||(_t=parseFloat(is))}});var Ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ot},set:function(is){Ot=is.toString()}}),this},Xr=function(B,ye,Xe,_t){Qn.call(this,B,ye),this.type="rect";var Ot=Xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ot},set:function(gs){isNaN(gs)||(Ot=parseFloat(gs))}});var is=_t||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return is},set:function(gs){isNaN(gs)||(is=parseFloat(gs))}}),this},Ni=function(){this.page=Ge,this.currentPage=U,this.pages=Re.slice(0),this.pagesContext=_e.slice(0),this.x=Et,this.y=Rt,this.matrix=$e,this.width=ws(U),this.height=Kr(U),this.outputDestination=me,this.id="",this.objectNumber=-1};Ni.prototype.restore=function(){Ge=this.page,U=this.currentPage,_e=this.pagesContext,Re=this.pages,Et=this.x,Rt=this.y,$e=this.matrix,Hn(U,this.width),Si(U,this.height),me=this.outputDestination};var so=function(B,ye,Xe,_t,Ot){mt.push(new Ni),Ge=U=0,Re=[],Et=B,Rt=ye,$e=Ot,Ee([Xe,_t])};for(var ml in g.beginFormObject=function(B,ye,Xe,_t,Ot){return so(B,ye,Xe,_t,Ot),this},g.endFormObject=function(B){return(function(ye){if(Ye[ye])mt.pop().restore();else{var Xe=new Ni,_t="Xo"+(Object.keys(Pe).length+1).toString(10);Xe.id=_t,Ye[ye]=_t,Pe[_t]=Xe,xe.publish("addFormObject",Xe),mt.pop().restore()}})(B),this},g.doFormObject=function(B,ye){var Xe=Pe[Ye[B]];return Z("q"),Z(ye.toString()+" cm"),Z("/"+Xe.id+" Do"),Z("Q"),this},g.getFormObject=function(B){var ye=Pe[Ye[B]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},g.save=function(B,ye){return B=B||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(qu(Wt(ss()),B),typeof qu.unload=="function"&&xn.setTimeout&&setTimeout(qu.unload,911),this):new Promise(function(Xe,_t){try{var Ot=qu(Wt(ss()),B);typeof qu.unload=="function"&&xn.setTimeout&&setTimeout(qu.unload,911),Xe(Ot)}catch(is){_t(is.message)}})},en.API)en.API.hasOwnProperty(ml)&&(ml==="events"&&en.API.events.length?(function(B,ye){var Xe,_t,Ot;for(Ot=ye.length-1;Ot!==-1;Ot--)Xe=ye[Ot][0],_t=ye[Ot][1],B.subscribe.apply(B,[Xe].concat(typeof _t=="function"?[_t]:_t))})(xe,en.API.events):g[ml]=en.API[ml]);function ws(B){return _e[B].mediaBox.topRightX-_e[B].mediaBox.bottomLeftX}function Hn(B,ye){_e[B].mediaBox.topRightX=ye+_e[B].mediaBox.bottomLeftX}function Kr(B){return _e[B].mediaBox.topRightY-_e[B].mediaBox.bottomLeftY}function Si(B,ye){_e[B].mediaBox.topRightY=ye+_e[B].mediaBox.bottomLeftY}var Oi=g.getPageWidth=function(B){return ws(B=B||U)/Dt},Fh=g.setPageWidth=function(B,ye){Hn(B,ye*Dt)},no=g.getPageHeight=function(B){return Kr(B=B||U)/Dt},Kh=g.setPageHeight=function(B,ye){Si(B,ye*Dt)};return g.internal={pdfEscape:Ze,getStyle:Ks,getFont:hs,getFontSize:re,getCharSpace:Ta,getTextColor:zi,getLineHeight:Lr,getLineHeightFactor:qr,getLineWidth:Is,write:ie,getHorizontalCoordinate:vr,getVerticalCoordinate:cn,getCoordinateString:cr,getVerticalCoordinateString:ni,collections:{},newObject:Lt,newAdditionalObject:Oe,newObjectDeferred:Ve,newObjectDeferredBegin:kt,getFilters:Ns,putStream:ke,events:xe,scaleFactor:Dt,pageSize:{getWidth:function(){return Oi(U)},setWidth:function(B){Fh(U,B)},getHeight:function(){return no(U)},setHeight:function(B){Kh(U,B)}},encryptionOptions:m,encryption:Ps,getEncryptor:function(B){return m!==null?Ps.encryptor(B,0):function(ye){return ye}},output:Es,getNumberOfPages:bt,get pages(){return Re},out:Z,f2:P,f3:F,getPageInfo:xs,getPageInfoByObjId:vs,getCurrentPageInfo:Ms,getPDFVersion:C,Point:Qn,Rectangle:Xr,Matrix:de,hasHotfix:ys},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Oi(U)},set:function(B){Fh(U,B)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return no(U)},set:function(B){Kh(U,B)},enumerable:!0,configurable:!0}),(function(B){for(var ye=0,Xe=je.length;ye<Xe;ye++){var _t=Ie.call(this,B[ye][0],B[ye][1],B[ye][2],je[ye][3],!0);p===!1&&(y[_t]=!0);var Ot=B[ye][0].split("-");Le({id:_t,fontName:Ot[0],fontStyle:Ot[1]||""})}xe.publish("addFonts",{fonts:gt,dictionary:Fe})}).call(g,je),We="F1",pt(i,n),xe.publish("initialized"),g}K0.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},K0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},K0.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},K0.prototype.processOwnerPassword=function(t,e){return Zy(Jy(e).substr(0,5),t)},K0.prototype.encryptor=function(t,e){var n=Jy(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Zy(n,r)}},$p.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||xr(t)!==xr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},en.API={events:[]},en.version="4.2.0";var fi=en.API,bN=1,Bh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},L0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rh=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var n=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},bn=function(t){return t.toFixed(2)},qd=function(t){return t.toFixed(5)};fi.__acroform__={};var fl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},XR=function(t){return t*bN},tc=function(t){var e=new DI,n=qs.internal.getHeight(t)||0,r=qs.internal.getWidth(t)||0;return e.BBox=[0,0,Number(bn(r)),Number(bn(n))],e},bF=fi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},NF=fi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},SF=fi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},_i=fi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SF(t,e-1)},Ci=fi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bF(t,e-1)},yi=fi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return NF(t,e-1)},vF=fi.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],l=t[1],c=t[2],d=t[3],u={};return u.lowerLeft_X=n(i)||0,u.lowerLeft_Y=r(l+d)||0,u.upperRight_X=n(i+c)||0,u.upperRight_Y=r(l)||0,[Number(bn(u.lowerLeft_X)),Number(bn(u.lowerLeft_Y)),Number(bn(u.upperRight_X)),Number(bn(u.upperRight_Y))]},DF=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=eb(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+bn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=tc(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},eb=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(P){return P.split(`
`)}):i.map(function(P){return[P]});var l=n,c=qs.internal.getHeight(t)||0;c=c<0?-c:c;var d=qs.internal.getWidth(t)||0;d=d<0?-d:d;var u=function(P,F,ee){if(P+1<i.length){var J=F+" "+i[P+1][0];return Xx(J,t,ee).width<=d-4}return!1};l++;e:for(;l>0;){e="",l--;var f,m,p=Xx("3",t,l).height,y=t.multiline?c-l:(c-p)/2,g=y+=2,N=0,C=0,v=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+Xx(e,t,l=12).width+", FieldWidth:"+d+`
`;break}for(var R="",A=0,M=0;M<i.length;M++)if(i.hasOwnProperty(M)){var L=!1;if(i[M].length!==1&&v!==i[M].length-1){if((p+2)*(A+2)+2>c)continue e;R+=i[M][v],L=!0,C=M,M--}else{R=(R+=i[M][v]+" ").substr(R.length-1)==" "?R.substr(0,R.length-1):R;var k=parseInt(M),V=u(k,R,l),G=M>=i.length-1;if(V&&!G){R+=" ",v=0;continue}if(V||G){if(G)C=k;else if(t.multiline&&(p+2)*(A+2)+2>c)continue e}else{if(!t.multiline||(p+2)*(A+2)+2>c)continue e;C=k}}for(var W="",j=N;j<=C;j++){var S=i[j];if(t.multiline){if(j===C){W+=S[v]+" ",v=(v+1)%S.length;continue}if(j===N){W+=S[S.length-1]+" ";continue}}W+=S[0]+" "}switch(W=W.substr(W.length-1)==" "?W.substr(0,W.length-1):W,m=Xx(W,t,l).width,t.textAlign){case"right":f=d-m-2;break;case"center":f=(d-m)/2;break;default:f=2}e+=bn(f)+" "+bn(g)+` Td
`,e+="("+Bh(W)+`) Tj
`,e+=-bn(f)+` 0 Td
`,g=-(l+2),m=0,N=L?C:C+1,A++,R=""}break}return r.text=e,r.fontSize=l,r},Xx=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},RF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TF=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},EF=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(wo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(RF)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bN=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new RI,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var l=r[i];l.objId=void 0,l.hasAnnotation&&TF(l,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var l=!r;for(var c in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var d=r[c],u=[],f=d.Rect;if(d.Rect&&(d.Rect=vF(d.Rect,i)),i.internal.newObjectDeferredBegin(d.objId,!0),d.DA=qs.createDefaultAppearanceStream(d),xr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(u=d.getKeyValueListForStream()),d.Rect=f,d.hasAppearanceStream&&!d.appearanceStreamContent){var m=DF(d);u.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(d.appearanceStreamContent){var p="";for(var y in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(y)){var g=d.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var c in g)if(g.hasOwnProperty(c)){var N=g[c];typeof N=="function"&&(N=N.call(i,d)),p+="/"+c+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,d)),p+="/"+c+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:d.objId}),i.internal.out("endobj")}l&&(function(C,v){for(var R in C)if(C.hasOwnProperty(R)){var A=R,M=C[R];v.internal.newObjectDeferredBegin(M.objId,!0),xr(M)==="object"&&typeof M.putStream=="function"&&M.putStream(),delete C[A]}})(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},vI=fi.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(c){return c};if(Array.isArray(t)){for(var i="[",l=0;l<t.length;l++)switch(l!==0&&(i+=" "),xr(t[l])){case"boolean":case"number":case"object":i+=t[l].toString();break;case"string":t[l].substr(0,1)==="/"?i+="/"+Rh(t[l].substr(1)):(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Bh(r(t[l].toString()))+")")}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},HC=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Bh(r(t))+")"},oc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};oc.prototype.toString=function(){return this.objId+" 0 R"},oc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},oc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:vI(i,this.objId,this.scope)}):i instanceof oc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var DI=function(){oc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};fl(DI,oc);var RI=function(){oc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Bh(n(t))+")"}},set:function(n){t=n}})};fl(RI,oc);var wo=function t(){oc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute F supplied.');e=R}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_i(e,3)},set:function(R){R?this.F=Ci(e,3):this.F=yi(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute Ff supplied.');n=R}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(R){r=R!==void 0?R:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(R){r[0]=R}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(R){r[1]=R}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(R){r[2]=R}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(R){r[3]=R}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(R){switch(R){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=R;break;default:throw new Error('Invalid value "'+R+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Hp)return;l="FieldObject"+t.FieldNum++}var R=function(A){return A};return this.scope&&(R=this.scope.internal.getEncryptor(this.objId)),"("+Bh(R(l))+")"},set:function(R){l=R.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(R){l=R}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(R){c=R}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(R){d=R}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(R){u=R}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/bN:f},set:function(R){f=R}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(R){m=R}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Hp||this instanceof gh))return HC(p,this.objId,this.scope)},set:function(R){R=R.toString(),p=R}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof ia==0?HC(y,this.objId,this.scope):y},set:function(R){R=R.toString(),y=this instanceof ia==0?R.substr(0,1)==="("?L0(R.substr(1,R.length-2)):L0(R):R}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ia==1?L0(y.substr(1,y.length-1)):y},set:function(R){R=R.toString(),y=this instanceof ia==1?"/"+Rh(R):R}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(R){this.V=R}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ia==0?HC(g,this.objId,this.scope):g},set:function(R){R=R.toString(),g=this instanceof ia==0?R.substr(0,1)==="("?L0(R.substr(1,R.length-2)):L0(R):R}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ia==1?L0(g.substr(1,g.length-1)):g},set:function(R){R=R.toString(),g=this instanceof ia==1?"/"+Rh(R):R}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(R){R=!!R,C=R}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(R){N=R}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,1)},set:function(R){R?this.Ff=Ci(this.Ff,1):this.Ff=yi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,2)},set:function(R){R?this.Ff=Ci(this.Ff,2):this.Ff=yi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,3)},set:function(R){R?this.Ff=Ci(this.Ff,3):this.Ff=yi(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(R){if([0,1,2].indexOf(R)===-1)throw new Error('Invalid value "'+R+'" for attribute Q supplied.');v=R}}),Object.defineProperty(this,"textAlign",{get:function(){var R;switch(v){case 0:default:R="left";break;case 1:R="center";break;case 2:R="right"}return R},configurable:!0,enumerable:!0,set:function(R){switch(R){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};fl(wo,oc);var sf=function(){wo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vI(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(l,c,d){d||(d=1);for(var u,f=[];u=c.exec(l);)f.push(u[d]);return f})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,18)},set:function(n){n?this.Ff=Ci(this.Ff,18):this.Ff=yi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ci(this.Ff,19):this.Ff=yi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,20)},set:function(n){n?(this.Ff=Ci(this.Ff,20),e.sort()):this.Ff=yi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,22)},set:function(n){n?this.Ff=Ci(this.Ff,22):this.Ff=yi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(n){n?this.Ff=Ci(this.Ff,23):this.Ff=yi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,27)},set:function(n){n?this.Ff=Ci(this.Ff,27):this.Ff=yi(this.Ff,27)}}),this.hasAppearanceStream=!1};fl(sf,wo);var nf=function(){sf.call(this),this.fontName="helvetica",this.combo=!1};fl(nf,sf);var rf=function(){nf.call(this),this.combo=!0};fl(rf,nf);var up=function(){rf.call(this),this.edit=!0};fl(up,rf);var ia=function(){wo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,15)},set:function(n){n?this.Ff=Ci(this.Ff,15):this.Ff=yi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,16)},set:function(n){n?this.Ff=Ci(this.Ff,16):this.Ff=yi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,17)},set:function(n){n?this.Ff=Ci(this.Ff,17):this.Ff=yi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(n){n?this.Ff=Ci(this.Ff,26):this.Ff=yi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Bh(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){xr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){var r=n==null?"":n.toString();r.substr(0,1)==="/"&&(r=r.substr(1)),t="/"+Rh(r)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+Rh(n)}})};fl(ia,wo);var hp=function(){ia.call(this),this.pushButton=!0};fl(hp,ia);var af=function(){ia.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};fl(af,ia);var Hp=function(){var t,e;wo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),r)c.push("/"+l+" ("+Bh(i(r[l]))+")");return c.push(">>"),c.join(`
`)},set:function(i){xr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){var l=i==null?"":i.toString();l.substr(0,1)==="/"&&(l=l.substr(1)),n="/"+Rh(l)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){var l=i==null?"":i.toString();l.substr(0,1)==="/"&&(l=l.substr(1)),n="/"+Rh(l)}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qs.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fl(Hp,wo),af.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},af.prototype.createOption=function(t){var e=new Hp;return e.Parent=this,e.optionName=t,this.Kids.push(e),jF.call(this.scope,e),e};var fp=function(){ia.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qs.CheckBox.createAppearanceStream()};fl(fp,ia);var gh=function(){wo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,13)},set:function(e){e?this.Ff=Ci(this.Ff,13):this.Ff=yi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,21)},set:function(e){e?this.Ff=Ci(this.Ff,21):this.Ff=yi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(e){e?this.Ff=Ci(this.Ff,23):this.Ff=yi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,24)},set:function(e){e?this.Ff=Ci(this.Ff,24):this.Ff=yi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,25)},set:function(e){e?this.Ff=Ci(this.Ff,25):this.Ff=yi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(e){e?this.Ff=Ci(this.Ff,26):this.Ff=yi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fl(gh,wo);var mp=function(){gh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,14)},set:function(t){t?this.Ff=Ci(this.Ff,14):this.Ff=yi(this.Ff,14)}}),this.password=!0};fl(mp,gh);var qs={CheckBox:{createAppearanceStream:function(){return{N:{On:qs.CheckBox.YesNormal},D:{On:qs.CheckBox.YesPushDown,Off:qs.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=tc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),l=eb(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+bn(qs.internal.getWidth(t))+" "+bn(qs.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+bn(l.fontSize)+" Tf "+i),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=tc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],l=qs.internal.getHeight(t),c=qs.internal.getWidth(t),d=eb(t,t.caption);return i.push("1 g"),i.push("0 0 "+bn(c)+" "+bn(l)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+bn(c-1)+" "+bn(l-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+bn(d.fontSize)+" Tf "+r),i.push(d.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=tc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+bn(qs.internal.getWidth(t))+" "+bn(qs.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:qs.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=qs.RadioButton.Circle.YesNormal,e.D[t]=qs.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=tc(t);e.scope=t.scope;var n=[],r=qs.internal.getWidth(t)<=qs.internal.getHeight(t)?qs.internal.getWidth(t)/4:qs.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=qs.internal.Bezier_C,l=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+qd(qs.internal.getWidth(t)/2)+" "+qd(qs.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=tc(t);e.scope=t.scope;var n=[],r=qs.internal.getWidth(t)<=qs.internal.getHeight(t)?qs.internal.getWidth(t)/4:qs.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*qs.internal.Bezier_C).toFixed(5)),c=Number((r*qs.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+qd(qs.internal.getWidth(t)/2)+" "+qd(qs.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+qd(qs.internal.getWidth(t)/2)+" "+qd(qs.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),n.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),n.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),n.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=tc(t);e.scope=t.scope;var n=[],r=qs.internal.getWidth(t)<=qs.internal.getHeight(t)?qs.internal.getWidth(t)/4:qs.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*qs.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+qd(qs.internal.getWidth(t)/2)+" "+qd(qs.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:qs.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=qs.RadioButton.Cross.YesNormal,e.D[t]=qs.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=tc(t);e.scope=t.scope;var n=[],r=qs.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+bn(qs.internal.getWidth(t)-2)+" "+bn(qs.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(bn(r.x1.x)+" "+bn(r.x1.y)+" m"),n.push(bn(r.x2.x)+" "+bn(r.x2.y)+" l"),n.push(bn(r.x4.x)+" "+bn(r.x4.y)+" m"),n.push(bn(r.x3.x)+" "+bn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=tc(t);e.scope=t.scope;var n=qs.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+bn(qs.internal.getWidth(t))+" "+bn(qs.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+bn(qs.internal.getWidth(t)-2)+" "+bn(qs.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(bn(n.x1.x)+" "+bn(n.x1.y)+" m"),r.push(bn(n.x2.x)+" "+bn(n.x2.y)+" l"),r.push(bn(n.x4.x)+" "+bn(n.x4.y)+" m"),r.push(bn(n.x3.x)+" "+bn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=tc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+bn(qs.internal.getWidth(t))+" "+bn(qs.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};qs.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=qs.internal.getWidth(t),n=qs.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},qs.internal.getWidth=function(t){var e=0;return xr(t)==="object"&&(e=XR(t.Rect[2])),e},qs.internal.getHeight=function(t){var e=0;return xr(t)==="object"&&(e=XR(t.Rect[3])),e};var jF=fi.addField=function(t){if(EF(this,t),!(t instanceof wo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};fi.AcroFormChoiceField=sf,fi.AcroFormListBox=nf,fi.AcroFormComboBox=rf,fi.AcroFormEditBox=up,fi.AcroFormButton=ia,fi.AcroFormPushButton=hp,fi.AcroFormRadioButton=af,fi.AcroFormCheckBox=fp,fi.AcroFormTextField=gh,fi.AcroFormPasswordField=mp,fi.AcroFormAppearance=qs,fi.AcroForm={ChoiceField:sf,ListBox:nf,ComboBox:rf,EditBox:up,Button:ia,PushButton:hp,RadioButton:af,CheckBox:fp,TextField:gh,PasswordField:mp,Appearance:qs},en.AcroForm={ChoiceField:sf,ListBox:nf,ComboBox:rf,EditBox:up,Button:ia,PushButton:hp,RadioButton:af,CheckBox:fp,TextField:gh,PasswordField:mp,Appearance:qs};en.AcroForm;function TI(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(P,F){var ee,J,$,Y,K,w=n;if((F=F||n)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(V(P))for(K in r)for($=r[K],ee=0;ee<$.length;ee+=1){for(Y=!0,J=0;J<$[ee].length;J+=1)if($[ee][J]!==void 0&&$[ee][J]!==P[J]){Y=!1;break}if(Y===!0){w=K;break}}else for(K in r)for($=r[K],ee=0;ee<$.length;ee+=1){for(Y=!0,J=0;J<$[ee].length;J+=1)if($[ee][J]!==void 0&&$[ee][J]!==P.charCodeAt(J)){Y=!1;break}if(Y===!0){w=K;break}}return w===n&&F!==n&&(w=F),w},l=function P(F){for(var ee=this.internal.write,J=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:F.width}),Y.push({key:"Height",value:F.height}),F.colorSpace===R.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===R.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var K="",w=0,se=F.transparency.length;w<se;w++)K+=F.transparency[w]+" "+F.transparency[w]+" ";Y.push({key:"Mask",value:"["+K+"]"})}F.sMask!==void 0&&Y.push({key:"SMask",value:F.objectId+1+" 0 R"});var oe=F.filter!==void 0?["/"+F.filter]:void 0;if(J({data:F.data,additionalKeyValues:Y,alreadyAppliedFilters:oe,objectId:F.objectId}),ee("endobj"),"sMask"in F&&F.sMask!==void 0){var T,I=(T=F.sMaskBitsPerComponent)!==null&&T!==void 0?T:F.bitsPerComponent,U={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:F.sMask};"filter"in F&&(U.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(F.width),U.filter=F.filter),P.call(this,U)}if(F.colorSpace===R.INDEXED){var Q=this.internal.newObject();J({data:W(new Uint8Array(F.palette)),objectId:Q}),ee("endobj")}},c=function(){var P=this.internal.collections[e+"images"];for(var F in P)l.call(this,P[F])},d=function(){var P,F=this.internal.collections[e+"images"],ee=this.internal.write;for(var J in F)ee("/I"+(P=F[J]).index,P.objectId,"0","R")},u=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",d))},f=function(){var P=this.internal.collections[e+"images"];return u.call(this),P},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(P){return typeof t["process"+P.toUpperCase()]=="function"},y=function(P){return xr(P)==="object"&&P.nodeType===1},g=function(P,F){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var ee=""+P.getAttribute("src");if(ee.indexOf("data:image/")===0)return dp(unescape(ee).split("base64,").pop());var J=t.loadFile(ee,!0);if(J!==void 0)return J}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var $;switch(F){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;default:$="image/jpeg"}return dp(P.toDataURL($,1).split("base64,").pop())}},N=function(P){var F=this.internal.collections[e+"images"];if(F){for(var ee in F)if(P===F[ee].alias)return F[ee]}},C=function(P,F,ee){return P||F||(P=-96,F=-96),P<0&&(P=-1*ee.width*72/P/this.internal.scaleFactor),F<0&&(F=-1*ee.height*72/F/this.internal.scaleFactor),P===0&&(P=F*ee.width/ee.height),F===0&&(F=P*ee.height/ee.width),[P,F]},v=function(P,F,ee,J,$,Y){var K=C.call(this,ee,J,$),w=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,oe=f.call(this);if(ee=K[0],J=K[1],oe[$.index]=$,Y){Y*=Math.PI/180;var T=Math.cos(Y),I=Math.sin(Y),U=function(H){return H.toFixed(4)},Q=[U(T),U(I),U(-1*I),U(T),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,w(P),se(F+J),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([w(ee),"0","0",w(J),"0","0","cm"].join(" "))):this.internal.write([w(ee),"0","0",w(J),w(P),se(F+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},R=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=t.__addimage__.sHashCode=function(P){var F,ee,J=0;if(typeof P=="string")for(ee=P.length,F=0;F<ee;F++)J=(J<<5)-J+P.charCodeAt(F),J|=0;else if(V(P))for(ee=P.byteLength/2,F=0;F<ee;F++)J=(J<<5)-J+P[F],J|=0;return J},L=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var F=!0;return P.length===0&&(F=!1),P.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(F=!1),F},k=t.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var F=P.indexOf(",");return F<0?null:P.substring(0,F).trim().endsWith("base64")?P.substring(F+1):null};t.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var V=t.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},G=t.__addimage__.binaryStringToUint8Array=function(P){for(var F=P.length,ee=new Uint8Array(F),J=0;J<F;J++)ee[J]=P.charCodeAt(J);return ee},W=t.__addimage__.arrayBufferToBinaryString=function(P){for(var F="",ee=V(P)?P:new Uint8Array(P),J=0;J<ee.length;J+=8192)F+=String.fromCharCode.apply(null,ee.subarray(J,J+8192));return F};t.addImage=function(){var P,F,ee,J,$,Y,K,w,se;if(typeof arguments[1]=="number"?(F=n,ee=arguments[1],J=arguments[2],$=arguments[3],Y=arguments[4],K=arguments[5],w=arguments[6],se=arguments[7]):(F=arguments[1],ee=arguments[2],J=arguments[3],$=arguments[4],Y=arguments[5],K=arguments[6],w=arguments[7],se=arguments[8]),xr(P=arguments[0])==="object"&&!y(P)&&"imageData"in P){var oe=P;P=oe.imageData,F=oe.format||F||n,ee=oe.x||ee||0,J=oe.y||J||0,$=oe.w||oe.width||$,Y=oe.h||oe.height||Y,K=oe.alias||K,w=oe.compression||w,se=oe.rotation||oe.angle||se}var T=this.internal.getFilters();if(w===void 0&&T.indexOf("FlateEncode")!==-1&&(w="SLOW"),isNaN(ee)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var I=j.call(this,P,F,K,w);return v.call(this,ee,J,$,Y,I,se),this};var j=function(P,F,ee,J){var $,Y,K;if(typeof P=="string"&&i(P)===n){P=unescape(P);var w=S(P,!1);(w!==""||(w=t.loadFile(P,!0))!==void 0)&&(P=w)}if(y(P)&&(P=g(P,F)),F=i(P,F),!p(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((K=ee)==null||K.length===0)&&(ee=(function(se){return typeof se=="string"||V(se)?M(se):V(se.data)?M(se.data):null})(P)),($=N.call(this,ee))||(P instanceof Uint8Array||F==="RGBA"||(Y=P,P=G(P)),$=this["process"+F.toUpperCase()](P,m.call(this),ee,(function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in t.image_compression?se:A.NONE})(J),Y)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},S=t.__addimage__.convertBase64ToBinaryString=function(P,F){F=typeof F!="boolean"||F;var ee,J="";if(typeof P=="string"){var $;ee=($=k(P))!==null&&$!==void 0?$:P;try{J=dp(ee)}catch(Y){if(F)throw L(ee)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};t.getImageProperties=function(P){var F,ee,J="";if(y(P)&&(P=g(P)),typeof P=="string"&&i(P)===n&&((J=S(P,!1))===""&&(J=t.loadFile(P)||""),P=J),ee=i(P),!p(ee))throw new Error("addImage does not support files of type '"+ee+"', please ensure that a plugin for '"+ee+"' support is added.");if(P instanceof Uint8Array||(P=G(P)),!(F=this["process"+ee.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=ee,F}})(en.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};en.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,l,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,m=!1,p=0;p<f.length&&!m;p++)switch((r=f[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var y=0;y<f.length;y++){r=f[y];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),R=this.internal.getEncryptor(C.objId),A=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+g(R(r.contents))+")",l+=" /Popup "+v.objId+" 0 R",l+=" /P "+u.objId+" 0 R",l+=" /T ("+g(R(A))+") >>",C.content=l;var M=C.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+M,r.open&&(l+=" /Open true"),l+=" >>",v.content=l,this.internal.write(C.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var L=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+L+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var k=this.annotations._nameMap[r.options.name];r.options.pageNumber=k.page,r.options.top=k.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;default:var V=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+V+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,l,c){var d=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:u(n),y:f(r),w:u(n+i),h:f(r+l)},options:c,type:"link"})},t.textWithLink=function(n,r,i,l){var c,d,u=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){d=l.maxWidth;var m=this.splitTextToSize(n,d).length;c=Math.ceil(f*m)}else d=u,c=f;return this.text(n,r,i,l),i+=.2*f,l.align==="center"&&(r-=u/2),l.align==="right"&&(r-=u),this.link(r,i-f,d,c,l),u},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(en.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},d=t.__arabicParser__.isArabicEndLetter=function(C){return c(C)&&l(C)&&e[C.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(C){return c(C)&&i.indexOf(C.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return c(C)&&l(C)&&e[C.charCodeAt(0)].length>=1};var f=t.__arabicParser__.arabicLetterHasFinalForm=function(C){return c(C)&&l(C)&&e[C.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(C){return c(C)&&l(C)&&e[C.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(C){return c(C)&&l(C)&&e[C.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(C){var v=0,R=n,A="",M=0;for(v=0;v<C.length;v+=1)R[C.charCodeAt(v)]!==void 0?(M++,typeof(R=R[C.charCodeAt(v)])=="number"&&(A+=String.fromCharCode(R),R=n,M=0),v===C.length-1&&(R=n,A+=C.charAt(v-(M-1)),v-=M-1,M=0)):(R=n,A+=C.charAt(v-M),v-=M,M=0);return A};t.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&r[C.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(C,v,R){return c(C)?l(C)===!1?-1:!f(C)||!c(v)&&!c(R)||!c(R)&&d(v)||d(C)&&!c(v)||d(C)&&u(v)||d(C)&&d(v)?0:m(C)&&c(v)&&!d(v)&&c(R)&&f(R)?3:d(C)||!c(R)?1:2:-1},g=function(C){var v=0,R=0,A=0,M="",L="",k="",V=(C=C||"").split("\\s+"),G=[];for(v=0;v<V.length;v+=1){for(G.push(""),R=0;R<V[v].length;R+=1)M=V[v][R],L=V[v][R-1],k=V[v][R+1],c(M)?(A=y(M,L,k),G[v]+=A!==-1?String.fromCharCode(e[M.charCodeAt(0)][A]):M):G[v]+=M;G[v]=p(G[v])}return G.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var C,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,R=[];if(Array.isArray(v)){var A=0;for(R=[],A=0;A<v.length;A+=1)Array.isArray(v[A])?R.push([g(v[A][0]),v[A][1],v[A][2]]):R.push([g(v[A])]);C=R}else C=g(v);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};t.events.push(["preProcessText",N])})(en.API),en.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(d){n=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(d){l=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(en.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(C){u=C}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(C){f=C}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(C){m=C}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(C){y=C}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(C){g=C}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(C){N=C}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,f){r.call(this);var m=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),y=f.scaleFactor||this.internal.scaleFactor,g=0,N=0,C=0,v=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var R=f.maxWidth;R>0?typeof u=="string"?u=this.splitTextToSize(u,R):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(M,L){return M.concat(v.splitTextToSize(L,R))},[])):u=Array.isArray(u)?u:[u];for(var A=0;A<u.length;A++)g<(C=this.getStringUnitWidth(u[A],{font:p})*m)&&(g=C);return g!==0&&(N=u.length),{w:g/=y,h:Math.max((N*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var u;u=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var f=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===u.lineNumber?(u.x=(f.x||0)+(f.width||0),u.y=f.y||0):f.y+f.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,g&&y&&(this.printHeaderRow(u.lineNumber,!0),u.y+=y[0].height)):u.y=f.y+f.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-m,u.y+m,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+m,{align:"center",baseline:"top",maxWidth:u.width-m-m}):this.text(u.text,u.x+m,u.y+m,{align:"left",baseline:"top",maxWidth:u.width-m-m})),this.internal.__cell__.lastCell=u,this};t.table=function(u,f,m,p,y){if(r.call(this),!m)throw new Error("No data for PDF table.");var g,N,C,v,R=[],A=[],M=[],L={},k={},V=[],G=[],W=(y=y||{}).autoSize||!1,j=y.printHeaders!==!1,S=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,P=y.margins||Object.assign({width:this.getPageWidth()},e),F=typeof y.padding=="number"?y.padding:3,ee=y.headerBackgroundColor||"#c8c8c8",J=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=S,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=ee,this.internal.__cell__.headerTextColor=J,this.setFontSize(S),p==null)A=R=Object.keys(m[0]),M=R.map(function(){return"left"});else if(Array.isArray(p)&&xr(p[0])==="object")for(R=p.map(function(oe){return oe.name}),A=p.map(function(oe){return oe.prompt||oe.name||""}),M=p.map(function(oe){return oe.align||"left"}),g=0;g<p.length;g+=1)k[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(A=R=p,M=R.map(function(){return"left"}));if(W||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<R.length;g+=1){for(L[v=R[g]]=m.map(function(oe){return oe[v]}),this.setFont(void 0,"bold"),V.push(this.getTextDimensions(A[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=L[v],this.setFont(void 0,"normal"),C=0;C<N.length;C+=1)V.push(this.getTextDimensions(N[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[v]=Math.max.apply(null,V)+F+F,V=[]}if(j){var $={};for(g=0;g<R.length;g+=1)$[R[g]]={},$[R[g]].text=A[g],$[R[g]].align=M[g];var Y=d.call(this,$,k);G=R.map(function(oe){return new l(u,f,k[oe],Y,$[oe].text,void 0,$[oe].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var K=p.reduce(function(oe,T){return oe[T.name]=T.align,oe},{});for(g=0;g<m.length;g+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:g,data:m[g]},this);var w=d.call(this,m[g],k);for(C=0;C<R.length;C+=1){var se=m[g][R[C]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:g,col:C,data:se},this),c.call(this,new l(u,f,k[R[C]],w,se,g+2,K[R[C]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=f,this};var d=function(u,f){var m=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(u).map(function(g){var N=u[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,f[g]-m-m)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/y+m+m},this).reduce(function(g,N){return Math.max(g,N)},0)};t.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){m=this.internal.__cell__.tableHeaderRow[g].clone(),f&&(m.y=this.internal.__cell__.margins.top||0,y.push(m)),m.lineNumber=u;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,m),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}})(en.API);var EI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tb=TI(jI),II=[100,200,300,400,500,600,700,800,900],IF=TI(II);function zC(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(l){return EI[l=l||"normal"]?l:"normal"})(t.style),r=(function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400})(t.weight),i=(function(l){return typeof tb[l=l||"normal"]=="number"?l:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function JR(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var OF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ZR={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function eT(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function tT(t){return t.trimLeft()}function MF(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function LF(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var w0,Jx,sT,nT,rT,qC=["times"];function iT(t,e,n,r,i){var l=4,c=lT;switch(i){case en.API.image_compression.FAST:l=1,c=aT;break;case en.API.image_compression.MEDIUM:l=6,c=oT;break;case en.API.image_compression.SLOW:l=9,c=cT}t=(function(u,f,m,p){for(var y,g=u.length/f,N=new Uint8Array(u.length+g),C=[wF,aT,lT,oT,cT],v=0;v<g;v+=1){var R=v*f,A=u.subarray(R,R+f);if(p)N.set(p(A,m,y),R+v);else{for(var M=C.length,L=[],k=0;k<M;k+=1)L[k]=C[k](A,m,y);var V=AF(L.concat());N.set(L[V],R+v)}y=A}return N})(t,e,Math.ceil(n*r/8),c);var d=Hy(t,{level:l});return en.API.__addimage__.arrayBufferToBinaryString(d)}function wF(t){var e=Array.apply([],t);return e.unshift(0),e}function aT(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var l=t[i-e]||0;r[i+1]=t[i]-l+256&255}return r}function lT(t,e,n){var r=t.length,i=[];i[0]=2;for(var l=0;l<r;l+=1){var c=n&&n[l]||0;i[l+1]=t[l]-c+256&255}return i}function oT(t,e,n){var r=t.length,i=[];i[0]=3;for(var l=0;l<r;l+=1){var c=t[l-e]||0,d=n&&n[l]||0;i[l+1]=t[l]+256-(c+d>>>1)&255}return i}function cT(t,e,n){var r=t.length,i=[];i[0]=4;for(var l=0;l<r;l+=1){var c=PF(t[l-e]||0,n&&n[l]||0,n&&n[l-e]||0);i[l+1]=t[l]-c+256&255}return i}function PF(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),l=Math.abs(t+e-n-n);return r<=i&&r<=l?t:i<=l?e:n}function AF(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function XC(t,e,n){var r=e*n,i=Math.floor(r/8),l=16-(r-8*i+n),c=(1<<n)-1;return OI(t,i)>>l&c}function dT(t,e,n,r){var i=n*r,l=Math.floor(i/8),c=16-(i-8*l+r),d=(1<<r)-1,u=(e&d)<<c;(function(f,m,p){if(m+1<f.byteLength)f.setUint16(m,p,!1);else{var y=p>>8&255;f.setUint8(m,y)}})(t,l,OI(t,l)&~(d<<c)&65535|u)}function OI(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function kF(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],l=i>>7,c=1<<1+(7&i);t[e++],t[e++];var d=null,u=null;l&&(d=e,u=c,e+=3*c);var f=!0,m=[],p=0,y=null,g=0,N=null;for(this.width=n,this.height=r;f&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,N=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=t[e++];p=t[e++]|t[e++]<<8,y=t[e++],1&C||(y=null),g=C>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,M=t[e++]|t[e++]<<8,L=t[e++],k=L>>6&1,V=1<<1+(7&L),G=d,W=u,j=!1;L>>7&&(j=!0,G=e,W=V,e+=3*V);var S=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}m.push({x:v,y:R,width:A,height:M,has_local_palette:j,palette_offset:G,palette_size:W,data_offset:S,data_length:e-S,transparent_index:y,interlaced:!!k,delay:p,disposal:g});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return N},this.frameInfo=function(F){if(F<0||F>=m.length)throw new Error("Frame index out of range.");return m[F]},this.decodeAndBlitFrameBGRA=function(F,ee){var J=this.frameInfo(F),$=J.width*J.height;if($>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var Y=new Uint8Array($);uT(t,J.data_offset,Y,$);var K=J.palette_offset,w=J.transparent_index;w===null&&(w=256);var se=J.width,oe=n-se,T=se,I=4*(J.y*n+J.x),U=4*((J.y+J.height)*n+J.x),Q=I,H=4*oe;J.interlaced===!0&&(H+=4*n*7);for(var q=8,ae=0,fe=Y.length;ae<fe;++ae){var ge=Y[ae];if(T===0&&(T=se,(Q+=H)>=U&&(H=4*oe+4*n*(q-1),Q=I+(se+oe)*(q<<1),q>>=1)),ge===w)Q+=4;else{var ce=t[K+3*ge],Re=t[K+3*ge+1],X=t[K+3*ge+2];ee[Q++]=X,ee[Q++]=Re,ee[Q++]=ce,ee[Q++]=255}--T}},this.decodeAndBlitFrameRGBA=function(F,ee){var J=this.frameInfo(F),$=J.width*J.height;if($>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var Y=new Uint8Array($);uT(t,J.data_offset,Y,$);var K=J.palette_offset,w=J.transparent_index;w===null&&(w=256);var se=J.width,oe=n-se,T=se,I=4*(J.y*n+J.x),U=4*((J.y+J.height)*n+J.x),Q=I,H=4*oe;J.interlaced===!0&&(H+=4*n*7);for(var q=8,ae=0,fe=Y.length;ae<fe;++ae){var ge=Y[ae];if(T===0&&(T=se,(Q+=H)>=U&&(H=4*oe+4*n*(q-1),Q=I+(se+oe)*(q<<1),q>>=1)),ge===w)Q+=4;else{var ce=t[K+3*ge],Re=t[K+3*ge+1],X=t[K+3*ge+2];ee[Q++]=ce,ee[Q++]=Re,ee[Q++]=X,ee[Q++]=255}--T}}}function uT(t,e,n,r){for(var i=t[e++],l=1<<i,c=l+1,d=c+1,u=i+1,f=(1<<u)-1,m=0,p=0,y=0,g=t[e++],N=new Int32Array(4096),C=null;;){for(;m<16&&g!==0;)p|=t[e++]<<m,m+=8,g===1?g=t[e++]:--g;if(m<u)break;var v=p&f;if(p>>=u,m-=u,v!==l){if(v===c)break;for(var R=v<d?v:C,A=0,M=R;M>l;)M=N[M]>>8,++A;var L=M;if(y+A+(R!==v?1:0)>r)return void jr.log("Warning, gif stream longer than expected.");n[y++]=L;var k=y+=A;for(R!==v&&(n[y++]=L),M=R;A--;)M=N[M],n[--k]=255&M,M>>=8;C!==null&&d<4096&&(N[d++]=C<<8|L,d>=f+1&&u<12&&(++u,f=f<<1|1)),C=v}else d=c+1,f=(1<<(u=i+1))-1,C=null}return y!==r&&jr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function JC(t){var e,n,r,i,l,c=Math.floor,d=new Array(64),u=new Array(64),f=new Array(64),m=new Array(64),p=new Array(65535),y=new Array(65535),g=new Array(64),N=new Array(64),C=[],v=0,R=7,A=new Array(64),M=new Array(64),L=new Array(64),k=new Array(256),V=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],W=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(I,U){for(var Q=0,H=0,q=new Array,ae=1;ae<=16;ae++){for(var fe=1;fe<=I[ae];fe++)q[U[H]]=[],q[U[H]][0]=Q,q[U[H]][1]=ae,H++,Q++;Q*=2}return q}function K(I){for(var U=I[0],Q=I[1]-1;Q>=0;)U&1<<Q&&(v|=1<<R),Q--,--R<0&&(v==255?(w(255),w(0)):w(v),R=7,v=0)}function w(I){C.push(I)}function se(I){w(I>>8&255),w(255&I)}function oe(I,U,Q,H,q){for(var ae,fe=q[0],ge=q[240],ce=(function(be,Te){var re,pe,Se,st,Nt,lt,At,ot,We,Dt,Et=0;for(We=0;We<8;++We){re=be[Et],pe=be[Et+1],Se=be[Et+2],st=be[Et+3],Nt=be[Et+4],lt=be[Et+5],At=be[Et+6];var Rt=re+(ot=be[Et+7]),$e=re-ot,gt=pe+At,Fe=pe-At,rt=Se+lt,at=Se-lt,It=st+Nt,ht=st-Nt,Je=Rt+It,ve=Rt-It,Ge=gt+rt,_e=gt-rt;be[Et]=Je+Ge,be[Et+4]=Je-Ge;var xe=.707106781*(_e+ve);be[Et+2]=ve+xe,be[Et+6]=ve-xe;var Ue=.382683433*((Je=ht+at)-(_e=Fe+$e)),Pe=.5411961*Je+Ue,Ye=1.306562965*_e+Ue,mt=.707106781*(Ge=at+Fe),de=$e+mt,tt=$e-mt;be[Et+5]=tt+Pe,be[Et+3]=tt-Pe,be[Et+1]=de+Ye,be[Et+7]=de-Ye,Et+=8}for(Et=0,We=0;We<8;++We){re=be[Et],pe=be[Et+8],Se=be[Et+16],st=be[Et+24],Nt=be[Et+32],lt=be[Et+40],At=be[Et+48];var De=re+(ot=be[Et+56]),it=re-ot,St=pe+At,Lt=pe-At,Ve=Se+lt,kt=Se-lt,Oe=st+Nt,Xt=st-Nt,rs=De+Oe,ds=De-Oe,Ss=St+Ve,Ns=St-Ve;be[Et]=rs+Ss,be[Et+32]=rs-Ss;var ke=.707106781*(Ns+ds);be[Et+16]=ds+ke,be[Et+48]=ds-ke;var dt=.382683433*((rs=Xt+kt)-(Ns=Lt+it)),et=.5411961*rs+dt,Qt=1.306562965*Ns+dt,ut=.707106781*(Ss=kt+Lt),qt=it+ut,jt=it-ut;be[Et+40]=jt+et,be[Et+24]=jt-et,be[Et+8]=qt+Qt,be[Et+56]=qt-Qt,Et++}for(We=0;We<64;++We)Dt=be[We]*Te[We],g[We]=Dt>0?Dt+.5|0:Dt-.5|0;return g})(I,U),Re=0;Re<64;++Re)N[G[Re]]=ce[Re];var X=N[0]-Q;Q=N[0],X==0?K(H[0]):(K(H[y[ae=32767+X]]),K(p[ae]));for(var me=63;me>0&&N[me]==0;)me--;if(me==0)return K(fe),Q;for(var he,Z=1;Z<=me;){for(var ie=Z;N[Z]==0&&Z<=me;)++Z;var te=Z-ie;if(te>=16){he=te>>4;for(var je=1;je<=he;++je)K(ge);te&=15}ae=32767+N[Z],K(q[(te<<4)+y[ae]]),K(p[ae]),Z++}return me!=63&&K(fe),Q}function T(I){I=Math.min(Math.max(I,1),100),l!=I&&((function(U){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var q=c((Q[H]*U+50)/100);q=Math.min(Math.max(q,1),255),d[G[H]]=q}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var ge=c((ae[fe]*U+50)/100);ge=Math.min(Math.max(ge,1),255),u[G[fe]]=ge}for(var ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Re=0,X=0;X<8;X++)for(var me=0;me<8;me++)f[Re]=1/(d[G[Re]]*ce[X]*ce[me]*8),m[Re]=1/(u[G[Re]]*ce[X]*ce[me]*8),Re++})(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),l=I)}this.encode=function(I,U){U&&T(U),C=new Array,v=0,R=7,se(65496),se(65504),se(16),w(74),w(70),w(73),w(70),w(0),w(1),w(1),w(0),se(1),se(1),w(0),w(0),(function(){se(65499),se(132),w(0);for(var pe=0;pe<64;pe++)w(d[pe]);w(1);for(var Se=0;Se<64;Se++)w(u[Se])})(),(function(pe,Se){se(65472),se(17),w(8),se(Se),se(pe),w(3),w(1),w(17),w(0),w(2),w(17),w(1),w(3),w(17),w(1)})(I.width,I.height),(function(){se(65476),se(418),w(0);for(var pe=0;pe<16;pe++)w(W[pe+1]);for(var Se=0;Se<=11;Se++)w(j[Se]);w(16);for(var st=0;st<16;st++)w(S[st+1]);for(var Nt=0;Nt<=161;Nt++)w(P[Nt]);w(1);for(var lt=0;lt<16;lt++)w(F[lt+1]);for(var At=0;At<=11;At++)w(ee[At]);w(17);for(var ot=0;ot<16;ot++)w(J[ot+1]);for(var We=0;We<=161;We++)w($[We])})(),se(65498),se(12),w(3),w(1),w(0),w(2),w(17),w(3),w(17),w(0),w(63),w(0);var Q=0,H=0,q=0;v=0,R=7,this.encode.displayName="_encode_";for(var ae,fe,ge,ce,Re,X,me,he,Z,ie=I.data,te=I.width,je=I.height,be=4*te,Te=0;Te<je;){for(ae=0;ae<be;){for(Re=be*Te+ae,me=-1,he=0,Z=0;Z<64;Z++)X=Re+(he=Z>>3)*be+(me=4*(7&Z)),Te+he>=je&&(X-=be*(Te+1+he-je)),ae+me>=be&&(X-=ae+me-be+4),fe=ie[X++],ge=ie[X++],ce=ie[X++],A[Z]=(V[fe]+V[ge+256|0]+V[ce+512|0]>>16)-128,M[Z]=(V[fe+768|0]+V[ge+1024|0]+V[ce+1280|0]>>16)-128,L[Z]=(V[fe+1280|0]+V[ge+1536|0]+V[ce+1792|0]>>16)-128;Q=oe(A,f,Q,e,r),H=oe(M,m,H,n,i),q=oe(L,m,q,n,i),ae+=32}Te+=8}if(R>=0){var re=[];re[1]=R+1,re[0]=(1<<R+1)-1,K(re)}return se(65497),new Uint8Array(C)},t=t||50,(function(){for(var I=String.fromCharCode,U=0;U<256;U++)k[U]=I(U)})(),e=Y(W,j),n=Y(F,ee),r=Y(S,P),i=Y(J,$),(function(){for(var I=1,U=2,Q=1;Q<=15;Q++){for(var H=I;H<U;H++)y[32767+H]=Q,p[32767+H]=[],p[32767+H][1]=Q,p[32767+H][0]=H;for(var q=-(U-1);q<=-I;q++)y[32767+q]=Q,p[32767+q]=[],p[32767+q][1]=Q,p[32767+q][0]=U-1+q;I<<=1,U<<=1}})(),(function(){for(var I=0;I<256;I++)V[I]=19595*I,V[I+256|0]=38470*I,V[I+512|0]=7471*I+32768,V[I+768|0]=-11059*I,V[I+1024|0]=-21709*I,V[I+1280|0]=32768*I+8421375,V[I+1536|0]=-27439*I,V[I+1792|0]=-5329*I})(),T(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function vo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function hT(t){function e(j){if(!j)throw Error("assert :P")}function n(j,S,P){for(var F=0;4>F;F++)if(j[S+F]!=P.charCodeAt(F))return!0;return!1}function r(j,S,P,F,ee){for(var J=0;J<ee;J++)j[S+J]=P[F+J]}function i(j,S,P,F){for(var ee=0;ee<F;ee++)j[S+ee]=P}function l(j){return new Int32Array(j)}function c(j,S){for(var P=[],F=0;F<j;F++)P.push(new S);return P}function d(j,S){var P=[];return(function F(ee,J,$){for(var Y=$[J],K=0;K<Y&&(ee.push($.length>J+1?[]:new S),!($.length<J+1));K++)F(ee[K],J+1,$)})(P,0,j),P}var u=function(){var j=this;function S(b,E){for(var z=1<<E-1>>>0;b&z;)z>>>=1;return z?(b&z-1)+z:b}function P(b,E,z,ne,Ne){e(!(ne%z));do b[E+(ne-=z)]=Ne;while(0<ne)}function F(b,E,z,ne,Ne){if(e(2328>=Ne),512>=Ne)var Me=l(512);else if((Me=l(Ne))==null)return 0;return(function(we,Be,Qe,qe,yt,Ft){var ze,Tt,Pt=Be,ts=1<<Qe,Ut=l(16),Zt=l(16);for(e(yt!=0),e(qe!=null),e(we!=null),e(0<Qe),Tt=0;Tt<yt;++Tt){if(15<qe[Tt])return 0;++Ut[qe[Tt]]}if(Ut[0]==yt)return 0;for(Zt[1]=0,ze=1;15>ze;++ze){if(Ut[ze]>1<<ze)return 0;Zt[ze+1]=Zt[ze]+Ut[ze]}for(Tt=0;Tt<yt;++Tt)ze=qe[Tt],0<qe[Tt]&&(Ft[Zt[ze]++]=Tt);if(Zt[15]==1)return(qe=new ee).g=0,qe.value=Ft[0],P(we,Pt,1,ts,qe),ts;var as,_s=-1,fs=ts-1,$s=0,Ws=1,mn=1,Gs=1<<Qe;for(Tt=0,ze=1,yt=2;ze<=Qe;++ze,yt<<=1){if(Ws+=mn<<=1,0>(mn-=Ut[ze]))return 0;for(;0<Ut[ze];--Ut[ze])(qe=new ee).g=ze,qe.value=Ft[Tt++],P(we,Pt+$s,yt,Gs,qe),$s=S($s,ze)}for(ze=Qe+1,yt=2;15>=ze;++ze,yt<<=1){if(Ws+=mn<<=1,0>(mn-=Ut[ze]))return 0;for(;0<Ut[ze];--Ut[ze]){if(qe=new ee,($s&fs)!=_s){for(Pt+=Gs,as=1<<(_s=ze)-Qe;15>_s&&!(0>=(as-=Ut[_s]));)++_s,as<<=1;ts+=Gs=1<<(as=_s-Qe),we[Be+(_s=$s&fs)].g=as+Qe,we[Be+_s].value=Pt-Be-_s}qe.g=ze-Qe,qe.value=Ft[Tt++],P(we,Pt+($s>>Qe),yt,Gs,qe),$s=S($s,ze)}}return Ws!=2*Zt[15]-1?0:ts})(b,E,z,ne,Ne,Me)}function ee(){this.value=this.g=0}function J(){this.value=this.g=0}function $(){this.G=c(5,ee),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Uo,J)}function Y(b,E,z,ne){e(b!=null),e(E!=null),e(2147483648>ne),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=E,b.pa=z,b.Jd=E,b.Yc=z+ne,b.Zc=4<=ne?z+ne-4+1:z,fe(b)}function K(b,E){for(var z=0;0<E--;)z|=ce(b,128)<<E;return z}function w(b,E){var z=K(b,E);return ge(b)?-z:z}function se(b,E,z,ne){var Ne,Me=0;for(e(b!=null),e(E!=null),e(4294967288>ne),b.Sb=ne,b.Ra=0,b.u=0,b.h=0,4<ne&&(ne=4),Ne=0;Ne<ne;++Ne)Me+=E[z+Ne]<<8*Ne;b.Ra=Me,b.bb=ne,b.oa=E,b.pa=z}function oe(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<El-8>>>0,++b.bb,b.u-=8;H(b)&&(b.h=1,b.u=0)}function T(b,E){if(e(0<=E),!b.h&&E<=da){var z=Q(b)&_a[E];return b.u+=E,oe(b),z}return b.h=1,b.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(b){return b.Ra>>>(b.u&El-1)>>>0}function H(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>El}function q(b,E){b.u=E,b.h=H(b)}function ae(b){b.u>=jl&&(e(b.u>=jl),oe(b))}function fe(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function ge(b){return K(b,1)}function ce(b,E){var z=b.Ca;0>b.b&&fe(b);var ne=b.b,Ne=z*E>>>8,Me=(b.I>>>ne>Ne)+0;for(Me?(z-=Ne,b.I-=Ne+1<<ne>>>0):z=Ne+1,ne=z,Ne=0;256<=ne;)Ne+=8,ne>>=8;return ne=7^Ne+co[ne],b.b-=ne,b.Ca=(z<<ne)-1,Me}function Re(b,E,z){b[E+0]=z>>24&255,b[E+1]=z>>16&255,b[E+2]=z>>8&255,b[E+3]=255&z}function X(b,E){return b[E+0]|b[E+1]<<8}function me(b,E){return X(b,E)|b[E+2]<<16}function he(b,E){return X(b,E)|X(b,E+2)<<16}function Z(b,E){var z=1<<E;return e(b!=null),e(0<E),b.X=l(z),b.X==null?0:(b.Mb=32-E,b.Xa=E,1)}function ie(b,E){e(b!=null),e(E!=null),e(b.Xa==E.Xa),r(E.X,0,b.X,0,1<<E.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function je(b,E,z,ne){e(z!=null),e(ne!=null);var Ne=z[0],Me=ne[0];return Ne==0&&(Ne=(b*Me+E/2)/E),Me==0&&(Me=(E*Ne+b/2)/b),0>=Ne||0>=Me?0:(z[0]=Ne,ne[0]=Me,1)}function be(b,E){return b+(1<<E)-1>>>E}function Te(b,E){return((4278255360&b)+(4278255360&E)>>>0&4278255360)+((16711935&b)+(16711935&E)>>>0&16711935)>>>0}function re(b,E){j[E]=function(z,ne,Ne,Me,we,Be,Qe){var qe;for(qe=0;qe<we;++qe){var yt=j[b](Be[Qe+qe-1],Ne,Me+qe);Be[Qe+qe]=Te(z[ne+qe],yt)}}}function pe(){this.ud=this.hd=this.jd=0}function Se(b,E){return((4278124286&(b^E))>>>1)+(b&E)>>>0}function st(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Nt(b,E){return st(b+(b-E+.5>>1))}function lt(b,E,z){return Math.abs(E-z)-Math.abs(b-z)}function At(b,E,z,ne,Ne,Me,we){for(ne=Me[we-1],z=0;z<Ne;++z)Me[we+z]=ne=Te(b[E+z],ne)}function ot(b,E,z,ne,Ne){var Me;for(Me=0;Me<z;++Me){var we=b[E+Me],Be=we>>8&255,Qe=16711935&(Qe=(Qe=16711935&we)+((Be<<16)+Be));ne[Ne+Me]=(4278255360&we)+Qe>>>0}}function We(b,E){E.jd=255&b,E.hd=b>>8&255,E.ud=b>>16&255}function Dt(b,E,z,ne,Ne,Me){var we;for(we=0;we<ne;++we){var Be=E[z+we],Qe=Be>>>8,qe=Be,yt=255&(yt=(yt=Be>>>16)+((b.jd<<24>>24)*(Qe<<24>>24)>>>5));qe=255&(qe=(qe+=(b.hd<<24>>24)*(Qe<<24>>24)>>>5)+((b.ud<<24>>24)*(yt<<24>>24)>>>5)),Ne[Me+we]=(4278255360&Be)+(yt<<16)+qe}}function Et(b,E,z,ne,Ne){j[E]=function(Me,we,Be,Qe,qe,yt,Ft,ze,Tt){for(Qe=Ft;Qe<ze;++Qe)for(Ft=0;Ft<Tt;++Ft)qe[yt++]=Ne(Be[ne(Me[we++])])},j[b]=function(Me,we,Be,Qe,qe,yt,Ft){var ze=8>>Me.b,Tt=Me.Ea,Pt=Me.K[0],ts=Me.w;if(8>ze)for(Me=(1<<Me.b)-1,ts=(1<<ze)-1;we<Be;++we){var Ut,Zt=0;for(Ut=0;Ut<Tt;++Ut)Ut&Me||(Zt=ne(Qe[qe++])),yt[Ft++]=Ne(Pt[Zt&ts]),Zt>>=ze}else j["VP8LMapColor"+z](Qe,qe,Pt,ts,yt,Ft,we,Be,Tt)}}function Rt(b,E,z,ne,Ne){for(z=E+z;E<z;){var Me=b[E++];ne[Ne++]=Me>>16&255,ne[Ne++]=Me>>8&255,ne[Ne++]=255&Me}}function $e(b,E,z,ne,Ne){for(z=E+z;E<z;){var Me=b[E++];ne[Ne++]=Me>>16&255,ne[Ne++]=Me>>8&255,ne[Ne++]=255&Me,ne[Ne++]=Me>>24&255}}function gt(b,E,z,ne,Ne){for(z=E+z;E<z;){var Me=(we=b[E++])>>16&240|we>>12&15,we=240&we|we>>28&15;ne[Ne++]=Me,ne[Ne++]=we}}function Fe(b,E,z,ne,Ne){for(z=E+z;E<z;){var Me=(we=b[E++])>>16&248|we>>13&7,we=we>>5&224|we>>3&31;ne[Ne++]=Me,ne[Ne++]=we}}function rt(b,E,z,ne,Ne){for(z=E+z;E<z;){var Me=b[E++];ne[Ne++]=255&Me,ne[Ne++]=Me>>8&255,ne[Ne++]=Me>>16&255}}function at(b,E,z,ne,Ne,Me){if(Me==0)for(z=E+z;E<z;)Re(ne,((Me=b[E++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Ne+=32;else r(ne,Ne,b,E,z)}function It(b,E){j[E][0]=j[b+"0"],j[E][1]=j[b+"1"],j[E][2]=j[b+"2"],j[E][3]=j[b+"3"],j[E][4]=j[b+"4"],j[E][5]=j[b+"5"],j[E][6]=j[b+"6"],j[E][7]=j[b+"7"],j[E][8]=j[b+"8"],j[E][9]=j[b+"9"],j[E][10]=j[b+"10"],j[E][11]=j[b+"11"],j[E][12]=j[b+"12"],j[E][13]=j[b+"13"],j[E][14]=j[b+"0"],j[E][15]=j[b+"0"]}function ht(b){return b==Pu||b==Hh||b==Cd||b==zh}function Je(){this.eb=[],this.size=this.A=this.fb=0}function ve(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ge(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Je,this.f.kb=new ve,this.sd=null}function _e(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ue(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Pe(b,E){var z=b.T,ne=E.ba.f.RGBA,Ne=ne.eb,Me=ne.fb+b.ka*ne.A,we=Ai[E.ba.S],Be=b.y,Qe=b.O,qe=b.f,yt=b.N,Ft=b.ea,ze=b.W,Tt=E.cc,Pt=E.dc,ts=E.Mc,Ut=E.Nc,Zt=b.ka,as=b.ka+b.T,_s=b.U,fs=_s+1>>1;for(Zt==0?we(Be,Qe,null,null,qe,yt,Ft,ze,qe,yt,Ft,ze,Ne,Me,null,null,_s):(we(E.ec,E.fc,Be,Qe,Tt,Pt,ts,Ut,qe,yt,Ft,ze,Ne,Me-ne.A,Ne,Me,_s),++z);Zt+2<as;Zt+=2)Tt=qe,Pt=yt,ts=Ft,Ut=ze,yt+=b.Rc,ze+=b.Rc,Me+=2*ne.A,we(Be,(Qe+=2*b.fa)-b.fa,Be,Qe,Tt,Pt,ts,Ut,qe,yt,Ft,ze,Ne,Me-ne.A,Ne,Me,_s);return Qe+=b.fa,b.j+as<b.o?(r(E.ec,E.fc,Be,Qe,_s),r(E.cc,E.dc,qe,yt,fs),r(E.Mc,E.Nc,Ft,ze,fs),z--):1&as||we(Be,Qe,null,null,qe,yt,Ft,ze,qe,yt,Ft,ze,Ne,Me+ne.A,null,null,_s),z}function Ye(b,E,z){var ne=b.F,Ne=[b.J];if(ne!=null){var Me=b.U,we=E.ba.S,Be=we==wu||we==Cd;E=E.ba.f.RGBA;var Qe=[0],qe=b.ka;Qe[0]=b.T,b.Kb&&(qe==0?--Qe[0]:(--qe,Ne[0]-=b.width),b.j+b.ka+b.T==b.o&&(Qe[0]=b.o-b.j-qe));var yt=E.eb;qe=E.fb+qe*E.A,b=Iu(ne,Ne[0],b.width,Me,Qe,yt,qe+(Be?0:3),E.A),e(z==Qe),b&&ht(we)&&yc(yt,qe,Be,Me,Qe,E.A)}return 0}function mt(b){var E=b.ma,z=E.ba.S,ne=11>z,Ne=z==Ji||z==Ga||z==wu||z==_d||z==12||ht(z);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!oo(E.Oa,b,Ne?11:12))return 0;if(Ne&&ht(z)&&Ru(),b.da)alert("todo:use_scaling");else{if(ne){if(E.Ib=Ue,b.Kb){if(z=b.U+1>>1,E.memory=l(b.U+2*z),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+b.U,E.Mc=E.cc,E.Nc=E.dc+z,E.Ib=Pe,Ru()}}else alert("todo:EmitYUV");Ne&&(E.Jb=Ye,ne&&gl())}if(ne&&!Yo){for(b=0;256>b;++b)ki[b]=89858*(b-128)+Nd>>qa,j_[b]=-22014*(b-128)+Nd,kg[b]=-45773*(b-128),e0[b]=113618*(b-128)+Nd>>qa;for(b=vc;b<Go;++b)E=76283*(b-16)+Nd>>qa,I_[b-vc]=ct(E,255),O_[b-vc]=ct(E+8>>4,15);Yo=1}return 1}function de(b){var E=b.ma,z=b.U,ne=b.T;return e(!(1&b.ka)),0>=z||0>=ne?0:(z=E.Ib(b,E),E.Jb!=null&&E.Jb(b,E,z),E.Dc+=z,1)}function tt(b){b.ma.memory=null}function De(b,E,z,ne){return T(b,8)!=47?0:(E[0]=T(b,14)+1,z[0]=T(b,14)+1,ne[0]=T(b,1),T(b,3)!=0?0:!b.h)}function it(b,E){if(4>b)return b+1;var z=b-2>>1;return(2+(1&b)<<z)+T(E,z)+1}function St(b,E){return 120<E?E-120:1<=(z=((z=Va[E-1])>>4)*b+(8-(15&z)))?z:1;var z}function Lt(b,E,z){var ne=Q(z),Ne=b[E+=255&ne].g-8;return 0<Ne&&(q(z,z.u+8),ne=Q(z),E+=b[E].value,E+=ne&(1<<Ne)-1),q(z,z.u+b[E].g),b[E].value}function Ve(b,E,z){return z.g+=b.g,z.value+=b.value<<E>>>0,e(8>=z.g),b.g}function kt(b,E,z){var ne=b.xc;return e((E=ne==0?0:b.vc[b.md*(z>>ne)+(E>>ne)])<b.Wb),b.Ya[E]}function Oe(b,E,z,ne){var Ne=b.ab,Me=b.c*E,we=b.C;E=we+E;var Be=z,Qe=ne;for(ne=b.Ta,z=b.Ua;0<Ne--;){var qe=b.gc[Ne],yt=we,Ft=E,ze=Be,Tt=Qe,Pt=(Qe=ne,Be=z,qe.Ea);switch(e(yt<Ft),e(Ft<=qe.nc),qe.hc){case 2:Zr(ze,Tt,(Ft-yt)*Pt,Qe,Be);break;case 0:var ts=yt,Ut=Ft,Zt=Qe,as=Be,_s=(Gs=qe).Ea;ts==0&&(md(ze,Tt,null,null,1,Zt,as),At(ze,Tt+1,0,0,_s-1,Zt,as+1),Tt+=_s,as+=_s,++ts);for(var fs=1<<Gs.b,$s=fs-1,Ws=be(_s,Gs.b),mn=Gs.K,Gs=Gs.w+(ts>>Gs.b)*Ws;ts<Ut;){var On=mn,Tr=Gs,Cn=1;for(gd(ze,Tt,Zt,as-_s,1,Zt,as);Cn<_s;){var Bs=(Cn&~$s)+fs;Bs>_s&&(Bs=_s),(0,uo[On[Tr++]>>8&15])(ze,Tt+ +Cn,Zt,as+Cn-_s,Bs-Cn,Zt,as+Cn),Cn=Bs}Tt+=_s,as+=_s,++ts&$s||(Gs+=Ws)}Ft!=qe.nc&&r(Qe,Be-Pt,Qe,Be+(Ft-yt-1)*Pt,Pt);break;case 1:for(Pt=ze,Ut=Tt,_s=(ze=qe.Ea)-(as=ze&~(Zt=(Tt=1<<qe.b)-1)),ts=be(ze,qe.b),fs=qe.K,qe=qe.w+(yt>>qe.b)*ts;yt<Ft;){for($s=fs,Ws=qe,mn=new pe,Gs=Ut+as,On=Ut+ze;Ut<Gs;)We($s[Ws++],mn),xd(mn,Pt,Ut,Tt,Qe,Be),Ut+=Tt,Be+=Tt;Ut<On&&(We($s[Ws++],mn),xd(mn,Pt,Ut,_s,Qe,Be),Ut+=_s,Be+=_s),++yt&Zt||(qe+=ts)}break;case 3:if(ze==Qe&&Tt==Be&&0<qe.b){for(Ut=Qe,ze=Pt=Be+(Ft-yt)*Pt-(as=(Ft-yt)*be(qe.Ea,qe.b)),Tt=Qe,Zt=Be,ts=[],as=(_s=as)-1;0<=as;--as)ts[as]=Tt[Zt+as];for(as=_s-1;0<=as;--as)Ut[ze+as]=ts[as];Qh(qe,yt,Ft,Qe,Pt,Qe,Be)}else Qh(qe,yt,Ft,ze,Tt,Qe,Be)}Be=ne,Qe=z}Qe!=z&&r(ne,z,Be,Qe,Me)}function Xt(b,E){var z=b.V,ne=b.Ba+b.c*b.C,Ne=E-b.C;if(e(E<=b.l.o),e(16>=Ne),0<Ne){var Me=b.l,we=b.Ta,Be=b.Ua,Qe=Me.width;if(Oe(b,Ne,z,ne),Ne=Be=[Be],e((z=b.C)<(ne=E)),e(Me.v<Me.va),ne>Me.o&&(ne=Me.o),z<Me.j){var qe=Me.j-z;z=Me.j,Ne[0]+=qe*Qe}if(z>=ne?z=0:(Ne[0]+=4*Me.v,Me.ka=z-Me.j,Me.U=Me.va-Me.v,Me.T=ne-z,z=1),z){if(Be=Be[0],11>(z=b.ca).S){var yt=z.f.RGBA,Ft=(ne=z.S,Ne=Me.U,Me=Me.T,qe=yt.eb,yt.A),ze=Me;for(yt=yt.fb+b.Ma*yt.A;0<ze--;){var Tt=we,Pt=Be,ts=Ne,Ut=qe,Zt=yt;switch(ne){case Vh:pd(Tt,Pt,ts,Ut,Zt);break;case Ji:ho(Tt,Pt,ts,Ut,Zt);break;case Pu:ho(Tt,Pt,ts,Ut,Zt),yc(Ut,Zt,0,ts,1,0);break;case $h:_c(Tt,Pt,ts,Ut,Zt);break;case Ga:at(Tt,Pt,ts,Ut,Zt,1);break;case Hh:at(Tt,Pt,ts,Ut,Zt,1),yc(Ut,Zt,0,ts,1,0);break;case wu:at(Tt,Pt,ts,Ut,Zt,0);break;case Cd:at(Tt,Pt,ts,Ut,Zt,0),yc(Ut,Zt,1,ts,1,0);break;case _d:fo(Tt,Pt,ts,Ut,Zt);break;case zh:fo(Tt,Pt,ts,Ut,Zt),Qa(Ut,Zt,ts,1,0);break;case Wo:Ml(Tt,Pt,ts,Ut,Zt);break;default:e(0)}Be+=Qe,yt+=Ft}b.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=z.height)}}b.C=E,e(b.C<=b.i)}function rs(b){var E;if(0<b.ua)return 0;for(E=0;E<b.Wb;++E){var z=b.Ya[E].G,ne=b.Ya[E].H;if(0<z[1][ne[1]+0].g||0<z[2][ne[2]+0].g||0<z[3][ne[3]+0].g)return 0}return 1}function ds(b,E,z,ne,Ne,Me){if(b.Z!=0){var we=b.qd,Be=b.rd;for(e(xo[b.Z]!=null);E<z;++E)xo[b.Z](we,Be,ne,Ne,ne,Ne,Me),we=ne,Be=Ne,Ne+=Me;b.qd=we,b.rd=Be}}function Ss(b,E){var z=b.l.ma,ne=z.Z==0||z.Z==1?b.l.j:b.C;if(ne=b.C<ne?ne:b.C,e(E<=b.l.o),E>ne){var Ne=b.l.width,Me=z.ca,we=z.tb+Ne*ne,Be=b.V,Qe=b.Ba+b.c*ne,qe=b.gc;e(b.ab==1),e(qe[0].hc==3),Ol(qe[0],ne,E,Be,Qe,Me,we),ds(z,ne,E,Me,we,Ne)}b.C=b.Ma=E}function Ns(b,E,z,ne,Ne,Me,we){var Be=b.$/ne,Qe=b.$%ne,qe=b.m,yt=b.s,Ft=z+b.$,ze=Ft;Ne=z+ne*Ne;var Tt=z+ne*Me,Pt=280+yt.ua,ts=b.Pb?Be:16777216,Ut=0<yt.ua?yt.Wa:null,Zt=yt.wc,as=Ft<Tt?kt(yt,Qe,Be):null;e(b.C<Me),e(Tt<=Ne);var _s=!1;e:for(;;){for(;_s||Ft<Tt;){var fs=0;if(Be>=ts){var $s=Ft-z;e((ts=b).Pb),ts.wd=ts.m,ts.xd=$s,0<ts.s.ua&&ie(ts.s.Wa,ts.s.vb),ts=Be+Bo}if(Qe&Zt||(as=kt(yt,Qe,Be)),e(as!=null),as.Qb&&(E[Ft]=as.qb,_s=!0),!_s)if(ae(qe),as.jc){fs=qe,$s=E;var Ws=Ft,mn=as.pd[Q(fs)&Uo-1];e(as.jc),256>mn.g?(q(fs,fs.u+mn.g),$s[Ws]=mn.value,fs=0):(q(fs,fs.u+mn.g-256),e(256<=mn.value),fs=mn.value),fs==0&&(_s=!0)}else fs=Lt(as.G[0],as.H[0],qe);if(qe.h)break;if(_s||256>fs){if(!_s)if(as.nd)E[Ft]=(as.qb|fs<<8)>>>0;else{if(ae(qe),_s=Lt(as.G[1],as.H[1],qe),ae(qe),$s=Lt(as.G[2],as.H[2],qe),Ws=Lt(as.G[3],as.H[3],qe),qe.h)break;E[Ft]=(Ws<<24|_s<<16|fs<<8|$s)>>>0}if(_s=!1,++Ft,++Qe>=ne&&(Qe=0,++Be,we!=null&&Be<=Me&&!(Be%16)&&we(b,Be),Ut!=null))for(;ze<Ft;)fs=E[ze++],Ut.X[(506832829*fs&4294967295)>>>Ut.Mb]=fs}else if(280>fs){if(fs=it(fs-256,qe),$s=Lt(as.G[4],as.H[4],qe),ae(qe),$s=St(ne,$s=it($s,qe)),qe.h)break;if(Ft-z<$s||Ne-Ft<fs)break e;for(Ws=0;Ws<fs;++Ws)E[Ft+Ws]=E[Ft+Ws-$s];for(Ft+=fs,Qe+=fs;Qe>=ne;)Qe-=ne,++Be,we!=null&&Be<=Me&&!(Be%16)&&we(b,Be);if(e(Ft<=Ne),Qe&Zt&&(as=kt(yt,Qe,Be)),Ut!=null)for(;ze<Ft;)fs=E[ze++],Ut.X[(506832829*fs&4294967295)>>>Ut.Mb]=fs}else{if(!(fs<Pt))break e;for(_s=fs-280,e(Ut!=null);ze<Ft;)fs=E[ze++],Ut.X[(506832829*fs&4294967295)>>>Ut.Mb]=fs;fs=Ft,e(!(_s>>>($s=Ut).Xa)),E[fs]=$s.X[_s],_s=!0}_s||e(qe.h==H(qe))}if(b.Pb&&qe.h&&Ft<Ne)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ie(b.s.vb,b.s.Wa);else{if(qe.h)break e;we!=null&&we(b,Be>Me?Me:Be),b.a=0,b.$=Ft-z}return 1}return b.a=3,0}function ke(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var E=b.Wa;E!=null&&(E.X=null),b.vb=null,e(b!=null)}function dt(){var b=new un;return b==null?null:(b.a=0,b.xb=Kf,It("Predictor","VP8LPredictors"),It("Predictor","VP8LPredictors_C"),It("PredictorAdd","VP8LPredictorsAdd"),It("PredictorAdd","VP8LPredictorsAdd_C"),Zr=ot,xd=Dt,pd=Rt,ho=$e,fo=gt,Ml=Fe,_c=rt,j.VP8LMapColor32b=Il,j.VP8LMapColor8b=Li,b)}function et(b,E,z,ne,Ne){var Me=1,we=[b],Be=[E],Qe=ne.m,qe=ne.s,yt=null,Ft=0;e:for(;;){if(z)for(;Me&&T(Qe,1);){var ze=we,Tt=Be,Pt=ne,ts=1,Ut=Pt.m,Zt=Pt.gc[Pt.ab],as=T(Ut,2);if(Pt.Oc&1<<as)Me=0;else{switch(Pt.Oc|=1<<as,Zt.hc=as,Zt.Ea=ze[0],Zt.nc=Tt[0],Zt.K=[null],++Pt.ab,e(4>=Pt.ab),as){case 0:case 1:Zt.b=T(Ut,3)+2,ts=et(be(Zt.Ea,Zt.b),be(Zt.nc,Zt.b),0,Pt,Zt.K),Zt.K=Zt.K[0];break;case 3:var _s,fs=T(Ut,8)+1,$s=16<fs?0:4<fs?1:2<fs?2:3;if(ze[0]=be(Zt.Ea,$s),Zt.b=$s,_s=ts=et(fs,1,0,Pt,Zt.K)){var Ws,mn=fs,Gs=Zt,On=1<<(8>>Gs.b),Tr=l(On);if(Tr==null)_s=0;else{var Cn=Gs.K[0],Bs=Gs.w;for(Tr[0]=Gs.K[0][0],Ws=1;Ws<1*mn;++Ws)Tr[Ws]=Te(Cn[Bs+Ws],Tr[Ws-1]);for(;Ws<4*On;++Ws)Tr[Ws]=0;Gs.K[0]=null,Gs.K[0]=Tr,_s=1}}ts=_s;break;case 2:break;default:e(0)}Me=ts}}if(we=we[0],Be=Be[0],Me&&T(Qe,1)&&!(Me=1<=(Ft=T(Qe,4))&&11>=Ft)){ne.a=3;break e}var Ts;if(Ts=Me)t:{var Pr,on,Nn,nr=ne,gi=we,Ui=Be,yr=Ft,ii=z,Zi=nr.m,ai=nr.s,Tn=[null],Gn=1,Ar=0,qn=$a[yr];s:for(;;){if(ii&&T(Zi,1)){var xi=T(Zi,3)+2,kr=be(gi,xi),Yn=be(Ui,xi),si=kr*Yn;if(!et(kr,Yn,0,nr,Tn))break s;for(Tn=Tn[0],ai.xc=xi,Pr=0;Pr<si;++Pr){var rr=Tn[Pr]>>8&65535;Tn[Pr]=rr,rr>=Gn&&(Gn=rr+1)}}if(Zi.h)break s;for(on=0;5>on;++on){var li=Nc[on];!on&&0<yr&&(li+=1<<yr),Ar<li&&(Ar=li)}var oi=c(Gn*qn,ee),hr=Gn,Fn=c(hr,$);if(Fn==null)var ea=null;else e(65536>=hr),ea=Fn;var Gr=l(Ar);if(ea==null||Gr==null||oi==null){nr.a=1;break s}var tn=oi;for(Pr=Nn=0;Pr<Gn;++Pr){var nn=ea[Pr],Vn=nn.G,Ca=nn.H,Xa=0,ha=1,ci=0;for(on=0;5>on;++on){li=Nc[on],Vn[on]=tn,Ca[on]=Nn,!on&&0<yr&&(li+=1<<yr);r:{var Vo,$o=li,s0=nr,br=Gr,Gf=tn,Yf=Nn,n0=0,po=s0.m,M_=T(po,1);if(i(br,0,0,$o),M_){var Vf=T(po,1)+1,$f=T(po,1),r0=T(po,$f==0?1:8);br[r0]=1,Vf==2&&(br[r0=T(po,8)]=1);var Di=1}else{var Yr=l(19),Wu=T(po,4)+4;if(19<Wu){s0.a=3;var Ho=0;break r}for(Vo=0;Vo<Wu;++Vo)Yr[Au[Vo]]=T(po,3);var vd=void 0,Dc=void 0,Pl=s0,i0=Yr,Dd=$o,a0=br,l0=0,_o=Pl.m,Hf=8,zf=c(128,ee);n:for(;F(zf,0,7,i0,19);){if(T(_o,1)){var Ug=2+2*T(_o,3);if((vd=2+T(_o,Ug))>Dd)break n}else vd=Dd;for(Dc=0;Dc<Dd&&vd--;){ae(_o);var qf=zf[0+(127&Q(_o))];q(_o,_o.u+qf.g);var zo=qf.value;if(16>zo)a0[Dc++]=zo,zo!=0&&(Hf=zo);else{var Wg=zo==16,Bg=zo-16,Fg=yd[Bg],Xf=T(_o,Ya[Bg])+Fg;if(Dc+Xf>Dd)break n;for(var Kg=Wg?Hf:0;0<Xf--;)a0[Dc++]=Kg}}l0=1;break n}l0||(Pl.a=3),Di=l0}(Di=Di&&!po.h)&&(n0=F(Gf,Yf,8,br,$o)),Di&&n0!=0?Ho=n0:(s0.a=3,Ho=0)}if(Ho==0)break s;if(ha&&qh[on]==1&&(ha=tn[Nn].g==0),Xa+=tn[Nn].g,Nn+=Ho,3>=on){var Rc,o0=Gr[0];for(Rc=1;Rc<li;++Rc)Gr[Rc]>o0&&(o0=Gr[Rc]);ci+=o0}}if(nn.nd=ha,nn.Qb=0,ha&&(nn.qb=(Vn[3][Ca[3]+0].value<<24|Vn[1][Ca[1]+0].value<<16|Vn[2][Ca[2]+0].value)>>>0,Xa==0&&256>Vn[0][Ca[0]+0].value&&(nn.Qb=1,nn.qb+=Vn[0][Ca[0]+0].value<<8)),nn.jc=!nn.Qb&&6>ci,nn.jc){var Bu,Al=nn;for(Bu=0;Bu<Uo;++Bu){var Co=Bu,yo=Al.pd[Co],c0=Al.G[0][Al.H[0]+Co];256<=c0.value?(yo.g=c0.g+256,yo.value=c0.value):(yo.g=0,yo.value=0,Co>>=Ve(c0,8,yo),Co>>=Ve(Al.G[1][Al.H[1]+Co],16,yo),Co>>=Ve(Al.G[2][Al.H[2]+Co],0,yo),Ve(Al.G[3][Al.H[3]+Co],24,yo))}}}ai.vc=Tn,ai.Wb=Gn,ai.Ya=ea,ai.yc=oi,Ts=1;break t}Ts=0}if(!(Me=Ts)){ne.a=3;break e}if(0<Ft){if(qe.ua=1<<Ft,!Z(qe.Wa,Ft)){ne.a=1,Me=0;break e}}else qe.ua=0;var d0=ne,Tc=we,Qg=Be,Rd=d0.s,Td=Rd.xc;if(d0.c=Tc,d0.i=Qg,Rd.md=be(Tc,Td),Rd.wc=Td==0?-1:(1<<Td)-1,z){ne.xb=Fo;break e}if((yt=l(we*Be))==null){ne.a=1,Me=0;break e}Me=(Me=Ns(ne,yt,0,we,Be,Be,null))&&!Qe.h;break e}return Me?(Ne!=null?Ne[0]=yt:(e(yt==null),e(z)),ne.$=0,z||ke(qe)):ke(qe),Me}function Qt(b,E){var z=b.c*b.i,ne=z+E+16*E;return e(b.c<=E),b.V=l(ne),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+z+E,1)}function ut(b,E){var z=b.C,ne=E-z,Ne=b.V,Me=b.Ba+b.c*z;for(e(E<=b.l.o);0<ne;){var we=16<ne?16:ne,Be=b.l.ma,Qe=b.l.width,qe=Qe*we,yt=Be.ca,Ft=Be.tb+Qe*z,ze=b.Ta,Tt=b.Ua;Oe(b,we,Ne,Me),Ia(ze,Tt,yt,Ft,qe),ds(Be,z,z+we,yt,Ft,Qe),ne-=we,Ne+=we*b.c,z+=we}e(z==E),b.C=b.Ma=E}function qt(){this.ub=this.yd=this.td=this.Rb=0}function jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ue(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Ce(){this.Yb=(function(){var b=[];return(function E(z,ne,Ne){for(var Me=Ne[ne],we=0;we<Me&&(z.push(Ne.length>ne+1?[]:0),!(Ne.length<ne+1));we++)E(z[we],ne+1,Ne)})(b,0,[3,11]),b})()}function Le(){this.jb=l(3),this.Wc=d([4,8],Ce),this.Xc=d([4,17],Ce)}function Ie(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Ze(){this.ld=this.La=this.dd=this.tc=0}function Ee(){this.Na=this.la=0}function pt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ke(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ct(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ze),this.Y=0,this.ya=Array(new Ke),this.aa=0,this.l=new wt}function bt(){this.y=l(16),this.f=l(8),this.ea=l(8)}function He(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new qt,this.Kc=new jt,this.ed=new Ie,this.Qa=new ue,this.Ic=this.$c=this.Aa=0,this.D=new Ct,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,I),this.ia=0,this.pb=c(4,pt),this.Pa=new Le,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bt),this.Hd=0,this.rb=Array(new Ee),this.sb=0,this.wa=Array(new Ze),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ke),this.L=this.aa=0,this.gd=d([4,2],Ze),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ct(b,E){return 0>b?0:b>E?E:b}function wt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bt(){var b=new He;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Oa||(Oa=Wt)),b}function Vt(b,E,z){return b.a==0&&(b.a=E,b.sc=z,b.cb=0),0}function Jt(b,E,z){return 3<=z&&b[E+0]==157&&b[E+1]==1&&b[E+2]==42}function ss(b,E){if(b==null)return 0;if(b.a=0,b.sc="OK",E==null)return Vt(b,2,"null VP8Io passed to VP8GetHeaders()");var z=E.data,ne=E.w,Ne=E.ha;if(4>Ne)return Vt(b,7,"Truncated header.");var Me=z[ne+0]|z[ne+1]<<8|z[ne+2]<<16,we=b.Od;if(we.Rb=!(1&Me),we.td=Me>>1&7,we.yd=Me>>4&1,we.ub=Me>>5,3<we.td)return Vt(b,3,"Incorrect keyframe parameters.");if(!we.yd)return Vt(b,4,"Frame not displayable.");ne+=3,Ne-=3;var Be=b.Kc;if(we.Rb){if(7>Ne)return Vt(b,7,"cannot parse picture header");if(!Jt(z,ne,Ne))return Vt(b,3,"Bad code word");Be.c=16383&(z[ne+4]<<8|z[ne+3]),Be.Td=z[ne+4]>>6,Be.i=16383&(z[ne+6]<<8|z[ne+5]),Be.Ud=z[ne+6]>>6,ne+=7,Ne-=7,b.za=Be.c+15>>4,b.Ub=Be.i+15>>4,E.width=Be.c,E.height=Be.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((Me=b.Pa).jb,0,255,Me.jb.length),e((Me=b.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(we.ub>Ne)return Vt(b,7,"bad partition length");Y(Me=b.m,z,ne,we.ub),ne+=we.ub,Ne-=we.ub,we.Rb&&(Be.Ld=ge(Me),Be.Kd=ge(Me)),Be=b.Qa;var Qe,qe=b.Pa;if(e(Me!=null),e(Be!=null),Be.Cb=ge(Me),Be.Cb){if(Be.Bb=ge(Me),ge(Me)){for(Be.Fb=ge(Me),Qe=0;4>Qe;++Qe)Be.Zb[Qe]=ge(Me)?w(Me,7):0;for(Qe=0;4>Qe;++Qe)Be.Lb[Qe]=ge(Me)?w(Me,6):0}if(Be.Bb)for(Qe=0;3>Qe;++Qe)qe.jb[Qe]=ge(Me)?K(Me,8):255}else Be.Bb=0;if(Me.Ka)return Vt(b,3,"cannot parse segment header");if((Be=b.ed).zd=ge(Me),Be.Tb=K(Me,6),Be.wb=K(Me,3),Be.Pc=ge(Me),Be.Pc&&ge(Me)){for(qe=0;4>qe;++qe)ge(Me)&&(Be.vd[qe]=w(Me,6));for(qe=0;4>qe;++qe)ge(Me)&&(Be.od[qe]=w(Me,6))}if(b.L=Be.Tb==0?0:Be.zd?1:2,Me.Ka)return Vt(b,3,"cannot parse filter header");var yt=Ne;if(Ne=Qe=ne,ne=Qe+yt,Be=yt,b.Xb=(1<<K(b.m,2))-1,yt<3*(qe=b.Xb))z=7;else{for(Qe+=3*qe,Be-=3*qe,yt=0;yt<qe;++yt){var Ft=z[Ne+0]|z[Ne+1]<<8|z[Ne+2]<<16;Ft>Be&&(Ft=Be),Y(b.Jc[+yt],z,Qe,Ft),Qe+=Ft,Be-=Ft,Ne+=3}Y(b.Jc[+qe],z,Qe,Be),z=Qe<ne?0:5}if(z!=0)return Vt(b,z,"cannot parse partitions");for(z=K(Qe=b.m,7),Ne=ge(Qe)?w(Qe,4):0,ne=ge(Qe)?w(Qe,4):0,Be=ge(Qe)?w(Qe,4):0,qe=ge(Qe)?w(Qe,4):0,Qe=ge(Qe)?w(Qe,4):0,yt=b.Qa,Ft=0;4>Ft;++Ft){if(yt.Cb){var ze=yt.Zb[Ft];yt.Fb||(ze+=z)}else{if(0<Ft){b.pb[Ft]=b.pb[0];continue}ze=z}var Tt=b.pb[Ft];Tt.Sc[0]=Ha[ct(ze+Ne,127)],Tt.Sc[1]=za[ct(ze+0,127)],Tt.Eb[0]=2*Ha[ct(ze+ne,127)],Tt.Eb[1]=101581*za[ct(ze+Be,127)]>>16,8>Tt.Eb[1]&&(Tt.Eb[1]=8),Tt.Qc[0]=Ha[ct(ze+qe,117)],Tt.Qc[1]=za[ct(ze+Qe,127)],Tt.lc=ze+Qe}if(!we.Rb)return Vt(b,4,"Not a key frame.");for(ge(Me),we=b.Pa,z=0;4>z;++z){for(Ne=0;8>Ne;++Ne)for(ne=0;3>ne;++ne)for(Be=0;11>Be;++Be)qe=ce(Me,Rr[z][Ne][ne][Be])?K(Me,8):Ag[z][Ne][ne][Be],we.Wc[z][Ne].Yb[ne][Be]=qe;for(Ne=0;17>Ne;++Ne)we.Xc[z][Ne]=we.Wc[z][Mn[Ne]]}return b.kc=ge(Me),b.kc&&(b.Bd=K(Me,8)),b.cb=1}function Wt(b,E,z,ne,Ne,Me,we){var Be=E[Ne].Yb[z];for(z=0;16>Ne;++Ne){if(!ce(b,Be[z+0]))return Ne;for(;!ce(b,Be[z+1]);)if(Be=E[++Ne].Yb[0],z=0,Ne==16)return 16;var Qe=E[Ne+1].Yb;if(ce(b,Be[z+2])){var qe=b,yt=0;if(ce(qe,(ze=Be)[(Ft=z)+3]))if(ce(qe,ze[Ft+6])){for(Be=0,Ft=2*(yt=ce(qe,ze[Ft+8]))+(ze=ce(qe,ze[Ft+9+yt])),yt=0,ze=Pg[Ft];ze[Be];++Be)yt+=yt+ce(qe,ze[Be]);yt+=3+(8<<Ft)}else ce(qe,ze[Ft+7])?(yt=7+2*ce(qe,165),yt+=ce(qe,145)):yt=5+ce(qe,159);else yt=ce(qe,ze[Ft+4])?3+ce(qe,ze[Ft+5]):2;Be=Qe[2]}else yt=1,Be=Qe[1];Qe=we+Ff[Ne],0>(qe=b).b&&fe(qe);var Ft,ze=qe.b,Tt=(Ft=qe.Ca>>1)-(qe.I>>ze)>>31;--qe.b,qe.Ca+=Tt,qe.Ca|=1,qe.I-=(Ft+1&Tt)<<ze,Me[Qe]=((yt^Tt)-Tt)*ne[(0<Ne)+0]}return 16}function Es(b){var E=b.rb[b.sb-1];E.la=0,E.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function ys(b,E,z,ne,Ne){Ne=b[E+z+32*ne]+(Ne>>3),b[E+z+32*ne]=-256&Ne?0>Ne?0:255:Ne}function Ps(b,E,z,ne,Ne,Me){ys(b,E,0,z,ne+Ne),ys(b,E,1,z,ne+Me),ys(b,E,2,z,ne-Me),ys(b,E,3,z,ne-Ne)}function xs(b){return(20091*b>>16)+b}function vs(b,E,z,ne){var Ne,Me=0,we=l(16);for(Ne=0;4>Ne;++Ne){var Be=b[E+0]+b[E+8],Qe=b[E+0]-b[E+8],qe=(35468*b[E+4]>>16)-xs(b[E+12]),yt=xs(b[E+4])+(35468*b[E+12]>>16);we[Me+0]=Be+yt,we[Me+1]=Qe+qe,we[Me+2]=Qe-qe,we[Me+3]=Be-yt,Me+=4,E++}for(Ne=Me=0;4>Ne;++Ne)Be=(b=we[Me+0]+4)+we[Me+8],Qe=b-we[Me+8],qe=(35468*we[Me+4]>>16)-xs(we[Me+12]),ys(z,ne,0,0,Be+(yt=xs(we[Me+4])+(35468*we[Me+12]>>16))),ys(z,ne,1,0,Qe+qe),ys(z,ne,2,0,Qe-qe),ys(z,ne,3,0,Be-yt),Me++,ne+=32}function Ms(b,E,z,ne){var Ne=b[E+0]+4,Me=35468*b[E+4]>>16,we=xs(b[E+4]),Be=35468*b[E+1]>>16;Ps(z,ne,0,Ne+we,b=xs(b[E+1]),Be),Ps(z,ne,1,Ne+Me,b,Be),Ps(z,ne,2,Ne-Me,b,Be),Ps(z,ne,3,Ne-we,b,Be)}function cs(b,E,z,ne,Ne){vs(b,E,z,ne),Ne&&vs(b,E+16,z,ne+4)}function ms(b,E,z,ne){mo(b,E+0,z,ne,1),mo(b,E+32,z,ne+128,1)}function Ks(b,E,z,ne){var Ne;for(b=b[E+0]+4,Ne=0;4>Ne;++Ne)for(E=0;4>E;++E)ys(z,ne,E,Ne,b)}function Ls(b,E,z,ne){b[E+0]&&zn(b,E+0,z,ne),b[E+16]&&zn(b,E+16,z,ne+4),b[E+32]&&zn(b,E+32,z,ne+128),b[E+48]&&zn(b,E+48,z,ne+128+4)}function nt(b,E,z,ne){var Ne,Me=l(16);for(Ne=0;4>Ne;++Ne){var we=b[E+0+Ne]+b[E+12+Ne],Be=b[E+4+Ne]+b[E+8+Ne],Qe=b[E+4+Ne]-b[E+8+Ne],qe=b[E+0+Ne]-b[E+12+Ne];Me[0+Ne]=we+Be,Me[8+Ne]=we-Be,Me[4+Ne]=qe+Qe,Me[12+Ne]=qe-Qe}for(Ne=0;4>Ne;++Ne)we=(b=Me[0+4*Ne]+3)+Me[3+4*Ne],Be=Me[1+4*Ne]+Me[2+4*Ne],Qe=Me[1+4*Ne]-Me[2+4*Ne],qe=b-Me[3+4*Ne],z[ne+0]=we+Be>>3,z[ne+16]=qe+Qe>>3,z[ne+32]=we-Be>>3,z[ne+48]=qe-Qe>>3,ne+=64}function Kt(b,E,z){var ne,Ne=E-32,Me=Xi,we=255-b[Ne-1];for(ne=0;ne<z;++ne){var Be,Qe=Me,qe=we+b[E-1];for(Be=0;Be<z;++Be)b[E+Be]=Qe[qe+b[Ne+Be]];E+=32}}function Cs(b,E){Kt(b,E,4)}function Ht(b,E){Kt(b,E,8)}function Os(b,E){Kt(b,E,16)}function es(b,E){var z;for(z=0;16>z;++z)r(b,E+32*z,b,E-32,16)}function Ds(b,E){var z;for(z=16;0<z;--z)i(b,E,b[E-1],16),E+=32}function js(b,E,z){var ne;for(ne=0;16>ne;++ne)i(E,z+32*ne,b,16)}function hs(b,E){var z,ne=16;for(z=0;16>z;++z)ne+=b[E-1+32*z]+b[E+z-32];js(ne>>5,b,E)}function Us(b,E){var z,ne=8;for(z=0;16>z;++z)ne+=b[E-1+32*z];js(ne>>4,b,E)}function Qs(b,E){var z,ne=8;for(z=0;16>z;++z)ne+=b[E+z-32];js(ne>>4,b,E)}function Is(b,E){js(128,b,E)}function ps(b,E,z){return b+2*E+z+2>>2}function Lr(b,E){var z,ne=E-32;for(ne=new Uint8Array([ps(b[ne-1],b[ne+0],b[ne+1]),ps(b[ne+0],b[ne+1],b[ne+2]),ps(b[ne+1],b[ne+2],b[ne+3]),ps(b[ne+2],b[ne+3],b[ne+4])]),z=0;4>z;++z)r(b,E+32*z,ne,0,ne.length)}function Ir(b,E){var z=b[E-1],ne=b[E-1+32],Ne=b[E-1+64],Me=b[E-1+96];Re(b,E+0,16843009*ps(b[E-1-32],z,ne)),Re(b,E+32,16843009*ps(z,ne,Ne)),Re(b,E+64,16843009*ps(ne,Ne,Me)),Re(b,E+96,16843009*ps(Ne,Me,Me))}function qr(b,E){var z,ne=4;for(z=0;4>z;++z)ne+=b[E+z-32]+b[E-1+32*z];for(ne>>=3,z=0;4>z;++z)i(b,E+32*z,ne,4)}function vr(b,E){var z=b[E-1+0],ne=b[E-1+32],Ne=b[E-1+64],Me=b[E-1-32],we=b[E+0-32],Be=b[E+1-32],Qe=b[E+2-32],qe=b[E+3-32];b[E+0+96]=ps(ne,Ne,b[E-1+96]),b[E+1+96]=b[E+0+64]=ps(z,ne,Ne),b[E+2+96]=b[E+1+64]=b[E+0+32]=ps(Me,z,ne),b[E+3+96]=b[E+2+64]=b[E+1+32]=b[E+0+0]=ps(we,Me,z),b[E+3+64]=b[E+2+32]=b[E+1+0]=ps(Be,we,Me),b[E+3+32]=b[E+2+0]=ps(Qe,Be,we),b[E+3+0]=ps(qe,Qe,Be)}function cn(b,E){var z=b[E+1-32],ne=b[E+2-32],Ne=b[E+3-32],Me=b[E+4-32],we=b[E+5-32],Be=b[E+6-32],Qe=b[E+7-32];b[E+0+0]=ps(b[E+0-32],z,ne),b[E+1+0]=b[E+0+32]=ps(z,ne,Ne),b[E+2+0]=b[E+1+32]=b[E+0+64]=ps(ne,Ne,Me),b[E+3+0]=b[E+2+32]=b[E+1+64]=b[E+0+96]=ps(Ne,Me,we),b[E+3+32]=b[E+2+64]=b[E+1+96]=ps(Me,we,Be),b[E+3+64]=b[E+2+96]=ps(we,Be,Qe),b[E+3+96]=ps(Be,Qe,Qe)}function cr(b,E){var z=b[E-1+0],ne=b[E-1+32],Ne=b[E-1+64],Me=b[E-1-32],we=b[E+0-32],Be=b[E+1-32],Qe=b[E+2-32],qe=b[E+3-32];b[E+0+0]=b[E+1+64]=Me+we+1>>1,b[E+1+0]=b[E+2+64]=we+Be+1>>1,b[E+2+0]=b[E+3+64]=Be+Qe+1>>1,b[E+3+0]=Qe+qe+1>>1,b[E+0+96]=ps(Ne,ne,z),b[E+0+64]=ps(ne,z,Me),b[E+0+32]=b[E+1+96]=ps(z,Me,we),b[E+1+32]=b[E+2+96]=ps(Me,we,Be),b[E+2+32]=b[E+3+96]=ps(we,Be,Qe),b[E+3+32]=ps(Be,Qe,qe)}function ni(b,E){var z=b[E+0-32],ne=b[E+1-32],Ne=b[E+2-32],Me=b[E+3-32],we=b[E+4-32],Be=b[E+5-32],Qe=b[E+6-32],qe=b[E+7-32];b[E+0+0]=z+ne+1>>1,b[E+1+0]=b[E+0+64]=ne+Ne+1>>1,b[E+2+0]=b[E+1+64]=Ne+Me+1>>1,b[E+3+0]=b[E+2+64]=Me+we+1>>1,b[E+0+32]=ps(z,ne,Ne),b[E+1+32]=b[E+0+96]=ps(ne,Ne,Me),b[E+2+32]=b[E+1+96]=ps(Ne,Me,we),b[E+3+32]=b[E+2+96]=ps(Me,we,Be),b[E+3+64]=ps(we,Be,Qe),b[E+3+96]=ps(Be,Qe,qe)}function Fr(b,E){var z=b[E-1+0],ne=b[E-1+32],Ne=b[E-1+64],Me=b[E-1+96];b[E+0+0]=z+ne+1>>1,b[E+2+0]=b[E+0+32]=ne+Ne+1>>1,b[E+2+32]=b[E+0+64]=Ne+Me+1>>1,b[E+1+0]=ps(z,ne,Ne),b[E+3+0]=b[E+1+32]=ps(ne,Ne,Me),b[E+3+32]=b[E+1+64]=ps(Ne,Me,Me),b[E+3+64]=b[E+2+64]=b[E+0+96]=b[E+1+96]=b[E+2+96]=b[E+3+96]=Me}function Hi(b,E){var z=b[E-1+0],ne=b[E-1+32],Ne=b[E-1+64],Me=b[E-1+96],we=b[E-1-32],Be=b[E+0-32],Qe=b[E+1-32],qe=b[E+2-32];b[E+0+0]=b[E+2+32]=z+we+1>>1,b[E+0+32]=b[E+2+64]=ne+z+1>>1,b[E+0+64]=b[E+2+96]=Ne+ne+1>>1,b[E+0+96]=Me+Ne+1>>1,b[E+3+0]=ps(Be,Qe,qe),b[E+2+0]=ps(we,Be,Qe),b[E+1+0]=b[E+3+32]=ps(z,we,Be),b[E+1+32]=b[E+3+64]=ps(ne,z,we),b[E+1+64]=b[E+3+96]=ps(Ne,ne,z),b[E+1+96]=ps(Me,Ne,ne)}function Or(b,E){var z;for(z=0;8>z;++z)r(b,E+32*z,b,E-32,8)}function zi(b,E){var z;for(z=0;8>z;++z)i(b,E,b[E-1],8),E+=32}function Dr(b,E,z){var ne;for(ne=0;8>ne;++ne)i(E,z+32*ne,b,8)}function Ta(b,E){var z,ne=8;for(z=0;8>z;++z)ne+=b[E+z-32]+b[E-1+32*z];Dr(ne>>4,b,E)}function Fa(b,E){var z,ne=4;for(z=0;8>z;++z)ne+=b[E+z-32];Dr(ne>>3,b,E)}function Rs(b,E){var z,ne=4;for(z=0;8>z;++z)ne+=b[E-1+32*z];Dr(ne>>3,b,E)}function Pn(b,E){Dr(128,b,E)}function Qn(b,E,z){var ne=b[E-z],Ne=b[E+0],Me=3*(Ne-ne)+go[1020+b[E-2*z]-b[E+z]],we=Lu[112+(Me+4>>3)];b[E-z]=Xi[255+ne+Lu[112+(Me+3>>3)]],b[E+0]=Xi[255+Ne-we]}function Xr(b,E,z,ne){var Ne=b[E+0],Me=b[E+z];return wi[255+b[E-2*z]-b[E-z]]>ne||wi[255+Me-Ne]>ne}function Ni(b,E,z,ne){return 4*wi[255+b[E-z]-b[E+0]]+wi[255+b[E-2*z]-b[E+z]]<=ne}function so(b,E,z,ne,Ne){var Me=b[E-3*z],we=b[E-2*z],Be=b[E-z],Qe=b[E+0],qe=b[E+z],yt=b[E+2*z],Ft=b[E+3*z];return 4*wi[255+Be-Qe]+wi[255+we-qe]>ne?0:wi[255+b[E-4*z]-Me]<=Ne&&wi[255+Me-we]<=Ne&&wi[255+we-Be]<=Ne&&wi[255+Ft-yt]<=Ne&&wi[255+yt-qe]<=Ne&&wi[255+qe-Qe]<=Ne}function ml(b,E,z,ne){var Ne=2*ne+1;for(ne=0;16>ne;++ne)Ni(b,E+ne,z,Ne)&&Qn(b,E+ne,z)}function ws(b,E,z,ne){var Ne=2*ne+1;for(ne=0;16>ne;++ne)Ni(b,E+ne*z,1,Ne)&&Qn(b,E+ne*z,1)}function Hn(b,E,z,ne){var Ne;for(Ne=3;0<Ne;--Ne)ml(b,E+=4*z,z,ne)}function Kr(b,E,z,ne){var Ne;for(Ne=3;0<Ne;--Ne)ws(b,E+=4,z,ne)}function Si(b,E,z,ne,Ne,Me,we,Be){for(Me=2*Me+1;0<Ne--;){if(so(b,E,z,Me,we))if(Xr(b,E,z,Be))Qn(b,E,z);else{var Qe=b,qe=E,yt=z,Ft=Qe[qe-2*yt],ze=Qe[qe-yt],Tt=Qe[qe+0],Pt=Qe[qe+yt],ts=Qe[qe+2*yt],Ut=27*(as=go[1020+3*(Tt-ze)+go[1020+Ft-Pt]])+63>>7,Zt=18*as+63>>7,as=9*as+63>>7;Qe[qe-3*yt]=Xi[255+Qe[qe-3*yt]+as],Qe[qe-2*yt]=Xi[255+Ft+Zt],Qe[qe-yt]=Xi[255+ze+Ut],Qe[qe+0]=Xi[255+Tt-Ut],Qe[qe+yt]=Xi[255+Pt-Zt],Qe[qe+2*yt]=Xi[255+ts-as]}E+=ne}}function Oi(b,E,z,ne,Ne,Me,we,Be){for(Me=2*Me+1;0<Ne--;){if(so(b,E,z,Me,we))if(Xr(b,E,z,Be))Qn(b,E,z);else{var Qe=b,qe=E,yt=z,Ft=Qe[qe-yt],ze=Qe[qe+0],Tt=Qe[qe+yt],Pt=Lu[112+(4+(ts=3*(ze-Ft))>>3)],ts=Lu[112+(ts+3>>3)],Ut=Pt+1>>1;Qe[qe-2*yt]=Xi[255+Qe[qe-2*yt]+Ut],Qe[qe-yt]=Xi[255+Ft+ts],Qe[qe+0]=Xi[255+ze-Pt],Qe[qe+yt]=Xi[255+Tt-Ut]}E+=ne}}function Fh(b,E,z,ne,Ne,Me){Si(b,E,z,1,16,ne,Ne,Me)}function no(b,E,z,ne,Ne,Me){Si(b,E,1,z,16,ne,Ne,Me)}function Kh(b,E,z,ne,Ne,Me){var we;for(we=3;0<we;--we)Oi(b,E+=4*z,z,1,16,ne,Ne,Me)}function B(b,E,z,ne,Ne,Me){var we;for(we=3;0<we;--we)Oi(b,E+=4,1,z,16,ne,Ne,Me)}function ye(b,E,z,ne,Ne,Me,we,Be){Si(b,E,Ne,1,8,Me,we,Be),Si(z,ne,Ne,1,8,Me,we,Be)}function Xe(b,E,z,ne,Ne,Me,we,Be){Si(b,E,1,Ne,8,Me,we,Be),Si(z,ne,1,Ne,8,Me,we,Be)}function _t(b,E,z,ne,Ne,Me,we,Be){Oi(b,E+4*Ne,Ne,1,8,Me,we,Be),Oi(z,ne+4*Ne,Ne,1,8,Me,we,Be)}function Ot(b,E,z,ne,Ne,Me,we,Be){Oi(b,E+4,1,Ne,8,Me,we,Be),Oi(z,ne+4,1,Ne,8,Me,we,Be)}function is(){this.ba=new Ge,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ys(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xs(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new ee}function un(){this.xb=this.a=0,this.l=new wt,this.ca=new Ge,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xs,this.ab=0,this.gc=c(4,Ys),this.Oc=0}function _n(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Wn(b,E,z,ne,Ne,Me,we){for(b=b==null?0:b[E+0],E=0;E<we;++E)Ne[Me+E]=b+z[ne+E]&255,b=Ne[Me+E]}function wr(b,E,z,ne,Ne,Me,we){var Be;if(b==null)Wn(null,null,z,ne,Ne,Me,we);else for(Be=0;Be<we;++Be)Ne[Me+Be]=b[E+Be]+z[ne+Be]&255}function Jr(b,E,z,ne,Ne,Me,we){if(b==null)Wn(null,null,z,ne,Ne,Me,we);else{var Be,Qe=b[E+0],qe=Qe,yt=Qe;for(Be=0;Be<we;++Be)qe=yt+(Qe=b[E+Be])-qe,yt=z[ne+Be]+(-256&qe?0>qe?0:255:qe)&255,qe=Qe,Ne[Me+Be]=yt}}function _r(b,E,z,ne){var Ne=E.width,Me=E.o;if(e(b!=null&&E!=null),0>z||0>=ne||z+ne>Me)return null;if(!b.Cc){if(b.ga==null){var we;if(b.ga=new _n,(we=b.ga==null)||(we=E.width*E.o,e(b.Gb.length==0),b.Gb=l(we),b.Uc=0,b.Gb==null?we=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,we=1),we=!we),!we){we=b.ga;var Be=b.Fa,Qe=b.P,qe=b.qc,yt=b.mb,Ft=b.nb,ze=Qe+1,Tt=qe-1,Pt=we.l;if(e(Be!=null&&yt!=null&&E!=null),xo[0]=null,xo[1]=Wn,xo[2]=wr,xo[3]=Jr,we.ca=yt,we.tb=Ft,we.c=E.width,we.i=E.height,e(0<we.c&&0<we.i),1>=qe)E=0;else if(we.$a=3&Be[Qe+0],we.Z=Be[Qe+0]>>2&3,we.Lc=Be[Qe+0]>>4&3,Qe=Be[Qe+0]>>6&3,0>we.$a||1<we.$a||4<=we.Z||1<we.Lc||Qe)E=0;else if(Pt.put=de,Pt.ac=mt,Pt.bc=tt,Pt.ma=we,Pt.width=E.width,Pt.height=E.height,Pt.Da=E.Da,Pt.v=E.v,Pt.va=E.va,Pt.j=E.j,Pt.o=E.o,we.$a)e:{e(we.$a==1),E=dt();t:for(;;){if(E==null){E=0;break e}if(e(we!=null),we.mc=E,E.c=we.c,E.i=we.i,E.l=we.l,E.l.ma=we,E.l.width=we.c,E.l.height=we.i,E.a=0,se(E.m,Be,ze,Tt),!et(we.c,we.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&rs(E.s)?(we.ic=1,Be=E.c*E.i,E.Ta=null,E.Ua=0,E.V=l(Be),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(we.ic=0,E=Qt(E,we.c)),!E))break t;E=1;break e}we.mc=null,E=0}else E=Tt>=we.c*we.i;we=!E}if(we)return null;b.ga.Lc!=1?b.Ga=0:ne=Me-z}e(b.ga!=null),e(z+ne<=Me);e:{if(E=(Be=b.ga).c,Me=Be.l.o,Be.$a==0){if(ze=b.rc,Tt=b.Vc,Pt=b.Fa,Qe=b.P+1+z*E,qe=b.mb,yt=b.nb+z*E,e(Qe<=b.P+b.qc),Be.Z!=0)for(e(xo[Be.Z]!=null),we=0;we<ne;++we)xo[Be.Z](ze,Tt,Pt,Qe,qe,yt,E),ze=qe,Tt=yt,yt+=E,Qe+=E;else for(we=0;we<ne;++we)r(qe,yt,Pt,Qe,E),ze=qe,Tt=yt,yt+=E,Qe+=E;b.rc=ze,b.Vc=Tt}else{if(e(Be.mc!=null),E=z+ne,e((we=Be.mc)!=null),e(E<=we.i),we.C>=E)E=1;else if(Be.ic||gl(),Be.ic){Be=we.V,ze=we.Ba,Tt=we.c;var ts=we.i,Ut=(Pt=1,Qe=we.$/Tt,qe=we.$%Tt,yt=we.m,Ft=we.s,we.$),Zt=Tt*ts,as=Tt*E,_s=Ft.wc,fs=Ut<as?kt(Ft,qe,Qe):null;e(Ut<=Zt),e(E<=ts),e(rs(Ft));t:for(;;){for(;!yt.h&&Ut<as;){if(qe&_s||(fs=kt(Ft,qe,Qe)),e(fs!=null),ae(yt),256>(ts=Lt(fs.G[0],fs.H[0],yt)))Be[ze+Ut]=ts,++Ut,++qe>=Tt&&(qe=0,++Qe<=E&&!(Qe%16)&&Ss(we,Qe));else{if(!(280>ts)){Pt=0;break t}ts=it(ts-256,yt);var $s,Ws=Lt(fs.G[4],fs.H[4],yt);if(ae(yt),!(Ut>=(Ws=St(Tt,Ws=it(Ws,yt)))&&Zt-Ut>=ts)){Pt=0;break t}for($s=0;$s<ts;++$s)Be[ze+Ut+$s]=Be[ze+Ut+$s-Ws];for(Ut+=ts,qe+=ts;qe>=Tt;)qe-=Tt,++Qe<=E&&!(Qe%16)&&Ss(we,Qe);Ut<as&&qe&_s&&(fs=kt(Ft,qe,Qe))}e(yt.h==H(yt))}Ss(we,Qe>E?E:Qe);break t}!Pt||yt.h&&Ut<Zt?(Pt=0,we.a=yt.h?5:3):we.$=Ut,E=Pt}else E=Ns(we,we.V,we.Ba,we.c,we.i,E,ut);if(!E){ne=0;break e}}z+ne>=Me&&(b.Cc=1),ne=1}if(!ne)return null;if(b.Cc&&((ne=b.ga)!=null&&(ne.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+z*Ne}function mi(b,E,z,ne,Ne,Me){for(;0<Ne--;){var we,Be=b,Qe=E+(z?1:0),qe=b,yt=E+(z?0:3);for(we=0;we<ne;++we){var Ft=qe[yt+4*we];Ft!=255&&(Ft*=32897,Be[Qe+4*we+0]=Be[Qe+4*we+0]*Ft>>23,Be[Qe+4*we+1]=Be[Qe+4*we+1]*Ft>>23,Be[Qe+4*we+2]=Be[Qe+4*we+2]*Ft>>23)}E+=Me}}function ri(b,E,z,ne,Ne){for(;0<ne--;){var Me;for(Me=0;Me<z;++Me){var we=b[E+2*Me+0],Be=15&(qe=b[E+2*Me+1]),Qe=4369*Be,qe=(240&qe|qe>>4)*Qe>>16;b[E+2*Me+0]=(240&we|we>>4)*Qe>>16&240|(15&we|we<<4)*Qe>>16>>4&15,b[E+2*Me+1]=240&qe|Be}E+=Ne}}function Mi(b,E,z,ne,Ne,Me,we,Be){var Qe,qe,yt=255;for(qe=0;qe<Ne;++qe){for(Qe=0;Qe<ne;++Qe){var Ft=b[E+Qe];Me[we+4*Qe]=Ft,yt&=Ft}E+=z,we+=Be}return yt!=255}function ro(b,E,z,ne,Ne){var Me;for(Me=0;Me<Ne;++Me)z[ne+Me]=b[E+Me]>>8}function gl(){yc=mi,Qa=ri,Iu=Mi,Ia=ro}function io(b,E,z){j[b]=function(ne,Ne,Me,we,Be,Qe,qe,yt,Ft,ze,Tt,Pt,ts,Ut,Zt,as,_s){var fs,$s=_s-1>>1,Ws=Be[Qe+0]|qe[yt+0]<<16,mn=Ft[ze+0]|Tt[Pt+0]<<16;e(ne!=null);var Gs=3*Ws+mn+131074>>2;for(E(ne[Ne+0],255&Gs,Gs>>16,ts,Ut),Me!=null&&(Gs=3*mn+Ws+131074>>2,E(Me[we+0],255&Gs,Gs>>16,Zt,as)),fs=1;fs<=$s;++fs){var On=Be[Qe+fs]|qe[yt+fs]<<16,Tr=Ft[ze+fs]|Tt[Pt+fs]<<16,Cn=Ws+On+mn+Tr+524296,Bs=Cn+2*(On+mn)>>3;Gs=Bs+Ws>>1,Ws=(Cn=Cn+2*(Ws+Tr)>>3)+On>>1,E(ne[Ne+2*fs-1],255&Gs,Gs>>16,ts,Ut+(2*fs-1)*z),E(ne[Ne+2*fs-0],255&Ws,Ws>>16,ts,Ut+(2*fs-0)*z),Me!=null&&(Gs=Cn+mn>>1,Ws=Bs+Tr>>1,E(Me[we+2*fs-1],255&Gs,Gs>>16,Zt,as+(2*fs-1)*z),E(Me[we+2*fs+0],255&Ws,Ws>>16,Zt,as+(2*fs+0)*z)),Ws=On,mn=Tr}1&_s||(Gs=3*Ws+mn+131074>>2,E(ne[Ne+_s-1],255&Gs,Gs>>16,ts,Ut+(_s-1)*z),Me!=null&&(Gs=3*mn+Ws+131074>>2,E(Me[we+_s-1],255&Gs,Gs>>16,Zt,as+(_s-1)*z)))}}function Ru(){Ai[Vh]=Sc,Ai[Ji]=bd,Ai[$h]=Qf,Ai[Ga]=Jh,Ai[wu]=Ko,Ai[_d]=wl,Ai[Wo]=Qo,Ai[Pu]=bd,Ai[Hh]=Jh,Ai[Cd]=Ko,Ai[zh]=wl}function ud(b){return b&-16384?0>b?0:255:b>>Zh}function Rl(b,E){return ud((19077*b>>8)+(26149*E>>8)-14234)}function xl(b,E,z){return ud((19077*b>>8)-(6419*E>>8)-(13320*z>>8)+8708)}function pc(b,E){return ud((19077*b>>8)+(33050*E>>8)-17685)}function ao(b,E,z,ne,Ne){ne[Ne+0]=Rl(b,z),ne[Ne+1]=xl(b,E,z),ne[Ne+2]=pc(b,E)}function vi(b,E,z,ne,Ne){ne[Ne+0]=pc(b,E),ne[Ne+1]=xl(b,E,z),ne[Ne+2]=Rl(b,z)}function Ao(b,E,z,ne,Ne){var Me=xl(b,E,z);E=Me<<3&224|pc(b,E)>>3,ne[Ne+0]=248&Rl(b,z)|Me>>5,ne[Ne+1]=E}function ko(b,E,z,ne,Ne){var Me=240&pc(b,E)|15;ne[Ne+0]=240&Rl(b,z)|xl(b,E,z)>>4,ne[Ne+1]=Me}function hd(b,E,z,ne,Ne){ne[Ne+0]=255,ao(b,E,z,ne,Ne+1)}function Tl(b,E,z,ne,Ne){vi(b,E,z,ne,Ne),ne[Ne+3]=255}function ca(b,E,z,ne,Ne){ao(b,E,z,ne,Ne),ne[Ne+3]=255}function lo(b,E,z){j[b]=function(ne,Ne,Me,we,Be,Qe,qe,yt,Ft){for(var ze=yt+(-2&Ft)*z;yt!=ze;)E(ne[Ne+0],Me[we+0],Be[Qe+0],qe,yt),E(ne[Ne+1],Me[we+0],Be[Qe+0],qe,yt+z),Ne+=2,++we,++Qe,yt+=2*z;1&Ft&&E(ne[Ne+0],Me[we+0],Be[Qe+0],qe,yt)}}function fd(b,E,z){return z==0?b==0?E==0?6:5:E==0?4:0:z}function Tu(b,E,z,ne,Ne){switch(b>>>30){case 3:mo(E,z,ne,Ne,0);break;case 2:qi(E,z,ne,Ne);break;case 1:zn(E,z,ne,Ne)}}function Ea(b,E){var z,ne,Ne=E.M,Me=E.Nb,we=b.oc,Be=b.pc+40,Qe=b.oc,qe=b.pc+584,yt=b.oc,Ft=b.pc+600;for(z=0;16>z;++z)we[Be+32*z-1]=129;for(z=0;8>z;++z)Qe[qe+32*z-1]=129,yt[Ft+32*z-1]=129;for(0<Ne?we[Be-1-32]=Qe[qe-1-32]=yt[Ft-1-32]=129:(i(we,Be-32-1,127,21),i(Qe,qe-32-1,127,9),i(yt,Ft-32-1,127,9)),ne=0;ne<b.za;++ne){var ze=E.ya[E.aa+ne];if(0<ne){for(z=-1;16>z;++z)r(we,Be+32*z-4,we,Be+32*z+12,4);for(z=-1;8>z;++z)r(Qe,qe+32*z-4,Qe,qe+32*z+4,4),r(yt,Ft+32*z-4,yt,Ft+32*z+4,4)}var Tt=b.Gd,Pt=b.Hd+ne,ts=ze.ad,Ut=ze.Hc;if(0<Ne&&(r(we,Be-32,Tt[Pt].y,0,16),r(Qe,qe-32,Tt[Pt].f,0,8),r(yt,Ft-32,Tt[Pt].ea,0,8)),ze.Za){var Zt=we,as=Be-32+16;for(0<Ne&&(ne>=b.za-1?i(Zt,as,Tt[Pt].y[15],4):r(Zt,as,Tt[Pt+1].y,0,4)),z=0;4>z;z++)Zt[as+128+z]=Zt[as+256+z]=Zt[as+384+z]=Zt[as+0+z];for(z=0;16>z;++z,Ut<<=2)Zt=we,as=Be+ti[z],Qr[ze.Ob[z]](Zt,as),Tu(Ut,ts,16*+z,Zt,as)}else if(Zt=fd(ne,Ne,ze.Ob[0]),ua[Zt](we,Be),Ut!=0)for(z=0;16>z;++z,Ut<<=2)Tu(Ut,ts,16*+z,we,Be+ti[z]);for(z=ze.Gc,Zt=fd(ne,Ne,ze.Dd),yl[Zt](Qe,qe),yl[Zt](yt,Ft),Ut=ts,Zt=Qe,as=qe,255&(ze=0|z)&&(170&ze?Ka(Ut,256,Zt,as):Bn(Ut,256,Zt,as)),ze=yt,Ut=Ft,255&(z>>=8)&&(170&z?Ka(ts,320,ze,Ut):Bn(ts,320,ze,Ut)),Ne<b.Ub-1&&(r(Tt[Pt].y,0,we,Be+480,16),r(Tt[Pt].f,0,Qe,qe+224,8),r(Tt[Pt].ea,0,yt,Ft+224,8)),z=8*Me*b.B,Tt=b.sa,Pt=b.ta+16*ne+16*Me*b.R,ts=b.qa,ze=b.ra+8*ne+z,Ut=b.Ha,Zt=b.Ia+8*ne+z,z=0;16>z;++z)r(Tt,Pt+z*b.R,we,Be+32*z,16);for(z=0;8>z;++z)r(ts,ze+z*b.B,Qe,qe+32*z,8),r(Ut,Zt+z*b.B,yt,Ft+32*z,8)}}function pl(b,E,z,ne,Ne,Me,we,Be,Qe){var qe=[0],yt=[0],Ft=0,ze=Qe!=null?Qe.kd:0,Tt=Qe??new gs;if(b==null||12>z)return 7;Tt.data=b,Tt.w=E,Tt.ha=z,E=[E],z=[z],Tt.gb=[Tt.gb];e:{var Pt=E,ts=z,Ut=Tt.gb;if(e(b!=null),e(ts!=null),e(Ut!=null),Ut[0]=0,12<=ts[0]&&!n(b,Pt[0],"RIFF")){if(n(b,Pt[0]+8,"WEBP")){Ut=3;break e}var Zt=he(b,Pt[0]+4);if(12>Zt||4294967286<Zt){Ut=3;break e}if(ze&&Zt>ts[0]-8){Ut=7;break e}Ut[0]=Zt,Pt[0]+=12,ts[0]-=12}Ut=0}if(Ut!=0)return Ut;for(Zt=0<Tt.gb[0],z=z[0];;){e:{var as=b;ts=E,Ut=z;var _s=qe,fs=yt,$s=Pt=[0];if((Gs=Ft=[Ft])[0]=0,8>Ut[0])Ut=7;else{if(!n(as,ts[0],"VP8X")){if(he(as,ts[0]+4)!=10){Ut=3;break e}if(18>Ut[0]){Ut=7;break e}var Ws=he(as,ts[0]+8),mn=1+me(as,ts[0]+12);if(2147483648<=mn*(as=1+me(as,ts[0]+15))){Ut=3;break e}$s!=null&&($s[0]=Ws),_s!=null&&(_s[0]=mn),fs!=null&&(fs[0]=as),ts[0]+=18,Ut[0]-=18,Gs[0]=1}Ut=0}}if(Ft=Ft[0],Pt=Pt[0],Ut!=0)return Ut;if(ts=!!(2&Pt),!Zt&&Ft)return 3;if(Me!=null&&(Me[0]=!!(16&Pt)),we!=null&&(we[0]=ts),Be!=null&&(Be[0]=0),we=qe[0],Pt=yt[0],Ft&&ts&&Qe==null){Ut=0;break}if(4>z){Ut=7;break}if(Zt&&Ft||!Zt&&!Ft&&!n(b,E[0],"ALPH")){z=[z],Tt.na=[Tt.na],Tt.P=[Tt.P],Tt.Sa=[Tt.Sa];e:{Ws=b,Ut=E,Zt=z;var Gs=Tt.gb;_s=Tt.na,fs=Tt.P,$s=Tt.Sa,mn=22,e(Ws!=null),e(Zt!=null),as=Ut[0];var On=Zt[0];for(e(_s!=null),e($s!=null),_s[0]=null,fs[0]=null,$s[0]=0;;){if(Ut[0]=as,Zt[0]=On,8>On){Ut=7;break e}var Tr=he(Ws,as+4);if(4294967286<Tr){Ut=3;break e}var Cn=8+Tr+1&-2;if(mn+=Cn,0<Gs&&mn>Gs){Ut=3;break e}if(!n(Ws,as,"VP8 ")||!n(Ws,as,"VP8L")){Ut=0;break e}if(On[0]<Cn){Ut=7;break e}n(Ws,as,"ALPH")||(_s[0]=Ws,fs[0]=as+8,$s[0]=Tr),as+=Cn,On-=Cn}}if(z=z[0],Tt.na=Tt.na[0],Tt.P=Tt.P[0],Tt.Sa=Tt.Sa[0],Ut!=0)break}z=[z],Tt.Ja=[Tt.Ja],Tt.xa=[Tt.xa];e:if(Gs=b,Ut=E,Zt=z,_s=Tt.gb[0],fs=Tt.Ja,$s=Tt.xa,Ws=Ut[0],as=!n(Gs,Ws,"VP8 "),mn=!n(Gs,Ws,"VP8L"),e(Gs!=null),e(Zt!=null),e(fs!=null),e($s!=null),8>Zt[0])Ut=7;else{if(as||mn){if(Gs=he(Gs,Ws+4),12<=_s&&Gs>_s-12){Ut=3;break e}if(ze&&Gs>Zt[0]-8){Ut=7;break e}fs[0]=Gs,Ut[0]+=8,Zt[0]-=8,$s[0]=mn}else $s[0]=5<=Zt[0]&&Gs[Ws+0]==47&&!(Gs[Ws+4]>>5),fs[0]=Zt[0];Ut=0}if(z=z[0],Tt.Ja=Tt.Ja[0],Tt.xa=Tt.xa[0],E=E[0],Ut!=0)break;if(4294967286<Tt.Ja)return 3;if(Be==null||ts||(Be[0]=Tt.xa?2:1),we=[we],Pt=[Pt],Tt.xa){if(5>z){Ut=7;break}Be=we,ze=Pt,ts=Me,b==null||5>z?b=0:5<=z&&b[E+0]==47&&!(b[E+4]>>5)?(Zt=[0],Gs=[0],_s=[0],se(fs=new U,b,E,z),De(fs,Zt,Gs,_s)?(Be!=null&&(Be[0]=Zt[0]),ze!=null&&(ze[0]=Gs[0]),ts!=null&&(ts[0]=_s[0]),b=1):b=0):b=0}else{if(10>z){Ut=7;break}Be=Pt,b==null||10>z||!Jt(b,E+3,z-3)?b=0:(ze=b[E+0]|b[E+1]<<8|b[E+2]<<16,ts=16383&(b[E+7]<<8|b[E+6]),b=16383&(b[E+9]<<8|b[E+8]),1&ze||3<(ze>>1&7)||!(ze>>4&1)||ze>>5>=Tt.Ja||!ts||!b?b=0:(we&&(we[0]=ts),Be&&(Be[0]=b),b=1))}if(!b||(we=we[0],Pt=Pt[0],Ft&&(qe[0]!=we||yt[0]!=Pt)))return 3;Qe!=null&&(Qe[0]=Tt,Qe.offset=E-Qe.w,e(4294967286>E-Qe.w),e(Qe.offset==Qe.ha-z));break}return Ut==0||Ut==7&&Ft&&Qe==null?(Me!=null&&(Me[0]|=Tt.na!=null&&0<Tt.na.length),ne!=null&&(ne[0]=we),Ne!=null&&(Ne[0]=Pt),0):Ut}function oo(b,E,z){var ne=E.width,Ne=E.height,Me=0,we=0,Be=ne,Qe=Ne;if(E.Da=b!=null&&0<b.Da,E.Da&&(Be=b.cd,Qe=b.bd,Me=b.v,we=b.j,11>z||(Me&=-2,we&=-2),0>Me||0>we||0>=Be||0>=Qe||Me+Be>ne||we+Qe>Ne))return 0;if(E.v=Me,E.j=we,E.va=Me+Be,E.o=we+Qe,E.U=Be,E.T=Qe,E.da=b!=null&&0<b.da,E.da){if(!je(Be,Qe,z=[b.ib],Me=[b.hb]))return 0;E.ib=z[0],E.hb=Me[0]}return E.ob=b!=null&&b.ob,E.Kb=b==null||!b.Sd,E.da&&(E.ob=E.ib<3*ne/4&&E.hb<3*Ne/4,E.Kb=0),1}function Eu(b){if(b==null)return 2;if(11>b.S){var E=b.f.RGBA;E.fb+=(b.height-1)*E.A,E.A=-E.A}else E=b.f.kb,b=b.height,E.O+=(b-1)*E.fa,E.fa=-E.fa,E.N+=(b-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(b-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(b-1)*E.lb,E.lb=-E.lb);return 0}function _l(b,E,z,ne){if(ne==null||0>=b||0>=E)return 2;if(z!=null){if(z.Da){var Ne=z.cd,Me=z.bd,we=-2&z.v,Be=-2&z.j;if(0>we||0>Be||0>=Ne||0>=Me||we+Ne>b||Be+Me>E)return 2;b=Ne,E=Me}if(z.da){if(!je(b,E,Ne=[z.ib],Me=[z.hb]))return 2;b=Ne[0],E=Me[0]}}ne.width=b,ne.height=E;e:{var Qe=ne.width,qe=ne.height;if(b=ne.S,0>=Qe||0>=qe||!(b>=Vh&&13>b))b=2;else{if(0>=ne.Rd&&ne.sd==null){we=Me=Ne=E=0;var yt=(Be=Qe*t0[b])*qe;if(11>b||(Me=(qe+1)/2*(E=(Qe+1)/2),b==12&&(we=(Ne=Qe)*qe)),(qe=l(yt+2*Me+we))==null){b=1;break e}ne.sd=qe,11>b?((Qe=ne.f.RGBA).eb=qe,Qe.fb=0,Qe.A=Be,Qe.size=yt):((Qe=ne.f.kb).y=qe,Qe.O=0,Qe.fa=Be,Qe.Fd=yt,Qe.f=qe,Qe.N=0+yt,Qe.Ab=E,Qe.Cd=Me,Qe.ea=qe,Qe.W=0+yt+Me,Qe.Db=E,Qe.Ed=Me,b==12&&(Qe.F=qe,Qe.J=0+yt+2*Me),Qe.Tc=we,Qe.lb=Ne)}if(E=1,Ne=ne.S,Me=ne.width,we=ne.height,Ne>=Vh&&13>Ne)if(11>Ne)b=ne.f.RGBA,E&=(Be=Math.abs(b.A))*(we-1)+Me<=b.size,E&=Be>=Me*t0[Ne],E&=b.eb!=null;else{b=ne.f.kb,Be=(Me+1)/2,yt=(we+1)/2,Qe=Math.abs(b.fa),qe=Math.abs(b.Ab);var Ft=Math.abs(b.Db),ze=Math.abs(b.lb),Tt=ze*(we-1)+Me;E&=Qe*(we-1)+Me<=b.Fd,E&=qe*(yt-1)+Be<=b.Cd,E=(E&=Ft*(yt-1)+Be<=b.Ed)&Qe>=Me&qe>=Be&Ft>=Be,E&=b.y!=null,E&=b.f!=null,E&=b.ea!=null,Ne==12&&(E&=ze>=Me,E&=Tt<=b.Tc,E&=b.F!=null)}else E=0;b=E?0:2}}return b!=0||z!=null&&z.fd&&(b=Eu(ne)),b}var Uo=64,_a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],da=24,El=32,jl=8,co=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];re("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(b){return b},j.Predictor2=function(b,E,z){return E[z+0]},j.Predictor3=function(b,E,z){return E[z+1]},j.Predictor4=function(b,E,z){return E[z-1]},j.Predictor5=function(b,E,z){return Se(Se(b,E[z+1]),E[z+0])},j.Predictor6=function(b,E,z){return Se(b,E[z-1])},j.Predictor7=function(b,E,z){return Se(b,E[z+0])},j.Predictor8=function(b,E,z){return Se(E[z-1],E[z+0])},j.Predictor9=function(b,E,z){return Se(E[z+0],E[z+1])},j.Predictor10=function(b,E,z){return Se(Se(b,E[z-1]),Se(E[z+0],E[z+1]))},j.Predictor11=function(b,E,z){var ne=E[z+0];return 0>=lt(ne>>24&255,b>>24&255,(E=E[z-1])>>24&255)+lt(ne>>16&255,b>>16&255,E>>16&255)+lt(ne>>8&255,b>>8&255,E>>8&255)+lt(255&ne,255&b,255&E)?ne:b},j.Predictor12=function(b,E,z){var ne=E[z+0];return(st((b>>24&255)+(ne>>24&255)-((E=E[z-1])>>24&255))<<24|st((b>>16&255)+(ne>>16&255)-(E>>16&255))<<16|st((b>>8&255)+(ne>>8&255)-(E>>8&255))<<8|st((255&b)+(255&ne)-(255&E)))>>>0},j.Predictor13=function(b,E,z){var ne=E[z-1];return(Nt((b=Se(b,E[z+0]))>>24&255,ne>>24&255)<<24|Nt(b>>16&255,ne>>16&255)<<16|Nt(b>>8&255,ne>>8&255)<<8|Nt(255&b,255&ne))>>>0};var md=j.PredictorAdd0;j.PredictorAdd1=At,re("Predictor2","PredictorAdd2"),re("Predictor3","PredictorAdd3"),re("Predictor4","PredictorAdd4"),re("Predictor5","PredictorAdd5"),re("Predictor6","PredictorAdd6"),re("Predictor7","PredictorAdd7"),re("Predictor8","PredictorAdd8"),re("Predictor9","PredictorAdd9"),re("Predictor10","PredictorAdd10"),re("Predictor11","PredictorAdd11"),re("Predictor12","PredictorAdd12"),re("Predictor13","PredictorAdd13");var gd=j.PredictorAdd2;Et("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),Et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Zr,Qh=j.ColorIndexInverseTransform,Il=j.MapARGB,Ol=j.VP8LColorIndexInverseTransformAlpha,Li=j.MapAlpha,uo=j.VP8LPredictorsAdd=[];uo.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var xd,pd,ho,fo,Ml,_c,ja,mo,qi,Ka,zn,Bn,Cr,ei,Ll,Cl,Cc,ju,Uf,Mg,Lg,wg,Wf,Bf,yc,Qa,Iu,Ia,bc=l(511),Gh=l(2041),Ou=l(225),Mu=l(767),Yh=0,go=Gh,Lu=Ou,Xi=Mu,wi=bc,Vh=0,Ji=1,$h=2,Ga=3,wu=4,_d=5,Wo=6,Pu=7,Hh=8,Cd=9,zh=10,Ya=[2,3,7],yd=[3,3,11],Nc=[280,256,256,256,40],qh=[0,1,1,1,0],Au=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Va=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$a=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Bo=8,Ha=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],za=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Oa=null,Pg=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ff=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ag=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Pi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Mn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ua=[],Qr=[],yl=[],Fo=1,Kf=2,xo=[],Ai=[];io("UpsampleRgbLinePair",ao,3),io("UpsampleBgrLinePair",vi,3),io("UpsampleRgbaLinePair",ca,4),io("UpsampleBgraLinePair",Tl,4),io("UpsampleArgbLinePair",hd,4),io("UpsampleRgba4444LinePair",ko,2),io("UpsampleRgb565LinePair",Ao,2);var Sc=j.UpsampleRgbLinePair,Qf=j.UpsampleBgrLinePair,bd=j.UpsampleRgbaLinePair,Jh=j.UpsampleBgraLinePair,Ko=j.UpsampleArgbLinePair,wl=j.UpsampleRgba4444LinePair,Qo=j.UpsampleRgb565LinePair,qa=16,Nd=1<<qa-1,vc=-227,Go=482,Zh=6,Yo=0,ki=l(256),e0=l(256),kg=l(256),j_=l(256),I_=l(Go-vc),O_=l(Go-vc);lo("YuvToRgbRow",ao,3),lo("YuvToBgrRow",vi,3),lo("YuvToRgbaRow",ca,4),lo("YuvToBgraRow",Tl,4),lo("YuvToArgbRow",hd,4),lo("YuvToRgba4444Row",ko,2),lo("YuvToRgb565Row",Ao,2);var ti=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Sd=[0,2,8],ku=[8,7,6,4,4,2,2,2,1,1,1,1],Uu=1;this.WebPDecodeRGBA=function(b,E,z,ne,Ne){var Me=Ji,we=new is,Be=new Ge;we.ba=Be,Be.S=Me,Be.width=[Be.width],Be.height=[Be.height];var Qe=Be.width,qe=Be.height,yt=new _e;if(yt==null||b==null)var Ft=2;else e(yt!=null),Ft=pl(b,E,z,yt.width,yt.height,yt.Pd,yt.Qd,yt.format,null);if(Ft!=0?Qe=0:(Qe!=null&&(Qe[0]=yt.width[0]),qe!=null&&(qe[0]=yt.height[0]),Qe=1),Qe){Be.width=Be.width[0],Be.height=Be.height[0],ne!=null&&(ne[0]=Be.width),Ne!=null&&(Ne[0]=Be.height);e:{if(ne=new wt,(Ne=new gs).data=b,Ne.w=E,Ne.ha=z,Ne.kd=1,E=[0],e(Ne!=null),((b=pl(Ne.data,Ne.w,Ne.ha,null,null,null,E,null,Ne))==0||b==7)&&E[0]&&(b=4),(E=b)==0){if(e(we!=null),ne.data=Ne.data,ne.w=Ne.w+Ne.offset,ne.ha=Ne.ha-Ne.offset,ne.put=de,ne.ac=mt,ne.bc=tt,ne.ma=we,Ne.xa){if((b=dt())==null){we=1;break e}if((function(ze,Tt){var Pt=[0],ts=[0],Ut=[0];t:for(;;){if(ze==null)return 0;if(Tt==null)return ze.a=2,0;if(ze.l=Tt,ze.a=0,se(ze.m,Tt.data,Tt.w,Tt.ha),!De(ze.m,Pt,ts,Ut)){ze.a=3;break t}if(ze.xb=Kf,Tt.width=Pt[0],Tt.height=ts[0],!et(Pt[0],ts[0],1,ze,null))break t;return 1}return e(ze.a!=0),0})(b,ne)){if(ne=(E=_l(ne.width,ne.height,we.Oa,we.ba))==0){t:{ne=b;s:for(;;){if(ne==null){ne=0;break t}if(e(ne.s.yc!=null),e(ne.s.Ya!=null),e(0<ne.s.Wb),e((z=ne.l)!=null),e((Ne=z.ma)!=null),ne.xb!=0){if(ne.ca=Ne.ba,ne.tb=Ne.tb,e(ne.ca!=null),!oo(Ne.Oa,z,Ga)){ne.a=2;break s}if(!Qt(ne,z.width)||z.da)break s;if((z.da||ht(ne.ca.S))&&gl(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&gl()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!Z(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break s}ne.xb=0}if(!Ns(ne,ne.V,ne.Ba,ne.c,ne.i,z.o,Xt))break s;Ne.Dc=ne.Ma,ne=1;break t}e(ne.a!=0),ne=0}ne=!ne}ne&&(E=b.a)}else E=b.a}else{if((b=new Bt)==null){we=1;break e}if(b.Fa=Ne.na,b.P=Ne.P,b.qc=Ne.Sa,ss(b,ne)){if((E=_l(ne.width,ne.height,we.Oa,we.ba))==0){if(b.Aa=0,z=we.Oa,e((Ne=b)!=null),z!=null){if(0<(Qe=0>(Qe=z.Md)?0:100<Qe?255:255*Qe/100)){for(qe=yt=0;4>qe;++qe)12>(Ft=Ne.pb[qe]).lc&&(Ft.ia=Qe*ku[0>Ft.lc?0:Ft.lc]>>3),yt|=Ft.ia;yt&&(alert("todo:VP8InitRandom"),Ne.ia=1)}Ne.Ga=z.Id,100<Ne.Ga?Ne.Ga=100:0>Ne.Ga&&(Ne.Ga=0)}(function(ze,Tt){if(ze==null)return 0;if(Tt==null)return Vt(ze,2,"NULL VP8Io parameter in VP8Decode().");if(!ze.cb&&!ss(ze,Tt))return 0;if(e(ze.cb),Tt.ac==null||Tt.ac(Tt)){Tt.ob&&(ze.L=0);var Pt=Sd[ze.L];if(ze.L==2?(ze.yb=0,ze.zb=0):(ze.yb=Tt.v-Pt>>4,ze.zb=Tt.j-Pt>>4,0>ze.yb&&(ze.yb=0),0>ze.zb&&(ze.zb=0)),ze.Va=Tt.o+15+Pt>>4,ze.Hb=Tt.va+15+Pt>>4,ze.Hb>ze.za&&(ze.Hb=ze.za),ze.Va>ze.Ub&&(ze.Va=ze.Ub),0<ze.L){var ts=ze.ed;for(Pt=0;4>Pt;++Pt){var Ut;if(ze.Qa.Cb){var Zt=ze.Qa.Lb[Pt];ze.Qa.Fb||(Zt+=ts.Tb)}else Zt=ts.Tb;for(Ut=0;1>=Ut;++Ut){var as=ze.gd[Pt][Ut],_s=Zt;if(ts.Pc&&(_s+=ts.vd[0],Ut&&(_s+=ts.od[0])),0<(_s=0>_s?0:63<_s?63:_s)){var fs=_s;0<ts.wb&&(fs=4<ts.wb?fs>>2:fs>>1)>9-ts.wb&&(fs=9-ts.wb),1>fs&&(fs=1),as.dd=fs,as.tc=2*_s+fs,as.ld=40<=_s?2:15<=_s?1:0}else as.tc=0;as.La=Ut}}}Pt=0}else Vt(ze,6,"Frame setup failed"),Pt=ze.a;if(Pt=Pt==0){if(Pt){ze.$c=0,0<ze.Aa||(ze.Ic=Uu);t:{Pt=ze.Ic,ts=4*(fs=ze.za);var $s=32*fs,Ws=fs+1,mn=0<ze.L?fs*(0<ze.Aa?2:1):0,Gs=(ze.Aa==2?2:1)*fs;if((as=ts+832+(Ut=3*(16*Pt+Sd[ze.L])/2*$s)+(Zt=ze.Fa!=null&&0<ze.Fa.length?ze.Kc.c*ze.Kc.i:0))!=as)Pt=0;else{if(as>ze.Vb){if(ze.Vb=0,ze.Ec=l(as),ze.Fc=0,ze.Ec==null){Pt=Vt(ze,1,"no memory during frame initialization.");break t}ze.Vb=as}as=ze.Ec,_s=ze.Fc,ze.Ac=as,ze.Bc=_s,_s+=ts,ze.Gd=c($s,bt),ze.Hd=0,ze.rb=c(Ws+1,Ee),ze.sb=1,ze.wa=mn?c(mn,Ze):null,ze.Y=0,ze.D.Nb=0,ze.D.wa=ze.wa,ze.D.Y=ze.Y,0<ze.Aa&&(ze.D.Y+=fs),e(!0),ze.oc=as,ze.pc=_s,_s+=832,ze.ya=c(Gs,Ke),ze.aa=0,ze.D.ya=ze.ya,ze.D.aa=ze.aa,ze.Aa==2&&(ze.D.aa+=fs),ze.R=16*fs,ze.B=8*fs,fs=($s=Sd[ze.L])*ze.R,$s=$s/2*ze.B,ze.sa=as,ze.ta=_s+fs,ze.qa=ze.sa,ze.ra=ze.ta+16*Pt*ze.R+$s,ze.Ha=ze.qa,ze.Ia=ze.ra+8*Pt*ze.B+$s,ze.$c=0,_s+=Ut,ze.mb=Zt?as:null,ze.nb=Zt?_s:null,e(_s+Zt<=ze.Fc+ze.Vb),Es(ze),i(ze.Ac,ze.Bc,0,ts),Pt=1}}if(Pt){if(Tt.ka=0,Tt.y=ze.sa,Tt.O=ze.ta,Tt.f=ze.qa,Tt.N=ze.ra,Tt.ea=ze.Ha,Tt.Vd=ze.Ia,Tt.fa=ze.R,Tt.Rc=ze.B,Tt.F=null,Tt.J=0,!Yh){for(Pt=-255;255>=Pt;++Pt)bc[255+Pt]=0>Pt?-Pt:Pt;for(Pt=-1020;1020>=Pt;++Pt)Gh[1020+Pt]=-128>Pt?-128:127<Pt?127:Pt;for(Pt=-112;112>=Pt;++Pt)Ou[112+Pt]=-16>Pt?-16:15<Pt?15:Pt;for(Pt=-255;510>=Pt;++Pt)Mu[255+Pt]=0>Pt?0:255<Pt?255:Pt;Yh=1}ja=nt,mo=cs,Ka=ms,zn=Ks,Bn=Ls,qi=Ms,Cr=Fh,ei=no,Ll=ye,Cl=Xe,Cc=Kh,ju=B,Uf=_t,Mg=Ot,Lg=ml,wg=ws,Wf=Hn,Bf=Kr,Qr[0]=qr,Qr[1]=Cs,Qr[2]=Lr,Qr[3]=Ir,Qr[4]=vr,Qr[5]=cr,Qr[6]=cn,Qr[7]=ni,Qr[8]=Hi,Qr[9]=Fr,ua[0]=hs,ua[1]=Os,ua[2]=es,ua[3]=Ds,ua[4]=Us,ua[5]=Qs,ua[6]=Is,yl[0]=Ta,yl[1]=Ht,yl[2]=Or,yl[3]=zi,yl[4]=Rs,yl[5]=Fa,yl[6]=Pn,Pt=1}else Pt=0}Pt&&(Pt=(function(On,Tr){for(On.M=0;On.M<On.Va;++On.M){var Cn,Bs=On.Jc[On.M&On.Xb],Ts=On.m,Pr=On;for(Cn=0;Cn<Pr.za;++Cn){var on=Ts,Nn=Pr,nr=Nn.Ac,gi=Nn.Bc+4*Cn,Ui=Nn.zc,yr=Nn.ya[Nn.aa+Cn];if(Nn.Qa.Bb?yr.$b=ce(on,Nn.Pa.jb[0])?2+ce(on,Nn.Pa.jb[2]):ce(on,Nn.Pa.jb[1]):yr.$b=0,Nn.kc&&(yr.Ad=ce(on,Nn.Bd)),yr.Za=!ce(on,145)+0,yr.Za){var ii=yr.Ob,Zi=0;for(Nn=0;4>Nn;++Nn){var ai,Tn=Ui[0+Nn];for(ai=0;4>ai;++ai){Tn=Pi[nr[gi+ai]][Tn];for(var Gn=Xh[ce(on,Tn[0])];0<Gn;)Gn=Xh[2*Gn+ce(on,Tn[Gn])];Tn=-Gn,nr[gi+ai]=Tn}r(ii,Zi,nr,gi,4),Zi+=4,Ui[0+Nn]=Tn}}else Tn=ce(on,156)?ce(on,128)?1:3:ce(on,163)?2:0,yr.Ob[0]=Tn,i(nr,gi,Tn,4),i(Ui,0,Tn,4);yr.Dd=ce(on,142)?ce(on,114)?ce(on,183)?1:3:2:0}if(Pr.m.Ka)return Vt(On,7,"Premature end-of-partition0 encountered.");for(;On.ja<On.za;++On.ja){if(Pr=Bs,on=(Ts=On).rb[Ts.sb-1],nr=Ts.rb[Ts.sb+Ts.ja],Cn=Ts.ya[Ts.aa+Ts.ja],gi=Ts.kc?Cn.Ad:0)on.la=nr.la=0,Cn.Za||(on.Na=nr.Na=0),Cn.Hc=0,Cn.Gc=0,Cn.ia=0;else{var Ar,qn;if(on=nr,nr=Pr,gi=Ts.Pa.Xc,Ui=Ts.ya[Ts.aa+Ts.ja],yr=Ts.pb[Ui.$b],Nn=Ui.ad,ii=0,Zi=Ts.rb[Ts.sb-1],Tn=ai=0,i(Nn,ii,0,384),Ui.Za)var xi=0,kr=gi[3];else{Gn=l(16);var Yn=on.Na+Zi.Na;if(Yn=Oa(nr,gi[1],Yn,yr.Eb,0,Gn,0),on.Na=Zi.Na=(0<Yn)+0,1<Yn)ja(Gn,0,Nn,ii);else{var si=Gn[0]+3>>3;for(Gn=0;256>Gn;Gn+=16)Nn[ii+Gn]=si}xi=1,kr=gi[0]}var rr=15&on.la,li=15&Zi.la;for(Gn=0;4>Gn;++Gn){var oi=1&li;for(si=qn=0;4>si;++si)rr=rr>>1|(oi=(Yn=Oa(nr,kr,Yn=oi+(1&rr),yr.Sc,xi,Nn,ii))>xi)<<7,qn=qn<<2|(3<Yn?3:1<Yn?2:Nn[ii+0]!=0),ii+=16;rr>>=4,li=li>>1|oi<<7,ai=(ai<<8|qn)>>>0}for(kr=rr,xi=li>>4,Ar=0;4>Ar;Ar+=2){for(qn=0,rr=on.la>>4+Ar,li=Zi.la>>4+Ar,Gn=0;2>Gn;++Gn){for(oi=1&li,si=0;2>si;++si)Yn=oi+(1&rr),rr=rr>>1|(oi=0<(Yn=Oa(nr,gi[2],Yn,yr.Qc,0,Nn,ii)))<<3,qn=qn<<2|(3<Yn?3:1<Yn?2:Nn[ii+0]!=0),ii+=16;rr>>=2,li=li>>1|oi<<5}Tn|=qn<<4*Ar,kr|=rr<<4<<Ar,xi|=(240&li)<<Ar}on.la=kr,Zi.la=xi,Ui.Hc=ai,Ui.Gc=Tn,Ui.ia=43690&Tn?0:yr.ia,gi=!(ai|Tn)}if(0<Ts.L&&(Ts.wa[Ts.Y+Ts.ja]=Ts.gd[Cn.$b][Cn.Za],Ts.wa[Ts.Y+Ts.ja].La|=!gi),Pr.Ka)return Vt(On,7,"Premature end-of-file encountered.")}if(Es(On),Ts=Tr,Pr=1,Cn=(Bs=On).D,on=0<Bs.L&&Bs.M>=Bs.zb&&Bs.M<=Bs.Va,Bs.Aa==0)t:{if(Cn.M=Bs.M,Cn.uc=on,Ea(Bs,Cn),Pr=1,Cn=(qn=Bs.D).Nb,on=(Tn=Sd[Bs.L])*Bs.R,nr=Tn/2*Bs.B,Gn=16*Cn*Bs.R,si=8*Cn*Bs.B,gi=Bs.sa,Ui=Bs.ta-on+Gn,yr=Bs.qa,Nn=Bs.ra-nr+si,ii=Bs.Ha,Zi=Bs.Ia-nr+si,li=(rr=qn.M)==0,ai=rr>=Bs.Va-1,Bs.Aa==2&&Ea(Bs,qn),qn.uc)for(oi=(Yn=Bs).D.M,e(Yn.D.uc),qn=Yn.yb;qn<Yn.Hb;++qn){xi=qn,kr=oi;var hr=(Fn=(ci=Yn).D).Nb;Ar=ci.R;var Fn=Fn.wa[Fn.Y+xi],ea=ci.sa,Gr=ci.ta+16*hr*Ar+16*xi,tn=Fn.dd,nn=Fn.tc;if(nn!=0)if(e(3<=nn),ci.L==1)0<xi&&wg(ea,Gr,Ar,nn+4),Fn.La&&Bf(ea,Gr,Ar,nn),0<kr&&Lg(ea,Gr,Ar,nn+4),Fn.La&&Wf(ea,Gr,Ar,nn);else{var Vn=ci.B,Ca=ci.qa,Xa=ci.ra+8*hr*Vn+8*xi,ha=ci.Ha,ci=ci.Ia+8*hr*Vn+8*xi;hr=Fn.ld,0<xi&&(ei(ea,Gr,Ar,nn+4,tn,hr),Cl(Ca,Xa,ha,ci,Vn,nn+4,tn,hr)),Fn.La&&(ju(ea,Gr,Ar,nn,tn,hr),Mg(Ca,Xa,ha,ci,Vn,nn,tn,hr)),0<kr&&(Cr(ea,Gr,Ar,nn+4,tn,hr),Ll(Ca,Xa,ha,ci,Vn,nn+4,tn,hr)),Fn.La&&(Cc(ea,Gr,Ar,nn,tn,hr),Uf(Ca,Xa,ha,ci,Vn,nn,tn,hr))}}if(Bs.ia&&alert("todo:DitherRow"),Ts.put!=null){if(qn=16*rr,rr=16*(rr+1),li?(Ts.y=Bs.sa,Ts.O=Bs.ta+Gn,Ts.f=Bs.qa,Ts.N=Bs.ra+si,Ts.ea=Bs.Ha,Ts.W=Bs.Ia+si):(qn-=Tn,Ts.y=gi,Ts.O=Ui,Ts.f=yr,Ts.N=Nn,Ts.ea=ii,Ts.W=Zi),ai||(rr-=Tn),rr>Ts.o&&(rr=Ts.o),Ts.F=null,Ts.J=null,Bs.Fa!=null&&0<Bs.Fa.length&&qn<rr&&(Ts.J=_r(Bs,Ts,qn,rr-qn),Ts.F=Bs.mb,Ts.F==null&&Ts.F.length==0)){Pr=Vt(Bs,3,"Could not decode alpha data.");break t}qn<Ts.j&&(Tn=Ts.j-qn,qn=Ts.j,e(!(1&Tn)),Ts.O+=Bs.R*Tn,Ts.N+=Bs.B*(Tn>>1),Ts.W+=Bs.B*(Tn>>1),Ts.F!=null&&(Ts.J+=Ts.width*Tn)),qn<rr&&(Ts.O+=Ts.v,Ts.N+=Ts.v>>1,Ts.W+=Ts.v>>1,Ts.F!=null&&(Ts.J+=Ts.v),Ts.ka=qn-Ts.j,Ts.U=Ts.va-Ts.v,Ts.T=rr-qn,Pr=Ts.put(Ts))}Cn+1!=Bs.Ic||ai||(r(Bs.sa,Bs.ta-on,gi,Ui+16*Bs.R,on),r(Bs.qa,Bs.ra-nr,yr,Nn+8*Bs.B,nr),r(Bs.Ha,Bs.Ia-nr,ii,Zi+8*Bs.B,nr))}if(!Pr)return Vt(On,6,"Output aborted.")}return 1})(ze,Tt)),Tt.bc!=null&&Tt.bc(Tt),Pt&=1}return Pt?(ze.cb=0,Pt):0})(b,ne)||(E=b.a)}}else E=b.a}E==0&&we.Oa!=null&&we.Oa.fd&&(E=Eu(we.ba))}we=E}Me=we!=0?null:11>Me?Be.f.RGBA.eb:Be.f.kb.y}else Me=null;return Me};var t0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(j,S){for(var P="",F=0;F<4;F++)P+=String.fromCharCode(j[S++]);return P}function m(j,S){return j[S+0]|j[S+1]<<8}function p(j,S){return(j[S+0]|j[S+1]<<8|j[S+2]<<16)>>>0}function y(j,S){return(j[S+0]|j[S+1]<<8|j[S+2]<<16|j[S+3]<<24)>>>0}new u;var g=[0],N=[0],C=[],v=new u,R=t,A=(function(j,S){var P={},F=0,ee=!1,J=0,$=0;if(P.frames=[],!(function(I,U){for(var Q=0;Q<4;Q++)if(I[U+Q]!="RIFF".charCodeAt(Q))return!0;return!1})(j,S)){for(y(j,S+=4),S+=8;S<j.length;){var Y=f(j,S),K=y(j,S+=4);S+=4;var w=K+(1&K);switch(Y){case"VP8 ":case"VP8L":P.frames[F]===void 0&&(P.frames[F]={}),(T=P.frames[F]).src_off=ee?$:S-8,T.src_size=J+K+8,F++,ee&&(ee=!1,J=0,$=0);break;case"VP8X":(T=P.header={}).feature_flags=j[S];var se=S+4;T.canvas_width=1+p(j,se),se+=3,T.canvas_height=1+p(j,se),se+=3;break;case"ALPH":ee=!0,J=w+8,$=S-8;break;case"ANIM":(T=P.header).bgcolor=y(j,S),se=S+4,T.loop_count=m(j,se),se+=2;break;case"ANMF":var oe,T;(T=P.frames[F]={}).offset_x=2*p(j,S),S+=3,T.offset_y=2*p(j,S),S+=3,T.width=1+p(j,S),S+=3,T.height=1+p(j,S),S+=3,T.duration=p(j,S),S+=3,oe=j[S++],T.dispose=1&oe,T.blend=oe>>1&1}Y!="ANMF"&&(S+=w)}return P}})(R,0);A.response=R,A.rgbaoutput=!0,A.dataurl=!1;var M=A.header?A.header:null,L=A.frames?A.frames:null;if(M){M.loop_counter=M.loop_count,g=[M.canvas_height],N=[M.canvas_width];for(var k=0;k<L.length&&L[k].blend!=0;k++);}var V=L[0],G=v.WebPDecodeRGBA(R,V.src_off,V.src_size,N,g);V.rgba=G,V.imgwidth=N[0],V.imgheight=g[0];for(var W=0;W<N[0]*g[0]*4;W++)C[W]=G[W];return this.width=N,this.height=g,this.data=C,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function UF(){var t,e=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(e));t=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function WF(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var e,n,r,i,l,c,d,u,f,m=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new u,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new c,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new c,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,u=this.internal.Matrix,f=new m}]);var p=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=I;Object.defineProperty(this,"pdf",{get:function(){return U}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Z){Q=!!Z}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(Z){H=!!Z}});var q=0;Object.defineProperty(this,"posX",{get:function(){return q},set:function(Z){isNaN(Z)||(q=Z)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(Z){isNaN(Z)||(ae=Z)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Z){var ie;typeof Z=="number"?ie=[Z,Z,Z,Z]:((ie=new Array(4))[0]=Z[0],ie[1]=Z.length>=2?Z[1]:ie[0],ie[2]=Z.length>=3?Z[2]:ie[0],ie[3]=Z.length>=4?Z[3]:ie[1]),f.margin=ie}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(Z){fe=Z}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(Z){ge=Z}});var ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ce},set:function(Z){ce=Z}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Z){Z instanceof m&&(f=Z)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Z){f.path=Z}});var Re=[];Object.defineProperty(this,"ctxStack",{get:function(){return Re},set:function(Z){Re=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var ie;ie=y(Z),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var ie=y(Z);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var X=null,me=null,he=null;Object.defineProperty(this,"fontFaces",{get:function(){return he},set:function(Z){X=null,me=null,he=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var ie;if(this.ctx.font=Z,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Z))!==null){var te=ie[1];ie[2];var je=ie[3],be=ie[4];ie[5];var Te=ie[6],re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(re==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:re==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var pe=(function(Et){var Rt,$e,gt=[],Fe=Et.trim();if(Fe==="")return qC;if(Fe in ZR)return[ZR[Fe]];for(;Fe!=="";){switch($e=null,Rt=(Fe=tT(Fe)).charAt(0)){case'"':case"'":$e=MF(Fe.substring(1),Rt);break;default:$e=LF(Fe)}if($e===null||(gt.push($e[0]),(Fe=tT($e[1]))!==""&&Fe.charAt(0)!==","))return qC;Fe=Fe.replace(/^,/,"")}return gt})(Te);if(this.fontFaces){var Se=(function(Et,Rt){var $e=Et.getFontList(),gt=JSON.stringify($e);if(X===null||me!==gt){var Fe=(function(rt){var at=[];return Object.keys(rt).forEach(function(It){rt[It].forEach(function(ht){var Je=null;switch(ht){case"bold":Je={family:It,weight:"bold"};break;case"italic":Je={family:It,style:"italic"};break;case"bolditalic":Je={family:It,weight:"bold",style:"italic"};break;case"":case"normal":Je={family:It}}Je!==null&&(Je.ref={name:It,style:ht},at.push(Je))})}),at})($e);X=(function(rt){for(var at={},It=0;It<rt.length;++It){var ht=zC(rt[It]),Je=ht.family,ve=ht.stretch,Ge=ht.style,_e=ht.weight;at[Je]=at[Je]||{},at[Je][ve]=at[Je][ve]||{},at[Je][ve][Ge]=at[Je][ve][Ge]||{},at[Je][ve][Ge][_e]=ht}return at})(Fe.concat(Rt)),me=gt}return X})(this.pdf,this.fontFaces),st=pe.map(function(Et){return{family:Et,stretch:"normal",weight:je,style:te}}),Nt=(function(Et,Rt,$e){for(var gt=($e=$e||{}).defaultFontFamily||"times",Fe=Object.assign({},OF,$e.genericFontFamilies||{}),rt=null,at=null,It=0;It<Rt.length;++It)if(Fe[(rt=zC(Rt[It])).family]&&(rt.family=Fe[rt.family]),Et.hasOwnProperty(rt.family)){at=Et[rt.family];break}if(!(at=at||Et[gt]))throw new Error("Could not find a font-family for the rule '"+eT(rt)+"' and default family '"+gt+"'.");if(at=(function(ht,Je){if(Je[ht])return Je[ht];var ve=tb[ht],Ge=ve<=tb.normal?-1:1,_e=JR(Je,jI,ve,Ge);if(!_e)throw new Error("Could not find a matching font-stretch value for "+ht);return _e})(rt.stretch,at),at=(function(ht,Je){if(Je[ht])return Je[ht];for(var ve=EI[ht],Ge=0;Ge<ve.length;++Ge)if(Je[ve[Ge]])return Je[ve[Ge]];throw new Error("Could not find a matching font-style for "+ht)})(rt.style,at),!(at=(function(ht,Je){if(Je[ht])return Je[ht];if(ht===400&&Je[500])return Je[500];if(ht===500&&Je[400])return Je[400];var ve=IF[ht],Ge=JR(Je,II,ve,ht<400?-1:1);if(!Ge)throw new Error("Could not find a matching font-weight for value "+ht);return Ge})(rt.weight,at)))throw new Error("Failed to resolve a font for the rule '"+eT(rt)+"'.");return at})(Se,st);this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var lt="";(je==="bold"||parseInt(je,10)>=700||te==="bold")&&(lt="bold"),te==="italic"&&(lt+="italic"),lt.length===0&&(lt="normal");for(var At="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<pe.length;We++){if(this.pdf.internal.getFont(pe[We],lt,{noFallback:!0,disableWarning:!0})!==void 0){At=pe[We];break}if(lt==="bolditalic"&&this.pdf.internal.getFont(pe[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=pe[We],lt="bold";else if(this.pdf.internal.getFont(pe[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=pe[We],lt="normal";break}}if(At===""){for(var Dt=0;Dt<pe.length;Dt++)if(ot[pe[Dt]]){At=ot[pe[Dt]];break}}At=At===""?"Times":At,this.pdf.setFont(At,lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,T.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,T.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};p.prototype.setLineDash=function(I){this.lineDash=I},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){L.call(this,"fill",!1)},p.prototype.stroke=function(){L.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(I,U){if(isNaN(I)||isNaN(U))throw jr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new c(I,U));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new c(I,U)},p.prototype.closePath=function(){var I=new c(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&xr(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){I=new c(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(I.x,I.y)},p.prototype.lineTo=function(I,U){if(isNaN(I)||isNaN(U))throw jr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new c(I,U));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new c(Q.x,Q.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),L.call(this,null,!0)},p.prototype.quadraticCurveTo=function(I,U,Q,H){if(isNaN(Q)||isNaN(H)||isNaN(I)||isNaN(U))throw jr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var q=this.ctx.transform.applyToPoint(new c(Q,H)),ae=this.ctx.transform.applyToPoint(new c(I,U));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:q.x,y:q.y}),this.ctx.lastPoint=new c(q.x,q.y)},p.prototype.bezierCurveTo=function(I,U,Q,H,q,ae){if(isNaN(q)||isNaN(ae)||isNaN(I)||isNaN(U)||isNaN(Q)||isNaN(H))throw jr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new c(q,ae)),ge=this.ctx.transform.applyToPoint(new c(I,U)),ce=this.ctx.transform.applyToPoint(new c(Q,H));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:ce.x,y2:ce.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},p.prototype.arc=function(I,U,Q,H,q,ae){if(isNaN(I)||isNaN(U)||isNaN(Q)||isNaN(H)||isNaN(q))throw jr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new c(I,U));I=fe.x,U=fe.y;var ge=this.ctx.transform.applyToPoint(new c(0,Q)),ce=this.ctx.transform.applyToPoint(new c(0,0));Q=Math.sqrt(Math.pow(ge.x-ce.x,2)+Math.pow(ge.y-ce.y,2))}Math.abs(q-H)>=2*Math.PI&&(H=0,q=2*Math.PI),this.path.push({type:"arc",x:I,y:U,radius:Q,startAngle:H,endAngle:q,counterclockwise:ae})},p.prototype.arcTo=function(I,U,Q,H,q){throw new Error("arcTo not implemented.")},p.prototype.rect=function(I,U,Q,H){if(isNaN(I)||isNaN(U)||isNaN(Q)||isNaN(H))throw jr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,U),this.lineTo(I+Q,U),this.lineTo(I+Q,U+H),this.lineTo(I,U+H),this.lineTo(I,U),this.lineTo(I+Q,U),this.lineTo(I,U)},p.prototype.fillRect=function(I,U,Q,H){if(isNaN(I)||isNaN(U)||isNaN(Q)||isNaN(H))throw jr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var q={};this.lineCap!=="butt"&&(q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,U,Q,H),this.fill(),q.hasOwnProperty("lineCap")&&(this.lineCap=q.lineCap),q.hasOwnProperty("lineJoin")&&(this.lineJoin=q.lineJoin)}},p.prototype.strokeRect=function(I,U,Q,H){if(isNaN(I)||isNaN(U)||isNaN(Q)||isNaN(H))throw jr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(I,U,Q,H),this.stroke())},p.prototype.clearRect=function(I,U,Q,H){if(isNaN(I)||isNaN(U)||isNaN(Q)||isNaN(H))throw jr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,U,Q,H))},p.prototype.save=function(I){I=typeof I!="boolean"||I;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},p.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(U),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(I){var U,Q,H,q;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))U=0,Q=0,H=0,q=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(ae!==null)U=parseInt(ae[1]),Q=parseInt(ae[2]),H=parseInt(ae[3]),q=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)U=parseInt(ae[1]),Q=parseInt(ae[2]),H=parseInt(ae[3]),q=parseFloat(ae[4]);else{if(q=1,typeof I=="string"&&I.charAt(0)!=="#"){var fe=new bI(I);I=fe.ok?fe.toHex():"#000000"}I.length===4?(U=I.substring(1,2),U+=U,Q=I.substring(2,3),Q+=Q,H=I.substring(3,4),H+=H):(U=I.substring(1,3),Q=I.substring(3,5),H=I.substring(5,7)),U=parseInt(U,16),Q=parseInt(Q,16),H=parseInt(H,16)}}return{r:U,g:Q,b:H,a:q,style:I}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(I,U,Q,H){if(isNaN(U)||isNaN(Q)||typeof I!="string")throw jr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!g.call(this)){var q=w(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;F.call(this,{text:I,x:U,y:Q,scale:ae,angle:q,align:this.textAlign,maxWidth:H})}},p.prototype.strokeText=function(I,U,Q,H){if(isNaN(U)||isNaN(Q)||typeof I!="string")throw jr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){H=isNaN(H)?void 0:H;var q=w(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;F.call(this,{text:I,x:U,y:Q,scale:ae,renderingMode:"stroke",angle:q,align:this.textAlign,maxWidth:H})}},p.prototype.measureText=function(I){if(typeof I!="string")throw jr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,Q=this.pdf.internal.scaleFactor,H=U.internal.getFontSize(),q=U.getStringUnitWidth(I)*H/U.internal.scaleFactor;return new function(ae){var fe=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this}({width:q*=Math.round(96*Q/72*1e4)/1e4})},p.prototype.scale=function(I,U){if(isNaN(I)||isNaN(U))throw jr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new u(I,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.rotate=function(I){if(isNaN(I))throw jr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new u(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.translate=function(I,U){if(isNaN(I)||isNaN(U))throw jr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new u(1,0,0,1,I,U);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.transform=function(I,U,Q,H,q,ae){if(isNaN(I)||isNaN(U)||isNaN(Q)||isNaN(H)||isNaN(q)||isNaN(ae))throw jr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new u(I,U,Q,H,q,ae);this.ctx.transform=this.ctx.transform.multiply(fe)},p.prototype.setTransform=function(I,U,Q,H,q,ae){I=isNaN(I)?1:I,U=isNaN(U)?0:U,Q=isNaN(Q)?0:Q,H=isNaN(H)?1:H,q=isNaN(q)?0:q,ae=isNaN(ae)?0:ae,this.ctx.transform=new u(I,U,Q,H,q,ae)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(I,U,Q,H,q,ae,fe,ge,ce){var Re=this.pdf.getImageProperties(I),X=1,me=1,he=1,Z=1;H!==void 0&&ge!==void 0&&(he=ge/H,Z=ce/q,X=Re.width/H*ge/H,me=Re.height/q*ce/q),ae===void 0&&(ae=U,fe=Q,U=0,Q=0),H!==void 0&&ge===void 0&&(ge=H,ce=q),H===void 0&&ge===void 0&&(ge=Re.width,ce=Re.height);var ie=this.ctx.transform.decompose(),te=w(ie.rotate.shx),je=new u,be=(je=(je=(je=je.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale)).applyToRectangle(new d(ae-U*he,fe-Q*Z,H*X,q*me));if(this.autoPaging){for(var Te,re=v.call(this,be),pe=[],Se=0;Se<re.length;Se+=1)pe.indexOf(re[Se])===-1&&pe.push(re[Se]);M(pe);for(var st=pe[0],Nt=pe[pe.length-1],lt=st;lt<Nt+1;lt++){this.pdf.setPage(lt);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=lt===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=lt===1?0:We+(lt-2)*Dt;if(this.ctx.clip_path.length!==0){var Rt=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Te,this.posX+this.margin[3],-Et+ot+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Rt}var $e=JSON.parse(JSON.stringify(be));$e=A([$e],this.posX+this.margin[3],-Et+ot+this.ctx.prevPageLastElemOffset)[0];var gt=(lt>st||lt<Nt)&&C.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Dt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,te),gt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",be.x,be.y,be.w,be.h,null,null,te)};var v=function(I,U,Q){var H=[];U=U||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var q=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":H.push(Math.floor((I.y+q)/Q)+1);break;case"arc":H.push(Math.floor((I.y+q-I.radius)/Q)+1),H.push(Math.floor((I.y+q+I.radius)/Q)+1);break;case"qct":var ae=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);H.push(Math.floor((ae.y+q)/Q)+1),H.push(Math.floor((ae.y+ae.h+q)/Q)+1);break;case"bct":var fe=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);H.push(Math.floor((fe.y+q)/Q)+1),H.push(Math.floor((fe.y+fe.h+q)/Q)+1);break;case"rect":H.push(Math.floor((I.y+q)/Q)+1),H.push(Math.floor((I.y+I.h+q)/Q)+1)}for(var ge=0;ge<H.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<H[ge];)R.call(this);return H},R=function(){var I=this.fillStyle,U=this.strokeStyle,Q=this.font,H=this.lineCap,q=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=U,this.font=Q,this.lineCap=H,this.lineWidth=q,this.lineJoin=ae},A=function(I,U,Q){for(var H=0;H<I.length;H++)switch(I[H].type){case"bct":I[H].x2+=U,I[H].y2+=Q;case"qct":I[H].x1+=U,I[H].y1+=Q;default:I[H].x+=U,I[H].y+=Q}return I},M=function(I){return I.sort(function(U,Q){return U-Q})},L=function(I,U){var Q=this.fillStyle,H=this.strokeStyle,q=this.lineCap,ae=this.lineWidth,fe=Math.abs(ae*this.ctx.transform.scaleX),ge=this.lineJoin;if(this.autoPaging){for(var ce,Re,X=JSON.parse(JSON.stringify(this.path)),me=JSON.parse(JSON.stringify(this.path)),he=[],Z=0;Z<me.length;Z++)if(me[Z].x!==void 0)for(var ie=v.call(this,me[Z]),te=0;te<ie.length;te+=1)he.indexOf(ie[te])===-1&&he.push(ie[te]);for(var je=0;je<he.length;je++)for(;this.pdf.internal.getNumberOfPages()<he[je];)R.call(this);M(he);for(var be=he[0],Te=he[he.length-1],re=be;re<Te+1;re++){this.pdf.setPage(re),this.fillStyle=Q,this.strokeStyle=H,this.lineCap=q,this.lineWidth=fe,this.lineJoin=ge;var pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=re===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=re===1?0:st+(re-2)*Nt;if(this.ctx.clip_path.length!==0){var At=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ce,this.posX+this.margin[3],-lt+Se+this.ctx.prevPageLastElemOffset),k.call(this,I,!0),this.path=At}if(Re=JSON.parse(JSON.stringify(X)),this.path=A(Re,this.posX+this.margin[3],-lt+Se+this.ctx.prevPageLastElemOffset),U===!1||re===0){var ot=(re>be||re<Te)&&C.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pe,Nt,null).clip().discardPath()),k.call(this,I,U),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}this.path=X}else this.lineWidth=fe,k.call(this,I,U),this.lineWidth=ae},k=function(I,U){if((I!=="stroke"||U||!N.call(this))&&(I==="stroke"||U||!g.call(this))){for(var Q,H,q=[],ae=this.path,fe=0;fe<ae.length;fe++){var ge=ae[fe];switch(ge.type){case"begin":q.push({begin:!0});break;case"close":q.push({close:!0});break;case"mt":q.push({start:ge,deltas:[],abs:[]});break;case"lt":var ce=q.length;if(ae[fe-1]&&!isNaN(ae[fe-1].x)&&(Q=[ge.x-ae[fe-1].x,ge.y-ae[fe-1].y],ce>0)){for(;ce>=0;ce--)if(q[ce-1].close!==!0&&q[ce-1].begin!==!0){q[ce-1].deltas.push(Q),q[ce-1].abs.push(ge);break}}break;case"bct":Q=[ge.x1-ae[fe-1].x,ge.y1-ae[fe-1].y,ge.x2-ae[fe-1].x,ge.y2-ae[fe-1].y,ge.x-ae[fe-1].x,ge.y-ae[fe-1].y],q[q.length-1].deltas.push(Q);break;case"qct":var Re=ae[fe-1].x+2/3*(ge.x1-ae[fe-1].x),X=ae[fe-1].y+2/3*(ge.y1-ae[fe-1].y),me=ge.x+2/3*(ge.x1-ge.x),he=ge.y+2/3*(ge.y1-ge.y),Z=ge.x,ie=ge.y;Q=[Re-ae[fe-1].x,X-ae[fe-1].y,me-ae[fe-1].x,he-ae[fe-1].y,Z-ae[fe-1].x,ie-ae[fe-1].y],q[q.length-1].deltas.push(Q);break;case"arc":q.push({deltas:[],abs:[],arc:!0}),Array.isArray(q[q.length-1].abs)&&q[q.length-1].abs.push(ge)}}H=U?null:I==="stroke"?"stroke":"fill";for(var te=!1,je=0;je<q.length;je++)if(q[je].arc)for(var be=q[je].abs,Te=0;Te<be.length;Te++){var re=be[Te];re.type==="arc"?W.call(this,re.x,re.y,re.radius,re.startAngle,re.endAngle,re.counterclockwise,void 0,U,!te):ee.call(this,re.x,re.y),te=!0}else if(q[je].close===!0)this.pdf.internal.out("h"),te=!1;else if(q[je].begin!==!0){var pe=q[je].start.x,Se=q[je].start.y;J.call(this,q[je].deltas,pe,Se),te=!0}H&&j.call(this,H),U&&S.call(this)}},V=function(I){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-Q;case"top":return I+U-Q;case"hanging":return I+U-2*Q;case"middle":return I+U/2-Q;default:return I}},G=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(U,Q){this.colorStops.push([U,Q])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var W=function(I,U,Q,H,q,ae,fe,ge,ce){for(var Re=Y.call(this,Q,H,q,ae),X=0;X<Re.length;X++){var me=Re[X];X===0&&(ce?P.call(this,me.x1+I,me.y1+U):ee.call(this,me.x1+I,me.y1+U)),$.call(this,I,U,me.x2,me.y2,me.x3,me.y3,me.x4,me.y4)}ge?S.call(this):j.call(this,fe)},j=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(I,U){this.pdf.internal.out(n(I)+" "+r(U)+" m")},F=function(I){var U;switch(I.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var Q,H,q,ae=this.pdf.getTextDimensions(I.text),fe=V.call(this,I.y),ge=G.call(this,fe)-ae.h,ce=this.ctx.transform.applyToPoint(new c(I.x,fe));if(this.autoPaging){var Re=this.ctx.transform.decompose(),X=new u;X=(X=(X=X.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale);for(var me=this.ctx.transform.applyToRectangle(new d(I.x,fe,ae.w,ae.h)),he=X.applyToRectangle(new d(I.x,ge,ae.w,ae.h)),Z=v.call(this,he),ie=[],te=0;te<Z.length;te+=1)ie.indexOf(Z[te])===-1&&ie.push(Z[te]);M(ie);for(var je=ie[0],be=ie[ie.length-1],Te=je;Te<be+1;Te++){this.pdf.setPage(Te);var re=Te===1?this.posY+this.margin[0]:this.margin[0],pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Se=this.pdf.internal.pageSize.height-this.margin[2],st=Se-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],lt=Nt-this.margin[3],At=Te===1?0:pe+(Te-2)*st;if(this.ctx.clip_path.length!==0){var ot=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Q,this.posX+this.margin[3],-1*At+re),k.call(this,"fill",!0),this.path=ot}var We=A([JSON.parse(JSON.stringify(he))],this.posX+this.margin[3],-At+re+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*I.scale),q=this.lineWidth,this.lineWidth=q*I.scale);var Dt=this.autoPaging!=="text";if(Dt||We.y+We.h<=Se){if(Dt||We.y>=re&&We.x<=Nt){var Et=Dt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Nt-We.x)[0],Rt=A([JSON.parse(JSON.stringify(me))],this.posX+this.margin[3],-At+re+this.ctx.prevPageLastElemOffset)[0],$e=Dt&&(Te>je||Te<be)&&C.call(this);$e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,st,null).clip().discardPath()),this.pdf.text(Et,Rt.x,Rt.y,{angle:I.angle,align:U,renderingMode:I.renderingMode}),$e&&this.pdf.restoreGraphicsState()}}else We.y<Se&&(this.ctx.prevPageLastElemOffset+=Se-We.y);I.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=q)}}else I.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*I.scale),q=this.lineWidth,this.lineWidth=q*I.scale),this.pdf.text(I.text,ce.x+this.posX,ce.y+this.posY,{angle:I.angle,align:U,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=q)},ee=function(I,U,Q,H){Q=Q||0,H=H||0,this.pdf.internal.out(n(I+Q)+" "+r(U+H)+" l")},J=function(I,U,Q){return this.pdf.lines(I,U,Q,null,null)},$=function(I,U,Q,H,q,ae,fe,ge){this.pdf.internal.out([e(i(Q+I)),e(l(H+U)),e(i(q+I)),e(l(ae+U)),e(i(fe+I)),e(l(ge+U)),"c"].join(" "))},Y=function(I,U,Q,H){for(var q=2*Math.PI,ae=Math.PI/2;U>Q;)U-=q;var fe=Math.abs(Q-U);fe<q&&H&&(fe=q-fe);for(var ge=[],ce=H?-1:1,Re=U;fe>1e-5;){var X=Re+ce*Math.min(fe,ae);ge.push(K.call(this,I,Re,X)),fe-=Math.abs(X-Re),Re=X}return ge},K=function(I,U,Q){var H=(Q-U)/2,q=I*Math.cos(H),ae=I*Math.sin(H),fe=q,ge=-ae,ce=fe*fe+ge*ge,Re=ce+fe*q+ge*ae,X=4/3*(Math.sqrt(2*ce*Re)-Re)/(fe*ae-ge*q),me=fe-X*ge,he=ge+X*fe,Z=me,ie=-he,te=H+U,je=Math.cos(te),be=Math.sin(te);return{x1:I*Math.cos(U),y1:I*Math.sin(U),x2:me*je-he*be,y2:me*be+he*je,x3:Z*je-ie*be,y3:Z*be+ie*je,x4:I*Math.cos(Q),y4:I*Math.sin(Q)}},w=function(I){return 180*I/Math.PI},se=function(I,U,Q,H,q,ae){var fe=I+.5*(Q-I),ge=U+.5*(H-U),ce=q+.5*(Q-q),Re=ae+.5*(H-ae),X=Math.min(I,q,fe,ce),me=Math.max(I,q,fe,ce),he=Math.min(U,ae,ge,Re),Z=Math.max(U,ae,ge,Re);return new d(X,he,me-X,Z-he)},oe=function(I,U,Q,H,q,ae,fe,ge){var ce,Re,X,me,he,Z,ie,te,je,be,Te,re,pe,Se,st=Q-I,Nt=H-U,lt=q-Q,At=ae-H,ot=fe-q,We=ge-ae;for(Re=0;Re<41;Re++)je=(ie=(X=I+(ce=Re/40)*st)+ce*((he=Q+ce*lt)-X))+ce*(he+ce*(q+ce*ot-he)-ie),be=(te=(me=U+ce*Nt)+ce*((Z=H+ce*At)-me))+ce*(Z+ce*(ae+ce*We-Z)-te),Re==0?(Te=je,re=be,pe=je,Se=be):(Te=Math.min(Te,je),re=Math.min(re,be),pe=Math.max(pe,je),Se=Math.max(Se,be));return new d(Math.round(Te),Math.round(re),Math.round(pe-Te),Math.round(Se-re))},T=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,U,Q=(I=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:U}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(en.API),(function(t){var e=function(c){var d,u,f,m,p,y,g,N,C,v;for(u=[],f=0,m=(c+=d="\0\0\0\0".slice(c.length%4||4)).length;m>f;f+=4)(p=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(y=(p=((p=((p=((p=(p-(v=p%85))/85)-(C=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)%85,u.push(y+33,g+33,N+33,C+33,v+33)):u.push(122);return(function(R,A){for(var M=A;M>0;M--)R.pop()})(u,d.length),String.fromCharCode.apply(String,u)+"~>"},n=function(c){var d,u,f,m,p,y=String,g="length",N=255,C="charCodeAt",v="slice",R="replace";for(c[v](-2),c=c[v](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),f=[],m=0,p=(c+=d="uuuuu"[v](c[g]%5||5))[g];p>m;m+=5)u=52200625*(c[C](m)-33)+614125*(c[C](m+1)-33)+7225*(c[C](m+2)-33)+85*(c[C](m+3)-33)+(c[C](m+4)-33),f.push(N&u>>24,N&u>>16,N&u>>8,N&u);return(function(A,M){for(var L=M;L>0;L--)A.pop()})(f,d[g]),y.fromCharCode.apply(y,f)},r=function(c){return c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(c){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),d.test(c)===!1)return"";for(var u="",f=0;f<c.length;f+=2)u+=String.fromCharCode("0x"+(c[f]+c[f+1]));return u},l=function(c){for(var d=new Uint8Array(c.length),u=c.length;u--;)d[u]=c.charCodeAt(u);return(d=Hy(d)).reduce(function(f,m){return f+String.fromCharCode(m)},"")};t.processDataByFilters=function(c,d){var u=0,f=c||"",m=[];for(typeof(d=d||[])=="string"&&(d=[d]),u=0;u<d.length;u+=1)switch(d[u]){case"ASCII85Decode":case"/ASCII85Decode":f=n(f),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=l(f),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[u]+'" is not implemented')}return{data:f,reverseChain:m.reverse().join(" ")}}})(en.API),(function(t){t.loadFile=function(e,n,r){return(function(i,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=(function(u,f,m){var p=new XMLHttpRequest,y=0,g=function(N){var C=N.length,v=[],R=String.fromCharCode;for(y=0;y<C;y+=1)v.push(R(255&N.charCodeAt(y)));return v.join("")};if(p.open("GET",u,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?m(g(this.responseText)):m(void 0)}),p.send(null),f&&p.status===200)return g(p.responseText)})(i,l,c)}catch{}return d})(e,n,r)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(en.API),(function(t){function e(){return(xn.html2canvas?Promise.resolve(xn.html2canvas):$1(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function n(){return(xn.DOMPurify?Promise.resolve(xn.DOMPurify):$1(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var r=function(d){var u=xr(d);return u==="undefined"?"undefined":u==="string"||d instanceof String?"string":u==="number"||d instanceof Number?"number":u==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(d,u){var f=document.createElement(d);for(var m in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[m]=u.style[m];return f},l=function d(u,f){for(var m=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||m.appendChild(d(p,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(m.width=u.width,m.height=u.height,m.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(m.value=u.value),m.addEventListener("load",function(){m.scrollTop=u.scrollTop,m.scrollLeft=u.scrollLeft},!0)),m},c=function d(u){var f=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),m=d.convert(Promise.resolve(),f);return(m=m.setProgress(1,d,1,[d])).set(u)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(d,u){return d.__proto__=u||c.prototype,d},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(d,u){return this.then(function(){switch(u=u||(function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),u){case"string":return this.then(n).then(function(f){return this.set({src:i("div",{innerHTML:d,dompurify:f})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},c.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(u){var f=this.opt.jsPDF,m=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=m,m)for(var g=0;g<m.length;++g){var N=m[g],C=N.src.find(function(v){return v.format==="truetype"});C&&f.addFont(C.url,N.ref.name,N.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,f.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(d,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(d,u):this.outputPdf(d,u)},c.prototype.outputPdf=function(d,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,u)})},c.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},c.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(d){if(r(d)!=="object")return this;var u=Object.keys(d||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=d[f]};switch(f){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[f]=d[f]}}},this);return this.then(function(){return this.thenList(u)})},c.prototype.get=function(d,u){return this.then(function(){var f=d in c.template.prop?this.prop[d]:this.opt[d];return u?u(f):f})},c.prototype.setMargin=function(d){return this.then(function(){switch(r(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},c.prototype.setPageSize=function(d){function u(f,m){return Math.floor(f*m/72*96)}return this.then(function(){(d=d||en.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:u(d.inner.width,d.k),height:u(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},c.prototype.setProgress=function(d,u,f,m){return d!=null&&(this.progress.val=d),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(d,u,f,m){return this.setProgress(d?this.progress.val+d:null,u||null,f?this.progress.n+f:null,m?this.progress.stack.concat(m):null)},c.prototype.then=function(d,u){var f=this;return this.thenCore(d,u,function(m,p){return f.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(y){return f.updateProgress(null,m),y}).then(m,p).then(function(y){return f.updateProgress(1),y})})},c.prototype.thenCore=function(d,u,f){f=f||Promise.prototype.then;var m=this;d&&(d=d.bind(m)),u&&(u=u.bind(m));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:c.convert(Object.assign({},m),Promise.prototype),y=f.call(p,d,u);return c.convert(y,m.__proto__)},c.prototype.thenExternal=function(d,u){return Promise.prototype.then.call(this,d,u)},c.prototype.thenList=function(d){var u=this;return d.forEach(function(f){u=u.thenCore(f)}),u},c.prototype.catch=function(d){d&&(d=d.bind(this));var u=Promise.prototype.catch.call(this,d);return c.convert(u,this)},c.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},c.prototype.error=function(d){return this.then(function(){throw new Error(d)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,en.getPageSize=function(d,u,f){if(xr(d)==="object"){var m=d;d=m.orientation,u=m.unit||u,f=m.format||f}u=u||"mm",f=f||"a4",d=(""+(d||"P")).toLowerCase();var p,y=(""+f).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+u}var N,C=0,v=0;if(g.hasOwnProperty(y))C=g[y][1]/p,v=g[y][0]/p;else try{C=f[1],v=f[0]}catch{throw new Error("Invalid format: "+f)}if(d==="p"||d==="portrait")d="p",v>C&&(N=v,v=C,C=N);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>v&&(N=v,v=C,C=N)}return{width:v,height:C,unit:u,k:p,orientation:d}},t.html=function(d,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(zC):null;var f=new c(u);return u.worker?f:f.from(d).doCallback()}})(en.API),en.API.addJS=function(t){var e,n,r=(function(i){for(var l="",c=0;c<i.length;c++){var d=i[c];if(d==="("||d===")"){for(var u=0,f=c-1;f>=0&&i[f]==="\\";f--)u++;l+=u%2==0?"\\"+d:d}else l+=d}return l})(t);return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),l=0;l<i.length;l++){var c=i[l],d=r.exec(c);if(d!=null){var u=d[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,m=[];for(l=0;l<f;l++){var p=n.internal.newObject();m.push(p);var y=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<m.length;l++)n.internal.write("(page_"+(l+1)+")"+m[l]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,l){var c={title:i,options:l,children:[]};return r==null&&(r=this.root),r.children.push(c),c},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var c=r.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var u=n.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var l=0;l<i.children.length;l++)r.count++,this.count_r(r,i.children[l]);return r.count}}])})(en.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,l,c,d){var u,f=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=c||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,u=(function(p){for(var y,g=256*p.charCodeAt(4)+p.charCodeAt(5),N=p.length,C={width:0,height:0,numcomponents:1},v=4;v<N;v+=2){if(v+=g,e.indexOf(p.charCodeAt(v+1))!==-1){y=256*p.charCodeAt(v+5)+p.charCodeAt(v+6),C={width:256*p.charCodeAt(v+7)+p.charCodeAt(v+8),height:y,numcomponents:p.charCodeAt(v+9)};break}g=256*p.charCodeAt(v+2)+p.charCodeAt(v+3)}return C})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),u.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}m={data:n,width:u.width,height:u.height,colorSpace:d,bitsPerComponent:8,filter:f,index:r,alias:i}}return m}})(en.API),en.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,l=xF(t,{checkCrc:!0}),c=l.width,d=l.height,u=l.channels,f=l.palette,m=l.depth;i=f&&u===1?(function(W){for(var j=W.width,S=W.height,P=W.data,F=W.palette,ee=W.depth,J=!1,$=[],Y=[],K=void 0,w=!1,se=0,oe=0;oe<F.length;oe++){var T=lR(F[oe],4),I=T[0],U=T[1],Q=T[2],H=T[3];$.push(I,U,Q),H!=null&&(H===0?(se++,Y.length<1&&Y.push(oe)):H<255&&(w=!0))}if(w||se>1){J=!0,Y=void 0;var q=j*S;K=new Uint8Array(q);for(var ae=new DataView(P.buffer),fe=0;fe<q;fe++){var ge=XC(ae,fe,ee),ce=lR(F[ge],4)[3];K[fe]=ce}}else se===0&&(Y=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:J?8:void 0,colorBytes:P,alphaBytes:K,needSMask:J,palette:$,mask:Y}})(l):u===2||u===4?(function(W){for(var j=W.data,S=W.width,P=W.height,F=W.channels,ee=W.depth,J=F===2?"DeviceGray":"DeviceRGB",$=F-1,Y=S*P,K=$,w=Y*K,se=1*Y,oe=Math.ceil(w*ee/8),T=Math.ceil(se*ee/8),I=new Uint8Array(oe),U=new Uint8Array(T),Q=new DataView(j.buffer),H=new DataView(I.buffer),q=new DataView(U.buffer),ae=!1,fe=0;fe<Y;fe++){for(var ge=fe*F,ce=0;ce<K;ce++)dT(H,XC(Q,ge+ce,ee),fe*K+ce,ee);var Re=XC(Q,ge+K,ee);Re<(1<<ee)-1&&(ae=!0),dT(q,Re,1*fe,ee)}return{colorSpace:J,colorsPerPixel:$,sMaskBitsPerComponent:ae?ee:void 0,colorBytes:I,alphaBytes:U,needSMask:ae}})(l):(function(W){var j=W.data,S=W.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:S,colorsPerPixel:S==="DeviceGray"?1:3,colorBytes:j instanceof Uint16Array?(function(P){for(var F=P.length,ee=new Uint8Array(2*F),J=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),$=0;$<F;$++)J.setUint16(2*$,P[$],!1);return ee})(j):j,needSMask:!1}})(l);var p,y,g,N=i,C=N.colorSpace,v=N.colorsPerPixel,R=N.sMaskBitsPerComponent,A=N.colorBytes,M=N.alphaBytes,L=N.needSMask,k=N.palette,V=N.mask,G=null;return r!==en.API.image_compression.NONE&&typeof Hy=="function"?(G=(function(W){var j;switch(W){case en.API.image_compression.FAST:j=11;break;case en.API.image_compression.MEDIUM:j=13;break;case en.API.image_compression.SLOW:j=14;break;default:j=12}return j})(r),p=this.decode.FLATE_DECODE,y="/Predictor ".concat(G," /Colors ").concat(v," /BitsPerComponent ").concat(m," /Columns ").concat(c),t=iT(A,Math.ceil(c*v*m/8),v,m,r),L&&(g=iT(M,Math.ceil(c*R/8),1,R,r))):(p=void 0,y=void 0,t=A,L&&(g=M)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:n,data:t,index:e,filter:p,decodeParameters:y,transparency:V,palette:k,sMask:g,predictor:G,width:c,height:d,bitsPerComponent:m,sMaskBitsPerComponent:R,colorSpace:C}}},(function(t){t.processGIF89A=function(e,n,r,i){var l=new kF(e),c=l.width,d=l.height,u=[];l.decodeAndBlitFrameRGBA(0,u);var f={data:u,width:c,height:d},m=new JC(100).encode(f,100);return t.processJPEG.call(this,m,n,r,i)},t.processGIF87A=t.processGIF89A})(en.API),vo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},vo.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[t]()}catch(n){jr.log("bit decode error:"+n)}},vo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*i*4,d=0;d<8&&8*i+d<this.width;d++){var u=this.palette[l>>7-d&1];this.data[c+4*d]=u.blue,this.data[c+4*d+1]=u.green,this.data[c+4*d+2]=u.red,this.data[c+4*d+3]=255}n!==0&&(this.pos+=4-n)}},vo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*i*4,d=l>>4,u=15&l,f=this.palette[d];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*i+1>=this.width)break;f=this.palette[u],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},vo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*r;if(i<this.palette.length){var c=this.palette[i];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},vo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,d=(l>>5&e)/e*255|0,u=(l>>10&e)/e*255|0,f=l>>15?255:0,m=r*this.width*4+4*i;this.data[m]=u,this.data[m+1]=d,this.data[m+2]=c,this.data[m+3]=f}this.pos+=t}},vo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,u=(c>>5&n)/n*255|0,f=(c>>11)/e*255|0,m=i*this.width*4+4*l;this.data[m]=f,this.data[m+1]=u,this.data[m+2]=d,this.data[m+3]=255}this.pos+=t}},vo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=l,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},vo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*n;this.data[d]=l,this.data[d+1]=i,this.data[d+2]=r,this.data[d+3]=c}},vo.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var l=new vo(e,!1),c=l.width,d=l.height,u={data:l.getData(),width:c,height:d},f=new JC(100).encode(u,100);return t.processJPEG.call(this,f,n,r,i)}})(en.API),hT.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var l=new hT(e),c=l.width,d=l.height,u={data:l.getData(),width:c,height:d},f=new JC(100).encode(u,100);return t.processJPEG.call(this,f,n,r,i)}})(en.API),en.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,l=new Uint8Array(i/4*3),c=new Uint8Array(i/4),d=0,u=0,f=0;f<i;f+=4){var m=r[f],p=r[f+1],y=r[f+2],g=r[f+3];l[d++]=m,l[d++]=p,l[d++]=y,c[u++]=g}var N=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:N,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},en.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},w0=en.API,Jx=w0.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:i.metadata.Unicode.widths,u=d.fof?d.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,m=f.fof?f.fof:1,p=e.doKerning!==!1,y=0,g=t.length,N=0,C=d[0]||u,v=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+c*(1e3/l)||0)/1e3):(y=p&&xr(f[r])==="object"&&!isNaN(parseInt(f[r][N],10))?f[r][N]/m:0,v.push((d[r]||C)/u+y)),N=r;return v},sT=w0.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return w0.processArabic&&(t=w0.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Jx.apply(this,arguments).reduce(function(l,c){return l+c},0)},nT=function(t,e,n,r){for(var i=[],l=0,c=t.length,d=0;l!==c&&d+e[l]<n;)d+=e[l],l++;i.push(t.slice(0,l));var u=l;for(d=0;l!==c;)d+e[l]>r&&(i.push(t.slice(u,l)),d=0,u=l),d+=e[l],l++;return u!==l&&i.push(t.slice(u,l)),i},rT=function(t,e,n){n||(n={});var r,i,l,c,d,u,f,m=[],p=[m],y=n.textIndent||0,g=0,N=0,C=t.split(" "),v=Jx.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?C[0].length+2:n.lineIndent||0){var R=Array(u).join(" "),A=[];C.map(function(L){(L=L.split(/\s*\n/)).length>1?A=A.concat(L.map(function(k,V){return(V&&k.length?`
`:"")+k})):A.push(L[0])}),C=A,u=sT.apply(this,[R,n])}for(l=0,c=C.length;l<c;l++){var M=0;if(r=C[l],u&&r[0]==`
`&&(r=r.substr(1),M=1),y+g+(N=(i=Jx.apply(this,[r,n])).reduce(function(L,k){return L+k},0))>e||M){if(N>e){for(d=nT.apply(this,[r,i,e-(y+g),e]),m.push(d.shift()),m=[d.pop()];d.length;)p.push([d.shift()]);N=i.slice(r.length-(m[0]?m[0].length:0)).reduce(function(L,k){return L+k},0)}else m=[r];p.push(m),y=N+u,g=v}else m.push(r),y+=g+N,g=v}return f=u?function(L,k){return(k?R:"")+L.join(" ")}:function(L){return L.join(" ")},p.map(f)},w0.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var p=this.internal.getFont(m.fontName,m.fontStyle),y="Unicode";return p.metadata[y]?{widths:p.metadata[y].widths||{0:1},kerning:p.metadata[y].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/i;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,l.lineIndent=n.lineIndent;var d,u,f=[];for(d=0,u=r.length;d<u;d++)f=f.concat(rT.apply(this,[r[d],c,l]));return f},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},l=0;l<16;l++)r[n[l]]=e[l],i[e[l]]=n[l];var c=function(y){return"0x"+parseInt(y,10).toString(16)},d=t.__fontmetrics__.compress=function(y){var g,N,C,v,R=["{"];for(var A in y){if(g=y[A],isNaN(parseInt(A,10))?N="'"+A+"'":(A=parseInt(A,10),N=(N=c(A).slice(2)).slice(0,-1)+i[N.slice(-1)]),typeof g=="number")g<0?(C=c(g).slice(3),v="-"):(C=c(g).slice(2),v=""),C=v+C.slice(0,-1)+i[C.slice(-1)];else{if(xr(g)!=="object")throw new Error("Don't know what to do with value type "+xr(g)+".");C=d(g)}R.push(N+C)}return R.push("}"),R.join("")},u=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,N,C,v,R={},A=1,M=R,L=[],k="",V="",G=y.length-1,W=1;W<G;W+=1)(v=y[W])=="'"?g?(C=g.join(""),g=void 0):g=[]:g?g.push(v):v=="{"?(L.push([M,C]),M={},C=void 0):v=="}"?((N=L.pop())[0][N[1]]=M,C=void 0,M=N[0]):v=="-"?A=-1:C===void 0?r.hasOwnProperty(v)?(k+=r[v],C=parseInt(k,16)*A,A=1,k=""):k+=v:r.hasOwnProperty(v)?(V+=r[v],M[C]=parseInt(V,16)*A,A=1,C=void 0,V=""):V+=v;return R},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},p={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var g=y.font,N=p.Unicode[g.postScriptName];N&&(g.metadata.Unicode={},g.metadata.Unicode.widths=N.widths,g.metadata.Unicode.kerning=N.kerning);var C=m.Unicode[g.postScriptName];C&&(g.metadata.Unicode.encoding=C,g.encoding=C.codePages[0])}])})(en.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),l=0;l<r;l++)i[l]=n.charCodeAt(l);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,l=n.instance;if(!i.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=l.existsFileInVFS(i.postScriptName)===!1?l.loadFile(i.postScriptName):l.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(dp(d)),c.metadata=t.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,r)}}])})(en),en.API.addSvgAsImage=function(t,e,n,r,i,l,c,d){if(isNaN(e)||isNaN(n))throw jr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw jr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=i;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(xn.canvg?Promise.resolve(xn.canvg):$1(()=>import("./index.es-BKxo_hms.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(f,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(m)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),e,n,r,i,c,d)})},en.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},en.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),u=[],f=0,m=0,p=0;function y(N,C){var v,R=!1;for(v=0;v<N.length;v+=1)N[v]===C&&(R=!0);return R}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=d.length;for(p=0;p<g;p+=1)n[d[p]].value=n[d[p]].defaultValue,n[d[p]].explicitSet=!1}if(xr(t)==="object"){for(i in t)if(l=t[i],y(d,i)&&l!==void 0){if(n[i].type==="boolean"&&typeof l=="boolean")n[i].value=l;else if(n[i].type==="name"&&y(n[i].valueSet,l))n[i].value=l;else if(n[i].type==="integer"&&Number.isInteger(l))n[i].value=l;else if(n[i].type==="array"){for(f=0;f<l.length;f+=1)if(r=!0,l[f].length===1&&typeof l[f][0]=="number")u.push(String(l[f]-1));else if(l[f].length>1){for(m=0;m<l[f].length;m+=1)typeof l[f][m]!="number"&&(r=!1);r===!0&&u.push([l[f][0]-1,l[f][1]-1].join(" "))}n[i].value="["+u.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,C=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?C.push("/"+N+" /"+n[N].value):C.push("/"+N+" "+n[N].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},en.API.addMetadata=function(t,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",WF),this.internal.events.subscribe("postPutResources",UF)),this},(function(t){var e=t.API,n=e.pdfEscape16=function(l,c){for(var d,u=c.metadata.Unicode.widths,f=["","0","00","000","0000"],m=[""],p=0,y=l.length;p<y;++p){if(d=c.metadata.characterToGlyph(l.charCodeAt(p)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=l.charCodeAt(p),u.indexOf(d)==-1&&(u.push(d),u.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return m.join("");d=d.toString(16),m.push(f[4-d.length],d)}return m.join("")},r=function(l){var c,d,u,f,m,p,y;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,y=(d=Object.keys(l).sort(function(g,N){return g-N})).length;p<y;p++)c=d[p],u.length>=100&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(f=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),u.push("<"+c+"><"+f+">"));return u.length&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(c){var d=c.font,u=c.out,f=c.newObject,m=c.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="Identity-H"){for(var p=d.metadata.Unicode.widths,y=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),g="",N=0;N<y.length;N++)g+=String.fromCharCode(y[N]);var C=f();m({data:g,addLength1:!0,objectId:C}),u("endobj");var v=f();m({data:r(d.metadata.toUnicode),addLength1:!0,objectId:v}),u("endobj");var R=f();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Q0(d.fontName)),u("/FontFile2 "+C+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),u("/Flags "+d.metadata.flags),u("/StemV "+d.metadata.stemV),u("/ItalicAngle "+d.metadata.italicAngle),u("/Ascent "+d.metadata.ascender),u("/Descent "+d.metadata.decender),u("/CapHeight "+d.metadata.capHeight),u(">>"),u("endobj");var A=f();u("<<"),u("/Type /Font"),u("/BaseFont /"+Q0(d.fontName)),u("/FontDescriptor "+R+" 0 R"),u("/W "+t.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+d.encoding+")"),u(">>"),u(">>"),u("endobj"),d.objectNumber=f(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+v+" 0 R"),u("/BaseFont /"+Q0(d.fontName)),u("/Encoding /"+d.encoding),u("/DescendantFonts ["+A+" 0 R]"),u(">>"),u("endobj"),d.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(c){var d=c.font,u=c.out,f=c.newObject,m=c.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var p=d.metadata.rawData,y="",g=0;g<p.length;g++)y+=String.fromCharCode(p[g]);var N=f();m({data:y,addLength1:!0,objectId:N}),u("endobj");var C=f();m({data:r(d.metadata.toUnicode),addLength1:!0,objectId:C}),u("endobj");var v=f();u("<<"),u("/Descent "+d.metadata.decender),u("/CapHeight "+d.metadata.capHeight),u("/StemV "+d.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+N+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),u("/FontName /"+Q0(d.fontName)),u("/ItalicAngle "+d.metadata.italicAngle),u("/Ascent "+d.metadata.ascender),u(">>"),u("endobj"),d.objectNumber=f();for(var R=0;R<d.metadata.hmtx.widths.length;R++)d.metadata.hmtx.widths[R]=parseInt(d.metadata.hmtx.widths[R]*(1e3/d.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+Q0(d.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),u("endobj"),d.isAlreadyPutted=!0}})(l)}]);var i=function(l){var c,d=l.text||"",u=l.x,f=l.y,m=l.options||{},p=l.mutex||{},y=p.pdfEscape,g=p.activeFontKey,N=p.fonts,C=g,v="",R=0,A="",M=N[C].encoding;if(N[C].encoding!=="Identity-H")return{text:d,x:u,y:f,options:m,mutex:p};for(A=d,C=g,Array.isArray(d)&&(A=d[0]),R=0;R<A.length;R+=1)N[C].metadata.hasOwnProperty("cmap")&&(c=N[C].metadata.cmap.unicode.codeMap[A[R].charCodeAt(0)]),c||A[R].charCodeAt(0)<256&&N[C].metadata.hasOwnProperty("Unicode")?v+=A[R]:v+="";var L="";return parseInt(C.slice(1))<14||M==="WinAnsiEncoding"?L=y(v,C).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(L=n(v,N[C])),p.isHex=!0,{text:L,x:u,y:f,options:m,mutex:p}};e.events.push(["postProcessText",function(l){var c=l.text||"",d=[],u={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?d.push([i(Object.assign({},u,{text:c[f][0]})).text,c[f][1],c[f][2]]):d.push(i(Object.assign({},u,{text:c[f]})).text);l.text=d}else l.text=i(Object.assign({},u,{text:c})).text}])})(en),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(en.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,l,c,d,u,f,m,p=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],R=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,M=0;this.__bidiEngine__={};var L=function(P){var F=P.charCodeAt(),ee=F>>8,J=C[ee];return J!==void 0?p[256*J+(255&F)]:ee===252||ee===253?"AL":R.test(ee)?"L":ee===8?"R":"N"},k=function(P){for(var F,ee=0;ee<P.length;ee++){if((F=L(P.charAt(ee)))==="L")return!1;if(F==="R")return!0}return!1},V=function(P,F,ee,J){var $,Y,K,w,se=F[J];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"N":case"AN":break;case"EN":A&&(se="AN");break;case"AL":A=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":J<1||J+1>=F.length||($=ee[J-1])!=="EN"&&$!=="AN"||(Y=F[J+1])!=="EN"&&Y!=="AN"?se="N":A&&(Y="AN"),se=Y===$?Y:"N";break;case"ES":se=($=J>0?ee[J-1]:"B")==="EN"&&J+1<F.length&&F[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&ee[J-1]==="EN"){se="EN";break}if(A){se="N";break}for(K=J+1,w=F.length;K<w&&F[K]==="ET";)K++;se=K<w&&F[K]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(w=F.length,K=J+1;K<w&&F[K]==="NSM";)K++;if(K<w){var oe=P[J],T=oe>=1425&&oe<=2303||oe===64286;if($=F[K],T&&($==="R"||$==="AL")){se="R";break}}}se=J<1||($=F[J-1])==="B"?"N":ee[J-1];break;case"B":A=!1,i=!0,se=M;break;case"S":l=!0,se="N"}return se},G=function(P,F,ee){var J=P.split("");return ee&&W(J,ee,{hiLevel:M}),J.reverse(),F&&F.reverse(),J.join("")},W=function(P,F,ee){var J,$,Y,K,w,se=-1,oe=P.length,T=0,I=[],U=M?g:y,Q=[];for(A=!1,i=!1,l=!1,$=0;$<oe;$++)Q[$]=L(P[$]);for(Y=0;Y<oe;Y++){if(w=T,I[Y]=V(P,Q,I,Y),J=240&(T=U[w][N[I[Y]]]),T&=15,F[Y]=K=U[T][5],J>0)if(J===16){for($=se;$<Y;$++)F[$]=1;se=-1}else se=-1;if(U[T][6])se===-1&&(se=Y);else if(se>-1){for($=se;$<Y;$++)F[$]=K;se=-1}Q[Y]==="B"&&(F[Y]=0),ee.hiLevel|=K}l&&(function(H,q,ae){for(var fe=0;fe<ae;fe++)if(H[fe]==="S"){q[fe]=M;for(var ge=fe-1;ge>=0&&H[ge]==="WS";ge--)q[ge]=M}})(Q,F,oe)},j=function(P,F,ee,J,$){if(!($.hiLevel<P)){if(P===1&&M===1&&!i)return F.reverse(),void(ee&&ee.reverse());for(var Y,K,w,se,oe=F.length,T=0;T<oe;){if(J[T]>=P){for(w=T+1;w<oe&&J[w]>=P;)w++;for(se=T,K=w-1;se<K;se++,K--)Y=F[se],F[se]=F[K],F[K]=Y,ee&&(Y=ee[se],ee[se]=ee[K],ee[K]=Y);T=w}T++}}},S=function(P,F,ee){var J=P.split(""),$={hiLevel:M};return ee||(ee=[]),W(J,ee,$),(function(Y,K,w){if(w.hiLevel!==0&&m)for(var se,oe=0;oe<Y.length;oe++)K[oe]===1&&(se=v.indexOf(Y[oe]))>=0&&(Y[oe]=v[se+1])})(J,ee,$),j(2,J,F,ee,$),j(1,J,F,ee,$),J.join("")};return this.__bidiEngine__.doBidiReorder=function(P,F,ee){if((function($,Y){if(Y)for(var K=0;K<$.length;K++)Y[K]=K;d===void 0&&(d=k($)),f===void 0&&(f=k($))})(P,F),c||!u||f)if(c&&u&&d^f)M=d?1:0,P=G(P,F,ee);else if(!c&&u&&f)M=d?1:0,P=S(P,F,ee),P=G(P,F);else if(!c||d||u||f){if(c&&!u&&d^f)P=G(P,F),d?(M=0,P=S(P,F,ee)):(M=1,P=S(P,F,ee),P=G(P,F));else if(c&&d&&!u&&f)M=1,P=S(P,F,ee),P=G(P,F);else if(!c&&!u&&d^f){var J=m;d?(M=1,P=S(P,F,ee),M=0,m=!1,P=S(P,F,ee),m=J):(M=0,P=S(P,F,ee),P=G(P,F),M=1,m=!1,P=S(P,F,ee),m=J,P=G(P,F))}}else M=0,P=S(P,F,ee);else M=d?1:0,P=S(P,F,ee);return P},this.__bidiEngine__.setOptions=function(P){P&&(c=P.isInputVisual,u=P.isOutputVisual,d=P.isInputRtl,f=P.isOutputRtl,m=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var c=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(i)==="[object Array]"){var d=0;for(c=[],d=0;d<i.length;d+=1)Object.prototype.toString.call(i[d])==="[object Array]"?c.push([n.doBidiReorder(i[d][0]),i[d][1],i[d][2]]):c.push([n.doBidiReorder(i[d])]);r.text=c}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(en),en.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Nu(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new eK(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new BF(this.contents),this.head=new KF(this),this.name=new $F(this),this.cmap=new MI(this),this.toUnicode={},this.hhea=new QF(this),this.maxp=new HF(this),this.hmtx=new zF(this),this.post=new YF(this),this.os2=new GF(this),this.loca=new ZF(this),this.glyf=new qF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,u,f;for(f=[],c=0,d=(u=this.bbox).length;c<d;c++)e=u[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,l,c,d;for(c=0,l=0,d=(e=""+e).length;0<=d?l<d:l>d;l=0<=d?++l:--l)i=e.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return c*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var Po,Nu=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,l,c,d,u;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),d=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^l)+65536*(255^c)+256*(255^d)+(255^u)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*l+65536*c+256*d+u},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,l;for(l=[],r=0,i=e.length;r<i;r++)n=e[r],l.push(this.writeByte(n));return l},t})(),BF=(function(){var t;function e(n){var r,i,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,l=this.tableCount;0<=l?i<l:i>l;i=0<=l?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,l,c,d,u,f,m,p,y,g,N,C;for(C in g=Object.keys(n).length,u=Math.log(2),p=16*Math.floor(Math.log(g)/u),c=Math.floor(p/u),m=16*g-p,(i=new Nu).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(c),i.writeShort(m),l=16*g,f=i.pos+l,d=null,N=[],n)for(y=n[C],i.writeString(C),i.writeInt(t(y)),i.writeInt(f),i.writeInt(y.length),N=N.concat(y),C==="head"&&(d=f),f+=y.length;f%4;)N.push(0),f++;return i.write(N),r=2981146554-t(i.data),i.pos=d+8,i.writeUInt32(r),i.data},t=function(n){var r,i,l,c;for(n=LI.call(n);n.length%4;)n.push(0);for(l=new Nu(n),i=0,r=0,c=n.length;r<c;r=r+=4)i+=l.readUInt32();return 4294967295&i},e})(),FF={}.hasOwnProperty,xc=function(t,e){for(var n in e)FF.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Po=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var KF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Nu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),fT=(function(){function t(e,n){var r,i,l,c,d,u,f,m,p,y,g,N,C,v,R,A,M;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(g=e.readUInt16(),y=g/2,e.pos+=6,l=(function(){var L,k;for(k=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)k.push(e.readUInt16());return k})(),e.pos+=2,C=(function(){var L,k;for(k=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)k.push(e.readUInt16());return k})(),f=(function(){var L,k;for(k=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)k.push(e.readUInt16());return k})(),m=(function(){var L,k;for(k=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)k.push(e.readUInt16());return k})(),i=(this.length-e.pos+this.offset)/2,d=(function(){var L,k;for(k=[],u=L=0;0<=i?L<i:L>i;u=0<=i?++L:--L)k.push(e.readUInt16());return k})(),u=R=0,M=l.length;R<M;u=++R)for(v=l[u],r=A=N=C[u];N<=v?A<=v:A>=v;r=N<=v?++A:--A)m[u]===0?c=r+f[u]:(c=d[m[u]/2+(r-N)-(y-u)]||0)!==0&&(c+=f[u]),this.codeMap[r]=65535&c}e.pos=p}return t.encode=function(e,n){var r,i,l,c,d,u,f,m,p,y,g,N,C,v,R,A,M,L,k,V,G,W,j,S,P,F,ee,J,$,Y,K,w,se,oe,T,I,U,Q,H,q,ae,fe,ge,ce,Re,X;switch(J=new Nu,c=Object.keys(e).sort(function(me,he){return me-he}),n){case"macroman":for(C=0,v=(function(){var me=[];for(N=0;N<256;++N)me.push(0);return me})(),A={0:0},l={},$=0,se=c.length;$<se;$++)A[ge=e[i=c[$]]]==null&&(A[ge]=++C),l[i]={old:e[i],new:A[e[i]]},v[i]=A[e[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(v),{charMap:l,subtable:J.data,maxGlyphID:C+1};case"unicode":for(F=[],p=[],M=0,A={},r={},R=f=null,Y=0,oe=c.length;Y<oe;Y++)A[k=e[i=c[Y]]]==null&&(A[k]=++M),r[i]={old:k,new:A[k]},d=A[k]-i,R!=null&&d===f||(R&&p.push(R),F.push(i),f=d),R=i;for(R&&p.push(R),p.push(65535),F.push(65535),S=2*(j=F.length),W=2*Math.pow(Math.log(j)/Math.LN2,2),y=Math.log(W/2)/Math.LN2,G=2*j-W,u=[],V=[],g=[],N=K=0,T=F.length;K<T;N=++K){if(P=F[N],m=p[N],P===65535){u.push(0),V.push(0);break}if(P-(ee=r[P].new)>=32768)for(u.push(0),V.push(2*(g.length+j-N)),i=w=P;P<=m?w<=m:w>=m;i=P<=m?++w:--w)g.push(r[i].new);else u.push(ee-P),V.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*j+2*g.length),J.writeUInt16(0),J.writeUInt16(S),J.writeUInt16(W),J.writeUInt16(y),J.writeUInt16(G),ae=0,I=p.length;ae<I;ae++)i=p[ae],J.writeUInt16(i);for(J.writeUInt16(0),fe=0,U=F.length;fe<U;fe++)i=F[fe],J.writeUInt16(i);for(ce=0,Q=u.length;ce<Q;ce++)d=u[ce],J.writeUInt16(d);for(Re=0,H=V.length;Re<H;Re++)L=V[Re],J.writeUInt16(L);for(X=0,q=g.length;X<q;X++)C=g[X],J.writeUInt16(C);return{charMap:r,subtable:J.data,maxGlyphID:M+1}}},t})(),MI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new fT(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=fT.encode(e,n),(i=new Nu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t})(),QF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),GF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),YF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(r=e.readUInt16(),this.glyphNameIndex=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var c,d,u;for(u=[],l=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;l=0<=d?++c:--c)u.push(e.readUInt32());return u}).call(this)}},t})(),VF=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},$F=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,l,c,d,u,f,m,p,y;for(e.pos=this.offset,e.readShort(),n=e.readShort(),d=e.readShort(),r=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(u={},l=m=0,p=r.length;m<p;l=++m)i=r[l],e.pos=i.offset,f=e.readString(i.length),c=new VF(f,i),u[y=i.nameID]==null&&(u[y]=[]),u[i.nameID].push(c);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t})(),HF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),zF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,l,c,d,u;for(e.pos=this.offset,this.metrics=[],n=0,d=this.file.hhea.numberOfMetrics;0<=d?n<d:n>d;n=0<=d?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,m;for(m=[],n=f=0;0<=i?f<i:f>i;n=0<=i?++f:--f)m.push(e.readInt16());return m})(),this.widths=(function(){var f,m,p,y;for(y=[],f=0,m=(p=this.metrics).length;f<m;f++)l=p[f],y.push(l.advance);return y}).call(this),r=this.widths[this.widths.length-1],u=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)u.push(this.widths.push(r));return u},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),LI=[].slice,qF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,l,c,d,u,f,m,p;return e in this.cache?this.cache[e]:(l=this.file.loca,n=this.file.contents,r=l.indexOf(e),(i=l.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,c=(d=new Nu(n.read(i))).readShort(),f=d.readShort(),p=d.readShort(),u=d.readShort(),m=d.readShort(),this.cache[e]=c===-1?new JF(d,f,p,u,m):new XF(d,c,f,p,u,m),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,l,c,d,u;for(c=[],l=[],d=0,u=n.length;d<u;d++)i=e[n[d]],l.push(c.length),i&&(c=c.concat(i.encode(r)));return l.push(c.length),{table:c,offsets:l}},t})(),XF=(function(){function t(e,n,r,i,l,c){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=l,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),JF=(function(){function t(e,n,r,i,l){var c,d;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Nu(LI.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),ZF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return xc(t,Po),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,l;for(l=[],r=0,i=this.length;r<i;r+=2)l.push(2*e.readUInt16());return l}).call(this):(function(){var i,l;for(l=[],r=0,i=this.length;r<i;r+=4)l.push(e.readUInt32());return l}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,l=0,c=0;c<r.length;++c)if(r[c]=i,l<n.length&&n[l]==c){++l,r[c]=i;var d=this.offsets[c],u=this.offsets[c+1]-d;u>0&&(i+=u)}for(var f=new Array(4*r.length),m=0;m<r.length;++m)f[4*m+3]=255&r[m],f[4*m+2]=(65280&r[m])>>8,f[4*m+1]=(16711680&r[m])>>16,f[4*m]=(4278190080&r[m])>>24;return f},t})(),eK=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,l;for(n in i=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,l,c,d,u;for(i={},c=0,d=e.length;c<d;c++)i[l=e[c]]=this.font.glyf.glyphFor(l);for(l in n=[],i)(r=i[l])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(l in u=this.glyphsFor(n))r=u[l],i[l]=r;return i},t.prototype.encode=function(e,n){var r,i,l,c,d,u,f,m,p,y,g,N,C,v,R;for(i in r=MI.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),g={0:0},R=r.charMap)g[(u=R[i]).old]=u.new;for(N in y=r.maxGlyphID,c)N in g||(g[N]=y++);return m=(function(A){var M,L;for(M in L={},A)L[A[M]]=M;return L})(g),p=Object.keys(m).sort(function(A,M){return A-M}),C=(function(){var A,M,L;for(L=[],A=0,M=p.length;A<M;A++)d=p[A],L.push(m[d]);return L})(),l=this.font.glyf.encode(c,C,g),f=this.font.loca.encode(l.offsets,C),v={cmap:this.font.cmap.raw(),glyf:l.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t})();en.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,l,c;if(Array.isArray(n))return"["+(function(){var d,u,f;for(f=[],d=0,u=n.length;d<u;d++)r=n[d],f.push(e.convert(r));return f})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in l=["<<"],n)c=n[i],l.push("/"+i+" "+e.convert(c));return l.push(">>"),l.join(`
`)}return""+n},e})();async function tK(t){const e=new en("p","mm","a4"),n=210,r=20,i=n-r*2,l=(C,v=12,R="normal",A="#000000",M=i*3)=>{const L=document.createElement("canvas"),k=L.getContext("2d"),V=3,G=`${R} ${v*V}px "Malgun Gothic", " ", sans-serif`;k.font=G;const W=k.measureText(C);return L.width=Math.min(Math.ceil(W.width)+10,M*V),L.height=Math.ceil(v*V*1.5),k.fillStyle="#ffffff",k.fillRect(0,0,L.width,L.height),k.font=G,k.fillStyle=A,k.textBaseline="middle",k.fillText(C,2,L.height/2),L.toDataURL("image/png")},c=(C,v,R)=>{const A=l(C,10,"bold","#555555"),M=l(v||"-",10,"normal","#000000"),L=6;return e.addImage(A,"PNG",r,R,35,L-1),e.addImage(M,"PNG",r+38,R,i-40,L-1),e.setDrawColor(220,220,220),e.line(r,R+L,r+i,R+L),R+L+1};let d=r;const u=l("   ",16,"bold","#1a1a1a");e.addImage(u,"PNG",r,d,i,8),d+=12,e.setDrawColor(0,0,0),e.setLineWidth(.5),e.line(r,d,r+i,d),d+=6;const f=l(" ",12,"bold","#2563eb");e.addImage(f,"PNG",r,d,40,5),d+=8,d=c("ID",t.custId,d),d=c("",t.custNm,d),d=c("ID",t.pymAcntId,d),d+=4;const m=l(" ",12,"bold","#2563eb");e.addImage(m,"PNG",r,d,40,5),d+=8,d=c("",t.pymMthNm,d),d=c("",t.changeReasonNm,d),d=c("",t.acntHolderNm,d),d=c("",t.idTypeNm,d),d=c("",t.birthDt,d),d=c("",t.bankNm,d),d=c("",sK(t.acntNo),d),d=c("",t.pyrRelNm,d),d+=4;const p=l(" ",12,"bold","#2563eb");if(e.addImage(p,"PNG",r,d,40,5),d+=8,t.signatureData){e.setDrawColor(180,180,180),e.setLineWidth(.3),e.rect(r,d,60,25);try{e.addImage(t.signatureData,"PNG",r+2,d+2,56,21)}catch(C){console.warn("Signature image insert failed:",C)}d+=28}else d=c("","( )",d);d+=6,e.setDrawColor(0,0,0),e.setLineWidth(.3),e.line(r,d,r+i,d),d+=4;const y=t.createdAt||new Date().toLocaleString("ko-KR"),g=l(`: ${y}`,8,"normal","#999999");e.addImage(g,"PNG",r,d,i,3),d+=5;const N=l("  D'Live     .",8,"normal","#999999");return e.addImage(N,"PNG",r,d,i,3),e.output("blob")}function sK(t){if(!t||t.length<6)return t;const e=t.slice(0,3),n=t.slice(-3),r="*".repeat(t.length-6);return e+r+n}function nK(t,e){const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,r.style.display="none",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(n)},100)}const rK=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},mT={pymMthCd:"01",changeReasonL:"",changeReasonM:"",acntHolderNm:"",idType:"01",birthDt:"",bankCd:"",acntNo:"",cardExpMm:"",cardExpYy:"",joinCardYn:"N",pyrRel:"01",pymDay:""},iK=({isOpen:t,onClose:e,custId:n,custNm:r,soId:i,initialPymAcntId:l,showToast:c,onSuccess:d})=>{const[u,f]=_.useState([]),[m,p]=_.useState(l||""),[y,g]=_.useState(!1),[N,C]=_.useState({...mT}),[v,R]=_.useState(!1),[A,M]=_.useState(!1),[L,k]=_.useState(""),[V,G]=_.useState(!1),[W,j]=_.useState(!1),[S,P]=_.useState(""),[F,ee]=_.useState({show:!1,title:"",message:"",type:"info"}),J=[{CODE:"003",CODE_NM:"IBK"},{CODE:"004",CODE_NM:"KB"},{CODE:"011",CODE_NM:"NH"},{CODE:"020",CODE_NM:""},{CODE:"023",CODE_NM:"SC"},{CODE:"031",CODE_NM:""},{CODE:"032",CODE_NM:""},{CODE:"039",CODE_NM:""},{CODE:"045",CODE_NM:""},{CODE:"048",CODE_NM:""},{CODE:"071",CODE_NM:""},{CODE:"081",CODE_NM:""},{CODE:"088",CODE_NM:""},{CODE:"089",CODE_NM:"K"},{CODE:"090",CODE_NM:""},{CODE:"092",CODE_NM:""}],$=[{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:"KB"},{CODE:"04",CODE_NM:""},{CODE:"05",CODE_NM:""},{CODE:"06",CODE_NM:""},{CODE:"07",CODE_NM:""},{CODE:"08",CODE_NM:"BC"},{CODE:"09",CODE_NM:"NH"}],Y=[{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""}],K={"01":[{CODE:"0101",CODE_NM:"/ "},{CODE:"0102",CODE_NM:" "},{CODE:"0103",CODE_NM:" "}],"02":[{CODE:"0201",CODE_NM:" "},{CODE:"0202",CODE_NM:" "},{CODE:"0203",CODE_NM:" "}],"03":[{CODE:"0301",CODE_NM:" "},{CODE:"0302",CODE_NM:" "}],"04":[{CODE:"0401",CODE_NM:" "}]},w=[{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""}],se=[{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""},{CODE:"05",CODE_NM:""}];_.useEffect(()=>{t&&n&&oe()},[t,n]),_.useEffect(()=>{t&&(C({...mT}),R(!1),P(""),l&&p(l))},[t,l]),_.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const oe=async()=>{g(!0);try{const Re=await xN(n);Re.success&&Re.data&&(f(Re.data),Re.data.length>0&&!m&&p(Re.data[0].PYM_ACNT_ID))}catch(Re){console.error("Load payment accounts error:",Re)}finally{g(!1)}},T=(Re,X="info")=>{ee({show:!0,title:X==="success"?"":X==="error"?"":X==="warning"?"":"",message:Re,type:X})},I=async()=>{if(!N.acntHolderNm){T("/  .","warning");return}if(!N.bankCd){T("/ .","warning");return}if(!N.acntNo){T("/ .","warning");return}if(N.pymMthCd==="02"&&(!N.cardExpMm||!N.cardExpYy)){T("  .","warning");return}M(!0),k("  ...");const Re=async()=>{if(N.pymMthCd==="01"){const X=await v9({BANK_CD:N.bankCd,ACNT_NO:N.acntNo,ACNT_OWNER_NM:N.acntHolderNm});return{success:X.success,message:X.message||""}}else{const X=await D9({CARD_NO:N.acntNo,CARD_EXPYEAR:N.cardExpYy,CARD_EXPMON:N.cardExpMm,CARD_OWNER_NM:N.acntHolderNm,KOR_ID:N.birthDt,SO_ID:i||"",PYM_ACNT_ID:l||"",CUST_ID:n,CUST_NM:r||""});return{success:X.success,message:X.message||""}}};try{if(k("  ..."),(await Re()).success)R(!0),k(""),T(N.pymMthCd==="01"?"  .":"  .","success");else{k(" ...  ."),await new Promise(he=>setTimeout(he,5e3));const me=await Re();me.success?(R(!0),k(""),T(N.pymMthCd==="01"?"  .":"  .","success")):(k(""),T(` .
   .

`+(me.message||""),"error"))}}catch(X){console.error("Verify error:",X),k(""),T(`   .
   .`,"error")}finally{M(!1),k("")}},U=()=>{if(!m){T(" .","warning");return}if(!v){T("   .","warning");return}if(!N.changeReasonL||!N.changeReasonM){T(" .","warning");return}j(!0)},Q=Re=>{j(!1),P(Re)},H=()=>{P("")},q=(Re,X)=>{var me;return((me=Re.find(he=>he.CODE===X))==null?void 0:me.CODE_NM)||X},ae=()=>{const Re=q(Y,N.changeReasonL),X=K[N.changeReasonL]||[],me=q(X,N.changeReasonM);return`${Re} > ${me}`},fe=async()=>{try{const Re=await tK({custId:n,custNm:r||"",pymAcntId:m,pymMthNm:"()",changeReasonNm:ae(),acntHolderNm:N.acntHolderNm,idTypeNm:q(w,N.idType),birthDt:N.birthDt,bankNm:q(J,N.bankCd),acntNo:N.acntNo,pyrRelNm:q(se,N.pyrRel),signatureData:S}),X=new Date().toISOString().slice(0,10).replace(/-/g,""),me=`__${n}_${X}.pdf`;nK(Re,me),c==null||c("PDF  ","success")}catch(Re){console.error("PDF generation error:",Re),T("PDF  .","error")}},ge=async()=>{if(N.pymMthCd==="01"&&!S){T("  .","warning");return}G(!0);try{const Re=await Wj({CUST_ID:n,PYM_ACNT_ID:m,PYM_MTH_CD:N.pymMthCd,BANK_CD:N.bankCd,ACNT_NO:N.acntNo,ACNT_OWNER_NM:N.acntHolderNm,ID_TYPE_CD:N.idType,BIRTH_DT:N.birthDt,PAYER_REL_CD:N.pyrRel,PAY_DAY_CD:N.pymDay,CARD_VALID_YM:N.pymMthCd==="02"?N.cardExpYy+N.cardExpMm:void 0,JOIN_CARD_YN:N.pymMthCd==="02"?N.joinCardYn:void 0,CHG_RESN_L_CD:N.changeReasonL,CHG_RESN_M_CD:N.changeReasonM});if(Re.success){try{await R9({CUST_ID:n,PYM_ACNT_ID:m,SIGN_TYPE:"PYM_CHG",SIGNATURE_DATA:S})}catch(X){console.log("[PaymentChange] Signature save stub (API not connected yet):",X)}if(N.pymMthCd==="01"&&S)try{await fe()}catch(X){console.warn("[PaymentChange] PDF auto-download failed:",X)}c==null||c(" .","success"),d==null||d(),e()}else T(Re.message||"  .","error")}catch(Re){console.error("Save payment error:",Re),T("    .","error")}finally{G(!1)}},ce=u.find(Re=>Re.PYM_ACNT_ID===m);return t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:[A&&L&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[85vw] max-w-[280px] p-6 flex flex-col items-center",children:[s.jsx(jn,{className:"w-10 h-10 text-blue-500 animate-spin mb-4"}),s.jsx("p",{className:"text-sm text-gray-700 text-center font-medium",children:L})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 max-h-[90vh] flex flex-col",onClick:Re=>Re.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-orange-500 to-orange-600 rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-white",children:[s.jsx(_p,{className:"w-5 h-5"}),s.jsx("h3",{className:"font-semibold",children:" "})]}),s.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",disabled:V,children:s.jsx(bi,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:y?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(jn,{className:"w-6 h-6 text-orange-500 animate-spin"})}):ce?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-3 rounded-lg bg-orange-50 border border-orange-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-mono text-sm text-blue-600",children:rK(ce.PYM_ACNT_ID)}),s.jsx("span",{className:"text-xs text-gray-500",children:ce.PYM_MTHD_NM||"-"})]}),s.jsxs("div",{className:"text-sm text-gray-700",children:[ce.BANK_CARD_NM||"-"," ",ce.BANK_CARD_NO||""]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("select",{value:N.pymMthCd,onChange:Re=>{C(X=>({...X,pymMthCd:Re.target.value,bankCd:"",acntNo:""})),R(!1)},className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"01",children:"()"}),s.jsx("option",{value:"02",children:""})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("div",{className:"flex-1 flex gap-1",children:[s.jsxs("select",{value:N.changeReasonL,onChange:Re=>C(X=>({...X,changeReasonL:Re.target.value,changeReasonM:""})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"",children:""}),Y.map(Re=>s.jsx("option",{value:Re.CODE,children:Re.CODE_NM},Re.CODE))]}),s.jsxs("select",{value:N.changeReasonM,onChange:Re=>C(X=>({...X,changeReasonM:Re.target.value})),disabled:!N.changeReasonL,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500 disabled:bg-gray-100",children:[s.jsx("option",{value:"",children:""}),(K[N.changeReasonL]||[]).map(Re=>s.jsx("option",{value:Re.CODE,children:Re.CODE_NM},Re.CODE))]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:N.pymMthCd==="01"?"":""}),s.jsx("input",{type:"text",value:N.acntHolderNm,onChange:Re=>{C(X=>({...X,acntHolderNm:Re.target.value})),R(!1)},placeholder:" ",className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsx("select",{value:N.idType,onChange:Re=>C(X=>({...X,idType:Re.target.value})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:w.map(Re=>s.jsx("option",{value:Re.CODE,children:Re.CODE_NM},Re.CODE))})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsx("input",{type:"text",value:N.birthDt,onChange:Re=>C(X=>({...X,birthDt:Re.target.value.replace(/[^0-9]/g,"").slice(0,8)})),placeholder:"YYYYMMDD",maxLength:8,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:N.pymMthCd==="01"?"":""}),s.jsxs("select",{value:N.bankCd,onChange:Re=>{C(X=>({...X,bankCd:Re.target.value})),R(!1)},className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"",children:""}),(N.pymMthCd==="01"?J:$).map(Re=>s.jsx("option",{value:Re.CODE,children:Re.CODE_NM},Re.CODE))]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:N.pymMthCd==="01"?"":""}),s.jsxs("div",{className:"flex-1 flex gap-2",children:[s.jsx("input",{type:"text",value:N.acntNo,onChange:Re=>{C(X=>({...X,acntNo:Re.target.value.replace(/[^0-9]/g,"")})),R(!1)},placeholder:N.pymMthCd==="01"?" (- )":" (- )",className:"flex-1 min-w-0 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500"}),s.jsx("button",{onClick:I,disabled:A||v,className:`flex-shrink-0 px-3 py-1.5 text-sm rounded font-medium transition-colors whitespace-nowrap ${v?"bg-green-100 text-green-700 border border-green-300":"bg-blue-500 text-white hover:bg-blue-600"}`,children:A?"":v?"":""})]})]}),N.pymMthCd==="02"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"text",value:N.cardExpMm,onChange:Re=>{C(X=>({...X,cardExpMm:Re.target.value.replace(/[^0-9]/g,"").slice(0,2)})),R(!1)},placeholder:"MM",maxLength:2,className:"w-14 px-2 py-1.5 text-sm border border-gray-300 rounded text-center focus:ring-1 focus:ring-orange-500"}),s.jsx("span",{className:"text-gray-400",children:"/"}),s.jsx("input",{type:"text",value:N.cardExpYy,onChange:Re=>{C(X=>({...X,cardExpYy:Re.target.value.replace(/[^0-9]/g,"").slice(0,2)})),R(!1)},placeholder:"YY",maxLength:2,className:"w-14 px-2 py-1.5 text-sm border border-gray-300 rounded text-center focus:ring-1 focus:ring-orange-500"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("select",{value:N.joinCardYn,onChange:Re=>C(X=>({...X,joinCardYn:Re.target.value})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"N",children:""}),s.jsx("option",{value:"Y",children:""})]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsx("select",{value:N.pyrRel,onChange:Re=>C(X=>({...X,pyrRel:Re.target.value})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:se.map(Re=>s.jsx("option",{value:Re.CODE,children:Re.CODE_NM},Re.CODE))})]})]}),N.pymMthCd==="01"&&s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-700",children:" "}),s.jsx("div",{className:"flex items-center gap-2",children:S&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:fe,className:"text-xs text-blue-500 hover:text-blue-600 flex items-center gap-0.5",children:[s.jsx(jL,{className:"w-3 h-3"}),"PDF"]}),s.jsx("button",{onClick:H,className:"text-xs text-red-500 hover:text-red-600",children:" "})]})})]}),S?s.jsxs("div",{className:"border border-green-300 rounded-lg bg-green-50 p-2 flex flex-col items-center",children:[s.jsx("img",{src:S,alt:"",className:"max-h-24 rounded border border-gray-200 bg-white"}),s.jsxs("div",{className:"flex items-center gap-1 mt-1.5",children:[s.jsx(dc,{className:"w-3.5 h-3.5 text-green-600"}),s.jsx("span",{className:"text-xs text-green-600 font-medium",children:" "})]})]}):s.jsxs("button",{onClick:U,disabled:!v,className:`w-full py-4 border-2 border-dashed rounded-lg flex flex-col items-center gap-1.5 transition-colors ${v?"border-blue-300 bg-blue-50 hover:bg-blue-100 text-blue-600 cursor-pointer":"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[s.jsx(sw,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:v?"  ":"    "})]})]}),s.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mr,{className:"w-4 h-4 text-orange-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-orange-700",children:[s.jsx("p",{children:"     ."}),s.jsx("p",{className:"text-xs mt-1",children:"      ."})]})]})})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(_p,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),s.jsx("p",{children:"  ."})]})}),ce&&s.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:ge,disabled:V||!v||N.pymMthCd==="01"&&!S,className:`flex-1 py-2.5 rounded-lg transition-colors text-sm font-medium flex items-center justify-center gap-2 ${v&&(N.pymMthCd==="02"||S)?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:V?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-4 h-4 animate-spin"})," ..."]}):""}),s.jsx("button",{onClick:e,disabled:V,className:"flex-1 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:""})]})})]}),W&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsx(Kj,{title:"  ",onSave:Q,onCancel:()=>j(!1)})})}),F.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${F.type==="success"?"bg-green-100":F.type==="error"?"bg-red-100":F.type==="warning"?"bg-orange-100":"bg-blue-100"}`,children:F.type==="success"?s.jsx(dc,{className:"w-5 h-5 text-green-500"}):s.jsx(Mr,{className:`w-5 h-5 ${F.type==="error"?"text-red-500":F.type==="warning"?"text-orange-500":"text-blue-500"}`})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:F.title})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-5 whitespace-pre-line",children:F.message}),s.jsx("button",{onClick:()=>ee({show:!1,title:"",message:"",type:"info"}),className:`w-full px-4 py-2 text-sm text-white rounded-lg transition-colors ${F.type==="success"?"bg-green-500 hover:bg-green-600":F.type==="error"?"bg-red-500 hover:bg-red-600":F.type==="warning"?"bg-orange-500 hover:bg-orange-600":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})})]}):null},Zx=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},aK=t=>!t||t.length<6?t||"-":`${t.slice(0,4)}-${t.slice(4,6)}`,lK=({custId:t,custNm:e,expanded:n,onToggle:r,showToast:i,onNavigateToPaymentChange:l,paymentChangeInProgress:c,onCancelPaymentChange:d,currentWorkingPymAcntId:u,selectedPymAcntIdFromContract:f,contracts:m=[]})=>{const[p,y]=_.useState([]),[g,N]=_.useState([]),[C,v]=_.useState(!1),[R,A]=_.useState(!1),[M,L]=_.useState(null),[k,V]=_.useState(!0),[G,W]=_.useState(!1),[j,S]=_.useState([]),[P,F]=_.useState(!1),[ee,J]=_.useState(!1),[$,Y]=_.useState(""),[K,w]=_.useState(!1),[se,oe]=_.useState(null);_.useEffect(()=>{n&&t&&T()},[n,t]),_.useEffect(()=>{f&&f!==M&&L(f)},[f]),_.useEffect(()=>{M&&t&&(I(M),oe(ZD(M)))},[M,t]);const T=async()=>{v(!0);try{const ae=await xN(t);ae.success&&ae.data&&(y(ae.data),ae.data.length>0&&(f&&ae.data.some(fe=>fe.PYM_ACNT_ID===f)?L(f):L(ae.data[0].PYM_ACNT_ID)))}catch(ae){console.error("Load payment accounts error:",ae)}finally{v(!1)}},I=async ae=>{A(!0);try{const fe=await XD(t,ae);fe.success&&fe.data?N(fe.data):N([])}catch(fe){console.error("Load billing details error:",fe),N([])}finally{A(!1)}},U=ae=>{L(ae)},Q=()=>{d&&d(),l&&$&&l($),J(!1),Y("")},H=p.find(ae=>ae.PYM_ACNT_ID===M),q=async()=>{if(!M){i==null||i(" .","warning");return}F(!0);try{const ae=await XD(t,M);if(ae.success&&ae.data){const fe=ae.data.filter(ge=>ge.UPYM_AMT>0).map(ge=>({BILL_YM:ge.BILL_YYMM,CTRT_ID:"",PROD_NM:ge.BILL_CYCL||"",BILL_AMT:ge.BILL_AMT,UNPAY_AMT:ge.UPYM_AMT,UNPAY_DAYS:0,UNPAY_STAT_NM:""}));fe.length>0?(S(fe),W(!0)):i==null||i("  .","info")}else i==null||i("   .","error")}catch(ae){console.error("Load unpayment list error:",ae),i==null||i("     .","error")}finally{F(!1)}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:r,className:"w-full px-3 py-2.5 flex items-center justify-between text-left",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"font-medium text-gray-800",children:" / "})}),n?s.jsx(Wr,{className:"w-4 h-4 text-gray-400"}):s.jsx(or,{className:"w-4 h-4 text-gray-400"})]}),n&&s.jsx("div",{className:"px-3 pb-3",children:C?s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx(jn,{className:"w-5 h-5 animate-spin text-gray-400"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),s.jsxs("span",{className:"text-xs text-gray-500",children:[p.length,""]})]}),p.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-1 mb-3",children:p.map((ae,fe)=>{const ge=u===ae.PYM_ACNT_ID,ce=M===ae.PYM_ACNT_ID;return s.jsx("div",{onClick:()=>U(ae.PYM_ACNT_ID),className:`p-2 rounded-lg border cursor-pointer transition-all ${ge?"bg-orange-50 border-orange-300":ce?"bg-blue-50 border-blue-400":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium text-gray-700",children:[fe+1,"."]}),s.jsx("span",{className:"text-gray-800",children:Zx(ae.PYM_ACNT_ID)}),s.jsx("span",{className:"text-gray-400",children:"|"}),s.jsx("span",{className:"text-gray-600",children:ae.PYM_MTHD_NM||"-"}),ge&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-orange-500 text-white rounded-full animate-pulse",children:""})]}),s.jsxs("span",{className:`font-medium ${ae.UPYM_AMT_ACNT>0?"text-red-600":"text-gray-600"}`,children:[jo(ae.UPYM_AMT_ACNT||0),""]})]})},ae.PYM_ACNT_ID)})}),H&&s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsx("span",{className:"text-gray-800",children:H.PYM_MTHD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"/"}),s.jsx("span",{className:"text-gray-800",children:H.BANK_CARD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"/"}),s.jsx("span",{className:"text-gray-800",children:G9(H.BANK_CARD_NO||"",4,4)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsx("span",{className:"text-gray-800",children:H.BILL_MTHD||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-blue-200",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:`font-bold ${H.UPYM_AMT_ACNT>0?"text-red-600":"text-gray-800"}`,children:[jo(H.UPYM_AMT_ACNT||0),""]})]})]})})]}),p.some(ae=>ae.UPYM_AMT_ACNT>0)&&s.jsx("button",{onClick:q,disabled:P||!M,className:`w-full mt-3 py-2.5 text-sm text-white rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2 ${se?"bg-amber-500 hover:bg-amber-600 animate-pulse":"bg-red-500 hover:bg-red-600"}`,children:P?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-4 h-4 animate-spin"})," ..."]}):se?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-white rounded-full"}),"   (",Zx(M||""),")"]}):`  (${Zx(M||"")})`}),M&&s.jsx("button",{onClick:()=>w(!0),className:"w-full mt-2 py-2 text-sm text-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors font-medium",children:" "})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("button",{onClick:()=>V(!k),className:"w-full flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:""}),H&&s.jsx("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-0.5 rounded",children:Zx(H.PYM_ACNT_ID)})]}),s.jsx(or,{className:`w-4 h-4 text-gray-400 transition-transform ${k?"rotate-180":""}`})]}),k&&s.jsx(s.Fragment,{children:M?R?s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx(jn,{className:"w-4 h-4 animate-spin text-gray-400"})}):g.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:" 3      ."}):s.jsxs("div",{className:"space-y-2",children:[g.slice(0,10).map((ae,fe)=>s.jsxs("div",{className:`p-3 rounded-lg border ${ae.UPYM_AMT>0?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-gray-200",children:[s.jsx("span",{className:"font-medium text-gray-800",children:aK(ae.BILL_YYMM)}),s.jsx("span",{className:"text-xs text-gray-500",children:ae.BILL_CYCL||""})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:"text-gray-800",children:[jo(ae.BILL_AMT),""]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:"text-green-600",children:[jo(ae.RCPT_AMT),""]})]}),ae.UPYM_AMT>0&&s.jsxs("div",{className:"flex justify-between pt-1 border-t border-gray-200",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:"text-red-600 font-bold",children:[jo(ae.UPYM_AMT),""]})]})]})]},fe)),g.length>10&&s.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["+",g.length-10,"  "]})]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:" ."})})]})]})}),s.jsx(dW,{isOpen:G,onClose:()=>{W(!1),T(),M&&(I(M),oe(ZD(M)))},pendingPayment:se,custId:t,custNm:e,pymAcntId:M||"",unpaymentList:j,showToast:i,onSuccess:()=>{T(),M&&I(M)},soId:(()=>{var ae,fe;if(M){const ge=p.find(ce=>ce.PYM_ACNT_ID===M);if(ge!=null&&ge.SO_ID)return ge.SO_ID}if(M&&m.length>0){const ge=m.filter(ce=>ce.PYM_ACNT_ID===M&&ce.SO_ID);if(ge.length>0)return(ge.find(Re=>Re.CTRT_STAT_CD==="10")||ge[0]).SO_ID}try{const ge=JSON.parse(sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo")||"{}"),ce=ge.authSoList||ge.AUTH_SO_List||[];return((ae=ce[0])==null?void 0:ae.SO_ID)||((fe=ce[0])==null?void 0:fe.soId)||ge.soId||ge.SO_ID||""}catch{return""}})()}),s.jsx(iK,{isOpen:K,onClose:()=>{w(!1),T(),M&&I(M)},custId:t,custNm:e,soId:(()=>{var ae,fe;if(M){const ge=p.find(ce=>ce.PYM_ACNT_ID===M);if(ge!=null&&ge.SO_ID)return ge.SO_ID}if(M&&m.length>0){const ge=m.filter(ce=>ce.PYM_ACNT_ID===M&&ce.SO_ID);if(ge.length>0)return(ge.find(ce=>ce.CTRT_STAT_CD==="10")||ge[0]).SO_ID}try{const ge=JSON.parse(sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo")||"{}"),ce=ge.authSoList||ge.AUTH_SO_List||[];return((ae=ce[0])==null?void 0:ae.SO_ID)||((fe=ce[0])==null?void 0:fe.soId)||ge.soId||ge.SO_ID||""}catch{return""}})(),initialPymAcntId:M||"",showToast:i,onSuccess:()=>{T()}}),ee&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:s.jsx(Mr,{className:"w-5 h-5 text-orange-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:"  "})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:["     .",s.jsx("br",{}),"     ?"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{J(!1),Y("")},className:"flex-1 px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:""}),s.jsx("button",{onClick:Q,className:"flex-1 px-4 py-2 text-sm text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition-colors",children:" "})]})]})})]})},ZC=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},oK=({onBack:t,showToast:e,onContractSelect:n,onNavigateToPaymentChange:r,onNavigateToConsultationAS:i,onNavigateToAddressChange:l,onNavigateToReContract:c,selectedCustomer:d,savedContract:u,cachedContracts:f=[],cachedConsultationHistory:m=[],cachedWorkHistory:p=[],cachedDataCustId:y="",onDataLoaded:g,paymentChangeInProgress:N,onCancelPaymentChange:C,currentWorkingPymAcntId:v})=>{const[R,A]=_.useState([]),[M,L]=_.useState([]),[k,V]=_.useState([]),[G,W]=_.useState("byDate"),[j,S]=_.useState([]),[P,F]=_.useState([]),[ee,J]=_.useState(""),[$,Y]=_.useState(!1),[K,w]=_.useState(!1),[se,oe]=_.useState({customerInfo:!0,contracts:!0,payment:!1,consultation:!1,work:!1}),[T,I]=_.useState(new Set),[U,Q]=_.useState(new Set),H=re=>{I(pe=>{const Se=new Set(pe);return Se.has(re)?Se.delete(re):Se.add(re),Se})},q=re=>{Q(pe=>{const Se=new Set(pe);return Se.has(re)?Se.delete(re):Se.add(re),Se})},[ae,fe]=_.useState(null);_.useEffect(()=>{d&&d.CUST_ID!==ae?(fe(d.CUST_ID),J(""),y===d.CUST_ID&&(f.length>0||m.length>0||p.length>0)?(A(f),L(m),V(p),j.length===0&&P.length===0&&Z(d.CUST_ID)):ie(d.CUST_ID)):!d&&ae&&(fe(null),A([]),L([]),V([]))},[d,y]),_.useEffect(()=>{d&&u&&u.ctrtId&&u.ctrtId!==ce&&(Re(u.ctrtId),he(d.CUST_ID,u.ctrtId))},[d,u]),_.useEffect(()=>{if(d!=null&&d.EQT_SERNO&&R.length>0){const re=d.EQT_SERNO.toLowerCase(),pe=R.find(Se=>{var st,Nt;return((st=Se.NOTRECEV)==null?void 0:st.toLowerCase().includes(re))||((Nt=Se.EQT_SERNO)==null?void 0:Nt.toLowerCase().includes(re))});J(pe?pe.CTRT_ID:"")}else J("")},[d==null?void 0:d.EQT_SERNO,R]);const ge=async re=>{Y(!0);try{const pe=await v_(re);return pe.success&&pe.data?(A(pe.data),pe.data):(A([]),[])}catch(pe){return console.error("Load contracts error:",pe),A([]),[]}finally{Y(!1)}},[ce,Re]=_.useState(""),[X,me]=_.useState(""),he=async(re,pe)=>{w(!0);try{const[Se,st]=await Promise.all([Kp(re,pe,10),Qp(re,pe,10)]),Nt=Se.success&&Se.data?Se.data:[],lt=st.success&&st.data?st.data:[];return L(Nt),V(lt),{consultation:Nt,work:lt}}catch(Se){return console.error("Load history error:",Se),{consultation:[],work:[]}}finally{w(!1)}},Z=async re=>{w(!0);try{const[pe,Se]=await Promise.all([Kp(re,void 0,10),Qp(re,void 0,10)]),st=pe.success&&pe.data?pe.data:[],Nt=Se.success&&Se.data?Se.data:[];S(st),F(Nt)}catch(pe){console.error("Load all history error:",pe)}finally{w(!1)}},ie=async re=>{L([]),V([]),Re("");const pe=await ge(re);W("byDate"),await Z(re),g&&g(re,pe,[],[])},te=re=>{oe(pe=>({...pe,[re]:!pe[re]}))},je=re=>{n({ctrtId:re.CTRT_ID,prodNm:re.PROD_NM,instAddr:re.INST_ADDR,streetAddr:re.STREET_ADDR_FULL,instlLoc:re.INSTL_LOC,postId:re.POST_ID,notrecev:re.NOTRECEV,soId:re.SO_ID,prodGrp:re.PROD_GRP}),Re(re.CTRT_ID),W("byContract"),d&&he(d.CUST_ID,re.CTRT_ID),re.PYM_ACNT_ID&&me(re.PYM_ACNT_ID)},be=G==="byContract"?ce?M:[]:j,Te=G==="byContract"?ce?k:[]:P;return s.jsx("div",{className:"h-full overflow-y-auto bg-gray-50",children:s.jsx("div",{className:"p-4 space-y-4",children:d?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>te("customerInfo"),className:"w-full px-3 py-2.5 flex items-center justify-between text-left",children:[s.jsx("span",{className:"font-medium text-gray-800",children:" "}),se.customerInfo?s.jsx(Wr,{className:"w-4 h-4 text-gray-400"}):s.jsx(or,{className:"w-4 h-4 text-gray-400"})]}),se.customerInfo&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"font-medium text-gray-800 text-right flex-1 break-all",children:ZC(d.CUST_ID)})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"font-medium text-gray-800 text-right flex-1 break-all",children:d.CUST_NM})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1",children:Gy(d.TEL_NO)||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1",children:Gy(d.HP_NO)||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1",children:d.CUST_TP_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1 break-all",children:d.GRP_NM||"-"})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-100 text-sm space-y-1",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("span",{className:"text-gray-500",children:""})}),s.jsx("div",{className:"text-gray-700 break-words",children:d.ROAD_ADDR||d.INST_ADDR||d.CUST_ADDR||"-"})]}),d.UNPAY_AMT>0&&s.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded border border-red-200",children:[s.jsx("span",{className:"text-red-700 text-sm",children:""}),s.jsxs("span",{className:"text-red-600 font-bold",children:[jo(d.UNPAY_AMT),""]})]})]})]}),s.jsx(rW,{contracts:R,isLoading:$,expanded:se.contracts,onToggle:()=>te("contracts"),onContractSelect:je,showToast:e,initialSearchKeyword:ee||(d==null?void 0:d.CTRT_ID)||"",onNavigateToConsultation:re=>{je(re),i&&i("consultation")},onNavigateToAS:re=>{je(re),i&&i("as")},onNavigateToAddressChange:re=>{je(re),l&&l()},onNavigateToReContract:re=>{je(re),c&&c()}}),s.jsx(lK,{custId:d.CUST_ID,custNm:d.CUST_NM,expanded:se.payment,onToggle:()=>te("payment"),showToast:e,onNavigateToPaymentChange:r,paymentChangeInProgress:N,onCancelPaymentChange:C,currentWorkingPymAcntId:v,selectedPymAcntIdFromContract:X,contracts:R}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[s.jsxs("button",{onClick:()=>te("consultation"),className:"flex items-center gap-2 flex-1 text-left",children:[s.jsx("span",{className:"font-medium text-gray-800",children:""}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",be.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[s.jsx("button",{onClick:re=>{re.stopPropagation(),W("byDate"),d&&j.length===0&&P.length===0&&Z(d.CUST_ID)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byDate"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:re=>{re.stopPropagation(),W("byContract"),d&&ce&&he(d.CUST_ID,ce)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byContract"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]}),s.jsx("button",{onClick:()=>te("consultation"),children:se.consultation?s.jsx(Wr,{className:"w-4 h-4 text-gray-400"}):s.jsx(or,{className:"w-4 h-4 text-gray-400"})})]}),se.consultation&&s.jsx("div",{className:"px-3 pb-3",children:K?s.jsx("div",{className:"flex items-center justify-center py-3",children:s.jsx(jn,{className:"w-4 h-4 animate-spin text-gray-400"})}):G==="byContract"&&!ce?s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:"   "}):be.length>0?s.jsx("div",{className:"space-y-3",children:be.map((re,pe)=>{var Se;return s.jsxs("div",{className:"bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"p-3 cursor-pointer flex items-center justify-between",onClick:()=>H(pe),children:[s.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs flex-1",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:re.CTRT_ID?ZC(re.CTRT_ID):"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:re.START_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:re.CNSL_SLV_CL_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(Se=re.CNSL_RSLT)!=null&&Se.includes("")?"text-green-600":"text-yellow-600"}`,children:re.CNSL_RSLT||""})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:re.RCPT_NM||"-"})]})]}),T.has(pe)?s.jsx(Wr,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"}):s.jsx(or,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"})]}),T.has(pe)&&s.jsxs("div",{className:"px-3 pb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:re.REQ_CTX||"-"})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:re.PROC_CT||"-"})]})]})]},pe)})}):s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:" "})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[s.jsxs("button",{onClick:()=>te("work"),className:"flex items-center gap-2 flex-1 text-left",children:[s.jsx("span",{className:"font-medium text-gray-800",children:""}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",Te.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[s.jsx("button",{onClick:re=>{re.stopPropagation(),W("byDate"),d&&j.length===0&&P.length===0&&Z(d.CUST_ID)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byDate"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:re=>{re.stopPropagation(),W("byContract"),d&&ce&&he(d.CUST_ID,ce)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byContract"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]}),s.jsx("button",{onClick:()=>te("work"),children:se.work?s.jsx(Wr,{className:"w-4 h-4 text-gray-400"}):s.jsx(or,{className:"w-4 h-4 text-gray-400"})})]}),se.work&&s.jsx("div",{className:"px-3 pb-3",children:K?s.jsx("div",{className:"flex items-center justify-center py-3",children:s.jsx(jn,{className:"w-4 h-4 animate-spin text-gray-400"})}):G==="byContract"&&!ce?s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:"   "}):Te.length>0?s.jsx("div",{className:"space-y-3",children:Te.map((re,pe)=>{var Se,st;return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:re.CTRT_ID?ZC(re.CTRT_ID):"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:re.HOPE_DT||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:re.WRK_CD_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(Se=re.WRK_STAT_CD_NM)!=null&&Se.includes("")?"text-green-600":(st=re.WRK_STAT_CD_NM)!=null&&st.includes("")?"text-blue-600":"text-gray-800"}`,children:re.WRK_STAT_CD_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-center",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:re.PROD_NM||"-"})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:re.CMPL_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:re.WRK_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:re.WRK_CRR_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-start",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800",children:re.CTRT_ADDR||"-"})]}),s.jsxs("div",{className:"mt-3 cursor-pointer",onClick:()=>q(pe),children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"text-xs text-gray-500",children:""}),U.has(pe)?s.jsx(Wr,{className:"w-3.5 h-3.5 text-gray-400"}):s.jsx(or,{className:"w-3.5 h-3.5 text-gray-400"})]}),U.has(pe)&&s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:re.MEMO||"-"})]})]},pe)})}):s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:" "})})]})]}):s.jsx("div",{className:"flex items-center justify-center h-48 text-gray-400 text-sm",children:"   ."})})})},cK=({onBack:t,showToast:e,selectedCustomer:n,selectedContract:r,initialSection:i="phone",initialPymAcntId:l="",onPaymentChangeStart:c,onPaymentChangeEnd:d,savedPaymentForm:u,savedPymAcntId:f="",savedIsVerified:m=!1,onPaymentFormChange:p,onAddressChanged:y})=>{var Ls;const[g,N]=_.useState({phone:!1,address:i==="address",payment:i==="payment",hpPay:i==="hpPay"}),[C,v]=_.useState({telNoType:"hp",telNo:"",telTpCd:"",disconnYn:"N"}),[R,A]=_.useState([]),[M,L]=_.useState("address"),[k,V]=_.useState({addr:"",instlLoc:""}),[G,W]=_.useState(!1),[j,S]=_.useState({zipCd:"",addr1:"",addr2:"",instlLoc:"",changeBillAddr:!1,postId:"",streetId:"",dongmyonNm:"",bldCl:"0",bldNm:"",bunNo:"",hoNm:""}),[P,F]=_.useState(!1),[ee,J]=_.useState(!1),[$,Y]=_.useState(!1),[K,w]=_.useState([]),[se,oe]=_.useState(!1),[T,I]=_.useState(!1),[U,Q]=_.useState([]),[H,q]=_.useState(f),[ae,fe]=_.useState(!1),[ge,ce]=_.useState(!1),Re={pymMthCd:"01",changeReasonL:"",changeReasonM:"",acntHolderNm:"",idType:"01",birthDt:"",bankCd:"",acntNo:"",cardExpMm:"",cardExpYy:"",joinCardYn:"N",pyrRel:"01",pymDay:""},[X,me]=_.useState(u||Re),[he,Z]=_.useState(!1),[ie,te]=_.useState(m),[je,be]=_.useState(!1),[Te,re]=_.useState(!1),[pe,Se]=_.useState(null),[st,Nt]=_.useState(!1),[lt,At]=_.useState(""),[ot,We]=_.useState(Mv),[Dt,Et]=_.useState({isOpen:!1,message:"",type:"info"}),Rt=(nt,Kt="info")=>{Et({isOpen:!0,message:nt,type:Kt})},$e=nt=>{console.log("[ ] :",nt),console.log("[ ]   :",X.acntHolderNm);const Kt={...Re};me(Kt),te(!1),q(nt),c==null||c(),Nt(!1),At(""),console.log("[ ]   ")},[gt,Fe]=_.useState(!1),[rt,at]=_.useState("post"),[It,ht]=_.useState(""),[Je,ve]=_.useState({streetNm:"",streetBunM:"",streetBunS:""}),[Ge,_e]=_.useState([]),[xe,Ue]=_.useState([]),[Pe,Ye]=_.useState(!1),[mt,de]=_.useState(""),[tt,De]=_.useState([]),[it,St]=_.useState([]),[Lt,Ve]=_.useState([]),[kt,Oe]=_.useState({}),[Xt,rs]=_.useState([]),[ds,Ss]=_.useState([]),[Ns,ke]=_.useState([]);_.useEffect(()=>{et(),Qt()},[]),_.useEffect(()=>{n&&!ge&&qt()},[n]),_.useEffect(()=>{r&&(V({addr:r.streetAddr||r.instAddr||"",instlLoc:r.instlLoc||""}),W(U.length===1))},[r,U.length]),_.useEffect(()=>{p&&p(X,H,ie)},[X,H,ie]);const dt=nt=>nt.filter(Kt=>Kt.code&&Kt.code!=="[]"&&Kt.name!=="").map(Kt=>({CODE:Kt.code||Kt.CODE,CODE_NM:Kt.name||Kt.CODE_NM,ref_code:Kt.ref_code||""})),et=async()=>{F(!0);try{const nt=await k9();nt.success&&nt.data&&A(dt(nt.data))}catch(nt){console.error("Load telecom codes error:",nt)}finally{F(!1)}},Qt=async()=>{try{const[nt,Kt,Cs,Ht]=await Promise.all([U9(),W9(),B9(),F9()]);nt.success&&nt.data&&De(dt(nt.data)),Kt.success&&Kt.data&&St(dt(Kt.data)),Cs.success&&Cs.data&&Ss(dt(Cs.data)),Ht.success&&Ht.data&&rs(dt(Ht.data)),Ve([{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""}]),Oe({"01":[{CODE:"0101",CODE_NM:"/ "},{CODE:"0102",CODE_NM:" "},{CODE:"0103",CODE_NM:" "}],"02":[{CODE:"0201",CODE_NM:" "},{CODE:"0202",CODE_NM:" "},{CODE:"0203",CODE_NM:" "}],"03":[{CODE:"0301",CODE_NM:" "},{CODE:"0302",CODE_NM:" "}],"04":[{CODE:"0401",CODE_NM:" "}]}),ke([{CODE:"05",CODE_NM:"5"},{CODE:"10",CODE_NM:"10"},{CODE:"15",CODE_NM:"15"},{CODE:"20",CODE_NM:"20"},{CODE:"25",CODE_NM:"25"},{CODE:"27",CODE_NM:"27"}])}catch(nt){console.error("Load payment codes error:",nt)}},ut=async()=>{if(n){oe(!0);try{const nt=await b9(n.custId);nt.success&&nt.data?w(nt.data):w([]),I(!0)}catch(nt){console.error("Load HP pay list error:",nt),w([])}finally{oe(!1)}}},qt=async()=>{if(n){fe(!0);try{const nt=await xN(n.custId);if(nt.success&&nt.data){if(Q(nt.data),nt.data.length>0){const Kt=l&&nt.data.find(Cs=>Cs.PYM_ACNT_ID===l)?l:nt.data[0].PYM_ACNT_ID;q(Kt)}}else Q([]);ce(!0)}catch(nt){console.error("Load payment info error:",nt),Q([])}finally{fe(!1)}}};_.useEffect(()=>{i==="payment"&&n&&!ge&&qt()},[i,n]);const jt=async nt=>{re(!1),Se(nt),be(!0);try{const Kt={PYM_ACNT_ID:H,CUST_ID:n.custId,ACNT_NM:X.acntHolderNm,PYM_MTHD:X.pymMthCd==="01"?"02":"04",BANK_CARD:X.bankCd,ACNT_CARD_NO:X.acntNo,CHG_RESN_L:X.changeReasonL,CHG_RESN_M:X.changeReasonM,ID_TP:X.idType,BIRTH_DT:X.birthDt,PYR_REL:X.pyrRel,PYM_DAY:X.pymDay,SIGNATURE:nt};X.pymMthCd==="02"&&X.cardExpYy&&X.cardExpMm&&(Kt.CDTCD_EXP_DT=X.cardExpYy+X.cardExpMm,Kt.REQR_NM=X.acntHolderNm,Kt.JOIN_CARD_YN=X.joinCardYn),X.pymMthCd==="01"&&(Kt.PYM_CUST_NM=X.acntHolderNm);const Cs=await Wj(Kt);Cs.success?(Rt(" .","success"),me({pymMthCd:"01",changeReasonL:"",changeReasonM:"",acntHolderNm:"",idType:"01",birthDt:"",bankCd:"",acntNo:"",cardExpMm:"",cardExpYy:"",joinCardYn:"N",pyrRel:"01",pymDay:""}),te(!1),Se(null),d==null||d(),qt()):Rt(Cs.message||"  .","error")}catch(Kt){console.error("Save payment error:",Kt),Rt("    .","error")}finally{be(!1)}},ue=nt=>{const Kt=!g[nt];N(Cs=>({...Cs,[nt]:Kt})),nt==="hpPay"&&Kt&&!T&&ut(),nt==="payment"&&Kt&&!ge&&qt()},Ce=async(nt,Kt)=>{if(!n)return;const Cs=Kt==="",Ht=JSON.parse(sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo")||"{}");try{const Os={CUST_ID:n.custId,CTRT_ID:nt.CTRT_ID,HP_PAY_STAT:Cs?"Y":"N",SO_ID:(r==null?void 0:r.soId)||Ht.soId||"",MST_SO_ID:Ht.mstSoId||"200",USR_ID:Ht.userId||Ht.USR_ID||""},es=await N9(Os);if(es.success){Rt(` ${Kt} .`,"success"),ut();return}console.warn("HP Pay direct save failed, falling back to consultation:",es.message);const Ds={CUST_ID:n.custId,CTRT_ID:nt.CTRT_ID,CNSL_MST_CL:"04",CNSL_MID_CL:"0401",CNSL_SLV_CL:"040101",REQ_CTX:`[ ${Kt} ]
: ${nt.PROD_NM}
ID: ${nt.CTRT_ID}
: ${nt.HP_STAT||""}
: ${Kt}`},js=await Bj(Ds);js.success?(Rt(` ${Kt}  .    .`,"info"),ut()):Rt(js.message||`${Kt}  .`,"error")}catch(Os){console.error("HP Pay change error:",Os),Rt(`${Kt}    .`,"error")}},Le=K.filter(nt=>nt.CTRT_STAT_NM===""),Ie=Le.filter(nt=>nt.HP_STAT!==""),Ze=Le.filter(nt=>nt.HP_STAT===""),[Ee,pt]=_.useState(new Set),[Ke,Ct]=_.useState(new Set),bt=(nt,Kt)=>{nt==="apply"?pt(Kt?new Set(Ie.map(Cs=>Cs.CTRT_ID)):new Set):Ct(Kt?new Set(Ze.map(Cs=>Cs.CTRT_ID)):new Set)},He=(nt,Kt,Cs)=>{(nt==="apply"?pt:Ct)(Os=>{const es=new Set(Os);return Cs?es.add(Kt):es.delete(Kt),es})},ct=async()=>{if(Ee.size===0){Rt("  .","warning");return}const nt=Ie.filter(Kt=>Ee.has(Kt.CTRT_ID));We({isOpen:!0,title:"  ",message:`${nt.length} ?`,type:"confirm",onConfirm:async()=>{for(const Kt of nt)await Ce(Kt,"");pt(new Set)}})},wt=async()=>{if(Ke.size===0){Rt("  .","warning");return}const nt=Ze.filter(Kt=>Ke.has(Kt.CTRT_ID));We({isOpen:!0,title:"  ",message:`${nt.length} ?`,type:"confirm",onConfirm:async()=>{for(const Kt of nt)await Ce(Kt,"");Ct(new Set)}})},Bt=async()=>{var Kt,Cs;if(!n){Rt("  .","warning");return}const nt=C.telNo.replace(/[^0-9]/g,"");if(C.disconnYn!=="Y"){const Ht=x9(nt,C.telNoType);if(Ht){Rt(Ht,"warning");return}}else if(!nt){Rt(" .","warning");return}J(!0);try{const{ddd:Ht,fix:Os,dtl:es}=p9(nt),Ds=C.telNoType==="tel"?"1":"2",js=C.telNoType==="tel"?"":"",hs=C.telNoType==="tel"?((Kt=n.telNo)==null?void 0:Kt.replace(/[^0-9]/g,""))||"":((Cs=n.hpNo)==null?void 0:Cs.replace(/[^0-9]/g,""))||"",Us={CUST_ID:n.custId,TEL_NO:hs,TEL_DDD:Ht,TEL_FIX:Os,TEL_DTL:es,MB_CORP_TP:C.telTpCd,NO_SVC_YN:C.disconnYn,TEL_NO_TP:Ds,USE_YN:"Y",CTRT_ID:(r==null?void 0:r.ctrtId)||"",MAIN_TEL_YN:"N",CHG_UID:""},Qs=await S9(Us);Qs.success?(Rt(`${js} .`,"success"),v({telNoType:"hp",telNo:"",telTpCd:"",disconnYn:"N"})):Rt(Qs.message||"  .","error")}catch(Ht){console.error("Update phone error:",Ht),Rt("    .","error")}finally{J(!1)}},Vt=async()=>{if(!(r!=null&&r.ctrtId)){Rt("     .","warning");return}if(!j.zipCd||!j.addr1){Rt("  .","warning");return}if(!j.postId){Rt("    .","warning");return}Y(!0);try{const nt={CTRT_ID:r.ctrtId,POST_ID:j.postId,BLD_CL:j.bldCl||"0",BLD_NM:j.bldNm||"",BUN_NO:j.bunNo||"",HO_NM:j.hoNm||"",ADDR_DTL:j.addr2||"",STREET_ID:j.streetId||void 0,INSTL_LOC:k.instlLoc||void 0,CUST_FLAG:"0",PYM_FLAG:j.changeBillAddr?"1":"0"},Kt=await JD(nt);if(Kt.success){Rt(" .","success");const Cs=`${j.addr1}${j.addr2?" "+j.addr2:""}`;V(Ht=>({...Ht,addr:Cs})),S({zipCd:"",addr1:"",addr2:"",instlLoc:"",changeBillAddr:!1,postId:"",streetId:"",dongmyonNm:"",bldCl:"0",bldNm:"",bunNo:"",hoNm:""}),de(""),y==null||y()}else Rt(Kt.message||"  .","error")}catch(nt){console.error("Update address error:",nt),Rt("    .","error")}finally{Y(!1)}},[Jt,ss]=_.useState(!1),[Wt,Es]=_.useState(""),ys=async()=>{if(!(r!=null&&r.ctrtId)){Rt("     .","warning");return}if(!Wt){Rt("  .","warning");return}ss(!0);try{let nt="",Kt="0",Cs="",Ht="";try{const Ds=await v_(n.custId);if(Ds.success&&Ds.data){const js=Ds.data.find(hs=>hs.CTRT_ID===r.ctrtId);js&&(nt=js.ADDR_DTL||"",Kt=js.BLD_CL||"0",Cs=js.BLD_NM||"",Ht=js.STREET_ID||"")}}catch(Ds){console.log("[]    ,  :",Ds)}const Os={CTRT_ID:r.ctrtId,POST_ID:r.postId||"",ADDR_DTL:nt,BLD_CL:Kt,BLD_NM:Cs,STREET_ID:Ht,INSTL_LOC:Wt,CUST_FLAG:"0",PYM_FLAG:"0"},es=await JD(Os);es.success?(Rt(" .","success"),V(Ds=>({...Ds,instlLoc:Wt})),Es(""),y==null||y()):Rt(es.message||"  .","error")}catch(nt){console.error("Update location error:",nt),Rt("    .","error")}finally{ss(!1)}},Ps=()=>{Fe(!0),ht(""),ve({streetNm:"",streetBunM:"",streetBunS:""}),_e([]),Ue([])},xs=()=>{Fe(!1),_e([]),Ue([])},vs=(nt,Kt)=>{const Cs=Kt.toLowerCase();return nt.filter(Ht=>{const Os=(Ht.DONGMYON_NM||"").toLowerCase(),es=(Ht.ADDR||"").toLowerCase(),Ds=(Ht.GUGUN_NM||"").toLowerCase(),js=(Ht.BLD_NM||"").toLowerCase();return Os.includes(Cs)||es.includes(Cs)||Ds.includes(Cs)||js.includes(Cs)})},Ms=async()=>{if(!It||It.length<2){Rt("/  2  .","warning");return}Ye(!0);try{const nt=(r==null?void 0:r.soId)||"",Kt=await K9({DONGMYONG:It,...nt?{SO_ID:nt}:{}});if(Kt.success&&Kt.data){let Cs=Kt.data;if(Cs.length>0){const Ht=vs(Cs,It);console.log(`[AddressSearch] : ${Cs.length}  ${Ht.length} (: ${It})`),Cs=Ht}_e(Cs),Cs.length===0&&Rt("   .","info")}else Rt(Kt.message||"  .","error"),_e([])}catch(nt){console.error("Search post address error:",nt),Rt("    .","error"),_e([])}finally{Ye(!1)}},cs=async()=>{if(!Je.streetNm||Je.streetNm.length<2){Rt(" 2  .","warning");return}Ye(!0);try{const nt=await Q9({STREET_NM:Je.streetNm,STREET_BUN_M:Je.streetBunM||"",STREET_BUN_S:Je.streetBunS||"",SO_ID:(r==null?void 0:r.soId)||""});nt.success&&nt.data?(Ue(nt.data),nt.data.length===0&&Rt("   .","info")):(Rt(nt.message||"  .","warning"),Ue([]))}catch(nt){console.error("Search street address error:",nt),Rt("    .","error"),Ue([])}finally{Ye(!1)}},ms=nt=>{const Kt=nt.BLD_NM?nt.BLD_NM.includes("")||nt.BLD_NM.includes("APT")?"2":"1":"0";S(Cs=>({...Cs,zipCd:nt.ZIP_CD,addr1:nt.ADDR_FULL||nt.ADDR,addr2:"",postId:nt.POST_ID,streetId:"",dongmyonNm:nt.DONGMYON_NM||"",bldCl:Kt,bldNm:nt.BLD_NM||"",bunNo:nt.STRT_BUNGIHO||"",hoNm:""})),de(nt.POST_ID),xs(),Rt(" .  .","info")},Ks=nt=>{const Kt=nt.BLD_NM?nt.BLD_NM.includes("")||nt.BLD_NM.includes("APT")?"2":"1":"0";S(Cs=>({...Cs,zipCd:nt.ZIP_CD,addr1:nt.STREET_ADDR||nt.ADDR_FULL,addr2:"",postId:nt.POST_ID,streetId:nt.STREET_ID,dongmyonNm:nt.DONGMYON_NM||nt.NM_SMALL||"",bldCl:Kt,bldNm:nt.BLD_NM||"",bunNo:nt.BUN_NO||"",hoNm:nt.HO_NM||""})),de(nt.POST_ID),xs(),Rt(" .  .","info")};return n?s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50",children:[s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>ue("phone"),className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xy,{className:"w-5 h-5 text-blue-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:" "})]}),g.phone?s.jsx(Wr,{className:"w-5 h-5 text-gray-400"}):s.jsx(or,{className:"w-5 h-5 text-gray-400"})]}),g.phone&&s.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"   ()"}),n.phoneList&&n.phoneList.length>2?s.jsx("div",{className:"space-y-2",children:n.phoneList.map((nt,Kt)=>s.jsxs("button",{type:"button",onClick:()=>v(Cs=>({...Cs,telNoType:nt.type})),className:`w-full p-2 rounded border flex justify-between items-center transition-colors ${C.telNoType===nt.type?"bg-blue-50 border-blue-500 ring-2 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300"}`,children:[s.jsx("div",{className:`text-xs ${C.telNoType===nt.type?"text-blue-600 font-medium":"text-gray-500"}`,children:nt.typeNm}),s.jsx("div",{className:`font-medium text-sm ${C.telNoType===nt.type?"text-blue-700":"text-gray-800"}`,children:IC(nt.number)||"-"})]},Kt))}):s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>v(nt=>({...nt,telNoType:"tel"})),className:`p-2 rounded border text-left transition-colors ${C.telNoType==="tel"?"bg-blue-50 border-blue-500 ring-2 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300"}`,children:[s.jsx("div",{className:`text-xs ${C.telNoType==="tel"?"text-blue-600 font-medium":"text-gray-500"}`,children:""}),s.jsx("div",{className:`font-medium text-sm ${C.telNoType==="tel"?"text-blue-700":"text-gray-800"}`,children:IC(n.telNo)||"-"})]}),s.jsxs("button",{type:"button",onClick:()=>v(nt=>({...nt,telNoType:"hp"})),className:`p-2 rounded border text-left transition-colors ${C.telNoType==="hp"?"bg-blue-50 border-blue-500 ring-2 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300"}`,children:[s.jsx("div",{className:`text-xs ${C.telNoType==="hp"?"text-blue-600 font-medium":"text-gray-500"}`,children:""}),s.jsx("div",{className:`font-medium text-sm ${C.telNoType==="hp"?"text-blue-700":"text-gray-800"}`,children:IC(n.hpNo)||"-"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:[" ",C.telNoType==="tel"?"":""]}),s.jsx("input",{type:"tel",value:C.telNo,onChange:nt=>v(Kt=>({...Kt,telNo:nt.target.value.replace(/[^0-9]/g,"")})),placeholder:C.telNoType==="tel"?"0212345678":"01012345678",maxLength:12,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsxs("select",{value:C.telTpCd,onChange:nt=>v(Kt=>({...Kt,telTpCd:nt.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:""}),R.map(nt=>s.jsx("option",{value:nt.CODE,children:nt.CODE_NM},nt.CODE)),R.length===0&&P&&s.jsx("option",{value:"",disabled:!0,children:"..."})]})]}),s.jsx("button",{onClick:Bt,disabled:ee,className:"w-full flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 transition-colors",children:ee?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[C.telNoType==="tel"?"":""," "]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>ue("address"),className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rd,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:" / "})]}),g.address?s.jsx(Wr,{className:"w-5 h-5 text-gray-400"}):s.jsx(or,{className:"w-5 h-5 text-gray-400"})]}),g.address&&s.jsx("div",{className:"px-4 pb-4 space-y-4",children:r!=null&&r.ctrtId?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-3 bg-gray-100 border border-gray-300 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(iL,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"  "})]}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",r.prodNm]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",k.addr||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",k.instlLoc||"-"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:j.zipCd,readOnly:!0,placeholder:"  ",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-pointer",onClick:Ps}),s.jsxs("button",{onClick:Ps,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center gap-1",children:[s.jsx(yu,{className:"w-4 h-4"}),""]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:j.addr1,onChange:nt=>S(Kt=>({...Kt,addr1:nt.target.value})),placeholder:" ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:j.addr2,onChange:nt=>S(Kt=>({...Kt,addr2:nt.target.value})),placeholder:"  ()",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsxs("label",{className:`flex items-center gap-2 ${G?"cursor-pointer":"cursor-not-allowed opacity-50"}`,children:[s.jsx("input",{type:"checkbox",checked:j.changeBillAddr,onChange:nt=>S(Kt=>({...Kt,changeBillAddr:nt.target.checked})),disabled:!G,className:"w-4 h-4 text-green-600 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"  "}),!G&&s.jsxs("span",{className:"text-xs text-orange-500",children:["( ",U.length," -   )"]})]}),j.changeBillAddr&&G&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[s.jsxs("p",{className:"text-blue-700",children:[s.jsx("strong",{children:" :"})," ",((Ls=U[0])==null?void 0:Ls.BILL_ADDR)||"  "]}),s.jsx("p",{className:"text-blue-600 mt-1",children:"     "})]})]}),s.jsx("button",{onClick:Vt,disabled:$,className:"w-full flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-400 transition-colors",children:$?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-5 h-5 animate-spin"})," ..."]}):" "}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:" "}),s.jsx("div",{children:s.jsx("input",{type:"text",value:Wt,onChange:nt=>Es(nt.target.value),placeholder:k.instlLoc?`: ${k.instlLoc}`:": , ,  ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),s.jsx("button",{onClick:ys,disabled:Jt,className:"w-full flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-400 transition-colors",children:Jt?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-5 h-5 animate-spin"})," ..."]}):" "})]})]}):s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"  "}),s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"     /  ."})]})]})})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>ue("hpPay"),className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(py,{className:"w-5 h-5 text-purple-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:"() "})]}),g.hpPay?s.jsx(Wr,{className:"w-5 h-5 text-gray-400"}):s.jsx(or,{className:"w-5 h-5 text-gray-400"})]}),g.hpPay&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:ut,disabled:se,className:"flex items-center gap-1 px-3 py-1 text-sm text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:s.jsx(uc,{className:`w-4 h-4 ${se?"animate-spin":""}`})})}),se&&s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(jn,{className:"w-6 h-6 text-purple-500 animate-spin"}),s.jsx("span",{className:"ml-2 text-gray-500",children:" ..."})]}),!se&&T&&Le.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(py,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),s.jsx("p",{children:"   ."})]}),!se&&Ie.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-purple-700",children:[s.jsx("input",{type:"checkbox",checked:Ie.length>0&&Ee.size===Ie.length,onChange:nt=>bt("apply",nt.target.checked),className:"w-4 h-4 text-purple-600 rounded"}),"  (",Ie.length,")"]}),s.jsxs("button",{onClick:ct,disabled:Ee.size===0,className:"px-3 py-1 text-xs font-medium bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:bg-gray-300 transition-colors",children:["  (",Ee.size,")"]})]}),Ie.map((nt,Kt)=>s.jsxs("div",{className:`p-3 rounded-lg border ${Ee.has(nt.CTRT_ID)?"bg-purple-50 border-purple-300":"bg-gray-50 border-gray-100"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"checkbox",checked:Ee.has(nt.CTRT_ID),onChange:Cs=>He("apply",nt.CTRT_ID,Cs.target.checked),className:"w-4 h-4 text-purple-600 rounded flex-shrink-0"}),s.jsx("span",{className:"font-medium text-gray-800 text-sm flex-1",children:nt.PROD_NM||" "}),s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full flex-shrink-0 bg-orange-100 text-orange-700",children:""})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1 ml-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"ID:"}),s.jsx("span",{className:"text-gray-700",children:nt.CTRT_ID})]}),nt.ADDR&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:": "}),s.jsx("span",{className:"text-gray-700 break-all",children:nt.ADDR})]})]})]},nt.CTRT_ID||`apply-${Kt}`))]}),!se&&Ze.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-green-700",children:[s.jsx("input",{type:"checkbox",checked:Ze.length>0&&Ke.size===Ze.length,onChange:nt=>bt("cancel",nt.target.checked),className:"w-4 h-4 text-green-600 rounded"}),"  (",Ze.length,")"]}),s.jsxs("button",{onClick:wt,disabled:Ke.size===0,className:"px-3 py-1 text-xs font-medium bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-300 transition-colors",children:["  (",Ke.size,")"]})]}),Ze.map((nt,Kt)=>s.jsxs("div",{className:`p-3 rounded-lg border ${Ke.has(nt.CTRT_ID)?"bg-green-50 border-green-300":"bg-gray-50 border-gray-100"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"checkbox",checked:Ke.has(nt.CTRT_ID),onChange:Cs=>He("cancel",nt.CTRT_ID,Cs.target.checked),className:"w-4 h-4 text-green-600 rounded flex-shrink-0"}),s.jsx("span",{className:"font-medium text-gray-800 text-sm flex-1",children:nt.PROD_NM||" "}),s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full flex-shrink-0 bg-green-100 text-green-700",children:""})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1 ml-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"ID:"}),s.jsx("span",{className:"text-gray-700",children:nt.CTRT_ID})]}),nt.ADDR&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:": "}),s.jsx("span",{className:"text-gray-700 break-all",children:nt.ADDR})]})]})]},nt.CTRT_ID||`cancel-${Kt}`))]}),s.jsx("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mr,{className:"w-4 h-4 text-purple-600 mt-0.5"}),s.jsx("div",{className:"text-sm text-purple-700",children:s.jsx("p",{children:"/     ,    ."})})]})})]})]})]}),gt&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden max-h-[85vh] flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-gray-100 bg-gradient-to-r from-green-500 to-green-600 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(rd,{className:"w-4 h-4"})," "]}),s.jsx("button",{onClick:xs,className:"text-white/80 hover:text-white",children:s.jsx(bi,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"p-3 border-b border-gray-200 flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{at("post"),_e([]),Ue([])},className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${rt==="post"?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:()=>{at("street"),_e([]),Ue([])},className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${rt==="street"?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]})}),s.jsxs("div",{className:"p-3 border-b border-gray-200 flex-shrink-0",children:[rt==="post"?s.jsx("div",{className:"space-y-2",children:s.jsx("input",{type:"text",value:It,onChange:nt=>ht(nt.target.value),onKeyPress:nt=>nt.key==="Enter"&&Ms(),placeholder:"//   (: )",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" *"}),s.jsx("input",{type:"text",value:Je.streetNm,onChange:nt=>ve(Kt=>({...Kt,streetNm:nt.target.value})),onKeyPress:nt=>nt.key==="Enter"&&cs(),placeholder:": ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("input",{type:"text",value:Je.streetBunM,onChange:nt=>ve(Kt=>({...Kt,streetBunM:nt.target.value.replace(/[^0-9]/g,"")})),placeholder:": 123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("input",{type:"text",value:Je.streetBunS,onChange:nt=>ve(Kt=>({...Kt,streetBunS:nt.target.value.replace(/[^0-9]/g,"")})),placeholder:": 0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]})]}),s.jsx("button",{onClick:rt==="post"?Ms:cs,disabled:Pe,className:"w-full mt-3 flex items-center justify-center gap-2 py-2.5 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-400 transition-colors",children:Pe?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-4 h-4 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yu,{className:"w-4 h-4"}),""]})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 min-h-0",children:rt==="post"?Ge.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",Ge.length,""]}),Ge.map((nt,Kt)=>s.jsxs("button",{onClick:()=>ms(nt),className:"w-full p-3 bg-gray-50 hover:bg-green-50 rounded-lg border border-gray-200 hover:border-green-300 text-left transition-colors",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:nt.ADDR_FULL||nt.ADDR}),s.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[": ",nt.ZIP_CD," | ",nt.SIDO_NAME," ",nt.GUGUN_NM," ",nt.DONGMYON_NM]})]},nt.POST_ID||Kt))]}):s.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"//   ."}):xe.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",xe.length,""]}),xe.map((nt,Kt)=>s.jsxs("button",{onClick:()=>Ks(nt),className:"w-full p-3 bg-gray-50 hover:bg-green-50 rounded-lg border border-gray-200 hover:border-green-300 text-left transition-colors",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:nt.STREET_ADDR}),s.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[": ",nt.ZIP_CD," | ",nt.ADDR_FULL]}),nt.BLD_NM&&s.jsxs("div",{className:"mt-0.5 text-xs text-green-600",children:[": ",nt.BLD_NM]})]},nt.STREET_ID||Kt))]}):s.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"  ."})}),s.jsx("div",{className:"p-3 border-t border-gray-200 flex-shrink-0",children:s.jsx("button",{onClick:xs,className:"w-full py-2.5 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:""})})]})}),Te&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsx(Kj,{title:"  ",onSave:jt,onCancel:()=>re(!1)})})}),st&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-yellow-500 to-orange-500",children:s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(Mr,{className:"w-5 h-5"}),"  "]})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("p",{className:"text-gray-700 text-sm",children:["      .",s.jsx("br",{}),"     ."]}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"?"})]}),s.jsxs("div",{className:"p-4 bg-gray-50 flex gap-2",children:[s.jsx("button",{onClick:()=>{Nt(!1),At("")},className:"flex-1 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:""}),s.jsx("button",{onClick:()=>$e(lt),className:"flex-1 py-2.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:""})]})]})}),s.jsx(ul,{isOpen:ot.isOpen,onClose:()=>We(Mv),onConfirm:ot.onConfirm,title:ot.title,message:ot.message,type:ot.type,confirmText:"",cancelText:""}),s.jsx(ul,{isOpen:Dt.isOpen,onClose:()=>Et({isOpen:!1,message:"",type:"info"}),onConfirm:()=>{},message:Dt.message,type:Dt.type==="success"?"confirm":Dt.type==="warning"?"warning":Dt.type==="error"?"error":"info",confirmText:"",showCancel:!1})]}):s.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx(Mr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"  "}),s.jsxs("p",{className:"text-gray-500",children:["     ",s.jsx("br",{}),"   ."]})]})})},kf=({isOpen:t,onClose:e,onScan:n,isMultiScanMode:r=!1,scanCount:i=0})=>{const l=_.useRef(null),[c,d]=_.useState(!1),[u,f]=_.useState(null),[m,p]=_.useState(!1);_.useEffect(()=>t?((async()=>{try{screen.orientation&&screen.orientation.lock&&await screen.orientation.lock("portrait")}catch{console.log("Screen orientation lock not supported")}})(),()=>{try{screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock()}catch{}}):void 0,[t]),_.useEffect(()=>t?(f(null),d(!1),(async()=>{if(window.Html5Qrcode){await y();return}const A=document.createElement("script");A.src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js",A.async=!0,A.onload=()=>{y()},A.onerror=()=>{f("    .")},document.body.appendChild(A)})(),()=>{N()}):void 0,[t]);const y=async()=>{var R,A,M;try{if(f(null),!window.Html5Qrcode){f("Html5Qrcode not loaded");return}await g()}catch(L){console.error("Camera init error:",L),L.name==="NotAllowedError"||(R=L.message)!=null&&R.includes("Permission")?f(`   .
   .`):(A=L.message)!=null&&A.includes("secure context")||(M=L.message)!=null&&M.includes("https")?f(` HTTPS  localhost  .

 S/N .`):f(`   :
`+(L.message||L))}},g=async()=>{try{const R=window.Html5Qrcode;if(!R)return;if(l.current){try{await l.current.stop(),l.current.clear()}catch{}l.current=null}await new Promise(M=>setTimeout(M,100)),l.current=new R("barcode-reader");const A={fps:15,qrbox:{width:300,height:180},aspectRatio:1.777778,disableFlip:!1};await l.current.start({facingMode:"environment"},A,M=>{console.log("Barcode scanned:",M),navigator.vibrate&&navigator.vibrate(100),n(M),r||C()},M=>{});try{const M=document.querySelector("#barcode-reader video");if(M&&M.srcObject){const L=M.srcObject.getVideoTracks()[0];if(L){await L.applyConstraints({width:{ideal:4096},height:{ideal:2160}});try{await L.applyConstraints({advanced:[{focusMode:"continuous"}]})}catch{}}}}catch(M){console.log("Camera enhancement not supported:",M)}d(!0),f(null)}catch(R){console.error("Scanner start error:",R),f(`   .
`+(R.message||" ."))}},N=async()=>{if(l.current){try{await l.current.stop(),l.current.clear()}catch{}l.current=null}d(!1)},C=async()=>{await N(),e()},v=async()=>{p(!0),f(null),await N(),await new Promise(R=>setTimeout(R,300)),await y(),p(!1)};return t?s.jsxs("div",{className:"fixed inset-0 bg-black barcode-scanner-container z-[999999]",children:[s.jsxs("button",{onClick:C,className:"absolute top-4 right-4 z-30 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 transition-colors active:scale-95 flex items-center gap-2",style:{marginTop:"env(safe-area-inset-top, 0px)"},children:[s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("span",{className:"text-white font-medium text-sm",children:""})]}),r&&s.jsxs("div",{className:"absolute top-4 left-4 z-30 px-3 py-2 bg-blue-500 text-white text-sm font-bold rounded-full",style:{marginTop:"env(safe-area-inset-top, 0px)"},children:[i,""]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{top:"60px",bottom:"180px"},children:s.jsx("div",{id:"barcode-reader",className:"w-full max-w-md mx-4"})}),c&&s.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:s.jsxs("div",{className:"w-[300px] h-[180px] relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-green-400 rounded-tl-lg"}),s.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-green-400 rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-green-400 rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-green-400 rounded-br-lg"}),s.jsx("div",{className:"absolute left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-green-400 to-transparent animate-scan"})]})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 px-4 pt-3 z-20",style:{paddingBottom:"max(20px, env(safe-area-inset-bottom, 20px))"},children:[u?s.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-3",children:[s.jsx("p",{className:"text-red-200 text-sm text-center whitespace-pre-line",children:u}),s.jsx("button",{onClick:v,disabled:m,className:"w-full mt-3 py-2.5 bg-red-500 hover:bg-red-600 disabled:bg-red-400 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:m?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"  ..."]}):" "})]}):s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("p",{className:"text-white/80 text-sm mb-1",children:"    "}),s.jsx("p",{className:"text-white/50 text-xs",children:r?"   -    ":"S/N   "})]}),s.jsx("button",{onClick:C,className:"w-full py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg font-semibold transition-colors active:scale-[0.98] border border-gray-500",children:"  "})]}),s.jsx("style",{children:`
        @keyframes scan {
          0% { top: 10%; }
          50% { top: 85%; }
          100% { top: 10%; }
        }
        .animate-scan {
          animation: scan 2s ease-in-out infinite;
        }
        #barcode-reader {
          border: none !important;
          background: transparent !important;
          width: 100% !important;
        }
        #barcode-reader video {
          width: 100% !important;
          height: auto !important;
          object-fit: cover !important;
        }
        #barcode-reader__scan_region {
          background: transparent !important;
          min-height: 300px !important;
        }
        #barcode-reader__scan_region img {
          display: none !important;
        }
        #barcode-reader__scan_region br {
          display: none !important;
        }
        /* Hide the qrbox border */
        #barcode-reader__scan_region > div {
          border: none !important;
          box-shadow: none !important;
        }
        #qr-shaded-region {
          border: none !important;
        }
        /* Hide all library UI elements */
        #barcode-reader__dashboard,
        #barcode-reader__dashboard_section,
        #barcode-reader__dashboard_section_swaplink,
        #barcode-reader__dashboard_section_csr,
        #barcode-reader__status_span,
        #barcode-reader__header_message,
        #barcode-reader img[alt="Info icon"],
        #barcode-reader a {
          display: none !important;
        }
        #barcode-reader > div:last-child {
          display: none !important;
        }
        /*       */
        @media screen and (orientation: landscape) {
          .barcode-scanner-container {
            transform: rotate(-90deg);
            transform-origin: left top;
            width: 100vh !important;
            height: 100vw !important;
            position: fixed !important;
            top: 100% !important;
            left: 0 !important;
          }
        }
      `})]}):null},dK=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},$u=t=>t.replace(/[^0-9]/g,""),uK=({onCustomerSelect:t,onCustomerClear:e,showToast:n,selectedCustomer:r})=>{const[i,l]=_.useState(!1),[c,d]=_.useState(""),[u,f]=_.useState(""),[m,p]=_.useState(""),[y,g]=_.useState(""),[N,C]=_.useState(""),[v,R]=_.useState(!1),[A,M]=_.useState([]),[L,k]=_.useState(!1),[V,G]=_.useState(!1),W=_.useRef({customerId:"",contractId:"",phoneNumber:"",customerName:"",equipmentNo:""}),[j,S]=_.useState({show:!1,title:"",message:""}),P=()=>{d(W.current.customerId),f(W.current.contractId),p(W.current.phoneNumber),g(W.current.customerName),C(W.current.equipmentNo),l(!0)},F=()=>{l(!1)},ee=()=>{d(""),f(""),p(""),g(""),C(""),M([])},J=async()=>{let w=$u(c),se=$u(u);const oe=$u(m);w.length>0&&w.length<10&&(w=w.padStart(10,"0"),d(w)),se.length>0&&se.length<10&&(se=se.padStart(10,"0"),f(se));const T=w.length>=4,I=se.length>=4,U=oe.length>=4,Q=y.length>=2,H=N.length>=4;if(y.length===1){S({show:!0,title:" ",message:" 2  ."});return}if(!T&&!I&&!U&&!Q&&!H){S({show:!0,title:" ",message:`  .
(ID/ID/S/N 4,  4,  2)`});return}W.current={customerId:w,contractId:se,phoneNumber:m,customerName:y,equipmentNo:N},R(!0),k(!0);try{const q=await y9({custId:T?w:void 0,contractId:I?se:void 0,phoneNumber:U?oe:void 0,customerName:Q?y:void 0,equipmentNo:H?N:void 0});if(q.success&&q.data&&q.data.length>0){let ae=q.data;if(I&&ae.length>0&&(ae=ae.map(fe=>({...fe,CTRT_ID:se}))),H&&ae.length>0)try{const fe=ae[0].CUST_ID,ge=await v_(fe);if(ge.success&&ge.data){const ce=N.toLowerCase(),Re=ge.data.find(X=>{var me,he;return((me=X.NOTRECEV)==null?void 0:me.toLowerCase().includes(ce))||((he=X.EQT_SERNO)==null?void 0:he.toLowerCase().includes(ce))});Re&&(ae=ae.map(X=>({...X,CTRT_ID:Re.CTRT_ID})))}}catch(fe){console.log("[CustomerSearch] S/N  CTRT_ID lookup failed:",fe)}T&&(ae=ae.filter(fe=>(fe.CUST_ID||"").includes(w))),I&&(ae=ae.filter(fe=>(fe.CTRT_ID||"").includes(se))),Q&&(ae=ae.filter(fe=>(fe.CUST_NM||"").includes(y))),U&&(ae=ae.filter(fe=>[fe.TEL_NO,fe.HP_NO,...(fe.PHONE_LIST||[]).map(ce=>ce.TEL_NO||ce.HP_NO)].filter(Boolean).map(ce=>ce.replace(/[^0-9]/g,"")).some(ce=>ce.includes(oe)||oe.includes(ce)))),H&&(ae=ae.filter(fe=>(fe.EQT_SERNO||"").toLowerCase().includes(N.toLowerCase())||(fe.NOTRECEV||"").toLowerCase().includes(N.toLowerCase()))),ae.length>0?M(ae):(M([]),S({show:!0,title:" ",message:` .
  .`}))}else M([]),S({show:!0,title:" ",message:` .
  .`})}catch(q){console.error("Customer search error:",q),S({show:!0,title:"",message:"   ."}),M([])}finally{R(!1)}},$=w=>{w.key==="Enter"&&J()},Y=w=>{C(w.toUpperCase()),G(!1)},K=w=>{const se=w.CUST_ID||"",oe=$u(w.TEL_NO||w.HP_NO||""),T=w.CUST_NM||"",I=w.CTRT_ID||u;d(se),p(oe),g(T),w.CTRT_ID&&f(w.CTRT_ID),W.current={customerId:se,contractId:I,phoneNumber:oe,customerName:T,equipmentNo:N};const U={...w,EQT_SERNO:N||w.EQT_SERNO||void 0};t(U),F()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm p-3",children:s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex gap-2 cursor-pointer min-w-0 overflow-hidden",onClick:P,children:[s.jsx("input",{readOnly:!0,className:"flex-1 min-w-0 px-2 py-2 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer truncate",placeholder:"",type:"text",value:(r==null?void 0:r.CUST_NM)||""}),s.jsx("input",{readOnly:!0,className:"flex-1 min-w-0 px-2 py-2 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer",placeholder:"ID",type:"text",value:r?dK(r.CUST_ID):""})]})]})})}),i&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden max-h-[80vh] flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-gray-100 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(Oh,{className:"w-4 h-4"})," "]}),s.jsx("button",{onClick:ee,className:"px-3 py-1 text-xs font-medium text-blue-600 bg-white rounded-lg hover:bg-gray-100 transition-colors",children:""})]})}),s.jsxs("div",{className:"p-4 space-y-3 flex-1 overflow-y-auto min-h-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:c,onChange:w=>d($u(w.target.value)),onKeyPress:$,placeholder:"0000000000",maxLength:10,className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:u,onChange:w=>f($u(w.target.value)),onKeyPress:$,placeholder:"0000000000",maxLength:10,className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex gap-2 min-w-0",children:[s.jsx("input",{type:"tel",value:m,onChange:w=>p($u(w.target.value)),onKeyPress:$,placeholder:"01000000000",maxLength:11,className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",value:y,onChange:w=>g(w.target.value),onKeyPress:$,placeholder:"",className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:N,onChange:w=>C(w.target.value.toUpperCase()),onKeyPress:$,placeholder:"S/N  MAC  ",className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono"}),s.jsxs("button",{onClick:()=>G(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-white flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:J,disabled:v,className:"flex-1 py-2.5 text-sm text-white bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 rounded-lg font-medium flex items-center justify-center",children:v?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-4 h-4 animate-spin mr-2"})," ..."]}):""}),s.jsx("button",{onClick:F,className:"flex-1 py-2.5 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:""})]})}),s.jsx("div",{className:"px-4 pb-4 flex-shrink-0",children:L?A.length>0?s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3 bg-gray-50",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",A.length,""]}),A.map((w,se)=>s.jsxs("button",{onClick:()=>K(w),className:"w-full p-3 bg-white hover:bg-blue-50 rounded-lg border border-gray-200 hover:border-blue-300 text-left transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-blue-600 font-mono text-sm",children:w.CUST_ID}),s.jsx("span",{className:"font-semibold text-gray-900",children:w.CUST_NM})]}),w.CTRT_ID&&s.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[s.jsx("span",{className:"text-gray-400",children:"ID:"})," ",s.jsx("span",{className:"font-mono",children:w.CTRT_ID})]}),s.jsxs("div",{className:"mt-1 text-xs text-gray-500 truncate",children:[Gy(w.TEL_NO||w.HP_NO),w.CUST_ADDR&&` | ${w.CUST_ADDR}`]}),w.UNPAY_AMT>0&&s.jsxs("div",{className:"mt-1 text-xs text-red-500 font-medium",children:[": ",w.UNPAY_AMT.toLocaleString(),""]})]},w.CUST_ID||se))]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm border border-gray-200 rounded-lg bg-gray-50",children:"  ."}):s.jsx("div",{className:"text-center py-4 text-gray-400 text-sm border border-dashed border-gray-200 rounded-lg",children:"     ."})})]})}),s.jsx(kf,{isOpen:V,onClose:()=>G(!1),onScan:Y}),j.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:s.jsx(Mr,{className:"w-5 h-5 text-orange-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:j.title})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-5 whitespace-pre-line",children:j.message}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:()=>S({show:!1,title:"",message:""}),className:"flex-1 px-4 py-2 text-sm text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition-colors",children:""})})]})})]})},gT=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},hK=({onBack:t,showToast:e,selectedCustomer:n,selectedContract:r,contracts:i=[],onNavigateToBasicInfo:l})=>{const[c,d]=_.useState(null),[u,f]=_.useState(!1),[m,p]=_.useState([]),[y,g]=_.useState([]),[N,C]=_.useState([]),[v,R]=_.useState(!1),[A,M]=_.useState({promChgCd:"05",promChgrsnCd:"",promCnt:"",startDate:"",endDate:""}),[L,k]=_.useState(!1),[V,G]=_.useState({show:!1,success:!1,message:""}),W=_.useCallback(async()=>{if(!v)try{const[F,ee,J]=await Promise.all([Z9(),eW(),tW()]);if(F.success&&F.data){const $=F.data.map(Y=>({CODE:Y.code||Y.CODE||"",CODE_NM:Y.name||Y.CODE_NM||""})).filter(Y=>Y.CODE);p($.length>0?$:[{CODE:"0",CODE_NM:""},{CODE:"12",CODE_NM:"12"},{CODE:"24",CODE_NM:"24"},{CODE:"36",CODE_NM:"36"},{CODE:"48",CODE_NM:"48"},{CODE:"60",CODE_NM:"60"}])}else p([{CODE:"0",CODE_NM:""},{CODE:"12",CODE_NM:"12"},{CODE:"24",CODE_NM:"24"},{CODE:"36",CODE_NM:"36"},{CODE:"48",CODE_NM:"48"},{CODE:"60",CODE_NM:"60"}]);if(ee.success&&ee.data){const $=ee.data.map(Y=>({CODE:Y.code||Y.CODE||"",CODE_NM:Y.name||Y.CODE_NM||""})).filter(Y=>Y.CODE);g($.length>0?$:[{CODE:"A",CODE_NM:""},{CODE:"B",CODE_NM:""},{CODE:"C",CODE_NM:""},{CODE:"D",CODE_NM:""}])}else g([{CODE:"A",CODE_NM:""},{CODE:"B",CODE_NM:""},{CODE:"C",CODE_NM:""},{CODE:"D",CODE_NM:""}]);if(J.success&&J.data){const $=J.data.map(Y=>({CODE:Y.code||Y.CODE||"",CODE_NM:Y.name||Y.CODE_NM||""})).filter(Y=>Y.CODE);C($.length>0?$:[{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""},{CODE:"05",CODE_NM:""}])}else C([{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""},{CODE:"05",CODE_NM:""}]);R(!0)}catch(F){console.error("Code loading failed:",F),p([{CODE:"0",CODE_NM:""},{CODE:"12",CODE_NM:"12"},{CODE:"24",CODE_NM:"24"},{CODE:"36",CODE_NM:"36"},{CODE:"48",CODE_NM:"48"},{CODE:"60",CODE_NM:"60"}]),g([{CODE:"A",CODE_NM:""},{CODE:"B",CODE_NM:""},{CODE:"C",CODE_NM:""},{CODE:"D",CODE_NM:""}]),C([{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""},{CODE:"05",CODE_NM:""}]),R(!0)}},[v]),j=_.useCallback(async()=>{if(r!=null&&r.ctrtId){f(!0);try{const F=await X9(r.ctrtId);if(F.success&&F.data&&F.data.length>0){d(F.data[0]);const ee=F.data[0].CTRT_APLY_END_DT;ee&&M(J=>({...J,startDate:ee}))}else d(null)}catch(F){console.error("Promotion info load failed:",F),d(null)}finally{f(!1)}}},[r==null?void 0:r.ctrtId]);_.useEffect(()=>{W()},[W]),_.useEffect(()=>{r!=null&&r.ctrtId&&j()},[r==null?void 0:r.ctrtId,j]),_.useEffect(()=>{if(A.startDate&&A.promCnt&&A.promCnt!=="0"){const F=parseInt(A.promCnt,10);if(!isNaN(F)&&F>0){const ee=A.startDate.replace(/[^0-9]/g,"");if(ee.length===8){const J=parseInt(ee.substring(0,4),10),$=parseInt(ee.substring(4,6),10)-1,Y=parseInt(ee.substring(6,8),10),K=new Date(J,$+F,Y-1),w=`${K.getFullYear()}${String(K.getMonth()+1).padStart(2,"0")}${String(K.getDate()).padStart(2,"0")}`;M(se=>({...se,endDate:w}))}}}else A.promCnt==="0"&&M(F=>({...F,endDate:""}))},[A.startDate,A.promCnt]);const S=F=>{if(!F)return"-";const ee=F.replace(/[^0-9]/g,"");return ee.length===8?`${ee.substring(0,4)}-${ee.substring(4,6)}-${ee.substring(6,8)}`:F},P=async()=>{if(!n||!r){e==null||e("/  .","error");return}if(!A.promChgCd){e==null||e(" .","warning");return}if(!A.promCnt){e==null||e(" .","warning");return}if(!A.promChgrsnCd){e==null||e(" .","warning");return}if(!A.startDate){e==null||e(" .","warning");return}if(A.promCnt!=="0"&&!A.endDate){e==null||e("  .","warning");return}k(!0);try{const F={CUST_ID:n.custId,CTRT_ID:r.ctrtId,RCPT_ID:(c==null?void 0:c.RCPT_ID)||"",WRK_ID:"",AGREE_YN:"Y",AGREE_GB:A.promChgrsnCd,AGREE_SIGN:"",WRK_CD:A.promChgCd},ee=await J9(F);ee.success?(G({show:!0,success:!0,message:" ."}),j(),M(J=>({...J,promChgrsnCd:"",promCnt:"",endDate:""}))):G({show:!0,success:!1,message:ee.message||"  ."})}catch{G({show:!0,success:!1,message:"    ."})}finally{k(!1)}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[s.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[s.jsx(Ch,{className:"w-5 h-5 text-purple-500"})," "]}),n?r?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"text-sm text-orange-800",children:[s.jsx("span",{className:"font-medium",children:n.custNm}),s.jsxs("span",{className:"ml-1 text-orange-600 text-xs",children:["(ID: ",gT(n.custId),")"]})]})}),s.jsxs("div",{className:"text-xs text-orange-700 pt-1 border-t border-orange-200 space-y-0.5",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{className:"font-medium",children:r.prodNm||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:"ID"}),s.jsx("span",{children:gT(r.ctrtId)})]}),r.instAddr&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.instAddr})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:(()=>{const F=i.find($=>$.CTRT_ID===r.ctrtId),ee=(F==null?void 0:F.CTRT_APLY_STRT_DT)||(F==null?void 0:F.AGMT_ST_DT),J=(F==null?void 0:F.CTRT_APLY_END_DT)||(F==null?void 0:F.AGMT_END_DT);return ee||J?`${S(ee||"")} ~ ${S(J||"")}`:"-"})()})]})]})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1",children:[s.jsx(_h,{className:"w-3.5 h-3.5"})," "]}),u?s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx(jn,{className:"w-5 h-5 animate-spin text-gray-400"})}):c?s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:`font-medium ${c.PROM_YN==="Y"?"text-green-600":"text-gray-600"}`,children:c.PROM_YN==="Y"?"":""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:c.PROM_CNT_NM||c.PROM_CNT||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:S(c.CTRT_APLY_STRT_DT)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:S(c.CTRT_APLY_END_DT)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:c.PROM_CHG_CD_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:c.PROM_CHGRSN_CD_NM||"-"})]})]}):s.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:" ."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsxs("select",{value:A.promChgCd,onChange:F=>M(ee=>({...ee,promChgCd:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:""}),N.map(F=>s.jsx("option",{value:F.CODE,children:F.CODE_NM},F.CODE))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsxs("select",{value:A.promChgrsnCd,onChange:F=>M(ee=>({...ee,promChgrsnCd:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:""}),y.map(F=>s.jsx("option",{value:F.CODE,children:F.CODE_NM},F.CODE))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsxs("select",{value:A.promCnt,onChange:F=>M(ee=>({...ee,promCnt:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:""}),m.map(F=>s.jsx("option",{value:F.CODE,children:F.CODE_NM},F.CODE))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsx("input",{type:"date",value:A.startDate?S(A.startDate):"",onChange:F=>{const ee=F.target.value.replace(/-/g,"");M(J=>({...J,startDate:ee}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:A.endDate?S(A.endDate):"-",readOnly:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm bg-gray-50 text-gray-600"})]})]})]}),s.jsx("button",{onClick:P,disabled:L||!A.promChgCd||!A.promCnt||!A.promChgrsnCd||!A.startDate,className:`w-full flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-colors ${L||!A.promChgCd||!A.promCnt||!A.promChgrsnCd||!A.startDate?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:L?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-4 h-4 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hb,{className:"w-4 h-4"})," "]})})]}):s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mr,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-700",children:" ."}),s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:" ()    ."}),s.jsx("button",{onClick:l,className:"mt-2 text-xs text-blue-600 hover:text-blue-800 underline",children:" "})]})]})}):s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mr,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"  ."}),s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"  ,    ."}),s.jsx("button",{onClick:l,className:"mt-2 text-xs text-blue-600 hover:text-blue-800 underline",children:" "})]})]})}),V.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-6",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[V.success?s.jsx(Vi,{className:"w-12 h-12 text-green-500 mb-3"}):s.jsx(Lo,{className:"w-12 h-12 text-red-500 mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:V.success?" ":" "}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:V.message}),s.jsx("button",{onClick:()=>G({show:!1,success:!1,message:""}),className:`w-full py-2.5 rounded-lg text-sm font-bold text-white ${V.success?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"}`,children:""})]})})})]})},ep=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},fK=({onBack:t,showToast:e,selectedCustomer:n,selectedContract:r,contracts:i=[],onNavigateToBasicInfo:l,initialTab:c="consultation"})=>{var Ye,mt;const[d,u]=_.useState(c);_.useEffect(()=>{u(c)},[c]);const[f,m]=_.useState(!1),p=()=>{if(!r){m(!0);return}const de=i.find(De=>De.CTRT_ID===r.ctrtId);if(!(de&&de.CLOSE_DANGER==="Y"&&(de.CTRT_STAT_NM||"").includes(""))){m(!0);return}u("re-contract")},[y,g]=_.useState([]),[N,C]=_.useState([]),[v,R]=_.useState(r?"byContract":"byDate"),[A,M]=_.useState([]),[L,k]=_.useState([]),[V,G]=_.useState([]),[W,j]=_.useState("customer"),[S,P]=_.useState("subscriber"),[F,ee]=_.useState(!1),J=de=>{de==="contract"?r?j("contract"):ee(!0):j("customer")};_.useEffect(()=>{r&&j("contract")},[r]);const[$,Y]=_.useState({cnslLClCd:"",cnslMClCd:"",cnslSClCd:"",reqCntn:"",transYn:"N",transDeptCd:""}),[K,w]=_.useState(new Set),[se,oe]=_.useState(new Set),T=de=>{w(tt=>{const De=new Set(tt);return De.has(de)?De.delete(de):De.add(de),De})},I=de=>{oe(tt=>{const De=new Set(tt);return De.has(de)?De.delete(de):De.add(de),De})},[U,Q]=_.useState([]),[H,q]=_.useState([]),[ae,fe]=_.useState([]),[ge,ce]=_.useState([]),Re=de=>{if(!de){Y(Lt=>({...Lt,cnslLClCd:"",cnslMClCd:"",cnslSClCd:""}));return}const tt=ge.find(Lt=>Lt.code===de),De=(tt==null?void 0:tt.ref_code)||"",it=H.find(Lt=>Lt.code===De),St=(it==null?void 0:it.ref_code)||"";Y(Lt=>({...Lt,cnslLClCd:St,cnslMClCd:De,cnslSClCd:de}))},X=()=>{const de=new Date().getHours()+1;return de>=9&&de<=21?de.toString().padStart(2,"0"):"09"},[me,he]=_.useState({asClCd:"",asClDtlCd:"",asResnLCd:"",asResnMCd:"",asCntn:"",schdDt:new Date().toISOString().split("T")[0],schdHour:X(),schdMin:"00"}),[Z,ie]=_.useState([]),[te,je]=_.useState([]),[be,Te]=_.useState([]),[re,pe]=_.useState([]),[Se,st]=_.useState([]),Nt=r!=null&&r.prodGrp?be.filter(de=>!de.ref_code||de.ref_code.includes(r.prodGrp)):be,lt=de=>{he(De=>({...De,asResnLCd:de,asResnMCd:""}));const tt=re.filter(De=>De.ref_code===de);st(tt)},At=Array.from({length:13},(de,tt)=>{const De=(9+tt).toString().padStart(2,"0");return{value:De,label:`${De}`}}),ot=Array.from({length:6},(de,tt)=>{const De=(tt*10).toString().padStart(2,"0");return{value:De,label:`${De}`}}),[We,Dt]=_.useState(!1),[Et,Rt]=_.useState(!1),[$e,gt]=_.useState(!1),[Fe,rt]=_.useState({show:!1,type:"success",title:"",message:""}),at=(de,tt,De)=>{rt({show:!0,type:de,title:tt,message:De})},[It,ht]=_.useState(!0),Je=v==="byContract"?r!=null&&r.ctrtId?y:[]:A,ve=v==="byContract"?r!=null&&r.ctrtId?N:[]:L;_.useEffect(()=>{Ge(),n&&r?(R("byContract"),xe()):n&&(R("byDate"),_e())},[n,r]),_.useEffect(()=>{n&&A.length===0&&L.length===0&&_e()},[i]),_.useEffect(()=>{r!=null&&r.ctrtId&&(r==null?void 0:r.prodGrp)==="C"?P9(r.ctrtId).then(de=>{if(de.success&&de.data){const tt=(Array.isArray(de.data)?de.data:[de.data]).filter(De=>De.biz_cl||De.BIZ_CL||De.code).map(De=>({CODE:De.biz_cl||De.BIZ_CL||De.code||"",CODE_NM:De.SVC_NM||De.svc_nm||De.name||De.biz_cl||""}));je(tt)}}).catch(()=>je([])):je([])},[r]);const Ge=async()=>{Rt(!0);try{const[de,tt,De,it,St,Lt]=await Promise.all([j9(),I9(),O9(),M9(),L9(),w9()]),Ve=kt=>kt.filter(Oe=>Oe.code&&Oe.code!=="[]"&&Oe.name!=="").map(Oe=>({code:Oe.code,name:Oe.name,ref_code:Oe.ref_code,ref_code2:Oe.ref_code2,ref_code12:Oe.ref_code12}));if(de.success&&de.data&&Q(Ve(de.data)),tt.success&&tt.data&&q(Ve(tt.data)),De.success&&De.data){const kt=Ve(De.data);fe(kt),ce(kt.filter(Oe=>Oe.ref_code12==="Y"))}if(it.success&&it.data){const kt=["0350","0360","0370"],Oe=it.data.filter(Xt=>Xt.code&&Xt.code!=="[]"&&Xt.ref_code==="03"&&!kt.includes(Xt.code)).map(Xt=>({CODE:Xt.code,CODE_NM:Xt.name}));ie(Oe)}if(St.success&&St.data){const kt=St.data.filter(Oe=>Oe.code&&Oe.code!=="[]"&&Oe.name!=="").map(Oe=>({CODE:Oe.code,CODE_NM:Oe.name,ref_code:Oe.ref_code2||""}));Te(kt)}if(Lt.success&&Lt.data){const kt=Lt.data.filter(Oe=>Oe.code&&Oe.code!=="[]"&&Oe.name!=="").map(Oe=>({CODE:Oe.code,CODE_NM:Oe.name,ref_code:Oe.ref_code}));pe(kt)}}catch(de){console.error("Load codes error:",de)}finally{Rt(!1)}},_e=async()=>{if(!n){M([]),k([]);return}Dt(!0);try{const[de,tt]=await Promise.all([Kp(n.custId,void 0,10),Qp(n.custId,void 0,10)]),De=de.success&&de.data?de.data:[],it=tt.success&&tt.data?tt.data:[];M(De),k(it)}catch(de){console.error("Load all history error:",de)}finally{Dt(!1)}},xe=async()=>{if(!n||!r){g([]),C([]);return}Dt(!0);try{const[de,tt]=await Promise.all([Kp(n.custId,r.ctrtId,10),Qp(n.custId,r.ctrtId,10)]);de.success&&de.data&&g(de.data),tt.success&&tt.data&&C(tt.data)}catch(de){console.error("Load history error:",de)}finally{Dt(!1)}},Ue=async()=>{if(!n){at("warning","","  .");return}if(!r){at("warning","",`   .
     .`);return}if(!$.cnslSClCd){at("warning",""," .");return}if(!$.reqCntn.trim()){at("warning",""," .");return}gt(!0);try{const de={CUST_ID:n.custId,CTRT_ID:(r==null?void 0:r.ctrtId)||"",CNSL_MST_CL:$.cnslLClCd,CNSL_MID_CL:$.cnslMClCd,CNSL_SLV_CL:$.cnslSClCd,REQ_CTX:$.reqCntn,POST_ID:(r==null?void 0:r.postId)||"",SAVE_TP:"2",CNSL_RSLT:"5",RCPT_TP:"G1",CUST_REL:"A",PRESS_RCPT_YN:"N",SUBS_TP:"1",CTI_CID:"0",SO_ID:"",MST_SO_ID:""},tt=await Bj(de);tt.success?(at("success","  ","  ."),Y({cnslLClCd:"",cnslMClCd:"",cnslSClCd:"",reqCntn:"",transYn:"N",transDeptCd:""}),setCnslMCodes([]),setCnslSCodes([]),xe(),_e()):at("error","  ",tt.message||"  .")}catch(de){console.error("Register consultation error:",de),at("error","","    .")}finally{gt(!1)}},Pe=async()=>{var de,tt,De,it;if(!n){at("warning","","  .");return}if(S==="subscriber"&&!r){at("warning",""," AS    .");return}if(!me.asClCd){at("warning","","AS .");return}if(!me.asResnLCd){at("warning","","AS() .");return}if(Se.length>0&&!me.asResnMCd){at("warning","","AS() .");return}if(!me.asCntn.trim()){at("warning","","AS  .");return}gt(!0);try{const St=JSON.parse(localStorage.getItem("userInfo")||"{}"),Lt=S==="subscriber",Ve=Lt?null:i.find(rs=>rs.CTRT_STAT_CD==="82"||rs.CTRT_STAT_CD==="80")||i[0],kt=Lt?i.find(rs=>rs.CTRT_ID===(r==null?void 0:r.ctrtId)):Ve,Oe={CUST_ID:n.custId,CTRT_ID:Lt&&(r==null?void 0:r.ctrtId)||"",POST_ID:Lt?(r==null?void 0:r.postId)||"":(Ve==null?void 0:Ve.POST_ID)||"",INST_ADDR:Lt&&(r==null?void 0:r.instAddr)||"",AS_CL_CD:me.asClCd,AS_RESN_L_CD:me.asResnLCd,AS_RESN_M_CD:me.asResnMCd,AS_CNTN:me.asCntn,SCHD_DT:me.schdDt.replace(/-/g,""),SCHD_TM:me.schdHour+me.schdMin,WRKR_ID:St.userId||"",PG_GUBUN:"1",SO_ID:Lt?(r==null?void 0:r.soId)||"":(Ve==null?void 0:Ve.SO_ID)||((tt=(de=St.authSoList)==null?void 0:de[0])==null?void 0:tt.SO_ID)||((it=(De=St.authSoList)==null?void 0:De[0])==null?void 0:it.soId)||St.soId||St.SO_ID||"",MST_SO_ID:"",BLD_CL:(kt==null?void 0:kt.BLD_CL)||"",BLD_NM:(kt==null?void 0:kt.BLD_NM)||"",ADDR_DTL:(kt==null?void 0:kt.ADDR_DTL)||"",ADDR:(kt==null?void 0:kt.INST_ADDR)||(kt==null?void 0:kt.ADDR_FULL)||"",ADDR_ORD:"1"},Xt=await T9(Oe);Xt.success?(at("success","AS  ","AS  ."),he({asClCd:"",asClDtlCd:"",asResnLCd:"",asResnMCd:"",asCntn:"",schdDt:new Date().toISOString().split("T")[0],schdHour:X(),schdMin:"00"}),st([]),xe(),_e()):at("error","AS  ",Xt.message||"AS  .")}catch(St){console.error("Register AS error:",St),at("error","","AS    .")}finally{gt(!1)}};return n?s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50",children:[s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-1 flex gap-1",children:[s.jsxs("button",{onClick:()=>u("consultation"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg transition-colors text-sm ${d==="consultation"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(cv,{className:"w-4 h-4"}),""]}),s.jsxs("button",{onClick:()=>u("as"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg transition-colors text-sm ${d==="as"?"bg-orange-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(xu,{className:"w-4 h-4"}),"AS"]}),s.jsxs("button",{onClick:p,className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg transition-colors text-sm ${d==="re-contract"?"bg-purple-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(uc,{className:"w-4 h-4"}),""]})]}),d==="consultation"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[s.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[s.jsx(cv,{className:"w-5 h-5 text-blue-500"})," "]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("span",{className:"font-medium",children:n.custNm}),s.jsxs("span",{className:"ml-1 text-blue-600 text-xs",children:["(ID: ",ep(n.custId),")"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"targetUnit",value:"customer",checked:W==="customer",onChange:()=>J("customer"),className:"w-3.5 h-3.5 text-blue-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"targetUnit",value:"contract",checked:W==="contract",onChange:()=>J("contract"),className:"w-3.5 h-3.5 text-blue-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]})]})]}),W==="contract"&&r&&s.jsxs("div",{className:"text-xs text-blue-700 pt-1 border-t border-blue-200 space-y-0.5",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{className:"font-medium",children:r.prodNm})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:"ID"}),s.jsx("span",{children:ep(r.ctrtId)})]}),r.instAddr&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.instAddr})]}),r.notrecev&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.notrecev})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsxs("select",{value:$.cnslSClCd,onChange:de=>Re(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:""}),ge.map(de=>s.jsx("option",{value:de.code,children:de.name},de.code))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",readOnly:!0,value:((Ye=U.find(de=>de.code===$.cnslLClCd))==null?void 0:Ye.name)||"",placeholder:" ",className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 text-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",readOnly:!0,value:((mt=H.find(de=>de.code===$.cnslMClCd))==null?void 0:mt.name)||"",placeholder:" ",className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 text-gray-600"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsx("textarea",{value:$.reqCntn,onChange:de=>Y(tt=>({...tt,reqCntn:de.target.value})),placeholder:" .",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"transYn",checked:$.transYn==="Y",onChange:de=>Y(tt=>({...tt,transYn:de.target.checked?"Y":"N"})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"transYn",className:"text-sm text-gray-600",children:"  (/ )"})]}),s.jsx("button",{onClick:Ue,disabled:$e,className:"w-full flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 transition-colors",children:$e?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hb,{className:"w-5 h-5"})," "]})})]}),d==="as"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[s.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[s.jsx(xu,{className:"w-5 h-5 text-orange-500"}),"AS "]}),s.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm text-orange-800",children:[s.jsx("span",{className:"font-medium",children:n.custNm}),s.jsxs("span",{className:"ml-1 text-orange-600 text-xs",children:["(ID: ",ep(n.custId),")"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"asSubscriberType",value:"subscriber",checked:S==="subscriber",onChange:()=>P("subscriber"),className:"w-3.5 h-3.5 text-orange-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"asSubscriberType",value:"nonSubscriber",checked:S==="nonSubscriber",onChange:()=>P("nonSubscriber"),className:"w-3.5 h-3.5 text-orange-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]})]})]}),S==="subscriber"&&r&&s.jsxs("div",{className:"text-xs text-orange-700 pt-1 border-t border-orange-200 space-y-0.5",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{className:"font-medium",children:r.prodNm})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:"ID"}),s.jsx("span",{children:ep(r.ctrtId)})]}),r.instAddr&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.instAddr})]}),r.notrecev&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.notrecev})]})]}),S==="nonSubscriber"&&s.jsx("div",{className:"text-xs text-orange-600 pt-1 border-t border-orange-200",children:" AS -   ."})]}),S==="subscriber"&&!r?s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"AS    "}),s.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"      AS  ."}),s.jsx("button",{onClick:l,className:"mt-2 text-sm text-yellow-700 underline hover:text-yellow-800",children:"   "})]})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"AS *"}),s.jsxs("select",{value:me.asClCd,onChange:de=>he(tt=>({...tt,asClCd:de.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[s.jsx("option",{value:"",children:""}),Z.map(de=>s.jsx("option",{value:de.CODE,children:de.CODE_NM},de.CODE))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"AS() *"}),s.jsxs("select",{value:me.asResnLCd,onChange:de=>lt(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[s.jsx("option",{value:"",children:""}),Nt.map(de=>s.jsx("option",{value:de.CODE,children:de.CODE_NM},de.CODE))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["AS() ",Se.length>0?"*":""]}),s.jsxs("select",{value:me.asResnMCd,onChange:de=>he(tt=>({...tt,asResnMCd:de.target.value})),disabled:!me.asResnLCd||Se.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100",children:[s.jsx("option",{value:"",children:Se.length===0?"":""}),Se.map(de=>s.jsx("option",{value:de.CODE,children:de.CODE_NM},de.CODE))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"AS  *"}),s.jsx("textarea",{value:me.asCntn,onChange:de=>he(tt=>({...tt,asCntn:de.target.value})),placeholder:"AS  .",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",value:me.schdDt,onChange:de=>he(tt=>({...tt,schdDt:de.target.value})),min:new Date().toISOString().split("T")[0],className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),s.jsx("select",{value:me.schdHour,onChange:de=>he(tt=>({...tt,schdHour:de.target.value})),className:"w-20 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:At.map(de=>s.jsx("option",{value:de.value,children:de.label},de.value))}),s.jsx("select",{value:me.schdMin,onChange:de=>he(tt=>({...tt,schdMin:de.target.value})),className:"w-20 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:ot.map(de=>s.jsx("option",{value:de.value,children:de.label},de.value))})]})]}),s.jsx("button",{onClick:Pe,disabled:$e,className:"w-full flex items-center justify-center gap-2 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:bg-gray-400 transition-colors",children:$e?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xu,{className:"w-5 h-5"}),"AS "]})})]})]}),d==="re-contract"&&n&&s.jsx(hK,{onBack:t,showToast:e,selectedCustomer:n,selectedContract:r,contracts:i,onNavigateToBasicInfo:l}),d!=="re-contract"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("button",{onClick:()=>ht(!It),className:"flex items-center gap-2 flex-1 text-left",children:[s.jsx(Ch,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:d==="consultation"?" ":" "}),s.jsxs("span",{className:"text-sm text-gray-500",children:["(",d==="consultation"?Je.length:ve.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[s.jsx("button",{onClick:de=>{de.stopPropagation(),R("byDate"),A.length===0&&L.length===0&&_e()},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${v==="byDate"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:de=>{de.stopPropagation(),R("byContract"),r!=null&&r.ctrtId&&xe()},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${v==="byContract"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]}),s.jsx("button",{onClick:de=>{de.stopPropagation(),_e()},className:"p-1 text-gray-400 hover:text-gray-600",children:s.jsx(uc,{className:`w-4 h-4 ${We?"animate-spin":""}`})}),s.jsx("button",{onClick:()=>ht(!It),children:It?s.jsx(Wr,{className:"w-5 h-5 text-gray-400"}):s.jsx(or,{className:"w-5 h-5 text-gray-400"})})]})]}),It&&s.jsx("div",{className:"px-4 pb-4",children:We?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(jn,{className:"w-6 h-6 animate-spin text-gray-400"})}):v==="byContract"&&!r?s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."}):d==="consultation"?Je.length>0?s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:Je.map((de,tt)=>{var De;return s.jsxs("div",{className:"bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"p-3 cursor-pointer flex items-center justify-between",onClick:()=>T(tt),children:[s.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs flex-1",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:de.CTRT_ID||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:de.START_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:de.CNSL_SLV_CL_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(De=de.CNSL_RSLT)!=null&&De.includes("")?"text-green-600":"text-yellow-600"}`,children:de.CNSL_RSLT||""})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:de.RCPT_NM||"-"})]})]}),K.has(tt)?s.jsx(Wr,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"}):s.jsx(or,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"})]}),K.has(tt)&&s.jsxs("div",{className:"px-3 pb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:de.REQ_CTX||"-"})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:de.PROC_CT||"-"})]})]})]},tt)})}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."}):ve.length>0?s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:ve.map((de,tt)=>{var De,it;return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:de.CTRT_ID||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:de.HOPE_DT||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:de.WRK_CD_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(De=de.WRK_STAT_CD_NM)!=null&&De.includes("")?"text-green-600":(it=de.WRK_STAT_CD_NM)!=null&&it.includes("")?"text-blue-600":"text-gray-800"}`,children:de.WRK_STAT_CD_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-center",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:de.PROD_NM||"-"})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:de.CMPL_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:de.WRK_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:de.WRK_CRR_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-start",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800",children:de.CTRT_ADDR||"-"})]}),s.jsxs("div",{className:"mt-3 cursor-pointer",onClick:()=>I(tt),children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"text-xs text-gray-500",children:""}),se.has(tt)?s.jsx(Wr,{className:"w-3.5 h-3.5 text-gray-400"}):s.jsx(or,{className:"w-3.5 h-3.5 text-gray-400"})]}),se.has(tt)&&s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:de.MEMO||"-"})]})]},tt)})}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."})})]})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:s.jsx(Mr,{className:"w-5 h-5 text-purple-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:" "})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:[" ",s.jsx("span",{className:"font-bold text-orange-600",children:"()"}),"   .",s.jsx("br",{}),"   ."]}),s.jsx("button",{onClick:()=>m(!1),className:"w-full px-4 py-2 text-sm text-white bg-purple-500 rounded-lg hover:bg-purple-600 transition-colors",children:""})]})}),Fe.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${Fe.type==="success"?"bg-green-100":Fe.type==="error"?"bg-red-100":"bg-yellow-100"}`,children:Fe.type==="success"?s.jsx(Vi,{className:"w-5 h-5 text-green-500"}):Fe.type==="error"?s.jsx(Lo,{className:"w-5 h-5 text-red-500"}):s.jsx(Mr,{className:"w-5 h-5 text-yellow-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:Fe.title})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-5",children:Fe.message}),s.jsx("button",{onClick:()=>rt(de=>({...de,show:!1})),className:`w-full px-4 py-2 text-sm text-white rounded-lg transition-colors ${Fe.type==="success"?"bg-green-500 hover:bg-green-600":Fe.type==="error"?"bg-red-500 hover:bg-red-600":"bg-yellow-500 hover:bg-yellow-600"}`,children:""})]})}),F&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(Ch,{className:"w-5 h-5 text-blue-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:"  "})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:["       .",s.jsx("br",{}),"    ?"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>ee(!1),className:"flex-1 px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:""}),s.jsx("button",{onClick:()=>{ee(!1),l()},className:"flex-1 px-4 py-2 text-sm text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors",children:" "})]})]})})]}):s.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx(Mr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"  "}),s.jsxs("p",{className:"text-gray-500 mb-4",children:["     ",s.jsx("br",{}),"/AS   ."]}),s.jsxs("button",{onClick:l,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[s.jsx(db,{className:"w-4 h-4 inline mr-2"})," "]})]})})},mK=({onBack:t,showToast:e})=>{const[n,r]=_.useState({custNm:"",juminNo1:"",juminNo2:"",custTpCd:"01",telNo:"",hpNo:"",addr:""}),[i,l]=_.useState([]),[c,d]=_.useState(!1),[u,f]=_.useState(!1),[m,p]=_.useState(!1),[y,g]=_.useState(!1),[N,C]=_.useState({});_.useEffect(()=>{v()},[]);const v=async()=>{d(!0);try{const V=await A9();V.success&&V.data&&l(V.data)}catch(V){console.error("Load customer type codes error:",V)}finally{d(!1)}},R=(V,G)=>{r(W=>({...W,[V]:G})),N[V]&&C(W=>({...W,[V]:""})),(V==="juminNo1"||V==="juminNo2")&&g(!1)},A=()=>{const V={};return n.custNm.trim()?n.custNm.length<2&&(V.custNm=" 2  ."):V.custNm=" .",n.custTpCd!=="04"&&((!n.juminNo1||n.juminNo1.length!==6)&&(V.juminNo1="  6 ."),(!n.juminNo2||n.juminNo2.length!==7)&&(V.juminNo2="  7 .")),n.hpNo&&n.hpNo.length<10&&(V.hpNo="   ."),C(V),Object.keys(V).length===0},M=async()=>{if(n.custTpCd==="04"){g(!0),e==null||e("    .","info");return}if(!n.custNm||!n.juminNo1||!n.juminNo2){e==null||e("  .","warning");return}p(!0);try{await new Promise(V=>setTimeout(V,1500)),g(!0),e==null||e(" .","success")}catch(V){console.error("Verify error:",V),e==null||e(" .","error"),g(!1)}finally{p(!1)}},L=async()=>{if(!A()){e==null||e("  .","warning");return}if(n.custTpCd!=="04"&&!y){e==null||e("  .","warning");return}f(!0);try{const V={CUST_NM:n.custNm,JUMIN_NO:n.juminNo1+n.juminNo2,CUST_TP_CD:n.custTpCd,TEL_NO:n.telNo||void 0,HP_NO:n.hpNo||void 0,ADDR:n.addr||void 0},G=await E9(V);G.success?(e==null||e(" .","success"),r({custNm:"",juminNo1:"",juminNo2:"",custTpCd:"01",telNo:"",hpNo:"",addr:""}),g(!1)):e==null||e(G.message||"  .","error")}catch(V){console.error("Create customer error:",V),e==null||e("    .","error")}finally{f(!1)}},k=()=>{r({custNm:"",juminNo1:"",juminNo2:"",custTpCd:"01",telNo:"",hpNo:"",addr:""}),C({}),g(!1)};return s.jsx("div",{className:"h-full overflow-y-auto bg-gray-50",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lw,{className:"w-6 h-6 text-teal-500"}),s.jsx("h2",{className:"text-lg font-medium text-gray-800",children:" "})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"  .     ."})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:(i.length>0?i:[{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""}]).map(V=>s.jsx("button",{onClick:()=>{R("custTpCd",V.CODE),g(!1)},className:`py-2 px-3 text-sm rounded-lg border transition-colors ${n.custTpCd===V.CODE?"bg-teal-500 text-white border-teal-500":"bg-white text-gray-600 border-gray-300 hover:border-gray-400"}`,children:V.CODE_NM},V.CODE))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:n.custNm,onChange:V=>R("custNm",V.target.value),placeholder:" ",className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${N.custNm?"border-red-300":"border-gray-300"}`})]}),N.custNm&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:N.custNm})]}),n.custTpCd!=="04"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:n.juminNo1,onChange:V=>R("juminNo1",V.target.value.replace(/[^0-9]/g,"")),placeholder:" 6",maxLength:6,className:`flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${N.juminNo1?"border-red-300":"border-gray-300"}`}),s.jsx("span",{className:"text-gray-400",children:"-"}),s.jsx("input",{type:"password",value:n.juminNo2,onChange:V=>R("juminNo2",V.target.value.replace(/[^0-9]/g,"")),placeholder:" 7",maxLength:7,className:`flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${N.juminNo2?"border-red-300":"border-gray-300"}`}),s.jsx("button",{onClick:M,disabled:m||y,className:`px-4 py-2 rounded-lg transition-colors whitespace-nowrap ${y?"bg-green-100 text-green-700":"bg-teal-500 text-white hover:bg-teal-600 disabled:bg-gray-400"}`,children:m?s.jsx(jn,{className:"w-5 h-5 animate-spin"}):y?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(dc,{className:"w-4 h-4"}),""]}):""})]}),(N.juminNo1||N.juminNo2)&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:N.juminNo1||N.juminNo2})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx(xy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:n.hpNo,onChange:V=>R("hpNo",V.target.value.replace(/[^0-9]/g,"")),placeholder:"01012345678",maxLength:11,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${N.hpNo?"border-red-300":"border-gray-300"}`})]}),N.hpNo&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:N.hpNo})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx(xy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:n.telNo,onChange:V=>R("telNo",V.target.value.replace(/[^0-9]/g,"")),placeholder:"0212345678",maxLength:11,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx(rd,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("textarea",{value:n.addr,onChange:V=>R("addr",V.target.value),placeholder:" ",rows:2,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none"})]})]}),n.custTpCd!=="04"&&!y&&s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mr,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-700",children:["    .",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"   ."})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsxs("button",{onClick:k,className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(bi,{className:"w-5 h-5"}),""]}),s.jsx("button",{onClick:L,disabled:u||n.custTpCd!=="04"&&!y,className:"flex-1 flex items-center justify-center gap-2 py-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600 disabled:bg-gray-400 transition-colors",children:u?s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fw,{className:"w-5 h-5"})," "]})})]})]})]})})},gK=({onNavigateToMenu:t,showToast:e})=>{const[n,r]=_.useState("basic-info"),[i,l]=_.useState(null),[c,d]=_.useState(null),[u,f]=_.useState("phone"),[m,p]=_.useState(""),[y,g]=_.useState(!1),[N,C]=_.useState(null),[v,R]=_.useState(""),[A,M]=_.useState(!1),[L,k]=_.useState([]),[V,G]=_.useState([]),[W,j]=_.useState([]),[S,P]=_.useState(""),[F,ee]=_.useState("consultation"),J=[{id:"basic-info",title:"",description:"    "},{id:"info-change",title:"",description:"/ "},{id:"consultation-as",title:"/AS/",description:", AS, "}],$=Q=>{r(Q)},Y=Q=>{k([]),G([]),j([]),P(""),l(null),setTimeout(()=>{l(Q),d(null)},0)},K=()=>{l(null),d(null),k([]),G([]),j([]),P("")},w=(Q,H,q,ae)=>{P(Q),k(H),G(q),j(ae)},se=Q=>{d(Q)},oe=async()=>{if(i)try{const Q=await v_(i.CUST_ID);if(Q.success&&Q.data&&(k(Q.data),P(i.CUST_ID),c)){const H=Q.data.find(q=>q.CTRT_ID===c.ctrtId);H&&d({ctrtId:H.CTRT_ID,prodNm:H.PROD_NM,instAddr:H.INST_ADDR,streetAddr:H.STREET_ADDR_FULL,instlLoc:H.INSTL_LOC,postId:H.POST_ID,notrecev:H.NOTRECEV,soId:H.SO_ID,prodGrp:H.PROD_GRP})}}catch(Q){console.error("Failed to refresh contracts after address change:",Q)}},T=Q=>{r(Q)},I=Q=>{f("payment"),p(Q),r("info-change")},U=()=>{switch(n){case"info-change":return s.jsx(cK,{onBack:t,showToast:e,selectedCustomer:i?{custId:i.CUST_ID,custNm:i.CUST_NM,telNo:i.TEL_NO||"",hpNo:i.HP_NO||"",phoneList:i.PHONE_LIST}:null,selectedContract:c,initialSection:u,initialPymAcntId:m,onPaymentChangeStart:()=>g(!0),onPaymentChangeEnd:()=>{g(!1),C(null),R(""),M(!1)},savedPaymentForm:N,savedPymAcntId:v,savedIsVerified:A,onPaymentFormChange:(Q,H,q)=>{C(Q),R(H),M(q)},onAddressChanged:oe});case"consultation-as":return s.jsx(fK,{onBack:t,showToast:e,selectedCustomer:i?{custId:i.CUST_ID,custNm:i.CUST_NM,telNo:i.TEL_NO||i.HP_NO||""}:null,selectedContract:c,contracts:L,onNavigateToBasicInfo:()=>T("basic-info"),initialTab:F});case"customer-create":return s.jsx(mK,{onBack:t,showToast:e});default:return null}};return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 z-40",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsx(mN,{tabs:J,activeTab:n,onTabChange:$})}),y&&n!=="info-change"&&s.jsx("button",{onClick:()=>{f("payment"),r("info-change")},className:"flex-shrink-0 mr-2 px-3 py-1.5 text-sm bg-orange-500 text-white rounded-lg hover:bg-orange-600 flex items-center gap-1",children:""})]})}),s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 p-3",children:s.jsx(uK,{onCustomerSelect:Y,onCustomerClear:K,showToast:e,selectedCustomer:i})}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsx("div",{className:`h-full ${n==="basic-info"?"":"hidden"}`,children:s.jsx(oK,{onBack:t,showToast:e,onContractSelect:se,onNavigateToPaymentChange:I,onNavigateToConsultationAS:Q=>{ee(Q),r("consultation-as")},onNavigateToAddressChange:()=>{f("address"),r("info-change")},onNavigateToReContract:()=>{ee("re-contract"),r("consultation-as")},selectedCustomer:i,savedContract:c,cachedContracts:L,cachedConsultationHistory:V,cachedWorkHistory:W,cachedDataCustId:S,onDataLoaded:w,paymentChangeInProgress:y,onCancelPaymentChange:()=>{g(!1),C(null),R(""),M(!1)},currentWorkingPymAcntId:v})}),n!=="basic-info"&&U()]})]})},xK=!0,T_="[EQUIPMENT-MGT-DEBUG]",E_=[],pK=()=>{const t=new Date;return t.toLocaleTimeString("ko-KR",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+String(t.getMilliseconds()).padStart(3,"0")},ey=(t,e,n)=>{var l;const r={timestamp:pK(),component:t,action:e,...n};E_.push(r);const i=n!=null&&n.error?"color: #ff4444; font-weight: bold;":n!=null&&n.response?"color: #44aa44; font-weight: bold;":"color: #4488ff; font-weight: bold;";if(console.log(`%c${T_} [${r.timestamp}] ${t} - ${e}`,i),n!=null&&n.api&&console.log(`  API: ${n.api}`),n!=null&&n.params&&console.log("  Params:",n.params),(n==null?void 0:n.response)!==void 0){const c=JSON.stringify(n.response);c.length>500?(console.log("  Response (preview):",c.slice(0,500)+"..."),console.log("  Response (full):",n.response)):console.log("  Response:",n.response),Array.isArray(n.response)&&n.response.length===0&&console.warn("  WARNING: Empty array returned!"),(l=n.response)!=null&&l.data&&Array.isArray(n.response.data)&&n.response.data.length===0&&console.warn("  WARNING: response.data is empty array!")}n!=null&&n.error&&console.error("  Error:",n.error),n!=null&&n.duration&&console.log(`  Duration: ${n.duration}ms`)},pi=async(t,e,n,r)=>{const i=Date.now();ey(t,`API_CALL_START: ${e}`,{api:e,params:r});try{const l=await n(),c=Date.now()-i;return ey(t,`API_CALL_SUCCESS: ${e}`,{api:e,response:l,duration:c}),l}catch(l){const c=Date.now()-i;throw ey(t,`API_CALL_FAILED: ${e}`,{api:e,error:l,duration:c}),l}},_K=()=>[...E_],CK=()=>{E_.length=0,console.log(`${T_} Logs cleared`)},yK=()=>{console.log(`
`+"=".repeat(70)),console.log(`${T_} API CALL SUMMARY`),console.log("=".repeat(70));const t=E_.filter(i=>i.api),e=t.filter(i=>i.response&&!i.error),n=t.filter(i=>i.error),r=t.filter(i=>{var l;return!!(Array.isArray(i.response)&&i.response.length===0||(l=i.response)!=null&&l.data&&Array.isArray(i.response.data)&&i.response.data.length===0)});console.log(`Total API calls: ${t.length}`),console.log(`Success: ${e.length}`),console.log(`Failed: ${n.length}`),console.log(`Empty responses: ${r.length}`),r.length>0&&(console.log(`
APIs returning empty:`),r.forEach(i=>{console.log(`  - ${i.api} (${i.component})`)})),n.length>0&&(console.log(`
Failed APIs:`),n.forEach(i=>{var l;console.log(`  - ${i.api}: ${((l=i.error)==null?void 0:l.message)||i.error}`)})),console.log("=".repeat(70)+`
`)};typeof window<"u"&&(window.eqtDebug={getLogs:_K,clear:CK,summary:yK,enabled:xK},console.log(`${T_} Debug utility loaded. Use window.eqtDebug.summary() to see summary.`));const xT=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}.${t.slice(4,6)}.${t.slice(6,8)}`:t.includes("-")?t.replace(/-/g,"."):t:"",bK=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",NK=typeof window<"u"&&window.location.hostname!=="localhost"?`${window.location.protocol}//${window.location.hostname}:8080/api`:"http://52.63.232.141:8080/api",SK=async()=>{try{const t=localStorage.getItem("branchList");if(t){const r=JSON.parse(t);if(Array.isArray(r)&&r.length>0)return console.log(" [] branchList   :",r.length,""),r}const e=localStorage.getItem("userInfo");if(e){const r=JSON.parse(e);if(r.authSoList&&Array.isArray(r.authSoList)&&r.authSoList.length>0)return console.log(" [] authSoList   :",r.authSoList.length,""),r.authSoList}console.log(" [] API    ...");const n=await fetch(`${NK}/statistics/equipment/getAuthSoList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({USR_ID:e?JSON.parse(e).userId:""})});if(n.ok){const r=await n.json();if(Array.isArray(r)&&r.length>0)return console.log(" [] API   :",r.length,""),localStorage.setItem("branchList",JSON.stringify(r)),r}return console.log(" []    -   "),[]}catch(t){return console.error(" []    :",t),[]}},vK=({onBack:t,showToast:e})=>{const r=(()=>{try{const ce=localStorage.getItem("userInfo");return ce?JSON.parse(ce):null}catch{return null}})(),i=()=>{const ce=new Date;return ce.setDate(ce.getDate()-7),ce.toISOString().slice(0,10).replace(/-/g,"")},[l,c]=_.useState(i()),[d,u]=_.useState(new Date().toISOString().slice(0,10).replace(/-/g,"")),[f,m]=_.useState((r==null?void 0:r.soId)||""),[p,y]=_.useState([]),[g,N]=_.useState(null),[C,v]=_.useState([]),[R,A]=_.useState([]);_.useEffect(()=>{(async()=>{const Re=await SK();A(Re)})()},[]),_.useEffect(()=>{y([]),N(null),v([])},[f]);const[M,L]=_.useState(!1),[k,V]=_.useState(!1),[G,W]=_.useState(!1),[j,S]=_.useState(null),[P,F]=_.useState("simple"),[ee,J]=_.useState(new Set),$=_.useRef(null),Y=ce=>ce.length===8?`${ce.slice(0,4)}-${ce.slice(4,6)}-${ce.slice(6,8)}`:ce,K=ce=>ce.replace(/-/g,""),w=async()=>{L(!0);try{let ce=[];if(!f&&R.length>0){console.log("[]     - ",R.length," ");const Re=R.map(me=>{const he={FROM_OUT_REQ_DT:l,TO_OUT_REQ_DT:d,SO_ID:me.SO_ID,PROC_STAT:"%"};return bv(he).catch(()=>[])});ce=(await Promise.all(Re)).flat(),console.log("[]     - ",ce.length,"")}else{const Re={FROM_OUT_REQ_DT:l,TO_OUT_REQ_DT:d,SO_ID:f||(r==null?void 0:r.soId)||"209",PROC_STAT:"%"};ce=await pi("EquipmentAssignment","getEquipmentOutList",()=>bv(Re),Re)||[]}if(ce.sort((Re,X)=>(Re.SO_NM||"").localeCompare(X.SO_NM||"")),ce.length===0)y([]),N(null),v([]),e==null||e("   .","info");else{const Re=await Promise.all(ce.map(async X=>{try{const me=await Dv({OUT_REQ_NO:X.OUT_REQ_NO}),he=Array.isArray(me)?me:me.output1||[];if(he.length===0)return{...X,_receiveStatus:"none",_receivedCount:0,_totalCount:0};const Z=he.filter(je=>je.PROC_YN==="Y").length,ie=he.length;let te="none";return Z===ie?te="received":Z>0&&(te="partial"),{...X,_receiveStatus:te,_receivedCount:Z,_totalCount:ie}}catch{return{...X,_receiveStatus:"none",_receivedCount:0,_totalCount:0}}}));y(Re),N(null),v([]),e==null||e(`${Re.length}   .`,"success")}}catch(ce){console.error(" []  :",ce),e==null||e(ce.message||"  .","error")}finally{L(!1)}},se=ce=>{J(Re=>{const X=new Set(Array.from(Re));return X.has(ce)?X.delete(ce):X.add(ce),X})},oe=C.reduce((ce,Re,X)=>{const me=Re.ITEM_MID_CD_NM||"";return ce[me]||(ce[me]=[]),ce[me].push({...Re,_idx:X}),ce},{});Object.keys(oe).forEach(ce=>{oe[ce].sort((Re,X)=>{const me=Re.EQT_CL_NM||"",he=X.EQT_CL_NM||"";return me.localeCompare(he)})});const T=Object.keys(oe).sort(),I=async ce=>{N(ce),V(!0);try{const Re={OUT_REQ_NO:ce.OUT_REQ_NO},X=await pi("EquipmentAssignment","getOutEquipmentTargetList",()=>Dv(Re),Re),me=Array.isArray(X)?X:X.output1||[];v(me.map(he=>({...he,CHK:!1}))),me.length===0&&(e==null||e("   .","info")),setTimeout(()=>{var he;(he=$.current)==null||he.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(Re){console.error(" []    :",Re),e==null||e(Re.message||"   .","error"),v([])}finally{V(!1)}},U=async()=>{if(console.log("[]  "),console.log("[] selectedEqtOut:",g),!g){e==null||e("  .","warning");return}const ce=C.filter(X=>X.CHK&&X.PROC_YN!=="Y");if(console.log("[]  :",ce.length,""),console.log("[]   :",ce),ce.length===0){e==null||e("   .","warning");return}const Re=ce;console.log("[]  :",Re.length,"");try{const X={OUT_REQ_NO:g.OUT_REQ_NO,SO_ID:g.SO_ID||(r==null?void 0:r.soId)||"",WRKR_ID:(r==null?void 0:r.userId)||"",CARRIER_ID:g.CRR_ID||(r==null?void 0:r.crrId)||"",CRR_ID:g.CRR_ID||(r==null?void 0:r.crrId)||"",equipmentList:Re.map(me=>({EQT_NO:me.EQT_NO||"",EQT_SERNO:me.EQT_SERNO||"",OUT_REQ_NO:me.OUT_REQ_NO||"",PROC_YN:"Y",CHG_UID:(r==null?void 0:r.userId)||""}))};console.log("[] API  :",X),await pi("EquipmentAssignment","addEquipmentQuota",()=>y4(X),X),e==null||e(`${Re.length}   .`,"success"),await w()}catch(X){console.error(" []  :",X),e==null||e(X.message||" .","error")}},Q=ce=>{v(C.map(Re=>{const X=Re.PROC_YN==="Y",me=Re.EQT_SERNO&&Re.EQT_SERNO.trim()!=="";return!X&&me?{...Re,CHK:ce}:Re}))},H=(ce,Re)=>{const X=[...C];X[ce].CHK=Re,v(X)},q=(ce,Re)=>{v(C.map(X=>{if((X.ITEM_MID_CD_NM||"")!==ce)return X;const he=X.PROC_YN==="Y",Z=X.EQT_SERNO&&X.EQT_SERNO.trim()!=="";return!he&&Z?{...X,CHK:Re}:X}))},ae=ce=>ce&&ce.length>=8?`${ce.slice(0,4)}-${ce.slice(4,6)}-${ce.slice(6,8)}`:ce||"-",fe=ce=>{if(!ce._receiveStatus)return{label:"-",color:"bg-gray-400 text-white"};switch(ce._receiveStatus){case"received":return{label:"",color:"bg-green-500 text-white"};case"partial":return{label:`(${ce._receivedCount}/${ce._totalCount})`,color:"bg-yellow-500 text-white"};case"none":return{label:"",color:"bg-red-500 text-white"};default:return{label:"-",color:"bg-gray-400 text-white"}}},ge=ce=>{var Re;return ce?ce.includes(":")||ce.includes("-")?ce:((Re=ce.match(/.{1,2}/g))==null?void 0:Re.join(":"))||ce:"-"};return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[s.jsxs("div",{className:"relative flex-1 min-w-0",children:[s.jsx("input",{type:"date",value:Y(l),onChange:ce=>c(K(ce.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),s.jsxs("div",{className:"flex items-center px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white pointer-events-none",children:[s.jsx("span",{className:"flex-1",children:xT(l)}),s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]}),s.jsx("span",{className:"text-gray-400 flex-shrink-0",children:"~"}),s.jsxs("div",{className:"relative flex-1 min-w-0",children:[s.jsx("input",{type:"date",value:Y(d),onChange:ce=>u(K(ce.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),s.jsxs("div",{className:"flex items-center px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white pointer-events-none",children:[s.jsx("span",{className:"flex-1",children:xT(d)}),s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("select",{value:f,onChange:ce=>m(ce.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:""}),R.map(ce=>s.jsx("option",{value:ce.SO_ID,children:ce.SO_NM},ce.SO_ID))]})]}),s.jsx("button",{onClick:w,disabled:M,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2.5 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation flex items-center justify-center gap-2",style:{WebkitTapHighlightColor:"transparent"},children:M?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):""})]})}),p.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"mb-2",children:s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" (  )"})}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200 flex items-center text-[11px] font-semibold text-gray-600",children:[s.jsx("span",{className:"w-16 text-center",children:""}),s.jsx("span",{className:"w-20 text-center",children:""}),s.jsx("span",{className:"flex-1 text-center",children:""}),s.jsx("span",{className:"w-20 text-center flex-shrink-0",children:""})]}),s.jsx("div",{children:(()=>{const ce=p.reduce((X,me)=>{const he=me.SO_NM||"";return X[he]||(X[he]=[]),X[he].push(me),X},{});return Object.keys(ce).sort().map(X=>s.jsxs("div",{children:[s.jsxs("div",{className:"bg-gray-100 px-3 py-2 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>se(X),children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:X}),s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",ce[X].length,")"]})]}),ee.has(X)?s.jsx(or,{className:"w-4 h-4 text-gray-500"}):s.jsx(Wr,{className:"w-4 h-4 text-gray-500"})]}),!ee.has(X)&&ce[X].map((me,he)=>s.jsx("div",{onClick:()=>I(me),className:`px-3 py-2 border-b border-gray-50 cursor-pointer transition-colors ${(g==null?void 0:g.OUT_REQ_NO)===me.OUT_REQ_NO?"bg-blue-50 border-l-4 border-l-blue-500":"hover:bg-blue-50/50"}`,children:s.jsxs("div",{className:"flex items-center text-[11px]",children:[s.jsx("span",{className:"w-16 text-center text-gray-900",children:ae(me.OUT_DTTM||me.OUT_REQ_DT)}),s.jsx("span",{className:"w-20 text-center text-gray-600 truncate",children:me.CRR_NM||"-"}),s.jsx("span",{className:"flex-1 text-center text-gray-700 font-mono",children:me.OUT_REQ_NO}),s.jsx("span",{className:`w-20 text-center px-1.5 py-0.5 rounded text-[10px] font-bold whitespace-nowrap flex-shrink-0 ${fe(me).color}`,children:fe(me).label})]})},he))]},X))})()})]})]}),g&&s.jsxs("div",{ref:$,children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"  "})}),k?s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin h-6 w-6 text-blue-500 mr-2",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-sm text-gray-600",children:"   ..."})]}):C.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:ce=>Q(ce.target.checked),checked:C.filter(ce=>ce.PROC_YN!=="Y").length>0&&C.filter(ce=>ce.PROC_YN!=="Y").every(ce=>ce.CHK),disabled:C.filter(ce=>ce.PROC_YN!=="Y").length===0,className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[C.length," (: ",C.filter(ce=>ce.CHK&&ce.PROC_YN!=="Y").length,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>F("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${P==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>F("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${P==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:T.map(ce=>{const Re=oe[ce],X=ee.has(ce),me=Re.length,he=Re.filter(te=>te.PROC_YN!=="Y"&&te.EQT_SERNO&&te.EQT_SERNO.trim()!==""),Z=he.filter(te=>te.CHK).length,ie=he.length>0&&Z===he.length;return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>se(ce),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:ie,onClick:te=>te.stopPropagation(),onChange:te=>q(ce,te.target.checked),className:"rounded w-4 h-4",disabled:he.length===0}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:ce}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[me," ",Z>0&&`(${Z})`]})]}),X?s.jsx(or,{className:"w-3 h-3 text-gray-500"}):s.jsx(Wr,{className:"w-3 h-3 text-gray-500"})]}),!X&&s.jsx("div",{className:"space-y-2",children:Re.map(te=>{const je=te._idx,be=te.PROC_YN==="Y",Te=te.EQT_SERNO&&te.EQT_SERNO.trim()!=="",re=!be&&Te;return s.jsxs("div",{onClick:()=>re&&H(je,!te.CHK),className:`p-3 rounded-lg border-2 transition-all ${re?"cursor-pointer":"cursor-not-allowed opacity-70"} ${te.CHK?"bg-blue-50 border-blue-400":be?"bg-green-50/50 border-green-200":Te?"bg-gray-50 border-gray-200 hover:border-gray-300":"bg-gray-100/50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:be?!0:te.CHK||!1,onChange:pe=>{pe.stopPropagation(),re&&H(je,pe.target.checked)},disabled:!re,className:`w-5 h-5 rounded focus:ring-blue-500 mt-0.5 ${re?"text-blue-500":"text-gray-300 cursor-not-allowed"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 truncate",children:te.EQT_CL_NM||te.ITEM_MID_CD_NM||"()"}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${be?"bg-green-100 text-green-700":Te?"bg-blue-100 text-blue-700":"bg-red-100 text-red-600"}`,children:be?"":Te?"":""})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:`text-sm ${Te?"text-gray-600":"text-gray-400 italic"}`,children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),te.EQT_SERNO||"( )"]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${te.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":te.EQT_USE_ARR_YN==="A"?"bg-purple-100 text-purple-700":te.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:te.EQT_USE_ARR_YN==="Y"?"":te.EQT_USE_ARR_YN==="A"?"":te.EQT_USE_ARR_YN==="N"?"":"N/A"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),ge(te.MAC_ADDRESS||"")]}),s.jsx("span",{className:"text-sm text-gray-600",children:bK(te.EQT_USE_END_DT||"")})]})]})]}),P==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:te.ITEM_MODEL||te.MODEL_NM||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:(g==null?void 0:g.SO_NM)||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.EQT_STAT_CD_NM||(Te?"-":"")})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:te.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.EQT_LOC_NM||te.EQT_LOC_TP_NM||(Te?"-":"()")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.OLD_EQT_LOC_NM||"-"})]})]})]},je)})})]},ce)})}),!1]}),s.jsx("div",{className:"h-20"}),s.jsx("div",{className:"fixed bottom-[56px] left-0 right-0 p-3 z-40",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsxs("button",{onClick:U,disabled:!C.some(ce=>ce.CHK&&ce.PROC_YN!=="Y"),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-3 px-6 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation disabled:cursor-not-allowed",style:{WebkitTapHighlightColor:"transparent"},children:["   (",C.filter(ce=>ce.CHK&&ce.PROC_YN!=="Y").length,")"]})})]}):s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"  "})]})})]}),p.length===0&&!M&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"     "})]})}),s.jsx(pa,{isOpen:G,onClose:()=>W(!1),title:"  ",size:"md",children:j&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:" "}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:j.ITEM_MAX_CD_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:j.EQT_CL_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:j.ITEM_MID_CD||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:j.ITEM_MID_CD_NM||"-"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-700 mb-2",children:"  "}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"font-mono font-medium",children:j.EQT_NO||"-"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"font-mono font-medium",children:j.EQT_SERNO||"-"})]}),j.MAC_ADDRESS&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"MAC :"}),s.jsx("span",{className:"font-mono font-medium",children:j.MAC_ADDRESS})]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:" "}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500",children:""}),s.jsx("div",{className:"text-lg font-bold text-gray-800",children:j.OUT_REQ_QTY||0})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500",children:""}),s.jsx("div",{className:"text-lg font-bold text-green-600",children:j.OUT_QTY||0})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500",children:""}),s.jsx("div",{className:"text-lg font-bold text-blue-600",children:j.IBGO_QTY||0})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-yellow-700 mb-2",children:" "}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:`px-2 py-1 rounded font-medium ${j.PROC_YN==="Y"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:j.PROC_YN==="Y"?"":""})]}),j.REMARK&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("p",{className:"mt-1 text-gray-700 bg-white p-2 rounded",children:j.REMARK})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded font-medium text-sm transition-colors",children:""})})]})})]})},DK={10:"",11:"()",20:"",35:"",50:"",60:"",70:"",71:"",72:"",73:"AS",74:"",75:"",80:"",81:"",82:"",83:"",84:"",90:""},RK={1:"SO()",2:"",3:"",4:""},pT=t=>DK[t]||t,_T=t=>RK[t]||t,TK=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",EK=typeof window<"u"?(()=>{const t=window.location.hostname;return t==="localhost"||t==="127.0.0.1"?"http://52.63.232.141:8080/api":"/api"})():"/api",jK=async()=>{try{const t=localStorage.getItem("branchList");if(t){const r=JSON.parse(t);if(Array.isArray(r)&&r.length>0)return console.log(" [] branchList   :",r.length,""),r}const e=localStorage.getItem("userInfo");if(e){const r=JSON.parse(e);if(r.authSoList&&Array.isArray(r.authSoList)&&r.authSoList.length>0)return console.log(" [] authSoList   :",r.authSoList.length,""),r.authSoList}console.log(" [] API    ...");const n=await fetch(`${EK}/statistics/equipment/getAuthSoList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({USR_ID:e?JSON.parse(e).userId:""})});if(n.ok){const r=await n.json();if(Array.isArray(r)&&r.length>0)return console.log(" [] API   :",r.length,""),localStorage.setItem("branchList",JSON.stringify(r)),r}return console.log(" []    -   "),[]}catch(t){return console.error(" []    :",t),[]}},IK=[{COMMON_CD:"",COMMON_CD_NM:""},{COMMON_CD:"02",COMMON_CD_NM:""},{COMMON_CD:"03",COMMON_CD_NM:"CVT"},{COMMON_CD:"04",COMMON_CD_NM:"STB"},{COMMON_CD:"05",COMMON_CD_NM:"Smart card"},{COMMON_CD:"06",COMMON_CD_NM:""},{COMMON_CD:"07",COMMON_CD_NM:"Cable Card"},{COMMON_CD:"08",COMMON_CD_NM:"IP"},{COMMON_CD:"10",COMMON_CD_NM:"(AP)"},{COMMON_CD:"23",COMMON_CD_NM:"OTT_STB()"}],OK=({onBack:t,showToast:e})=>{var et,Qt,ut,qt,jt;const r=(()=>{try{const ue=localStorage.getItem("userInfo");return ue?JSON.parse(ue):null}catch{return null}})(),[i,l]=_.useState(""),[c,d]=_.useState(""),[u,f]=_.useState(""),[m,p]=_.useState([]),[y,g]=_.useState(!1),[N,C]=_.useState(""),[v,R]=_.useState(!1),[A,M]=_.useState("OWNED"),[L,k]=_.useState(!1),V=()=>{let ue=0;return i&&ue++,c&&ue++,u&&ue++,N&&ue++,ue},[G,W]=_.useState(!1),[j,S]=_.useState([]),[P,F]=_.useState([]),[ee,J]=_.useState([]),[$]=_.useState(IK);_.useEffect(()=>{(async()=>{let Ce=await jK();if(r!=null&&r.soId&&!Ce.find(Le=>Le.SO_ID===r.soId)){const Le=r.soNm||(r.soId==="100"?"":`(${r.soId})`);Ce=[{SO_ID:r.soId,SO_NM:Le},...Ce],console.log("[]  soId :",r.soId,Le)}J(Ce)})()},[r==null?void 0:r.soId]),_.useEffect(()=>{if(!c){p([]),f("");return}(async()=>{g(!0);try{console.log("[]  API :",c);const Ce=await g5({ITEM_MID_CD:c});console.log("[]  API :",Ce);const Le=Array.isArray(Ce)?Ce:(Ce==null?void 0:Ce.data)||[];if(Array.isArray(Le)&&Le.length>0){const Ie=Le.map(Ze=>({code:Ze.COMMON_CD||Ze.EQT_CL_CD||"",name:Ze.COMMON_CD_NM||Ze.EQT_CL_NM||""})).filter(Ze=>Ze.code&&Ze.name).sort((Ze,Ee)=>Ze.name.localeCompare(Ee.name));console.log("[]  :",Ie.length,""),p(Ie)}else p([])}catch(Ce){console.error("[]   :",Ce),p([])}finally{g(!1)}})(),f("")},[c]);const[Y,K]=_.useState(!1),[w,se]=_.useState(!1),[oe,T]=_.useState(!1),[I,U]=_.useState({current:0,total:0,item:"",action:""}),[Q,H]=_.useState(!1),[q,ae]=_.useState(null),[fe,ge]=_.useState(""),[ce,Re]=_.useState(""),[X,me]=_.useState(""),[he,Z]=_.useState(!1);_.useEffect(()=>{F([]),ae(null)},[A]);const[ie,te]=_.useState("simple"),[je,be]=_.useState(new Set),[Te,re]=_.useState(!0),[pe,Se]=_.useState(!0),[st,Nt]=_.useState(!0),At=A!=="OWNED"?P:P.filter(ue=>{const Ce=ue._category==="RETURN_REQUESTED"||ue._hasReturnRequest,Le=ue._category==="INSPECTION_WAITING"||ue.EQT_USE_ARR_YN==="A",Ie=!Ce&&!Le;return!(Ce&&!st||Le&&!pe||Ie&&!Te)}),[ot,We]=_.useState(null),[Dt,Et]=_.useState(!1),[Rt,$e]=_.useState(!1),[gt,Fe]=_.useState([]),[rt,at]=_.useState(!1),[It,ht]=_.useState([]);_.useEffect(()=>{Je()},[]),_.useEffect(()=>{if(N==="705KVQS022868"&&(r!=null&&r.userId)){console.log(" [] S/N    ...");const ue=setTimeout(()=>{ve()},500);return()=>clearTimeout(ue)}},[r==null?void 0:r.userId]);const Je=async()=>{console.log(" []  ")},ve=async()=>{if(console.log("=====   ====="),console.log("[DEBUG] userInfo:",r),console.log("[DEBUG] userInfo.soId:",r==null?void 0:r.soId),console.log("[DEBUG] selectedSoId (state):",i),console.log("[DEBUG] localStorage userInfo:",localStorage.getItem("userInfo")),!(r!=null&&r.userId)){e==null||e("  .  .","error");return}K(!0),F([]);try{console.log(" [] :",{selectedCategory:A,SO_ID:i,userInfo_soId:r.soId,WRKR_ID:r.userId,CRR_ID:r.crrId,ITEM_MID_CD:c,EQT_SERNO:N});let ue=[];{const Ie={WRKR_ID:r.userId,CRR_ID:r.crrId,SO_ID:i||r.soId||void 0,ITEM_MID_CD:c||void 0},Ze=[];if(A==="OWNED")try{const Ee={WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||""};console.log("[DEBUG]  API  :",Ee);const pt=await pi("EquipmentInquiry","getWrkrHaveEqtListAll ()",()=>Bm(Ee),Ee);console.log("[DEBUG]  API :",{isArray:Array.isArray(pt),length:Array.isArray(pt)?pt.length:"N/A",raw:pt});let Ke=new Set;try{const Ct=await Rv({WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||r.soId||void 0});console.log("[]   :",Ct),Array.isArray(Ct)&&(Ct.forEach(bt=>{bt.EQT_NO&&(Ke.add(bt.EQT_NO),console.log("[] EQT_NO :",bt.EQT_NO))}),console.log("[]    :",Ke.size,"/ EQT_NO Set:",Array.from(Ke)))}catch(Ct){console.log("[]     ():",Ct)}if(Array.isArray(pt)){let Ct=pt;c&&(Ct=Ct.filter(ct=>ct.ITEM_MID_CD===c)),u&&(console.log("[1 ]  EQT_CL_CD  :",Ct.length,""),console.log("[1 ] selectedEqtClCd:",u),console.log("[1 ]  EQT_CL_CD :",Ct.map(ct=>({serno:ct.EQT_SERNO,eqtClCd:ct.EQT_CL_CD}))),Ct=Ct.filter(ct=>ct.EQT_CL_CD===u),console.log("[1 ]  EQT_CL_CD  :",Ct.length,"")),console.log("[]  ( ):",Ct.length,""),Ze.push(...Ct.map(ct=>{const wt=Ke.has(ct.EQT_NO);return wt&&console.log("[]   :",ct.EQT_NO,ct.EQT_SERNO),{...ct,_category:"OWNED",_hasReturnRequest:wt}}));const{merged:bt,transferredCount:He}=G4(Ze,r.userId);He>0&&(console.log("[]   :",He,""),Ze.length=0,Ze.push(...bt.map(ct=>({...ct,_category:ct._category||"OWNED",_hasReturnRequest:Ke.has(ct.EQT_NO)}))));try{const ct=await Tv({WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||""});if(Array.isArray(ct)){const wt=new Set(Ze.map(Vt=>Vt.EQT_NO)),Bt=ct.filter(Vt=>Vt.EQT_NO&&!wt.has(Vt.EQT_NO));Bt.length>0?(console.log("[]  API   :",Bt.length,""),Ze.push(...Bt.map(Vt=>({...Vt,_category:"OWNED",_hasReturnRequest:Ke.has(Vt.EQT_NO),EQT_USE_ARR_YN:Vt.EQT_USE_ARR_YN||"A"})))):console.log("[]  API -    (  )")}}catch(ct){console.log("[]  API   ():",ct)}}}catch(Ee){console.log("   (getCustProdInfo):",Ee)}if(A==="RETURN_REQUESTED"){const Ee={WRKR_ID:r.userId,SO_ID:i||r.soId||void 0,CRR_ID:r.crrId};try{const pt=await pi("EquipmentInquiry","getEquipmentReturnRequestListAll ()",()=>Rv(Ee),Ee);if(Array.isArray(pt)){let Ke=pt;c&&(Ke=Ke.filter(He=>He.ITEM_MID_CD===c)),u&&(Ke=Ke.filter(He=>He.EQT_CL_CD===u));const Ct=new Map;Ke.forEach(He=>{He.EQT_NO&&(Ct.has(He.EQT_NO)||Ct.set(He.EQT_NO,[]),Ct.get(He.EQT_NO).push(He))});const bt=[];Ct.forEach((He,ct)=>{const wt=He[0],Bt=He.map(Vt=>({REQ_DT:Vt.REQ_DT,RETURN_TP:Vt.RETURN_TP||"2",EQT_USE_ARR_YN:Vt.EQT_USE_ARR_YN||"Y"}));bt.push({...wt,_allReqDts:Bt})}),Ke.length!==bt.length&&console.log("[]  :",Ke.length,"->",bt.length,"(_allReqDts )"),Ze.push(...bt.map(He=>({...He,_category:"RETURN_REQUESTED"})))}}catch(pt){console.log("  :",pt)}}if(A==="INSPECTION_WAITING"){const Ee={WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||""};try{const pt=await pi("EquipmentInquiry","getEquipmentChkStndByAAll ()",()=>Tv(Ee),Ee);if(Array.isArray(pt)){let Ke=pt.filter(Ct=>Ct.ITEM_MID_CD==="04");console.log("[] API :",pt.length,", STB:",Ke.length,""),Ze.push(...Ke.map(Ct=>({...Ct,_category:"INSPECTION_WAITING"})))}}catch(pt){console.log("  :",pt)}}if(ue=Ze,N&&N.trim().length>0){const Ee=N.trim().toUpperCase();ue=ue.filter(pt=>{const Ke=(pt.EQT_SERNO||"").toUpperCase(),Ct=(pt.MAC_ADDRESS||"").toUpperCase();return Ke.includes(Ee)||Ct.includes(Ee)}),console.log(" [] S/N  :",ue.length," (:",Ee,")")}}let Le=(Array.isArray(ue)?ue:[]).map(Ie=>({CHK:!1,EQT_NO:Ie.EQT_NO||"",EQT_SERNO:Ie.EQT_SERNO||Ie.SERIAL_NO||"",MAC_ADDRESS:Ie.MAC_ADDRESS||Ie.MAC||Ie.TA_MAC_ADDRESS||"",EQT_CL_CD:Ie.EQT_CL_CD||"",EQT_CL_NM:Ie.EQT_CL_NM||Ie.EQT_TYPE||"",ITEM_MID_CD:Ie.ITEM_MID_CD||"",ITEM_MID_NM:Ie.ITEM_MID_NM||"",ITEM_NM:Ie.ITEM_NM||Ie.ITEM_MODEL||"",ITEM_MODEL:Ie.ITEM_MODEL||Ie.MODEL_NM||"",SO_ID:Ie.SO_ID||i,SO_NM:Ie.SO_NM||"",EQT_STAT_CD:Ie.EQT_STAT_CD||Ie.STATUS||"",EQT_STAT_NM:Ie.EQT_STAT_NM||Ie.EQT_STAT_CD_NM||pT(Ie.EQT_STAT_CD||Ie.STATUS||"")||"",EQT_LOC_TP_CD:Ie.EQT_LOC_TP_CD||"",EQT_LOC_TP_NM:Ie.EQT_LOC_TP_NM||Ie.EQT_LOC_TP_CD_NM||_T(Ie.EQT_LOC_TP_CD||""),EQT_LOC_NM:Ie.EQT_LOC_NM||"",OLD_EQT_LOC_NM:Ie.OLD_EQT_LOC_NM||Ie.BEF_EQT_LOC_NM||Ie.BEF_LOC_NM||"",CHG_KND_NM:Ie.CHG_KND_NM||Ie.CHG_TP_NM||Ie.EQT_CHG_TP_NM||"",PROC_STAT:Ie.PROC_STAT||"",PROC_STAT_NM:Ie.PROC_STAT_NM||"",WRKR_ID:Ie.WRKR_ID||r.userId,WRKR_NM:Ie.WRKR_NM||r.userName,CUST_ID:Ie.CUST_ID||"",CTRT_ID:Ie.CTRT_ID||"",CTRT_STAT:Ie.CTRT_STAT||"",WRK_ID:Ie.WRK_ID||"",EQT_USE_END_DT:Ie.EQT_USE_END_DT||Ie.USE_END_DT||Ie.EXPIRE_DT||"",RETN_RESN_CD:Ie.RETN_RESN_CD||"",RETN_RESN_NM:Ie.RETN_RESN_NM||Ie.RETN_RESN_CD_NM||"",REQ_DT:Ie.REQ_DT||"",RETURN_TP:Ie.RETURN_TP||"2",EQT_USE_ARR_YN:Ie.EQT_USE_ARR_YN||"",_category:Ie._category||void 0,_hasReturnRequest:Ie._hasReturnRequest||!1}));c&&(Le=Le.filter(Ie=>Ie.ITEM_MID_CD===c)),u&&(Le=Le.filter(Ie=>Ie.EQT_CL_CD===u)),Le.sort((Ie,Ze)=>{const Ee=He=>He._category==="RETURN_REQUESTED"||He._hasReturnRequest?3:He._category==="INSPECTION_WAITING"||He.EQT_USE_ARR_YN==="A"?2:1,pt=Ee(Ie),Ke=Ee(Ze);if(pt!==Ke)return pt-Ke;const Ct=Ie.ITEM_MID_CD||"",bt=Ze.ITEM_MID_CD||"";return Ct.localeCompare(bt)}),F(Le),Le.length===0?e==null||e("  .","info"):e==null||e(`${Le.length}  .`,"success")}catch(ue){console.error(" [] :",ue),e==null||e(ue.message||"  .","error")}finally{K(!1)}},Ge=ue=>{ue.CHK=!0,F([ue]),W(!1),S([]),e==null||e(" .","success")},_e=ue=>{F(P.map(Ce=>({...Ce,CHK:Ce._category==="OWNED"&&Ce._hasReturnRequest?!1:ue})))},xe=(ue,Ce)=>{F(P.map(Le=>Le.EQT_NO===ue?{...Le,CHK:Ce}:Le))},Ue=ue=>{var Ce;return ue?ue.includes(":")||ue.includes("-")?ue:((Ce=ue.match(/.{1,2}/g))==null?void 0:Ce.join(":"))||ue:"-"},Pe=()=>{const ue=P.filter(Le=>Le.CHK);if(ue.length===0){e==null||e("  .","warning");return}const Ce=ue.filter(Le=>Le._hasReturnRequest);if(Ce.length>0){ht(Ce),at(!0);return}se(!0)},Ye=async ue=>{var Le,Ie;const Ce=P.filter(Ze=>Ze.CHK);if(Ce.length===0){e==null||e("  .","warning");return}if(ue==="RETURN"){if(!fe){Z(!0);return}if(fe==="03"&&!ce.trim()){Z(!0);return}}try{const Ze=ue==="RETURN"||Ce.length>=3;Ze&&(U({current:0,total:Ce.length,item:"",action:ue==="CANCEL"?"":""}),T(!0));const Ee=(pt,Ke,Ct)=>{Ze&&U({current:pt,total:Ke,item:Ct,action:ue==="CANCEL"?"":""})};if(ue==="CANCEL"){const pt=[];Ce.forEach(bt=>{bt._allReqDts&&Array.isArray(bt._allReqDts)&&bt._allReqDts.length>0?bt._allReqDts.forEach(He=>{pt.push({EQT_NO:bt.EQT_NO,EQT_SERNO:bt.EQT_SERNO,REQ_DT:He.REQ_DT,RETURN_TP:He.RETURN_TP||"2",EQT_USE_ARR_YN:He.EQT_USE_ARR_YN||"Y"})}):pt.push({EQT_NO:bt.EQT_NO,EQT_SERNO:bt.EQT_SERNO,REQ_DT:bt.REQ_DT,RETURN_TP:bt.RETURN_TP||"2",EQT_USE_ARR_YN:bt.EQT_USE_ARR_YN||""})}),console.log("[]    :",pt.length,"(",Ce.length,")");const Ke={WRKR_ID:(r==null?void 0:r.userId)||"",CRR_ID:(r==null?void 0:r.crrId)||"",SO_ID:((Le=Ce[0])==null?void 0:Le.SO_ID)||i||(r==null?void 0:r.soId)||"",equipmentList:pt},Ct=await pi("EquipmentInquiry","delEquipmentReturnRequest",()=>U4(Ke,Ee),Ke)}else{if(!fe){e==null||e(" .","warning"),T(!1);return}if(fe==="03"&&!ce.trim()){e==null||e("  .","warning"),T(!1);return}const pt={WRKR_ID:(r==null?void 0:r.userId)||"",CRR_ID:(r==null?void 0:r.crrId)||"",SO_ID:((Ie=Ce[0])==null?void 0:Ie.SO_ID)||i||(r==null?void 0:r.soId)||"",MST_SO_ID:(r==null?void 0:r.mstSoId)||(r==null?void 0:r.soId)||"",RETURN_TP:"2",RETN_RESN_TEXT:fe==="03"?ce:void 0,equipmentList:Ce.map(Ct=>({EQT_NO:Ct.EQT_NO,EQT_SERNO:Ct.EQT_SERNO,ACTION:ue,RETN_RESN_CD:fe,EQT_USE_ARR_YN:Ct.EQT_USE_ARR_YN}))},Ke=await pi("EquipmentInquiry","addEquipmentReturnRequest",()=>b4(pt,Ee),pt)}T(!1),e==null||e(ue==="RETURN"?`${Ce.length}    .`:`${Ce.length}   .`,"success"),se(!1),ge(""),Re(""),await ve()}catch(Ze){console.error("   :",Ze),e==null||e(Ze.message||"  .","error"),T(!1)}},mt=async()=>{if(q)try{const ue={EQT_NO:q.EQT_NO,EQT_SERNO:q.EQT_SERNO||"",WRKR_ID:(r==null?void 0:r.userId)||"",CRR_ID:(r==null?void 0:r.crrId)||"",SO_ID:q.SO_ID||i||(r==null?void 0:r.soId)||"",EQT_CL_CD:q.EQT_CL_CD||"",LOSS_REASON:X||void 0},Ce=await pi("EquipmentInquiry","processEquipmentLoss",()=>N4(ue),ue);e==null||e("   .","success"),H(!1),ae(null),me(""),await ve()}catch(ue){console.error("   :",ue),e==null||e(ue.message||"  .","error")}},de=()=>{const ue=P.filter(Ce=>Ce.CHK);if(ue.length===0){e==null||e("   .","warning");return}Fe(ue),$e(!0)},[tt,De]=_.useState(!1),it=_.useRef(!1),St=async()=>{var Ee,pt;if(it.current){console.log("[]   . (ref check)");return}if(it.current=!0,tt){console.log("[]   . (state check)"),it.current=!1;return}$e(!1);const ue=gt;if(ue.length===0)return;const Ce=ue.filter(Ke=>Ke.EQT_USE_ARR_YN!=="Y");if(Ce.length===0){e==null||e("    .","info"),Fe([]);return}De(!0),U({current:0,total:Ce.length,item:"",action:""}),T(!0);const Le={success:[],failed:[]},Ie=new Set;let Ze=0;try{for(const Ke of Ce){if(Ie.has(Ke.EQT_NO)){console.log("[]   :",Ke.EQT_SERNO);continue}Ie.add(Ke.EQT_NO),Ze++,U({current:Ze,total:Ce.length,item:Ke.EQT_SERNO||"",action:""});const Ct={EQT_NO:Ke.EQT_NO,SO_ID:Ke.SO_ID||(r==null?void 0:r.soId)||"",EQT_SERNO:Ke.EQT_SERNO||"",USER_ID:(r==null?void 0:r.userId)||"",CRR_ID:Ke.CRR_ID||(r==null?void 0:r.crrId)||"",WRKR_ID:(r==null?void 0:r.userId)||"",CUST_ID:Ke.CUST_ID||"",WRK_ID:Ke.WRK_ID||"",CTRT_ID:Ke.CTRT_ID||"",CTRT_STAT:Ke.CTRT_STAT||"",PROG_GB:"M"};let bt=0;const He=0;let ct=null,wt=!1;for(;bt<=He;)try{await pi("EquipmentInquiry","setEquipmentCheckStandby",()=>S4(Ct),Ct),Le.success.push({EQT_SERNO:Ke.EQT_SERNO,EQT_NO:Ke.EQT_NO,ITEM_NM:Ke.ITEM_NM||Ke.ITEM_MID_NM||""}),wt=!0;break}catch(Bt){ct=Bt;const Vt=(Bt==null?void 0:Bt.message)||"";if(Vt.includes("ORA-00001")&&bt<He){bt++,console.log(`[] ORA-00001 , ${bt}/${He}  (1 ):`,Ke.EQT_SERNO),await new Promise(Jt=>setTimeout(Jt,1e3));continue}if(Vt.includes("ORA-00001")){console.log("[] ORA-00001 ,    :",Ke.EQT_SERNO);try{const Jt=await yf({EQT_SERNO:Ke.EQT_SERNO});console.log("[]   :",Jt);let ss;(Ee=Jt==null?void 0:Jt.data)!=null&&Ee[0]?ss=Jt.data[0]:(pt=Jt==null?void 0:Jt.resultList)!=null&&pt[0]?ss=Jt.resultList[0]:Array.isArray(Jt)&&Jt.length>0?ss=Jt[0]:ss=Jt,console.log("[]  :",ss);const Wt=ss==null?void 0:ss.EQT_USE_ARR_YN;if(console.log("[]   EQT_USE_ARR_YN:",Wt),Wt==="Y"||Wt&&Wt!=="A"){console.log(`[]     (${Wt}),  :`,Ke.EQT_SERNO),Le.success.push({EQT_SERNO:Ke.EQT_SERNO,EQT_NO:Ke.EQT_NO,ITEM_NM:Ke.ITEM_NM||Ke.ITEM_MID_NM||"",note:Wt==="Y"?"  ":`: ${Wt}`}),wt=!0;break}else console.log("[]    A (),  ")}catch(Jt){console.error("[]    :",Jt)}}console.error("  :",Ke.EQT_SERNO,Bt),Le.failed.push({EQT_SERNO:Ke.EQT_SERNO,EQT_NO:Ke.EQT_NO,ITEM_NM:Ke.ITEM_NM||Ke.ITEM_MID_NM||"",error:bt>0?`${Vt} (${bt}   )`:Vt||"    "});break}await new Promise(Bt=>setTimeout(Bt,200))}We(Le),Et(!0),Fe([]),Le.success.length>0&&await ve()}catch(Ke){console.error("  :",Ke),e==null||e(Ke.message||"  .","error")}finally{T(!1),De(!1),it.current=!1}},Lt=ue=>{console.log("Barcode scanned:",ue),C(ue.toUpperCase()),R(!1),e==null||e(`  : ${ue}`,"success"),setTimeout(()=>{ve()},300)};P.filter(ue=>ue.CHK).length;const Ve=P.filter(ue=>ue.CHK&&ue._category==="OWNED").length,kt=P.filter(ue=>ue.CHK&&ue._category==="RETURN_REQUESTED").length,Oe=P.filter(ue=>ue.CHK&&ue._category==="INSPECTION_WAITING").length,Xt=P.filter(ue=>ue._category==="OWNED").length,rs=P.filter(ue=>ue._category==="RETURN_REQUESTED").length,ds=P.filter(ue=>ue._category==="INSPECTION_WAITING").length,Ss=(ue,Ce,Le)=>{F(P.map(Ie=>{const Ze=Ie.SO_NM||Ie.SO_ID||"",Ee=Ie.ITEM_MID_NM||"";return Ze!==ue||Ee!==Ce||Ie._category==="OWNED"&&Ie._hasReturnRequest?Ie:{...Ie,CHK:Le}}))},Ns=ue=>{be(Ce=>{const Le=new Set(Array.from(Ce));return Le.has(ue)?Le.delete(ue):Le.add(ue),Le})},ke=At.reduce((ue,Ce,Le)=>{var bt,He,ct,wt;let Ie="";const Ze=(bt=Ce.SO_NM)==null?void 0:bt.trim(),Ee=(He=Ce.MST_SO_NM)==null?void 0:He.trim(),pt=(ct=Ce.SO_ID)==null?void 0:ct.trim(),Ke=(wt=Ce.MST_SO_ID)==null?void 0:wt.trim();Ze&&Ze!=="100"?Ie=Ze:Ee&&Ee!=="100"?Ie=Ee:pt==="100"||Ke==="100"||Ze==="100"||Ee==="100"?Ie="":pt&&(Ie=pt);const Ct=Ce.ITEM_MID_NM||"";return ue[Ie]||(ue[Ie]={}),ue[Ie][Ct]||(ue[Ie][Ct]=[]),ue[Ie][Ct].push({...Ce,_globalIdx:Le}),ue},{});Object.keys(ke).forEach(ue=>{Object.keys(ke[ue]).forEach(Ce=>{ke[ue][Ce].sort((Le,Ie)=>{const Ze=Le.EQT_CL_NM||Le.ITEM_NM||"",Ee=Ie.EQT_CL_NM||Ie.ITEM_NM||"";return Ze.localeCompare(Ee)})})});const dt=Object.keys(ke).sort();return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-1",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("button",{type:"button",onClick:()=>M("OWNED"),className:`p-2 rounded-lg border-2 transition-all text-center active:scale-[0.98] touch-manipulation ${A==="OWNED"?"bg-green-50 border-green-500 text-green-700 shadow-sm":"border-gray-200 hover:bg-gray-50 text-gray-400"}`,style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${A==="OWNED"?"bg-green-500 border-green-500":"border-gray-300"}`,children:A==="OWNED"&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-sm font-bold",children:""})]})}),s.jsx("button",{type:"button",onClick:()=>M("RETURN_REQUESTED"),className:`p-2 rounded-lg border-2 transition-all text-center active:scale-[0.98] touch-manipulation ${A==="RETURN_REQUESTED"?"bg-amber-50 border-amber-500 text-amber-700 shadow-sm":"border-gray-200 hover:bg-gray-50 text-gray-400"}`,style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${A==="RETURN_REQUESTED"?"bg-orange-500 border-amber-500":"border-gray-300"}`,children:A==="RETURN_REQUESTED"&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-sm font-bold",children:""})]})}),s.jsx("button",{type:"button",onClick:()=>M("INSPECTION_WAITING"),className:`p-2 rounded-lg border-2 transition-all text-center active:scale-[0.98] touch-manipulation ${A==="INSPECTION_WAITING"?"bg-purple-50 border-purple-500 text-purple-700 shadow-sm":"border-gray-200 hover:bg-gray-50 text-gray-400"}`,style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${A==="INSPECTION_WAITING"?"bg-purple-500 border-purple-500":"border-gray-300"}`,children:A==="INSPECTION_WAITING"&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-sm font-bold",children:""})]})})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("button",{onClick:()=>k(!L),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" "}),(i||c||N)&&s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500 text-white text-[10px] rounded-full font-medium",children:V()})]}),s.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${L?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),L&&s.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("select",{value:i,onChange:ue=>l(ue.target.value),className:"flex-1 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:""}),ee.map(ue=>s.jsx("option",{value:ue.SO_ID,children:ue.SO_NM},ue.SO_ID))]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsx("select",{value:c,onChange:ue=>d(ue.target.value),className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent truncate",children:$.map(ue=>s.jsx("option",{value:ue.COMMON_CD,children:ue.COMMON_CD_NM},ue.COMMON_CD))}),s.jsxs("select",{value:u,onChange:ue=>f(ue.target.value),disabled:!c||y||m.length===0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed truncate",children:[s.jsx("option",{value:"",children:c?y?"...":m.length===0?"-":"":"-"}),m.map(ue=>s.jsx("option",{value:ue.code,children:ue.name},ue.code))]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:N,onChange:ue=>C(ue.target.value.toUpperCase()),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg uppercase focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono",placeholder:"S/N  MAC  "}),s.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-1",children:s.jsx("button",{onClick:ve,disabled:Y,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 rounded-xl font-bold text-base shadow-md transition-all flex items-center justify-center gap-2 active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:Y?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),""]})})}),P.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:ue=>_e(ue.target.checked),checked:At.length>0&&At.filter(ue=>!(ue._category==="OWNED"&&ue._hasReturnRequest)).length>0&&At.filter(ue=>!(ue._category==="OWNED"&&ue._hasReturnRequest)).every(ue=>ue.CHK),className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[At.length," (: ",At.filter(ue=>ue.CHK).length,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>te("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${ie==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>te("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${ie==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:dt.map(ue=>{const Ce=ke[ue],Le=Object.keys(Ce).sort(),Ie=Le.reduce((Ee,pt)=>Ee+Ce[pt].length,0),Ze=je.has(`so_${ue}`);return s.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 flex items-center justify-between cursor-pointer hover:bg-blue-100",onClick:()=>Ns(`so_${ue}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-bold text-blue-800",children:ue}),s.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:[Ie,""]})]}),Ze?s.jsx(or,{className:"w-4 h-4 text-blue-600"}):s.jsx(Wr,{className:"w-4 h-4 text-blue-600"})]}),!Ze&&Le.map(Ee=>{const pt=Ce[Ee],Ke=je.has(`so_${ue}_mid_${Ee}`),Ct=pt.filter(ct=>!(ct._category==="OWNED"&&ct._hasReturnRequest)),bt=Ct.filter(ct=>ct.CHK).length,He=Ct.length>0&&bt===Ct.length;return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>Ns(`so_${ue}_mid_${Ee}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:He,onClick:ct=>ct.stopPropagation(),onChange:ct=>Ss(ue,Ee,ct.target.checked),className:"rounded w-4 h-4",disabled:Ct.length===0}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:Ee}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[pt.length," ",bt>0&&`(${bt})`]})]}),Ke?s.jsx(or,{className:"w-3 h-3 text-gray-500"}):s.jsx(Wr,{className:"w-3 h-3 text-gray-500"})]}),!Ke&&s.jsx("div",{className:"space-y-2",children:pt.map((ct,wt)=>s.jsxs("div",{onClick:()=>{ct._category==="OWNED"&&ct._hasReturnRequest||xe(ct.EQT_NO,!ct.CHK)},className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${ct.CHK?"bg-blue-50 border-blue-400":ct._category==="OWNED"?"bg-green-50/50 border-green-200 hover:border-green-300":ct._category==="RETURN_REQUESTED"?"bg-amber-50/50 border-amber-200 hover:border-amber-300":ct._category==="INSPECTION_WAITING"?"bg-purple-50/50 border-purple-200 hover:border-purple-300":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:ct.CHK||!1,disabled:ct._category==="OWNED"&&ct._hasReturnRequest,onChange:Bt=>{Bt.stopPropagation(),xe(ct.EQT_NO,Bt.target.checked)},className:`w-5 h-5 rounded focus:ring-blue-500 mt-0.5 ${ct._category==="OWNED"&&ct._hasReturnRequest?"text-gray-300 cursor-not-allowed":"text-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 truncate",children:ct.EQT_CL_NM||ct.ITEM_NM||"-"}),s.jsx("div",{className:"flex-shrink-0 ml-2",children:ct._hasReturnRequest||ct._category==="RETURN_REQUESTED"?s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:""}):s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:""})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),ct.EQT_SERNO||"-"]}),s.jsxs("div",{className:"flex-shrink-0 ml-2",children:[ct.EQT_USE_ARR_YN==="Y"&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:""}),ct.EQT_USE_ARR_YN==="A"&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:""}),ct.EQT_USE_ARR_YN==="N"&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:""}),!ct.EQT_USE_ARR_YN&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:"N/A"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),Ue(ct.MAC_ADDRESS)]}),s.jsx("span",{className:"text-sm text-gray-600",children:TK(ct.EQT_USE_END_DT||ct.USE_END_DT||"")})]})]})]}),ie==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:ct.ITEM_MODEL||ct.MODEL_NM||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:ct.SO_NM||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ct.EQT_STAT_NM||ct.EQT_STAT_CD_NM||pT(ct.EQT_STAT_CD||"")||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:ct.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ct.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ct.EQT_LOC_NM||ct.EQT_LOC_TP_NM||_T(ct.EQT_LOC_TP_CD||"")||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ct.OLD_EQT_LOC_NM||"-"})]})]})]},ct.EQT_NO||wt))})]},Ee)})]},ue)})}),!1]}),P.length===0&&!Y&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"     "})]})}),s.jsx("div",{className:"h-20"}),s.jsx("div",{className:"fixed bottom-[56px] left-0 right-0 p-3 z-40",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsxs("div",{className:"flex gap-2",children:[Xt>0&&s.jsxs("button",{onClick:Pe,disabled:Ve===0,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation ${Ve>0?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:[" ",Ve>0&&`(${Ve})`]}),rs>0&&s.jsxs("button",{onClick:()=>Ye("CANCEL"),disabled:kt===0,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation ${kt>0?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:[" ",kt>0&&`(${kt})`]}),ds>0&&s.jsx("button",{onClick:de,disabled:Oe===0||tt,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation ${Oe>0&&!tt?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:tt?"...":` ${Oe>0?`(${Oe})`:""}`})]})}),s.jsx(pa,{isOpen:G,onClose:()=>{W(!1),S([])},title:" ",size:"md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[j.length,"  .   ."]}),s.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg divide-y divide-gray-100",children:j.map((ue,Ce)=>s.jsx("button",{onClick:()=>Ge(ue),className:"w-full p-3 text-left hover:bg-blue-50 transition-colors active:bg-blue-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:ue.EQT_CL_NM||ue.ITEM_NM||""}),s.jsx("div",{className:"text-sm text-gray-600 font-mono",children:ue.EQT_SERNO}),s.jsxs("div",{className:"text-xs text-gray-500",children:[ue.SO_NM," | ",Ue(ue.MAC_ADDRESS)]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${ue.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":ue.EQT_USE_ARR_YN==="A"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:ue.EQT_USE_ARR_YN==="Y"?"":ue.EQT_USE_ARR_YN==="A"?"":"N/A"}),s.jsx("span",{className:"text-xs text-gray-400",children:ue.ITEM_MID_NM})]})]})},Ce))}),s.jsx("button",{onClick:()=>{W(!1),S([])},className:"w-full py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm transition-all",children:""})]})}),s.jsx(pa,{isOpen:w,onClose:()=>se(!1),title:"-",size:"md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:((et=P.filter(ue=>ue.CHK)[0])==null?void 0:et.SO_NM)||((Qt=ee.find(ue=>ue.SO_ID===i))==null?void 0:Qt.SO_NM)||((ut=ee.find(ue=>ue.SO_ID===(r==null?void 0:r.soId)))==null?void 0:ut.SO_NM)||(r==null?void 0:r.soId)||"-",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:fe,onChange:ue=>{ge(ue.target.value),ue.target.value!=="03"&&Re("")},className:`w-full px-2 py-1.5 text-sm border rounded ${fe?"border-gray-300":"border-red-300"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"01",children:"  "}),s.jsx("option",{value:"02",children:"  (  )"}),s.jsx("option",{value:"03",children:""})]})]}),fe==="03"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsxs("span",{className:"text-gray-400 ml-1",children:["(",ce.length,"/100 bytes)"]})]}),s.jsx("textarea",{value:ce,onChange:ue=>{const Ce=ue.target.value;new Blob([Ce]).size<=100&&Re(Ce)},className:`w-full px-2 py-1.5 text-sm border rounded h-20 resize-none ${ce.trim()?"border-gray-300":"border-red-300"}`,placeholder:"   ( 100)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-left",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:"S/N"}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:""})]})}),s.jsx("tbody",{children:P.filter(ue=>ue.CHK).map((ue,Ce)=>s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"px-2 py-1.5",children:ue.ITEM_NM||ue.EQT_CL_NM}),s.jsx("td",{className:"px-2 py-1.5 font-mono text-[10px]",children:ue.EQT_SERNO}),s.jsx("td",{className:"px-2 py-1.5",children:s.jsx("span",{className:`px-1 py-0.5 rounded text-[10px] ${ue.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":ue.EQT_USE_ARR_YN==="A"?"bg-amber-100 text-amber-700":ue.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:ue.EQT_STAT_NM||(ue.EQT_USE_ARR_YN==="Y"?"":ue.EQT_USE_ARR_YN==="A"?"":ue.EQT_USE_ARR_YN==="N"?"":"N/A")})})]},Ce))})]})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{se(!1),ge(""),Re("")},className:"flex-1 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""}),s.jsx("button",{onClick:()=>Ye("RETURN"),className:"flex-1 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""})]})]})}),he&&s.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[250]",onClick:()=>Z(!1),children:s.jsxs("div",{className:"bg-white rounded-xl p-5 mx-4 shadow-2xl max-w-sm animate-pulse",onClick:ue=>ue.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-800",children:" "}),s.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:fe==="03"?"  .":"   ."})]})]}),s.jsx("button",{onClick:()=>Z(!1),className:"w-full py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold text-sm transition-all",children:""})]})}),oe&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200]",children:s.jsx("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-semibold text-gray-800 mb-4",children:[I.action,"  ..."]}),s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:I.total>0?`${I.current/I.total*100}%`:"0%"}})})}),s.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[I.current," / ",I.total]}),s.jsx("div",{className:"text-xs text-gray-400 truncate",children:I.item&&` : ${I.item}`})]})})}),s.jsx(pa,{isOpen:Q,onClose:()=>{H(!1),ae(null)},title:"-",size:"md",children:q&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:q.SO_NM||((qt=ee.find(ue=>ue.SO_ID===q.SO_ID))==null?void 0:qt.SO_NM)||((jt=ee.find(ue=>ue.SO_ID===(r==null?void 0:r.soId)))==null?void 0:jt.SO_NM)||"-",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("textarea",{value:X,onChange:ue=>me(ue.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded h-20 resize-none",placeholder:"  "})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-left",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:"S/N"}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:""})]})}),s.jsx("tbody",{children:s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"px-2 py-1.5",children:q.ITEM_NM||q.EQT_CL_NM}),s.jsx("td",{className:"px-2 py-1.5 font-mono text-[10px]",children:q.EQT_SERNO}),s.jsx("td",{className:"px-2 py-1.5",children:s.jsx("span",{className:`px-1 py-0.5 rounded text-[10px] ${q.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":q.EQT_USE_ARR_YN==="A"?"bg-amber-100 text-amber-700":q.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:q.EQT_STAT_NM||(q.EQT_USE_ARR_YN==="Y"?"":q.EQT_USE_ARR_YN==="A"?"":q.EQT_USE_ARR_YN==="N"?"":"N/A")})})]})})]})})]}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-xs text-red-600",children:"       ."})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{H(!1),ae(null)},className:"flex-1 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""}),s.jsx("button",{onClick:mt,className:"flex-1 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""})]})]})}),Rt&&gt.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-blue-600",children:[s.jsx("h3",{className:"font-semibold text-white text-lg",children:" "}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[" : ",gt.length,""]})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-sm text-amber-800 font-medium mb-1",children:"  "}),s.jsx("p",{className:"text-xs text-amber-600",children:"         ."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),s.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:gt.map((ue,Ce)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg text-xs",children:[s.jsx("span",{className:"font-mono text-gray-800",children:ue.EQT_SERNO}),s.jsx("span",{className:"text-gray-600",children:ue.ITEM_NM||ue.ITEM_MID_NM})]},Ce))})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex gap-2",children:[s.jsx("button",{onClick:()=>{$e(!1),Fe([])},className:"flex-1 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:""}),s.jsx("button",{onClick:St,disabled:tt,className:`flex-1 py-2.5 rounded-lg font-medium transition-colors ${tt?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:tt?"...":""})]})]})}),Dt&&ot&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${ot.failed.length===0?"bg-gradient-to-r from-green-500 to-green-600":ot.success.length===0?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-amber-500 to-amber-600"}`,children:[s.jsx("h3",{className:"font-semibold text-white text-lg",children:ot.failed.length===0?"  ":ot.success.length===0?" ":"  ( )"}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[": ",ot.success.length," / : ",ot.failed.length,""]})]}),s.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto space-y-4",children:[ot.success.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:[" (",ot.success.length,")"]}),s.jsx("div",{className:"space-y-1",children:ot.success.map((ue,Ce)=>s.jsxs("div",{className:"p-2 bg-green-50 rounded-lg text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-green-800",children:ue.EQT_SERNO}),s.jsx("span",{className:"text-green-600",children:ue.ITEM_NM})]}),ue.note&&s.jsxs("div",{className:"text-amber-600 mt-1 text-[10px]",children:[" ",ue.note]})]},Ce))})]}),ot.failed.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-red-700 mb-2",children:[" (",ot.failed.length,")"]}),s.jsx("div",{className:"space-y-1",children:ot.failed.map((ue,Ce)=>s.jsxs("div",{className:"p-2 bg-red-50 rounded-lg text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-red-800",children:ue.EQT_SERNO}),s.jsx("span",{className:"text-red-600",children:ue.ITEM_NM})]}),s.jsx("div",{className:"text-red-500 mt-1",children:ue.error})]},Ce))})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{Et(!1),We(null)},className:"w-full py-2.5 bg-gray-800 hover:bg-gray-900 text-white rounded-lg font-medium transition-colors",children:""})})]})}),rt&&It.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-amber-500 to-amber-600",children:[s.jsxs("h3",{className:"font-semibold text-white text-lg flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"  "]}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[It.length,"     "]})]}),s.jsxs("div",{className:"p-4 max-h-60 overflow-y-auto",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"     .    ."}),s.jsx("div",{className:"space-y-2",children:It.map((ue,Ce)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-amber-50 rounded-lg text-xs",children:[s.jsx("span",{className:"font-mono text-amber-800",children:ue.EQT_SERNO}),s.jsx("span",{className:"text-amber-600",children:ue.ITEM_NM||ue.ITEM_MID_NM||""})]},Ce))})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{at(!1),ht([])},className:"w-full py-2.5 bg-orange-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors",children:""})})]})}),s.jsx(kf,{isOpen:v,onClose:()=>R(!1),onScan:Lt})]})},tp=[{code:"",name:""},{code:"02",name:""},{code:"03",name:"CVT"},{code:"04",name:"STB"},{code:"05",name:"Smart card"},{code:"06",name:""},{code:"07",name:"Cable Card"},{code:"08",name:"IP"},{code:"10",name:"(AP)"},{code:"23",name:"OTT_STB()"}],CT=t=>{var n;if(!t)return"-";const e=t.replace(/[^A-Fa-f0-9]/g,"");return e.length!==12?t:((n=e.match(/.{2}/g))==null?void 0:n.join(":"))||t},MK=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",LK=({onBack:t,showToast:e})=>{const[n,r]=_.useState({userId:"",userName:"",soId:"",crrId:""}),[i,l]=_.useState({WRKR_ID:"",WRKR_NM:"",SO_ID:"",CRR_ID:""}),[c,d]=_.useState([]),[u,f]=_.useState([]),[m,p]=_.useState([]),[y,g]=_.useState(!1),[N,C]=_.useState(!1),v=_.useRef(!1),R=_.useRef(0),[A,M]=_.useState(null),[L,k]=_.useState([]),[V,G]=_.useState(!1),[W,j]=_.useState(!1),[S,P]=_.useState(!1),[F,ee]=_.useState([]),[J,$]=_.useState(""),[Y,K]=_.useState(null),[w,se]=_.useState(!1),[oe,T]=_.useState(new Set),[I,U]=_.useState("simple"),[Q,H]=_.useState(!1),[q,ae]=_.useState(""),[fe,ge]=_.useState(!1),[ce,Re]=_.useState(null),[X,me]=_.useState([]),[he,Z]=_.useState(!1),[ie,te]=_.useState(""),[je,be]=_.useState(""),[Te,re]=_.useState([]),[pe,Se]=_.useState(""),[st,Nt]=_.useState(!1),[lt,At]=_.useState(""),[ot,We]=_.useState(""),[Dt,Et]=_.useState([]),[Rt,$e]=_.useState(!1),[gt,Fe]=_.useState(!1),[rt,at]=_.useState(null),[It,ht]=_.useState("");_.useEffect(()=>{Je()},[]),_.useEffect(()=>{if(!lt){Et([]),We("");return}(async()=>{try{console.log("[]  API :",lt);const dt=await g5({ITEM_MID_CD:lt});console.log("[]  API :",dt);const Qt=(Array.isArray(dt)?dt:(dt==null?void 0:dt.data)||[]).map(ut=>({code:ut.COMMON_CD||ut.EQT_CL_CD||"",name:ut.COMMON_CD_NM||ut.EQT_CL_NM||""})).filter(ut=>ut.code&&ut.name).sort((ut,qt)=>ut.name.localeCompare(qt.name));Et(Qt),console.log("[]   :",Qt.length,"",Qt)}catch(dt){console.error("[]  API :",dt);const et=new Map;c.forEach(ut=>{ut.ITEM_MID_CD===lt&&ut.EQT_CL_CD&&ut.EQT_CL_NM&&et.set(ut.EQT_CL_CD,ut.EQT_CL_NM)});const Qt=Array.from(et.entries()).map(([ut,qt])=>({code:ut,name:qt})).sort((ut,qt)=>ut.name.localeCompare(qt.name));Et(Qt),console.log("[]  fallback:",Qt.length,"")}})(),We("")},[lt]);const Je=async()=>{try{const ke=localStorage.getItem("userInfo");if(ke){const dt=JSON.parse(ke),et=dt.authSoList&&Array.isArray(dt.authSoList)?dt.authSoList:[];re(et);let Qt=dt.soId||"";!Qt&&et.length>0&&(Qt=et[0].SO_ID||""),r({userId:dt.userId||"",userName:dt.userName||"",soId:Qt,crrId:dt.crrId||""}),et.length>0&&Se(et[0].SO_ID||"")}}catch(ke){console.warn("   :",ke)}await ve()},ve=async()=>{const ke=localStorage.getItem("userInfo"),dt=localStorage.getItem("branchList");if(ke)try{const et=JSON.parse(ke);let Qt=[];if(et.authSoList&&Array.isArray(et.authSoList)&&et.authSoList.length>0)Qt=et.authSoList;else if(dt)try{const ut=JSON.parse(dt);Array.isArray(ut)&&ut.length>0&&(Qt=ut)}catch{}Qt.length===0&&et.soId&&(Qt=[{SO_ID:et.soId,SO_NM:et.soNm||`(${et.soId})`}]),Qt.length>0&&(f(Qt),l(ut=>({...ut,SO_ID:Qt[0].SO_ID}))),et.crrId&&(p([{CRR_ID:et.crrId,CORP_NM:et.crrNm||et.corpNm||`(${et.crrId})`}]),l(ut=>({...ut,CRR_ID:et.crrId})))}catch(et){console.warn("   :",et)}},Ge=async ke=>{const dt=ke.toUpperCase().replace(/[:-]/g,"");if(L.includes(dt)){e==null||e("  .","warning");return}k(et=>[...new Set([dt,...et])]),G(!0),P(!1)},_e=async()=>{if(L.length===0){e==null||e("  .","warning");return}M(null),g(!0);try{const ke=L[0],dt=await pi("EquipmentMovement","getEquipmentHistoryInfo",()=>yf({EQT_SERNO:ke}),{EQT_SERNO:ke});if(dt&&dt.length>0){const et=dt[0];let Qt=et.WRKR_ID||et.OWNER_WRKR_ID;if(!Qt&&et.EQT_LOC_NM){const jt=et.EQT_LOC_NM.match(/\(([A-Z]?\d+)\)$/);jt&&(Qt=jt[1])}const ut=et.WRKR_NM||et.OWNER_WRKR_NM||"",qt=et.CRR_ID||"";Qt?(l(jt=>({...jt,WRKR_ID:Qt,WRKR_NM:ut,CRR_ID:qt})),await Ue(Qt,ut,qt,ke),H(!0)):M(`(${ke})   .`)}else M(`(${ke})   .`)}catch(ke){console.error("  :",ke),M("  .")}finally{g(!1)}},xe=async()=>{const ke=J.trim().toUpperCase().replace(/[:-]/g,"");if(!ke){e==null||e("(S/N) .","warning");return}M(null),g(!0),G(!1),console.log("========================================"),console.log("[ ] S/N  :",ke),console.log("[ ]  :",n.userId),console.log("[ ]   - 1:",lt||"",", 2:",ot||"");try{const dt=await pi("EquipmentMovement","getEquipmentHistoryInfo",()=>yf({EQT_SERNO:ke}),{EQT_SERNO:ke});console.log("[ ] getEquipmentHistoryInfo :",JSON.stringify(dt).substring(0,500));const et=Array.isArray(dt)?dt[0]:dt;if(console.log("[ ]   :",et?"OK":"NULL"),et&&et.EQT_SERNO){const Qt=et.EQT_LOC_TP_CD||"",ut=et.EQT_LOC_TP_CD_NM||et.EQT_LOC_TP_NM||"";if(console.log("[ ] EQT_LOC_TP_CD:",Qt||""),console.log("[ ] EQT_LOC_TP_CD_NM:",ut||""),console.log("[ ] EQT_LOC_NM:",et.EQT_LOC_NM||""),console.log("[ ] WRKR_ID  :",et.WRKR_ID||""),console.log("[ ] OWNER_WRKR_ID  :",et.OWNER_WRKR_ID||""),Qt==="4"){at({EQT_SERNO:et.EQT_SERNO,EQT_NO:et.EQT_NO||"",ITEM_NM:et.ITEM_NM||et.EQT_CL_NM||"",ITEM_MID_NM:et.ITEM_MID_NM||"",SO_NM:et.SO_NM||"",EQT_LOC_NM:et.EQT_LOC_NM||"",EQT_LOC_TP_NM:"",MAC_ADDRESS:et.MAC_ADDRESS||"",WRKR_NM:et.WRKR_NM||et.OWNER_WRKR_NM||"-"}),Fe(!0),g(!1),$("");return}let qt=et.WRKR_ID||et.OWNER_WRKR_ID;if(!qt&&et.EQT_LOC_NM){const Ce=et.EQT_LOC_NM.match(/\(([A-Z]?\d+)\)$/);Ce&&(qt=Ce[1]),console.log("[ ]   :",Ce?Ce[1]:" ")}const jt=et.WRKR_NM||et.OWNER_WRKR_NM||"",ue=et.CRR_ID||"";if(console.log("[ ]  ownerWrkrId:",qt||""),console.log("[ ] ownerWrkrNm:",jt),qt)console.log("[ ]  WRKR_ID    searchEquipmentByWorker "),k([ke]),G(!1),l(Ce=>({...Ce,WRKR_ID:qt,WRKR_NM:jt,CRR_ID:ue})),await Ue(qt,jt,ue,ke),H(!0);else{console.log("[ ]  WRKR_ID     "),console.log("[]   :",ke,":",ut);try{const Ce=await k4({EQT_SERNO:ke}),Le=Array.isArray(Ce)?Ce[0]:Ce,Ie=(Le==null?void 0:Le.EQT_LOC_TP_NM)||ut||"",Ze=Ie===""?"":Ie;at({EQT_SERNO:ke,EQT_NO:(Le==null?void 0:Le.EQT_NO)||et.EQT_NO||"",ITEM_NM:(Le==null?void 0:Le.ITEM_NM)||et.ITEM_NM||et.EQT_CL_NM||"",ITEM_MID_NM:(Le==null?void 0:Le.ITEM_MID_NM)||et.ITEM_MID_NM||"",SO_NM:(Le==null?void 0:Le.SO_NM)||et.SO_NM||"",EQT_LOC_NM:(Le==null?void 0:Le.EQT_LOC_NM)||et.EQT_LOC_NM||"",EQT_LOC_TP_NM:Ze,MAC_ADDRESS:(Le==null?void 0:Le.MAC_ADDRESS)||et.MAC_ADDRESS||"",WRKR_NM:jt}),Fe(!0)}catch{const Le=ut===""?"":ut||" ";at({EQT_SERNO:ke,EQT_NO:et.EQT_NO||"",ITEM_NM:et.ITEM_NM||et.EQT_CL_NM||"",ITEM_MID_NM:et.ITEM_MID_NM||"",SO_NM:et.SO_NM||"",EQT_LOC_NM:et.EQT_LOC_NM||"",EQT_LOC_TP_NM:Le,MAC_ADDRESS:et.MAC_ADDRESS||"",WRKR_NM:jt}),Fe(!0)}}}else ht(`S/N: ${ke}`),H(!0),M(`(${ke})   .`)}catch(dt){console.error("  :",dt),M("  .")}finally{g(!1),$("")}},Ue=async(ke,dt,et,Qt)=>{var ut,qt,jt,ue;g(!0);try{const Ce={WRKR_ID:ke,CRR_ID:"",SO_ID:""};if(Qt){const Ie=L.length>0?[...new Set([Qt,...L])]:[Qt];Ce.EQT_SERNO=Ie.map(Ze=>`'${Ze}'`).join(",")}else L.length>0&&(Ce.EQT_SERNO=L.map(Ie=>`'${Ie}'`).join(","));Qt||(lt&&(Ce.ITEM_MID_CD=lt),ot&&(Ce.EQT_CL_CD=ot));const Le=await pi("EquipmentMovement","getWrkrHaveEqtList",()=>Bm(Ce),Ce);if(console.log("[ ] getWrkrHaveEqtList  :",Array.isArray(Le)?Le.length:"NOT_ARRAY"),Array.isArray(Le)&&Le.length>0){let Ie=Le;Qt?console.log("[ ] S/N   -   "):(lt&&(Ie=Le.filter(Ee=>Ee.ITEM_MID_CD===lt),console.log("[ ] 1   :",Ie.length," (:",lt,")")),ot&&(Ie=Ie.filter(Ee=>Ee.EQT_CL_CD===ot),console.log("[ ] 2   :",Ie.length," (:",ot,")")));let Ze=Ie.map(Ee=>({CHK:!1,EQT_NO:Ee.EQT_NO||"",ITEM_MAX_NM:Ee.ITEM_MAX_NM||"",ITEM_MID_CD:Ee.ITEM_MID_CD||"",ITEM_MID_NM:Ee.ITEM_MID_NM||"",EQT_CL_CD:Ee.EQT_CL_CD||"",EQT_CL_NM:Ee.EQT_CL_NM||"",ITEM_NM:Ee.ITEM_NM||"",ITEM_SPEC:Ee.ITEM_SPEC||"",MST_SO_ID:Ee.MST_SO_ID||"",MST_SO_NM:Ee.MST_SO_NM||"",SO_ID:Ee.SO_ID||"",SO_NM:Ee.SO_NM||"",EQT_SERNO:Ee.EQT_SERNO||"",MAC_ADDRESS:Ee.MAC_ADDRESS||"",TA_MAC_ADDRESS:Ee.TA_MAC_ADDRESS||"",WRKR_NM:Ee.WRKR_NM||dt,CRR_NM:Ee.CRR_NM||"",EQT_STAT_CD_NM:Ee.EQT_STAT_CD_NM||"",CHG_KND_NM:Ee.CHG_KND_NM||"",EQT_LOC_NM:Ee.EQT_LOC_NM||"",EQT_LOC_TP_NM:Ee.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:Ee.OLD_EQT_LOC_NM||"",OLD_EQT_LOC_TP_NM:Ee.OLD_EQT_LOC_TP_NM||"",ITEM_MODEL:Ee.ITEM_MODEL||"",MODEL_NM:Ee.MODEL_NM||"",EQT_USE_ARR_YN:Ee.EQT_USE_ARR_YN||"",EQT_USE_END_DT:Ee.EQT_USE_END_DT||"",isScanned:Qt&&Ee.EQT_SERNO===Qt||L.includes(Ee.EQT_SERNO),isTransferable:!0}));if(Ze.sort((Ee,pt)=>Ee.isScanned&&!pt.isScanned?-1:!Ee.isScanned&&pt.isScanned?1:0),Ze=Ze.map(Ee=>({...Ee,CHK:Ee.isScanned||!1})),Ze.length>0)console.log("[ ]   :",Ze.length," "),d(Ze);else{console.log("[ ]     0 -    "),d([]);const Ee=lt?(ut=tp.find(Ct=>Ct.code===lt))==null?void 0:ut.name:"",pt=ot?(qt=Dt.find(Ct=>Ct.code===ot))==null?void 0:qt.name:"";let Ke="";Ee&&(Ke+=`, 1: ${Ee}`),pt&&(Ke+=`, 2: ${pt}`),ht(`: ${dt}${Ke}`)}}else{console.log("[ ]  API      "),d([]);const Ie=lt?(jt=tp.find(pt=>pt.code===lt))==null?void 0:jt.name:"",Ze=ot?(ue=Dt.find(pt=>pt.code===ot))==null?void 0:ue.name:"";let Ee="";Ie&&(Ee+=`, 1: ${Ie}`),Ze&&(Ee+=`, 2: ${Ze}`),ht(`: ${dt}${Ee}`)}}catch(Ce){console.error("  :",Ce),M("  ."),d([])}finally{g(!1)}},Pe=async()=>{if(M(null),!i.WRKR_ID){e==null||e(" .","warning");return}await Ue(i.WRKR_ID,i.WRKR_NM,i.CRR_ID),H(!0)},Ye=()=>{ae(""),ee([]),j(!0)},mt=async()=>{const ke=q.trim();if(!ke){e==null||e("  ID .","warning");return}const et=/[-]/.test(ke);if(et&&ke.length<2){e==null||e(" 2  .","warning");return}ge(!0);try{if(et){console.log("[]  :",ke);let Qt=await rp({USR_NM:ke});if(console.log("[]   :",Qt.length,""),Qt.length===0){const ut=localStorage.getItem("user")||localStorage.getItem("userInfo");if(ut)try{const qt=JSON.parse(ut),jt=qt.AUTH_SO_List||qt.authSoList||[];if(jt.length>0){console.log("[]     -  SO_ID  :",jt.map(Ee=>Ee.SO_ID).join(", "));const ue=jt.map(Ee=>rp({SO_ID:Ee.SO_ID}).catch(()=>[])),Ce=await Promise.all(ue),Le=new Map;Ce.forEach(Ee=>{Ee.forEach(pt=>{pt.USR_ID&&!Le.has(pt.USR_ID)&&Le.set(pt.USR_ID,pt)})});const Ie=Array.from(Le.values());console.log("[]  :",Ie.length," ()");const Ze=ke.toLowerCase();Qt=Ie.filter(Ee=>(Ee.USR_NM||Ee.USR_NAME_EN||"").toLowerCase().includes(Ze)),console.log("[]   :",Qt.length,"")}}catch(qt){console.error("[] user  :",qt)}}if(Qt.length>0){const ut=Qt.slice(0,30).map(qt=>({USR_ID:qt.USR_ID||qt.WRKR_ID||"",USR_NM:qt.USR_NM||qt.USR_NAME_EN||qt.WRKR_NM||"-",CRR_ID:qt.CRR_ID||"",SO_ID:qt.SO_ID||"",SO_NM:qt.SO_NM||"",CORP_NM:qt.CORP_NM||""}));ee(ut)}else ee([])}else{console.log("[] ID :",ke.toUpperCase());const Qt=await rp({USR_ID:ke.toUpperCase()});if(Qt&&Qt.length>0){const ut=Qt[0];ee([{USR_ID:ut.USR_ID||ke.toUpperCase(),USR_NM:ut.USR_NM||ut.WRKR_NM||ke.toUpperCase(),CRR_ID:ut.CRR_ID||"",SO_ID:ut.SO_ID||"",SO_NM:ut.SO_NM||"",CORP_NM:ut.CORP_NM||""}])}else ee([])}}catch(Qt){console.error("  :",Qt),e==null||e("  .","error"),ee([])}finally{ge(!1)}},de=(ke,dt)=>{const et=[...X];et[ke].CHK=dt,me(et)},tt=ke=>{me(X.map(dt=>!ie||(dt.ITEM_MID_NM||dt.EQT_CL_NM||"")===ie?{...dt,CHK:ke}:dt))},De=()=>{const ke=X.filter(dt=>dt.CHK);if(ke.length===0){e==null||e("  .","warning");return}ce&&l(dt=>({...dt,WRKR_ID:ce.USR_ID,WRKR_NM:ce.USR_NM,CRR_ID:ce.CRR_ID||""})),d(ke),H(!0),Re(null),me([]),ee([]),ae(""),j(!1)},it=()=>{Re(null),me([])},St=ke=>{l(dt=>({...dt,WRKR_ID:ke.USR_ID,WRKR_NM:ke.USR_NM,CRR_ID:ke.CRR_ID||""})),j(!1),d([]),k([]),H(!1)},Lt=()=>{H(!1),d([]),k([]),l(ke=>({...ke,WRKR_ID:"",WRKR_NM:""})),$(""),setSelectionMode("none")},Ve=async()=>{if(v.current){console.log("[] transferLockRef  -   ");return}const ke=Date.now();if(ke-R.current<3e3){console.log("[]   - 3   ");return}if(y||N){console.log("[] isLoading/isTransferring  -   ");return}v.current=!0,R.current=ke;const dt=c.filter(qt=>qt.CHK);if(dt.length===0){v.current=!1,e==null||e("  .","warning");return}if(!n.userId){v.current=!1,e==null||e("  .","error");return}if(i.WRKR_ID===n.userId){v.current=!1,e==null||e("    .","warning");return}g(!0),C(!0);const et={success:[],failed:[]},ut=`TRANSFER_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log(""),console.log(""),console.log("                                                "),console.log(""),console.log(` DEBUG_ID: ${ut}`),console.log(` : ${new Date().toISOString()}`),console.log(` : ${dt.length}`),console.log(` : ${i.WRKR_ID} (${i.WRKR_NM})`),console.log(` : ${n.userId} (${n.userName})`),console.log(`  CRR_ID: ${n.crrId}`),console.log(` SO_ID: ${pe||"( SO_ID )"}`),console.log(` AUTH_SO_LIST: [${Te.map(qt=>qt.SO_ID).join(", ")}]`),console.log(""),console.log(""),console.log("[DEBUG]   :"),dt.forEach((qt,jt)=>{console.log(`  [${jt+1}] EQT_NO=${qt.EQT_NO}, EQT_SERNO=${qt.EQT_SERNO}, SO_ID=${qt.SO_ID}, SO_NM=${qt.SO_NM||"-"}`)}),console.log("");try{for(let qt=0;qt<dt.length;qt++){const jt=dt[qt],ue=Date.now();console.log(""),console.log(""),console.log(`  [${qt+1}/${dt.length}]    `),console.log(` EQT_SERNO: ${jt.EQT_SERNO}`),console.log(` EQT_NO: ${jt.EQT_NO}`),console.log(`  SO_ID: ${jt.SO_ID}`),console.log("");try{const Ce={SO_ID:jt.SO_ID,EQT_NO:jt.EQT_NO,EQT_SERNO:jt.EQT_SERNO,CHG_UID:n.userId,MV_SO_ID:pe||jt.SO_ID,MV_CRR_ID:n.crrId,MV_WRKR_ID:n.userId};console.log("[DEBUG] API  :",JSON.stringify(Ce,null,2)),console.log(`[DEBUG] API  : ${new Date().toISOString()}`);const Le=await v4(Ce),Ie=Date.now()-ue;console.log(`[DEBUG] API  : ${new Date().toISOString()} (: ${Ie}ms)`),console.log("[DEBUG] API :",JSON.stringify(Le,null,2)),et.success.push({EQT_SERNO:jt.EQT_SERNO,EQT_NO:jt.EQT_NO,ITEM_NM:jt.ITEM_NM||jt.EQT_CL_NM}),B4({EQT_NO:jt.EQT_NO,EQT_SERNO:jt.EQT_SERNO,ITEM_NM:jt.ITEM_NM||jt.EQT_CL_NM,ITEM_MID_NM:jt.ITEM_MID_NM,ITEM_MAX_NM:jt.ITEM_MAX_NM,EQT_CL_NM:jt.EQT_CL_NM,SO_ID:jt.SO_ID||"",SO_NM:jt.SO_NM||jt.MST_SO_NM||"",FROM_WRKR_ID:i.WRKR_ID,FROM_WRKR_NM:i.WRKR_NM,TO_WRKR_ID:n.userId})}catch(Ce){console.error("  :",jt.EQT_SERNO,Ce),et.failed.push({EQT_SERNO:jt.EQT_SERNO,EQT_NO:jt.EQT_NO,ITEM_NM:jt.ITEM_NM||jt.EQT_CL_NM,error:(Ce==null?void 0:Ce.message)||"   "})}}if(K(et),se(!0),et.success.length>0){const qt=new Set(et.success.map(jt=>jt.EQT_NO));d(jt=>jt.filter(ue=>!qt.has(ue.EQT_NO))),k(jt=>jt.filter(ue=>!et.success.some(Ce=>Ce.EQT_SERNO===ue)))}}catch(qt){console.error("  :",qt),e==null||e("  .","error")}finally{g(!1),C(!1),setTimeout(()=>{v.current=!1},1e3)}},kt=ke=>{d(c.map(dt=>({...dt,CHK:ke})))},Oe=(ke,dt)=>{const et=[...c];et[ke].CHK=dt,d(et)},Xt=(ke,dt)=>{d(c.map(et=>(et.SO_NM||et.SO_ID||"")===ke?{...et,CHK:dt}:et))},rs=(ke,dt,et)=>{d(c.map(Qt=>{const ut=Qt.SO_NM||Qt.SO_ID||"",qt=Qt.ITEM_MID_NM||"";return ut===ke&&qt===dt?{...Qt,CHK:et}:Qt}))},ds=ke=>{T(dt=>{const et=new Set(Array.from(dt));return et.has(ke)?et.delete(ke):et.add(ke),et})},Ss=c.reduce((ke,dt,et)=>{var Le,Ie,Ze,Ee;let Qt="";const ut=(Le=dt.SO_NM)==null?void 0:Le.trim(),qt=(Ie=dt.MST_SO_NM)==null?void 0:Ie.trim(),jt=(Ze=dt.SO_ID)==null?void 0:Ze.trim(),ue=(Ee=dt.MST_SO_ID)==null?void 0:Ee.trim();ut&&ut!=="100"?Qt=ut:qt&&qt!=="100"?Qt=qt:jt==="100"||ue==="100"||ut==="100"||qt==="100"?Qt="":jt&&(Qt=jt);const Ce=dt.ITEM_MID_NM||"";return ke[Qt]||(ke[Qt]={}),ke[Qt][Ce]||(ke[Qt][Ce]=[]),ke[Qt][Ce].push({...dt,_globalIdx:et}),ke},{});Object.keys(Ss).forEach(ke=>{Object.keys(Ss[ke]).forEach(dt=>{Ss[ke][dt].sort((et,Qt)=>{const ut=et.EQT_CL_NM||et.ITEM_NM||"",qt=Qt.EQT_CL_NM||Qt.ITEM_NM||"";return ut.localeCompare(qt)})})});const Ns=Object.keys(Ss).sort();return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-1 cursor-pointer",onClick:Ye,children:[s.jsx("input",{type:"text",value:i.WRKR_NM||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer truncate text-center",placeholder:""}),s.jsx("input",{type:"text",value:i.WRKR_ID||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer font-mono text-center",placeholder:"ID"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("select",{value:lt,onChange:ke=>At(ke.target.value),className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent truncate",children:[s.jsx("option",{value:"",children:""}),tp.filter(ke=>ke.code!=="").map(ke=>s.jsx("option",{value:ke.code,children:ke.name},ke.code))]}),s.jsxs("select",{value:ot,onChange:ke=>We(ke.target.value),disabled:!lt||Rt||Dt.length===0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed truncate",children:[s.jsx("option",{value:"",children:lt?Rt?"...":Dt.length===0?"-":"":"-"}),Dt.map(ke=>s.jsx("option",{value:ke.code,children:ke.name},ke.code))]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:J,onChange:ke=>$(ke.target.value.toUpperCase()),onKeyDown:ke=>ke.key==="Enter"&&J.trim()&&xe(),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono",placeholder:"S/N  MAC  "}),s.jsxs("button",{onClick:()=>P(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),L.length>0&&s.jsxs("div",{className:`p-3 border rounded-lg ${V?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:`text-xs font-medium ${V?"text-purple-700":"text-blue-700"}`,children:[V?" ":" "," (",L.length,")"]}),s.jsx("button",{onClick:()=>{k([]),d([])},className:"text-xs text-gray-500 hover:text-gray-700",children:""})]}),s.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:L.map((ke,dt)=>s.jsxs("div",{className:"flex items-center justify-between text-xs bg-white px-2 py-1 rounded",children:[s.jsx("span",{className:"font-mono text-gray-800",children:ke}),s.jsx("button",{onClick:()=>{const et=L.filter(Qt=>Qt!==ke);k(et),et.length===0&&d([])},className:"text-red-400 hover:text-red-600",children:s.jsx(bi,{className:"w-3 h-3"})})]},dt))})]}),s.jsx("button",{onClick:()=>{var dt,et;const ke=[];if(i.WRKR_NM&&ke.push(`: ${i.WRKR_NM}`),lt){const Qt=(dt=tp.find(ut=>ut.code===lt))==null?void 0:dt.name;Qt&&ke.push(`1: ${Qt}`)}if(ot){const Qt=(et=Dt.find(ut=>ut.code===ot))==null?void 0:et.name;Qt&&ke.push(`2: ${Qt}`)}J.trim()&&ke.push(`S/N: ${J.trim()}`),ht(ke.join(", ")||""),J.trim()?xe():L.length>0?_e():i.WRKR_ID?Pe():e==null||e("   .","warning")},disabled:y||!i.WRKR_ID&&!J.trim()&&L.length===0,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-2.5 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation",children:y?" ...":""})]})}),c.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:Lt,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",title:"",children:s.jsx(Ei,{className:"w-4 h-4"})}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:ke=>kt(ke.target.checked),checked:c.length>0&&c.every(ke=>ke.CHK),className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[c.length," (: ",c.filter(ke=>ke.CHK).length,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>U("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${I==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>U("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${I==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:Ns.map(ke=>{const dt=Ss[ke],et=Object.keys(dt).sort(),Qt=oe.has(ke),ut=et.reduce((Ce,Le)=>Ce+dt[Le].length,0),qt=et.flatMap(Ce=>dt[Ce]),jt=qt.every(Ce=>Ce.CHK),ue=qt.some(Ce=>Ce.CHK);return s.jsxs("div",{children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 flex items-center justify-between cursor-pointer hover:bg-blue-100",onClick:()=>ds(ke),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:jt,onClick:Ce=>Ce.stopPropagation(),onChange:Ce=>Xt(ke,Ce.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-bold text-blue-800",children:ke}),s.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:[ut," ",ue&&!jt&&`(${qt.filter(Ce=>Ce.CHK).length})`]})]}),Qt?s.jsx(or,{className:"w-4 h-4 text-blue-600"}):s.jsx(Wr,{className:"w-4 h-4 text-blue-600"})]}),!Qt&&et.map(Ce=>{const Le=dt[Ce],Ie=`${ke}-${Ce}`,Ze=oe.has(Ie),Ee=Le.every(Ke=>Ke.CHK),pt=Le.some(Ke=>Ke.CHK);return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>ds(Ie),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:Ee,onClick:Ke=>Ke.stopPropagation(),onChange:Ke=>rs(ke,Ce,Ke.target.checked),className:"rounded w-4 h-4"}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:Ce}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[Le.length," ",pt&&!Ee&&`(${Le.filter(Ke=>Ke.CHK).length})`]})]}),Ze?s.jsx(or,{className:"w-3 h-3 text-gray-500"}):s.jsx(Wr,{className:"w-3 h-3 text-gray-500"})]}),!Ze&&s.jsx("div",{className:"space-y-2",children:Le.map((Ke,Ct)=>{const bt=Ke._globalIdx;return s.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${Ke.isScanned?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:Ke.CHK||!1,onChange:He=>Oe(bt,He.target.checked),className:"w-5 h-5 rounded focus:ring-blue-500 mt-0.5 text-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-base font-bold truncate text-gray-900",children:Ke.EQT_CL_NM||Ke.ITEM_NM||"-"}),s.jsx("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:Ke.isScanned&&V&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:""})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),Ke.EQT_SERNO||"-"]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${Ke.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":Ke.EQT_USE_ARR_YN==="A"?"bg-purple-100 text-purple-700":Ke.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:Ke.EQT_USE_ARR_YN==="Y"?"":Ke.EQT_USE_ARR_YN==="A"?"":Ke.EQT_USE_ARR_YN==="N"?"":"N/A"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),CT(Ke.MAC_ADDRESS)]}),s.jsx("span",{className:"text-sm text-gray-600",children:MK(Ke.EQT_USE_END_DT||"")})]})]})]}),I==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:Ke.ITEM_MODEL||Ke.MODEL_NM||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:Ke.SO_NM||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.EQT_STAT_CD_NM||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:Ke.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.EQT_LOC_NM||Ke.EQT_LOC_TP_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.OLD_EQT_LOC_NM||"-"})]})]})]},Ke.EQT_NO||Ct)})})]},Ie)})]},ke)})})]}),s.jsx("div",{className:"h-24"})]}),c.length===0&&!y&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:A?s.jsx(s.Fragment,{children:"   "}):s.jsx(s.Fragment,{children:"  "})}),s.jsx("p",{className:"text-gray-400 text-xs",children:A?s.jsx(s.Fragment,{children:"S/N  MAC  "}):s.jsx(s.Fragment,{children:"     "})})]})}),y&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsx("p",{className:"text-center text-gray-500 text-sm",children:" ..."})}),c.length>0&&s.jsx("div",{className:"fixed bottom-16 left-0 right-0 px-4 pb-2 z-[45]",children:s.jsx("button",{onClick:()=>!N&&Nt(!0),disabled:c.filter(ke=>ke.CHK).length===0||N,className:`w-full py-4 rounded-xl font-bold text-base shadow-lg flex items-center justify-center gap-2 transition-all touch-manipulation ${N?"bg-gray-400 text-gray-200 cursor-not-allowed":c.filter(ke=>ke.CHK).length>0?"bg-gradient-to-r from-blue-500 to-blue-600 text-white active:scale-[0.98]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:N?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(dc,{className:"w-5 h-5"}),"  (",c.filter(ke=>ke.CHK).length,")"]})})}),s.jsx(pa,{isOpen:st,onClose:()=>Nt(!1),title:"  ",size:"large",footer:s.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[s.jsx("button",{onClick:()=>Nt(!1),className:"py-4 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-semibold text-base transition-colors touch-manipulation",children:""}),s.jsx("button",{onClick:()=>{N||(Nt(!1),Ve())},disabled:N,className:`py-4 rounded-xl font-semibold text-base shadow-lg transition-all touch-manipulation ${N?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 text-white active:scale-[0.98]"}`,children:N?"...":""})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl p-4 bg-blue-50 border border-blue-200",children:[s.jsx("label",{className:"block text-sm font-semibold mb-2 text-blue-800",children:" "}),Te.length>1?s.jsxs(s.Fragment,{children:[s.jsx("select",{value:pe,onChange:ke=>Se(ke.target.value),className:"w-full px-4 py-3 border border-blue-300 rounded-xl text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Te.map(ke=>s.jsxs("option",{value:ke.SO_ID,children:[ke.SO_NM," (",ke.SO_ID,")"]},ke.SO_ID))}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"   "})]}):Te.length===1?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"w-full px-4 py-3 border border-blue-300 rounded-xl text-sm bg-blue-100 text-blue-900 font-semibold",children:[Te[0].SO_NM," (",Te[0].SO_ID,")"]}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"    "})]}):null]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" "})}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("span",{className:"font-medium text-gray-900",children:[i.WRKR_NM," (",i.WRKR_ID,")"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("span",{className:"font-medium text-gray-900",children:[n.userName," (",n.userId,")"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("span",{className:"font-bold text-blue-600",children:[c.filter(ke=>ke.CHK).length,""]})]})]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"bg-gray-100 px-4 py-2 border-b border-gray-200",children:s.jsx("span",{className:"text-xs font-semibold text-gray-600",children:" "})}),s.jsx("div",{className:"max-h-48 overflow-y-auto divide-y divide-gray-100",children:c.filter(ke=>ke.CHK).map((ke,dt)=>s.jsxs("div",{className:"px-4 py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded font-medium",children:ke.ITEM_MID_NM||ke.EQT_CL_NM||""}),s.jsx("span",{className:"text-xs font-mono text-gray-800",children:ke.EQT_SERNO})]}),s.jsx("span",{className:"text-[10px] text-gray-500",children:ke.SO_NM||ke.SO_ID})]},ke.EQT_NO||dt))})]})]})}),s.jsx(pa,{isOpen:W,onClose:()=>{j(!1),Re(null),me([]),ee([]),ae("")},title:ce?`${ce.USR_NM} `:" ",size:"large",subHeader:ce?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:it,className:"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-900",children:[s.jsx(Wr,{className:"w-4 h-4 rotate-[-90deg]"}),""]}),s.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",onChange:ke=>tt(ke.target.checked),checked:(()=>{const ke=X.filter(dt=>!ie||(dt.ITEM_MID_NM||dt.EQT_CL_NM||"")===ie);return ke.length>0&&ke.every(dt=>dt.CHK)})(),className:"rounded"}),ie?`${ie} `:""]})]}):s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:q,onChange:ke=>ae(ke.target.value),onKeyDown:ke=>ke.key==="Enter"&&mt(),className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"  ID ",autoFocus:!0}),s.jsx("button",{onClick:mt,disabled:fe,className:"px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded-lg font-medium text-sm touch-manipulation",children:fe?"...":""})]})}),footer:ce?s.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:it,className:"py-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-semibold text-sm transition-colors touch-manipulation",children:""}),s.jsxs("button",{onClick:De,disabled:X.filter(ke=>ke.CHK).length===0,className:"py-3 bg-gradient-to-r from-blue-500 to-blue-600 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl font-semibold text-sm shadow-lg active:scale-[0.98] transition-all touch-manipulation",children:["  (",X.filter(ke=>ke.CHK).length,")"]})]}):s.jsx("button",{onClick:()=>j(!1),className:"w-full py-2.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg font-medium transition-colors touch-manipulation",children:""}),children:ce?he?s.jsx("div",{className:"py-8 text-center text-gray-500 text-sm",children:"  ..."}):X.length===0?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"    "})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-4 py-2 border-b border-gray-100 bg-gray-50",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-600 font-medium",children:":"}),s.jsxs("select",{value:ie,onChange:ke=>te(ke.target.value),className:"flex-1 text-xs border border-gray-200 rounded-lg px-2 py-1.5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsxs("option",{value:"",children:[" (",X.length,")"]}),Array.from(new Set(X.map(ke=>ke.ITEM_MID_NM||ke.EQT_CL_NM||""))).sort().map(ke=>{const dt=X.filter(et=>(et.ITEM_MID_NM||et.EQT_CL_NM||"")===ke).length;return s.jsxs("option",{value:ke,children:[ke," (",dt,")"]},ke)})]})]})}),s.jsx("div",{className:"divide-y divide-gray-100 max-h-72 overflow-y-auto",children:X.map((ke,dt)=>({item:ke,idx:dt})).filter(({item:ke})=>!ie||(ke.ITEM_MID_NM||ke.EQT_CL_NM||"")===ie).map(({item:ke,idx:dt})=>s.jsxs("div",{className:`px-4 py-3 flex items-center gap-3 ${ke.CHK?"bg-blue-50":"hover:bg-gray-50"}`,children:[s.jsx("input",{type:"checkbox",checked:ke.CHK||!1,onChange:et=>de(dt,et.target.checked),className:"rounded flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded font-medium bg-blue-100 text-blue-700",children:ke.ITEM_MID_NM||ke.EQT_CL_NM||""}),s.jsx("span",{className:"font-mono text-xs truncate text-gray-800",children:ke.EQT_SERNO||"-"})]}),s.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:ke.SO_NM||ke.SO_ID||""})]})]},ke.EQT_NO||dt))})]}):F.length===0?s.jsx("div",{className:"py-8 text-center text-gray-500 text-sm",children:fe?" ...":"  ID "}):s.jsx("div",{className:"divide-y divide-gray-100",children:F.map((ke,dt)=>s.jsxs("button",{onClick:()=>St(ke),className:"w-full px-4 py-3 text-left hover:bg-green-50 flex justify-between items-center transition-colors active:bg-green-100 touch-manipulation",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:ke.USR_NM}),s.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["(",ke.USR_ID,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[ke.SO_NM&&s.jsx("span",{className:"text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:ke.SO_NM}),ke.CORP_NM&&s.jsx("span",{className:"text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:ke.CORP_NM}),!ke.SO_NM&&!ke.CORP_NM&&s.jsx("span",{className:"text-gray-400",children:"-"})]})]}),s.jsx("span",{className:"text-xs px-2 py-1 rounded text-blue-600 bg-blue-50 font-medium",children:ke.EQT_COUNT!==void 0?`${ke.EQT_COUNT}`:""})]},dt))})}),s.jsx(kf,{isOpen:S,onClose:()=>P(!1),onScan:Ge,isMultiScanMode:!1,scanCount:L.length}),w&&Y&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${Y.failed.length===0?"bg-gradient-to-r from-green-500 to-green-600":Y.success.length===0?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-amber-500 to-amber-600"}`,children:[s.jsx("h3",{className:"font-semibold text-white text-lg",children:Y.failed.length===0?" ":Y.success.length===0?" ":" "}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[": ",Y.success.length," / : ",Y.failed.length,""]})]}),s.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto space-y-4",children:[Y.success.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-green-700 mb-2 flex items-center gap-2",children:[s.jsx(dc,{className:"w-4 h-4"})," (",Y.success.length,")"]}),s.jsx("div",{className:"space-y-1",children:Y.success.map((ke,dt)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg text-xs",children:[s.jsx("span",{className:"font-mono text-green-800",children:ke.EQT_SERNO}),s.jsx("span",{className:"text-green-600",children:ke.ITEM_NM})]},dt))})]}),Y.failed.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-red-700 mb-2 flex items-center gap-2",children:[s.jsx(bi,{className:"w-4 h-4"})," (",Y.failed.length,")"]}),s.jsx("div",{className:"space-y-1",children:Y.failed.map((ke,dt)=>s.jsxs("div",{className:"p-2 bg-red-50 rounded-lg text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-red-800",children:ke.EQT_SERNO}),s.jsx("span",{className:"text-red-600",children:ke.ITEM_NM})]}),s.jsx("div",{className:"text-red-500 mt-1",children:ke.error})]},dt))})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{se(!1),K(null)},className:"w-full py-2.5 bg-gray-800 hover:bg-gray-900 text-white rounded-lg font-medium transition-colors",children:""})})]})}),gt&&rt&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${rt.EQT_LOC_TP_NM===""?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gradient-to-r from-purple-500 to-purple-600"}`,children:[s.jsxs("h3",{className:"font-semibold text-white text-lg flex items-center gap-2",children:[s.jsx(ql,{className:"w-5 h-5"}),rt.EQT_LOC_TP_NM===""?" ":" "]}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:["  ",rt.EQT_LOC_TP_NM===""?"  ":rt.EQT_LOC_TP_NM===""?" ":" "]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"S/N"}),s.jsx("span",{className:"font-mono font-medium text-gray-900",children:rt.EQT_SERNO})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:rt.ITEM_NM||"-"})]}),rt.ITEM_MID_NM&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700",children:rt.ITEM_MID_NM})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700",children:rt.SO_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:`font-medium ${rt.EQT_LOC_TP_NM===""?"text-amber-600":rt.EQT_LOC_TP_NM===""?"text-purple-600":"text-gray-600"}`,children:rt.EQT_LOC_TP_NM})]}),rt.EQT_LOC_NM&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700 text-right max-w-[200px] truncate",children:rt.EQT_LOC_NM})]}),rt.WRKR_NM&&rt.WRKR_NM!=="-"&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700",children:rt.WRKR_NM})]}),rt.MAC_ADDRESS&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"MAC"}),s.jsx("span",{className:"font-mono text-xs text-gray-600",children:CT(rt.MAC_ADDRESS)})]})]}),rt.EQT_LOC_TP_NM===""&&s.jsx("p",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded-lg",children:"    . /   ."})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{Fe(!1),at(null)},className:"w-full py-2.5 bg-gray-800 hover:bg-gray-900 text-white rounded-lg font-medium transition-colors",children:""})})]})})]})},wK=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",PK=t=>{var n;if(!t)return"-";const e=t.replace(/[^A-Fa-f0-9]/g,"");return e.length!==12?t:((n=e.match(/.{2}/g))==null?void 0:n.join(":"))||t},AK=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},kK=({isOpen:t,onClose:e,selectedItems:n,onProcess:r,isProcessing:i,soList:l,userSoId:c,showToast:d})=>{const[u,f]=_.useState("");if(_.useEffect(()=>{t&&f("")},[t]),!t)return null;const m=()=>{if(!u){d==null||d("      .","warning");return}r("1",u)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-green-500 to-green-600",children:[s.jsx("h3",{className:"font-semibold text-white",children:"  "}),s.jsxs("p",{className:"text-xs text-white/80 mt-1",children:[n.length,"  "]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-32 overflow-y-auto",children:n.map((p,y)=>s.jsxs("div",{className:"text-xs text-gray-600 py-1 border-b border-gray-100 last:border-0",children:[s.jsx("span",{className:"font-mono font-medium",children:p.EQT_SERNO}),s.jsx("span",{className:"text-gray-400 ml-2",children:p.CUST_NM})]},y))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-700",children:"  "}),s.jsxs("select",{value:u,onChange:p=>f(p.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:i,children:[s.jsx("option",{value:"",children:" "}),l.map(p=>s.jsxs("option",{value:p.SO_ID,children:[p.SO_NM," (",p.SO_ID,")"]},p.SO_ID))]})]}),s.jsxs("button",{onClick:m,disabled:i,className:"w-full py-3 text-sm text-white bg-green-500 hover:bg-green-600 disabled:bg-gray-300 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx(dc,{className:"w-4 h-4"}),i?" ...":" "]}),s.jsx("button",{onClick:e,disabled:i,className:"w-full py-2.5 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:""})]})]})})},UK=({isOpen:t,onClose:e,onSelect:n,onSerialSearch:r})=>{const[i,l]=_.useState(""),[c,d]=_.useState(""),[u,f]=_.useState(""),[m,p]=_.useState(""),[y,g]=_.useState(""),[N,C]=_.useState(!1),[v,R]=_.useState([]),[A,M]=_.useState(!1),[L,k]=_.useState(!1),[V,G]=_.useState(null),W=P=>{g(P.toUpperCase()),k(!1)};if(!t)return null;const j=async()=>{G(null);const P=i.length>=4,F=c.length>=4,ee=u.length>=4,J=m.length>=2,$=ee&&J,Y=y.length>=4;if(ee&&!J||!ee&&J){G(`   .
( 4 ,  2 )`);return}if(!P&&!F&&!$&&!Y){G(`    .
 ID (4 )
 ID (4 )
  +  (  )
 S/N (4 )`);return}let K="PHONE_NAME";P?K="CUSTOMER_ID":F?K="CONTRACT_ID":Y&&(K="EQUIPMENT_NO"),C(!0),M(!0);try{const w=await C9({searchType:K,customerId:P?i:void 0,contractId:F?c:void 0,phoneNumber:$?u:void 0,customerName:$?m:void 0,equipmentNo:Y?y:void 0});if(w.success&&w.data&&w.data.length>0)R(w.data);else if(Y&&r){r(y),e();return}else R([])}catch(w){if(console.error("Customer search error:",w),Y&&r){r(y),e();return}R([])}finally{C(!1)}},S=P=>{P.key==="Enter"&&j()};return s.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden max-h-[80vh] flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-gray-100 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0",children:s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(Oh,{className:"w-4 h-4"})," "]})}),s.jsxs("div",{className:"p-4 space-y-3 flex-1 overflow-y-auto min-h-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:i,onChange:P=>{l(P.target.value),G(null)},onKeyPress:S,placeholder:"ID",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:c,onChange:P=>{d(P.target.value),G(null)},onKeyPress:S,placeholder:"ID",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex gap-2 min-w-0",children:[s.jsx("input",{type:"tel",value:u,onChange:P=>{f(P.target.value.replace(/[^0-9]/g,"")),G(null)},onKeyPress:S,placeholder:"",className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",value:m,onChange:P=>{p(P.target.value),G(null)},onKeyPress:S,placeholder:"",className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:y,onChange:P=>{g(P.target.value.toUpperCase()),G(null)},onKeyPress:S,placeholder:"S/N  MAC  ",className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono"}),s.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),V&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-red-600 text-sm whitespace-pre-line",children:V})}),A&&s.jsx("div",{className:"border-t border-gray-100 pt-3",children:v.length>0?s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",v.length,""]}),v.map((P,F)=>s.jsxs("button",{onClick:()=>{p(P.CUST_NM),n({CUST_ID:P.CUST_ID,CUST_NM:P.CUST_NM}),e()},className:"w-full p-3 bg-gray-50 hover:bg-blue-50 rounded-lg border border-gray-200 hover:border-blue-300 text-left transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-blue-600 font-mono text-sm",children:P.CUST_ID}),s.jsx("span",{className:"font-semibold text-gray-900",children:P.CUST_NM})]}),(P.INST_ADDR||P.ADDR||P.ADDRESS)&&s.jsx("div",{className:"mt-1 text-xs text-gray-500 truncate",children:P.INST_ADDR||P.ADDR||P.ADDRESS})]},P.CUST_ID||F))]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."})})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-white flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:j,disabled:N,className:"flex-1 py-2.5 text-sm text-white bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 rounded-lg font-medium flex items-center justify-center",children:N?" ...":""}),s.jsx("button",{onClick:e,className:"flex-1 py-2.5 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:""})]})})]}),s.jsx(kf,{isOpen:L,onClose:()=>k(!1),onScan:W})]})},WK=({onBack:t,showToast:e})=>{const[n,r]=_.useState({CUST_ID:"",CUST_NM:"",PHONE_NO:"",EQT_CL_CD:"",EQT_SERNO:""}),[i,l]=_.useState(!1),[c,d]=_.useState(null),[u,f]=_.useState([]),[m,p]=_.useState(!1),[y,g]=_.useState(!1),[N,C]=_.useState(!1),[v,R]=_.useState(!1),[A,M]=_.useState([]),[L,k]=_.useState([]),[V,G]=_.useState(""),[W,j]=_.useState("simple"),[S,P]=_.useState("all"),[F,ee]=_.useState(new Set),J=X=>{if(!X)return"";if(X==="100")return"";const me=/^\d+$/.test(X);if(!me&&L.find(ie=>ie.SO_NM===X))return X;const he=L.find(Z=>Z.SO_ID===X);return he&&he.SO_NM?he.SO_NM:me?`(${X})`:X},$=X=>{ee(me=>{const he=new Set(Array.from(me));return he.has(X)?he.delete(X):he.add(X),he})},Y=X=>X.EQT_STAT_CD_NM===""?!0:X.LOSS_AMT!==""&&X.LOSS_AMT!=="0"&&Number(X.LOSS_AMT)>0,w=S==="all"?u:S==="lost"?u.filter(X=>Y(X)):u.filter(X=>!Y(X)),se=u.filter(X=>Y(X)).length;u.length-se;const oe=w.reduce((X,me,he)=>{var re,pe,Se,st;let Z="";const ie=(re=me.SO_NM)==null?void 0:re.trim(),te=(pe=me.MST_SO_NM)==null?void 0:pe.trim(),je=(Se=me.SO_ID)==null?void 0:Se.trim(),be=(st=me.MST_SO_ID)==null?void 0:st.trim();ie&&ie!=="100"?Z=ie:te&&te!=="100"?Z=te:je==="100"||be==="100"||ie==="100"||te==="100"?Z="":je&&(Z=je);const Te=me.BIZ_CL_NM||me.ITEM_MID_NM||me.EQT_CL_NM||"";return X[Z]||(X[Z]={}),X[Z][Te]||(X[Z][Te]=[]),X[Z][Te].push({...me,_globalIdx:he}),X},{});Object.keys(oe).forEach(X=>{Object.keys(oe[X]).forEach(me=>{oe[X][me].sort((he,Z)=>{const ie=he.EQT_CL_NM||he.ITEM_NM||"",te=Z.EQT_CL_NM||Z.ITEM_NM||"";return ie.localeCompare(te)})})});const T=Object.keys(oe).sort(),I=(X,me)=>{f(u.map(he=>{const Z=he.SO_NM||he.SO_ID||"",ie=Y(he);return Z===X&&ie?{...he,CHK:me}:he}))},U=(X,me,he)=>{f(u.map(Z=>{const ie=Z.SO_NM||Z.SO_ID||"",te=Z.BIZ_CL_NM||Z.ITEM_MID_NM||Z.EQT_CL_NM||"",je=Y(Z);return ie===X&&te===me&&je?{...Z,CHK:he}:Z}))};_.useEffect(()=>{(()=>{try{const me=sessionStorage.getItem("userInfo");if(me){const ie=JSON.parse(me),te=ie.soId||ie.SO_ID||"";te&&(G(te),console.log("[]   :",te))}const he=localStorage.getItem("branchList");if(he){const ie=JSON.parse(he);if(Array.isArray(ie)&&ie.length>0){console.log("[] branchList   :",ie.length,"");const te=ie.map(be=>({SO_ID:be.SO_ID||be.soId||"",SO_NM:be.SO_NM||be.soNm||be.SO_ID||""})).filter(be=>be.SO_ID),je=new Set;ie.forEach(be=>{const Te=be.MST_SO_ID||be.mstSoId;Te&&!te.some(re=>re.SO_ID===Te)&&je.add(Te)}),je.forEach(be=>{te.push({SO_ID:be,SO_NM:""})}),k(te);return}}const Z=localStorage.getItem("userInfo");if(Z){const ie=JSON.parse(Z),te=ie.authSoList||ie.AUTH_SO_List||[];if(Array.isArray(te)&&te.length>0){console.log("[] authSoList   :",te.length,"");const je=te.map(Te=>({SO_ID:Te.SO_ID||Te.soId||"",SO_NM:Te.SO_NM||Te.soNm||Te.SO_ID||""})).filter(Te=>Te.SO_ID),be=new Set;te.forEach(Te=>{const re=Te.MST_SO_ID||Te.mstSoId;re&&!je.some(pe=>pe.SO_ID===re)&&be.add(re)}),be.forEach(Te=>{je.push({SO_ID:Te,SO_NM:""})}),k(je);return}}if(me){const ie=JSON.parse(me),te=ie.authSoList||ie.AUTH_SO_List||[];if(Array.isArray(te)&&te.length>0){console.log("[] sessionStorage authSoList   :",te.length,"");const re=te.map(Se=>({SO_ID:Se.SO_ID||Se.soId||"",SO_NM:Se.SO_NM||Se.soNm||Se.SO_ID||""})).filter(Se=>Se.SO_ID),pe=new Set;te.forEach(Se=>{const st=Se.MST_SO_ID||Se.mstSoId;st&&!re.some(Nt=>Nt.SO_ID===st)&&pe.add(st)}),pe.forEach(Se=>{re.push({SO_ID:Se,SO_NM:""})}),k(re);return}const je=JSON.parse(me),be=je.soId||je.SO_ID,Te=je.soNm||je.SO_NM||be;if(be){console.log("[]  SO  :",be,Te),k([{SO_ID:be,SO_NM:Te}]);return}}console.log("[]   ")}catch(me){console.error("[] SO list load failed:",me)}})()},[]);const Q=async X=>{p(!0);try{M(Z=>[...new Set([X,...Z])]);const me={EQT_SERNO:X},he=await pi("EquipmentRecovery","getUnreturnedEquipmentList (barcode)",()=>J1(me),me);if(he&&he.length>0){const Z=he.map(ie=>{var te,je;return{CHK:ie.EQT_SERNO===X,CUST_ID:ie.CUST_ID||"",CUST_NM:ie.CUST_NM||"",CTRT_ID:ie.CTRT_ID||"",EQT_NO:ie.EQT_NO||"",EQT_SERNO:ie.EQT_SERNO||"",EQT_CL_CD:ie.EQT_CL_CD||ie.EQT_CL||"",EQT_CL_NM:ie.EQT_CL_NM||ie.EQT_NM||"",ITEM_NM:ie.ITEM_NM||ie.EQT_NM||"",TRML_DT:ie.TRML_DT||((je=(te=ie.CMPL_DATE)==null?void 0:te.split(" ")[0])==null?void 0:je.replace(/-/g,""))||"",WRK_ID:ie.WRK_ID||"",WRKR_ID:ie.WRKR_ID||"",WRKR_NM:ie.WRKR_NM||"",SO_ID:ie.SO_ID||"",SO_NM:ie.SO_NM||J(ie.SO_ID)||"",PHONE_NO:ie.PHONE_NO||ie.TEL_NO||ie.TEL_NO_1||"",ADDRESS:ie.ADDRESS||ie.WORK_ADDR||ie.CTRT_ADDR||"",RETN_REQ_YN:ie.RETN_REQ_YN||"",LOSS_AMT:ie.LOSS_AMT||"",CRR_ID:ie.CRR_ID||"",CMPL_DATE:ie.CMPL_DATE||"",EQT_STAT_CD_NM:ie.EQT_STAT_NM||ie.EQT_STAT_CD_NM||"",isScanned:ie.EQT_SERNO===X,MAC_ADDRESS:ie.MAC_ADDRESS||ie.MAC_ADDR||"",EQT_USE_END_DT:ie.EQT_USE_END_DT||"",CHG_KND_NM:ie.CHG_KND_NM||"",EQT_LOC_NM:ie.EQT_LOC_NM||"",EQT_LOC_TP_NM:ie.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:ie.OLD_EQT_LOC_NM||"",ITEM_MODEL:ie.ITEM_MODEL||ie.MODEL_NM||"",EQT_USE_ARR_YN:ie.EQT_USE_ARR_YN||"",BIZ_CL_NM:ie.BIZ_CL_NM||"",MST_SO_ID:ie.MST_SO_ID||"",MST_SO_NM:ie.MST_SO_NM||""}});f(Z)}else{const Z=await pi("EquipmentRecovery","getEquipmentHistoryInfo",()=>yf({EQT_SERNO:X}),{EQT_SERNO:X});if(Z&&Z.length>0){const ie=Z[0];e==null||e(` (${X})   . : ${ie.EQT_STAT_NM||ie.EQT_STAT_CD_NM||"  "}`,"warning")}else e==null||e(` (${X})   .`,"error");f([])}}catch(me){console.error("Barcode scan failed:",me),e==null||e("  .","error")}finally{p(!1)}},H=X=>{f([]),M([]),d(X),r({...n,CUST_ID:X.CUST_ID,CUST_NM:X.CUST_NM})},q=async()=>{if(!n.EQT_SERNO&&!c){e==null||e("  S/N .","warning");return}p(!0);try{const X={};n.EQT_SERNO&&(X.EQT_SERNO=n.EQT_SERNO),c&&(X.CUST_ID=c.CUST_ID);const me=await pi("EquipmentRecovery","getUnreturnedEquipmentList",()=>J1(X),X);if(!c&&n.EQT_SERNO&&me&&me.length>0){const Z=me[0];Z.CUST_ID&&Z.CUST_NM&&d({CUST_ID:Z.CUST_ID,CUST_NM:Z.CUST_NM})}const he=(me||[]).map(Z=>{var ie,te;return{CHK:A.includes(Z.EQT_SERNO),CUST_ID:Z.CUST_ID||"",CUST_NM:Z.CUST_NM||"",CTRT_ID:Z.CTRT_ID||"",EQT_NO:Z.EQT_NO||"",EQT_SERNO:Z.EQT_SERNO||"",EQT_CL_CD:Z.EQT_CL_CD||Z.EQT_CL||"",EQT_CL_NM:Z.EQT_CL_NM||Z.EQT_NM||"",ITEM_NM:Z.ITEM_NM||Z.EQT_NM||"",TRML_DT:Z.TRML_DT||((te=(ie=Z.CMPL_DATE)==null?void 0:ie.split(" ")[0])==null?void 0:te.replace(/-/g,""))||"",WRK_ID:Z.WRK_ID||"",WRKR_ID:Z.WRKR_ID||"",WRKR_NM:Z.WRKR_NM||"",SO_ID:Z.SO_ID||"",SO_NM:Z.SO_NM||J(Z.SO_ID)||"",PHONE_NO:Z.PHONE_NO||Z.TEL_NO||Z.TEL_NO_1||"",ADDRESS:Z.ADDRESS||Z.WORK_ADDR||Z.CTRT_ADDR||"",RETN_REQ_YN:Z.RETN_REQ_YN||"",LOSS_AMT:Z.LOSS_AMT||"",CRR_ID:Z.CRR_ID||"",CMPL_DATE:Z.CMPL_DATE||"",EQT_STAT_CD_NM:Z.EQT_STAT_NM||Z.EQT_STAT_CD_NM||"",isScanned:A.includes(Z.EQT_SERNO),MAC_ADDRESS:Z.MAC_ADDRESS||Z.MAC_ADDR||"",EQT_USE_END_DT:Z.EQT_USE_END_DT||"",CHG_KND_NM:Z.CHG_KND_NM||"",EQT_LOC_NM:Z.EQT_LOC_NM||"",EQT_LOC_TP_NM:Z.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:Z.OLD_EQT_LOC_NM||"",ITEM_MODEL:Z.ITEM_MODEL||Z.MODEL_NM||"",EQT_USE_ARR_YN:Z.EQT_USE_ARR_YN||"",BIZ_CL_NM:Z.BIZ_CL_NM||"",MST_SO_ID:Z.MST_SO_ID||"",MST_SO_NM:Z.MST_SO_NM||""}});he.sort((Z,ie)=>Z.isScanned&&!ie.isScanned?-1:!Z.isScanned&&ie.isScanned?1:0),f(he)}catch(X){console.error("Unreturned equipment lookup failed:",X),e==null||e("  .","error"),f([])}finally{p(!1)}},ae=async(X,me)=>{const he=u.filter(Z=>Z.CHK);if(he.length!==0){R(!0);try{let Z=0,ie=0;for(const te of he)try{if(!te.EQT_NO||te.EQT_NO.length!==20||!/^\d+$/.test(te.EQT_NO)){console.warn("Invalid EQT_NO format:",te.EQT_SERNO,te.EQT_NO),ie++;continue}const je=typeof window<"u"?sessionStorage.getItem("userInfo"):null,be=je?JSON.parse(je):{},Te=new Date().toISOString().slice(0,10).replace(/-/g,""),re={EQT_NO:te.EQT_NO,EQT_SERNO:te.EQT_SERNO,PROC_CL:X,CUST_ID:te.CUST_ID,CTRT_ID:te.CTRT_ID,WRK_ID:te.WRK_ID,CRR_ID:te.CRR_ID||be.crrId||"",WRKR_ID:te.WRKR_ID||be.userId||"",SO_ID:me||te.SO_ID||be.soId||"",CHG_UID:be.userId||"",PROC_UID_SO_ID:me||be.soId||te.SO_ID||"",RTN_DD:Te,RTN_TP:"3",STTL_YN:"N",BILL_YN:te.BILL_YN||"N",RCPT_YN:te.RCPT_YN||"0",EQT_PROD_CMPS_ID:te.EQT_PROD_CMPS_ID||"",BASIC_PROD_CMPS_ID:te.BASIC_PROD_CMPS_ID||"",EQT_CL_CD:te.EQT_CL_CD||te.EQT_CL||"",EQT_USE_STAT_CD:te.EQT_USE_STAT_CD||"1",SVC_CD:te.SVC_CD||"",IF_DTL_ID:te.IF_DTL_ID||"0000000000"};await pi("EquipmentRecovery","processEquipmentRecovery",()=>E4(re),re),Z++}catch(je){console.error("Recovery process failed:",te.EQT_SERNO,je);const be=(je==null?void 0:je.message)||(je==null?void 0:je.toString())||"";if(be.includes("    ")||be.includes("ORA-30926")){console.log("[Workaround] Oracle    ,     ...");try{await new Promise(Se=>setTimeout(Se,500));const Te=await yf({EQT_SERNO:te.EQT_SERNO}),re=Array.isArray(Te)?Te[0]:Te,pe=(re==null?void 0:re.CHG_KND_CD_NM)||(re==null?void 0:re.CHG_KND_NM)||"";console.log("[Workaround]   :",te.EQT_SERNO,"- CHG_KND_NM:",pe),pe.includes("")||pe.includes("")||pe==="SO"?(console.log("[Workaround]     :",te.EQT_SERNO),Z++):console.log("[Workaround]    ,  :",pe)}catch(Te){console.error("[Workaround]  :",Te)}}}if(Z>0){let te=Z+"  ";ie>0&&(te+=` (${ie} )`),e==null||e(te,"success"),C(!1),M([]),q()}else throw new Error(" ")}catch(Z){console.error("Recovery process failed:",Z),e==null||e(" .","error")}finally{R(!1)}}},fe=X=>{f(u.map(me=>{const he=Y(me);return{...me,CHK:he?X:!1}}))},ge=(X,me)=>{const he=[...u],Z=he[X];Y(Z)&&(he[X].CHK=me,f(he))},ce=u.filter(X=>X.CHK).length,Re=X=>{const me=Y(X),he=me,Z=u.findIndex(ie=>ie.EQT_SERNO===X.EQT_SERNO);return s.jsxs("div",{onClick:()=>he&&ge(Z,!X.CHK),className:`p-3 rounded-lg border-2 transition-all ${he?"cursor-pointer":"cursor-not-allowed opacity-70"} ${X.CHK?"bg-blue-50 border-blue-400":X.isScanned?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:X.CHK||!1,onChange:ie=>{ie.stopPropagation(),ge(Z,ie.target.checked)},disabled:!he,className:`w-5 h-5 rounded focus:ring-blue-500 mt-0.5 ${he?"text-blue-500":"text-gray-300 cursor-not-allowed"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 truncate",children:X.EQT_CL_NM||X.ITEM_NM||"-"}),X.isScanned&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700 flex-shrink-0",children:""})]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${me?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:me?"":X.EQT_STAT_CD_NM||""})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),X.EQT_SERNO||"-"]}),(()=>{const ie=X.EQT_USE_ARR_YN;if(!ie)return null;let te="bg-gray-100 text-gray-700",je=ie;return ie==="Y"?(te="bg-green-100 text-green-700",je=""):ie==="A"?(te="bg-purple-100 text-purple-700",je=""):ie==="N"?(te="bg-red-100 text-red-700",je=""):ie==="W"?(te="bg-blue-100 text-blue-700",je=""):ie==="R"?(te="bg-yellow-100 text-yellow-700",je=""):ie==="D"&&(te="bg-orange-100 text-orange-700",je=""),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${te}`,children:je})})()]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),PK(X.MAC_ADDRESS)||"-"]}),s.jsx("span",{className:"text-sm text-gray-600",children:wK(X.EQT_USE_END_DT||"")})]})]})]}),W==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:X.ITEM_MODEL||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:J(X.SO_NM||X.SO_ID)||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:X.EQT_STAT_CD_NM||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:X.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:X.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:X.EQT_LOC_NM||X.EQT_LOC_TP_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:X.OLD_EQT_LOC_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"ID    : "}),s.jsx("span",{className:"text-gray-800 font-mono",children:AK(X.CTRT_ID)})]})]})]},X._globalIdx)};return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[A.length>0&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium text-orange-700",children:["  (",A.length,")"]}),s.jsx("button",{onClick:()=>M([]),className:"text-xs text-orange-600 hover:text-orange-800",children:""})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:A.map((X,me)=>s.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-md font-mono",children:X},me))})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{onClick:()=>l(!0),className:"flex-1 flex gap-2 cursor-pointer min-w-0 overflow-hidden",children:[s.jsx("input",{type:"text",value:(c==null?void 0:c.CUST_NM)||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer truncate",placeholder:""}),s.jsx("input",{type:"text",value:(c==null?void 0:c.CUST_ID)||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer",placeholder:"ID"})]}),c&&s.jsx("button",{onClick:X=>{X.stopPropagation(),d(null),r({...n,CUST_ID:"",CUST_NM:""}),f([])},className:"w-9 h-9 flex items-center justify-center text-red-500 bg-red-50 hover:bg-red-100 rounded-lg transition-all flex-shrink-0",title:" ",children:s.jsx(bi,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:n.EQT_SERNO,onChange:X=>r({...n,EQT_SERNO:X.target.value.toUpperCase()}),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono",placeholder:"S/N  MAC  "}),s.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),s.jsx("button",{onClick:q,disabled:m||!c&&!n.EQT_SERNO,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-3 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:m?" ...":""})]})}),u.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:X=>fe(X.target.checked),checked:w.length>0&&w.filter(X=>Y(X)).every(X=>X.CHK),className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[w.length," (: ",ce,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>j("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${W==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>j("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${W==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>P("all"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${S==="all"?"bg-white text-orange-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[" (",u.length,")"]}),s.jsxs("button",{onClick:()=>P("lost"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${S==="lost"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[" (",se,")"]})]})}),s.jsx("div",{className:"divide-y divide-gray-100",children:T.map(X=>{const me=oe[X],he=Object.keys(me).sort(),Z=he.reduce((be,Te)=>be+me[Te].length,0),ie=he.reduce((be,Te)=>be+me[Te].filter(re=>re.CHK).length,0),te=he.reduce((be,Te)=>be+me[Te].filter(re=>Y(re)).length,0),je=F.has(`so_${X}`);return s.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 flex items-center justify-between cursor-pointer hover:bg-blue-100",onClick:()=>$(`so_${X}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:te>0&&ie===te,onChange:be=>{be.stopPropagation(),I(X,be.target.checked)},onClick:be=>be.stopPropagation(),className:"rounded",disabled:te===0}),s.jsx("span",{className:"text-sm font-bold text-blue-800",children:J(X)}),s.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:[Z,""]})]}),je?s.jsx(or,{className:"w-4 h-4 text-blue-600"}):s.jsx(Wr,{className:"w-4 h-4 text-blue-600"})]}),!je&&he.map(be=>{const Te=me[be],re=Te.filter(st=>Y(st)).length,pe=Te.filter(st=>st.CHK).length,Se=F.has(`so_${X}_type_${be}`);return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>$(`so_${X}_type_${be}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:re>0&&pe===re,onChange:st=>{st.stopPropagation(),U(X,be,st.target.checked)},onClick:st=>st.stopPropagation(),className:"rounded",disabled:re===0}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:be}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[Te.length,""]})]}),Se?s.jsx(or,{className:"w-3 h-3 text-gray-500"}):s.jsx(Wr,{className:"w-3 h-3 text-gray-500"})]}),!Se&&s.jsx("div",{className:"space-y-2",children:Te.map(st=>Re(st))})]},be)})]},X)})})]}),s.jsx("div",{className:"h-20"})]}):s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:m?" ...":"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"     "})]})}),u.length>0&&s.jsx("div",{className:"fixed bottom-[56px] left-0 right-0 p-3 z-40",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsxs("button",{onClick:()=>C(!0),disabled:ce===0,className:`w-full py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation flex items-center justify-center gap-2 ${ce>0?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx(dc,{className:"w-4 h-4"}),"  ",ce>0&&`(${ce})`]})}),s.jsx(kf,{isOpen:y,onClose:()=>g(!1),onScan:Q}),s.jsx(kK,{isOpen:N,onClose:()=>C(!1),selectedItems:u.filter(X=>X.CHK),onProcess:ae,isProcessing:v,soList:L,userSoId:V,showToast:e}),s.jsx(UK,{isOpen:i,onClose:()=>l(!1),onSelect:H,onSerialSearch:X=>{r({...n,EQT_SERNO:X}),l(!1),setTimeout(()=>{const me={EQT_SERNO:X};p(!0),J1(me).then(he=>{if(he&&he.length>0){const Z=he[0];Z.CUST_ID&&Z.CUST_NM&&d({CUST_ID:Z.CUST_ID,CUST_NM:Z.CUST_NM}),f(he.map(ie=>{var te,je;return{CHK:!1,CUST_ID:ie.CUST_ID||"",CUST_NM:ie.CUST_NM||"",CTRT_ID:ie.CTRT_ID||"",EQT_NO:ie.EQT_NO||"",EQT_SERNO:ie.EQT_SERNO||"",EQT_CL_CD:ie.EQT_CL_CD||ie.EQT_CL||"",EQT_CL_NM:ie.EQT_CL_NM||ie.EQT_NM||"",ITEM_NM:ie.ITEM_NM||ie.EQT_NM||"",TRML_DT:ie.TRML_DT||((je=(te=ie.CMPL_DATE)==null?void 0:te.split(" ")[0])==null?void 0:je.replace(/-/g,""))||"",WRK_ID:ie.WRK_ID||"",WRKR_ID:ie.WRKR_ID||"",WRKR_NM:ie.WRKR_NM||"",SO_ID:ie.SO_ID||"",SO_NM:ie.SO_NM||J(ie.SO_ID)||"",PHONE_NO:ie.PHONE_NO||ie.TEL_NO||ie.TEL_NO_1||"",ADDRESS:ie.ADDRESS||ie.WORK_ADDR||ie.CTRT_ADDR||"",RETN_REQ_YN:ie.RETN_REQ_YN||"",LOSS_AMT:ie.LOSS_AMT||"",CRR_ID:ie.CRR_ID||"",CMPL_DATE:ie.CMPL_DATE||"",EQT_STAT_CD_NM:ie.EQT_STAT_NM||ie.EQT_STAT_CD_NM||"",isScanned:!1,MAC_ADDRESS:ie.MAC_ADDRESS||ie.MAC_ADDR||"",EQT_USE_END_DT:ie.EQT_USE_END_DT||"",CHG_KND_NM:ie.CHG_KND_NM||"",EQT_LOC_NM:ie.EQT_LOC_NM||"",EQT_LOC_TP_NM:ie.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:ie.OLD_EQT_LOC_NM||"",ITEM_MODEL:ie.ITEM_MODEL||ie.MODEL_NM||"",EQT_USE_ARR_YN:ie.EQT_USE_ARR_YN||"",BIZ_CL_NM:ie.BIZ_CL_NM||"",MST_SO_ID:ie.MST_SO_ID||"",MST_SO_NM:ie.MST_SO_NM||""}})),e==null||e(`${he.length}   .`,"success")}else e==null||e(` (${X})   .`,"error"),f([])}).catch(()=>{e==null||e("  .","error")}).finally(()=>p(!1))},100)}})]})},BK={10:"",11:"()",20:"",35:"",50:"",60:"",70:"",71:"",72:"",73:"AS",74:"",75:"",80:"",81:"",82:"",83:"",84:"",90:""},FK={1:"SO()",2:"",3:"",4:""},KK=t=>BK[t]||t,yT=t=>FK[t]||t,P0=t=>{const e={...t};return e.EQT_STAT_CD&&!e.EQT_STAT_CD_NM&&(e.EQT_STAT_CD_NM=KK(e.EQT_STAT_CD)),e.EQT_LOC_TP_CD&&!e.EQT_LOC_TP_CD_NM&&(e.EQT_LOC_TP_CD_NM=yT(e.EQT_LOC_TP_CD)),e.OLD_EQT_LOC_TP_CD&&!e.OLD_EQT_LOC_TP_CD_NM&&(e.OLD_EQT_LOC_TP_CD_NM=yT(e.OLD_EQT_LOC_TP_CD)),e},ty=t=>{if(!t)return{name:"-",id:""};const e=t.match(/^(.+?)\(([A-Za-z0-9]+)\)$/);return e?{name:e[1],id:e[2]}:{name:t,id:""}},QK=({onBack:t,showToast:e})=>{const[n,r]=_.useState(""),[i,l]=_.useState(!1),[c,d]=_.useState(null),[u,f]=_.useState(null),[m,p]=_.useState(null),[y,g]=_.useState([]),[N,C]=_.useState(!1),[v,R]=_.useState("manual"),[A,M]=_.useState(!1),[L,k]=_.useState([]),[V,G]=_.useState([]),W=v==="multi",j=Gi.useRef(new Set),[S,P]=_.useState(0),[F,ee]=_.useState([]),J="1644-1100",[$,Y]=_.useState(!1),[K,w]=_.useState(!1),se=Gi.useRef(null),oe=()=>{try{const X=localStorage.getItem("user");if(X){const me=JSON.parse(X),he=me.USR_ID||me.WRKR_ID||me.userId||null,Z=me.soId||me.SO_ID||null,ie=me.AUTH_SO_List||null;return console.log("[]  :",{userId:he,soId:Z||"()",authSoListCount:(ie==null?void 0:ie.length)||0}),he?{userId:he,soId:Z,authSoList:ie}:null}}catch(X){console.warn("   :",X)}return null};_.useEffect(()=>{(async()=>{const me=oe();if(me){C(!0);try{let he=[];if(me.soId){const Z={WRKR_ID:me.userId,SO_ID:me.soId};console.log("[]  - SO_ID :",Z);const ie=await pi("EquipmentList","getWrkrHaveEqtList",()=>Bm(Z),Z);he=Array.isArray(ie)?ie:(ie==null?void 0:ie.data)||[]}else if(me.authSoList&&me.authSoList.length>0){console.log("[]  - AUTH_SO_List :",me.authSoList);for(const ie of me.authSoList)try{const te={WRKR_ID:me.userId,SO_ID:ie.SO_ID},je=await pi("EquipmentList",`getWrkrHaveEqtList(SO_ID=${ie.SO_ID})`,()=>Bm(te),te),Te=(Array.isArray(je)?je:(je==null?void 0:je.data)||[]).filter(re=>re.WRKR_ID===me.userId||re.ID===me.userId);he=[...he,...Te]}catch(te){console.warn(`SO_ID ${ie.SO_ID}  :`,te)}const Z=new Map;he.forEach(ie=>{ie.EQT_SERNO&&!Z.has(ie.EQT_SERNO)&&Z.set(ie.EQT_SERNO,ie)}),he=Array.from(Z.values()),console.log("[]   :",he.length,"")}else{const Z={WRKR_ID:me.userId};console.log("[]   (SO_ID ):",Z);const ie=await pi("EquipmentList","getWrkrHaveEqtList",()=>Bm(Z),Z);he=Array.isArray(ie)?ie:(ie==null?void 0:ie.data)||[]}g(he)}catch(he){console.warn("    :",he)}finally{C(!1)}}})()},[]);const T=X=>{const me=X.toUpperCase().replace(/[:-]/g,"");for(const he of y){const Z=(he.EQT_SERNO||he.SERIAL_NO||he.SN||"").toUpperCase().replace(/[:-]/g,"");if(Z&&Z.includes(me))return he;const ie=(he.MAC_ADDRESS||he.MAC||he.MAC_ADDR||"").toUpperCase().replace(/[:-]/g,"");if(ie&&ie.includes(me))return he;const te=(he.EQT_NO||"").toUpperCase();if(te&&te.includes(me))return he}return null},I=async X=>{console.log("Barcode scanned:",X);const me=X.toUpperCase().replace(/[:-]/g,"");if(W){if(j.current.has(me)){e==null||e("  .","warning");return}j.current.add(me),P(j.current.size)}r(X.toUpperCase()),W||w(!1),e==null||e(` : ${X}`,"success");const he=X.toUpperCase();setTimeout(()=>{U(he)},100)},U=async X=>{const me=X||n.trim();if(!me){e==null||e(" .","warning");return}l(!0),p(null),W||d(null),f(null);const he=String(me||""),Z=typeof he=="string"&&he.includes(",")?[...new Set(he.split(",").map(be=>be.trim().toUpperCase().replace(/[\s:-]/g,"")).filter(be=>be.length>0))]:[he.toUpperCase().replace(/[\s:-]/g,"")].filter(be=>be.length>0);if(Z.length===0){e==null||e(" S/N .","warning"),l(!1);return}const ie=async be=>{if(y.length>0){const Te=T(be);if(Te)return{found:!0,equipment:Te,source:"myEquipments"}}try{const Te=oe(),re={EQT_SERNO:be,SO_ID:(Te==null?void 0:Te.soId)||void 0,WRKR_ID:Te==null?void 0:Te.userId},pe=await pi("EquipmentList","getEquipmentHistoryInfo",()=>yf(re),re);if(pe){const Se=Array.isArray(pe)?pe:[pe];if(Se.length>1)return{found:!0,equipments:Se,source:"getEquipmentHistoryInfo",isMultiple:!0};if(Se.length===1)return{found:!0,equipment:Se[0],source:"getEquipmentHistoryInfo"}}}catch(Te){console.error("[]  :",be,Te)}return{found:!1}};if(console.log("[]  :",{searchValues:Z,count:Z.length,isMultiScanMode:W}),Z.length>1){const be=await Promise.all(Z.map(async pe=>({searchVal:pe,...await ie(pe)}))),Te=[],re=[];if(be.forEach(({searchVal:pe,found:Se,equipment:st})=>{Se&&st?Te.push(st):re.push(pe)}),console.log("[]   :",{found:Te.length,notFound:re.length}),Te.length>0){const pe=[];Te.forEach(Se=>{V.some(Nt=>Nt.EQT_SERNO===Se.EQT_SERNO||Nt.EQT_NO===Se.EQT_NO||Nt.MAC_ADDRESS&&Se.MAC_ADDRESS&&Nt.MAC_ADDRESS===Se.MAC_ADDRESS)||pe.push(Se)}),pe.length>0&&(G(Se=>[...Se,...pe]),pe.forEach(Se=>{const st=(Se.EQT_SERNO||"").toUpperCase().replace(/[:-]/g,"");st&&j.current.add(st)}),P(j.current.size)),re.length>0&&ee(Se=>{const st=Array.isArray(Se)?Se:[];return[...st,...re.filter(Nt=>!st.includes(Nt))]}),Y(!0),d(null),r(""),e==null||e(`${pe.length}  ${re.length>0?`, ${re.length} `:""}`,"success")}else ee(pe=>{const Se=Array.isArray(pe)?pe:[];return[...Se,...re.filter(st=>!Se.includes(st))]}),p("     ."),e==null||e("   .","error");l(!1);return}const te=Z[0],je=await ie(te);if(je.found){if(je.isMultiple&&je.equipments&&je.equipments.length>1){k(je.equipments),M(!0),r(""),e==null||e(`${je.equipments.length}  . .`,"info"),l(!1);return}const be=je.equipment;if(be)if(W)if(ge(be)){const re=Array.from(j.current).join(", ");r(re),e==null||e(` . (${V.length+1})`,"success")}else{const re=te.toUpperCase().replace(/[\s:-]/g,"");j.current.delete(re),P(j.current.size);const pe=Array.from(j.current).join(", ");r(pe||"")}else d(P0(be)),f({successApi:je.source,data:be,source:je.source}),e==null||e("  .","success")}else if(W){j.current.delete(te),P(j.current.size),ee(Te=>{const re=Array.isArray(Te)?Te:[];return re.includes(te)?re:[...re,te]});const be=Array.from(j.current).join(", ");r(be),e==null||e("   .","error")}else p("   . S/N  MAC  ."),e==null||e("   .","error");l(!1)},Q=({label:X,value:me})=>s.jsxs("div",{className:"flex border-b border-gray-100 py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-gray-500",children:X}),s.jsx("span",{className:"flex-1 text-xs text-gray-900 font-medium break-all",children:me||"-"})]}),H=({title:X})=>s.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white px-3 py-2 -mx-4 mt-4 mb-2 first:mt-0 border-y border-gray-100",children:s.jsx("h4",{className:"text-xs font-bold text-gray-600",children:X})}),q=X=>{const me=V[X];if(me){const he=(me.EQT_SERNO||me.MAC_ADDRESS||"").toUpperCase().replace(/[:-]/g,"");j.current.delete(he)}G(he=>he.filter((Z,ie)=>ie!==X))},ae=()=>{w(!1),W&&(V.length>0||F.length>0||S>0)&&(Y(!0),d(null))},fe=()=>{window.location.href=`tel:${J}`},ge=X=>V.some(he=>he.EQT_SERNO===X.EQT_SERNO||he.EQT_NO===X.EQT_NO||he.MAC_ADDRESS&&X.MAC_ADDRESS&&he.MAC_ADDRESS===X.MAC_ADDRESS)?(e==null||e("  . ( )","warning"),!1):(G(he=>[...he,X]),!0),[ce,Re]=_.useState(null);return _.useEffect(()=>()=>{ce&&clearTimeout(ce)},[ce]),s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{ref:se,type:"text",value:n,onChange:X=>r(X.target.value.toUpperCase()),onKeyDown:X=>X.key==="Enter"&&U(),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono",placeholder:"S/N  MAC  ",autoFocus:!0}),s.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),s.jsx("button",{onClick:()=>U(),disabled:i||!n.trim(),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-3 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation flex items-center justify-center gap-2",style:{WebkitTapHighlightColor:"transparent"},children:i?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):""})]})}),W&&V.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-sm font-bold text-blue-700 flex items-center gap-2",children:[s.jsx("span",{children:"  "}),s.jsxs("span",{className:"bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full text-xs",children:[V.length,""]})]}),s.jsx("button",{onClick:()=>Y(!$),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${$?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:$?" ":" "})]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:V.map((X,me)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsxs("div",{className:"flex-1 cursor-pointer active:bg-gray-100 rounded-lg -m-1 p-1",onClick:()=>d(P0(X)),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-800",children:X.EQT_CL_NM||X.ITEM_NM||""}),s.jsx("span",{className:"text-xs text-gray-500 font-mono",children:X.EQT_SERNO||"-"})]}),s.jsxs("div",{className:"text-[10px] text-gray-400 mt-0.5",children:[X.EQT_STAT_CD_NM||X.EQT_USE_STAT_CD_NM||"",(()=>{const he=ty(X.EQT_LOC_NM);return he.id?`  ${he.name}(${he.id})`:X.WRKR_NM?`  ${X.WRKR_NM}`:""})()]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>d(P0(X)),className:"text-blue-500 hover:text-blue-700 p-1.5 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),s.jsx("button",{onClick:()=>q(me),className:"text-red-400 hover:text-red-600 p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},me))})]}),W&&$&&V.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-green-200 shadow-sm p-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-green-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"  "}),s.jsxs("span",{className:"bg-green-100 text-green-600 px-2 py-0.5 rounded-full text-xs",children:[V.length,""]})]}),s.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:V.map((X,me)=>{const he=P0(X);return s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-all active:scale-[0.99]",onClick:()=>{d(he),Y(!1)},children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsxs("span",{className:"bg-blue-500 text-white text-xs font-bold px-1.5 py-0.5 rounded flex-shrink-0",children:["#",me+1]}),s.jsx("span",{className:"font-bold text-gray-800 text-sm truncate",children:he.EQT_CL_NM||he.ITEM_NM||""})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-semibold whitespace-nowrap ${he.EQT_STAT_CD==="10"?"bg-green-100 text-green-700":he.EQT_STAT_CD==="20"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:he.EQT_STAT_CD_NM||"-"}),s.jsx("span",{className:"text-[10px] text-blue-500 whitespace-nowrap",children:""})]})]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:"S/N"}),s.jsx("span",{className:"font-mono text-gray-800 truncate",children:he.EQT_SERNO||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:"MAC"}),s.jsx("span",{className:"font-mono text-gray-700 truncate",children:he.MAC_ADDRESS||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:"No."}),s.jsx("span",{className:"font-mono text-gray-700 truncate",children:he.EQT_NO||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:he.EQT_LOC_TP_CD_NM||"-"}),he.EQT_LOC_NM&&s.jsxs("span",{className:"text-gray-500 ml-1 truncate",children:[" ",he.EQT_LOC_NM]})]})]})]},me)})})]}),m&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"   "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"S/N  MAC  "})]})}),c&&!$&&s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-500",children:""}),"   "]})})}),s.jsxs("div",{className:"p-4 max-h-[60vh] overflow-y-auto",children:[s.jsx(H,{title:" "}),s.jsx(Q,{label:"",value:c.EQT_NO}),s.jsx(Q,{label:"(S/N)",value:c.EQT_SERNO}),s.jsx(Q,{label:"MAC ",value:c.MAC_ADDRESS}),s.jsx(H,{title:" "}),s.jsx(Q,{label:"",value:c.EQT_CL_NM||c.EQT_CL_CD}),s.jsx(Q,{label:"",value:c.EQT_TP_CD_NM||c.EQT_TP_CD}),s.jsx(Q,{label:"",value:c.ITEM_CD}),s.jsx(Q,{label:"",value:c.ITEM_NM}),s.jsx(Q,{label:"",value:c.MAKER}),s.jsx(Q,{label:"",value:c.MNFCT_DT}),s.jsxs("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-3 -mx-4 my-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-amber-50 px-3 py-2 -mx-3 -mt-3 mb-2 border-b border-amber-200",children:s.jsxs("h4",{className:"text-xs font-bold text-amber-700 flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})," "]})}),s.jsxs("div",{className:"flex border-b border-amber-200 py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-amber-700 font-medium",children:""}),s.jsx("span",{className:"flex-1 text-xs text-gray-900 font-medium break-all",children:c.EQT_STAT_CD_NM||c.EQT_STAT_CD||"-"})]}),s.jsxs("div",{className:"flex border-b border-amber-200 py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-amber-700 font-medium",children:""}),s.jsx("span",{className:`flex-1 text-xs font-bold break-all ${c.EQT_USE_ARR_YN==="Y"?"text-green-600":c.EQT_USE_ARR_YN==="A"?"text-purple-600":c.EQT_USE_ARR_YN==="N"?"text-red-600":"text-gray-900"}`,children:c.EQT_USE_ARR_YN_NM||c.EQT_USE_ARR_YN||"-"})]}),s.jsxs("div",{className:"flex py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-amber-700 font-medium",children:""}),s.jsx("span",{className:"flex-1 text-xs text-gray-900 font-medium break-all",children:c.EQT_USE_END_DT||"-"})]})]}),s.jsx(H,{title:" "}),s.jsx(Q,{label:"",value:c.EQT_LOC_NM||c.EQT_LOC_TP_CD_NM}),s.jsx(Q,{label:"",value:c.OLD_EQT_LOC_NM||c.OLD_EQT_LOC_TP_CD_NM}),s.jsx(H,{title:"/"}),s.jsx(Q,{label:"",value:c.SO_NM||c.SO_ID}),s.jsx(Q,{label:"",value:c.CRR_NM||c.CRR_ID}),s.jsx(Q,{label:"",value:c.OLD_SO_NM||c.OLD_SO_ID}),s.jsx(Q,{label:"",value:c.OLD_CRR_NM||c.OLD_CRR_ID}),s.jsx(H,{title:" "}),s.jsx(Q,{label:"",value:(()=>{const X=ty(c.EQT_LOC_NM);return X.id?`${X.name} (${X.id})`:c.WRKR_NM?`${c.WRKR_NM} (${c.WRKR_ID})`:c.WRKR_ID||"-"})()}),s.jsx(Q,{label:"",value:(()=>{const X=ty(c.OLD_EQT_LOC_NM);return X.id?`${X.name} (${X.id})`:c.OLD_WRKR_NM?`${c.OLD_WRKR_NM} (${c.OLD_WRKR_ID})`:c.OLD_WRKR_ID||"-"})()}),s.jsx(H,{title:"/ "}),s.jsx(Q,{label:"ID",value:c.CUST_ID}),s.jsx(Q,{label:"",value:c.CUST_NM}),s.jsx(Q,{label:"ID",value:c.CTRT_ID}),s.jsx(H,{title:" "}),s.jsx(Q,{label:"",value:c.FIRST_IN_DT}),s.jsx(H,{title:"STB  "}),s.jsx(Q,{label:"CM MAC",value:c.STB_CM_MAC_ADDR}),s.jsx(Q,{label:"RTCA ID",value:c.STB_RTCA_ID}),s.jsx(H,{title:" "}),s.jsx(Q,{label:"",value:c.CHG_KND_CD_NM||c.CHG_KND_CD}),s.jsx(Q,{label:"",value:c.CHG_DATE}),s.jsx(Q,{label:"",value:c.CHG_UID_NM||c.CHG_UID})]})]}),u&&s.jsx("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:s.jsxs("details",{children:[s.jsx("summary",{className:"text-xs font-medium text-gray-600 cursor-pointer",children:"API   ()"}),s.jsx("pre",{className:"mt-2 text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap bg-white p-3 rounded-lg border border-gray-100 max-h-48 overflow-y-auto",children:JSON.stringify(u,null,2)})]})}),!i&&!c&&!m&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"S/N  MAC   "})]})}),!c&&y.length>0&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("details",{children:[s.jsxs("summary",{className:"text-xs font-medium text-gray-700 cursor-pointer",children:["    (",y.length,")"]}),s.jsxs("div",{className:"mt-3 space-y-2 max-h-48 overflow-y-auto",children:[y.slice(0,20).map((X,me)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg text-xs cursor-pointer hover:bg-blue-50 transition-colors active:scale-[0.99] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},onClick:()=>{r(X.EQT_SERNO||X.SERIAL_NO||X.MAC_ADDRESS||X.MAC||""),d(P0(X)),f({source:"    ",data:X})},children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-800",children:X.EQT_CL_NM||X.EQT_TP_CD||""}),s.jsx("span",{className:"ml-2 text-gray-500 font-mono",children:X.EQT_SERNO||X.SERIAL_NO||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs bg-gray-100 px-2 py-0.5 rounded",children:X.EQT_STAT_CD_NM||X.EQT_USE_STAT_CD||""})]},me)),y.length>20&&s.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["...  ",y.length-20,""]})]})]})}),F.length>0&&s.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-200 shadow-sm p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-sm font-bold text-red-700 flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"  "}),s.jsxs("span",{className:"bg-red-100 text-red-600 px-2 py-0.5 rounded-full text-xs",children:[F.length,""]})]}),s.jsx("button",{onClick:()=>ee([]),className:"text-xs text-red-500 hover:text-red-700",children:" "})]}),s.jsx("div",{className:"space-y-2 mb-4",children:F.map((X,me)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg border border-red-100",children:[s.jsx("span",{className:"text-xs font-mono text-red-800",children:X}),s.jsx("span",{className:"text-xs text-red-500",children:""})]},me))}),s.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[s.jsxs("p",{className:"text-xs text-gray-600 mb-3 text-center",children:["  .",s.jsx("br",{}),"     ."]}),s.jsxs("button",{onClick:fe,className:"w-full py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),J," "]})]})]}),s.jsx(kf,{isOpen:K,onClose:ae,onScan:I,isMultiScanMode:W,scanCount:S}),A&&L.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-white rounded-t-2xl flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-500",children:""})," "]}),s.jsx("button",{onClick:()=>{M(!1),k([])},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[L.length,"  .  ."]})]}),s.jsx("div",{className:"p-4 space-y-3 overflow-y-auto flex-1",children:L.map((X,me)=>{const he=P0(X),Z=(he.EQT_STAT_CD_NM||"").includes("")||(he.CHG_KND_CD_NM||"").includes(""),ie=he.EQT_USE_ARR_YN==="Y"||(he.EQT_USE_ARR_YN_NM||"").includes("");return s.jsxs("div",{className:`p-4 rounded-xl border-2 cursor-pointer transition-all active:scale-[0.98] ${Z?"bg-red-50 border-red-200 hover:bg-red-100 hover:border-red-300":"bg-green-50 border-green-200 hover:bg-green-100 hover:border-green-300"}`,onClick:()=>{d(he),M(!1),k([]),f({source:"multiple_result_selection",data:he}),e==null||e(" .","success")},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${Z?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:Z?" ":" "}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ie?"bg-blue-100 text-blue-700":"bg-gray-200 text-gray-600"}`,children:he.EQT_USE_ARR_YN_NM||(ie?"":"")})]}),s.jsxs("span",{className:"text-xs text-gray-400",children:[me+1,"/",L.length]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"font-bold text-gray-800 text-sm mb-1",children:he.EQT_CL_NM||he.ITEM_NM||""}),s.jsxs("div",{className:"text-xs text-gray-500",children:[he.ITEM_MODEL&&`: ${he.ITEM_MODEL}`,he.MAKER&&`  ${he.MAKER}`]})]}),s.jsxs("div",{className:"space-y-1.5 text-xs bg-white/60 rounded-lg p-2.5",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"S/N"}),s.jsx("span",{className:"font-mono text-gray-800 font-medium",children:he.EQT_SERNO||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:`font-medium ${Z?"text-red-600":"text-green-600"}`,children:he.EQT_STAT_CD_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:`${he.EQT_TP_CD_NM===""?"text-orange-600":"text-gray-700"}`,children:he.EQT_TP_CD_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:he.EQT_LOC_NM||he.SO_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:`${Z?"text-red-600 font-medium":"text-gray-700"}`,children:he.CHG_KND_CD_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-600",children:he.CHG_DATE?he.CHG_DATE.split(" ")[0]:"-"})]})]}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsxs("span",{className:`text-xs flex items-center gap-1 px-3 py-1.5 rounded-lg ${Z?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:["  ",s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]},me)})}),s.jsx("div",{className:"px-5 py-3 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex-shrink-0",children:s.jsx("button",{onClick:()=>{M(!1),k([])},className:"w-full py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium text-sm transition-all",children:""})})]})})]})},GK=({onNavigateToMenu:t,showToast:e})=>{const[n,r]=_.useState("equipment-assignment"),i=[{id:"equipment-assignment",title:"",description:"    "},{id:"equipment-inquiry",title:"",description:"    /  / "},{id:"equipment-list",title:"",description:"S/N     "},{id:"equipment-movement",title:"",description:"    "},{id:"equipment-recovery",title:"",description:"   "}],l=c=>{r(c)};return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 z-40",children:s.jsx(mN,{tabs:i,activeTab:n,onTabChange:l})}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsx("div",{style:{display:n==="equipment-assignment"?"contents":"none"},children:s.jsx(vK,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-inquiry"?"contents":"none"},children:s.jsx(OK,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-list"?"contents":"none"},children:s.jsx(QK,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-movement"?"contents":"none"},children:s.jsx(LK,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-recovery"?"contents":"none"},children:s.jsx(WK,{onBack:t,showToast:e})})]})]})},bT=[{id:"getEquipmentInfo",category:"-",name:"[]    ",path:"/work/equipment-info",description:"GET -     (workmanAssignManagement.getCustProdInfo)",params:[{name:"CTRT_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1},{name:"WRKR_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"BLD_ID",type:"string",required:!1},{name:"QUERY_TYPE",type:"string",required:!1}]},{id:"getCustProdInfo",category:"-",name:"[] /  ",path:"/customer/work/getCustProdInfo",description:"POST - /    (workmanAssignManagement.getCustProdInfo)",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"SO_ID",type:"string",required:!1},{name:"WORK_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"CRR_TSK_CL",type:"string",required:!1},{name:"WRK_DTL_TCD",type:"string",required:!1},{name:"CTRT_ID",type:"string",required:!1},{name:"requestType",type:"string",required:!1}]},{id:"equipmentWorkerTransfer",category:"-",name:"[]   ",path:"/equipment/worker-transfer",description:"POST -     (equipmentManager.changeEqtWrkr_3)",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1},{name:"EQT_NO",type:"string",required:!1},{name:"CRR_ID",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"eqtCmpsInfoChg",category:"-",name:"[]   ",path:"/customer/work/eqtCmpsInfoChg",description:"POST -     (workmanAssignManagement.eqtCmpsInfoChg)",params:[{name:"WRK_ID",type:"string",required:!1},{name:"RCPT_ID",type:"string",required:!1},{name:"CTRT_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"CRR_ID",type:"string",required:!1},{name:"WRKR_ID",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1},{name:"equipments",type:"array",required:!0,default:"[]"}]},{id:"signalCheck",category:"-",name:"[]   (Stub)",path:"/customer/work/signalCheck",description:"POST -   ( stub )",params:[{name:"CUST_ID",type:"string",required:!1},{name:"WRK_ID",type:"string",required:!1},{name:"CHECK_TYPE",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1}]},{id:"ensHistory",category:"-",name:"[] ENS  ",path:"/signal/ens-history",description:"GET - ENS    (sigtransManagement.getENSSendHist)",params:[{name:"CUST_ID",type:"string",required:!1},{name:"DEST_INFO",type:"string",required:!1},{name:"REG_DATE1",type:"string",required:!1},{name:"REG_DATE2",type:"string",required:!1},{name:"RSLT_DATE1",type:"string",required:!1},{name:"RSLT_DATE2",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1}]},{id:"checkStbServerConnection",category:"-",name:"[] STB   ",path:"/customer/work/checkStbServerConnection",description:"POST - STB     (workmanAssignManagement.checkStbServerConnection)",params:[{name:"REG_UID",type:"string",required:!1},{name:"CTRT_ID",type:"string",required:!1},{name:"WRK_ID",type:"string",required:!1},{name:"MSG_ID",type:"string",required:!1},{name:"STB_EQT_NO",type:"string",required:!1},{name:"MODEM_EQT_NO",type:"string",required:!1}]},{id:"getEquipmentNmListOfProd",category:"-",name:"[]   ",path:"/customer/receipt/contract/getEquipmentNmListOfProd",description:"POST -     (contract.getEquipmentNmListOfProd)",params:[{name:"CTRT_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1}]},{id:"getContractEqtList",category:"-",name:"[]   ",path:"/customer/receipt/contract/getContractEqtList",description:"POST -     (contract.getContractEqtList)",params:[{name:"CTRT_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1}]},{id:"getCustomerCtrtInfo",category:"-",name:"[]   ",path:"/customer/negociation/getCustomerCtrtInfo",description:"POST -     (commonCodeManagement.getCustomerCtrtInfo)",params:[{name:"CTRT_ID",type:"string",required:!0}]},{id:"getWorkReceiptList",category:"-",name:"[]   ",path:"/work/receipts",description:"GET -     (workmanAssignManagement.getWorkReceiptList)",params:[{name:"WRKR_ID",type:"string",required:!1},{name:"WORK_DT",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1}]},{id:"getWorkdrctnList",category:"-",name:"[]   ",path:"/work/directions",description:"GET -     (workmanAssignManagement.getWorkdrctnList)",params:[{name:"WRKR_ID",type:"string",required:!1},{name:"WORK_DT",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1}]},{id:"modWorkCancel",category:"-",name:"[]  ",path:"/work/cancel",description:"POST -    (workmanAssignManagement.modWorkCancel)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"CANCEL_REASON",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"modWorkComplete",category:"-",name:"[]  ",path:"/work/complete",description:"POST -    (workmanAssignManagement.modWorkComplete)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"COMPLETE_MEMO",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"modWorkDivision",category:"-",name:"[]  ",path:"/work/worker-adjustment",description:"POST -  / (workmanAssignManagement.modWorkDivision)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"FROM_WRKR_ID",type:"string",required:!0},{name:"TO_WRKR_ID",type:"string",required:!0},{name:"REG_UID",type:"string",required:!1}]},{id:"workCompleteWithParams",category:"-",name:"[]   ()",path:"/customer/work/workComplete",description:"POST -    with 7 parameters (workmanAssignManagement.modWorkComplete)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"COMPLETE_DT",type:"string",required:!1},{name:"COMPLETE_MEMO",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"getRsltSinho4Wrk",category:"-",name:"[]   ",path:"/work/result-signals",description:"POST -     (equipmentManager.getRsltSinho4Wrk_2)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1}]},{id:"saveInstallInfo",category:"-",name:"[]   ",path:"/customer/work/saveInstallInfo",description:"POST -    (workmanAssignManagement.modNetInfo)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"INSTALL_ADDR",type:"string",required:!1},{name:"INSTALL_MEMO",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"getEquipmentHistoryInfo",category:"-",name:"[]    (S/N, MAC)",path:"/statistics/equipment/getEquipmentHistoryInfo",description:"POST - S/N  MAC     (  )",params:[{name:"EQT_SERNO",type:"string",required:!1},{name:"MAC_ADDRESS",type:"string",required:!1}]},{id:"getEquipmentOutList",category:"-",name:"[]   ",path:"/customer/equipment/getEquipmentOutList",description:"POST - /    (  )",params:[{name:"FROM_OUT_REQ_DT",type:"string",required:!0,default:"20250101"},{name:"TO_OUT_REQ_DT",type:"string",required:!0,default:"20250131"},{name:"SO_ID",type:"string",required:!1},{name:"OUT_REQ_NO",type:"string",required:!1},{name:"PROC_STAT",type:"string",required:!1}]},{id:"checkEquipmentProc",category:"-",name:"[]     ",path:"/customer/equipment/getEquipmentProcYnCheck",description:"POST -       (  )",params:[{name:"OUT_REQ_NO",type:"string",required:!0}]},{id:"addEquipmentQuota",category:"-",name:"[]    ()",path:"/customer/equipment/addCorporationEquipmentQuota",description:"POST -     (  )",params:[{name:"OUT_REQ_NO",type:"string",required:!0},{name:"equipmentList",type:"array",required:!0,default:"[]"}]},{id:"getEquipmentReturnRequestList",category:"-",name:"[]     ()",path:"/customer/equipment/getEquipmentReturnRequestList",description:"POST -      (  )",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"SO_ID",type:"string",required:!1}]},{id:"checkEquipmentReturn",category:"-",name:"[]   ",path:"/customer/equipment/getEquipmentReturnRequestCheck",description:"POST -     (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0}]},{id:"addEquipmentReturnRequest",category:"-",name:"[]   ",path:"/customer/equipment/addEquipmentReturnRequest",description:"POST -     (  )",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"equipmentList",type:"array",required:!0,default:"[]"}]},{id:"getWorkerEquipmentList",category:"-",name:"[]    ",path:"/customer/equipment/getWrkrHaveEqtList",description:"POST -      (  )",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"SO_ID",type:"string",required:!1},{name:"ITEM_MID_CD",type:"string",required:!1},{name:"EQT_SERNO",type:"string",required:!1}]},{id:"changeEquipmentWorker",category:"-",name:"[]    ()",path:"/customer/equipment/changeEqtWrkr_3",description:"POST -     (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"FROM_WRKR_ID",type:"string",required:!0},{name:"TO_WRKR_ID",type:"string",required:!0}]},{id:"processEquipmentLoss",category:"-",name:"[]   ",path:"/customer/equipment/cmplEqtCustLossIndem",description:"POST -    (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"LOSS_REASON",type:"string",required:!1}]},{id:"setEquipmentCheckStandby",category:"-",name:"[]    ()",path:"/customer/equipment/setEquipmentChkStndByY",description:"POST -      (  )",params:[{name:"EQT_NO",type:"string",required:!0}]},{id:"getUnreturnedEquipmentList",category:"-",name:"[]   ",path:"/customer/work/getEquipLossInfo",description:"POST -     (  )",params:[{name:"FROM_DT",type:"string",required:!1},{name:"TO_DT",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"CUST_NM",type:"string",required:!1},{name:"EQT_SERNO",type:"string",required:!1}]},{id:"processEquipmentRecovery",category:"-",name:"[]    ",path:"/customer/work/modEquipLoss",description:"POST -      (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!0},{name:"WRK_ID",type:"string",required:!1}]},{id:"findUserList",category:"-",name:"[] () ",path:"/system/cm/getFindUsrList3",description:"POST - /ID   (  )",params:[{name:"USR_NM",type:"string",required:!1},{name:"USR_ID",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1}]},{id:"sendSmsNotification",category:"-",name:"[]   (ENS)",path:"/customer/sigtrans/saveENSSendHist",description:"POST -   (   ) (  )",params:[{name:"RECV_PHONE_NO",type:"string",required:!0},{name:"MSG_CONTENT",type:"string",required:!0},{name:"SEND_UID",type:"string",required:!0}]},{id:"changeEqtWrkrBatch",category:"-",name:"[]    ()",path:"/customer/equipment/changeEqtWrkr_3",description:"POST -       (  )",params:[{name:"FROM_WRKR_ID",type:"string",required:!0},{name:"TO_WRKR_ID",type:"string",required:!0},{name:"equipmentList",type:"array",required:!0,default:"[]"}]},{id:"getCodeDetail",category:"-",name:"[]  ",path:"/system/cm/getCodeDetail",description:"POST -      (  )",params:[{name:"GRP_CD",type:"string",required:!0,default:"EQT_STS"}]},{id:"getTodayWorkList",category:"-",name:"[]   ",path:"/customer/work/getTodayWorkList",description:"POST -      (  )",params:[{name:"WORK_DT",type:"string",required:!1},{name:"WRKR_ID",type:"string",required:!1}]}],YK=()=>{const[t,e]=_.useState(null),[n,r]=_.useState({}),[i,l]=_.useState([]),[c,d]=_.useState(null),[u,f]=_.useState(!1),[m,p]=_.useState(""),[y,g]=_.useState("");_.useEffect(()=>{const G=localStorage.getItem("apiExplorer_calls");if(G)try{l(JSON.parse(G))}catch(W){console.error("Failed to restore API calls",W)}},[]),_.useEffect(()=>{localStorage.setItem("apiExplorer_calls",JSON.stringify(i))},[i]),_.useEffect(()=>{if(t){const G={},W=localStorage.getItem("userInfo");let j=null;if(W)try{j=JSON.parse(W)}catch(S){console.error("Failed to parse userInfo",S)}t.params.forEach(S=>{if(S.default!==void 0&&(G[S.name]=S.default),j)switch(S.name){case"WRKR_ID":G[S.name]=j.workerId||"A20130708";break;case"SO_ID":case"MST_SO_ID":G[S.name]=j.soId||"";break;case"CRR_ID":G[S.name]=j.crrId||"";break;case"REG_UID":case"SEND_UID":G[S.name]=j.userId||j.workerId||"";break;case"USR_ID":G[S.name]=j.userId||"";break}}),r(G)}},[t]);const N=(G,W)=>{r(j=>({...j,[G]:W}))},C=async()=>{if(!t)return;const G=`${Date.now()}-${Math.random()}`,W=performance.now(),j={id:G,timestamp:new Date().toISOString(),method:"POST",url:t.path,params:{...n},response:null,error:null,duration:0,status:"pending"};l(S=>[j,...S]),d(j),f(!0);try{const S=await fetch(`/api${t.path}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),F=performance.now()-W;if(!S.ok)throw new Error(`HTTP ${S.status}: ${S.statusText}`);const ee=await S.json();l(J=>J.map($=>$.id===G?{...$,response:ee,duration:Math.round(F),status:"success"}:$)),d({...j,response:ee,duration:Math.round(F),status:"success"})}catch(S){const F=performance.now()-W;l(ee=>ee.map(J=>J.id===G?{...J,error:S.message,duration:Math.round(F),status:"error"}:J)),d({...j,error:S.message,duration:Math.round(F),status:"error"})}finally{f(!1)}},v=()=>{confirm(" API   ?")&&(l([]),d(null),localStorage.removeItem("apiExplorer_calls"))},R=()=>{if(!t)return;const G=localStorage.getItem("userInfo");let W=null;if(G)try{W=JSON.parse(G)}catch(S){console.error("Failed to parse userInfo",S)}const j={...n};t.params.forEach(S=>{if(!(j[S.name]&&j[S.name]!==""))switch(S.name){case"WORK_ID":case"WRK_ID":j[S.name]="W202501020001";break;case"RCPT_ID":j[S.name]="R202501020001";break;case"CTRT_ID":j[S.name]="C202501020001";break;case"WRK_DRCTN_ID":j[S.name]="D202501020001";break;case"EQT_NO":j[S.name]="EQ20250102001";break;case"EQT_SERNO":j[S.name]="SN20250102001";break;case"ITEM_MID_CD":j[S.name]="05";break;case"EQT_CL_CD":case"EQT_CL":j[S.name]="090401";break;case"MAC_ADDRESS":j[S.name]="00:11:22:33:44:55";break;case"CUST_ID":j[S.name]="CUST20250102001";break;case"CUST_NM":j[S.name]="";break;case"PHONE_NO":case"RECV_PHONE_NO":j[S.name]="010-1234-5678";break;case"WORK_DT":case"FROM_DT":case"TO_DT":const P=new Date().toISOString().slice(0,10).replace(/-/g,"");j[S.name]=P;break;case"WRK_STAT_CD":j[S.name]="2";break;case"EQT_USE_STAT_CD":j[S.name]="1";break;case"PROD_CD":j[S.name]="PROD001";break;case"SVC_CD":j[S.name]="SVC001";break;case"BLD_ID":j[S.name]="BLD20250102001";break;case"ADDR_ORD":j[S.name]="1";break;case"GRP_CD":j[S.name]="EQT_STS";break;case"USR_NM":j[S.name]="";break;case"MSG_CONTENT":j[S.name]=" .";break;case"LOSS_REASON":j[S.name]="";break}}),r(j)},A=()=>{const G=JSON.stringify(i,null,2),W="data:application/json;charset=utf-8,"+encodeURIComponent(G),j=`api-calls-${new Date().toISOString().slice(0,10)}.json`,S=document.createElement("a");S.setAttribute("href",W),S.setAttribute("download",j),S.click()},M=()=>{const G=["Timestamp","Method","URL","Status","Duration (ms)","Error"],W=i.map(ee=>[ee.timestamp,ee.method,ee.url,ee.status,ee.duration,ee.error||""]),j=[G.join(","),...W.map(ee=>ee.map(J=>`"${J}"`).join(","))].join(`
`),S="data:text/csv;charset=utf-8,"+encodeURIComponent(j),P=`api-calls-${new Date().toISOString().slice(0,10)}.csv`,F=document.createElement("a");F.setAttribute("href",S),F.setAttribute("download",P),F.click()},L=bT.filter(G=>{const W=m===""||G.name.toLowerCase().includes(m.toLowerCase())||G.path.toLowerCase().includes(m.toLowerCase()),j=y===""||G.category===y;return W&&j}),k=["",...Array.from(new Set(bT.map(G=>G.category)))],V=i.filter(G=>m===""?!0:G.url.toLowerCase().includes(m.toLowerCase())||JSON.stringify(G.params).toLowerCase().includes(m.toLowerCase()));return s.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"API Explorer"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"D-Live   API  "})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"API "}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("select",{value:y,onChange:G=>g(G.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",children:k.map(G=>s.jsx("option",{value:G,children:G},G))})]}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",placeholder:"...",value:m,onChange:G=>p(G.target.value),className:"w-full border border-gray-300 rounded px-3 py-2"})}),s.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:L.map(G=>s.jsxs("button",{onClick:()=>e(G),className:`w-full text-left p-3 rounded border ${(t==null?void 0:t.id)===G.id?"bg-blue-50 border-blue-500":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("div",{className:"font-medium text-sm",children:G.name}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:G.path}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:G.category})]},G.id))})]})}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),t?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:t.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),s.jsxs("code",{className:"block bg-gray-100 p-2 rounded mt-2 text-sm",children:["POST ",t.path]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium",children:""}),t.params.length>0&&s.jsx("button",{onClick:R,className:"text-xs bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200",children:"  "})]}),t.params.length>0?s.jsx("div",{className:"space-y-3",children:t.params.map(G=>{var W;return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[G.name,G.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"}),s.jsxs("span",{className:"text-gray-400 ml-2 text-xs",children:["(",G.type,")"]})]}),s.jsx("input",{type:"text",value:n[G.name]||"",onChange:j=>N(G.name,j.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:((W=G.default)==null?void 0:W.toString())||""})]},G.name)})}):s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}),s.jsx("button",{onClick:C,disabled:u,className:"w-full bg-blue-600 text-white py-3 rounded font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:u?" ...":"API "})]}):s.jsx("p",{className:"text-gray-500 text-center py-8",children:" API  "})]}),c&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-medium",children:""}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.status==="success"?"bg-green-100 text-green-800":c.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:c.status}),s.jsxs("span",{className:"text-xs text-gray-500",children:[c.duration,"ms"]})]})]}),c.error?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 text-red-700 text-sm",children:c.error}):c.response?s.jsx("div",{className:"bg-gray-50 rounded p-3 max-h-[400px] overflow-y-auto",children:s.jsx("pre",{className:"text-xs",children:JSON.stringify(c.response,null,2)})}):s.jsx("p",{className:"text-gray-500 text-sm",children:"  ..."})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:A,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",disabled:i.length===0,children:"JSON"}),s.jsx("button",{onClick:M,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",disabled:i.length===0,children:"CSV"}),s.jsx("button",{onClick:v,className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",disabled:i.length===0,children:""})]})]}),s.jsx("div",{className:"space-y-2 max-h-[800px] overflow-y-auto",children:V.length>0?V.map(G=>s.jsxs("button",{onClick:()=>d(G),className:`w-full text-left p-3 rounded border ${(c==null?void 0:c.id)===G.id?"bg-blue-50 border-blue-500":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(G.timestamp).toLocaleTimeString("ko-KR")}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${G.status==="success"?"bg-green-100 text-green-800":G.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[G.duration,"ms"]})]}),s.jsx("div",{className:"text-sm font-medium truncate",children:G.url}),G.error&&s.jsx("div",{className:"text-xs text-red-600 truncate mt-1",children:G.error})]},G.id)):s.jsx("p",{className:"text-gray-500 text-center py-8 text-sm",children:"  "})})]})})]})]})})},VK=({onBack:t,userInfo:e,showToast:n})=>{const[r,i]=_.useState([]),[l,c]=_.useState(null),[d,u]=_.useState(!1),[f,m]=_.useState(null);_.useEffect(()=>{p()},[]);const p=async()=>{try{u(!0),m(null);const v=new Date,R=new Date;R.setMonth(v.getMonth()-1);const A={ENTR_NO:"",CTRT_ID:"",WORK_DT_FROM:R.toISOString().slice(0,10).replace(/-/g,""),WORK_DT_TO:v.toISOString().slice(0,10).replace(/-/g,""),WRKR_ID:(e==null?void 0:e.userId)||""},M=await qw(A);i(M),M.length>0&&c(M[0]),console.log(" LGU    :",M.length)}catch(v){console.error(" LGU    :",v),m("   .")}finally{u(!1)}},y=v=>{c(v)},g=()=>{n&&n("   .","info")},N=()=>{if(!l||!l.CONSREQNO){n&&n("     .","warning");return}n&&n("   .","info")},C=()=>{if(!l||!l.CONSREQNO){n&&n("     .","warning");return}n&&n("   .","info")};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-2 sm:mb-3 flex items-center justify-between gap-2",children:[s.jsx("div",{children:s.jsx("h2",{className:"text-base sm:text-lg font-bold text-gray-900",children:"(LGU) "})}),s.jsxs("button",{onClick:p,disabled:d,className:"flex items-center gap-1 px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 hover:bg-gray-200 rounded text-xs sm:text-sm text-gray-700 disabled:opacity-50",children:[s.jsx(uc,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 ${d?"animate-spin":""}`}),""]})]}),d?s.jsxs("div",{className:"text-center p-6 sm:p-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-4 border-orange-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-gray-600 text-sm sm:text-base",children:" ..."})]}):f?s.jsxs("div",{className:"text-center p-6 sm:p-10 bg-white rounded-lg shadow-sm border border-red-200",children:[s.jsx("p",{className:"text-red-500 text-sm sm:text-base",children:f}),s.jsx("button",{onClick:p,className:"mt-3 sm:mt-4 px-3 sm:px-4 py-1.5 sm:py-2 bg-orange-500 text-white text-sm rounded-lg hover:bg-orange-600",children:" "})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-2 sm:mb-3",children:r.length>0?s.jsx("div",{className:"max-h-40 sm:max-h-48 overflow-y-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:"ID"}),s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""})]})}),s.jsx("tbody",{children:r.map((v,R)=>s.jsxs("tr",{onClick:()=>y(v),className:`cursor-pointer hover:bg-orange-50 transition-colors ${l===v?"bg-orange-100":""}`,children:[s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:v.CONSREQNO||"-"}),s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:v.CTRT_ID||"-"}),s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:v.CONSCHRRNM||"-"}),s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:v.CONSFNSHSCDLDT||"-"})]},R))})]})}):s.jsx("div",{className:"p-4 sm:p-6 text-center text-gray-500 text-xs sm:text-sm",children:"   "})}),l&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4 space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSREQNO||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSCHRRNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSCHRRTLNO||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("textarea",{value:l.CONSCHRRMAKRMKS||"",readOnly:!0,rows:2,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 resize-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSFNSHSCDLDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSFNSHDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSNEEDDIVSNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSDLYRSNNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSIPSBPRSSDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSIPSBRSNNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:l.CONSNREQPRSSDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("textarea",{value:l.CONSNREQRSNNM||"",readOnly:!0,rows:2,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 resize-none"})]})]}),s.jsxs("div",{className:"mt-3 sm:mt-4 grid grid-cols-3 gap-1.5 sm:gap-2",children:[s.jsx("button",{onClick:g,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""}),s.jsx("button",{onClick:N,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""}),s.jsx("button",{onClick:C,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""})]})]})]})},$0={WORK_FILTERS:"dlive_work_filters",WORK_SELECTED_ORDER:"dlive_work_selected_order",WORK_SELECTED_DIRECTION:"dlive_work_selected_direction",WORK_FORM_DATA:"dlive_work_form_data",ACTIVE_TAB:"dlive_active_tab",ACTIVE_VIEW:"dlive_active_view",LGU_CONSTRUCTION_FORM:"dlive_lgu_construction_form",LGU_NETWORK_FAULT_FORM:"dlive_lgu_network_fault_form",SIGNAL_HISTORY_FILTERS:"dlive_signal_history_filters",WORK_RESULT_SIGNAL_FILTERS:"dlive_work_result_signal_filters",WORK_PROCESS_STEP:"dlive_work_process_step",WORK_PROCESS_EQUIPMENT:"dlive_work_process_equipment"},$K=(t,e)=>{try{typeof window<"u"&&localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("  :",n)}},HK=t=>{try{if(typeof window<"u"){const e=localStorage.getItem(t);return e?JSON.parse(e):null}return null}catch(e){return console.error("  :",e),null}},NT=t=>{try{typeof window<"u"&&localStorage.removeItem(t)}catch(e){console.error("  :",e)}},zK=()=>{try{if(typeof window<"u"){Object.values($0).forEach(n=>{localStorage.removeItem(n)});const t=["dlive-work-equipment-storage","dlive-work-process-storage","dlive-equipment-storage","dlive-ui-storage"];t.forEach(n=>{localStorage.removeItem(n)});const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&(r.startsWith("work_complete_draft_")||r.startsWith("equipment_draft_"))&&e.push(r)}e.forEach(n=>{localStorage.removeItem(n)}),console.log("[clearAllSessions]  :",{sessionKeys:Object.values($0).length,zustandKeys:t.length,draftKeys:e.length})}}catch(t){console.error("   :",t)}},qK=({onBack:t,userInfo:e,showToast:n})=>{const r=HK($0.LGU_NETWORK_FAULT_FORM),[i,l]=_.useState({CTRT_ID:(r==null?void 0:r.CTRT_ID)||"",CUST_ID:(r==null?void 0:r.CUST_ID)||"",WRK_ID:(r==null?void 0:r.WRK_ID)||"",CANCEL_TYPE:(r==null?void 0:r.CANCEL_TYPE)||""}),[c,d]=_.useState(!1),[u,f]=_.useState(null);_.useEffect(()=>{$K($0.LGU_NETWORK_FAULT_FORM,i)},[i]);const m=(y,g)=>{l(N=>({...N,[y]:g}))},p=async y=>{if(y.preventDefault(),!i.CTRT_ID||!i.CUST_ID||!i.WRK_ID){n&&n("   .","warning");return}d(!0),f(null);try{const g={...i,CRR_ID:(e==null?void 0:e.crrId)||"01",SO_ID:(e==null?void 0:e.soId)||"",REG_UID:(e==null?void 0:e.userId)||"mobile_user"},N=await r5(g);console.log(" LGU   :",N),f({success:!0,data:N}),n&&n("LGU   .","success"),l({CTRT_ID:"",CUST_ID:"",WRK_ID:"",CANCEL_TYPE:""}),NT($0.LGU_NETWORK_FAULT_FORM)}catch(g){console.error(" LGU   :",g),f({success:!1,error:g.message}),n&&n(`LGU   : ${g.message}`,"error")}finally{d(!1)}};return s.jsxs("div",{children:[s.jsx("div",{className:"mb-2 sm:mb-3",children:s.jsx("h2",{className:"text-base sm:text-lg font-bold text-gray-900",children:"(LGU) "})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4",children:s.jsxs("form",{onSubmit:p,className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" ID ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.CTRT_ID,onChange:y=>m("CTRT_ID",y.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:" ID ",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" ID ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.CUST_ID,onChange:y=>m("CUST_ID",y.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:" ID ",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" ID ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.WRK_ID,onChange:y=>m("WRK_ID",y.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:" ID ",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("input",{type:"text",value:i.CANCEL_TYPE,onChange:y=>m("CANCEL_TYPE",y.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:"  ()"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:[s.jsx("button",{type:"submit",disabled:c,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?" ...":" "}),s.jsx("button",{type:"button",onClick:()=>{l({CTRT_ID:"",CUST_ID:"",WRK_ID:"",CANCEL_TYPE:""}),f(null),NT($0.LGU_NETWORK_FAULT_FORM)},className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""})]})]})}),u&&s.jsxs("div",{className:"mt-2 sm:mt-3 bg-white rounded-lg shadow-sm border border-gray-200 p-2.5 sm:p-3",children:[s.jsx("div",{className:"mb-1.5 sm:mb-2",children:s.jsx("span",{className:`text-xs sm:text-sm font-semibold flex items-center gap-1 ${u.success?"text-green-600":"text-red-600"}`,children:u.success?s.jsxs(s.Fragment,{children:[s.jsx(Vi,{size:14,className:"sm:w-4 sm:h-4"}),"  "]}):s.jsxs(s.Fragment,{children:[s.jsx(Mr,{size:14,className:"sm:w-4 sm:h-4"}),"  "]})})}),s.jsx("div",{className:"bg-gray-50 rounded p-1.5 sm:p-2",children:s.jsx("pre",{className:"text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap break-words",children:JSON.stringify(u.success?u.data:u.error,null,2)})})]})]})},XK=({onNavigateToMenu:t,userInfo:e,showToast:n})=>{const[r,i]=_.useState("time-request"),l=Gi.useRef(null),c=Gi.useRef([]),d=[{id:"time-request",title:""},{id:"time-record",title:""},{id:"notice",title:""},{id:"signal-interlock",title:""},{id:"lgu-construction",title:"(LGU)"},{id:"lgu-network-fault",title:"(LGU)"},{id:"auto-confirm",title:""}],u=f=>{i(f),setTimeout(()=>{const p=l.current,y=c.current[d.findIndex(g=>g.id===f)];if(p&&y){const g=p.getBoundingClientRect(),N=y.getBoundingClientRect(),C=N.left-g.left-g.width/2+N.width/2;p.scrollTo({left:p.scrollLeft+C,behavior:"smooth"})}},0)};return s.jsx("div",{className:"w-full",children:s.jsxs(kj,{value:r,onValueChange:u,className:"w-full",children:[s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{ref:l,className:"w-full overflow-x-auto scrollbar-hide",children:s.jsx(hN,{className:"inline-flex justify-start bg-white rounded-none h-auto py-2 px-3 border-none min-w-max overflow-visible",children:d.map((f,m)=>s.jsx(fN,{value:f.id,ref:p=>c.current[m]=p,className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=inactive]:text-gray-600 rounded-full px-4 py-2 text-sm font-medium flex-shrink-0 mx-1 transition-colors whitespace-nowrap",children:f.title},f.id))})})}),s.jsx(Ql,{value:"time-request",className:"px-3 pt-1",children:s.jsx(Wm,{onNavigateToMenu:t,title:"",description:"    ."})}),s.jsx(Ql,{value:"time-record",className:"px-3 pt-1",children:s.jsx(Wm,{onNavigateToMenu:t,title:"",description:"     ."})}),s.jsx(Ql,{value:"notice",className:"px-3 pt-1",children:s.jsx(Wm,{onNavigateToMenu:t,title:"",description:"   ."})}),s.jsx(Ql,{value:"signal-interlock",className:"px-3 pt-1",children:s.jsx(M5,{onBack:t,userInfo:e,showToast:n})}),s.jsx(Ql,{value:"lgu-construction",className:"px-3 pt-1",children:s.jsx(VK,{onBack:t,userInfo:e,showToast:n})}),s.jsx(Ql,{value:"lgu-network-fault",className:"px-3 pt-1",children:s.jsx(qK,{onBack:t,userInfo:e,showToast:n})}),s.jsx(Ql,{value:"auto-confirm",className:"px-3 pt-1",children:s.jsx(Wm,{onNavigateToMenu:t,title:"",description:"   ."})})]})})},JK=[{key:"small",label:"",size:"14px",preview:"text-xs"},{key:"medium",label:"",size:"16px",preview:"text-sm"},{key:"large",label:"",size:"18px",preview:"text-base"},{key:"xlarge",label:" ",size:"20px",preview:"text-lg"}],ZK=({onBack:t})=>{const{fontScale:e,setFontScale:n}=Yl();return s.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"p-1 -ml-1",children:s.jsx(XT,{className:"w-5 h-5 text-gray-600"})}),s.jsx("h1",{className:"font-bold text-base",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[s.jsx("h2",{className:"font-semibold text-sm text-gray-800 mb-3",children:" "}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:JK.map(r=>s.jsxs("button",{onClick:()=>n(r.key),className:`flex flex-col items-center justify-center py-3 px-2 rounded-lg border-2 transition-all ${e===r.key?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[s.jsx("span",{className:`font-bold mb-1 ${e===r.key?"text-blue-600":"text-gray-700"}`,style:{fontSize:r.size},children:""}),s.jsx("span",{className:`text-xs ${e===r.key?"text-blue-600 font-semibold":"text-gray-500"}`,children:r.label})]},r.key))}),s.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"  .     ."})]})})]})},eQ="/shuild.png",wI="notice_popup_dismissed",tQ=()=>{try{return localStorage.getItem(wI)}catch{return null}},sQ=()=>{try{const t=new Date().toISOString().split("T")[0];localStorage.setItem(wI,t)}catch{}},nQ=()=>{const t=tQ();if(!t)return!0;const e=new Date().toISOString().split("T")[0];return t!==e},rQ=({isOpen:t,onClose:e})=>{const[n,r]=_.useState(!1);if(_.useEffect(()=>{t&&r(!1)},[t]),!t)return null;const i=()=>{n&&sQ(),e()},l=c=>{c.target===c.currentTarget&&i()};return s.jsx("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:l,children:s.jsxs("div",{className:"relative w-full max-w-md",children:[s.jsx("button",{onClick:i,className:"absolute -top-12 right-0 p-2 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all z-10",children:s.jsx(bi,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl bg-white",children:s.jsx("img",{src:eQ,alt:"  ",className:"w-full h-auto"})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between px-1",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:c=>r(c.target.checked),className:"w-4 h-4 rounded border-white/50 bg-white/20 text-blue-500 focus:ring-0"}),s.jsx("span",{className:"text-sm text-white/90",children:"   "})]}),s.jsx("button",{onClick:i,className:"px-5 py-2 bg-white/20 hover:bg-white/30 text-white text-sm font-semibold rounded-full transition-all backdrop-blur-sm",children:""})]})]})})},iQ={"today-work":null,menu:"today-work","work-management":"today-work","work-item-list":"work-management","work-order-detail":"work-item-list","work-process-flow":"work-item-list","work-complete-form":"work-order-detail","work-complete-detail":"work-item-list","customer-management":"today-work","equipment-management":"today-work","other-management":"today-work","api-explorer":"today-work","coming-soon":"today-work",settings:"today-work"},aQ=()=>{const[t,e]=_.useState(!1),[n,r]=_.useState(null),[i,l]=_.useState(null),[c,d]=_.useState(""),[u,f]=_.useState(!1),[m,p]=_.useState({todayInProgress:0,todayCompleted:0,weekTotal:0,monthTotal:0}),{isDrawerOpen:y,openDrawer:g,closeDrawer:N,currentView:C,setCurrentView:v,setWorkFilters:R,selectedWorkItem:A,setSelectedWorkItem:M,selectedWorkDirection:L,setSelectedWorkDirection:k,fontScale:V}=Yl();_.useEffect(()=>{const Y={small:"14px",medium:"16px",large:"18px",xlarge:"20px"};document.documentElement.style.fontSize=Y[V]||"16px"},[V]),_.useEffect(()=>{const Y=w=>{console.error("Unhandled Promise Rejection:",w.reason),P("   .","error")},K=w=>{console.error("Global Error:",w.error)};return window.addEventListener("unhandledrejection",Y),window.addEventListener("error",K),()=>{window.removeEventListener("unhandledrejection",Y),window.removeEventListener("error",K)}},[]);const G=(Y,K,w,se,oe,T,I,U,Q)=>{if(e(!0),v("today-work"),Y){const q={userId:Y,userName:K||"",userNameEn:w||K||"",userRole:se||"",crrId:oe,soId:T,mstSoId:I,telNo2:U,authSoList:Q||[]};r(q),localStorage.setItem("userInfo",JSON.stringify(q)),sessionStorage.setItem("userInfo",JSON.stringify(q)),localStorage.setItem("user",JSON.stringify({USR_ID:Y,WRKR_ID:Y,userId:Y,soId:T,SO_ID:T,AUTH_SO_List:Q||[]})),Q&&Q.length>0&&localStorage.setItem("branchList",JSON.stringify(Q))}const H=new Date().toISOString().split("T")[0];R({startDate:H,endDate:H,filter:""}),nQ()&&f(!0)},W=()=>{e(!1),r(null),localStorage.removeItem("userInfo"),localStorage.removeItem("user"),localStorage.removeItem("branchList"),zK(),M(null),k(null),v("today-work"),av.clear()},j=()=>{v("today-work")},S=Y=>{d(Y),v("coming-soon")},P=_.useCallback((Y,K="info",w=!1)=>{l({message:Y,type:K,persistent:w})},[]),F=(Y,K)=>{if(v(Y),K)switch(Y){case"work-order-detail":case"work-process-flow":case"work-complete-form":case"work-complete-detail":M(K);break;case"work-item-list":k(K);break}},ee=()=>{const Y=iQ[C];Y&&v(Y)};if(!t)return s.jsx(MU,{onLogin:G});const J=()=>{switch(C){case"today-work":return s.jsx(UU,{onNavigateToView:F,onNavigateToComingSoon:S,userInfo:n,showToast:P});case"menu":return s.jsx(YD,{onSelectMenu:F});case"work-management":return s.jsx(TU,{onNavigateToMenu:j,onNavigateToView:F,userInfo:n,showToast:P});case"work-order-detail":return A?s.jsx(_5,{order:A,onBack:ee,onStartWorkProcess:Y=>{M(Y),v("work-process-flow")},onComplete:Y=>{M(Y),v("work-process-flow")},showToast:P},A.id):s.jsx("div",{children:"     ."});case"work-process-flow":return A?s.jsx(u9,{workItem:A,onComplete:()=>{P("  .","success"),v("work-item-list")},onBack:ee,showToast:P}):s.jsx("div",{children:"    ."});case"work-complete-form":return A?s.jsx(Rp,{order:A,onBack:ee,onSuccess:()=>{P("  .","success"),v("work-item-list")},showToast:P}):s.jsx("div",{children:"    ."});case"work-complete-detail":return A?s.jsx(kU,{order:A,onBack:()=>{M(null),v("work-item-list")}}):s.jsx("div",{children:"    ."});case"work-item-list":return L?s.jsx(j5,{direction:L,onBack:ee,onNavigateToView:F,userId:n==null?void 0:n.userId,showToast:P}):s.jsx("div",{children:"    ."});case"customer-management":return null;case"equipment-management":return null;case"api-explorer":return s.jsx(YK,{});case"other-management":return s.jsx(XK,{onNavigateToMenu:j,userInfo:n,showToast:P});case"settings":return s.jsx(ZK,{onBack:ee});case"coming-soon":return s.jsx(Wm,{onNavigateToMenu:j,title:c});default:return s.jsx(YD,{onSelectMenu:F})}},$=Y=>{switch(Y){case"today-work":F("today-work");break;case"work-management":F("work-management");break;case"customer-management":F("customer-management");break;case"equipment-management":F("equipment-management");break;case"other-management":F("other-management");break;default:F("today-work")}};return s.jsxs(TM,{client:av,children:[s.jsx(m9,{children:s.jsxs("div",{className:"h-[100dvh] bg-white font-sans overflow-hidden flex flex-col",children:[s.jsx(f9,{isOpen:y,onClose:N,userName:n==null?void 0:n.userName,userId:n==null?void 0:n.userId,stats:m,onLogout:W,onNavigate:$}),s.jsx(Fw,{onLogout:W,onNavigateHome:j,onNavigateBack:ee,onMenuClick:g,currentView:C,userInfo:n,selectedWorkItem:A}),s.jsxs("main",{className:"flex-1 w-full max-w-7xl mx-auto pt-12 pb-[calc(52px+env(safe-area-inset-bottom,0px))] flex flex-col overflow-hidden",children:[J(),s.jsx("div",{style:{display:C==="customer-management"?"contents":"none"},children:s.jsx(gK,{onNavigateToMenu:j,showToast:P})}),s.jsx("div",{style:{display:C==="equipment-management"?"contents":"none"},children:s.jsx(GK,{onNavigateToMenu:j,showToast:P})})]}),s.jsx(wU,{currentView:C,onSelectMenu:F}),i&&s.jsx(h9,{message:i.message,type:i.type,persistent:i.persistent,onClose:()=>l(null)}),s.jsx(rQ,{isOpen:u,onClose:()=>f(!1)})]})}),s.jsx(QM,{initialIsOpen:!1})]})},ST=500;let H0=[],PI=!0;const lQ=t=>{const e={...t,id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()};return H0.unshift(e),H0.length>ST&&(H0=H0.slice(0,ST)),PI&&uQ(e),typeof window<"u"&&window.dispatchEvent(new CustomEvent("api-log-added",{detail:e})),e},oQ=()=>[...H0],cQ=()=>{H0=[]},dQ=t=>{PI=t},uQ=t=>{const e={success:"",error:"",timeout:""}[t.status],n={success:"color: #10B981",error:"color: #EF4444",timeout:"color: #F59E0B"}[t.status];console.group(`%c${e} [${t.method}] ${t.api} (${t.duration}ms)`,`font-weight: bold; ${n}`),console.log("%c Request:","color: #3B82F6; font-weight: bold"),console.table(t.request),t.status==="success"?(console.log("%c Response:","color: #10B981; font-weight: bold"),Array.isArray(t.response)?(console.log(`Array[${t.response.length}]`),t.response.length>0&&(console.log("First item fields:",Object.keys(t.response[0])),console.table(t.response.slice(0,3)))):typeof t.response=="object"?console.table(t.response):console.log(t.response)):console.log("%c Error:","color: #EF4444; font-weight: bold",t.error),console.groupEnd()},AI=[{name:"",api:"/customer/equipment/getEquipmentOutList",method:"POST",params:{WRKR_ID:"20230019"},expectedFields:["EQT_NO","EQT_TYPE","SERIAL_NO","WRKR_ID"],description:"   "},{name:"",api:"/customer/equipment/getEquipmentProcYnCheck",method:"POST",params:{WRKR_ID:"20230019",SO_ID:"SO001",EQT_NO:"EQT001"},expectedFields:["PROC_YN","EQT_NO"],description:"    "},{name:"",api:"/customer/equipment/addCorporationEquipmentQuota",method:"POST",params:{SO_ID:"SO001",EQT_NO:"EQT001",CARRIER_ID:"CRR001",WRKR_ID:"20230019"},expectedFields:["RESULT","MESSAGE"],description:"    ()"},{name:"",api:"/customer/equipment/getEquipmentReturnRequestList",method:"POST",params:{WRKR_ID:"20230019"},expectedFields:["REQUEST_ID","EQT_NO","STATUS"],description:"  "},{name:"",api:"/customer/equipment/getEquipmentReturnRequestCheck",method:"POST",params:{WRKR_ID:"20230019",SO_ID:"SO001",EQT_NO:"EQT001"},expectedFields:["RETURN_YN"],description:"     "},{name:"",api:"/customer/equipment/addEquipmentReturnRequest",method:"POST",params:{EQT_NO:"EQT001",WRKR_ID:"20230019"},expectedFields:["RESULT","REQUEST_ID"],description:"   "},{name:"",api:"/customer/equipment/getWrkrHaveEqtList",method:"POST",params:{WRKR_ID:"20230019"},expectedFields:["EQT_NO","EQT_TYPE","SERIAL_NO","STATUS"],description:"   "},{name:"",api:"/customer/equipment/cmplEqtCustLossIndem",method:"POST",params:{EQT_NO:"EQT001"},expectedFields:["RESULT","INDEM_AMOUNT"],description:"   "},{name:"()",api:"/customer/equipment/setEquipmentChkStndByY",method:"POST",params:{EQT_NO:"EQT001",WRKR_ID:"20230019"},expectedFields:["RESULT","NEW_STATUS"],description:"  "},{name:"",api:"/statistics/equipment/getEquipmentHistoryInfo",method:"POST",params:{EQT_NO:"EQT001"},expectedFields:["HIST_ID","HIST_TYPE","HIST_DATE"],description:"  "},{name:"",api:"/customer/equipment/changeEqtWrkr_3_ForM",method:"POST",params:{EQT_NO:"EQT001",TO_WRKR_ID:"20230020"},expectedFields:["MSGCODE","MESSAGE","MV_WRKR_ID"],description:"    (Map  )"},{name:"",api:"/system/cm/getFindUsrList3",method:"POST",params:{USR_NM:""},expectedFields:["USR_ID","USR_NM","MOBILE"],description:" "},{name:"",api:"/customer/sigtrans/saveENSSendHist",method:"POST",params:{EQT_NO:"EQT001",TO_WRKR_ID:"20230020",FROM_WRKR_ID:"20230019"},expectedFields:["RESULT","ENS_ID"],description:"   "},{name:"",api:"/customer/work/getEquipLossInfo",method:"POST",params:{},expectedFields:["LOSS_ID","EQT_NO","STATE"],description:"/  "},{name:"",api:"/customer/work/modEquipLoss",method:"POST",params:{EQT_NO:"EQT001",STATE:"Recovered"},expectedFields:["RESULT","NEW_STATE"],description:"   "},{name:"",api:"/customer/work/getCustProdInfo",method:"POST",params:{WRKR_ID:"20230019",EQT_SEL:"0",EQT_CL:"ALL"},expectedFields:["output1","output2","output3"],description:" 3  "},{name:"",api:"/customer/work/eqtCmpsInfoChg",method:"POST",params:{WRK_ID:"WRK001",parameters:[]},expectedFields:["RESULT"],description:"    "},{name:"",api:"/customer/work/signalCheck",method:"POST",params:{serialNo:"TEST001",equipmentType:"modem"},expectedFields:["status","message"],description:"/STB  "},{name:"",api:"/customer/receipt/contract/getEquipmentNmListOfProd",method:"POST",params:{PROD_CD:"PROD001"},expectedFields:["EQT_CL_CD","EQT_CL_NM"],description:"    "},{name:"",api:"/customer/receipt/contract/getContractEqtList",method:"POST",params:{CTRT_ID:"CTRT001",PROD_CD:"PROD001"},expectedFields:["SVC_CMPS_ID","EQT_NO"],description:"  "}],hQ={"/customer/equipment/getWrkrHaveEqtList":[{param:"EQT_STAT_CD",values:["10","3","20","30","Assigned","Available","Lost"],description:"   ( vs )"},{param:"ITEM_MID_CD",values:["04","05","07","03","4","5","MODEM","STB"],description:"  (04:, 05:STB)"},{param:"EQT_SEL",values:["0","1","Y","N","ALL"],description:"  "},{param:"EQT_CL",values:["ALL","MODEM","STB","04","05"],description:" "}],"/customer/equipment/getEquipmentOutList":[{param:"OUT_STAT",values:["Y","N","1","0","OUT","IN"],description:" "},{param:"SEARCH_TYPE",values:["1","2","3","A","B","ALL"],description:" "}],"/customer/work/getCustProdInfo":[{param:"EQT_SEL",values:["0","1","2","Y","N"],description:"  "},{param:"EQT_CL",values:["ALL","04","05","MODEM","STB","1","2"],description:"  "},{param:"CRR_TSK_CL",values:["01","05","07","09","11","1","5","7","9"],description:"  (01:, 05:, 07:, 09:AS)"}],"/system/cm/getFindUsrList3":[{param:"SEARCH_TYPE",values:["1","2","3","NM","ID","ALL"],description:" "},{param:"USR_TYPE",values:["W","M","A","Worker","Manager","1","2"],description:" "}]},fQ=async(t,e,n,r)=>{const i={api:t,workingParams:[],failedParams:[],discoveredFields:[],notes:[]};console.group(`%c  : ${t}`,"font-weight: bold; color: #8B5CF6"),console.log(" :",e),console.log(" :",n.length," ");try{const l=await vT(r+t,"POST",e);l.success&&(i.workingParams.push({...e,_note:" "}),i.discoveredFields=l.fields,i.notes.push("    "))}catch{i.notes.push("   ")}for(const l of n){console.log(`
: ${l.param} - ${l.description}`);for(const c of l.values){const d={...e,[l.param]:c};try{const u=await vT(r+t,"POST",d);u.success?(console.log(`   ${l.param}=${c}   (${u.fields.length} fields)`),i.workingParams.push({...d,_note:`${l.param}=${c} `}),u.fields.forEach(f=>{i.discoveredFields.includes(f)||(i.discoveredFields.push(f),i.notes.push(`   : ${f} (${l.param}=${c})`))})):(console.log(`   ${l.param}=${c}  `),i.failedParams.push({...d,_error:u.error}))}catch{console.log(`   ${l.param}=${c}  `)}await new Promise(u=>setTimeout(u,100))}}return console.groupEnd(),i},vT=async(t,e,n)=>{try{const r=await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});if(!r.ok)return{success:!1,fields:[],error:`HTTP ${r.status}`};const i=await r.json();let l=[];return Array.isArray(i)&&i.length>0?l=Object.keys(i[0]):typeof i=="object"&&i!==null&&(l=Object.keys(i)),i.code==="ERROR"||i.error||i.RESULT==="FAIL"?{success:!1,fields:l,error:i.message||i.error}:{success:!0,fields:l}}catch(r){return{success:!1,fields:[],error:r.message}}},mQ=async(t,e=AI,n=1e4)=>{const r=Date.now();console.clear(),console.log("%c D'Live  API   ","font-size: 20px; font-weight: bold; color: #3B82F6"),console.log(` : ${new Date().toLocaleString()}`),console.log(`API Base: ${t}`),console.log(` : ${e.length}`),console.log("".repeat(60));const i=[];for(let m=0;m<e.length;m++){const p=e[m],y=`[${m+1}/${e.length}]`;console.log(`
${y} : ${p.name}`),console.log(`  API: ${p.api}`),console.log("  Params:",p.params);const g=Date.now();try{const N=new AbortController,C=setTimeout(()=>N.abort(),n),v=await fetch(t+p.api,{method:p.method,headers:{"Content-Type":"application/json"},body:p.method==="POST"?JSON.stringify(p.params):void 0,credentials:"include",signal:N.signal});clearTimeout(C);const R=Date.now()-g;if(!v.ok){console.log(`   HTTP Error: ${v.status}`),i.push({name:p.name,api:p.api,status:"error",duration:R,error:`HTTP ${v.status}`});continue}const A=await v.json();let M=[];if(Array.isArray(A)&&A.length>0?(M=Object.keys(A[0]),console.log(`    (${R}ms) - Array[${A.length}]`),console.log(`   : ${M.join(", ")}`)):A.output1||A.output2?(M=Object.keys(A),console.log(`    (${R}ms) - Multi-output`),Object.keys(A).forEach(L=>{Array.isArray(A[L])&&console.log(`    ${L}: Array[${A[L].length}]`)})):typeof A=="object"&&(M=Object.keys(A),console.log(`    (${R}ms)`),console.log(`   : ${M.join(", ")}`)),p.expectedFields){const L=p.expectedFields.filter(k=>!M.includes(k));L.length>0&&console.log(`     : ${L.join(", ")}`)}i.push({name:p.name,api:p.api,status:"success",duration:R,responseFields:M})}catch(N){const C=Date.now()-g;N.name==="AbortError"?(console.log(`    (${n}ms)`),i.push({name:p.name,api:p.api,status:"timeout",duration:C,error:"Timeout"})):(console.log(`   : ${N.message}`),i.push({name:p.name,api:p.api,status:"error",duration:C,error:N.message}))}await new Promise(N=>setTimeout(N,200))}const l=i.filter(m=>m.status==="success").length,c=i.filter(m=>m.status==="error").length,d=i.filter(m=>m.status==="timeout").length,u=Date.now()-r;console.log(`
`+"".repeat(60)),console.log("%c   ","font-size: 16px; font-weight: bold"),console.log("".repeat(60)),console.log(` API: ${e.length}`),console.log(`%c : ${l}`,"color: #10B981"),console.log(`%c : ${c}`,"color: #EF4444"),console.log(`%c : ${d}`,"color: #F59E0B"),console.log(` : ${(u/1e3).toFixed(1)}`),console.log("".repeat(60)),(c>0||d>0)&&(console.log(`
%c   API:`,"font-weight: bold; color: #F59E0B"),i.filter(m=>m.status!=="success").forEach(m=>{console.log(`  - ${m.name}: ${m.error||m.status}`)})),console.log(`
%c   :`,"font-weight: bold; color: #3B82F6"),i.filter(m=>m.status==="success"&&m.responseFields).forEach(m=>{var p;console.log(`  ${m.name}: ${(p=m.responseFields)==null?void 0:p.join(", ")}`)});const f={timestamp:new Date().toISOString(),totalApis:e.length,successCount:l,failCount:c,timeoutCount:d,results:i,summary:`${l}/${e.length} APIs working (${c} failed, ${d} timeout)`};return typeof window<"u"&&(window.__lastApiCheck=f,console.log(`
  : window.__lastApiCheck`)),f},gQ=t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`api-check-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(n)};typeof window<"u"&&(window.dliveDebug={runFullCheck:t=>mQ(t||"/api"),getLogs:oQ,clearLogs:cQ,setDebugMode:dQ,testCases:AI,paramVariations:hQ,discoverParams:fQ,downloadResult:gQ},window.addEventListener("api-call-complete",(t=>{const e=t.detail;e&&e.api&&lQ(e)})),console.log("%c D'Live API  ","font-weight: bold; color: #8B5CF6"),console.log("".repeat(50)),console.log("%c  :","font-weight: bold"),console.log("  dliveDebug.runFullCheck()     -    API "),console.log("  dliveDebug.getLogs()          -  API  "),console.log("  dliveDebug.clearLogs()        -   "),console.log("  dliveDebug.setDebugMode(true) -    ON/OFF"),console.log("".repeat(50)),console.log("%c :  > API   UI  ","color: #6366F1"));const kI=document.getElementById("root");if(!kI)throw new Error("Could not find root element to mount to");const xQ=nM.createRoot(kI);xQ.render(s.jsx(Gi.StrictMode,{children:s.jsx(aQ,{})}));export{xr as _,_Q as c,nb as g};

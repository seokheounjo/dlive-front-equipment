var G3=Object.defineProperty;var w5=t=>{throw TypeError(t)};var W3=(t,e,n)=>e in t?G3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var cr=(t,e,n)=>W3(t,typeof e!="symbol"?e+"":e,n),fb=(t,e,n)=>e.has(t)||w5("Cannot "+n);var bt=(t,e,n)=>(fb(t,e,"read from private field"),n?n.call(t):e.get(t)),an=(t,e,n)=>e.has(t)?w5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Gs=(t,e,n,r)=>(fb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),On=(t,e,n)=>(fb(t,e,"access private method"),n);var Mx=(t,e,n,r)=>({set _(i){Gs(t,e,i,n)},get _(){return bt(t,e,r)}});function F3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var fX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mb={exports:{}},lg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5;function K3(){if(L5)return lg;L5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return lg.Fragment=e,lg.jsx=n,lg.jsxs=n,lg}var P5;function Q3(){return P5||(P5=1,mb.exports=K3()),mb.exports}var s=Q3(),gb={exports:{}},vn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A5;function Y3(){if(A5)return vn;A5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),p=Symbol.iterator;function g(T){return T===null||typeof T!="object"?null:(T=p&&T[p]||T["@@iterator"],typeof T=="function"?T:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,N={};function v(T,j,K){this.props=T,this.context=j,this.refs=N,this.updater=K||C}v.prototype.isReactComponent={},v.prototype.setState=function(T,j){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,j,"setState")},v.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function P(){}P.prototype=v.prototype;function w(T,j,K){this.props=T,this.context=j,this.refs=N,this.updater=K||C}var M=w.prototype=new P;M.constructor=w,y(M,v.prototype),M.isPureReactComponent=!0;var k=Array.isArray;function B(){}var G={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function I(T,j,K){var J=K.ref;return{$$typeof:t,type:T,key:j,ref:J!==void 0?J:null,props:K}}function E(T,j){return I(T.type,j,T.props)}function A(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function Y(T){var j={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(K){return j[K]})}var se=/\/+/g;function X(T,j){return typeof T=="object"&&T!==null&&T.key!=null?Y(""+T.key):j.toString(36)}function z(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(B,B):(T.status="pending",T.then(function(j){T.status==="pending"&&(T.status="fulfilled",T.value=j)},function(j){T.status==="pending"&&(T.status="rejected",T.reason=j)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function $(T,j,K,J,q){var V=typeof T;(V==="undefined"||V==="boolean")&&(T=null);var ce=!1;if(T===null)ce=!0;else switch(V){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(T.$$typeof){case t:case e:ce=!0;break;case m:return ce=T._init,$(ce(T._payload),j,K,J,q)}}if(ce)return q=q(T),ce=J===""?"."+X(T,0):J,k(q)?(K="",ce!=null&&(K=ce.replace(se,"$&/")+"/"),$(q,j,K,"",function(ge){return ge})):q!=null&&(A(q)&&(q=E(q,K+(q.key==null||T&&T.key===q.key?"":(""+q.key).replace(se,"$&/")+"/")+ce)),j.push(q)),1;ce=0;var me=J===""?".":J+":";if(k(T))for(var Ce=0;Ce<T.length;Ce++)J=T[Ce],V=me+X(J,Ce),ce+=$(J,j,K,V,q);else if(Ce=g(T),typeof Ce=="function")for(T=Ce.call(T),Ce=0;!(J=T.next()).done;)J=J.value,V=me+X(J,Ce++),ce+=$(J,j,K,V,q);else if(V==="object"){if(typeof T.then=="function")return $(z(T),j,K,J,q);throw j=String(T),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return ce}function F(T,j,K){if(T==null)return T;var J=[],q=0;return $(T,J,"","",function(V){return j.call(K,V,q++)}),J}function L(T){if(T._status===-1){var j=T._result;j=j(),j.then(function(K){(T._status===0||T._status===-1)&&(T._status=1,T._result=K)},function(K){(T._status===0||T._status===-1)&&(T._status=2,T._result=K)}),T._status===-1&&(T._status=0,T._result=j)}if(T._status===1)return T._result.default;throw T._result}var re=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},fe={map:F,forEach:function(T,j,K){F(T,function(){j.apply(this,arguments)},K)},count:function(T){var j=0;return F(T,function(){j++}),j},toArray:function(T){return F(T,function(j){return j})||[]},only:function(T){if(!A(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return vn.Activity=_,vn.Children=fe,vn.Component=v,vn.Fragment=n,vn.Profiler=i,vn.PureComponent=w,vn.StrictMode=r,vn.Suspense=u,vn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,vn.__COMPILER_RUNTIME={__proto__:null,c:function(T){return G.H.useMemoCache(T)}},vn.cache=function(T){return function(){return T.apply(null,arguments)}},vn.cacheSignal=function(){return null},vn.cloneElement=function(T,j,K){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var J=y({},T.props),q=T.key;if(j!=null)for(V in j.key!==void 0&&(q=""+j.key),j)!U.call(j,V)||V==="key"||V==="__self"||V==="__source"||V==="ref"&&j.ref===void 0||(J[V]=j[V]);var V=arguments.length-2;if(V===1)J.children=K;else if(1<V){for(var ce=Array(V),me=0;me<V;me++)ce[me]=arguments[me+2];J.children=ce}return I(T.type,q,J)},vn.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:a,_context:T},T},vn.createElement=function(T,j,K){var J,q={},V=null;if(j!=null)for(J in j.key!==void 0&&(V=""+j.key),j)U.call(j,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(q[J]=j[J]);var ce=arguments.length-2;if(ce===1)q.children=K;else if(1<ce){for(var me=Array(ce),Ce=0;Ce<ce;Ce++)me[Ce]=arguments[Ce+2];q.children=me}if(T&&T.defaultProps)for(J in ce=T.defaultProps,ce)q[J]===void 0&&(q[J]=ce[J]);return I(T,V,q)},vn.createRef=function(){return{current:null}},vn.forwardRef=function(T){return{$$typeof:c,render:T}},vn.isValidElement=A,vn.lazy=function(T){return{$$typeof:m,_payload:{_status:-1,_result:T},_init:L}},vn.memo=function(T,j){return{$$typeof:h,type:T,compare:j===void 0?null:j}},vn.startTransition=function(T){var j=G.T,K={};G.T=K;try{var J=T(),q=G.S;q!==null&&q(K,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(B,re)}catch(V){re(V)}finally{j!==null&&K.types!==null&&(j.types=K.types),G.T=j}},vn.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},vn.use=function(T){return G.H.use(T)},vn.useActionState=function(T,j,K){return G.H.useActionState(T,j,K)},vn.useCallback=function(T,j){return G.H.useCallback(T,j)},vn.useContext=function(T){return G.H.useContext(T)},vn.useDebugValue=function(){},vn.useDeferredValue=function(T,j){return G.H.useDeferredValue(T,j)},vn.useEffect=function(T,j){return G.H.useEffect(T,j)},vn.useEffectEvent=function(T){return G.H.useEffectEvent(T)},vn.useId=function(){return G.H.useId()},vn.useImperativeHandle=function(T,j,K){return G.H.useImperativeHandle(T,j,K)},vn.useInsertionEffect=function(T,j){return G.H.useInsertionEffect(T,j)},vn.useLayoutEffect=function(T,j){return G.H.useLayoutEffect(T,j)},vn.useMemo=function(T,j){return G.H.useMemo(T,j)},vn.useOptimistic=function(T,j){return G.H.useOptimistic(T,j)},vn.useReducer=function(T,j,K){return G.H.useReducer(T,j,K)},vn.useRef=function(T){return G.H.useRef(T)},vn.useState=function(T){return G.H.useState(T)},vn.useSyncExternalStore=function(T,j,K){return G.H.useSyncExternalStore(T,j,K)},vn.useTransition=function(){return G.H.useTransition()},vn.version="19.2.3",vn}var k5;function F2(){return k5||(k5=1,gb.exports=Y3()),gb.exports}var b=F2();const Zi=W2(b),eM=F3({__proto__:null,default:Zi},[b]);var _b={exports:{}},og={},xb={exports:{}},pb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U5;function $3(){return U5||(U5=1,(function(t){function e($,F){var L=$.length;$.push(F);e:for(;0<L;){var re=L-1>>>1,fe=$[re];if(0<i(fe,F))$[re]=F,$[L]=fe,L=re;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var F=$[0],L=$.pop();if(L!==F){$[0]=L;e:for(var re=0,fe=$.length,T=fe>>>1;re<T;){var j=2*(re+1)-1,K=$[j],J=j+1,q=$[J];if(0>i(K,L))J<fe&&0>i(q,K)?($[re]=q,$[J]=L,re=J):($[re]=K,$[j]=L,re=j);else if(J<fe&&0>i(q,L))$[re]=q,$[J]=L,re=J;else break e}}return F}function i($,F){var L=$.sortIndex-F.sortIndex;return L!==0?L:$.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,_=null,p=3,g=!1,C=!1,y=!1,N=!1,v=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function M($){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=$)r(h),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(h)}}function k($){if(y=!1,M($),!C)if(n(u)!==null)C=!0,B||(B=!0,Y());else{var F=n(h);F!==null&&z(k,F.startTime-$)}}var B=!1,G=-1,U=5,I=-1;function E(){return N?!0:!(t.unstable_now()-I<U)}function A(){if(N=!1,B){var $=t.unstable_now();I=$;var F=!0;try{e:{C=!1,y&&(y=!1,P(G),G=-1),g=!0;var L=p;try{t:{for(M($),_=n(u);_!==null&&!(_.expirationTime>$&&E());){var re=_.callback;if(typeof re=="function"){_.callback=null,p=_.priorityLevel;var fe=re(_.expirationTime<=$);if($=t.unstable_now(),typeof fe=="function"){_.callback=fe,M($),F=!0;break t}_===n(u)&&r(u),M($)}else r(u);_=n(u)}if(_!==null)F=!0;else{var T=n(h);T!==null&&z(k,T.startTime-$),F=!1}}break e}finally{_=null,p=L,g=!1}F=void 0}}finally{F?Y():B=!1}}}var Y;if(typeof w=="function")Y=function(){w(A)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,X=se.port2;se.port1.onmessage=A,Y=function(){X.postMessage(null)}}else Y=function(){v(A,0)};function z($,F){G=v(function(){$(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var L=p;p=F;try{return $()}finally{p=L}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function($,F){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=p;p=$;try{return F()}finally{p=L}},t.unstable_scheduleCallback=function($,F,L){var re=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?re+L:re):L=re,$){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=L+fe,$={id:m++,callback:F,priorityLevel:$,startTime:L,expirationTime:fe,sortIndex:-1},L>re?($.sortIndex=L,e(h,$),n(u)===null&&$===n(h)&&(y?(P(G),G=-1):y=!0,z(k,L-re))):($.sortIndex=fe,e(u,$),C||g||(C=!0,B||(B=!0,Y()))),$},t.unstable_shouldYield=E,t.unstable_wrapCallback=function($){var F=p;return function(){var L=p;p=F;try{return $.apply(this,arguments)}finally{p=L}}}})(pb)),pb}var B5;function V3(){return B5||(B5=1,xb.exports=$3()),xb.exports}var yb={exports:{}},ja={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G5;function z3(){if(G5)return ja;G5=1;var t=F2();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,h,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:u,containerInfo:h,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ja.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,m)},ja.flushSync=function(u){var h=o.T,m=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=h,r.p=m,r.d.f()}},ja.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},ja.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},ja.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,_=c(m,h.crossOrigin),p=typeof h.integrity=="string"?h.integrity:void 0,g=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:p,fetchPriority:g}):m==="script"&&r.d.X(u,{crossOrigin:_,integrity:p,fetchPriority:g,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ja.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},ja.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,_=c(m,h.crossOrigin);r.d.L(u,m,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ja.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},ja.requestFormReset=function(u){r.d.r(u)},ja.unstable_batchedUpdates=function(u,h){return u(h)},ja.useFormState=function(u,h,m){return o.H.useFormState(u,h,m)},ja.useFormStatus=function(){return o.H.useHostTransitionStatus()},ja.version="19.2.3",ja}var W5;function tM(){if(W5)return yb.exports;W5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yb.exports=z3(),yb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F5;function H3(){if(F5)return og;F5=1;var t=V3(),e=F2(),n=tM();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,f=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(f=d.return),l=d.return;while(l)}return d.tag===3?f:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(a(l)!==l)throw Error(r(188))}function h(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var f=l,x=d;;){var D=f.return;if(D===null)break;var O=D.alternate;if(O===null){if(x=D.return,x!==null){f=x;continue}break}if(D.child===O.child){for(O=D.child;O;){if(O===f)return u(D),l;if(O===x)return u(D),d;O=O.sibling}throw Error(r(188))}if(f.return!==x.return)f=D,x=O;else{for(var oe=!1,Pe=D.child;Pe;){if(Pe===f){oe=!0,f=D,x=O;break}if(Pe===x){oe=!0,x=D,f=O;break}Pe=Pe.sibling}if(!oe){for(Pe=O.child;Pe;){if(Pe===f){oe=!0,f=O,x=D;break}if(Pe===x){oe=!0,x=O,f=D;break}Pe=Pe.sibling}if(!oe)throw Error(r(189))}}if(f.alternate!==x)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:d}function m(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=m(l),d!==null)return d;l=l.sibling}return null}var _=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),w=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function Y(l){return l===null||typeof l!="object"?null:(l=A&&l[A]||l["@@iterator"],typeof l=="function"?l:null)}var se=Symbol.for("react.client.reference");function X(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===se?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case y:return"Fragment";case v:return"Profiler";case N:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case I:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case C:return"Portal";case w:return l.displayName||"Context";case P:return(l._context.displayName||"Context")+".Consumer";case M:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case G:return d=l.displayName||null,d!==null?d:X(l.type)||"Memo";case U:d=l._payload,l=l._init;try{return X(l(d))}catch{}}return null}var z=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},re=[],fe=-1;function T(l){return{current:l}}function j(l){0>fe||(l.current=re[fe],re[fe]=null,fe--)}function K(l,d){fe++,re[fe]=l.current,l.current=d}var J=T(null),q=T(null),V=T(null),ce=T(null);function me(l,d){switch(K(V,d),K(q,l),K(J,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?s5(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=s5(d),l=n5(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}j(J),K(J,l)}function Ce(){j(J),j(q),j(V)}function ge(l){l.memoizedState!==null&&K(ce,l);var d=J.current,f=n5(d,l.type);d!==f&&(K(q,l),K(J,f))}function Ge(l){q.current===l&&(j(J),j(q)),ce.current===l&&(j(ce),ng._currentValue=L)}var te,he;function de(l){if(te===void 0)try{throw Error()}catch(f){var d=f.stack.trim().match(/\n( *(at )?)/);te=d&&d[1]||"",he=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+he}var Q=!1;function ee(l,d){if(!l||Q)return"";Q=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(d){var us=function(){throw Error()};if(Object.defineProperty(us.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(us,[])}catch(Ht){var $t=Ht}Reflect.construct(l,[],us)}else{try{us.call()}catch(Ht){$t=Ht}l.call(us.prototype)}}else{try{throw Error()}catch(Ht){$t=Ht}(us=l())&&typeof us.catch=="function"&&us.catch(function(){})}}catch(Ht){if(Ht&&$t&&typeof Ht.stack=="string")return[Ht.stack,$t.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=x.DetermineComponentFrameRoot(),oe=O[0],Pe=O[1];if(oe&&Pe){var yt=oe.split(`
`),Qt=Pe.split(`
`);for(D=x=0;x<yt.length&&!yt[x].includes("DetermineComponentFrameRoot");)x++;for(;D<Qt.length&&!Qt[D].includes("DetermineComponentFrameRoot");)D++;if(x===yt.length||D===Qt.length)for(x=yt.length-1,D=Qt.length-1;1<=x&&0<=D&&yt[x]!==Qt[D];)D--;for(;1<=x&&0<=D;x--,D--)if(yt[x]!==Qt[D]){if(x!==1||D!==1)do if(x--,D--,0>D||yt[x]!==Qt[D]){var ns=`
`+yt[x].replace(" at new "," at ");return l.displayName&&ns.includes("<anonymous>")&&(ns=ns.replace("<anonymous>",l.displayName)),ns}while(1<=x&&0<=D);break}}}finally{Q=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?de(f):""}function Z(l,d){switch(l.tag){case 26:case 27:case 5:return de(l.type);case 16:return de("Lazy");case 13:return l.child!==d&&d!==null?de("Suspense Fallback"):de("Suspense");case 19:return de("SuspenseList");case 0:case 15:return ee(l.type,!1);case 11:return ee(l.type.render,!1);case 1:return ee(l.type,!0);case 31:return de("Activity");default:return""}}function le(l){try{var d="",f=null;do d+=Z(l,f),f=l,l=l.return;while(l);return d}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var xe=Object.prototype.hasOwnProperty,be=t.unstable_scheduleCallback,ne=t.unstable_cancelCallback,ie=t.unstable_shouldYield,pe=t.unstable_requestPaint,ze=t.unstable_now,xt=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,St=t.unstable_UserBlockingPriority,ot=t.unstable_NormalPriority,Be=t.unstable_LowPriority,lt=t.unstable_IdlePriority,pt=t.log,mt=t.unstable_setDisableYieldValue,Ye=null,at=null;function Fe(l){if(typeof pt=="function"&&mt(l),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(Ye,l)}catch{}}var tt=Math.clz32?Math.clz32:dt,ct=Math.log,Mt=Math.LN2;function dt(l){return l>>>=0,l===0?32:31-(ct(l)/Mt|0)|0}var Je=256,De=262144,$e=4194304;function Ne(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ye(l,d,f){var x=l.pendingLanes;if(x===0)return 0;var D=0,O=l.suspendedLanes,oe=l.pingedLanes;l=l.warmLanes;var Pe=x&134217727;return Pe!==0?(x=Pe&~O,x!==0?D=Ne(x):(oe&=Pe,oe!==0?D=Ne(oe):f||(f=Pe&~l,f!==0&&(D=Ne(f))))):(Pe=x&~O,Pe!==0?D=Ne(Pe):oe!==0?D=Ne(oe):f||(f=x&~l,f!==0&&(D=Ne(f)))),D===0?0:d!==0&&d!==D&&(d&O)===0&&(O=D&-D,f=d&-d,O>=f||O===32&&(f&4194048)!==0)?d:D}function Ue(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ue(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oe(){var l=$e;return $e<<=1,($e&62914560)===0&&($e=4194304),l}function Ze(l){for(var d=[],f=0;31>f;f++)d.push(l);return d}function Le(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function vt(l,d,f,x,D,O){var oe=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var Pe=l.entanglements,yt=l.expirationTimes,Qt=l.hiddenUpdates;for(f=oe&~f;0<f;){var ns=31-tt(f),us=1<<ns;Pe[ns]=0,yt[ns]=-1;var $t=Qt[ns];if($t!==null)for(Qt[ns]=null,ns=0;ns<$t.length;ns++){var Ht=$t[ns];Ht!==null&&(Ht.lane&=-536870913)}f&=~us}x!==0&&je(l,x,0),O!==0&&D===0&&l.tag!==0&&(l.suspendedLanes|=O&~(oe&~d))}function je(l,d,f){l.pendingLanes|=d,l.suspendedLanes&=~d;var x=31-tt(d);l.entangledLanes|=d,l.entanglements[x]=l.entanglements[x]|1073741824|f&261930}function ut(l,d){var f=l.entangledLanes|=d;for(l=l.entanglements;f;){var x=31-tt(f),D=1<<x;D&d|l[x]&d&&(l[x]|=d),f&=~D}}function gt(l,d){var f=d&-d;return f=(f&42)!==0?1:jt(f),(f&(l.suspendedLanes|d))!==0?0:f}function jt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ve(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Vt(){var l=F.p;return l!==0?l:(l=window.event,l===void 0?32:D5(l.type))}function ke(l,d){var f=F.p;try{return F.p=l,d()}finally{F.p=f}}var ss=Math.random().toString(36).slice(2),ls="__reactFiber$"+ss,ds="__reactProps$"+ss,vs="__reactContainer$"+ss,Ss="__reactEvents$"+ss,Ae="__reactListeners$"+ss,ft="__reactHandles$"+ss,rt="__reactResources$"+ss,Wt="__reactMarker$"+ss;function _t(l){delete l[ls],delete l[ds],delete l[Ss],delete l[Ae],delete l[ft]}function qt(l){var d=l[ls];if(d)return d;for(var f=l.parentNode;f;){if(d=f[vs]||f[ls]){if(f=d.alternate,d.child!==null||f!==null&&f.child!==null)for(l=d5(l);l!==null;){if(f=l[ls])return f;l=d5(l)}return d}l=f,f=l.parentNode}return null}function Ot(l){if(l=l[ls]||l[vs]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function _e(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Se(l){var d=l[rt];return d||(d=l[rt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Ie(l){l[Wt]=!0}var Te=new Set,nt={};function Re(l,d){Ct(l,d),Ct(l+"Capture",d)}function Ct(l,d){for(nt[l]=d,l=0;l<d.length;l++)Te.add(d[l])}var Ke=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Et={},Rt={};function He(l){return xe.call(Rt,l)?!0:xe.call(Et,l)?!1:Ke.test(l)?Rt[l]=!0:(Et[l]=!0,!1)}function ht(l,d,f){if(He(d))if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var x=d.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+f)}}function Pt(l,d,f){if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+f)}}function Bt(l,d,f,x){if(x===null)l.removeAttribute(f);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(d,f,""+x)}}function Yt(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Xt(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ts(l,d,f){var x=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var D=x.get,O=x.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return D.call(this)},set:function(oe){f=""+oe,O.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:x.enumerable}),{getValue:function(){return f},setValue:function(oe){f=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Ut(l){if(!l._valueTracker){var d=Xt(l)?"checked":"value";l._valueTracker=ts(l,d,""+l[d])}}function Ms(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var f=d.getValue(),x="";return l&&(x=Xt(l)?l.checked?"true":"false":l.value),l=x,l!==f?(d.setValue(l),!0):!1}function Cs(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Bs=/[\n"\\]/g;function _s(l){return l.replace(Bs,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Es(l,d,f,x,D,O,oe,Pe){l.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?l.type=oe:l.removeAttribute("type"),d!=null?oe==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Yt(d)):l.value!==""+Yt(d)&&(l.value=""+Yt(d)):oe!=="submit"&&oe!=="reset"||l.removeAttribute("value"),d!=null?cs(l,oe,Yt(d)):f!=null?cs(l,oe,Yt(f)):x!=null&&l.removeAttribute("value"),D==null&&O!=null&&(l.defaultChecked=!!O),D!=null&&(l.checked=D&&typeof D!="function"&&typeof D!="symbol"),Pe!=null&&typeof Pe!="function"&&typeof Pe!="symbol"&&typeof Pe!="boolean"?l.name=""+Yt(Pe):l.removeAttribute("name")}function js(l,d,f,x,D,O,oe,Pe){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),d!=null||f!=null){if(!(O!=="submit"&&O!=="reset"||d!=null)){Ut(l);return}f=f!=null?""+Yt(f):"",d=d!=null?""+Yt(d):f,Pe||d===l.value||(l.value=d),l.defaultValue=d}x=x??D,x=typeof x!="function"&&typeof x!="symbol"&&!!x,l.checked=Pe?l.checked:!!x,l.defaultChecked=!!x,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(l.name=oe),Ut(l)}function cs(l,d,f){d==="number"&&Cs(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function fs(l,d,f,x){if(l=l.options,d){d={};for(var D=0;D<f.length;D++)d["$"+f[D]]=!0;for(f=0;f<l.length;f++)D=d.hasOwnProperty("$"+l[f].value),l[f].selected!==D&&(l[f].selected=D),D&&x&&(l[f].defaultSelected=!0)}else{for(f=""+Yt(f),d=null,D=0;D<l.length;D++){if(l[D].value===f){l[D].selected=!0,x&&(l[D].defaultSelected=!0);return}d!==null||l[D].disabled||(d=l[D])}d!==null&&(d.selected=!0)}}function Ys(l,d,f){if(d!=null&&(d=""+Yt(d),d!==l.value&&(l.value=d),f==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=f!=null?""+Yt(f):""}function Ls(l,d,f,x){if(d==null){if(x!=null){if(f!=null)throw Error(r(92));if(z(x)){if(1<x.length)throw Error(r(93));x=x[0]}f=x}f==null&&(f=""),d=f}f=Yt(d),l.defaultValue=f,x=l.textContent,x===f&&x!==""&&x!==null&&(l.value=x),Ut(l)}function it(l,d){if(d){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=d;return}}l.textContent=d}var Ft=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bs(l,d,f){var x=d.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?x?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":x?l.setProperty(d,f):typeof f!="number"||f===0||Ft.has(d)?d==="float"?l.cssFloat=f:l[d]=(""+f).trim():l[d]=f+"px"}function zt(l,d,f){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,f!=null){for(var x in f)!f.hasOwnProperty(x)||d!=null&&d.hasOwnProperty(x)||(x.indexOf("--")===0?l.setProperty(x,""):x==="float"?l.cssFloat="":l[x]="");for(var D in d)x=d[D],d.hasOwnProperty(D)&&f[D]!==x&&bs(l,D,x)}else for(var O in d)d.hasOwnProperty(O)&&bs(l,O,d[O])}function ws(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var es=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function As(l){return Os.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ms(){}var Ws=null;function $s(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Is=null,xs=null;function Br(l){var d=Ot(l);if(d&&(l=d.stateNode)){var f=l[ds]||null;e:switch(l=d.stateNode,d.type){case"input":if(Es(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),d=f.name,f.type==="radio"&&d!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+_s(""+d)+'"][type="radio"]'),d=0;d<f.length;d++){var x=f[d];if(x!==l&&x.form===l.form){var D=x[ds]||null;if(!D)throw Error(r(90));Es(x,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(d=0;d<f.length;d++)x=f[d],x.form===l.form&&Ms(x)}break e;case"textarea":Ys(l,f.value,f.defaultValue);break e;case"select":d=f.value,d!=null&&fs(l,!!f.multiple,d,!1)}}}var Ar=!1;function ti(l,d,f){if(Ar)return l(d,f);Ar=!0;try{var x=l(d);return x}finally{if(Ar=!1,(Is!==null||xs!==null)&&(lx(),Is&&(d=Is,l=xs,xs=Is=null,Br(d),l)))for(d=0;d<l.length;d++)Br(l[d])}}function Mr(l,d){var f=l.stateNode;if(f===null)return null;var x=f[ds]||null;if(x===null)return null;f=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,d,typeof f));return f}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fr=!1;if(hn)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){fr=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{fr=!1}var Vr=null,sa=null,kr=null;function na(){if(kr)return kr;var l,d=sa,f=d.length,x,D="value"in Vr?Vr.value:Vr.textContent,O=D.length;for(l=0;l<f&&d[l]===D[l];l++);var oe=f-l;for(x=1;x<=oe&&d[f-x]===D[O-x];x++);return kr=D.slice(l,1<x?1-x:void 0)}function Ir(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Ga(){return!0}function tl(){return!1}function Ds(l){function d(f,x,D,O,oe){this._reactName=f,this._targetInst=D,this.type=x,this.nativeEvent=O,this.target=oe,this.currentTarget=null;for(var Pe in l)l.hasOwnProperty(Pe)&&(f=l[Pe],this[Pe]=f?f(O):O[Pe]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Ga:tl,this.isPropagationStopped=tl,this}return _(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),d}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$n=Ds(Un),si=_({},Un,{view:0,detail:0}),Ii=Ds(si),Do,jl,ks,Xn=_({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ks&&(ks&&l.type==="mousemove"?(Do=l.screenX-ks.screenX,jl=l.screenY-ks.screenY):jl=Do=0,ks=l),Do)},movementY:function(l){return"movementY"in l?l.movementY:jl}}),zr=Ds(Xn),ji=_({},Xn,{dataTransfer:0}),Gi=Ds(ji),y0=_({},si,{relatedTarget:0}),Ro=Ds(y0),b0=_({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),W=Ds(b0),ve=_({},Un,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),et=Ds(ve),Nt=_({},Un,{data:0}),wt=Ds(Nt),rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function en(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=zs[l])?!!d[l]:!1}function gn(){return en}var Nn=_({},si,{key:function(l){if(l.key){var d=rs[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Ir(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?gs[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(l){return l.type==="keypress"?Ir(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ir(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Fn=Ds(Nn),Gr=_({},Xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ni=Ds(Gr),Sr=_({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn}),Ci=Ds(Sr),di=_({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wi=Ds(di),To=_({},Xn,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ol=Ds(To),Mo=_({},Un,{newState:0,oldState:0}),th=Ds(Mo),Pd=[9,13,27,32],Ql=hn&&"CompositionEvent"in window,wl=null;hn&&"documentMode"in document&&(wl=document.documentMode);var Wc=hn&&"TextEvent"in window&&!wl,Io=hn&&(!Ql||wl&&8<wl&&11>=wl),Oi=" ",ac=!1;function lc(l,d){switch(l){case"keyup":return Pd.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ad(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Yl=!1;function pa(l,d){switch(l){case"compositionend":return Ad(d);case"keypress":return d.which!==32?null:(ac=!0,Oi);case"textInput":return l=d.data,l===Oi&&ac?null:l;default:return null}}function jo(l,d){if(Yl)return l==="compositionend"||!Ql&&lc(l,d)?(l=na(),kr=sa=Vr=null,Yl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Io&&d.locale!=="ko"?null:d.data;default:return null}}var kd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sh(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!kd[l.type]:d==="textarea"}function Wa(l,d,f,x){Is?xs?xs.push(x):xs=[x]:Is=x,d=mx(d,"onChange"),0<d.length&&(f=new $n("onChange","change",null,f,x),l.push({event:f,listeners:d}))}var Ll=null,Oo=null;function nh(l){qv(l,0)}function Pl(l){var d=_e(l);if(Ms(d))return l}function oc(l,d){if(l==="change")return d}var Ma=!1;if(hn){var ya;if(hn){var $l="oninput"in document;if(!$l){var Vl=document.createElement("div");Vl.setAttribute("oninput","return;"),$l=typeof Vl.oninput=="function"}ya=$l}else ya=!1;Ma=ya&&(!document.documentMode||9<document.documentMode)}function wo(){Ll&&(Ll.detachEvent("onpropertychange",Ud),Oo=Ll=null)}function Ud(l){if(l.propertyName==="value"&&Pl(Oo)){var d=[];Wa(d,Oo,l,$s(l)),ti(nh,d)}}function Bd(l,d,f){l==="focusin"?(wo(),Ll=d,Oo=f,Ll.attachEvent("onpropertychange",Ud)):l==="focusout"&&wo()}function ri(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Pl(Oo)}function C0(l,d){if(l==="click")return Pl(d)}function zl(l,d){if(l==="input"||l==="change")return Pl(d)}function Hl(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Fi=typeof Object.is=="function"?Object.is:Hl;function Lo(l,d){if(Fi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var f=Object.keys(l),x=Object.keys(d);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var D=f[x];if(!xe.call(d,D)||!Fi(l[D],d[D]))return!1}return!0}function Gd(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Wd(l,d){var f=Gd(l);l=0;for(var x;f;){if(f.nodeType===3){if(x=l+f.textContent.length,l<=d&&x>=d)return{node:f,offset:d-l};l=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Gd(f)}}function Po(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Po(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function Ao(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Cs(l.document);d instanceof l.HTMLIFrameElement;){try{var f=typeof d.contentWindow.location.href=="string"}catch{f=!1}if(f)l=d.contentWindow;else break;d=Cs(l.document)}return d}function ql(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Fc=hn&&"documentMode"in document&&11>=document.documentMode,Fa=null,ko=null,ra=null,sl=!1;function Jn(l,d,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;sl||Fa==null||Fa!==Cs(x)||(x=Fa,"selectionStart"in x&&ql(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ra&&Lo(ra,x)||(ra=x,x=mx(ko,"onSelect"),0<x.length&&(d=new $n("onSelect","select",null,d,f),l.push({event:d,listeners:x}),d.target=Fa)))}function Kn(l,d){var f={};return f[l.toLowerCase()]=d.toLowerCase(),f["Webkit"+l]="webkit"+d,f["Moz"+l]="moz"+d,f}var vr={animationend:Kn("Animation","AnimationEnd"),animationiteration:Kn("Animation","AnimationIteration"),animationstart:Kn("Animation","AnimationStart"),transitionrun:Kn("Transition","TransitionRun"),transitionstart:Kn("Transition","TransitionStart"),transitioncancel:Kn("Transition","TransitionCancel"),transitionend:Kn("Transition","TransitionEnd")},ii={},Xl={};hn&&(Xl=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Al(l){if(ii[l])return ii[l];if(!vr[l])return l;var d=vr[l],f;for(f in d)if(d.hasOwnProperty(f)&&f in Xl)return ii[l]=d[f];return l}var Kc=Al("animationend"),rh=Al("animationiteration"),Dm=Al("animationstart"),k_=Al("transitionrun"),U_=Al("transitionstart"),B_=Al("transitioncancel"),Rm=Al("transitionend"),Tm=new Map,Qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qc.push("scrollEnd");function nl(l,d){Tm.set(l,d),Re(d,[l])}var ih=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ka=[],Yc=0,N0=0;function ah(){for(var l=Yc,d=N0=Yc=0;d<l;){var f=Ka[d];Ka[d++]=null;var x=Ka[d];Ka[d++]=null;var D=Ka[d];Ka[d++]=null;var O=Ka[d];if(Ka[d++]=null,x!==null&&D!==null){var oe=x.pending;oe===null?D.next=D:(D.next=oe.next,oe.next=D),x.pending=D}O!==0&&oh(f,D,O)}}function lh(l,d,f,x){Ka[Yc++]=l,Ka[Yc++]=d,Ka[Yc++]=f,Ka[Yc++]=x,N0|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function S0(l,d,f,x){return lh(l,d,f,x),ia(l)}function Uo(l,d){return lh(l,null,null,d),ia(l)}function oh(l,d,f){l.lanes|=f;var x=l.alternate;x!==null&&(x.lanes|=f);for(var D=!1,O=l.return;O!==null;)O.childLanes|=f,x=O.alternate,x!==null&&(x.childLanes|=f),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(D=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,D&&d!==null&&(D=31-tt(f),l=O.hiddenUpdates,x=l[D],x===null?l[D]=[d]:x.push(d),d.lane=f|536870912),O):null}function ia(l){if(50<qm)throw qm=0,ky=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Ki={};function v0(l,d,f,x){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(l,d,f,x){return new v0(l,d,f,x)}function E0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function rl(l,d){var f=l.alternate;return f===null?(f=aa(l.tag,d,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=d,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,d=l.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function ch(l,d){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,d=f.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Fd(l,d,f,x,D,O){var oe=0;if(x=l,typeof l=="function")E0(l)&&(oe=1);else if(typeof l=="string")oe=T3(l,f,J.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case I:return l=aa(31,f,d,D),l.elementType=I,l.lanes=O,l;case y:return cc(f.children,D,O,d);case N:oe=8,D|=24;break;case v:return l=aa(12,f,d,D|2),l.elementType=v,l.lanes=O,l;case k:return l=aa(13,f,d,D),l.elementType=k,l.lanes=O,l;case B:return l=aa(19,f,d,D),l.elementType=B,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case w:oe=10;break e;case P:oe=9;break e;case M:oe=11;break e;case G:oe=14;break e;case U:oe=16,x=null;break e}oe=29,f=Error(r(130,l===null?"null":typeof l,"")),x=null}return d=aa(oe,f,d,D),d.elementType=l,d.type=x,d.lanes=O,d}function cc(l,d,f,x){return l=aa(7,l,x,d),l.lanes=f,l}function dh(l,d,f){return l=aa(6,l,null,d),l.lanes=f,l}function D0(l){var d=aa(18,null,null,0);return d.stateNode=l,d}function Kd(l,d,f){return d=aa(4,l.children!==null?l.children:[],l.key,d),d.lanes=f,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var R0=new WeakMap;function il(l,d){if(typeof l=="object"&&l!==null){var f=R0.get(l);return f!==void 0?f:(d={value:l,source:d,stack:le(d)},R0.set(l,d),d)}return{value:l,source:d,stack:le(d)}}var Qd=[],$c=0,T0=null,uh=0,al=[],ll=0,dc=null,ol=1,cl="";function Qa(l,d){Qd[$c++]=uh,Qd[$c++]=T0,T0=l,uh=d}function G_(l,d,f){al[ll++]=ol,al[ll++]=cl,al[ll++]=dc,dc=l;var x=ol;l=cl;var D=32-tt(x)-1;x&=~(1<<D),f+=1;var O=32-tt(d)+D;if(30<O){var oe=D-D%5;O=(x&(1<<oe)-1).toString(32),x>>=oe,D-=oe,ol=1<<32-tt(d)+D|f<<D|x,cl=O+l}else ol=1<<O|f<<D|x,cl=l}function Mm(l){l.return!==null&&(Qa(l,1),G_(l,1,0))}function M0(l){for(;l===T0;)T0=Qd[--$c],Qd[$c]=null,uh=Qd[--$c],Qd[$c]=null;for(;l===dc;)dc=al[--ll],al[ll]=null,cl=al[--ll],al[ll]=null,ol=al[--ll],al[ll]=null}function W_(l,d){al[ll++]=ol,al[ll++]=cl,al[ll++]=dc,ol=d.id,cl=d.overflow,dc=l}var Qi=null,jr=null,Pn=!1,ba=null,Hr=!1,kl=Error(r(519));function uc(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yd(il(d,l)),kl}function Im(l){var d=l.stateNode,f=l.type,x=l.memoizedProps;switch(d[ls]=l,d[ds]=x,f){case"dialog":kn("cancel",d),kn("close",d);break;case"iframe":case"object":case"embed":kn("load",d);break;case"video":case"audio":for(f=0;f<Jm.length;f++)kn(Jm[f],d);break;case"source":kn("error",d);break;case"img":case"image":case"link":kn("error",d),kn("load",d);break;case"details":kn("toggle",d);break;case"input":kn("invalid",d),js(d,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":kn("invalid",d);break;case"textarea":kn("invalid",d),Ls(d,x.value,x.defaultValue,x.children)}f=x.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||d.textContent===""+f||x.suppressHydrationWarning===!0||e5(d.textContent,f)?(x.popover!=null&&(kn("beforetoggle",d),kn("toggle",d)),x.onScroll!=null&&kn("scroll",d),x.onScrollEnd!=null&&kn("scrollend",d),x.onClick!=null&&(d.onclick=ms),d=!0):d=!1,d||uc(l,!0)}function Bo(l){for(Qi=l.return;Qi;)switch(Qi.tag){case 5:case 31:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:Qi=Qi.return}}function Yi(l){if(l!==Qi)return!1;if(!Pn)return Bo(l),Pn=!0,!1;var d=l.tag,f;if((f=d!==3&&d!==27)&&((f=d===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||Jy(l.type,l.memoizedProps)),f=!f),f&&jr&&uc(l),Bo(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));jr=c5(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));jr=c5(l)}else d===27?(d=jr,iu(l.type)?(l=nb,nb=null,jr=l):jr=d):jr=Qi?to(l.stateNode.nextSibling):null;return!0}function Vc(){jr=Qi=null,Pn=!1}function jm(){var l=ba;return l!==null&&(gl===null?gl=l:gl.push.apply(gl,l),ba=null),l}function Yd(l){ba===null?ba=[l]:ba.push(l)}var I0=T(null),hc=null,Jl=null;function fc(l,d,f){K(I0,d._currentValue),d._currentValue=f}function dl(l){l._currentValue=I0.current,j(I0)}function $d(l,d,f){for(;l!==null;){var x=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),l===f)break;l=l.return}}function zc(l,d,f,x){var D=l.child;for(D!==null&&(D.return=l);D!==null;){var O=D.dependencies;if(O!==null){var oe=D.child;O=O.firstContext;e:for(;O!==null;){var Pe=O;O=D;for(var yt=0;yt<d.length;yt++)if(Pe.context===d[yt]){O.lanes|=f,Pe=O.alternate,Pe!==null&&(Pe.lanes|=f),$d(O.return,f,l),x||(oe=null);break e}O=Pe.next}}else if(D.tag===18){if(oe=D.return,oe===null)throw Error(r(341));oe.lanes|=f,O=oe.alternate,O!==null&&(O.lanes|=f),$d(oe,f,l),oe=null}else oe=D.child;if(oe!==null)oe.return=D;else for(oe=D;oe!==null;){if(oe===l){oe=null;break}if(D=oe.sibling,D!==null){D.return=oe.return,oe=D;break}oe=oe.return}D=oe}}function mc(l,d,f,x){l=null;for(var D=d,O=!1;D!==null;){if(!O){if((D.flags&524288)!==0)O=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var oe=D.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var Pe=D.type;Fi(D.pendingProps.value,oe.value)||(l!==null?l.push(Pe):l=[Pe])}}else if(D===ce.current){if(oe=D.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(l!==null?l.push(ng):l=[ng])}D=D.return}l!==null&&zc(d,l,f,x),d.flags|=262144}function j0(l){for(l=l.firstContext;l!==null;){if(!Fi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function gc(l){hc=l,Jl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function $i(l){return F_(hc,l)}function O0(l,d){return hc===null&&gc(l),F_(l,d)}function F_(l,d){var f=d._currentValue;if(d={context:d,memoizedValue:f,next:null},Jl===null){if(l===null)throw Error(r(308));Jl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Jl=Jl.next=d;return f}var sy=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(f,x){l.push(x)}};this.abort=function(){d.aborted=!0,l.forEach(function(f){return f()})}},ny=t.unstable_scheduleCallback,ry=t.unstable_NormalPriority,ai={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vd(){return{controller:new sy,data:new Map,refCount:0}}function hh(l){l.refCount--,l.refCount===0&&ny(ry,function(){l.controller.abort()})}var fh=null,w0=0,S=0,R=null;function H(l,d){if(fh===null){var f=fh=[];w0=0,S=Ky(),R={status:"pending",value:void 0,then:function(x){f.push(x)}}}return w0++,d.then(ae,ae),d}function ae(){if(--w0===0&&fh!==null){R!==null&&(R.status="fulfilled");var l=fh;fh=null,S=0,R=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Ee(l,d){var f=[],x={status:"pending",value:null,reason:null,then:function(D){f.push(D)}};return l.then(function(){x.status="fulfilled",x.value=d;for(var D=0;D<f.length;D++)(0,f[D])(d)},function(D){for(x.status="rejected",x.reason=D,D=0;D<f.length;D++)(0,f[D])(void 0)}),x}var Me=$.S;$.S=function(l,d){vv=ze(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&H(l,d),Me!==null&&Me(l,d)};var we=T(null);function We(){var l=we.current;return l!==null?l:wr.pooledCache}function Qe(l,d){d===null?K(we,we.current):K(we,d.pool)}function Xe(){var l=We();return l===null?null:{parent:ai._currentValue,pool:l}}var Dt=Error(r(460)),Gt=Error(r(474)),qe=Error(r(542)),It={then:function(){}};function At(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Zt(l,d,f){switch(f=l[f],f===void 0?l.push(d):f!==d&&(d.then(ms,ms),d=f),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,ys(l),l;default:if(typeof d.status=="string")d.then(ms,ms);else{if(l=wr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(x){if(d.status==="pending"){var D=d;D.status="fulfilled",D.value=x}},function(x){if(d.status==="pending"){var D=d;D.status="rejected",D.reason=x}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,ys(l),l}throw Jt=d,Dt}}function kt(l){try{var d=l._init;return d(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Jt=f,Dt):f}}var Jt=null;function is(){if(Jt===null)throw Error(r(459));var l=Jt;return Jt=null,l}function ys(l){if(l===Dt||l===qe)throw Error(r(483))}var hs=null,qs=0;function Fs(l){var d=qs;return qs+=1,hs===null&&(hs=[]),Zt(hs,l,d)}function yn(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Vs(l,d){throw d.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function Ln(l){function d(Lt,Tt){if(l){var Kt=Lt.deletions;Kt===null?(Lt.deletions=[Tt],Lt.flags|=16):Kt.push(Tt)}}function f(Lt,Tt){if(!l)return null;for(;Tt!==null;)d(Lt,Tt),Tt=Tt.sibling;return null}function x(Lt){for(var Tt=new Map;Lt!==null;)Lt.key!==null?Tt.set(Lt.key,Lt):Tt.set(Lt.index,Lt),Lt=Lt.sibling;return Tt}function D(Lt,Tt){return Lt=rl(Lt,Tt),Lt.index=0,Lt.sibling=null,Lt}function O(Lt,Tt,Kt){return Lt.index=Kt,l?(Kt=Lt.alternate,Kt!==null?(Kt=Kt.index,Kt<Tt?(Lt.flags|=67108866,Tt):Kt):(Lt.flags|=67108866,Tt)):(Lt.flags|=1048576,Tt)}function oe(Lt){return l&&Lt.alternate===null&&(Lt.flags|=67108866),Lt}function Pe(Lt,Tt,Kt,os){return Tt===null||Tt.tag!==6?(Tt=dh(Kt,Lt.mode,os),Tt.return=Lt,Tt):(Tt=D(Tt,Kt),Tt.return=Lt,Tt)}function yt(Lt,Tt,Kt,os){var on=Kt.type;return on===y?ns(Lt,Tt,Kt.props.children,os,Kt.key):Tt!==null&&(Tt.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===U&&kt(on)===Tt.type)?(Tt=D(Tt,Kt.props),yn(Tt,Kt),Tt.return=Lt,Tt):(Tt=Fd(Kt.type,Kt.key,Kt.props,null,Lt.mode,os),yn(Tt,Kt),Tt.return=Lt,Tt)}function Qt(Lt,Tt,Kt,os){return Tt===null||Tt.tag!==4||Tt.stateNode.containerInfo!==Kt.containerInfo||Tt.stateNode.implementation!==Kt.implementation?(Tt=Kd(Kt,Lt.mode,os),Tt.return=Lt,Tt):(Tt=D(Tt,Kt.children||[]),Tt.return=Lt,Tt)}function ns(Lt,Tt,Kt,os,on){return Tt===null||Tt.tag!==7?(Tt=cc(Kt,Lt.mode,os,on),Tt.return=Lt,Tt):(Tt=D(Tt,Kt),Tt.return=Lt,Tt)}function us(Lt,Tt,Kt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return Tt=dh(""+Tt,Lt.mode,Kt),Tt.return=Lt,Tt;if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case g:return Kt=Fd(Tt.type,Tt.key,Tt.props,null,Lt.mode,Kt),yn(Kt,Tt),Kt.return=Lt,Kt;case C:return Tt=Kd(Tt,Lt.mode,Kt),Tt.return=Lt,Tt;case U:return Tt=kt(Tt),us(Lt,Tt,Kt)}if(z(Tt)||Y(Tt))return Tt=cc(Tt,Lt.mode,Kt,null),Tt.return=Lt,Tt;if(typeof Tt.then=="function")return us(Lt,Fs(Tt),Kt);if(Tt.$$typeof===w)return us(Lt,O0(Lt,Tt),Kt);Vs(Lt,Tt)}return null}function $t(Lt,Tt,Kt,os){var on=Tt!==null?Tt.key:null;if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return on!==null?null:Pe(Lt,Tt,""+Kt,os);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case g:return Kt.key===on?yt(Lt,Tt,Kt,os):null;case C:return Kt.key===on?Qt(Lt,Tt,Kt,os):null;case U:return Kt=kt(Kt),$t(Lt,Tt,Kt,os)}if(z(Kt)||Y(Kt))return on!==null?null:ns(Lt,Tt,Kt,os,null);if(typeof Kt.then=="function")return $t(Lt,Tt,Fs(Kt),os);if(Kt.$$typeof===w)return $t(Lt,Tt,O0(Lt,Kt),os);Vs(Lt,Kt)}return null}function Ht(Lt,Tt,Kt,os,on){if(typeof os=="string"&&os!==""||typeof os=="number"||typeof os=="bigint")return Lt=Lt.get(Kt)||null,Pe(Tt,Lt,""+os,on);if(typeof os=="object"&&os!==null){switch(os.$$typeof){case g:return Lt=Lt.get(os.key===null?Kt:os.key)||null,yt(Tt,Lt,os,on);case C:return Lt=Lt.get(os.key===null?Kt:os.key)||null,Qt(Tt,Lt,os,on);case U:return os=kt(os),Ht(Lt,Tt,Kt,os,on)}if(z(os)||Y(os))return Lt=Lt.get(Kt)||null,ns(Tt,Lt,os,on,null);if(typeof os.then=="function")return Ht(Lt,Tt,Kt,Fs(os),on);if(os.$$typeof===w)return Ht(Lt,Tt,Kt,O0(Tt,os),on);Vs(Tt,os)}return null}function Hs(Lt,Tt,Kt,os){for(var on=null,er=null,tn=Tt,Tn=Tt=0,Gn=null;tn!==null&&Tn<Kt.length;Tn++){tn.index>Tn?(Gn=tn,tn=null):Gn=tn.sibling;var tr=$t(Lt,tn,Kt[Tn],os);if(tr===null){tn===null&&(tn=Gn);break}l&&tn&&tr.alternate===null&&d(Lt,tn),Tt=O(tr,Tt,Tn),er===null?on=tr:er.sibling=tr,er=tr,tn=Gn}if(Tn===Kt.length)return f(Lt,tn),Pn&&Qa(Lt,Tn),on;if(tn===null){for(;Tn<Kt.length;Tn++)tn=us(Lt,Kt[Tn],os),tn!==null&&(Tt=O(tn,Tt,Tn),er===null?on=tn:er.sibling=tn,er=tn);return Pn&&Qa(Lt,Tn),on}for(tn=x(tn);Tn<Kt.length;Tn++)Gn=Ht(tn,Lt,Tn,Kt[Tn],os),Gn!==null&&(l&&Gn.alternate!==null&&tn.delete(Gn.key===null?Tn:Gn.key),Tt=O(Gn,Tt,Tn),er===null?on=Gn:er.sibling=Gn,er=Gn);return l&&tn.forEach(function(du){return d(Lt,du)}),Pn&&Qa(Lt,Tn),on}function fn(Lt,Tt,Kt,os){if(Kt==null)throw Error(r(151));for(var on=null,er=null,tn=Tt,Tn=Tt=0,Gn=null,tr=Kt.next();tn!==null&&!tr.done;Tn++,tr=Kt.next()){tn.index>Tn?(Gn=tn,tn=null):Gn=tn.sibling;var du=$t(Lt,tn,tr.value,os);if(du===null){tn===null&&(tn=Gn);break}l&&tn&&du.alternate===null&&d(Lt,tn),Tt=O(du,Tt,Tn),er===null?on=du:er.sibling=du,er=du,tn=Gn}if(tr.done)return f(Lt,tn),Pn&&Qa(Lt,Tn),on;if(tn===null){for(;!tr.done;Tn++,tr=Kt.next())tr=us(Lt,tr.value,os),tr!==null&&(Tt=O(tr,Tt,Tn),er===null?on=tr:er.sibling=tr,er=tr);return Pn&&Qa(Lt,Tn),on}for(tn=x(tn);!tr.done;Tn++,tr=Kt.next())tr=Ht(tn,Lt,Tn,tr.value,os),tr!==null&&(l&&tr.alternate!==null&&tn.delete(tr.key===null?Tn:tr.key),Tt=O(tr,Tt,Tn),er===null?on=tr:er.sibling=tr,er=tr);return l&&tn.forEach(function(B3){return d(Lt,B3)}),Pn&&Qa(Lt,Tn),on}function Tr(Lt,Tt,Kt,os){if(typeof Kt=="object"&&Kt!==null&&Kt.type===y&&Kt.key===null&&(Kt=Kt.props.children),typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case g:e:{for(var on=Kt.key;Tt!==null;){if(Tt.key===on){if(on=Kt.type,on===y){if(Tt.tag===7){f(Lt,Tt.sibling),os=D(Tt,Kt.props.children),os.return=Lt,Lt=os;break e}}else if(Tt.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===U&&kt(on)===Tt.type){f(Lt,Tt.sibling),os=D(Tt,Kt.props),yn(os,Kt),os.return=Lt,Lt=os;break e}f(Lt,Tt);break}else d(Lt,Tt);Tt=Tt.sibling}Kt.type===y?(os=cc(Kt.props.children,Lt.mode,os,Kt.key),os.return=Lt,Lt=os):(os=Fd(Kt.type,Kt.key,Kt.props,null,Lt.mode,os),yn(os,Kt),os.return=Lt,Lt=os)}return oe(Lt);case C:e:{for(on=Kt.key;Tt!==null;){if(Tt.key===on)if(Tt.tag===4&&Tt.stateNode.containerInfo===Kt.containerInfo&&Tt.stateNode.implementation===Kt.implementation){f(Lt,Tt.sibling),os=D(Tt,Kt.children||[]),os.return=Lt,Lt=os;break e}else{f(Lt,Tt);break}else d(Lt,Tt);Tt=Tt.sibling}os=Kd(Kt,Lt.mode,os),os.return=Lt,Lt=os}return oe(Lt);case U:return Kt=kt(Kt),Tr(Lt,Tt,Kt,os)}if(z(Kt))return Hs(Lt,Tt,Kt,os);if(Y(Kt)){if(on=Y(Kt),typeof on!="function")throw Error(r(150));return Kt=on.call(Kt),fn(Lt,Tt,Kt,os)}if(typeof Kt.then=="function")return Tr(Lt,Tt,Fs(Kt),os);if(Kt.$$typeof===w)return Tr(Lt,Tt,O0(Lt,Kt),os);Vs(Lt,Kt)}return typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint"?(Kt=""+Kt,Tt!==null&&Tt.tag===6?(f(Lt,Tt.sibling),os=D(Tt,Kt),os.return=Lt,Lt=os):(f(Lt,Tt),os=dh(Kt,Lt.mode,os),os.return=Lt,Lt=os),oe(Lt)):f(Lt,Tt)}return function(Lt,Tt,Kt,os){try{qs=0;var on=Tr(Lt,Tt,Kt,os);return hs=null,on}catch(tn){if(tn===Dt||tn===qe)throw tn;var er=aa(29,tn,null,Lt.mode);return er.lanes=os,er.return=Lt,er}finally{}}}var Or=Ln(!0),Sn=Ln(!1),Ks=!1;function Rs(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wr(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function un(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Dn(l,d,f){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(or&2)!==0){var D=x.pending;return D===null?d.next=d:(d.next=D.next,D.next=d),x.pending=d,d=ia(l),oh(l,null,f),d}return lh(l,x,d,f),ia(l)}function ar(l,d,f){if(d=d.updateQueue,d!==null&&(d=d.shared,(f&4194048)!==0)){var x=d.lanes;x&=l.pendingLanes,f|=x,d.lanes=f,ut(l,f)}}function Ni(l,d){var f=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var D=null,O=null;if(f=f.firstBaseUpdate,f!==null){do{var oe={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};O===null?D=O=oe:O=O.next=oe,f=f.next}while(f!==null);O===null?D=O=d:O=O.next=d}else D=O=d;f={baseState:x.baseState,firstBaseUpdate:D,lastBaseUpdate:O,shared:x.shared,callbacks:x.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=d}var Vi=!1;function Er(){if(Vi){var l=R;if(l!==null)throw l}}function ui(l,d,f,x){Vi=!1;var D=l.updateQueue;Ks=!1;var O=D.firstBaseUpdate,oe=D.lastBaseUpdate,Pe=D.shared.pending;if(Pe!==null){D.shared.pending=null;var yt=Pe,Qt=yt.next;yt.next=null,oe===null?O=Qt:oe.next=Qt,oe=yt;var ns=l.alternate;ns!==null&&(ns=ns.updateQueue,Pe=ns.lastBaseUpdate,Pe!==oe&&(Pe===null?ns.firstBaseUpdate=Qt:Pe.next=Qt,ns.lastBaseUpdate=yt))}if(O!==null){var us=D.baseState;oe=0,ns=Qt=yt=null,Pe=O;do{var $t=Pe.lane&-536870913,Ht=$t!==Pe.lane;if(Ht?(Bn&$t)===$t:(x&$t)===$t){$t!==0&&$t===S&&(Vi=!0),ns!==null&&(ns=ns.next={lane:0,tag:Pe.tag,payload:Pe.payload,callback:null,next:null});e:{var Hs=l,fn=Pe;$t=d;var Tr=f;switch(fn.tag){case 1:if(Hs=fn.payload,typeof Hs=="function"){us=Hs.call(Tr,us,$t);break e}us=Hs;break e;case 3:Hs.flags=Hs.flags&-65537|128;case 0:if(Hs=fn.payload,$t=typeof Hs=="function"?Hs.call(Tr,us,$t):Hs,$t==null)break e;us=_({},us,$t);break e;case 2:Ks=!0}}$t=Pe.callback,$t!==null&&(l.flags|=64,Ht&&(l.flags|=8192),Ht=D.callbacks,Ht===null?D.callbacks=[$t]:Ht.push($t))}else Ht={lane:$t,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},ns===null?(Qt=ns=Ht,yt=us):ns=ns.next=Ht,oe|=$t;if(Pe=Pe.next,Pe===null){if(Pe=D.shared.pending,Pe===null)break;Ht=Pe,Pe=Ht.next,Ht.next=null,D.lastBaseUpdate=Ht,D.shared.pending=null}}while(!0);ns===null&&(yt=us),D.baseState=yt,D.firstBaseUpdate=Qt,D.lastBaseUpdate=ns,O===null&&(D.shared.lanes=0),eu|=oe,l.lanes=oe,l.memoizedState=us}}function la(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function hi(l,d){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)la(f[l],d)}var jn=T(null),Vn=T(0);function Fr(l,d){l=rd,K(Vn,l),K(jn,d),rd=l|d.baseLanes}function Zn(){K(Vn,rd),K(jn,jn.current)}function Si(){rd=Vn.current,j(jn),j(Vn)}var Kr=T(null),zn=null;function li(l){var d=l.alternate;K(Qn,Qn.current&1),K(Kr,l),zn===null&&(d===null||jn.current!==null||d.memoizedState!==null)&&(zn=l)}function lr(l){K(Qn,Qn.current),K(Kr,l),zn===null&&(zn=l)}function fi(l){l.tag===22?(K(Qn,Qn.current),K(Kr,l),zn===null&&(zn=l)):mi()}function mi(){K(Qn,Qn.current),K(Kr,Kr.current)}function pr(l){j(Kr),zn===l&&(zn=null),j(Qn)}var Qn=T(0);function oa(l){for(var d=l;d!==null;){if(d.tag===13){var f=d.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||tb(f)||sb(f)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var qr=0,rn=null,ln=null,Hn=null,Ia=!1,ul=!1,Ca=!1,gi=0,_c=0,xc=null,L0=0;function Dr(){throw Error(r(321))}function Om(l,d){if(d===null)return!1;for(var f=0;f<d.length&&f<l.length;f++)if(!Fi(l[f],d[f]))return!1;return!0}function wm(l,d,f,x,D,O){return qr=O,rn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,$.H=l===null||l.memoizedState===null?PS:hy,Ca=!1,O=f(x,D),Ca=!1,ul&&(O=Go(d,f,x,D)),P0(l),O}function P0(l){$.H=Wm;var d=ln!==null&&ln.next!==null;if(qr=0,Hn=ln=rn=null,Ia=!1,_c=0,xc=null,d)throw Error(r(300));l===null||Li||(l=l.dependencies,l!==null&&j0(l)&&(Li=!0))}function Go(l,d,f,x){rn=l;var D=0;do{if(ul&&(xc=null),_c=0,ul=!1,25<=D)throw Error(r(301));if(D+=1,Hn=ln=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}$.H=AS,O=d(f,x)}while(ul);return O}function iy(){var l=$.H,d=l.useState()[0];return d=typeof d.then=="function"?pc(d):d,l=l.useState()[0],(ln!==null?ln.memoizedState:null)!==l&&(rn.flags|=1024),d}function Lm(){var l=gi!==0;return gi=0,l}function Pm(l,d,f){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~f}function A0(l){if(Ia){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Ia=!1}qr=0,Hn=ln=rn=null,ul=!1,_c=gi=0,xc=null}function wi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?rn.memoizedState=Hn=l:Hn=Hn.next=l,Hn}function Xr(){if(ln===null){var l=rn.alternate;l=l!==null?l.memoizedState:null}else l=ln.next;var d=Hn===null?rn.memoizedState:Hn.next;if(d!==null)Hn=d,ln=l;else{if(l===null)throw rn.alternate===null?Error(r(467)):Error(r(310));ln=l,l={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},Hn===null?rn.memoizedState=Hn=l:Hn=Hn.next=l}return Hn}function mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(l){var d=_c;return _c+=1,xc===null&&(xc=[]),l=Zt(xc,l,d),d=rn,(Hn===null?d.memoizedState:Hn.next)===null&&(d=d.alternate,$.H=d===null||d.memoizedState===null?PS:hy),l}function zd(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return pc(l);if(l.$$typeof===w)return $i(l)}throw Error(r(438,String(l)))}function Hc(l){var d=null,f=rn.updateQueue;if(f!==null&&(d=f.memoCache),d==null){var x=rn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(d={data:x.data.map(function(D){return D.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),f===null&&(f=mh(),rn.updateQueue=f),f.memoCache=d,f=d.data[d.index],f===void 0)for(f=d.data[d.index]=Array(l),x=0;x<l;x++)f[x]=E;return d.index++,f}function Zl(l,d){return typeof d=="function"?d(l):d}function k0(l){var d=Xr();return Hd(d,ln,l)}function Hd(l,d,f){var x=l.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=f;var D=l.baseQueue,O=x.pending;if(O!==null){if(D!==null){var oe=D.next;D.next=O.next,O.next=oe}d.baseQueue=D=O,x.pending=null}if(O=l.baseState,D===null)l.memoizedState=O;else{d=D.next;var Pe=oe=null,yt=null,Qt=d,ns=!1;do{var us=Qt.lane&-536870913;if(us!==Qt.lane?(Bn&us)===us:(qr&us)===us){var $t=Qt.revertLane;if($t===0)yt!==null&&(yt=yt.next={lane:0,revertLane:0,gesture:null,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null}),us===S&&(ns=!0);else if((qr&$t)===$t){Qt=Qt.next,$t===S&&(ns=!0);continue}else us={lane:0,revertLane:Qt.revertLane,gesture:null,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null},yt===null?(Pe=yt=us,oe=O):yt=yt.next=us,rn.lanes|=$t,eu|=$t;us=Qt.action,Ca&&f(O,us),O=Qt.hasEagerState?Qt.eagerState:f(O,us)}else $t={lane:us,revertLane:Qt.revertLane,gesture:Qt.gesture,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null},yt===null?(Pe=yt=$t,oe=O):yt=yt.next=$t,rn.lanes|=us,eu|=us;Qt=Qt.next}while(Qt!==null&&Qt!==d);if(yt===null?oe=O:yt.next=Pe,!Fi(O,l.memoizedState)&&(Li=!0,ns&&(f=R,f!==null)))throw f;l.memoizedState=O,l.baseState=oe,l.baseQueue=yt,x.lastRenderedState=O}return D===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function U0(l){var d=Xr(),f=d.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var x=f.dispatch,D=f.pending,O=d.memoizedState;if(D!==null){f.pending=null;var oe=D=D.next;do O=l(O,oe.action),oe=oe.next;while(oe!==D);Fi(O,d.memoizedState)||(Li=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),f.lastRenderedState=O}return[O,x]}function B0(l,d,f){var x=rn,D=Xr(),O=Pn;if(O){if(f===void 0)throw Error(r(407));f=f()}else f=d();var oe=!Fi((ln||D).memoizedState,f);if(oe&&(D.memoizedState=f,Li=!0),D=D.queue,ay(km.bind(null,x,D,l),[l]),D.getSnapshot!==d||oe||Hn!==null&&Hn.memoizedState.tag&1){if(x.flags|=2048,Xc(9,{destroy:void 0},Am.bind(null,x,D,f,d),null),wr===null)throw Error(r(349));O||(qr&127)!==0||Wo(x,d,f)}return f}function Wo(l,d,f){l.flags|=16384,l={getSnapshot:d,value:f},d=rn.updateQueue,d===null?(d=mh(),rn.updateQueue=d,d.stores=[l]):(f=d.stores,f===null?d.stores=[l]:f.push(l))}function Am(l,d,f,x){d.value=f,d.getSnapshot=x,K_(d)&&Um(l)}function km(l,d,f){return f(function(){K_(d)&&Um(l)})}function K_(l){var d=l.getSnapshot;l=l.value;try{var f=d();return!Fi(l,f)}catch{return!0}}function Um(l){var d=Uo(l,2);d!==null&&_l(d,l,2)}function yc(l){var d=wi();if(typeof l=="function"){var f=l;if(l=f(),Ca){Fe(!0);try{f()}finally{Fe(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:l},d}function Q_(l,d,f,x){return l.baseState=f,Hd(l,ln,typeof x=="function"?x:Zl)}function Y_(l,d,f,x,D){if(H_(l))throw Error(r(485));if(l=d.action,l!==null){var O={payload:D,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){O.listeners.push(oe)}};$.T!==null?f(!0):O.isTransition=!1,x(O),f=d.pending,f===null?(O.next=d.pending=O,$_(d,O)):(O.next=f.next,d.pending=f.next=O)}}function $_(l,d){var f=d.action,x=d.payload,D=l.state;if(d.isTransition){var O=$.T,oe={};$.T=oe;try{var Pe=f(D,x),yt=$.S;yt!==null&&yt(oe,Pe),Bm(l,d,Pe)}catch(Qt){qc(l,d,Qt)}finally{O!==null&&oe.types!==null&&(O.types=oe.types),$.T=O}}else try{O=f(D,x),Bm(l,d,O)}catch(Qt){qc(l,d,Qt)}}function Bm(l,d,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){V_(l,d,x)},function(x){return qc(l,d,x)}):V_(l,d,f)}function V_(l,d,f){d.status="fulfilled",d.value=f,G0(d),l.state=f,d=l.pending,d!==null&&(f=d.next,f===d?l.pending=null:(f=f.next,d.next=f,$_(l,f)))}function qc(l,d,f){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do d.status="rejected",d.reason=f,G0(d),d=d.next;while(d!==x)}l.action=null}function G0(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function gh(l,d){return d}function eo(l,d){if(Pn){var f=wr.formState;if(f!==null){e:{var x=rn;if(Pn){if(jr){t:{for(var D=jr,O=Hr;D.nodeType!==8;){if(!O){D=null;break t}if(D=to(D.nextSibling),D===null){D=null;break t}}O=D.data,D=O==="F!"||O==="F"?D:null}if(D){jr=to(D.nextSibling),x=D.data==="F!";break e}}uc(x)}x=!1}x&&(d=f[0])}}return f=wi(),f.memoizedState=f.baseState=d,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gh,lastRenderedState:d},f.queue=x,f=OS.bind(null,rn,x),x.dispatch=f,x=yc(!1),O=uy.bind(null,rn,!1,x.queue),x=wi(),D={state:d,dispatch:null,action:l,pending:null},x.queue=D,f=Y_.bind(null,rn,D,O,f),D.dispatch=f,x.memoizedState=l,[d,f,!1]}function Fo(l){var d=Xr();return Ko(d,ln,l)}function Ko(l,d,f){if(d=Hd(l,d,gh)[0],l=k0(Zl)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var x=pc(d)}catch(oe){throw oe===Dt?qe:oe}else x=d;d=Xr();var D=d.queue,O=D.dispatch;return f!==d.memoizedState&&(rn.flags|=2048,Xc(9,{destroy:void 0},W0.bind(null,D,f),null)),[x,O,l]}function W0(l,d){l.action=d}function F0(l){var d=Xr(),f=ln;if(f!==null)return Ko(d,f,l);Xr(),d=d.memoizedState,f=Xr();var x=f.queue.dispatch;return f.memoizedState=l,[d,x,!1]}function Xc(l,d,f,x){return l={tag:l,create:f,deps:x,inst:d,next:null},d=rn.updateQueue,d===null&&(d=mh(),rn.updateQueue=d),f=d.lastEffect,f===null?d.lastEffect=l.next=l:(x=f.next,f.next=l,l.next=x,d.lastEffect=l),l}function z_(){return Xr().memoizedState}function qd(l,d,f,x){var D=wi();rn.flags|=l,D.memoizedState=Xc(1|d,{destroy:void 0},f,x===void 0?null:x)}function Xd(l,d,f,x){var D=Xr();x=x===void 0?null:x;var O=D.memoizedState.inst;ln!==null&&x!==null&&Om(x,ln.memoizedState.deps)?D.memoizedState=Xc(d,O,f,x):(rn.flags|=l,D.memoizedState=Xc(1|d,O,f,x))}function pS(l,d){qd(8390656,8,l,d)}function ay(l,d){Xd(2048,8,l,d)}function wO(l){rn.flags|=4;var d=rn.updateQueue;if(d===null)d=mh(),rn.updateQueue=d,d.events=[l];else{var f=d.events;f===null?d.events=[l]:f.push(l)}}function yS(l){var d=Xr().memoizedState;return wO({ref:d,nextImpl:l}),function(){if((or&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function bS(l,d){return Xd(4,2,l,d)}function CS(l,d){return Xd(4,4,l,d)}function NS(l,d){if(typeof d=="function"){l=l();var f=d(l);return function(){typeof f=="function"?f():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function SS(l,d,f){f=f!=null?f.concat([l]):null,Xd(4,4,NS.bind(null,d,l),f)}function ly(){}function vS(l,d){var f=Xr();d=d===void 0?null:d;var x=f.memoizedState;return d!==null&&Om(d,x[1])?x[0]:(f.memoizedState=[l,d],l)}function ES(l,d){var f=Xr();d=d===void 0?null:d;var x=f.memoizedState;if(d!==null&&Om(d,x[1]))return x[0];if(x=l(),Ca){Fe(!0);try{l()}finally{Fe(!1)}}return f.memoizedState=[x,d],x}function oy(l,d,f){return f===void 0||(qr&1073741824)!==0&&(Bn&261930)===0?l.memoizedState=d:(l.memoizedState=f,l=Dv(),rn.lanes|=l,eu|=l,f)}function DS(l,d,f,x){return Fi(f,d)?f:jn.current!==null?(l=oy(l,f,x),Fi(l,d)||(Li=!0),l):(qr&42)===0||(qr&1073741824)!==0&&(Bn&261930)===0?(Li=!0,l.memoizedState=f):(l=Dv(),rn.lanes|=l,eu|=l,d)}function RS(l,d,f,x,D){var O=F.p;F.p=O!==0&&8>O?O:8;var oe=$.T,Pe={};$.T=Pe,uy(l,!1,d,f);try{var yt=D(),Qt=$.S;if(Qt!==null&&Qt(Pe,yt),yt!==null&&typeof yt=="object"&&typeof yt.then=="function"){var ns=Ee(yt,x);Gm(l,d,ns,Gl(l))}else Gm(l,d,x,Gl(l))}catch(us){Gm(l,d,{then:function(){},status:"rejected",reason:us},Gl())}finally{F.p=O,oe!==null&&Pe.types!==null&&(oe.types=Pe.types),$.T=oe}}function LO(){}function cy(l,d,f,x){if(l.tag!==5)throw Error(r(476));var D=TS(l).queue;RS(l,D,d,L,f===null?LO:function(){return MS(l),f(x)})}function TS(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:L},next:null};var f={};return d.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:f},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function MS(l){var d=TS(l);d.next===null&&(d=l.alternate.memoizedState),Gm(l,d.next.queue,{},Gl())}function dy(){return $i(ng)}function IS(){return Xr().memoizedState}function jS(){return Xr().memoizedState}function PO(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var f=Gl();l=un(f);var x=Dn(d,l,f);x!==null&&(_l(x,d,f),ar(x,d,f)),d={cache:Vd()},l.payload=d;return}d=d.return}}function AO(l,d,f){var x=Gl();f={lane:x,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},H_(l)?wS(d,f):(f=S0(l,d,f,x),f!==null&&(_l(f,l,x),LS(f,d,x)))}function OS(l,d,f){var x=Gl();Gm(l,d,f,x)}function Gm(l,d,f,x){var D={lane:x,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(H_(l))wS(d,D);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var oe=d.lastRenderedState,Pe=O(oe,f);if(D.hasEagerState=!0,D.eagerState=Pe,Fi(Pe,oe))return lh(l,d,D,0),wr===null&&ah(),!1}catch{}finally{}if(f=S0(l,d,D,x),f!==null)return _l(f,l,x),LS(f,d,x),!0}return!1}function uy(l,d,f,x){if(x={lane:2,revertLane:Ky(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},H_(l)){if(d)throw Error(r(479))}else d=S0(l,f,x,2),d!==null&&_l(d,l,2)}function H_(l){var d=l.alternate;return l===rn||d!==null&&d===rn}function wS(l,d){ul=Ia=!0;var f=l.pending;f===null?d.next=d:(d.next=f.next,f.next=d),l.pending=d}function LS(l,d,f){if((f&4194048)!==0){var x=d.lanes;x&=l.pendingLanes,f|=x,d.lanes=f,ut(l,f)}}var Wm={readContext:$i,use:zd,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useLayoutEffect:Dr,useInsertionEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useSyncExternalStore:Dr,useId:Dr,useHostTransitionStatus:Dr,useFormState:Dr,useActionState:Dr,useOptimistic:Dr,useMemoCache:Dr,useCacheRefresh:Dr};Wm.useEffectEvent=Dr;var PS={readContext:$i,use:zd,useCallback:function(l,d){return wi().memoizedState=[l,d===void 0?null:d],l},useContext:$i,useEffect:pS,useImperativeHandle:function(l,d,f){f=f!=null?f.concat([l]):null,qd(4194308,4,NS.bind(null,d,l),f)},useLayoutEffect:function(l,d){return qd(4194308,4,l,d)},useInsertionEffect:function(l,d){qd(4,2,l,d)},useMemo:function(l,d){var f=wi();d=d===void 0?null:d;var x=l();if(Ca){Fe(!0);try{l()}finally{Fe(!1)}}return f.memoizedState=[x,d],x},useReducer:function(l,d,f){var x=wi();if(f!==void 0){var D=f(d);if(Ca){Fe(!0);try{f(d)}finally{Fe(!1)}}}else D=d;return x.memoizedState=x.baseState=D,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:D},x.queue=l,l=l.dispatch=AO.bind(null,rn,l),[x.memoizedState,l]},useRef:function(l){var d=wi();return l={current:l},d.memoizedState=l},useState:function(l){l=yc(l);var d=l.queue,f=OS.bind(null,rn,d);return d.dispatch=f,[l.memoizedState,f]},useDebugValue:ly,useDeferredValue:function(l,d){var f=wi();return oy(f,l,d)},useTransition:function(){var l=yc(!1);return l=RS.bind(null,rn,l.queue,!0,!1),wi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,f){var x=rn,D=wi();if(Pn){if(f===void 0)throw Error(r(407));f=f()}else{if(f=d(),wr===null)throw Error(r(349));(Bn&127)!==0||Wo(x,d,f)}D.memoizedState=f;var O={value:f,getSnapshot:d};return D.queue=O,pS(km.bind(null,x,O,l),[l]),x.flags|=2048,Xc(9,{destroy:void 0},Am.bind(null,x,O,f,d),null),f},useId:function(){var l=wi(),d=wr.identifierPrefix;if(Pn){var f=cl,x=ol;f=(x&~(1<<32-tt(x)-1)).toString(32)+f,d="_"+d+"R_"+f,f=gi++,0<f&&(d+="H"+f.toString(32)),d+="_"}else f=L0++,d="_"+d+"r_"+f.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:dy,useFormState:eo,useActionState:eo,useOptimistic:function(l){var d=wi();d.memoizedState=d.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=f,d=uy.bind(null,rn,!0,f),f.dispatch=d,[l,d]},useMemoCache:Hc,useCacheRefresh:function(){return wi().memoizedState=PO.bind(null,rn)},useEffectEvent:function(l){var d=wi(),f={impl:l};return d.memoizedState=f,function(){if((or&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},hy={readContext:$i,use:zd,useCallback:vS,useContext:$i,useEffect:ay,useImperativeHandle:SS,useInsertionEffect:bS,useLayoutEffect:CS,useMemo:ES,useReducer:k0,useRef:z_,useState:function(){return k0(Zl)},useDebugValue:ly,useDeferredValue:function(l,d){var f=Xr();return DS(f,ln.memoizedState,l,d)},useTransition:function(){var l=k0(Zl)[0],d=Xr().memoizedState;return[typeof l=="boolean"?l:pc(l),d]},useSyncExternalStore:B0,useId:IS,useHostTransitionStatus:dy,useFormState:Fo,useActionState:Fo,useOptimistic:function(l,d){var f=Xr();return Q_(f,ln,l,d)},useMemoCache:Hc,useCacheRefresh:jS};hy.useEffectEvent=yS;var AS={readContext:$i,use:zd,useCallback:vS,useContext:$i,useEffect:ay,useImperativeHandle:SS,useInsertionEffect:bS,useLayoutEffect:CS,useMemo:ES,useReducer:U0,useRef:z_,useState:function(){return U0(Zl)},useDebugValue:ly,useDeferredValue:function(l,d){var f=Xr();return ln===null?oy(f,l,d):DS(f,ln.memoizedState,l,d)},useTransition:function(){var l=U0(Zl)[0],d=Xr().memoizedState;return[typeof l=="boolean"?l:pc(l),d]},useSyncExternalStore:B0,useId:IS,useHostTransitionStatus:dy,useFormState:F0,useActionState:F0,useOptimistic:function(l,d){var f=Xr();return ln!==null?Q_(f,ln,l,d):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:Hc,useCacheRefresh:jS};AS.useEffectEvent=yS;function fy(l,d,f,x){d=l.memoizedState,f=f(x,d),f=f==null?d:_({},d,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var my={enqueueSetState:function(l,d,f){l=l._reactInternals;var x=Gl(),D=un(x);D.payload=d,f!=null&&(D.callback=f),d=Dn(l,D,x),d!==null&&(_l(d,l,x),ar(d,l,x))},enqueueReplaceState:function(l,d,f){l=l._reactInternals;var x=Gl(),D=un(x);D.tag=1,D.payload=d,f!=null&&(D.callback=f),d=Dn(l,D,x),d!==null&&(_l(d,l,x),ar(d,l,x))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var f=Gl(),x=un(f);x.tag=2,d!=null&&(x.callback=d),d=Dn(l,x,f),d!==null&&(_l(d,l,f),ar(d,l,f))}};function kS(l,d,f,x,D,O,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,O,oe):d.prototype&&d.prototype.isPureReactComponent?!Lo(f,x)||!Lo(D,O):!0}function US(l,d,f,x){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(f,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(f,x),d.state!==l&&my.enqueueReplaceState(d,d.state,null)}function _h(l,d){var f=d;if("ref"in d){f={};for(var x in d)x!=="ref"&&(f[x]=d[x])}if(l=l.defaultProps){f===d&&(f=_({},f));for(var D in l)f[D]===void 0&&(f[D]=l[D])}return f}function BS(l){ih(l)}function GS(l){console.error(l)}function WS(l){ih(l)}function q_(l,d){try{var f=l.onUncaughtError;f(d.value,{componentStack:d.stack})}catch(x){setTimeout(function(){throw x})}}function FS(l,d,f){try{var x=l.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function gy(l,d,f){return f=un(f),f.tag=3,f.payload={element:null},f.callback=function(){q_(l,d)},f}function KS(l){return l=un(l),l.tag=3,l}function QS(l,d,f,x){var D=f.type.getDerivedStateFromError;if(typeof D=="function"){var O=x.value;l.payload=function(){return D(O)},l.callback=function(){FS(d,f,x)}}var oe=f.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(l.callback=function(){FS(d,f,x),typeof D!="function"&&(tu===null?tu=new Set([this]):tu.add(this));var Pe=x.stack;this.componentDidCatch(x.value,{componentStack:Pe!==null?Pe:""})})}function kO(l,d,f,x,D){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(d=f.alternate,d!==null&&mc(d,f,D,!0),f=Kr.current,f!==null){switch(f.tag){case 31:case 13:return zn===null?ox():f.alternate===null&&_i===0&&(_i=3),f.flags&=-257,f.flags|=65536,f.lanes=D,x===It?f.flags|=16384:(d=f.updateQueue,d===null?f.updateQueue=new Set([x]):d.add(x),Gy(l,x,D)),!1;case 22:return f.flags|=65536,x===It?f.flags|=16384:(d=f.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=d):(f=d.retryQueue,f===null?d.retryQueue=new Set([x]):f.add(x)),Gy(l,x,D)),!1}throw Error(r(435,f.tag))}return Gy(l,x,D),ox(),!1}if(Pn)return d=Kr.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=D,x!==kl&&(l=Error(r(422),{cause:x}),Yd(il(l,f)))):(x!==kl&&(d=Error(r(423),{cause:x}),Yd(il(d,f))),l=l.current.alternate,l.flags|=65536,D&=-D,l.lanes|=D,x=il(x,f),D=gy(l.stateNode,x,D),Ni(l,D),_i!==4&&(_i=2)),!1;var O=Error(r(520),{cause:x});if(O=il(O,f),Hm===null?Hm=[O]:Hm.push(O),_i!==4&&(_i=2),d===null)return!0;x=il(x,f),f=d;do{switch(f.tag){case 3:return f.flags|=65536,l=D&-D,f.lanes|=l,l=gy(f.stateNode,x,l),Ni(f,l),!1;case 1:if(d=f.type,O=f.stateNode,(f.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(tu===null||!tu.has(O))))return f.flags|=65536,D&=-D,f.lanes|=D,D=KS(D),QS(D,l,f,x),Ni(f,D),!1}f=f.return}while(f!==null);return!1}var _y=Error(r(461)),Li=!1;function Na(l,d,f,x){d.child=l===null?Sn(d,null,f,x):Or(d,l.child,f,x)}function YS(l,d,f,x,D){f=f.render;var O=d.ref;if("ref"in x){var oe={};for(var Pe in x)Pe!=="ref"&&(oe[Pe]=x[Pe])}else oe=x;return gc(d),x=wm(l,d,f,oe,O,D),Pe=Lm(),l!==null&&!Li?(Pm(l,d,D),Jc(l,d,D)):(Pn&&Pe&&Mm(d),d.flags|=1,Na(l,d,x,D),d.child)}function $S(l,d,f,x,D){if(l===null){var O=f.type;return typeof O=="function"&&!E0(O)&&O.defaultProps===void 0&&f.compare===null?(d.tag=15,d.type=O,VS(l,d,O,x,D)):(l=Fd(f.type,null,x,d,d.mode,D),l.ref=d.ref,l.return=d,d.child=l)}if(O=l.child,!vy(l,D)){var oe=O.memoizedProps;if(f=f.compare,f=f!==null?f:Lo,f(oe,x)&&l.ref===d.ref)return Jc(l,d,D)}return d.flags|=1,l=rl(O,x),l.ref=d.ref,l.return=d,d.child=l}function VS(l,d,f,x,D){if(l!==null){var O=l.memoizedProps;if(Lo(O,x)&&l.ref===d.ref)if(Li=!1,d.pendingProps=x=O,vy(l,D))(l.flags&131072)!==0&&(Li=!0);else return d.lanes=l.lanes,Jc(l,d,D)}return xy(l,d,f,x,D)}function zS(l,d,f,x){var D=x.children,O=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((d.flags&128)!==0){if(O=O!==null?O.baseLanes|f:f,l!==null){for(x=d.child=l.child,D=0;x!==null;)D=D|x.lanes|x.childLanes,x=x.sibling;x=D&~O}else x=0,d.child=null;return HS(l,d,O,f,x)}if((f&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Qe(d,O!==null?O.cachePool:null),O!==null?Fr(d,O):Zn(),fi(d);else return x=d.lanes=536870912,HS(l,d,O!==null?O.baseLanes|f:f,f,x)}else O!==null?(Qe(d,O.cachePool),Fr(d,O),mi(),d.memoizedState=null):(l!==null&&Qe(d,null),Zn(),mi());return Na(l,d,D,f),d.child}function Fm(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function HS(l,d,f,x,D){var O=We();return O=O===null?null:{parent:ai._currentValue,pool:O},d.memoizedState={baseLanes:f,cachePool:O},l!==null&&Qe(d,null),Zn(),fi(d),l!==null&&mc(l,d,x,!0),d.childLanes=D,null}function X_(l,d){return d=Z_({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function qS(l,d,f){return Or(d,l.child,null,f),l=X_(d,d.pendingProps),l.flags|=2,pr(d),d.memoizedState=null,l}function UO(l,d,f){var x=d.pendingProps,D=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Pn){if(x.mode==="hidden")return l=X_(d,x),d.lanes=536870912,Fm(null,l);if(lr(d),(l=jr)?(l=o5(l,Hr),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:dc!==null?{id:ol,overflow:cl}:null,retryLane:536870912,hydrationErrors:null},f=D0(l),f.return=d,d.child=f,Qi=d,jr=null)):l=null,l===null)throw uc(d);return d.lanes=536870912,null}return X_(d,x)}var O=l.memoizedState;if(O!==null){var oe=O.dehydrated;if(lr(d),D)if(d.flags&256)d.flags&=-257,d=qS(l,d,f);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(Li||mc(l,d,f,!1),D=(f&l.childLanes)!==0,Li||D){if(x=wr,x!==null&&(oe=gt(x,f),oe!==0&&oe!==O.retryLane))throw O.retryLane=oe,Uo(l,oe),_l(x,l,oe),_y;ox(),d=qS(l,d,f)}else l=O.treeContext,jr=to(oe.nextSibling),Qi=d,Pn=!0,ba=null,Hr=!1,l!==null&&W_(d,l),d=X_(d,x),d.flags|=4096;return d}return l=rl(l.child,{mode:x.mode,children:x.children}),l.ref=d.ref,d.child=l,l.return=d,l}function J_(l,d){var f=d.ref;if(f===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(l===null||l.ref!==f)&&(d.flags|=4194816)}}function xy(l,d,f,x,D){return gc(d),f=wm(l,d,f,x,void 0,D),x=Lm(),l!==null&&!Li?(Pm(l,d,D),Jc(l,d,D)):(Pn&&x&&Mm(d),d.flags|=1,Na(l,d,f,D),d.child)}function XS(l,d,f,x,D,O){return gc(d),d.updateQueue=null,f=Go(d,x,f,D),P0(l),x=Lm(),l!==null&&!Li?(Pm(l,d,O),Jc(l,d,O)):(Pn&&x&&Mm(d),d.flags|=1,Na(l,d,f,O),d.child)}function JS(l,d,f,x,D){if(gc(d),d.stateNode===null){var O=Ki,oe=f.contextType;typeof oe=="object"&&oe!==null&&(O=$i(oe)),O=new f(x,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=my,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=x,O.state=d.memoizedState,O.refs={},Rs(d),oe=f.contextType,O.context=typeof oe=="object"&&oe!==null?$i(oe):Ki,O.state=d.memoizedState,oe=f.getDerivedStateFromProps,typeof oe=="function"&&(fy(d,f,oe,x),O.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(oe=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),oe!==O.state&&my.enqueueReplaceState(O,O.state,null),ui(d,x,O,D),Er(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),x=!0}else if(l===null){O=d.stateNode;var Pe=d.memoizedProps,yt=_h(f,Pe);O.props=yt;var Qt=O.context,ns=f.contextType;oe=Ki,typeof ns=="object"&&ns!==null&&(oe=$i(ns));var us=f.getDerivedStateFromProps;ns=typeof us=="function"||typeof O.getSnapshotBeforeUpdate=="function",Pe=d.pendingProps!==Pe,ns||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Pe||Qt!==oe)&&US(d,O,x,oe),Ks=!1;var $t=d.memoizedState;O.state=$t,ui(d,x,O,D),Er(),Qt=d.memoizedState,Pe||$t!==Qt||Ks?(typeof us=="function"&&(fy(d,f,us,x),Qt=d.memoizedState),(yt=Ks||kS(d,f,yt,x,$t,Qt,oe))?(ns||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=Qt),O.props=x,O.state=Qt,O.context=oe,x=yt):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{O=d.stateNode,Wr(l,d),oe=d.memoizedProps,ns=_h(f,oe),O.props=ns,us=d.pendingProps,$t=O.context,Qt=f.contextType,yt=Ki,typeof Qt=="object"&&Qt!==null&&(yt=$i(Qt)),Pe=f.getDerivedStateFromProps,(Qt=typeof Pe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(oe!==us||$t!==yt)&&US(d,O,x,yt),Ks=!1,$t=d.memoizedState,O.state=$t,ui(d,x,O,D),Er();var Ht=d.memoizedState;oe!==us||$t!==Ht||Ks||l!==null&&l.dependencies!==null&&j0(l.dependencies)?(typeof Pe=="function"&&(fy(d,f,Pe,x),Ht=d.memoizedState),(ns=Ks||kS(d,f,ns,x,$t,Ht,yt)||l!==null&&l.dependencies!==null&&j0(l.dependencies))?(Qt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,Ht,yt),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,Ht,yt)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||oe===l.memoizedProps&&$t===l.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&$t===l.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=Ht),O.props=x,O.state=Ht,O.context=yt,x=ns):(typeof O.componentDidUpdate!="function"||oe===l.memoizedProps&&$t===l.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&$t===l.memoizedState||(d.flags|=1024),x=!1)}return O=x,J_(l,d),x=(d.flags&128)!==0,O||x?(O=d.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,l!==null&&x?(d.child=Or(d,l.child,null,D),d.child=Or(d,null,f,D)):Na(l,d,f,D),d.memoizedState=O.state,l=d.child):l=Jc(l,d,D),l}function ZS(l,d,f,x){return Vc(),d.flags|=256,Na(l,d,f,x),d.child}var py={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yy(l){return{baseLanes:l,cachePool:Xe()}}function by(l,d,f){return l=l!==null?l.childLanes&~f:0,d&&(l|=Bl),l}function ev(l,d,f){var x=d.pendingProps,D=!1,O=(d.flags&128)!==0,oe;if((oe=O)||(oe=l!==null&&l.memoizedState===null?!1:(Qn.current&2)!==0),oe&&(D=!0,d.flags&=-129),oe=(d.flags&32)!==0,d.flags&=-33,l===null){if(Pn){if(D?li(d):mi(),(l=jr)?(l=o5(l,Hr),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:dc!==null?{id:ol,overflow:cl}:null,retryLane:536870912,hydrationErrors:null},f=D0(l),f.return=d,d.child=f,Qi=d,jr=null)):l=null,l===null)throw uc(d);return sb(l)?d.lanes=32:d.lanes=536870912,null}var Pe=x.children;return x=x.fallback,D?(mi(),D=d.mode,Pe=Z_({mode:"hidden",children:Pe},D),x=cc(x,D,f,null),Pe.return=d,x.return=d,Pe.sibling=x,d.child=Pe,x=d.child,x.memoizedState=yy(f),x.childLanes=by(l,oe,f),d.memoizedState=py,Fm(null,x)):(li(d),Cy(d,Pe))}var yt=l.memoizedState;if(yt!==null&&(Pe=yt.dehydrated,Pe!==null)){if(O)d.flags&256?(li(d),d.flags&=-257,d=Ny(l,d,f)):d.memoizedState!==null?(mi(),d.child=l.child,d.flags|=128,d=null):(mi(),Pe=x.fallback,D=d.mode,x=Z_({mode:"visible",children:x.children},D),Pe=cc(Pe,D,f,null),Pe.flags|=2,x.return=d,Pe.return=d,x.sibling=Pe,d.child=x,Or(d,l.child,null,f),x=d.child,x.memoizedState=yy(f),x.childLanes=by(l,oe,f),d.memoizedState=py,d=Fm(null,x));else if(li(d),sb(Pe)){if(oe=Pe.nextSibling&&Pe.nextSibling.dataset,oe)var Qt=oe.dgst;oe=Qt,x=Error(r(419)),x.stack="",x.digest=oe,Yd({value:x,source:null,stack:null}),d=Ny(l,d,f)}else if(Li||mc(l,d,f,!1),oe=(f&l.childLanes)!==0,Li||oe){if(oe=wr,oe!==null&&(x=gt(oe,f),x!==0&&x!==yt.retryLane))throw yt.retryLane=x,Uo(l,x),_l(oe,l,x),_y;tb(Pe)||ox(),d=Ny(l,d,f)}else tb(Pe)?(d.flags|=192,d.child=l.child,d=null):(l=yt.treeContext,jr=to(Pe.nextSibling),Qi=d,Pn=!0,ba=null,Hr=!1,l!==null&&W_(d,l),d=Cy(d,x.children),d.flags|=4096);return d}return D?(mi(),Pe=x.fallback,D=d.mode,yt=l.child,Qt=yt.sibling,x=rl(yt,{mode:"hidden",children:x.children}),x.subtreeFlags=yt.subtreeFlags&65011712,Qt!==null?Pe=rl(Qt,Pe):(Pe=cc(Pe,D,f,null),Pe.flags|=2),Pe.return=d,x.return=d,x.sibling=Pe,d.child=x,Fm(null,x),x=d.child,Pe=l.child.memoizedState,Pe===null?Pe=yy(f):(D=Pe.cachePool,D!==null?(yt=ai._currentValue,D=D.parent!==yt?{parent:yt,pool:yt}:D):D=Xe(),Pe={baseLanes:Pe.baseLanes|f,cachePool:D}),x.memoizedState=Pe,x.childLanes=by(l,oe,f),d.memoizedState=py,Fm(l.child,x)):(li(d),f=l.child,l=f.sibling,f=rl(f,{mode:"visible",children:x.children}),f.return=d,f.sibling=null,l!==null&&(oe=d.deletions,oe===null?(d.deletions=[l],d.flags|=16):oe.push(l)),d.child=f,d.memoizedState=null,f)}function Cy(l,d){return d=Z_({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Z_(l,d){return l=aa(22,l,null,d),l.lanes=0,l}function Ny(l,d,f){return Or(d,l.child,null,f),l=Cy(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function tv(l,d,f){l.lanes|=d;var x=l.alternate;x!==null&&(x.lanes|=d),$d(l.return,d,f)}function Sy(l,d,f,x,D,O){var oe=l.memoizedState;oe===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:D,treeForkCount:O}:(oe.isBackwards=d,oe.rendering=null,oe.renderingStartTime=0,oe.last=x,oe.tail=f,oe.tailMode=D,oe.treeForkCount=O)}function sv(l,d,f){var x=d.pendingProps,D=x.revealOrder,O=x.tail;x=x.children;var oe=Qn.current,Pe=(oe&2)!==0;if(Pe?(oe=oe&1|2,d.flags|=128):oe&=1,K(Qn,oe),Na(l,d,x,f),x=Pn?uh:0,!Pe&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&tv(l,f,d);else if(l.tag===19)tv(l,f,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(D){case"forwards":for(f=d.child,D=null;f!==null;)l=f.alternate,l!==null&&oa(l)===null&&(D=f),f=f.sibling;f=D,f===null?(D=d.child,d.child=null):(D=f.sibling,f.sibling=null),Sy(d,!1,D,f,O,x);break;case"backwards":case"unstable_legacy-backwards":for(f=null,D=d.child,d.child=null;D!==null;){if(l=D.alternate,l!==null&&oa(l)===null){d.child=D;break}l=D.sibling,D.sibling=f,f=D,D=l}Sy(d,!0,f,null,O,x);break;case"together":Sy(d,!1,null,null,void 0,x);break;default:d.memoizedState=null}return d.child}function Jc(l,d,f){if(l!==null&&(d.dependencies=l.dependencies),eu|=d.lanes,(f&d.childLanes)===0)if(l!==null){if(mc(l,d,f,!1),(f&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,f=rl(l,l.pendingProps),d.child=f,f.return=d;l.sibling!==null;)l=l.sibling,f=f.sibling=rl(l,l.pendingProps),f.return=d;f.sibling=null}return d.child}function vy(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&j0(l)))}function BO(l,d,f){switch(d.tag){case 3:me(d,d.stateNode.containerInfo),fc(d,ai,l.memoizedState.cache),Vc();break;case 27:case 5:ge(d);break;case 4:me(d,d.stateNode.containerInfo);break;case 10:fc(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,lr(d),null;break;case 13:var x=d.memoizedState;if(x!==null)return x.dehydrated!==null?(li(d),d.flags|=128,null):(f&d.child.childLanes)!==0?ev(l,d,f):(li(d),l=Jc(l,d,f),l!==null?l.sibling:null);li(d);break;case 19:var D=(l.flags&128)!==0;if(x=(f&d.childLanes)!==0,x||(mc(l,d,f,!1),x=(f&d.childLanes)!==0),D){if(x)return sv(l,d,f);d.flags|=128}if(D=d.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),K(Qn,Qn.current),x)break;return null;case 22:return d.lanes=0,zS(l,d,f,d.pendingProps);case 24:fc(d,ai,l.memoizedState.cache)}return Jc(l,d,f)}function nv(l,d,f){if(l!==null)if(l.memoizedProps!==d.pendingProps)Li=!0;else{if(!vy(l,f)&&(d.flags&128)===0)return Li=!1,BO(l,d,f);Li=(l.flags&131072)!==0}else Li=!1,Pn&&(d.flags&1048576)!==0&&G_(d,uh,d.index);switch(d.lanes=0,d.tag){case 16:e:{var x=d.pendingProps;if(l=kt(d.elementType),d.type=l,typeof l=="function")E0(l)?(x=_h(l,x),d.tag=1,d=JS(null,d,l,x,f)):(d.tag=0,d=xy(null,d,l,x,f));else{if(l!=null){var D=l.$$typeof;if(D===M){d.tag=11,d=YS(null,d,l,x,f);break e}else if(D===G){d.tag=14,d=$S(null,d,l,x,f);break e}}throw d=X(l)||l,Error(r(306,d,""))}}return d;case 0:return xy(l,d,d.type,d.pendingProps,f);case 1:return x=d.type,D=_h(x,d.pendingProps),JS(l,d,x,D,f);case 3:e:{if(me(d,d.stateNode.containerInfo),l===null)throw Error(r(387));x=d.pendingProps;var O=d.memoizedState;D=O.element,Wr(l,d),ui(d,x,null,f);var oe=d.memoizedState;if(x=oe.cache,fc(d,ai,x),x!==O.cache&&zc(d,[ai],f,!0),Er(),x=oe.element,O.isDehydrated)if(O={element:x,isDehydrated:!1,cache:oe.cache},d.updateQueue.baseState=O,d.memoizedState=O,d.flags&256){d=ZS(l,d,x,f);break e}else if(x!==D){D=il(Error(r(424)),d),Yd(D),d=ZS(l,d,x,f);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(jr=to(l.firstChild),Qi=d,Pn=!0,ba=null,Hr=!0,f=Sn(d,null,x,f),d.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Vc(),x===D){d=Jc(l,d,f);break e}Na(l,d,x,f)}d=d.child}return d;case 26:return J_(l,d),l===null?(f=m5(d.type,null,d.pendingProps,null))?d.memoizedState=f:Pn||(f=d.type,l=d.pendingProps,x=gx(V.current).createElement(f),x[ls]=d,x[ds]=l,Sa(x,f,l),Ie(x),d.stateNode=x):d.memoizedState=m5(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return ge(d),l===null&&Pn&&(x=d.stateNode=u5(d.type,d.pendingProps,V.current),Qi=d,Hr=!0,D=jr,iu(d.type)?(nb=D,jr=to(x.firstChild)):jr=D),Na(l,d,d.pendingProps.children,f),J_(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Pn&&((D=x=jr)&&(x=g3(x,d.type,d.pendingProps,Hr),x!==null?(d.stateNode=x,Qi=d,jr=to(x.firstChild),Hr=!1,D=!0):D=!1),D||uc(d)),ge(d),D=d.type,O=d.pendingProps,oe=l!==null?l.memoizedProps:null,x=O.children,Jy(D,O)?x=null:oe!==null&&Jy(D,oe)&&(d.flags|=32),d.memoizedState!==null&&(D=wm(l,d,iy,null,null,f),ng._currentValue=D),J_(l,d),Na(l,d,x,f),d.child;case 6:return l===null&&Pn&&((l=f=jr)&&(f=_3(f,d.pendingProps,Hr),f!==null?(d.stateNode=f,Qi=d,jr=null,l=!0):l=!1),l||uc(d)),null;case 13:return ev(l,d,f);case 4:return me(d,d.stateNode.containerInfo),x=d.pendingProps,l===null?d.child=Or(d,null,x,f):Na(l,d,x,f),d.child;case 11:return YS(l,d,d.type,d.pendingProps,f);case 7:return Na(l,d,d.pendingProps,f),d.child;case 8:return Na(l,d,d.pendingProps.children,f),d.child;case 12:return Na(l,d,d.pendingProps.children,f),d.child;case 10:return x=d.pendingProps,fc(d,d.type,x.value),Na(l,d,x.children,f),d.child;case 9:return D=d.type._context,x=d.pendingProps.children,gc(d),D=$i(D),x=x(D),d.flags|=1,Na(l,d,x,f),d.child;case 14:return $S(l,d,d.type,d.pendingProps,f);case 15:return VS(l,d,d.type,d.pendingProps,f);case 19:return sv(l,d,f);case 31:return UO(l,d,f);case 22:return zS(l,d,f,d.pendingProps);case 24:return gc(d),x=$i(ai),l===null?(D=We(),D===null&&(D=wr,O=Vd(),D.pooledCache=O,O.refCount++,O!==null&&(D.pooledCacheLanes|=f),D=O),d.memoizedState={parent:x,cache:D},Rs(d),fc(d,ai,D)):((l.lanes&f)!==0&&(Wr(l,d),ui(d,null,null,f),Er()),D=l.memoizedState,O=d.memoizedState,D.parent!==x?(D={parent:x,cache:x},d.memoizedState=D,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=D),fc(d,ai,x)):(x=O.cache,fc(d,ai,x),x!==D.cache&&zc(d,[ai],f,!0))),Na(l,d,d.pendingProps.children,f),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Zc(l){l.flags|=4}function Ey(l,d,f,x,D){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(D&335544128)===D)if(l.stateNode.complete)l.flags|=8192;else if(Iv())l.flags|=8192;else throw Jt=It,Gt}else l.flags&=-16777217}function rv(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!y5(d))if(Iv())l.flags|=8192;else throw Jt=It,Gt}function ex(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Oe():536870912,l.lanes|=d,$0|=d)}function Km(l,d){if(!Pn)switch(l.tailMode){case"hidden":d=l.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Qr(l){var d=l.alternate!==null&&l.alternate.child===l.child,f=0,x=0;if(d)for(var D=l.child;D!==null;)f|=D.lanes|D.childLanes,x|=D.subtreeFlags&65011712,x|=D.flags&65011712,D.return=l,D=D.sibling;else for(D=l.child;D!==null;)f|=D.lanes|D.childLanes,x|=D.subtreeFlags,x|=D.flags,D.return=l,D=D.sibling;return l.subtreeFlags|=x,l.childLanes=f,d}function GO(l,d,f){var x=d.pendingProps;switch(M0(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(d),null;case 1:return Qr(d),null;case 3:return f=d.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),dl(ai),Ce(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Yi(d)?Zc(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,jm())),Qr(d),null;case 26:var D=d.type,O=d.memoizedState;return l===null?(Zc(d),O!==null?(Qr(d),rv(d,O)):(Qr(d),Ey(d,D,null,x,f))):O?O!==l.memoizedState?(Zc(d),Qr(d),rv(d,O)):(Qr(d),d.flags&=-16777217):(l=l.memoizedProps,l!==x&&Zc(d),Qr(d),Ey(d,D,l,x,f)),null;case 27:if(Ge(d),f=V.current,D=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==x&&Zc(d);else{if(!x){if(d.stateNode===null)throw Error(r(166));return Qr(d),null}l=J.current,Yi(d)?Im(d):(l=u5(D,x,f),d.stateNode=l,Zc(d))}return Qr(d),null;case 5:if(Ge(d),D=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==x&&Zc(d);else{if(!x){if(d.stateNode===null)throw Error(r(166));return Qr(d),null}if(O=J.current,Yi(d))Im(d);else{var oe=gx(V.current);switch(O){case 1:O=oe.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:O=oe.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":O=oe.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":O=oe.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":O=oe.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof x.is=="string"?oe.createElement("select",{is:x.is}):oe.createElement("select"),x.multiple?O.multiple=!0:x.size&&(O.size=x.size);break;default:O=typeof x.is=="string"?oe.createElement(D,{is:x.is}):oe.createElement(D)}}O[ls]=d,O[ds]=x;e:for(oe=d.child;oe!==null;){if(oe.tag===5||oe.tag===6)O.appendChild(oe.stateNode);else if(oe.tag!==4&&oe.tag!==27&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===d)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===d)break e;oe=oe.return}oe.sibling.return=oe.return,oe=oe.sibling}d.stateNode=O;e:switch(Sa(O,D,x),D){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&Zc(d)}}return Qr(d),Ey(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,f),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==x&&Zc(d);else{if(typeof x!="string"&&d.stateNode===null)throw Error(r(166));if(l=V.current,Yi(d)){if(l=d.stateNode,f=d.memoizedProps,x=null,D=Qi,D!==null)switch(D.tag){case 27:case 5:x=D.memoizedProps}l[ls]=d,l=!!(l.nodeValue===f||x!==null&&x.suppressHydrationWarning===!0||e5(l.nodeValue,f)),l||uc(d,!0)}else l=gx(l).createTextNode(x),l[ls]=d,d.stateNode=l}return Qr(d),null;case 31:if(f=d.memoizedState,l===null||l.memoizedState!==null){if(x=Yi(d),f!==null){if(l===null){if(!x)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[ls]=d}else Vc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Qr(d),l=!1}else f=jm(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return d.flags&256?(pr(d),d):(pr(d),null);if((d.flags&128)!==0)throw Error(r(558))}return Qr(d),null;case 13:if(x=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(D=Yi(d),x!==null&&x.dehydrated!==null){if(l===null){if(!D)throw Error(r(318));if(D=d.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[ls]=d}else Vc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Qr(d),D=!1}else D=jm(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=D),D=!0;if(!D)return d.flags&256?(pr(d),d):(pr(d),null)}return pr(d),(d.flags&128)!==0?(d.lanes=f,d):(f=x!==null,l=l!==null&&l.memoizedState!==null,f&&(x=d.child,D=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(D=x.alternate.memoizedState.cachePool.pool),O=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(O=x.memoizedState.cachePool.pool),O!==D&&(x.flags|=2048)),f!==l&&f&&(d.child.flags|=8192),ex(d,d.updateQueue),Qr(d),null);case 4:return Ce(),l===null&&Vy(d.stateNode.containerInfo),Qr(d),null;case 10:return dl(d.type),Qr(d),null;case 19:if(j(Qn),x=d.memoizedState,x===null)return Qr(d),null;if(D=(d.flags&128)!==0,O=x.rendering,O===null)if(D)Km(x,!1);else{if(_i!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(O=oa(l),O!==null){for(d.flags|=128,Km(x,!1),l=O.updateQueue,d.updateQueue=l,ex(d,l),d.subtreeFlags=0,l=f,f=d.child;f!==null;)ch(f,l),f=f.sibling;return K(Qn,Qn.current&1|2),Pn&&Qa(d,x.treeForkCount),d.child}l=l.sibling}x.tail!==null&&ze()>ix&&(d.flags|=128,D=!0,Km(x,!1),d.lanes=4194304)}else{if(!D)if(l=oa(O),l!==null){if(d.flags|=128,D=!0,l=l.updateQueue,d.updateQueue=l,ex(d,l),Km(x,!0),x.tail===null&&x.tailMode==="hidden"&&!O.alternate&&!Pn)return Qr(d),null}else 2*ze()-x.renderingStartTime>ix&&f!==536870912&&(d.flags|=128,D=!0,Km(x,!1),d.lanes=4194304);x.isBackwards?(O.sibling=d.child,d.child=O):(l=x.last,l!==null?l.sibling=O:d.child=O,x.last=O)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=ze(),l.sibling=null,f=Qn.current,K(Qn,D?f&1|2:f&1),Pn&&Qa(d,x.treeForkCount),l):(Qr(d),null);case 22:case 23:return pr(d),Si(),x=d.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(d.flags|=8192):x&&(d.flags|=8192),x?(f&536870912)!==0&&(d.flags&128)===0&&(Qr(d),d.subtreeFlags&6&&(d.flags|=8192)):Qr(d),f=d.updateQueue,f!==null&&ex(d,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==f&&(d.flags|=2048),l!==null&&j(we),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),d.memoizedState.cache!==f&&(d.flags|=2048),dl(ai),Qr(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function WO(l,d){switch(M0(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return dl(ai),Ce(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Ge(d),null;case 31:if(d.memoizedState!==null){if(pr(d),d.alternate===null)throw Error(r(340));Vc()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(pr(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Vc()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return j(Qn),null;case 4:return Ce(),null;case 10:return dl(d.type),null;case 22:case 23:return pr(d),Si(),l!==null&&j(we),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return dl(ai),null;case 25:return null;default:return null}}function iv(l,d){switch(M0(d),d.tag){case 3:dl(ai),Ce();break;case 26:case 27:case 5:Ge(d);break;case 4:Ce();break;case 31:d.memoizedState!==null&&pr(d);break;case 13:pr(d);break;case 19:j(Qn);break;case 10:dl(d.type);break;case 22:case 23:pr(d),Si(),l!==null&&j(we);break;case 24:dl(ai)}}function Qm(l,d){try{var f=d.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var D=x.next;f=D;do{if((f.tag&l)===l){x=void 0;var O=f.create,oe=f.inst;x=O(),oe.destroy=x}f=f.next}while(f!==D)}}catch(Pe){br(d,d.return,Pe)}}function Jd(l,d,f){try{var x=d.updateQueue,D=x!==null?x.lastEffect:null;if(D!==null){var O=D.next;x=O;do{if((x.tag&l)===l){var oe=x.inst,Pe=oe.destroy;if(Pe!==void 0){oe.destroy=void 0,D=d;var yt=f,Qt=Pe;try{Qt()}catch(ns){br(D,yt,ns)}}}x=x.next}while(x!==O)}}catch(ns){br(d,d.return,ns)}}function av(l){var d=l.updateQueue;if(d!==null){var f=l.stateNode;try{hi(d,f)}catch(x){br(l,l.return,x)}}}function lv(l,d,f){f.props=_h(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(x){br(l,d,x)}}function Ym(l,d){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var x=l.stateNode;break;case 30:x=l.stateNode;break;default:x=l.stateNode}typeof f=="function"?l.refCleanup=f(x):f.current=x}}catch(D){br(l,d,D)}}function bc(l,d){var f=l.ref,x=l.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(D){br(l,d,D)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(D){br(l,d,D)}else f.current=null}function ov(l){var d=l.type,f=l.memoizedProps,x=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":f.autoFocus&&x.focus();break e;case"img":f.src?x.src=f.src:f.srcSet&&(x.srcset=f.srcSet)}}catch(D){br(l,l.return,D)}}function Dy(l,d,f){try{var x=l.stateNode;c3(x,l.type,f,d),x[ds]=d}catch(D){br(l,l.return,D)}}function cv(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&iu(l.type)||l.tag===4}function Ry(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||cv(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&iu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ty(l,d,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,d):(d=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,d.appendChild(l),f=f._reactRootContainer,f!=null||d.onclick!==null||(d.onclick=ms));else if(x!==4&&(x===27&&iu(l.type)&&(f=l.stateNode,d=null),l=l.child,l!==null))for(Ty(l,d,f),l=l.sibling;l!==null;)Ty(l,d,f),l=l.sibling}function tx(l,d,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?f.insertBefore(l,d):f.appendChild(l);else if(x!==4&&(x===27&&iu(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(tx(l,d,f),l=l.sibling;l!==null;)tx(l,d,f),l=l.sibling}function dv(l){var d=l.stateNode,f=l.memoizedProps;try{for(var x=l.type,D=d.attributes;D.length;)d.removeAttributeNode(D[0]);Sa(d,x,f),d[ls]=l,d[ds]=f}catch(O){br(l,l.return,O)}}var ed=!1,Pi=!1,My=!1,uv=typeof WeakSet=="function"?WeakSet:Set,ca=null;function FO(l,d){if(l=l.containerInfo,qy=Nx,l=Ao(l),ql(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var D=x.anchorOffset,O=x.focusNode;x=x.focusOffset;try{f.nodeType,O.nodeType}catch{f=null;break e}var oe=0,Pe=-1,yt=-1,Qt=0,ns=0,us=l,$t=null;t:for(;;){for(var Ht;us!==f||D!==0&&us.nodeType!==3||(Pe=oe+D),us!==O||x!==0&&us.nodeType!==3||(yt=oe+x),us.nodeType===3&&(oe+=us.nodeValue.length),(Ht=us.firstChild)!==null;)$t=us,us=Ht;for(;;){if(us===l)break t;if($t===f&&++Qt===D&&(Pe=oe),$t===O&&++ns===x&&(yt=oe),(Ht=us.nextSibling)!==null)break;us=$t,$t=us.parentNode}us=Ht}f=Pe===-1||yt===-1?null:{start:Pe,end:yt}}else f=null}f=f||{start:0,end:0}}else f=null;for(Xy={focusedElem:l,selectionRange:f},Nx=!1,ca=d;ca!==null;)if(d=ca,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,ca=l;else for(;ca!==null;){switch(d=ca,O=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)D=l[f],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,f=d,D=O.memoizedProps,O=O.memoizedState,x=f.stateNode;try{var Hs=_h(f.type,D);l=x.getSnapshotBeforeUpdate(Hs,O),x.__reactInternalSnapshotBeforeUpdate=l}catch(fn){br(f,f.return,fn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,f=l.nodeType,f===9)eb(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":eb(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,ca=l;break}ca=d.return}}function hv(l,d,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:sd(l,f),x&4&&Qm(5,f);break;case 1:if(sd(l,f),x&4)if(l=f.stateNode,d===null)try{l.componentDidMount()}catch(oe){br(f,f.return,oe)}else{var D=_h(f.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(D,d,l.__reactInternalSnapshotBeforeUpdate)}catch(oe){br(f,f.return,oe)}}x&64&&av(f),x&512&&Ym(f,f.return);break;case 3:if(sd(l,f),x&64&&(l=f.updateQueue,l!==null)){if(d=null,f.child!==null)switch(f.child.tag){case 27:case 5:d=f.child.stateNode;break;case 1:d=f.child.stateNode}try{hi(l,d)}catch(oe){br(f,f.return,oe)}}break;case 27:d===null&&x&4&&dv(f);case 26:case 5:sd(l,f),d===null&&x&4&&ov(f),x&512&&Ym(f,f.return);break;case 12:sd(l,f);break;case 31:sd(l,f),x&4&&gv(l,f);break;case 13:sd(l,f),x&4&&_v(l,f),x&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=XO.bind(null,f),x3(l,f))));break;case 22:if(x=f.memoizedState!==null||ed,!x){d=d!==null&&d.memoizedState!==null||Pi,D=ed;var O=Pi;ed=x,(Pi=d)&&!O?nd(l,f,(f.subtreeFlags&8772)!==0):sd(l,f),ed=D,Pi=O}break;case 30:break;default:sd(l,f)}}function fv(l){var d=l.alternate;d!==null&&(l.alternate=null,fv(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&_t(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Jr=null,hl=!1;function td(l,d,f){for(f=f.child;f!==null;)mv(l,d,f),f=f.sibling}function mv(l,d,f){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Ye,f)}catch{}switch(f.tag){case 26:Pi||bc(f,d),td(l,d,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Pi||bc(f,d);var x=Jr,D=hl;iu(f.type)&&(Jr=f.stateNode,hl=!1),td(l,d,f),eg(f.stateNode),Jr=x,hl=D;break;case 5:Pi||bc(f,d);case 6:if(x=Jr,D=hl,Jr=null,td(l,d,f),Jr=x,hl=D,Jr!==null)if(hl)try{(Jr.nodeType===9?Jr.body:Jr.nodeName==="HTML"?Jr.ownerDocument.body:Jr).removeChild(f.stateNode)}catch(O){br(f,d,O)}else try{Jr.removeChild(f.stateNode)}catch(O){br(f,d,O)}break;case 18:Jr!==null&&(hl?(l=Jr,a5(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),ef(l)):a5(Jr,f.stateNode));break;case 4:x=Jr,D=hl,Jr=f.stateNode.containerInfo,hl=!0,td(l,d,f),Jr=x,hl=D;break;case 0:case 11:case 14:case 15:Jd(2,f,d),Pi||Jd(4,f,d),td(l,d,f);break;case 1:Pi||(bc(f,d),x=f.stateNode,typeof x.componentWillUnmount=="function"&&lv(f,d,x)),td(l,d,f);break;case 21:td(l,d,f);break;case 22:Pi=(x=Pi)||f.memoizedState!==null,td(l,d,f),Pi=x;break;default:td(l,d,f)}}function gv(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{ef(l)}catch(f){br(d,d.return,f)}}}function _v(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ef(l)}catch(f){br(d,d.return,f)}}function KO(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new uv),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new uv),d;default:throw Error(r(435,l.tag))}}function sx(l,d){var f=KO(l);d.forEach(function(x){if(!f.has(x)){f.add(x);var D=JO.bind(null,l,x);x.then(D,D)}})}function fl(l,d){var f=d.deletions;if(f!==null)for(var x=0;x<f.length;x++){var D=f[x],O=l,oe=d,Pe=oe;e:for(;Pe!==null;){switch(Pe.tag){case 27:if(iu(Pe.type)){Jr=Pe.stateNode,hl=!1;break e}break;case 5:Jr=Pe.stateNode,hl=!1;break e;case 3:case 4:Jr=Pe.stateNode.containerInfo,hl=!0;break e}Pe=Pe.return}if(Jr===null)throw Error(r(160));mv(O,oe,D),Jr=null,hl=!1,O=D.alternate,O!==null&&(O.return=null),D.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)xv(d,l),d=d.sibling}var Qo=null;function xv(l,d){var f=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:fl(d,l),ml(l),x&4&&(Jd(3,l,l.return),Qm(3,l),Jd(5,l,l.return));break;case 1:fl(d,l),ml(l),x&512&&(Pi||f===null||bc(f,f.return)),x&64&&ed&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:var D=Qo;if(fl(d,l),ml(l),x&512&&(Pi||f===null||bc(f,f.return)),x&4){var O=f!==null?f.memoizedState:null;if(x=l.memoizedState,f===null)if(x===null)if(l.stateNode===null){e:{x=l.type,f=l.memoizedProps,D=D.ownerDocument||D;t:switch(x){case"title":O=D.getElementsByTagName("title")[0],(!O||O[Wt]||O[ls]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=D.createElement(x),D.head.insertBefore(O,D.querySelector("head > title"))),Sa(O,x,f),O[ls]=l,Ie(O),x=O;break e;case"link":var oe=x5("link","href",D).get(x+(f.href||""));if(oe){for(var Pe=0;Pe<oe.length;Pe++)if(O=oe[Pe],O.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&O.getAttribute("rel")===(f.rel==null?null:f.rel)&&O.getAttribute("title")===(f.title==null?null:f.title)&&O.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){oe.splice(Pe,1);break t}}O=D.createElement(x),Sa(O,x,f),D.head.appendChild(O);break;case"meta":if(oe=x5("meta","content",D).get(x+(f.content||""))){for(Pe=0;Pe<oe.length;Pe++)if(O=oe[Pe],O.getAttribute("content")===(f.content==null?null:""+f.content)&&O.getAttribute("name")===(f.name==null?null:f.name)&&O.getAttribute("property")===(f.property==null?null:f.property)&&O.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&O.getAttribute("charset")===(f.charSet==null?null:f.charSet)){oe.splice(Pe,1);break t}}O=D.createElement(x),Sa(O,x,f),D.head.appendChild(O);break;default:throw Error(r(468,x))}O[ls]=l,Ie(O),x=O}l.stateNode=x}else p5(D,l.type,l.stateNode);else l.stateNode=_5(D,x,l.memoizedProps);else O!==x?(O===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):O.count--,x===null?p5(D,l.type,l.stateNode):_5(D,x,l.memoizedProps)):x===null&&l.stateNode!==null&&Dy(l,l.memoizedProps,f.memoizedProps)}break;case 27:fl(d,l),ml(l),x&512&&(Pi||f===null||bc(f,f.return)),f!==null&&x&4&&Dy(l,l.memoizedProps,f.memoizedProps);break;case 5:if(fl(d,l),ml(l),x&512&&(Pi||f===null||bc(f,f.return)),l.flags&32){D=l.stateNode;try{it(D,"")}catch(Hs){br(l,l.return,Hs)}}x&4&&l.stateNode!=null&&(D=l.memoizedProps,Dy(l,D,f!==null?f.memoizedProps:D)),x&1024&&(My=!0);break;case 6:if(fl(d,l),ml(l),x&4){if(l.stateNode===null)throw Error(r(162));x=l.memoizedProps,f=l.stateNode;try{f.nodeValue=x}catch(Hs){br(l,l.return,Hs)}}break;case 3:if(px=null,D=Qo,Qo=_x(d.containerInfo),fl(d,l),Qo=D,ml(l),x&4&&f!==null&&f.memoizedState.isDehydrated)try{ef(d.containerInfo)}catch(Hs){br(l,l.return,Hs)}My&&(My=!1,pv(l));break;case 4:x=Qo,Qo=_x(l.stateNode.containerInfo),fl(d,l),ml(l),Qo=x;break;case 12:fl(d,l),ml(l);break;case 31:fl(d,l),ml(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,sx(l,x)));break;case 13:fl(d,l),ml(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(rx=ze()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,sx(l,x)));break;case 22:D=l.memoizedState!==null;var yt=f!==null&&f.memoizedState!==null,Qt=ed,ns=Pi;if(ed=Qt||D,Pi=ns||yt,fl(d,l),Pi=ns,ed=Qt,ml(l),x&8192)e:for(d=l.stateNode,d._visibility=D?d._visibility&-2:d._visibility|1,D&&(f===null||yt||ed||Pi||xh(l)),f=null,d=l;;){if(d.tag===5||d.tag===26){if(f===null){yt=f=d;try{if(O=yt.stateNode,D)oe=O.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{Pe=yt.stateNode;var us=yt.memoizedProps.style,$t=us!=null&&us.hasOwnProperty("display")?us.display:null;Pe.style.display=$t==null||typeof $t=="boolean"?"":(""+$t).trim()}}catch(Hs){br(yt,yt.return,Hs)}}}else if(d.tag===6){if(f===null){yt=d;try{yt.stateNode.nodeValue=D?"":yt.memoizedProps}catch(Hs){br(yt,yt.return,Hs)}}}else if(d.tag===18){if(f===null){yt=d;try{var Ht=yt.stateNode;D?l5(Ht,!0):l5(yt.stateNode,!1)}catch(Hs){br(yt,yt.return,Hs)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}x&4&&(x=l.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,sx(l,f))));break;case 19:fl(d,l),ml(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,sx(l,x)));break;case 30:break;case 21:break;default:fl(d,l),ml(l)}}function ml(l){var d=l.flags;if(d&2){try{for(var f,x=l.return;x!==null;){if(cv(x)){f=x;break}x=x.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var D=f.stateNode,O=Ry(l);tx(l,O,D);break;case 5:var oe=f.stateNode;f.flags&32&&(it(oe,""),f.flags&=-33);var Pe=Ry(l);tx(l,Pe,oe);break;case 3:case 4:var yt=f.stateNode.containerInfo,Qt=Ry(l);Ty(l,Qt,yt);break;default:throw Error(r(161))}}catch(ns){br(l,l.return,ns)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function pv(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;pv(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function sd(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)hv(l,d.alternate,d),d=d.sibling}function xh(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Jd(4,d,d.return),xh(d);break;case 1:bc(d,d.return);var f=d.stateNode;typeof f.componentWillUnmount=="function"&&lv(d,d.return,f),xh(d);break;case 27:eg(d.stateNode);case 26:case 5:bc(d,d.return),xh(d);break;case 22:d.memoizedState===null&&xh(d);break;case 30:xh(d);break;default:xh(d)}l=l.sibling}}function nd(l,d,f){for(f=f&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var x=d.alternate,D=l,O=d,oe=O.flags;switch(O.tag){case 0:case 11:case 15:nd(D,O,f),Qm(4,O);break;case 1:if(nd(D,O,f),x=O,D=x.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Qt){br(x,x.return,Qt)}if(x=O,D=x.updateQueue,D!==null){var Pe=x.stateNode;try{var yt=D.shared.hiddenCallbacks;if(yt!==null)for(D.shared.hiddenCallbacks=null,D=0;D<yt.length;D++)la(yt[D],Pe)}catch(Qt){br(x,x.return,Qt)}}f&&oe&64&&av(O),Ym(O,O.return);break;case 27:dv(O);case 26:case 5:nd(D,O,f),f&&x===null&&oe&4&&ov(O),Ym(O,O.return);break;case 12:nd(D,O,f);break;case 31:nd(D,O,f),f&&oe&4&&gv(D,O);break;case 13:nd(D,O,f),f&&oe&4&&_v(D,O);break;case 22:O.memoizedState===null&&nd(D,O,f),Ym(O,O.return);break;case 30:break;default:nd(D,O,f)}d=d.sibling}}function Iy(l,d){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&hh(f))}function jy(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&hh(l))}function Yo(l,d,f,x){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)yv(l,d,f,x),d=d.sibling}function yv(l,d,f,x){var D=d.flags;switch(d.tag){case 0:case 11:case 15:Yo(l,d,f,x),D&2048&&Qm(9,d);break;case 1:Yo(l,d,f,x);break;case 3:Yo(l,d,f,x),D&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&hh(l)));break;case 12:if(D&2048){Yo(l,d,f,x),l=d.stateNode;try{var O=d.memoizedProps,oe=O.id,Pe=O.onPostCommit;typeof Pe=="function"&&Pe(oe,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(yt){br(d,d.return,yt)}}else Yo(l,d,f,x);break;case 31:Yo(l,d,f,x);break;case 13:Yo(l,d,f,x);break;case 23:break;case 22:O=d.stateNode,oe=d.alternate,d.memoizedState!==null?O._visibility&2?Yo(l,d,f,x):$m(l,d):O._visibility&2?Yo(l,d,f,x):(O._visibility|=2,K0(l,d,f,x,(d.subtreeFlags&10256)!==0||!1)),D&2048&&Iy(oe,d);break;case 24:Yo(l,d,f,x),D&2048&&jy(d.alternate,d);break;default:Yo(l,d,f,x)}}function K0(l,d,f,x,D){for(D=D&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var O=l,oe=d,Pe=f,yt=x,Qt=oe.flags;switch(oe.tag){case 0:case 11:case 15:K0(O,oe,Pe,yt,D),Qm(8,oe);break;case 23:break;case 22:var ns=oe.stateNode;oe.memoizedState!==null?ns._visibility&2?K0(O,oe,Pe,yt,D):$m(O,oe):(ns._visibility|=2,K0(O,oe,Pe,yt,D)),D&&Qt&2048&&Iy(oe.alternate,oe);break;case 24:K0(O,oe,Pe,yt,D),D&&Qt&2048&&jy(oe.alternate,oe);break;default:K0(O,oe,Pe,yt,D)}d=d.sibling}}function $m(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var f=l,x=d,D=x.flags;switch(x.tag){case 22:$m(f,x),D&2048&&Iy(x.alternate,x);break;case 24:$m(f,x),D&2048&&jy(x.alternate,x);break;default:$m(f,x)}d=d.sibling}}var Vm=8192;function Q0(l,d,f){if(l.subtreeFlags&Vm)for(l=l.child;l!==null;)bv(l,d,f),l=l.sibling}function bv(l,d,f){switch(l.tag){case 26:Q0(l,d,f),l.flags&Vm&&l.memoizedState!==null&&M3(f,Qo,l.memoizedState,l.memoizedProps);break;case 5:Q0(l,d,f);break;case 3:case 4:var x=Qo;Qo=_x(l.stateNode.containerInfo),Q0(l,d,f),Qo=x;break;case 22:l.memoizedState===null&&(x=l.alternate,x!==null&&x.memoizedState!==null?(x=Vm,Vm=16777216,Q0(l,d,f),Vm=x):Q0(l,d,f));break;default:Q0(l,d,f)}}function Cv(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function zm(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var x=d[f];ca=x,Sv(x,l)}Cv(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Nv(l),l=l.sibling}function Nv(l){switch(l.tag){case 0:case 11:case 15:zm(l),l.flags&2048&&Jd(9,l,l.return);break;case 3:zm(l);break;case 12:zm(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,nx(l)):zm(l);break;default:zm(l)}}function nx(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var x=d[f];ca=x,Sv(x,l)}Cv(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Jd(8,d,d.return),nx(d);break;case 22:f=d.stateNode,f._visibility&2&&(f._visibility&=-3,nx(d));break;default:nx(d)}l=l.sibling}}function Sv(l,d){for(;ca!==null;){var f=ca;switch(f.tag){case 0:case 11:case 15:Jd(8,f,d);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:hh(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,ca=x;else e:for(f=l;ca!==null;){x=ca;var D=x.sibling,O=x.return;if(fv(x),x===f){ca=null;break e}if(D!==null){D.return=O,ca=D;break e}ca=O}}}var QO={getCacheForType:function(l){var d=$i(ai),f=d.data.get(l);return f===void 0&&(f=l(),d.data.set(l,f)),f},cacheSignal:function(){return $i(ai).controller.signal}},YO=typeof WeakMap=="function"?WeakMap:Map,or=0,wr=null,An=null,Bn=0,yr=0,Ul=null,Zd=!1,Y0=!1,Oy=!1,rd=0,_i=0,eu=0,ph=0,wy=0,Bl=0,$0=0,Hm=null,gl=null,Ly=!1,rx=0,vv=0,ix=1/0,ax=null,tu=null,zi=0,su=null,V0=null,id=0,Py=0,Ay=null,Ev=null,qm=0,ky=null;function Gl(){return(or&2)!==0&&Bn!==0?Bn&-Bn:$.T!==null?Ky():Vt()}function Dv(){if(Bl===0)if((Bn&536870912)===0||Pn){var l=De;De<<=1,(De&3932160)===0&&(De=262144),Bl=l}else Bl=536870912;return l=Kr.current,l!==null&&(l.flags|=32),Bl}function _l(l,d,f){(l===wr&&(yr===2||yr===9)||l.cancelPendingCommit!==null)&&(z0(l,0),nu(l,Bn,Bl,!1)),Le(l,f),((or&2)===0||l!==wr)&&(l===wr&&((or&2)===0&&(ph|=f),_i===4&&nu(l,Bn,Bl,!1)),Cc(l))}function Rv(l,d,f){if((or&6)!==0)throw Error(r(327));var x=!f&&(d&127)===0&&(d&l.expiredLanes)===0||Ue(l,d),D=x?zO(l,d):By(l,d,!0),O=x;do{if(D===0){Y0&&!x&&nu(l,d,0,!1);break}else{if(f=l.current.alternate,O&&!$O(f)){D=By(l,d,!1),O=!1;continue}if(D===2){if(O=d,l.errorRecoveryDisabledLanes&O)var oe=0;else oe=l.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){d=oe;e:{var Pe=l;D=Hm;var yt=Pe.current.memoizedState.isDehydrated;if(yt&&(z0(Pe,oe).flags|=256),oe=By(Pe,oe,!1),oe!==2){if(Oy&&!yt){Pe.errorRecoveryDisabledLanes|=O,ph|=O,D=4;break e}O=gl,gl=D,O!==null&&(gl===null?gl=O:gl.push.apply(gl,O))}D=oe}if(O=!1,D!==2)continue}}if(D===1){z0(l,0),nu(l,d,0,!0);break}e:{switch(x=l,O=D,O){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:nu(x,d,Bl,!Zd);break e;case 2:gl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(D=rx+300-ze(),10<D)){if(nu(x,d,Bl,!Zd),ye(x,0,!0)!==0)break e;id=d,x.timeoutHandle=r5(Tv.bind(null,x,f,gl,ax,Ly,d,Bl,ph,$0,Zd,O,"Throttled",-0,0),D);break e}Tv(x,f,gl,ax,Ly,d,Bl,ph,$0,Zd,O,null,-0,0)}}break}while(!0);Cc(l)}function Tv(l,d,f,x,D,O,oe,Pe,yt,Qt,ns,us,$t,Ht){if(l.timeoutHandle=-1,us=d.subtreeFlags,us&8192||(us&16785408)===16785408){us={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ms},bv(d,O,us);var Hs=(O&62914560)===O?rx-ze():(O&4194048)===O?vv-ze():0;if(Hs=I3(us,Hs),Hs!==null){id=O,l.cancelPendingCommit=Hs(Av.bind(null,l,d,O,f,x,D,oe,Pe,yt,ns,us,null,$t,Ht)),nu(l,O,oe,!Qt);return}}Av(l,d,O,f,x,D,oe,Pe,yt)}function $O(l){for(var d=l;;){var f=d.tag;if((f===0||f===11||f===15)&&d.flags&16384&&(f=d.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var D=f[x],O=D.getSnapshot;D=D.value;try{if(!Fi(O(),D))return!1}catch{return!1}}if(f=d.child,d.subtreeFlags&16384&&f!==null)f.return=d,d=f;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function nu(l,d,f,x){d&=~wy,d&=~ph,l.suspendedLanes|=d,l.pingedLanes&=~d,x&&(l.warmLanes|=d),x=l.expirationTimes;for(var D=d;0<D;){var O=31-tt(D),oe=1<<O;x[O]=-1,D&=~oe}f!==0&&je(l,f,d)}function lx(){return(or&6)===0?(Xm(0),!1):!0}function Uy(){if(An!==null){if(yr===0)var l=An.return;else l=An,Jl=hc=null,A0(l),hs=null,qs=0,l=An;for(;l!==null;)iv(l.alternate,l),l=l.return;An=null}}function z0(l,d){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,h3(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),id=0,Uy(),wr=l,An=f=rl(l.current,null),Bn=d,yr=0,Ul=null,Zd=!1,Y0=Ue(l,d),Oy=!1,$0=Bl=wy=ph=eu=_i=0,gl=Hm=null,Ly=!1,(d&8)!==0&&(d|=d&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=d;0<x;){var D=31-tt(x),O=1<<D;d|=l[D],x&=~O}return rd=d,ah(),f}function Mv(l,d){rn=null,$.H=Wm,d===Dt||d===qe?(d=is(),yr=3):d===Gt?(d=is(),yr=4):yr=d===_y?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ul=d,An===null&&(_i=1,q_(l,il(d,l.current)))}function Iv(){var l=Kr.current;return l===null?!0:(Bn&4194048)===Bn?zn===null:(Bn&62914560)===Bn||(Bn&536870912)!==0?l===zn:!1}function jv(){var l=$.H;return $.H=Wm,l===null?Wm:l}function Ov(){var l=$.A;return $.A=QO,l}function ox(){_i=4,Zd||(Bn&4194048)!==Bn&&Kr.current!==null||(Y0=!0),(eu&134217727)===0&&(ph&134217727)===0||wr===null||nu(wr,Bn,Bl,!1)}function By(l,d,f){var x=or;or|=2;var D=jv(),O=Ov();(wr!==l||Bn!==d)&&(ax=null,z0(l,d)),d=!1;var oe=_i;e:do try{if(yr!==0&&An!==null){var Pe=An,yt=Ul;switch(yr){case 8:Uy(),oe=6;break e;case 3:case 2:case 9:case 6:Kr.current===null&&(d=!0);var Qt=yr;if(yr=0,Ul=null,H0(l,Pe,yt,Qt),f&&Y0){oe=0;break e}break;default:Qt=yr,yr=0,Ul=null,H0(l,Pe,yt,Qt)}}VO(),oe=_i;break}catch(ns){Mv(l,ns)}while(!0);return d&&l.shellSuspendCounter++,Jl=hc=null,or=x,$.H=D,$.A=O,An===null&&(wr=null,Bn=0,ah()),oe}function VO(){for(;An!==null;)wv(An)}function zO(l,d){var f=or;or|=2;var x=jv(),D=Ov();wr!==l||Bn!==d?(ax=null,ix=ze()+500,z0(l,d)):Y0=Ue(l,d);e:do try{if(yr!==0&&An!==null){d=An;var O=Ul;t:switch(yr){case 1:yr=0,Ul=null,H0(l,d,O,1);break;case 2:case 9:if(At(O)){yr=0,Ul=null,Lv(d);break}d=function(){yr!==2&&yr!==9||wr!==l||(yr=7),Cc(l)},O.then(d,d);break e;case 3:yr=7;break e;case 4:yr=5;break e;case 7:At(O)?(yr=0,Ul=null,Lv(d)):(yr=0,Ul=null,H0(l,d,O,7));break;case 5:var oe=null;switch(An.tag){case 26:oe=An.memoizedState;case 5:case 27:var Pe=An;if(oe?y5(oe):Pe.stateNode.complete){yr=0,Ul=null;var yt=Pe.sibling;if(yt!==null)An=yt;else{var Qt=Pe.return;Qt!==null?(An=Qt,cx(Qt)):An=null}break t}}yr=0,Ul=null,H0(l,d,O,5);break;case 6:yr=0,Ul=null,H0(l,d,O,6);break;case 8:Uy(),_i=6;break e;default:throw Error(r(462))}}HO();break}catch(ns){Mv(l,ns)}while(!0);return Jl=hc=null,$.H=x,$.A=D,or=f,An!==null?0:(wr=null,Bn=0,ah(),_i)}function HO(){for(;An!==null&&!ie();)wv(An)}function wv(l){var d=nv(l.alternate,l,rd);l.memoizedProps=l.pendingProps,d===null?cx(l):An=d}function Lv(l){var d=l,f=d.alternate;switch(d.tag){case 15:case 0:d=XS(f,d,d.pendingProps,d.type,void 0,Bn);break;case 11:d=XS(f,d,d.pendingProps,d.type.render,d.ref,Bn);break;case 5:A0(d);default:iv(f,d),d=An=ch(d,rd),d=nv(f,d,rd)}l.memoizedProps=l.pendingProps,d===null?cx(l):An=d}function H0(l,d,f,x){Jl=hc=null,A0(d),hs=null,qs=0;var D=d.return;try{if(kO(l,D,d,f,Bn)){_i=1,q_(l,il(f,l.current)),An=null;return}}catch(O){if(D!==null)throw An=D,O;_i=1,q_(l,il(f,l.current)),An=null;return}d.flags&32768?(Pn||x===1?l=!0:Y0||(Bn&536870912)!==0?l=!1:(Zd=l=!0,(x===2||x===9||x===3||x===6)&&(x=Kr.current,x!==null&&x.tag===13&&(x.flags|=16384))),Pv(d,l)):cx(d)}function cx(l){var d=l;do{if((d.flags&32768)!==0){Pv(d,Zd);return}l=d.return;var f=GO(d.alternate,d,rd);if(f!==null){An=f;return}if(d=d.sibling,d!==null){An=d;return}An=d=l}while(d!==null);_i===0&&(_i=5)}function Pv(l,d){do{var f=WO(l.alternate,l);if(f!==null){f.flags&=32767,An=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!d&&(l=l.sibling,l!==null)){An=l;return}An=l=f}while(l!==null);_i=6,An=null}function Av(l,d,f,x,D,O,oe,Pe,yt){l.cancelPendingCommit=null;do dx();while(zi!==0);if((or&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(O=d.lanes|d.childLanes,O|=N0,vt(l,f,O,oe,Pe,yt),l===wr&&(An=wr=null,Bn=0),V0=d,su=l,id=f,Py=O,Ay=D,Ev=x,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,ZO(ot,function(){return Wv(),null})):(l.callbackNode=null,l.callbackPriority=0),x=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||x){x=$.T,$.T=null,D=F.p,F.p=2,oe=or,or|=4;try{FO(l,d,f)}finally{or=oe,F.p=D,$.T=x}}zi=1,kv(),Uv(),Bv()}}function kv(){if(zi===1){zi=0;var l=su,d=V0,f=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||f){f=$.T,$.T=null;var x=F.p;F.p=2;var D=or;or|=4;try{xv(d,l);var O=Xy,oe=Ao(l.containerInfo),Pe=O.focusedElem,yt=O.selectionRange;if(oe!==Pe&&Pe&&Pe.ownerDocument&&Po(Pe.ownerDocument.documentElement,Pe)){if(yt!==null&&ql(Pe)){var Qt=yt.start,ns=yt.end;if(ns===void 0&&(ns=Qt),"selectionStart"in Pe)Pe.selectionStart=Qt,Pe.selectionEnd=Math.min(ns,Pe.value.length);else{var us=Pe.ownerDocument||document,$t=us&&us.defaultView||window;if($t.getSelection){var Ht=$t.getSelection(),Hs=Pe.textContent.length,fn=Math.min(yt.start,Hs),Tr=yt.end===void 0?fn:Math.min(yt.end,Hs);!Ht.extend&&fn>Tr&&(oe=Tr,Tr=fn,fn=oe);var Lt=Wd(Pe,fn),Tt=Wd(Pe,Tr);if(Lt&&Tt&&(Ht.rangeCount!==1||Ht.anchorNode!==Lt.node||Ht.anchorOffset!==Lt.offset||Ht.focusNode!==Tt.node||Ht.focusOffset!==Tt.offset)){var Kt=us.createRange();Kt.setStart(Lt.node,Lt.offset),Ht.removeAllRanges(),fn>Tr?(Ht.addRange(Kt),Ht.extend(Tt.node,Tt.offset)):(Kt.setEnd(Tt.node,Tt.offset),Ht.addRange(Kt))}}}}for(us=[],Ht=Pe;Ht=Ht.parentNode;)Ht.nodeType===1&&us.push({element:Ht,left:Ht.scrollLeft,top:Ht.scrollTop});for(typeof Pe.focus=="function"&&Pe.focus(),Pe=0;Pe<us.length;Pe++){var os=us[Pe];os.element.scrollLeft=os.left,os.element.scrollTop=os.top}}Nx=!!qy,Xy=qy=null}finally{or=D,F.p=x,$.T=f}}l.current=d,zi=2}}function Uv(){if(zi===2){zi=0;var l=su,d=V0,f=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||f){f=$.T,$.T=null;var x=F.p;F.p=2;var D=or;or|=4;try{hv(l,d.alternate,d)}finally{or=D,F.p=x,$.T=f}}zi=3}}function Bv(){if(zi===4||zi===3){zi=0,pe();var l=su,d=V0,f=id,x=Ev;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?zi=5:(zi=0,V0=su=null,Gv(l,l.pendingLanes));var D=l.pendingLanes;if(D===0&&(tu=null),Ve(f),d=d.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Ye,d,void 0,(d.current.flags&128)===128)}catch{}if(x!==null){d=$.T,D=F.p,F.p=2,$.T=null;try{for(var O=l.onRecoverableError,oe=0;oe<x.length;oe++){var Pe=x[oe];O(Pe.value,{componentStack:Pe.stack})}}finally{$.T=d,F.p=D}}(id&3)!==0&&dx(),Cc(l),D=l.pendingLanes,(f&261930)!==0&&(D&42)!==0?l===ky?qm++:(qm=0,ky=l):qm=0,Xm(0)}}function Gv(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,hh(d)))}function dx(){return kv(),Uv(),Bv(),Wv()}function Wv(){if(zi!==5)return!1;var l=su,d=Py;Py=0;var f=Ve(id),x=$.T,D=F.p;try{F.p=32>f?32:f,$.T=null,f=Ay,Ay=null;var O=su,oe=id;if(zi=0,V0=su=null,id=0,(or&6)!==0)throw Error(r(331));var Pe=or;if(or|=4,Nv(O.current),yv(O,O.current,oe,f),or=Pe,Xm(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Ye,O)}catch{}return!0}finally{F.p=D,$.T=x,Gv(l,d)}}function Fv(l,d,f){d=il(f,d),d=gy(l.stateNode,d,2),l=Dn(l,d,2),l!==null&&(Le(l,2),Cc(l))}function br(l,d,f){if(l.tag===3)Fv(l,l,f);else for(;d!==null;){if(d.tag===3){Fv(d,l,f);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(tu===null||!tu.has(x))){l=il(f,l),f=KS(2),x=Dn(d,f,2),x!==null&&(QS(f,x,d,l),Le(x,2),Cc(x));break}}d=d.return}}function Gy(l,d,f){var x=l.pingCache;if(x===null){x=l.pingCache=new YO;var D=new Set;x.set(d,D)}else D=x.get(d),D===void 0&&(D=new Set,x.set(d,D));D.has(f)||(Oy=!0,D.add(f),l=qO.bind(null,l,d,f),d.then(l,l))}function qO(l,d,f){var x=l.pingCache;x!==null&&x.delete(d),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,wr===l&&(Bn&f)===f&&(_i===4||_i===3&&(Bn&62914560)===Bn&&300>ze()-rx?(or&2)===0&&z0(l,0):wy|=f,$0===Bn&&($0=0)),Cc(l)}function Kv(l,d){d===0&&(d=Oe()),l=Uo(l,d),l!==null&&(Le(l,d),Cc(l))}function XO(l){var d=l.memoizedState,f=0;d!==null&&(f=d.retryLane),Kv(l,f)}function JO(l,d){var f=0;switch(l.tag){case 31:case 13:var x=l.stateNode,D=l.memoizedState;D!==null&&(f=D.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(d),Kv(l,f)}function ZO(l,d){return be(l,d)}var ux=null,q0=null,Wy=!1,hx=!1,Fy=!1,ru=0;function Cc(l){l!==q0&&l.next===null&&(q0===null?ux=q0=l:q0=q0.next=l),hx=!0,Wy||(Wy=!0,t3())}function Xm(l,d){if(!Fy&&hx){Fy=!0;do for(var f=!1,x=ux;x!==null;){if(l!==0){var D=x.pendingLanes;if(D===0)var O=0;else{var oe=x.suspendedLanes,Pe=x.pingedLanes;O=(1<<31-tt(42|l)+1)-1,O&=D&~(oe&~Pe),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(f=!0,Vv(x,O))}else O=Bn,O=ye(x,x===wr?O:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(O&3)===0||Ue(x,O)||(f=!0,Vv(x,O));x=x.next}while(f);Fy=!1}}function e3(){Qv()}function Qv(){hx=Wy=!1;var l=0;ru!==0&&u3()&&(l=ru);for(var d=ze(),f=null,x=ux;x!==null;){var D=x.next,O=Yv(x,d);O===0?(x.next=null,f===null?ux=D:f.next=D,D===null&&(q0=f)):(f=x,(l!==0||(O&3)!==0)&&(hx=!0)),x=D}zi!==0&&zi!==5||Xm(l),ru!==0&&(ru=0)}function Yv(l,d){for(var f=l.suspendedLanes,x=l.pingedLanes,D=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var oe=31-tt(O),Pe=1<<oe,yt=D[oe];yt===-1?((Pe&f)===0||(Pe&x)!==0)&&(D[oe]=ue(Pe,d)):yt<=d&&(l.expiredLanes|=Pe),O&=~Pe}if(d=wr,f=Bn,f=ye(l,l===d?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x=l.callbackNode,f===0||l===d&&(yr===2||yr===9)||l.cancelPendingCommit!==null)return x!==null&&x!==null&&ne(x),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Ue(l,f)){if(d=f&-f,d===l.callbackPriority)return d;switch(x!==null&&ne(x),Ve(f)){case 2:case 8:f=St;break;case 32:f=ot;break;case 268435456:f=lt;break;default:f=ot}return x=$v.bind(null,l),f=be(f,x),l.callbackPriority=d,l.callbackNode=f,d}return x!==null&&x!==null&&ne(x),l.callbackPriority=2,l.callbackNode=null,2}function $v(l,d){if(zi!==0&&zi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(dx()&&l.callbackNode!==f)return null;var x=Bn;return x=ye(l,l===wr?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x===0?null:(Rv(l,x,d),Yv(l,ze()),l.callbackNode!=null&&l.callbackNode===f?$v.bind(null,l):null)}function Vv(l,d){if(dx())return null;Rv(l,d,!0)}function t3(){f3(function(){(or&6)!==0?be(st,e3):Qv()})}function Ky(){if(ru===0){var l=S;l===0&&(l=Je,Je<<=1,(Je&261888)===0&&(Je=256)),ru=l}return ru}function zv(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:As(""+l)}function Hv(l,d){var f=d.ownerDocument.createElement("input");return f.name=d.name,f.value=d.value,l.id&&f.setAttribute("form",l.id),d.parentNode.insertBefore(f,d),l=new FormData(l),f.parentNode.removeChild(f),l}function s3(l,d,f,x,D){if(d==="submit"&&f&&f.stateNode===D){var O=zv((D[ds]||null).action),oe=x.submitter;oe&&(d=(d=oe[ds]||null)?zv(d.formAction):oe.getAttribute("formAction"),d!==null&&(O=d,oe=null));var Pe=new $n("action","action",null,x,D);l.push({event:Pe,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(ru!==0){var yt=oe?Hv(D,oe):new FormData(D);cy(f,{pending:!0,data:yt,method:D.method,action:O},null,yt)}}else typeof O=="function"&&(Pe.preventDefault(),yt=oe?Hv(D,oe):new FormData(D),cy(f,{pending:!0,data:yt,method:D.method,action:O},O,yt))},currentTarget:D}]})}}for(var Qy=0;Qy<Qc.length;Qy++){var Yy=Qc[Qy],n3=Yy.toLowerCase(),r3=Yy[0].toUpperCase()+Yy.slice(1);nl(n3,"on"+r3)}nl(Kc,"onAnimationEnd"),nl(rh,"onAnimationIteration"),nl(Dm,"onAnimationStart"),nl("dblclick","onDoubleClick"),nl("focusin","onFocus"),nl("focusout","onBlur"),nl(k_,"onTransitionRun"),nl(U_,"onTransitionStart"),nl(B_,"onTransitionCancel"),nl(Rm,"onTransitionEnd"),Ct("onMouseEnter",["mouseout","mouseover"]),Ct("onMouseLeave",["mouseout","mouseover"]),Ct("onPointerEnter",["pointerout","pointerover"]),Ct("onPointerLeave",["pointerout","pointerover"]),Re("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Re("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Re("onBeforeInput",["compositionend","keypress","textInput","paste"]),Re("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jm));function qv(l,d){d=(d&4)!==0;for(var f=0;f<l.length;f++){var x=l[f],D=x.event;x=x.listeners;e:{var O=void 0;if(d)for(var oe=x.length-1;0<=oe;oe--){var Pe=x[oe],yt=Pe.instance,Qt=Pe.currentTarget;if(Pe=Pe.listener,yt!==O&&D.isPropagationStopped())break e;O=Pe,D.currentTarget=Qt;try{O(D)}catch(ns){ih(ns)}D.currentTarget=null,O=yt}else for(oe=0;oe<x.length;oe++){if(Pe=x[oe],yt=Pe.instance,Qt=Pe.currentTarget,Pe=Pe.listener,yt!==O&&D.isPropagationStopped())break e;O=Pe,D.currentTarget=Qt;try{O(D)}catch(ns){ih(ns)}D.currentTarget=null,O=yt}}}}function kn(l,d){var f=d[Ss];f===void 0&&(f=d[Ss]=new Set);var x=l+"__bubble";f.has(x)||(Xv(d,l,2,!1),f.add(x))}function $y(l,d,f){var x=0;d&&(x|=4),Xv(f,l,x,d)}var fx="_reactListening"+Math.random().toString(36).slice(2);function Vy(l){if(!l[fx]){l[fx]=!0,Te.forEach(function(f){f!=="selectionchange"&&(i3.has(f)||$y(f,!1,l),$y(f,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[fx]||(d[fx]=!0,$y("selectionchange",!1,d))}}function Xv(l,d,f,x){switch(D5(d)){case 2:var D=w3;break;case 8:D=L3;break;default:D=ob}f=D.bind(null,d,f,l),D=void 0,!fr||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(D=!0),x?D!==void 0?l.addEventListener(d,f,{capture:!0,passive:D}):l.addEventListener(d,f,!0):D!==void 0?l.addEventListener(d,f,{passive:D}):l.addEventListener(d,f,!1)}function zy(l,d,f,x,D){var O=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var oe=x.tag;if(oe===3||oe===4){var Pe=x.stateNode.containerInfo;if(Pe===D)break;if(oe===4)for(oe=x.return;oe!==null;){var yt=oe.tag;if((yt===3||yt===4)&&oe.stateNode.containerInfo===D)return;oe=oe.return}for(;Pe!==null;){if(oe=qt(Pe),oe===null)return;if(yt=oe.tag,yt===5||yt===6||yt===26||yt===27){x=O=oe;continue e}Pe=Pe.parentNode}}x=x.return}ti(function(){var Qt=O,ns=$s(f),us=[];e:{var $t=Tm.get(l);if($t!==void 0){var Ht=$n,Hs=l;switch(l){case"keypress":if(Ir(f)===0)break e;case"keydown":case"keyup":Ht=Fn;break;case"focusin":Hs="focus",Ht=Ro;break;case"focusout":Hs="blur",Ht=Ro;break;case"beforeblur":case"afterblur":Ht=Ro;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ht=zr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ht=Gi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ht=Ci;break;case Kc:case rh:case Dm:Ht=W;break;case Rm:Ht=Wi;break;case"scroll":case"scrollend":Ht=Ii;break;case"wheel":Ht=Ol;break;case"copy":case"cut":case"paste":Ht=et;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ht=ni;break;case"toggle":case"beforetoggle":Ht=th}var fn=(d&4)!==0,Tr=!fn&&(l==="scroll"||l==="scrollend"),Lt=fn?$t!==null?$t+"Capture":null:$t;fn=[];for(var Tt=Qt,Kt;Tt!==null;){var os=Tt;if(Kt=os.stateNode,os=os.tag,os!==5&&os!==26&&os!==27||Kt===null||Lt===null||(os=Mr(Tt,Lt),os!=null&&fn.push(Zm(Tt,os,Kt))),Tr)break;Tt=Tt.return}0<fn.length&&($t=new Ht($t,Hs,null,f,ns),us.push({event:$t,listeners:fn}))}}if((d&7)===0){e:{if($t=l==="mouseover"||l==="pointerover",Ht=l==="mouseout"||l==="pointerout",$t&&f!==Ws&&(Hs=f.relatedTarget||f.fromElement)&&(qt(Hs)||Hs[vs]))break e;if((Ht||$t)&&($t=ns.window===ns?ns:($t=ns.ownerDocument)?$t.defaultView||$t.parentWindow:window,Ht?(Hs=f.relatedTarget||f.toElement,Ht=Qt,Hs=Hs?qt(Hs):null,Hs!==null&&(Tr=a(Hs),fn=Hs.tag,Hs!==Tr||fn!==5&&fn!==27&&fn!==6)&&(Hs=null)):(Ht=null,Hs=Qt),Ht!==Hs)){if(fn=zr,os="onMouseLeave",Lt="onMouseEnter",Tt="mouse",(l==="pointerout"||l==="pointerover")&&(fn=ni,os="onPointerLeave",Lt="onPointerEnter",Tt="pointer"),Tr=Ht==null?$t:_e(Ht),Kt=Hs==null?$t:_e(Hs),$t=new fn(os,Tt+"leave",Ht,f,ns),$t.target=Tr,$t.relatedTarget=Kt,os=null,qt(ns)===Qt&&(fn=new fn(Lt,Tt+"enter",Hs,f,ns),fn.target=Kt,fn.relatedTarget=Tr,os=fn),Tr=os,Ht&&Hs)t:{for(fn=a3,Lt=Ht,Tt=Hs,Kt=0,os=Lt;os;os=fn(os))Kt++;os=0;for(var on=Tt;on;on=fn(on))os++;for(;0<Kt-os;)Lt=fn(Lt),Kt--;for(;0<os-Kt;)Tt=fn(Tt),os--;for(;Kt--;){if(Lt===Tt||Tt!==null&&Lt===Tt.alternate){fn=Lt;break t}Lt=fn(Lt),Tt=fn(Tt)}fn=null}else fn=null;Ht!==null&&Jv(us,$t,Ht,fn,!1),Hs!==null&&Tr!==null&&Jv(us,Tr,Hs,fn,!0)}}e:{if($t=Qt?_e(Qt):window,Ht=$t.nodeName&&$t.nodeName.toLowerCase(),Ht==="select"||Ht==="input"&&$t.type==="file")var er=oc;else if(sh($t))if(Ma)er=zl;else{er=ri;var tn=Bd}else Ht=$t.nodeName,!Ht||Ht.toLowerCase()!=="input"||$t.type!=="checkbox"&&$t.type!=="radio"?Qt&&ws(Qt.elementType)&&(er=oc):er=C0;if(er&&(er=er(l,Qt))){Wa(us,er,f,ns);break e}tn&&tn(l,$t,Qt),l==="focusout"&&Qt&&$t.type==="number"&&Qt.memoizedProps.value!=null&&cs($t,"number",$t.value)}switch(tn=Qt?_e(Qt):window,l){case"focusin":(sh(tn)||tn.contentEditable==="true")&&(Fa=tn,ko=Qt,ra=null);break;case"focusout":ra=ko=Fa=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,Jn(us,f,ns);break;case"selectionchange":if(Fc)break;case"keydown":case"keyup":Jn(us,f,ns)}var Tn;if(Ql)e:{switch(l){case"compositionstart":var Gn="onCompositionStart";break e;case"compositionend":Gn="onCompositionEnd";break e;case"compositionupdate":Gn="onCompositionUpdate";break e}Gn=void 0}else Yl?lc(l,f)&&(Gn="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Gn="onCompositionStart");Gn&&(Io&&f.locale!=="ko"&&(Yl||Gn!=="onCompositionStart"?Gn==="onCompositionEnd"&&Yl&&(Tn=na()):(Vr=ns,sa="value"in Vr?Vr.value:Vr.textContent,Yl=!0)),tn=mx(Qt,Gn),0<tn.length&&(Gn=new wt(Gn,l,null,f,ns),us.push({event:Gn,listeners:tn}),Tn?Gn.data=Tn:(Tn=Ad(f),Tn!==null&&(Gn.data=Tn)))),(Tn=Wc?pa(l,f):jo(l,f))&&(Gn=mx(Qt,"onBeforeInput"),0<Gn.length&&(tn=new wt("onBeforeInput","beforeinput",null,f,ns),us.push({event:tn,listeners:Gn}),tn.data=Tn)),s3(us,l,Qt,f,ns)}qv(us,d)})}function Zm(l,d,f){return{instance:l,listener:d,currentTarget:f}}function mx(l,d){for(var f=d+"Capture",x=[];l!==null;){var D=l,O=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||O===null||(D=Mr(l,f),D!=null&&x.unshift(Zm(l,D,O)),D=Mr(l,d),D!=null&&x.push(Zm(l,D,O))),l.tag===3)return x;l=l.return}return[]}function a3(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Jv(l,d,f,x,D){for(var O=d._reactName,oe=[];f!==null&&f!==x;){var Pe=f,yt=Pe.alternate,Qt=Pe.stateNode;if(Pe=Pe.tag,yt!==null&&yt===x)break;Pe!==5&&Pe!==26&&Pe!==27||Qt===null||(yt=Qt,D?(Qt=Mr(f,O),Qt!=null&&oe.unshift(Zm(f,Qt,yt))):D||(Qt=Mr(f,O),Qt!=null&&oe.push(Zm(f,Qt,yt)))),f=f.return}oe.length!==0&&l.push({event:d,listeners:oe})}var l3=/\r\n?/g,o3=/\u0000|\uFFFD/g;function Zv(l){return(typeof l=="string"?l:""+l).replace(l3,`
`).replace(o3,"")}function e5(l,d){return d=Zv(d),Zv(l)===d}function Rr(l,d,f,x,D,O){switch(f){case"children":typeof x=="string"?d==="body"||d==="textarea"&&x===""||it(l,x):(typeof x=="number"||typeof x=="bigint")&&d!=="body"&&it(l,""+x);break;case"className":Pt(l,"class",x);break;case"tabIndex":Pt(l,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Pt(l,f,x);break;case"style":zt(l,x,O);break;case"data":if(d!=="object"){Pt(l,"data",x);break}case"src":case"href":if(x===""&&(d!=="a"||f!=="href")){l.removeAttribute(f);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(f);break}x=As(""+x),l.setAttribute(f,x);break;case"action":case"formAction":if(typeof x=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(f==="formAction"?(d!=="input"&&Rr(l,d,"name",D.name,D,null),Rr(l,d,"formEncType",D.formEncType,D,null),Rr(l,d,"formMethod",D.formMethod,D,null),Rr(l,d,"formTarget",D.formTarget,D,null)):(Rr(l,d,"encType",D.encType,D,null),Rr(l,d,"method",D.method,D,null),Rr(l,d,"target",D.target,D,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(f);break}x=As(""+x),l.setAttribute(f,x);break;case"onClick":x!=null&&(l.onclick=ms);break;case"onScroll":x!=null&&kn("scroll",l);break;case"onScrollEnd":x!=null&&kn("scrollend",l);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(f=x.__html,f!=null){if(D.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"multiple":l.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":l.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){l.removeAttribute("xlink:href");break}f=As(""+x),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,""+x):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":x===!0?l.setAttribute(f,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,x):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?l.setAttribute(f,x):l.removeAttribute(f);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?l.removeAttribute(f):l.setAttribute(f,x);break;case"popover":kn("beforetoggle",l),kn("toggle",l),ht(l,"popover",x);break;case"xlinkActuate":Bt(l,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Bt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Bt(l,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Bt(l,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Bt(l,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Bt(l,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Bt(l,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Bt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Bt(l,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":ht(l,"is",x);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=es.get(f)||f,ht(l,f,x))}}function Hy(l,d,f,x,D,O){switch(f){case"style":zt(l,x,O);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(f=x.__html,f!=null){if(D.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"children":typeof x=="string"?it(l,x):(typeof x=="number"||typeof x=="bigint")&&it(l,""+x);break;case"onScroll":x!=null&&kn("scroll",l);break;case"onScrollEnd":x!=null&&kn("scrollend",l);break;case"onClick":x!=null&&(l.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nt.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(D=f.endsWith("Capture"),d=f.slice(2,D?f.length-7:void 0),O=l[ds]||null,O=O!=null?O[f]:null,typeof O=="function"&&l.removeEventListener(d,O,D),typeof x=="function")){typeof O!="function"&&O!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(d,x,D);break e}f in l?l[f]=x:x===!0?l.setAttribute(f,""):ht(l,f,x)}}}function Sa(l,d,f){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kn("error",l),kn("load",l);var x=!1,D=!1,O;for(O in f)if(f.hasOwnProperty(O)){var oe=f[O];if(oe!=null)switch(O){case"src":x=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Rr(l,d,O,oe,f,null)}}D&&Rr(l,d,"srcSet",f.srcSet,f,null),x&&Rr(l,d,"src",f.src,f,null);return;case"input":kn("invalid",l);var Pe=O=oe=D=null,yt=null,Qt=null;for(x in f)if(f.hasOwnProperty(x)){var ns=f[x];if(ns!=null)switch(x){case"name":D=ns;break;case"type":oe=ns;break;case"checked":yt=ns;break;case"defaultChecked":Qt=ns;break;case"value":O=ns;break;case"defaultValue":Pe=ns;break;case"children":case"dangerouslySetInnerHTML":if(ns!=null)throw Error(r(137,d));break;default:Rr(l,d,x,ns,f,null)}}js(l,O,Pe,yt,Qt,oe,D,!1);return;case"select":kn("invalid",l),x=oe=O=null;for(D in f)if(f.hasOwnProperty(D)&&(Pe=f[D],Pe!=null))switch(D){case"value":O=Pe;break;case"defaultValue":oe=Pe;break;case"multiple":x=Pe;default:Rr(l,d,D,Pe,f,null)}d=O,f=oe,l.multiple=!!x,d!=null?fs(l,!!x,d,!1):f!=null&&fs(l,!!x,f,!0);return;case"textarea":kn("invalid",l),O=D=x=null;for(oe in f)if(f.hasOwnProperty(oe)&&(Pe=f[oe],Pe!=null))switch(oe){case"value":x=Pe;break;case"defaultValue":D=Pe;break;case"children":O=Pe;break;case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(r(91));break;default:Rr(l,d,oe,Pe,f,null)}Ls(l,x,D,O);return;case"option":for(yt in f)if(f.hasOwnProperty(yt)&&(x=f[yt],x!=null))switch(yt){case"selected":l.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Rr(l,d,yt,x,f,null)}return;case"dialog":kn("beforetoggle",l),kn("toggle",l),kn("cancel",l),kn("close",l);break;case"iframe":case"object":kn("load",l);break;case"video":case"audio":for(x=0;x<Jm.length;x++)kn(Jm[x],l);break;case"image":kn("error",l),kn("load",l);break;case"details":kn("toggle",l);break;case"embed":case"source":case"link":kn("error",l),kn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qt in f)if(f.hasOwnProperty(Qt)&&(x=f[Qt],x!=null))switch(Qt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Rr(l,d,Qt,x,f,null)}return;default:if(ws(d)){for(ns in f)f.hasOwnProperty(ns)&&(x=f[ns],x!==void 0&&Hy(l,d,ns,x,f,void 0));return}}for(Pe in f)f.hasOwnProperty(Pe)&&(x=f[Pe],x!=null&&Rr(l,d,Pe,x,f,null))}function c3(l,d,f,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,O=null,oe=null,Pe=null,yt=null,Qt=null,ns=null;for(Ht in f){var us=f[Ht];if(f.hasOwnProperty(Ht)&&us!=null)switch(Ht){case"checked":break;case"value":break;case"defaultValue":yt=us;default:x.hasOwnProperty(Ht)||Rr(l,d,Ht,null,x,us)}}for(var $t in x){var Ht=x[$t];if(us=f[$t],x.hasOwnProperty($t)&&(Ht!=null||us!=null))switch($t){case"type":O=Ht;break;case"name":D=Ht;break;case"checked":Qt=Ht;break;case"defaultChecked":ns=Ht;break;case"value":oe=Ht;break;case"defaultValue":Pe=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(r(137,d));break;default:Ht!==us&&Rr(l,d,$t,Ht,x,us)}}Es(l,oe,Pe,yt,Qt,ns,O,D);return;case"select":Ht=oe=Pe=$t=null;for(O in f)if(yt=f[O],f.hasOwnProperty(O)&&yt!=null)switch(O){case"value":break;case"multiple":Ht=yt;default:x.hasOwnProperty(O)||Rr(l,d,O,null,x,yt)}for(D in x)if(O=x[D],yt=f[D],x.hasOwnProperty(D)&&(O!=null||yt!=null))switch(D){case"value":$t=O;break;case"defaultValue":Pe=O;break;case"multiple":oe=O;default:O!==yt&&Rr(l,d,D,O,x,yt)}d=Pe,f=oe,x=Ht,$t!=null?fs(l,!!f,$t,!1):!!x!=!!f&&(d!=null?fs(l,!!f,d,!0):fs(l,!!f,f?[]:"",!1));return;case"textarea":Ht=$t=null;for(Pe in f)if(D=f[Pe],f.hasOwnProperty(Pe)&&D!=null&&!x.hasOwnProperty(Pe))switch(Pe){case"value":break;case"children":break;default:Rr(l,d,Pe,null,x,D)}for(oe in x)if(D=x[oe],O=f[oe],x.hasOwnProperty(oe)&&(D!=null||O!=null))switch(oe){case"value":$t=D;break;case"defaultValue":Ht=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:D!==O&&Rr(l,d,oe,D,x,O)}Ys(l,$t,Ht);return;case"option":for(var Hs in f)if($t=f[Hs],f.hasOwnProperty(Hs)&&$t!=null&&!x.hasOwnProperty(Hs))switch(Hs){case"selected":l.selected=!1;break;default:Rr(l,d,Hs,null,x,$t)}for(yt in x)if($t=x[yt],Ht=f[yt],x.hasOwnProperty(yt)&&$t!==Ht&&($t!=null||Ht!=null))switch(yt){case"selected":l.selected=$t&&typeof $t!="function"&&typeof $t!="symbol";break;default:Rr(l,d,yt,$t,x,Ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in f)$t=f[fn],f.hasOwnProperty(fn)&&$t!=null&&!x.hasOwnProperty(fn)&&Rr(l,d,fn,null,x,$t);for(Qt in x)if($t=x[Qt],Ht=f[Qt],x.hasOwnProperty(Qt)&&$t!==Ht&&($t!=null||Ht!=null))switch(Qt){case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(r(137,d));break;default:Rr(l,d,Qt,$t,x,Ht)}return;default:if(ws(d)){for(var Tr in f)$t=f[Tr],f.hasOwnProperty(Tr)&&$t!==void 0&&!x.hasOwnProperty(Tr)&&Hy(l,d,Tr,void 0,x,$t);for(ns in x)$t=x[ns],Ht=f[ns],!x.hasOwnProperty(ns)||$t===Ht||$t===void 0&&Ht===void 0||Hy(l,d,ns,$t,x,Ht);return}}for(var Lt in f)$t=f[Lt],f.hasOwnProperty(Lt)&&$t!=null&&!x.hasOwnProperty(Lt)&&Rr(l,d,Lt,null,x,$t);for(us in x)$t=x[us],Ht=f[us],!x.hasOwnProperty(us)||$t===Ht||$t==null&&Ht==null||Rr(l,d,us,$t,x,Ht)}function t5(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function d3(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,f=performance.getEntriesByType("resource"),x=0;x<f.length;x++){var D=f[x],O=D.transferSize,oe=D.initiatorType,Pe=D.duration;if(O&&Pe&&t5(oe)){for(oe=0,Pe=D.responseEnd,x+=1;x<f.length;x++){var yt=f[x],Qt=yt.startTime;if(Qt>Pe)break;var ns=yt.transferSize,us=yt.initiatorType;ns&&t5(us)&&(yt=yt.responseEnd,oe+=ns*(yt<Pe?1:(Pe-Qt)/(yt-Qt)))}if(--x,d+=8*(O+oe)/(D.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var qy=null,Xy=null;function gx(l){return l.nodeType===9?l:l.ownerDocument}function s5(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n5(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function Jy(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Zy=null;function u3(){var l=window.event;return l&&l.type==="popstate"?l===Zy?!1:(Zy=l,!0):(Zy=null,!1)}var r5=typeof setTimeout=="function"?setTimeout:void 0,h3=typeof clearTimeout=="function"?clearTimeout:void 0,i5=typeof Promise=="function"?Promise:void 0,f3=typeof queueMicrotask=="function"?queueMicrotask:typeof i5<"u"?function(l){return i5.resolve(null).then(l).catch(m3)}:r5;function m3(l){setTimeout(function(){throw l})}function iu(l){return l==="head"}function a5(l,d){var f=d,x=0;do{var D=f.nextSibling;if(l.removeChild(f),D&&D.nodeType===8)if(f=D.data,f==="/$"||f==="/&"){if(x===0){l.removeChild(D),ef(d);return}x--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")x++;else if(f==="html")eg(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,eg(f);for(var O=f.firstChild;O;){var oe=O.nextSibling,Pe=O.nodeName;O[Wt]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&O.rel.toLowerCase()==="stylesheet"||f.removeChild(O),O=oe}}else f==="body"&&eg(l.ownerDocument.body);f=D}while(f);ef(d)}function l5(l,d){var f=l;l=0;do{var x=f.nextSibling;if(f.nodeType===1?d?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(d?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=x}while(f)}function eb(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var f=d;switch(d=d.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":eb(f),_t(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function g3(l,d,f,x){for(;l.nodeType===1;){var D=f;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!x&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(x){if(!l[Wt])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==D.rel||l.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||l.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||l.getAttribute("title")!==(D.title==null?null:D.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(D.src==null?null:D.src)||l.getAttribute("type")!==(D.type==null?null:D.type)||l.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var O=D.name==null?null:""+D.name;if(D.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=to(l.nextSibling),l===null)break}return null}function _3(l,d,f){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=to(l.nextSibling),l===null))return null;return l}function o5(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=to(l.nextSibling),l===null))return null;return l}function tb(l){return l.data==="$?"||l.data==="$~"}function sb(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function x3(l,d){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||f.readyState!=="loading")d();else{var x=function(){d(),f.removeEventListener("DOMContentLoaded",x)};f.addEventListener("DOMContentLoaded",x),l._reactRetry=x}}function to(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var nb=null;function c5(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(d===0)return to(l.nextSibling);d--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||d++}l=l.nextSibling}return null}function d5(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(d===0)return l;d--}else f!=="/$"&&f!=="/&"||d++}l=l.previousSibling}return null}function u5(l,d,f){switch(d=gx(f),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function eg(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);_t(l)}var so=new Map,h5=new Set;function _x(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ad=F.d;F.d={f:p3,r:y3,D:b3,C:C3,L:N3,m:S3,X:E3,S:v3,M:D3};function p3(){var l=ad.f(),d=lx();return l||d}function y3(l){var d=Ot(l);d!==null&&d.tag===5&&d.type==="form"?MS(d):ad.r(l)}var X0=typeof document>"u"?null:document;function f5(l,d,f){var x=X0;if(x&&typeof d=="string"&&d){var D=_s(d);D='link[rel="'+l+'"][href="'+D+'"]',typeof f=="string"&&(D+='[crossorigin="'+f+'"]'),h5.has(D)||(h5.add(D),l={rel:l,crossOrigin:f,href:d},x.querySelector(D)===null&&(d=x.createElement("link"),Sa(d,"link",l),Ie(d),x.head.appendChild(d)))}}function b3(l){ad.D(l),f5("dns-prefetch",l,null)}function C3(l,d){ad.C(l,d),f5("preconnect",l,d)}function N3(l,d,f){ad.L(l,d,f);var x=X0;if(x&&l&&d){var D='link[rel="preload"][as="'+_s(d)+'"]';d==="image"&&f&&f.imageSrcSet?(D+='[imagesrcset="'+_s(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(D+='[imagesizes="'+_s(f.imageSizes)+'"]')):D+='[href="'+_s(l)+'"]';var O=D;switch(d){case"style":O=J0(l);break;case"script":O=Z0(l)}so.has(O)||(l=_({rel:"preload",href:d==="image"&&f&&f.imageSrcSet?void 0:l,as:d},f),so.set(O,l),x.querySelector(D)!==null||d==="style"&&x.querySelector(tg(O))||d==="script"&&x.querySelector(sg(O))||(d=x.createElement("link"),Sa(d,"link",l),Ie(d),x.head.appendChild(d)))}}function S3(l,d){ad.m(l,d);var f=X0;if(f&&l){var x=d&&typeof d.as=="string"?d.as:"script",D='link[rel="modulepreload"][as="'+_s(x)+'"][href="'+_s(l)+'"]',O=D;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Z0(l)}if(!so.has(O)&&(l=_({rel:"modulepreload",href:l},d),so.set(O,l),f.querySelector(D)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(sg(O)))return}x=f.createElement("link"),Sa(x,"link",l),Ie(x),f.head.appendChild(x)}}}function v3(l,d,f){ad.S(l,d,f);var x=X0;if(x&&l){var D=Se(x).hoistableStyles,O=J0(l);d=d||"default";var oe=D.get(O);if(!oe){var Pe={loading:0,preload:null};if(oe=x.querySelector(tg(O)))Pe.loading=5;else{l=_({rel:"stylesheet",href:l,"data-precedence":d},f),(f=so.get(O))&&rb(l,f);var yt=oe=x.createElement("link");Ie(yt),Sa(yt,"link",l),yt._p=new Promise(function(Qt,ns){yt.onload=Qt,yt.onerror=ns}),yt.addEventListener("load",function(){Pe.loading|=1}),yt.addEventListener("error",function(){Pe.loading|=2}),Pe.loading|=4,xx(oe,d,x)}oe={type:"stylesheet",instance:oe,count:1,state:Pe},D.set(O,oe)}}}function E3(l,d){ad.X(l,d);var f=X0;if(f&&l){var x=Se(f).hoistableScripts,D=Z0(l),O=x.get(D);O||(O=f.querySelector(sg(D)),O||(l=_({src:l,async:!0},d),(d=so.get(D))&&ib(l,d),O=f.createElement("script"),Ie(O),Sa(O,"link",l),f.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(D,O))}}function D3(l,d){ad.M(l,d);var f=X0;if(f&&l){var x=Se(f).hoistableScripts,D=Z0(l),O=x.get(D);O||(O=f.querySelector(sg(D)),O||(l=_({src:l,async:!0,type:"module"},d),(d=so.get(D))&&ib(l,d),O=f.createElement("script"),Ie(O),Sa(O,"link",l),f.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(D,O))}}function m5(l,d,f,x){var D=(D=V.current)?_x(D):null;if(!D)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(d=J0(f.href),f=Se(D).hoistableStyles,x=f.get(d),x||(x={type:"style",instance:null,count:0,state:null},f.set(d,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=J0(f.href);var O=Se(D).hoistableStyles,oe=O.get(l);if(oe||(D=D.ownerDocument||D,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,oe),(O=D.querySelector(tg(l)))&&!O._p&&(oe.instance=O,oe.state.loading=5),so.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},so.set(l,f),O||R3(D,l,f,oe.state))),d&&x===null)throw Error(r(528,""));return oe}if(d&&x!==null)throw Error(r(529,""));return null;case"script":return d=f.async,f=f.src,typeof f=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Z0(f),f=Se(D).hoistableScripts,x=f.get(d),x||(x={type:"script",instance:null,count:0,state:null},f.set(d,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function J0(l){return'href="'+_s(l)+'"'}function tg(l){return'link[rel="stylesheet"]['+l+"]"}function g5(l){return _({},l,{"data-precedence":l.precedence,precedence:null})}function R3(l,d,f,x){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?x.loading=1:(d=l.createElement("link"),x.preload=d,d.addEventListener("load",function(){return x.loading|=1}),d.addEventListener("error",function(){return x.loading|=2}),Sa(d,"link",f),Ie(d),l.head.appendChild(d))}function Z0(l){return'[src="'+_s(l)+'"]'}function sg(l){return"script[async]"+l}function _5(l,d,f){if(d.count++,d.instance===null)switch(d.type){case"style":var x=l.querySelector('style[data-href~="'+_s(f.href)+'"]');if(x)return d.instance=x,Ie(x),x;var D=_({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return x=(l.ownerDocument||l).createElement("style"),Ie(x),Sa(x,"style",D),xx(x,f.precedence,l),d.instance=x;case"stylesheet":D=J0(f.href);var O=l.querySelector(tg(D));if(O)return d.state.loading|=4,d.instance=O,Ie(O),O;x=g5(f),(D=so.get(D))&&rb(x,D),O=(l.ownerDocument||l).createElement("link"),Ie(O);var oe=O;return oe._p=new Promise(function(Pe,yt){oe.onload=Pe,oe.onerror=yt}),Sa(O,"link",x),d.state.loading|=4,xx(O,f.precedence,l),d.instance=O;case"script":return O=Z0(f.src),(D=l.querySelector(sg(O)))?(d.instance=D,Ie(D),D):(x=f,(D=so.get(O))&&(x=_({},f),ib(x,D)),l=l.ownerDocument||l,D=l.createElement("script"),Ie(D),Sa(D,"link",x),l.head.appendChild(D),d.instance=D);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(x=d.instance,d.state.loading|=4,xx(x,f.precedence,l));return d.instance}function xx(l,d,f){for(var x=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=x.length?x[x.length-1]:null,O=D,oe=0;oe<x.length;oe++){var Pe=x[oe];if(Pe.dataset.precedence===d)O=Pe;else if(O!==D)break}O?O.parentNode.insertBefore(l,O.nextSibling):(d=f.nodeType===9?f.head:f,d.insertBefore(l,d.firstChild))}function rb(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function ib(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var px=null;function x5(l,d,f){if(px===null){var x=new Map,D=px=new Map;D.set(f,x)}else D=px,x=D.get(f),x||(x=new Map,D.set(f,x));if(x.has(l))return x;for(x.set(l,null),f=f.getElementsByTagName(l),D=0;D<f.length;D++){var O=f[D];if(!(O[Wt]||O[ls]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=O.getAttribute(d)||"";oe=l+oe;var Pe=x.get(oe);Pe?Pe.push(O):x.set(oe,[O])}}return x}function p5(l,d,f){l=l.ownerDocument||l,l.head.insertBefore(f,d==="title"?l.querySelector("head > title"):null)}function T3(l,d,f){if(f===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function y5(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function M3(l,d,f,x){if(f.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var D=J0(x.href),O=d.querySelector(tg(D));if(O){d=O._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=yx.bind(l),d.then(l,l)),f.state.loading|=4,f.instance=O,Ie(O);return}O=d.ownerDocument||d,x=g5(x),(D=so.get(D))&&rb(x,D),O=O.createElement("link"),Ie(O);var oe=O;oe._p=new Promise(function(Pe,yt){oe.onload=Pe,oe.onerror=yt}),Sa(O,"link",x),f.instance=O}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,d),(d=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=yx.bind(l),d.addEventListener("load",f),d.addEventListener("error",f))}}var ab=0;function I3(l,d){return l.stylesheets&&l.count===0&&Cx(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var x=setTimeout(function(){if(l.stylesheets&&Cx(l,l.stylesheets),l.unsuspend){var O=l.unsuspend;l.unsuspend=null,O()}},6e4+d);0<l.imgBytes&&ab===0&&(ab=62500*d3());var D=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Cx(l,l.stylesheets),l.unsuspend)){var O=l.unsuspend;l.unsuspend=null,O()}},(l.imgBytes>ab?50:800)+d);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(x),clearTimeout(D)}}:null}function yx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var bx=null;function Cx(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,bx=new Map,d.forEach(j3,l),bx=null,yx.call(l))}function j3(l,d){if(!(d.state.loading&4)){var f=bx.get(l);if(f)var x=f.get(null);else{f=new Map,bx.set(l,f);for(var D=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<D.length;O++){var oe=D[O];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(f.set(oe.dataset.precedence,oe),x=oe)}x&&f.set(null,x)}D=d.instance,oe=D.getAttribute("data-precedence"),O=f.get(oe)||x,O===x&&f.set(null,D),f.set(oe,D),this.count++,x=yx.bind(this),D.addEventListener("load",x),D.addEventListener("error",x),O?O.parentNode.insertBefore(D,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(D,l.firstChild)),d.state.loading|=4}}var ng={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function O3(l,d,f,x,D,O,oe,Pe,yt){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ze(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ze(0),this.hiddenUpdates=Ze(null),this.identifierPrefix=x,this.onUncaughtError=D,this.onCaughtError=O,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=yt,this.incompleteTransitions=new Map}function b5(l,d,f,x,D,O,oe,Pe,yt,Qt,ns,us){return l=new O3(l,d,f,oe,yt,Qt,ns,us,Pe),d=1,O===!0&&(d|=24),O=aa(3,null,null,d),l.current=O,O.stateNode=l,d=Vd(),d.refCount++,l.pooledCache=d,d.refCount++,O.memoizedState={element:x,isDehydrated:f,cache:d},Rs(O),l}function C5(l){return l?(l=Ki,l):Ki}function N5(l,d,f,x,D,O){D=C5(D),x.context===null?x.context=D:x.pendingContext=D,x=un(d),x.payload={element:f},O=O===void 0?null:O,O!==null&&(x.callback=O),f=Dn(l,x,d),f!==null&&(_l(f,l,d),ar(f,l,d))}function S5(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<d?f:d}}function lb(l,d){S5(l,d),(l=l.alternate)&&S5(l,d)}function v5(l){if(l.tag===13||l.tag===31){var d=Uo(l,67108864);d!==null&&_l(d,l,67108864),lb(l,67108864)}}function E5(l){if(l.tag===13||l.tag===31){var d=Gl();d=jt(d);var f=Uo(l,d);f!==null&&_l(f,l,d),lb(l,d)}}var Nx=!0;function w3(l,d,f,x){var D=$.T;$.T=null;var O=F.p;try{F.p=2,ob(l,d,f,x)}finally{F.p=O,$.T=D}}function L3(l,d,f,x){var D=$.T;$.T=null;var O=F.p;try{F.p=8,ob(l,d,f,x)}finally{F.p=O,$.T=D}}function ob(l,d,f,x){if(Nx){var D=cb(x);if(D===null)zy(l,d,x,Sx,f),R5(l,x);else if(A3(D,l,d,f,x))x.stopPropagation();else if(R5(l,x),d&4&&-1<P3.indexOf(l)){for(;D!==null;){var O=Ot(D);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var oe=Ne(O.pendingLanes);if(oe!==0){var Pe=O;for(Pe.pendingLanes|=2,Pe.entangledLanes|=2;oe;){var yt=1<<31-tt(oe);Pe.entanglements[1]|=yt,oe&=~yt}Cc(O),(or&6)===0&&(ix=ze()+500,Xm(0))}}break;case 31:case 13:Pe=Uo(O,2),Pe!==null&&_l(Pe,O,2),lx(),lb(O,2)}if(O=cb(x),O===null&&zy(l,d,x,Sx,f),O===D)break;D=O}D!==null&&x.stopPropagation()}else zy(l,d,x,null,f)}}function cb(l){return l=$s(l),db(l)}var Sx=null;function db(l){if(Sx=null,l=qt(l),l!==null){var d=a(l);if(d===null)l=null;else{var f=d.tag;if(f===13){if(l=o(d),l!==null)return l;l=null}else if(f===31){if(l=c(d),l!==null)return l;l=null}else if(f===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Sx=l,null}function D5(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case st:return 2;case St:return 8;case ot:case Be:return 32;case lt:return 268435456;default:return 32}default:return 32}}var ub=!1,au=null,lu=null,ou=null,rg=new Map,ig=new Map,cu=[],P3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R5(l,d){switch(l){case"focusin":case"focusout":au=null;break;case"dragenter":case"dragleave":lu=null;break;case"mouseover":case"mouseout":ou=null;break;case"pointerover":case"pointerout":rg.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ig.delete(d.pointerId)}}function ag(l,d,f,x,D,O){return l===null||l.nativeEvent!==O?(l={blockedOn:d,domEventName:f,eventSystemFlags:x,nativeEvent:O,targetContainers:[D]},d!==null&&(d=Ot(d),d!==null&&v5(d)),l):(l.eventSystemFlags|=x,d=l.targetContainers,D!==null&&d.indexOf(D)===-1&&d.push(D),l)}function A3(l,d,f,x,D){switch(d){case"focusin":return au=ag(au,l,d,f,x,D),!0;case"dragenter":return lu=ag(lu,l,d,f,x,D),!0;case"mouseover":return ou=ag(ou,l,d,f,x,D),!0;case"pointerover":var O=D.pointerId;return rg.set(O,ag(rg.get(O)||null,l,d,f,x,D)),!0;case"gotpointercapture":return O=D.pointerId,ig.set(O,ag(ig.get(O)||null,l,d,f,x,D)),!0}return!1}function T5(l){var d=qt(l.target);if(d!==null){var f=a(d);if(f!==null){if(d=f.tag,d===13){if(d=o(f),d!==null){l.blockedOn=d,ke(l.priority,function(){E5(f)});return}}else if(d===31){if(d=c(f),d!==null){l.blockedOn=d,ke(l.priority,function(){E5(f)});return}}else if(d===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function vx(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var f=cb(l.nativeEvent);if(f===null){f=l.nativeEvent;var x=new f.constructor(f.type,f);Ws=x,f.target.dispatchEvent(x),Ws=null}else return d=Ot(f),d!==null&&v5(d),l.blockedOn=f,!1;d.shift()}return!0}function M5(l,d,f){vx(l)&&f.delete(d)}function k3(){ub=!1,au!==null&&vx(au)&&(au=null),lu!==null&&vx(lu)&&(lu=null),ou!==null&&vx(ou)&&(ou=null),rg.forEach(M5),ig.forEach(M5)}function Ex(l,d){l.blockedOn===d&&(l.blockedOn=null,ub||(ub=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,k3)))}var Dx=null;function I5(l){Dx!==l&&(Dx=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Dx===l&&(Dx=null);for(var d=0;d<l.length;d+=3){var f=l[d],x=l[d+1],D=l[d+2];if(typeof x!="function"){if(db(x||f)===null)continue;break}var O=Ot(f);O!==null&&(l.splice(d,3),d-=3,cy(O,{pending:!0,data:D,method:f.method,action:x},x,D))}}))}function ef(l){function d(yt){return Ex(yt,l)}au!==null&&Ex(au,l),lu!==null&&Ex(lu,l),ou!==null&&Ex(ou,l),rg.forEach(d),ig.forEach(d);for(var f=0;f<cu.length;f++){var x=cu[f];x.blockedOn===l&&(x.blockedOn=null)}for(;0<cu.length&&(f=cu[0],f.blockedOn===null);)T5(f),f.blockedOn===null&&cu.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(x=0;x<f.length;x+=3){var D=f[x],O=f[x+1],oe=D[ds]||null;if(typeof O=="function")oe||I5(f);else if(oe){var Pe=null;if(O&&O.hasAttribute("formAction")){if(D=O,oe=O[ds]||null)Pe=oe.formAction;else if(db(D)!==null)continue}else Pe=oe.action;typeof Pe=="function"?f[x+1]=Pe:(f.splice(x,3),x-=3),I5(f)}}}function j5(){function l(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(oe){return D=oe})},focusReset:"manual",scroll:"manual"})}function d(){D!==null&&(D(),D=null),x||setTimeout(f,20)}function f(){if(!x&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,D=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(f,100),function(){x=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),D!==null&&(D(),D=null)}}}function hb(l){this._internalRoot=l}Rx.prototype.render=hb.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var f=d.current,x=Gl();N5(f,x,l,d,null,null)},Rx.prototype.unmount=hb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;N5(l.current,2,null,l,null,null),lx(),d[vs]=null}};function Rx(l){this._internalRoot=l}Rx.prototype.unstable_scheduleHydration=function(l){if(l){var d=Vt();l={blockedOn:null,target:l,priority:d};for(var f=0;f<cu.length&&d!==0&&d<cu[f].priority;f++);cu.splice(f,0,l),f===0&&T5(l)}};var O5=e.version;if(O5!=="19.2.3")throw Error(r(527,O5,"19.2.3"));F.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=h(d),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var U3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tx.isDisabled&&Tx.supportsFiber)try{Ye=Tx.inject(U3),at=Tx}catch{}}return og.createRoot=function(l,d){if(!i(l))throw Error(r(299));var f=!1,x="",D=BS,O=GS,oe=WS;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onUncaughtError!==void 0&&(D=d.onUncaughtError),d.onCaughtError!==void 0&&(O=d.onCaughtError),d.onRecoverableError!==void 0&&(oe=d.onRecoverableError)),d=b5(l,1,!1,null,null,f,x,null,D,O,oe,j5),l[vs]=d.current,Vy(l),new hb(d)},og.hydrateRoot=function(l,d,f){if(!i(l))throw Error(r(299));var x=!1,D="",O=BS,oe=GS,Pe=WS,yt=null;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(D=f.identifierPrefix),f.onUncaughtError!==void 0&&(O=f.onUncaughtError),f.onCaughtError!==void 0&&(oe=f.onCaughtError),f.onRecoverableError!==void 0&&(Pe=f.onRecoverableError),f.formState!==void 0&&(yt=f.formState)),d=b5(l,1,!0,d,f??null,x,D,yt,O,oe,Pe,j5),d.context=C5(null),f=d.current,x=Gl(),x=jt(x),D=un(x),D.callback=null,Dn(f,D,x),f=x,d.current.lanes=f,Le(d,f),Cc(d),l[vs]=d.current,Vy(l),new Rx(d)},og.version="19.2.3",og}var K5;function q3(){if(K5)return _b.exports;K5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_b.exports=H3(),_b.exports}var X3=q3();const J3=W2(X3);var gm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Z3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ru,G2,KT,ew=(KT=class{constructor(){an(this,Ru,Z3);an(this,G2,!1)}setTimeoutProvider(t){Gs(this,Ru,t)}setTimeout(t,e){return bt(this,Ru).setTimeout(t,e)}clearTimeout(t){bt(this,Ru).clearTimeout(t)}setInterval(t,e){return bt(this,Ru).setInterval(t,e)}clearInterval(t){bt(this,Ru).clearInterval(t)}},Ru=new WeakMap,G2=new WeakMap,KT),Ih=new ew;function tw(t){setTimeout(t,0)}var $h=typeof window>"u"||"Deno"in globalThis;function za(){}function sw(t,e){return typeof t=="function"?t(e):t}function jC(t){return typeof t=="number"&&t>=0&&t!==1/0}function sM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Wu(t,e){return typeof t=="function"?t(e):t}function lo(t,e){return typeof t=="function"?t(e):t}function Q5(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:c}=t;if(o){if(r){if(e.queryHash!==K2(o,e.options))return!1}else if(!$g(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function Y5(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Vh(e.options.mutationKey)!==Vh(a))return!1}else if(!$g(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function K2(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vh)(t)}function Vh(t){return JSON.stringify(t,(e,n)=>OC(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function $g(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>$g(t[n],e[n])):!1}var nw=Object.prototype.hasOwnProperty;function nM(t,e){if(t===e)return t;const n=$5(t)&&$5(e);if(!n&&!(OC(t)&&OC(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),o=a.length,c=n?new Array(o):{};let u=0;for(let h=0;h<o;h++){const m=n?h:a[h],_=t[m],p=e[m];if(_===p){c[m]=_,(n?h<i:nw.call(t,m))&&u++;continue}if(_===null||p===null||typeof _!="object"||typeof p!="object"){c[m]=p;continue}const g=nM(_,p);c[m]=g,g===_&&u++}return i===o&&u===i?t:c}function wp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $5(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function OC(t){if(!V5(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!V5(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function V5(t){return Object.prototype.toString.call(t)==="[object Object]"}function rw(t){return new Promise(e=>{Ih.setTimeout(e,t)})}function wC(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?nM(t,e):e}function iw(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function aw(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Q2=Symbol();function rM(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Q2?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function iM(t,e){return typeof t=="function"?t(...e):!!t}var Ph,Tu,$f,QT,lw=(QT=class extends gm{constructor(){super();an(this,Ph);an(this,Tu);an(this,$f);Gs(this,$f,e=>{if(!$h&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){bt(this,Tu)||this.setEventListener(bt(this,$f))}onUnsubscribe(){var e;this.hasListeners()||((e=bt(this,Tu))==null||e.call(this),Gs(this,Tu,void 0))}setEventListener(e){var n;Gs(this,$f,e),(n=bt(this,Tu))==null||n.call(this),Gs(this,Tu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){bt(this,Ph)!==e&&(Gs(this,Ph,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof bt(this,Ph)=="boolean"?bt(this,Ph):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ph=new WeakMap,Tu=new WeakMap,$f=new WeakMap,QT),Y2=new lw;function LC(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var ow=tw;function cw(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=ow;const a=c=>{e?t.push(c):i(()=>{n(c)})},o=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||o()}return u},batchCalls:c=>(...u)=>{a(()=>{c(...u)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var ea=cw(),Vf,Mu,zf,YT,dw=(YT=class extends gm{constructor(){super();an(this,Vf,!0);an(this,Mu);an(this,zf);Gs(this,zf,e=>{if(!$h&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){bt(this,Mu)||this.setEventListener(bt(this,zf))}onUnsubscribe(){var e;this.hasListeners()||((e=bt(this,Mu))==null||e.call(this),Gs(this,Mu,void 0))}setEventListener(e){var n;Gs(this,zf,e),(n=bt(this,Mu))==null||n.call(this),Gs(this,Mu,e(this.setOnline.bind(this)))}setOnline(e){bt(this,Vf)!==e&&(Gs(this,Vf,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return bt(this,Vf)}},Vf=new WeakMap,Mu=new WeakMap,zf=new WeakMap,YT),Lp=new dw;function uw(t){return Math.min(1e3*2**t,3e4)}function aM(t){return(t??"online")==="online"?Lp.isOnline():!0}var PC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function lM(t){let e=!1,n=0,r;const i=LC(),a=()=>i.status!=="pending",o=y=>{var N;if(!a()){const v=new PC(y);p(v),(N=t.onCancel)==null||N.call(t,v)}},c=()=>{e=!0},u=()=>{e=!1},h=()=>Y2.isFocused()&&(t.networkMode==="always"||Lp.isOnline())&&t.canRun(),m=()=>aM(t.networkMode)&&t.canRun(),_=y=>{a()||(r==null||r(),i.resolve(y))},p=y=>{a()||(r==null||r(),i.reject(y))},g=()=>new Promise(y=>{var N;r=v=>{(a()||h())&&y(v)},(N=t.onPause)==null||N.call(t)}).then(()=>{var y;r=void 0,a()||(y=t.onContinue)==null||y.call(t)}),C=()=>{if(a())return;let y;const N=n===0?t.initialPromise:void 0;try{y=N??t.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(_).catch(v=>{var B;if(a())return;const P=t.retry??($h?0:3),w=t.retryDelay??uw,M=typeof w=="function"?w(n,v):w,k=P===!0||typeof P=="number"&&n<P||typeof P=="function"&&P(n,v);if(e||!k){p(v);return}n++,(B=t.onFail)==null||B.call(t,n,v),rw(M).then(()=>h()?void 0:g()).then(()=>{e?p(v):C()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:c,continueRetry:u,canStart:m,start:()=>(m()?C():g().then(C),i)}}var Ah,$T,oM=($T=class{constructor(){an(this,Ah)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jC(this.gcTime)&&Gs(this,Ah,Ih.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??($h?1/0:300*1e3))}clearGcTimeout(){bt(this,Ah)&&(Ih.clearTimeout(bt(this,Ah)),Gs(this,Ah,void 0))}},Ah=new WeakMap,$T),kh,Hf,ao,Uh,ua,h_,Bh,Ho,hd,VT,hw=(VT=class extends oM{constructor(e){super();an(this,Ho);an(this,kh);an(this,Hf);an(this,ao);an(this,Uh);an(this,ua);an(this,h_);an(this,Bh);Gs(this,Bh,!1),Gs(this,h_,e.defaultOptions),this.setOptions(e.options),this.observers=[],Gs(this,Uh,e.client),Gs(this,ao,bt(this,Uh).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Gs(this,kh,H5(this.options)),this.state=e.state??bt(this,kh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=bt(this,ua))==null?void 0:e.promise}setOptions(e){if(this.options={...bt(this,h_),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=H5(this.options);n.data!==void 0&&(this.setState(z5(n.data,n.dataUpdatedAt)),Gs(this,kh,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&bt(this,ao).remove(this)}setData(e,n){const r=wC(this.state.data,e,this.options);return On(this,Ho,hd).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){On(this,Ho,hd).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=bt(this,ua))==null?void 0:r.promise;return(i=bt(this,ua))==null||i.cancel(e),n?n.then(za).catch(za):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(bt(this,kh))}isActive(){return this.observers.some(e=>lo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Q2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Wu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!sM(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=bt(this,ua))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=bt(this,ua))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),bt(this,ao).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(bt(this,ua)&&(bt(this,Bh)?bt(this,ua).cancel({revert:!0}):bt(this,ua).cancelRetry()),this.scheduleGc()),bt(this,ao).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||On(this,Ho,hd).call(this,{type:"invalidate"})}async fetch(e,n){var u,h,m,_,p,g,C,y,N,v,P,w;if(this.state.fetchStatus!=="idle"&&((u=bt(this,ua))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(bt(this,ua))return bt(this,ua).continueRetry(),bt(this,ua).promise}if(e&&this.setOptions(e),!this.options.queryFn){const M=this.observers.find(k=>k.options.queryFn);M&&this.setOptions(M.options)}const r=new AbortController,i=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(Gs(this,Bh,!0),r.signal)})},a=()=>{const M=rM(this.options,n),B=(()=>{const G={client:bt(this,Uh),queryKey:this.queryKey,meta:this.meta};return i(G),G})();return Gs(this,Bh,!1),this.options.persister?this.options.persister(M,B,this):M(B)},c=(()=>{const M={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:bt(this,Uh),state:this.state,fetchFn:a};return i(M),M})();(h=this.options.behavior)==null||h.onFetch(c,this),Gs(this,Hf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&On(this,Ho,hd).call(this,{type:"fetch",meta:(_=c.fetchOptions)==null?void 0:_.meta}),Gs(this,ua,lM({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,onCancel:M=>{M instanceof PC&&M.revert&&this.setState({...bt(this,Hf),fetchStatus:"idle"}),r.abort()},onFail:(M,k)=>{On(this,Ho,hd).call(this,{type:"failed",failureCount:M,error:k})},onPause:()=>{On(this,Ho,hd).call(this,{type:"pause"})},onContinue:()=>{On(this,Ho,hd).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const M=await bt(this,ua).start();if(M===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(M),(g=(p=bt(this,ao).config).onSuccess)==null||g.call(p,M,this),(y=(C=bt(this,ao).config).onSettled)==null||y.call(C,M,this.state.error,this),M}catch(M){if(M instanceof PC){if(M.silent)return bt(this,ua).promise;if(M.revert){if(this.state.data===void 0)throw M;return this.state.data}}throw On(this,Ho,hd).call(this,{type:"error",error:M}),(v=(N=bt(this,ao).config).onError)==null||v.call(N,M,this),(w=(P=bt(this,ao).config).onSettled)==null||w.call(P,this.state.data,M,this),M}finally{this.scheduleGc()}}},kh=new WeakMap,Hf=new WeakMap,ao=new WeakMap,Uh=new WeakMap,ua=new WeakMap,h_=new WeakMap,Bh=new WeakMap,Ho=new WeakSet,hd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...cM(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...z5(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Gs(this,Hf,e.manual?i:void 0),i;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ea.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),bt(this,ao).notify({query:this,type:"updated",action:e})})},VT);function cM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aM(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function z5(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function H5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var pl,Yn,f_,$a,Gh,qf,xd,Iu,m_,Xf,Jf,Wh,Fh,ju,Zf,xr,bg,AC,kC,UC,BC,GC,WC,FC,dM,zT,fw=(zT=class extends gm{constructor(e,n){super();an(this,xr);an(this,pl);an(this,Yn);an(this,f_);an(this,$a);an(this,Gh);an(this,qf);an(this,xd);an(this,Iu);an(this,m_);an(this,Xf);an(this,Jf);an(this,Wh);an(this,Fh);an(this,ju);an(this,Zf,new Set);this.options=n,Gs(this,pl,e),Gs(this,Iu,null),Gs(this,xd,LC()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(bt(this,Yn).addObserver(this),q5(bt(this,Yn),this.options)?On(this,xr,bg).call(this):this.updateResult(),On(this,xr,BC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return KC(bt(this,Yn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return KC(bt(this,Yn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,On(this,xr,GC).call(this),On(this,xr,WC).call(this),bt(this,Yn).removeObserver(this)}setOptions(e){const n=this.options,r=bt(this,Yn);if(this.options=bt(this,pl).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof lo(this.options.enabled,bt(this,Yn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");On(this,xr,FC).call(this),bt(this,Yn).setOptions(this.options),n._defaulted&&!wp(this.options,n)&&bt(this,pl).getQueryCache().notify({type:"observerOptionsUpdated",query:bt(this,Yn),observer:this});const i=this.hasListeners();i&&X5(bt(this,Yn),r,this.options,n)&&On(this,xr,bg).call(this),this.updateResult(),i&&(bt(this,Yn)!==r||lo(this.options.enabled,bt(this,Yn))!==lo(n.enabled,bt(this,Yn))||Wu(this.options.staleTime,bt(this,Yn))!==Wu(n.staleTime,bt(this,Yn)))&&On(this,xr,AC).call(this);const a=On(this,xr,kC).call(this);i&&(bt(this,Yn)!==r||lo(this.options.enabled,bt(this,Yn))!==lo(n.enabled,bt(this,Yn))||a!==bt(this,ju))&&On(this,xr,UC).call(this,a)}getOptimisticResult(e){const n=bt(this,pl).getQueryCache().build(bt(this,pl),e),r=this.createResult(n,e);return gw(this,r)&&(Gs(this,$a,r),Gs(this,qf,this.options),Gs(this,Gh,bt(this,Yn).state)),r}getCurrentResult(){return bt(this,$a)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&bt(this,xd).status==="pending"&&bt(this,xd).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){bt(this,Zf).add(e)}getCurrentQuery(){return bt(this,Yn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=bt(this,pl).defaultQueryOptions(e),r=bt(this,pl).getQueryCache().build(bt(this,pl),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return On(this,xr,bg).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),bt(this,$a)))}createResult(e,n){var I;const r=bt(this,Yn),i=this.options,a=bt(this,$a),o=bt(this,Gh),c=bt(this,qf),h=e!==r?e.state:bt(this,f_),{state:m}=e;let _={...m},p=!1,g;if(n._optimisticResults){const E=this.hasListeners(),A=!E&&q5(e,n),Y=E&&X5(e,r,n,i);(A||Y)&&(_={..._,...cM(m.data,e.options)}),n._optimisticResults==="isRestoring"&&(_.fetchStatus="idle")}let{error:C,errorUpdatedAt:y,status:N}=_;g=_.data;let v=!1;if(n.placeholderData!==void 0&&g===void 0&&N==="pending"){let E;a!=null&&a.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData)?(E=a.data,v=!0):E=typeof n.placeholderData=="function"?n.placeholderData((I=bt(this,Jf))==null?void 0:I.state.data,bt(this,Jf)):n.placeholderData,E!==void 0&&(N="success",g=wC(a==null?void 0:a.data,E,n),p=!0)}if(n.select&&g!==void 0&&!v)if(a&&g===(o==null?void 0:o.data)&&n.select===bt(this,m_))g=bt(this,Xf);else try{Gs(this,m_,n.select),g=n.select(g),g=wC(a==null?void 0:a.data,g,n),Gs(this,Xf,g),Gs(this,Iu,null)}catch(E){Gs(this,Iu,E)}bt(this,Iu)&&(C=bt(this,Iu),g=bt(this,Xf),y=Date.now(),N="error");const P=_.fetchStatus==="fetching",w=N==="pending",M=N==="error",k=w&&P,B=g!==void 0,U={status:N,fetchStatus:_.fetchStatus,isPending:w,isSuccess:N==="success",isError:M,isInitialLoading:k,isLoading:k,data:g,dataUpdatedAt:_.dataUpdatedAt,error:C,errorUpdatedAt:y,failureCount:_.fetchFailureCount,failureReason:_.fetchFailureReason,errorUpdateCount:_.errorUpdateCount,isFetched:_.dataUpdateCount>0||_.errorUpdateCount>0,isFetchedAfterMount:_.dataUpdateCount>h.dataUpdateCount||_.errorUpdateCount>h.errorUpdateCount,isFetching:P,isRefetching:P&&!w,isLoadingError:M&&!B,isPaused:_.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:M&&B,isStale:$2(e,n),refetch:this.refetch,promise:bt(this,xd),isEnabled:lo(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=se=>{U.status==="error"?se.reject(U.error):U.data!==void 0&&se.resolve(U.data)},A=()=>{const se=Gs(this,xd,U.promise=LC());E(se)},Y=bt(this,xd);switch(Y.status){case"pending":e.queryHash===r.queryHash&&E(Y);break;case"fulfilled":(U.status==="error"||U.data!==Y.value)&&A();break;case"rejected":(U.status!=="error"||U.error!==Y.reason)&&A();break}}return U}updateResult(){const e=bt(this,$a),n=this.createResult(bt(this,Yn),this.options);if(Gs(this,Gh,bt(this,Yn).state),Gs(this,qf,this.options),bt(this,Gh).data!==void 0&&Gs(this,Jf,bt(this,Yn)),wp(n,e))return;Gs(this,$a,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!bt(this,Zf).size)return!0;const o=new Set(a??bt(this,Zf));return this.options.throwOnError&&o.add("error"),Object.keys(bt(this,$a)).some(c=>{const u=c;return bt(this,$a)[u]!==e[u]&&o.has(u)})};On(this,xr,dM).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&On(this,xr,BC).call(this)}},pl=new WeakMap,Yn=new WeakMap,f_=new WeakMap,$a=new WeakMap,Gh=new WeakMap,qf=new WeakMap,xd=new WeakMap,Iu=new WeakMap,m_=new WeakMap,Xf=new WeakMap,Jf=new WeakMap,Wh=new WeakMap,Fh=new WeakMap,ju=new WeakMap,Zf=new WeakMap,xr=new WeakSet,bg=function(e){On(this,xr,FC).call(this);let n=bt(this,Yn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(za)),n},AC=function(){On(this,xr,GC).call(this);const e=Wu(this.options.staleTime,bt(this,Yn));if($h||bt(this,$a).isStale||!jC(e))return;const r=sM(bt(this,$a).dataUpdatedAt,e)+1;Gs(this,Wh,Ih.setTimeout(()=>{bt(this,$a).isStale||this.updateResult()},r))},kC=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(bt(this,Yn)):this.options.refetchInterval)??!1},UC=function(e){On(this,xr,WC).call(this),Gs(this,ju,e),!($h||lo(this.options.enabled,bt(this,Yn))===!1||!jC(bt(this,ju))||bt(this,ju)===0)&&Gs(this,Fh,Ih.setInterval(()=>{(this.options.refetchIntervalInBackground||Y2.isFocused())&&On(this,xr,bg).call(this)},bt(this,ju)))},BC=function(){On(this,xr,AC).call(this),On(this,xr,UC).call(this,On(this,xr,kC).call(this))},GC=function(){bt(this,Wh)&&(Ih.clearTimeout(bt(this,Wh)),Gs(this,Wh,void 0))},WC=function(){bt(this,Fh)&&(Ih.clearInterval(bt(this,Fh)),Gs(this,Fh,void 0))},FC=function(){const e=bt(this,pl).getQueryCache().build(bt(this,pl),this.options);if(e===bt(this,Yn))return;const n=bt(this,Yn);Gs(this,Yn,e),Gs(this,f_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},dM=function(e){ea.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(bt(this,$a))}),bt(this,pl).getQueryCache().notify({query:bt(this,Yn),type:"observerResultsUpdated"})})},zT);function mw(t,e){return lo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function q5(t,e){return mw(t,e)||t.state.data!==void 0&&KC(t,e,e.refetchOnMount)}function KC(t,e,n){if(lo(e.enabled,t)!==!1&&Wu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&$2(t,e)}return!1}function X5(t,e,n,r){return(t!==e||lo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&$2(t,n)}function $2(t,e){return lo(e.enabled,t)!==!1&&t.isStaleByTime(Wu(e.staleTime,t))}function gw(t,e){return!wp(t.getCurrentResult(),e)}function J5(t){return{onFetch:(e,n)=>{var m,_,p,g,C;const r=e.options,i=(p=(_=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:_.fetchMore)==null?void 0:p.direction,a=((g=e.state.data)==null?void 0:g.pages)||[],o=((C=e.state.data)==null?void 0:C.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const h=async()=>{let y=!1;const N=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},v=rM(e.options,e.fetchOptions),P=async(w,M,k)=>{if(y)return Promise.reject();if(M==null&&w.pages.length)return Promise.resolve(w);const G=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:M,direction:k?"backward":"forward",meta:e.options.meta};return N(A),A})(),U=await v(G),{maxPages:I}=e.options,E=k?aw:iw;return{pages:E(w.pages,U,I),pageParams:E(w.pageParams,M,I)}};if(i&&a.length){const w=i==="backward",M=w?_w:Z5,k={pages:a,pageParams:o},B=M(r,k);c=await P(k,B,w)}else{const w=t??a.length;do{const M=u===0?o[0]??r.initialPageParam:Z5(r,c);if(u>0&&M==null)break;c=await P(c,M),u++}while(u<w)}return c};e.options.persister?e.fetchFn=()=>{var y,N;return(N=(y=e.options).persister)==null?void 0:N.call(y,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function Z5(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function _w(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var g_,Dc,Va,Kh,Rc,Cu,HT,xw=(HT=class extends oM{constructor(e){super();an(this,Rc);an(this,g_);an(this,Dc);an(this,Va);an(this,Kh);Gs(this,g_,e.client),this.mutationId=e.mutationId,Gs(this,Va,e.mutationCache),Gs(this,Dc,[]),this.state=e.state||uM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){bt(this,Dc).includes(e)||(bt(this,Dc).push(e),this.clearGcTimeout(),bt(this,Va).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Gs(this,Dc,bt(this,Dc).filter(n=>n!==e)),this.scheduleGc(),bt(this,Va).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){bt(this,Dc).length||(this.state.status==="pending"?this.scheduleGc():bt(this,Va).remove(this))}continue(){var e;return((e=bt(this,Kh))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,c,u,h,m,_,p,g,C,y,N,v,P,w,M,k,B,G,U,I;const n=()=>{On(this,Rc,Cu).call(this,{type:"continue"})},r={client:bt(this,g_),meta:this.options.meta,mutationKey:this.options.mutationKey};Gs(this,Kh,lM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(E,A)=>{On(this,Rc,Cu).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{On(this,Rc,Cu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>bt(this,Va).canRun(this)}));const i=this.state.status==="pending",a=!bt(this,Kh).canStart();try{if(i)n();else{On(this,Rc,Cu).call(this,{type:"pending",variables:e,isPaused:a}),await((c=(o=bt(this,Va).config).onMutate)==null?void 0:c.call(o,e,this,r));const A=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,e,r));A!==this.state.context&&On(this,Rc,Cu).call(this,{type:"pending",context:A,variables:e,isPaused:a})}const E=await bt(this,Kh).start();return await((_=(m=bt(this,Va).config).onSuccess)==null?void 0:_.call(m,E,e,this.state.context,this,r)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,E,e,this.state.context,r)),await((y=(C=bt(this,Va).config).onSettled)==null?void 0:y.call(C,E,null,this.state.variables,this.state.context,this,r)),await((v=(N=this.options).onSettled)==null?void 0:v.call(N,E,null,e,this.state.context,r)),On(this,Rc,Cu).call(this,{type:"success",data:E}),E}catch(E){try{throw await((w=(P=bt(this,Va).config).onError)==null?void 0:w.call(P,E,e,this.state.context,this,r)),await((k=(M=this.options).onError)==null?void 0:k.call(M,E,e,this.state.context,r)),await((G=(B=bt(this,Va).config).onSettled)==null?void 0:G.call(B,void 0,E,this.state.variables,this.state.context,this,r)),await((I=(U=this.options).onSettled)==null?void 0:I.call(U,void 0,E,e,this.state.context,r)),E}finally{On(this,Rc,Cu).call(this,{type:"error",error:E})}}finally{bt(this,Va).runNext(this)}}},g_=new WeakMap,Dc=new WeakMap,Va=new WeakMap,Kh=new WeakMap,Rc=new WeakSet,Cu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ea.batch(()=>{bt(this,Dc).forEach(r=>{r.onMutationUpdate(e)}),bt(this,Va).notify({mutation:this,type:"updated",action:e})})},HT);function uM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pd,qo,__,qT,pw=(qT=class extends gm{constructor(e={}){super();an(this,pd);an(this,qo);an(this,__);this.config=e,Gs(this,pd,new Set),Gs(this,qo,new Map),Gs(this,__,0)}build(e,n,r){const i=new xw({client:e,mutationCache:this,mutationId:++Mx(this,__)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){bt(this,pd).add(e);const n=Ix(e);if(typeof n=="string"){const r=bt(this,qo).get(n);r?r.push(e):bt(this,qo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(bt(this,pd).delete(e)){const n=Ix(e);if(typeof n=="string"){const r=bt(this,qo).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&bt(this,qo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Ix(e);if(typeof n=="string"){const r=bt(this,qo).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Ix(e);if(typeof n=="string"){const i=(r=bt(this,qo).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ea.batch(()=>{bt(this,pd).forEach(e=>{this.notify({type:"removed",mutation:e})}),bt(this,pd).clear(),bt(this,qo).clear()})}getAll(){return Array.from(bt(this,pd))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Y5(n,r))}findAll(e={}){return this.getAll().filter(n=>Y5(e,n))}notify(e){ea.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ea.batch(()=>Promise.all(e.map(n=>n.continue().catch(za))))}},pd=new WeakMap,qo=new WeakMap,__=new WeakMap,qT);function Ix(t){var e;return(e=t.options.scope)==null?void 0:e.id}var yd,Ou,yl,bd,Ed,mp,QC,XT,yw=(XT=class extends gm{constructor(n,r){super();an(this,Ed);an(this,yd);an(this,Ou);an(this,yl);an(this,bd);Gs(this,yd,n),this.setOptions(r),this.bindMethods(),On(this,Ed,mp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=bt(this,yd).defaultMutationOptions(n),wp(this.options,r)||bt(this,yd).getMutationCache().notify({type:"observerOptionsUpdated",mutation:bt(this,yl),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Vh(r.mutationKey)!==Vh(this.options.mutationKey)?this.reset():((i=bt(this,yl))==null?void 0:i.state.status)==="pending"&&bt(this,yl).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=bt(this,yl))==null||n.removeObserver(this)}onMutationUpdate(n){On(this,Ed,mp).call(this),On(this,Ed,QC).call(this,n)}getCurrentResult(){return bt(this,Ou)}reset(){var n;(n=bt(this,yl))==null||n.removeObserver(this),Gs(this,yl,void 0),On(this,Ed,mp).call(this),On(this,Ed,QC).call(this)}mutate(n,r){var i;return Gs(this,bd,r),(i=bt(this,yl))==null||i.removeObserver(this),Gs(this,yl,bt(this,yd).getMutationCache().build(bt(this,yd),this.options)),bt(this,yl).addObserver(this),bt(this,yl).execute(n)}},yd=new WeakMap,Ou=new WeakMap,yl=new WeakMap,bd=new WeakMap,Ed=new WeakSet,mp=function(){var r;const n=((r=bt(this,yl))==null?void 0:r.state)??uM();Gs(this,Ou,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},QC=function(n){ea.batch(()=>{var r,i,a,o,c,u,h,m;if(bt(this,bd)&&this.hasListeners()){const _=bt(this,Ou).variables,p=bt(this,Ou).context,g={client:bt(this,yd),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(r=bt(this,bd)).onSuccess)==null||i.call(r,n.data,_,p,g),(o=(a=bt(this,bd)).onSettled)==null||o.call(a,n.data,null,_,p,g)):(n==null?void 0:n.type)==="error"&&((u=(c=bt(this,bd)).onError)==null||u.call(c,n.error,_,p,g),(m=(h=bt(this,bd)).onSettled)==null||m.call(h,void 0,n.error,_,p,g))}this.listeners.forEach(_=>{_(bt(this,Ou))})})},XT),Tc,JT,bw=(JT=class extends gm{constructor(e={}){super();an(this,Tc);this.config=e,Gs(this,Tc,new Map)}build(e,n,r){const i=n.queryKey,a=n.queryHash??K2(i,n);let o=this.get(a);return o||(o=new hw({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){bt(this,Tc).has(e.queryHash)||(bt(this,Tc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=bt(this,Tc).get(e.queryHash);n&&(e.destroy(),n===e&&bt(this,Tc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ea.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return bt(this,Tc).get(e)}getAll(){return[...bt(this,Tc).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Q5(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Q5(e,r)):n}notify(e){ea.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ea.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ea.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Tc=new WeakMap,JT),xi,wu,Lu,em,tm,Pu,sm,nm,ZT,Cw=(ZT=class{constructor(t={}){an(this,xi);an(this,wu);an(this,Lu);an(this,em);an(this,tm);an(this,Pu);an(this,sm);an(this,nm);Gs(this,xi,t.queryCache||new bw),Gs(this,wu,t.mutationCache||new pw),Gs(this,Lu,t.defaultOptions||{}),Gs(this,em,new Map),Gs(this,tm,new Map),Gs(this,Pu,0)}mount(){Mx(this,Pu)._++,bt(this,Pu)===1&&(Gs(this,sm,Y2.subscribe(async t=>{t&&(await this.resumePausedMutations(),bt(this,xi).onFocus())})),Gs(this,nm,Lp.subscribe(async t=>{t&&(await this.resumePausedMutations(),bt(this,xi).onOnline())})))}unmount(){var t,e;Mx(this,Pu)._--,bt(this,Pu)===0&&((t=bt(this,sm))==null||t.call(this),Gs(this,sm,void 0),(e=bt(this,nm))==null||e.call(this),Gs(this,nm,void 0))}isFetching(t){return bt(this,xi).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return bt(this,wu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=bt(this,xi).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=bt(this,xi).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Wu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return bt(this,xi).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=bt(this,xi).get(r.queryHash),a=i==null?void 0:i.state.data,o=sw(e,a);if(o!==void 0)return bt(this,xi).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ea.batch(()=>bt(this,xi).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=bt(this,xi).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=bt(this,xi);ea.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=bt(this,xi);return ea.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ea.batch(()=>bt(this,xi).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(za).catch(za)}invalidateQueries(t,e={}){return ea.batch(()=>(bt(this,xi).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ea.batch(()=>bt(this,xi).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(za)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(za)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=bt(this,xi).build(this,e);return n.isStaleByTime(Wu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(za).catch(za)}fetchInfiniteQuery(t){return t.behavior=J5(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(za).catch(za)}ensureInfiniteQueryData(t){return t.behavior=J5(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Lp.isOnline()?bt(this,wu).resumePausedMutations():Promise.resolve()}getQueryCache(){return bt(this,xi)}getMutationCache(){return bt(this,wu)}getDefaultOptions(){return bt(this,Lu)}setDefaultOptions(t){Gs(this,Lu,t)}setQueryDefaults(t,e){bt(this,em).set(Vh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...bt(this,em).values()],n={};return e.forEach(r=>{$g(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){bt(this,tm).set(Vh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...bt(this,tm).values()],n={};return e.forEach(r=>{$g(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...bt(this,Lu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=K2(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Q2&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...bt(this,Lu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){bt(this,xi).clear(),bt(this,wu).clear()}},xi=new WeakMap,wu=new WeakMap,Lu=new WeakMap,em=new WeakMap,tm=new WeakMap,Pu=new WeakMap,sm=new WeakMap,nm=new WeakMap,ZT),hM=b.createContext(void 0),V2=t=>{const e=b.useContext(hM);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Nw=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(hM.Provider,{value:t,children:e})),fM=b.createContext(!1),Sw=()=>b.useContext(fM);fM.Provider;function vw(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ew=b.createContext(vw()),Dw=()=>b.useContext(Ew),Rw=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Tw=t=>{b.useEffect(()=>{t.clearReset()},[t])},Mw=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||iM(n,[t.error,r])),Iw=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},jw=(t,e)=>t.isLoading&&t.isFetching&&!e,Ow=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,eE=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function ww(t,e,n){var _,p,g,C,y;const r=Sw(),i=Dw(),a=V2(),o=a.defaultQueryOptions(t);(p=(_=a.getDefaultOptions().queries)==null?void 0:_._experimental_beforeQuery)==null||p.call(_,o),o._optimisticResults=r?"isRestoring":"optimistic",Iw(o),Rw(o,i),Tw(i);const c=!a.getQueryCache().get(o.queryHash),[u]=b.useState(()=>new e(a,o)),h=u.getOptimisticResult(o),m=!r&&t.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(N=>{const v=m?u.subscribe(ea.batchCalls(N)):za;return u.updateResult(),v},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),b.useEffect(()=>{u.setOptions(o)},[o,u]),Ow(o,h))throw eE(o,u,i);if(Mw({result:h,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((C=(g=a.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||C.call(g,o,h),o.experimental_prefetchInRender&&!$h&&jw(h,r)){const N=c?eE(o,u,i):(y=a.getQueryCache().get(o.queryHash))==null?void 0:y.promise;N==null||N.catch(za).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?h:u.trackResult(h)}function Lw(t,e){return ww(t,fw)}function Pw(t,e){const n=V2(),[r]=b.useState(()=>new yw(n,t));b.useEffect(()=>{r.setOptions(t)},[r,t]);const i=b.useSyncExternalStore(b.useCallback(o=>r.subscribe(ea.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=b.useCallback((o,c)=>{r.mutate(o,c).catch(za)},[r]);if(i.error&&iM(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const Aw="modulepreload",kw=function(t){return"/"+t},tE={},bb=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=o(n.map(h=>{if(h=kw(h),h in tE)return;tE[h]=!0;const m=h.endsWith(".css"),_=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":Aw,m||(p.as="script"),p.crossOrigin="",p.href=h,u&&p.setAttribute("nonce",u),document.head.appendChild(p),m)return new Promise((g,C)=>{p.addEventListener("load",g),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var Uw=function(){return null};const sE=new Cw({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1,retryDelay:1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0,networkMode:"online"},mutations:{retry:0,networkMode:"online"}}});/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gw=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),nE=t=>{const e=Gw(t);return e.charAt(0).toUpperCase()+e.slice(1)},mM=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Ww=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>b.createElement("svg",{ref:u,...Fw,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:mM("lucide",i),...!a&&!Ww(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,m])=>b.createElement(h,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=(t,e)=>{const n=b.forwardRef(({className:r,...i},a)=>b.createElement(Kw,{ref:a,iconNode:e,className:mM(`lucide-${Bw(nE(t))}`,`lucide-${t}`,r),...i}));return n.displayName=nE(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],i0=Us("arrow-down",Qw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],z2=Us("arrow-left",Yw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Vw=Us("arrow-right-left",$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Hw=Us("arrow-right",zw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],a0=Us("arrow-up",qw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],Jw=Us("boxes",Xw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],eL=Us("building-2",Zw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],sL=Us("cable",tL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rm=Us("calendar",nL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],rE=Us("camera",rL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ho=Us("check",iL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hr=Us("chevron-down",aL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gM=Us("chevron-left",lL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cL=Us("chevron-right",oL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Pr=Us("chevron-up",dL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$r=Us("circle-alert",uL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ai=Us("circle-check-big",hL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],l0=Us("circle-check",fL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bo=Us("circle-x",mL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],C1=Us("clipboard-list",gL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_M=Us("clock",_L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Pp=Us("credit-card",xL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],yL=Us("crown",pL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],xM=Us("database",bL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],pM=Us("ellipsis",CL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],cg=Us("external-link",NL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],vL=Us("file-down",SL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zh=Us("file-text",EL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],yM=Us("funnel",DL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Dd=Us("history",RL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ML=Us("house",TL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bM=Us("info",IL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],OL=Us("layers",jL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],H2=Us("list",wL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],pn=Us("loader-circle",LL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],AL=Us("lock",PL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UL=Us("log-out",kL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Rd=Us("map-pin",BL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],WL=Us("map",GL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],KL=Us("menu",FL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],YC=Us("message-square",QL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],$L=Us("monitor",YL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],zL=Us("navigation",VL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],im=Us("package",HL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],XL=Us("pause",qL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],CM=Us("pen-tool",JL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],$C=Us("phone",ZL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],tP=Us("play",eP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nP=Us("plus",sP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Co=Us("refresh-cw",rP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ki=Us("rotate-ccw",iP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]],lP=Us("router",aP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cP=Us("save",oP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],o0=Us("scan-barcode",dP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lc=Us("search",uP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],q2=Us("send",hP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],iE=Us("server",fP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X2=Us("settings",mP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],aE=Us("shield",gP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],VC=Us("smartphone",_P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ap=Us("square-check-big",xP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],kp=Us("square-x",pP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],bP=Us("test-tube",yP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],NP=Us("trash-2",CP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xo=Us("triangle-alert",SP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],EP=Us("tv",vP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],RP=Us("user-check",DP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],MP=Us("user-plus",TP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],c0=Us("user",IP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],NM=Us("users",jP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Up=Us("wifi",OP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Fu=Us("wrench",wP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mi=Us("x",LP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lE=Us("zap",PP),AP=({className:t})=>s.jsx("div",{className:`font-extrabold tracking-tight ${t}`,style:{fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"},children:"D'LIVE"}),kP=({onLogout:t,onNavigateHome:e,onNavigateBack:n,onMenuClick:r,currentView:i,userInfo:a,selectedWorkItem:o})=>{const[c,u]=b.useState(!1),h=b.useRef(null);b.useEffect(()=>{const g=C=>{h.current&&!h.current.contains(C.target)&&u(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const _=(g=>{const C=(o==null?void 0:o.WRK_CD_NM)||(o==null?void 0:o.typeDisplay)||"";switch(g){case"today-work":return{title:" "};case"work-management":return{title:""};case"work-order-detail":return{title:""};case"work-complete-form":return{title:"",workType:C};case"work-complete-detail":return{title:"",workType:C};case"work-item-list":return{title:""};case"work-process-flow":return{title:"",workType:C};case"customer-management":return{title:""};case"equipment-management":return{title:""};case"other-management":return{title:""};case"coming-soon":return{title:""};default:return null}})(i),p=i==="today-work"||i==="menu"||!i;return s.jsx("header",{className:"bg-white shadow-sm fixed top-0 left-0 right-0 z-[100] border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6",children:s.jsxs("div",{className:"flex items-center h-12",children:[s.jsxs("div",{className:"flex items-center gap-0 w-24 flex-shrink-0",children:[!p&&s.jsx("button",{onClick:n||e,className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors duration-200","aria-label":"",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),r&&s.jsx("button",{onClick:r,className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors duration-200","aria-label":" ",children:s.jsx(KL,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:p?s.jsx("button",{onClick:e,className:"flex items-center cursor-pointer","aria-label":"  ",children:s.jsx(AP,{className:"text-xl text-blue-600"})}):_?s.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[_.title,_.workType&&s.jsxs("span",{className:"text-blue-600",children:["(",_.workType,")"]})]}):null}),s.jsx("div",{className:"w-24 flex-shrink-0 flex justify-end",children:s.jsxs("div",{className:"relative",ref:h,children:[s.jsxs("button",{onClick:()=>u(!c),className:`flex flex-col items-center p-1.5 rounded-lg transition-colors duration-200 ${c?"text-blue-700 bg-blue-50":"text-blue-600 hover:text-blue-700 hover:bg-blue-50"}`,"aria-label":" ",children:[s.jsx(c0,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[0.5625rem] mt-0.5 truncate max-w-[60px]",children:a?`${a.userName||""}`:""})]}),c&&s.jsxs("div",{className:"fixed right-2 top-12 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-[9999]",children:[s.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:(a==null?void 0:a.userName)||""}),s.jsx("p",{className:"text-xs text-gray-500",children:(a==null?void 0:a.userId)||""}),s.jsx("p",{className:"text-xs text-gray-400",children:(a==null?void 0:a.userRole)||""})]}),s.jsx("button",{onClick:()=>{u(!1),t()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:""})]})]})})]})})})};var gp={exports:{}},UP=gp.exports,oE;function BP(){return oE||(oE=1,(function(t,e){(function(n,r){t.exports=r()})(UP,(function(){var n=1e3,r=6e4,i=36e5,a="millisecond",o="second",c="minute",u="hour",h="day",m="week",_="month",p="quarter",g="year",C="date",y="Invalid Date",N=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(X){var z=["th","st","nd","rd"],$=X%100;return"["+X+(z[($-20)%10]||z[$]||z[0])+"]"}},w=function(X,z,$){var F=String(X);return!F||F.length>=z?X:""+Array(z+1-F.length).join($)+X},M={s:w,z:function(X){var z=-X.utcOffset(),$=Math.abs(z),F=Math.floor($/60),L=$%60;return(z<=0?"+":"-")+w(F,2,"0")+":"+w(L,2,"0")},m:function X(z,$){if(z.date()<$.date())return-X($,z);var F=12*($.year()-z.year())+($.month()-z.month()),L=z.clone().add(F,_),re=$-L<0,fe=z.clone().add(F+(re?-1:1),_);return+(-(F+($-L)/(re?L-fe:fe-L))||0)},a:function(X){return X<0?Math.ceil(X)||0:Math.floor(X)},p:function(X){return{M:_,y:g,w:m,d:h,D:C,h:u,m:c,s:o,ms:a,Q:p}[X]||String(X||"").toLowerCase().replace(/s$/,"")},u:function(X){return X===void 0}},k="en",B={};B[k]=P;var G="$isDayjsObject",U=function(X){return X instanceof Y||!(!X||!X[G])},I=function X(z,$,F){var L;if(!z)return k;if(typeof z=="string"){var re=z.toLowerCase();B[re]&&(L=re),$&&(B[re]=$,L=re);var fe=z.split("-");if(!L&&fe.length>1)return X(fe[0])}else{var T=z.name;B[T]=z,L=T}return!F&&L&&(k=L),L||!F&&k},E=function(X,z){if(U(X))return X.clone();var $=typeof z=="object"?z:{};return $.date=X,$.args=arguments,new Y($)},A=M;A.l=I,A.i=U,A.w=function(X,z){return E(X,{locale:z.$L,utc:z.$u,x:z.$x,$offset:z.$offset})};var Y=(function(){function X($){this.$L=I($.locale,null,!0),this.parse($),this.$x=this.$x||$.x||{},this[G]=!0}var z=X.prototype;return z.parse=function($){this.$d=(function(F){var L=F.date,re=F.utc;if(L===null)return new Date(NaN);if(A.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var fe=L.match(N);if(fe){var T=fe[2]-1||0,j=(fe[7]||"0").substring(0,3);return re?new Date(Date.UTC(fe[1],T,fe[3]||1,fe[4]||0,fe[5]||0,fe[6]||0,j)):new Date(fe[1],T,fe[3]||1,fe[4]||0,fe[5]||0,fe[6]||0,j)}}return new Date(L)})($),this.init()},z.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},z.$utils=function(){return A},z.isValid=function(){return this.$d.toString()!==y},z.isSame=function($,F){var L=E($);return this.startOf(F)<=L&&L<=this.endOf(F)},z.isAfter=function($,F){return E($)<this.startOf(F)},z.isBefore=function($,F){return this.endOf(F)<E($)},z.$g=function($,F,L){return A.u($)?this[F]:this.set(L,$)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function($,F){var L=this,re=!!A.u(F)||F,fe=A.p($),T=function(Ce,ge){var Ge=A.w(L.$u?Date.UTC(L.$y,ge,Ce):new Date(L.$y,ge,Ce),L);return re?Ge:Ge.endOf(h)},j=function(Ce,ge){return A.w(L.toDate()[Ce].apply(L.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(ge)),L)},K=this.$W,J=this.$M,q=this.$D,V="set"+(this.$u?"UTC":"");switch(fe){case g:return re?T(1,0):T(31,11);case _:return re?T(1,J):T(0,J+1);case m:var ce=this.$locale().weekStart||0,me=(K<ce?K+7:K)-ce;return T(re?q-me:q+(6-me),J);case h:case C:return j(V+"Hours",0);case u:return j(V+"Minutes",1);case c:return j(V+"Seconds",2);case o:return j(V+"Milliseconds",3);default:return this.clone()}},z.endOf=function($){return this.startOf($,!1)},z.$set=function($,F){var L,re=A.p($),fe="set"+(this.$u?"UTC":""),T=(L={},L[h]=fe+"Date",L[C]=fe+"Date",L[_]=fe+"Month",L[g]=fe+"FullYear",L[u]=fe+"Hours",L[c]=fe+"Minutes",L[o]=fe+"Seconds",L[a]=fe+"Milliseconds",L)[re],j=re===h?this.$D+(F-this.$W):F;if(re===_||re===g){var K=this.clone().set(C,1);K.$d[T](j),K.init(),this.$d=K.set(C,Math.min(this.$D,K.daysInMonth())).$d}else T&&this.$d[T](j);return this.init(),this},z.set=function($,F){return this.clone().$set($,F)},z.get=function($){return this[A.p($)]()},z.add=function($,F){var L,re=this;$=Number($);var fe=A.p(F),T=function(J){var q=E(re);return A.w(q.date(q.date()+Math.round(J*$)),re)};if(fe===_)return this.set(_,this.$M+$);if(fe===g)return this.set(g,this.$y+$);if(fe===h)return T(1);if(fe===m)return T(7);var j=(L={},L[c]=r,L[u]=i,L[o]=n,L)[fe]||1,K=this.$d.getTime()+$*j;return A.w(K,this)},z.subtract=function($,F){return this.add(-1*$,F)},z.format=function($){var F=this,L=this.$locale();if(!this.isValid())return L.invalidDate||y;var re=$||"YYYY-MM-DDTHH:mm:ssZ",fe=A.z(this),T=this.$H,j=this.$m,K=this.$M,J=L.weekdays,q=L.months,V=L.meridiem,ce=function(ge,Ge,te,he){return ge&&(ge[Ge]||ge(F,re))||te[Ge].slice(0,he)},me=function(ge){return A.s(T%12||12,ge,"0")},Ce=V||function(ge,Ge,te){var he=ge<12?"AM":"PM";return te?he.toLowerCase():he};return re.replace(v,(function(ge,Ge){return Ge||(function(te){switch(te){case"YY":return String(F.$y).slice(-2);case"YYYY":return A.s(F.$y,4,"0");case"M":return K+1;case"MM":return A.s(K+1,2,"0");case"MMM":return ce(L.monthsShort,K,q,3);case"MMMM":return ce(q,K);case"D":return F.$D;case"DD":return A.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return ce(L.weekdaysMin,F.$W,J,2);case"ddd":return ce(L.weekdaysShort,F.$W,J,3);case"dddd":return J[F.$W];case"H":return String(T);case"HH":return A.s(T,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return Ce(T,j,!0);case"A":return Ce(T,j,!1);case"m":return String(j);case"mm":return A.s(j,2,"0");case"s":return String(F.$s);case"ss":return A.s(F.$s,2,"0");case"SSS":return A.s(F.$ms,3,"0");case"Z":return fe}return null})(ge)||fe.replace(":","")}))},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function($,F,L){var re,fe=this,T=A.p(F),j=E($),K=(j.utcOffset()-this.utcOffset())*r,J=this-j,q=function(){return A.m(fe,j)};switch(T){case g:re=q()/12;break;case _:re=q();break;case p:re=q()/3;break;case m:re=(J-K)/6048e5;break;case h:re=(J-K)/864e5;break;case u:re=J/i;break;case c:re=J/r;break;case o:re=J/n;break;default:re=J}return L?re:A.a(re)},z.daysInMonth=function(){return this.endOf(_).$D},z.$locale=function(){return B[this.$L]},z.locale=function($,F){if(!$)return this.$L;var L=this.clone(),re=I($,F,!0);return re&&(L.$L=re),L},z.clone=function(){return A.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},X})(),se=Y.prototype;return E.prototype=se,[["$ms",a],["$s",o],["$m",c],["$H",u],["$W",h],["$M",_],["$y",g],["$D",C]].forEach((function(X){se[X[1]]=function(z){return this.$g(z,X[0],X[1])}})),E.extend=function(X,z){return X.$i||(X(z,Y,E),X.$i=!0),E},E.locale=I,E.isDayjs=U,E.unix=function(X){return E(1e3*X)},E.en=B[k],E.Ls=B,E.p={},E}))})(gp)),gp.exports}var GP=BP();const md=W2(GP);var _n=(t=>(t.Pending="",t.Completed="",t.Cancelled="",t))(_n||{}),ga=(t=>(t.Installation="",t.AS="A/S",t.Change="",t.Move="",t.Etc="",t))(ga||{});const Cb=[{code:"020",name:"",template:"[$1]",kkoMsgId:"KKO020_003",refCode:"WK"},{code:"021",name:"",template:"[$1]      .",kkoMsgId:"KKO021_001",refCode:"WK"},{code:"027",name:"",template:"[$1]  [$2]    .()",kkoMsgId:"KKO027_001",refCode:"WK"},{code:"028",name:"",template:"[$1]  [$2]    [$3]   .",kkoMsgId:"KKO028_001",refCode:"WK"},{code:"138",name:"",template:"[$1] .   .",kkoMsgId:"KKO138_003",refCode:"AS"},{code:"139",name:"",template:"[$1]AS    . :$2",kkoMsgId:"KKO139_001",refCode:"AS"},{code:"141",name:"",template:"[$1][$2]",kkoMsgId:"KKO141_001",refCode:"AS"},{code:"059_002",name:"KB",template:"[$1][$2]",kkoMsgId:"KKO059_002",refCode:"WK"},{code:"059",name:"URL",template:"[$1][$2]",kkoMsgId:"KKO059_001",refCode:"WK"},{code:"271",name:"",template:"[]  1644-1100 . .",kkoMsgId:"KKO271_001",refCode:"AS"},{code:"235",name:"()",template:"[$1] [$2]",kkoMsgId:"KKO059_002",refCode:"WK"},{code:"059_005",name:"()SE",template:"[$1] [$2]",kkoMsgId:"KKO059_002",refCode:"WK"}],J2=({customer:t,className:e=""})=>{if(!t.isVip)return null;const r=(()=>{switch(t.vipLevel){case"VVIP":return{bgColor:"bg-gradient-to-r from-yellow-400 to-yellow-500",textColor:"text-yellow-900",borderColor:"border-yellow-300",shadow:"shadow-yellow-200",label:"VVIP"};case"VIP":default:return{bgColor:"bg-gradient-to-r from-purple-400 to-purple-500",textColor:"text-purple-900",borderColor:"border-purple-300",shadow:"shadow-purple-200",label:"VIP"}}})();return s.jsxs("div",{className:`
        inline-flex items-center px-2 py-1 rounded-full text-xs font-bold
        ${r.bgColor} ${r.textColor} ${r.borderColor}
        border shadow-sm ${r.shadow}
        ${e}
      `,children:[s.jsx(yL,{className:"w-3 h-3 mr-1"}),r.label]})},WP=t=>{try{const e=new Date(t);if(isNaN(e.getTime()))return"  ";const n=e.getMonth()+1,r=e.getDate();return`${n} ${r}`}catch{return"  "}},Bp=t=>{try{const e=new Date(t);if(isNaN(e.getTime()))return"  ";const n=e.getMonth()+1,r=e.getDate();let i=e.getHours();const a=i>=12?"":"";i=i%12||12;const o=e.getMinutes().toString().padStart(2,"0");return`${n} ${r} ${a} ${i}:${o}`}catch{return"  "}},Ji=t=>{if(!t)return"-";const e=String(t).replace(/\D/g,"");return e.length!==10?String(t):`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`},FP=({direction:t,onSelect:e,onSms:n,onWorkerAdjust:r,workStatusCounts:i,index:a})=>{const o=i||{pending:1,completed:0,cancelled:0},c=()=>{const _=o.pendingByProdGrp||{},p=o.completedByProdGrp||{},g={};[...Object.keys(_),...Object.keys(p)].forEach(N=>{g[N]=(_[N]||0)+(p[N]||0)});const C=["D","I","V","C"],y=[];return C.forEach(N=>{g[N]&&g[N]>0&&y.push(`${N}_${g[N]}`)}),Object.keys(g).forEach(N=>{!C.includes(N)&&g[N]>0&&y.push(`${N}_${g[N]}`)}),y.join(" / ")},u=()=>{const _=c();return{statusBadges:s.jsxs("div",{className:"flex items-center gap-1",children:[o.pending>0&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-semibold bg-amber-50 text-amber-700 border border-amber-200",children:[" ",o.pending]}),o.completed>0&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-semibold bg-emerald-50 text-emerald-700 border border-emerald-200",children:[" ",o.completed]}),o.cancelled>0&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-semibold bg-rose-50 text-rose-700 border border-rose-200",children:[" ",o.cancelled]})]}),serviceBadge:_?s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium bg-slate-100 text-slate-600 border border-slate-200",children:_}):null}},h=_=>{_.stopPropagation(),t.customer.phone&&(window.location.href=`tel:${t.customer.phone}`)},m=_=>{_.stopPropagation(),n&&n(t)};return s.jsx("div",{onClick:()=>e(t),className:"bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 transition-all duration-200 cursor-pointer active:scale-[0.99] mb-3 touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"p-4",children:[(()=>{const{statusBadges:_,serviceBadge:p}=u();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a!==void 0&&s.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center rounded-full bg-blue-500 text-white text-sm font-bold",children:a}),s.jsxs("h3",{className:"font-bold text-gray-900 text-base truncate",children:[t.customer.name,t.customer.id&&s.jsxs("span",{className:"font-normal ml-1",children:["(",t.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200 flex-shrink-0",children:t.typeDisplay}),t.WRK_CD==="04"&&t.WRK_DTL_TCD==="0440"&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-50 text-amber-700 border border-amber-200 flex-shrink-0",children:""})]}),s.jsx("div",{className:"flex-shrink-0",children:_})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm text-gray-600",children:Bp(t.scheduledAt)}),s.jsx(J2,{customer:t.customer})]}),s.jsx("div",{className:"flex-shrink-0",children:p})]})]})})(),s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsxs("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:t.customer.address||"  "})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("button",{onClick:h,className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),""]}),n&&s.jsxs("button",{onClick:m,className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),""]}),r&&s.jsxs("button",{onClick:_=>{_.stopPropagation(),r(t)},className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"whitespace-nowrap",children:""})]})]})]})})},Nb=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),cE=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})}),dE=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),Sb=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),vb=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})}),uu=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),KP=t=>[{id:`${t}_1`,directionId:t,type:ga.AS,typeDisplay:"A/S ",status:_n.Completed,scheduledAt:"2025-09-30T14:00:00",customer:{id:"1001857578",name:"",phone:"01044586687",address:"   261 17"},details:"   ",assignedEquipment:[],productName:"ISP  ",cellNo:"-",installLocation:""},{id:`${t}_2`,directionId:t,type:ga.AS,typeDisplay:"A/S ",status:_n.Pending,scheduledAt:"2025-09-30T14:30:00",customer:{id:"1001857578",name:"",phone:"01044586687",address:"   261 17"},details:"  ",assignedEquipment:[],productName:"ISP ",cellNo:"C001",installLocation:""},{id:`${t}_3`,directionId:t,type:ga.AS,typeDisplay:"A/S ",status:_n.Pending,scheduledAt:"2025-09-30T15:00:00",customer:{id:"1001857578",name:"",phone:"01044586687",address:"   261 17"},details:"  ",assignedEquipment:[],productName:"ISP  ",cellNo:"C002",installLocation:""}],zC=async t=>{console.log("[LGU API] getUplsCtrtInfo params:",t);try{const e=await fetch(`${Ns}/customer/etc/getUplsCtrtInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[LGU API] getUplsCtrtInfo HTTP error:",e.status),null;const n=await e.json();return console.log("[LGU API] getUplsCtrtInfo response:",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:n?[n]:null}catch(e){return console.error("[LGU API] getUplsCtrtInfo error:",e),null}},uE=async t=>{console.log("[L2 API] getUplsNwcs params:",t);try{const e=await fetch(`${Ns}/customer/etc/getUplsNwcs`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[L2 API] getUplsNwcs HTTP error:",e.status),null;const n=await e.json();return console.log("[L2 API] getUplsNwcs response:",n),Array.isArray(n)&&n.length>0?n[0]:n&&typeof n=="object"?n:null}catch(e){return console.error("[L2 API] getUplsNwcs error:",e),null}},hE=async t=>{console.log("[L2 API] getUplsEntrEqipDtl params:",t);try{const e=await fetch(`${Ns}/customer/etc/getUplsEntrEqipDtl`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[L2 API] getUplsEntrEqipDtl HTTP error:",e.status),null;const n=await e.json();return console.log("[L2 API] getUplsEntrEqipDtl response:",n),n}catch(e){return console.error("[L2 API] getUplsEntrEqipDtl error:",e),null}},QP=async t=>{if(console.log("[ API] setCertifyCL04 params:",t),qn())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"   "};try{const e=await fetch(`${Ns}/customer/etc/setCertifyCL04`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CMD:"CL-04",...t})});if(!e.ok)return console.error("[ API] setCertifyCL04 HTTP error:",e.status),{code:"ERROR",message:`HTTP error: ${e.status}`};const n=await e.json();return console.log("[ API] setCertifyCL04 response:",n),{code:n.code||n.RESULT_CODE||"SUCCESS",message:n.message||n.RESULT_MSG||"   "}}catch(e){return console.error("[ API] setCertifyCL04 error:",e),{code:"ERROR",message:String(e)}}},Gp=async t=>{console.log("[Certify API] setCertifyCL06 params:",t);try{const e=await fetch(`${Ns}/customer/etc/setCertifyCL06`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,CONT_ID:t.CTRT_ID})});if(!e.ok)return console.error("[Certify API] setCertifyCL06 HTTP error:",e.status),{ERROR:`HTTP ${e.status}`};const n=await e.json();return console.log("[Certify API] setCertifyCL06 response:",n),n.data?n.data:n}catch(e){return console.error("[Certify API] setCertifyCL06 error:",e),{ERROR:String(e)}}},Vg=async t=>{console.log("[Certify API] getCertifyCL08 params:",t);try{const e=await fetch(`${Ns}/customer/etc/getCertifyCL08`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,CONT_ID:t.CTRT_ID})});if(!e.ok)return console.error("[Certify API] getCertifyCL08 HTTP error:",e.status),{ERROR:`HTTP ${e.status}`};const n=await e.json();return console.log("[Certify API] getCertifyCL08 response:",n),n.data?n.data:n}catch(e){return console.error("[Certify API] getCertifyCL08 error:",e),{ERROR:String(e)}}},N1=async()=>{var t;if(console.log("[FTTH API] getCertifyProdMap "),qn())return await new Promise(e=>setTimeout(e,300)),["PD10007399","PD10007400"];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${Ns}/customer/work/getCertifyProdMap`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify({})});if(!n.ok)return console.error("[FTTH API] getCertifyProdMap HTTP error:",n.status),[];const r=await n.json();console.log("[FTTH API] getCertifyProdMap response:",r);const i=((t=r.output)==null?void 0:t.output)||r.output;if(i&&Array.isArray(i)){const a=i.map(o=>o.PROD_CD).filter(Boolean);return console.log("[FTTH API] FTTH   :",a.length,""),a}if(Array.isArray(r)){const a=r.map(o=>o.PROD_CD).filter(Boolean);return console.log("[FTTH API] FTTH   :",a.length,""),a}return[]}catch(e){return console.error("[FTTH API] getCertifyProdMap error:",e),[]}},Z2=async t=>{console.log("[Certify API] getUplsLdapRslt CTRT_ID:",t);try{const e=await fetch(`${Ns}/customer/etc/getUplsLdapRslt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CTRT_ID:t})});if(!e.ok)return console.error("[Certify API] getUplsLdapRslt HTTP error:",e.status),{exists:!1,data:[]};const n=await e.json();console.log("[Certify API] getUplsLdapRslt response:",n);const r=n.output||n.data||[];return{exists:(n.rowcount||r.length||0)>0,data:Array.isArray(r)?r:[]}}catch(e){return console.error("[Certify API] getUplsLdapRslt error:",e),{exists:!1,data:[]}}},YP=async t=>{try{const e=await fetch(`${Ns}/customer/etc/getCertifyApiHist`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});return e.ok?(await e.json()).output||[]:[]}catch(e){return console.error("[Signal API] getCertifyApiHist error:",e),[]}},$P=async t=>{if(qn())return await new Promise(e=>setTimeout(e,1e3)),[{CONSREQNO:"20240101001",CTRT_ID:"CTRT001",CONSCHRRNM:"",CONSCHRRTLNO:"010-1234-5678",CONSCHRRMAKRMKS:"LGU+   ",CONSFNSHSCDLDT:"20240115",CONSFNSHDT:"20240114",CONSNEEDDIVSNM:"",CONSDLYRSNNM:"",CONSIPSBPRSSDT:"",CONSIPSBRSNNM:"",CONSNREQPRSSDT:"",CONSNREQRSNNM:"",ENTR_NO:"500030621784",ENTR_RQST_NO:"300241327941",MSTR_FL:"Y",SBGNEGNRNM:"LGU+"},{CONSREQNO:"20240102002",CTRT_ID:"CTRT002",CONSCHRRNM:"",CONSCHRRTLNO:"010-2345-6789",CONSCHRRMAKRMKS:"  ",CONSFNSHSCDLDT:"20240120",CONSFNSHDT:"",CONSNEEDDIVSNM:"",CONSDLYRSNNM:" ",CONSIPSBPRSSDT:"",CONSIPSBRSNNM:"",CONSNREQPRSSDT:"",CONSNREQRSNNM:"",ENTR_NO:"500030621785",ENTR_RQST_NO:"300241327942",MSTR_FL:"Y",SBGNEGNRNM:"LGU+"}];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${Ns}/customer/etc/getUplsRqstConsList`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error(`LGU    : ${n.status}`);return await n.json()}catch(e){throw console.error("LGU    :",e),e}},VP=async t=>{console.log("[LGU API] uplsEntrBgnEstbChg params:",t);try{const e=await fetch(`${Ns}/customer/receipt/uplsEntrBgnEstbChg`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[LGU API] uplsEntrBgnEstbChg HTTP error:",e.status),{RESULT_CD:"N",RESULT_MSG:`HTTP error: ${e.status}`};const n=await e.json();return console.log("[LGU API] uplsEntrBgnEstbChg response:",n),{RESULT_CD:n.RESULT_CD||"N",RESULT_MSG:n.RESULT_MSG||"",ENTR_NO:n.ENTR_NO||"",ENTR_RQST_NO:n.ENTR_RQST_NO||"",ENTR_CNTRT_NO:n.ENTR_CNTRT_NO||"",SVC_CD:n.SVC_CD||"",UPLS_PROD_YN:n.UPLS_PROD_YN||"",RQST_DV_CD:n.RQST_DV_CD||"",NET_TYP:n.NET_TYP||""}}catch(e){return console.error("[LGU API] uplsEntrBgnEstbChg error:",e),{RESULT_CD:"N",RESULT_MSG:String(e)}}},fE=async t=>{console.log("[LGU API] reqUplsHspdLdap params:",t);try{const e=await fetch(`${Ns}/lgu/construction-request`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw console.error("[LGU API] reqUplsHspdLdap HTTP error:",e.status),new Error(`LDAP request failed: ${e.status}`);const n=await e.json();return console.log("[LGU API] reqUplsHspdLdap response:",n),n}catch(e){throw console.error("[LGU API] reqUplsHspdLdap error:",e),e}},zP=async t=>{console.log("[LGU API] getUplsDuplicationMember params:",t);try{const e=await fetch(`${Ns}/customer/etc/getUplsDuplicationMember`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return{success:!1,ENTR_EXIST:"N",RESULT_CD:"N",RESULT_MSG:`HTTP error: ${e.status}`};const n=await e.json();console.log("[LGU API] getUplsDuplicationMember response:",n);const r=Array.isArray(n)?n[0]:n,i=(r==null?void 0:r.RESULT_CD)||"";return i.startsWith("N")?{success:!1,ENTR_EXIST:"N",RESULT_CD:i,RESULT_MSG:(r==null?void 0:r.RESULT_MSG)||""}:{success:!0,ENTR_EXIST:(r==null?void 0:r.ENTR_EXIST)||"N",RESULT_CD:i,RESULT_MSG:(r==null?void 0:r.RESULT_MSG)||""}}catch(e){return console.error("[LGU API] getUplsDuplicationMember error:",e),{success:!1,ENTR_EXIST:"N",RESULT_CD:"N",RESULT_MSG:String(e)}}},SM=async t=>{console.log("[LGU API] getUplsEqipInfo params:",t);try{const e=await fetch(`${Ns}/customer/etc/getUplsEqipInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return[];const n=await e.json();return console.log("[LGU API] getUplsEqipInfo response:",n),Array.isArray(n)?n:n.output&&Array.isArray(n.output)?n.output:n?[n]:[]}catch(e){return console.error("[LGU API] getUplsEqipInfo error:",e),[]}},HC=async t=>{console.log("[LGU API] getUplsEqipPortInfo params:",t);try{const e=await fetch(`${Ns}/customer/etc/getUplsEqipPortInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return[];const n=await e.json();return console.log("[LGU API] getUplsEqipPortInfo response:",n),Array.isArray(n)?n:n.output&&Array.isArray(n.output)?n.output:n?[n]:[]}catch(e){return console.error("[LGU API] getUplsEqipPortInfo error:",e),[]}},HP=async t=>{console.log("[LGU API] setUplsRqstConsReq params:",t);try{const e=await fetch(`${Ns}/customer/etc/setUplsRqstConsReq`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw new Error(`Port : ${e.status}`);const n=await e.json();return console.log("[LGU API] setUplsRqstConsReq response:",n),n}catch(e){throw console.error("[LGU API] setUplsRqstConsReq error:",e),e}},vM=async t=>{if(qn())return await new Promise(e=>setTimeout(e,1500)),[{code:"SUCCESS",message:"LGU    ()",CANCEL_ID:"FAULT"+Date.now(),STATUS:""}];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${Ns}/lgu/network-fault`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error(`LGU   : ${n.status}`);return await n.json()}catch(e){throw console.error("LGU   :",e),e}};class Qs extends Error{constructor(e,n,r){super(e),this.name="NetworkError",this.statusCode=n,this.details=r}}class qP{constructor(){this.states=new Map,this.failureThreshold=5,this.openDuration=3e4,this.halfOpenDuration=1e4}getState(e){return this.states.has(e)||this.states.set(e,{failureCount:0,lastFailureTime:0,state:"CLOSED"}),this.states.get(e)}canRequest(e){const n=this.getState(e),r=Date.now();return n.state==="CLOSED"?!0:n.state==="OPEN"?r-n.lastFailureTime>=this.openDuration?(console.log(`[Circuit Breaker] ${e} - OPEN  HALF_OPEN ( )`),n.state="HALF_OPEN",!0):(console.warn(` Circuit Breaker: ${e} -   (${Math.round((this.openDuration-(r-n.lastFailureTime))/1e3)}   )`),!1):n.state==="HALF_OPEN"}recordSuccess(e){const n=this.getState(e);n.state==="HALF_OPEN"&&console.log(`[Circuit Breaker] ${e} - HALF_OPEN  CLOSED ()`),n.failureCount=0,n.state="CLOSED"}recordFailure(e){const n=this.getState(e);n.failureCount++,n.lastFailureTime=Date.now(),n.failureCount>=this.failureThreshold?(n.state!=="OPEN"&&console.error(` Circuit Breaker: ${e} - CLOSED  OPEN (${this.failureThreshold}  , ${this.openDuration/1e3}  )`),n.state="OPEN"):n.state==="HALF_OPEN"&&(console.warn(`[Circuit Breaker] ${e} - HALF_OPEN  OPEN ( )`),n.state="OPEN")}reset(){this.states.clear()}}class XP{constructor(){this.pendingRequests=new Map,this.maxAge=5e3}getOrCreate(e,n){this.cleanup();const r=this.pendingRequests.get(e);if(r)return console.log(`[Request Dedup]   : ${e} (  )`),r.promise;const i=n();return this.pendingRequests.set(e,{promise:i,timestamp:Date.now()}),i.finally(()=>{this.pendingRequests.delete(e)}),i}cleanup(){const e=Date.now();for(const[n,r]of this.pendingRequests.entries())e-r.timestamp>this.maxAge&&this.pendingRequests.delete(n)}reset(){this.pendingRequests.clear()}}const Nu=new qP,EM=new XP;typeof window<"u"&&(window.resetCircuitBreaker=()=>{Nu.reset(),EM.reset(),console.log("[API ] Circuit Breaker  Request Deduplicator ")});const mE=(t,e=" .")=>{switch(t){case 400:return" .   .";case 401:return" .";case 403:return"  .";case 404:return"    .";case 408:return"  .  .";case 429:return"   .    .";case 500:return"  .    .";case 502:case 503:return"   .    .";case 504:return"   .  .";default:return e}},ir=async(t,e,n=3,r=3e4)=>{if(!Nu.canRequest(t))throw new Qs("  .    .",503);if(!(e.method==="GET"||!e.method))return a();return EM.getOrCreate(t,a);async function a(){let o=null;for(let c=0;c<n;c++)try{const u=new AbortController,h=setTimeout(()=>u.abort(),r),m=await fetch(t,{...e,signal:u.signal});if(clearTimeout(h),m.ok)return Nu.recordSuccess(t),m;if(m.status>=400&&m.status<500)throw Nu.recordFailure(t),new Qs(mE(m.status),m.status);if(m.status>=500){Nu.recordFailure(t);let _=mE(m.status);try{const p=await m.json();p&&p.message&&(_=p.message)}catch{}throw new Qs(_,m.status)}return m}catch(u){if(o=u,u.name==="AbortError"){if(console.error(`API  ( ${c+1}/${n}):`,t),Nu.recordFailure(t),c===n-1)throw new Qs("  .  .",408)}else if(u instanceof TypeError&&u.message.includes("fetch")){if(console.error(`  ( ${c+1}/${n}):`,u),Nu.recordFailure(t),c===n-1)throw new Qs("  .",void 0,u)}else if(u instanceof Qs){if(u.statusCode&&u.statusCode>=400&&u.statusCode<500||c===n-1)throw u}else if(console.error(`API   ( ${c+1}/${n}):`,u),Nu.recordFailure(t),c===n-1)throw new Qs(u.message||"    .");if(c<n-1){const h=Math.min(1e3*Math.pow(2,c),5e3);console.log(`${h}ms  ...`),await new Promise(m=>setTimeout(m,h))}}throw o||new Qs("    .")}},JP=(t,e)=>{const n=["","","","","","","",""],r=[{type:ga.AS,display:"A/S"},{type:ga.Installation,display:""},{type:ga.Move,display:""},{type:ga.Change,display:""},{type:ga.Etc,display:""}],i=[_n.Pending,_n.Completed,_n.Cancelled],a=["   15 1","   123 5","   456 12","   789 3","   321 8","   654 2","   987 15","   147 7"];return n.map((c,u)=>{const h=r[u%r.length],m=i[u%i.length],_=9+u%8,p=u%4*15;return{id:`WRK${String(u+1).padStart(3,"0")}`,type:h.type,typeDisplay:h.display,status:m,scheduledAt:`2025-09-30T${String(_).padStart(2,"0")}:${String(p).padStart(2,"0")}:00`,customer:{id:`CUST${String(u+1).padStart(3,"0")}`,name:c,phone:`010-${String(Math.floor(Math.random()*9e3)+1e3)}-${String(Math.floor(Math.random()*9e3)+1e3)}`,address:a[u%a.length]},details:`${h.display}  `,assignedEquipment:[],directionId:`WRK${String(u+1).padStart(3,"0")}`}})},gE=async(t,e,n="N")=>{const r=typeof window<"u"?window.location.origin:"http://localhost:3000";try{return await(await ir(`${Ns}/login`,{method:"POST",headers:{"Content-Type":"application/json",Origin:r},credentials:"include",body:JSON.stringify({USR_ID:t,USR_PWD:e,DISCONN_YN:n})},1)).json()}catch(i){throw console.error(" API  :",i),i instanceof Qs?i:new Qs("   .  .")}},qn=()=>typeof window<"u"&&localStorage.getItem("demoMode")==="true",ZP=()=>[{INSP_ID:"INSP001",SO_ID:"209",CRR_ID:"01",INSP_END_DT:"20251015",STTL_YN:"Y",CUST_ID:"CUST001",CUST_NM:"",TEL_NO:"010-1234-5678",PASS_YN:"Y",PROD_GRP_NM:"+TV"},{INSP_ID:"INSP002",SO_ID:"209",CRR_ID:"01",INSP_END_DT:"20251014",STTL_YN:"N",CUST_ID:"CUST002",CUST_NM:"",TEL_NO:"010-2345-6789",PASS_YN:"N",FAIL_GRADE:"B",DAPPR_RESN:" ",PROD_GRP_NM:""},{INSP_ID:"INSP003",SO_ID:"209",CRR_ID:"01",INSP_END_DT:"20251013",STTL_YN:"Y",CUST_ID:"CUST003",CUST_NM:"",TEL_NO:"010-3456-7890",PASS_YN:"Y",PROD_GRP_NM:"+TV+"}],eA=()=>[{WRK_DRCTN_ID:"WRK001",WRK_ID:"1008409324",CUST_ID:"CUST001",CUST_NM:"",SO_ID:"209",SO_NM:"",CRR_ID:"01",CRR_NM:"LG",PROD_CD:"PROD001",PROD_NM:" 100M",WRK_CD:"02",WRK_CD_NM:"A/S",WRK_STAT_CD:"4",WRK_STAT_NM:"",SIGNAL_RESULT:"",SIGNAL_DATE:"2025-10-16 15:30"},{WRK_DRCTN_ID:"WRK002",WRK_ID:"1008409325",CUST_ID:"CUST002",CUST_NM:"",SO_ID:"209",SO_NM:"",CRR_ID:"01",CRR_NM:"LG",PROD_CD:"PROD002",PROD_NM:" 500M + TV",WRK_CD:"01",WRK_CD_NM:"",WRK_STAT_CD:"2",WRK_STAT_NM:"",SIGNAL_RESULT:""},{WRK_DRCTN_ID:"WRK003",WRK_ID:"1008409326",CUST_ID:"CUST003",CUST_NM:"",SO_ID:"209",SO_NM:"",CRR_ID:"01",CRR_NM:"LG",PROD_CD:"PROD003",PROD_NM:" 1G",WRK_CD:"03",WRK_CD_NM:"",WRK_STAT_CD:"1",WRK_STAT_NM:"",SIGNAL_RESULT:""}],tA=(t,e)=>{if(!t&&!e)return null;const n={total:0,pending:0,completed:0,cancelled:0,pendingByProdGrp:{},completedByProdGrp:{}},r={DTV:"D",D:"D",ISP:"I",I:"I",VOIP:"V",VoIP:"V",V:"V",C:"C",:"C",:"C"},i={:"pending",:"pending",:"pending",:"completed",:"completed","()":"completed",:"cancelled"};if(e){const a=e.split(/\s*\/\s*/).filter(o=>o.trim());n.total=a.length,a.forEach(o=>{const c=o.trim();let u=i[c];u||(c.includes("")?u="cancelled":c.includes("")&&!c.includes("")||c.includes("")&&c.includes("")?u="completed":u="pending",console.log("[parseWorkStatusFromStrings] :",c,"->",u)),n[u]++})}if(t){const a=t.split(/\s*\/\s*/).filter(o=>o.trim());n.total===0&&(n.total=a.length,n.pending=a.length),a.forEach(o=>{const c=o.trim().toUpperCase(),u=r[c]||c.charAt(0);n.pendingByProdGrp[u]=(n.pendingByProdGrp[u]||0)+1})}return n},qC=async t=>{if(qn())return KP(t);try{const n=typeof window<"u"?window.location.origin:"http://localhost:3000";return await(await ir(`${Ns}/work/receipts`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify({WRK_DRCTN_ID:t})})).json()}catch(n){throw n instanceof Qs?n:new Qs("   .")}},eN=async t=>{if(typeof window<"u"&&localStorage.getItem("demoMode")==="true")return await new Promise(n=>setTimeout(n,1e3)),{code:"SUCCESS",message:"   ()"};try{const n=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await fetch(`${Ns}/work/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify(t)});if(!r.ok)throw new Error(` : ${r.status}`);return await r.json()}catch(n){throw console.error(" API  :",n),n}},S1=async t=>{if(console.log("[] API :",t),qn())return await new Promise(e=>setTimeout(e,300)),{WRK_ID:t.WRK_ID,RCPT_ID:t.RCPT_ID||"",CUST_ID:t.CUST_ID||"",CTRT_ID:"CT001",SO_ID:"100",WRK_CD:"01",WRK_CD_NM:"",WRK_STAT_CD:"2",WRK_STAT_CD_NM:"",WRK_RCPT_CL:"",OST_WORKABLE_STAT:"X",HOTBILL_YN:"N"};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/work/getDetailWorkInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[] :",r),Array.isArray(r)&&r.length>0?r[0]:r&&!Array.isArray(r)?r:null}catch(e){throw console.error("[] API :",e),e}},sA=async t=>{if(console.log("[OST] API :",t),qn())return await new Promise(e=>setTimeout(e,300)),{AGENT_FL:"1",BUSI_TYPE:"031",RES_CD:"0BS0000"};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/etc/getOSTInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify({AGENT_FL:t.AGENT_FL||"1",RCPT_ID:t.RCPT_ID,CUST_ID:t.CUST_ID})})).json();return console.log("[OST] :",r),Array.isArray(r)&&r.length>0?r[0]:r&&!Array.isArray(r)?r:null}catch(e){return console.error("[OST] API :",e),null}},nA=async t=>{if(console.log("[OST] API :",t),qn())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:" ."};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/etc/modOstWorkCancel`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[OST] :",r),r.MESSAGE==="SUCCESS"||r.code==="SUCCESS"?{code:"SUCCESS",message:" .",RCPT_ID:r.RCPT_ID}:{code:r.code||"ERROR",message:r.message||r.MESSAGE||"  "}}catch(e){throw console.error("[OST] API :",e),new Qs(e.message||"OST     .")}},Ns=typeof window<"u"?(()=>{const t=window.location.hostname,e=window.location.protocol;return console.log("[ API]  :",{hostname:t,protocol:e}),t==="localhost"||t==="127.0.0.1"?"http://58.143.140.222:8080/api":"/api"})():"/api",rA=t=>{switch(t){case"":return ga.Installation;case"A/S":return ga.AS;case"":return ga.Change;case"":return ga.Move;default:return ga.Etc}},iA=(t,e)=>{if(e){if(e==="4"||e==="7")return _n.Completed;if(e==="3")return _n.Cancelled;if(e==="1"||e==="2")return _n.Pending}switch(t){case"":return _n.Pending;case"":return _n.Completed;case"":return _n.Cancelled;default:return _n.Pending}},aA=async({startDate:t,endDate:e})=>{if(qn())return JP();const r=t.replace(/-/g,""),i=e.replace(/-/g,""),a=typeof window<"u"?localStorage.getItem("userInfo"):null,o=a?JSON.parse(a):{},c={WRKR_ID:o.userId||"",SO_ID:o.soId||"",PROC_CL:"A02",VIEW_TYP:"MOBILE",SCH_HOPEDT_GB:"2",PRT_STAT:"%",WRK_DTL_TCD:"%",HOPE_DT_STRT:r,HOPE_DT_END:i,PDA_WORK_STATUS:"%",EMRG_YN:"",WRK_CD:"",DATE_GBN:""};try{const u=typeof window<"u"?window.location.origin:"http://localhost:3000",m=await(await ir(`${Ns}/work/directions`,{method:"POST",headers:{"Content-Type":"application/json",Origin:u},credentials:"include",body:JSON.stringify(c)},3,6e4)).json();return!Array.isArray(m)||m.length===0?[]:m.map(p=>{const g=p.HOPE_DT,C=p.HOPE_TM,y=new Date(`${g.slice(0,4)}-${g.slice(4,6)}-${g.slice(6,8)}T${C}:00`).toISOString();return{id:p.WRK_DRCTN_ID,type:rA(p.WRK_CD_NM),typeDisplay:p.WRK_CD_NM||"",status:iA(p.WRK_STAT,p.MIN_WRK_STAT_CD||p.WRK_STAT_CD),scheduledAt:y,customer:{id:p.CUST_ID,name:p.NONMASK_CUST_NM||p.CUST_NM,phone:p.CUST_TEL_NO||p.REQ_CUST_TEL_NO||"",address:p.ADDR,isVip:!!(p.VIP_GB&&String(p.VIP_GB).length>0),vipLevel:p.VIP_GB==="VIP_VVIP"?"VVIP":p.VIP_GB?"VIP":void 0},details:p.REQ_CTX,assignedEquipment:[],directionId:p.WRK_DRCTN_ID,installLocation:p.INSTL_LOC||"",WRK_CD:p.WRK_CD,WRK_CD_NM:p.WRK_CD_NM,WRK_DTL_TCD:p.WRK_DTL_TCD,PROD_CD:p.PROD_CD,PROD_NM:p.PROD_NM,PROD_GRP:p.PROD_GRP,CTRT_ID:p.CTRT_ID,CTRT_STAT:p.CTRT_STAT,CTRT_STAT_NM:p.CTRT_STAT_NM,SO_ID:p.SO_ID,SO_NM:p.SO_NM,CRR_ID:p.CRR_ID,CUST_REL:p.CUST_REL||"",UP_CTRL_CL:p.UP_CTRL_CL||"",PSN_USE_CORP:p.PSN_USE_CORP||"",VOIP_USE_CORP:p.VOIP_USE_CORP||"",DTV_USE_CORP:p.DTV_USE_CORP||"",VIEW_MOD_CD:p.VIEW_MOD_CD||"",VIEW_MOD_NM:p.VIEW_MOD_NM||"",VIP_GB:p.VIP_GB||"",PROD_GRPS:p.PROD_GRPS||"",WRK_STATS:p.WRK_STATS||"",OST_WORKABLE_STAT:p.OST_WORKABLE_STAT||""}})}catch(u){throw console.error("API  :",u),u instanceof Qs?u:new Qs("   .")}},Md=async t=>{if(qn())return null;try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n={PROC_CL:"A02",WRK_DRCTN_ID:t.WRK_DRCTN_ID,WRK_ID:t.WRK_ID||"",SO_ID:t.SO_ID||""};console.log("[getWorkReceiptDetail] Requesting with:",n);const r=await fetch(`${Ns}/work/receipts`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(n)});if(!r.ok)return console.error("[getWorkReceiptDetail] HTTP Error:",r.status),null;const i=await r.json();if(console.log("[getWorkReceiptDetail] Response:",i),Array.isArray(i)&&i.length>0){if(t.WRK_ID){const a=i.find(o=>String(o.WRK_ID)===String(t.WRK_ID));if(a)return console.log("[getWorkReceiptDetail] Found matching WRK_ID:",t.WRK_ID,"MEMO:",a.MEMO,"NET_CL:",a.NET_CL),a;console.log("[getWorkReceiptDetail] WRK_ID not found in response, params.WRK_ID:",t.WRK_ID,"available WRK_IDs:",i.map(o=>o.WRK_ID))}return i[0]}return null}catch(e){return console.error("[getWorkReceiptDetail] Error:",e),null}},lA=async t=>{try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${Ns}/customer/work/getSafeCheckList_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},body:JSON.stringify(t||{}),credentials:"include"});if(!n.ok)return console.warn(`[SafetyChecklist API] Failed: ${n.status}`),[];const r=await n.json();return r.data&&Array.isArray(r.data)?r.data:Array.isArray(r)?r:[]}catch(e){return console.warn("[SafetyChecklist API] Error:",e),[]}},oA=async t=>{try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${Ns}/customer/work/saveSafeCheckList_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},body:JSON.stringify({USR_ID:t.USR_ID,IMG_PATHS:t.IMG_PATHS||"",ANS_ITEM_IDS:t.ANS_ITEM_IDS,ANS_VALUES:t.ANS_VALUES}),credentials:"include"});if(!n.ok)return console.warn(`[SafetyChecklist Save API] Failed: ${n.status}`),{code:"ERROR",message:`HTTP ${n.status}`};const r=await n.json();return{code:r.code||"SUCCESS",message:r.message||"Safety checklist saved"}}catch(e){return console.warn("[SafetyChecklist Save API] Error:",e),{code:"ERROR",message:String(e)}}},DM=async t=>{try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${Ns}/customer/work/getSafeCheckResultInfo_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},body:JSON.stringify({WRKR_ID:t}),credentials:"include"});if(!n.ok)return console.warn(`[SafetyCheckResult API] Failed: ${n.status}`),[];const r=await n.json();return r.code==="SUCCESS"&&r.output?r.output:[]}catch(e){return console.warn("[SafetyCheckResult API] Error:",e),[]}},cA=async t=>{if(qn())return await new Promise(e=>setTimeout(e,500)),ZP();try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=new URLSearchParams;n.append("SO_ID",t.SO_ID),n.append("CRR_ID",t.CRR_ID);const r=new Date,i=new Date(r.getFullYear(),r.getMonth()-3,r.getDate()),a=m=>{const _=m.getFullYear(),p=String(m.getMonth()+1).padStart(2,"0"),g=String(m.getDate()).padStart(2,"0");return`${_}${p}${g}`},o=t.INSP_DT_FROM||a(i),c=t.INSP_DT_TO||a(r);n.append("INSP_DT_FROM",o),n.append("INSP_DT_TO",c),t.INSP_ID&&n.append("INSP_ID",t.INSP_ID);const u=await fetch(`${Ns}/work/safety-checks?${n.toString()}`,{method:"GET",headers:{Origin:e},credentials:"include"});return u.ok?await u.json():(console.warn(`[ API]   : ${u.status} -    `),[])}catch(e){return console.warn("[ API]    -   :",e),[]}},dA=async t=>{if(qn())return await new Promise(e=>setTimeout(e,500)),eA();try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=new URLSearchParams;Object.entries(t).forEach(([a,o])=>{o&&n.append(a,o)});const r=await fetch(`${Ns}/work/result-signals?${n.toString()}`,{method:"GET",headers:{Origin:e},credentials:"include"});return r.ok?await r.json():(console.warn(`[ API]   : ${r.status} -    `),[])}catch(e){return console.warn("[ API]    -   :",e),[]}},Eo=async t=>{var n;if(qn())return await new Promise(r=>setTimeout(r,500)),{contractEquipments:[{SVC_CMPS_ID:"SVC001",ITEM_MID_NM:"",EQT_CL_NM:"RS-M100",ITEM_MID_CD:"04"},{SVC_CMPS_ID:"SVC002",ITEM_MID_NM:"",EQT_CL_NM:"DTV-STB100",ITEM_MID_CD:"05"}],technicianEquipments:[{EQT_NO:"EQT001",ITEM_MID_NM:"",EQT_CL_NM:"RS-M100",EQT_SERNO:"RSM100001",ITEM_MID_CD:"04",MAC_ADDRESS:"AA:BB:CC:DD:EE:01"},{EQT_NO:"EQT002",ITEM_MID_NM:"",EQT_CL_NM:"RS-M200",EQT_SERNO:"RSM200001",ITEM_MID_CD:"04",MAC_ADDRESS:"AA:BB:CC:DD:EE:02"},{EQT_NO:"EQT003",ITEM_MID_NM:"",EQT_CL_NM:"DTV-STB100",EQT_SERNO:"DTV100001",ITEM_MID_CD:"05"},{EQT_NO:"EQT004",ITEM_MID_NM:"",EQT_CL_NM:"DTV-STB200",EQT_SERNO:"DTV200001",ITEM_MID_CD:"05"}],customerEquipments:[],removedEquipments:[]};try{const r=typeof window<"u"?window.location.origin:"http://localhost:3000",{WORK_ID:i,...a}=t,o={...a,WRK_ID:t.WRK_ID||i,EQT_SEL:"0",EQT_CL:"ALL"},h=(await(await ir(`${Ns}/customer/work/getCustProdInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:r},credentials:"include",body:JSON.stringify(o)})).text()).replace(/[\x00-\x1f\x7f]/g,g=>g===`
`||g==="\r"||g==="	"?" ":""),m=JSON.parse(h),_=((n=m==null?void 0:m.output1)==null?void 0:n[0])||{},p=o.WRK_CD==="02";return{contractEquipments:(m==null?void 0:m.output2)||[],technicianEquipments:(m==null?void 0:m.output3)||[],customerEquipments:p?[]:(m==null?void 0:m.output4)||[],removedEquipments:p?(m==null?void 0:m.output4)||[]:(m==null?void 0:m.output5)||[],kpiProdGrpCd:_.KPI_PROD_GRP_CD,prodChgGb:_.PROD_CHG_GB,chgKpiProdGrpCd:_.CHG_KPI_PROD_GRP_CD,prodGrp:_.PROD_GRP,upCtrlCl:_.UP_CTRL_CL,prodPromoInfo:(m==null?void 0:m.output1)||[]}}catch(r){throw console.error("[ API]    :",r),r instanceof Qs?r:new Qs("   .")}},d0=async t=>{if(qn())return await new Promise(a=>setTimeout(a,1e3)),{code:"SUCCESS",message:"   ()"};const e=typeof window<"u"?localStorage.getItem("userInfo"):null,n=e?JSON.parse(e):{},r=n.userId||n.id||"",i=t.WRKR_ID||n.userId||"";try{const a=typeof window<"u"?window.location.origin:"http://localhost:3000",o=(B,G,U)=>{const I=(B==null?"":String(B)).trim();return I.length>=G?I.substring(0,G):I+new Array(G-I.length+1).join(U)};let c="",u="",h="",m="",_="",p="",g="",C="",y="",N="",v=0;const P=(t.equipments||[]).filter(B=>String(B.SEL||"1")==="1").map((B,G)=>({eq:B,order:Number(B.EQUIP_SEQ||B.SVC_CMPS_ID||G+1),idx:G})).sort((B,G)=>(B.order||0)-(G.order||0));for(let B=0;B<P.length;B++){const{eq:G,idx:U}=P[B],I=String(G.PROD_GRP||"");c+=I;const E=String(G.PROD_TYP||""),A=String(G.EQUIP_SEQ||G.SVC_CMPS_ID||"");u+=E+A,h+=String(G.PROD_CD||""),m+=String(G.SVC_CD||"");const Y=o(G.ITEM_MID_CD||G.EQT||G.EQT_CD||"",10," ");_+=Y;const se=o(G.EQT_CL||G.EQT_CL_CD||"",10," ");p+=se;const X=String(G.LENT||"");g+=X;const z=o(String(G.EQT_USE_STAT_CD||""),1," ");C+=z,y=o(G.EQT_SALE_AMT||0,10," ");const $=o(G.ITLLMT_PRD||"00",2," ");N+=$,v+=1}const w={RCPT_ID:t.RCPT_ID||"",WRK_ID:t.WRK_ID,CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:i,REG_UID:r,PROD_GRPS:c,PROD_CMPS_CLS:u,PROD_CDS:h,SVC_CDS:m,ITEM_MID_CDS:_,EQT_CLS:p,LENTS:g,EQT_USE_STATS:C,EQT_SALE_AMTS:y,ITLLMT_PRDS:N,SERVICE_CNT:String(v),PROM_CNT:t.PROM_CNT||""},M=await fetch(`${Ns}/customer/work/eqtCmpsInfoChg`,{method:"POST",headers:{"Content-Type":"application/json",Origin:a},credentials:"include",body:JSON.stringify({parameters:w})});if(!M.ok){let B=`HTTP ${M.status}: ${M.statusText}`;try{const G=await M.json();B=G.MESSAGE||G.message||B}catch{try{const G=await M.text();G&&(B=G)}catch{}}throw new Qs(B)}return await M.json()}catch(a){throw console.error("[ API]     :",a),a instanceof Qs?a:new Qs("    .")}},uA=async(t,e)=>{if(qn())return await new Promise(n=>setTimeout(n,500)),[{EQT_CD:"05",EQT_CL_CD:"STB001",EQT_CL_NM:"STB-HD"},{EQT_CD:"05",EQT_CL_CD:"STB002",EQT_CL_NM:"STB-UHD"},{EQT_CD:"05",EQT_CL_CD:"STB003",EQT_CL_NM:"STB-4K"},{EQT_CD:"04",EQT_CL_CD:"MDM001",EQT_CL_NM:"DOCSIS 3.0"},{EQT_CD:"04",EQT_CL_CD:"MDM002",EQT_CL_NM:"DOCSIS 3.1"}];try{const n={EQT_SEL:"0",PROD_CD:t,BUGA_EQT_SEL:"Y"};e&&(n.CTRT_ID=e);const r=await fetch(`${Ns}/customer/receipt/contract/getEquipmentNmListOfProd`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const i=await r.json();if(Array.isArray(i))return i;throw i.code&&i.message?new Error(i.message||"    "):new Error("    :   ")}catch(n){throw console.error("[ API]     API :",n),n}},hA=async(t,e)=>{if(console.log("[ API]     API :"),console.log("  - PROD_CD:",t),console.log("  - CTRT_ID:",e),qn())return await new Promise(n=>setTimeout(n,500)),{output1:[{ITEM_MID_CDS:"05        10        ",EQT_CLS:"STB001    MDM001    ",LENTS:"1030",EQT_USE_STATS:"11",ITLLMT_PRDS:"0000",EQT_SALE_AMTS:"0         0         "}],output2:[{SEL:"1",PROD_CD:t,SVC_CD:"SVC001",PROD_TYP:"01",PROD_GRP:"V",EQT:"05",EQT_CD:"05",EQT_CL:"STB001",EQT_CL_NM:"STB-HD",ITM_MID_CD:"05",LENT:"10",EQT_USE_STAT_CD:"1",ITLLMT_PRD:"00",LENT_YN:"Y",EQT_SALE_AMT:0,EQUIP_SEQ:"1",EQT_BASIC_YN:"Y",EQT_NM:""},{SEL:"1",PROD_CD:t,SVC_CD:"SVC001",PROD_TYP:"01",PROD_GRP:"V",EQT:"04",EQT_CD:"04",EQT_CL:"MDM001",EQT_CL_NM:"DOCSIS 3.0",ITM_MID_CD:"04",LENT:"30",EQT_USE_STAT_CD:"1",ITLLMT_PRD:"00",LENT_YN:"Y",EQT_SALE_AMT:0,EQUIP_SEQ:"2",EQT_BASIC_YN:"Y",EQT_NM:""}],output3:[]};try{const n={EQT_SEL:"0",PROD_CD:t,BUGA_EQT_SEL:"Y"};e&&(n.CTRT_ID=e),console.log("[ API]  :",n);const r=await fetch(`${Ns}/customer/receipt/contract/getContractEqtList`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const i=await r.json();return console.log("[ API] getContractEqtList  :",i),i}catch(n){throw console.error("[ API]     API :",n),n}},No=async t=>{if(console.log("[ API]   API :",t),qn()){await new Promise(n=>setTimeout(n,300));const e={};return t.includes("CMCU027")&&(e.CMCU027=[{COMMON_CD:"10",COMMON_CD_NM:""},{COMMON_CD:"30",COMMON_CD_NM:""},{COMMON_CD:"31",COMMON_CD_NM:""},{COMMON_CD:"60",COMMON_CD_NM:""}]),t.includes("CMEP314")&&(e.CMEP314=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU064")&&(e.CMCU064=[{COMMON_CD:"0",COMMON_CD_NM:""},{COMMON_CD:"1",COMMON_CD_NM:"1"},{COMMON_CD:"2",COMMON_CD_NM:"2"},{COMMON_CD:"3",COMMON_CD_NM:"3"}]),t.includes("CMCU057")&&(e.CMCU057=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU110")&&(e.CMCU110=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU148")&&(e.CMCU148=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""}]),t.includes("CMCU005")&&(e.CMCU005=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""},{COMMON_CD:"3",COMMON_CD_NM:""},{COMMON_CD:"4",COMMON_CD_NM:""},{COMMON_CD:"5",COMMON_CD_NM:""}]),t.includes("CMCT015")&&(e.CMCT015=[{COMMON_CD:"1",COMMON_CD_NM:""},{COMMON_CD:"2",COMMON_CD_NM:""}]),e}try{const e={CODE_IDS:t.join(",")};console.log("[ API]  :",e);const n=await fetch(`${Ns}/common/getCommonCodeList`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const r=await n.json();return console.log("[ API] getCommonCodeList  :",r),r}catch(e){throw console.error("[ API]   API :",e),e}},fA=async t=>{try{const e={P_COMM_GRP_CD:t},n=await fetch(`${Ns}/common/getCommonCodeList`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return await n.json()}catch(e){throw console.error("[ API]    API :",e),e}},Xu=async(t,e,n,r,i,a)=>{if(console.log("[STB API]    API "),console.log("[STB API]  :",{regUid:t,ctrtId:e,wrkId:n,msgId:r,stbEqtNo:i,modemEqtNo:a}),qn())return await new Promise(c=>setTimeout(c,800)),{MSGCODE:"SUCCESS",MESSAGE:"STB server connection check completed",O_IFSVC_RESULT:"TRUE0000000001SMR03000000"};try{const u=`${typeof window<"u"?window.location.origin:"http://localhost:3000"}/api/customer/work/checkStbServerConnection`,h={REG_UID:t,CTRT_ID:e,WRK_ID:n,MSG_ID:r,STB_EQT_NO:i,MODEM_EQT_NO:a};console.log("[STB API] API URL:",u),console.log("[STB API]  :",h),console.log("[STB API] fetch  ...");const m=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(console.log("[STB API]  :",m.status,m.statusText),!m.ok){const p=await m.text();throw console.error("[STB API] HTTP  :",p),new Error(`HTTP ${m.status}: ${m.statusText}`)}const _=await m.json();return console.log("[STB API]  :",_),Array.isArray(_)&&_.length>0?(console.log("[STB API]      :",_[0]),_[0]):_}catch(c){throw console.error("[STB API] STB    API :",c),c}},mA=async t=>{if(console.log("  API :",t),qn())return await new Promise(e=>setTimeout(e,1500)),{code:"SUCCESS",message:"   ()",data:{WRK_ID:t.workInfo.WRK_ID,WRK_STAT_CD:"4",CMPL_DT:t.workInfo.WRKR_CMPL_DT}};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000";console.log("    API :",`${Ns}/customer/work/workComplete`);const n=await ir(`${Ns}/customer/work/workComplete`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)},1);console.log("   API  :",n.status,n.statusText);const r=await n.json();return console.log("  API :",r),Array.isArray(r)?(console.log("   -  "),{code:"SUCCESS",message:" .",data:r}):r}catch(e){throw console.error("  API :",e),e instanceof Qs?e:new Qs(e.message||"     .")}},gA=async t=>{if(console.log(" [  ] API :",t),qn())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"  ."};try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000";console.log("     API :",`${Ns}/customer/work/saveInstallInfo`);const n=await ir(`${Ns}/customer/work/saveInstallInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)},1);console.log("    API  :",n.status,n.statusText);const r=await n.json();return console.log("   API :",r),r}catch(e){throw console.error("   API :",e),e instanceof Qs?e:new Qs(e.message||"     .")}},qa=async t=>{if(console.log("[  ] API :",t),qn())return await new Promise(n=>setTimeout(n,300)),{CMCU048:[{code:"1",name:"HFC"},{code:"2",name:"FTTH"},{code:"3",name:"FTTB"}],BLST010:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:""}],BLST014:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:""}],CMCU030:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:"UTP"}],BLST016:[{code:"1",name:""},{code:"2",name:""}],CMCU046:[{code:"1",name:""},{code:"2",name:""},{code:"3",name:""}],CMCU050:[{code:"1",name:"HDMI"},{code:"2",name:"Component"},{code:"3",name:"Composite"}],CMCU051:[{code:"1",name:""},{code:"2",name:""}],CMCU049:[{code:"1",name:""},{code:"2",name:""}]}[t]||[];try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/common/getCommonCodes`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify({CODE_GROUP:t})})).json();return Array.isArray(r)?r.map(i=>({code:i.COMMON_CD||i.code||"",name:i.COMMON_CD_NM||i.name||"",description:i.DESCRIPTION||i.description||"",ref_code:i.REF_CODE||i.ref_code||"",ref_code2:i.REF_CODE2||i.ref_code2||"",ref_code3:i.REF_CODE3||i.ref_code3||"",ref_code8:i.REF_CODE8||i.ref_code8||"",ref_code12:i.REF_CODE12||i.ref_code12||""})):[]}catch{return[]}},_E=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/equipment/getEquipmentOutList`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("    :",r),Array.isArray(r)?r:r.output1||[]}catch(e){throw console.error("    :",e),e instanceof Qs?e:new Qs("    .")}},_A=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/equipment/addCorporationEquipmentQuota`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",r),r}catch(e){throw console.error("   :",e),e instanceof Qs?e:new Qs("   .")}},xA=async(t,e)=>{console.log("[addEquipmentReturnRequest]  :",t);try{if(!t.WRKR_ID||!t.CRR_ID)throw new Qs("  .");if(!t.equipmentList||t.equipmentList.length===0)throw new Qs("  .");const n=typeof window<"u"?window.location.origin:"http://localhost:3000",r=t.equipmentList.length;let i=0,a=[],o=0;for(const c of t.equipmentList){o++,e==null||e(o,r,c.EQT_SERNO||c.EQT_NO);const u={EQT_NO:c.EQT_NO,EQT_SERNO:c.EQT_SERNO||"",RETN_RESN_CD:c.RETN_RESN_CD||"01",ACTION:c.ACTION||"RETURN",WRKR_ID:t.WRKR_ID,CRR_ID:t.CRR_ID,SO_ID:t.SO_ID||"",MST_SO_ID:t.MST_SO_ID||t.SO_ID||"",RETURN_TP:t.RETURN_TP||"2",PROC_STAT:"1",RETN_PSN_ID:t.WRKR_ID};console.log("[addEquipmentReturnRequest]  :",c.EQT_SERNO,u);try{const m=await(await ir(`${Ns}/customer/equipment/addEquipmentReturnRequest`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify(u)})).json();console.log("[addEquipmentReturnRequest]  :",c.EQT_SERNO,m),m&&(m.MSGCODE==="0"||m.MSGCODE==="SUCCESS"||m.success===!0)?i++:a.push(c.EQT_SERNO||c.EQT_NO)}catch(h){console.error("[addEquipmentReturnRequest]  :",c.EQT_SERNO,h),a.push(c.EQT_SERNO||c.EQT_NO)}}if(console.log("[addEquipmentReturnRequest] : ",i,"/ ",a.length),i>0)return{success:!0,MSGCODE:"SUCCESS",message:a.length>0?`${i}  , ${a.length} `:`${i}  .`,data:{successCount:i,failedItems:a}};throw new Qs(` : ${a.join(", ")}`)}catch(n){throw console.error("[addEquipmentReturnRequest]  :",n),n instanceof Qs?n:new Qs(n.message||"  .")}},pA=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/equipment/cmplEqtCustLossIndem`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),r}catch(e){throw console.error("  :",e),e instanceof Qs?e:new Qs("  .")}},yA=async t=>{console.log("[fn:setEquipmentCheckStandby -> req:setEquipmentChkStndByY_ForM] API:",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n=await fetch(`${Ns}/customer/equipment/setEquipmentChkStndByY_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)}),r=await n.json();if(r.debugLogs&&(console.log("[backend debug logs]"),r.debugLogs.forEach(i=>console.log(i))),n.status===400&&r.code==="BUSINESS_RULE_ERROR")throw console.error("business rule error:",r.message),new Error(r.message||"business rule error");if(!n.ok){console.error("equipment status change failed:",r);const i=r.message||r.error||`server error (HTTP ${n.status})`;throw new Error(i)}return console.log("equipment status change success:",r),r}catch(e){throw console.error("equipment status change failed:",e),e instanceof Error?e:new Error("equipment status change failed.")}},am=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/statistics/equipment/getEquipmentHistoryInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();console.log("  :",r);const i=(r==null?void 0:r.data)||r;return Array.isArray(i)?i:[i]}catch(e){throw console.error("  :",e),e instanceof Qs?e:new Qs("  .")}},bA=async t=>{const e=`API_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,n=Date.now(),r={...t,TO_WRKR_ID:t.MV_WRKR_ID,WRKR_ID:t.MV_WRKR_ID};console.log(`[fn:changeEquipmentWorker -> req:changeEqtWrkr_3_ForM] ${e}`),console.log("params:",JSON.stringify(r,null,2));try{const i=`${Ns}/customer/equipment/changeEqtWrkr_3_ForM`,a=new AbortController,o=setTimeout(()=>a.abort(),3e4),c=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r),signal:a.signal});clearTimeout(o);const u=Date.now()-n;console.log(`[${e}] HTTP ${c.status} (${u}ms)`);const h=await c.text();console.log(`[${e}] RAW:`,h);let m;try{m=JSON.parse(h),console.log(`[${e}] PARSED:`,JSON.stringify(m,null,2))}catch{throw console.error(`[${e}] JSON parse failed`),new Error("server response parse failed")}const _=m==null?void 0:m.MSGCODE,p=(m==null?void 0:m.MESSAGE)||(m==null?void 0:m.message)||"";if(_==="SUCCESS")return console.log(`[${e}] SUCCESS (MSGCODE=SUCCESS, ${u}ms)`),m;if(_==="FAIL")throw new Error(p||"Oracle procedure failed (MSGCODE=FAIL)");if(!c.ok){const g=p||(m==null?void 0:m.error)||(m==null?void 0:m.code)||`server error (HTTP ${c.status})`;throw new Error(g)}if(p&&(p.includes("ERROR")||p.includes("FAIL")))throw new Error(p);return console.log(`[${e}] SUCCESS (${u}ms)`),m}catch(i){const a=Date.now()-n;throw console.error(`[${e}] FAILED (${a}ms):`,i.message),i.name==="AbortError"?new Error("Request timeout (30s)."):i instanceof Error?i:new Error("equipment transfer failed.")}},CA=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/work/worker-adjustment`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),r}catch(e){throw console.error("  :",e),e instanceof Qs?e:new Qs("  .")}},_p=async t=>{console.log("[fn:findUserList -> req:getFindUsrList3] API:",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",n={};t.USR_NM&&t.USR_NM.trim()&&(n.USR_NM=t.USR_NM.trim(),n.WRKR_NM=t.USR_NM.trim()),t.USR_ID&&t.USR_ID.trim()&&(n.USR_ID=t.USR_ID.trim(),n.WRKR_ID=t.USR_ID.trim()),t.SO_ID&&(n.SO_ID=t.SO_ID),t.CRR_ID&&(n.CRR_ID=t.CRR_ID),console.log("[findUserList] cleaned params:",n);const i=await(await ir(`${Ns}/system/cm/getFindUsrList3`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(n)})).json();return console.log("findUserList result:",i),Array.isArray(i)?i:i.output1&&Array.isArray(i.output1)?i.output1:i.data&&Array.isArray(i.data)?i.data:[]}catch(e){throw console.error("findUserList failed:",e),e instanceof Qs?e:new Qs("findUserList failed.")}},NA=async(t,e,n)=>{console.log(" [] API :",{custId:t,startDate:e,endDate:n});try{const r=new Date,i=r.toISOString().slice(0,10).replace(/-/g,""),o=new Date(r.getTime()-10080*60*1e3).toISOString().slice(0,10).replace(/-/g,""),c={CUST_ID:t,SMS_PROCESS:"ALL",REG_DATE1:e||o,REG_DATE2:n||i},u=typeof window<"u"?window.location.origin:"http://localhost:3000",m=await(await ir(`${Ns}/customer/sigtrans/getENSSendHist`,{method:"POST",headers:{"Content-Type":"application/json",Origin:u},credentials:"include",body:JSON.stringify(c)})).json();return console.log("  :",m),Array.isArray(m)?m:m.output&&Array.isArray(m.output)?m.output:m.data&&Array.isArray(m.data)?m.data:[]}catch(r){throw console.error("  :",r),r instanceof Qs?r:new Qs("  .")}},SA=async t=>{console.log(" [] API :",{custId:t});try{const e={CUST_ID:t},n=typeof window<"u"?window.location.origin:"http://localhost:3000",i=await(await ir(`${Ns}/customer/negociation/getCustConslHist`,{method:"POST",headers:{"Content-Type":"application/json",Origin:n},credentials:"include",body:JSON.stringify(e)})).json();return console.log("  :",i),Array.isArray(i)?i:i.output&&Array.isArray(i.output)?i.output:i.data&&Array.isArray(i.data)?i.data:[]}catch(e){throw console.error("  :",e),e instanceof Qs?e:new Qs("  .")}},Eb=async t=>{console.log(" [] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/work/getEquipLossInfo_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",r),Array.isArray(r)?r:r.output1||[]}catch(e){throw console.error("   :",e),e instanceof Qs?e:new Qs("   .")}},vA=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/work/modEquipLoss_ForM`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),r}catch(e){throw console.error("  :",e),e instanceof Qs?e:new Qs("  .")}},RM=async t=>{console.log("[ ] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/contract/getFullContractInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",r),{contracts:r.contracts||[],billing:r.billing||null,currentContract:r.currentContract||null}}catch(e){throw console.error("   :",e),e instanceof Qs?e:new Qs("  .")}},_m=async t=>{console.log("[] API :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/contract/getContractInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("  :",r),Array.isArray(r)?r:[]}catch(e){throw console.error("  :",e),e instanceof Qs?e:new Qs("  .")}},Tl=async t=>{console.log("[getProdPromotionInfo]  :",t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/customer/work/getProdPromotionInfo`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[getProdPromotionInfo] :",r),Array.isArray(r)?r:(r==null?void 0:r.data)||(r==null?void 0:r.output)||[]}catch(e){return console.error("[getProdPromotionInfo] :",e),[]}},_a=async t=>{console.log(" [] sendSignal :",t.MSG_ID,t);try{const e=typeof window<"u"?window.location.origin:"http://localhost:3000",r=await(await ir(`${Ns}/signal/send`,{method:"POST",headers:{"Content-Type":"application/json",Origin:e},credentials:"include",body:JSON.stringify(t)})).json();return console.log(" [] :",r),r}catch(e){return console.error("[] :",e),{code:"ERROR",message:e.message||"  .",MSG_ID:t.MSG_ID}}},Wp=async t=>{if(console.log("[ API] insertWorkRemoveStat :",t),qn())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"  ()"};try{const e=localStorage.getItem("userInfo"),n=e?JSON.parse(e):{},r=t.REG_UID||n.userId||"A20130708",i={WRK_ID:t.WRK_ID,REMOVE_LINE_TP:t.REMOVE_LINE_TP,REMOVE_GB:t.REMOVE_GB,REMOVE_STAT:t.REMOVE_STAT||"",REG_UID:r};console.log("[ API]  :",i);const o=await(await fetch(`${Ns}/customer/work/insertWorkRemoveStat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)})).json();return console.log("[ API] :",o),Array.isArray(o)||o.code==="SUCCESS"||o.success===!0?{code:"SUCCESS",message:" ."}:{code:"ERROR",message:o.message||o.msg||"  ."}}catch(e){return console.error("[ API] :",e),{code:"ERROR",message:e.message||"    ."}}},TM=async t=>{if(qn())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"AS  ()"};try{const e=localStorage.getItem("userInfo"),n=e?JSON.parse(e):{},r=t.REG_UID||n.userId||"A20130708",i=t.CRR_ID||n.crrId||"01",a={CUST_ID:t.CUST_ID,RCPT_ID:t.RCPT_ID||"",WRK_DTL_TCD:t.WRK_DTL_TCD,WRK_RCPT_CL:t.WRK_RCPT_CL,WRK_RCPT_CL_DTL:t.WRK_RCPT_CL_DTL,WRK_HOPE_DTTM:t.WRK_HOPE_DTTM,HOPE_DTTM:t.WRK_HOPE_DTTM,MEMO:t.MEMO||"",EMRG_YN:t.EMRG_YN||"N",HOLY_YN:t.HOLY_YN||"N",CRR_ID:i,WRKR_ID:t.WRKR_ID||r,REG_UID:r,WRK_DIV_ID:"",POST_ID:t.POST_ID||"",BLD_ID:t.BLD_ID||"",BLD_CL:t.BLD_CL||"",BLD_NM:t.BLD_NM||"",BUN_CL:t.BUN_CL||"",BUN_NO:t.BUN_NO||"",HO_NM:t.HO_NM||"",APT_DONG_NO:t.APT_DONG_NO||"",APT_HO_CNT:t.APT_HO_CNT||"",ADDR:t.ADDR||"",ADDR_DTL:t.ADDR_DTL||""},c=await(await fetch(`${Ns}/customer/work/modAsPdaReceipt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)})).json();return Array.isArray(c)||c.code==="SUCCESS"||c.success===!0?{code:"SUCCESS",message:"AS ."}:{code:"ERROR",message:c.message||c.msg||"AS ."}}catch(e){return console.error("[AS API] :",e),{code:"ERROR",message:e.message||"AS   ."}}},xE=async(t,e)=>{if(console.log("[Hotbill API] getHotbillSummary :",{custId:t,rcptId:e}),qn())return await new Promise(n=>setTimeout(n,500)),{details:[{BILL_SEQ_NO:"202412001",PROD_GRP:"DTV",SO_ID:"01",CHG_NM:"DTV ",BILL_AMT:15e3,PYM_AMT:15e3,UPYM_AMT:0},{BILL_SEQ_NO:"202412002",PROD_GRP:"ISP",SO_ID:"01",CHG_NM:" ",BILL_AMT:25e3,PYM_AMT:0,UPYM_AMT:25e3}],refund:{TOT_RFND_AMT:5e3,RFND_RSN:" "},totalAmount:4e4,paidAmount:15e3,unpaidAmount:25e3,refundAmount:5e3};try{const n=await fetch(`${Ns}/hotbill/summary`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CUST_ID:t,RCPT_ID:e})});if(!n.ok)throw console.error("[Hotbill API] HTTP :",n.status),new Error(`Hot Bill API   . (HTTP ${n.status})`);const r=n.headers.get("content-type");if(!r||!r.includes("application/json"))throw console.error("[Hotbill API]   :",r),new Error("Hot Bill API   .");const i=await n.json();return console.log("[Hotbill API] getHotbillSummary :",i),{details:Array.isArray(i.details)?i.details.map(a=>({...a,BILL_AMT:Number(a.BILL_AMT)||0,PYM_AMT:Number(a.PYM_AMT)||0,UPYM_AMT:Number(a.UPYM_AMT)||0})):[],refund:i.refund?{...i.refund,TOT_RFND_AMT:Number(i.refund.TOT_RFND_AMT)||0}:null,totalAmount:Number(i.totalAmount)||0,paidAmount:Number(i.paidAmount)||0,unpaidAmount:Number(i.unpaidAmount)||0,refundAmount:Number(i.refundAmount)||0}}catch(n){throw console.error("[Hotbill API] getHotbillSummary :",n),n}},EA=async t=>{if(console.log("[Hotbill API] runHotbillSimulation :",t),qn())return await new Promise(e=>setTimeout(e,300)),{code:"SUCCESS",RCPT_ID:t.RCPT_ID||"1044931550",message:"OK (Demo)",simulatedCount:1};try{const e={CUST_ID:t.CUST_ID,CTRT_ID:t.CTRT_ID,SO_ID:t.SO_ID,HOPE_DT:t.HOPE_DT,CLC_WRK_CL:t.CLC_WRK_CL||"2",RCPT_ID:t.RCPT_ID||"",IS_NEW:t.IS_NEW||"false",PNTY_EXMP_YN:t.PNTY_EXMP_YN||"N"},n=await fetch(`${Ns}/hotbill/simulate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!n.ok)throw console.error("[Hotbill API] HTTP :",n.status),new Error(`Hot Bill  API  (HTTP ${n.status})`);const r=await n.json();return console.log("[Hotbill API] runHotbillSimulation :",r),{code:r.code||"ERROR",RCPT_ID:r.RCPT_ID||"",message:r.message||"",simulatedCount:r.simulatedCount||0}}catch(e){throw console.error("[Hotbill API] runHotbillSimulation :",e),e}},pE=async(t,e,n,r,i)=>{if(console.log("[Hotbill API] getHotbillByContract :",{billSeqNo:t,prodGrp:e,soId:n,clcWrkCl:r,rcptId:i}),qn())return await new Promise(a=>setTimeout(a,200)),[{BILL_SEQ_NO:t,PROD_GRP:e,SO_ID:n,CTRT_ID:"0000000001",CLC_WRK_NO:"20241201001",BILL_AMT:2e4}];try{const a=await fetch(`${Ns}/hotbill/byContract`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({BILL_SEQ_NO:t,PROD_GRP:e,SO_ID:n,CLC_WRK_CL:r,RCPT_ID:i})});if(!a.ok)throw console.error("[Hotbill API] HTTP :",a.status),new Error(`Hot Bill   API  (HTTP ${a.status})`);const o=await a.json();return console.log("[Hotbill API] getHotbillByContract :",o),Array.isArray(o)?o.map(c=>({BILL_SEQ_NO:c.BILL_SEQ_NO||"",PROD_GRP:c.PROD_GRP||"",SO_ID:c.SO_ID||"",CTRT_ID:c.CTRT_ID||"",CLC_WRK_NO:c.CLC_WRK_NO||"",BILL_AMT:Number(c.BILL_AMT)||0})):[]}catch(a){throw console.error("[Hotbill API] getHotbillByContract :",a),a}},yE=async(t,e,n)=>{if(console.log("[Hotbill API] getHotbillByCharge :",{billSeqNo:t,clcWrkNo:e,ctrtId:n}),qn())return await new Promise(r=>setTimeout(r,300)),[{CLC_WRK_NO:e,BILL_SEQ_NO:t,CUST_ID:"0000000001",CTRT_ID:n,SORT_SEQ:"1",CHRG_ITEM_NM:"",REQ_YN:"Y",BILL_AMT:15e3},{CLC_WRK_NO:e,BILL_SEQ_NO:t,CUST_ID:"0000000001",CTRT_ID:n,SORT_SEQ:"2",CHRG_ITEM_NM:"",REQ_YN:"N",BILL_AMT:5e3}];try{const i=await(await fetch(`${Ns}/hotbill/byCharge`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({BILL_SEQ_NO:t,CLC_WRK_NO:e,CTRT_ID:n})})).json();return console.log("[Hotbill API] getHotbillByCharge :",i),Array.isArray(i)?i.map(a=>({CLC_WRK_NO:a.CLC_WRK_NO||"",BILL_SEQ_NO:a.BILL_SEQ_NO||"",CUST_ID:a.CUST_ID||"",CTRT_ID:a.CTRT_ID||"",SORT_SEQ:a.SORT_SEQ||"0",CHRG_ITEM_NM:a.CHRG_ITEM_NM||"",REQ_YN:a.REQ_YN||"N",BILL_AMT:Number(a.BILL_AMT)||0})):[]}catch(r){throw console.error("[Hotbill API] getHotbillByCharge :",r),r}},DA=async t=>{if(console.log("[SMS API] sendVisitSms :",t),qn())return await new Promise(e=>setTimeout(e,500)),{code:"SUCCESS",message:"  . (Demo)"};try{const e={SMS_EML_TYPE:t.SMS_EML_TYPE,SO_ID:t.SO_ID,USER_SMS:t.USER_SMS.replace(/-/g,"").replace(/\s/g,""),SEND_SMS:t.SEND_SMS.replace(/-/g,"").replace(/\s/g,""),USER_ID:t.USER_ID,USER_NAME:t.USER_NAME,MAP01:t.MAP01,KKO_MSG_ID:t.KKO_MSG_ID,REG_UID:t.REG_UID,TRANS_YN:t.TRANS_YN||"N",SMS_EML_CL:t.SMS_EML_CL||"20"},n=await fetch(`${Ns}/customer/sigtrans/saveENSSendHist`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!n.ok)throw console.error("[SMS API] HTTP :",n.status),new Error(`  API  (HTTP ${n.status})`);const r=await n.json();return console.log("[SMS API] sendVisitSms :",r),r.MSGCODE==="SUCCESS"||r.code==="SUCCESS"?{code:"SUCCESS",message:r.MESSAGE||r.message||"  ."}:{code:r.MSGCODE||r.code||"ERROR",message:r.MESSAGE||r.message||"  ."}}catch(e){throw console.error("[SMS API] sendVisitSms :",e),e}},MM=async t=>{console.log("[ API] getMmtSusInfo :",t);try{const e=await fetch(`${Ns}/customer/etc/getMmtSusInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw console.error("[ API] HTTP :",e.status),new Error(`  API  (HTTP ${e.status})`);const n=await e.json();if(console.log("[ API] getMmtSusInfo :",n),n&&(n.SUS_HOPE_DD||n.output)){const r=n.output?n.output[0]:n;return{SUS_HOPE_DD:r.SUS_HOPE_DD||"",MMT_SUS_HOPE_DD:r.MMT_SUS_HOPE_DD||"",VALID_SUS_DAYS:r.VALID_SUS_DAYS||"",MMT_SUS_CD:r.MMT_SUS_CD||"",WRK_DTL_TCD:r.WRK_DTL_TCD||""}}return null}catch(e){throw console.error("[ API] getMmtSusInfo :",e),e}},IM=async t=>{console.log("[ API] modMmtSusInfo :",t);try{const e=await fetch(`${Ns}/customer/etc/modMmtSusInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)throw console.error("[ API] HTTP :",e.status),new Error(`  API  (HTTP ${e.status})`);const n=await e.json();return console.log("[ API] modMmtSusInfo :",n),n.MSGCODE==="SUCCESS"||n.code==="SUCCESS"?{code:"SUCCESS",message:n.MESSAGE||n.message||" ."}:{code:n.MSGCODE||n.code||"ERROR",message:n.MESSAGE||n.message||"  ."}}catch(e){throw console.error("[ API] modMmtSusInfo :",e),e}},jM=async(t,e)=>{console.log("[Contract API] getCtrtDetailInfo:",t,e);try{const n={CTRT_ID:t};e&&(n.CUST_ID=e);const r=await fetch(`${Ns}/customer/contract/getCtrtDetailInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(!r.ok)return console.error("[Contract API] getCtrtDetailInfo HTTP error:",r.status),null;const i=await r.json();return console.log("[Contract API] getCtrtDetailInfo response:",i),i}catch(n){return console.error("[Contract API] getCtrtDetailInfo error:",n),null}},OM=async t=>{console.log("[Work API] getAfterProcInfo:",t);try{const e=await fetch(`${Ns}/customer/work/getAfterProcInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({WRK_DRCTN_ID:t})});if(!e.ok)return console.error("[Work API] getAfterProcInfo HTTP error:",e.status),null;const n=await e.json();return console.log("[Work API] getAfterProcInfo response:",n),n}catch(e){return console.error("[Work API] getAfterProcInfo error:",e),null}},RA=async(t,e)=>{console.log("[Alarm API] getAllAlarmInfo:",{custId:t,wrkDrctnId:e});try{const n=await fetch(`${Ns}/customer/alarm/getAllAlarmInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CUST_ID:t,WRK_DRCTN_ID:e||""})});if(!n.ok)return console.error("[Alarm API] HTTP error:",n.status),{};const r=await n.json();return console.log("[Alarm API] getAllAlarmInfo response:",r),r}catch(n){return console.error("[Alarm API] getAllAlarmInfo error:",n),{}}},x_=async t=>{if(console.log("[ API] getMoveWorkInfo:",t),qn())return await new Promise(e=>setTimeout(e,500)),{MVM_TP:"01",MVM_TP_NM:"",WRK_ID:t.WRK_ID,PROD_NM:"DTV ",HOPE_DTTM:"2024-12-29 10:00",WRK_STAT_NM:"",ADDR_ORD:"   123",WRK_CD:t.WRK_CD};try{const e=await fetch(`${Ns}/customer/work/getMoveWorkInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),null;const n=await e.json();return console.log("[ API] getMoveWorkInfo response:",n),n.data?n.data:Array.isArray(n)&&n.length>0?n[0]:n}catch(e){return console.error("[ API] getMoveWorkInfo error:",e),null}},wM=async t=>{if(console.log("[ API] getMVRemoveEqtInfo:",t),qn())return await new Promise(e=>setTimeout(e,500)),[{CHK:1,CTRT_ID:"CT123456",EQT_CL_NM:"DTV ",LENT_YN_NM:"",EQT_USE_STAT_CD:"",NOTRECEV:"",EQT_LOC_TP_CD:"",EQT_STAT_CD:"",WRKR_NM:"",EQT_SERNO:"STB123456789",MAC_ADDRESS:"AA:BB:CC:DD:EE:FF",ITEM_NM:"UHD ",WRK_CD:"08"},{CHK:1,CTRT_ID:"CT123456",EQT_CL_NM:"",LENT_YN_NM:"",EQT_USE_STAT_CD:"",NOTRECEV:"",EQT_LOC_TP_CD:"",EQT_STAT_CD:"",WRKR_NM:"",EQT_SERNO:"MDM987654321",MAC_ADDRESS:"11:22:33:44:55:66",ITEM_NM:" ",WRK_CD:"08"}];try{const e=await fetch(`${Ns}/customer/equipment/getMVRemoveEqtInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),[];const n=await e.json();return console.log("[ API] getMVRemoveEqtInfo response:",n),n.data?Array.isArray(n.data)?n.data:[n.data]:Array.isArray(n)?n:[]}catch(e){return console.error("[ API] getMVRemoveEqtInfo error:",e),[]}},LM=async t=>{if(console.log("[ API] getEqtSoMoveInfo:",t),qn())return await new Promise(e=>setTimeout(e,500)),[];try{const e=await fetch(`${Ns}/customer/work/getEqtSoMoveInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),[];const n=await e.json();return console.log("[ API] getEqtSoMoveInfo response:",n),n.data?Array.isArray(n.data)?n.data:[n.data]:Array.isArray(n)?n:[]}catch(e){return console.error("[ API] getEqtSoMoveInfo error:",e),[]}},TA=async t=>{if(console.log("[ API] excuteSoMoveEqtChg:",t),qn())return await new Promise(e=>setTimeout(e,1e3)),{MSGCODE:"SUCCESS",MESSAGE:" ."};try{const e=await fetch(`${Ns}/customer/work/excuteSoMoveEqtChg`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),null;const n=await e.json();return console.log("[ API] excuteSoMoveEqtChg response:",n),n.data?n.data:n}catch(e){return console.error("[ API] excuteSoMoveEqtChg error:",e),null}},MA=async t=>{if(console.log("[ API] custEqtInfoDel:",t),qn())return await new Promise(e=>setTimeout(e,500)),{MSGCODE:"SUCCESS",MESSAGE:" ."};try{const e=await fetch(`${Ns}/customer/work/custEqtInfoDel`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[ API] HTTP error:",e.status),null;const n=await e.json();return console.log("[ API] custEqtInfoDel response:",n),n.data?n.data:n}catch(e){return console.error("[ API] custEqtInfoDel error:",e),null}},Uc=async()=>{console.log("[Work API] getLghvProdMap called");try{const t=await fetch(`${Ns}/customer/work/getLghvProdMap`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(!t.ok)return console.error("[Work API] getLghvProdMap HTTP error:",t.status),[];const e=await t.json();return console.log("[Work API] getLghvProdMap response:",e),Array.isArray(e)?e:e.data&&Array.isArray(e.data)?e.data:[]}catch(t){return console.error("[Work API] getLghvProdMap error:",t),[]}},v1=async t=>{console.log("[Work API] getOttSale called:",t);try{const e=await fetch(`${Ns}/customer/work/getOttSale`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] getOttSale HTTP error:",e.status),null;const n=await e.json();return console.log("[Work API] getOttSale response:",n),Array.isArray(n)&&n.length>0?n[0]:n.data&&Array.isArray(n.data)&&n.data.length>0?n.data[0]:n.output&&Array.isArray(n.output)&&n.output.length>0?n.output[0]:n}catch(e){return console.error("[Work API] getOttSale error:",e),null}},IA=async t=>{console.log("[Work API] saveOttSale called:",t);try{const e=await fetch(`${Ns}/customer/work/saveOttSale`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] saveOttSale HTTP error:",e.status),{code:"ERROR",message:`HTTP ${e.status}`};const n=await e.json();return console.log("[Work API] saveOttSale response:",n),{code:n.code||n.CODE||"SUCCESS",message:n.message||n.MESSAGE||""}}catch(e){return console.error("[Work API] saveOttSale error:",e),{code:"ERROR",message:e.message||"Unknown error"}}},jA=async t=>{console.log("[Work API] getOttSerno called:",t);try{const e=await fetch(`${Ns}/customer/work/getOttSerno`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] getOttSerno HTTP error:",e.status),[];const n=await e.json();return console.log("[Work API] getOttSerno response:",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:n.output&&Array.isArray(n.output)?n.output:[]}catch(e){return console.error("[Work API] getOttSerno error:",e),[]}},OA=async t=>{console.log("[Work API] getOttType called:",t);try{const e=await fetch(`${Ns}/customer/work/getOttType`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Work API] getOttType HTTP error:",e.status),null;const n=await e.json();return console.log("[Work API] getOttType response:",n),Array.isArray(n)&&n.length>0?n[0]:n.data&&Array.isArray(n.data)&&n.data.length>0?n.data[0]:n.output&&Array.isArray(n.output)&&n.output.length>0?n.output[0]:n}catch(e){return console.error("[Work API] getOttType error:",e),null}},zg=async t=>{console.log("[Common Code API] getCodeDetail params:",t);try{const e=await fetch(`${Ns}/system/common/getCodeDetail`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!e.ok)return console.error("[Common Code API] getCodeDetail HTTP error:",e.status),[];const n=await e.json();return console.log("[Common Code API] getCodeDetail response:",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:[]}catch(e){return console.error("[Common Code API] getCodeDetail error:",e),[]}},wA=async t=>{console.log("[getEqtMasterInfo] API :",t);try{const n=await(await ir(`${Ns}/customer/equipment/getEqtMasterInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",n),Array.isArray(n)?n:n.data&&Array.isArray(n.data)?n.data:n.output1&&Array.isArray(n.output1)?n.output1:n}catch(e){throw console.error("   :",e),e}},bE=async t=>{console.log("[getOutEquipmentTargetList] API :",t);try{const n=await(await ir(`${Ns}/customer/equipment/getOutEquipmentTargetList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("    :",n),n}catch(e){throw console.error("    :",e),e instanceof Qs?e:new Qs("    .")}},CE=async t=>{const e={...t,RETURN_TP:t.RETURN_TP||"2",RETURN_STAT:t.RETURN_STAT||"2"};console.log("[getEquipmentReturnRequestListAll] API :",e);try{const r=await(await ir(`${Ns}/customer/equipment/getEquipmentReturnRequestList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).json();return console.log("   :",r),Array.isArray(r)?r:r.output1||r.data||[]}catch(n){throw console.error("   :",n),n instanceof Qs?n:new Qs("   .")}},LA=async(t,e)=>{console.log("[delEquipmentReturnRequest]  :",t);try{if(!t.WRKR_ID||!t.CRR_ID)throw new Qs("  .");if(!t.equipmentList||t.equipmentList.length===0)throw new Qs("  .");const n=t.equipmentList.length;let r=0,i=[],a=0;for(const o of t.equipmentList){a++,e==null||e(a,n,o.EQT_SERNO||o.EQT_NO);const c={EQT_NO:o.EQT_NO,REQ_DT:o.REQ_DT||"",RETURN_TP:o.RETURN_TP||"2",EQT_USE_ARR_YN:o.EQT_USE_ARR_YN==="A"?"A":"Y",WRKR_ID:t.WRKR_ID,CRR_ID:t.CRR_ID,SO_ID:t.SO_ID||""};console.log("[delEquipmentReturnRequest]  :",o.EQT_SERNO,c);try{const h=await(await ir(`${Ns}/customer/equipment/delEquipmentReturnRequest`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)})).json();console.log("[delEquipmentReturnRequest]  :",o.EQT_SERNO,h),h&&(h.MSGCODE==="0"||h.MSGCODE==="SUCCESS"||h.success===!0)?r++:i.push(o.EQT_SERNO||o.EQT_NO)}catch(u){console.error("[delEquipmentReturnRequest]  :",o.EQT_SERNO,u),i.push(o.EQT_SERNO||o.EQT_NO)}}if(console.log("[delEquipmentReturnRequest] : ",r,"/ ",i.length),r>0)return{success:!0,message:i.length>0?`${r}  , ${i.length} `:`${r}  .`,data:{successCount:r,failedItems:i}};throw new Qs(` : ${i.join(", ")}`)}catch(n){throw console.error("[delEquipmentReturnRequest]  :",n),n instanceof Qs?n:new Qs(n.message||"  .")}},Og=async t=>{console.log("[getWrkrHaveEqtListAll] API :",t);try{const n=await(await ir(`${Ns}/customer/equipment/getWrkrHaveEqtList_All`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",n),n?n.data&&Array.isArray(n.data)?n.data:Array.isArray(n)?n:n.output1||[]:[]}catch(e){throw console.error("   :",e),e instanceof Qs?e:new Qs("   .")}},NE=async t=>{console.log("[getEquipmentChkStndByAAll] API :",t);try{const n=await(await ir(`${Ns}/customer/equipment/getEquipmentChkStndByA_All`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("   :",n),n?n.data&&Array.isArray(n.data)?n.data:Array.isArray(n)?n:n.output1||[]:[]}catch(e){throw console.error("   :",e),e instanceof Qs?e:new Qs("   .")}},PM=async t=>{console.log("[getEquipmentTypeList] API call:",t);try{const n=await(await ir(`${Ns}/customer/equipment/getEquipmentTypeList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();return console.log("[getEquipmentTypeList] Result:",n),n?n.data&&Array.isArray(n.data)?n.data:Array.isArray(n)?n:n.output1||[]:[]}catch(e){return console.error("[getEquipmentTypeList] Failed:",e),[]}},Fp="dlive_transferred_equipment",PA=48,AA=t=>{try{const n=tN().filter(i=>i.EQT_SERNO!==t.EQT_SERNO),r={...t,transferredAt:Date.now(),isTransferred:!0};n.push(r),localStorage.setItem(Fp,JSON.stringify(n)),console.log("[TransferredEquipment] Saved:",t.EQT_SERNO)}catch(e){console.error("[TransferredEquipment] Save error:",e)}},tN=()=>{try{const t=localStorage.getItem(Fp);if(!t)return[];const e=JSON.parse(t),n=Date.now(),r=PA*60*60*1e3,i=e.filter(a=>n-a.transferredAt<r);return i.length!==e.length&&localStorage.setItem(Fp,JSON.stringify(i)),i}catch(t){return console.error("[TransferredEquipment] Get error:",t),[]}},kA=async t=>{try{const e=await fetch(`${Ns}/customer/sigtrans/getLghvSendHist`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});return e.ok?(await e.json()).output||[]:(console.error("[Signal API] getLghvSendHist HTTP error:",e.status),[])}catch(e){return console.error("[Signal API] getLghvSendHist error:",e),[]}},UA=t=>tN().filter(n=>n.TO_WRKR_ID===t),BA=t=>{try{const n=tN().filter(r=>r.EQT_SERNO!==t);localStorage.setItem(Fp,JSON.stringify(n)),console.log("[TransferredEquipment] Removed:",t)}catch(e){console.error("[TransferredEquipment] Remove error:",e)}},GA=(t,e)=>{const n=UA(e);if(n.length===0)return{merged:t,transferredCount:0};const r=new Set(t.map(a=>a.EQT_SERNO)),i=[];return n.forEach(a=>{r.has(a.EQT_SERNO)?BA(a.EQT_SERNO):i.push({EQT_NO:a.EQT_NO,EQT_SERNO:a.EQT_SERNO,ITEM_NM:a.ITEM_NM,ITEM_MID_NM:a.ITEM_MID_NM||"",ITEM_MAX_NM:a.ITEM_MAX_NM||"",EQT_CL_NM:a.EQT_CL_NM||"",SO_ID:a.SO_ID,SO_NM:a.SO_NM||"",WRKR_ID:a.TO_WRKR_ID,FROM_WRKR_ID:a.FROM_WRKR_ID,FROM_WRKR_NM:a.FROM_WRKR_NM||"",isTransferred:!0,transferredAt:a.transferredAt})}),console.log("[TransferredEquipment] Merging:",i.length,"items not in API"),{merged:[...t,...i],transferredCount:i.length}},WA=async t=>{try{const e=await fetch(`${Ns}/customer/sigtrans/getLghvSvcRslt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({JOB_ID:t})});return e.ok?(await e.json()).output||[]:(console.error("[Signal API] getLghvSvcRslt HTTP error:",e.status),[])}catch(e){return console.error("[Signal API] getLghvSvcRslt error:",e),[]}},FA=async t=>{try{const e=await fetch(`${Ns}/customer/sigtrans/getSendHistory`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});return e.ok?((await e.json()).output||[]).map(i=>{const a={};for(const o of Object.keys(i))a[o.toUpperCase()]=i[o];return a}):[]}catch(e){return console.error("[Signal API] getSendHistory error:",e),[]}},KA=async t=>{const e=n=>n.map(r=>{const i={};for(const a of Object.keys(r))i[a.toUpperCase()]=r[a];return i});try{const n=await fetch(`${Ns}/customer/sigtrans/getSvcRsltAndDtlRslt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({IF_DTL_ID:t})});if(!n.ok)return{svcRslt:[],svcDtlRslt:[]};const r=await n.json(),i=r.output1||r.ds_svc_rest||r.ds_svc_rslt||[],a=r.output2||r.ds_svc_dtl_rslt||r.ds_svc_dtl||[];return{svcRslt:e(i),svcDtlRslt:e(a)}}catch(n){return console.error("[Signal API] getSvcRsltAndDtlRslt error:",n),{svcRslt:[],svcDtlRslt:[]}}},QA=()=>{try{const t=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(t){const e=JSON.parse(t);return e.userId||e.USR_ID||e.LOGIN_ID||"SYSTEM"}}catch{}return"SYSTEM"},E1=async t=>{try{const e=await fetch(`${Ns}/customer/common/customercommon/getConditionalCustList2`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,SERCH_GB:"3",LOGIN_ID:QA()})});if(!e.ok)return[];const n=await e.json();return n.output||n.data||[]}catch(e){return console.error("[Customer Search] error:",e),[]}},YA=async t=>E1({TEL_NO:t}),$A=async t=>E1({CUST_ID:t}),VA=async t=>E1({CTRT_ID:t}),zA=async t=>E1({EQT_SERNO:t}),HA=async t=>{try{const e=await fetch(`${Ns}/customer/contract/getContractInfo`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({CUST_ID:t})});if(!e.ok)return[];const n=await e.json();return Array.isArray(n)?n:n.output||n.data||[]}catch(e){return console.error("[Customer Search] getContractList error:",e),[]}};var Ju=tM();const sn=({value:t,onValueChange:e,options:n=[],placeholder:r="",className:i="",required:a=!1,disabled:o=!1})=>{const[c,u]=b.useState(!1),[h,m]=b.useState(!1);b.useEffect(()=>{m(!0)},[]);const _=n==null?void 0:n.find(g=>g.value===t);b.useEffect(()=>{const g=C=>{C.key==="Escape"&&u(!1)};if(c)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[c]);const p=g=>{e(g),u(!1)};return s.jsxs("div",{className:`relative ${i}`,style:{zIndex:"auto"},children:[s.jsxs("button",{type:"button",onClick:()=>!o&&u(!c),disabled:o,className:`
          w-full p-3 text-left border border-gray-300 rounded-lg
          transition-colors duration-200 flex items-center justify-between
          ${o?"bg-gray-100 cursor-not-allowed opacity-60":"bg-white hover:border-gray-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"}
          ${c&&!o?"ring-2 ring-cyan-500 border-cyan-500":""}
        `,"aria-expanded":c,"aria-haspopup":"listbox",required:a,children:[s.jsx("span",{className:`text-base ${_?"text-gray-900":"text-gray-500"}`,children:_?_.label:r}),s.jsx(hr,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${c?"rotate-180":""}`})]}),c&&h&&typeof window<"u"&&Ju.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50",style:{zIndex:99999},onClick:()=>u(!1)}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-2xl",style:{zIndex:1e5,maxHeight:"60vh",display:"flex",flexDirection:"column"},children:[s.jsx("div",{className:"flex justify-center py-3 bg-white rounded-t-xl",style:{flexShrink:0},children:s.jsx("div",{className:"w-8 h-1 bg-gray-300 rounded-full"})}),s.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:0,WebkitOverflowScrolling:"touch"},children:s.jsx("div",{className:"py-1",children:(n==null?void 0:n.length)>0?n.map(g=>s.jsxs("button",{type:"button",onClick:()=>p(g.value),className:`
                      w-full px-4 py-3 text-left text-base hover:bg-gray-50
                      transition-colors duration-150 flex items-center justify-between
                      ${t===g.value?"bg-cyan-50 text-cyan-700":"text-gray-900"}
                    `,role:"option","aria-selected":t===g.value,children:[s.jsx("span",{className:"font-medium",children:g.label}),t===g.value&&s.jsx(ho,{className:"w-5 h-5 text-cyan-600"})]},g.value)):s.jsx("div",{className:"px-4 py-3 text-center text-gray-500 text-sm",children:" "})})}),s.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",style:{flexShrink:0,paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:s.jsx("button",{type:"button",onClick:()=>u(!1),className:"w-full py-3 text-center text-gray-600 font-medium",children:""})})]})]}),document.body)]})},qA=(t,e=10,n=500)=>{if(!t||typeof t!="string")return{valid:!1,message:" ."};const r=t.trim();return r.length<e?{valid:!1,message:` ${e}  . ( ${r.length})`}:r.length>n?{valid:!1,message:` ${n}  . ( ${r.length})`}:{valid:!0}},xn={INSTALLATION:"01",REMOVAL:"02",AS:"03",SUSPENSION:"04",PRODUCT_CHANGE:"05",HOME_RELOCATION:"06",RELOCATION_INSTALL:"07",RELOCATION_REMOVAL:"08",ADDITIONAL_PRODUCT:"09",TEMP_REMOVAL:"0430",TEMP_REMOVAL_RESTORE:"0440"},Nc={INSTALL_SCHEDULED:"10",ACTIVE:"20",SUSPENDED:"30",SUSPENDED_SPECIFIC:"37",TERMINATED:"90"},SE={RECEIVED:"1",ASSIGNED:"2"},_f=t=>t===xn.INSTALLATION,xf=t=>t===xn.AS,wg=t=>t===xn.REMOVAL,Lg=t=>t===xn.RELOCATION_INSTALL||t===xn.RELOCATION_REMOVAL,xp=t=>t===xn.PRODUCT_CHANGE,Db=t=>t===xn.SUSPENSION,XA=(t,e)=>t===xn.SUSPENSION&&e===xn.TEMP_REMOVAL,AM=XA,JA=(t,e)=>t===xn.SUSPENSION&&e===xn.TEMP_REMOVAL_RESTORE,kM=JA,ZA=(t,e)=>{if(!t||!e)return!1;switch(t){case xn.INSTALLATION:return e===Nc.INSTALL_SCHEDULED;case xn.REMOVAL:return e===Nc.ACTIVE||e===Nc.SUSPENDED||e===Nc.SUSPENDED_SPECIFIC;case xn.AS:return e!==Nc.TERMINATED;case xn.TEMP_REMOVAL:return e===Nc.ACTIVE;case xn.TEMP_REMOVAL_RESTORE:return e===Nc.SUSPENDED||e===Nc.SUSPENDED_SPECIFIC;case xn.HOME_RELOCATION:case xn.PRODUCT_CHANGE:case xn.RELOCATION_INSTALL:case xn.RELOCATION_REMOVAL:return e===Nc.ACTIVE;default:return e!==Nc.TERMINATED}},e6=(t,e)=>{if(ZA(t,e))return{valid:!0};let r="       .";switch(t){case xn.INSTALLATION:r="    .";break;case xn.REMOVAL:r="      .";break;case xn.TEMP_REMOVAL:r="   .";break;case xn.TEMP_REMOVAL_RESTORE:r="   .";break;case xn.AS:r="A/S    .";break}return{valid:!1,message:r}},sN=t=>t?t===SE.RECEIVED||t===SE.ASSIGNED:!1,t6=(t,e,n)=>{const r=[];return(!e||e.trim()==="")&&r.push("   ."),t.WRK_STAT_CD&&(sN(t.WRK_STAT_CD)||r.push("       .")),e==="099Z"&&(!n||n.trim().length<10)&&r.push("      10   ."),t.WRK_CD,xn.RELOCATION_INSTALL,{valid:r.length===0,errors:r}},s6=t=>{switch(t){case xn.INSTALLATION:return" ";case xn.AS:return"A/S ";case xn.REMOVAL:return" ";case xn.RELOCATION_INSTALL:return" ";case xn.RELOCATION_REMOVAL:return" ";case xn.PRODUCT_CHANGE:return" ";case xn.SUSPENSION:case xn.TEMP_REMOVAL:return" ";case xn.TEMP_REMOVAL_RESTORE:return" ";case xn.HOME_RELOCATION:return" ";case xn.ADDITIONAL_PRODUCT:return" ";default:return" "}},vE=t=>{switch(t){case xn.INSTALLATION:return"  .";case xn.AS:return"A/S .";case xn.REMOVAL:return" .";case xn.RELOCATION_INSTALL:return" .";case xn.RELOCATION_REMOVAL:return" .";case xn.PRODUCT_CHANGE:return" .";case xn.SUSPENSION:case xn.TEMP_REMOVAL:return" .";case xn.TEMP_REMOVAL_RESTORE:return" .";case xn.HOME_RELOCATION:return" .";case xn.ADDITIONAL_PRODUCT:return" .";default:return" ."}},u0=t=>t?["F","FG","Z","ZG"].includes(t):!1,nN=({isOpen:t,onClose:e,onConfirm:n,workOrder:r,userId:i,showToast:a})=>{var re;const[o,c]=b.useState("[]"),[u,h]=b.useState(new Date().toISOString().slice(0,10)),m=fe=>{if(!fe)return"";const T=fe.replace(/\D/g,"");return T.length!==10?fe:`${T.slice(0,3)}-${T.slice(3,6)}-${T.slice(6)}`},[_,p]=b.useState(""),[g,C]=b.useState({}),[y,N]=b.useState(!1),[v,P]=b.useState([]),[w,M]=b.useState("X"),[k,B]=b.useState("N"),[G,U]=b.useState(!1),[I,E]=b.useState(!1),A=["600","700","701","710","800","802","803","804"];b.useEffect(()=>{(async()=>{var T;if(console.log("[WorkCancelModal] useEffect  - isOpen:",t,"WRK_STAT_CD:",r.WRK_STAT_CD,"workOrder.id:",r.id),!!t){if(r.WRK_STAT_CD&&!sN(r.WRK_STAT_CD)){a&&a("       .","error"),e();return}if(!r.id){console.log("[OST] workOrder.id  - ");return}U(!0);try{console.log("[OST] getWorkCancelInfo :",r.id);const j=await S1({WRK_ID:r.id,RCPT_ID:r.RCPT_ID,CUST_ID:(T=r.customer)==null?void 0:T.id});if(j){console.log("[OST] :",j),M(j.OST_WORKABLE_STAT||"X"),B(j.HOTBILL_YN||"N");const K=j.OST_WORKABLE_STAT,J=r.WRK_CD;if(K==="0"||K==="3"||K==="4"){let q="";J==="01"?q="    .":J==="02"?q="    .":q="     .",a&&a(q,"error"),e();return}}}catch(j){console.error("[OST] :",j),M("X")}finally{U(!1)}}})()},[t,r.id,r.WRK_STAT_CD,r.RCPT_ID,(re=r.customer)==null?void 0:re.id,r.WRK_CD,a,e]),b.useEffect(()=>{t&&Y()},[t]);const Y=async()=>{try{console.log(" [] CMWO200   ");const fe=await qa("CMWO200");console.log(" [] API   :",fe[0]),console.log(" []   :",fe.length);const T=fe.filter(j=>j.code!=="[]").map(j=>({value:j.code,label:`[${j.code}] ${j.name}`,refCode:j.ref_code||"",refCode2:j.ref_code2||"",refCode12:j.ref_code12||""}));T.unshift({value:"[]",label:"( )",refCode:"",refCode2:"",refCode12:""}),P(T),console.log("[]   :",T.length,""),console.log(" []  :",T.slice(0,3))}catch(fe){console.error("[]   :",fe),P([{value:"[]",label:"( )",refCode:"",refCode2:"",refCode12:""}])}};b.useEffect(()=>{const fe={};if(o!=="[]"&&o.endsWith("Z")){const T=qA(_,10,200);T.valid||(fe.procCt=T.message||"  10  .")}C(fe)},[o,_]);const se=fe=>!fe||fe==="05"||fe==="06"||fe==="07"||fe==="09"?"01":fe==="08"?"02":fe==="03"?"03":fe,X=b.useMemo(()=>{const fe=r.WRK_CD,T=r.asReasonCode,j=r.SO_ID,K=se(fe),J=K+"3";console.log(""),console.log("[ ]  "),console.log(""),console.log(" WRK_CD:",fe," refCode:",K," refCodeWithSuffix:",J),console.log(" WRK_RCPT_CL:",T),console.log(" SO_ID:",j),console.log("   :",v.length);let q=v.filter(V=>V.value==="[]"?(console.log("    "),!0):V.refCode!==J?(console.log(`  [${V.value}] ${V.label}: refCode="${V.refCode}" != "${J}"`),!1):(console.log(`  [${V.value}] ${V.label}: refCode="${V.refCode}" `),!0));return K==="03"&&(console.log("[AS ] AS    "),console.log("[AS ] WRK_RCPT_CL:",T),T==="JJ"?(console.log("[AS ] CS(JJ) - 033G "),q=q.filter(V=>V.value==="033G")):T==="JH"?(console.log("[AS ] (JH) - 033H "),q=q.filter(V=>V.value==="033H")):(console.log("[AS ]  AS -   "),q=q.filter(V=>{if(V.value==="033G")return console.log(`    [${V.value}] 033G `),!1;if(V.refCode2==="Y"){const ce=A.includes(j||"");if(console.log(`     [${V.value}] refCode2='Y' (), isCallCenter=${ce}`),!ce)return console.log(`    [${V.value}]   `),!1}return V.refCode12==="JH"?(console.log(`    [${V.value}] refCode12='JH' (033H) `),!1):(console.log(`    [${V.value}] `),!0)}))),console.log(""),console.log("[ ]  :",q.length,""),console.log(""),q},[r.WRK_CD,r.asReasonCode,r.SO_ID,v]),z=fe=>{const T=fe.type,j=fe.typeDisplay;return T===ga.Installation||T==="Installation"||T===""||j===""?"01":T===ga.AS||T==="AS"||T==="A/S"||j==="A/S"?"02":T===ga.Move||T==="Move"||T===""||j===""?"03":T===ga.Change||T==="Change"||T===""||j===""?"04":"05"},$=async()=>{E(!1),await F()},F=async()=>{var K;N(!0);const fe=r.WRK_CD||"";if(console.log("[] OST_WORKABLE_STAT:",w,"WRK_CD:",fe),(w==="1"||w==="2")&&(fe==="01"||fe==="02")){console.log("[] OST   ");try{const J=await sA({RCPT_ID:r.RCPT_ID||"",CUST_ID:((K=r.customer)==null?void 0:K.id)||"",AGENT_FL:"1"});if(J){const q=(J.AGENT_FL||"")+(J.BUSI_TYPE||"")+(J.RES_CD||"");if(console.log("[] OST_BUSI:",q),q==="10310BS0000"||q==="10320BS0000"){console.log("[] modOstWorkCancel API ");const V=await nA({RCPT_ID:r.RCPT_ID||"",WRK_CD:fe,UNPROC_RESN_CD:o,WRK_STAT_CD:"3",PROC_CT:_||"",REG_UID:i||""});V.code==="SUCCESS"||V.message==="SUCCESS"?(a&&a(" .","success"),e()):a&&a(V.message||"  .","error"),N(!1);return}}}catch(J){console.error("[] OST  :",J),a&&a("OST    .","error"),N(!1);return}}const T=z(r),j={WRK_ID:r.id,WRK_STAT_CD:"3",UNPROC_RESN_CD:o,CALL_CNTN_DATE:u.replace(/-/g,""),CHG_UID:i||"",REG_UID:i||"",PROC_CT:_||"",RCPT_ID:r.RCPT_ID||"",WRK_CD:T};console.log("  :",j),n(j),N(!1)},L=async fe=>{if(fe.preventDefault(),y)return;const T=t6(r,o,_);if(!T.valid){const K=T.errors.join(`
`);a&&a(K,"error",!0);return}if(o!=="[]"&&o.endsWith("Z")&&_.trim().length<10){a&&a("      10  .","error");return}if(!i){a&&a(" () .  .","error");return}if((r.WRK_CD||"")==="07"&&k==="Y"){E(!0);return}await F()};return t?s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-[9999]",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto mx-2 sm:mx-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-4 sm:p-6 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:" "}),s.jsx("button",{onClick:e,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(Mi,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-3 text-sm sm:text-base",children:"  "}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:":"}),s.jsx("span",{className:"text-sm font-medium",children:r.customer.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:" :"}),s.jsx("span",{className:"text-sm font-medium",children:r.typeDisplay})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:" ID:"}),s.jsx("span",{className:"text-sm font-mono",children:m(r.id)})]})]})]}),s.jsxs("form",{onSubmit:L,className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:o,onValueChange:c,options:X,placeholder:"",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:u,onChange:fe=>h(fe.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 opacity-0 absolute inset-0 cursor-pointer",required:!0}),s.jsx("div",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-gray-900",children:u||"YYYY-MM-DD"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",o!=="[]"&&o.endsWith("Z")&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:_,onChange:fe=>p(fe.target.value),placeholder:o!=="[]"&&o.endsWith("Z")?"      10  ":"     ",className:`w-full p-3 border rounded-lg focus:ring-cyan-500 focus:border-cyan-500 min-h-[80px] resize-y ${g.procCt?"border-red-500":"border-gray-300"}`,maxLength:200,required:o!=="[]"&&o.endsWith("Z")}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsxs("p",{className:"text-xs text-gray-500",children:[_.length,"/200"]}),o!=="[]"&&o.endsWith("Z")&&s.jsx("p",{className:"text-xs text-blue-600",children:"( 10 )"})]}),g.procCt&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:g.procCt})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:""}),s.jsx("button",{type:"submit",disabled:y||G||o&&o.endsWith("Z")&&_.trim().length<10,className:`flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-semibold transition-all duration-200 ${y||G||o&&o.endsWith("Z")&&_.trim().length<10?"opacity-50 cursor-not-allowed":""}`,children:G?"...":y?"...":"  "})]})]})]}),I&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[10000]",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center",children:s.jsx(xo,{className:"w-6 h-6 text-amber-600"})}),s.jsx("h4",{className:"text-lg font-bold text-gray-800",children:" "})]}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-2 mb-6",children:[s.jsxs("p",{children:["   ",s.jsx("strong",{className:"text-amber-700",children:" "}),"."]}),s.jsx("p",{className:"text-gray-600",children:"    CONA       ."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>E(!1),className:"flex-1 px-4 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:""}),s.jsx("button",{type:"button",onClick:$,className:"flex-1 px-4 py-2.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors",children:"  "})]})]})})]}):null},n6=t=>{const e=t.toLowerCase();return e.includes("a/s")||e.includes("as")||e.includes("")||e.includes("")?Fu:e.includes("")&&(e.includes("")||e.includes(""))?nP:e.includes("")||e.includes("")||e.includes("")?Vw:e.includes("")||e.includes("")?ML:e.includes("")||e.includes("")||e.includes("wifi")||e.includes("")?Up:e.includes("tv")||e.includes("")||e.includes("")?EP:e.includes("")||e.includes("phone")?VC:e.includes("")||e.includes("")||e.includes("")?$L:e.includes("")||e.includes("")||e.includes("")?sL:e.includes("")||e.includes("")||e.includes("")?lP:X2},r6=t=>{const e=t.toLowerCase();return e.includes("")||e.includes("")&&e.includes("")?"text-emerald-500":e.includes("a/s")||e.includes("as")||e.includes("")||e.includes("")?"text-orange-500":e.includes("")||e.includes("")?"text-red-500":e.includes("")||e.includes("")||e.includes("")?"text-blue-500":e.includes("")||e.includes("")?"text-purple-500":e.includes("")||e.includes("")?"text-gray-500":e.includes("")?"text-blue-500":e.includes("")||e.includes("")||e.includes("wifi")||e.includes("")?"text-cyan-500":e.includes("tv")||e.includes("")||e.includes("")?"text-indigo-500":e.includes("")||e.includes("phone")?"text-pink-500":"text-gray-500"},Rb=({label:t,value:e,children:n})=>s.jsx("div",{className:"py-2 sm:py-3 border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 hover:bg-gray-50/50 transition-colors duration-150 rounded-lg px-2 sm:px-3 py-1 sm:py-2",children:[s.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-600 flex items-center",children:t}),s.jsx("dd",{className:"sm:col-span-2 flex items-center text-sm sm:text-base text-gray-900 mt-0.5 sm:mt-0",children:n||e||"-"})]})}),i6=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-orange-800 mb-2 flex items-center",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-orange-500 rounded-full mr-2"}),"A/S  "]}),s.jsxs("div",{className:"space-y-1 text-sm text-orange-700",children:[s.jsx(Rb,{label:"A/S ",value:t.WRK_DTL_TCD||"AS "}),s.jsx(Rb,{label:" ID",value:t.CTRT_ID}),s.jsx(Rb,{label:" ID",value:t.RCPT_ID})]})]}),t.asHistory&&t.asHistory.length>0&&s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})," A/S "]}),s.jsx("div",{className:"space-y-2",children:t.asHistory.map((e,n)=>s.jsxs("div",{className:"border-l-2 border-blue-300 pl-3 py-2 hover:bg-blue-50 transition-colors rounded",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:e.asDate}),s.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-800 rounded-full",children:e.asResult})]}),s.jsx("div",{className:"text-sm text-gray-600",children:e.asReason}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",e.asWorker]})]},n))})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-blue-800 mb-2",children:" A/S      "}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"/    "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"A/S      "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"   "})]})]})]})]}),jx=({label:t,value:e,children:n})=>s.jsx("div",{className:"py-2 sm:py-3 border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 hover:bg-gray-50/50 transition-colors duration-150 rounded-lg px-2 sm:px-3 py-1 sm:py-2",children:[s.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-600 flex items-center",children:t}),s.jsx("dd",{className:"sm:col-span-2 flex items-center text-sm sm:text-base text-gray-900 mt-0.5 sm:mt-0",children:n||e||"-"})]})}),a6=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-2 flex items-center",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-2"}),"  "]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(jx,{label:"",value:t.productName||" "}),s.jsx(jx,{label:" ",value:t.installLocation||t.customer.address}),s.jsx(jx,{label:" ID",value:t.CTRT_ID}),s.jsx(jx,{label:" ID",value:t.RCPT_ID})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})," "]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-green-600 focus:ring-green-500",disabled:!0}),s.jsx("span",{children:"    "})]})]})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-green-800 mb-2",children:"       "}),s.jsxs("ul",{className:"text-xs text-green-700 space-y-1",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     (,  )"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"    ()"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"  "})]})]})]})]}),Ox=({label:t,value:e,children:n})=>s.jsx("div",{className:"py-2 sm:py-3 border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 hover:bg-gray-50/50 transition-colors duration-150 rounded-lg px-2 sm:px-3 py-1 sm:py-2",children:[s.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-600 flex items-center",children:t}),s.jsx("dd",{className:"sm:col-span-2 flex items-center text-sm sm:text-base text-gray-900 mt-0.5 sm:mt-0",children:n||e||"-"})]})}),l6=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-red-800 mb-2 flex items-center",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mr-2"}),"  "]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Ox,{label:"() ",value:t.termReasonCode||" "}),s.jsx(Ox,{label:"",value:t.termFee?`${t.termFee.toLocaleString()}`:""}),s.jsx(Ox,{label:" ID",value:t.CTRT_ID}),s.jsx(Ox,{label:" ID",value:t.RCPT_ID})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"  "]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"  "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"   "})]}),s.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-2 rounded transition-colors",children:[s.jsx("input",{type:"checkbox",className:"rounded text-red-600 focus:ring-red-500",disabled:!0}),s.jsx("span",{children:"   "})]})]})]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-red-800 mb-2 flex items-center gap-1",children:[s.jsx(xo,{size:14}),"      "]}),s.jsxs("ul",{className:"text-xs text-red-700 space-y-1",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     (,  )"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"()      "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"     "})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"   "})]})]})]}),t.termFee&&t.termFee>0&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-yellow-800 mb-2 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"  "]}),s.jsxs("p",{className:"text-xs text-yellow-700",children:[" ",s.jsxs("strong",{className:"text-yellow-900",children:[t.termFee.toLocaleString(),""]})," .       ."]})]})]}),no=({label:t,value:e,highlight:n})=>s.jsxs("div",{className:`flex py-2 border-b border-gray-100 ${n?"bg-yellow-50":""}`,children:[s.jsx("div",{className:"w-1/3 text-xs sm:text-sm font-medium text-gray-700",children:t}),s.jsx("div",{className:"w-2/3 text-xs sm:text-sm text-gray-900",children:e||"-"})]}),o6=({order:t})=>{const e=AM(t.WRK_CD,t.WRK_DTL_TCD),n=kM(t.WRK_CD,t.WRK_DTL_TCD);return s.jsxs("div",{className:"space-y-4",children:[e&&s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-orange-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-orange-100 divide-y divide-gray-100",children:[s.jsx(no,{label:" ",value:t.mmtSusCd||"",highlight:!t.mmtSusCd}),s.jsx(no,{label:" ",value:t.susHopeDd?wx(t.susHopeDd):"",highlight:!t.susHopeDd}),s.jsx(no,{label:" ",value:t.mmtSusHopeDd?wx(t.mmtSusHopeDd):"",highlight:!t.mmtSusHopeDd}),s.jsx(no,{label:" ",value:t.susProcYn==="Y"?"":""}),t.termDays&&s.jsx(no,{label:"  ",value:`${t.termDays}`}),t.mmtCnt&&s.jsx(no,{label:"   ",value:`${t.mmtCnt}`})]}),s.jsxs("div",{className:"mt-3 bg-orange-100 border border-orange-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-orange-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-orange-700 space-y-1",children:[s.jsx("li",{children:"    (MMT_SUS_CD)"}),s.jsx("li",{children:"   (SUS_HOPE_DD)"}),s.jsx("li",{children:"   (MMT_SUS_HOPE_DD)"}),s.jsx("li",{children:"    (SUS_PROC_YN)"})]})]}),s.jsxs("div",{className:"mt-3 bg-white border border-orange-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-1",children:[s.jsx(xo,{size:14}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600",children:["   ",s.jsx("span",{className:"font-semibold text-orange-600",children:"'20'()"}),"  ."]}),s.jsxs("div",{className:"mt-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="20"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="20"?s.jsx(Ap,{size:14}):s.jsx(kp,{size:14})]})]})]})]}),n&&s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[s.jsx(tP,{size:16}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-blue-100 divide-y divide-gray-100",children:[s.jsx(no,{label:" ",value:t.mmtSusCd||""}),s.jsx(no,{label:" ",value:t.susHopeDd?wx(t.susHopeDd):""}),s.jsx(no,{label:" ",value:t.mmtSusHopeDd?wx(t.mmtSusHopeDd):""}),t.termDays&&s.jsx(no,{label:"  ",value:`${t.termDays}`})]}),s.jsxs("div",{className:"mt-3 bg-blue-100 border border-blue-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[s.jsx(H2,{size:14}),"  "]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:"  "}),s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"mt-3 bg-white border border-blue-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-1",children:[s.jsx(xo,{size:14}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600",children:["    ",s.jsx("span",{className:"font-semibold text-blue-600",children:"'30'()"})," "," ",s.jsx("span",{className:"font-semibold text-blue-600",children:"'37'(-)"}),"  ."]}),s.jsxs("div",{className:"mt-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="30"||t.CTRT_STAT==="37"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="30"||t.CTRT_STAT==="37"?s.jsx(Ap,{size:14}):s.jsx(kp,{size:14})]})]})]})]}),t.WRK_CD==="06"&&s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 divide-y divide-gray-100",children:[s.jsx(no,{label:" ",value:t.WRK_DTL_TCD==="0610"?"":t.WRK_DTL_TCD==="0620"?"":t.WRK_DTL_TCD||""}),s.jsx(no,{label:" ",value:t.details||""})]}),s.jsxs("div",{className:"mt-3 bg-gray-100 border border-gray-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0610 ()"}),":    "]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0620 ()"}),":     "]})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"  "}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-2",children:[e&&s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"1."}),s.jsx("span",{children:"     ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"2."}),s.jsx("span",{children:" (~)   ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"3."}),s.jsx("span",{children:"  '(20)' ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"4."}),s.jsx("span",{children:"        ."})]})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"1."}),s.jsx("span",{children:"    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"2."}),s.jsx("span",{children:"    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"3."}),s.jsx("span",{children:"     ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"4."}),s.jsx("span",{children:"     ."})]})]})]})]})]})},wx=t=>!t||t.length!==8?t:`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`,dg=({label:t,value:e,highlight:n})=>s.jsxs("div",{className:`flex py-2 border-b border-gray-100 ${n?"bg-yellow-50":""}`,children:[s.jsx("div",{className:"w-1/3 text-xs sm:text-sm font-medium text-gray-700",children:t}),s.jsx("div",{className:"w-2/3 text-xs sm:text-sm text-gray-900",children:e||"-"})]}),c6=({order:t})=>{const n=(r=>{switch(r){case"0510":case"0520":return" ";case"0550":case"0560":return" ";default:return" "}})(t.WRK_DTL_TCD);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[s.jsx(Co,{size:16})," "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-purple-100 divide-y divide-gray-100",children:[s.jsx(dg,{label:" ",value:n}),s.jsx(dg,{label:"  ",value:t.WRK_DTL_TCD||""}),s.jsx(dg,{label:" ",value:t.currentProduct||t.productName||"",highlight:!t.currentProduct&&!t.productName}),s.jsx(dg,{label:" ",value:t.newProduct||"",highlight:!t.newProduct}),s.jsx(dg,{label:"",value:t.productName||""})]}),s.jsxs("div",{className:"mt-3 bg-purple-100 border border-purple-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-purple-800 mb-2 flex items-center gap-1",children:[s.jsx(H2,{size:14}),"   "]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0510"}),":   (  )"]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0520"}),":    ",s.jsx("span",{className:"text-red-600",children:"0510  "})]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0550"}),":   ( )"]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"0560"}),":  2  ",s.jsx("span",{className:"text-red-600",children:"0550  "})]})]})]}),s.jsxs("div",{className:"mt-3 bg-white border border-purple-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-purple-800 mb-2 flex items-center gap-1",children:[s.jsx(Ai,{size:14}),"  "]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[s.jsx("li",{children:"    (BASIC_PROD_CD)"}),s.jsx("li",{children:"    (NEW_PROD_CD)"}),s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "})]})]})]}),(t.WRK_DTL_TCD==="0510"||t.WRK_DTL_TCD==="0520")&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-green-100 p-3",children:[s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[" / ,  ",s.jsx("span",{className:"font-semibold text-green-600",children:"'01'()"}),"    'Y'    ."]}),s.jsx("div",{className:"mt-2 bg-green-50 border border-green-200 rounded p-2",children:s.jsx("p",{className:"text-xs font-semibold text-green-700",children:"SQL : WRK_CD IN ('01','05','07') AND PYM_MTHD = '01' AND ATMT_YN = 'Y'"})})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-3",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"      ."}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700",children:" :"}),s.jsxs("ul",{className:"text-xs text-gray-600 mt-1 space-y-1",children:[s.jsx("li",{children:" WRK_CD IN ('01','05','07','09')"}),s.jsx("li",{children:" PROD_CMPS_CL = '21' ()"})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"  "}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"1."}),s.jsx("span",{children:"     ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"2."}),s.jsx("span",{children:"       ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"3."}),s.jsx("span",{children:"       ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"4."}),s.jsx("span",{children:"   ,    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"5."}),s.jsx("span",{children:"    ."})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"6."}),s.jsx("span",{children:"     ."})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center gap-1",children:[s.jsx(xo,{size:16,className:"text-gray-600"}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["   ",s.jsx("span",{className:"font-semibold text-purple-600",children:"'20'()"}),"   ."]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="20"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="20"?s.jsx(Ap,{size:14}):s.jsx(kp,{size:14})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-yellow-800 mb-2 flex items-center gap-1",children:[s.jsx(xo,{size:16}),""]}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[s.jsx("li",{children:"    0520 0560   "}),s.jsx("li",{children:"      ,     "}),s.jsx("li",{children:"        "}),s.jsx("li",{children:"           "})]})]})]})},Lx=({label:t,value:e,highlight:n})=>s.jsxs("div",{className:`flex py-2 border-b border-gray-100 ${n?"bg-yellow-50":""}`,children:[s.jsx("div",{className:"w-1/3 text-xs sm:text-sm font-medium text-gray-700",children:t}),s.jsx("div",{className:"w-2/3 text-xs sm:text-sm text-gray-900",children:e||"-"})]}),d6=({order:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 border border-teal-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-teal-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-teal-100 divide-y divide-gray-100",children:[s.jsx(Lx,{label:"  ",value:t.customer.address}),s.jsx(Lx,{label:"  ",value:t.installLocation||"",highlight:!t.installLocation}),s.jsx(Lx,{label:"",value:t.productName||""}),s.jsx(Lx,{label:" ID",value:t.CTRT_ID||""})]}),s.jsxs("div",{className:"mt-3 bg-teal-100 border border-teal-200 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-teal-800 mb-2 flex items-center gap-1",children:[s.jsx(Ai,{size:14}),"  "]}),s.jsxs("ul",{className:"text-xs text-teal-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(im,{size:16})," "]}),t.assignedEquipment&&t.assignedEquipment.length>0?s.jsx("div",{className:"space-y-2",children:t.assignedEquipment.map((e,n)=>s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:e.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:e.model})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:e.serialNumber})]})]})},e.id||n))}):s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-xs text-yellow-700 flex items-center gap-1",children:[s.jsx(xo,{size:14}),"   ."]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(Lc,{size:16}),"  "]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2",children:"1"}),s.jsx("h5",{className:"text-xs font-semibold text-blue-800",children:"  "})]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 ml-8",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"bg-green-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2",children:"2"}),s.jsx("h5",{className:"text-xs font-semibold text-green-800",children:"  "})]}),s.jsxs("ul",{className:"text-xs text-green-700 space-y-1 ml-8",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"    "})]})]}),s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2",children:"3"}),s.jsx("h5",{className:"text-xs font-semibold text-purple-800",children:" "})]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1 ml-8",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"      "}),s.jsx("li",{children:"    "})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"  "]}),s.jsxs("div",{className:"bg-white rounded-lg border border-green-100 p-3",children:[s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["  ,  ",s.jsx("span",{className:"font-semibold text-green-600",children:"'01'()"}),"    'Y'    ."]}),s.jsx("div",{className:"mt-2 bg-green-50 border border-green-200 rounded p-2",children:s.jsx("p",{className:"text-xs font-semibold text-green-700",children:"SQL : WRK_CD IN ('01','05','07') AND PYM_MTHD = '01' AND ATMT_YN = 'Y'"})})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:" (WRK_CD='07')      :"}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"()"})," WRK_CD='07':      "]}),s.jsxs("li",{children:[" ",s.jsx("span",{className:"font-semibold",children:"()"})," WRK_CD='08':    "]})]}),s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:s.jsx("p",{className:"text-xs text-blue-700",children:"         ."})})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center gap-1",children:[s.jsx(xo,{size:16,className:"text-gray-600"}),"  "]}),s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["    ",s.jsx("span",{className:"font-semibold text-teal-600",children:"'20'()"}),"   ."]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-2 text-xs flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-600",children:"  : "}),s.jsxs("span",{className:`font-semibold flex items-center gap-1 ${t.CTRT_STAT==="20"?"text-green-600":"text-red-600"}`,children:[t.CTRT_STAT||"",t.CTRT_STAT==="20"?s.jsx(Ap,{size:14}):s.jsx(kp,{size:14})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-yellow-800 mb-2 flex items-center gap-1",children:[s.jsx(xo,{size:16}),""]}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"       "}),s.jsx("li",{children:"      "}),s.jsx("li",{children:"       "}),s.jsx("li",{children:"      "})]})]})]}),Ya=({label:t,value:e,children:n,icon:r})=>s.jsxs("div",{className:"bg-gray-50 rounded-md px-3 py-2 flex items-center justify-between gap-3",children:[s.jsxs("dt",{className:"flex items-center gap-1.5 text-xs text-gray-700 font-semibold flex-shrink-0",children:[r&&s.jsx("span",{className:"text-gray-500",children:r}),t]}),s.jsx("dd",{className:"text-sm text-black font-semibold text-right break-words",children:n||e})]}),UM=({order:t,onBack:e,onUpdateStatus:n,onComplete:r,onStartWorkProcess:i,showToast:a})=>{const o=t.WRK_STAT_CD==="4"||t.status===_n.Completed||t.status==="",[c,u]=b.useState("info"),[h,m]=b.useState(!1),[_,p]=b.useState(!1),g=o;b.useEffect(()=>{(async()=>{var k;try{const B=localStorage.getItem("userInfo");if(!B)return;const G=JSON.parse(B),U={WRKR_ID:G.userId||G.workerId||"",SO_ID:t.SO_ID||G.soId,WORK_ID:t.id,CUST_ID:(k=t.customer)==null?void 0:k.id,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};await Eo(U)}catch{}})()},[t.id]);const C=()=>{if(t.WRK_CD&&t.CTRT_STAT){const M=e6(t.WRK_CD,t.CTRT_STAT);if(!M.valid){a&&a(M.message||"   .","error",!0);return}}i?i(t):r&&r(t)},y=()=>{if(t.WRK_STAT_CD&&!sN(t.WRK_STAT_CD)){a&&a("       .","warning");return}p(!0)},N=async M=>{m(!0),p(!1);try{const k=await eN(M);k.code==="SUCCESS"||k.code==="OK"?(a&&a("  .","success"),n&&n(t.id,_n.Cancelled)):a&&a(` : ${k.message}`,"error",!0)}catch(k){a&&a(k.message||"   .","error",!0),console.error(" :",k)}finally{m(!1)}},v=({tabId:M,title:k,icon:B})=>{const G=o,U=c===M;return s.jsxs("button",{onClick:()=>u(M),className:`relative px-4 sm:px-6 py-3 sm:py-3.5 text-sm sm:text-base font-semibold transition-all duration-200 flex items-center gap-2 ${U?"text-blue-600 bg-blue-50":o?"text-green-600 bg-green-50 hover:text-green-700 hover:bg-green-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[G?s.jsx("svg",{className:`w-5 h-5 ${U?"text-blue-600":"text-green-600"}`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):B,k,U&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 rounded-t-lg bg-blue-600"})]})},P=n6(t.typeDisplay);r6(t.typeDisplay);const w=M=>M?_f(M)?"bg-green-600":xf(M)?"bg-orange-500":wg(M)?"bg-red-600":Lg(M)?"bg-blue-600":xp(M)?"bg-purple-600":Db(M)?"bg-gray-600":"bg-blue-500":"bg-blue-500";return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"pb-40",style:{minHeight:"calc(100vh - 80px)"},children:[s.jsxs("div",{className:"bg-white overflow-hidden",children:[s.jsxs("div",{className:"bg-blue-600 px-4 py-4 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center",children:s.jsx(P,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("h1",{className:"text-xl font-bold text-white truncate",children:t.customer.name}),t.customer.isVip&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-bold bg-yellow-400 text-yellow-900 flex-shrink-0",children:t.customer.vipLevel||"VIP"})]})]}),s.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold flex-shrink-0 ${t.status===""?"bg-yellow-400 text-yellow-900":t.status===""?"bg-green-400 text-green-900":"bg-red-400 text-red-900"}`,children:t.status})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-md font-semibold bg-white/20 border border-white/30",children:t.typeDisplay}),s.jsxs("div",{className:"text-right flex items-center gap-1.5",children:[s.jsx(vb,{className:"w-4 h-4 text-white/80"}),s.jsx("span",{className:"font-semibold",children:Bp(t.scheduledAt)})]})]})]}),s.jsx("div",{className:"border-b-2 border-gray-200 bg-white shadow-sm",children:s.jsxs("div",{className:"flex overflow-x-auto",children:[s.jsx(v,{tabId:"info",title:"/ ",icon:s.jsx(dE,{className:"w-5 h-5"})}),s.jsx(v,{tabId:"equipment",title:" ",icon:s.jsx(Sb,{className:"w-5 h-5"})}),s.jsx(v,{tabId:"workflow",title:" ",icon:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})}),s.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-6 pb-28",children:[c==="info"&&s.jsxs("div",{className:"space-y-4",children:[t.WRK_CD&&s.jsx("div",{className:`${w(t.WRK_CD)} rounded-lg p-4`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:s.jsx(uu,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm font-semibold text-white leading-relaxed",children:vE(t.WRK_CD)})})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"})," "]}),s.jsx(Ya,{label:"ID",value:Ji(t.directionId||t.id),icon:s.jsx(uu,{className:"w-4 h-4"})}),s.jsx(Ya,{label:"ID",value:Ji(t.id),icon:s.jsx(uu,{className:"w-4 h-4"})}),s.jsx(Ya,{label:"ID",value:Ji(t.RCPT_ID),icon:s.jsx(uu,{className:"w-4 h-4"})}),s.jsx(Ya,{label:" ",value:t.typeDisplay,icon:s.jsx(P,{className:"w-4 h-4"})}),t.WRK_CD&&s.jsx(Ya,{label:" ",icon:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.738-5.42-1.233-.617a1 1 0 01.894-1.788l1.599.799L11 4.323V3a1 1 0 011-1h-2zm-5 8.274l-.818 2.552c-.25.78.409 1.565 1.237 1.474L9 13.796l3.581.504c.828.091 1.487-.694 1.237-1.474l-.818-2.552-3-1.2-3 1.2z"})}),children:s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold ${_f(t.WRK_CD)?"bg-red-100 text-red-800":xf(t.WRK_CD)?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:_f(t.WRK_CD)?" ()":xf(t.WRK_CD)?" (A/S)":""})}),t.CTRT_STAT&&s.jsx(Ya,{label:" ",icon:s.jsx(uu,{className:"w-4 h-4"}),children:s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold ${t.CTRT_STAT==="20"?"bg-green-100 text-green-800":t.CTRT_STAT==="10"?"bg-blue-100 text-blue-800":t.CTRT_STAT==="30"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.CTRT_STAT==="20"?"":t.CTRT_STAT==="10"?"":t.CTRT_STAT==="30"?"":t.CTRT_STAT==="90"?"":`: ${t.CTRT_STAT}`})}),t.CTRT_ID&&s.jsx(Ya,{label:"ID",value:Ji(t.CTRT_ID),icon:s.jsx(uu,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"})," "]}),s.jsx(Ya,{label:"",value:t.customer.name,icon:s.jsx(dE,{className:"w-4 h-4"})}),s.jsx(Ya,{label:"",icon:s.jsx(cE,{className:"w-4 h-4"}),children:s.jsxs("div",{className:"flex flex-col xs:flex-row items-start xs:items-center justify-between gap-2 xs:gap-2 w-full",children:[s.jsx("span",{className:"text-gray-900 font-medium flex-1 min-w-0 break-all",children:t.customer.phone||" "}),s.jsxs("button",{onClick:()=>{a&&a("   .","info")},className:"flex-shrink-0 w-full xs:w-9 py-2 xs:py-0 xs:h-9 rounded-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 flex items-center justify-center gap-1.5",disabled:!t.customer.phone,children:[s.jsx(cE,{className:"h-4 w-4 text-white"}),s.jsx("span",{className:"xs:hidden text-white text-sm font-medium",children:" "})]})]})}),s.jsx(Ya,{label:" ",icon:s.jsx(Nb,{className:"w-4 h-4"}),children:s.jsxs("div",{className:"flex flex-col xs:flex-row items-start justify-between gap-2 xs:gap-2 w-full",children:[s.jsx("span",{className:"text-gray-900 flex-1 min-w-0 leading-relaxed break-all",children:t.customer.address}),s.jsxs("button",{onClick:()=>{a&&a("    .","info")},className:"flex-shrink-0 w-full xs:w-9 py-2 xs:py-0 xs:h-9 rounded-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95 xs:mt-0.5 flex items-center justify-center gap-1.5",children:[s.jsx(Nb,{className:"h-4 w-4 text-white"}),s.jsx("span",{className:"xs:hidden text-white text-sm font-medium",children:" "})]})]})}),t.installLocation&&s.jsx(Ya,{label:"  ",value:t.installLocation,icon:s.jsx(Nb,{className:"w-4 h-4"})}),t.cellNo&&s.jsx(Ya,{label:"CELL NO",value:t.cellNo,icon:s.jsx(uu,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"})," "]}),s.jsx(Ya,{label:" ",value:Bp(t.scheduledAt),icon:s.jsx(vb,{className:"w-4 h-4"})}),s.jsx(Ya,{label:"",value:WP(t.scheduledAt),icon:s.jsx(vb,{className:"w-4 h-4"})}),s.jsx(Ya,{label:" ",icon:s.jsx(uu,{className:"w-4 h-4"}),children:s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-blue-600 w-full",children:s.jsx("p",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:t.details})})})]}),(xf(t.WRK_CD)||_f(t.WRK_CD)||wg(t.WRK_CD)||Db(t.WRK_CD)||xp(t.WRK_CD)||Lg(t.WRK_CD))&&s.jsxs("div",{className:"mt-6 pt-6 border-t-2 border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-6 bg-blue-600 rounded-full"}),"  "]}),xf(t.WRK_CD)&&s.jsx(i6,{order:t}),_f(t.WRK_CD)&&s.jsx(a6,{order:t}),wg(t.WRK_CD)&&s.jsx(l6,{order:t}),Db(t.WRK_CD)&&s.jsx(o6,{order:t}),xp(t.WRK_CD)&&s.jsx(c6,{order:t}),Lg(t.WRK_CD)&&s.jsx(d6,{order:t})]}),t.status===_n.Pending&&s.jsx("div",{className:"mt-8 pt-6 border-t-2 border-gray-200",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-600 p-5 rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:" ?"}),s.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-3",children:vE(t.WRK_CD)}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-xs text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:"  "})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:" /"})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:" "})]})]})]})]})})})]}),c==="equipment"&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-4 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"}),"  "]}),t.assignedEquipment.length>0?s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.assignedEquipment.map(M=>{const B=(G=>G==="04"?{color:"bg-blue-600",label:"",status:""}:G==="05"?{color:"bg-purple-600",label:"",status:""}:G==="07"?{color:"bg-orange-500",label:"",status:""}:G==="03"?{color:"bg-green-600",label:"",status:""}:{color:"bg-gray-600",label:"",status:""})(M.itemMidCd);return s.jsx("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-200 p-4 border border-gray-200 hover:border-blue-300",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg ${B.color} flex items-center justify-center`,children:s.jsx(Sb,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("p",{className:"font-bold text-gray-800 text-base",children:M.type}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-green-100 text-green-800 flex-shrink-0",children:B.status})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:M.model}),s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[s.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["S/N: ",M.serialNumber]}),M.itemMidCd&&s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[": ",B.label]})]})]})]})},M.id)})})}):s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[s.jsx(Sb,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"  ."}),s.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"    ."})]})]}),c==="workflow"&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-3 flex items-center gap-2 px-1",children:[s.jsx("div",{className:"w-1 h-5 bg-blue-600 rounded-full"}),"  "]}),s.jsxs("div",{className:"mb-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-bold text-gray-800",children:" "}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:o?"100%":g&&t.assignedEquipment.length>0?"50%":g?"25%":"0%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-2.5 rounded-full transition-all duration-500 shadow-sm",style:{width:`${o?100:g&&t.assignedEquipment.length>0?50:g?25:0}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-1.5",children:o?"  ":g&&t.assignedEquipment.length>0?"   ":g?" ":" "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${g?"bg-green-50 border-green-500 shadow-sm":!g&&!t.assignedEquipment.length&&t.status!==_n.Completed?"bg-blue-50 border-blue-500 shadow-md ring-2 ring-blue-200":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${g?"bg-green-500":!g&&!t.assignedEquipment.length&&t.status!==_n.Completed?"bg-blue-500 animate-pulse":"bg-gray-400"}`,children:g?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${g?"text-green-800":!g&&!t.assignedEquipment.length&&t.status!==_n.Completed?"text-blue-800":"text-gray-700"}`,children:""}),g?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):!g&&!t.assignedEquipment.length&&t.status!==_n.Completed?s.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded-full animate-pulse",children:" "}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:g?" .":"   ."})]})]})}),s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${o||t.assignedEquipment.length>0?"bg-green-50 border-green-500 shadow-sm":g&&!t.assignedEquipment.length&&t.status!==_n.Completed?"bg-blue-50 border-blue-500 shadow-md ring-2 ring-blue-200":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${o||t.assignedEquipment.length>0?"bg-green-500":g&&!t.assignedEquipment.length&&t.status!==_n.Completed?"bg-blue-500 animate-pulse":"bg-gray-400"}`,children:o||t.assignedEquipment.length>0?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${o||t.assignedEquipment.length>0?"text-green-800":g&&!t.assignedEquipment.length&&t.status!==_n.Completed?"text-blue-800":"text-gray-700"}`,children:" "}),o||t.assignedEquipment.length>0?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):g&&!t.assignedEquipment.length&&t.status!==_n.Completed?s.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded-full animate-pulse",children:" "}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:t.assignedEquipment.length>0?`${t.assignedEquipment.length}  .`:"  ."})]})]})}),s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${o?"bg-green-50 border-green-500 shadow-sm":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${o?"bg-green-500":"bg-gray-400"}`,children:o?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${o?"text-green-800":"text-gray-700"}`,children:" /  "}),o?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"LGU      ()"})]})]})}),s.jsx("div",{className:`rounded-lg border-2 p-3.5 transition-all duration-200 ${o?"bg-green-50 border-green-500 shadow-sm":g&&t.assignedEquipment.length>0&&t.status!==_n.Completed?"bg-blue-50 border-blue-500 shadow-md ring-2 ring-blue-200":"bg-gray-50 border-gray-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center shadow-sm ${o?"bg-green-500":g&&t.assignedEquipment.length>0&&t.status!==_n.Completed?"bg-blue-500 animate-pulse":"bg-gray-400"}`,children:o?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.jsx("span",{className:"text-white font-bold text-sm",children:"4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsx("p",{className:`font-bold text-sm ${o?"text-green-800":g&&t.assignedEquipment.length>0&&t.status!==_n.Completed?"text-blue-800":"text-gray-700"}`,children:"  "}),o?s.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:""}):g&&t.assignedEquipment.length>0&&t.status!==_n.Completed?s.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded-full animate-pulse",children:" "}):s.jsx("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:""})]}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:o?"  .":"      ."})]})]})})]})]})]})]}),s.jsx(nN,{isOpen:_,onClose:()=>p(!1),onConfirm:N,workOrder:t,showToast:a})]}),t.status===_n.Pending&&s.jsx("div",{className:"bg-white border-t border-gray-200 shadow-2xl mt-4",children:s.jsx("div",{className:"max-w-4xl mx-auto px-3 py-2",children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsxs("button",{onClick:y,disabled:h,className:"flex-shrink-0 w-24 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-xl font-bold transition-all duration-200 flex flex-col items-center justify-center gap-0.5 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-xs font-bold",children:h?"":""})]}),s.jsxs("button",{onClick:C,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl active:scale-[0.98]",children:[s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"text-base leading-tight font-bold",children:""}),s.jsx("span",{className:"text-[0.625rem] opacity-90 leading-tight",children:t.typeDisplay})]})]})]})})})]})},EE=t=>{let e;const n=new Set,r=(h,m)=>{const _=typeof h=="function"?h(e):h;if(!Object.is(_,e)){const p=e;e=m??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(g=>g(e,p))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h))},u=e=t(r,i,c);return c},u6=(t=>t?EE(t):EE),h6=t=>t;function f6(t,e=h6){const n=Zi.useSyncExternalStore(t.subscribe,Zi.useCallback(()=>e(t.getState()),[t,e]),Zi.useCallback(()=>e(t.getInitialState()),[t,e]));return Zi.useDebugValue(n),n}const m6=t=>{const e=u6(t),n=r=>f6(e,r);return Object.assign(n,e),n},D1=(t=>m6);function g6(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const XC=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return XC(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return XC(r)(n)}}}},_6=(t,e)=>(n,r,i)=>{let a={storage:g6(()=>localStorage),partialize:y=>y,version:0,merge:(y,N)=>({...N,...y}),...e},o=!1;const c=new Set,u=new Set;let h=a.storage;if(!h)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...y)},r,i);const m=()=>{const y=a.partialize({...r()});return h.setItem(a.name,{state:y,version:a.version})},_=i.setState;i.setState=(y,N)=>(_(y,N),m());const p=t((...y)=>(n(...y),m()),r,i);i.getInitialState=()=>p;let g;const C=()=>{var y,N;if(!h)return;o=!1,c.forEach(P=>{var w;return P((w=r())!=null?w:p)});const v=((N=a.onRehydrateStorage)==null?void 0:N.call(a,(y=r())!=null?y:p))||void 0;return XC(h.getItem.bind(h))(a.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==a.version){if(a.migrate){const w=a.migrate(P.state,P.version);return w instanceof Promise?w.then(M=>[!0,M]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var w;const[M,k]=P;if(g=a.merge(k,(w=r())!=null?w:p),n(g,!0),M)return m()}).then(()=>{v==null||v(g,void 0),g=r(),o=!0,u.forEach(P=>P(g))}).catch(P=>{v==null||v(void 0,P)})};return i.persist={setOptions:y=>{a={...a,...y},y.storage&&(h=y.storage)},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>C(),hasHydrated:()=>o,onHydrate:y=>(c.add(y),()=>{c.delete(y)}),onFinishHydration:y=>(u.add(y),()=>{u.delete(y)})},a.skipHydration||C(),g||p},R1=_6,Za=D1()(R1(t=>({certifyRegconfInfo:null,ldapResult:null,certifyProdList:[],isCertifyProd:!1,certifyOpLnkdCd:"",entrNo:null,entrRqstNo:null,lguMarketCd:"",lguOperatorId:"",lguJobType:"",lguJobTypeConf:"",cl02PortData:null,isSubscriptionDone:!1,isLineRegistrationDone:!1,setCertifyRegconfInfo:e=>t({certifyRegconfInfo:e}),setLdapResult:e=>t({ldapResult:e}),setCertifyProdList:e=>t({certifyProdList:e}),setIsCertifyProd:e=>t({isCertifyProd:e}),setCertifyOpLnkdCd:e=>t({certifyOpLnkdCd:e}),setEntrNo:(e,n)=>t({entrNo:e,entrRqstNo:n??null}),setLguCommonCd:(e,n,r,i)=>t({lguMarketCd:e,lguOperatorId:n,...r!==void 0?{lguJobType:r}:{},...i!==void 0?{lguJobTypeConf:i}:{}}),setCl02PortData:e=>t({cl02PortData:e}),setIsSubscriptionDone:e=>t({isSubscriptionDone:e}),setIsLineRegistrationDone:e=>t({isLineRegistrationDone:e}),reset:()=>t({certifyRegconfInfo:null,ldapResult:null,certifyProdList:[],isCertifyProd:!1,certifyOpLnkdCd:"",entrNo:null,entrRqstNo:null,lguMarketCd:"",lguOperatorId:"",lguJobType:"",lguJobTypeConf:"",cl02PortData:null,isSubscriptionDone:!1,isLineRegistrationDone:!1})}),{name:"dlive-certify-storage",partialize:t=>({certifyRegconfInfo:t.certifyRegconfInfo,ldapResult:t.ldapResult,entrNo:t.entrNo,entrRqstNo:t.entrRqstNo,isSubscriptionDone:t.isSubscriptionDone,isLineRegistrationDone:t.isLineRegistrationDone})})),p_=async({order:t,workerId:e,certifyRegconfInfo:n,addOnParam:r="",reason:i="",certifyType:a,contIdOld:o})=>{var c,u;if(!n)return{success:!1,code:"NO_DATA",message:" ."};try{const h=await QP({CONT_ID:t.CTRT_ID||"",CUST_ID:((c=t.customer)==null?void 0:c.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:t.SO_ID||"",REG_UID:e,CERTIFY_TYPE:a,ADDR:t.ADDR||((u=t.customer)==null?void 0:u.address)||"",BLD_NM:t.BLD_NM||"",T:n.T||"",ONT_MAC:n.ONT_MAC||"",ONT_SERIAL:n.ONT_SERIAL||"",AP_MAC:n.AP_MAC||"",DEV_ID:n.DEV_ID||"",IP:n.IP||"",PORT:n.PORT||"",MAX_SPEED:n.MAX_SPEED||"",ST:n.ST||"",EQIP_ID:n.EQIP_ID||"",EQIP_PORT_NO:n.EQIP_PORT_NO||"",EQIP_DIVS:n.EQIP_DIVS||"",SVC:t.PROD_CD||t.PROD_CD||"",ADD_ON:r,REASON:i,...o?{CONT_ID_OLD:o}:{}});return console.log("[useCertifyComplete] CL-04 :",h),h.code!=="SUCCESS"&&h.code!=="OK"?{success:!1,code:h.code,message:h.message}:{success:!0,code:h.code,message:h.message}}catch(h){return console.error("[useCertifyComplete] CL-04 :",h),{success:!1,code:"ERROR",message:h.message||"CL-04  "}}},BM=async(t,e,n)=>{var u;const r=n||t.CTRT_ID||"",i=t.SO_ID||"";let a=!1;try{const h=await Vg({CTRT_ID:r,CUST_ID:((u=t.customer)==null?void 0:u.id)||t.CUST_ID||"",SO_ID:i,REG_UID:e,WRK_ID:t.id||""}),m=Array.isArray(h)?h[0]:h;m&&!m.ERROR&&m.CONT_ID===r&&(a=!0,console.log("[useCertifyComplete] CL-08  "))}catch(h){console.log("[useCertifyComplete] CL-08  :",h)}let o=!1;try{o=(await qa("CMIF006")).map(_=>_.code||_.COMMON_CD).includes(i)}catch(h){console.error("[useCertifyComplete] CMIF006  :",h)}let c="";return a&&o?c="U":!a&&o?c="C":a&&!o&&(c="D"),console.log("[useCertifyComplete] CERTIFY_TYPE:",c,"| bCl08:",a,"| SO in CMIF006:",o),{certifyType:c,bCl08:a}},x6=async(t,e)=>{var i,a;const n=t.CTRT_ID||"";let r="N";try{const o=await Vg({CTRT_ID:n,CUST_ID:((i=t.customer)==null?void 0:i.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:e,WRK_ID:t.id||""}),c=Array.isArray(o)?o[0]:o;c&&!c.ERROR&&c.CONT_ID===n&&(r="Y",console.log("[useCertifyComplete] CL-08  , CERTIFY_TG=Y"))}catch(o){console.log("[useCertifyComplete] CL-08  :",o)}if(r==="Y")try{const o=await Gp({CTRT_ID:n,CUST_ID:((a=t.customer)==null?void 0:a.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:t.SO_ID||"",REG_UID:e});if(o!=null&&o.ERROR)return console.error("[useCertifyComplete] CL-06 :",o.ERROR),{success:!1,certifyTg:r,error:o.ERROR};console.log("[useCertifyComplete] CL-06  ")}catch(o){return console.error("[useCertifyComplete] CL-06  :",o),{success:!1,certifyTg:r,error:o.message}}return{success:!0,certifyTg:r}},p6=async(t,e,n)=>{var r;try{const i=await Gp({CTRT_ID:n,CUST_ID:((r=t.customer)==null?void 0:r.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:t.SO_ID||"",REG_UID:e});return i!=null&&i.ERROR?(console.error("[useCertifyComplete] CL-06 (Change) :",i.ERROR),{success:!1,error:i.ERROR}):{success:!0}}catch(i){return{success:!1,error:i.message}}},y_=async(t,e)=>{if(!(e==1||e==="1"))return!1;try{return(await qa("CMIF006")).map(a=>a.code||a.COMMON_CD).includes(t)}catch(r){return console.error("[useCertifySignal] CMIF006  :",r),!1}},Ra=({isOpen:t,onClose:e,title:n,size:r="medium",children:i,footer:a,subHeader:o})=>{if(b.useEffect(()=>{if(t){const u=window.scrollY,h={overflow:document.body.style.overflow,position:document.body.style.position,top:document.body.style.top,width:document.body.style.width};return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${u}px`,document.body.style.width="100%",()=>{document.body.style.overflow=h.overflow,document.body.style.position=h.position,document.body.style.top=h.top,document.body.style.width=h.width,window.scrollTo(0,u)}}},[t]),!t)return null;const c={small:"modal-sm",medium:"modal-md",large:"modal-lg"}[r];return s.jsx("div",{className:"base-modal-overlay",onClick:e,children:s.jsxs("div",{className:`base-modal-container ${c}`,onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"base-modal-header",children:[s.jsx("h2",{className:"base-modal-title",children:n}),s.jsx("button",{onClick:e,className:"base-modal-close-btn","aria-label":"",children:s.jsx(Mi,{size:18})})]}),o&&s.jsx("div",{className:"base-modal-subheader",children:o}),s.jsx("div",{className:"base-modal-body",children:i}),a&&s.jsx("div",{className:"base-modal-footer",children:a})]})})},Pc=({isOpen:t,onClose:e,onSave:n,workId:r,initialData:i,workType:a,customerId:o,customerName:c,contractId:u,addrOrd:h,kpiProdGrpCd:m,prodChgGb:_,chgKpiProdGrpCd:p,prodGrp:g,wrkDtlTcd:C,readOnly:y=!1})=>{const[N,v]=b.useState({NET_CL:"",INSTL_TP:"",WRNG_TP:"",CB_INSTL_TP:"",CB_WRNG_TP:"",INOUT_LINE_TP:"N",INOUT_LEN:"",DVDR_YN:"N",BFR_LINE_YN:"N",CUT_YN:"N",TERM_NO:"",RCV_STS:"",SUBTAP_ID:"",PORT_NUM:"",EXTN_TP:"",TAB_LBL:"",CVT_LBL:"",STB_LBL:""}),[P,w]=b.useState([]),[M,k]=b.useState([]),[B,G]=b.useState([]),[U,I]=b.useState([]),[E,A]=b.useState([]),[Y,se]=b.useState([]),[X,z]=b.useState(!1),[$,F]=b.useState(!1);b.useEffect(()=>{t&&r&&fe()},[t,r]),b.useEffect(()=>{if(i){const te=a==="02"||a==="04"||a==="08",he={...i};te&&((!i.NET_CL||i.NET_CL.trim()==="")&&(delete he.NET_CL,delete he.NET_CL_NM),(!i.INSTL_TP||i.INSTL_TP.trim()==="")&&delete he.INSTL_TP),v(de=>({...de,...he}))}},[i,a]);const L=(te,he)=>!te||!he?-1:te.indexOf(he),re=(te,he,de,Q)=>{const ee=a,Z=m,le=_,xe=p,be=g,ne=C;console.log(" [Filter]   :",{WRK_CD:ee,KPI_PROD_GRP_CD:Z,PROD_CHG_GB:le,PROD_GRP:be,WRK_DTL_TCD:ne}),console.log(" [Filter]    :",{instlTpList:te.length,wrngTpList:he.length,cbInstlTpList:de.length,cbWrngTpList:Q.length});let ie=te,pe=de,ze=Q;ee==="01"||ee==="03"||ee==="06"||ee==="07"||ee==="09"?(console.log(" [Filter] :",ee,"- /AS/ "),ne==="0920"?(console.log(" [Filter] :",ne,"- code=77 "),ie=te.filter(st=>L(st.ref_code,Z||"")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77")):(console.log(" [Filter] :",ne,"- code!=77 "),ie=te.filter(st=>L(st.ref_code,Z||"")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77")),console.log(" [Filter]   :",ie.length,""),be==="C"&&(ne==="0920"?pe=de.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"):pe=de.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77"))):ee==="05"?le==="01"?(ie=te.filter(st=>L(st.ref_code,xe||"")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77"),be==="C"&&(pe=de.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77"),ze=Q.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77"))):le==="02"&&(ie=te.filter(st=>L(st.ref_code,Z||"")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"),be==="C"&&(pe=de.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"),ze=Q.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"))):ee==="04"?ne==="0440"?(ie=te.filter(st=>L(st.ref_code,Z||"")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77"),be==="C"&&(pe=de.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77"),ze=Q.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code!=="77"))):ne==="0430"&&(ie=te.filter(st=>L(st.ref_code,Z||"")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"),be==="C"&&(pe=de.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"),ze=Q.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"))):(ie=te.filter(st=>{const St=st.code==="77",ot=(st.ref_code3||"")>="20090901",Be=Z?L(st.ref_code,Z)>-1:!0;return St&&ot&&Be}),be==="C"&&(pe=de.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77"),ze=Q.filter(st=>L(st.ref_code,"I")>-1&&(st.ref_code3||"")>="20090901"&&st.code==="77")));const xt=he.filter(st=>L(st.ref_code,Z||"")>-1&&(st.ref_code3||"")>="20090901");return console.log(" [Filter]   :",{instlTp:ie.length,wrngTp:xt.length,cbInstlTp:pe.length,cbWrngTp:ze.length}),{filteredInstlTp:ie,filteredWrngTp:xt,filteredCbInstlTp:pe,filteredCbWrngTp:ze}},fe=async()=>{z(!0);try{console.log(" [InstallInfoModal]   "),console.log(" [InstallInfoModal]  :",{workType:a,kpiProdGrpCd:m,prodChgGb:_,chgKpiProdGrpCd:p,prodGrp:g,wrkDtlTcd:C});const[te,he,de,Q,ee]=await Promise.all([qa("CMCU048"),qa("BLST014"),qa("BLST010"),qa("CMCU030"),qa("CMCU046")]);console.log(" [InstallInfoModal]  :",{netCl:te.length,wrngTp:he.length,instlTp:de.length,cbWrngTp:Q.length,cbInstlTp:ee.length}),de.length>0&&(console.log(" [InstallInfoModal] (BLST010)    ():",de[0]),console.log(" [InstallInfoModal]   ref_code :",{ref_code:de[0].ref_code,ref_code2:de[0].ref_code2,ref_code3:de[0].ref_code3})),de.length>1&&(console.log(" [InstallInfoModal] (BLST010)    ( ):",de[1]),console.log(" [InstallInfoModal]   ref_code :",{ref_code:de[1].ref_code,ref_code2:de[1].ref_code2,ref_code3:de[1].ref_code3}),console.log(" [InstallInfoModal]     :",Object.keys(de[1]))),he.length>1&&console.log(" [InstallInfoModal] (BLST014)   :",he[1]);const Z=a==="02"||a==="04"||a==="08";if(a&&(m||Z)){const le=re(de,he,ee,Q);w(te),k(le.filteredWrngTp),G(he),I(le.filteredInstlTp),A(le.filteredCbWrngTp),se(le.filteredCbInstlTp),console.log(" [Filter]    - instlTp:",le.filteredInstlTp.length,"")}else w(te),k(he),G(he),I(de),A(Q),se(ee),console.log(" [Filter]    -   ");if(console.log(" [InstallInfoModal]  state  "),Z){const le=(i==null?void 0:i.NET_CL)&&i.NET_CL.trim()!=="",xe=(i==null?void 0:i.INSTL_TP)&&i.INSTL_TP.trim()!=="";console.log(" [InstallInfoModal]     - hasNetCl:",le,"hasInstlTp:",xe);const be={};if(!le&&te.length>0){console.log(" [InstallInfoModal] netCl :",te.map(pe=>({code:pe.code,name:pe.name})));const ie=te.find(pe=>pe.name&&(pe.name.includes("DLIVE")||pe.name.includes("")));console.log(" [InstallInfoModal]   NET_CL:",ie),ie&&(be.NET_CL=ie.code,be.NET_CL_NM=ie.name,console.log(" [InstallInfoModal] NET_CL  :",ie.code,ie.name))}if(xe||(be.INSTL_TP="77",console.log(" [InstallInfoModal] INSTL_TP  : 77()")),Object.keys(be).length>0&&v(ie=>({...ie,...be})),(xe?i==null?void 0:i.INSTL_TP:"77")==="77"){const ie=he.filter(pe=>L(pe.ref_code2,"77")>-1);console.log(" [InstallInfoModal]   -  :",ie.length,""),k(ie)}}}catch(te){console.error(" [InstallInfoModal] Failed to load common codes:",te)}finally{z(!1)}},T=b.useMemo(()=>P.map(te=>({value:te.code,label:te.name})),[P]),j=b.useMemo(()=>U.map(te=>({value:te.code,label:te.name})),[U]),K=b.useMemo(()=>M.map(te=>({value:te.code,label:te.name})),[M]),J=b.useMemo(()=>Y.map(te=>({value:te.code,label:te.name})),[Y]),q=b.useMemo(()=>E.map(te=>({value:te.code,label:te.name})),[E]);if(!t)return null;const V=(te,he)=>{y||(v(de=>({...de,[te]:he})),te==="INSTL_TP"&&(v(de=>({...de,WRNG_TP:""})),he?ce(he):k(B)),te==="CB_INSTL_TP"&&(v(de=>({...de,CB_WRNG_TP:""})),he&&me(he)))},ce=te=>{if(console.log(" [Filter]  :",{instlTpValue:te,workType:a,prodChgGb:_,kpiProdGrpCd:m,chgKpiProdGrpCd:p}),!te||B.length===0){k(B);return}if(!m&&!p){console.log(" [Filter] KPI_PROD_GRP_CD  - ref_code2 ");const de=B.filter(Q=>L(Q.ref_code2,te)>-1);console.log(" [Filter]   :",de.length,""),k(de);return}let he=B;a==="05"?_==="01"?he=B.filter(de=>L(de.ref_code2,te)>-1&&L(de.ref_code,p||"")>-1):_==="02"?he=B.filter(de=>L(de.ref_code2,te)>-1&&L(de.ref_code,m||"")>-1):he=B.filter(de=>L(de.ref_code2,te)>-1&&L(de.ref_code,m||"")>-1):he=B.filter(de=>L(de.ref_code2,te)>-1&&L(de.ref_code,m||"")>-1),console.log(" [Filter]   :",he.length,""),k(he),N.WRNG_TP&&!he.find(de=>de.code===N.WRNG_TP)&&v(de=>({...de,WRNG_TP:""}))},me=te=>{if(console.log(" [Filter]  :",te),!te)return;const he=E.filter(de=>L(de.ref_code2,te)>-1&&L(de.ref_code,"I")>-1);console.log(" [Filter]   :",he.length,""),A(he)},Ce=async()=>{var te;if(!N.NET_CL){alert(" .");return}if(!N.INSTL_TP){alert(" .");return}if(!N.WRNG_TP){alert(" .");return}F(!0);try{const he=((te=P.find(ee=>ee.code===N.NET_CL))==null?void 0:te.name)||"",de={...N,NET_CL_NM:he},Q=await gA({WRK_ID:r,CTRT_ID:u||"",ADDR_ORD:h||"",WRK_DTL_TCD:C||"",...N});Q.code==="SUCCESS"?(n(de),e()):alert(Q.message||" .")}catch(he){console.error("Save failed:",he),alert(he.message||"     .")}finally{F(!1)}},ge=X?null:s.jsxs("div",{className:"install-subheader",children:[s.jsxs("div",{className:"info-row whitespace-nowrap",children:[s.jsx("span",{className:"info-label",children:"ID:"}),s.jsx("span",{className:"info-value",children:Ji(o)})]}),s.jsxs("div",{className:"info-row whitespace-nowrap",children:[s.jsx("span",{className:"info-label",children:":"}),s.jsx("span",{className:"info-value",children:c||"-"})]}),s.jsxs("div",{className:"info-row whitespace-nowrap",children:[s.jsx("span",{className:"info-label",children:"ID:"}),s.jsx("span",{className:"info-value",children:Ji(u)})]})]}),Ge=y?s.jsx("button",{className:"btn btn-secondary btn-sm",onClick:e,children:""}):s.jsx("button",{className:"btn btn-primary btn-sm",onClick:Ce,disabled:X||$,children:$?" ...":""});return s.jsx(Ra,{isOpen:t,onClose:e,title:a==="02"||a==="04"||a==="08"||a==="09"?"":"",size:"medium",subHeader:ge,footer:Ge,children:s.jsx("div",{className:"install-modal-content",children:X?s.jsxs("div",{className:"loading-message",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"  ..."})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"install-info-section",children:[s.jsxs("div",{className:"install-form-row",children:[s.jsxs("label",{className:"install-label",children:[" ",!y&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx(sn,{value:N.NET_CL||"",onValueChange:te=>V("NET_CL",te),options:T,placeholder:"",required:!y,disabled:y})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsxs("label",{className:"install-label",children:[" ",!y&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx(sn,{value:N.INSTL_TP||"",onValueChange:te=>V("INSTL_TP",te),options:j,placeholder:"",required:!y,disabled:y})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsxs("label",{className:"install-label",children:[" ",!y&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx(sn,{value:N.WRNG_TP||"",onValueChange:te=>V("WRNG_TP",te),options:K,placeholder:N.INSTL_TP?"":"  ",disabled:y||!N.INSTL_TP,required:!y})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsx("label",{className:"install-label",children:""}),s.jsx(sn,{value:N.CB_INSTL_TP||"",onValueChange:te=>V("CB_INSTL_TP",te),options:J,placeholder:"",disabled:!0})]}),s.jsxs("div",{className:"install-form-row",children:[s.jsx("label",{className:"install-label",children:""}),s.jsx(sn,{value:N.CB_WRNG_TP||"",onValueChange:te=>V("CB_WRNG_TP",te),options:q,placeholder:"",disabled:!0})]}),s.jsxs("div",{className:"install-form-row-inline",children:[s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:N.INOUT_LINE_TP==="Y",onChange:te=>V("INOUT_LINE_TP",te.target.checked?"Y":"N"),disabled:y}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"install-inline-group",children:[s.jsx("label",{className:"install-inline-label",children:""}),s.jsx("input",{type:"text",className:"install-input-inline",value:N.INOUT_LEN||"",onChange:te=>V("INOUT_LEN",te.target.value),disabled:y})]})]}),s.jsxs("div",{className:"install-form-row-inline",children:[s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:N.DVDR_YN==="Y",onChange:te=>V("DVDR_YN",te.target.checked?"Y":"N"),disabled:y}),s.jsx("span",{children:""})]}),a==="02"||a==="08"?s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:N.CUT_YN==="Y",onChange:te=>V("CUT_YN",te.target.checked?"Y":"N"),disabled:y}),s.jsx("span",{children:""})]}):s.jsxs("label",{className:"install-checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:N.BFR_LINE_YN==="Y",onChange:te=>V("BFR_LINE_YN",te.target.checked?"Y":"N"),disabled:y}),s.jsx("span",{children:""})]})]})]})})})})},el=({isOpen:t,onClose:e,ctrtId:n,custId:r})=>{const[i,a]=b.useState([]),[o,c]=b.useState(!1),[u,h]=b.useState(null),m=N=>{const v=N.getFullYear(),P=String(N.getMonth()+1).padStart(2,"0"),w=String(N.getDate()).padStart(2,"0");return`${v}${P}${w}`},_=(N,v)=>{const P=new Date(N);return P.setDate(P.getDate()+v),P},p=N=>{if(!N||N.length<14)return N;const v=N.substring(0,4),P=N.substring(4,6),w=N.substring(6,8),M=N.substring(8,10),k=N.substring(10,12),B=N.substring(12,14);return`${v}-${P}-${w} ${M}:${k}:${B}`},g=async()=>{if(!n){console.error("[] ID ");return}c(!0),h(null);try{const N=new Date,v=m(_(N,-7)),P=m(_(N,1));console.log("[]  :",{ctrtId:n,custId:r,startDate:v,endDate:P});const w=typeof window<"u"?window.location.origin:"http://localhost:3000",M=await fetch(`${Ns}/integration/history`,{method:"POST",headers:{"Content-Type":"application/json",Origin:w},credentials:"include",body:JSON.stringify({CTRT_ID:n,CUST_ID:r||"",STRT_DTTM1:v,STRT_DTTM2:P})});if(!M.ok)throw new Error(`API  : ${M.status}`);const k=await M.json();console.log("[] API :",k);const B=k.output||k.ds_svc_dtl||[];a(Array.isArray(B)?B:[]),console.log("[]  :",B.length,"")}catch(N){console.error("[]  :",N),h(N instanceof Error?N.message:"   ")}finally{c(!1)}};b.useEffect(()=>{t&&n&&g()},[t,n]);const C=s.jsxs("div",{className:"text-xs text-gray-700 space-y-0.5",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-600",children:"ID:"})," ",s.jsx("span",{className:"font-medium text-blue-700",children:Ji(n)})]}),s.jsx("div",{className:"text-gray-600",children:":  7"})]}),y=s.jsx("button",{onClick:e,className:"btn btn-secondary btn-sm",children:""});return s.jsx(Ra,{isOpen:t,onClose:e,title:"",size:"medium",subHeader:C,footer:y,children:s.jsxs("div",{children:[o&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:" ..."})}),u&&s.jsx("div",{className:"flex items-center justify-center py-8 px-4",children:s.jsx("div",{className:"text-red-500 text-xs text-center",children:u})}),!o&&!u&&i.length===0&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:" "})}),!o&&!u&&i.length>0&&s.jsx("div",{className:"space-y-2.5 p-2.5",children:i.map((N,v)=>s.jsx("div",{className:`rounded-lg border shadow-sm p-2.5 ${v%2===0?"bg-white border-gray-200":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",N.prod_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"ID:"})," ",Ji(N.ctrt_id)]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",N.msg_id_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",N.proc_rslt_cd_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",N.rslt_cd_nm||"-"]})}),s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",N.strt_dttm?p(N.strt_dttm):"-"]})})]})},v))})]})})},DE=[{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"()",label:"()"},{value:"()",label:"()"},{value:"()",label:"()"},{value:"99",label:"()"}],y6=[{value:"01",label:"HDMI1"},{value:"02",label:"HDMI2"},{value:"03",label:"HDMI3"},{value:"04",label:"HDMI4"},{value:"05",label:""},{value:"06",label:"1"},{value:"07",label:"2"},{value:"08",label:"3"},{value:"09",label:"4"},{value:"11",label:"RF "}],xm=({isOpen:t,onClose:e,onSave:n,workId:r,ctrtId:i,prodGrp:a,initialInstlLoc:o,initialViewModCd:c,initialViewModNm:u,showToast:h,readOnly:m=!1})=>{const[_,p]=b.useState(""),[g,C]=b.useState(""),[y,N]=b.useState(""),[v,P]=b.useState(y6),w=a==="D";b.useEffect(()=>{t&&w&&(async()=>{try{const G=await qa("CMWO048");if(console.log("[InstallLocationModal] API  :",G),G&&G.length>0){const U=G.map(I=>({value:I.code||I.COMMON_CD||"",label:I.name||I.COMMON_CD_NM||""})).filter(I=>I.value&&I.label);U.length>0?(P(U),console.log("[InstallLocationModal]    :",U)):console.log("[InstallLocationModal]   ,  ")}}catch(G){console.error("[InstallLocationModal]    ,  :",G)}})()},[t,w]),b.useEffect(()=>{if(t){if(o){const B=DE.find(G=>G.value===o||G.label===o);B&&B.value!=="99"?(p(B.value),C("")):(p("99"),C(o))}else p(""),C("");N(c||"")}},[t,o,c]);const M=()=>!_||_==="[]"?" .":_==="99"&&!g.trim()?"   . ()":w&&(!y||y==="[]")?" .":null,k=async()=>{var E;const B=M();if(B){h?h(B,"warning"):alert(B);return}const G=_==="99"?g:_,U=((E=v.find(A=>A.value===y))==null?void 0:E.label)||"",I=w&&y?`${G}${y}`:G;h&&h(".","success"),n({INSTL_LOC:G,VIEW_MOD_CD:y,VIEW_MOD_NM:U,INSTL_LOC_FULL:I}),e()};return t?s.jsxs(Ra,{isOpen:t,onClose:e,title:"(, )",size:"md",children:[s.jsxs("div",{className:"space-y-5 p-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!m&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:_,onValueChange:B=>{m||(p(B),B!=="99"&&C(""))},options:DE,placeholder:" ",required:!m,disabled:m})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:["  ",!m&&_==="99"&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:g,onChange:B=>!m&&C(B.target.value),placeholder:_==="99"?", ,     ":"    ",disabled:m||_!=="99",maxLength:512,rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border rounded-lg text-sm sm:text-base resize-none
              ${m?"border-gray-200 bg-gray-100 text-gray-700 cursor-not-allowed":_==="99"?"border-gray-300 bg-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"}`}),!m&&s.jsx("p",{className:"mt-1 text-xs text-red-500 font-medium",children:"* "})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!m&&w&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:y,onValueChange:B=>!m&&N(B),options:v,placeholder:" ",disabled:m||!w,required:!m&&w}),!m&&!w&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"DTV    ."})]})]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 p-3 sm:p-4 border-t border-gray-200 bg-gray-50",children:[s.jsx("button",{type:"button",onClick:e,className:"py-2 sm:py-3 px-3 sm:px-4 font-semibold rounded-lg transition-colors text-sm sm:text-base flex-1 bg-gray-200 text-gray-700 hover:bg-gray-300",children:""}),!m&&s.jsx("button",{type:"button",onClick:k,className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors text-sm sm:text-base",children:""})]})]}):null},rN=({isOpen:t,onClose:e,onSave:n,wrkId:r,wrkDrctnId:i,crrId:a,wrkrId:o,dataType:c,showToast:u,readOnly:h=!1})=>{const[m,_]=b.useState(""),[p,g]=b.useState([]),[C,y]=b.useState(""),[N,v]=b.useState(!1),[P,w]=b.useState(!1);b.useEffect(()=>{t&&r&&i&&(M(),c==="C"&&k())},[t,r,i,c]);const M=async()=>{try{const E=await v1({WRK_ID:r,WRK_DRCTN_ID:i,DATA_TYPE:c});E!=null&&E.EQT_SERNO&&_(E.EQT_SERNO)}catch(E){console.error("[OttSerialModal]    :",E)}},k=async()=>{try{const E=await OA({WRK_ID:r});E!=null&&E.OTT_TYPE?y(E.OTT_TYPE):(u==null||u("OTT BOX   .      .","warning"),e())}catch(E){console.error("[OttSerialModal] OTT   :",E)}},B=async()=>{if(!m.trim()){u==null||u("OTT BOX  .","warning");return}w(!0);try{const E={EQT_SERNO:m,DATA_TYPE:c};c==="C"&&(E.CRR_ID=a||"",E.OTT_TYPE=C,E.WRKR_ID=o||"");const A=await jA(E),Y=c==="C"?A.filter(se=>se.EQT_STAT==="OK"):A;g(Y),Y.length===0&&(u==null||u("  .","info"))}catch(E){console.error("[OttSerialModal]   :",E),u==null||u("    .","error")}finally{w(!1)}},G=E=>{_(E.EQT_SERNO||"")},U=async()=>{if(!m.trim()){u==null||u("OTT BOX  .","warning");return}if(c==="C"&&p.length<1){u==null||u("    .","warning");return}v(!0);try{const E=localStorage.getItem("userInfo"),A=E?JSON.parse(E):{},Y=await IA({WRK_ID:r,WRK_DRCTN_ID:i,EQT_SERNO:m,DATA_TYPE:c,REG_UID:A.userId||""});Y.code==="SUCCESS"||Y.code==="OK"?(u==null||u("OTT  .","success"),n(m),e()):u==null||u(Y.message||" .","error")}catch(E){console.error("[OttSerialModal]  :",E),u==null||u(E.message||"   .","error")}finally{v(!1)}},I=E=>{E.key==="Enter"&&(E.preventDefault(),B())};return s.jsx(Ra,{isOpen:t,onClose:e,title:c==="C"?" OTT  ":"OTT  ",maxWidth:"md",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"BOX S/N"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:m,onChange:E=>_(E.target.value),onKeyDown:I,placeholder:" ",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",readOnly:h,disabled:h}),s.jsxs("button",{onClick:B,disabled:P||h,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 disabled:bg-gray-300",children:[P?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Lc,{className:"w-4 h-4"}),s.jsx("span",{children:""})]})]})]}),c==="C"&&C&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),s.jsx("input",{type:"text",value:C,readOnly:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-600"})]}),p.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ( )"}),s.jsx("div",{className:"border border-gray-300 rounded-lg max-h-48 overflow-y-auto",children:p.map((E,A)=>s.jsxs("div",{onClick:()=>!h&&G(E),className:`px-4 py-3 border-b last:border-b-0 cursor-pointer transition-colors ${m===E.EQT_SERNO?"bg-blue-50 text-blue-700":"hover:bg-gray-50"} ${h?"cursor-not-allowed":""}`,children:[s.jsx("span",{className:"font-medium",children:E.EQT_SERNO}),E.EQT_STAT&&s.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded ${E.EQT_STAT==="OK"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:E.EQT_STAT})]},A))})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[!h&&s.jsx("button",{onClick:U,disabled:N||!m.trim(),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg disabled:bg-gray-300 disabled:cursor-not-allowed",children:N?" ...":""}),s.jsx("button",{onClick:e,className:"flex-1 py-3 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg",children:h?"":""})]})]})})},b6=[{value:"0",label:""},{value:"1",label:" "},{value:"2",label:" "},{value:"3",label:" "}],b_=({isOpen:t,onClose:e,onSave:n,soId:r})=>{const[i,a]=b.useState("");b.useEffect(()=>{t&&a("")},[t]);const o=()=>{if(!i){alert("  .");return}n({POLE_YN:i,LAN_GB:""})};return t?s.jsxs(Ra,{isOpen:t,onClose:e,title:"",size:"sm",children:[s.jsx("div",{className:"space-y-5 p-4",children:s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:i,onValueChange:a,options:b6,placeholder:"",required:!0})]})}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 p-3 sm:p-4 border-t border-gray-200 bg-gray-50",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition-colors text-sm sm:text-base",children:""}),s.jsx("button",{type:"button",onClick:o,className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors text-sm sm:text-base",children:""})]})]}):null},Ba=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,type:a="confirm",confirmText:o="",cancelText:c="",showCancel:u=!0,children:h})=>{if(!t)return null;const m=()=>{switch(a){case"warning":return s.jsx(xo,{className:"w-12 h-12 text-yellow-500"});case"error":return s.jsx(bo,{className:"w-12 h-12 text-red-500"});case"info":return s.jsx(bM,{className:"w-12 h-12 text-blue-500"});case"confirm":default:return s.jsx(Ai,{className:"w-12 h-12 text-green-500"})}},_=()=>{switch(a){case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";case"info":return"bg-blue-50 border-blue-200";case"confirm":default:return"bg-green-50 border-green-200"}},p=()=>{switch(a){case"warning":return"bg-yellow-500 hover:bg-yellow-600";case"error":return"bg-red-500 hover:bg-red-600";case"info":return"bg-blue-500 hover:bg-blue-600";case"confirm":default:return"bg-blue-500 hover:bg-blue-600"}},g=()=>{n(),e()};return s.jsxs("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-[90%] max-w-sm mx-4 overflow-hidden animate-in fade-in zoom-in duration-200",children:[s.jsxs("div",{className:`px-4 sm:px-6 py-4 sm:py-5 flex flex-col items-center border-b ${_()}`,children:[m(),r&&s.jsx("h3",{className:"mt-2 sm:mt-3 text-base sm:text-lg font-bold text-gray-900 text-center",children:r})]}),s.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-5 max-h-[60vh] overflow-y-auto",children:[h,s.jsx("p",{className:"text-center text-gray-700 whitespace-pre-line text-sm sm:text-base",children:i})]}),s.jsxs("div",{className:"px-3 sm:px-4 py-3 sm:py-4 bg-gray-50 flex gap-2 sm:gap-3",children:[u&&s.jsx("button",{onClick:e,className:"flex-1 px-3 sm:px-4 py-2 sm:py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors text-sm sm:text-base",children:c}),s.jsx("button",{onClick:g,className:`flex-1 px-3 sm:px-4 py-2 sm:py-3 text-white rounded-lg font-semibold transition-colors text-sm sm:text-base ${p()}`,children:o})]})]})]})},RE={isOpen:!1,message:"",title:void 0,type:"confirm",onConfirm:()=>{}},C6={"01":"","02":"","03":"A/S","04":"","05":"","06":"","07":"","08":"","09":""},N6={11:"",22:"",33:"",44:"IF",55:"FTTB",66:"FTTH",77:"",88:""},Id=({workType:t,workTypeName:e,custRel:n,custRelName:r,networkType:i,networkTypeName:a,installType:o,installTypeName:c,installedEquipments:u,removedEquipments:h,installLocation:m,upCtrlCl:_,upCtrlClName:p,memo:g,kpiProdGrp:C,kpiProdGrpName:y,obsRcptCd:N,obsRcptCdName:v,obsRcptDtlCd:P,obsRcptDtlCdName:w,extraItems:M=[],equipmentData:k,installInfoData:B,order:G,custRelOptions:U,installLocationText:I})=>{var q;const E=t||(G==null?void 0:G.WRK_CD)||"",A=e||(G==null?void 0:G.WRK_CD_NM)||C6[E]||"",Y=r||((q=U==null?void 0:U.find(V=>V.value===n))==null?void 0:q.label),se=i||(B==null?void 0:B.networkType)||(B==null?void 0:B.NET_CL),X=a||(B==null?void 0:B.networkTypeName)||(B==null?void 0:B.NET_CL_NM),z=o||(B==null?void 0:B.installType)||(B==null?void 0:B.INSTL_TP),$=c||(B==null?void 0:B.installTypeName)||(B==null?void 0:B.INSTL_TP_NM),F=_||(B==null?void 0:B.upCtrlCl),L=p||(B==null?void 0:B.upCtrlClName),re=u||(k==null?void 0:k.installedEquipments)||[],fe=h||(k==null?void 0:k.removedEquipments)||[],T=m||(B?{floor:B.floor,room:B.room,position:B.position}:void 0),j=V=>{var ce,me,Ce,ge,Ge,te,he,de;return(ce=V.contractEquipment)!=null&&ce.EQT_NM?V.contractEquipment.EQT_NM:(me=V.contractEquipment)!=null&&me.eqtNm?V.contractEquipment.eqtNm:(Ce=V.contractEquipment)!=null&&Ce.type?V.contractEquipment.type:(ge=V.contractEquipment)!=null&&ge.ITEM_MID_NM?V.contractEquipment.ITEM_MID_NM:(Ge=V.actualEquipment)!=null&&Ge.EQT_NM?V.actualEquipment.EQT_NM:(te=V.actualEquipment)!=null&&te.eqtNm?V.actualEquipment.eqtNm:(he=V.actualEquipment)!=null&&he.type?V.actualEquipment.type:(de=V.actualEquipment)!=null&&de.ITEM_MID_NM?V.actualEquipment.ITEM_MID_NM:V.EQT_NM?V.EQT_NM:V.eqtNm?V.eqtNm:V.type?V.type:V.ITEM_MID_NM?V.ITEM_MID_NM:V.name||""},K=V=>{var ce,me,Ce,ge,Ge;return(ce=V.actualEquipment)!=null&&ce.EQT_SERNO?V.actualEquipment.EQT_SERNO:(me=V.actualEquipment)!=null&&me.eqtSerno?V.actualEquipment.eqtSerno:(Ce=V.actualEquipment)!=null&&Ce.serialNumber?V.actualEquipment.serialNumber:(ge=V.contractEquipment)!=null&&ge.EQT_SERNO?V.contractEquipment.EQT_SERNO:(Ge=V.contractEquipment)!=null&&Ge.serialNumber?V.contractEquipment.serialNumber:V.EQT_SERNO?V.EQT_SERNO:V.eqtSerno?V.eqtSerno:V.serialNumber?V.serialNumber:""},J=I||T&&[T.floor,T.room,T.position].filter(Boolean).join(" / ")||"-";return s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-blue-200",children:[s.jsx(Ai,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-bold text-blue-800 text-sm",children:" "}),s.jsx("span",{className:"text-xs text-blue-600 ml-auto",children:A})]}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(c0,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:`font-medium ${n?"text-gray-900":"text-red-500"}`,children:Y||n||""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Up,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:`font-medium ${se?"text-gray-900":"text-red-500"}`,children:X||se||""})]}),z&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fu,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:$||N6[z]||z})]}),F&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Up,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:L||F})]}),J!=="-"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rd,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900 truncate max-w-[180px]",children:J})]}),C&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(im,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:"KPI"}),s.jsx("span",{className:"font-medium text-gray-900",children:y||C})]}),N&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fu,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsxs("span",{className:"font-medium text-gray-900",children:[v||N,P&&` > ${w||P}`]})]}),(re.length>0||fe.length>0)&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(im,{className:"w-3.5 h-3.5 text-gray-500"}),s.jsx("span",{className:"text-gray-600 font-medium",children:""})]}),s.jsxs("div",{className:"space-y-2",children:[re.length>0&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2",children:[s.jsx("div",{className:"mb-1.5",children:s.jsx("span",{className:"text-green-600 font-semibold text-xs",children:""})}),s.jsx("div",{className:"space-y-1",children:re.map((V,ce)=>s.jsxs("div",{className:"text-green-700",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-green-500 font-bold",children:"+"}),s.jsx("span",{className:"font-medium text-xs",children:j(V)})]}),K(V)&&s.jsxs("div",{className:"ml-4 text-green-600/70 text-[0.625rem] break-all",children:["S/N: ",K(V)]})]},`install-${ce}`))})]}),fe.length>0&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2",children:[s.jsx("div",{className:"mb-1.5",children:s.jsx("span",{className:"text-red-600 font-semibold text-xs",children:""})}),s.jsx("div",{className:"space-y-1",children:fe.map((V,ce)=>s.jsxs("div",{className:"text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-red-500 font-bold",children:"-"}),s.jsx("span",{className:"font-medium text-xs",children:j(V)})]}),K(V)&&s.jsxs("div",{className:"ml-4 text-red-600/70 text-[0.625rem] break-all",children:["S/N: ",K(V)]})]},`remove-${ce}`))})]})]})]}),M.map((V,ce)=>s.jsxs("div",{className:"flex items-center gap-2",children:[V.icon||s.jsx(zh,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-gray-600 w-16",children:V.label}),s.jsx("span",{className:`font-medium ${V.isWarning?"text-orange-600":"text-gray-900"}`,children:V.value||"-"})]},ce)),g&&s.jsx("div",{className:"mt-2 pt-2 border-t border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(zh,{className:"w-3.5 h-3.5 text-gray-500 mt-0.5"}),s.jsx("span",{className:"text-gray-600 w-16",children:""}),s.jsx("span",{className:"font-medium text-gray-900 flex-1 break-all line-clamp-2",children:g})]})})]})]})},ta=D1()(R1((t,e)=>({currentWorkId:null,workSteps:{},currentStep:1,workItem:null,equipmentData:null,filteringData:null,removalLineData:null,setCurrentWorkId:n=>{const{workSteps:r}=e(),i=n&&r[n]||1;t({currentWorkId:n,currentStep:i})},setCurrentStep:n=>t(r=>{const i=typeof n=="function"?n(r.currentStep):n,a={...r.workSteps};return r.currentWorkId&&(a[r.currentWorkId]=i),{currentStep:i,workSteps:a}}),setWorkItem:n=>t({workItem:n}),setEquipmentData:n=>t({equipmentData:n}),setFilteringData:n=>t({filteringData:n}),setRemovalLineData:n=>t({removalLineData:n}),getStepForWork:n=>{const{workSteps:r}=e();return r[n]||1},reset:()=>t({currentWorkId:null,workSteps:{},currentStep:1,workItem:null,equipmentData:null,filteringData:null,removalLineData:null}),resetWork:n=>t(r=>{const i={...r.workSteps};return delete i[n],{workSteps:i}}),clearPreviousWorkDraft:n=>{const{currentWorkId:r,workSteps:i}=e();if(r&&r!==n){console.log(`[WorkProcessStore]  (${r}) draft `);try{localStorage.removeItem(`work_complete_draft_${r}`),localStorage.removeItem(`equipment_draft_${r}`),console.log("localStorage draft  ")}catch(o){console.error("localStorage  :",o)}const a={...i};delete a[r],t({currentWorkId:n,workSteps:a,currentStep:a[n]||1,workItem:null,equipmentData:null,filteringData:null,removalLineData:null})}else{const a=i[n]||1;t({currentWorkId:n,currentStep:a})}}}),{name:"dlive-work-process-storage",partialize:t=>({workSteps:t.workSteps,currentWorkId:t.currentWorkId,filteringData:t.filteringData,equipmentData:t.equipmentData,removalLineData:t.removalLineData})})),Hi=()=>({contractEquipments:[],technicianEquipments:[],customerEquipments:[],removeEquipments:[],installedEquipments:[],removalStatus:{},markedForRemoval:[],pendingLossStatusList:[],reuseAll:!1,selectedContract:null,selectedStock:null,signalStatus:"idle",signalResult:"",filteringData:{},lastUpdated:null,isDataLoaded:!1}),Ui=D1()(R1((t,e)=>({workStates:{},currentWorkId:null,initWorkState:n=>{t(r=>r.workStates[n]?r:{...r,workStates:{...r.workStates,[n]:Hi()}})},setCurrentWorkId:n=>{t(r=>{const i={...r.workStates};return n&&!i[n]&&(i[n]=Hi()),{...r,currentWorkId:n,workStates:i}})},clearWorkState:n=>{t(r=>{const i={...r.workStates};return delete i[n],{...r,workStates:i}})},clearAllWorkStates:()=>{t({workStates:{},currentWorkId:null})},setApiData:(n,r)=>{var i,a,o,c,u,h;console.log("[Equipment Store] API  ",{workId:n,:((i=r.contractEquipments)==null?void 0:i.length)??0,:((a=r.technicianEquipments)==null?void 0:a.length)??0,:((o=r.customerEquipments)==null?void 0:o.length)??0,:((c=r.removeEquipments)==null?void 0:c.length)??0,:{contractEquipments:(u=r.contractEquipments)==null?void 0:u.map(m=>({id:m.id,model:m.model,type:m.type})),removeEquipments:(h=r.removeEquipments)==null?void 0:h.map(m=>({id:m.id,model:m.model,EQT_NO:m.EQT_NO}))}}),t(m=>{const p={...m.workStates[n]||Hi(),lastUpdated:new Date().toISOString()};return r.contractEquipments!==void 0&&(p.contractEquipments=r.contractEquipments),r.technicianEquipments!==void 0&&(p.technicianEquipments=r.technicianEquipments),r.customerEquipments!==void 0&&(p.customerEquipments=r.customerEquipments),r.removeEquipments!==void 0&&(p.removeEquipments=r.removeEquipments),r.filteringData!==void 0&&(p.filteringData=r.filteringData),{...m,workStates:{...m.workStates,[n]:p}}})},addInstalledEquipment:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi(),o=a.installedEquipments.findIndex(u=>u.contractEquipment.id===r.contractEquipment.id);let c;return o>=0?(c=[...a.installedEquipments],c[o]=r):c=[...a.installedEquipments,r],console.log("[Equipment Store]  ",{workId:n,action:o>=0?"":"",equipment:{contractId:r.contractEquipment.id,contractModel:r.contractEquipment.model,actualId:r.actualEquipment.id,actualModel:r.actualEquipment.model,EQT_CHG_GB:r.actualEquipment.EQT_CHG_GB},:c.length}),{...i,workStates:{...i.workStates,[n]:{...a,installedEquipments:c,lastUpdated:new Date().toISOString()}}}})},removeInstalledEquipment:(n,r)=>{t(i=>{const a=i.workStates[n];if(!a)return i;const o=a.installedEquipments.find(u=>u.contractEquipment.id===r),c=a.installedEquipments.filter(u=>u.contractEquipment.id!==r);return console.log("[Equipment Store]   ",{workId:n,removed:o?{contractId:o.contractEquipment.id,actualId:o.actualEquipment.id,model:o.actualEquipment.model}:null,:c.length}),{...i,workStates:{...i.workStates,[n]:{...a,installedEquipments:c,lastUpdated:new Date().toISOString()}}}})},updateInstalledEquipment:(n,r,i)=>{t(a=>{const o=a.workStates[n];if(!o)return a;const c=o.installedEquipments.findIndex(h=>h.contractEquipment.id===r);if(c<0)return a;const u=[...o.installedEquipments];return u[c]={...u[c],...i},{...a,workStates:{...a.workStates,[n]:{...o,installedEquipments:u,lastUpdated:new Date().toISOString()}}}})},setInstalledEquipments:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,installedEquipments:r,lastUpdated:new Date().toISOString()}}}})},clearInstalledEquipments:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,installedEquipments:[],lastUpdated:new Date().toISOString()}}}:r})},setRemovalStatus:(n,r,i,a)=>{t(o=>{const c=o.workStates[n]||Hi(),u=c.removalStatus[r]||{};return{...o,workStates:{...o.workStates,[n]:{...c,removalStatus:{...c.removalStatus,[r]:{...u,[i]:a}},lastUpdated:new Date().toISOString()}}}})},toggleRemovalStatus:(n,r,i)=>{t(a=>{const o=a.workStates[n]||Hi(),c=o.removalStatus[r]||{},h=(c[i]||"0")==="1"?"0":"1";return console.log("[Equipment Store] / ",{workId:n,eqtNo:r,field:{EQT_LOSS_YN:"",PART_LOSS_BRK_YN:"/",EQT_BRK_YN:"",EQT_CABL_LOSS_YN:"",EQT_CRDL_LOSS_YN:""}[i]||i,:h==="1"?"Y":"N",:{...c,[i]:h}}),{...a,workStates:{...a.workStates,[n]:{...o,removalStatus:{...o.removalStatus,[r]:{...c,[i]:h}},lastUpdated:new Date().toISOString()}}}})},setFullRemovalStatus:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,removalStatus:r,lastUpdated:new Date().toISOString()}}}})},clearRemovalStatus:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,removalStatus:{},lastUpdated:new Date().toISOString()}}}:r})},addMarkedForRemoval:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();if(a.markedForRemoval.some(u=>u.id===r.id))return i;const c=[...a.markedForRemoval,r];return console.log("[Equipment Store]  ",{workId:n,equipment:{id:r.id,model:r.model,serialNumber:r.serialNumber,itemMidCd:r.itemMidCd},:c.length}),{...i,workStates:{...i.workStates,[n]:{...a,markedForRemoval:c,lastUpdated:new Date().toISOString()}}}})},removeMarkedForRemoval:(n,r)=>{t(i=>{const a=i.workStates[n];if(!a)return i;const o=a.markedForRemoval.find(u=>u.id===r),c=a.markedForRemoval.filter(u=>u.id!==r);return console.log("[Equipment Store]  ",{workId:n,removed:o?{id:o.id,model:o.model}:null,:c.length}),{...i,workStates:{...i.workStates,[n]:{...a,markedForRemoval:c,lastUpdated:new Date().toISOString()}}}})},setMarkedForRemoval:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return console.log("[Equipment Store]   ",{workId:n,:r.length,:r.map(o=>({id:o.id,model:o.model}))}),{...i,workStates:{...i.workStates,[n]:{...a,markedForRemoval:r,lastUpdated:new Date().toISOString()}}}})},clearMarkedForRemoval:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,markedForRemoval:[],lastUpdated:new Date().toISOString()}}}:r})},addPendingLossStatus:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi(),o=a.pendingLossStatusList.filter(c=>c.EQT_SERNO!==r.EQT_SERNO);return{...i,workStates:{...i.workStates,[n]:{...a,pendingLossStatusList:[...o,r],lastUpdated:new Date().toISOString()}}}})},setPendingLossStatusList:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,pendingLossStatusList:r,lastUpdated:new Date().toISOString()}}}})},clearPendingLossStatusList:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,pendingLossStatusList:[],lastUpdated:new Date().toISOString()}}}:r})},setReuseAll:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return console.log("[Equipment Store]   ",{workId:n,value:r?"Y":"N"}),{...i,workStates:{...i.workStates,[n]:{...a,reuseAll:r,lastUpdated:new Date().toISOString()}}}})},setSelectedContract:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,selectedContract:r}}}})},setSelectedStock:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,selectedStock:r}}}})},clearSelection:n=>{t(r=>{const i=r.workStates[n];return i?{...r,workStates:{...r.workStates,[n]:{...i,selectedContract:null,selectedStock:null}}}:r})},setSignalStatus:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,signalStatus:r}}}})},setSignalResult:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,signalResult:r}}}})},setDataLoaded:(n,r)=>{t(i=>{const a=i.workStates[n]||Hi();return{...i,workStates:{...i.workStates,[n]:{...a,isDataLoaded:r}}}})},getCurrentWorkState:()=>{const{currentWorkId:n,workStates:r}=e();return n&&r[n]||null},getWorkState:n=>e().workStates[n]||null}),{name:"dlive-work-equipment-storage",partialize:t=>({workStates:Object.fromEntries(Object.entries(t.workStates).map(([e,n])=>[e,{installedEquipments:n.installedEquipments,removalStatus:n.removalStatus,markedForRemoval:n.markedForRemoval,pendingLossStatusList:n.pendingLossStatusList,reuseAll:n.reuseAll,signalStatus:n.signalStatus,signalResult:n.signalResult,filteringData:n.filteringData,lastUpdated:n.lastUpdated}])),currentWorkId:t.currentWorkId}),merge:(t,e)=>{const n={...e};if(t!=null&&t.workStates){n.workStates={};for(const[r,i]of Object.entries(t.workStates))n.workStates[r]={...Hi(),...i}}return t!=null&&t.currentWorkId&&(n.currentWorkId=t.currentWorkId),n}})),TE={workId:null,state:null,isReady:!1,contractEquipments:[],technicianEquipments:[],customerEquipments:[],removeEquipments:[],installedEquipments:[],removalStatus:{},markedForRemoval:[],pendingLossStatusList:[],selectedContract:null,selectedStock:null,signalStatus:"idle",signalResult:"",filteringData:{}},xa=t=>{const e=Ui(n=>t?n.workStates[t]??null:null);return t?e?{workId:t,state:e,isReady:e.isDataLoaded??!1,contractEquipments:e.contractEquipments??[],technicianEquipments:e.technicianEquipments??[],customerEquipments:e.customerEquipments??[],removeEquipments:e.removeEquipments??[],installedEquipments:e.installedEquipments??[],removalStatus:e.removalStatus??{},markedForRemoval:e.markedForRemoval??[],pendingLossStatusList:e.pendingLossStatusList??[],selectedContract:e.selectedContract??null,selectedStock:e.selectedStock??null,signalStatus:e.signalStatus??"idle",signalResult:e.signalResult??"",filteringData:e.filteringData??{}}:{...TE,workId:t}:TE},jd=()=>{const t=V2();return Pw({mutationFn:e=>mA(e),onSuccess:e=>(t.invalidateQueries({queryKey:["workOrders"]}),console.log(" [useCompleteWork]    -    "),e),onError:e=>{console.error(" [useCompleteWork]   :",e)}})},JC=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1,certifyMode:o=!1,certifyReason:c})=>{var Wt,_t,qt,Ot;const u=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[h,m]=b.useState(""),[_,p]=b.useState(!1),g=h==="0"||h==="1"||h==="4",[C,y]=b.useState(!1),{equipmentData:N,filteringData:v}=ta(),{certifyRegconfInfo:P}=Za(),w=t.id||"",M=xa(w),k={...N||i||v||{},installedEquipments:M.installedEquipments.length>0?M.installedEquipments:(N==null?void 0:N.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:M.markedForRemoval.length>0?M.markedForRemoval:(N==null?void 0:N.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(M.removalStatus).length>0?M.removalStatus:(N==null?void 0:N.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:B,isPending:G}=jd(),U=()=>`work_complete_draft_${t.id}`,[I,E]=b.useState(""),[A,Y]=b.useState(""),[se,X]=b.useState(""),[z,$]=b.useState(!1),[F,L]=b.useState(""),[re,fe]=b.useState(""),[T,j]=b.useState(void 0),[K,J]=b.useState(!1),[q,V]=b.useState(!1),[ce,me]=b.useState(""),[Ce,ge]=b.useState(""),[Ge,te]=b.useState(""),[he,de]=b.useState(""),[Q,ee]=b.useState(""),[Z,le]=b.useState(""),[xe,be]=b.useState(!1),[ne,ie]=b.useState(""),[pe,ze]=b.useState([]),[xt,st]=b.useState(!1),[St,ot]=b.useState([]),[Be,lt]=b.useState(!1),[pt,mt]=b.useState(""),[Ye,at]=b.useState(!1),[Fe,tt]=b.useState([]),[ct,Mt]=b.useState(!1),[dt,Je]=b.useState(""),[De,$e]=b.useState(!1),[Ne,ye]=b.useState("B"),[Ue,ue]=b.useState(!1),[Oe,Ze]=b.useState(null),[Le,vt]=b.useState([]),[je,ut]=b.useState([]),[gt,jt]=b.useState([]),[Ve,Vt]=b.useState([]),[ke,ss]=b.useState([]),[ls,ds]=b.useState(()=>{const _e=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(_e&&_e.length>=8)return`${_e.slice(0,4)}-${_e.slice(4,6)}-${_e.slice(6,8)}`;const Se=new Date;return Se.getFullYear()+"-"+String(Se.getMonth()+1).padStart(2,"0")+"-"+String(Se.getDate()).padStart(2,"0")});b.useEffect(()=>{if(u){console.log("[WorkCompleteInstall]   - getWorkReceiptDetail API "),(async()=>{try{const Ie=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(Ie){console.log("[WorkCompleteInstall] API :",Ie);const Te=Ie.INSTL_LOC||"";if(Te.includes("")){const[Re,Ct]=Te.split("");me(Re),ge(Ct)}else me(Te),ge(Ie.VIEW_MOD_CD||""),te(Ie.VIEW_MOD_NM||"");const nt=Ie.UP_CTRL_CL||(k==null?void 0:k.upCtrlCl)||"";console.log("[CompleteInstall]  :",{API:Ie.UP_CTRL_CL,:k==null?void 0:k.upCtrlCl,:nt}),Y(nt),de(Ie.PSN_USE_CORP||""),ee(Ie.VOIP_USE_CORP||""),le(Ie.DTV_USE_CORP||""),L(Ie.NET_CL||""),fe(Ie.NET_CL_NM||""),j({NET_CL:Ie.NET_CL||"",NET_CL_NM:Ie.NET_CL_NM||"",WRNG_TP:Ie.WRNG_TP||"",INSTL_TP:Ie.INSTL_TP||"",CB_WRNG_TP:Ie.CB_WRNG_TP||"",CB_INSTL_TP:Ie.CB_INSTL_TP||"",INOUT_LINE_TP:Ie.INOUT_LINE_TP||"",INOUT_LEN:Ie.INOUT_LEN||"",DVDR_YN:Ie.DVDR_YN||"",BFR_LINE_YN:Ie.BFR_LINE_YN||"",CUT_YN:Ie.CUT_YN||"",TERM_NO:Ie.TERM_NO||"",RCV_STS:Ie.RCV_STS||"",SUBTAP_ID:Ie.SUBTAP_ID||"",PORT_NUM:Ie.PORT_NUM||"",EXTN_TP:Ie.EXTN_TP||"",TAB_LBL:Ie.TAB_LBL||"",CVT_LBL:Ie.CVT_LBL||"",STB_LBL:Ie.STB_LBL||""}),E(Ie.CUST_REL||""),X((Ie.WRK_PROC_CT||"").replace(/\\n/g,`
`)),Ie.VOIP_JOIN_CTRT_ID&&ie(Ie.VOIP_JOIN_CTRT_ID),Ie.WRKR_CMPL_DT&&Ie.WRKR_CMPL_DT.length>=8&&ds(`${Ie.WRKR_CMPL_DT.slice(0,4)}-${Ie.WRKR_CMPL_DT.slice(4,6)}-${Ie.WRKR_CMPL_DT.slice(6,8)}`)}else console.log("[WorkCompleteInstall] API  - order  "),E(t.CUST_REL||""),L(t.NET_CL||""),fe(t.NET_CL_NM||"")}catch(Ie){console.error("[WorkCompleteInstall] API  :",Ie),E(t.CUST_REL||""),L(t.NET_CL||""),fe(t.NET_CL_NM||"")}finally{y(!0)}})();return}const _e=localStorage.getItem(U());if(_e)try{const Se=JSON.parse(_e);E(Se.custRel||""),Y(Se.upCtrlCl||""),X(Se.memo||""),de(Se.internetUse||""),ee(Se.voipUse||""),le(Se.dtvUse||""),L(Se.networkType||""),fe(Se.networkTypeName||""),j(Se.installInfoData),me(Se.installLocationText||""),ge(Se.viewModCd||""),te(Se.viewModNm||""),Se.voipJoinCtrtId&&ie(Se.voipJoinCtrtId)}catch(Se){console.error("[WorkCompleteInstall] localStorage  :",Se)}y(!0)},[t.id,u]),b.useEffect(()=>{if(!C||u)return;const _e={custRel:I,upCtrlCl:A,memo:se,internetUse:he,voipUse:Q,dtvUse:Z,networkType:F,networkTypeName:re,installInfoData:T,installLocationText:ce,viewModCd:Ce,viewModNm:Ge,voipJoinCtrtId:ne,savedAt:new Date().toISOString()};localStorage.setItem(U(),JSON.stringify(_e))},[I,A,se,he,Q,Z,F,re,T,ce,Ce,Ge,ne,C,u]),b.useEffect(()=>{(async()=>{try{const Se=await No(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);Se.CMCU005&&vt(Se.CMCU005.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Se.CMCT015&&(console.log("[CompleteInstall]  CMCT015 :",Se.CMCT015),ut(Se.CMCT015.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM})))),Se.CMCU057&&jt(Se.CMCU057.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Se.CMCU110&&Vt(Se.CMCU110.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Se.CMCU148&&ss(Se.CMCU148.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM})))}catch(Se){console.error("[WorkCompleteInstall]    :",Se)}})()},[]),b.useEffect(()=>{(async()=>{var Se;if(!(!t.id||u)){p(!0);try{console.log("[CompleteInstall] OST  :",t.id);const Ie=await S1({WRK_ID:t.id,RCPT_ID:t.RCPT_ID,CUST_ID:(Se=t.customer)==null?void 0:Se.id});if(Ie){const Te=Ie.OST_WORKABLE_STAT||"";console.log("[CompleteInstall] OST  :",Te),m(Te),(Te==="0"||Te==="1"||Te==="4")&&(r==null||r("    .","warning",!0))}}catch(Ie){console.error("[CompleteInstall] OST   :",Ie)}finally{p(!1)}}})()},[t.id,t.RCPT_ID,(Wt=t.customer)==null?void 0:Wt.id,u]),b.useEffect(()=>{console.log("[CompleteInstall] OST  :",{OST_WORKABLE_STAT:h,isOstBlocked:g,isOstChecking:_,isWorkCompleted:u,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,:h==="0"?"":h==="1"?"":h==="2"?"":h==="3"?"":h==="4"?"/":h==="X"?"OST":h===""?"  ":""})},[h,g,_,u]),b.useEffect(()=>{(async()=>{try{const Se=await Uc(),Ie=(Se==null?void 0:Se.output)||Se||[];tt(Ie);const Te=t.PROD_CD||t.PROD_CD||"",nt=Ie.some(Re=>Re.PROD_CD===Te);at(nt),console.log("[CompleteInstall] LGHV :",{currentProdCd:Te,isLghv:nt,prodListCount:Ie.length})}catch(Se){console.error("[CompleteInstall] LGHV   :",Se)}})()},[t.PROD_CD]),b.useEffect(()=>{(async()=>{const Se=t.PROD_CD||t.PROD_CD||"",Ie=(k==null?void 0:k.prodPromoInfo)||[];if(Se==="PD10018480")console.log("[CompleteInstall] OTT   :",Se),$e(!0),ye("C");else if(Ie.some(Re=>Re.PROD_CD==="PD10018160"))console.log("[CompleteInstall] OTT   : PD10018160"),$e(!0),ye("B");else{$e(!1);return}const Te=t.id||"",nt=t.directionId||t.WRK_DRCTN_ID||"";if(Te&&nt)try{const Re=await v1({WRK_ID:Te,WRK_DRCTN_ID:nt,DATA_TYPE:Se==="PD10018480"?"C":"B"});Re!=null&&Re.EQT_SERNO&&(console.log("[CompleteInstall]  OTT :",Re.EQT_SERNO),Je(Re.EQT_SERNO))}catch(Re){console.error("[CompleteInstall] OTT   :",Re)}})()},[t.PROD_CD,t.id,t.directionId,k==null?void 0:k.prodPromoInfo]),b.useEffect(()=>{k!=null&&k.upCtrlCl&&!A?(console.log("[CompleteInstall] equipmentData  :",k.upCtrlCl),Y(k.upCtrlCl)):!A&&C&&!u&&(console.log("[CompleteInstall]   : 01 ()"),Y("01"))},[k==null?void 0:k.upCtrlCl,C,u,A]),b.useEffect(()=>{var Ie,Te;if(u)return;const _e=((Ie=t.customer)==null?void 0:Ie.id)||t.CUST_ID||t.customerId;if(console.log("[WorkCompleteInstall] CUST_ID :",{"order.customer?.id":(Te=t.customer)==null?void 0:Te.id,"order.CUST_ID":t.CUST_ID,"order.customerId":t.customerId,custId:_e}),!_e){console.log("[WorkCompleteInstall] CUST_ID  -    ");return}(async()=>{try{console.log("[WorkCompleteInstall]     :",_e);const nt=await _m({CUST_ID:_e});console.log("[WorkCompleteInstall]   :",nt),ot(nt||[])}catch(nt){console.error("[WorkCompleteInstall]     :",nt),ot([])}})()},[(_t=t.customer)==null?void 0:_t.id,t.CUST_ID,u]),b.useEffect(()=>{if(u)return;if(St.length===0){console.log("[WorkCompleteInstall]     ...");return}const _e=t.PROD_GRP||"",Se=t.VOIP_PROD_CD||"",Ie=t.ISP_PROD_CD||"",Te=t.WRK_STAT_CD||"",nt=t.ADDR_ORD||"";if(console.log("[WorkCompleteInstall]   :",{prodGrp:_e,voipProdCd:Se,ispProdCd:Ie,wrkStatCd:Te,addrOrd:nt,customerCtrtListCount:St.length}),_e==="V"&&!Se){const Re=St.filter(Ke=>{const Et=Ke.PROD_GRP||"",Rt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"";return(Et==="C"||Et==="D"||Et==="I")&&Rt==="20"&&(!nt||He===nt)});console.log("[WorkCompleteInstall] VoIP   :",Re),Re.length<1&&Te==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const Ct=[{value:"",label:""},...Re.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];ze(Ct),st(!0);return}if(_e==="I"&&Ie){const Re=St.filter(Ke=>{const Et=Ke.PROD_GRP||"",Rt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"",ht=Ke.ISP_JOIN_ID||"",Pt=Ke.KPI_PROD_GRP_CD||"";return(Et==="D"||Et==="C")&&Rt==="20"&&!ht&&Pt==="D"&&(!nt||He===nt)});console.log("[WorkCompleteInstall] ISP   :",Re),Re.length<1&&Te==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const Ct=[{value:"",label:""},...Re.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];ze(Ct),st(!0);return}st(!1),ze([])},[t.id,t.WRK_STAT_CD,u,r,St]);const vs=()=>{const _e=[];(!I||I==="[]")&&_e.push("  ."),T!=null&&T.NET_CL||_e.push(" ."),!t.installLocation&&!ce&&_e.push(" ."),ls||_e.push(" .");const Se=t.PROD_GRP||"",Ie=t.VOIP_PROD_CD||"",Te=t.ISP_PROD_CD||"";Se==="V"&&!Ie&&xt&&(ne||_e.push("VOIP    .")),Se==="I"&&Te&&xt&&(ne||_e.push("  ISP .    ."));const nt=(k==null?void 0:k.installedEquipments)||[];return Se!=="V"&&nt.length<1&&_e.push("()  ."),De&&!dt&&_e.push("OTT   OTT BOX   ."),_e},Ss=_e=>{j(_e),_e.NET_CL&&L(_e.NET_CL),_e.NET_CL_NM&&fe(_e.NET_CL_NM),r==null||r("  .","success")},Ae=()=>{if(G)return;if(g){r==null||r("    .","warning");return}const _e=vs();if(_e.length>0){_e.forEach(Ie=>r==null?void 0:r(Ie,"error"));return}(t.PROD_GRP||"")!=="V"?ue(!0):(mt(" ?"),lt(!0))},ft=_e=>{Ze(_e),ue(!1),mt(" ?"),lt(!0)},rt=async()=>{var He,ht,Pt,Bt;console.log("[WorkCompleteInstall]   ");const _e=ls.replace(/-/g,""),Se=localStorage.getItem("userInfo"),Ie=Se?JSON.parse(Se):{},Te=Ie.userId||"A20130708",nt=o||u0(t.OP_LNKD_CD);let Re="";if(nt){let Yt=(k==null?void 0:k.prodPromoInfo)||[];if(Yt.length===0)try{console.log("[CompleteInstall] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),Yt=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"01"}),console.log("[CompleteInstall] getProdPromotionInfo fallback :",Yt.length,"")}catch(ts){console.log("[CompleteInstall] getProdPromotionInfo fallback :",ts)}const Xt=Yt.filter(ts=>(ts.PROD_CMPS_CL==="21"||ts.PROD_CMPS_CL==="22")&&ts.PROD_STAT_CD==="10").map(ts=>ts.PROD_CD).filter(ts=>ts);Re=Xt.join(","),console.log("[CompleteInstall] ADD_ON :",Re,"(",Xt.length," )")}const Ct=(k==null?void 0:k.installedEquipments)||[];if(nt&&Ct.length>0&&!P){r==null||r("  .","error");return}if(nt&&P)try{const Yt=await p_({order:t,workerId:Te,certifyRegconfInfo:P,addOnParam:Re,reason:c||""});if(!Yt.success){r==null||r(` : ${Yt.message}`,"error");return}console.log("[CompleteInstall] CL-04    ")}catch(Yt){console.error("[CompleteInstall] CL-04  :",Yt),r==null||r(`  : ${Yt.message||"   "}`,"error");return}const Ke=async()=>{var Cs,Bs;const Yt=(k==null?void 0:k.installedEquipments)||[],Xt=!!t.ISP_PROD_CD;let ts=!1;const Ut=(k==null?void 0:k.customerEquipments)||Yt;for(const _s of Ut){const Es=_s.actualEquipment||_s,js=Es.eqtClCd||Es.EQT_CL_CD||"";if(js==="090901"||js==="091001"||js==="091005")continue;(Es.EQT_KND||Es.eqtKnd||"WRKER")==="WRKER"&&(ts=!0)}if(Ut.some(_s=>{const Es=_s.actualEquipment||_s;return(Es.itemMidCd||Es.ITEM_MID_CD)==="23"})&&(ts=!1),Xt&&(ts=!0),await y_(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD)&&(ts=!1),ts&&(Yt.length>0||Xt))try{const _s=t.PROD_GRP||"";let Es="SMR03",js="",cs="",fs="",Ys="",Ls="",it="";Ye&&(Es="STB_CRT"),_s==="V"&&(Es="SMR60");let Ft=(k==null?void 0:k.prodPromoInfo)||[];if(Ft.length===0)try{Ft=await Tl({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:Te,PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"01",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||"",WRK_CD:t.WRK_CD||"01",WRK_STAT_CD:t.WRK_STAT_CD||""})}catch(Is){console.log("[CompleteInstall] prodPromoInfo  :",Is)}const bs=((Cs=Ft.find(Is=>Is.PROD_CMPS_CL==="23"))==null?void 0:Cs.PROD_CMPS_ID)||"",zt=Ft.find(Is=>Is.PROD_CMPS_CL==="11"),ws=(zt==null?void 0:zt.PROD_CD)||"",es=(zt==null?void 0:zt.PROD_GRP)||_s,Os=Ft.filter(Is=>Is.BASIC_PROD_FL==="V").map(Is=>Is.PROD_CD),As=Os.length>0?Os.join(","):"",ms=Is=>{const xs=Yt.find(Ar=>{const ti=Ar.actualEquipment||Ar;return(ti.itemMidCd||ti.ITEM_MID_CD)===Is});if(!xs)return"";const Br=xs.actualEquipment||xs;return Br.id||Br.EQT_NO||""};t.VOIP_PROD_CD?(js=ms("08"),cs=ms("02")):(js=ms("05")||ms("01")||ms("03")||(es==="I"?ms("02"):"")||ms("08")||"",cs=ms("04"),!cs&&es==="A"&&(cs=(T==null?void 0:T.NET_CL)||"")),fs=ms("07"),es==="C"&&(Ys=ms("02")),es==="V"&&(Ls=ms("10")),Xt&&(Ls=ms("21")),(_s==="V"||Xt)&&(it=ne||t.CTRT_ID||"");let Ws=t.id||"";for(const Is of Yt){const xs=Is.actualEquipment||Is,Br=xs.eqtClCd||xs.EQT_CL_CD||"";if(Br==="091003"||Br==="091004"){Ws=xs.id||xs.EQT_NO||t.id||"";break}if(Br==="092201"){Ws=xs.macAddress||xs.MAC_ADDRESS||xs.id||xs.EQT_NO||t.id||"";break}}console.log("[CompleteInstall]   :",{msgId:Es,eqtNo:js,prodCd:ws,subProdCd:As,etc1:cs,etc2:fs,etc3:Ys,etc4:Ls});const $s=await _a({MSG_ID:Es,CUST_ID:((Bs=t.customer)==null?void 0:Bs.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:js,EQT_PROD_CMPS_ID:bs,PROD_CD:ws,ITV_USR_ID:"",IP_CNT:"",ETC_1:cs,ETC_2:fs,ETC_3:Ys,ETC_4:Ls,SUB_PROD_CD:As,IF_DTL_ID:"",WRK_ID:Ws,REG_UID:Te,VOIP_JOIN_CTRT_ID:it,WTIME:"3"});$s.code!=="SUCCESS"&&$s.code!=="OK"?console.warn("[CompleteInstall]    :",$s.message):console.log("[CompleteInstall]    ")}catch(_s){console.log("[CompleteInstall]      (  ):",_s)}},Et=(Yt,Xt=!1)=>{if(!Yt||Yt.length===0)return[];const ts=(k==null?void 0:k.removalStatus)||{};return Yt.map(Ut=>{var _s,Es,js;const Ms=Ut.EQT_NO||Ut.id||((_s=Ut.actualEquipment)==null?void 0:_s.id)||"",Cs=ts[Ms]||{},Bs=Xt?{CRR_TSK_CL:t.WRK_CD||"01",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Ie.crrId||"01",WRKR_ID:Te,EQT_LOSS_YN:Cs.isLost?"1":"0",EQT_BRK_YN:Cs.isDamaged?"1":"0",REUSE_YN:Cs.isReusable?"1":"0"}:{};if(Ut.actualEquipment){const cs=Ut.actualEquipment,fs=Ut.contractEquipment||{};return{...cs,EQT_NO:cs.id,EQT_SERNO:cs.serialNumber,ITEM_MID_CD:cs.itemMidCd,EQT_CL_CD:cs.eqtClCd,MAC_ADDRESS:Ut.macAddress||cs.macAddress,WRK_ID:t.id,CUST_ID:(Es=t.customer)==null?void 0:Es.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:fs.id||fs.SVC_CMPS_ID||cs.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:cs.BASIC_PROD_CMPS_ID||fs.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:cs.EQT_PROD_CMPS_ID||fs.id,PROD_CD:cs.PROD_CD||fs.PROD_CD||t.PROD_CD||"",SVC_CD:cs.SVC_CD||fs.SVC_CD||"",EQT_SALE_AMT:cs.EQT_SALE_AMT||"0",MST_SO_ID:cs.MST_SO_ID||t.SO_ID||"",SO_ID:cs.SO_ID||t.SO_ID||"",REG_UID:Te,CHG_UID:Te,OLD_LENT_YN:cs.OLD_LENT_YN||"N",LENT:cs.LENT||"10",LENT_KND:cs.LENT_KND||"",ITLLMT_PRD:cs.ITLLMT_PRD||"00",EQT_USE_STAT_CD:cs.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:cs.IF_DTL_ID||"",...Bs}}return{...Ut,EQT_NO:Ut.EQT_NO||Ut.id||"",EQT_SERNO:Ut.EQT_SERNO||Ut.serialNumber||"",ITEM_MID_CD:Ut.ITEM_MID_CD||Ut.itemMidCd||"",EQT_CL_CD:Ut.EQT_CL_CD||Ut.eqtClCd||"",MAC_ADDRESS:Ut.MAC_ADDRESS||Ut.macAddress||"",SVC_CMPS_ID:Ut.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ut.BASIC_PROD_CMPS_ID||"",PROD_CD:Ut.PROD_CD||"",SVC_CD:Ut.SVC_CD||"",WRK_ID:Ut.WRK_ID||t.id,CUST_ID:Ut.CUST_ID||((js=t.customer)==null?void 0:js.id),CTRT_ID:Ut.CTRT_ID||t.CTRT_ID,WRK_CD:Ut.WRK_CD||t.WRK_CD,REG_UID:Te,CHG_UID:Te,LENT_KND:Ut.LENT_KND||"",...Bs}})},Rt={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(He=t.customer)==null?void 0:He.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Ie.crrId||"01",WRKR_ID:Te,WRKR_CMPL_DT:_e,MEMO:se||" ",STTL_YN:"Y",REG_UID:Te,CUST_REL:I,CNFM_CUST_NM:(ht=t.customer)==null?void 0:ht.name,CNFM_CUST_TELNO:((Pt=t.customer)==null?void 0:Pt.contactNumber)||"",REQ_CUST_TEL_NO:((Bt=t.customer)==null?void 0:Bt.contactNumber)||"",INSTL_LOC:t.installLocation||ce||"",UP_CTRL_CL:A||"",PSN_USE_CORP:he||"",VOIP_USE_CORP:Q||"",DTV_USE_CORP:Z||"",WRK_ACT_CL:"20",NET_CL:(T==null?void 0:T.NET_CL)||"",WRNG_TP:(T==null?void 0:T.WRNG_TP)||"",INSTL_TP:(T==null?void 0:T.INSTL_TP)||"",CB_WRNG_TP:(T==null?void 0:T.CB_WRNG_TP)||"",CB_INSTL_TP:(T==null?void 0:T.CB_INSTL_TP)||"",INOUT_LINE_TP:(T==null?void 0:T.INOUT_LINE_TP)||"",INOUT_LEN:(T==null?void 0:T.INOUT_LEN)||"",DVDR_YN:(T==null?void 0:T.DVDR_YN)||"",BFR_LINE_YN:(T==null?void 0:T.BFR_LINE_YN)||"",CUT_YN:(T==null?void 0:T.CUT_YN)||"",TERM_NO:(T==null?void 0:T.TERM_NO)||"",RCV_STS:(T==null?void 0:T.RCV_STS)||"",SUBTAP_ID:(T==null?void 0:T.SUBTAP_ID)||"",PORT_NUM:(T==null?void 0:T.PORT_NUM)||"",EXTN_TP:(T==null?void 0:T.EXTN_TP)||"",TAB_LBL:(T==null?void 0:T.TAB_LBL)||"",CVT_LBL:(T==null?void 0:T.CVT_LBL)||"",STB_LBL:(T==null?void 0:T.STB_LBL)||"",KPI_PROD_GRP:"",OBS_RCPT_CD:"",OBS_RCPT_DTL_CD:"",VOIP_JOIN_CTRT_ID:ne||"",AGREE_YN:"",ISP_YN:"",AGREE_GB:"",CUST_CLEAN_YN:"",EQT_RMV_FLAG:"",TV_TYPE:"",ADD_ON:Re||""},equipmentList:Et((k==null?void 0:k.installedEquipments)||[],!1),removeEquipmentList:Et((k==null?void 0:k.removedEquipments)||[],!0),spendItemList:(k==null?void 0:k.spendItems)||[],agreementList:(k==null?void 0:k.agreements)||[],poleList:Oe?[{WRK_ID:t.id,POLE_YN:Oe.POLE_YN,LAN_GB:Oe.LAN_GB||"",REG_UID:Te}]:[]};B(Rt,{onSuccess:Yt=>{Yt.code==="SUCCESS"||Yt.code==="OK"?(localStorage.removeItem(U()),t.WRK_STAT_CD="3",Ke(),r==null||r("  .","success"),n()):r==null||r(Yt.message||"   .","error",!0)},onError:Yt=>{r==null||r(Yt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[G&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",xt&&!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),xt?s.jsx(sn,{value:ne,onValueChange:ie,options:pe,placeholder:" ",required:!0,disabled:u}):s.jsx("input",{type:"text",value:"",readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:re||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>$(!0),className:`min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:u?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:I,onValueChange:E,options:Le,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-xs sm:text-sm",children:[s.jsx("span",{className:"truncate",children:ce||t.installLocation||""}),Ge&&s.jsxs("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm text-gray-500 flex-shrink-0 whitespace-nowrap",children:["(: ",Ge,")"]})]}),s.jsxs("button",{type:"button",onClick:()=>V(!0),className:`min-h-10 sm:min-h-12 px-3 sm:px-4 rounded-lg font-bold transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm flex-shrink-0 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:[s.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{children:u?"":""})]})]})]}),((k==null?void 0:k.kpiProdGrpCd)==="D"||(k==null?void 0:k.prodGrp)==="D"||t.PROD_GRP==="D"||(t.PROD_NM||"").includes("DTV"))&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx(sn,{value:A,onValueChange:Y,options:je,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:se,onChange:_e=>X(_e.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${u?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:u,disabled:u}),!u&&s.jsxs("p",{className:`text-xs text-right mt-1 ${se.length>=500?"text-red-500":"text-gray-400"}`,children:[se.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:ls,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>be(!xe),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${xe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),xe&&s.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"DTV ()"}),s.jsx(sn,{value:Z,onValueChange:le,options:ke,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"ISP ()"}),s.jsx(sn,{value:he,onValueChange:de,options:gt,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"VoIP (VoIP)"}),s.jsx(sn,{value:Q,onValueChange:ee,options:Ve,placeholder:"",disabled:u})]})]})]}),De&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["OTT BOX  ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:dt,readOnly:!0,placeholder:"SER_NO   ",className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-600"}),s.jsxs("button",{type:"button",onClick:()=>Mt(!0),disabled:u,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${u?"bg-gray-400 text-white cursor-not-allowed":dt?"bg-green-500 hover:bg-green-600 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"SER_NO"]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!u&&s.jsx("button",{onClick:Ae,disabled:G||_||g,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${G||_||g?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:G?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>J(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:z,onClose:()=>$(!1),onSave:Ss,workId:t.id,initialData:T,workType:t.WRK_CD,customerId:t.customer.id,customerName:t.customer.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(k==null?void 0:k.kpiProdGrpCd)||(k==null?void 0:k.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(k==null?void 0:k.prodChgGb)||(k==null?void 0:k.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(k==null?void 0:k.chgKpiProdGrpCd)||(k==null?void 0:k.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(k==null?void 0:k.prodGrp)||(k==null?void 0:k.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:u}),s.jsx(el,{isOpen:K,onClose:()=>J(!1),ctrtId:t.CTRT_ID,custId:t.customer.id}),s.jsx(xm,{isOpen:q,onClose:()=>V(!1),onSave:_e=>{me(_e.INSTL_LOC),ge(_e.VIEW_MOD_CD),te(_e.VIEW_MOD_NM),V(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(k==null?void 0:k.prodGrp)||(k==null?void 0:k.PROD_GRP),initialInstlLoc:ce||t.installLocation,initialViewModCd:Ce,initialViewModNm:Ge,showToast:r,readOnly:u}),s.jsx(Ba,{isOpen:Be,onClose:()=>lt(!1),onConfirm:rt,title:" ",message:pt,type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{workType:"01",workTypeName:"",custRel:I,custRelName:(qt=Le.find(_e=>_e.value===I))==null?void 0:qt.label,networkType:F,networkTypeName:re,upCtrlCl:A,upCtrlClName:(Ot=je.find(_e=>_e.value===A))==null?void 0:Ot.label,installedEquipments:(k==null?void 0:k.installedEquipments)||[],removedEquipments:(k==null?void 0:k.removedEquipments)||[],installLocation:ce?{position:ce}:void 0,memo:se})}),s.jsx(b_,{isOpen:Ue,onClose:()=>ue(!1),onSave:ft,soId:t.SO_ID||""}),s.jsx(rN,{isOpen:ct,onClose:()=>Mt(!1),onSave:_e=>{Je(_e),r==null||r("OTT  .","success")},wrkId:t.id||"",wrkDrctnId:t.directionId||t.WRK_DRCTN_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",dataType:Ne,showToast:r,readOnly:u})]})},iN=({custId:t,rcptId:e,ctrtId:n,soId:r,termHopeDt:i,wrkCd:a,wrkStatCd:o,showToast:c,onHotbillConfirmChange:u,onSimulatingChange:h,readOnly:m=!1})=>{const[_,p]=b.useState(null),[g,C]=b.useState(!0),[y,N]=b.useState(!1),[v,P]=b.useState(null),[w,M]=b.useState([]),[k,B]=b.useState(0),[G,U]=b.useState(!1),[I,E]=b.useState(!1),[A,Y]=b.useState(!1),[se,X]=b.useState(!1),[z,$]=b.useState(!1),[F,L]=b.useState(!1),[re,fe]=b.useState(!1),T=a==="02"&&o!=="7",j=()=>{const me=new Date;return me.getFullYear().toString()+String(me.getMonth()+1).padStart(2,"0")+String(me.getDate()).padStart(2,"0")},K=me=>{if(!me)return"-";const Ce=me.replace(/-/g,"");return Ce.length>=8?`${Ce.slice(0,4)}-${Ce.slice(4,6)}-${Ce.slice(6,8)}`:me},J=me=>me.toLocaleString("ko-KR"),q=async()=>{if(!t||!e){C(!1);return}C(!0),P(null);try{const me=await xE(t,e);p(me);const Ce=me&&me.details&&me.details.length>0;if(U(Ce),Ce&&me.details.length>0){const te=me.details[0],he=te.BILL_SEQ_NO||"",de=te.PROD_GRP||"",Q=te.SO_ID||r||"",ee=te.CTRT_ID||n||"",Z=te.CLC_WRK_CL||"4";if(console.log("[HotbillSection] Step 2 -   :",{billSeqNo:he,prodGrp:de,detailSoId:Q,clcWrkCl:Z,rcptId:e}),he&&de&&Q&&e)try{const le=await pE(he,de,Q,Z,e);console.log("[HotbillSection]   :",le);let xe="",be=ee;if(le.length>0){const ne=le.find(ie=>ie.CTRT_ID===ee);ne?(xe=ne.CLC_WRK_NO,be=ne.CTRT_ID):(xe=le[0].CLC_WRK_NO,be=le[0].CTRT_ID||ee)}if(console.log("[HotbillSection] Step 3 -   :",{billSeqNo:he,clcWrkNo:xe,targetCtrtId:be}),he&&xe&&be){const ne=await yE(he,xe,be);console.log("[HotbillSection] ==========    =========="),console.log("[HotbillSection]  :",ne.length),ne.forEach((ze,xt)=>{console.log(`[HotbillSection] [${xt}] CHRG_ITEM_NM: ${ze.CHRG_ITEM_NM}, BILL_AMT: ${ze.BILL_AMT}, REQ_YN: ${ze.REQ_YN}, SORT_SEQ: ${ze.SORT_SEQ}`)});const ie=ne.filter(ze=>ze.BILL_AMT>0||ze.REQ_YN==="Y").sort((ze,xt)=>parseInt(ze.SORT_SEQ||"0")-parseInt(xt.SORT_SEQ||"0"));console.log("[HotbillSection] ==========    (BILL_AMT > 0 OR REQ_YN = Y) =========="),console.log("[HotbillSection]   :",ie.length),ie.forEach((ze,xt)=>{console.log(`[HotbillSection] [${xt}] CHRG_ITEM_NM: ${ze.CHRG_ITEM_NM}, BILL_AMT: ${ze.BILL_AMT}, REQ_YN: ${ze.REQ_YN}, SORT_SEQ: ${ze.SORT_SEQ}`)}),M(ie);const pe=ie.reduce((ze,xt)=>ze+xt.BILL_AMT,0);console.log("[HotbillSection] :",pe),B(pe)}}catch(le){console.warn("[HotbillSection]    ():",le)}}const ge=j(),Ge=(i||"").replace(/-/g,"");!Ce||Ge>ge?E(!0):E(!1)}catch(me){console.error("[HotbillSection]  :",me),P("  "),U(!1),E(!0)}finally{C(!1)}},V=async()=>{if(!t||!n||!r){c==null||c("    ","error");return}const me=j();N(!0),h==null||h(!0),P(null);try{const Ce=await EA({CUST_ID:t,CTRT_ID:n,SO_ID:r,HOPE_DT:me,CLC_WRK_CL:"2",PNTY_EXMP_YN:"N"});if(Ce.code==="SUCCESS"||Ce.code==="OK"){c==null||c("  .","success"),Y(!0);const ge=Ce.RCPT_ID||e,Ge=await xE(t,ge);p(Ge);const te=Ge&&Ge.details&&Ge.details.length>0;if(U(te),te&&Ge.details.length>0){const he=Ge.details[0],de=he.BILL_SEQ_NO||"",Q=he.PROD_GRP||"",ee=he.SO_ID||r||"",Z=he.CTRT_ID||n||"";if(de&&Q&&ee&&e)try{const le=await pE(de,Q,ee,"4",e);let xe="",be=Z;if(le.length>0){const ne=le.find(ie=>ie.CTRT_ID===Z);ne?(xe=ne.CLC_WRK_NO,be=ne.CTRT_ID):(xe=le[0].CLC_WRK_NO,be=le[0].CTRT_ID||Z)}if(de&&xe&&be){const ie=(await yE(de,xe,be)).filter(ze=>ze.BILL_AMT>0||ze.REQ_YN==="Y").sort((ze,xt)=>parseInt(ze.SORT_SEQ||"0")-parseInt(xt.SORT_SEQ||"0"));M(ie);const pe=ie.reduce((ze,xt)=>ze+xt.BILL_AMT,0);B(pe)}}catch(le){console.warn("[HotbillSection]    ():",le)}}}else P(Ce.message||"  "),c==null||c(Ce.message||"  ","error",!0)}catch(Ce){console.error("[HotbillSection]  :",Ce),P(Ce.message||"    "),c==null||c(Ce.message||"    ","error",!0)}finally{N(!1),h==null||h(!1)}};if(b.useEffect(()=>{T&&t?q():C(!1)},[t,e,T]),b.useEffect(()=>{if(!T){u==null||u(!0);return}let me=!1;I?me=z||F:me=se,u==null||u(me)},[T,I,se,z,F]),!T)return null;const ce=_&&_.details&&_.details.length>0;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 sm:px-4 py-2.5 sm:py-3 flex items-center bg-orange-50",children:s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-xs sm:text-sm font-bold text-orange-800",children:""})]})}),s.jsxs("div",{className:"p-2.5 sm:p-3 space-y-2.5 sm:space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-2.5 sm:p-3",children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:K(i)})]}),g&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-5 sm:py-6 gap-1.5 sm:gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-blue-600"}),s.jsx("div",{className:"text-gray-500 text-[0.625rem] sm:text-xs",children:"   ..."})]}),!g&&v&&s.jsx("div",{className:"flex items-center justify-center py-3 sm:py-4 px-3 sm:px-4",children:s.jsx("div",{className:"text-red-500 text-[0.625rem] sm:text-xs text-center",children:v})}),!g&&!v&&s.jsxs(s.Fragment,{children:[ce&&s.jsxs("div",{className:"space-y-2.5 sm:space-y-3",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-12 bg-gray-100 border-b border-gray-200",children:[s.jsx("div",{className:"col-span-8 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-semibold text-gray-700 text-center",children:""}),s.jsx("div",{className:"col-span-4 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-semibold text-gray-700 text-center",children:""})]}),s.jsx("div",{className:"divide-y divide-gray-100 max-h-40 sm:max-h-48 overflow-y-auto",children:w.length>0?w.map((me,Ce)=>s.jsxs("div",{className:`grid grid-cols-12 ${Ce%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("div",{className:"col-span-8 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs text-gray-900",children:me.CHRG_ITEM_NM||"-"}),s.jsx("div",{className:"col-span-4 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-medium text-gray-900 text-right",children:J(me.BILL_AMT)})]},Ce)):_.details.map((me,Ce)=>s.jsxs("div",{className:`grid grid-cols-12 ${Ce%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("div",{className:"col-span-8 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs text-gray-900",children:me.CHRG_ITM_NM||me.CHG_NM||"-"}),s.jsx("div",{className:"col-span-4 px-1.5 sm:px-2 py-1.5 sm:py-2 text-[0.625rem] sm:text-xs font-medium text-gray-900 text-right",children:J(me.BILL_AMT)})]},Ce))})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-2.5 sm:p-3",children:s.jsxs("div",{className:"flex items-center justify-end gap-1.5 sm:gap-2",children:[s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800 whitespace-nowrap",children:":"}),s.jsxs("span",{className:"text-base sm:text-lg font-bold text-blue-700",children:[J(k>0?k:_.refundAmount||_.totalAmount),""]})]})})]}),!ce&&s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 py-2.5 sm:py-3 px-2.5 sm:px-3 bg-amber-50 rounded-lg border border-amber-200",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs sm:text-sm text-amber-800",children:"  "})]}),s.jsx("div",{className:"space-y-2",children:I?s.jsxs(s.Fragment,{children:[(()=>{const me=j();return(i||"").replace(/-/g,"")>me?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 py-2 px-2.5 sm:px-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs sm:text-sm text-red-800 font-medium",children:"  ."})]}),s.jsxs("button",{type:"button",onClick:()=>{m||(fe(!re),re&&$(!1))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":re?"bg-amber-50 border-amber-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${re?"bg-amber-500 border-amber-500":"bg-white border-gray-400"}`,children:re&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":re?"text-amber-700":"text-gray-700"}`,children:"  "})]}),re&&!m&&s.jsx("div",{className:"space-y-2",children:A?s.jsxs("button",{type:"button",onClick:()=>{m||($(!z),z||L(!1))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":z?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${z?"bg-green-500 border-green-500":"bg-white border-gray-400"}`,children:z&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":z?"text-green-700":"text-gray-700"}`,children:"  "})]}):s.jsx("button",{type:"button",onClick:V,disabled:y||m,className:"w-full py-3 bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:y?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:" "})]})})})]}):s.jsx("div",{className:"space-y-2",children:!A&&!m?s.jsx("button",{type:"button",onClick:V,disabled:y||m,className:"w-full py-3 bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:y?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:" "})]})}):A?s.jsxs("button",{type:"button",onClick:()=>{m||($(!z),z||L(!1))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":z?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${z?"bg-green-500 border-green-500":"bg-white border-gray-400"}`,children:z&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":z?"text-green-700":"text-gray-700"}`,children:"  "})]}):null})})(),s.jsxs("button",{type:"button",onClick:()=>{m||(L(!F),F||($(!1),fe(!1)))},disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":F?"bg-gray-100 border-gray-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${F?"bg-gray-500 border-gray-500":"bg-white border-gray-400"}`,children:F&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":F?"text-gray-700":"text-gray-600"}`,children:"  "})]})]}):s.jsxs("button",{type:"button",onClick:()=>!m&&X(!se),disabled:m,className:`w-full p-3 rounded-lg border-2 transition-all flex items-center gap-3 ${m?"bg-gray-100 border-gray-300 cursor-not-allowed":se?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${se?"bg-green-500 border-green-500":"bg-white border-gray-400"}`,children:se&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`text-sm font-medium ${m?"text-gray-500":se?"text-green-700":"text-gray-700"}`,children:" "})]})})]})]})]})},S6={1:"",2:"1:1",3:"",4:""},v6={4:"",1:""},E6={5:"",6:"21",7:""},GM=({onComplete:t,onAssignAS:e,showToast:n,disabled:r=!1,savedData:i,onReset:a})=>{const[o,c]=b.useState(""),[u,h]=b.useState("4"),[m,_]=b.useState(""),[p,g]=b.useState(!1);b.useEffect(()=>{i&&(c(i.REMOVE_LINE_TP||""),h(i.REMOVE_GB||"4"),_(i.REMOVE_STAT||""),g(!1))},[i]);const C=[{value:"1",label:""},{value:"2",label:"1:1"},{value:"3",label:""},{value:"4",label:""}],y=[{value:"4",label:""},{value:"1",label:""}],N=[{value:"5",label:""},{value:"6",label:"21"},{value:"7",label:""}],v=U=>{c(U),h("4"),_("")},P=U=>{h(U),U==="4"&&_("")},w=()=>{if(!o){n==null||n("  ","warning");return}if(!u){n==null||n(" ","warning");return}const U={REMOVE_LINE_TP:o,REMOVE_GB:u,REMOVE_STAT:m};g(!1),t(U)},M=()=>{if(!o){n==null||n("  ","warning");return}if(!u){n==null||n(" ","warning");return}if(u==="1"&&!m){n==null||n("  ","warning");return}const U={REMOVE_LINE_TP:o,REMOVE_GB:u,REMOVE_STAT:m};g(!1),e(U)},k=()=>{g(!0),a==null||a()};if(r)return null;const B=i&&!p,G=(i==null?void 0:i.REMOVE_GB)==="1";return s.jsxs("div",{className:`bg-white rounded-xl shadow-sm border overflow-hidden ${B?G?"border-orange-300":"border-green-300":"border-gray-200"}`,id:"removal-line-section",children:[s.jsx("div",{className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 flex items-center justify-between ${B?G?"bg-orange-50":"bg-green-50":"bg-teal-50"}`,children:s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 ${B?G?"text-orange-600":"text-green-600":"text-teal-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),s.jsx("span",{className:`text-xs sm:text-sm font-bold ${B?G?"text-orange-800":"text-green-800":"text-teal-800"}`,children:" "}),B&&(G?s.jsx("span",{className:"ml-1 inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-orange-500 text-white text-xs font-bold",children:"AS"}):s.jsxs("span",{className:"ml-1 inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-500 text-white text-xs font-bold",children:[s.jsx(Ai,{className:"w-3 h-3"}),""]}))]})}),B&&i&&s.jsx("div",{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"font-semibold text-gray-900",children:S6[i.REMOVE_LINE_TP]||i.REMOVE_LINE_TP})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:`font-semibold ${i.REMOVE_GB==="4"?"text-blue-600":"text-red-600"}`,children:v6[i.REMOVE_GB]||i.REMOVE_GB}),i.REMOVE_GB==="1"&&i.REMOVE_STAT&&s.jsxs("span",{className:"text-yellow-600 font-medium",children:["(",E6[i.REMOVE_STAT]||i.REMOVE_STAT,")"]})]})]}),s.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(ki,{className:"w-4 h-4"}),""]})]})}),!B&&s.jsxs("div",{className:"p-2.5 sm:p-3 space-y-3 sm:space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:""}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2",children:C.map(U=>s.jsx("button",{type:"button",onClick:()=>v(U.value),className:`min-h-10 sm:min-h-12 py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-medium text-xs sm:text-sm transition-colors border-2 ${o===U.value?"bg-green-100 border-green-500 text-green-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:U.label},U.value))})]}),o&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:""}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2",children:y.map(U=>s.jsx("button",{type:"button",onClick:()=>P(U.value),className:`min-h-10 sm:min-h-12 py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-bold text-sm sm:text-base transition-colors border-2 ${u===U.value?U.value==="4"?"bg-blue-100 border-blue-500 text-blue-700":"bg-red-100 border-red-500 text-red-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:U.label},U.value))})]}),o&&u==="1"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-1.5 sm:gap-2",children:N.map(U=>s.jsx("button",{type:"button",onClick:()=>_(U.value),className:`min-h-10 sm:min-h-12 py-2 sm:py-3 px-1.5 sm:px-2 rounded-lg font-bold text-xs sm:text-sm transition-colors border-2 ${m===U.value?"bg-yellow-100 border-yellow-500 text-yellow-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:U.label},U.value))})]}),o&&s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-1.5 sm:pt-2",children:[s.jsx("button",{type:"button",onClick:w,disabled:!o||!u||u==="1",className:`flex-1 min-h-12 py-2 sm:py-3 rounded-lg font-bold text-sm sm:text-base transition-colors ${o&&u==="4"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:""}),s.jsx("button",{type:"button",onClick:M,disabled:!o||u!=="1"||!m,className:`flex-1 min-h-12 py-2 sm:py-3 rounded-lg font-bold text-sm sm:text-base transition-colors ${o&&u==="1"&&m?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"AS"})]})]})]})},D6={5:"JHA",6:"JHB",7:"JHC"},WM=({isOpen:t,onClose:e,onSave:n,removalLineData:r,custId:i,custNm:a,addrOrd:o,address:c,showToast:u,addressInfo:h})=>{const[m,_]=b.useState(""),[p,g]=b.useState("10"),[C,y]=b.useState("00"),[N,v]=b.useState(""),P=Array.from({length:13},(B,G)=>{const U=(9+G).toString().padStart(2,"0");return{value:U,label:U}}),w=["00","10","20","30","40","50"].map(B=>({value:B,label:B}));b.useEffect(()=>{if(t){const B=new Date,G=B.getFullYear(),U=B.getMonth(),I=new Date(G,U+1,0).getDate(),A=B.getDate()>I-7;let Y;A?Y=new Date(G,U+2,0):Y=new Date(G,U+1,0);const se=Y.getFullYear(),X=String(Y.getMonth()+1).padStart(2,"0"),z=String(Y.getDate()).padStart(2,"0");_(`${se}-${X}-${z}`),g("10"),y("00"),v("")}},[t]);const M=()=>{if(!m){u&&u(" ","warning");return}const B=new Date,G=m.replace(/-/g,"")+p+C,U=B.getFullYear().toString()+String(B.getMonth()+1).padStart(2,"0")+String(B.getDate()).padStart(2,"0")+String(B.getHours()).padStart(2,"0")+String(B.getMinutes()).padStart(2,"0");if(Number(G)<Number(U)){u&&u("   ","warning");return}const I=localStorage.getItem("userInfo"),E=I?JSON.parse(I):{},A=E.userId||"A20130708",Y=E.crrId||"01",se=r!=null&&r.REMOVE_STAT&&D6[r.REMOVE_STAT]||"",X={CUST_ID:i,RCPT_ID:"",WRK_DTL_TCD:"0380",WRK_RCPT_CL:"JH",WRK_RCPT_CL_DTL:se,WRK_HOPE_DTTM:G,HOPE_DTTM:G,MEMO:N,EMRG_YN:"N",HOLY_YN:"N",CRR_ID:Y,WRKR_ID:A,REG_UID:A,REMOVE_LINE_TP:(r==null?void 0:r.REMOVE_LINE_TP)||"",REMOVE_GB:(r==null?void 0:r.REMOVE_GB)||"",REMOVE_STAT:(r==null?void 0:r.REMOVE_STAT)||"",POST_ID:(h==null?void 0:h.POST_ID)||"",BLD_ID:(h==null?void 0:h.BLD_ID)||"",BLD_CL:(h==null?void 0:h.BLD_CL)||"",BLD_NM:(h==null?void 0:h.BLD_NM)||"",BUN_CL:(h==null?void 0:h.BUN_CL)||"",BUN_NO:(h==null?void 0:h.BUN_NO)||"",HO_NM:(h==null?void 0:h.HO_NM)||"",APT_DONG_NO:(h==null?void 0:h.APT_DONG_NO)||"",APT_HO_CNT:(h==null?void 0:h.APT_HO_CNT)||"",ADDR:(h==null?void 0:h.ADDR)||c||"",ADDR_DTL:(h==null?void 0:h.ADDR_DTL)||""};n(X)},k=B=>({5:"",6:"21",7:""})[B]||B;return t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-[90%] max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-purple-600 text-white px-3 sm:px-4 py-2.5 sm:py-3 flex items-center justify-between sticky top-0",children:[s.jsx("h2",{className:"text-sm sm:text-lg font-bold",children:" AS"}),s.jsx("button",{onClick:e,className:"p-1 hover:bg-purple-700 rounded-full transition-colors",children:s.jsx(Mi,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-2.5 sm:p-3 space-y-1.5 sm:space-y-2",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20",children:""}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[i," / ",a]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium truncate",children:c})]})]}),(r==null?void 0:r.REMOVE_STAT)&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("span",{className:"text-sm text-yellow-700 font-medium",children:[" : ",k(r.REMOVE_STAT)]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"AS"}),s.jsx("input",{type:"text",value:"(AS)",readOnly:!0,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-gray-100 border border-gray-300 rounded-lg text-xs sm:text-sm text-gray-600"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"AS()"}),s.jsx("input",{type:"text",value:"CS()",readOnly:!0,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-gray-100 border border-gray-300 rounded-lg text-xs sm:text-sm text-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"AS()"}),s.jsx("input",{type:"text",value:k((r==null?void 0:r.REMOVE_STAT)||""),readOnly:!0,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-gray-100 border border-gray-300 rounded-lg text-xs sm:text-sm text-gray-600"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(rm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"date",value:m,onChange:B=>_(B.target.value),min:new Date().toISOString().split("T")[0],className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_M,{className:"w-4 h-4 text-gray-400"}),s.jsx("select",{value:p,onChange:B=>g(B.target.value),className:"px-2 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500",children:P.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))}),s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("select",{value:C,onChange:B=>y(B.target.value),className:"px-2 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500",children:w.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:""}),s.jsx("textarea",{value:N,onChange:B=>v(B.target.value),placeholder:"  ...",rows:3,maxLength:512,className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 border border-gray-300 rounded-lg text-xs sm:text-sm resize-none focus:ring-2 focus:ring-purple-500"})]})]}),s.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 border-t border-gray-200 sticky bottom-0",children:s.jsx("button",{onClick:M,className:"w-full py-2 sm:py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",children:""})})]})]}):null},FM=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1,certifyMode:o=!1})=>{var Ne,ye,Ue,ue,Oe,Ze,Le,vt;const c=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[u,h]=b.useState(!1),[m,_]=b.useState(""),[p,g]=b.useState(!1),{equipmentData:C,filteringData:y,removalLineData:N,setRemovalLineData:v}=ta(),{certifyRegconfInfo:P}=Za(),w=t.id||"",M=xa(w),k={...C||i||y||{},installedEquipments:M.installedEquipments.length>0?M.installedEquipments:(C==null?void 0:C.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:M.removeEquipments.length>0?M.removeEquipments:(C==null?void 0:C.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(M.removalStatus).length>0?M.removalStatus:(C==null?void 0:C.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:B,isPending:G}=jd(),U=()=>`work_complete_draft_${t.id}`,[I,E]=b.useState(""),[A,Y]=b.useState(""),[se,X]=b.useState(!1),[z,$]=b.useState(""),[F,L]=b.useState(""),[re,fe]=b.useState(void 0),T=N,j=v,[K,J]=b.useState(!1),[q,V]=b.useState(!1),[ce,me]=b.useState(null),[Ce,ge]=b.useState(!1),[Ge,te]=b.useState(""),[he,de]=b.useState(!1),[Q,ee]=b.useState(!1),[Z,le]=b.useState(!1),[xe,be]=b.useState(!1),[ne,ie]=b.useState(!1),[pe,ze]=b.useState([]),[xt,st]=b.useState([]),[St,ot]=b.useState(()=>{const je=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(je&&je.length>=8)return`${je.slice(0,4)}-${je.slice(4,6)}-${je.slice(6,8)}`;const ut=new Date;return ut.getFullYear()+"-"+String(ut.getMonth()+1).padStart(2,"0")+"-"+String(ut.getDate()).padStart(2,"0")});t.SO_ID;const Be=t.VOIP_CTX||"",lt=t.WRK_STAT_CD||"";t.KPI_PROD_GRP_CD;const pt=m==="0"||m==="1"||m==="4",mt=c||p||pt||Be?!1:lt==="1"||lt==="2",Ye=c||p||pt?!1:lt==="1"||lt==="2"||lt==="7";b.useEffect(()=>{(async()=>{var ut;if(!(!t.id||c)){g(!0);try{console.log("[CompleteTerminate] OST  :",t.id);const gt=await S1({WRK_ID:t.id,RCPT_ID:t.RCPT_ID,CUST_ID:(ut=t.customer)==null?void 0:ut.id});if(gt){const jt=gt.OST_WORKABLE_STAT||"";console.log("[CompleteTerminate] OST  :",jt),_(jt),(jt==="0"||jt==="1"||jt==="4")&&(r==null||r("    .","warning",!0))}}catch(gt){console.error("[CompleteTerminate] OST   :",gt)}finally{g(!1)}}})()},[t.id,t.RCPT_ID,(Ne=t.customer)==null?void 0:Ne.id,c]),b.useEffect(()=>{(async()=>{try{console.log("[WorkCompleteTerminate]    ");const ut=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});ut&&(console.log("[WorkCompleteTerminate] API  :",ut),console.log("[WorkCompleteTerminate] :",{NET_CL:ut.NET_CL,NET_CL_NM:ut.NET_CL_NM}),console.log("[WorkCompleteTerminate] :",{INSTL_TP:ut.INSTL_TP,WRNG_TP:ut.WRNG_TP}),console.log("[WorkCompleteTerminate] /:",{CUST_REL:ut.CUST_REL,WRK_PROC_CT:ut.WRK_PROC_CT}),console.log("[WorkCompleteTerminate] isWorkCompleted:",c),c&&(console.log("[WorkCompleteTerminate]   -   "),E(ut.CUST_REL||""),Y((ut.WRK_PROC_CT||"").replace(/\\n/g,`
`)),ut.WRKR_CMPL_DT&&ut.WRKR_CMPL_DT.length>=8&&ot(`${ut.WRKR_CMPL_DT.slice(0,4)}-${ut.WRKR_CMPL_DT.slice(4,6)}-${ut.WRKR_CMPL_DT.slice(6,8)}`)),$(ut.NET_CL||""),L(ut.NET_CL_NM||""),fe(gt=>gt||{NET_CL:ut.NET_CL||"",NET_CL_NM:ut.NET_CL_NM||"",WRNG_TP:ut.WRNG_TP||"",INSTL_TP:ut.INSTL_TP||"",CB_WRNG_TP:ut.CB_WRNG_TP||"",CB_INSTL_TP:ut.CB_INSTL_TP||"",INOUT_LINE_TP:ut.INOUT_LINE_TP||"",INOUT_LEN:ut.INOUT_LEN||"",DVDR_YN:ut.DVDR_YN||"",BFR_LINE_YN:ut.BFR_LINE_YN||"",CUT_YN:ut.CUT_YN||"",TERM_NO:ut.TERM_NO||"",RCV_STS:ut.RCV_STS||"",SUBTAP_ID:ut.SUBTAP_ID||"",PORT_NUM:ut.PORT_NUM||"",EXTN_TP:ut.EXTN_TP||"",TAB_LBL:ut.TAB_LBL||"",CVT_LBL:ut.CVT_LBL||"",STB_LBL:ut.STB_LBL||""}))}catch(ut){console.error("[WorkCompleteTerminate]    :",ut)}if(!c){const ut=localStorage.getItem(U());if(ut)try{const gt=JSON.parse(ut);E(gt.custRel||""),Y(gt.memo||""),gt.installInfoData&&($(gt.networkType||""),L(gt.networkTypeName||""),fe(gt.installInfoData))}catch(gt){console.error("[WorkCompleteTerminate] localStorage  :",gt)}}h(!0)})()},[t.id,c]),b.useEffect(()=>{if(!u||c)return;const je={custRel:I,memo:A,networkType:z,networkTypeName:F,installInfoData:re,savedAt:new Date().toISOString()};localStorage.setItem(U(),JSON.stringify(je))},[I,A,z,F,re,u,c]),b.useEffect(()=>{(async()=>{try{const ut=await No(["CMCU005"]);ut.CMCU005&&st(ut.CMCU005.map(gt=>({value:gt.COMMON_CD,label:gt.COMMON_CD_NM})))}catch(ut){console.error("[WorkCompleteTerminate]   :",ut)}})()},[]),b.useEffect(()=>{(async()=>{try{const ut=await Uc(),gt=(ut==null?void 0:ut.output)||ut||[];ze(gt);const jt=t.PROD_CD||t.PROD_CD||"",Ve=gt.some(Vt=>Vt.PROD_CD===jt);ie(Ve),console.log("[CompleteTerminate] LGHV :",{currentProdCd:jt,isLghv:Ve,prodListCount:gt.length})}catch(ut){console.error("[CompleteTerminate] LGHV   :",ut)}})()},[t.PROD_CD]),b.useEffect(()=>{console.log("[CompleteTerminate] OST  :",{OST_WORKABLE_STAT:m,isOstBlocked:pt,isOstChecking:p,isWorkCompleted:c,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,:m==="0"?"":m==="1"?"":m==="2"?"":m==="3"?"":m==="4"?"/":m==="X"?"OST":m===""?"  ":""})},[m,pt,p,c]);const at=()=>{const je=[];I||je.push("  ."),re!=null&&re.NET_CL||je.push(" . ( )"),St||je.push(" ."),t.WRK_CD==="02"&&lt!=="7"&&!xe&&je.push("  .");const ut=t.PROD_GRP||"",gt=(k==null?void 0:k.removedEquipments)||[];return ut!=="V"&&gt.length<1&&je.push("  .   ."),Mt()&&!T&&je.push("   ."),je},Fe=je=>{fe(je),je.NET_CL&&$(je.NET_CL),je.NET_CL_NM&&L(je.NET_CL_NM),r==null||r("  .","success")},tt=()=>{ct(!0)},ct=(je=!1)=>{if(G)return;if(pt){r==null||r("    .","warning");return}if(!je){const Ve=t.KPI_PROD_GRP_CD||"";if(Ve==="C"||Ve==="D"){r==null||r("    .","error");return}}const ut=at();if(ut.length>0){if(ut.forEach(Ve=>r==null?void 0:r(Ve,"error")),ut.some(Ve=>Ve.includes(""))){const Ve=document.getElementById("removal-line-section");Ve&&(Ve.scrollIntoView({behavior:"smooth",block:"center"}),Ve.classList.add("ring-2","ring-red-500","ring-offset-2"),setTimeout(()=>{Ve.classList.remove("ring-2","ring-red-500","ring-offset-2")},2e3))}return}const gt=t.TERM_HOPE_DT||t.HOPE_DT||"";if(gt&&St){const Ve=gt.replace(/-/g,"");St.replace(/-/g,"")<Ve&&(r==null||r("  .","warning"))}te(je?" ?":" ?"),de(je),ge(!0)},Mt=()=>{const je=t.KPI_PROD_GRP_CD||"",ut=t.VOIP_CTX||"";return["C","D","I"].includes(je)&&ut!=="T"&&ut!=="R"},dt=je=>{console.log("[WorkCompleteTerminate]   () :",je),j(je),r==null||r("  .   .","info")},Je=je=>{console.log("[WorkCompleteTerminate]   - AS  :",je),j(je),J(!0)},De=je=>{console.log("[WorkCompleteTerminate] AS  :",je),me(je),J(!1),r==null||r("  AS  .","info")},$e=async()=>{var Ss,Ae,ft,rt,Wt,_t,qt;const je=St.replace(/-/g,""),ut=localStorage.getItem("userInfo"),gt=ut?JSON.parse(ut):{},jt=gt.userId||"A20130708";let Ve="N";if(o||u0(t.OP_LNKD_CD)){const Ot=await x6(t,jt);if(Ve=Ot.certifyTg,!Ot.success){r==null||r(`  : ${Ot.error}`,"error");return}}if(T&&T.REMOVE_GB==="4")try{console.log("[WorkCompleteTerminate]   API :",T);const Ot=await Wp({WRK_ID:t.id||t.WRK_ID||"",REMOVE_LINE_TP:T.REMOVE_LINE_TP||"",REMOVE_GB:T.REMOVE_GB||"4",REMOVE_STAT:T.REMOVE_STAT||"",REG_UID:jt});if(Ot.code!=="SUCCESS"&&Ot.code!=="OK"){r==null||r(Ot.message||"   .","error",!0);return}console.log("[WorkCompleteTerminate]    ")}catch(Ot){r==null||r(Ot.message||"     .","error",!0);return}const ke=(k==null?void 0:k.removedEquipments)||[],ss=!!t.ISP_PROD_CD;if(Ve!=="Y"&&(ke.length>0||ss))try{let Ot="SMR05",_e="";if(ne){Ot="STB_DEL";const Ke=ke.find(Et=>{var Rt,He;return(Et.ITEM_MID_CD||Et.itemMidCd||((Rt=Et.actualEquipment)==null?void 0:Rt.ITEM_MID_CD)||((He=Et.actualEquipment)==null?void 0:He.itemMidCd))==="04"});Ke&&(_e=Ke.EQT_NO||Ke.id||((Ss=Ke.actualEquipment)==null?void 0:Ss.EQT_NO)||((Ae=Ke.actualEquipment)==null?void 0:Ae.id)||"")}const Se=ke[0],Ie=Se?Se.actualEquipment||Se:{},Te=Ie.PROD_CMPS_ID||(Se==null?void 0:Se.PROD_CMPS_ID)||Ie.EQT_PROD_CMPS_ID||(Se==null?void 0:Se.EQT_PROD_CMPS_ID)||"",Re=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"";console.log("[CompleteTerminate]   :",{msgId:Ot,isLghvStb:ne,etc1:_e,eqtProdCmpsId:Te,voipJoinCtrtId:Re});const Ct=await _a({MSG_ID:Ot,CUST_ID:((ft=t.customer)==null?void 0:ft.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:Te,PROD_CD:"",WRK_ID:t.id||"",REG_UID:jt,ETC_1:_e,VOIP_JOIN_CTRT_ID:Re,WTIME:"3"});if(Ct.code!=="SUCCESS"&&Ct.code!=="OK"){if((t.PROD_GRP||"")==="V"&&((rt=Ct.message)==null?void 0:rt.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteTerminate] VoIP    -  :",Ct.message),r==null||r("   .","error",!0);return}if((t.MSO_OUT_YN||"")==="Y"){r==null||r("MSO      .  .","error",!0);return}if(!window.confirm(` .
  ?`)){console.log("[CompleteTerminate]      ");return}console.log("[CompleteTerminate]      ")}else console.log("[CompleteTerminate]    ")}catch(Ot){if(console.warn("[CompleteTerminate]     :",Ot),!window.confirm(` .
  ?`))return}const ls=(k==null?void 0:k.removalStatus)||{},ds=ke.map(Ot=>{var Re;const _e=Ot.actualEquipment||Ot,Se=Ot.contractEquipment||{},Ie=_e.id||Ot.EQT_NO||Ot.id||"",Te=ls[Ie]||ls[Ot.id]||ls[Ot.EQT_NO]||ls[_e.id]||ls[Ot.serialNumber]||ls[_e.serialNumber]||{},nt=(Ct,Ke)=>Ct==="1"||Ct==="Y"||Ke==="1"||Ke==="Y"?"1":"0";return{..._e,EQT_NO:Ie,ITEM_MID_CD:_e.ITEM_MID_CD||_e.itemMidCd||Ot.ITEM_MID_CD||Ot.itemMidCd||"",ITEM_MID_NM:_e.ITEM_MID_NM||_e.type||Ot.ITEM_MID_NM||Ot.type||"",EQT_CL_CD:_e.EQT_CL_CD||_e.eqtClCd||Ot.EQT_CL_CD||Ot.eqtClCd||"",EQT_CL_NM:_e.EQT_CL_NM||_e.model||Ot.EQT_CL_NM||Ot.model||"",EQT_SERNO:_e.EQT_SERNO||_e.serialNumber||Ot.EQT_SERNO||Ot.serialNumber||"",MAC_ADDRESS:Ot.macAddress||_e.MAC_ADDRESS||_e.macAddress||Ot.MAC_ADDRESS||"",CRR_TSK_CL:"02",RCPT_ID:t.RCPT_ID||"",WRK_ID:t.id||"",CUST_ID:Ot.CUST_ID||((Re=t.customer)==null?void 0:Re.id)||"",CTRT_ID:Ot.CTRT_ID||t.CTRT_ID||"",CRR_ID:t.CRR_ID||gt.crrId||"01",WRKR_ID:jt,REG_UID:jt,SVC_CMPS_ID:Se.SVC_CMPS_ID||Ot.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Se.BASIC_PROD_CMPS_ID||Ot.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:Ot.EQT_PROD_CMPS_ID||"",PROD_CD:Se.PROD_CD||Ot.PROD_CD||"",SVC_CD:Se.SVC_CD||Ot.SVC_CD||"",MST_SO_ID:Ot.MST_SO_ID||t.SO_ID||"",SO_ID:Ot.SO_ID||t.SO_ID||"",OLD_LENT_YN:Ot.OLD_LENT_YN||"N",LENT_YN:Ot.lentYn||Ot.LENT_YN||Se.LENT_YN||"10",...(console.log("[CompleteTerminate]  :",{eqtNo:Ie,"eq.EQT_LOSS_YN":Ot.EQT_LOSS_YN,"status.EQT_LOSS_YN":Te.EQT_LOSS_YN,"status ":Te,"removalStatus ":Object.keys(ls)}),{}),EQT_LOSS_YN:nt(Ot.EQT_LOSS_YN,Te.EQT_LOSS_YN),PART_LOSS_BRK_YN:nt(Ot.PART_LOSS_BRK_YN,Te.PART_LOSS_BRK_YN),EQT_BRK_YN:nt(Ot.EQT_BRK_YN,Te.EQT_BRK_YN),EQT_CABL_LOSS_YN:nt(Ot.EQT_CABL_LOSS_YN,Te.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:nt(Ot.EQT_CRDL_LOSS_YN,Te.EQT_CRDL_LOSS_YN),REUSE_YN:Ot.REUSE_YN||Te.REUSE_YN||"1"}}),vs={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Wt=t.customer)==null?void 0:Wt.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||gt.crrId||"01",WRKR_ID:jt,WRKR_CMPL_DT:je,MEMO:A||" ",STTL_YN:"Y",REG_UID:jt,CUST_REL:I,CNFM_CUST_NM:(_t=t.customer)==null?void 0:_t.name,CNFM_CUST_TELNO:((qt=t.customer)==null?void 0:qt.contactNumber)||"",WRK_ACT_CL:"20",NET_CL:(re==null?void 0:re.NET_CL)||"",WRNG_TP:(re==null?void 0:re.WRNG_TP)||"",INSTL_TP:(re==null?void 0:re.INSTL_TP)||"",EQT_RMV_FLAG:he?"Y":""},equipmentList:[],removeEquipmentList:ds,spendItemList:(k==null?void 0:k.spendItems)||[],agreementList:(k==null?void 0:k.agreements)||[],poleList:(k==null?void 0:k.poleResults)||[]};console.log("[CompleteTerminate]   :"),console.log("  - workInfo:",vs.workInfo),console.log("  -  modNetInfo   :"),console.log("    - NET_CL:",vs.workInfo.NET_CL,"( modNetInfo )"),console.log("    - INSTL_TP:",vs.workInfo.INSTL_TP),console.log("    - WRNG_TP:",vs.workInfo.WRNG_TP),console.log("    - WRK_ID:",vs.workInfo.WRK_ID),console.log("    - CTRT_ID:",vs.workInfo.CTRT_ID),console.log("    - installInfoData :",re),console.log("  - removeEquipmentList :",ds.length),ds.length>0&&(console.log("  - removeEquipmentList[0] :",ds[0]),console.log("  -   [0]:",ke[0])),B(vs,{onSuccess:async Ot=>{var _e;if(Ot.code==="SUCCESS"||Ot.code==="OK"){if(localStorage.removeItem(U()),t.WRK_STAT_CD="3",ce)try{const Se=await Wp({WRK_ID:t.id||t.WRK_ID||"",REMOVE_LINE_TP:ce.REMOVE_LINE_TP||"",REMOVE_GB:ce.REMOVE_GB||"1",REMOVE_STAT:ce.REMOVE_STAT||"",REG_UID:ce.REG_UID||jt});Se.code!=="SUCCESS"&&Se.code!=="OK"&&console.error("[WorkCompleteTerminate]    :",Se.message);const Ie=await TM({CUST_ID:ce.CUST_ID||((_e=t.customer)==null?void 0:_e.id)||"",RCPT_ID:ce.RCPT_ID||"",WRK_DTL_TCD:ce.WRK_DTL_TCD||"0380",WRK_RCPT_CL:ce.WRK_RCPT_CL||"JH",WRK_RCPT_CL_DTL:ce.WRK_RCPT_CL_DTL||"",WRK_HOPE_DTTM:ce.WRK_HOPE_DTTM||"",MEMO:ce.MEMO||"",EMRG_YN:ce.EMRG_YN||"N",HOLY_YN:ce.HOLY_YN||"N",CRR_ID:ce.CRR_ID||"",WRKR_ID:ce.WRKR_ID||"",REG_UID:ce.REG_UID||jt,POST_ID:ce.POST_ID||"",BLD_ID:ce.BLD_ID||"",BLD_CL:ce.BLD_CL||"",BLD_NM:ce.BLD_NM||"",BUN_CL:ce.BUN_CL||"",BUN_NO:ce.BUN_NO||"",HO_NM:ce.HO_NM||"",APT_DONG_NO:ce.APT_DONG_NO||"",APT_HO_CNT:ce.APT_HO_CNT||"",ADDR:ce.ADDR||"",ADDR_DTL:ce.ADDR_DTL||""});Ie.code==="SUCCESS"||Ie.code==="OK"?console.log("[WorkCompleteTerminate] AS "):console.error("[WorkCompleteTerminate] AS :",Ie.message)}catch(Se){console.error("[WorkCompleteTerminate] AS  :",Se)}r==null||r("  .","success"),n()}else r==null||r(Ot.message||"   .","error",!0)},onError:Ot=>{r==null||r(Ot.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[Z&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",onClick:je=>je.stopPropagation(),onTouchStart:je=>je.stopPropagation(),children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-4 shadow-xl",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-gray-700 font-medium",children:"  ..."}),s.jsx("p",{className:"text-gray-500 text-sm",children:" "})]})}),G&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("input",{type:"text",value:"",readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:F||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>X(!0),className:`min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${c?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:c?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:I,onValueChange:E,options:xt,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:A,onChange:je=>Y(je.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:c,disabled:c}),!c&&s.jsxs("p",{className:`text-xs text-right mt-1 ${A.length>=500?"text-red-500":"text-gray-400"}`,children:[A.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:St,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsx(iN,{custId:((ye=t.customer)==null?void 0:ye.id)||"",rcptId:t.RCPT_ID||"",ctrtId:t.CTRT_ID||"",soId:t.SO_ID||"",termHopeDt:t.TERM_HOPE_DT||t.HOPE_DT||"",wrkCd:t.WRK_CD||"02",wrkStatCd:lt,showToast:r,onHotbillConfirmChange:be,onSimulatingChange:le,readOnly:c}),Mt()&&s.jsx(GM,{onComplete:dt,onAssignAS:Je,showToast:r,disabled:c,savedData:T,onReset:()=>j(null)}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!c&&s.jsxs("button",{onClick:()=>tt(),disabled:G||!mt,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${mt?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{children:""})]}),!c&&s.jsx("button",{onClick:()=>ct(!1),disabled:G||!Ye,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${Ye?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:G?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{onClick:()=>ee(!0),className:"flex-1 btn btn-lg flex items-center justify-center gap-2 bg-gray-500 hover:bg-gray-600 text-white",children:[s.jsx(Dd,{className:"w-5 h-5"}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:se,onClose:()=>X(!1),onSave:Fe,workId:t.id,initialData:re,workType:t.WRK_CD,customerId:(Ue=t.customer)==null?void 0:Ue.id,customerName:(ue=t.customer)==null?void 0:ue.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||t.addrOrd||"",kpiProdGrpCd:t.KPI_PROD_GRP_CD||"",prodChgGb:t.PROD_CHG_GB||"",chgKpiProdGrpCd:t.CHG_KPI_PROD_GRP_CD||"",prodGrp:t.PROD_GRP||"",wrkDtlTcd:t.WRK_DTL_TCD||"",readOnly:c}),s.jsx(WM,{isOpen:K,onClose:()=>J(!1),onSave:De,removalLineData:T,custId:((Oe=t.customer)==null?void 0:Oe.id)||"",custNm:((Ze=t.customer)==null?void 0:Ze.name)||"",addrOrd:((Le=t.customer)==null?void 0:Le.ADDR_ORD)||"",address:t.address||"",showToast:r,addressInfo:{POST_ID:t.POST_ID||"",BLD_ID:t.BLD_ID||"",BLD_CL:t.BLD_CL||"",BLD_NM:t.BLD_NM||"",BUN_CL:t.BUN_CL||"",BUN_NO:t.BUN_NO||"",HO_NM:t.HO_NM||"",APT_DONG_NO:t.APT_DONG_NO||"",APT_HO_CNT:t.APT_HO_CNT||"",ADDR:t.ADDR_TOTAL||t.ADDR||t.address||"",ADDR_DTL:t.ADDR_DTL||""}}),s.jsx(Ba,{isOpen:Ce,onClose:()=>ge(!1),onConfirm:$e,title:he?" ":" ",message:Ge,type:"confirm",confirmText:he?"":"",cancelText:"",children:s.jsx(Id,{workType:"02",workTypeName:he?"":"",custRel:I,custRelName:(vt=xt.find(je=>je.value===I))==null?void 0:vt.label,networkType:z,networkTypeName:F,installType:re==null?void 0:re.INSTL_TP,installTypeName:re==null?void 0:re.INSTL_TP_NM,removedEquipments:(k==null?void 0:k.removedEquipments)||[],memo:A})}),s.jsx(el,{isOpen:Q,onClose:()=>ee(!1),ctrtId:t.CTRT_ID,prodCmpsId:t.BASIC_PROD_CMPS_ID||t.PROD_CMPS_ID})]})},KM=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1,certifyMode:o=!1})=>{var Se,Ie,Te,nt,Re,Ct,Ke,Et,Rt;const c=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[u,h]=b.useState(!1),{equipmentData:m,filteringData:_}=ta(),{certifyRegconfInfo:p}=Za(),g=t.id||"",C=xa(g),y={...m||i||_||{},installedEquipments:C.installedEquipments.length>0?C.installedEquipments:(m==null?void 0:m.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:C.markedForRemoval.length>0?C.markedForRemoval:(m==null?void 0:m.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(C.removalStatus).length>0?C.removalStatus:(m==null?void 0:m.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:N,isPending:v}=jd(),P=()=>`work_complete_draft_${t.id}`,[w,M]=b.useState(""),[k,B]=b.useState(""),[G,U]=b.useState(""),[I,E]=b.useState(""),[A,Y]=b.useState(""),[se,X]=b.useState(""),[z,$]=b.useState(""),[F,L]=b.useState(""),[re,fe]=b.useState(!1),[T,j]=b.useState(""),[K,J]=b.useState([]),[q,V]=b.useState(!1),[ce,me]=b.useState([]),[Ce,ge]=b.useState(""),[Ge,te]=b.useState(""),[he,de]=b.useState(!1),[Q,ee]=b.useState(""),[Z,le]=b.useState(""),[xe,be]=b.useState(void 0),[ne,ie]=b.useState(!1),[pe,ze]=b.useState(!1),[xt,st]=b.useState(""),[St,ot]=b.useState(""),[Be,lt]=b.useState(""),[pt,mt]=b.useState(!1),[Ye,at]=b.useState(!1),[Fe,tt]=b.useState([]),[ct,Mt]=b.useState(!1),[dt,Je]=b.useState(null),[De,$e]=b.useState([]),[Ne,ye]=b.useState([]),[Ue,ue]=b.useState([]),[Oe,Ze]=b.useState([]),[Le,vt]=b.useState([]),[je,ut]=b.useState([]),[gt,jt]=b.useState([]),[Ve,Vt]=b.useState([]),[ke,ss]=b.useState([]),[ls,ds]=b.useState([]),[vs,Ss]=b.useState([]),[Ae,ft]=b.useState(()=>{const He=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(He&&He.length>=8)return`${He.slice(0,4)}-${He.slice(4,6)}-${He.slice(6,8)}`;const ht=new Date;return ht.getFullYear()+"-"+String(ht.getMonth()+1).padStart(2,"0")+"-"+String(ht.getDate()).padStart(2,"0")});b.useEffect(()=>{if(c){(async()=>{try{const Pt=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(Pt){M(Pt.CUST_REL||""),B((Pt.WRK_PROC_CT||"").replace(/\\n/g,`
`)),U(Pt.KPI_PROD_GRP||""),E(Pt.OBS_RCPT_CD||""),Y(Pt.OBS_RCPT_DTL_CD||""),X(Pt.PSN_USE_CORP||""),$(Pt.VOIP_USE_CORP||""),L(Pt.DTV_USE_CORP||""),ee(Pt.NET_CL||""),le(Pt.NET_CL_NM||""),st(Pt.INSTL_LOC||"");const Bt=Pt.UP_CTRL_CL||(y==null?void 0:y.upCtrlCl)||"";ge(Bt),te(Pt.TV_TYPE||""),be({NET_CL:Pt.NET_CL||"",NET_CL_NM:Pt.NET_CL_NM||"",WRNG_TP:Pt.WRNG_TP||"",INSTL_TP:Pt.INSTL_TP||"",CB_WRNG_TP:Pt.CB_WRNG_TP||"",CB_INSTL_TP:Pt.CB_INSTL_TP||"",INOUT_LINE_TP:Pt.INOUT_LINE_TP||"",INOUT_LEN:Pt.INOUT_LEN||"",DVDR_YN:Pt.DVDR_YN||"",BFR_LINE_YN:Pt.BFR_LINE_YN||"",CUT_YN:Pt.CUT_YN||"",TERM_NO:Pt.TERM_NO||"",RCV_STS:Pt.RCV_STS||"",SUBTAP_ID:Pt.SUBTAP_ID||"",PORT_NUM:Pt.PORT_NUM||"",EXTN_TP:Pt.EXTN_TP||"",TAB_LBL:Pt.TAB_LBL||"",CVT_LBL:Pt.CVT_LBL||"",STB_LBL:Pt.STB_LBL||""}),Pt.VOIP_JOIN_CTRT_ID&&j(Pt.VOIP_JOIN_CTRT_ID),Pt.WRKR_CMPL_DT&&Pt.WRKR_CMPL_DT.length>=8&&ft(`${Pt.WRKR_CMPL_DT.slice(0,4)}-${Pt.WRKR_CMPL_DT.slice(4,6)}-${Pt.WRKR_CMPL_DT.slice(6,8)}`)}}catch(Pt){console.error("[WorkCompleteAS]     :",Pt)}h(!0)})();return}const He=localStorage.getItem(P());if(He)try{const ht=JSON.parse(He);M(ht.custRel||""),B(ht.memo||""),U(ht.kpiProdGrp||""),E(ht.obsRcptCd||""),Y(ht.obsRcptDtlCd||""),X(ht.internetUse||""),$(ht.voipUse||""),L(ht.dtvUse||""),ee(ht.networkType||""),le(ht.networkTypeName||""),st(ht.installLocationText||""),be(ht.installInfoData),ht.upCtrlCl&&ge(ht.upCtrlCl),ht.tvType&&te(ht.tvType),ht.voipJoinCtrtId&&j(ht.voipJoinCtrtId)}catch(ht){console.error("[WorkCompleteAS] localStorage  :",ht)}h(!0)},[t.id,c]),b.useEffect(()=>{if(!u||c)return;const He={custRel:w,memo:k,kpiProdGrp:G,obsRcptCd:I,obsRcptDtlCd:A,internetUse:se,voipUse:z,dtvUse:F,networkType:Q,networkTypeName:Z,installLocationText:xt,installInfoData:xe,upCtrlCl:Ce,tvType:Ge,voipJoinCtrtId:T,savedAt:new Date().toISOString()};localStorage.setItem(P(),JSON.stringify(He))},[w,k,G,I,A,se,z,F,Q,Z,xt,xe,Ce,Ge,T,u,c]),b.useEffect(()=>{(async()=>{try{const ht=await No(["CMCU005","CMCU057","CMCU110","CMCU148","CMCT015"]);ht.CMCU005&&$e(ht.CMCU005.map(ts=>({value:ts.COMMON_CD,label:ts.COMMON_CD_NM}))),ht.CMCU057&&ue(ht.CMCU057.map(ts=>({value:ts.COMMON_CD,label:ts.COMMON_CD_NM}))),ht.CMCU110&&Ze(ht.CMCU110.map(ts=>({value:ts.COMMON_CD,label:ts.COMMON_CD_NM}))),ht.CMCU148&&vt(ht.CMCU148.map(ts=>({value:ts.COMMON_CD,label:ts.COMMON_CD_NM}))),ht.CMCT015&&ye(ht.CMCT015.map(ts=>({value:ts.COMMON_CD,label:ts.COMMON_CD_NM})));const Pt=await No(["PP00933","CMOB000","CMOB001"]),Bt=Pt.PP00933||[],Yt=Pt.CMOB000||[],Xt=Pt.CMOB001||[];ut(Bt),jt(Yt),Vt(Xt),ss(Bt.map(ts=>({value:ts.COMMON_CD||"",label:ts.COMMON_CD_NM||""})))}catch(ht){console.error("[WorkCompleteAS]   :",ht)}})()},[]),b.useEffect(()=>{(async()=>{try{const ht=await Uc(),Pt=(ht==null?void 0:ht.output)||ht||[];tt(Pt);const Bt=t.PROD_CD||t.PROD_CD||"",Yt=Pt.some(Xt=>Xt.PROD_CD===Bt);at(Yt)}catch(ht){console.error("[CompleteAS] LGHV   :",ht)}})()},[t.PROD_CD]),b.useEffect(()=>{y!=null&&y.upCtrlCl&&!Ce?ge(y.upCtrlCl):!Ce&&u&&!c&&ge("01")},[y==null?void 0:y.upCtrlCl,u,c,Ce]),b.useEffect(()=>{if(je.length===0)return;const He=t.KPI_PROD_GRP_CD||(y==null?void 0:y.kpiProdGrpCd)||"",ht=t.PROD_GRP||(y==null?void 0:y.prodGrp)||"";let Pt=je;He&&(Pt=je.filter(Yt=>{const Xt=Yt.COMMON_CD||"";return Xt===He||ht==="C"&&Xt==="I"}));const Bt=[{value:"",label:""},...Pt.map(Yt=>({value:Yt.COMMON_CD||"",label:Yt.COMMON_CD_NM||""}))];ss(Bt),He&&!G&&!c&&U(He)},[je,t,y==null?void 0:y.kpiProdGrpCd,y==null?void 0:y.prodGrp,c]),b.useEffect(()=>{if(gt.length===0)return;const He=t.WRK_STAT_CD||"",ht=t.WRK_DTL_TCD||"",Pt=t.asReasonCode||t.WRK_RCPT_CL||"",Bt=t.asDetailCode||t.WRK_RCPT_CL_DTL||"";if(Ss([{value:"",label:""}]),!G){ds([{value:"",label:"  "}]);return}const Yt=Bt&&gt.some(Cs=>Cs.REF_CODE12===Bt),Xt=Pt&&gt.some(Cs=>Cs.REF_CODE12===Pt);let ts;Yt?ts="clDtl":Xt?ts="cl":ts="empty",console.log("[CompleteAS]   :",{kpiProdGrp:G,wrkStatCd:He,wrkDtlTcd:ht,wrkRcptCl:Pt,wrkRcptClDtl:Bt,hasRefCode12ClDtl:Yt,hasRefCode12Cl:Xt,refCode12Filter:ts,totalCodes:gt.length});const Ut=gt.filter(Cs=>{const Bs=Cs.COMMON_CD||"",_s=Cs.REF_CODE2||"",Es=Cs.REF_CODE12||"",js=Cs.REF_CODE16||"";if(!_s.includes(G)||He==="2"&&Bs==="KA")return!1;if(ht==="0350"){if(js!=="A"&&js!=="Y")return!1}else if(js&&js!=="A")return!1;if(ts==="clDtl"){if(Es!==Bt)return!1}else if(ts==="cl"){if(Es!==Pt)return!1}else if(Es)return!1;return!0});console.log("[CompleteAS]   :",Ut.map(Cs=>({code:Cs.COMMON_CD,name:Cs.COMMON_CD_NM,REF_CODE12:Cs.REF_CODE12,REF_CODE16:Cs.REF_CODE16})));const Ms=[{value:"",label:""},...Ut.map(Cs=>({value:Cs.COMMON_CD||"",label:Cs.COMMON_CD_NM||""}))];ds(Ms),I&&!Ut.some(Cs=>Cs.COMMON_CD===I)&&(E(""),Y(""))},[G,gt,t.WRK_STAT_CD,t.WRK_DTL_TCD,t.asReasonCode,t.asDetailCode]),b.useEffect(()=>{if(Ve.length===0)return;const He=t.WRK_DTL_TCD||"",ht=t.asReasonCode||t.WRK_RCPT_CL||"",Pt=t.asDetailCode||t.WRK_RCPT_CL_DTL||"";if(!I||!G){Ss([{value:"",label:"  "}]);return}const Bt=Pt&&Ve.some(Ms=>Ms.REF_CODE12===Pt),Yt=ht&&Ve.some(Ms=>Ms.REF_CODE12===ht);let Xt;Bt?Xt="clDtl":Yt?Xt="cl":Xt="empty";const ts=Ve.filter(Ms=>{const Cs=Ms.COMMON_CD||"",Bs=Ms.REF_CODE||"",_s=Ms.REF_CODE2||"",Es=Ms.REF_CODE12||"",js=Ms.REF_CODE16||"";if(!Bs.includes(I)||!_s.includes(G))return!1;if(He==="0350"){if(js!=="A"&&js!=="Y")return!1}else if(js&&js!=="A")return!1;if(Xt==="clDtl"){if(Es!==Pt)return!1}else if(Xt==="cl"){if(Es!==ht)return!1}else if(Es)return!1;return!(Pt==="JJO"&&Cs!=="OOI")}),Ut=[{value:"",label:""},...ts.map(Ms=>({value:Ms.COMMON_CD||"",label:Ms.COMMON_CD_NM||""}))];Ss(Ut),A&&!ts.some(Ms=>Ms.COMMON_CD===A)&&Y("")},[I,G,Ve,t.WRK_DTL_TCD,t.asReasonCode,t.asDetailCode]),b.useEffect(()=>{var Pt;if(c)return;const He=((Pt=t.customer)==null?void 0:Pt.id)||t.CUST_ID;if(!He)return;(async()=>{try{const Bt=await _m({CUST_ID:He});me(Bt||[])}catch{me([])}})()},[(Se=t.customer)==null?void 0:Se.id,t.CUST_ID,c]),b.useEffect(()=>{if(c||ce.length===0)return;const He=t.PROD_GRP||"",ht=t.VOIP_PROD_CD||"",Pt=t.ISP_PROD_CD||"",Bt=t.WRK_STAT_CD||"",Yt=t.ADDR_ORD||"";if(He==="V"&&!ht){const Xt=ce.filter(Ut=>{const Ms=Ut.PROD_GRP||"",Cs=Ut.CTRT_STAT||"",Bs=Ut.ADDR_ORD||Ut.addr_ord||"";return(Ms==="C"||Ms==="D"||Ms==="I")&&Cs==="20"&&(!Yt||Bs===Yt)});Xt.length<1&&Bt==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const ts=[{value:"",label:""},...Xt.map(Ut=>({value:Ut.CTRT_ID||"",label:`[${Ut.CTRT_ID}] ${Ut.BASIC_PROD_CD_NM||Ut.PROD_NM||""}`}))];J(ts),V(!0);return}if(He==="I"&&Pt){const Xt=ce.filter(Ut=>{const Ms=Ut.PROD_GRP||"",Cs=Ut.CTRT_STAT||"",Bs=Ut.ADDR_ORD||Ut.addr_ord||"",_s=Ut.ISP_JOIN_ID||"",Es=Ut.KPI_PROD_GRP_CD||"";return(Ms==="D"||Ms==="C")&&Cs==="20"&&!_s&&Es==="D"&&(!Yt||Bs===Yt)});Xt.length<1&&Bt==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const ts=[{value:"",label:""},...Xt.map(Ut=>({value:Ut.CTRT_ID||"",label:`[${Ut.CTRT_ID}] ${Ut.BASIC_PROD_CD_NM||Ut.PROD_NM||""}`}))];J(ts),V(!0);return}V(!1),J([])},[t.id,t.WRK_STAT_CD,c,r,ce]);const rt=()=>{const He=[];w||He.push("  ."),G||He.push(" ."),I||He.push(" ."),A||He.push(" ."),xe!=null&&xe.NET_CL||He.push(" ."),Ae||He.push(" .");const ht=t.PROD_GRP||"",Pt=t.VOIP_PROD_CD||"",Bt=t.ISP_PROD_CD||"";ht==="V"&&!Pt&&q&&(T||He.push("VOIP    .")),ht==="I"&&Bt&&q&&(T||He.push("  ISP .    ."));const Yt=(y==null?void 0:y.installedEquipments)||[],Xt=(y==null?void 0:y.removedEquipments)||[];return Yt.length>0||Xt.length>0,He},Wt=He=>{be(He),He.NET_CL&&ee(He.NET_CL),He.NET_CL_NM&&le(He.NET_CL_NM),r==null||r("  .","success")},_t=()=>{if(v)return;const He=rt();if(He.length>0){He.forEach(Pt=>r==null?void 0:r(Pt,"error"));return}(t.PROD_GRP||"")!=="V"?Mt(!0):mt(!0)},qt=He=>{Je(He),Mt(!1),mt(!0)},Ot=(He,ht=!1)=>{if(!He||He.length===0)return[];const Pt=localStorage.getItem("userInfo"),Bt=Pt?JSON.parse(Pt):{},Yt=Bt.userId||"A20130708",Xt=(y==null?void 0:y.removalStatus)||{},ts=(Ut,Ms)=>Ut==="1"||Ut==="Y"||Ms==="1"||Ms==="Y"?"1":"0";return He.map(Ut=>{var _s,Es,js,cs;const Ms=Ut.EQT_NO||Ut.id||((_s=Ut.actualEquipment)==null?void 0:_s.id)||"",Cs=Xt[Ms]||Xt[Ut.id]||Xt[Ut.EQT_NO]||Xt[(Es=Ut.actualEquipment)==null?void 0:Es.id]||Xt[Ut.serialNumber]||{},Bs=ht?{CRR_TSK_CL:t.WRK_CD||"03",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Bt.crrId||"01",WRKR_ID:Yt,EQT_LOSS_YN:ts(Ut.EQT_LOSS_YN,Cs.EQT_LOSS_YN),PART_LOSS_BRK_YN:ts(Ut.PART_LOSS_BRK_YN,Cs.PART_LOSS_BRK_YN),EQT_BRK_YN:ts(Ut.EQT_BRK_YN,Cs.EQT_BRK_YN),EQT_CABL_LOSS_YN:ts(Ut.EQT_CABL_LOSS_YN,Cs.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:ts(Ut.EQT_CRDL_LOSS_YN,Cs.EQT_CRDL_LOSS_YN)}:{};if(Ut.actualEquipment){const fs=Ut.actualEquipment,Ys=Ut.contractEquipment||{};return{...fs,EQT_NO:fs.id,EQT_SERNO:fs.serialNumber,ITEM_MID_CD:fs.itemMidCd,EQT_CL_CD:fs.eqtClCd,MAC_ADDRESS:Ut.macAddress||fs.macAddress,WRK_ID:t.id,CUST_ID:(js=t.customer)==null?void 0:js.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:Ys.id||Ys.SVC_CMPS_ID||fs.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:fs.BASIC_PROD_CMPS_ID||Ys.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:fs.EQT_PROD_CMPS_ID||Ys.id,PROD_CD:fs.PROD_CD||Ys.PROD_CD||t.PROD_CD||"",SVC_CD:fs.SVC_CD||Ys.SVC_CD||"",EQT_SALE_AMT:fs.EQT_SALE_AMT||"0",MST_SO_ID:fs.MST_SO_ID||t.SO_ID||"",SO_ID:fs.SO_ID||t.SO_ID||"",REG_UID:Yt,OLD_LENT_YN:fs.OLD_LENT_YN||"N",LENT:fs.LENT||"10",LENT_YN:fs.LENT_YN||"10",ITLLMT_PRD:fs.ITLLMT_PRD||"00",EQT_USE_STAT_CD:fs.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:fs.IF_DTL_ID||"",VOIP_CUSTOWN_EQT:fs.VOIP_CUSTOWN_EQT||"N",...Bs}}return{...Ut,EQT_NO:Ut.EQT_NO||Ut.id||"",EQT_SERNO:Ut.EQT_SERNO||Ut.serialNumber||"",ITEM_MID_CD:Ut.ITEM_MID_CD||Ut.itemMidCd||"",EQT_CL_CD:Ut.EQT_CL_CD||Ut.eqtClCd||"",MAC_ADDRESS:Ut.MAC_ADDRESS||Ut.macAddress||"",SVC_CMPS_ID:Ut.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ut.BASIC_PROD_CMPS_ID||"",PROD_CD:Ut.PROD_CD||"",SVC_CD:Ut.SVC_CD||"",WRK_ID:t.id,CUST_ID:(cs=t.customer)==null?void 0:cs.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Yt,...Bs}})},_e=async()=>{var Ys,Ls,it,Ft,bs,zt,ws;const He=Ae.replace(/-/g,""),ht=localStorage.getItem("userInfo"),Pt=ht?JSON.parse(ht):{},Bt=Pt.userId||"A20130708",Yt=o||u0(t.OP_LNKD_CD),Xt=await y_(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let ts="";if(Yt){let es=(y==null?void 0:y.prodPromoInfo)||[];if(es.length===0)try{es=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"03"})}catch(As){console.log("[CompleteAS] getProdPromotionInfo fallback :",As)}const Os=es.filter(As=>(As.PROD_CMPS_CL==="21"||As.PROD_CMPS_CL==="22")&&(As.PROD_STAT_CD==="10"||As.PROD_STAT_CD==="20")).map(As=>As.PROD_CD).filter(As=>As);ts=Os.length>0?Os.join(",")+",":"",console.log("[CompleteAS] ADD_ON :",ts)}const Ut=(y==null?void 0:y.installedEquipments)||[];if(Yt&&Ut.length>0&&!p){r==null||r("  .","error");return}if(Yt&&p)try{const es=await p_({order:t,workerId:Bt,certifyRegconfInfo:p,addOnParam:ts,reason:"AS"});if(!es.success){r==null||r(` : ${es.message}`,"error");return}}catch(es){console.error("[CompleteAS] CL-04  :",es),r==null||r(`  : ${es.message||"   "}`,"error");return}let Ms="";const Cs=(y==null?void 0:y.removedEquipments)||[],Bs=t.VOIP_CTX==="1",_s=Bs&&(t.PROD_CD||t.PROD_CD)==="PD10004499",Es=["090901","091001","091002","091005"],js=Cs.some(es=>{var As,ms;const Os=es.EQT_CL_CD||es.eqtClCd||((As=es.actualEquipment)==null?void 0:As.EQT_CL_CD)||((ms=es.actualEquipment)==null?void 0:ms.eqtClCd)||"";return!Es.includes(Os)});if(Ye)console.log("[CompleteAS] LGHV :   skip ( )");else if(!Xt&&!Bs&&Cs.length>0)try{let es="";try{const $s=(await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"TERM",WRK_CD:"03"})).find(Is=>Is.PROD_CMPS_CL==="23");$s&&(es=$s.PROD_CMPS_ID||""),console.log("[CompleteAS] EQT_PROD_CMPS_ID:",es)}catch(Ws){console.log("[CompleteAS] getProdPromotionInfo   ():",Ws)}const As=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"",ms=await _a({MSG_ID:"SMR05",CUST_ID:((Ys=t.customer)==null?void 0:Ys.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:es,PROD_CD:"",ITV_USR_ID:"",IP_CNT:"",ETC_1:"",ETC_2:"",ETC_3:"",ETC_4:"",SUB_PROD_CD:"",IF_DTL_ID:"",WRK_ID:t.id||"",REG_UID:Bt,VOIP_JOIN_CTRT_ID:As,WTIME:"3"});if((ms==null?void 0:ms.code)==="SUCCESS"||(ms==null?void 0:ms.code)==="PARTIAL")Ms=(ms==null?void 0:ms.IF_DTL_ID)||"",console.log("[CompleteAS] SMR05 SUCCESS, IF_DTL_ID:",Ms);else{const Ws=(ms==null?void 0:ms.message)||(ms==null?void 0:ms.rawResult)||"";console.error("[CompleteAS] SMR05 FAILED:",Ws),r==null||r(`   : ${Ws}`,"error");return}}catch(es){console.error("[CompleteAS] SMR05 error:",es),r==null||r("     .","error");return}if(_s&&Cs.length>0&&js)try{const Os=((y==null?void 0:y.installedEquipments)||[]).find(Ws=>{var $s,Is;return(Ws.ITEM_MID_CD||Ws.itemMidCd||(($s=Ws.actualEquipment)==null?void 0:$s.ITEM_MID_CD)||((Is=Ws.actualEquipment)==null?void 0:Is.itemMidCd))==="08"}),As=(Os==null?void 0:Os.EQT_NO)||(Os==null?void 0:Os.id)||((Ls=Os==null?void 0:Os.actualEquipment)==null?void 0:Ls.EQT_NO)||((it=Os==null?void 0:Os.actualEquipment)==null?void 0:it.id)||"";console.log("[CompleteAS] VoIP IPC (SMR65) :",{eqtNo:As});const ms=await _a({MSG_ID:"SMR65",CUST_ID:((Ft=t.customer)==null?void 0:Ft.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:As,EQT_PROD_CMPS_ID:"",PROD_CD:t.PROD_CD||t.PROD_CD||"",ITV_USR_ID:"",IP_CNT:"",ETC_1:"",ETC_2:"",ETC_3:"",ETC_4:"",SUB_PROD_CD:"",IF_DTL_ID:"",WRK_ID:t.id||"",REG_UID:Bt,WTIME:"3"});if((ms==null?void 0:ms.code)==="SUCCESS"||(ms==null?void 0:ms.code)==="PARTIAL")Ms=(ms==null?void 0:ms.IF_DTL_ID)||"",console.log("[CompleteAS] SMR65 SUCCESS, IF_DTL_ID:",Ms);else{const Ws=(ms==null?void 0:ms.message)||(ms==null?void 0:ms.rawResult)||"";console.error("[CompleteAS] SMR65 FAILED:",Ws),r==null||r(`IPC   : ${Ws}`,"error");return}}catch(es){console.error("[CompleteAS] SMR65 error:",es),r==null||r("IPC     .","error");return}const cs={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(bs=t.customer)==null?void 0:bs.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Pt.crrId||"01",WRKR_ID:Bt,WRKR_CMPL_DT:He,MEMO:k||" ",STTL_YN:"Y",REG_UID:Bt,CUST_REL:w,CNFM_CUST_NM:((zt=t.customer)==null?void 0:zt.name)||"",CNFM_CUST_TELNO:((ws=t.customer)==null?void 0:ws.contactNumber)||"",INSTL_LOC:xt||"",PSN_USE_CORP:se||"",VOIP_USE_CORP:z||"",DTV_USE_CORP:F||"",WRK_ACT_CL:"20",NET_CL:(xe==null?void 0:xe.NET_CL)||"",WRNG_TP:(xe==null?void 0:xe.WRNG_TP)||"",INSTL_TP:(xe==null?void 0:xe.INSTL_TP)||"",KPI_PROD_GRP:G,OBS_RCPT_CD:I,OBS_RCPT_DTL_CD:A,CUST_CLEAN_YN:["MMA","MMB","MMC","II5"].includes(A)?"A":"",UP_CTRL_CL:Ce.replace("[]",""),TV_TYPE:Ge||"",VOIP_JOIN_CTRT_ID:T||"",ADD_ON:ts||""},equipmentList:Ot((y==null?void 0:y.installedEquipments)||[],!1),removeEquipmentList:Ot((y==null?void 0:y.removedEquipments)||[],!0),spendItemList:(y==null?void 0:y.spendItems)||[],agreementList:(y==null?void 0:y.agreements)||[],poleList:dt?[{WRK_ID:t.id,POLE_YN:dt.POLE_YN,LAN_GB:dt.LAN_GB||"",REG_UID:Bt}]:[]},fs=async()=>{var es,Os,As,ms,Ws,$s;try{if((t.CERTIFY_TG||"")==="Y"){console.log("[CompleteAS] FTTH :  skip ( )");return}const xs=(y==null?void 0:y.installedEquipments)||[],Br=["090901","091001","091002","091005"];let Ar=!1;for(const ks of xs){const Xn=ks.EQT_CL_CD||ks.eqtClCd||((es=ks.actualEquipment)==null?void 0:es.EQT_CL_CD)||((Os=ks.actualEquipment)==null?void 0:Os.eqtClCd)||"";if(Br.includes(Xn))continue;(ks.EQT_KND||((As=ks.actualEquipment)==null?void 0:As.EQT_KND)||"WRKER")==="WRKER"&&(Ar=!0)}if(t.VOIP_CTX==="1"&&(Ar=!1),t.COLOR_RING_YN==="Y"&&(Ar=!1),!Ar){console.log("[CompleteAS]   : skip");return}const ti=t.PROD_GRP||"",Mr=t.VOIP_PROD_CD||"";let hn="SMR03";ti==="V"?hn="SMR60":Ye&&(hn="STB_CHG");let fr="",ci=t.PROD_CD||"",Vr="",sa=ti;try{const ks=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"03"}),Xn=ks.find(Gi=>Gi.PROD_CMPS_CL==="23");Xn&&(fr=Xn.PROD_CMPS_ID||"");const zr=ks.find(Gi=>Gi.PROD_CMPS_CL==="11");zr&&(ci=zr.PROD_CD||ci,sa=zr.PROD_GRP||ti);const ji=ks.filter(Gi=>Gi.BASIC_PROD_FL==="V").map(Gi=>Gi.PROD_CD);ji.length>0&&(Vr=ji.join(","))}catch(ks){console.log("[CompleteAS] getProdPromotionInfo for install signal failed:",ks)}const kr=ks=>xs.find(Xn=>{var zr,ji;return(Xn.ITEM_MID_CD||Xn.itemMidCd||((zr=Xn.actualEquipment)==null?void 0:zr.ITEM_MID_CD)||((ji=Xn.actualEquipment)==null?void 0:ji.itemMidCd))===ks}),na=ks=>{var Xn,zr;return(ks==null?void 0:ks.EQT_NO)||(ks==null?void 0:ks.id)||((Xn=ks==null?void 0:ks.actualEquipment)==null?void 0:Xn.EQT_NO)||((zr=ks==null?void 0:ks.actualEquipment)==null?void 0:zr.id)||""};let Ir="";if(Mr){const ks=kr("08");ks&&(Ir=na(ks))}else{for(const ks of["05","01","03"]){const Xn=kr(ks);if(Xn){Ir=na(Xn);break}}if(!Ir&&sa==="I"){const ks=kr("02");ks&&(Ir=na(ks))}if(!Ir){const ks=kr("08");ks&&(Ir=na(ks))}}let Ga="";if(Mr){const ks=kr("02");ks&&(Ga=na(ks))}else{const ks=kr("04");ks&&(Ga=na(ks))}const tl=na(kr("07")),Ds=sa==="C"?na(kr("02")):"",Un=na(kr("10"));let $n=t.id||"";const si=xs.find(ks=>{var Xn,zr;return(ks.EQT_CL_CD||ks.eqtClCd||((Xn=ks.actualEquipment)==null?void 0:Xn.EQT_CL_CD)||((zr=ks.actualEquipment)==null?void 0:zr.eqtClCd))==="091003"});if(si)$n=na(si);else{const ks=xs.find(Xn=>{var zr,ji;return(Xn.EQT_CL_CD||Xn.eqtClCd||((zr=Xn.actualEquipment)==null?void 0:zr.EQT_CL_CD)||((ji=Xn.actualEquipment)==null?void 0:ji.eqtClCd))==="092201"});ks&&($n=(ks==null?void 0:ks.MAC_ADDRESS)||(ks==null?void 0:ks.macAddress)||((ms=ks==null?void 0:ks.actualEquipment)==null?void 0:ms.MAC_ADDRESS)||((Ws=ks==null?void 0:ks.actualEquipment)==null?void 0:Ws.macAddress)||"")}let Ii="";ti==="V"?Ii=Mr?t.CTRT_ID||"":T||"":t.ISP_PROD_CD&&(Ii=T||"");const Do=Ms||t.IF_DTL_ID||"",jl=ti==="V"||hn==="SMR03"?"":Do;console.log("[CompleteAS]  :",{msgId:hn,eqtNo:Ir,instProdCd:ci,instEqtProdCmpsId:fr,subProdCd:Vr}),await _a({MSG_ID:hn,CUST_ID:(($s=t.customer)==null?void 0:$s.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:Ir,EQT_PROD_CMPS_ID:fr,PROD_CD:ci,ITV_USR_ID:"",IP_CNT:"",ETC_1:Ga,ETC_2:tl,ETC_3:Ds,ETC_4:Un,SUB_PROD_CD:Vr,IF_DTL_ID:jl,WRK_ID:$n,REG_UID:Bt,VOIP_JOIN_CTRT_ID:Ii,WTIME:"3"}),console.log("[CompleteAS]   ")}catch(Is){console.log("[CompleteAS]     (  ):",Is)}};N(cs,{onSuccess:es=>{es.code==="SUCCESS"||es.code==="OK"?(localStorage.removeItem(P()),t.WRK_STAT_CD="3",fs(),r==null||r("  .","success"),n()):r==null||r(es.message||"   .","error",!0)},onError:es=>{r==null||r(es.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[v&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[q&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:T,onValueChange:j,options:K,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:Z||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>de(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg ${c?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:c?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:w,onValueChange:M,options:De,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:G,onValueChange:U,options:ke,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:I,onValueChange:E,options:ls,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:A,onValueChange:Y,options:vs,placeholder:I?" ":"  ",required:!0,disabled:c||!I})]}),((y==null?void 0:y.kpiProdGrpCd)==="D"||(y==null?void 0:y.prodGrp)==="D"||t.PROD_GRP==="D")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(sn,{value:Ce,onValueChange:ge,options:Ne,placeholder:" ",disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{className:"truncate",children:xt||t.installLocation||""}),Be&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500 flex-shrink-0 whitespace-nowrap",children:["(: ",Be,")"]})]}),s.jsx("button",{type:"button",onClick:()=>ze(!0),className:`min-h-10 px-4 py-2 rounded-lg font-bold text-sm whitespace-nowrap ${c?"bg-gray-500 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:c?"":""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:k,onChange:He=>B(He.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:c,disabled:c}),!c&&s.jsxs("p",{className:`text-xs text-right mt-1 ${k.length>=500?"text-red-500":"text-gray-400"}`,children:[k.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Ae,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>fe(!re),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${re?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),re&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"DTV ()"}),s.jsx(sn,{value:F,onValueChange:L,options:Le,placeholder:"",disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"ISP ()"}),s.jsx(sn,{value:se,onValueChange:X,options:Ue,placeholder:"",disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"VoIP (VoIP)"}),s.jsx(sn,{value:z,onValueChange:$,options:Oe,placeholder:"",disabled:c})]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!c&&s.jsx("button",{onClick:_t,disabled:v,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${v?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:v?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>ie(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:he,onClose:()=>de(!1),onSave:Wt,workId:t.id,initialData:xe,workType:t.WRK_CD,customerId:(Ie=t.customer)==null?void 0:Ie.id,customerName:(Te=t.customer)==null?void 0:Te.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD,kpiProdGrpCd:(y==null?void 0:y.kpiProdGrpCd)||(y==null?void 0:y.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(y==null?void 0:y.prodChgGb)||(y==null?void 0:y.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(y==null?void 0:y.chgKpiProdGrpCd)||(y==null?void 0:y.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(y==null?void 0:y.prodGrp)||(y==null?void 0:y.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:c}),s.jsx(el,{isOpen:ne,onClose:()=>ie(!1),ctrtId:t.CTRT_ID,custId:(nt=t.customer)==null?void 0:nt.id}),s.jsx(xm,{isOpen:pe,onClose:()=>ze(!1),onSave:He=>{st(He.INSTL_LOC),ot(He.VIEW_MOD_CD),lt(He.VIEW_MOD_NM),ze(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(y==null?void 0:y.prodGrp)||(y==null?void 0:y.PROD_GRP),initialInstlLoc:xt||t.installLocation,initialViewModCd:St,initialViewModNm:Be,showToast:r,readOnly:c}),s.jsx(b_,{isOpen:ct,onClose:()=>Mt(!1),onSave:qt,soId:t.SO_ID||""}),s.jsx(Ba,{isOpen:pt,onClose:()=>mt(!1),onConfirm:_e,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{workType:"03",workTypeName:"A/S",custRel:w,custRelName:(Re=De.find(He=>He.value===w))==null?void 0:Re.label,networkType:Q,networkTypeName:Z,upCtrlCl:Ce,upCtrlClName:(Ct=Ne.find(He=>He.value===Ce))==null?void 0:Ct.label,kpiProdGrp:G,kpiProdGrpName:(Ke=ke.find(He=>He.value===G))==null?void 0:Ke.label,obsRcptCd:I,obsRcptCdName:(Et=ls.find(He=>He.value===I))==null?void 0:Et.label,obsRcptDtlCd:A,obsRcptDtlCdName:(Rt=vs.find(He=>He.value===A))==null?void 0:Rt.label,installedEquipments:(y==null?void 0:y.installedEquipments)||[],removedEquipments:(y==null?void 0:y.removedEquipments)||[],installLocation:xt?{position:xt}:void 0,memo:k})})]})},R6=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1})=>{var Wt,_t,qt,Ot;const o=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",c=t.WRK_DTL_TCD==="0440";t.WRK_DTL_TCD;const[u,h]=b.useState(!1),{equipmentData:m,filteringData:_}=ta(),{certifyRegconfInfo:p}=Za(),g=t.id||"",C=xa(g),y={...m||i||_||{},installedEquipments:C.installedEquipments.length>0?C.installedEquipments:(m==null?void 0:m.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:C.markedForRemoval.length>0?C.markedForRemoval:(m==null?void 0:m.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(C.removalStatus).length>0?C.removalStatus:(m==null?void 0:m.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:N,isPending:v}=jd(),P=()=>`work_complete_draft_${t.id}`,[w,M]=b.useState(""),[k,B]=b.useState(""),[G,U]=b.useState(""),[I,E]=b.useState(""),[A,Y]=b.useState(""),[se,X]=b.useState(!1),[z,$]=b.useState(""),[F,L]=b.useState([]),[re,fe]=b.useState(!1),[T,j]=b.useState([]),[K,J]=b.useState(!1),[q,V]=b.useState(t.NET_CL||""),[ce,me]=b.useState(t.NET_CL_NM||""),[Ce,ge]=b.useState(()=>{if(t.NET_CL)return{NET_CL:t.NET_CL||"",NET_CL_NM:t.NET_CL_NM||"",WRNG_TP:t.WRNG_TP||"",INSTL_TP:t.INSTL_TP||"",CB_WRNG_TP:t.CB_WRNG_TP||"",CB_INSTL_TP:t.CB_INSTL_TP||"",INOUT_LINE_TP:t.INOUT_LINE_TP||"",INOUT_LEN:t.INOUT_LEN||"",DVDR_YN:t.DVDR_YN||"",BFR_LINE_YN:t.BFR_LINE_YN||"",CUT_YN:t.CUT_YN||"",TERM_NO:t.TERM_NO||"",RCV_STS:t.RCV_STS||"",SUBTAP_ID:t.SUBTAP_ID||"",PORT_NUM:t.PORT_NUM||"",EXTN_TP:t.EXTN_TP||"",TAB_LBL:t.TAB_LBL||"",CVT_LBL:t.CVT_LBL||"",STB_LBL:t.STB_LBL||""}}),[Ge,te]=b.useState(!1),[he,de]=b.useState(!1),[Q,ee]=b.useState(""),[Z,le]=b.useState(""),[xe,be]=b.useState(""),[ne,ie]=b.useState(!1),[pe,ze]=b.useState(null),[xt,st]=b.useState(!1),[St,ot]=b.useState(""),[Be,lt]=b.useState(!1),[pt,mt]=b.useState(null),[Ye,at]=b.useState(!1),[Fe,tt]=b.useState(!1),[ct,Mt]=b.useState(!1),[dt,Je]=b.useState([]),[De,$e]=b.useState([]),[Ne,ye]=b.useState([]),[Ue,ue]=b.useState([]),[Oe,Ze]=b.useState([]),[Le,vt]=b.useState(()=>{const _e=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(_e&&_e.length>=8)return`${_e.slice(0,4)}-${_e.slice(4,6)}-${_e.slice(6,8)}`;const Se=new Date;return Se.getFullYear()+"-"+String(Se.getMonth()+1).padStart(2,"0")+"-"+String(Se.getDate()).padStart(2,"0")});b.useEffect(()=>{(async()=>{try{console.log("[WorkCompleteMove]    ");const Se=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});Se&&(console.log("[WorkCompleteMove]    :",{NET_CL:Se.NET_CL,NET_CL_NM:Se.NET_CL_NM}),o&&(M(Se.CUST_REL||""),B((Se.WRK_PROC_CT||"").replace(/\\n/g,`
`)),U(Se.PSN_USE_CORP||""),E(Se.VOIP_USE_CORP||""),Y(Se.DTV_USE_CORP||""),Se.WRKR_CMPL_DT&&Se.WRKR_CMPL_DT.length>=8&&vt(`${Se.WRKR_CMPL_DT.slice(0,4)}-${Se.WRKR_CMPL_DT.slice(4,6)}-${Se.WRKR_CMPL_DT.slice(6,8)}`),Se.VOIP_JOIN_CTRT_ID&&$(Se.VOIP_JOIN_CTRT_ID)),V(Se.NET_CL||""),me(Se.NET_CL_NM||""),ee(Ie=>Ie||Se.INSTL_LOC||""),ge(Ie=>Ie||{NET_CL:Se.NET_CL||"",NET_CL_NM:Se.NET_CL_NM||"",WRNG_TP:Se.WRNG_TP||"",INSTL_TP:Se.INSTL_TP||"",CB_WRNG_TP:Se.CB_WRNG_TP||"",CB_INSTL_TP:Se.CB_INSTL_TP||"",INOUT_LINE_TP:Se.INOUT_LINE_TP||"",INOUT_LEN:Se.INOUT_LEN||"",DVDR_YN:Se.DVDR_YN||"",BFR_LINE_YN:Se.BFR_LINE_YN||"",CUT_YN:Se.CUT_YN||"",TERM_NO:Se.TERM_NO||"",RCV_STS:Se.RCV_STS||"",SUBTAP_ID:Se.SUBTAP_ID||"",PORT_NUM:Se.PORT_NUM||"",EXTN_TP:Se.EXTN_TP||"",TAB_LBL:Se.TAB_LBL||"",CVT_LBL:Se.CVT_LBL||"",STB_LBL:Se.STB_LBL||""}))}catch(Se){console.error("[WorkCompleteMove]    :",Se)}if(!o){const Se=localStorage.getItem(P());if(Se)try{const Ie=JSON.parse(Se);M(Ie.custRel||""),B(Ie.memo||""),Ie.installInfoData&&(V(Ie.networkType||""),me(Ie.networkTypeName||""),ee(Ie.installLocationText||""),ge(Ie.installInfoData)),Ie.voipJoinCtrtId&&$(Ie.voipJoinCtrtId)}catch(Ie){console.error("[WorkCompleteMove] localStorage  :",Ie)}}h(!0)})()},[t.id,o]),b.useEffect(()=>{if(!u||o)return;const _e={custRel:w,memo:k,internetUse:G,voipUse:I,dtvUse:A,networkType:q,networkTypeName:ce,installLocationText:Q,installInfoData:Ce,voipJoinCtrtId:z,savedAt:new Date().toISOString()};localStorage.setItem(P(),JSON.stringify(_e))},[w,k,G,I,A,q,ce,Q,Ce,z,u,o]);const je=_e=>!_e||_e.length!==8?"":`${_e.slice(0,4)}-${_e.slice(4,6)}-${_e.slice(6,8)}`,ut=_e=>_e.replace(/-/g,""),gt=()=>new Date().toISOString().slice(0,10).replace(/-/g,""),jt=(_e,Se)=>{if(!_e||!Se)return 0;const Ie=new Date(je(_e)),Te=new Date(je(Se));return Math.ceil((Te.getTime()-Ie.getTime())/(1e3*60*60*24))},Ve=_e=>new Date(_e.getFullYear(),_e.getMonth()+1,0),Vt=_e=>Ve(_e).getDate()-_e.getDate()<7,ke=()=>{const _e=new Date;let Se;return Vt(_e)?Se=new Date(_e.getFullYear(),_e.getMonth()+2,0):Se=Ve(_e),Se.toISOString().slice(0,10)},ss=b.useCallback(async()=>{const _e=t.RCPT_ID||"",Se=t.CTRT_ID||"";if(!(!_e||!Se)){st(!0),mt(null);try{const Ie=await MM({RCPT_ID:_e,CTRT_ID:Se});if(console.log("[CompleteMove]   :",Ie),Ie){ze(Ie);const Te=gt();if(Ie.WRK_DTL_TCD==="0430"&&Ie.MMT_SUS_HOPE_DD<=Te){const nt=ke();ot(nt),lt(!0),console.log("[CompleteMove]   -   :",nt),r==null||r("  .   .","warning")}else ot(je(Ie.MMT_SUS_HOPE_DD)),lt(!1)}}catch(Ie){console.error("[CompleteMove]   :",Ie),mt(Ie.message||"   ")}finally{st(!1)}}},[t.RCPT_ID,t.CTRT_ID,r]);b.useEffect(()=>{ss()},[ss]);const ls=_e=>{const Se=_e.target.value;if(ot(Se),mt(null),!pe)return;const Ie=je(pe.SUS_HOPE_DD);if(Se<Ie){mt("   .");return}if(pe.VALID_SUS_DAYS&&parseInt(pe.VALID_SUS_DAYS)>0){const Te=parseInt(pe.VALID_SUS_DAYS),nt=new Date(Ie),Re=new Date(nt);Re.setDate(Re.getDate()+Te-1),new Date(Se)>Re&&mt(`   ${Re.toISOString().slice(0,10)}  .`)}},ds=()=>{if(!pe||!St)return;const _e=je(pe.SUS_HOPE_DD);if(St<_e){r==null||r("   .","error");return}tt(!0),lt(!1),r==null||r(" .   .","info")};b.useEffect(()=>{(async()=>{try{const Se=await No(["CMCU005","CMCU057","CMCU110","CMCU148"]);Se.CMCU005&&$e(Se.CMCU005.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Se.CMCU057&&ye(Se.CMCU057.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Se.CMCU110&&ue(Se.CMCU110.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM}))),Se.CMCU148&&Ze(Se.CMCU148.map(Ie=>({value:Ie.COMMON_CD,label:Ie.COMMON_CD_NM})))}catch(Se){console.error("[WorkCompleteMove]   :",Se)}})()},[]),b.useEffect(()=>{(async()=>{try{const Se=await Uc(),Ie=(Se==null?void 0:Se.output)||Se||[];Je(Ie);const Te=t.PROD_CD||t.PROD_CD||"",nt=Ie.some(Re=>Re.PROD_CD===Te);Mt(nt),console.log("[CompleteSuspend] LGHV :",{currentProdCd:Te,isLghv:nt,prodListCount:Ie.length})}catch(Se){console.error("[CompleteSuspend] LGHV   :",Se)}})()},[t.PROD_CD]),b.useEffect(()=>{var Ie;if(o)return;const _e=((Ie=t.customer)==null?void 0:Ie.id)||t.CUST_ID;if(!_e)return;(async()=>{try{console.log("[WorkCompleteMove]     :",_e);const Te=await _m({CUST_ID:_e});console.log("[WorkCompleteMove]   :",Te),j(Te||[])}catch(Te){console.error("[WorkCompleteMove]     :",Te),j([])}})()},[(Wt=t.customer)==null?void 0:Wt.id,t.CUST_ID,o]),b.useEffect(()=>{if(o)return;if(T.length===0){console.log("[WorkCompleteMove]     ...");return}const _e=t.PROD_GRP||"",Se=t.VOIP_PROD_CD||"",Ie=t.ISP_PROD_CD||"",Te=t.WRK_STAT_CD||"",nt=t.ADDR_ORD||"";if(console.log("[WorkCompleteMove]   :",{prodGrp:_e,voipProdCd:Se,ispProdCd:Ie,wrkStatCd:Te,addrOrd:nt,customerCtrtListCount:T.length}),_e==="V"&&!Se){const Re=T.filter(Ke=>{const Et=Ke.PROD_GRP||"",Rt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"";return(Et==="C"||Et==="D"||Et==="I")&&Rt==="20"&&(!nt||He===nt)});console.log("[WorkCompleteMove] VoIP   :",Re),Re.length<1&&Te==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const Ct=[{value:"",label:""},...Re.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];L(Ct),fe(!0);return}if(_e==="I"&&Ie){const Re=T.filter(Ke=>{const Et=Ke.PROD_GRP||"",Rt=Ke.CTRT_STAT||"",He=Ke.ADDR_ORD||Ke.addr_ord||"",ht=Ke.ISP_JOIN_ID||"",Pt=Ke.KPI_PROD_GRP_CD||"";return(Et==="D"||Et==="C")&&Rt==="20"&&!ht&&Pt==="D"&&(!nt||He===nt)});console.log("[WorkCompleteMove] ISP   :",Re),Re.length<1&&Te==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const Ct=[{value:"",label:""},...Re.map(Ke=>({value:Ke.CTRT_ID||"",label:`[${Ke.CTRT_ID}] ${Ke.BASIC_PROD_CD_NM||Ke.PROD_NM||""}`}))];L(Ct),fe(!0);return}fe(!1),L([])},[t.id,t.WRK_STAT_CD,o,r,T]);const vs=()=>{var nt;const _e=[];w||_e.push("  ."),Ce!=null&&Ce.NET_CL||_e.push(" ."),t.WRK_CD!=="04"&&!Q&&!t.installLocation&&_e.push(" ."),Le||_e.push(" .");const Se=t.PROD_GRP||"";if(t.WRK_DTL_TCD==="0430")(((nt=y==null?void 0:y.installedEquipments)==null?void 0:nt.length)||0)>0&&_e.push("  .");else{const Re=(y==null?void 0:y.installedEquipments)||[];Se!=="V"&&Re.length<1&&_e.push("()  .")}const Ie=t.VOIP_PROD_CD||"",Te=t.ISP_PROD_CD||"";return Se==="V"&&!Ie&&re&&(z||_e.push("VOIP    .")),Se==="I"&&Te&&re&&(z||_e.push("  ISP .    .")),_e},Ss=_e=>{ge(_e),_e.NET_CL&&V(_e.NET_CL),_e.NET_CL_NM&&me(_e.NET_CL_NM),r==null||r("  .","success")},Ae=()=>{if(v)return;const _e=vs();if(_e.length>0){_e.forEach(Se=>r==null?void 0:r(Se,"error"));return}ie(!0)},ft=(_e,Se=!1)=>{if(!_e||_e.length===0)return[];const Ie=localStorage.getItem("userInfo"),Te=Ie?JSON.parse(Ie):{},nt=Te.userId||"A20130708",Re=(y==null?void 0:y.removalStatus)||{},Ct=(Ke,Et)=>Ke==="1"||Ke==="Y"||Et==="1"||Et==="Y"?"1":"0";return _e.map(Ke=>{var ht,Pt,Bt;const Et=Ke.EQT_NO||Ke.id||((ht=Ke.actualEquipment)==null?void 0:ht.id)||"",Rt=Re[Et]||{},He=Se?{CRR_TSK_CL:t.WRK_CD||"04",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Te.crrId||"01",WRKR_ID:nt,EQT_LOSS_YN:Ct(Ke.EQT_LOSS_YN,Rt.EQT_LOSS_YN),PART_LOSS_BRK_YN:Ct(Ke.PART_LOSS_BRK_YN,Rt.PART_LOSS_BRK_YN),EQT_BRK_YN:Ct(Ke.EQT_BRK_YN,Rt.EQT_BRK_YN),EQT_CABL_LOSS_YN:Ct(Ke.EQT_CABL_LOSS_YN,Rt.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Ct(Ke.EQT_CRDL_LOSS_YN,Rt.EQT_CRDL_LOSS_YN)}:{};if(Ke.actualEquipment){const Yt=Ke.actualEquipment,Xt=Ke.contractEquipment||{};return{...Yt,EQT_NO:Yt.id,EQT_SERNO:Yt.serialNumber,ITEM_MID_CD:Yt.itemMidCd,EQT_CL_CD:Yt.eqtClCd,MAC_ADDRESS:Ke.macAddress||Yt.macAddress,WRK_ID:t.id,CUST_ID:(Pt=t.customer)==null?void 0:Pt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:nt,SVC_CMPS_ID:Xt.SVC_CMPS_ID||Ke.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Xt.BASIC_PROD_CMPS_ID||Ke.BASIC_PROD_CMPS_ID||"",PROD_CMPS_ID:Xt.PROD_CMPS_ID||Ke.PROD_CMPS_ID||"",SVC_CD:Xt.SVC_CD||Ke.SVC_CD||"",PROD_CD:Xt.PROD_CD||Ke.PROD_CD||"",LENT_YN:Ke.lentYn||Ke.LENT_YN||Xt.LENT_YN||"",EQT_CHG_GB:Ke.EQT_CHG_GB||"01",...He}}return{...Ke,EQT_NO:Ke.EQT_NO||Ke.id||"",EQT_SERNO:Ke.EQT_SERNO||Ke.serialNumber||"",ITEM_MID_CD:Ke.ITEM_MID_CD||Ke.itemMidCd||"",EQT_CL_CD:Ke.EQT_CL_CD||Ke.eqtClCd||"",MAC_ADDRESS:Ke.MAC_ADDRESS||Ke.macAddress||"",SVC_CMPS_ID:Ke.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ke.BASIC_PROD_CMPS_ID||"",PROD_CD:Ke.PROD_CD||"",SVC_CD:Ke.SVC_CD||"",WRK_ID:t.id,CUST_ID:(Bt=t.customer)==null?void 0:Bt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:nt,...He}})},rt=async()=>{var ht,Pt,Bt,Yt;const _e=Le.replace(/-/g,""),Se=localStorage.getItem("userInfo"),Ie=Se?JSON.parse(Se):{},Te=Ie.userId||"A20130708";if(Fe&&pe&&St){at(!0);try{const Xt=pe.SUS_HOPE_DD,ts=ut(St),Ut=jt(Xt,ts),Ms=await IM({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",SUS_HOPE_DD:Xt,MMT_SUS_HOPE_DD:ts,SUS_DD_NUM:String(Ut),REG_UID:Te});if(Ms.code!=="SUCCESS"){r==null||r(Ms.message||"  ","error",!0),at(!1);return}console.log("[CompleteMove]   ")}catch(Xt){r==null||r(Xt.message||"  ","error",!0),at(!1);return}at(!1)}const nt=(y==null?void 0:y.removedEquipments)||[],Re=(y==null?void 0:y.customerEquipments)||[],Ct=(y==null?void 0:y.installedEquipments)||[],Ke=!!t.ISP_PROD_CD;if((t.WRK_DTL_TCD==="0430"||t.WRK_DTL_TCD==="0470")&&(nt.length>0||Re.length>0||Ct.length>0||Ke))try{let Xt="SMR05",ts="";ct&&(Xt="STB_DEL");const Ut=nt[0],Ms=Ut.actualEquipment||Ut,Cs=Ms.PROD_CMPS_ID||Ut.PROD_CMPS_ID||Ms.EQT_PROD_CMPS_ID||Ut.EQT_PROD_CMPS_ID||"",_s=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"";console.log("[CompleteMove]   :",{msgId:Xt,isLghvStb:ct,etc1:ts,eqtProdCmpsId:Cs});const Es=await _a({MSG_ID:Xt,CUST_ID:((ht=t.customer)==null?void 0:ht.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:Cs,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Te,ETC_1:ts,VOIP_JOIN_CTRT_ID:_s,WTIME:"3"});Es.code!=="SUCCESS"&&Es.code!=="OK"?(console.warn("[CompleteMove]    -  :",Es.message),r==null||r("   .","warning")):console.log("[CompleteMove]    ")}catch(Xt){console.warn("[CompleteMove]      -  :",Xt),r==null||r("     .","warning")}const Rt=async()=>{var Ms,Cs;const Xt=(y==null?void 0:y.customerEquipments)||[],ts=(y==null?void 0:y.installedEquipments)||[],Ut=!!t.ISP_PROD_CD;if(t.WRK_DTL_TCD==="0440"&&(Xt.length>0||ts.length>0||Ut))try{const Bs=t.PROD_GRP||"";let _s="SMR03",Es="",js="",cs="",fs="",Ys="",Ls="";Bs==="V"?_s="SMR60":ct&&(_s="STB_CRT");let it=(y==null?void 0:y.prodPromoInfo)||[];if(it.length===0)try{it=await Tl({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:Te,PROD_CD:t.PROD_CD||"",CRR_TSK_CL:t.WRK_CD||"04",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||"",WRK_CD:t.WRK_CD||"04",WRK_STAT_CD:t.WRK_STAT_CD||""})}catch($s){console.log("[CompleteSuspend] prodPromoInfo  :",$s)}const Ft=((Ms=it.find($s=>$s.PROD_CMPS_CL==="23"))==null?void 0:Ms.PROD_CMPS_ID)||"",bs=it.find($s=>$s.PROD_CMPS_CL==="11"),zt=(bs==null?void 0:bs.PROD_CD)||"",ws=(bs==null?void 0:bs.PROD_GRP)||Bs,es=it.filter($s=>$s.BASIC_PROD_FL==="V").map($s=>$s.PROD_CD),Os=es.length>0?es.join(","):"",As=[...Xt,...ts],ms=$s=>{const Is=As.find(Br=>{const Ar=Br.actualEquipment||Br;return(Ar.itemMidCd||Ar.ITEM_MID_CD)===$s});if(!Is)return"";const xs=Is.actualEquipment||Is;return xs.id||xs.EQT_NO||""};t.VOIP_PROD_CD?(Es=ms("08"),js=ms("02")):(Es=ms("05")||ms("01")||ms("03")||(ws==="I"?ms("02"):"")||ms("08")||"",js=ms("04")),cs=ms("07"),ws==="C"&&(fs=ms("02")),ws==="V"&&(Ys=ms("10")),Ut&&(Ys=ms("21")),(Bs==="V"||Ut)&&(Ls=z||t.CTRT_ID||"");let Ws=t.id||"";for(const $s of As){const Is=$s.actualEquipment||$s,xs=Is.eqtClCd||Is.EQT_CL_CD||"";if(xs==="091003"||xs==="091004"){Ws=Is.id||Is.EQT_NO||t.id||"";break}if(xs==="092201"){Ws=Is.macAddress||Is.MAC_ADDRESS||Is.id||Is.EQT_NO||t.id||"";break}}console.log("[CompleteSuspend]   :",{msgId:_s,eqtNo:Es,prodCd:zt,subProdCd:Os,etc1:js,etc2:cs,etc3:fs,etc4:Ys}),await _a({MSG_ID:_s,CUST_ID:((Cs=t.customer)==null?void 0:Cs.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:Es,EQT_PROD_CMPS_ID:Ft,PROD_CD:zt,ITV_USR_ID:"",IP_CNT:"",ETC_1:js,ETC_2:cs,ETC_3:fs,ETC_4:Ys,SUB_PROD_CD:Os,IF_DTL_ID:"",WRK_ID:Ws,REG_UID:Te,VOIP_JOIN_CTRT_ID:Ls,WTIME:"3"}),console.log("[CompleteSuspend]    ")}catch(Bs){console.log("[CompleteSuspend]      (  ):",Bs)}},He={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Pt=t.customer)==null?void 0:Pt.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Ie.crrId||"01",WRKR_ID:Te,WRKR_CMPL_DT:_e,MEMO:k||" ",STTL_YN:"Y",REG_UID:Te,CUST_REL:w,CNFM_CUST_NM:((Bt=t.customer)==null?void 0:Bt.name)||"",CNFM_CUST_TELNO:((Yt=t.customer)==null?void 0:Yt.contactNumber)||"",INSTL_LOC:Q||t.installLocation||"",PSN_USE_CORP:G||"",VOIP_USE_CORP:I||"",DTV_USE_CORP:A||"",WRK_ACT_CL:"20",NET_CL:(Ce==null?void 0:Ce.NET_CL)||"",WRNG_TP:(Ce==null?void 0:Ce.WRNG_TP)||"",INSTL_TP:(Ce==null?void 0:Ce.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:z||""},equipmentList:ft((y==null?void 0:y.installedEquipments)||[],!1),removeEquipmentList:ft((y==null?void 0:y.removedEquipments)||[],!0),spendItemList:(y==null?void 0:y.spendItems)||[],agreementList:(y==null?void 0:y.agreements)||[],poleList:(y==null?void 0:y.poleResults)||[]};N(He,{onSuccess:Xt=>{Xt.code==="SUCCESS"||Xt.code==="OK"?(localStorage.removeItem(P()),t.WRK_STAT_CD="3",Rt(),r==null||r("  .","success"),n()):r==null||r(Xt.message||"   .","error",!0)},onError:Xt=>{r==null||r(Xt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[v&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[c&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:" .   ."})}),re&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!o&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:z,onValueChange:$,options:F,placeholder:" ",required:!0,disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:ce||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>J(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg ${o?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:o?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!o&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:w,onValueChange:M,options:De,placeholder:" ",required:!0,disabled:o})]}),t.WRK_CD!=="04"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!o&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{className:"truncate",children:Q||t.installLocation||""}),xe&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500 flex-shrink-0 whitespace-nowrap",children:["(: ",xe,")"]})]}),s.jsx("button",{type:"button",onClick:()=>de(!0),className:`min-h-10 px-4 py-2 rounded-lg font-bold text-sm whitespace-nowrap ${o?"bg-gray-500 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:o?"":""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:k,onChange:_e=>B(_e.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${o?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:o,disabled:o}),!o&&s.jsxs("p",{className:`text-xs text-right mt-1 ${k.length>=500?"text-red-500":"text-gray-400"}`,children:[k.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Le,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 border border-indigo-200",children:[s.jsxs("div",{className:"text-sm font-semibold text-indigo-800 mb-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(rm,{size:16}),""]}),!o&&pe&&!Be&&s.jsx("button",{type:"button",onClick:()=>lt(!0),className:"px-2 py-0.5 bg-indigo-500 hover:bg-indigo-600 text-white rounded text-xs font-medium",children:""})]}),xt?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500"})," ..."]}):pe?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"date",value:je(pe.SUS_HOPE_DD),disabled:!0,className:"flex-1 px-2 py-1.5 border border-gray-300 rounded bg-gray-100 text-gray-600 text-sm"}),s.jsx("span",{className:"text-gray-500",children:"~"}),Be&&!o?s.jsx("input",{type:"date",value:St,onChange:ls,min:je(pe.SUS_HOPE_DD),className:"flex-1 px-2 py-1.5 border border-indigo-300 rounded bg-white text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}):s.jsx("input",{type:"date",value:Fe?St:je(pe.MMT_SUS_HOPE_DD),disabled:!0,className:`flex-1 px-2 py-1.5 border rounded text-sm ${Fe?"border-orange-300 bg-orange-50 text-orange-700":"border-gray-300 bg-gray-100 text-gray-600"}`})]}),Be&&!o&&St&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-indigo-600",children:[": ",jt(pe.SUS_HOPE_DD,ut(St)),""]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{lt(!1),tt(!1),ot(je(pe.MMT_SUS_HOPE_DD)),mt(null)},className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white rounded text-xs font-medium",children:""}),s.jsx("button",{type:"button",onClick:ds,disabled:!!pt,className:"px-3 py-1 bg-indigo-500 hover:bg-indigo-600 text-white rounded text-xs font-medium disabled:opacity-50",children:""})]})]}),Fe&&!Be&&!o&&s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"  (  )"}),s.jsx("button",{type:"button",onClick:()=>lt(!0),className:"px-2 py-0.5 bg-orange-500 hover:bg-orange-600 text-white rounded text-xs font-medium",children:" "})]}),pt&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[s.jsx($r,{size:12}),pt]})]}):s.jsx("div",{className:"text-sm text-gray-500",children:"  "})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!o&&s.jsx("button",{onClick:Ae,disabled:v,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${v?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:v?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>te(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:K,onClose:()=>J(!1),onSave:Ss,workId:t.id,initialData:Ce,workType:t.WRK_CD,customerId:(_t=t.customer)==null?void 0:_t.id,customerName:(qt=t.customer)==null?void 0:qt.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(y==null?void 0:y.kpiProdGrpCd)||(y==null?void 0:y.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(y==null?void 0:y.prodChgGb)||(y==null?void 0:y.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(y==null?void 0:y.chgKpiProdGrpCd)||(y==null?void 0:y.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(y==null?void 0:y.prodGrp)||(y==null?void 0:y.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:o}),s.jsx(el,{isOpen:Ge,onClose:()=>te(!1),ctrtId:t.CTRT_ID,custId:(Ot=t.customer)==null?void 0:Ot.id}),s.jsx(xm,{isOpen:he,onClose:()=>de(!1),onSave:_e=>{ee(_e.INSTL_LOC),le(_e.VIEW_MOD_CD),be(_e.VIEW_MOD_NM),de(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(y==null?void 0:y.prodGrp)||(y==null?void 0:y.PROD_GRP),initialInstlLoc:Q||t.installLocation,initialViewModCd:Z,initialViewModNm:xe,showToast:r,readOnly:o}),s.jsx(Ba,{isOpen:ne,onClose:()=>ie(!1),onConfirm:rt,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{equipmentData:y,installInfoData:Ce,custRel:w,custRelOptions:De,memo:k,installLocationText:Q,order:t})})]})},QM=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1,certifyMode:o=!1})=>{var rt,Wt,_t,qt,Ot,_e;const c=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",u=t.WRK_DTL_TCD!=="0510",[h,m]=b.useState(!1),{equipmentData:_,filteringData:p}=ta(),{certifyRegconfInfo:g}=Za(),C=t.id||"",y=xa(C),N={..._||i||p||{},installedEquipments:y.installedEquipments.length>0?y.installedEquipments:(_==null?void 0:_.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:y.markedForRemoval.length>0?y.markedForRemoval:(_==null?void 0:_.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(y.removalStatus).length>0?y.removalStatus:(_==null?void 0:_.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:v,isPending:P}=jd(),w=()=>`work_complete_draft_${t.id}`,[M,k]=b.useState(""),[B,G]=b.useState(""),[U,I]=b.useState(""),[E,A]=b.useState(""),[Y,se]=b.useState(""),[X,z]=b.useState(""),[$,F]=b.useState(!1),[L,re]=b.useState(""),[fe,T]=b.useState([]),[j,K]=b.useState(!1),[J,q]=b.useState([]),[V,ce]=b.useState(!1),[me,Ce]=b.useState(!1),[ge,Ge]=b.useState(""),[te,he]=b.useState(""),[de,Q]=b.useState(void 0),[ee,Z]=b.useState(void 0),[le,xe]=b.useState(!1),[be,ne]=b.useState(!1),[ie,pe]=b.useState(""),[ze,xt]=b.useState(""),[st,St]=b.useState(""),[ot,Be]=b.useState(!1),[lt,pt]=b.useState(!1),[mt,Ye]=b.useState(null),[at,Fe]=b.useState([]),[tt,ct]=b.useState([]),[Mt,dt]=b.useState([]),[Je,De]=b.useState([]),[$e,Ne]=b.useState([]),[ye,Ue]=b.useState(!1),[ue,Oe]=b.useState([]),[Ze,Le]=b.useState(!1),[vt,je]=b.useState(""),[ut,gt]=b.useState(!1),[jt,Ve]=b.useState("B"),[Vt,ke]=b.useState(()=>{const Se=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Se&&Se.length>=8)return`${Se.slice(0,4)}-${Se.slice(4,6)}-${Se.slice(6,8)}`;const Ie=new Date;return Ie.getFullYear()+"-"+String(Ie.getMonth()+1).padStart(2,"0")+"-"+String(Ie.getDate()).padStart(2,"0")});b.useEffect(()=>{if(c){(async()=>{try{const Te=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(Te){k(Te.CUST_REL||""),G((Te.WRK_PROC_CT||"").replace(/\\n/g,`
`)),I(Te.PSN_USE_CORP||""),A(Te.VOIP_USE_CORP||""),se(Te.DTV_USE_CORP||"");const nt=Te.UP_CTRL_CL||(N==null?void 0:N.upCtrlCl)||"";console.log("[CompleteChange]  :",{API:Te.UP_CTRL_CL,:N==null?void 0:N.upCtrlCl,:nt}),z(nt),Ge(Te.NET_CL||""),he(Te.NET_CL_NM||""),pe(Te.INSTL_LOC||""),Q({NET_CL:Te.NET_CL||"",NET_CL_NM:Te.NET_CL_NM||"",WRNG_TP:Te.WRNG_TP||"",INSTL_TP:Te.INSTL_TP||"",CB_WRNG_TP:Te.CB_WRNG_TP||"",CB_INSTL_TP:Te.CB_INSTL_TP||"",INOUT_LINE_TP:Te.INOUT_LINE_TP||"",INOUT_LEN:Te.INOUT_LEN||"",DVDR_YN:Te.DVDR_YN||"",BFR_LINE_YN:Te.BFR_LINE_YN||"",CUT_YN:Te.CUT_YN||"",TERM_NO:Te.TERM_NO||"",RCV_STS:Te.RCV_STS||"",SUBTAP_ID:Te.SUBTAP_ID||"",PORT_NUM:Te.PORT_NUM||"",EXTN_TP:Te.EXTN_TP||"",TAB_LBL:Te.TAB_LBL||"",CVT_LBL:Te.CVT_LBL||"",STB_LBL:Te.STB_LBL||""}),xt(Te.VIEW_MOD_CD||""),St(Te.VIEW_MOD_NM||""),Te.VOIP_JOIN_CTRT_ID&&re(Te.VOIP_JOIN_CTRT_ID),Te.WRKR_CMPL_DT&&Te.WRKR_CMPL_DT.length>=8&&ke(`${Te.WRKR_CMPL_DT.slice(0,4)}-${Te.WRKR_CMPL_DT.slice(4,6)}-${Te.WRKR_CMPL_DT.slice(6,8)}`)}}catch(Te){console.error("[WorkCompleteChange]     :",Te)}m(!0)})();return}const Se=localStorage.getItem(w());if(Se)try{const Ie=JSON.parse(Se);k(Ie.custRel||""),G(Ie.memo||""),I(Ie.internetUse||""),A(Ie.voipUse||""),se(Ie.dtvUse||""),z(Ie.upCtrlCl||""),Ge(Ie.networkType||""),he(Ie.networkTypeName||""),pe(Ie.installLocationText||""),Q(Ie.installInfoData),Z(Ie.removalInfoData),xt(Ie.viewModCd||""),St(Ie.viewModNm||""),Ie.voipJoinCtrtId&&re(Ie.voipJoinCtrtId)}catch(Ie){console.error("[WorkCompleteChange] localStorage  :",Ie)}m(!0)},[t.id,c]),b.useEffect(()=>{if(!h||c)return;const Se={custRel:M,memo:B,internetUse:U,voipUse:E,dtvUse:Y,upCtrlCl:X,networkType:ge,networkTypeName:te,installLocationText:ie,installInfoData:de,removalInfoData:ee,viewModCd:ze,viewModNm:st,voipJoinCtrtId:L,savedAt:new Date().toISOString()};localStorage.setItem(w(),JSON.stringify(Se))},[M,B,U,E,Y,X,ge,te,ie,de,ee,ze,st,L,h,c]),b.useEffect(()=>{(async()=>{try{const Ie=await No(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);Ie.CMCU005&&Fe(Ie.CMCU005.map(Te=>({value:Te.COMMON_CD,label:Te.COMMON_CD_NM}))),Ie.CMCT015&&(console.log("[CompleteChange]  CMCT015 :",Ie.CMCT015),ct(Ie.CMCT015.map(Te=>({value:Te.COMMON_CD,label:Te.COMMON_CD_NM})))),Ie.CMCU057&&dt(Ie.CMCU057.map(Te=>({value:Te.COMMON_CD,label:Te.COMMON_CD_NM}))),Ie.CMCU110&&De(Ie.CMCU110.map(Te=>({value:Te.COMMON_CD,label:Te.COMMON_CD_NM}))),Ie.CMCU148&&Ne(Ie.CMCU148.map(Te=>({value:Te.COMMON_CD,label:Te.COMMON_CD_NM})))}catch(Ie){console.error("[WorkCompleteChange]   :",Ie)}})()},[]),b.useEffect(()=>{(async()=>{try{const Ie=await Uc();Oe(Ie||[]),console.log("[CompleteChange] LGHV  :",Ie==null?void 0:Ie.length);const Te=t.PROD_CD||t.BASIC_PROD_CD||"";if(Te&&Ie&&Ie.length>0){const nt=Ie.some(Re=>Re.PROD_CD===Te);Ue(nt),console.log("[CompleteChange] LGHV STB :",nt,"PROD_CD:",Te)}}catch(Ie){console.error("[CompleteChange] LGHV    :",Ie)}})()},[t.id]),b.useEffect(()=>{(async()=>{const Ie=t.PROD_CD||t.PROD_CD||"",Te=(N==null?void 0:N.prodPromoInfo)||[];if(Ie==="PD10018480")console.log("[CompleteChange] OTT   :",Ie),gt(!0),Ve("C");else if(Te.some(Ct=>Ct.PROD_CD==="PD10018160"))console.log("[CompleteChange] OTT   : PD10018160"),gt(!0),Ve("B");else{gt(!1);return}const nt=t.id||"",Re=t.directionId||t.WRK_DRCTN_ID||"";if(nt&&Re)try{const Ct=await v1({WRK_ID:nt,WRK_DRCTN_ID:Re,DATA_TYPE:Ie==="PD10018480"?"C":"B"});Ct!=null&&Ct.EQT_SERNO&&(console.log("[CompleteChange]  OTT :",Ct.EQT_SERNO),je(Ct.EQT_SERNO))}catch(Ct){console.error("[CompleteChange] OTT   :",Ct)}})()},[t.PROD_CD,t.id,t.directionId,N==null?void 0:N.prodPromoInfo]),b.useEffect(()=>{N!=null&&N.upCtrlCl&&!X?(console.log("[CompleteChange] equipmentData  :",N.upCtrlCl),z(N.upCtrlCl)):!X&&h&&!c&&(console.log("[CompleteChange]   : 01 ()"),z("01"))},[N==null?void 0:N.upCtrlCl,h,c,X]),b.useEffect(()=>{var Te;if(c)return;const Se=((Te=t.customer)==null?void 0:Te.id)||t.CUST_ID;if(!Se)return;(async()=>{try{console.log("[WorkCompleteChange]     :",Se);const nt=await _m({CUST_ID:Se});console.log("[WorkCompleteChange]   :",nt),q(nt||[])}catch(nt){console.error("[WorkCompleteChange]     :",nt),q([])}})()},[(rt=t.customer)==null?void 0:rt.id,t.CUST_ID,c]),b.useEffect(()=>{if(c)return;if(J.length===0){console.log("[WorkCompleteChange]     ...");return}const Se=t.PROD_GRP||"",Ie=t.VOIP_PROD_CD||"",Te=t.ISP_PROD_CD||"",nt=t.WRK_STAT_CD||"",Re=t.ADDR_ORD||"";if(console.log("[WorkCompleteChange]   :",{prodGrp:Se,voipProdCd:Ie,ispProdCd:Te,wrkStatCd:nt,addrOrd:Re,customerCtrtListCount:J.length}),Se==="V"&&!Ie){const Ct=J.filter(Et=>{const Rt=Et.PROD_GRP||"",He=Et.CTRT_STAT||"",ht=Et.ADDR_ORD||Et.addr_ord||"";return(Rt==="C"||Rt==="D"||Rt==="I")&&He==="20"&&(!Re||ht===Re)});console.log("[WorkCompleteChange] VoIP   :",Ct),Ct.length<1&&nt==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const Ke=[{value:"",label:""},...Ct.map(Et=>({value:Et.CTRT_ID||"",label:`[${Et.CTRT_ID}] ${Et.BASIC_PROD_CD_NM||Et.PROD_NM||""}`}))];T(Ke),K(!0);return}if(Se==="I"&&Te){const Ct=J.filter(Et=>{const Rt=Et.PROD_GRP||"",He=Et.CTRT_STAT||"",ht=Et.ADDR_ORD||Et.addr_ord||"",Pt=Et.ISP_JOIN_ID||"",Bt=Et.KPI_PROD_GRP_CD||"";return(Rt==="D"||Rt==="C")&&He==="20"&&!Pt&&Bt==="D"&&(!Re||ht===Re)});console.log("[WorkCompleteChange] ISP   :",Ct),Ct.length<1&&nt==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const Ke=[{value:"",label:""},...Ct.map(Et=>({value:Et.CTRT_ID||"",label:`[${Et.CTRT_ID}] ${Et.BASIC_PROD_CD_NM||Et.PROD_NM||""}`}))];T(Ke),K(!0);return}K(!1),T([])},[t.id,t.WRK_STAT_CD,c,r,J]);const ss=()=>{const Se=[];t.WRKR_ID||""||Se.push("  ."),M||Se.push("  ."),de!=null&&de.NET_CL||Se.push(" ."),de!=null&&de.WRNG_TP||Se.push(" ."),de!=null&&de.INSTL_TP||Se.push(" ."),!ie&&!t.installLocation&&Se.push(" ."),Vt||Se.push(" ."),U||Se.push("  ."),E||Se.push("VoIP  ."),Y||Se.push("DTV  .");const Te=t.PROD_GRP||"",nt=t.VOIP_PROD_CD||"",Re=t.ISP_PROD_CD||"";Te==="V"&&!nt&&j&&(L||Se.push("VOIP    .")),Te==="I"&&Re&&j&&(L||Se.push("  ISP .    ."));const Ct=(N==null?void 0:N.installedEquipments)||[];return Te!=="V"&&Ct.length<1&&Se.push("()  ."),ut&&!vt&&Se.push("OTT   OTT BOX   ."),Se},ls=Se=>{Q(Se),Se.NET_CL&&Ge(Se.NET_CL),Se.NET_CL_NM&&he(Se.NET_CL_NM),r==null||r("  .","success")},ds=Se=>{Z(Se),r==null||r("  .","success")},vs=()=>{if(P)return;const Se=ss();if(Se.length>0){Se.forEach(Te=>r==null?void 0:r(Te,"error"));return}(t.PROD_GRP||"")!=="V"?pt(!0):Be(!0)},Ss=Se=>{Ye(Se),pt(!1),Be(!0)},Ae=(Se,Ie=!1)=>{if(!Se||Se.length===0)return[];const Te=localStorage.getItem("userInfo"),nt=Te?JSON.parse(Te):{},Re=nt.userId||"A20130708",Ct=(N==null?void 0:N.removalStatus)||{},Ke=(Bt,Yt)=>Bt==="1"||Bt==="Y"||Yt==="1"||Yt==="Y"?"1":"0",Et=(N==null?void 0:N.removedEquipments)||[],Rt=(Bt,Yt)=>{const Xt=Et.find(ts=>(ts.itemMidCd===Bt||ts.ITEM_MID_CD===Bt)&&ts[Yt]);return(Xt==null?void 0:Xt[Yt])||""},He=Bt=>Rt(Bt,"BASIC_PROD_CMPS_ID"),ht=Bt=>Rt(Bt,"LENT")||Rt(Bt,"LENT_YN"),Pt=Bt=>Rt(Bt,"SVC_CMPS_ID");return Se.map(Bt=>{var cs,fs,Ys;const Yt=Bt.EQT_NO||Bt.id||((cs=Bt.actualEquipment)==null?void 0:cs.id)||"",Xt=Ct[Yt]||{},ts=Ie?{}:{CRR_TSK_CL:"01",CHG_UID:Re},Ut=Ie?{CRR_TSK_CL:"02",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||nt.crrId||"01",WRKR_ID:Re,REG_UID:Re,EQT_LOSS_YN:Ke(Bt.EQT_LOSS_YN,Xt.EQT_LOSS_YN),PART_LOSS_BRK_YN:Ke(Bt.PART_LOSS_BRK_YN,Xt.PART_LOSS_BRK_YN),EQT_BRK_YN:Ke(Bt.EQT_BRK_YN,Xt.EQT_BRK_YN),EQT_CABL_LOSS_YN:Ke(Bt.EQT_CABL_LOSS_YN,Xt.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Ke(Bt.EQT_CRDL_LOSS_YN,Xt.EQT_CRDL_LOSS_YN)}:{},Ms=t.DTL_CTRT_ID||t.CTRT_ID||"",Cs=Bt.CTRT_ID||t.CTRT_ID||"";if(Bt.actualEquipment){const Ls=Bt.actualEquipment,it=Bt.contractEquipment||{},Ft=Ls.itemMidCd||Ls.ITEM_MID_CD||"",bs=it.BASIC_PROD_CMPS_ID||Bt.BASIC_PROD_CMPS_ID||He(Ft),zt=it.LENT||it.LENT_YN||Bt.LENT||Bt.lentYn||Bt.LENT_YN||ht(Ft),ws=it.SVC_CMPS_ID||Bt.SVC_CMPS_ID||Pt(Ft);return{...Ls,EQT_NO:Ls.id,EQT_SERNO:Ls.serialNumber,ITEM_MID_CD:Ft,EQT_CL_CD:Ls.eqtClCd,MAC_ADDRESS:Bt.macAddress||Ls.macAddress,WRK_ID:t.id,CUST_ID:(fs=t.customer)==null?void 0:fs.id,CTRT_ID:Ie?Cs:Ms,WRK_CD:t.WRK_CD,REG_UID:Re,SVC_CMPS_ID:ws,BASIC_PROD_CMPS_ID:bs,PROD_CMPS_ID:it.PROD_CMPS_ID||Bt.PROD_CMPS_ID||"",SVC_CD:it.SVC_CD||Bt.SVC_CD||"",PROD_CD:it.PROD_CD||Bt.PROD_CD||"",LENT_YN:zt,EQT_CHG_GB:Bt.EQT_CHG_GB||"01",...ts,...Ut}}const Bs=Bt.ITEM_MID_CD||Bt.itemMidCd||"",_s=Bt.BASIC_PROD_CMPS_ID||He(Bs),Es=Bt.LENT||Bt.LENT_YN||Bt.lentYn||ht(Bs),js=Bt.SVC_CMPS_ID||Pt(Bs);return{...Bt,EQT_NO:Bt.EQT_NO||Bt.id||"",EQT_SERNO:Bt.EQT_SERNO||Bt.serialNumber||"",ITEM_MID_CD:Bs,EQT_CL_CD:Bt.EQT_CL_CD||Bt.eqtClCd||"",MAC_ADDRESS:Bt.MAC_ADDRESS||Bt.macAddress||"",SVC_CMPS_ID:js,BASIC_PROD_CMPS_ID:_s,LENT_YN:Es,PROD_CD:Bt.PROD_CD||"",SVC_CD:Bt.SVC_CD||"",WRK_ID:t.id,CUST_ID:(Ys=t.customer)==null?void 0:Ys.id,CTRT_ID:Ie?Cs:Ms,WRK_CD:t.WRK_CD,REG_UID:Re,...ts,...Ut}})},ft=async()=>{var Bs,_s,Es,js,cs,fs,Ys,Ls,it,Ft,bs;const Se=Vt.replace(/-/g,""),Ie=localStorage.getItem("userInfo"),Te=Ie?JSON.parse(Ie):{},nt=Te.userId||"A20130708",Re=o||u0(t.OP_LNKD_CD),Ct=await y_(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let Ke="";if(Re){let zt=(N==null?void 0:N.prodPromoInfo)||[];if(zt.length===0)try{console.log("[CompleteChange] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),zt=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"05"}),console.log("[CompleteChange] getProdPromotionInfo fallback :",zt.length,"")}catch(es){console.log("[CompleteChange] getProdPromotionInfo fallback :",es)}const ws=zt.filter(es=>(es.PROD_CMPS_CL==="21"||es.PROD_CMPS_CL==="22")&&(es.PROD_STAT_CD==="10"||es.PROD_STAT_CD==="20")).map(es=>es.PROD_CD).filter(es=>es);Ke=ws.length>0?ws.join(",")+",":"",console.log("[CompleteChange] ADD_ON :",Ke)}const Et=(N==null?void 0:N.installedEquipments)||[];if(Re&&Et.length>0&&!g){r==null||r("  .","error");return}if(Re&&g)try{const zt=t.OLD_PROD_CD||"",ws=t.CTRT_ID||"",es=t.SO_ID||"";let Os="";const As=await N1(),Ws=(await qa("CMIF006")).map(Is=>Is.code);console.log("[CompleteChange] certifyProdList:",As.length,"certifySoIds:",Ws);let $s=!1;if(As.includes(zt))try{const Is=await Vg({CTRT_ID:ws,CUST_ID:((Bs=t.customer)==null?void 0:Bs.id)||t.CUST_ID||"",SO_ID:es,REG_UID:nt,WRK_ID:t.id||""}),xs=Array.isArray(Is)?Is[0]:Is;console.log("[CompleteChange] CL-08 result:",xs,"oldCtrtId:",ws),xs&&!xs.ERROR&&xs.CONT_ID===ws&&($s=!0)}catch(Is){console.log("[CompleteChange] CL-08 query failed:",Is)}else console.log("[CompleteChange] OLD_PROD_CD not in certify_prod, skip CL-08");if($s)if(t.IS_CERTIFY_PROD==1&&Ws.includes(es))Os="U",console.log("[CompleteChange] CERTIFY_TYPE=U (OLD+NEW certified)");else{const Is=await p6(t,nt,ws);if(!Is.success){r==null||r(`  : ${Is.error}`,"error");return}}else t.IS_CERTIFY_PROD==1&&Ws.includes(es)&&(Os="C",console.log("[CompleteChange] CERTIFY_TYPE=C (NEW only certified)"));if(Os){const Is=await p_({order:t,workerId:nt,certifyRegconfInfo:g,addOnParam:Ke,reason:Os==="U"?"":"",certifyType:Os,contIdOld:Os==="U"?ws:void 0});if(!Is.success){r==null||r(` : ${Is.message}`,"error");return}console.log("[CompleteChange] CL-04    ")}}catch(zt){console.error("[CompleteChange] CL-04  :",zt),r==null||r(`  : ${zt.message||"   "}`,"error");return}let Rt="";const He=t.CTRT_ID||"",ht=t.OLD_PROD_CD||"",Pt=ht&&ue.length>0&&ue.some(zt=>zt.PROD_CD===ht),Bt=(N==null?void 0:N.removedEquipments)||[];if(ye&&Pt)console.log("[CompleteChange] LGHVLGHV :   skip ( )");else if(!Ct&&Bt.length>0)try{let zt="SMR05",ws="";if(Pt){zt="STB_DEL";const Ws=Bt.find($s=>{var Is,xs;return($s.ITEM_MID_CD||$s.itemMidCd||((Is=$s.actualEquipment)==null?void 0:Is.ITEM_MID_CD)||((xs=$s.actualEquipment)==null?void 0:xs.itemMidCd))==="04"});Ws&&(ws=Ws.EQT_NO||Ws.id||((_s=Ws.actualEquipment)==null?void 0:_s.EQT_NO)||((Es=Ws.actualEquipment)==null?void 0:Es.id)||"")}let es="";try{const Ws=await Tl({CTRT_ID:He,RCPT_ID:t.RCPT_ID||"",PROC_CL:"TERM",WRK_CD:"05"});console.log("[CompleteChange] getProdPromotionInfo :",Ws);const $s=Ws.find(Is=>Is.PROD_CMPS_CL==="23");$s&&(es=$s.PROD_CMPS_ID||""),console.log("[CompleteChange] EQT_PROD_CMPS_ID:",es)}catch(Ws){console.log("[CompleteChange] getProdPromotionInfo   ():",Ws)}const Os=t.END_PROD_CD||t.VOIP_PROD_CD||"";let As="";Os&&(As=He),console.log("[CompleteChange]   :",{msgId:zt,ctrtId:He,eqtProdCmpsId:es});const ms=await _a({MSG_ID:zt,CUST_ID:((js=t.customer)==null?void 0:js.id)||t.CUST_ID||"",CTRT_ID:He,SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:es,PROD_CD:"",ITV_USR_ID:"",IP_CNT:"",ETC_1:ws,ETC_2:"",ETC_3:"",ETC_4:"",SUB_PROD_CD:"",IF_DTL_ID:"",WRK_ID:t.id||"",REG_UID:nt,VOIP_JOIN_CTRT_ID:As||L||"",WTIME:"3"});if(console.log("[CompleteChange]    :",ms),(ms==null?void 0:ms.code)==="SUCCESS"||(ms==null?void 0:ms.code)==="PARTIAL")Rt=(ms==null?void 0:ms.IF_DTL_ID)||"",console.log("[CompleteChange] removal signal SUCCESS, IF_DTL_ID:",Rt);else{const Ws=(ms==null?void 0:ms.message)||(ms==null?void 0:ms.rawResult)||"";console.warn("[CompleteChange] removal signal FAILED -  :",Ws),r==null||r(`   : ${Ws}`,"warning")}}catch(zt){console.warn("[CompleteChange] removal signal error -  :",zt),r==null||r("     .","warning")}const Yt=t.DTL_CTRT_ID||t.CTRT_ID||"";console.log("========== [CompleteChange]    =========="),console.log("[DEBUG] order.CTRT_ID (OLD ):",t.CTRT_ID),console.log("[DEBUG] order.DTL_CTRT_ID (NEW ):",t.DTL_CTRT_ID),console.log("[DEBUG] order.OLD_CTRT_ID:",t.OLD_CTRT_ID),console.log("[DEBUG] ctrtIdForProductChange (workInfo ):",Yt),console.log("[DEBUG]   (installedEquipments):",((cs=N==null?void 0:N.installedEquipments)==null?void 0:cs.length)||0,""),(fs=N==null?void 0:N.installedEquipments)==null||fs.forEach((zt,ws)=>{var es,Os,As,ms,Ws;console.log(`[DEBUG] [${ws}]:`,{EQT_NO:zt.EQT_NO||zt.id||((es=zt.actualEquipment)==null?void 0:es.id),EQT_SERNO:zt.EQT_SERNO||zt.serialNumber||((Os=zt.actualEquipment)==null?void 0:Os.serialNumber),CTRT_ID:zt.CTRT_ID,SVC_CMPS_ID:zt.SVC_CMPS_ID||((As=zt.contractEquipment)==null?void 0:As.SVC_CMPS_ID),BASIC_PROD_CMPS_ID:zt.BASIC_PROD_CMPS_ID||((ms=zt.contractEquipment)==null?void 0:ms.BASIC_PROD_CMPS_ID),LENT_YN:zt.LENT_YN||zt.LENT||((Ws=zt.contractEquipment)==null?void 0:Ws.LENT)})}),console.log("[DEBUG]   (removedEquipments):",((Ys=N==null?void 0:N.removedEquipments)==null?void 0:Ys.length)||0,""),(Ls=N==null?void 0:N.removedEquipments)==null||Ls.forEach((zt,ws)=>{var es,Os,As,ms,Ws;console.log(`[DEBUG] [${ws}]  :`,JSON.stringify(zt,null,2)),console.log(`[DEBUG] [${ws}] :`,{EQT_NO:zt.EQT_NO||zt.id||((es=zt.actualEquipment)==null?void 0:es.id),EQT_SERNO:zt.EQT_SERNO||zt.serialNumber||((Os=zt.actualEquipment)==null?void 0:Os.serialNumber),CTRT_ID:zt.CTRT_ID,SVC_CMPS_ID:zt.SVC_CMPS_ID||((As=zt.contractEquipment)==null?void 0:As.SVC_CMPS_ID),BASIC_PROD_CMPS_ID:zt.BASIC_PROD_CMPS_ID||((ms=zt.contractEquipment)==null?void 0:ms.BASIC_PROD_CMPS_ID),LENT_YN:zt.LENT_YN||zt.LENT||((Ws=zt.contractEquipment)==null?void 0:Ws.LENT),ITEM_MID_CD:zt.ITEM_MID_CD||zt.itemMidCd,ITEM_CD:zt.ITEM_CD,EQT_CL_CD:zt.EQT_CL_CD||zt.eqtClCd,PROD_CMPS_ID:zt.PROD_CMPS_ID})});const Xt=Ae((N==null?void 0:N.installedEquipments)||[],!1),ts=Ae((N==null?void 0:N.removedEquipments)||[],!0);console.log("[DEBUG]   (equipmentList):",Xt.length,""),Xt.forEach((zt,ws)=>{console.log(`[DEBUG]  [${ws}]:`,{EQT_NO:zt.EQT_NO,CTRT_ID:zt.CTRT_ID,CRR_TSK_CL:zt.CRR_TSK_CL,SVC_CMPS_ID:zt.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:zt.BASIC_PROD_CMPS_ID})}),console.log("[DEBUG]   (removeEquipmentList):",ts.length,""),ts.forEach((zt,ws)=>{console.log(`[DEBUG]  [${ws}] :`,JSON.stringify(zt,null,2))}),console.log("========== [CompleteChange]    ==========");let Ut=t.WRK_DTL_TCD||"";Ut==="0550"?Ut="0560":Ut==="0510"&&(Ut="0520");const Ms={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:Ut,CUST_ID:(it=t.customer)==null?void 0:it.id,CTRT_ID:Yt,RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Te.crrId||"01",WRKR_ID:nt,WRKR_CMPL_DT:Se,MEMO:B||" ",STTL_YN:"Y",REG_UID:nt,CUST_REL:M,CNFM_CUST_NM:((Ft=t.customer)==null?void 0:Ft.name)||"",CNFM_CUST_TELNO:((bs=t.customer)==null?void 0:bs.contactNumber)||"",INSTL_LOC:ie||t.installLocation||"",UP_CTRL_CL:X||"",PSN_USE_CORP:U||"",VOIP_USE_CORP:E||"",DTV_USE_CORP:Y||"",WRK_ACT_CL:"20",TV_TYPE:"",NET_CL:(de==null?void 0:de.NET_CL)||"",WRNG_TP:(de==null?void 0:de.WRNG_TP)||"",INSTL_TP:(de==null?void 0:de.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:L||"",ADD_ON:Ke||""},equipmentList:Xt,removeEquipmentList:ts,spendItemList:(N==null?void 0:N.spendItems)||[],agreementList:(N==null?void 0:N.agreements)||[],poleList:mt?[{WRK_ID:t.id,POLE_YN:mt.POLE_YN,LAN_GB:mt.LAN_GB||"",REG_UID:nt}]:[]},Cs=async()=>{var zt,ws,es;try{if(Ct){console.log("[CompleteChange] FTTH :  skip ( )");return}const Os=(N==null?void 0:N.installedEquipments)||[],As=t.OLD_PROD_CD||"",ms=ue.some(Ds=>Ds.PROD_CD===As);let Ws="SMR03";ye&&(Ws=ms?"PKG_CHG":"STB_CRT");const $s=Ds=>Os.find(Un=>{var $n,si;return(Un.ITEM_MID_CD||Un.itemMidCd||(($n=Un.actualEquipment)==null?void 0:$n.ITEM_MID_CD)||((si=Un.actualEquipment)==null?void 0:si.itemMidCd))===Ds}),Is=Ds=>{var Un,$n;return(Ds==null?void 0:Ds.EQT_NO)||(Ds==null?void 0:Ds.id)||((Un=Ds==null?void 0:Ds.actualEquipment)==null?void 0:Un.EQT_NO)||(($n=Ds==null?void 0:Ds.actualEquipment)==null?void 0:$n.id)||""},xs=t.BGN_PROD_CD||t.VOIP_PROD_CD||"",Br=t.BGN_PROD_GRP||t.PROD_GRP||"";let Ar="",ti="",Mr="",hn="";try{const Ds=await Tl({CTRT_ID:t.DTL_CTRT_ID||t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"05"}),Un=Ds.find(Ii=>Ii.PROD_CMPS_CL==="23");Un&&(Ar=Un.PROD_CMPS_ID||"");const $n=Ds.find(Ii=>Ii.PROD_CMPS_CL==="11");$n&&(ti=$n.PROD_CD||"",hn=$n.PROD_GRP||"");const si=Ds.filter(Ii=>Ii.BASIC_PROD_FL==="V").map(Ii=>Ii.PROD_CD);si.length>0&&(Mr=si.join(","))}catch(Ds){console.log("[CompleteChange] getProdPromotionInfo for install signal failed:",Ds)}let fr="";if(xs){const Ds=$s("08");Ds&&(fr=Is(Ds))}else{for(const Ds of["05","01","03"]){const Un=$s(Ds);if(Un){fr=Is(Un);break}}if(!fr&&hn==="I"){const Ds=$s("02");Ds&&(fr=Is(Ds))}if(!fr){const Ds=$s("08");Ds&&(fr=Is(Ds))}}let ci="";if(xs){const Ds=$s("02");Ds&&(ci=Is(Ds))}else{const Ds=$s("04");Ds?ci=Is(Ds):ci=(de==null?void 0:de.NET_CL)||""}const Vr=Is($s("07")),sa=hn==="C"?Is($s("02")):"";let kr="";if($s("10")&&Br==="V"&&(kr=Is($s("10"))),t.BGN_ISP_PROD_CD||t.ISP_PROD_CD||""){const Ds=$s("21");Ds&&(kr=Is(Ds))}let Ir=t.id||"";const Ga=Os.find(Ds=>{var Un,$n;return(Ds.EQT_CL_CD||Ds.eqtClCd||((Un=Ds.actualEquipment)==null?void 0:Un.EQT_CL_CD)||(($n=Ds.actualEquipment)==null?void 0:$n.eqtClCd))==="091003"});if(Ga)Ir=Is(Ga);else{const Ds=Os.find(Un=>{var $n,si;return(Un.EQT_CL_CD||Un.eqtClCd||(($n=Un.actualEquipment)==null?void 0:$n.EQT_CL_CD)||((si=Un.actualEquipment)==null?void 0:si.eqtClCd))==="092201"});Ds&&(Ir=(Ds==null?void 0:Ds.MAC_ADDRESS)||(Ds==null?void 0:Ds.macAddress)||((zt=Ds==null?void 0:Ds.actualEquipment)==null?void 0:zt.MAC_ADDRESS)||((ws=Ds==null?void 0:Ds.actualEquipment)==null?void 0:ws.macAddress)||"")}let tl="";xs?tl=t.CTRT_ID||"":tl=L||"",console.log("[CompleteChange]  :",{msgId:Ws,eqtNo:fr,instProdCd:ti,instEqtProdCmpsId:Ar,subProdCd:Mr}),await _a({MSG_ID:Ws,CUST_ID:((es=t.customer)==null?void 0:es.id)||t.CUST_ID||"",CTRT_ID:t.DTL_CTRT_ID||t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:fr,EQT_PROD_CMPS_ID:Ar,PROD_CD:ti,ITV_USR_ID:"",IP_CNT:"",ETC_1:ci,ETC_2:Vr,ETC_3:sa,ETC_4:kr,SUB_PROD_CD:Mr,IF_DTL_ID:"",WRK_ID:Ir,REG_UID:nt,VOIP_JOIN_CTRT_ID:tl,WTIME:"3"}),console.log("[CompleteChange]   ")}catch(Os){console.log("[CompleteChange]     (  ):",Os)}};v(Ms,{onSuccess:zt=>{zt.code==="SUCCESS"||zt.code==="OK"?(localStorage.removeItem(w()),t.WRK_STAT_CD="3",Cs(),r==null||r("  .","success"),n()):r==null||r(zt.message||"   .","error",!0)},onError:zt=>{r==null||r(zt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[P&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[j?s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:L,onValueChange:re,options:fe,placeholder:" ",required:!0,disabled:c})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx("input",{type:"text",value:"",readOnly:!0,disabled:!0,className:"w-full min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:te||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>ce(!0),className:`px-3 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${c?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:c?"":""}),u&&s.jsx("button",{type:"button",onClick:()=>Ce(!0),className:`px-3 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${c?"bg-gray-500 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:c?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:M,onValueChange:k,options:at,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{children:ie||t.installLocation||""}),st&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(: ",st,")"]})]}),s.jsx("button",{type:"button",onClick:()=>ne(!0),className:`px-4 py-2 rounded-lg font-bold text-sm whitespace-nowrap ${c?"bg-gray-500 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:c?"":""})]})]}),((N==null?void 0:N.kpiProdGrpCd)==="D"||(N==null?void 0:N.prodGrp)==="D"||t.PROD_GRP==="D"||(t.PROD_NM||"").includes("DTV"))&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(sn,{value:X,onValueChange:z,options:tt,placeholder:"",disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:B,onChange:Se=>G(Se.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:c,disabled:c}),!c&&s.jsxs("p",{className:`text-xs text-right mt-1 ${B.length>=500?"text-red-500":"text-gray-400"}`,children:[B.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Vt,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>F(!$),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${$?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),$&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"DTV ()"}),s.jsx(sn,{value:Y,onValueChange:se,options:$e,placeholder:"",disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"ISP ()"}),s.jsx(sn,{value:U,onValueChange:I,options:Mt,placeholder:"",disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"VoIP (VoIP)"}),s.jsx(sn,{value:E,onValueChange:A,options:Je,placeholder:"",disabled:c})]})]})]}),ut&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["OTT BOX  ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:vt,readOnly:!0,placeholder:"SER_NO   ",className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-600"}),s.jsxs("button",{type:"button",onClick:()=>Le(!0),disabled:c,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${c?"bg-gray-400 text-white cursor-not-allowed":vt?"bg-green-500 hover:bg-green-600 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"SER_NO"]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!c&&s.jsx("button",{onClick:vs,disabled:P,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${P?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:P?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>xe(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:V,onClose:()=>ce(!1),onSave:ls,workId:t.id,initialData:de,workType:t.WRK_CD,customerId:(Wt=t.customer)==null?void 0:Wt.id,customerName:(_t=t.customer)==null?void 0:_t.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD,kpiProdGrpCd:(N==null?void 0:N.kpiProdGrpCd)||(N==null?void 0:N.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:"01",chgKpiProdGrpCd:(N==null?void 0:N.chgKpiProdGrpCd)||(N==null?void 0:N.CHG_KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodGrp:(N==null?void 0:N.prodGrp)||(N==null?void 0:N.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:c}),s.jsx(Pc,{isOpen:me,onClose:()=>Ce(!1),onSave:ds,workId:t.id,initialData:ee,workType:"08",customerId:(qt=t.customer)==null?void 0:qt.id,customerName:(Ot=t.customer)==null?void 0:Ot.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD,kpiProdGrpCd:(N==null?void 0:N.kpiProdGrpCd)||(N==null?void 0:N.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:"02",chgKpiProdGrpCd:(N==null?void 0:N.chgKpiProdGrpCd)||(N==null?void 0:N.CHG_KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodGrp:(N==null?void 0:N.prodGrp)||(N==null?void 0:N.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:c}),s.jsx(el,{isOpen:le,onClose:()=>xe(!1),ctrtId:t.CTRT_ID,custId:(_e=t.customer)==null?void 0:_e.id}),s.jsx(xm,{isOpen:be,onClose:()=>ne(!1),onSave:Se=>{pe(Se.INSTL_LOC),xt(Se.VIEW_MOD_CD),St(Se.VIEW_MOD_NM),ne(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(N==null?void 0:N.prodGrp)||(N==null?void 0:N.PROD_GRP),initialInstlLoc:ie||t.installLocation,initialViewModCd:ze,initialViewModNm:st,showToast:r,readOnly:c}),s.jsx(b_,{isOpen:lt,onClose:()=>pt(!1),onSave:Ss,soId:t.SO_ID||""}),s.jsx(Ba,{isOpen:ot,onClose:()=>Be(!1),onConfirm:ft,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{equipmentData:N,installInfoData:de,custRel:M,custRelOptions:at,memo:B,installLocationText:ie,order:t})}),s.jsx(rN,{isOpen:Ze,onClose:()=>Le(!1),onSave:Se=>{je(Se),r==null||r("OTT  .","success")},wrkId:t.id||"",wrkDrctnId:t.directionId||t.WRK_DRCTN_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",dataType:jt,showToast:r,readOnly:c})]})},aN=({isOpen:t,onClose:e,wrkCd:n,wrkId:r,rcptId:i})=>{const[a,o]=b.useState(!1),[c,u]=b.useState(null),[h,m]=b.useState(null),_=n==="07"?"":"";b.useEffect(()=>{t&&r&&p()},[t,r,n]);const p=async()=>{o(!0),m(null);try{const C=await x_({WRK_CD:n,WRK_ID:r,RCPT_ID:i});C?u(C):m("   .")}catch(C){console.error("  :",C),m(C.message||"  .")}finally{o(!1)}},g=s.jsx("button",{onClick:e,className:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors",children:""});return s.jsx(Ra,{isOpen:t,onClose:e,title:_,size:"medium",footer:g,children:a?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:" ..."})]}):h?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-red-500 mb-2",children:h}),s.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:" "})]}):c?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:c.MVM_TP_NM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:c.PROD_NM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:c.HOPE_DTTM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium",children:c.WRK_STAT_NM||"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"text-gray-900 font-medium whitespace-pre-wrap",children:c.ADDR_ORD||"-"})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:" ."})})},YM=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1,certifyMode:o=!1,certifyReason:c})=>{var ls,ds,vs,Ss;const u=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",h=t.WRK_CD==="07",[m,_]=b.useState(!1),{equipmentData:p,filteringData:g}=ta(),{certifyRegconfInfo:C}=Za(),y=t.id||"",N=xa(y),v={...p||i||g||{},installedEquipments:N.installedEquipments.length>0?N.installedEquipments:(p==null?void 0:p.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:N.markedForRemoval.length>0?N.markedForRemoval:(p==null?void 0:p.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(N.removalStatus).length>0?N.removalStatus:(p==null?void 0:p.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:P,isPending:w}=jd(),M=()=>`work_complete_draft_${t.id}`,[k,B]=b.useState(""),[G,U]=b.useState(""),[I,E]=b.useState(""),[A,Y]=b.useState(""),[se,X]=b.useState(""),[z,$]=b.useState(""),[F,L]=b.useState(!1),[re,fe]=b.useState(!1),[T,j]=b.useState(!1),[K,J]=b.useState(""),[q,V]=b.useState([]),[ce,me]=b.useState(!1),[Ce,ge]=b.useState([]),[Ge,te]=b.useState(!1),[he,de]=b.useState(""),[Q,ee]=b.useState(""),[Z,le]=b.useState(void 0),[xe,be]=b.useState(!1),[ne,ie]=b.useState(!1),[pe,ze]=b.useState(""),[xt,st]=b.useState(""),[St,ot]=b.useState(""),[Be,lt]=b.useState(!1),[pt,mt]=b.useState(!1),[Ye,at]=b.useState(!1),[Fe,tt]=b.useState(null),[ct,Mt]=b.useState([]),[dt,Je]=b.useState([]),[De,$e]=b.useState([]),[Ne,ye]=b.useState([]),[Ue,ue]=b.useState([]),[Oe,Ze]=b.useState(!1),[Le,vt]=b.useState([]),[je,ut]=b.useState(()=>{const Ae=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Ae&&Ae.length>=8)return`${Ae.slice(0,4)}-${Ae.slice(4,6)}-${Ae.slice(6,8)}`;const ft=new Date;return ft.getFullYear()+"-"+String(ft.getMonth()+1).padStart(2,"0")+"-"+String(ft.getDate()).padStart(2,"0")});b.useEffect(()=>{if(u){(async()=>{try{const rt=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(rt){B(rt.CUST_REL||""),U((rt.WRK_PROC_CT||"").replace(/\\n/g,`
`)),E(rt.PSN_USE_CORP||""),Y(rt.VOIP_USE_CORP||""),X(rt.DTV_USE_CORP||"");const Wt=rt.UP_CTRL_CL||(v==null?void 0:v.upCtrlCl)||"";console.log("[CompleteMoveRemoval]  :",{API:rt.UP_CTRL_CL,:v==null?void 0:v.upCtrlCl,:Wt}),$(Wt),de(rt.NET_CL||""),ee(rt.NET_CL_NM||""),ze(rt.INSTL_LOC||""),le({NET_CL:rt.NET_CL||"",NET_CL_NM:rt.NET_CL_NM||"",WRNG_TP:rt.WRNG_TP||"",INSTL_TP:rt.INSTL_TP||"",CB_WRNG_TP:rt.CB_WRNG_TP||"",CB_INSTL_TP:rt.CB_INSTL_TP||"",INOUT_LINE_TP:rt.INOUT_LINE_TP||"",INOUT_LEN:rt.INOUT_LEN||"",DVDR_YN:rt.DVDR_YN||"",BFR_LINE_YN:rt.BFR_LINE_YN||"",CUT_YN:rt.CUT_YN||"",TERM_NO:rt.TERM_NO||"",RCV_STS:rt.RCV_STS||"",SUBTAP_ID:rt.SUBTAP_ID||"",PORT_NUM:rt.PORT_NUM||"",EXTN_TP:rt.EXTN_TP||"",TAB_LBL:rt.TAB_LBL||"",CVT_LBL:rt.CVT_LBL||"",STB_LBL:rt.STB_LBL||""}),rt.VOIP_JOIN_CTRT_ID&&J(rt.VOIP_JOIN_CTRT_ID),(rt.CHK_CUST_ADDR==="true"||rt.CHK_CUST_ADDR==="Y")&&L(!0),(rt.CHK_PYM_ADDR==="true"||rt.CHK_PYM_ADDR==="Y")&&fe(!0),rt.WRKR_CMPL_DT&&rt.WRKR_CMPL_DT.length>=8&&ut(`${rt.WRKR_CMPL_DT.slice(0,4)}-${rt.WRKR_CMPL_DT.slice(4,6)}-${rt.WRKR_CMPL_DT.slice(6,8)}`)}}catch(rt){console.error("[WorkCompleteMoveRemoval]     :",rt)}_(!0)})();return}const Ae=localStorage.getItem(M());if(Ae)try{const ft=JSON.parse(Ae);B(ft.custRel||""),U(ft.memo||""),E(ft.internetUse||""),Y(ft.voipUse||""),X(ft.dtvUse||""),$(ft.upCtrlCl||""),de(ft.networkType||""),ee(ft.networkTypeName||""),ze(ft.installLocationText||""),le(ft.installInfoData),ft.voipJoinCtrtId&&J(ft.voipJoinCtrtId),ft.chkCustAddr!==void 0&&L(ft.chkCustAddr),ft.chkPymAddr!==void 0&&fe(ft.chkPymAddr)}catch(ft){console.error("[WorkCompleteMoveRemoval] localStorage  :",ft)}_(!0)},[t.id,u]),b.useEffect(()=>{if(!m||u)return;const Ae={custRel:k,memo:G,internetUse:I,voipUse:A,dtvUse:se,upCtrlCl:z,networkType:he,networkTypeName:Q,installLocationText:pe,installInfoData:Z,voipJoinCtrtId:K,chkCustAddr:F,chkPymAddr:re,savedAt:new Date().toISOString()};localStorage.setItem(M(),JSON.stringify(Ae))},[k,G,I,A,se,z,he,Q,pe,Z,K,F,re,m,u]),b.useEffect(()=>{(async()=>{try{const ft=await No(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);ft.CMCU005&&Mt(ft.CMCU005.map(rt=>({value:rt.COMMON_CD,label:rt.COMMON_CD_NM}))),ft.CMCT015&&(console.log("[CompleteMoveRemoval]  CMCT015 :",ft.CMCT015),Je(ft.CMCT015.map(rt=>({value:rt.COMMON_CD,label:rt.COMMON_CD_NM})))),ft.CMCU057&&$e(ft.CMCU057.map(rt=>({value:rt.COMMON_CD,label:rt.COMMON_CD_NM}))),ft.CMCU110&&ye(ft.CMCU110.map(rt=>({value:rt.COMMON_CD,label:rt.COMMON_CD_NM}))),ft.CMCU148&&ue(ft.CMCU148.map(rt=>({value:rt.COMMON_CD,label:rt.COMMON_CD_NM})))}catch(ft){console.error("[WorkCompleteMoveRemoval]   :",ft)}})()},[]),b.useEffect(()=>{(async()=>{try{const ft=await Uc();vt(ft||[]),console.log("[CompleteInternalMove] LGHV  :",ft==null?void 0:ft.length);const rt=t.PROD_CD||t.BASIC_PROD_CD||"";if(rt&&ft&&ft.length>0){const Wt=ft.some(_t=>_t.PROD_CD===rt);Ze(Wt),console.log("[CompleteInternalMove] LGHV STB :",Wt,"PROD_CD:",rt)}}catch(ft){console.error("[CompleteInternalMove] LGHV    :",ft)}})()},[t.id]),b.useEffect(()=>{v!=null&&v.upCtrlCl&&!z?(console.log("[CompleteMoveRemoval] equipmentData  :",v.upCtrlCl),$(v.upCtrlCl)):!z&&m&&!u&&(console.log("[CompleteMoveRemoval]   : 01 ()"),$("01"))},[v==null?void 0:v.upCtrlCl,m,u,z]),b.useEffect(()=>{var rt;if(u)return;const Ae=((rt=t.customer)==null?void 0:rt.id)||t.CUST_ID;if(!Ae)return;(async()=>{try{console.log("[WorkCompleteMoveRemoval]     :",Ae);const Wt=await _m({CUST_ID:Ae});console.log("[WorkCompleteMoveRemoval]   :",Wt),ge(Wt||[])}catch(Wt){console.error("[WorkCompleteMoveRemoval]     :",Wt),ge([])}})()},[(ls=t.customer)==null?void 0:ls.id,t.CUST_ID,u]),b.useEffect(()=>{if(u)return;if(Ce.length===0){console.log("[WorkCompleteMoveRemoval]     ...");return}const Ae=t.PROD_GRP||"",ft=t.VOIP_PROD_CD||"",rt=t.ISP_PROD_CD||"",Wt=t.WRK_STAT_CD||"",_t=t.ADDR_ORD||"";if(console.log("[WorkCompleteMoveRemoval]   :",{prodGrp:Ae,voipProdCd:ft,ispProdCd:rt,wrkStatCd:Wt,addrOrd:_t,customerCtrtListCount:Ce.length}),Ae==="V"&&!ft){const qt=Ce.filter(_e=>{const Se=_e.PROD_GRP||"",Ie=_e.CTRT_STAT||"",Te=_e.ADDR_ORD||_e.addr_ord||"";return(Se==="C"||Se==="D"||Se==="I")&&Ie==="20"&&(!_t||Te===_t)});console.log("[WorkCompleteMoveRemoval] VoIP   :",qt),qt.length<1&&Wt==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const Ot=[{value:"",label:""},...qt.map(_e=>({value:_e.CTRT_ID||"",label:`[${_e.CTRT_ID}] ${_e.BASIC_PROD_CD_NM||_e.PROD_NM||""}`}))];V(Ot),me(!0);return}if(Ae==="I"&&rt){const qt=Ce.filter(_e=>{const Se=_e.PROD_GRP||"",Ie=_e.CTRT_STAT||"",Te=_e.ADDR_ORD||_e.addr_ord||"",nt=_e.ISP_JOIN_ID||"",Re=_e.KPI_PROD_GRP_CD||"";return(Se==="D"||Se==="C")&&Ie==="20"&&!nt&&Re==="D"&&(!_t||Te===_t)});console.log("[WorkCompleteMoveRemoval] ISP   :",qt),qt.length<1&&Wt==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const Ot=[{value:"",label:""},...qt.map(_e=>({value:_e.CTRT_ID||"",label:`[${_e.CTRT_ID}] ${_e.BASIC_PROD_CD_NM||_e.PROD_NM||""}`}))];V(Ot),me(!0);return}me(!1),V([])},[t.id,t.WRK_STAT_CD,u,r,Ce]);const gt=()=>{const Ae=[];k||Ae.push("  ."),Z!=null&&Z.NET_CL||Ae.push(" ."),pe||Ae.push(" ."),je||Ae.push(" .");const ft=t.PROD_GRP||"",rt=t.VOIP_PROD_CD||"",Wt=t.ISP_PROD_CD||"";ft==="V"&&!rt&&ce&&(K||Ae.push("VOIP    .")),ft==="I"&&Wt&&ce&&(K||Ae.push("  ISP .    ."));const _t=(v==null?void 0:v.installedEquipments)||[];return ft!=="V"&&_t.length<1&&Ae.push("()  ."),Ae},jt=Ae=>{le(Ae),Ae.NET_CL&&de(Ae.NET_CL),Ae.NET_CL_NM&&ee(Ae.NET_CL_NM),r==null||r("  .","success")},Ve=()=>{if(w)return;const Ae=gt();if(Ae.length>0){Ae.forEach(rt=>r==null?void 0:r(rt,"error"));return}(t.PROD_GRP||"")!=="V"?at(!0):lt(!0)},Vt=Ae=>{tt(Ae),at(!1),lt(!0)},ke=(Ae,ft=!1)=>{if(!Ae||Ae.length===0)return[];const rt=localStorage.getItem("userInfo"),Wt=rt?JSON.parse(rt):{},_t=Wt.userId||"A20130708",qt=(v==null?void 0:v.removalStatus)||{},Ot=(_e,Se)=>_e==="1"||_e==="Y"||Se==="1"||Se==="Y"?"1":"0";return Ae.map(_e=>{var nt,Re,Ct;const Se=_e.EQT_NO||_e.id||((nt=_e.actualEquipment)==null?void 0:nt.id)||"",Ie=qt[Se]||{},Te=ft?{CRR_TSK_CL:t.WRK_CD||"06",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Wt.crrId||"01",WRKR_ID:_t,EQT_LOSS_YN:Ot(_e.EQT_LOSS_YN,Ie.EQT_LOSS_YN),PART_LOSS_BRK_YN:Ot(_e.PART_LOSS_BRK_YN,Ie.PART_LOSS_BRK_YN),EQT_BRK_YN:Ot(_e.EQT_BRK_YN,Ie.EQT_BRK_YN),EQT_CABL_LOSS_YN:Ot(_e.EQT_CABL_LOSS_YN,Ie.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Ot(_e.EQT_CRDL_LOSS_YN,Ie.EQT_CRDL_LOSS_YN)}:{};if(_e.actualEquipment){const Ke=_e.actualEquipment,Et=_e.contractEquipment||{};return{...Ke,EQT_NO:Ke.id,EQT_SERNO:Ke.serialNumber,ITEM_MID_CD:Ke.itemMidCd,EQT_CL_CD:Ke.eqtClCd,MAC_ADDRESS:_e.macAddress||Ke.macAddress,WRK_ID:t.id,CUST_ID:(Re=t.customer)==null?void 0:Re.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:_t,SVC_CMPS_ID:Et.SVC_CMPS_ID||_e.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Et.BASIC_PROD_CMPS_ID||_e.BASIC_PROD_CMPS_ID||"",PROD_CMPS_ID:Et.PROD_CMPS_ID||_e.PROD_CMPS_ID||"",SVC_CD:Et.SVC_CD||_e.SVC_CD||"",PROD_CD:Et.PROD_CD||_e.PROD_CD||"",LENT_YN:_e.lentYn||_e.LENT_YN||Et.LENT_YN||"",EQT_CHG_GB:_e.EQT_CHG_GB||"01",...Te}}return{..._e,EQT_NO:_e.EQT_NO||_e.id||"",EQT_SERNO:_e.EQT_SERNO||_e.serialNumber||"",ITEM_MID_CD:_e.ITEM_MID_CD||_e.itemMidCd||"",EQT_CL_CD:_e.EQT_CL_CD||_e.eqtClCd||"",MAC_ADDRESS:_e.MAC_ADDRESS||_e.macAddress||"",SVC_CMPS_ID:_e.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:_e.BASIC_PROD_CMPS_ID||"",PROD_CD:_e.PROD_CD||"",SVC_CD:_e.SVC_CD||"",WRK_ID:t.id,CUST_ID:(Ct=t.customer)==null?void 0:Ct.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:_t,...Te}})},ss=async()=>{var nt,Re,Ct,Ke,Et;const Ae=je.replace(/-/g,""),ft=localStorage.getItem("userInfo"),rt=ft?JSON.parse(ft):{},Wt=rt.userId||"A20130708",_t=o||u0(t.OP_LNKD_CD),qt=await y_(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let Ot="";if(_t){let Rt=(v==null?void 0:v.prodPromoInfo)||[];if(Rt.length===0)try{console.log("[CompleteInternalMove] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),Rt=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"06"}),console.log("[CompleteInternalMove] getProdPromotionInfo fallback :",Rt.length,"")}catch(ht){console.log("[CompleteInternalMove] getProdPromotionInfo fallback :",ht)}const He=Rt.filter(ht=>(ht.PROD_CMPS_CL==="21"||ht.PROD_CMPS_CL==="22")&&(ht.PROD_STAT_CD==="10"||ht.PROD_STAT_CD==="20")).map(ht=>ht.PROD_CD).filter(ht=>ht);Ot=He.length>0?He.join(",")+",":"",console.log("[CompleteInternalMove] ADD_ON :",Ot)}const _e=(v==null?void 0:v.installedEquipments)||[];if(_t&&_e.length>0&&!C){r==null||r("  .","error");return}if(_t&&C)try{const Rt=t.OLD_CTRT_ID||t.CTRT_ID||"",{certifyType:He}=await BM(t,Wt,Rt);if(He){const ht=c||(He==="C"?"":""),Pt=He==="U"?(t.CTRT_ID||"")!==Rt?Rt:t.CTRT_ID||"":void 0,Bt=await p_({order:t,workerId:Wt,certifyRegconfInfo:C,addOnParam:Ot,reason:ht,certifyType:He,contIdOld:Pt});if(!Bt.success){r==null||r(` : ${Bt.message}`,"error");return}console.log("[CompleteInternalMove] CL-04    ")}}catch(Rt){console.error("[CompleteInternalMove] CL-04  :",Rt),r==null||r(`  : ${Rt.message||"   "}`,"error");return}const Se=(v==null?void 0:v.removedEquipments)||[];if(Se.length>0&&!qt&&!Oe){let Rt=!1;for(const He of Se){const ht=He.actualEquipment||He,Pt=ht.eqtClCd||ht.EQT_CL_CD||"";Pt==="090901"||Pt==="091001"||Pt==="091005"||(Rt=!0)}if(Rt)try{const He=Se[0],ht=He.EQT_PROD_CMPS_ID||((nt=He.actualEquipment)==null?void 0:nt.EQT_PROD_CMPS_ID)||t.EQT_PROD_CMPS_ID||"";console.log("[CompleteInternalMove]   :",{eqtProdCmpsId:ht,voipJoinCtrtId:K});const Pt=await _a({MSG_ID:"SMR05",CUST_ID:((Re=t.customer)==null?void 0:Re.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:ht,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Wt,ETC_1:"",VOIP_JOIN_CTRT_ID:K||"",WTIME:"3"});if(console.log("[CompleteInternalMove]    :",Pt),Pt&&Pt.PROC_VOIP&&Pt.PROC_VOIP.includes("KCT-029"))console.log("[CompleteInternalMove] VoIP KCT-029  ");else if(Pt.code!=="SUCCESS"&&Pt.code!=="OK"){console.warn("[CompleteInternalMove]    -  :",Pt.message),r==null||r("   .","error",!0);return}}catch(He){console.warn("[CompleteInternalMove]      -  :",He),r==null||r("     .","error",!0);return}}const Ie=async()=>{var Pt,Bt;const Rt=!!t.ISP_PROD_CD,He=(v==null?void 0:v.installedEquipments)||[];let ht=!1;if(!qt){const Yt=(v==null?void 0:v.customerEquipments)||He;for(const Xt of Yt){const ts=Xt.actualEquipment||Xt,Ut=ts.eqtClCd||ts.EQT_CL_CD||"";if(Ut==="090901"||Ut==="091001"||Ut==="091005")continue;(ts.EQT_KND||ts.eqtKnd||"WRKER")==="WRKER"&&(ht=!0)}(Rt||Yt.length>0)&&(ht=!0)}if(ht)try{const Yt=t.PROD_GRP||"";let Xt="SMR03",ts="",Ut="",Ms="",Cs="",Bs="",_s="";Oe&&(Xt="STB_CRT"),Yt==="V"&&(Xt="SMR60");let Es=(v==null?void 0:v.prodPromoInfo)||[];if(Es.length===0)try{Es=await Tl({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:Wt,PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"01",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||"",WRK_CD:t.WRK_CD||"06",WRK_STAT_CD:t.WRK_STAT_CD||""})}catch(ws){console.log("[CompleteInternalMove] prodPromoInfo  :",ws)}const js=((Pt=Es.find(ws=>ws.PROD_CMPS_CL==="23"))==null?void 0:Pt.PROD_CMPS_ID)||"",cs=Es.find(ws=>ws.PROD_CMPS_CL==="11"),fs=(cs==null?void 0:cs.PROD_CD)||"",Ys=(cs==null?void 0:cs.PROD_GRP)||Yt,Ls=Es.filter(ws=>ws.BASIC_PROD_FL==="V").map(ws=>ws.PROD_CD),it=Ls.length>0?Ls.join(","):"",Ft=ws=>{const es=He.find(As=>{const ms=As.actualEquipment||As;return(ms.itemMidCd||ms.ITEM_MID_CD)===ws});if(!es)return"";const Os=es.actualEquipment||es;return Os.id||Os.EQT_NO||""};t.VOIP_PROD_CD?(ts=Ft("08"),Ut=Ft("02")):(ts=Ft("05")||Ft("01")||Ft("03")||(Ys==="I"?Ft("02"):"")||Ft("08")||"",Ut=Ft("04")),Ms=Ft("07"),Ys==="C"&&(Cs=Ft("02")),Ys==="V"&&(Bs=Ft("10")),Rt&&(Bs=Ft("21")),(Yt==="V"||Rt)&&(_s=K||t.CTRT_ID||"");let bs=t.id||"";for(const ws of He){const es=ws.actualEquipment||ws,Os=es.eqtClCd||es.EQT_CL_CD||"";if(Os==="091003"||Os==="091004"){bs=es.id||es.EQT_NO||t.id||"";break}if(Os==="092201"){bs=es.macAddress||es.MAC_ADDRESS||es.id||es.EQT_NO||t.id||"";break}}console.log("[CompleteInternalMove]   :",{msgId:Xt,eqtNo:ts,prodCd:fs,subProdCd:it,etc1:Ut,etc2:Ms,etc3:Cs,etc4:Bs});const zt=await _a({MSG_ID:Xt,CUST_ID:((Bt=t.customer)==null?void 0:Bt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:ts,EQT_PROD_CMPS_ID:js,PROD_CD:fs,ITV_USR_ID:"",IP_CNT:"",ETC_1:Ut,ETC_2:Ms,ETC_3:Cs,ETC_4:Bs,SUB_PROD_CD:it,IF_DTL_ID:"",WRK_ID:bs,REG_UID:Wt,VOIP_JOIN_CTRT_ID:_s,WTIME:"3"});zt.code==="SUCCESS"||zt.code==="OK"?console.log("[CompleteInternalMove]    "):console.warn("[CompleteInternalMove]    :",zt.message)}catch(Yt){console.log("[CompleteInternalMove]      (  ):",Yt)}},Te={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Ct=t.customer)==null?void 0:Ct.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||rt.crrId||"01",WRKR_ID:Wt,WRKR_CMPL_DT:Ae,MEMO:G||" ",STTL_YN:"Y",REG_UID:Wt,CUST_REL:k,CNFM_CUST_NM:((Ke=t.customer)==null?void 0:Ke.name)||"",CNFM_CUST_TELNO:((Et=t.customer)==null?void 0:Et.contactNumber)||"",INSTL_LOC:pe||"",UP_CTRL_CL:z||"",PSN_USE_CORP:I||"",VOIP_USE_CORP:A||"",DTV_USE_CORP:se||"",WRK_ACT_CL:"20",TV_TYPE:"",NET_CL:(Z==null?void 0:Z.NET_CL)||"",WRNG_TP:(Z==null?void 0:Z.WRNG_TP)||"",INSTL_TP:(Z==null?void 0:Z.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:K||"",CHK_CUST_ADDR:h?F?"true":"false":"",CHK_PYM_ADDR:h?re?"true":"false":"",ADD_ON:Ot||""},equipmentList:ke((v==null?void 0:v.installedEquipments)||[],!1),removeEquipmentList:ke((v==null?void 0:v.removedEquipments)||[],!0),spendItemList:(v==null?void 0:v.spendItems)||[],agreementList:(v==null?void 0:v.agreements)||[],poleList:Fe?[{WRK_ID:t.id,POLE_YN:Fe.POLE_YN,LAN_GB:Fe.LAN_GB||"",REG_UID:Wt}]:[]};P(Te,{onSuccess:Rt=>{Rt.code==="SUCCESS"||Rt.code==="OK"?(localStorage.removeItem(M()),t.WRK_STAT_CD="3",Ie(),r==null||r("  .","success"),n()):r==null||r(Rt.message||"   .","error",!0)},onError:Rt=>{r==null||r(Rt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[w&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[ce&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:K,onValueChange:J,options:q,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:Q||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>te(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${u?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:u?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:k,onValueChange:B,options:ct,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{children:pe||""}),St&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(: ",St,")"]})]}),s.jsxs("button",{type:"button",onClick:()=>ie(!0),className:`min-h-10 px-3 sm:px-4 rounded-lg font-bold text-sm whitespace-nowrap flex items-center gap-1.5 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:[s.jsx(Rd,{className:"w-4 h-4"}),s.jsx("span",{children:u?"":""})]})]})]}),((v==null?void 0:v.kpiProdGrpCd)==="D"||(v==null?void 0:v.prodGrp)==="D"||t.PROD_GRP==="D")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(sn,{value:z,onValueChange:$,options:dt,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:G,onChange:Ae=>U(Ae.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${u?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:u,disabled:u}),!u&&s.jsxs("p",{className:`text-xs text-right mt-1 ${G.length>=500?"text-red-500":"text-gray-400"}`,children:[G.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:je,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>j(!T),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"DTV ()"}),s.jsx(sn,{value:se,onValueChange:X,options:Ue,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"ISP ()"}),s.jsx(sn,{value:I,onValueChange:E,options:De,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"VoIP (VoIP)"}),s.jsx(sn,{value:A,onValueChange:Y,options:Ne,placeholder:"",disabled:u})]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!u&&s.jsx("button",{onClick:Ve,disabled:w,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${w?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:w?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>be(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:Ge,onClose:()=>te(!1),onSave:jt,workId:t.id,initialData:Z,workType:t.WRK_CD,customerId:(ds=t.customer)==null?void 0:ds.id,customerName:(vs=t.customer)==null?void 0:vs.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:t.KPI_PROD_GRP_CD||"",prodChgGb:t.PROD_CHG_GB||"",chgKpiProdGrpCd:t.CHG_KPI_PROD_GRP_CD||"",prodGrp:t.PROD_GRP||"",wrkDtlTcd:t.WRK_DTL_TCD||"",readOnly:u}),s.jsx(el,{isOpen:xe,onClose:()=>be(!1),ctrtId:t.CTRT_ID,custId:(Ss=t.customer)==null?void 0:Ss.id}),s.jsx(xm,{isOpen:ne,onClose:()=>ie(!1),onSave:Ae=>{ze(Ae.INSTL_LOC),st(Ae.VIEW_MOD_CD),ot(Ae.VIEW_MOD_NM),ie(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(v==null?void 0:v.prodGrp)||(v==null?void 0:v.PROD_GRP),initialInstlLoc:pe,initialViewModCd:xt,initialViewModNm:St,showToast:r,readOnly:u}),s.jsx(b_,{isOpen:Ye,onClose:()=>at(!1),onSave:Vt,soId:t.SO_ID||""}),s.jsx(Ba,{isOpen:Be,onClose:()=>lt(!1),onConfirm:ss,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{equipmentData:v,installInfoData:Z,custRel:k,custRelOptions:ct,memo:G,installLocationText:pe,order:t})}),s.jsx(aN,{isOpen:pt,onClose:()=>mt(!1),wrkCd:t.WRK_CD,wrkId:t.id,rcptId:t.RCPT_ID})]})},$M=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1,certifyMode:o=!1,certifyReason:c})=>{var Ot,_e,Se,Ie;const u=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",h=t.WRK_CD==="07",[m,_]=b.useState(!1),{equipmentData:p,filteringData:g}=ta(),{certifyRegconfInfo:C}=Za(),y=t.id||"",N=xa(y),v={...p||i||g||{},installedEquipments:N.installedEquipments.length>0?N.installedEquipments:(p==null?void 0:p.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:N.markedForRemoval.length>0?N.markedForRemoval:(p==null?void 0:p.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(N.removalStatus).length>0?N.removalStatus:(p==null?void 0:p.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:P,isPending:w}=jd(),M=()=>`work_complete_draft_${t.id}`,[k,B]=b.useState(""),[G,U]=b.useState(""),[I,E]=b.useState(""),[A,Y]=b.useState(""),[se,X]=b.useState(""),[z,$]=b.useState(""),[F,L]=b.useState(!1),[re,fe]=b.useState(!1),[T,j]=b.useState(!1),[K,J]=b.useState(""),[q,V]=b.useState([]),[ce,me]=b.useState(!1),[Ce,ge]=b.useState([]),[Ge,te]=b.useState(!1),[he,de]=b.useState(""),[Q,ee]=b.useState(""),[Z,le]=b.useState(void 0),[xe,be]=b.useState(!1),[ne,ie]=b.useState(!1),[pe,ze]=b.useState(""),[xt,st]=b.useState(""),[St,ot]=b.useState(""),[Be,lt]=b.useState(!1),[pt,mt]=b.useState(!1),[Ye,at]=b.useState(!1),[Fe,tt]=b.useState(null),[ct,Mt]=b.useState(!1),[dt,Je]=b.useState([]),[De,$e]=b.useState(null),[Ne,ye]=b.useState(!1),[Ue,ue]=b.useState(""),[Oe,Ze]=b.useState(!1),[Le,vt]=b.useState("B"),[je,ut]=b.useState([]),[gt,jt]=b.useState([]),[Ve,Vt]=b.useState([]),[ke,ss]=b.useState([]),[ls,ds]=b.useState([]),[vs,Ss]=b.useState(()=>{const Te=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Te&&Te.length>=8)return`${Te.slice(0,4)}-${Te.slice(4,6)}-${Te.slice(6,8)}`;const nt=new Date;return nt.getFullYear()+"-"+String(nt.getMonth()+1).padStart(2,"0")+"-"+String(nt.getDate()).padStart(2,"0")});b.useEffect(()=>{if(u){(async()=>{try{const Re=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(Re){B(Re.CUST_REL||""),U((Re.WRK_PROC_CT||"").replace(/\\n/g,`
`)),E(Re.PSN_USE_CORP||""),Y(Re.VOIP_USE_CORP||""),X(Re.DTV_USE_CORP||"");const Ct=Re.UP_CTRL_CL||(v==null?void 0:v.upCtrlCl)||"";console.log("[CompleteMoveRemoval]  :",{API:Re.UP_CTRL_CL,:v==null?void 0:v.upCtrlCl,:Ct}),$(Ct),de(Re.NET_CL||""),ee(Re.NET_CL_NM||""),ze(Re.INSTL_LOC||""),le({NET_CL:Re.NET_CL||"",NET_CL_NM:Re.NET_CL_NM||"",WRNG_TP:Re.WRNG_TP||"",INSTL_TP:Re.INSTL_TP||"",CB_WRNG_TP:Re.CB_WRNG_TP||"",CB_INSTL_TP:Re.CB_INSTL_TP||"",INOUT_LINE_TP:Re.INOUT_LINE_TP||"",INOUT_LEN:Re.INOUT_LEN||"",DVDR_YN:Re.DVDR_YN||"",BFR_LINE_YN:Re.BFR_LINE_YN||"",CUT_YN:Re.CUT_YN||"",TERM_NO:Re.TERM_NO||"",RCV_STS:Re.RCV_STS||"",SUBTAP_ID:Re.SUBTAP_ID||"",PORT_NUM:Re.PORT_NUM||"",EXTN_TP:Re.EXTN_TP||"",TAB_LBL:Re.TAB_LBL||"",CVT_LBL:Re.CVT_LBL||"",STB_LBL:Re.STB_LBL||""}),Re.VOIP_JOIN_CTRT_ID&&J(Re.VOIP_JOIN_CTRT_ID),(Re.CHK_CUST_ADDR==="true"||Re.CHK_CUST_ADDR==="Y")&&L(!0),(Re.CHK_PYM_ADDR==="true"||Re.CHK_PYM_ADDR==="Y")&&fe(!0),Re.WRKR_CMPL_DT&&Re.WRKR_CMPL_DT.length>=8&&Ss(`${Re.WRKR_CMPL_DT.slice(0,4)}-${Re.WRKR_CMPL_DT.slice(4,6)}-${Re.WRKR_CMPL_DT.slice(6,8)}`)}}catch(Re){console.error("[WorkCompleteMoveRemoval]     :",Re)}_(!0)})();return}const Te=localStorage.getItem(M());if(Te)try{const nt=JSON.parse(Te);B(nt.custRel||""),U(nt.memo||""),E(nt.internetUse||""),Y(nt.voipUse||""),X(nt.dtvUse||""),$(nt.upCtrlCl||""),de(nt.networkType||""),ee(nt.networkTypeName||""),ze(nt.installLocationText||""),le(nt.installInfoData),nt.voipJoinCtrtId&&J(nt.voipJoinCtrtId),nt.chkCustAddr!==void 0&&L(nt.chkCustAddr),nt.chkPymAddr!==void 0&&fe(nt.chkPymAddr)}catch(nt){console.error("[WorkCompleteMoveRemoval] localStorage  :",nt)}_(!0)},[t.id,u]),b.useEffect(()=>{if(!m||u)return;const Te={custRel:k,memo:G,internetUse:I,voipUse:A,dtvUse:se,upCtrlCl:z,networkType:he,networkTypeName:Q,installLocationText:pe,installInfoData:Z,voipJoinCtrtId:K,chkCustAddr:F,chkPymAddr:re,savedAt:new Date().toISOString()};localStorage.setItem(M(),JSON.stringify(Te))},[k,G,I,A,se,z,he,Q,pe,Z,K,F,re,m,u]),b.useEffect(()=>{(async()=>{try{const nt=await No(["CMCU005","CMCT015","CMCU057","CMCU110","CMCU148"]);nt.CMCU005&&ut(nt.CMCU005.map(Re=>({value:Re.COMMON_CD,label:Re.COMMON_CD_NM}))),nt.CMCT015&&(console.log("[CompleteMoveRemoval]  CMCT015 :",nt.CMCT015),jt(nt.CMCT015.map(Re=>({value:Re.COMMON_CD,label:Re.COMMON_CD_NM})))),nt.CMCU057&&Vt(nt.CMCU057.map(Re=>({value:Re.COMMON_CD,label:Re.COMMON_CD_NM}))),nt.CMCU110&&ss(nt.CMCU110.map(Re=>({value:Re.COMMON_CD,label:Re.COMMON_CD_NM}))),nt.CMCU148&&ds(nt.CMCU148.map(Re=>({value:Re.COMMON_CD,label:Re.COMMON_CD_NM})))}catch(nt){console.error("[WorkCompleteMoveRemoval]   :",nt)}})()},[]),b.useEffect(()=>{(async()=>{try{const nt=await Uc(),Re=(nt==null?void 0:nt.output)||nt||[];Je(Re);const Ct=t.PROD_CD||t.PROD_CD||"",Ke=Re.some(Et=>Et.PROD_CD===Ct);Mt(Ke),console.log("[CompleteRelocate] LGHV :",{currentProdCd:Ct,isLghv:Ke,prodListCount:Re.length})}catch(nt){console.error("[CompleteRelocate] LGHV   :",nt)}})()},[t.PROD_CD]),b.useEffect(()=>{if(t.WRK_CD!=="07")return;(async()=>{try{const nt=await x_({WRK_CD:t.WRK_CD||"07",WRK_ID:t.id||"",RCPT_ID:t.RCPT_ID||""});$e(nt),console.log("[CompleteRelocate] getMoveWorkInfo:",nt)}catch(nt){console.error("[CompleteRelocate] getMoveWorkInfo :",nt)}})()},[t.id,t.WRK_CD]),b.useEffect(()=>{(async()=>{const nt=t.PROD_CD||t.PROD_CD||"",Re=(v==null?void 0:v.prodPromoInfo)||[];if(nt==="PD10018480")console.log("[CompleteRelocate] OTT   :",nt),Ze(!0),vt("C");else if(Re.some(Et=>Et.PROD_CD==="PD10018160"))console.log("[CompleteRelocate] OTT   : PD10018160"),Ze(!0),vt("B");else{Ze(!1);return}const Ct=t.id||"",Ke=t.directionId||t.WRK_DRCTN_ID||"";if(Ct&&Ke)try{const Et=await v1({WRK_ID:Ct,WRK_DRCTN_ID:Ke,DATA_TYPE:nt==="PD10018480"?"C":"B"});Et!=null&&Et.EQT_SERNO&&(console.log("[CompleteRelocate]  OTT :",Et.EQT_SERNO),ue(Et.EQT_SERNO))}catch(Et){console.error("[CompleteRelocate] OTT   :",Et)}})()},[t.PROD_CD,t.id,t.directionId,v==null?void 0:v.prodPromoInfo]),b.useEffect(()=>{v!=null&&v.upCtrlCl&&!z?(console.log("[CompleteMoveRemoval] equipmentData  :",v.upCtrlCl),$(v.upCtrlCl)):!z&&m&&!u&&(console.log("[CompleteMoveRemoval]   : 01 ()"),$("01"))},[v==null?void 0:v.upCtrlCl,m,u,z]),b.useEffect(()=>{var Re;if(u)return;const Te=((Re=t.customer)==null?void 0:Re.id)||t.CUST_ID;if(!Te)return;(async()=>{try{console.log("[WorkCompleteMoveRemoval]     :",Te);const Ct=await _m({CUST_ID:Te});console.log("[WorkCompleteMoveRemoval]   :",Ct),ge(Ct||[])}catch(Ct){console.error("[WorkCompleteMoveRemoval]     :",Ct),ge([])}})()},[(Ot=t.customer)==null?void 0:Ot.id,t.CUST_ID,u]),b.useEffect(()=>{if(u)return;if(Ce.length===0){console.log("[WorkCompleteMoveRemoval]     ...");return}const Te=t.PROD_GRP||"",nt=t.VOIP_PROD_CD||"",Re=t.ISP_PROD_CD||"",Ct=t.WRK_STAT_CD||"",Ke=t.ADDR_ORD||"";if(console.log("[WorkCompleteMoveRemoval]   :",{prodGrp:Te,voipProdCd:nt,ispProdCd:Re,wrkStatCd:Ct,addrOrd:Ke,customerCtrtListCount:Ce.length}),Te==="V"&&!nt){const Et=Ce.filter(He=>{const ht=He.PROD_GRP||"",Pt=He.CTRT_STAT||"",Bt=He.ADDR_ORD||He.addr_ord||"";return(ht==="C"||ht==="D"||ht==="I")&&Pt==="20"&&(!Ke||Bt===Ke)});console.log("[WorkCompleteMoveRemoval] VoIP   :",Et),Et.length<1&&Ct==="2"&&(r==null||r("VOIP  DTV, ISP  . ISP DTV    .","warning"));const Rt=[{value:"",label:""},...Et.map(He=>({value:He.CTRT_ID||"",label:`[${He.CTRT_ID}] ${He.BASIC_PROD_CD_NM||He.PROD_NM||""}`}))];V(Rt),me(!0);return}if(Te==="I"&&Re){const Et=Ce.filter(He=>{const ht=He.PROD_GRP||"",Pt=He.CTRT_STAT||"",Bt=He.ADDR_ORD||He.addr_ord||"",Yt=He.ISP_JOIN_ID||"",Xt=He.KPI_PROD_GRP_CD||"";return(ht==="D"||ht==="C")&&Pt==="20"&&!Yt&&Xt==="D"&&(!Ke||Bt===Ke)});console.log("[WorkCompleteMoveRemoval] ISP   :",Et),Et.length<1&&Ct==="2"&&(r==null||r("ISP  DTV  . DTV    .","warning"));const Rt=[{value:"",label:""},...Et.map(He=>({value:He.CTRT_ID||"",label:`[${He.CTRT_ID}] ${He.BASIC_PROD_CD_NM||He.PROD_NM||""}`}))];V(Rt),me(!0);return}me(!1),V([])},[t.id,t.WRK_STAT_CD,u,r,Ce]);const Ae=()=>{const Te=[];k||Te.push("  ."),Z!=null&&Z.NET_CL||Te.push(" ."),pe||Te.push(" ."),vs||Te.push(" .");const nt=t.PROD_GRP||"",Re=t.VOIP_PROD_CD||"",Ct=t.ISP_PROD_CD||"";if(nt==="V"&&t.WRK_CD==="07"&&De&&De.WRK_STAT_CD!=="4"&&Te.push("VOIP         ."),ct&&De&&t.WRK_CD==="07"){const Et=t.CTRT_ID||"",Rt=De.OLD_CTRT_ID||"";if(Et!==Rt){const He=De.WRK_STAT_CD||"";if(He==="1"||He==="2"){const ht=De.OLD_PROD_CD||"";dt.some(Pt=>Pt.PROD_CD===ht)&&Te.push("LGHV STB  ,     .")}}}nt==="V"&&!Re&&ce&&(K||Te.push("VOIP    .")),nt==="I"&&Ct&&ce&&(K||Te.push("  ISP .    .")),Oe&&!Ue&&Te.push("OTT   OTT BOX   .");const Ke=(v==null?void 0:v.installedEquipments)||[];return nt!=="V"&&Ke.length<1&&Te.push("()  ."),Te},ft=Te=>{le(Te),Te.NET_CL&&de(Te.NET_CL),Te.NET_CL_NM&&ee(Te.NET_CL_NM),r==null||r("  .","success")},rt=()=>{if(w)return;const Te=Ae();if(Te.length>0){Te.forEach(Re=>r==null?void 0:r(Re,"error"));return}(t.PROD_GRP||"")!=="V"?at(!0):lt(!0)},Wt=Te=>{tt(Te),at(!1),lt(!0)},_t=(Te,nt=!1)=>{if(!Te||Te.length===0)return[];const Re=localStorage.getItem("userInfo"),Ct=Re?JSON.parse(Re):{},Ke=Ct.userId||"A20130708",Et=(v==null?void 0:v.removalStatus)||{},Rt=(He,ht)=>He==="1"||He==="Y"||ht==="1"||ht==="Y"?"1":"0";return Te.map(He=>{var Yt,Xt,ts;const ht=He.EQT_NO||He.id||((Yt=He.actualEquipment)==null?void 0:Yt.id)||"",Pt=Et[ht]||{},Bt=nt?{CRR_TSK_CL:t.WRK_CD||"07",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Ct.crrId||"01",WRKR_ID:Ke,EQT_LOSS_YN:Rt(He.EQT_LOSS_YN,Pt.EQT_LOSS_YN),PART_LOSS_BRK_YN:Rt(He.PART_LOSS_BRK_YN,Pt.PART_LOSS_BRK_YN),EQT_BRK_YN:Rt(He.EQT_BRK_YN,Pt.EQT_BRK_YN),EQT_CABL_LOSS_YN:Rt(He.EQT_CABL_LOSS_YN,Pt.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:Rt(He.EQT_CRDL_LOSS_YN,Pt.EQT_CRDL_LOSS_YN)}:{};if(He.actualEquipment){const Ut=He.actualEquipment,Ms=He.contractEquipment||{};return{...Ut,EQT_NO:Ut.id,EQT_SERNO:Ut.serialNumber,ITEM_MID_CD:Ut.itemMidCd,EQT_CL_CD:Ut.eqtClCd,MAC_ADDRESS:He.macAddress||Ut.macAddress,WRK_ID:t.id,CUST_ID:(Xt=t.customer)==null?void 0:Xt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Ke,SVC_CMPS_ID:Ms.SVC_CMPS_ID||He.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ms.BASIC_PROD_CMPS_ID||He.BASIC_PROD_CMPS_ID||"",PROD_CMPS_ID:Ms.PROD_CMPS_ID||He.PROD_CMPS_ID||"",SVC_CD:Ms.SVC_CD||He.SVC_CD||"",PROD_CD:Ms.PROD_CD||He.PROD_CD||"",LENT_YN:He.lentYn||He.LENT_YN||Ms.LENT_YN||"",EQT_CHG_GB:He.EQT_CHG_GB||"01",...Bt}}return{...He,EQT_NO:He.EQT_NO||He.id||"",EQT_SERNO:He.EQT_SERNO||He.serialNumber||"",ITEM_MID_CD:He.ITEM_MID_CD||He.itemMidCd||"",EQT_CL_CD:He.EQT_CL_CD||He.eqtClCd||"",MAC_ADDRESS:He.MAC_ADDRESS||He.macAddress||"",SVC_CMPS_ID:He.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:He.BASIC_PROD_CMPS_ID||"",PROD_CD:He.PROD_CD||"",SVC_CD:He.SVC_CD||"",WRK_ID:t.id,CUST_ID:(ts=t.customer)==null?void 0:ts.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,REG_UID:Ke,...Bt}})},qt=async()=>{var Xt,ts,Ut,Ms,Cs,Bs,_s,Es,js,cs;const Te=vs.replace(/-/g,""),nt=localStorage.getItem("userInfo"),Re=nt?JSON.parse(nt):{},Ct=Re.userId||"A20130708",Ke=o||u0(t.OP_LNKD_CD),Et=await y_(t.SO_ID||t.SO_ID||"",t.IS_CERTIFY_PROD);let Rt="";if(Ke){let fs=(v==null?void 0:v.prodPromoInfo)||[];if(fs.length===0)try{console.log("[CompleteRelocate] prodPromoInfo , getProdPromotionInfo fallback  (ADD_ON)"),fs=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",WRK_CD:t.WRK_CD||"07"}),console.log("[CompleteRelocate] getProdPromotionInfo fallback :",fs.length,"")}catch(Ls){console.log("[CompleteRelocate] getProdPromotionInfo fallback :",Ls)}const Ys=fs.filter(Ls=>(Ls.PROD_CMPS_CL==="21"||Ls.PROD_CMPS_CL==="22")&&(Ls.PROD_STAT_CD==="10"||Ls.PROD_STAT_CD==="20")).map(Ls=>Ls.PROD_CD).filter(Ls=>Ls);Rt=Ys.length>0?Ys.join(",")+",":"",console.log("[CompleteRelocate] ADD_ON :",Rt)}const He=(v==null?void 0:v.installedEquipments)||[];if(Ke&&He.length>0&&!C){r==null||r("  .","error");return}if(Ke&&C)try{const fs=t.OLD_CTRT_ID||t.CTRT_ID||"",{certifyType:Ys}=await BM(t,Ct,fs);if(Ys){const Ls=c||(Ys==="C"?"":""),it=Ys==="U"?(t.CTRT_ID||"")!==fs?fs:t.CTRT_ID||"":void 0,Ft=await p_({order:t,workerId:Ct,certifyRegconfInfo:C,addOnParam:Rt,reason:Ls,certifyType:Ys,contIdOld:it});if(!Ft.success){r==null||r(` : ${Ft.message}`,"error");return}console.log("[CompleteRelocate] CL-04    ")}}catch(fs){console.error("[CompleteRelocate] CL-04  :",fs),r==null||r(`  : ${fs.message||"   "}`,"error");return}const ht=(v==null?void 0:v.installedEquipments)||[],Pt=!!t.ISP_PROD_CD;if(!Et&&(Pt||ht.length>0))try{const fs=t.PROD_GRP||"";let Ys="SMR03",Ls="",it="",Ft="",bs="",zt="",ws="";ct&&(Ys="STB_CRT"),fs==="V"&&(Ys="SMR60");const es=(v==null?void 0:v.prodPromoInfo)||[],Os=((Xt=es.find(hn=>hn.PROD_CMPS_CL==="23"))==null?void 0:Xt.PROD_CMPS_ID)||"",As=es.find(hn=>hn.PROD_CMPS_CL==="11"),ms=(As==null?void 0:As.PROD_CD)||"",Ws=(As==null?void 0:As.PROD_GRP)||fs,$s=es.filter(hn=>hn.BASIC_PROD_FL==="V").map(hn=>hn.PROD_CD),Is=$s.length>0?$s.join(","):"",xs=hn=>{const fr=ht.find(Vr=>{const sa=Vr.actualEquipment||Vr;return(sa.itemMidCd||sa.ITEM_MID_CD)===hn});if(!fr)return"";const ci=fr.actualEquipment||fr;return ci.id||ci.EQT_NO||""};t.VOIP_PROD_CD?(Ls=xs("08"),it=xs("02")):(Ls=xs("05")||xs("01")||xs("03")||(Ws==="I"?xs("02"):"")||xs("08")||"",it=xs("04")),Ft=xs("07"),Ws==="C"&&(bs=xs("02")),Ws==="V"&&(zt=xs("10")),Pt&&(zt=xs("21")),(fs==="V"||Pt)&&(ws=K||t.CTRT_ID||"");let Br=t.id||"";const Ar=ht.find(hn=>{const fr=hn.actualEquipment||hn;return(fr.eqtClCd||fr.EQT_CL_CD)==="091003"}),ti=ht.find(hn=>{const fr=hn.actualEquipment||hn;return(fr.eqtClCd||fr.EQT_CL_CD)==="092201"});if(Ar){const hn=Ar.actualEquipment||Ar;Br=hn.id||hn.EQT_NO||t.id||""}else if(ti){const hn=ti.actualEquipment||ti;Br=hn.macAddress||hn.MAC_ADDRESS||t.id||""}console.log("[CompleteRelocate]   :",{msgId:Ys,eqtNo:Ls,eqtProdCmpsId:Os,prodCd:ms,subProdCd:Is,etc1:it,etc2:Ft,etc3:bs,etc4:zt,signalWrkId:Br});const Mr=await _a({MSG_ID:Ys,CUST_ID:((ts=t.customer)==null?void 0:ts.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:Ls,EQT_PROD_CMPS_ID:Os,PROD_CD:ms,ITV_USR_ID:"",IP_CNT:"",ETC_1:it,ETC_2:Ft,ETC_3:bs,ETC_4:zt,SUB_PROD_CD:Is,IF_DTL_ID:"",WRK_ID:Br,REG_UID:Ct,VOIP_JOIN_CTRT_ID:ws,WTIME:"3"});Mr.code==="SUCCESS"||Mr.code==="OK"?console.log("[CompleteRelocate]    "):(console.warn("[CompleteRelocate]    :",Mr.message),fs!=="V"&&(r==null||r("   .  .","warning")))}catch(fs){console.error("[CompleteRelocate]    :",fs),r==null||r("   .  .","warning")}const Bt=(v==null?void 0:v.removedEquipments)||[];if(Bt.length>0&&!Et&&!ct){let fs=!1;for(const Ls of Bt){const it=Ls.actualEquipment||Ls,Ft=it.eqtClCd||it.EQT_CL_CD||"";Ft==="090901"||Ft==="091001"||Ft==="091005"||(fs=!0)}const Ys=t.PROD_GRP||"";if(t.WRK_CD==="07"&&Ys==="V"&&(fs=!1),fs)try{const Ls=(v==null?void 0:v.removedProdPromoInfo)||(v==null?void 0:v.prodPromoInfo)||[],it=((Ms=(Ut=Ls.find)==null?void 0:Ut.call(Ls,zt=>zt.PROD_CMPS_CL==="23"))==null?void 0:Ms.PROD_CMPS_ID)||"";let Ft="";Ys==="V"&&(Ft=t.VOIP_PROD_CD?t.CTRT_ID||"":K||t.CTRT_ID||""),console.log("[CompleteRelocate]   :",{msgId:"SMR05",delEqtProdCmpsId:it,prodGrpForDel:Ys});const bs=await _a({MSG_ID:"SMR05",CUST_ID:((Cs=t.customer)==null?void 0:Cs.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:it,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Ct,ETC_1:"",ETC_2:"",ETC_3:"",ETC_4:"",VOIP_JOIN_CTRT_ID:Ft,WTIME:"3"});if(bs.code!=="SUCCESS"&&bs.code!=="OK"){if((((Bs=bs.O_IFSVC_RESULT)==null?void 0:Bs.substring(14,20))||"")!=="029"&&((_s=bs.message)==null?void 0:_s.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteRelocate]    -  :",bs.message),r==null||r("   .","error",!0);return}}else console.log("[CompleteRelocate]    ")}catch(Ls){console.error("[CompleteRelocate]     :",Ls),r==null||r("   .","error",!0);return}}else Bt.length>0&&ct&&console.log("[CompleteRelocate] LGHV STB  -  skip ( )");const Yt={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Es=t.customer)==null?void 0:Es.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Re.crrId||"01",WRKR_ID:Ct,WRKR_CMPL_DT:Te,MEMO:G||" ",STTL_YN:"Y",REG_UID:Ct,CUST_REL:k,CNFM_CUST_NM:((js=t.customer)==null?void 0:js.name)||"",CNFM_CUST_TELNO:((cs=t.customer)==null?void 0:cs.contactNumber)||"",INSTL_LOC:pe||"",UP_CTRL_CL:z||"",PSN_USE_CORP:I||"",VOIP_USE_CORP:A||"",DTV_USE_CORP:se||"",WRK_ACT_CL:"20",TV_TYPE:"",NET_CL:(Z==null?void 0:Z.NET_CL)||"",WRNG_TP:(Z==null?void 0:Z.WRNG_TP)||"",INSTL_TP:(Z==null?void 0:Z.INSTL_TP)||"",VOIP_JOIN_CTRT_ID:K||"",OLD_CTRT_ID:t.OLD_CTRT_ID||"",CHK_CUST_ADDR:h?F?"true":"false":"",CHK_PYM_ADDR:h?re?"true":"false":"",ADD_ON:Rt||""},equipmentList:_t((v==null?void 0:v.installedEquipments)||[],!1),removeEquipmentList:_t((v==null?void 0:v.removedEquipments)||[],!0),spendItemList:(v==null?void 0:v.spendItems)||[],agreementList:(v==null?void 0:v.agreements)||[],poleList:Fe?[{WRK_ID:t.id,POLE_YN:Fe.POLE_YN,LAN_GB:Fe.LAN_GB||"",REG_UID:Ct}]:[]};P(Yt,{onSuccess:fs=>{fs.code==="SUCCESS"||fs.code==="OK"?(localStorage.removeItem(M()),t.WRK_STAT_CD="3",r==null||r("  .","success"),n()):r==null||r(fs.message||"   .","error",!0)},onError:fs=>{r==null||r(fs.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[w&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[ce&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:K,onValueChange:J,options:q,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:Q||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-h-10 px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 cursor-not-allowed"}),s.jsx("button",{type:"button",onClick:()=>te(!0),className:`px-4 py-2 text-sm font-semibold rounded-lg whitespace-nowrap ${u?"bg-gray-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:u?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:k,onValueChange:B,options:je,placeholder:" ",required:!0,disabled:u})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:[" ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center min-h-10 px-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm",children:[s.jsx("span",{children:pe||""}),St&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(: ",St,")"]})]}),s.jsxs("button",{type:"button",onClick:()=>ie(!0),className:`min-h-10 px-3 sm:px-4 rounded-lg font-bold text-sm whitespace-nowrap flex items-center gap-1.5 ${u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:[s.jsx(Rd,{className:"w-4 h-4"}),s.jsx("span",{children:u?"":""})]})]})]}),((v==null?void 0:v.kpiProdGrpCd)==="D"||(v==null?void 0:v.prodGrp)==="D"||t.PROD_GRP==="D")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5",children:""}),s.jsx(sn,{value:z,onValueChange:$,options:gt,placeholder:"",disabled:u})]}),Oe&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["OTT BOX  ",!u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:Ue,readOnly:!0,placeholder:"SER_NO   ",className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-600"}),s.jsxs("button",{type:"button",onClick:()=>ye(!0),disabled:u,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${u?"bg-gray-400 text-white cursor-not-allowed":Ue?"bg-green-500 hover:bg-green-600 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"SER_NO"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:G,onChange:Te=>U(Te.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${u?"bg-gray-100 text-gray-600 cursor-not-allowed":""}`,rows:3,readOnly:u,disabled:u}),!u&&s.jsxs("p",{className:`text-xs text-right mt-1 ${G.length>=500?"text-red-500":"text-gray-400"}`,children:[G.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:vs,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>j(!T),className:"w-full flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:""}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&s.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"DTV ()"}),s.jsx(sn,{value:se,onValueChange:X,options:ls,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"ISP ()"}),s.jsx(sn,{value:I,onValueChange:E,options:Ve,placeholder:"",disabled:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-1",children:"VoIP (VoIP)"}),s.jsx(sn,{value:A,onValueChange:Y,options:ke,placeholder:"",disabled:u})]})]})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!u&&s.jsx("button",{onClick:rt,disabled:w,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${w?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:w?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>be(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:Ge,onClose:()=>te(!1),onSave:ft,workId:t.id,initialData:Z,workType:t.WRK_CD,customerId:(_e=t.customer)==null?void 0:_e.id,customerName:(Se=t.customer)==null?void 0:Se.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:t.KPI_PROD_GRP_CD||"",prodChgGb:t.PROD_CHG_GB||"",chgKpiProdGrpCd:t.CHG_KPI_PROD_GRP_CD||"",prodGrp:t.PROD_GRP||"",wrkDtlTcd:t.WRK_DTL_TCD||"",readOnly:u}),s.jsx(el,{isOpen:xe,onClose:()=>be(!1),ctrtId:t.CTRT_ID,custId:(Ie=t.customer)==null?void 0:Ie.id}),s.jsx(xm,{isOpen:ne,onClose:()=>ie(!1),onSave:Te=>{ze(Te.INSTL_LOC),st(Te.VIEW_MOD_CD),ot(Te.VIEW_MOD_NM),ie(!1)},workId:t.id,ctrtId:t.CTRT_ID,prodGrp:(v==null?void 0:v.prodGrp)||(v==null?void 0:v.PROD_GRP),initialInstlLoc:pe,initialViewModCd:xt,initialViewModNm:St,showToast:r,readOnly:u}),s.jsx(b_,{isOpen:Ye,onClose:()=>at(!1),onSave:Wt,soId:t.SO_ID||""}),s.jsx(Ba,{isOpen:Be,onClose:()=>lt(!1),onConfirm:qt,title:" ",message:" ?",type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{equipmentData:v,installInfoData:Z,custRel:k,custRelOptions:je,memo:G,installLocationText:pe,order:t})}),s.jsx(aN,{isOpen:pt,onClose:()=>mt(!1),wrkCd:t.WRK_CD,wrkId:t.id,rcptId:t.RCPT_ID}),s.jsx(rN,{isOpen:Ne,onClose:()=>ye(!1),onSave:Te=>{ue(Te),r==null||r("OTT  .","success")},wrkId:t.id||"",wrkDrctnId:t.directionId||t.WRK_DRCTN_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",dataType:Le,showToast:r,readOnly:u})]})},VM=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1,certifyMode:o=!1})=>{var Se,Ie,Te,nt;const c=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[u,h]=b.useState(!1),{equipmentData:m,filteringData:_,removalLineData:p,setRemovalLineData:g}=ta(),{certifyRegconfInfo:C}=Za(),y=t.id||"",N=xa(y),v=Ui(Re=>{var Ct;return((Ct=Re.workStates[y])==null?void 0:Ct.reuseAll)??!1}),P=Ui(Re=>Re.setReuseAll),w={...m||i||_||{},installedEquipments:N.installedEquipments.length>0?N.installedEquipments:(m==null?void 0:m.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:N.removeEquipments.length>0?N.removeEquipments:(m==null?void 0:m.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(N.removalStatus).length>0?N.removalStatus:(m==null?void 0:m.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:M,isPending:k}=jd(),B=()=>`work_complete_draft_${t.id}`,[G,U]=b.useState(""),[I,E]=b.useState(""),[A,Y]=b.useState(""),[se,X]=b.useState(""),[z,$]=b.useState(!1),[F,L]=b.useState(""),[re,fe]=b.useState(""),[T,j]=b.useState(void 0),[K,J]=b.useState(!1),q=p,V=g,[ce,me]=b.useState(!1),[Ce,ge]=b.useState(!1),[Ge,te]=b.useState(!1),[he,de]=b.useState(null),[Q,ee]=b.useState(!1),[Z,le]=b.useState(null),[xe,be]=b.useState(!1),[ne,ie]=b.useState(""),[pe,ze]=b.useState(!1),[xt,st]=b.useState(!1),[St,ot]=b.useState("none"),[Be,lt]=b.useState(""),[pt,mt]=b.useState(!1),[Ye,at]=b.useState([]),[Fe,tt]=b.useState([]),[ct,Mt]=b.useState([]),[dt,Je]=b.useState(null),[De,$e]=b.useState(!1),[Ne,ye]=b.useState(""),[Ue,ue]=b.useState(!1),[Oe,Ze]=b.useState(null),[Le,vt]=b.useState(!1),[je,ut]=b.useState(!1),[gt,jt]=b.useState(()=>{const Re=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(Re&&Re.length>=8)return`${Re.slice(0,4)}-${Re.slice(4,6)}-${Re.slice(6,8)}`;const Ct=new Date;return Ct.getFullYear()+"-"+String(Ct.getMonth()+1).padStart(2,"0")+"-"+String(Ct.getDate()).padStart(2,"0")});b.useEffect(()=>{var Ct,Ke;if(Y(((Ct=t.customer)==null?void 0:Ct.name)||""),X(((Ke=t.customer)==null?void 0:Ke.contactNumber)||t.REQ_CUST_TEL_NO||""),c){console.log("[WorkCompleteRemovalTerminate]   - getWorkReceiptDetail API "),(async()=>{try{const Rt=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});Rt?(console.log("[WorkCompleteRemovalTerminate] API :",Rt),U(Rt.CUST_REL||""),E((Rt.WRK_PROC_CT||"").replace(/\\n/g,`
`)),L(Rt.NET_CL||""),fe(Rt.NET_CL_NM||""),j({NET_CL:Rt.NET_CL||"",NET_CL_NM:Rt.NET_CL_NM||"",WRNG_TP:Rt.WRNG_TP||"",INSTL_TP:Rt.INSTL_TP||"",CB_WRNG_TP:Rt.CB_WRNG_TP||"",CB_INSTL_TP:Rt.CB_INSTL_TP||"",INOUT_LINE_TP:Rt.INOUT_LINE_TP||"",INOUT_LEN:Rt.INOUT_LEN||"",DVDR_YN:Rt.DVDR_YN||"",BFR_LINE_YN:Rt.BFR_LINE_YN||"",CUT_YN:Rt.CUT_YN||"",TERM_NO:Rt.TERM_NO||"",RCV_STS:Rt.RCV_STS||"",SUBTAP_ID:Rt.SUBTAP_ID||"",PORT_NUM:Rt.PORT_NUM||"",EXTN_TP:Rt.EXTN_TP||"",TAB_LBL:Rt.TAB_LBL||"",CVT_LBL:Rt.CVT_LBL||"",STB_LBL:Rt.STB_LBL||""}),E((Rt.WRK_PROC_CT||"").replace(/\\n/g,`
`)),Rt.WRKR_CMPL_DT&&Rt.WRKR_CMPL_DT.length>=8&&jt(`${Rt.WRKR_CMPL_DT.slice(0,4)}-${Rt.WRKR_CMPL_DT.slice(4,6)}-${Rt.WRKR_CMPL_DT.slice(6,8)}`)):(console.log("[WorkCompleteRemovalTerminate] API  - order  "),U(t.CUST_REL||""),L(t.NET_CL||""),fe(t.NET_CL_NM||""))}catch(Rt){console.error("[WorkCompleteRemovalTerminate] API  :",Rt),U(t.CUST_REL||""),L(t.NET_CL||""),fe(t.NET_CL_NM||"")}finally{h(!0)}})();return}const Re=localStorage.getItem(B());if(Re)try{const Et=JSON.parse(Re);U(Et.custRel||""),E(Et.memo||""),L(Et.networkType||""),fe(Et.networkTypeName||""),j(Et.installInfoData),Et.cnfmCustNm&&Y(Et.cnfmCustNm),Et.cnfmCustTelno&&X(Et.cnfmCustTelno)}catch(Et){console.error("[WorkCompleteRemovalTerminate] localStorage  :",Et)}h(!0)},[t.id,c]),b.useEffect(()=>{if(!u||c)return;const Re={custRel:G,memo:I,networkType:F,networkTypeName:re,installInfoData:T,cnfmCustNm:A,cnfmCustTelno:se,savedAt:new Date().toISOString()};localStorage.setItem(B(),JSON.stringify(Re))},[G,I,F,re,T,A,se,u,c]),b.useEffect(()=>{(async()=>{var Ct;try{const Ke=await No(["CMCU005"]);Ke.CMCU005&&Mt(Ke.CMCU005.map(He=>({value:He.COMMON_CD,label:He.COMMON_CD_NM})));try{const He=await x_({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:t.WRKR_ID||"",PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"02",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||((Ct=t.customer)==null?void 0:Ct.ADDR_ORD)||"",WRK_CD:t.WRK_CD||"08",WRK_STAT_CD:t.WRK_STAT_CD||""});console.log("[CompleteRelocateTerminate] :",He),de(He);const ht=(He==null?void 0:He.MVM_TP)||"",Pt=(He==null?void 0:He.WRK_STAT_CD)||"",Bt=(He==null?void 0:He.CTRT_ID)||"",Yt=(He==null?void 0:He.OLD_CTRT_ID)||"",Xt=Pt==="2";console.log("[CompleteRelocateTerminate]  :",{MVM_TP:ht,WRK_STAT_CD:Pt,CTRT_ID:Bt,OLD_CTRT_ID:Yt,shouldReuse:Xt}),!Xt&&v&&P(y,!1)}catch(He){console.error("[CompleteRelocateTerminate]   :",He)}const Et=await Uc();if(Et&&Et.length>0){at(Et);const He=t.PROD_CD||t.BASIC_PROD_CD||"",ht=Et.some(Pt=>Pt.PROD_CD===He);mt(ht),console.log("[WorkCompleteRemovalTerminate] LGHV STB :",{prodCd:He,isLghv:ht,lghvListCount:Et.length})}const Rt=t.CERTIFY_TG||"";if(Rt==="Y"){const He=await N1();tt(He);const ht=t.NEW_PROD_CD||t.PROD_CD||"",Pt=t.SO_ID||"",Bt=He.some(Yt=>Yt.PROD_CD===ht);console.log("[WorkCompleteRemovalTerminate]  :",{certifyTg:Rt,newProdCd:ht,soId:Pt,isCertifyProd:Bt}),Bt||ze(!0)}}catch(Ke){console.error("[WorkCompleteRemovalTerminate]    :",Ke)}})()},[t]);const Ve=Re=>!Re||Re.length!==8?"":`${Re.slice(0,4)}-${Re.slice(4,6)}-${Re.slice(6,8)}`,Vt=Re=>Re.replace(/-/g,""),ke=()=>new Date().toISOString().slice(0,10).replace(/-/g,""),ss=(Re,Ct)=>{if(!Re||!Ct)return 0;const Ke=new Date(Ve(Re)),Et=new Date(Ve(Ct));return Math.ceil((Et.getTime()-Ke.getTime())/(1e3*60*60*24))},ls=b.useCallback(async()=>{const Re=t.RCPT_ID||"",Ct=t.CTRT_ID||"";if(!(!Re||!Ct)){$e(!0),Ze(null);try{const Ke=await MM({RCPT_ID:Re,CTRT_ID:Ct});if(console.log("[CompleteRemovalTerminate]   :",Ke),Ke){Je(Ke),ye(Ve(Ke.MMT_SUS_HOPE_DD));const Et=ke();Ke.WRK_DTL_TCD==="0430"&&Ke.MMT_SUS_HOPE_DD<=Et?(ue(!0),r==null||r("  .   .","warning")):ue(!1)}}catch(Ke){console.error("[CompleteRemovalTerminate]   :",Ke),Ze(Ke.message||"   ")}finally{$e(!1)}}},[t.RCPT_ID,t.CTRT_ID,r]);b.useEffect(()=>{ls()},[ls]);const ds=()=>{const Re=[];return(!G||G==="[]")&&Re.push("  ."),T!=null&&T.NET_CL||Re.push("  ."),T!=null&&T.WRNG_TP||Re.push("  ."),T!=null&&T.INSTL_TP?T.INSTL_TP!=="77"&&Re.push('   "(77)" .'):Re.push("  ."),gt||Re.push(" ."),rt()&&!q&&Re.push("   ."),Re},vs=Re=>{j(Re),Re.NET_CL&&L(Re.NET_CL),Re.NET_CL_NM&&fe(Re.NET_CL_NM),r==null||r("  .","success")},Ss=async()=>{var Re;st(!0),lt(""),ot("none");try{const Ct=localStorage.getItem("userInfo"),Ke=Ct?JSON.parse(Ct):{},Et=await Gp({CTRT_ID:t.CTRT_ID||"",CUST_ID:((Re=t.customer)==null?void 0:Re.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:Ke.userId||"",WRK_ID:t.id||""});Et!=null&&Et.ERROR?(ot("error"),lt(Et.ERROR),r==null||r(` : ${Et.ERROR}`,"error")):(ot("success"),lt(" ."),r==null||r(" .","success"))}catch(Ct){console.error("[ CL-06 ]:",Ct),ot("error"),lt(Ct.message||"    ."),r==null||r(Ct.message||"    .","error",!0)}finally{st(!1)}},Ae=async()=>{var Re;st(!0),lt("");try{const Ct=localStorage.getItem("userInfo"),Ke=Ct?JSON.parse(Ct):{},Et=await Vg({CTRT_ID:t.CTRT_ID||"",CUST_ID:((Re=t.customer)==null?void 0:Re.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:Ke.userId||"",WRK_ID:t.id||""}),Rt=Array.isArray(Et)?Et[0]:Et;if(Rt!=null&&Rt.ERROR)ot("error"),lt(` : ${Rt.ERROR}`),r==null||r(` : ${Rt.ERROR}`,"warning");else{const He=(Rt==null?void 0:Rt.RESULT)||(Rt==null?void 0:Rt.MSG)||JSON.stringify(Rt);lt(` : ${He}`),r==null||r(" ","info")}}catch(Ct){console.error("[ CL-08 ]:",Ct),lt(Ct.message||"   ."),r==null||r(Ct.message||"   .","error",!0)}finally{st(!1)}},ft=async()=>{var Ke,Et,Rt,He,ht;const Re=(w==null?void 0:w.removedEquipments)||[];if((t.CTRT_STAT||"")==="20")return console.log("[]  20 - "),!0;try{const Pt=localStorage.getItem("userInfo"),Yt=(Pt?JSON.parse(Pt):{}).userId||"A20130708";let Xt="SMR05",ts="";if(pt){const cs=(he==null?void 0:he.NEW_PROD_CD)||"",fs=(he==null?void 0:he.OLD_PROD_CD)||"",Ys=(he==null?void 0:he.CTRT_ID)||t.CTRT_ID||"",Ls=(he==null?void 0:he.OLD_CTRT_ID)||"",it=Ye.some(bs=>bs.PROD_CD===cs),Ft=Ye.some(bs=>bs.PROD_CD===fs);if(it&&Ft){if(Ys===Ls)return console.log("[] LGHV LL  -   "),ee(!0),!0}else{const bs=Re.find(zt=>{var ws,es;return(zt.ITEM_MID_CD||zt.itemMidCd||((ws=zt.actualEquipment)==null?void 0:ws.ITEM_MID_CD)||((es=zt.actualEquipment)==null?void 0:es.itemMidCd))==="04"});bs&&(ts=bs.EQT_NO||bs.id||((Ke=bs.actualEquipment)==null?void 0:Ke.EQT_NO)||((Et=bs.actualEquipment)==null?void 0:Et.id)||"")}Xt="STB_DEL"}const Ut=t.DTL_CTRT_ID||t.CTRT_ID||"",Ms=Re.some(cs=>{var fs;return cs.CTRT_ID===Ut||((fs=cs.actualEquipment)==null?void 0:fs.CTRT_ID)===Ut});Re.length>0&&!Ms&&(console.warn("[]    -   "),r==null||r("    .","warning"));const Cs=Re.find(cs=>{var fs;return cs.PROD_CMPS_CL==="23"||((fs=cs.actualEquipment)==null?void 0:fs.PROD_CMPS_CL)==="23"}),Bs=(Cs==null?void 0:Cs.PROD_CMPS_ID)||((Rt=Cs==null?void 0:Cs.actualEquipment)==null?void 0:Rt.PROD_CMPS_ID)||(Cs==null?void 0:Cs.EQT_PROD_CMPS_ID)||((He=Cs==null?void 0:Cs.actualEquipment)==null?void 0:He.EQT_PROD_CMPS_ID)||"",Es=(t.VOIP_PROD_CD||"")&&t.CTRT_ID||"";console.log(`[] ${Xt}  `,{isLghvStb:pt,eqtProdCmpsId:Bs,etc1:ts,voipJoinCtrtId:Es});const js=await _a({MSG_ID:Xt,CUST_ID:((ht=t.customer)==null?void 0:ht.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:Bs,PROD_CD:"",WRK_ID:t.id||"",REG_UID:Yt,ETC_1:ts,ETC_2:"",ETC_3:"",ETC_4:"",VOIP_JOIN_CTRT_ID:Es,WTIME:"3"});return js.code==="SUCCESS"||js.code==="OK"||js.message&&js.message.indexOf("TRUE")>-1&&js.message.indexOf("000000")>-1?(console.log("[] :",js),ee(!0),le({success:!0,message:"  "}),!0):(console.warn("[] :",js),le({success:!1,message:js.message||"  "}),!1)}catch(Pt){return console.error("[] :",Pt),le({success:!1,message:Pt.message||"  "}),!1}},rt=()=>{const Re=t.KPI_PROD_GRP_CD||"",Ct=t.VOIP_CTX||"";return["C","D","I"].includes(Re)&&Ct!=="T"&&Ct!=="R"},Wt=Re=>{console.log("[WorkCompleteRemovalTerminate]   () :",Re),V(Re),r==null||r("  .   .","info")},_t=Re=>{console.log("[WorkCompleteRemovalTerminate]   - AS  :",Re),V(Re),me(!0)},qt=async Re=>{console.log("[WorkCompleteRemovalTerminate] AS :",Re),ge(!0);try{const Ct=localStorage.getItem("userInfo"),Et=(Ct?JSON.parse(Ct):{}).userId||"A20130708",Rt=await Wp({WRK_ID:t.id,REMOVE_LINE_TP:Re.REMOVE_LINE_TP,REMOVE_GB:Re.REMOVE_GB,REMOVE_STAT:Re.REMOVE_STAT||"",REG_UID:Et});if(Rt.code!=="SUCCESS"&&Rt.code!=="OK")throw new Error(Rt.message||"   .");const He=await TM({CUST_ID:Re.CUST_ID,RCPT_ID:Re.RCPT_ID||"",WRK_DTL_TCD:Re.WRK_DTL_TCD,WRK_RCPT_CL:Re.WRK_RCPT_CL,WRK_RCPT_CL_DTL:Re.WRK_RCPT_CL_DTL,WRK_HOPE_DTTM:Re.WRK_HOPE_DTTM,MEMO:Re.MEMO||"",EMRG_YN:Re.EMRG_YN||"N",HOLY_YN:Re.HOLY_YN||"N",CRR_ID:Re.CRR_ID||"01",WRKR_ID:Re.WRKR_ID||Et,REG_UID:Re.REG_UID||Et});if(He.code==="SUCCESS"||He.code==="OK")me(!1),r==null||r("AS .   .","success");else throw new Error(He.message||"AS .")}catch(Ct){r==null||r(Ct.message||"AS   .","error",!0)}finally{ge(!1)}},Ot=()=>{if(k)return;if(((w==null?void 0:w.removedEquipments)||[]).some(Rt=>{var He;return Rt.PROD_CMPS_CL==="23"||((He=Rt.actualEquipment)==null?void 0:He.PROD_CMPS_CL)==="23"})){r==null||r("      .  .","error");return}const Ke=ds();if(Ke.length>0){if(Ke.forEach(Rt=>r==null?void 0:r(Rt,"error")),Ke.some(Rt=>Rt.includes(""))){const Rt=document.getElementById("removal-line-section");Rt&&(Rt.scrollIntoView({behavior:"smooth",block:"center"}),Rt.classList.add("ring-2","ring-red-500","ring-offset-2"),setTimeout(()=>{Rt.classList.remove("ring-2","ring-red-500","ring-offset-2")},2e3))}return}const Et=t.TERM_HOPE_DT||t.HOPE_DT||"";if(Et&&gt){const Rt=Et.replace(/-/g,"");gt.replace(/-/g,"")<Rt&&(r==null||r("  .","warning"))}ie(" ?"),be(!0)},_e=async()=>{var Ms,Cs,Bs;console.log("[WorkCompleteRemovalTerminate]   ");const Re=localStorage.getItem("userInfo"),Ct=Re?JSON.parse(Re):{},Ke=Ct.userId||"A20130708";let Et="N";const Rt=o||u0(t.OP_LNKD_CD);if(console.log("[CompleteRelocateTerminate] FTTH :",{IS_CERTIFY_PROD:t.IS_CERTIFY_PROD,OP_LNKD_CD:t.OP_LNKD_CD,isFtth:Rt}),Rt)try{const _s=t.CTRT_ID||"",Es=await Vg({CTRT_ID:_s,CUST_ID:((Ms=t.customer)==null?void 0:Ms.id)||t.CUST_ID||"",SO_ID:t.SO_ID||"",REG_UID:Ke,WRK_ID:t.id||""}),js=Array.isArray(Es)?Es[0]:Es;console.log("[CompleteRelocateTerminate] CL-08 result:",js,"ctrtId:",_s),js&&!js.ERROR&&js.CONT_ID===_s&&(Et="Y",console.log("[CompleteRelocateTerminate] CERTIFY_TG=Y (IS_CERTIFY_PROD=1 + CL-08 confirmed)"))}catch(_s){console.log("[CompleteRelocateTerminate] CL-08 query failed:",_s)}if(Et==="Y")try{const _s=(he==null?void 0:he.NEW_PROD_CD)||"",Es=(he==null?void 0:he.SO_ID)||t.SO_ID||"",js=Fe.some(Ls=>Ls.PROD_CD===_s),Ys=(await qa("CMIF006")).map(Ls=>Ls.code).includes(Es);if(console.log("[CompleteRelocateTerminate] CL-06  :",{certifyTg:Et,newProdCd:_s,newSoId:Es,isNewProdCertify:js,isNewSoCertify:Ys}),!js||!Ys){console.log("[CompleteRelocateTerminate] FTTH CL-06    ");const Ls=await Gp({CTRT_ID:t.CTRT_ID||"",CUST_ID:((Cs=t.customer)==null?void 0:Cs.id)||t.CUST_ID||"",WRK_ID:t.id||"",SO_ID:Es||t.SO_ID||"",REG_UID:Ke});if(Ls!=null&&Ls.ERROR){console.error("[CompleteRelocateTerminate] CL-06  :",Ls.ERROR),r==null||r(`  : ${Ls.ERROR}`,"error");return}console.log("[CompleteRelocateTerminate] CL-06    ")}else console.log("[CompleteRelocateTerminate]  /SO certify  CL-06 ")}catch(_s){console.error("[CompleteRelocateTerminate] CL-06  :",_s),r==null||r(`   : ${_s.message||"   "}`,"error");return}if(q&&q.REMOVE_GB==="4")try{console.log("[WorkCompleteRemovalTerminate]   API :",q);const _s=await Wp({WRK_ID:t.id||"",REMOVE_LINE_TP:q.REMOVE_LINE_TP||"",REMOVE_GB:q.REMOVE_GB||"4",REMOVE_STAT:q.REMOVE_STAT||"",REG_UID:Ke});if(_s.code!=="SUCCESS"&&_s.code!=="OK"){r==null||r(_s.message||"   .","error",!0);return}console.log("[WorkCompleteRemovalTerminate]    ")}catch(_s){r==null||r(_s.message||"     .","error",!0);return}if(je&&dt&&Ne){vt(!0);try{const _s=dt.SUS_HOPE_DD,Es=Vt(Ne),js=ss(_s,Es),cs=await IM({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",SUS_HOPE_DD:_s,MMT_SUS_HOPE_DD:Es,SUS_DD_NUM:String(js),REG_UID:Ke});if(cs.code!=="SUCCESS"){r==null||r(cs.message||"  ","error",!0),vt(!1);return}console.log("[CompleteRemovalTerminate]   ")}catch(_s){r==null||r(_s.message||"  ","error",!0),vt(!1);return}vt(!1)}const He=(w==null?void 0:w.removedEquipments)||[],ht=(w==null?void 0:w.customerEquipments)||[],Pt=(w==null?void 0:w.installedEquipments)||[],Bt=!!t.ISP_PROD_CD,Yt=t.CTRT_STAT||"";if(console.log("[CompleteRelocateTerminate]   :",{signalSent:Q,certifyTg:Et,removedEquipments:He.length,customerEquipments:ht.length,installedEquipments:Pt.length,hasIspProdForSignal:Bt,ctrtStat:Yt,ISP_PROD_CD:t.ISP_PROD_CD,CTRT_STAT:t.CTRT_STAT,shouldSendSignal:!Q&&Et!=="Y"&&(He.length>0||ht.length>0||Pt.length>0||Bt)&&Yt!=="20"}),!Q&&Et!=="Y"&&(He.length>0||ht.length>0||Pt.length>0||Bt)&&Yt!=="20"&&(r==null||r(" ...","info"),!await ft())){const Es=t.PROD_GRP||"",js=(Z==null?void 0:Z.message)||"";if(Es==="V"&&js.indexOf("PROC_VOIP_KCT-029")<0){r==null||r("VoIP   .","error",!0);return}if((t.MSO_OUT_YN||"")==="Y"){r==null||r("MSO      .  .","error");return}if(!window.confirm(` .
  ?`)){console.log("[CompleteRemovalTerminate]      ");return}console.log("[CompleteRemovalTerminate]      ")}const Xt=gt.replace(/-/g,""),ts=_s=>{if(!_s||_s.length===0)return[];const Es=(w==null?void 0:w.removalStatus)||{},js=(cs,fs)=>cs==="1"||cs==="Y"||fs==="1"||fs==="Y"?"1":"0";return _s.map(cs=>{var Ft,bs,zt,ws;const fs=cs.EQT_NO||cs.id||((Ft=cs.actualEquipment)==null?void 0:Ft.id)||"",Ys=Es[fs]||Es[cs.id]||Es[cs.EQT_NO]||Es[(bs=cs.actualEquipment)==null?void 0:bs.id]||Es[cs.serialNumber]||{},Ls=v?"1":"0",it={CRR_TSK_CL:"02",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Ct.crrId||"01",WRKR_ID:Ke,EQT_LOSS_YN:js(cs.EQT_LOSS_YN,Ys.EQT_LOSS_YN),PART_LOSS_BRK_YN:js(cs.PART_LOSS_BRK_YN,Ys.PART_LOSS_BRK_YN),EQT_BRK_YN:js(cs.EQT_BRK_YN,Ys.EQT_BRK_YN),EQT_CABL_LOSS_YN:js(cs.EQT_CABL_LOSS_YN,Ys.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:js(cs.EQT_CRDL_LOSS_YN,Ys.EQT_CRDL_LOSS_YN),REUSE_YN:Ls};if(cs.actualEquipment){const es=cs.actualEquipment,Os=cs.contractEquipment||{};return{...es,EQT_NO:es.id,EQT_SERNO:es.serialNumber,ITEM_MID_CD:es.itemMidCd,EQT_CL_CD:es.eqtClCd,MAC_ADDRESS:cs.macAddress||es.macAddress,WRK_ID:t.id,CUST_ID:(zt=t.customer)==null?void 0:zt.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:Os.id||Os.SVC_CMPS_ID||es.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:es.BASIC_PROD_CMPS_ID||Os.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:es.EQT_PROD_CMPS_ID||Os.id,PROD_CD:es.PROD_CD||Os.PROD_CD||t.PROD_CD||"",SVC_CD:es.SVC_CD||Os.SVC_CD||"",EQT_SALE_AMT:es.EQT_SALE_AMT||"0",MST_SO_ID:es.MST_SO_ID||t.SO_ID||"",SO_ID:es.SO_ID||t.SO_ID||"",REG_UID:Ke,OLD_LENT_YN:es.OLD_LENT_YN||"N",LENT:es.LENT||"10",ITLLMT_PRD:es.ITLLMT_PRD||"00",EQT_USE_STAT_CD:es.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:es.IF_DTL_ID||"",...it}}return{...cs,EQT_NO:cs.EQT_NO||cs.id||"",EQT_SERNO:cs.EQT_SERNO||cs.serialNumber||"",ITEM_MID_CD:cs.ITEM_MID_CD||cs.itemMidCd||"",EQT_CL_CD:cs.EQT_CL_CD||cs.eqtClCd||"",MAC_ADDRESS:cs.MAC_ADDRESS||cs.macAddress||"",SVC_CMPS_ID:cs.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:cs.BASIC_PROD_CMPS_ID||"",PROD_CD:cs.PROD_CD||"",SVC_CD:cs.SVC_CD||"",WRK_ID:cs.WRK_ID||t.id,CUST_ID:cs.CUST_ID||((ws=t.customer)==null?void 0:ws.id),CTRT_ID:cs.CTRT_ID||t.CTRT_ID,WRK_CD:cs.WRK_CD||t.WRK_CD,REG_UID:Ke,...it}})},Ut={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Bs=t.customer)==null?void 0:Bs.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||Ct.crrId||"01",WRKR_ID:Ke,WRKR_CMPL_DT:Xt,MEMO:I||" ",STTL_YN:"Y",REG_UID:Ke,CUST_REL:G,CNFM_CUST_NM:A,CNFM_CUST_TELNO:se,REQ_CUST_TEL_NO:se,INSTL_LOC:"",UP_CTRL_CL:"",PSN_USE_CORP:"",VOIP_USE_CORP:"",DTV_USE_CORP:"",WRK_ACT_CL:"20",NET_CL:(T==null?void 0:T.NET_CL)||"",WRNG_TP:(T==null?void 0:T.WRNG_TP)||"",INSTL_TP:(T==null?void 0:T.INSTL_TP)||"77",CB_WRNG_TP:(T==null?void 0:T.CB_WRNG_TP)||"",CB_INSTL_TP:(T==null?void 0:T.CB_INSTL_TP)||"",INOUT_LINE_TP:(T==null?void 0:T.INOUT_LINE_TP)||"",INOUT_LEN:(T==null?void 0:T.INOUT_LEN)||"",DVDR_YN:(T==null?void 0:T.DVDR_YN)||"",BFR_LINE_YN:(T==null?void 0:T.BFR_LINE_YN)||"",CUT_YN:(T==null?void 0:T.CUT_YN)||"",TERM_NO:(T==null?void 0:T.TERM_NO)||"",RCV_STS:(T==null?void 0:T.RCV_STS)||"",SUBTAP_ID:(T==null?void 0:T.SUBTAP_ID)||"",PORT_NUM:(T==null?void 0:T.PORT_NUM)||"",EXTN_TP:(T==null?void 0:T.EXTN_TP)||"",TAB_LBL:(T==null?void 0:T.TAB_LBL)||"",CVT_LBL:(T==null?void 0:T.CVT_LBL)||"",STB_LBL:(T==null?void 0:T.STB_LBL)||"",KPI_PROD_GRP:"",OBS_RCPT_CD:"",OBS_RCPT_DTL_CD:"",VOIP_JOIN_CTRT_ID:"",AGREE_YN:"",ISP_YN:"",AGREE_GB:"",CUST_CLEAN_YN:"",EQT_RMV_FLAG:"",TV_TYPE:""},equipmentList:[],removeEquipmentList:ts((w==null?void 0:w.removedEquipments)||[]),spendItemList:(w==null?void 0:w.spendItems)||[],agreementList:(w==null?void 0:w.agreements)||[],poleList:(w==null?void 0:w.poleResults)||[]};M(Ut,{onSuccess:_s=>{_s.code==="SUCCESS"||_s.code==="OK"?(localStorage.removeItem(B()),t.WRK_STAT_CD="3",r==null||r("  .","success"),n()):r==null||r(_s.message||"   .","error",!0)},onError:_s=>{r==null||r(_s.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[k&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:re||"",readOnly:!0,disabled:!0,placeholder:"  ()",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>$(!0),className:`px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${c?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:c?"":""})]}),!c&&!(T!=null&&T.NET_CL)&&s.jsx("p",{className:"mt-1 text-xs text-red-500",children:"*    ."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!c&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:G,onValueChange:U,options:ct,placeholder:" ",required:!0,disabled:c})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:I,onChange:Re=>E(Re.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${c?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:c,disabled:c}),!c&&s.jsxs("p",{className:`text-xs text-right mt-1 ${I.length>=500?"text-red-500":"text-gray-400"}`,children:[I.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:gt,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),pe&&!c&&s.jsxs("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-semibold text-indigo-800",children:""}),St==="success"&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full",children:""}),St==="error"&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:""})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:Ss,disabled:xt,className:"flex-1 px-3 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-1.5",children:[xt?s.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.jsx("span",{children:""})]}),s.jsxs("button",{type:"button",onClick:Ae,disabled:xt,className:"flex-1 px-3 py-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsx("span",{children:""})]})]}),Be&&s.jsx("p",{className:`mt-2 text-xs ${St==="error"?"text-red-600":St==="success"?"text-green-600":"text-gray-600"}`,children:Be})]}),pt&&!c&&s.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-orange-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-sm font-medium text-orange-800",children:"LGHV STB .    STB   ."})]})}),s.jsx(iN,{custId:((Se=t.customer)==null?void 0:Se.id)||t.CUST_ID||"",rcptId:t.RCPT_ID||"",ctrtId:t.CTRT_ID||"",soId:t.SO_ID||"",termDt:t.TERM_DT||"",wrkCd:t.WRK_CD,showToast:r}),rt()&&s.jsx(GM,{onComplete:Wt,onAssignAS:_t,showToast:r,disabled:c,savedData:q,onReset:()=>V(null)}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:[!c&&s.jsx("button",{onClick:Ot,disabled:k,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${k?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:k?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})}),s.jsxs("button",{type:"button",onClick:()=>J(!0),className:"flex-1 min-h-10 sm:min-h-12 px-3 sm:px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors flex items-center justify-center gap-1.5 sm:gap-2 text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:""})]})]})]})})}),s.jsx(Pc,{isOpen:z,onClose:()=>$(!1),onSave:vs,workId:t.id,initialData:T,workType:t.WRK_CD,customerId:t.customer.id,customerName:t.customer.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(w==null?void 0:w.kpiProdGrpCd)||(w==null?void 0:w.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(w==null?void 0:w.prodChgGb)||(w==null?void 0:w.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(w==null?void 0:w.chgKpiProdGrpCd)||(w==null?void 0:w.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(w==null?void 0:w.prodGrp)||(w==null?void 0:w.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:c}),s.jsx(el,{isOpen:K,onClose:()=>J(!1),ctrtId:t.CTRT_ID,custId:t.customer.id}),s.jsx(aN,{isOpen:Ge,onClose:()=>te(!1),moveWorkData:he,order:t}),s.jsx(WM,{isOpen:ce,onClose:()=>me(!1),onSave:qt,removalLineData:q,custId:((Ie=t.customer)==null?void 0:Ie.id)||"",custNm:((Te=t.customer)==null?void 0:Te.name)||"",addrOrd:((nt=t.customer)==null?void 0:nt.ADDR_ORD)||"",address:t.address||"",showToast:r}),s.jsx(Ba,{isOpen:xe,onClose:()=>be(!1),onConfirm:_e,title:" ",message:ne,type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{equipmentData:w,installInfoData:T,custRel:G,custRelOptions:ct,memo:I,order:t})})]})},T6=({order:t,onBack:e,onSuccess:n,showToast:r,equipmentData:i,readOnly:a=!1})=>{var Z,le,xe;const o=a||t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status===""||t.status==="",[c,u]=b.useState(!1),{equipmentData:h,filteringData:m}=ta(),{certifyRegconfInfo:_}=Za(),p=t.id||"",g=xa(p),C={...h||i||m||{},installedEquipments:g.installedEquipments.length>0?g.installedEquipments:(h==null?void 0:h.installedEquipments)||(i==null?void 0:i.installedEquipments)||[],removedEquipments:g.markedForRemoval.length>0?g.markedForRemoval:(h==null?void 0:h.removedEquipments)||(i==null?void 0:i.removedEquipments)||[],removalStatus:Object.keys(g.removalStatus).length>0?g.removalStatus:(h==null?void 0:h.removalStatus)||(i==null?void 0:i.removalStatus)||{}},{mutate:y,isPending:N}=jd(),v=()=>`work_complete_draft_${t.id}`,[P,w]=b.useState(""),[M,k]=b.useState(""),[B,G]=b.useState(((Z=t.customer)==null?void 0:Z.name)||""),[U,I]=b.useState(((le=t.customer)==null?void 0:le.phone)||""),[E,A]=b.useState(!1),[Y,se]=b.useState(!1),[X,z]=b.useState(""),[$,F]=b.useState(""),[L,re]=b.useState(void 0),[fe,T]=b.useState(!1),[j,K]=b.useState(""),J=t.MVM_TP==="1"&&["1","2"].includes(t.WRK_STAT_CD||"")&&t.CTRT_ID,[q,V]=b.useState([]),[ce,me]=b.useState(!1),[Ce,ge]=b.useState([]),[Ge,te]=b.useState(()=>{const be=t.WRKR_CMPL_DT||t.WRK_END_DTTM;if(be&&be.length>=8)return`${be.slice(0,4)}-${be.slice(4,6)}-${be.slice(6,8)}`;const ne=new Date;return ne.getFullYear()+"-"+String(ne.getMonth()+1).padStart(2,"0")+"-"+String(ne.getDate()).padStart(2,"0")});b.useEffect(()=>{(async()=>{try{console.log("[WorkCompleteRemoval] getWorkReceiptDetail API ");const ne=await Md({WRK_DRCTN_ID:t.directionId||t.WRK_DRCTN_ID||"",WRK_ID:t.id,SO_ID:t.SO_ID});if(ne)if(console.log("[WorkCompleteRemoval] API :",ne),o)w(ne.CUST_REL||""),k((ne.WRK_PROC_CT||"").replace(/\\n/g,`
`)),z(ne.NET_CL||""),F(ne.NET_CL_NM||""),re({NET_CL:ne.NET_CL||"",NET_CL_NM:ne.NET_CL_NM||"",WRNG_TP:ne.WRNG_TP||"",INSTL_TP:ne.INSTL_TP||"",CB_WRNG_TP:ne.CB_WRNG_TP||"",CB_INSTL_TP:ne.CB_INSTL_TP||"",INOUT_LINE_TP:ne.INOUT_LINE_TP||"",INOUT_LEN:ne.INOUT_LEN||"",DVDR_YN:ne.DVDR_YN||"",BFR_LINE_YN:ne.BFR_LINE_YN||"",CUT_YN:ne.CUT_YN||"",TERM_NO:ne.TERM_NO||"",RCV_STS:ne.RCV_STS||"",SUBTAP_ID:ne.SUBTAP_ID||"",PORT_NUM:ne.PORT_NUM||"",EXTN_TP:ne.EXTN_TP||"",TAB_LBL:ne.TAB_LBL||"",CVT_LBL:ne.CVT_LBL||"",STB_LBL:ne.STB_LBL||""}),k((ne.WRK_PROC_CT||"").replace(/\\n/g,`
`)),ne.WRKR_CMPL_DT&&ne.WRKR_CMPL_DT.length>=8&&te(`${ne.WRKR_CMPL_DT.slice(0,4)}-${ne.WRKR_CMPL_DT.slice(4,6)}-${ne.WRKR_CMPL_DT.slice(6,8)}`);else{const ie=localStorage.getItem(v());if(ie)try{const pe=JSON.parse(ie);pe.installInfoData&&pe.installInfoData.NET_CL?(console.log("[WorkCompleteRemoval] localStorage  "),w(pe.custRel||""),k(pe.memo||""),z(pe.networkType||""),F(pe.networkTypeName||""),re(pe.installInfoData)):(console.log("[WorkCompleteRemoval] API   "),z(ne.NET_CL||""),F(ne.NET_CL_NM||""),re({NET_CL:ne.NET_CL||"",NET_CL_NM:ne.NET_CL_NM||"",WRNG_TP:ne.WRNG_TP||"",INSTL_TP:ne.INSTL_TP||"",CB_WRNG_TP:ne.CB_WRNG_TP||"",CB_INSTL_TP:ne.CB_INSTL_TP||"",INOUT_LINE_TP:ne.INOUT_LINE_TP||"",INOUT_LEN:ne.INOUT_LEN||"",DVDR_YN:ne.DVDR_YN||"",BFR_LINE_YN:ne.BFR_LINE_YN||"",CUT_YN:ne.CUT_YN||""}),w(pe.custRel||""),k(pe.memo||""))}catch(pe){console.error("[WorkCompleteRemoval] localStorage  :",pe),z(ne.NET_CL||""),F(ne.NET_CL_NM||""),re({NET_CL:ne.NET_CL||"",NET_CL_NM:ne.NET_CL_NM||"",WRNG_TP:ne.WRNG_TP||"",INSTL_TP:ne.INSTL_TP||"",CB_WRNG_TP:ne.CB_WRNG_TP||"",CB_INSTL_TP:ne.CB_INSTL_TP||"",INOUT_LINE_TP:ne.INOUT_LINE_TP||"",INOUT_LEN:ne.INOUT_LEN||"",DVDR_YN:ne.DVDR_YN||"",BFR_LINE_YN:ne.BFR_LINE_YN||"",CUT_YN:ne.CUT_YN||""})}else console.log("[WorkCompleteRemoval] localStorage  - API   "),z(ne.NET_CL||""),F(ne.NET_CL_NM||""),re({NET_CL:ne.NET_CL||"",NET_CL_NM:ne.NET_CL_NM||"",WRNG_TP:ne.WRNG_TP||"",INSTL_TP:ne.INSTL_TP||"",CB_WRNG_TP:ne.CB_WRNG_TP||"",CB_INSTL_TP:ne.CB_INSTL_TP||"",INOUT_LINE_TP:ne.INOUT_LINE_TP||"",INOUT_LEN:ne.INOUT_LEN||"",DVDR_YN:ne.DVDR_YN||"",BFR_LINE_YN:ne.BFR_LINE_YN||"",CUT_YN:ne.CUT_YN||""})}else{console.log("[WorkCompleteRemoval] API   - localStorage  ");const ie=localStorage.getItem(v());if(ie)try{const pe=JSON.parse(ie);w(pe.custRel||""),k(pe.memo||""),z(pe.networkType||""),F(pe.networkTypeName||""),re(pe.installInfoData)}catch(pe){console.error("[WorkCompleteRemoval] localStorage  :",pe)}}}catch(ne){console.error("[WorkCompleteRemoval] API  :",ne);const ie=localStorage.getItem(v());if(ie)try{const pe=JSON.parse(ie);w(pe.custRel||""),k(pe.memo||""),z(pe.networkType||""),F(pe.networkTypeName||""),re(pe.installInfoData)}catch(pe){console.error("[WorkCompleteRemoval] localStorage  :",pe)}}finally{u(!0)}})()},[t.id,o]),b.useEffect(()=>{if(!c||o)return;const be={custRel:P,memo:M,networkType:X,networkTypeName:$,installInfoData:L,savedAt:new Date().toISOString()};localStorage.setItem(v(),JSON.stringify(be))},[P,M,X,$,L,c,o]),b.useEffect(()=>{(async()=>{try{const ne=await No(["CMCU005"]);ne.CMCU005&&V(ne.CMCU005.map(ie=>({value:ie.COMMON_CD,label:ie.COMMON_CD_NM})))}catch(ne){console.error("[WorkCompleteRemoval]    :",ne)}})()},[]),b.useEffect(()=>{(async()=>{try{const ne=await Uc(),ie=(ne==null?void 0:ne.output)||ne||[];ge(ie);const pe=t.PROD_CD||t.PROD_CD||"",ze=ie.some(xt=>xt.PROD_CD===pe);me(ze),console.log("[CompleteRemoval] LGHV :",{currentProdCd:pe,isLghv:ze,prodListCount:ie.length})}catch(ne){console.error("[CompleteRemoval] LGHV   :",ne)}})()},[t.PROD_CD]);const he=()=>{const be=[];(!B||B.trim()==="")&&be.push(" ."),(!U||U.trim()==="")&&be.push(" ."),(!P||P==="[]")&&be.push("  ."),L!=null&&L.NET_CL||be.push("  ."),L!=null&&L.WRNG_TP||be.push("  ."),L!=null&&L.INSTL_TP||be.push("  ."),Ge||be.push(" .");const ne=t.PROD_GRP||"",ie=(C==null?void 0:C.removedEquipments)||[];return ne!=="V"&&ie.length<1&&be.push("  .   ."),be},de=be=>{re(be),be.NET_CL&&z(be.NET_CL),be.NET_CL_NM&&F(be.NET_CL_NM),r==null||r("  .","success")},Q=()=>{var xt,st;if(N)return;if(((C==null?void 0:C.removedEquipments)||[]).some(St=>{var ot;return St.PROD_CMPS_CL==="23"||((ot=St.actualEquipment)==null?void 0:ot.PROD_CMPS_CL)==="23"})){r==null||r("      .  .","error");return}const ie=he();if(ie.length>0){ie.forEach(St=>r==null?void 0:r(St,"error"));return}const pe=t.TERM_HOPE_DT||t.HOPE_DT||"";if(pe&&Ge){const St=pe.replace(/-/g,"");Ge.replace(/-/g,"")<St&&(r==null||r("  .","warning"))}const ze=((xt=C==null?void 0:C.removedEquipments)==null?void 0:xt.length)>0||((st=C==null?void 0:C.installedEquipments)==null?void 0:st.length)>0?` ?
(      .)`:" ?";K(ze),T(!0)},ee=async()=>{var pt,mt,Ye,at,Fe,tt,ct,Mt;console.log("[WorkCompleteRemoval]   ");const be=Ge.replace(/-/g,""),ne=localStorage.getItem("userInfo"),ie=ne?JSON.parse(ne):{},pe=ie.userId||"A20130708",ze=t.WRK_DTL_TCD||"";if(ze==="0910"||ze==="0920"){const dt=ze==="0910"?"SMR06":"SMR08";try{const Je=t.PROD_GRP||"",De=t.VOIP_PROD_CD||"",$e=Je==="V"&&De&&t.CTRT_ID||"";let Ne=t.PROD_CD||"",ye="";try{const ue=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"09"}),Oe=ue.find(vt=>vt.PROD_CMPS_CL==="11");Oe&&(Ne=Oe.PROD_CD||Ne);const Ze=ze==="0910"?"10":"80",Le=ue.filter(vt=>vt.BASIC_PROD_FL==="V"&&vt.PROD_STAT_CD===Ze).map(vt=>vt.PROD_CD);Le.length>0&&(ye=Le.join(","))}catch(ue){console.log("[CompleteRemoval] getProdPromotionInfo for buga signal failed:",ue)}console.log(`[CompleteRemoval]  (${dt}) :`,{wrkDtlTcd:ze,bugaProdCd:Ne,subProdCd:ye,voipJoinCtrtId:$e});const Ue=await _a({MSG_ID:dt,CUST_ID:((pt=t.customer)==null?void 0:pt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:"",PROD_CD:Ne,WRK_ID:t.id||"",REG_UID:pe,SUB_PROD_CD:ye,VOIP_JOIN_CTRT_ID:$e,WTIME:"99"});Ue.code!=="SUCCESS"&&Ue.code!=="OK"?console.log(`[CompleteRemoval]  (${dt})   ():`,Ue.message):console.log(`[CompleteRemoval]  (${dt})  `)}catch(Je){console.log("[CompleteRemoval]      (  ):",Je)}}const xt=(C==null?void 0:C.removedEquipments)||[];let st=!1,St=!1;if(xt.length>0){for(const dt of xt){const Je=dt.actualEquipment||dt,De=Je.eqtClCd||Je.EQT_CL_CD||"";De==="090901"||De==="091001"||De==="091005"||(st=!0)}if(st)try{const dt=xt[0],Je=dt.actualEquipment||dt,De=Je.PROD_CMPS_ID||dt.PROD_CMPS_ID||Je.EQT_PROD_CMPS_ID||dt.EQT_PROD_CMPS_ID||"",$e=t.PROD_GRP||"",Ne=t.VOIP_PROD_CD||"",ye=$e==="V"&&Ne&&t.CTRT_ID||"";console.log("[CompleteRemoval]  (SMR05) :",{eqtProdCmpsId:De,voipJoinCtrtId:ye});const Ue=await _a({MSG_ID:"SMR05",CUST_ID:((mt=t.customer)==null?void 0:mt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:De,PROD_CD:"",WRK_ID:t.id||"",REG_UID:pe,VOIP_JOIN_CTRT_ID:ye,WTIME:"3"});if(Ue.code!=="SUCCESS"&&Ue.code!=="OK"){if((((Ye=Ue.O_IFSVC_RESULT)==null?void 0:Ye.substring(14,20))||"")!=="029"&&((at=Ue.message)==null?void 0:at.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteRemoval]    -  :",Ue.message),r==null||r("   .","error",!0);return}}else console.log("[CompleteRemoval]  (SMR05)  ");St=!0}catch(dt){console.error("[CompleteRemoval]     :",dt),r==null||r("   .","error",!0);return}}if(!st){const dt=(C==null?void 0:C.customerEquipments)||[],Je=(C==null?void 0:C.installedEquipments)||[],De=!!t.ISP_PROD_CD;if(dt.length>0||Je.length>0||De)try{const $e=t.PROD_GRP||"",Ne=t.VOIP_PROD_CD||"",ye=$e==="V"&&Ne&&t.CTRT_ID||"";console.log("[CompleteRemoval]  (SMR05) fallback - del_signal_flag=false, eqt/ISP exists");const Ue=await _a({MSG_ID:"SMR05",CUST_ID:((Fe=t.customer)==null?void 0:Fe.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:"",EQT_PROD_CMPS_ID:"",PROD_CD:"",WRK_ID:t.id||"",REG_UID:pe,VOIP_JOIN_CTRT_ID:ye,WTIME:"3"});if(Ue.code!=="SUCCESS"&&Ue.code!=="OK"){if((((tt=Ue.O_IFSVC_RESULT)==null?void 0:tt.substring(14,20))||"")!=="029"&&((ct=Ue.message)==null?void 0:ct.indexOf("PROC_VOIP_KCT-029"))===-1){console.warn("[CompleteRemoval]   fallback  -  :",Ue.message),r==null||r("   .","error",!0);return}}else console.log("[CompleteRemoval]  (SMR05) fallback ");St=!0}catch($e){console.error("[CompleteRemoval]   fallback :",$e),r==null||r("   .","error",!0);return}}const ot=(dt,Je=!1)=>{if(!dt||dt.length===0)return[];const De=(C==null?void 0:C.removalStatus)||{},$e=(Ne,ye)=>Ne==="1"||Ne==="Y"||ye==="1"||ye==="Y"?"1":"0";return dt.map(Ne=>{var Oe,Ze,Le,vt;const ye=Ne.EQT_NO||Ne.id||((Oe=Ne.actualEquipment)==null?void 0:Oe.id)||"",Ue=De[ye]||De[Ne.id]||De[Ne.EQT_NO]||De[(Ze=Ne.actualEquipment)==null?void 0:Ze.id]||De[Ne.serialNumber]||{},ue=Je?{CRR_TSK_CL:t.WRK_CD||"09",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||ie.crrId||"01",WRKR_ID:pe,EQT_LOSS_YN:$e(Ne.EQT_LOSS_YN,Ue.EQT_LOSS_YN),PART_LOSS_BRK_YN:$e(Ne.PART_LOSS_BRK_YN,Ue.PART_LOSS_BRK_YN),EQT_BRK_YN:$e(Ne.EQT_BRK_YN,Ue.EQT_BRK_YN),EQT_CABL_LOSS_YN:$e(Ne.EQT_CABL_LOSS_YN,Ue.EQT_CABL_LOSS_YN),EQT_CRDL_LOSS_YN:$e(Ne.EQT_CRDL_LOSS_YN,Ue.EQT_CRDL_LOSS_YN),REUSE_YN:Ne.REUSE_YN==="1"||Ue.REUSE_YN==="1"?"1":"0"}:{};if(Ne.actualEquipment){const je=Ne.actualEquipment,ut=Ne.contractEquipment||{};return{...je,EQT_NO:je.id,EQT_SERNO:je.serialNumber,ITEM_MID_CD:je.itemMidCd,EQT_CL_CD:je.eqtClCd,MAC_ADDRESS:Ne.macAddress||je.macAddress,WRK_ID:t.id,CUST_ID:(Le=t.customer)==null?void 0:Le.id,CTRT_ID:t.CTRT_ID,WRK_CD:t.WRK_CD,SVC_CMPS_ID:ut.id||ut.SVC_CMPS_ID||je.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:je.BASIC_PROD_CMPS_ID||ut.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:je.EQT_PROD_CMPS_ID||ut.id,PROD_CD:je.PROD_CD||ut.PROD_CD||t.PROD_CD||"",SVC_CD:je.SVC_CD||ut.SVC_CD||"",EQT_SALE_AMT:je.EQT_SALE_AMT||"0",MST_SO_ID:je.MST_SO_ID||t.SO_ID||"",SO_ID:je.SO_ID||t.SO_ID||"",REG_UID:pe,OLD_LENT_YN:je.OLD_LENT_YN||"N",LENT:je.LENT||"10",ITLLMT_PRD:je.ITLLMT_PRD||"00",EQT_USE_STAT_CD:je.EQT_USE_STAT_CD||"1",EQT_CHG_GB:"1",IF_DTL_ID:je.IF_DTL_ID||"",...ue}}return{...Ne,EQT_NO:Ne.EQT_NO||Ne.id||"",EQT_SERNO:Ne.EQT_SERNO||Ne.serialNumber||"",ITEM_MID_CD:Ne.ITEM_MID_CD||Ne.itemMidCd||"",EQT_CL_CD:Ne.EQT_CL_CD||Ne.eqtClCd||"",MAC_ADDRESS:Ne.MAC_ADDRESS||Ne.macAddress||"",SVC_CMPS_ID:Ne.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ne.BASIC_PROD_CMPS_ID||"",PROD_CD:Ne.PROD_CD||"",SVC_CD:Ne.SVC_CD||"",WRK_ID:Ne.WRK_ID||t.id,CUST_ID:Ne.CUST_ID||((vt=t.customer)==null?void 0:vt.id),CTRT_ID:Ne.CTRT_ID||t.CTRT_ID,WRK_CD:Ne.WRK_CD||t.WRK_CD,REG_UID:pe,...ue}})},Be={workInfo:{WRK_ID:t.id,WRK_CD:t.WRK_CD,WRK_DTL_TCD:t.WRK_DTL_TCD,CUST_ID:(Mt=t.customer)==null?void 0:Mt.id,CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID,CRR_ID:t.CRR_ID||ie.crrId||"01",WRKR_ID:pe,WRKR_CMPL_DT:be,MEMO:M||" ",STTL_YN:"Y",REG_UID:pe,CUST_REL:P,CNFM_CUST_NM:B,CNFM_CUST_TELNO:U,REUSE_YN:E?"Y":"N",INSTL_LOC:t.INSTL_LOC||t.installLocation||"",UP_CTRL_CL:"",PSN_USE_CORP:"",VOIP_USE_CORP:"",DTV_USE_CORP:"",WRK_ACT_CL:"20",NET_CL:(L==null?void 0:L.NET_CL)||"",WRNG_TP:(L==null?void 0:L.WRNG_TP)||"",INSTL_TP:(L==null?void 0:L.INSTL_TP)||"",CB_WRNG_TP:(L==null?void 0:L.CB_WRNG_TP)||"",CB_INSTL_TP:(L==null?void 0:L.CB_INSTL_TP)||"",INOUT_LINE_TP:(L==null?void 0:L.INOUT_LINE_TP)||"",INOUT_LEN:(L==null?void 0:L.INOUT_LEN)||"",DVDR_YN:(L==null?void 0:L.DVDR_YN)||"",BFR_LINE_YN:(L==null?void 0:L.BFR_LINE_YN)||"",CUT_YN:(L==null?void 0:L.CUT_YN)||"",TERM_NO:(L==null?void 0:L.TERM_NO)||"",RCV_STS:(L==null?void 0:L.RCV_STS)||"",SUBTAP_ID:(L==null?void 0:L.SUBTAP_ID)||"",PORT_NUM:(L==null?void 0:L.PORT_NUM)||"",EXTN_TP:(L==null?void 0:L.EXTN_TP)||"",TAB_LBL:(L==null?void 0:L.TAB_LBL)||"",CVT_LBL:(L==null?void 0:L.CVT_LBL)||"",STB_LBL:(L==null?void 0:L.STB_LBL)||"",KPI_PROD_GRP:"",OBS_RCPT_CD:"",OBS_RCPT_DTL_CD:"",VOIP_JOIN_CTRT_ID:"",AGREE_YN:"",ISP_YN:"",AGREE_GB:"",CUST_CLEAN_YN:"",EQT_RMV_FLAG:"",TV_TYPE:""},equipmentList:ot((C==null?void 0:C.installedEquipments)||[],!1),removeEquipmentList:ot((C==null?void 0:C.removedEquipments)||[],!0),spendItemList:(C==null?void 0:C.spendItems)||[],agreementList:(C==null?void 0:C.agreements)||[],poleList:(C==null?void 0:C.poleResults)||[]},lt=async()=>{var dt;try{const Je=(C==null?void 0:C.customerEquipments)||[],De=(C==null?void 0:C.installedEquipments)||[],$e=[...Je,...De],Ne=["090901","091001","091005"];let ye=!1;for(const Ae of $e){const ft=Ae.actualEquipment||Ae,rt=ft.eqtClCd||ft.EQT_CL_CD||"";if(Ne.includes(rt))continue;(ft.EQT_KND||ft.eqtKnd||"WRKER")==="WRKER"&&(ye=!0)}if(!ye&&St&&(ye=!0),!ye){console.log("[CompleteRemoval] SMR03 skip - no WRKER equipment and no SMR05 sent");return}const Ue=t.PROD_GRP||"",ue=t.VOIP_PROD_CD||"";let Oe=Ue==="V"?"SMR60":"SMR03";ce&&Ue!=="V"&&(Oe="STB_CHG");let Ze=[];try{Ze=await Tl({CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",PROC_CL:"",WRK_CD:"09"})}catch(Ae){console.log("[CompleteRemoval] getProdPromotionInfo failed:",Ae)}const Le=Ze.find(Ae=>Ae.PROD_CMPS_CL==="23"),vt=(Le==null?void 0:Le.PROD_CMPS_ID)||"",je=Ze.find(Ae=>Ae.PROD_CMPS_CL==="11"),ut=(je==null?void 0:je.PROD_CD)||"",gt=(je==null?void 0:je.PROD_GRP)||Ue,jt=Ze.filter(Ae=>Ae.BASIC_PROD_FL==="V").map(Ae=>Ae.PROD_CD),Ve=jt.length>0?jt.join(","):"",Vt=Ae=>{var rt,Wt;const ft=$e.find(_t=>{var qt,Ot;return(_t.ITEM_MID_CD||_t.itemMidCd||((qt=_t.actualEquipment)==null?void 0:qt.ITEM_MID_CD)||((Ot=_t.actualEquipment)==null?void 0:Ot.itemMidCd))===Ae});return(ft==null?void 0:ft.EQT_NO)||(ft==null?void 0:ft.id)||((rt=ft==null?void 0:ft.actualEquipment)==null?void 0:rt.EQT_NO)||((Wt=ft==null?void 0:ft.actualEquipment)==null?void 0:Wt.id)||""};let ke="";ue?ke=Vt("08"):ke=Vt("05")||Vt("01")||Vt("03")||(gt==="I"?Vt("02"):"")||Vt("08")||"";let ss="";ue?ss=Vt("02"):ss=Vt("04");const ls=Vt("07"),ds=gt==="C"?Vt("02"):"";let vs="";Vt("10")&&gt==="V"&&(vs=Vt("10")),t.ISP_PROD_CD&&(vs=Vt("21"));let Ss="";Ue==="V"&&ue&&(Ss=t.CTRT_ID||""),console.log("[CompleteRemoval] SMR03 installation signal:",{msgId:Oe,eqtNo:ke,eqtProdCmpsId:vt}),await _a({MSG_ID:Oe,CUST_ID:((dt=t.customer)==null?void 0:dt.id)||t.CUST_ID||"",CTRT_ID:t.CTRT_ID||"",SO_ID:t.SO_ID||"",EQT_NO:ke,EQT_PROD_CMPS_ID:vt,PROD_CD:ut,WRK_ID:t.id||"",REG_UID:pe,ETC_1:ss,ETC_2:ls,ETC_3:ds,ETC_4:vs,SUB_PROD_CD:Ve,VOIP_JOIN_CTRT_ID:Ss,WTIME:"3"}),console.log("[CompleteRemoval] SMR03 installation signal sent")}catch(Je){console.warn("[CompleteRemoval] SMR03 installation signal error (ignored):",Je)}};y(Be,{onSuccess:dt=>{dt.code==="SUCCESS"||dt.code==="OK"?(localStorage.removeItem(v()),t.WRK_STAT_CD="3",lt(),r==null||r("  .","success"),n()):r==null||r(dt.message||"   .","error",!0)},onError:dt=>{r==null||r(dt.message||"    .","error",!0)}})};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 bg-gray-50 min-h-0 relative",children:[N&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-3 shadow-xl",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-gray-700 font-medium",children:" ..."})]})}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[s.jsx("input",{type:"text",value:$||"",readOnly:!0,disabled:!0,placeholder:" ",className:"flex-1 min-w-0 min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-100 border border-gray-200 rounded-lg text-sm sm:text-base text-gray-600 cursor-not-allowed truncate"}),s.jsx("button",{type:"button",onClick:()=>se(!0),className:`px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-colors whitespace-nowrap flex-shrink-0 ${o?"bg-gray-500 hover:bg-gray-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:o?"":""})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!o&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:B,onChange:be=>G(be.target.value),placeholder:" ",className:`w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base ${o?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:o,disabled:o})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!o&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:U,onChange:be=>I(be.target.value),placeholder:" ",className:`w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base ${o?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:o,disabled:o})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:[" ",!o&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:P,onValueChange:w,options:q,placeholder:" ",required:!0,disabled:o})]}),J&&!o&&s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("input",{type:"checkbox",id:"reuseYn",checked:E,onChange:be=>A(be.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"reuseYn",className:"text-sm font-medium text-gray-700",children:" (    )"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-900 mb-1.5 sm:mb-2",children:""}),s.jsx("textarea",{value:M,onChange:be=>k(be.target.value),placeholder:"  ...",maxLength:500,className:`w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg text-sm sm:text-base resize-none ${o?"bg-gray-100 text-gray-600 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}`,rows:4,readOnly:o,disabled:o}),!o&&s.jsxs("p",{className:`text-xs text-right mt-1 ${M.length>=500?"text-red-500":"text-gray-400"}`,children:[M.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Ge,readOnly:!0,disabled:!0,className:"w-full min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 border border-gray-300 rounded-lg text-sm sm:text-base text-gray-500 cursor-not-allowed"})]}),s.jsx(iN,{custId:((xe=t.customer)==null?void 0:xe.id)||t.CUST_ID||"",rcptId:t.RCPT_ID||"",ctrtId:t.CTRT_ID||"",soId:t.SO_ID||"",termDt:t.TERM_DT||"",wrkCd:t.WRK_CD,showToast:r}),!o&&s.jsx("div",{className:"flex gap-1.5 sm:gap-2 pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200",children:s.jsx("button",{onClick:Q,disabled:N,className:`flex-1 min-h-12 py-3 px-4 rounded-lg font-bold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${N?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:N?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:""})]})})})]})})}),s.jsx(Pc,{isOpen:Y,onClose:()=>se(!1),onSave:de,workId:t.id,initialData:L,workType:t.WRK_CD,customerId:t.customer.id,customerName:t.customer.name,contractId:t.CTRT_ID,addrOrd:t.ADDR_ORD||"",kpiProdGrpCd:(C==null?void 0:C.kpiProdGrpCd)||(C==null?void 0:C.KPI_PROD_GRP_CD)||t.KPI_PROD_GRP_CD,prodChgGb:(C==null?void 0:C.prodChgGb)||(C==null?void 0:C.PROD_CHG_GB)||t.PROD_CHG_GB,chgKpiProdGrpCd:(C==null?void 0:C.chgKpiProdGrpCd)||(C==null?void 0:C.CHG_KPI_PROD_GRP_CD)||t.CHG_KPI_PROD_GRP_CD,prodGrp:(C==null?void 0:C.prodGrp)||(C==null?void 0:C.PROD_GRP)||t.PROD_GRP,wrkDtlTcd:t.WRK_DTL_TCD,readOnly:o}),s.jsx(Ba,{isOpen:fe,onClose:()=>T(!1),onConfirm:ee,title:" ",message:j,type:"confirm",confirmText:"",cancelText:"",children:s.jsx(Id,{equipmentData:C,installInfoData:L,custRel:P,custRelOptions:q,memo:M,order:t})})]})},M6=t=>{const{order:e}=t,[n,r]=b.useState(""),[i,a]=b.useState(!1);if(b.useEffect(()=>{(async()=>{try{const h=e.DTL_CTRT_ID||e.CTRT_ID||"";if(h){console.log("[CompleteLGUInstall] LDAP subscription check:",h,"(DTL_CTRT_ID:",e.DTL_CTRT_ID,", CTRT_ID:",e.CTRT_ID,")");const m=await Z2(h),_=m.exists?"":"";r(_),console.log("[CompleteLGUInstall] LDAP result:",{exists:m.exists,reason:_})}}catch(h){console.log("[CompleteLGUInstall] LDAP check failed, using default:",h),r("")}a(!0)})()},[e.CTRT_ID]),!i)return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-sm text-gray-500",children:"LGU+    ..."})]})});const o={certifyMode:!0,certifyReason:n};switch(e.WRK_CD){case"06":return s.jsx(YM,{...t,...o});case"07":return s.jsx($M,{...t,...o});default:return s.jsx(JC,{...t,...o})}},I6=t=>{const{order:e}=t,n={certifyMode:!0};return e.WRK_CD==="08"?s.jsx(VM,{...t,...n}):s.jsx(FM,{...t,...n})},j6=t=>s.jsx(KM,{...t,certifyMode:!0}),O6=t=>s.jsx(QM,{...t,certifyMode:!0}),Kp=t=>{const{order:e,isCertifyProd:n}=t,r=e.WRK_CD;if(n)switch(r){case"01":case"06":case"07":return s.jsx(M6,{...t});case"02":case"08":return s.jsx(I6,{...t});case"03":return s.jsx(j6,{...t});case"05":return s.jsx(O6,{...t})}switch(r){case"01":return s.jsx(JC,{...t});case"02":return s.jsx(FM,{...t});case"03":return s.jsx(KM,{...t});case"04":return s.jsx(R6,{...t});case"05":return s.jsx(QM,{...t});case"06":return s.jsx(YM,{...t});case"07":return s.jsx($M,{...t});case"08":return s.jsx(VM,{...t});case"09":return s.jsx(T6,{...t});default:return console.warn(`[WorkCompleteRouter] Unknown WRK_CD: ${r}, using default form`),s.jsx(JC,{...t})}},w6=t=>({"01":"","02":"","03":"A/S","04":"","05":"","06":"","07":"","08":"","09":""})[t]||"",L6=()=>md().startOf("month").format("YYYY-MM-DD"),P6=()=>md().endOf("month").format("YYYY-MM-DD"),uo=D1()(R1(t=>({isDrawerOpen:!1,activeTab:"work-receipt",currentView:"today-work",workFilters:{startDate:L6(),endDate:P6(),filter:"",workTypeFilter:""},selectedWorkItem:null,selectedWorkDirection:null,fontScale:"medium",preferredNavApp:"kakao",showMapView:!1,openDrawer:()=>t({isDrawerOpen:!0}),closeDrawer:()=>t({isDrawerOpen:!1}),setActiveTab:e=>t({activeTab:e}),setCurrentView:e=>t({currentView:e,showMapView:!1}),setShowMapView:e=>t({showMapView:e}),setWorkFilters:e=>t({workFilters:e}),setSelectedWorkItem:e=>t({selectedWorkItem:e}),setSelectedWorkDirection:e=>t({selectedWorkDirection:e}),setFontScale:e=>t({fontScale:e}),setPreferredNavApp:e=>t({preferredNavApp:e})}),{name:"dlive-ui-storage",partialize:t=>({activeTab:t.activeTab,currentView:t.currentView,fontScale:t.fontScale,preferredNavApp:t.preferredNavApp,workFilters:{workTypeFilter:t.workFilters.workTypeFilter}}),merge:(t,e)=>{var u;const n=["","","",""],r=(u=t==null?void 0:t.workFilters)==null?void 0:u.workTypeFilter,i=["small","medium","large","xlarge"],a=t==null?void 0:t.fontScale,o=["kakao","tmap","naver"],c=t==null?void 0:t.preferredNavApp;return{...e,activeTab:(t==null?void 0:t.activeTab)??e.activeTab,currentView:(t==null?void 0:t.currentView)??e.currentView,fontScale:a&&i.includes(a)?a:"medium",preferredNavApp:c&&o.includes(c)?c:"kakao",workFilters:{...e.workFilters,workTypeFilter:r&&n.includes(r)?r:""}}}})),lN=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),A6=({lat:t,lng:e,name:n})=>{const r=`kakaomap://route?ep=${t},${e}&by=car`,i=`https://map.kakao.com/link/to/${encodeURIComponent(n)},${t},${e}`;oN(r,i)},k6=({lat:t,lng:e,name:n})=>{const r=`tmap://route?goaly=${t}&goalx=${e}&goalname=${encodeURIComponent(n)}`,i=lN()?"https://apps.apple.com/kr/app/tmap/id431589174":"market://details?id=com.skt.tmap.ku";oN(r,i)},U6=({lat:t,lng:e,name:n})=>{const r=`nmap://navigation?dlat=${t}&dlng=${e}&dname=${encodeURIComponent(n)}&appname=com.dlive.cona`,i=lN()?"https://apps.apple.com/kr/app/naver-map/id311867728":"market://details?id=com.nhn.android.nmap";oN(r,i)};function oN(t,e){const n=/Android/i.test(navigator.userAgent);if(lN()||n){if(n&&t.startsWith("kakaomap://")){window.location.href=`intent://route?ep=${t.split("ep=")[1]}#Intent;scheme=kakaomap;package=net.daum.android.map;S.browser_fallback_url=${encodeURIComponent(e)};end`;return}if(n&&t.startsWith("tmap://")){window.location.href=`intent://${t.replace("tmap://","")}#Intent;scheme=tmap;package=com.skt.tmap.ku;S.browser_fallback_url=${encodeURIComponent(e)};end`;return}if(n&&t.startsWith("nmap://")){window.location.href=`intent://${t.replace("nmap://","")}#Intent;scheme=nmap;package=com.nhn.android.nmap;S.browser_fallback_url=${encodeURIComponent(e)};end`;return}window.location.href=t,setTimeout(()=>{document.hidden||(window.location.href=e)},2e3)}else window.open(e,"_blank")}const zM=(t,e)=>{switch(t){case"kakao":A6(e);break;case"tmap":k6(e);break;case"naver":U6(e);break}};let tf=null;async function cN(){if(tf)return tf;try{const e=await(await fetch("/api/common/getCommonCodeList",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CODE_IDS:"MOMP001"})})).json(),n=Array.isArray(e)?e:e.MOMP001||e.data||[],r=n.filter(o=>o.REF_CODE==="KAKAO"&&o.COMMON_CD_NM).map(o=>o.COMMON_CD_NM),i=n.filter(o=>o.REF_CODE==="VWORLD"&&o.COMMON_CD_NM).map(o=>o.COMMON_CD_NM),a=n.filter(o=>o.REF_CODE==="NGII"&&o.COMMON_CD_NM).map(o=>o.COMMON_CD_NM);return tf={kakao:r,vworld:i,ngii:a},console.log(`[MapKeys] MOMP001   - :${r.length}, :${i.length}, NGII:${a.length}`),tf}catch(t){return console.error("[MapKeys] MOMP001  :",t),tf={kakao:[],vworld:[],ngii:[]},tf}}function Pg(t){return t.length===0?"":t[Math.floor(Math.random()*t.length)]}function B6(){return new Promise(t=>{var r,i,a;if((i=(r=window.kakao)==null?void 0:r.maps)!=null&&i.services){t(!0);return}if((a=window.kakao)!=null&&a.maps){window.kakao.maps.load(()=>t(!!window.kakao.maps.services));return}let e=0;const n=setInterval(async()=>{var o;if(e++,(o=window.kakao)!=null&&o.maps){if(clearInterval(n),window.kakao.maps.services){t(!0);return}window.kakao.maps.load(()=>t(!!window.kakao.maps.services))}else if(e>25){clearInterval(n);const c=await cN(),u=Pg(c.kakao);if(!u){t(!1);return}const h=document.createElement("script");h.src=`https://dapi.kakao.com/v2/maps/sdk.js?appkey=${u}&libraries=services&autoload=false`,h.onload=()=>{var m;(m=window.kakao)!=null&&m.maps?window.kakao.maps.load(()=>t(!!window.kakao.maps.services)):t(!1)},h.onerror=()=>t(!1),document.head.appendChild(h)}},200)})}function G6(t){return new Promise(e=>{var i;const n=window.kakao;if(!((i=n==null?void 0:n.maps)!=null&&i.services)){e(null);return}const r=new n.maps.services.Geocoder;r.addressSearch(t,(a,o)=>{if(o===n.maps.services.Status.OK&&a[0])e({lat:parseFloat(a[0].y),lng:parseFloat(a[0].x)});else{const c=t.replace(/\(.*?\)/g,"").replace(/\d+[]/g,"").replace(/\s{2,}/g," ").trim();c!==t?r.addressSearch(c,(u,h)=>{h===n.maps.services.Status.OK&&u[0]?e({lat:parseFloat(u[0].y),lng:parseFloat(u[0].x)}):e(null)}):e(null)}})})}async function W6(t,e){if(!await B6())return!1;const r=await G6(t);return r?(zM(e,{lat:r.lat,lng:r.lng,name:t}),!0):!1}const F6=t=>t===""||t===""?"bg-blue-50 text-blue-700":t===""?"bg-green-50 text-green-700":t===""?"bg-red-50 text-red-700":"bg-gray-50 text-gray-700",K6=t=>{switch(t){case"D":return"bg-purple-100 text-purple-700 border-purple-200";case"I":return"bg-blue-100 text-blue-700 border-blue-200";case"V":return"bg-green-100 text-green-700 border-green-200";case"C":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-gray-100 text-gray-600 border-gray-200"}},Q6=({item:t,onSelect:e,onComplete:n,onCancel:r,index:i})=>{const[a,o]=b.useState(!1),[c,u]=b.useState(""),h=uo(N=>N.preferredNavApp),m=t.WRK_STAT_CD_NM||t.status||"",_=m===""||m===""||m===_n.Pending,p=t.ADDR||t.address||"",g=t.PROD_GRP||t.KPI_PROD_GRP_CD,C=async N=>{if(N.stopPropagation(),!(!p||a)){o(!0);try{await W6(p,h)||u("   .")}catch{u("  .")}finally{o(!1)}}},y=(N,v)=>{N.stopPropagation(),v==="complete"?n(t):v==="cancel"&&r(t)};return s.jsxs("div",{onClick:()=>e(t),className:`bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-md overflow-hidden cursor-pointer transition-all duration-200 active:scale-[0.98] ${_?"":"opacity-60"}`,style:{WebkitTapHighlightColor:"transparent"},children:[s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i!==void 0&&s.jsx("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center rounded-full bg-blue-500 text-white text-xs font-bold",children:i}),s.jsx("span",{className:`flex-shrink-0 px-2 py-1 text-xs font-semibold rounded-md ${F6(m)} whitespace-nowrap`,children:m})]}),s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[g&&s.jsx("span",{className:`px-1.5 py-0.5 text-[0.625rem] font-bold rounded border ${K6(g)}`,children:g}),s.jsx("span",{className:"text-xs font-medium text-gray-900 truncate",children:t.WRK_DTL_TCD_NM||t.WRK_CD_NM||t.typeDisplay||"-"})]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs font-medium text-gray-900 truncate",children:t.PROD_NM||"-"})]})]}),_&&s.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-100",children:[s.jsx("button",{onClick:N=>y(N,"complete"),className:"flex-1 py-2 rounded-md bg-blue-500 hover:bg-blue-600 text-white text-xs font-semibold transition-colors",children:""}),s.jsx("button",{onClick:N=>y(N,"cancel"),className:"flex-1 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs font-semibold transition-colors",children:""}),s.jsx("button",{onClick:C,disabled:!p||a,className:`flex-shrink-0 w-10 py-2 rounded-md flex items-center justify-center transition-colors ${p?"bg-orange-500 hover:bg-orange-600 text-white shadow-sm shadow-orange-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:"",children:a?s.jsx(pn,{className:"w-4 h-4 animate-spin"}):s.jsx(Rd,{className:"w-5 h-5",fill:"currentColor"})})]})]}),s.jsx(Ba,{isOpen:!!c,onClose:()=>u(""),onConfirm:()=>u(""),message:c,type:"warning",showCancel:!1})]})},Lf=({size:t="medium",color:e="cyan",message:n,fullScreen:r=!1,className:i=""})=>{const a={small:"h-4 w-4 border-2",medium:"h-8 w-8 border-2",large:"h-12 w-12 border-3"},o={blue:"border-blue-500 border-t-transparent",cyan:"border-cyan-500 border-t-transparent",gray:"border-gray-500 border-t-transparent",white:"border-white border-t-transparent"},c={small:"text-xs",medium:"text-sm",large:"text-base"},u=s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 sm:gap-3",children:[s.jsx("div",{className:`
          ${a[t]}
          ${o[e]}
          rounded-full animate-spin
        `}),n&&s.jsx("p",{className:`${c[t]} text-gray-600 text-center`,children:n})]});return r?s.jsx("div",{className:`fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50 ${i}`,children:u}):s.jsx("div",{className:`flex items-center justify-center p-8 ${i}`,children:u})},dN=({type:t="error",message:e,onRetry:n,onClose:r,className:i=""})=>{const o={error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",iconBg:"bg-red-100",iconColor:"text-red-500",buttonBg:"bg-red-500 hover:bg-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",iconBg:"bg-yellow-100",iconColor:"text-yellow-500",buttonBg:"bg-yellow-500 hover:bg-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",iconBg:"bg-blue-100",iconColor:"text-blue-500",buttonBg:"bg-blue-500 hover:bg-blue-600"}}[t],c=()=>{switch(t){case"error":return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return s.jsx("div",{className:`
        ${o.bg}
        ${o.border}
        border rounded-lg p-4
        ${i}
      `,children:s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[s.jsx("div",{className:`${o.iconBg} ${o.iconColor} rounded-full p-2 flex-shrink-0`,children:c()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`${o.text} text-sm font-medium`,children:e}),n&&s.jsxs("button",{onClick:n,className:`
                mt-3
                ${o.buttonBg}
                text-white
                px-4 py-2
                rounded-lg
                text-sm
                font-medium
                transition-colors
                duration-200
                flex
                items-center
                gap-2
              `,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})," "]})]}),r&&s.jsx("button",{onClick:r,className:`${o.text} hover:opacity-70 transition-opacity flex-shrink-0`,"aria-label":"",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},HM=({direction:t,onBack:e,onNavigateToView:n,userId:r,showToast:i})=>{var I;const[a,o]=b.useState([]),[c,u]=b.useState(null),[h,m]=b.useState(null),[_,p]=b.useState(!1),[g,C]=b.useState(null),[y,N]=b.useState(!1),[v,P]=b.useState(null),w=ta(E=>E.clearPreviousWorkDraft),M=Ui(E=>E.clearAllWorkStates);b.useEffect(()=>{(async()=>{var A;try{N(!0),P(null),console.log("WorkItemList - direction  :",t),console.log("WorkItemList - direction.id:",t.id),console.log("API   - WRK_DRCTN_ID:",t.id);const se=(await qC(t.id)).sort((X,z)=>{const $=fe=>fe===""||fe===""?1:fe===""?2:3,F=$(X.WRK_STAT_CD_NM)-$(z.WRK_STAT_CD_NM);if(F!==0)return F;const L=fe=>{const T=fe.WRK_CD,j=fe.WRK_DTL_TCD;return T==="02"||T==="08"||j==="0430"},re=fe=>{const T=fe.PROD_GRP||"";if(L(fe)){if(T==="I")return 1;if(T==="D")return 2;if(T==="V")return 3}else{if(T==="V")return 1;if(T==="D")return 2;if(T==="I")return 3}return 4};return re(X)-re(z)});if(se.length===0){console.log("[WorkItemList]   -    WorkItem ");const X=t,z=F=>F===""?"4":F===""?"3":"2",$={id:t.id,directionId:t.id,type:t.type,typeDisplay:t.typeDisplay,status:t.status===""?"":t.status===""?"":"",scheduledAt:t.scheduledAt,customer:{...t.customer},details:t.details||"",assignedEquipment:[],WRK_CD:X.WRK_CD,WRK_CD_NM:X.WRK_CD_NM,WRK_DTL_TCD:X.WRK_DTL_TCD,WRK_STAT_CD:X.MIN_WRK_STAT_CD||X.WRK_STAT_CD||z(t.status),WRK_STAT_NM:X.WRK_STAT_NM||t.status,WRK_DRCTN_ID:t.id,CTRT_ID:X.CTRT_ID,PROD_NM:X.PROD_NM,PROD_CD:X.PROD_CD,PROD_GRP:X.PROD_GRP,PROD_GRP_NM:X.PROD_GRP_NM,productName:X.PROD_NM,SO_ID:X.SO_ID,SO_NM:X.SO_NM,MST_SO_ID:X.MST_SO_ID,CRR_ID:X.CRR_ID,CRR_NM:X.CRR_NM,CUST_ID:X.CUST_ID||((A=t.customer)==null?void 0:A.id),VIP_GB:X.VIP_GB||"",OST_WORKABLE_STAT:X.OST_WORKABLE_STAT,installLocation:X.installLocation||X.INSTL_LOC,CTRT_STAT:X.CTRT_STAT,CTRT_STAT_NM:X.CTRT_STAT_NM};se.push($)}o(se),console.log("Work items loaded - :",se.length),console.log("Work items :",se)}catch(Y){console.error("   :",Y),Y instanceof Qs||Y instanceof Error?(P(Y.message),i&&i(Y.message,"error",!0)):(P("   ."),i&&i("   .","error",!0)),o([])}finally{N(!1)}})()},[t.id,i]);const k=E=>{var X,z,$,F,L,re,fe;console.log("  :",E),console.log("  ID:",E.WRK_ID||E.id),console.log("  :",{WRK_ID:E.WRK_ID,WRK_CD_NM:E.WRK_CD_NM,CUST_NM:E.CUST_NM,PROD_NM:E.PROD_NM});const A=E.WRK_ID||E.id;w(A),Za.getState().reset(),M(),console.log("[] REQ_CTX :",E.REQ_CTX),console.log("[] REQ_CTX JSON:",JSON.stringify(E.REQ_CTX)),console.log("[VIP ] item.VIP_GB:",E.VIP_GB,"| direction.VIP_GB:",t.VIP_GB,"| direction.customer.isVip:",(X=t.customer)==null?void 0:X.isVip);let Y=E.PROD_NM;if(E.WRK_DTL_TCD==="0520"||E.WRK_DTL_TCD==="0560"){const T=E.WRK_DTL_TCD==="0520"?"0510":"0550",j=a.find(K=>K.WRK_DTL_TCD===T&&K.PROD_GRP===E.PROD_GRP);j&&(Y=j.PROD_NM)}const se={id:E.WRK_ID||E.id,directionId:E.WRK_DRCTN_ID||E.directionId,type:E.WRK_CD_NM==="A/S"?"A/S":"Installation",typeDisplay:E.WRK_CD_NM||E.typeDisplay||"",status:E.WRK_STAT_CD==="3"?"":E.WRK_STAT_CD==="4"||E.WRK_STAT_CD==="7"?"":E.WRK_STAT_CD==="1"||E.WRK_STAT_CD==="2"?"":E.WRK_STAT_CD_NM||E.status||"",scheduledAt:E.WRK_HOPE_DTTM?`${E.WRK_HOPE_DTTM.slice(0,4)}-${E.WRK_HOPE_DTTM.slice(4,6)}-${E.WRK_HOPE_DTTM.slice(6,8)}T${E.WRK_HOPE_DTTM.slice(8,10)}:${E.WRK_HOPE_DTTM.slice(10,12)}:00`:E.scheduledAt||new Date().toISOString(),customer:{id:E.CUST_ID||((z=E.customer)==null?void 0:z.id)||"",name:E.CUST_NM||(($=E.customer)==null?void 0:$.name)||" ",phone:E.REQ_CUST_TEL_NO||((F=E.customer)==null?void 0:F.phone),address:E.ADDR||((L=E.customer)==null?void 0:L.address)||"  ",isVip:!!(E.VIP_GB&&String(E.VIP_GB).length>0)||((re=t.customer)==null?void 0:re.isVip)||!1,vipLevel:E.VIP_GB==="VIP_VVIP"?"VVIP":E.VIP_GB?"VIP":(fe=t.customer)==null?void 0:fe.vipLevel},details:E.REQ_CTX||"",assignedEquipment:E.assignedEquipment||[],WRK_CD:E.WRK_CD,WRK_DTL_TCD:E.WRK_DTL_TCD,WRK_STAT_CD:E.WRK_STAT_CD,WRK_STAT_NM:E.WRK_STAT_CD_NM||E.WRK_STAT_NM,WRK_DRCTN_ID:E.WRK_DRCTN_ID,CTRT_ID:E.CTRT_ID,DTL_CTRT_ID:E.DTL_CTRT_ID,RCPT_ID:E.RCPT_ID,productName:E.PROD_NM,PROD_NM:E.PROD_NM,OLD_PROD_CD:E.OLD_PROD_CD,OLD_PROD_NM:E.OLD_PROD_NM,OLD_CTRT_ID:E.OLD_CTRT_ID,OLD_CTRT_STAT:E.OLD_CTRT_STAT,OLD_CTRT_STAT_NM:E.OLD_CTRT_STAT_NM,OLD_PROM_CNT:E.OLD_PROM_CNT,currentProduct:E.OLD_PROD_NM||E.OLD_PROD_CD,newProduct:Y,installLocation:E.INSTL_LOC,MST_SO_ID:E.MST_SO_ID,SO_ID:E.SO_ID,PROD_CD:E.PROD_CD,ADDR_ORD:E.ADDR_ORD,CRR_ID:E.CRR_ID,BLD_ID:E.BLD_ID,CUST_ID:E.CUST_ID,WRKR_ID:E.WRKR_ID,CTRT_STAT:E.CTRT_STAT,CTRT_STAT_NM:E.CTRT_STAT_NM,SO_NM:E.SO_NM,MSO_NM:E.MSO_NM,PYM_MTHD:E.PYM_MTHD,PYM_ACNT_ID:E.PYM_ACNT_ID,APLYMONTH:E.APLYMONTH,PROM_CNT:E.PROM_CNT,CTRT_APLY_STRT_DT:E.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:E.CTRT_APLY_END_DT,VOIP_TEL_NO:E.VOIP_TEL_NO,GRP_ID:E.GRP_ID,GRP_NM:E.GRP_NM,CRR_NM:E.CRR_NM,PROD_GRP:E.PROD_GRP,PROD_GRP_NM:E.PROD_GRP_NM,WRKR_NM:E.WRKR_NM,ACNT_PYM_MTHD:E.ACNT_PYM_MTHD,KPI_PROD_GRP_CD:E.KPI_PROD_GRP_CD,PROD_CHG_GB:E.PROD_CHG_GB,CHG_KPI_PROD_GRP_CD:E.CHG_KPI_PROD_GRP_CD,VOIP_CTX:E.VOIP_CTX,VIP_GB:E.VIP_GB||t.VIP_GB||"",IS_CERTIFY_PROD:E.IS_CERTIFY_PROD,OP_LNKD_CD:E.OP_LNKD_CD,VOIP_PROD_CD:E.VOIP_PROD_CD,ISP_PROD_CD:E.ISP_PROD_CD,WRKR_CMPL_DT:E.WRKR_CMPL_DT,WRK_END_DTTM:E.WRK_END_DTTM,NET_CL:E.NET_CL,NET_CL_NM:E.NET_CL_NM,WRNG_TP:E.WRNG_TP,WRNG_TP_NM:E.WRNG_TP_NM,INSTL_TP:E.INSTL_TP,INSTL_TP_NM:E.INSTL_TP_NM,CB_WRNG_TP:E.CB_WRNG_TP,CB_INSTL_TP:E.CB_INSTL_TP,INOUT_LINE_TP:E.INOUT_LINE_TP,INOUT_LEN:E.INOUT_LEN,DVDR_YN:E.DVDR_YN,BFR_LINE_YN:E.BFR_LINE_YN,CUT_YN:E.CUT_YN,TERM_NO:E.TERM_NO,RCV_STS:E.RCV_STS,SUBTAP_ID:E.SUBTAP_ID,PORT_NUM:E.PORT_NUM,EXTN_TP:E.EXTN_TP,TAB_LBL:E.TAB_LBL,CVT_LBL:E.CVT_LBL,STB_LBL:E.STB_LBL,CUST_REL:E.CUST_REL,UP_CTRL_CL:E.UP_CTRL_CL,PSN_USE_CORP:E.PSN_USE_CORP,VOIP_USE_CORP:E.VOIP_USE_CORP,DTV_USE_CORP:E.DTV_USE_CORP,VIEW_MOD_CD:E.VIEW_MOD_CD,VIEW_MOD_NM:E.VIEW_MOD_NM,MEMO:E.MEMO,TERM_HOPE_DT:E.TERM_HOPE_DT,HOPE_DT:E.HOPE_DT,asReasonCode:E.WRK_RCPT_CL,asDetailCode:E.WRK_RCPT_CL_DTL,OST_WORKABLE_STAT:E.OST_WORKABLE_STAT,WRK_HOPE_DTTM:E.WRK_HOPE_DTTM};console.log("[WorkItemList] handleSelectItem - OST_WORKABLE_STAT:",E.OST_WORKABLE_STAT,"| WRK_CD:",E.WRK_CD),console.log("  :",se),n?n("work-process-flow",se):u(se)},B=E=>{var X,z,$,F,L,re;console.log("   -  :",E);const A=E.WRK_ID||E.id;w(A),Za.getState().reset();let Y=E.PROD_NM;if(E.WRK_DTL_TCD==="0520"||E.WRK_DTL_TCD==="0560"){const fe=E.WRK_DTL_TCD==="0520"?"0510":"0550",T=a.find(j=>j.WRK_DTL_TCD===fe&&j.PROD_GRP===E.PROD_GRP);T&&(Y=T.PROD_NM)}const se={id:E.WRK_ID||E.id,directionId:E.WRK_DRCTN_ID||E.directionId,type:E.WRK_CD_NM==="A/S"?"A/S":"Installation",typeDisplay:E.WRK_CD_NM||E.typeDisplay||"",status:E.WRK_STAT_CD==="3"?"":E.WRK_STAT_CD==="4"||E.WRK_STAT_CD==="7"?"":E.WRK_STAT_CD==="1"||E.WRK_STAT_CD==="2"?"":E.WRK_STAT_CD_NM||E.status||"",scheduledAt:E.WRK_HOPE_DTTM?`${E.WRK_HOPE_DTTM.slice(0,4)}-${E.WRK_HOPE_DTTM.slice(4,6)}-${E.WRK_HOPE_DTTM.slice(6,8)}T${E.WRK_HOPE_DTTM.slice(8,10)}:${E.WRK_HOPE_DTTM.slice(10,12)}:00`:E.scheduledAt||new Date().toISOString(),customer:{id:E.CUST_ID||((X=E.customer)==null?void 0:X.id)||"",name:E.CUST_NM||((z=E.customer)==null?void 0:z.name)||" ",phone:E.REQ_CUST_TEL_NO||(($=E.customer)==null?void 0:$.phone),address:E.ADDR||((F=E.customer)==null?void 0:F.address)||"  ",isVip:!!(E.VIP_GB&&String(E.VIP_GB).length>0)||((L=t.customer)==null?void 0:L.isVip)||!1,vipLevel:E.VIP_GB==="VIP_VVIP"?"VVIP":E.VIP_GB?"VIP":(re=t.customer)==null?void 0:re.vipLevel},details:E.REQ_CTX||"",assignedEquipment:E.assignedEquipment||[],WRK_CD:E.WRK_CD,WRK_DTL_TCD:E.WRK_DTL_TCD,WRK_STAT_CD:E.WRK_STAT_CD,WRK_STAT_NM:E.WRK_STAT_CD_NM||E.WRK_STAT_NM,WRK_DRCTN_ID:E.WRK_DRCTN_ID,CTRT_ID:E.CTRT_ID,DTL_CTRT_ID:E.DTL_CTRT_ID,RCPT_ID:E.RCPT_ID,productName:E.PROD_NM,PROD_NM:E.PROD_NM,OLD_PROD_CD:E.OLD_PROD_CD,OLD_PROD_NM:E.OLD_PROD_NM,OLD_CTRT_ID:E.OLD_CTRT_ID,OLD_CTRT_STAT:E.OLD_CTRT_STAT,OLD_CTRT_STAT_NM:E.OLD_CTRT_STAT_NM,OLD_PROM_CNT:E.OLD_PROM_CNT,currentProduct:E.OLD_PROD_NM||E.OLD_PROD_CD,newProduct:Y,installLocation:E.INSTL_LOC,MST_SO_ID:E.MST_SO_ID,SO_ID:E.SO_ID,PROD_CD:E.PROD_CD,ADDR_ORD:E.ADDR_ORD,CRR_ID:E.CRR_ID,BLD_ID:E.BLD_ID,CUST_ID:E.CUST_ID,WRKR_ID:E.WRKR_ID,CTRT_STAT:E.CTRT_STAT,CTRT_STAT_NM:E.CTRT_STAT_NM,SO_NM:E.SO_NM,MSO_NM:E.MSO_NM,PYM_MTHD:E.PYM_MTHD,PYM_ACNT_ID:E.PYM_ACNT_ID,APLYMONTH:E.APLYMONTH,PROM_CNT:E.PROM_CNT,CTRT_APLY_STRT_DT:E.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:E.CTRT_APLY_END_DT,VOIP_TEL_NO:E.VOIP_TEL_NO,GRP_ID:E.GRP_ID,GRP_NM:E.GRP_NM,CRR_NM:E.CRR_NM,PROD_GRP:E.PROD_GRP,PROD_GRP_NM:E.PROD_GRP_NM,WRKR_NM:E.WRKR_NM,ACNT_PYM_MTHD:E.ACNT_PYM_MTHD,KPI_PROD_GRP_CD:E.KPI_PROD_GRP_CD,PROD_CHG_GB:E.PROD_CHG_GB,CHG_KPI_PROD_GRP_CD:E.CHG_KPI_PROD_GRP_CD,VOIP_CTX:E.VOIP_CTX,VIP_GB:E.VIP_GB||t.VIP_GB||"",IS_CERTIFY_PROD:E.IS_CERTIFY_PROD,OP_LNKD_CD:E.OP_LNKD_CD,VOIP_PROD_CD:E.VOIP_PROD_CD,ISP_PROD_CD:E.ISP_PROD_CD,WRKR_CMPL_DT:E.WRKR_CMPL_DT,WRK_END_DTTM:E.WRK_END_DTTM,NET_CL:E.NET_CL,NET_CL_NM:E.NET_CL_NM,WRNG_TP:E.WRNG_TP,WRNG_TP_NM:E.WRNG_TP_NM,INSTL_TP:E.INSTL_TP,INSTL_TP_NM:E.INSTL_TP_NM,CB_WRNG_TP:E.CB_WRNG_TP,CB_INSTL_TP:E.CB_INSTL_TP,INOUT_LINE_TP:E.INOUT_LINE_TP,INOUT_LEN:E.INOUT_LEN,DVDR_YN:E.DVDR_YN,BFR_LINE_YN:E.BFR_LINE_YN,CUT_YN:E.CUT_YN,TERM_NO:E.TERM_NO,RCV_STS:E.RCV_STS,SUBTAP_ID:E.SUBTAP_ID,PORT_NUM:E.PORT_NUM,EXTN_TP:E.EXTN_TP,TAB_LBL:E.TAB_LBL,CVT_LBL:E.CVT_LBL,STB_LBL:E.STB_LBL,CUST_REL:E.CUST_REL,UP_CTRL_CL:E.UP_CTRL_CL,PSN_USE_CORP:E.PSN_USE_CORP,VOIP_USE_CORP:E.VOIP_USE_CORP,DTV_USE_CORP:E.DTV_USE_CORP,VIEW_MOD_CD:E.VIEW_MOD_CD,VIEW_MOD_NM:E.VIEW_MOD_NM,MEMO:E.MEMO,TERM_HOPE_DT:E.TERM_HOPE_DT,HOPE_DT:E.HOPE_DT,asReasonCode:E.WRK_RCPT_CL,asDetailCode:E.WRK_RCPT_CL_DTL,OST_WORKABLE_STAT:E.OST_WORKABLE_STAT,WRK_HOPE_DTTM:E.WRK_HOPE_DTTM};console.log("[WorkItemList] handleCompleteWork - OST_WORKABLE_STAT:",E.OST_WORKABLE_STAT,"| WRK_CD:",E.WRK_CD),console.log(" -   :",se),n?n("work-process-flow",se):u(se)},G=E=>{var Y,se;if(console.log("   -  :",E),E.WRK_CD==="08"&&a.find(z=>z.WRK_CD==="07"&&z.CTRT_ID===E.CTRT_ID&&(z.WRK_STAT_CD==="4"||z.WRK_STAT_CD==="7"))){i&&i("      .","error");return}const A={id:E.WRK_ID||E.id,directionId:E.WRK_DRCTN_ID||E.directionId,type:E.WRK_CD_NM==="A/S"?"A/S":"Installation",typeDisplay:E.WRK_CD_NM||E.typeDisplay||"",status:E.WRK_STAT_CD==="3"?"":E.WRK_STAT_CD==="4"||E.WRK_STAT_CD==="7"?"":E.WRK_STAT_CD==="1"||E.WRK_STAT_CD==="2"?"":E.WRK_STAT_CD_NM||"",scheduledAt:E.WRK_HOPE_DTTM?`${E.WRK_HOPE_DTTM.slice(0,4)}-${E.WRK_HOPE_DTTM.slice(4,6)}-${E.WRK_HOPE_DTTM.slice(6,8)}T${E.WRK_HOPE_DTTM.slice(8,10)}:${E.WRK_HOPE_DTTM.slice(10,12)}:00`:new Date().toISOString(),customer:{id:E.CUST_ID||"",name:E.CUST_NM||" ",phone:E.REQ_CUST_TEL_NO,address:E.ADDR||"  ",isVip:!!(E.VIP_GB&&String(E.VIP_GB).length>0)||((Y=t.customer)==null?void 0:Y.isVip)||!1,vipLevel:E.VIP_GB==="VIP_VVIP"?"VVIP":E.VIP_GB?"VIP":(se=t.customer)==null?void 0:se.vipLevel},details:E.REQ_CTX||"",assignedEquipment:[],WRK_CD:E.WRK_CD,CTRT_ID:E.CTRT_ID,WRK_STAT_CD:E.WRK_STAT_CD,RCPT_ID:E.RCPT_ID,SO_ID:E.SO_ID};console.log(" -  :",A),C(A),p(!0)},U=async E=>{if(g){console.log("  - cancelData:",E),console.log("  - cancelTarget:",g),N(!0),p(!1);try{console.log(" API  -  :",E);const A=await eN(E);if(console.log("  API :",A),A.code==="SUCCESS"||A.code==="OK"){i&&i("  .","success");const se=(await qC(t.id)).sort((X,z)=>{const $=F=>F===""||F===""?1:F===""?2:3;return $(X.WRK_STAT_CD_NM)-$(z.WRK_STAT_CD_NM)});o(se)}else i&&i(` : ${A.message}`,"error",!0)}catch(A){console.error(" :",A);const Y=A instanceof Qs?A.message:A.message||"   .";i&&i(Y,"error",!0)}finally{N(!1),C(null)}}};return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-blue-500 to-blue-600 px-4 py-3 shadow-md z-40",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsxs("h1",{className:"text-base font-bold text-white truncate",children:[((I=a[0])==null?void 0:I.CUST_NM)||t.customer.name,t.customer.id&&s.jsxs("span",{className:"font-normal ml-1",children:["(",t.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-white/20 text-white border border-white/30 flex-shrink-0",children:t.typeDisplay})]}),s.jsxs("div",{className:"flex items-center gap-2 text-white/90 flex-shrink-0",children:[s.jsx(J2,{customer:t.customer}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-3.5 h-3.5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),s.jsx("span",{className:"text-xs font-medium",children:Bp(t.scheduledAt)})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[s.jsxs("svg",{className:"w-3.5 h-3.5 text-white/70 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs text-white/80 truncate",children:t.customer.address})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:y?s.jsx(Lf,{size:"medium",message:"   ..."}):v?s.jsx(dN,{type:"error",message:v,onRetry:()=>window.location.reload()}):a.length===0?s.jsxs("div",{className:"text-center py-10 sm:py-12 px-4 sm:px-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(C1,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2 whitespace-nowrap",children:"  "})]}):s.jsx("div",{className:"space-y-3 pb-4",children:a.map((E,A)=>s.jsx(Q6,{item:E,index:A+1,onSelect:k,onComplete:B,onCancel:G},E.WRK_ID||E.id||A))})}),g&&s.jsx(nN,{isOpen:_,onClose:()=>p(!1),onConfirm:U,workOrder:g,userId:r,showToast:i})]})},qM=({isOpen:t,onClose:e,smsData:n,userId:r})=>{const[i,a]=b.useState(""),[o,c]=b.useState([]),[u,h]=b.useState(""),[m,_]=b.useState(""),[p,g]=b.useState("020"),[C,y]=b.useState(""),[N,v]=b.useState(!1),[P,w]=b.useState(!1),[M,k]=b.useState(null),B=b.useMemo(()=>{let F=0;for(let L=0;L<C.length;L++){const re=C.charCodeAt(L);F+=re>127?2:1}return F},[C]),G=2e3,U=B>G,I=b.useMemo(()=>((n==null?void 0:n.WRK_CD)||"")==="03"?Cb:Cb.filter(L=>L.refCode==="WK"),[n==null?void 0:n.WRK_CD]),E=F=>F.replace(/[-\s\(\)]/g,""),A=F=>{const L=E(F);return L.length>=9&&/^\d+$/.test(L)},Y=F=>{if(!F)return"";const L=F.split(/\s*\[[A-Z]\]|\s*[,\/]\s*/);for(const re of L){const fe=re.trim();if(A(fe))return fe}return F.trim()};b.useEffect(()=>{t&&n&&(async()=>{var j;w(!0),k(null);const L=[],re=new Set,fe=(K,J)=>{if(!J)return;const q=Y(J);if(!q||!A(q))return;const V=E(q);re.has(V)||(re.add(V),L.push({type:K,number:q}))};if(n.CUST_ID)try{const K=await RM({CUST_ID:n.CUST_ID}),J=K.currentContract||((j=K.contracts)==null?void 0:j[0]);J&&(fe("",n.WORK_REQ_TEL_NO||J.WORK_REQ_TEL_NO),fe("",n.REQ_CUST_TEL_NO||J.REQ_CUST_TEL_NO),fe("",J.TEL_NO2||n.CUST_TEL_NO2),fe("",J.TEL_NO1||n.CUST_TEL_NO1))}catch(K){console.error("[SMS] Failed to get phone from contract:",K)}n.SMS_RCV_TEL&&L.length===0&&fe("",n.SMS_RCV_TEL),c(L),L.length>0?(h(L[0].type),a(L[0].number)):(h(""),a(""));let T=n.SMS_SEND_TEL||"";if(!T)try{const K=localStorage.getItem("userInfo");K&&(T=JSON.parse(K).telNo2||"")}catch(K){console.error("[SMS] Failed to get telNo2 from userInfo:",K)}_(T),g("020"),X("020",n),w(!1)})()},[t,n]);const se=F=>F?F.includes(" ")&&F.length>=16?{hour:F.substring(11,13),minute:F.substring(14,16)}:F.includes("T")&&F.length>=16?{hour:F.substring(11,13),minute:F.substring(14,16)}:F.length>=12&&!F.includes("-")?{hour:F.substring(8,10),minute:F.substring(10,12)}:{hour:"",minute:""}:{hour:"",minute:""},X=(F,L)=>{if(!L)return;const re=L.SO_ID==="328"?"[]":"[]",fe=L.WRK_HOPE_DTTM||"",{hour:T,minute:j}=se(fe),K=L.WRKR_NM_EN||L.WRKR_NM||"",J=L.WRK_CD_NM||"",q=L.SMS_SEND_TEL||"";let V="";if(F==="020"){const me=["100","600","327","210"].includes(L.SO_ID)&&L.SO_ID!=="201";V=`${re} 

`,V+=`!   ''.
`,V+=`     CS  .

`,V+=` : ${J}
`,me?V+=` : ${T} ${j}
`:V+=` : ${T}
`,V+=`* CS    .
`,V+=` : ${K} CS ${q}

`,V+=`[]
`,V+=`*           .
`,V+=`* CS         .
`,V+=`* CS   .   .
`}else if(F==="021")V=`${re}      .`;else if(F==="027")V=`${re}  ${K}    .()`;else if(F==="028")V=`${re}  ${K}    ${J}   .`;else if(F==="138")V=`${re} .   .`;else if(F==="139"){const ce=q.replace(/-/g,"").replace(/ /g,"");V=`${re}AS    . :${ce}`}else if(F==="141")V=`${re}   

`,V+=`    .

`,V+="        ,   ",V+="     .  URL  ",V+=`   .

`,V+="            . .";else if(F==="059_002")V=`${re} KB  

`,V+=`1. 
`,V+=`https://m.dlive.kr/mobile/event/JoinAction.do?method=view
`,V+=`2.   ,  URL    . (     )
`,V+=`3.     (1644-1100)      .
`,V+=`4.      .    !

`,V+=`<   >
`,V+=`https://m.kbcard.com/CXHIACRC0002.cms?mainCC=b&allianceCode=04345&solicitorcode=702${r}
`;else if(F==="059"){const ce=(L.CUST_ID||"").slice(-5);V=`${re}     

`,V+=`1. 
`,V+=`https://m.dlive.kr/mobile/event/JoinAction.do?method=view
`,V+=`2.   ,  URL    . (     )
`,V+=`3.     (1644-1100)      .
`,V+=`4.      .    !

`,V+=`<   >
`,V+=`https://m.hanacard.co.kr/MPACMM101M.web?_frame=no&CD_PD_SEQ=17176&eno=${r}&${ce}`}else if(F==="235")V=`${re}    

`,V+=`1. 
`,V+=`https://m.dlive.kr/mobile/event/JoinAction.do?method=view
`,V+=`2.   ,  URL    . (     )
`,V+=`3.     (1644-1100)      .
`,V+=`4.      .    !

`,V+=`<   >
`,V+=`https://m.hanacard.co.kr/MPACMM101M.web?_frame=no&CD_PD_SEQ=18122&eno=${r}

`,V+=" 1800-0170";else if(F==="059_005"){const ce=L.CUST_ID||"";V=`${re}  LOCA X Special SE   

`,V+=`1. 
`,V+=`https://m.dlive.kr/front/join/join/DiscountAction.do?method=view
`,V+=`2.   ,  URL    . (     )
`,V+=`3.     (1644-1100)      .
`,V+=`4.      .    !

`,V+=`<   >
`,V+=`http://m.lottecard.co.kr/spa/card/booth?bId=96893&vtCdKndC=P13791-A13791&cInfo=${ce}${r}
`}else F==="271"&&(V="[]  1644-1100 . .");y(V)},z=async()=>{if(!n){k("SMS data missing");return}if(!A(i)){k("   . (010, 011 )");return}if(!m.trim()){k(" .");return}if(!C.trim()){k("  .");return}v(!0),k(null);try{const F=Cb.find(fe=>fe.code===p),L={SMS_EML_TYPE:p.substring(0,3),SO_ID:n.SO_ID,USER_SMS:i,SEND_SMS:m,USER_ID:n.CUST_ID,USER_NAME:n.CUST_NM,MAP01:C,KKO_MSG_ID:(F==null?void 0:F.kkoMsgId)||"KKO020_003",REG_UID:r,TRANS_YN:"N",SMS_EML_CL:"20"},re=await DA(L);re.code==="SUCCESS"?(alert("  ."),e()):k(re.message||"  .")}catch(F){console.error("[SMS] Send error:",F),k(F.message||"    .")}finally{v(!1)}},$=s.jsxs("div",{className:"flex gap-2 w-full",children:[s.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",disabled:N,children:""}),s.jsx("button",{onClick:z,disabled:N||U,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:N?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(q2,{size:16}),""]})})]});return s.jsx(Ra,{isOpen:t,onClose:e,title:"",size:"medium",footer:P?void 0:$,children:P?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-4 text-gray-500 text-sm",children:"  ..."})]}):s.jsxs("div",{className:"space-y-4",children:[M&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:M}),n&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"font-medium",children:n.CUST_NM})]}),n.WRK_CD_NM&&s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"font-medium",children:n.WRK_CD_NM})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.length>1?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-24 flex-shrink-0",children:s.jsx(sn,{value:u,onValueChange:F=>{h(F);const L=o.find(re=>re.type===F);L&&a(L.number)},options:o.map(F=>({value:F.type,label:F.type})),placeholder:""})}),s.jsx("input",{type:"tel",value:i,onChange:F=>a(F.target.value),className:"flex-1 px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm"})]}):s.jsx("input",{type:"tel",value:i,onChange:F=>a(F.target.value),placeholder:"010-1234-5678",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"tel",value:m,onChange:F=>_(F.target.value),placeholder:"010-1234-5678",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx(sn,{value:p,onValueChange:F=>{g(F),n&&X(F,n),["059_002","059","235","059_005","271"].includes(F)&&_("1644-1100")},options:I.map(F=>({value:F.code,label:F.name})),placeholder:"  "})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s.jsx("textarea",{value:C,onChange:F=>y(F.target.value),rows:8,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none",placeholder:"  "}),s.jsxs("div",{className:`mt-1 text-right text-sm ${U?"text-red-600 font-medium":"text-gray-500"}`,children:[B," / ",G," bytes",U&&" ()"]})]})]})})},Y6=Array.from({length:13},(t,e)=>{const n=(e+9).toString().padStart(2,"0");return{value:n,label:`${n}`}}),$6=Array.from({length:6},(t,e)=>{const n=(e*10).toString().padStart(2,"0");return{value:n,label:`${n}`}}),Tb=t=>{if(!t)return"-";const e=t.replace(/\D/g,"");return e.length>=10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:e.length>=6?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6)}`:t},XM=({isOpen:t,onClose:e,direction:n,onSuccess:r,showToast:i,userInfo:a})=>{const[o,c]=b.useState(""),[u,h]=b.useState(null),[m,_]=b.useState([]),[p,g]=b.useState(!1),[C,y]=b.useState(!1),[N,v]=b.useState(!1),[P,w]=b.useState(""),[M,k]=b.useState(""),[B,G]=b.useState(""),[U,I]=b.useState(""),[E,A]=b.useState([]),[Y,se]=b.useState(""),[X,z]=b.useState(""),[$,F]=b.useState(""),[L,re]=b.useState(""),[fe,T]=b.useState(""),[j,K]=b.useState(!0),J=b.useRef(null),q=b.useRef(null),V=b.useRef(null);b.useEffect(()=>{if(t){const Z=n.WRK_HOPE_DTTM||"",le=n.scheduledAt||"";let xe=new Date().toISOString().split("T")[0],be="",ne="";if(Z&&Z.length>=8)xe=`${Z.substring(0,4)}-${Z.substring(4,6)}-${Z.substring(6,8)}`,Z.length>=12&&(be=Z.substring(8,10),ne=Z.substring(10,12));else if(le){const ie=new Date(le);isNaN(ie.getTime())||(xe=ie.toISOString().split("T")[0],be=String(ie.getHours()).padStart(2,"0"),ne=String(ie.getMinutes()).padStart(2,"0"))}w(xe),k(be),G(ne),se(xe),z(be),F(ne),c(""),h(null),_([]),I(""),re(""),T(""),K(!0),ce()}},[t,n]);const ce=async()=>{try{await Promise.all([Ce(),me()])}finally{K(!1)}},me=async()=>{try{const Z=n.WRK_DRCTN_ID||n.id;if(!Z)return;const le=n.CRR_NM||"",xe=n.WRKR_NM||"";if(le||xe){re(le),T(xe);return}const be=await qC(Z);if(be&&be.length>0){const ne=be[0];re(ne.CRR_NM||""),T(ne.WRKR_NM||""),console.log("[]   :",{CRR_NM:ne.CRR_NM,WRKR_NM:ne.WRKR_NM})}}catch(Z){console.error("    :",Z)}},Ce=async()=>{try{const Z=await qa("CMWO224");A(Z||[])}catch(Z){console.error("   :",Z)}},ge=()=>P!==Y||M!==X||B!==$;b.useEffect(()=>{const Z=le=>{J.current&&!J.current.contains(le.target)&&g(!1)};if(p)return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[p]);const Ge=Z=>{c(Z),h(null),q.current&&clearTimeout(q.current),Z.trim().length>=2?q.current=setTimeout(()=>{te(Z.trim())},300):(_([]),g(!1))},te=async Z=>{y(!0),g(!0);try{const le=await _p({USR_NM:Z,SO_ID:(a==null?void 0:a.soId)||""});_(le||[])}catch(le){console.error("Worker search failed:",le),_([])}finally{y(!1)}},he=Z=>{h(Z),c(Z.USR_NM),g(!1)},de=async()=>{const Z=P.replace(/-/g,"");if(Z.length<8){i==null||i(" .","error");return}if(!M){i==null||i(" .","error");return}if(!B){i==null||i(" .","error");return}const le=new Date,xe=`${le.getFullYear()}${String(le.getMonth()+1).padStart(2,"0")}${String(le.getDate()).padStart(2,"0")}${String(le.getHours()).padStart(2,"0")}${String(le.getMinutes()).padStart(2,"0")}`,be=`${Z}${M}${B}`;if(Number(be)<Number(xe)){i==null||i("   .","error");return}if(!u){i==null||i(" .","error");return}if(!n.WRK_DRCTN_ID&&!n.id){i==null||i(" ID .","error");return}if(ge()&&!U){i==null||i(" .  .","error");return}v(!0);try{const ne=P.replace(/-/g,""),ie=M&&B?`${ne}${M}${B}`:void 0,pe=ge(),ze=!0;let xt="";pe&&ze?xt="AL":ze&&(xt="WR");const st=n,St=new Date,ot=`${St.getFullYear()}${String(St.getMonth()+1).padStart(2,"0")}${String(St.getDate()).padStart(2,"0")}`,Be=ne===ot,lt={CNTL_FG:"UPMODE",NMLEVEL:"3",WRK_DRCTN_ID:n.WRK_DRCTN_ID||n.id,WRKR_ID:u.USR_ID,CRR_ID:u.CRR_ID||(a==null?void 0:a.crrId)||"",POST_ID:u.POST_ID||"",DIV_DATE:ne,DIV_DT:ne,DIV_HH:M||"",DIV_MI:B||"",WRK_HOPE_DTTM:ie||"",RCPT_ID:st.RCPT_ID||"",WRK_ID:n.id||st.WRK_ID||"",REG_UID:(a==null?void 0:a.userId)||"",CHG_UID:(a==null?void 0:a.userId)||"",HOLY_YN:"N",SMS_YN:Be?"Y":"N",DIV_RESULT:"",O_WRK_DIV_ID:"",WRK_DIV_CL:"",...U&&{CHG_RSN:U},...xt&&{CHG_GB:xt}};console.log("Worker adjustment params:",lt);const pt=await CA(lt);console.log("Worker adjustment result:",pt);const mt=pt==null?void 0:pt.result;if(Array.isArray(mt)&&mt.length>0){const Ye=mt[0];if(Ye.MSGCODE&&Ye.MSGCODE!=="SUCCESS"&&Ye.MSGCODE!=="0"){const at=Ye.MESSAGE||Ye.MSG||"  .";i==null||i(at,"error");return}}if(pt!=null&&pt.code&&pt.code!=="SUCCESS"&&pt.code!=="0"){const Ye=pt.message||pt.MESSAGE||"  .";i==null||i(Ye,"error");return}i==null||i("  .","success"),r==null||r(),e()}catch(ne){console.error("Worker adjustment failed:",ne),i==null||i(ne.message||"  .","error")}finally{v(!1)}},Q=()=>{var Z;return s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:s.jsxs("div",{className:"space-y-1.5 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"font-mono text-gray-700",children:Tb(n.WRK_DRCTN_ID||n.id)})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"text-blue-600 font-medium",children:n.typeDisplay||n.WRK_CD_NM})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:((Z=n.customer)==null?void 0:Z.name)||n.CUST_NM})]})]})})},ee=s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:e,disabled:N,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 whitespace-nowrap",children:""}),s.jsx("button",{type:"button",onClick:de,disabled:N||!u,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:N?"...":""})]});return s.jsxs(Ra,{isOpen:t,onClose:e,title:" ",size:"medium",footer:j?void 0:ee,children:[j?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Lf,{size:"medium",message:"  ..."})}):s.jsxs("div",{className:"space-y-4",children:[Q(),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",ref:J,children:[s.jsxs("div",{className:"relative",children:[s.jsx(Lc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:o,onChange:Z=>Ge(Z.target.value),onFocus:()=>m.length>0&&g(!0),placeholder:"  (2 )",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),u&&s.jsx("button",{type:"button",onClick:()=>{h(null),c(""),_([])},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s.jsx(Mi,{className:"w-4 h-4"})})]}),p&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto z-30",children:C?s.jsx("div",{className:"p-4 text-center",children:s.jsx(Lf,{size:"small",message:"..."})}):m.length===0?s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx(c0,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"  ."})]}):m.map(Z=>{const le=Z.CORP_NM||Z.CRR_NM||"",xe=Z.TEL_NO3||Z.TEL_NO2||Z.HP_NO||Z.PDATEL_NO||"";return s.jsxs("button",{type:"button",onMouseDown:be=>be.preventDefault(),onClick:()=>he(Z),className:"w-full p-3 text-left hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Z.USR_NM}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[Z.USR_ID,le&&`  ${le}`,xe&&`  ${Tb(xe)}`]})]},Z.USR_ID)})})]})]}),u&&(()=>{const Z=u.CORP_NM||u.CRR_NM||"",le=u.TEL_NO3||u.TEL_NO2||u.HP_NO||u.PDATEL_NO||"";return s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-gray-900 text-base mb-2",children:u.USR_NM}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:u.USR_ID})]}),Z&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:Z})]}),le&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:Tb(le)})]})]})]})})(),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",s.jsx("span",{className:"font-normal text-blue-600"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",ref:V,value:P,onChange:Z=>w(Z.target.value),className:"absolute opacity-0 pointer-events-none h-0 w-0",tabIndex:-1}),s.jsxs("button",{type:"button",onClick:()=>{var Z,le;return(le=(Z=V.current)==null?void 0:Z.showPicker)==null?void 0:le.call(Z)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer bg-white flex items-center justify-between",children:[s.jsx("span",{className:`text-sm sm:text-base ${P?"text-gray-900":"text-gray-500"}`,children:P||" "}),s.jsx(rm,{className:"w-4 h-4 text-gray-400"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx(sn,{value:M,onValueChange:k,options:[{value:"",label:" "},...Y6.map(Z=>({value:Z.value,label:Z.label}))],placeholder:" "})}),s.jsx("div",{className:"flex-1",children:s.jsx(sn,{value:B,onValueChange:G,options:[{value:"",label:" "},...$6.map(Z=>({value:Z.value,label:Z.label}))],placeholder:" "})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",ge()&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:U,onValueChange:I,options:[{value:"",label:" "},...E.map(Z=>({value:Z.code,label:Z.name}))],placeholder:" "}),ge()&&s.jsx("p",{className:"mt-1 text-xs text-orange-600",children:"      ."})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 rounded-lg",children:[s.jsx($r,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-amber-700",children:"         ."})]})]}),N&&s.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center rounded-lg",children:s.jsx(Lf,{size:"medium",message:"  ..."})})]})},V6=({onBack:t,userInfo:e,showToast:n})=>{const[r,i]=b.useState(null),[a,o]=b.useState(!1),[c,u]=b.useState(!0),[h,m]=b.useState(!1),[_,p]=b.useState(!1),[g,C]=b.useState([]);b.useEffect(()=>{y(),N()},[e]);const y=async()=>{u(!0);try{const U=await lA({SO_ID:e==null?void 0:e.soId,CRR_ID:e==null?void 0:e.crrId,WRKR_ID:e==null?void 0:e.userId});if(console.log("[SafetyCheckList] Raw API items:",U),U&&U.length>0){let I=[];e!=null&&e.userId&&(I=await DM(e.userId),console.log("[SafetyCheckList] Today results:",I),I.length>0&&p(!0));const E=new Map;I.forEach(Y=>{Y.ITEM_ID&&E.set(Y.ITEM_ID,Y.ANSWER_VALUE||"N")});const A=U.sort((Y,se)=>(Y.DISPLAY_ORDER||0)-(se.DISPLAY_ORDER||0)).map(Y=>({id:Y.ITEM_ID,label:Y.QUESTION_TEXT,required:Y.IS_REQUIRED==="Y",imageRequired:Y.IMAGE_REQUIRED_YN==="Y",checked:E.get(String(Y.ITEM_ID))==="Y",photo:void 0}));console.log("[SafetyCheckList] Mapped items:",A),C(A)}else console.log("[SafetyCheckList] No items from API"),n&&n("    .","warning")}catch(U){console.error("[SafetyCheckList] Failed to load checklist:",U),n&&n("   ","error",!0)}finally{u(!1)}},N=async()=>{const U=(e==null?void 0:e.soId)||"",I=(e==null?void 0:e.crrId)||"";if(!(!U||!I))try{const E=await cA({SO_ID:U,CRR_ID:I});if(E&&E.length>0){const A=E.sort((se,X)=>X.INSP_END_DT.localeCompare(se.INSP_END_DT))[0];i(A);const Y=new Date().toISOString().slice(0,10).replace(/-/g,"");A.INSP_END_DT<Y&&(o(!0),n&&n(" .   .","warning"))}}catch(E){console.error("  :",E)}},v=U=>{C(I=>I.map(E=>E.id===U?{...E,checked:!E.checked}:E))},P=U=>new Promise((I,E)=>{const A=new Image;A.onload=()=>{try{const Y=document.createElement("canvas"),se=1920;let X=A.width,z=A.height;(X>se||z>se)&&(X>z?(z=z/X*se,X=se):(X=X/z*se,z=se)),Y.width=X,Y.height=z;const $=Y.getContext("2d");if(!$){E(new Error("Canvas context not available"));return}$.drawImage(A,0,0,X,z);const F=new Date,L=`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")} ${String(F.getHours()).padStart(2,"0")}:${String(F.getMinutes()).padStart(2,"0")}:${String(F.getSeconds()).padStart(2,"0")}`,re=Math.max(16,Math.floor(X/25));$.font=`bold ${re}px Arial`;const fe=$.measureText(L).width,T=10,j=re+T*2,K=fe+T*2;$.fillStyle="rgba(0, 0, 0, 0.6)",$.fillRect(X-K-10,z-j-10,K,j),$.fillStyle="#FFFFFF",$.fillText(L,X-fe-T-10,z-T-15);const J=Y.toDataURL("image/jpeg",.85);I(J)}catch(Y){E(Y)}},A.onerror=()=>E(new Error("Image load failed")),A.src=URL.createObjectURL(U)}),w=async(U,I)=>{const E=I.target.files;if(E&&E.length>0)try{const A=await P(E[0]);C(Y=>Y.map(se=>se.id===U?{...se,photo:A,checked:!0}:se)),console.log("[SafetyCheckList]    ( , Base64 )")}catch(A){console.error("[SafetyCheckList]   :",A),n&&n("  .","error")}},M=U=>{C(I=>I.map(E=>E.id===U?{...E,photo:void 0}:E))},k=()=>g.filter(E=>E.required&&!E.checked).length>0?(n&&n("    .","warning"),!1):g.filter(E=>E.imageRequired&&!E.photo).length>0?(n&&n("   .","warning"),!1):!0,B=async()=>{if(!k())return;const U=(e==null?void 0:e.userId)||"mobile_user";m(!0);try{const I=g.map(se=>String(se.id)).join(","),E=g.map(se=>se.checked?"Y":"N").join(","),A="N";console.log("   :",{USR_ID:U,ANS_ITEM_IDS:I,ANS_VALUES:E,IMG_PATHS:"(empty - image upload not implemented)"});const Y=await oA({USR_ID:U,IMG_PATHS:A,ANS_ITEM_IDS:I,ANS_VALUES:E});console.log("  :",Y),Y.code==="SUCCESS"||Y.code==="OK"?(n&&n(" .","success"),await y(),await N()):n&&n(`  : ${Y.message||"   "}`,"error",!0)}catch(I){console.error("  :",I),n&&n("  API  .","warning")}finally{m(!1)}},G=()=>{const U=g.filter(E=>E.required);if(U.length===0)return 100;const I=U.filter(E=>E.checked).length;return Math.round(I/U.length*100)};return c?s.jsxs("div",{className:"text-center p-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-cyan-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-gray-600",children:" ..."})]}):g.length===0?s.jsx("div",{className:"max-w-4xl mx-auto pb-6",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($r,{className:"w-6 h-6 text-yellow-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-yellow-800 font-bold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-yellow-700",children:"DB     .  ."})]})]})})}):s.jsxs("div",{className:"max-w-4xl mx-auto pb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-500 text-white p-4 sm:p-5 rounded-xl shadow-lg mb-6 relative",children:s.jsxs("div",{className:"flex items-start gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex-1 z-10 min-w-0 flex flex-col justify-between h-36 sm:h-44",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"p-1.5 sm:p-2 bg-white/20 rounded-lg flex-shrink-0",children:s.jsx(aE,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),s.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:""})]}),s.jsx("p",{className:"text-xs sm:text-sm text-white/90",children:"  "}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 text-xs",children:[s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-white/20 rounded-full",children:""})]})]}),s.jsx("div",{className:"flex-shrink-0 w-28 h-28 sm:w-36 sm:h-36 relative",children:s.jsx("img",{src:"/safeimage1-Photoroom.png",alt:" ",className:"absolute -right-4 -bottom-10 drop-shadow-xl !w-[170px] !h-auto !max-w-none"})})]})}),a&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($r,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-red-800 font-bold mb-1",children:" "}),s.jsx("p",{className:"text-sm text-red-700",children:" .      ."})]})]})}),r&&!a&&s.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-6 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ai,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-green-800 font-bold mb-1",children:"  "}),s.jsxs("p",{className:"text-sm text-green-700",children:[": ",r.INSP_END_DT.slice(0,4),"-",r.INSP_END_DT.slice(4,6),"-",r.INSP_END_DT.slice(6,8)]})]})]})}),_&&s.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ai,{className:"w-6 h-6 text-blue-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-blue-800 font-bold mb-1",children:"   "}),s.jsx("p",{className:"text-sm text-blue-700",children:"   .     ."})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden mb-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 p-3 sm:p-4 flex items-center gap-2 sm:gap-3",children:[s.jsx(aE,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"}),s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white",children:" "}),s.jsxs("span",{className:"ml-auto text-white/80 text-sm",children:[g.length," "]})]}),s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:g.map((U,I)=>{var E;return s.jsxs("div",{className:`p-3 rounded-lg border ${U.checked?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:U.checked,onChange:()=>v(U.id),className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-900 whitespace-pre-line",children:[I+1,". ",(E=U.label)==null?void 0:E.replace(/\r\n/g,`
`).replace(/  - /g,`
- `),U.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),U.imageRequired&&s.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-0.5 rounded bg-orange-100 text-orange-700 text-xs",children:[s.jsx(rE,{className:"w-3 h-3"}),""]})]}),U.checked&&s.jsx(Ai,{className:"w-5 h-5 text-green-500 flex-shrink-0"})]}),U.imageRequired&&s.jsx("div",{className:"mt-3 ml-8",children:U.photo?s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:U.photo,alt:" ",className:"w-24 h-24 object-cover rounded-lg border-2 border-green-300"}),s.jsx("button",{onClick:()=>M(U.id),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:s.jsx(Mi,{className:"w-3 h-3"})})]}):s.jsxs("label",{className:"inline-flex items-center gap-2 px-4 py-2 border-2 border-dashed border-orange-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 cursor-pointer transition-all",children:[s.jsx(rE,{className:"w-4 h-4 text-orange-500"}),s.jsx("span",{className:"text-sm font-medium text-orange-600",children:" "}),s.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:A=>w(U.id,A),className:"hidden"})]})})]},U.id)})})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("button",{onClick:B,disabled:h||G()<100,className:"w-full py-3 sm:py-4 bg-gradient-to-r from-blue-600 to-cyan-500 text-white rounded-xl font-bold text-base sm:text-lg shadow-lg hover:from-blue-700 hover:to-cyan-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:h?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"})," ..."]}):" "}),G()<100&&s.jsx("p",{className:"text-center text-sm text-red-600 mt-2",children:"   "})]}),s.jsx("div",{className:"mt-3 p-2.5 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("span",{className:"text-red-500 font-bold",children:"*"}),"     "]})})]})},z6=({onBack:t})=>{const[e,n]=b.useState([]),[r,i]=b.useState(!1),[a,o]=b.useState(null),[c,u]=b.useState(new Date().toISOString().slice(0,10));b.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0),o(null);const m={};c&&(m.HOPE_DT=c.replace(/-/g,""));const _=await dA(m);n(_),console.log("  :",_.length)}catch(m){console.error("  :",m),o("  .")}finally{i(!1)}};return s.jsxs("div",{children:[s.jsx("div",{className:"mb-3",children:s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"mb-3 bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"date",value:c,onChange:m=>u(m.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",style:{colorScheme:"light"}})]}),s.jsx("button",{onClick:h,disabled:r,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded font-medium text-sm shadow-md transition-all disabled:opacity-50",children:""})]})}),r?s.jsxs("div",{className:"text-center p-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-orange-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-gray-600",children:" ..."})]}):a?s.jsxs("div",{className:"text-center p-10 bg-white rounded-lg shadow-sm border border-red-200",children:[s.jsx("p",{className:"text-red-500",children:a}),s.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:" "})]}):s.jsx(s.Fragment,{children:e.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 border-b",children:""})]})}),s.jsx("tbody",{children:e.map((m,_)=>s.jsxs("tr",{className:"hover:bg-orange-50 transition-colors",children:[s.jsx("td",{className:"px-2 py-2 text-xs text-gray-900 border-b",children:m.WRKR_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.WRK_CD_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.ING_CNT||0}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.CMPL_CNT||0}),s.jsx("td",{className:"px-2 py-2 text-xs text-center text-gray-900 border-b",children:m.SUM_CNT||0})]},`${m.WRK_ID}-${_}`))})]})})}):s.jsx("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"   "})})})]})},H6=({isOpen:t,onClose:e,onSelectCustomer:n})=>{const[r,i]=b.useState(""),[a,o]=b.useState(""),[c,u]=b.useState(""),[h,m]=b.useState(""),[_,p]=b.useState([]),[g,C]=b.useState(!1),[y,N]=b.useState(!1),v=()=>{i(""),o(""),u(""),m(""),p([]),N(!1)},P=async()=>{C(!0),N(!0),p([]);try{let M=[];if(a.trim())M=await VA(a.trim());else if(r.trim())M=await $A(r.trim());else if(c.trim())M=await YA(c.trim());else if(h.trim())M=await zA(h.trim());else{alert("  ."),C(!1);return}p(M)}catch(M){console.error("Customer search error:",M)}finally{C(!1)}},w=M=>{const k={...M};a.trim()&&!k.CTRT_ID&&(k.CTRT_ID=a.trim()),n(k),e()};return t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-12 bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[90%] max-w-md max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500 rounded-t-xl",children:[s.jsx("h3",{className:"text-white font-bold text-base",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:v,className:"px-3 py-1 text-xs bg-white/20 text-white rounded-full hover:bg-white/30",children:""}),s.jsx("button",{onClick:e,className:"text-white",children:s.jsx(Mi,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"p-4 space-y-3 border-b",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:r,onChange:M=>i(M.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:"ID ",maxLength:10})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:a,onChange:M=>o(M.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:"ID ",maxLength:15})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:""}),s.jsx("input",{type:"tel",value:c,onChange:M=>u(M.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:" ",maxLength:15})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600 w-16 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:h,onChange:M=>m(M.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:" ",maxLength:20})]}),s.jsxs("div",{className:"flex gap-2 pt-1",children:[s.jsxs("button",{onClick:P,disabled:g,className:"flex-1 flex items-center justify-center gap-1 bg-blue-500 hover:bg-blue-600 text-white py-2.5 rounded-lg font-medium text-sm disabled:opacity-50",children:[s.jsx(Lc,{className:"h-4 w-4"}),""]}),s.jsx("button",{onClick:e,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2.5 rounded-lg font-medium text-sm",children:""})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:g?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-3 border-blue-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:" ..."})]}):_.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[" ",_.length,""]}),_.map((M,k)=>s.jsx("button",{onClick:()=>w(M),className:"w-full text-left p-3 bg-gray-50 hover:bg-blue-50 border border-gray-200 rounded-lg transition-colors",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[M.CUST_NM||"-"," ",s.jsxs("span",{className:"text-gray-400 text-xs",children:["(",M.CUST_ID,")"]})]}),M.CTRT_ID&&s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[": ",M.CTRT_ID," | ",M.BASIC_PROD_CD_NM||M.PROD_NM||"-"]}),M.ADDR&&s.jsx("p",{className:"text-xs text-gray-400 mt-0.5 truncate",children:M.ADDR})]}),s.jsxs("div",{className:"text-right",children:[M.CTRT_STAT_NM&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:M.CTRT_STAT_NM}),M.SO_NM&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:M.SO_NM})]})]})},k))]}):y?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-sm text-gray-500",children:"  ."})}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-sm text-gray-400",children:"     ."})})})]})}):null},JM=({onBack:t,userInfo:e,showToast:n})=>{const[r,i]=b.useState(!1),[a,o]=b.useState(null),[c,u]=b.useState([]),[h,m]=b.useState(null),[_,p]=b.useState(!1),[g,C]=b.useState("all"),[y,N]=b.useState(""),[v,P]=b.useState(!1),[w,M]=b.useState(!1),[k,B]=b.useState("basic"),G=b.useRef([]),U=b.useRef([]),I=b.useRef([]),E=b.useRef(!1);b.useEffect(()=>{E.current||(E.current=!0,(async()=>{try{const[Ye,at,Fe]=await Promise.all([Uc().catch(()=>[]),N1().catch(()=>[]),qa("CMIF006").catch(()=>[])]);G.current=Ye||[],U.current=at||[],I.current=(Fe||[]).map(tt=>tt.code||tt.COMMON_CD)}catch(Ye){console.error("[SignalIntegration]    :",Ye)}})())},[]);const A=Ye=>{const at=Ye.BASIC_PROD_CD||Ye.PROD_CD||"",Fe=Ye.SO_ID||"";return at&&G.current.some(tt=>tt.PROD_CD===at)?"lgu":at&&U.current.includes(at)&&Fe&&I.current.includes(Fe)?"ftth":"basic"},[Y,se]=b.useState(!1),[X,z]=b.useState(""),[$,F]=b.useState(()=>{const Ye=new Date;return Ye.setDate(Ye.getDate()-7),Ye.toISOString().slice(0,10)}),[L,re]=b.useState(new Date().toISOString().slice(0,10)),[fe,T]=b.useState(!1),[j,K]=b.useState(!1),[J,q]=b.useState([]),[V,ce]=b.useState(null),[me,Ce]=b.useState([]),[ge,Ge]=b.useState([]),[te,he]=b.useState([]),[de,Q]=b.useState(null),[ee,Z]=b.useState([]),[le,xe]=b.useState([]),be=Ye=>{if(!Ye)return"-";const at=Ye.replace(/[^0-9]/g,"");return at.length===10?`${at.slice(0,3)}-${at.slice(3,6)}-${at.slice(6)}`:Ye},ne=Ye=>{if(!Ye)return"-";const at=Ye.replace(/[-: T]/g,"");return at.length>=14?`${at.slice(0,4)}-${at.slice(4,6)}-${at.slice(6,8)} ${at.slice(8,10)}:${at.slice(10,12)}:${at.slice(12,14)}`:at.length>=8?`${at.slice(0,4)}-${at.slice(4,6)}-${at.slice(6,8)}`:Ye},ie=()=>{q([]),ce(null),Ce([]),Ge([]),he([]),Q(null),Z([]),xe([])},pe=async Ye=>{if(o(Ye),u([]),m(null),ie(),M(!0),Ye.CTRT_ID){const at={CTRT_ID:Ye.CTRT_ID,CUST_ID:Ye.CUST_ID,BASIC_PROD_CD_NM:Ye.BASIC_PROD_CD_NM||Ye.PROD_NM,CTRT_STAT_NM:Ye.CTRT_STAT_NM,SO_NM:Ye.SO_NM,ADDR:Ye.ADDR};m(at),z(Ye.CTRT_ID)}if(Ye.CUST_ID)try{const at=await HA(Ye.CUST_ID);if(at.length>0){u(at);const Fe=Ye.CTRT_ID;if(Fe){const tt=at.find(ct=>ct.CTRT_ID===Fe);if(tt){m(tt),z(tt.CTRT_ID);const ct=A(tt);B(ct)}else console.log("[SignalIntegration]   CTRT_ID  ,  CTRT_ID :",Fe),z(Fe)}else if(!h&&at.length===1){m(at[0]),z(at[0].CTRT_ID);const tt=A(at[0]);B(tt)}}}catch(at){console.error("Failed to load contract list:",at)}finally{M(!1)}else M(!1);Ye.CTRT_ID&&se(!0)};b.useEffect(()=>{Y&&!w&&X&&(se(!1),xt())},[Y,w,X]);const ze=Ye=>{if((h==null?void 0:h.CTRT_ID)===Ye.CTRT_ID&&v){P(!1);return}m(Ye),z(Ye.CTRT_ID),ie();const at=A(Ye);B(at),P(!1)},xt=async()=>{const Ye=X.trim();if(!Ye){n==null||n("ID .","warning");return}T(!0),ie(),P(!0);try{const at=$.replace(/-/g,""),Fe=new Date(L);Fe.setDate(Fe.getDate()+1);const tt=Fe.toISOString().slice(0,10).replace(/-/g,"");if(k==="basic"){const Mt=await FA({CTRT_ID:Ye,STRT_DTTM1:at,STRT_DTTM2:tt,CALL_GB:"M"});q(Mt.slice(0,100))}else if(k==="lgu"){const Mt=await kA({CTRT_ID:Ye,STRT_DTTM1:at,STRT_DTTM2:tt,CALL_GB:"M"});he(Mt.slice(0,100))}else{const Mt=await YP({CTRT_ID:Ye,STRT_DTTM1:at,STRT_DTTM2:tt});xe(Mt.slice(0,100))}const ct=k==="basic"?J.length:k==="lgu"?te.length:le.length;n==null||n(" .","success")}catch(at){console.error("Signal history query error:",at),n==null||n("  .","error")}finally{T(!1)}},st=async Ye=>{if(ce(Ye),Ce([]),Ge([]),!!Ye.IF_DTL_ID){K(!0);try{const{svcRslt:at,svcDtlRslt:Fe}=await KA(Ye.IF_DTL_ID);Ce(at),Ge(Fe)}catch(at){console.error("Detail query error:",at)}finally{K(!1)}}},St=async Ye=>{if(Q(Ye),Z([]),!!Ye.JOB_ID){K(!0);try{const at=await WA(Ye.JOB_ID);Z(at)}catch(at){console.error("LGU detail query error:",at)}finally{K(!1)}}},ot=c.filter(Ye=>Ye.CTRT_STAT_NM===""||Ye.CTRT_STAT==="10"),Be=g==="active"?ot:c,lt=y?Be.filter(Ye=>(Ye.CTRT_ID||"").includes(y)||(Ye.BASIC_PROD_CD_NM||Ye.PROD_NM||"").includes(y)||(Ye.ADDR||Ye.INSTL_ADDR||"").includes(y)):Be,mt=(k==="basic"?J.length:k==="lgu"?te.length:le.length)>0;return s.jsxs("div",{className:"flex-1 overflow-y-auto px-3 pt-2 pb-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 w-14 flex-shrink-0",children:""}),s.jsxs("button",{onClick:()=>i(!0),className:"flex-1 flex items-center gap-2 px-3 py-2.5 border border-gray-300 rounded-lg text-left hover:bg-gray-50 transition-colors",children:[a?s.jsxs("span",{className:"text-sm text-gray-900 truncate",children:[a.CUST_NM||"-"," (",a.CUST_ID,")"]}):s.jsx("span",{className:"text-sm text-gray-400",children:", ID, ID, "}),s.jsx(Lc,{className:"h-4 w-4 text-gray-400 ml-auto flex-shrink-0"})]})]})}),w&&s.jsxs("div",{className:"text-center py-8 bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-[3px] border-blue-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"   ..."})]}),c.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("button",{onClick:()=>P(!v),className:"w-full px-3 py-2.5 border-b border-gray-100 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-800 flex items-center gap-1.5",children:[s.jsx("span",{className:"text-blue-500",children:"|"}),"   ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",lt.length,")"]}),v&&h&&s.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-1",children:["- ",be(h.CTRT_ID)," (",h.BASIC_PROD_CD_NM||h.PROD_NM||"",")"]})]}),v?s.jsx(hr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Pr,{className:"h-4 w-4 text-gray-400"})]}),!v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-3 py-1.5 border-b border-gray-100 flex items-center justify-end",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsxs("button",{onClick:()=>C("all"),className:`px-2.5 py-1 text-xs rounded-full font-medium ${g==="all"?"bg-blue-500 text-white":"bg-gray-100 text-gray-500"}`,children:["(",c.length,")"]}),s.jsxs("button",{onClick:()=>C("active"),className:`px-2.5 py-1 text-xs rounded-full font-medium ${g==="active"?"bg-blue-500 text-white":"bg-gray-100 text-gray-500"}`,children:["(",ot.length,")"]})]})}),s.jsx("div",{className:"px-3 py-2 border-b border-gray-50",children:s.jsxs("div",{className:"relative",children:[s.jsx(yM,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-400"}),s.jsx("input",{type:"text",value:y,onChange:Ye=>N(Ye.target.value),className:"w-full pl-8 pr-3 py-1.5 text-xs border border-gray-200 rounded-md bg-gray-50 focus:bg-white focus:border-blue-300 focus:outline-none",placeholder:"ID, ,  "})]})}),s.jsx("div",{className:`${_?"max-h-72":"max-h-44"} overflow-y-auto`,children:lt.map((Ye,at)=>s.jsx("button",{onClick:()=>ze(Ye),className:`w-full text-left px-3 py-2.5 border-b border-gray-50 transition-colors ${(h==null?void 0:h.CTRT_ID)===Ye.CTRT_ID?"bg-blue-50 border-l-3 border-l-blue-500":"hover:bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-start gap-2.5",children:[s.jsx("span",{className:`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${(h==null?void 0:h.CTRT_ID)===Ye.CTRT_ID?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:at+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Ye.BASIC_PROD_CD_NM||Ye.PROD_NM||"-"}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full flex-shrink-0 ml-2 ${Ye.CTRT_STAT_NM===""?"bg-green-100 text-green-700":Ye.CTRT_STAT_NM===""?"bg-blue-100 text-blue-600":Ye.CTRT_STAT_NM===""?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:Ye.CTRT_STAT_NM||"-"})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[s.jsxs("span",{children:[" ID: ",be(Ye.CTRT_ID)]}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("span",{children:Ye.SO_NM||"N/A"})]}),(Ye.ADDR||Ye.INSTL_ADDR)&&s.jsx("p",{className:"mt-0.5 text-xs text-gray-400 truncate",children:Ye.INSTL_ADDR||Ye.ADDR})]})]})},Ye.CTRT_ID||at))}),lt.length>3&&s.jsx("button",{onClick:()=>p(!_),className:"w-full py-1.5 text-xs text-blue-500 hover:bg-blue-50 flex items-center justify-center gap-1",children:_?s.jsxs(s.Fragment,{children:[s.jsx(Pr,{className:"h-3 w-3"})," "]}):s.jsxs(s.Fragment,{children:[s.jsx(hr,{className:"h-3 w-3"})," "]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:X,onChange:Ye=>z(Ye.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-blue-400 focus:outline-none",placeholder:"ID ",maxLength:15})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsx("input",{type:"date",value:$,onChange:Ye=>F(Ye.target.value),className:"flex-1 px-2 py-2 text-sm border border-gray-300 rounded-lg",style:{colorScheme:"light"}}),s.jsx("span",{className:"text-gray-400 text-sm",children:"~"}),s.jsx("input",{type:"date",value:L,onChange:Ye=>re(Ye.target.value),className:"flex-1 px-2 py-2 text-sm border border-gray-300 rounded-lg",style:{colorScheme:"light"}})]}),s.jsx("button",{onClick:xt,disabled:fe,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2.5 rounded-lg font-medium text-sm shadow-sm transition-all disabled:opacity-50",children:fe?" ...":""})]}),fe?s.jsxs("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-7 w-7 border-[3px] border-blue-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"  ..."})]}):mt?s.jsxs(s.Fragment,{children:[k==="basic"&&J.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",J.length,")"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"w-full min-w-[780px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"(KCT)"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"SO_ID"})]})}),s.jsx("tbody",{children:J.map((Ye,at)=>s.jsxs("tr",{onClick:()=>st(Ye),className:`cursor-pointer transition-colors ${(V==null?void 0:V.IF_DTL_ID)===Ye.IF_DTL_ID?"bg-blue-100":at%2===0?"bg-white":"bg-gray-50/50"} hover:bg-blue-50`,children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.IF_DTL_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[140px] truncate",children:Ye.PROD_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.MSG_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[120px] truncate",children:Ye.MSG_ID_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:Ye.RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:Ye.RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:Ye.PROC_RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:Ye.PROC_RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.SO_ID||"-"})]},`${Ye.IF_DTL_ID}-${at}`))})]})})})]}),k==="basic"&&V&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["ID: ",V.IF_DTL_ID]})]})}),j?s.jsx("div",{className:"text-center py-6",children:s.jsx("div",{className:"inline-block animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent"})}):me.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[700px]",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:me.map((Ye,at)=>s.jsxs("tr",{className:at%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.REQ_SYSTEM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.IF_DTL_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:ne(Ye.REG_DTTM)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.IF_TP||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:Ye.SYSTEM_RSLT_CD&&Ye.SYSTEM_RSLT_CD.startsWith("0")?"text-green-600":"text-red-600",children:Ye.SYSTEM_RSLT_CD||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.SYSTEM_RSLT_MSG||"-"})]},at))})]})}):s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-xs text-gray-400",children:"  "})}),ge.length>0&&s.jsxs("div",{className:"border-t border-gray-200",children:[s.jsx("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-100",children:s.jsx("h4",{className:"text-xs font-semibold text-gray-700",children:" "})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[700px]",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-2 py-1.5 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-2 py-1.5 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-2 py-1.5 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:" "})]})}),s.jsx("tbody",{children:ge.map((Ye,at)=>{var Fe,tt;return s.jsxs("tr",{className:at%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.IF_DTL_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.IF_TP||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:(Fe=Ye.TMS_PROC_STATUS_NM)!=null&&Fe.includes("")?"text-green-600":"text-orange-600",children:Ye.TMS_PROC_STATUS_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:(tt=Ye.LS_PROC_STATUS_NM)!=null&&tt.includes("")?"text-green-600":"text-orange-600",children:Ye.LS_PROC_STATUS_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.TMS_ERR_MSG||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.LS_ERR_MSG||"-"})]},at)})})]})})]})]}),k==="lgu"&&te.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",te.length,")"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"w-full min-w-[780px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"(KCT)"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"SO_ID"})]})}),s.jsx("tbody",{children:te.map((Ye,at)=>s.jsxs("tr",{onClick:()=>St(Ye),className:`cursor-pointer transition-colors ${(de==null?void 0:de.JOB_ID)===Ye.JOB_ID?"bg-blue-100":at%2===0?"bg-white":"bg-gray-50/50"} hover:bg-blue-50`,children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.JOB_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[140px] truncate",children:Ye.PROD_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.MSG_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[120px] truncate",children:Ye.MSG_ID_NM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:Ye.RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:Ye.RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:Ye.PROC_RSLT_CD_NM===""?"text-green-600":"text-orange-600",children:Ye.PROC_RSLT_CD_NM||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.SO_ID||"-"})]},`${Ye.JOB_ID}-${at}`))})]})})})]}),k==="lgu"&&de&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:[" ",s.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["ID: ",de.JOB_ID]})]})}),j?s.jsx("div",{className:"text-center py-6",children:s.jsx("div",{className:"inline-block animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent"})}):ee.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[700px]",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:ee.map((Ye,at)=>s.jsxs("tr",{className:at%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.REQ_SYSTEM||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.JOB_ID||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:ne(Ye.REG_DTTM)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.RS_FCODE||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center border-b whitespace-nowrap",children:s.jsx("span",{className:Ye.RS_FCODE&&Ye.RS_FCODE.startsWith("0")?"text-green-600":"text-red-600",children:Ye.RS_FCODE||"-"})}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.RS_FMSG||"-"})]},at))})]})}):s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-xs text-gray-400",children:"  "})})]}),k==="ftth"&&le.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:["  ",s.jsxs("span",{className:"text-blue-500 font-normal",children:["(",le.length,")"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"w-full min-w-[850px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"ID"}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:"AP_MAC"}),s.jsx("th",{className:"px-2 py-2 text-center text-[0.6875rem] font-semibold text-gray-600 border-b whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:le.map((Ye,at)=>s.jsxs("tr",{className:at%2===0?"bg-white":"bg-gray-50/50",children:[s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.SEQ_API||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap",children:Ye.CMD||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[120px] truncate",children:Ye.MSG_TP_DESC||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:ne(Ye.REQ_DATE)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-gray-900 border-b whitespace-nowrap max-w-[140px] truncate",children:Ye.RESULT||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:ne(Ye.RES_DATE)}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.MAC_ADDR||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-[0.6875rem] text-center text-gray-900 border-b whitespace-nowrap",children:Ye.SO_NM||"-"})]},`${Ye.SEQ_API}-${at}`))})]})})})]})]}):!fe&&X||fe?null:s.jsx("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-400",children:"  ID   "})}),s.jsx(H6,{isOpen:r,onClose:()=>i(!1),onSelectCustomer:pe})]})},ZM=({onClick:t,workCount:e})=>s.jsxs("button",{onClick:t,className:"fixed bottom-24 right-4 z-40 w-14 h-14 bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95",style:{boxShadow:"0 4px 14px rgba(59, 130, 246, 0.4)"},title:" ",children:[s.jsx(WL,{className:"w-6 h-6"}),e!==void 0&&e>0&&s.jsx("span",{className:"absolute -top-1 -right-1 min-w-5 h-5 px-1.5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:e>99?"99+":e})]}),Cl={ADD:"add",REMOVE:"remove"},lm={PROPERTYCHANGE:"propertychange"},In={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class T1{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function q6(t,e,n){let r,i;n=n||Cd;let a=0,o=t.length,c=!1;for(;a<o;)r=a+(o-a>>1),i=+n(t[r],e),i<0?a=r+1:(o=r,c=!i);return c?a:~a}function Cd(t,e){return t>e?1:t<e?-1:0}function X6(t,e){return t<e?1:t>e?-1:0}function uN(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){const a=t[i];if(a===e)return i;if(a<e)return n(e,t[i-1],a)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function J6(t,e,n){for(;e<n;){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function hN(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function Zu(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Z6(t,e,n){const r=e||Cd;return t.every(function(i,a){if(a===0)return!0;const o=r(t[a-1],i);return!(o>0||o===0)})}function Hg(){return!0}function M1(){return!1}function qg(){}function eI(t){let e,n,r;return function(){const i=Array.prototype.slice.call(arguments);return(!n||this!==r||!Zu(i,n))&&(r=this,n=i,e=t.apply(this,arguments)),e}}function e8(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function C_(t){for(const e in t)delete t[e]}function om(t){let e;for(e in t)return!1;return!e}class Od{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class I1 extends T1{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){const n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const a=n?new Od(e):e;a.target||(a.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,c[r]=0),++o[r];let u;for(let h=0,m=i.length;h<m;++h)if("handleEvent"in i[h]?u=i[h].handleEvent(a):u=i[h].call(this,a),u===!1||a.propagationStopped){u=!1;break}if(--o[r]===0){let h=c[r];for(delete c[r];h--;)this.removeEventListener(r,qg);delete o[r]}return u}disposeInternal(){this.listeners_&&C_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=qg,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function nr(t,e,n,r,i){if(i){const o=n;n=function(c){return t.removeEventListener(e,n),o.call(r??this,c)}}else r&&r!==t&&(n=n.bind(r));const a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function Qp(t,e,n,r){return nr(t,e,n,r,!0)}function ei(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),C_(t))}class N_ extends I1{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(In.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=nr(this,e[a],n);return i}return nr(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let a=0;a<i;++a)r[a]=Qp(this,e[a],n)}else r=Qp(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)t8(r);else if(Array.isArray(e))for(let i=0,a=e.length;i<a;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}}N_.prototype.on;N_.prototype.once;N_.prototype.un;function t8(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)ei(t[e]);else ei(t)}function sr(){throw new Error("Unimplemented abstract method.")}let s8=0;function rr(t){return t.ol_uid||(t.ol_uid=String(++s8))}class ME extends Od{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}class Bc extends N_{constructor(e){super(),this.on,this.once,this.un,rr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new ME(r,e,n)),r=lm.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new ME(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const i=this.values_||(this.values_={});if(r)i[e]=n;else{const a=i[e];i[e]=n,a!==n&&this.notify(e,a)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],om(this.values_)&&(this.values_=null),n||this.notify(e,r)}}}const IE={LENGTH:"length"};class Px extends Od{constructor(e,n,r){super(e),this.element=n,this.index=r}}let fo=class extends Bc{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(IE.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new Px(Cl.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Px(Cl.REMOVE,n,e)),n}setAt(e,n){const r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new Px(Cl.REMOVE,i,e)),this.dispatchEvent(new Px(Cl.ADD,n,e))}updateLength_(){this.set(IE.LENGTH,this.array_.length)}assertUnique_(e,n){const r=this.array_;for(let i=0,a=r.length;i<a;++i)if(r[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}};class pf extends Od{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}}class Su extends pf{constructor(e,n,r,i,a,o){super(e,n,a),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const pi={SINGLECLICK:"singleclick",CLICK:In.CLICK,DBLCLICK:In.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Hh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",n8=Hh.includes("safari")&&!Hh.includes("chrom");n8&&(Hh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Hh));const r8=Hh.includes("webkit")&&!Hh.includes("edge"),tI=Hh.includes("macintosh"),i8=typeof devicePixelRatio<"u"?devicePixelRatio:1,mo=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,sI=typeof Image<"u"&&Image.prototype.decode,nI=(function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t})(),ZC={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class a8 extends I1{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=nr(r,ZC.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=nr(r,ZC.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(In.TOUCHMOVE,this.boundHandleTouchMove_,nI?{passive:!1}:!1)}emulateClick_(e){let n=new Su(pi.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Su(pi.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Su(pi.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const n=e,r=n.pointerId;if(n.type==pi.POINTERUP||n.type==pi.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==pi.POINTERDOWN||n.type==pi.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Su(pi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ei),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Su(pi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(nr(r,pi.POINTERMOVE,this.handlePointerMove_,this),nr(r,pi.POINTERUP,this.handlePointerUp_,this),nr(this.element_,pi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(nr(this.element_.getRootNode(),pi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Su(pi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Su(pi.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ei(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(In.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ei(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ei),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const vu={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Aa={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},dn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function _r(t,e){if(!t)throw new Error(e)}const Yp=1/0;class l8{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,C_(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){_r(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=Yp?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,r=this.priorities_,i=n.length,a=n[e],o=r[e],c=e;for(;e<i>>1;){const u=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),m=h<i&&r[h]<r[u]?h:u;n[e]=n[m],r[e]=r[m],e=m}n[e]=a,r[e]=o,this.siftDown_(c,e)}siftDown_(e,n){const r=this.elements_,i=this.priorities_,a=r[n],o=i[n];for(;n>e;){const c=this.getParentIndex_(n);if(i[c]>o)r[n]=r[c],i[n]=i[c],n=c;else break}r[n]=a,i[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,r=this.priorities_;let i=0;const a=n.length;let o,c,u;for(c=0;c<a;++c)o=n[c],u=e(o),u==Yp?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=u,n[i++]=o);n.length=i,r.length=i,this.heapify_()}}class o8 extends l8{constructor(e,n){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(In.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,r=n.getState();if(r===dn.LOADED||r===dn.ERROR||r===dn.EMPTY){r!==dn.ERROR&&n.removeEventListener(In.CHANGE,this.boundHandleTileChange_);const i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;){const i=this.dequeue()[0],a=i.getKey();i.getState()===dn.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++r,i.load())}}}function c8(t,e,n,r,i){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return Yp;const a=t.viewState.center,o=r[0]-a[0],c=r[1]-a[1];return 65536*Math.log(i)+Math.sqrt(o*o+c*c)/i}const ka={ANIMATING:0,INTERACTING:1},$o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ur(t,e,n){return Math.min(Math.max(t,e),n)}function d8(t,e,n,r,i,a){const o=i-n,c=a-r;if(o!==0||c!==0){const u=((t-n)*o+(e-r)*c)/(o*o+c*c);u>1?(n=i,r=a):u>0&&(n+=o*u,r+=c*u)}return Pf(t,e,n,r)}function Pf(t,e,n,r){const i=n-t,a=r-e;return i*i+a*a}function u8(t){const e=t.length;for(let r=0;r<e;r++){let i=r,a=Math.abs(t[r][r]);for(let c=r+1;c<e;c++){const u=Math.abs(t[c][r]);u>a&&(a=u,i=c)}if(a===0)return null;const o=t[i];t[i]=t[r],t[r]=o;for(let c=r+1;c<e;c++){const u=-t[c][r]/t[r][r];for(let h=r;h<e+1;h++)r==h?t[c][h]=0:t[c][h]+=u*t[r][h]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function jE(t){return t*180/Math.PI}function Ku(t){return t*Math.PI/180}function Af(t,e){const n=t%e;return n*e<0?n+e:n}function co(t,e,n){return t+n*(e-t)}function j1(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function Ax(t,e){return Math.floor(j1(t,e))}function kx(t,e){return Math.ceil(j1(t,e))}function e2(t,e,n){if(t>=e&&t<n)return t;const r=n-e;return((t-e)%r+r)%r+e}function OE(t,e,n){return(function(r,i,a,o,c){if(!r)return;if(!i&&!e)return r;const u=e?0:a[0]*i,h=e?0:a[1]*i,m=c?c[0]:0,_=c?c[1]:0;let p=t[0]+u/2+m,g=t[2]-u/2+m,C=t[1]+h/2+_,y=t[3]-h/2+_;p>g&&(p=(g+p)/2,g=p),C>y&&(C=(y+C)/2,y=C);let N=Ur(r[0],p,g),v=Ur(r[1],C,y);if(o&&n&&i){const P=30*i;N+=-P*Math.log(1+Math.max(0,p-r[0])/P)+P*Math.log(1+Math.max(0,r[0]-g)/P),v+=-P*Math.log(1+Math.max(0,C-r[1])/P)+P*Math.log(1+Math.max(0,r[1]-y)/P)}return[N,v]})}function h8(t){return t}const ha={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function $p(t){const e=So();for(let n=0,r=t.length;n<r;++n)Ag(e,t[n]);return e}function fN(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function rI(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function iI(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function cm(t,e){return aI(t,e[0],e[1])}function Cg(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function aI(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function t2(t,e){const n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],c=e[1];let u=ha.UNKNOWN;return o<n?u=u|ha.LEFT:o>i&&(u=u|ha.RIGHT),c<r?u=u|ha.BELOW:c>a&&(u=u|ha.ABOVE),u===ha.UNKNOWN&&(u=ha.INTERSECTING),u}function So(){return[1/0,1/0,-1/0,-1/0]}function Vu(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function O1(t){return Vu(1/0,1/0,-1/0,-1/0,t)}function lI(t,e){const n=t[0],r=t[1];return Vu(n,r,n,r,e)}function mN(t,e,n,r,i){const a=O1(i);return oI(a,t,e,n,r)}function Xg(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function f8(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Ag(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function oI(t,e,n,r,i){for(;n<r;n+=i)m8(t,e[n],e[n+1]);return t}function m8(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function cI(t,e){let n;return n=e(w1(t)),n||(n=e(L1(t)),n)||(n=e(P1(t)),n)||(n=e(h0(t)),n)?n:!1}function s2(t){let e=0;return S_(t)||(e=ur(t)*Xa(t)),e}function w1(t){return[t[0],t[1]]}function L1(t){return[t[2],t[1]]}function qh(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function g8(t,e){let n;if(e==="bottom-left")n=w1(t);else if(e==="bottom-right")n=L1(t);else if(e==="top-left")n=h0(t);else if(e==="top-right")n=P1(t);else throw new Error("Invalid corner");return n}function n2(t,e,n,r,i){const[a,o,c,u,h,m,_,p]=dI(t,e,n,r);return Vu(Math.min(a,c,h,_),Math.min(o,u,m,p),Math.max(a,c,h,_),Math.max(o,u,m,p),i)}function dI(t,e,n,r){const i=e*r[0]/2,a=e*r[1]/2,o=Math.cos(n),c=Math.sin(n),u=i*o,h=i*c,m=a*o,_=a*c,p=t[0],g=t[1];return[p-u+_,g-h-m,p-u-_,g-h+m,p+u-_,g+h+m,p+u+_,g+h-m,p-u+_,g-h-m]}function Xa(t){return t[3]-t[1]}function Qh(t,e,n){const r=n||So();return vl(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):O1(r),r}function h0(t){return[t[0],t[3]]}function P1(t){return[t[2],t[3]]}function ur(t){return t[2]-t[0]}function vl(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function S_(t){return t[2]<t[0]||t[3]<t[1]}function _8(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function x8(t,e,n){let r=!1;const i=t2(t,e),a=t2(t,n);if(i===ha.INTERSECTING||a===ha.INTERSECTING)r=!0;else{const o=t[0],c=t[1],u=t[2],h=t[3],m=e[0],_=e[1],p=n[0],g=n[1],C=(g-_)/(p-m);let y,N;a&ha.ABOVE&&!(i&ha.ABOVE)&&(y=p-(g-h)/C,r=y>=o&&y<=u),!r&&a&ha.RIGHT&&!(i&ha.RIGHT)&&(N=g-(p-u)*C,r=N>=c&&N<=h),!r&&a&ha.BELOW&&!(i&ha.BELOW)&&(y=p-(g-c)/C,r=y>=o&&y<=u),!r&&a&ha.LEFT&&!(i&ha.LEFT)&&(N=g-(p-o)*C,r=N>=c&&N<=h)}return r}function uI(t,e){const n=e.getExtent(),r=qh(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const i=ur(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}function hI(t,e,n){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];uI(t,e);const i=ur(r);if(ur(t)>i&&!n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+i,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-i,t[3]]]}return[t]}function p8(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Vp(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function gN(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,a=t[1]*n+t[0]*r;return t[0]=i,t[1]=a,t}function y8(t,e){return t[0]*=e,t[1]*=e,t}function fI(t,e){if(e.canWrapX()){const n=ur(e.getExtent()),r=mI(t,e,n);r&&(t[0]-=r*n)}return t}function mI(t,e,n){const r=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||ur(r),i=Math.floor((t[0]-r[0])/n)),i}function b8(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=[(e[0]-t[0])/r,(e[1]-t[1])/r],a=[-i[1],i[0]],o=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),c=[(n[0]-t[0])/o,(n[1]-t[1])/o];let u=r===0||o===0?0:Math.acos(Ur(c[0]*i[0]+c[1]*i[1],-1,1));return u=Math.max(u,1e-5),c[0]*a[0]+c[1]*a[1]>0?u:Math.PI*2-u}function gI(t){return Math.pow(t,3)}function pm(t){return 1-gI(1-t)}function C8(t){return 3*t*t-2*t*t*t}function N8(t){return t}const S8=63710088e-1;function wE(t,e,n){n=n||S8;const r=Ku(t[1]),i=Ku(e[1]),a=(i-r)/2,o=Ku(e[0]-t[0])/2,c=Math.sin(a)*Math.sin(a)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function _I(...t){console.warn(...t)}const _N={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let A1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||_N[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const v_=6378137,Ef=Math.PI*v_,v8=[-Ef,-Ef,Ef,Ef],E8=[-180,-85,180,85],Ux=v_*Math.log(Math.tan(Math.PI/2));class sf extends A1{constructor(e){super({code:e,units:"m",extent:v8,global:!0,worldExtent:E8,getPointResolution:function(n,r){return n/Math.cosh(r[1]/v_)}})}}const LE=[new sf("EPSG:3857"),new sf("EPSG:102100"),new sf("EPSG:102113"),new sf("EPSG:900913"),new sf("http://www.opengis.net/def/crs/EPSG/0/3857"),new sf("http://www.opengis.net/gml/srs/epsg.xml#3857")];function D8(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let a=0;a<i;a+=r){e[a]=Ef*t[a]/180;let o=v_*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));o>Ux?o=Ux:o<-Ux&&(o=-Ux),e[a+1]=o}return e}function R8(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let a=0;a<i;a+=r)e[a]=180*t[a]/Ef,e[a+1]=360*Math.atan(Math.exp(t[a+1]/v_))/Math.PI-90;return e}const T8=6378137,PE=[-180,-90,180,90],M8=Math.PI*T8/180;class yh extends A1{constructor(e,n){super({code:e,units:"degrees",extent:PE,axisOrientation:n,global:!0,metersPerUnit:M8,worldExtent:PE})}}const AE=[new yh("CRS:84"),new yh("EPSG:4326","neu"),new yh("urn:ogc:def:crs:OGC:1.3:CRS84"),new yh("urn:ogc:def:crs:OGC:2:84"),new yh("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new yh("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new yh("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let r2={};function pp(t){return r2[t]||r2[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function I8(t,e){r2[t]=e}let kf={};function Xh(t,e,n){const r=t.getCode(),i=e.getCode();r in kf||(kf[r]={}),kf[r][i]=n}function yp(t,e){return t in kf&&e in kf[t]?kf[t][e]:null}const zp=.9996,po=.00669438,k1=po*po,U1=k1*po,jh=po/(1-po),kE=Math.sqrt(1-po),dm=(1-kE)/(1+kE),xI=dm*dm,xN=xI*dm,pN=xN*dm,pI=pN*dm,yI=1-po/4-3*k1/64-5*U1/256,j8=3*po/8+3*k1/32+45*U1/1024,O8=15*k1/256+45*U1/1024,w8=35*U1/3072,L8=3/2*dm-27/32*xN+269/512*pI,P8=21/16*xI-55/32*pN,A8=151/96*xN-417/128*pI,k8=1097/512*pN,Hp=6378137;function U8(t,e,n){const r=t-5e5,o=(n.north?e:e-1e7)/zp/(Hp*yI),c=o+L8*Math.sin(2*o)+P8*Math.sin(4*o)+A8*Math.sin(6*o)+k8*Math.sin(8*o),u=Math.sin(c),h=u*u,m=Math.cos(c),_=u/m,p=_*_,g=p*p,C=1-po*h,y=Math.sqrt(1-po*h),N=Hp/y,v=(1-po)/C,P=jh*m**2,w=P*P,M=r/(N*zp),k=M*M,B=k*M,G=B*M,U=G*M,I=U*M,E=c-_/v*(k/2-G/24*(5+3*p+10*P-4*w-9*jh))+I/720*(61+90*p+298*P+45*g-252*jh-3*w);let A=(M-B/6*(1+2*p+P)+U/120*(5-2*P+28*p-3*w+8*jh+24*g))/m;return A=e2(A+Ku(bI(n.number)),-Math.PI,Math.PI),[jE(A),jE(E)]}const UE=-80,BE=84,B8=-180,G8=180;function W8(t,e,n){t=e2(t,B8,G8),e<UE?e=UE:e>BE&&(e=BE);const r=Ku(e),i=Math.sin(r),a=Math.cos(r),o=i/a,c=o*o,u=c*c,h=Ku(t),m=bI(n.number),_=Ku(m),p=Hp/Math.sqrt(1-po*i**2),g=jh*a**2,C=a*e2(h-_,-Math.PI,Math.PI),y=C*C,N=y*C,v=N*C,P=v*C,w=P*C,M=Hp*(yI*r-j8*Math.sin(2*r)+O8*Math.sin(4*r)-w8*Math.sin(6*r)),k=zp*p*(C+N/6*(1-c+g)+P/120*(5-18*c+u+72*g-58*jh))+5e5;let B=zp*(M+p*o*(y/2+v/24*(5-c+9*g+4*g**2)+w/720*(61-58*c+u+600*g-330*jh)));return n.north||(B+=1e7),[k,B]}function bI(t){return(t-1)*6-180+3}const F8=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function CI(t){let e=0;for(const i of F8){const a=t.match(i);if(a){e=parseInt(a[1]);break}}if(!e)return null;let n=0,r=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(r=!0,n=e-32600),n?{number:n,north:r}:null}function GE(t,e){return function(n,r,i,a){const o=n.length;i=i>1?i:2,a=a??i,r||(i>2?r=n.slice():r=new Array(o));for(let c=0;c<o;c+=a){const u=n[c],h=n[c+1],m=t(u,h,e);r[c]=m[0],r[c+1]=m[1]}return r}}function K8(t){return CI(t)?new A1({code:t,units:"m"}):null}function Q8(t){const e=CI(t.getCode());return e?{forward:GE(W8,e),inverse:GE(U8,e)}:null}const Y8=[Q8],$8=[K8];let i2=!0;function NI(t){i2=!1}function yN(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function qp(t){I8(t.getCode(),t),Xh(t,t,yN)}function V8(t){t.forEach(qp)}function Ta(t){if(typeof t!="string")return t;const e=pp(t);if(e)return e;for(const n of $8){const r=n(t);if(r)return r}return null}function WE(t,e,n,r){t=Ta(t);let i;const a=t.getPointResolutionFunc();if(a)i=a(e,n);else{const o=t.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const c=CN(t,Ta("EPSG:4326"));if(!c&&o!=="degrees")i=e*t.getMetersPerUnit();else{let h=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];h=c(h,h,2);const m=wE(h.slice(0,2),h.slice(2,4)),_=wE(h.slice(4,6),h.slice(6,8));i=(m+_)/2}const u=t.getMetersPerUnit();u!==void 0&&(i/=u)}}return i}function a2(t){V8(t),t.forEach(function(e){t.forEach(function(n){e!==n&&Xh(e,n,yN)})})}function z8(t,e,n,r){t.forEach(function(i){e.forEach(function(a){Xh(i,a,n),Xh(a,i,r)})})}function bN(t,e){return t?typeof t=="string"?Ta(t):t:Ta(e)}function l2(t){return(function(e,n,r,i){const a=e.length;r=r!==void 0?r:2,i=i??r,n=n!==void 0?n:new Array(a);for(let o=0;o<a;o+=i){const c=t(e.slice(o,o+r)),u=c.length;for(let h=0,m=i;h<m;++h)n[o+h]=h>=u?e[o+h]:c[h]}return n})}function H8(t,e,n,r){const i=Ta(t),a=Ta(e);Xh(i,a,l2(n)),Xh(a,i,l2(r))}function da(t,e){return NI(),NN(t,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function bp(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||CN(t,e)===yN)&&n}function CN(t,e){const n=t.getCode(),r=e.getCode();let i=yp(n,r);if(i)return i;let a=null,o=null;for(const u of Y8)a||(a=u(t)),o||(o=u(e));if(!a&&!o)return null;const c="EPSG:4326";if(o)if(a)i=Mb(a.inverse,o.forward);else{const u=yp(n,c);u&&(i=Mb(u,o.forward))}else{const u=yp(c,r);u&&(i=Mb(a.inverse,u))}return i&&(qp(t),qp(e),Xh(t,e,i)),i}function Mb(t,e){return function(n,r,i,a){return r=t(n,r,i,a),e(r,r,i,a)}}function Xp(t,e){const n=Ta(t),r=Ta(e);return CN(n,r)}function NN(t,e,n){const r=Xp(e,n);if(!r){const i=Ta(e).getCode(),a=Ta(n).getCode();throw new Error(`No transform available between ${i} and ${a}`)}return r(t,void 0,t.length)}function o2(t,e){return t}function fd(t,e){return i2&&!Vp(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(i2=!1,_I("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function SI(t,e){return t}function Au(t,e){return t}function FE(t,e,n){return function(r){let i,a;if(t.canWrapX()){const o=t.getExtent(),c=ur(o);r=r.slice(0),a=mI(r,t,c),a&&(r[0]=r[0]-a*c),r[0]=Ur(r[0],o[0],o[2]),r[1]=Ur(r[1],o[1],o[3]),i=n(r)}else i=n(r);return a&&e.canWrapX()&&(i[0]+=a*ur(e.getExtent())),i}}function q8(){a2(LE),a2(AE),z8(AE,LE,D8,R8)}q8();new Array(6);function ec(){return[1,0,0,1,0,0]}function X8(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function fa(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function Td(t,e,n,r,i,a,o,c){const u=Math.sin(a),h=Math.cos(a);return t[0]=r*h,t[1]=i*u,t[2]=-r*u,t[3]=i*h,t[4]=o*r*h-c*r*u+e,t[5]=o*i*u+c*i*h+n,t}function vI(t,e){const n=J8(e);_r(n!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],a=e[2],o=e[3],c=e[4],u=e[5];return t[0]=o/n,t[1]=-i/n,t[2]=-a/n,t[3]=r/n,t[4]=(a*u-o*c)/n,t[5]=-(r*u-i*c)/n,t}function J8(t){return t[0]*t[3]-t[1]*t[2]}const Z8=[1e5,1e5,1e5,1e5,2,2];function ek(t){return"matrix("+t.join(", ")+")"}function c2(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function tk(t,e){const n=c2(t),r=c2(e);for(let i=0;i<6;++i)if(Math.round((n[i]-r[i])*Z8[i])!==0)return!1;return!0}function Qu(t,e,n,r,i,a,o){a=a||[],o=o||2;let c=0;for(let u=e;u<n;u+=r){const h=t[u],m=t[u+1];a[c++]=i[0]*h+i[2]*m+i[4],a[c++]=i[1]*h+i[3]*m+i[5];for(let _=2;_<o;_++)a[c++]=t[u+_]}return a&&a.length!=c&&(a.length=c),a}function EI(t,e,n,r,i,a,o){o=o||[];const c=Math.cos(i),u=Math.sin(i),h=a[0],m=a[1];let _=0;for(let p=e;p<n;p+=r){const g=t[p]-h,C=t[p+1]-m;o[_++]=h+g*c-C*u,o[_++]=m+g*u+C*c;for(let y=p+2;y<p+r;++y)o[_++]=t[y]}return o&&o.length!=_&&(o.length=_),o}function sk(t,e,n,r,i,a,o,c){c=c||[];const u=o[0],h=o[1];let m=0;for(let _=e;_<n;_+=r){const p=t[_]-u,g=t[_+1]-h;c[m++]=u+i*p,c[m++]=h+a*g;for(let C=_+2;C<_+r;++C)c[m++]=t[C]}return c&&c.length!=m&&(c.length=m),c}function nk(t,e,n,r,i,a,o){o=o||[];let c=0;for(let u=e;u<n;u+=r){o[c++]=t[u]+i,o[c++]=t[u+1]+a;for(let h=u+2;h<u+r;++h)o[c++]=t[h]}return o&&o.length!=c&&(o.length=c),o}const KE=ec(),rk=[NaN,NaN];class ik extends Bc{constructor(){super(),this.extent_=So(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=eI((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return sr()}closestPointXY(e,n,r,i){return sr()}containsXY(e,n){return this.closestPointXY(e,n,rk,Number.MIN_VALUE)===0}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return sr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&O1(n),this.extentRevision_=this.getRevision()}return _8(this.extent_,e)}rotate(e,n){sr()}scale(e,n,r){sr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return sr()}getType(){return sr()}applyTransform(e){sr()}intersectsExtent(e){return sr()}translate(e,n){sr()}transform(e,n){const r=Ta(e),i=r.getUnits()=="tile-pixels"?function(a,o,c){const u=r.getExtent(),h=r.getWorldExtent(),m=Xa(h)/Xa(u);Td(KE,h[0],h[3],m,-m,0,0,0);const _=Qu(a,0,a.length,c,KE,o),p=Xp(r,n);return p?p(_,_,c):_}:Xp(r,n);return this.applyTransform(i),this}}class SN extends ik{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return mN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return sr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=QE(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){sr()}setLayout(e,n,r){let i;if(e)i=QE(e);else{for(let a=0;a<r;++a){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=ak(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();EI(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=qh(this.getExtent()));const i=this.getFlatCoordinates();if(i){const a=this.getStride();sk(i,0,i.length,a,e,n,r,i),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();nk(r,0,r.length,i,e,n,r),this.changed()}}}function ak(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function QE(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function lk(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return Qu(r,0,r.length,i,e,n)}function DI(t,e,n,r){let i=0;const a=t[n-r],o=t[n-r+1];let c=0,u=0;for(;e<n;e+=r){const h=t[e]-a,m=t[e+1]-o;i+=u*h-c*m,c=h,u=m}return i/2}function ok(t,e,n,r){let i=0;for(let a=0,o=n.length;a<o;++a){const c=n[a];i+=DI(t,e,c,r),e=c}return i}function YE(t,e,n,r,i,a,o){const c=t[e],u=t[e+1],h=t[n]-c,m=t[n+1]-u;let _;if(h===0&&m===0)_=e;else{const p=((i-c)*h+(a-u)*m)/(h*h+m*m);if(p>1)_=n;else if(p>0){for(let g=0;g<r;++g)o[g]=co(t[e+g],t[n+g],p);o.length=r;return}else _=e}for(let p=0;p<r;++p)o[p]=t[_+p];o.length=r}function RI(t,e,n,r,i){let a=t[e],o=t[e+1];for(e+=r;e<n;e+=r){const c=t[e],u=t[e+1],h=Pf(a,o,c,u);h>i&&(i=h),a=c,o=u}return i}function ck(t,e,n,r,i){for(let a=0,o=n.length;a<o;++a){const c=n[a];i=RI(t,e,c,r,i),e=c}return i}function TI(t,e,n,r,i,a,o,c,u,h,m){if(e==n)return h;let _,p;if(i===0){if(p=Pf(o,c,t[e],t[e+1]),p<h){for(_=0;_<r;++_)u[_]=t[e+_];return u.length=r,p}return h}m=m||[NaN,NaN];let g=e+r;for(;g<n;)if(YE(t,g-r,g,r,o,c,m),p=Pf(o,c,m[0],m[1]),p<h){for(h=p,_=0;_<r;++_)u[_]=m[_];u.length=r,g+=r}else g+=r*Math.max((Math.sqrt(p)-Math.sqrt(h))/i|0,1);if(YE(t,n-r,e,r,o,c,m),p=Pf(o,c,m[0],m[1]),p<h){for(h=p,_=0;_<r;++_)u[_]=m[_];u.length=r}return h}function dk(t,e,n,r,i,a,o,c,u,h,m){m=m||[NaN,NaN];for(let _=0,p=n.length;_<p;++_){const g=n[_];h=TI(t,e,g,r,i,a,o,c,u,h,m),e=g}return h}function uk(t,e,n,r){for(let i=0,a=n.length;i<a;++i)t[e++]=n[i];return e}function MI(t,e,n,r){for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let c=0;c<r;++c)t[e++]=o[c]}return e}function hk(t,e,n,r,i){i=i||[];let a=0;for(let o=0,c=n.length;o<c;++o){const u=MI(t,e,n[o],r);i[a++]=u,e=u}return i.length=a,i}function Df(t,e,n,r,i){i=i!==void 0?i:[];let a=0;for(let o=e;o<n;o+=r)i[a++]=t.slice(o,o+r);return i.length=a,i}function Jp(t,e,n,r,i){i=i!==void 0?i:[];let a=0;for(let o=0,c=n.length;o<c;++o){const u=n[o];i[a++]=Df(t,e,u,r,i[a]),e=u}return i.length=a,i}function $E(t,e,n,r,i){i=i!==void 0?i:[];let a=0;for(let o=0,c=n.length;o<c;++o){const u=n[o];i[a++]=u.length===1&&u[0]===e?[]:Jp(t,e,u,r,i[a]),e=u[u.length-1]}return i.length=a,i}function vN(t,e,n,r,i,a,o){const c=(n-e)/r;if(c<3){for(;e<n;e+=r)a[o++]=t[e],a[o++]=t[e+1];return o}const u=new Array(c);u[0]=1,u[c-1]=1;const h=[e,n-r];let m=0;for(;h.length>0;){const _=h.pop(),p=h.pop();let g=0;const C=t[p],y=t[p+1],N=t[_],v=t[_+1];for(let P=p+r;P<_;P+=r){const w=t[P],M=t[P+1],k=d8(w,M,C,y,N,v);k>g&&(m=P,g=k)}g>i&&(u[(m-e)/r]=1,p+r<m&&h.push(p,m),m+r<_&&h.push(m,_))}for(let _=0;_<c;++_)u[_]&&(a[o++]=t[e+_*r],a[o++]=t[e+_*r+1]);return o}function fk(t,e,n,r,i,a,o,c){for(let u=0,h=n.length;u<h;++u){const m=n[u];o=vN(t,e,m,r,i,a,o),c.push(o),e=m}return o}function Sh(t,e){return e*Math.round(t/e)}function mk(t,e,n,r,i,a,o){if(e==n)return o;let c=Sh(t[e],i),u=Sh(t[e+1],i);e+=r,a[o++]=c,a[o++]=u;let h,m;do if(h=Sh(t[e],i),m=Sh(t[e+1],i),e+=r,e==n)return a[o++]=h,a[o++]=m,o;while(h==c&&m==u);for(;e<n;){const _=Sh(t[e],i),p=Sh(t[e+1],i);if(e+=r,_==h&&p==m)continue;const g=h-c,C=m-u,y=_-c,N=p-u;if(g*N==C*y&&(g<0&&y<g||g==y||g>0&&y>g)&&(C<0&&N<C||C==N||C>0&&N>C)){h=_,m=p;continue}a[o++]=h,a[o++]=m,c=h,u=m,h=_,m=p}return a[o++]=h,a[o++]=m,o}function II(t,e,n,r,i,a,o,c){for(let u=0,h=n.length;u<h;++u){const m=n[u];o=mk(t,e,m,r,i,a,o),c.push(o),e=m}return o}class Jg extends SN{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new Jg(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<iI(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(RI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),TI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return DI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Df(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=vN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Jg(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=MI(this.flatCoordinates,0,e,this.stride),this.changed()}}let vh=class jI extends SN{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new jI(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const a=this.flatCoordinates,o=Pf(e,n,a[0],a[1]);if(o<i){const c=this.stride;for(let u=0;u<c;++u)r[u]=a[u];return r.length=c,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return lI(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return aI(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uk(this.flatCoordinates,0,e,this.stride),this.changed()}};function gk(t,e,n,r,i){return!cI(i,function(o){return!Oh(t,e,n,r,o[0],o[1])})}function Oh(t,e,n,r,i,a){let o=0,c=t[n-r],u=t[n-r+1];for(;e<n;e+=r){const h=t[e],m=t[e+1];u<=a?m>a&&(h-c)*(a-u)-(i-c)*(m-u)>0&&o++:m<=a&&(h-c)*(a-u)-(i-c)*(m-u)<0&&o--,c=h,u=m}return o!==0}function OI(t,e,n,r,i,a){if(n.length===0||!Oh(t,e,n[0],r,i,a))return!1;for(let o=1,c=n.length;o<c;++o)if(Oh(t,n[o-1],n[o],r,i,a))return!1;return!0}function EN(t,e,n,r,i,a,o){let c,u,h,m,_,p,g;const C=i[a+1],y=[];for(let P=0,w=n.length;P<w;++P){const M=n[P];for(m=t[M-r],p=t[M-r+1],c=e;c<M;c+=r)_=t[c],g=t[c+1],(C<=p&&g<=C||p<=C&&C<=g)&&(h=(C-p)/(g-p)*(_-m)+m,y.push(h)),m=_,p=g}let N=NaN,v=-1/0;for(y.sort(Cd),m=y[0],c=1,u=y.length;c<u;++c){_=y[c];const P=Math.abs(_-m);P>v&&(h=(m+_)/2,OI(t,e,n,r,h,C)&&(N=h,v=P)),m=_}return isNaN(N)&&(N=i[a]),o?(o.push(N,C,v),o):[N,C,v]}function _k(t,e,n,r,i){let a=[];for(let o=0,c=n.length;o<c;++o){const u=n[o];a=EN(t,e,u,r,i,2*o,a),e=u[u.length-1]}return a}function xk(t,e,n,r,i){let a;for(e+=r;e<n;e+=r)if(a=i(t.slice(e-r,e),t.slice(e,e+r)),a)return a;return!1}function wI(t,e,n,r,i,a){return a=a??oI(So(),t,e,n,r),vl(i,a)?a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:xk(t,e,n,r,function(o,c){return x8(i,o,c)}):!1}function LI(t,e,n,r,i){return!!(wI(t,e,n,r,i)||Oh(t,e,n,r,i[0],i[1])||Oh(t,e,n,r,i[0],i[3])||Oh(t,e,n,r,i[2],i[1])||Oh(t,e,n,r,i[2],i[3]))}function pk(t,e,n,r,i){if(!LI(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let a=1,o=n.length;a<o;++a)if(gk(t,n[a-1],n[a],r,i)&&!wI(t,n[a-1],n[a],r,i))return!1;return!0}function yk(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){const a=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=a}e+=r,n-=r}}function DN(t,e,n,r){let i=0,a=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const c=t[e],u=t[e+1];i+=(c-a)*(u+o),a=c,o=u}return i===0?void 0:i>0}function bk(t,e,n,r,i){i=i!==void 0?i:!1;for(let a=0,o=n.length;a<o;++a){const c=n[a],u=DN(t,e,c,r);if(a===0){if(i&&u||!i&&!u)return!1}else if(i&&!u||!i&&u)return!1;e=c}return!0}function VE(t,e,n,r,i){i=i!==void 0?i:!1;for(let a=0,o=n.length;a<o;++a){const c=n[a],u=DN(t,e,c,r);(a===0?i&&u||!i&&!u:i&&!u||!i&&u)&&yk(t,e,c,r),e=c}return e}function Ck(t,e){const n=[];let r=0,i=0,a;for(let o=0,c=e.length;o<c;++o){const u=e[o],h=DN(t,r,u,2);if(a===void 0&&(a=h),h===a)n.push(e.slice(i,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=o+1,r=u}return n}class Zg extends SN{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?hN(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Zg(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<iI(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ck(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dk(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return OI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return ok(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),VE(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,Jp(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=qh(this.getExtent());this.flatInteriorPoint_=EN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new vh(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Jg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[];let a=0;for(let o=0,c=r.length;o<c;++o){const u=r[o],h=new Jg(n.slice(a,u),e);i.push(h),a=u}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;bk(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=VE(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=II(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new Zg(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return pk(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=hk(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function zE(t){if(S_(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],a=[e,n,e,i,r,i,r,n,e,n];return new Zg(a,"XY",[a.length])}function RN(t,e,n,r){const i=ur(e)/n[0],a=Xa(e)/n[1];return r?Math.min(t,Math.max(i,a)):Math.min(t,Math.min(i,a))}function TN(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),Ur(r,n/2,e*2)}function Nk(t,e,n,r){return e=e!==void 0?e:!0,(function(i,a,o,c){if(i!==void 0){const u=t[0],h=t[t.length-1],m=n?RN(u,n,o,r):u;if(c)return e?TN(i,m,h):Ur(i,h,m);const _=Math.min(m,i),p=Math.floor(uN(t,_,a));return t[p]>m&&p<t.length-1?t[p+1]:t[p]}})}function Sk(t,e,n,r,i,a){return r=r!==void 0?r:!0,n=n!==void 0?n:0,(function(o,c,u,h){if(o!==void 0){const m=i?RN(e,i,u,a):e;if(h)return r?TN(o,m,n):Ur(o,n,m);const _=1e-9,p=Math.ceil(Math.log(e/m)/Math.log(t)-_),g=-c*(.5-_)+.5,C=Math.min(m,o),y=Math.floor(Math.log(e/C)/Math.log(t)+g),N=Math.max(p,y),v=e/Math.pow(t,N);return Ur(v,n,m)}})}function HE(t,e,n,r,i){return n=n!==void 0?n:!0,(function(a,o,c,u){if(a!==void 0){const h=r?RN(t,r,c,i):t;return!n||!u?Ur(a,e,h):TN(a,h,e)}})}function MN(t){if(t!==void 0)return 0}function qE(t){if(t!==void 0)return t}function vk(t){const e=2*Math.PI/t;return(function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n})}function Ek(t){const e=Ku(5);return(function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n})}const Dk=42,IN=256,Ib=0;class Jo extends Bc{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=bN(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&NI(),e.center&&(e.center=fd(e.center,this.projection_)),e.extent&&(e.extent=Au(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const c in $o)delete n[c];this.setProperties(n,!0);const r=Tk(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=Rk(e),a=r.constraint,o=Mk(e);this.constraints_={center:i,resolution:a,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];n=n||[0,0,0,0];const a=this.getResolution(),o=a/2*(i[3]-n[3]+n[1]-i[1]),c=a/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-c])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=fd(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=fd(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const m=arguments[i];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(i===n){r&&Bx(r,!0);return}let a=Date.now(),o=this.targetCenter_.slice(),c=this.targetResolution_,u=this.targetRotation_;const h=[];for(;i<n;++i){const m=arguments[i],_={start:a,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||C8,callback:r};if(m.center&&(_.sourceCenter=o,_.targetCenter=m.center.slice(),o=_.targetCenter),m.zoom!==void 0?(_.sourceResolution=c,_.targetResolution=this.getResolutionForZoom(m.zoom),c=_.targetResolution):m.resolution&&(_.sourceResolution=c,_.targetResolution=m.resolution,c=_.targetResolution),m.rotation!==void 0){_.sourceRotation=u;const p=Af(m.rotation-u+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=u+p,u=_.targetRotation}Ik(_)?_.complete=!0:a+=_.duration,h.push(_)}this.animations_.push(h),this.setHint(ka.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ka.ANIMATING]>0}getInteracting(){return this.hints_[ka.INTERACTING]>0}cancelAnimations(){this.setHint(ka.ANIMATING,-this.hints_[ka.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){const i=this.animations_[n];if(i[0].callback&&Bx(i[0].callback,!1),!e)for(let a=0,o=i.length;a<o;++a){const c=i[a];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let a=!0;for(let o=0,c=i.length;o<c;++o){const u=i[o];if(u.complete)continue;const h=e-u.start;let m=u.duration>0?h/u.duration:1;m>=1?(u.complete=!0,m=1):a=!1;const _=u.easing(m);if(u.sourceCenter){const p=u.sourceCenter[0],g=u.sourceCenter[1],C=u.targetCenter[0],y=u.targetCenter[1];this.nextCenter_=u.targetCenter;const N=p+_*(C-p),v=g+_*(y-g);this.targetCenter_=[N,v]}if(u.sourceResolution&&u.targetResolution){const p=_===1?u.targetResolution:u.sourceResolution+_*(u.targetResolution-u.sourceResolution);if(u.anchor){const g=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(p,0,g,!0);this.targetCenter_=this.calculateCenterZoom(C,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){const p=_===1?Af(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+_*(u.targetRotation-u.sourceRotation);if(u.anchor){const g=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(g,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),n=!0,!u.complete)break}if(a){this.animations_[r]=null,this.setHint(ka.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&Bx(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],gN(r,e-this.getRotation()),p8(r,n)),r}calculateCenterZoom(e,n){let r;const i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){const o=n[0]-e*(n[0]-i[0])/a,c=n[1]-e*(n[1]-i[1])/a;r=[o,c]}return r}getViewportSize_(e){const n=this.viewportSize_;if(e){const r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&o2(e,this.getProjection())}getCenterInternal(){return this.get($o.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return SI(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();_r(n,"The view center is not defined");const r=this.getResolution();_r(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return _r(i!==void 0,"The view rotation is not defined"),n2(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get($o.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Au(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const r=ur(e)/n[0],i=Xa(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return(function(a){return n/Math.pow(e,a*i)})}getRotation(){return this.get($o.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(r/i)/n;return(function(o){return Math.log(r/o)/n/a})}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const a=this.padding_;if(a){const o=this.getViewportSizeMinusPadding_();i=jb(i,this.getViewportSize_(),[o[0]/2+a[3],o[1]/2+a[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){const a=uN(this.resolutions_,e,1);n=a,r=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=r/this.resolutions_[a+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var n;if((n=this.resolutions_)!=null&&n.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=Ur(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,Ur(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if(_r(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){_r(!S_(e),"Cannot fit empty extent provided as `geometry`");const i=Au(e,this.getProjection());r=zE(i)}else if(e.getType()==="Circle"){const i=Au(e.getExtent(),this.getProjection());r=zE(i),r.rotate(this.getRotation(),qh(i))}else r=e;this.fitInternal(r,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),a=e.getFlatCoordinates(),o=e.getStride();let c=1/0,u=1/0,h=-1/0,m=-1/0;for(let _=0,p=a.length;_<p;_+=o){const g=a[_]*r-a[_+1]*i,C=a[_]*i+a[_+1]*r;c=Math.min(c,g),u=Math.min(u,C),h=Math.max(h,g),m=Math.max(m,C)}return[c,u,h,m]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const i=n.padding!==void 0?n.padding:[0,0,0,0],a=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const c=this.rotatedExtentForGeometry(e);let u=this.getResolutionForExtentInternal(c,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);u=isNaN(u)?o:Math.max(u,o),u=this.getConstrainedResolution(u,a?0:1);const h=this.getRotation(),m=Math.sin(h),_=Math.cos(h),p=qh(c);p[0]+=(i[1]-i[3])/2*u,p[1]+=(i[0]-i[2])/2*u;const g=p[0]*_-p[1]*m,C=p[1]*_+p[0]*m,y=this.getConstrainedCenter([g,C],u),N=n.callback?n.callback:qg;n.duration!==void 0?this.animateInternal({resolution:u,center:y,duration:n.duration,easing:n.easing},N):(this.targetResolution_=u,this.targetCenter_=y,this.applyTargetState_(!1,!0),Bx(N,!0))}centerOn(e,n,r){this.centerOnInternal(fd(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(jb(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let a;const o=this.padding_;if(o&&e){const c=this.getViewportSizeMinusPadding_(-r),u=jb(e,i,[c[0]/2+o[3],c[1]/2+o[0]],n,r);a=[e[0]-u[0],e[1]-u[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=o2(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&fd(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=fd(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fd(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),a=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,a,r),c=this.constraints_.center(this.targetCenter_,o,a,r,this.calculateCenterShift(this.targetCenter_,o,i,a));this.get($o.ROTATION)!==i&&this.set($o.ROTATION,i),this.get($o.RESOLUTION)!==o&&(this.set($o.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!c||!this.get($o.CENTER)||!Vp(this.get($o.CENTER),c))&&this.set($o.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;const i=n||0,a=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(a),c=this.constraints_.resolution(this.targetResolution_,i,o),u=this.constraints_.center(this.targetCenter_,c,o,!1,this.calculateCenterShift(this.targetCenter_,c,a,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=a,this.targetCenter_=u,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==a||!this.getCenterInternal()||!Vp(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:u,resolution:c,duration:e,easing:pm,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ka.INTERACTING,1)}endInteraction(e,n,r){r=r&&fd(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(ka.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}}function Bx(t,e){setTimeout(function(){t(e)},0)}function Rk(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return OE(t.extent,t.constrainOnlyCenter,n)}const e=bN(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,OE(n,!1,!1)}return h8}function Tk(t){let e,n,r,o=t.minZoom!==void 0?t.minZoom:Ib,c=t.maxZoom!==void 0?t.maxZoom:28;const u=t.zoomFactor!==void 0?t.zoomFactor:2,h=t.multiWorld!==void 0?t.multiWorld:!1,m=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,_=t.showFullExtent!==void 0?t.showFullExtent:!1,p=bN(t.projection,"EPSG:3857"),g=p.getExtent();let C=t.constrainOnlyCenter,y=t.extent;if(!h&&!y&&p.isGlobal()&&(C=!1,y=g),t.resolutions!==void 0){const N=t.resolutions;n=N[o],r=N[c]!==void 0?N[c]:N[N.length-1],t.constrainResolution?e=Nk(N,m,!C&&y,_):e=HE(n,r,m,!C&&y,_)}else{const v=(g?Math.max(ur(g),Xa(g)):360*_N.degrees/p.getMetersPerUnit())/IN/Math.pow(2,Ib),P=v/Math.pow(2,28-Ib);n=t.maxResolution,n!==void 0?o=0:n=v/Math.pow(u,o),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(u,c):r=v/Math.pow(u,c):r=P),c=o+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,c-o),t.constrainResolution?e=Sk(u,n,r,m,!C&&y,_):e=HE(n,r,m,!C&&y,_)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:o,zoomFactor:u}}function Mk(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?Ek():n===!1?qE:typeof n=="number"?vk(n):qE}return MN}function Ik(t){return!(t.sourceCenter&&t.targetCenter&&!Vp(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function jb(t,e,n,r,i){const a=Math.cos(-i);let o=Math.sin(-i),c=t[0]*a-t[1]*o,u=t[1]*a+t[0]*o;c+=(e[0]/2-n[0])*r,u+=(n[1]-e[1]/2)*r,o=-o;const h=c*a-u*o,m=u*a+c*o;return[h,m]}const Gx="ol-hidden",B1="ol-unselectable",jN="ol-control",XE="ol-collapsed",jk=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),JE=["style","variant","weight","size","lineHeight","family"],d2={normal:400,bold:700},u2=function(t){const e=t.match(jk);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=JE.length;r<i;++r){const a=e[r+1];a!==void 0&&(n[JE[r]]=typeof a=="string"?a.trim():a)}return isNaN(Number(n.weight))&&n.weight in d2&&(n.weight=d2[n.weight]),n.families=n.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),n};function Bi(t,e,n,r){let i;return n&&n.length?i=n.shift():mo?i=new class extends OffscreenCanvas{constructor(){super(...arguments);cr(this,"style",{})}}(t??300,e??150):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}let Ob;function Zp(){return Ob||(Ob=Bi(1,1)),Ob}function G1(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function ZE(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function Ok(t){for(;t.lastChild;)t.lastChild.remove()}function wk(t,e){const n=t.childNodes;for(let r=0;;++r){const i=n[r],a=e[r];if(!i&&!a)break;if(i!==a){if(!i){t.appendChild(a);continue}if(!a){t.removeChild(i),--r;continue}t.insertBefore(a,i)}}}function PI(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const n=this.childNodes.indexOf(e);if(n===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(n,1),e},insertBefore:function(e,n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,n,r){return n==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,n,r)}})}function ku(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}class ON extends Bc{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var n;this.map_&&((n=this.element)==null||n.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)ei(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==qg&&this.listenerKeys.push(nr(e,vu.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Lk extends ON{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",a=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=o):this.collapseLabel_=a;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=i):this.label_=c;const u=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(u),this.toggleButton_.addEventListener(In.CLICK,this.handleClick_.bind(this),!1);const h=n+" "+B1+" "+jN+(this.collapsed_&&this.collapsible_?" "+XE:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=h,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),r=new Set(n.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!n.some(a=>{var o;return((o=a.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(i=>e8(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Zu(n,this.renderedAttributions_)){Ok(this.ulElement_);for(let i=0,a=n.length;i<a;++i){const o=document.createElement("li");o.innerHTML=n[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(XE),this.collapsed_?ZE(this.collapseLabel_,this.label_):ZE(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Pk extends ON{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const a=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=a,o.appendChild(this.label_),o.addEventListener(In.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+B1+" "+jN,u=this.element;u.className=c,u.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Gx)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:pm}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const a=this.element.classList.contains(Gx);!a&&r===0?this.element.classList.add(Gx):a&&r!==0&&this.element.classList.remove(Gx)}this.label_.style.transform=i}this.rotation_=r}}class Ak extends ON{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",a=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",u=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=i,m.setAttribute("type","button"),m.title=u,m.appendChild(typeof o=="string"?document.createTextNode(o):o),m.addEventListener(In.CLICK,this.handleClick_.bind(this,r),!1);const _=document.createElement("button");_.className=a,_.setAttribute("type","button"),_.title=h,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(In.CLICK,this.handleClick_.bind(this,-r),!1);const p=n+" "+B1+" "+jN,g=this.element;g.className=p,g.appendChild(m),g.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const a=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:a,duration:this.duration_,easing:pm})):r.setZoom(a)}}}function kk(t){t=t||{};const e=new fo;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new Ak(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new Pk(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new Lk(t.attributionOptions)),e}class Uk{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;const a=this.points_[n]-this.points_[r],o=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const eD={ACTIVE:"active"};class E_ extends Bc{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(eD.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(eD.ACTIVE,e)}setMap(e){this.map_=e}}function Bk(t,e,n){const r=t.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:N8,center:t.getConstrainedCenter(i)})}}function wN(t,e,n,r){const i=t.getZoom();if(i===void 0)return;const a=t.getConstrainedZoom(i+e),o=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:r!==void 0?r:250,easing:pm})}class Gk extends E_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==pi.DBLCLICK){const r=e.originalEvent,i=e.map,a=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,c=i.getView();wN(c,o,a,this.duration_),r.preventDefault(),n=!0}return!n}}function h2(t){const e=arguments;return function(n){let r=!0;for(let i=0,a=e.length;i<a&&(r=r&&e[i](n),!!r);++i);return r}}const Wk=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Fk=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),r=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):e.contains(r)},AI=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?Fk(t):!0},Kk=Hg,kI=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(r8&&tI&&e.ctrlKey)},UI=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Qk=function(t){const e=t.originalEvent;return tI?e.metaKey:e.ctrlKey},Yk=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},BI=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},wb=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},$k=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class D_ extends E_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==pi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==pi.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==pi.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==pi.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function LN(t){const e=t.length;let n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}class Vk extends D_{constructor(e){super({stopDown:M1}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:h2(UI,$k);this.condition_=e.onFocusOnly?h2(AI,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,i=n.getEventPixel(LN(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const a=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],c=e.map.getView();y8(a,c.getResolution()),gN(a,c.getRotation()),c.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),o=r.getCenterInternal(),c=n.getPixelFromCoordinateInternal(o),u=n.getCoordinateFromPixelInternal([c[0]-i*Math.cos(a),c[1]-i*Math.sin(a)]);r.animateInternal({center:r.getConstrainedCenter(u),duration:500,easing:pm})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class zk extends D_{constructor(e){e=e||{},super({stopDown:M1}),this.condition_=e.condition?e.condition:Wk,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!wb(e))return;const n=e.map,r=n.getView();if(r.getConstraints().rotation===MN)return;const i=n.getSize(),a=e.pixel,o=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;r.adjustRotationInternal(-c)}this.lastAngle_=o}handleUpEvent(e){return wb(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return wb(e)&&kI(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Hk extends T1{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Zg([i])}getGeometry(){return this.geometry_}}const nf={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ug extends Od{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}}class qk extends D_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Hk(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??kI,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){const i=r[0]-n[0],a=r[1]-n[1];return i*i+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ug(nf.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new ug(n?nf.BOXEND:nf.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ug(nf.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ug(nf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ug(nf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Xk extends qk{constructor(e){e=e||{};const n=e.condition?e.condition:Yk;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const a=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(a),c=r.getResolution()/o;i=i.clone(),i.scale(c*c)}r.fitInternal(i,{duration:this.duration_,easing:pm})}}const bh={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Jk extends E_{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return UI(n)&&BI(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==In.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==bh.DOWN||i==bh.LEFT||i==bh.RIGHT||i==bh.UP)){const o=e.map.getView(),c=o.getResolution()*this.pixelDelta_;let u=0,h=0;i==bh.DOWN?h=-c:i==bh.LEFT?u=-c:i==bh.RIGHT?u=c:h=c;const m=[u,h];gN(m,o.getRotation()),Bk(o,m,this.duration_),r.preventDefault(),n=!0}}return!n}}class Zk extends E_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!Qk(n)&&BI(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==In.KEYDOWN||e.type==In.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const a=e.map,o=i==="+"?this.delta_:-this.delta_,c=a.getView();wN(c,o,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}const e7=40,t7=300;class s7 extends E_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:Kk;this.condition_=e.onFocusOnly?h2(AI,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==In.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let a=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:a*=e7;break;case WheelEvent.DOM_DELTA_PAGE:a*=t7;break}if(a===0)return!1;this.lastDelta_=a;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const c=r.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=a;const u=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),u),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-Ur(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),wN(n,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class n7 extends D_{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=M1),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const r=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=a;const o=e.map,c=o.getView();c.getConstraints().rotation!==MN&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(LN(this.targetPointers))),this.rotating_&&(o.render(),c.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class r7 extends D_{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=M1),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],a=r.clientX-i.clientX,o=r.clientY-i.clientY,c=Math.sqrt(a*a+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/c),this.lastDistance_=c;const u=e.map,h=u.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(LN(this.targetPointers))),u.render(),h.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function i7(t){t=t||{};const e=new fo,n=new Uk(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new zk),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new Gk({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new Vk({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new n7),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new r7({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new Jk),e.push(new Zk({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new s7({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new Xk({duration:t.zoomDuration})),e}const Cr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class GI extends Bc{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[Cr.OPACITY]=e.opacity!==void 0?e.opacity:1,_r(typeof n[Cr.OPACITY]=="number","Layer opacity must be a number"),n[Cr.VISIBLE]=e.visible!==void 0?e.visible:!0,n[Cr.Z_INDEX]=e.zIndex,n[Cr.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[Cr.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[Cr.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[Cr.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=Ur(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return sr()}getLayerStatesArray(e){return sr()}getExtent(){return this.get(Cr.EXTENT)}getMaxResolution(){return this.get(Cr.MAX_RESOLUTION)}getMinResolution(){return this.get(Cr.MIN_RESOLUTION)}getMinZoom(){return this.get(Cr.MIN_ZOOM)}getMaxZoom(){return this.get(Cr.MAX_ZOOM)}getOpacity(){return this.get(Cr.OPACITY)}getSourceState(){return sr()}getVisible(){return this.get(Cr.VISIBLE)}getZIndex(){return this.get(Cr.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Cr.EXTENT,e)}setMaxResolution(e){this.set(Cr.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Cr.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Cr.MAX_ZOOM,e)}setMinZoom(e){this.set(Cr.MIN_ZOOM,e)}setOpacity(e){_r(typeof e=="number","Layer opacity must be a number"),this.set(Cr.OPACITY,e)}setVisible(e){this.set(Cr.VISIBLE,e)}setZIndex(e){this.set(Cr.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const hu={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Eu extends Od{constructor(e,n){super(e),this.layer=n}}const Lb={LAYERS:"layers"};class ym extends GI{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Lb.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new fo(r.slice(),{unique:!0}):_r(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new fo(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ei),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(nr(e,Cl.ADD,this.handleLayersAdd_,this),nr(e,Cl.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(ei);C_(this.listenerKeys_);const n=e.getArray();for(let r=0,i=n.length;r<i;r++){const a=n[r];this.registerLayerListeners_(a),this.dispatchEvent(new Eu(hu.ADDLAYER,a))}this.changed()}registerLayerListeners_(e){const n=[nr(e,lm.PROPERTYCHANGE,this.handleLayerChange_,this),nr(e,In.CHANGE,this.handleLayerChange_,this)];e instanceof ym&&n.push(nr(e,hu.ADDLAYER,this.handleLayerGroupAdd_,this),nr(e,hu.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[rr(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new Eu(hu.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Eu(hu.REMOVELAYER,e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new Eu(hu.ADDLAYER,n)),this.changed()}handleLayersRemove_(e){const n=e.element,r=rr(n);this.listenerKeys_[r].forEach(ei),delete this.listenerKeys_[r],this.dispatchEvent(new Eu(hu.REMOVELAYER,n)),this.changed()}getLayers(){return this.get(Lb.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const r=n.getArray();for(let i=0,a=r.length;i<a;++i)this.dispatchEvent(new Eu(hu.REMOVELAYER,r[i]))}this.set(Lb.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const i=this.getLayerState();let a=i.zIndex;!e&&i.zIndex===void 0&&(a=0);for(let o=r,c=n.length;o<c;o++){const u=n[o];u.opacity*=i.opacity,u.visible=u.visible&&i.visible,u.maxResolution=Math.min(u.maxResolution,i.maxResolution),u.minResolution=Math.max(u.minResolution,i.minResolution),u.minZoom=Math.max(u.minZoom,i.minZoom),u.maxZoom=Math.min(u.maxZoom,i.maxZoom),i.extent!==void 0&&(u.extent!==void 0?u.extent=Qh(u.extent,i.extent):u.extent=i.extent),u.zIndex===void 0&&(u.zIndex=a)}return n}getSourceState(){return"ready"}}const go={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class W1 extends GI{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Cr.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Cr.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ei(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=nr(e,In.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Jo?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(n.layerStatesArray){if(i=n.layerStatesArray.find(o=>o.layer===this),!i)return!1}else i=this.getLayerState();const a=this.getExtent();return PN(i,n.viewState)&&(!a||vl(a,n.extent))}getAttributions(e){var a;if(!this.isVisible(e))return[];const n=(a=this.getSource())==null?void 0:a.getAttributions();if(!n)return[];const r=e instanceof Jo?e.getViewStateAndExtent():e;let i=n(r);return Array.isArray(i)||(i=[i]),i}render(e,n){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Cr.MAP,e)}getMapInternal(){return this.get(Cr.MAP)}setMap(e){this.mapPrecomposeKey_&&(ei(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ei(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=nr(e,go.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=nr(this,In.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,r=this.getLayerState(!1);_r(!n.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}setSource(e){this.set(Cr.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function PN(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}function WI(t,e,n=0,r=t.length-1,i=a7){for(;r>n;){if(r-n>600){const u=r-n+1,h=e-n+1,m=Math.log(u),_=.5*Math.exp(2*m/3),p=.5*Math.sqrt(m*_*(u-_)/u)*(h-u/2<0?-1:1),g=Math.max(n,Math.floor(e-h*_/u+p)),C=Math.min(r,Math.floor(e+(u-h)*_/u+p));WI(t,e,g,C,i)}const a=t[e];let o=n,c=r;for(hg(t,n,e),i(t[r],a)>0&&hg(t,n,r);o<c;){for(hg(t,o,c),o++,c--;i(t[o],a)<0;)o++;for(;i(t[c],a)>0;)c--}i(t[n],a)===0?hg(t,n,c):(c++,hg(t,c,r)),c<=e&&(n=c+1),e<=c&&(r=c-1)}}function hg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function a7(t,e){return t<e?-1:t>e?1:0}let FI=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!Fx(e,n))return r;const i=this.toBBox,a=[];for(;n;){for(let o=0;o<n.children.length;o++){const c=n.children[o],u=n.leaf?i(c):c;Fx(e,u)&&(n.leaf?r.push(c):Ab(e,u)?this._all(c,r):a.push(c))}n=a.pop()}return r}collides(e){let n=this.data;if(!Fx(e,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const a=n.children[i],o=n.leaf?this.toBBox(a):a;if(Fx(e,o)){if(n.leaf||Ab(e,o))return!0;r.push(a)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=yf([]),this}remove(e,n){if(!e)return this;let r=this.data;const i=this.toBBox(e),a=[],o=[];let c,u,h;for(;r||a.length;){if(r||(r=a.pop(),u=a[a.length-1],c=o.pop(),h=!0),r.leaf){const m=l7(e,r.children,n);if(m!==-1)return r.children.splice(m,1),a.push(r),this._condense(a),this}!h&&!r.leaf&&Ab(r,i)?(a.push(r),o.push(c),c=0,u=r,r=r.children[0]):u?(c++,r=u.children[c],h=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,i){const a=r-n+1;let o=this._maxEntries,c;if(a<=o)return c=yf(e.slice(n,r+1)),rf(c,this.toBBox),c;i||(i=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,i-1))),c=yf([]),c.leaf=!1,c.height=i;const u=Math.ceil(a/o),h=u*Math.ceil(Math.sqrt(o));tD(e,n,r,h,this.compareMinX);for(let m=n;m<=r;m+=h){const _=Math.min(m+h-1,r);tD(e,m,_,u,this.compareMinY);for(let p=m;p<=_;p+=u){const g=Math.min(p+u-1,_);c.children.push(this._build(e,p,g,i-1))}}return rf(c,this.toBBox),c}_chooseSubtree(e,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let a=1/0,o=1/0,c;for(let u=0;u<n.children.length;u++){const h=n.children[u],m=Pb(h),_=d7(e,h)-m;_<o?(o=_,a=m<a?m:a,c=h):_===o&&m<a&&(a=m,c=h)}n=c||n.children[0]}return n}_insert(e,n,r){const i=r?e:this.toBBox(e),a=[],o=this._chooseSubtree(i,this.data,n,a);for(o.children.push(e),Sg(o,i);n>=0&&a[n].children.length>this._maxEntries;)this._split(a,n),n--;this._adjustParentBBoxes(i,a,n)}_split(e,n){const r=e[n],i=r.children.length,a=this._minEntries;this._chooseSplitAxis(r,a,i);const o=this._chooseSplitIndex(r,a,i),c=yf(r.children.splice(o,r.children.length-o));c.height=r.height,c.leaf=r.leaf,rf(r,this.toBBox),rf(c,this.toBBox),n?e[n-1].children.push(c):this._splitRoot(r,c)}_splitRoot(e,n){this.data=yf([e,n]),this.data.height=e.height+1,this.data.leaf=!1,rf(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,a=1/0,o=1/0;for(let c=n;c<=r-n;c++){const u=Ng(e,0,c,this.toBBox),h=Ng(e,c,r,this.toBBox),m=u7(u,h),_=Pb(u)+Pb(h);m<a?(a=m,i=c,o=_<o?_:o):m===a&&_<o&&(o=_,i=c)}return i||r-n}_chooseSplitAxis(e,n,r){const i=e.leaf?this.compareMinX:o7,a=e.leaf?this.compareMinY:c7,o=this._allDistMargin(e,n,r,i),c=this._allDistMargin(e,n,r,a);o<c&&e.children.sort(i)}_allDistMargin(e,n,r,i){e.children.sort(i);const a=this.toBBox,o=Ng(e,0,n,a),c=Ng(e,r-n,r,a);let u=Wx(o)+Wx(c);for(let h=n;h<r-n;h++){const m=e.children[h];Sg(o,e.leaf?a(m):m),u+=Wx(o)}for(let h=r-n-1;h>=n;h--){const m=e.children[h];Sg(c,e.leaf?a(m):m),u+=Wx(c)}return u}_adjustParentBBoxes(e,n,r){for(let i=r;i>=0;i--)Sg(n[i],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():rf(e[n],this.toBBox)}};function l7(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function rf(t,e){Ng(t,0,t.children.length,e,t)}function Ng(t,e,n,r,i){i||(i=yf(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let a=e;a<n;a++){const o=t.children[a];Sg(i,t.leaf?r(o):o)}return i}function Sg(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o7(t,e){return t.minX-e.minX}function c7(t,e){return t.minY-e.minY}function Pb(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Wx(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d7(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function u7(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),a=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function Ab(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Fx(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function yf(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function tD(t,e,n,r,i){const a=[e,n];for(;a.length;){if(n=a.pop(),e=a.pop(),n-e<=r)continue;const o=e+Math.ceil((n-e)/r/2)*r;WI(t,o,e,n,i),a.push(e,o,o,n)}}const AN=[NaN,NaN,NaN,0];let kb;function h7(){return kb||(kb=Bi(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),kb}const f7=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,m7=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,g7=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,_7=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Kx(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function kg(t){throw new Error('failed to parse "'+t+'" as color')}function KI(t){if(t.toLowerCase().startsWith("rgb")){const a=t.match(m7)||t.match(f7)||t.match(g7);if(a){const o=a[4],c=100/255;return[Ur(Kx(a[1],c)+.5|0,0,255),Ur(Kx(a[2],c)+.5|0,0,255),Ur(Kx(a[3],c)+.5|0,0,255),o!==void 0?Ur(Kx(o,100),0,1):1]}kg(t)}if(t.startsWith("#")){if(_7.test(t)){const a=t.substring(1),o=a.length<=4?1:2,c=[0,0,0,255];for(let u=0,h=a.length;u<h;u+=o){let m=parseInt(a.substring(u,u+o),16);o===1&&(m+=m<<4),c[u/o]=m}return c[3]=c[3]/255,c}kg(t)}const e=h7();e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&kg(t));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return KI(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=j1(i[3]/255,3),i}function x7(t){return typeof t=="string"?t:UN(t)}const p7=1024,fg={};let Ub=0;function y7(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function Bb(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function Gb(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function Wb(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function Fb(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function sD(t){const e=Wb(t[0]),n=Wb(t[1]),r=Wb(t[2]),i=Fb(e*.222488403+n*.716873169+r*.06060791),a=500*(Fb(e*.452247074+n*.399439023+r*.148375274)-i),o=200*(i-Fb(e*.016863605+n*.117638439+r*.865350722)),c=Math.atan2(o,a)*(180/Math.PI);return[116*i-16,Math.sqrt(a*a+o*o),c<0?c+360:c,t[3]]}function b7(t){const e=(t[0]+16)/116,n=t[1],r=t[2]*Math.PI/180,i=Gb(e),a=Gb(e+n/500*Math.cos(r)),o=Gb(e-n/200*Math.sin(r)),c=Bb(a*3.021973625-i*1.617392459-o*.404875592),u=Bb(a*-.943766287+i*1.916279586+o*.027607165),h=Bb(a*.069407491-i*.22898585+o*1.159737864);return[Ur(c+.5|0,0,255),Ur(u+.5|0,0,255),Ur(h+.5|0,0,255),t[3]]}function kN(t){if(t==="none")return AN;if(fg.hasOwnProperty(t))return fg[t];if(Ub>=p7){let n=0;for(const r in fg)(n++&3)===0&&(delete fg[r],--Ub)}const e=KI(t);e.length!==4&&kg(t);for(const n of e)isNaN(n)&&kg(t);return fg[t]=e,++Ub,e}function Jh(t){return Array.isArray(t)?t:kN(t)}function UN(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}function nD(t){return t[0]>0&&t[1]>0}function C7(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function Dl(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}let f0=0;const Ha=1<<f0++,Wn=1<<f0++,Nl=1<<f0++,Zo=1<<f0++,Zh=1<<f0++,vg=1<<f0++,Qx=Math.pow(2,f0)-1,BN={[Ha]:"boolean",[Wn]:"number",[Nl]:"string",[Zo]:"color",[Zh]:"number[]",[vg]:"size"},N7=Object.keys(BN).map(Number).sort(Cd);function S7(t){return t in BN}function Eg(t){const e=[];for(const n of N7)Dg(t,n)&&e.push(BN[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Dg(t,e){return(t&e)===e}function fu(t,e){return t===e}class Xi{constructor(e,n){if(!S7(e))throw new Error(`literal expressions must have a specific type, got ${Eg(e)}`);this.type=e,this.value=n}}class v7{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}}function QI(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Da(t,e,n){switch(typeof t){case"boolean":{if(fu(e,Nl))return new Xi(Nl,t?"true":"false");if(!Dg(e,Ha))throw new Error(`got a boolean, but expected ${Eg(e)}`);return new Xi(Ha,t)}case"number":{if(fu(e,vg))return new Xi(vg,Dl(t));if(fu(e,Ha))return new Xi(Ha,!!t);if(fu(e,Nl))return new Xi(Nl,t.toString());if(!Dg(e,Wn))throw new Error(`got a number, but expected ${Eg(e)}`);return new Xi(Wn,t)}case"string":{if(fu(e,Zo))return new Xi(Zo,kN(t));if(fu(e,Ha))return new Xi(Ha,!!t);if(!Dg(e,Nl))throw new Error(`got a string, but expected ${Eg(e)}`);return new Xi(Nl,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return P7(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("expected an array of numbers");if(fu(e,vg)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Xi(vg,t)}if(fu(e,Zo)){if(t.length===3)return new Xi(Zo,[...t,1]);if(t.length===4)return new Xi(Zo,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!Dg(e,Zh))throw new Error(`got an array of numbers, but expected ${Eg(e)}`);return new Xi(Zh,t)}const as={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},E7={[as.Get]:bn(Mn(1,1/0),rD),[as.Var]:bn(Mn(1,1),D7),[as.Has]:bn(Mn(1,1/0),rD),[as.Id]:bn(R7,af),[as.Concat]:bn(Mn(2,1/0),dr(Nl)),[as.GeometryType]:bn(T7,af),[as.LineMetric]:bn(af),[as.Resolution]:bn(Kb,af),[as.Zoom]:bn(Kb,af),[as.Time]:bn(Kb,af),[as.Any]:bn(Mn(2,1/0),dr(Ha)),[as.All]:bn(Mn(2,1/0),dr(Ha)),[as.Not]:bn(Mn(1,1),dr(Ha)),[as.Equal]:bn(Mn(2,2),dr(Qx)),[as.NotEqual]:bn(Mn(2,2),dr(Qx)),[as.GreaterThan]:bn(Mn(2,2),dr(Wn)),[as.GreaterThanOrEqualTo]:bn(Mn(2,2),dr(Wn)),[as.LessThan]:bn(Mn(2,2),dr(Wn)),[as.LessThanOrEqualTo]:bn(Mn(2,2),dr(Wn)),[as.Multiply]:bn(Mn(2,1/0),iD),[as.Coalesce]:bn(Mn(2,1/0),iD),[as.Divide]:bn(Mn(2,2),dr(Wn)),[as.Add]:bn(Mn(2,1/0),dr(Wn)),[as.Subtract]:bn(Mn(2,2),dr(Wn)),[as.Clamp]:bn(Mn(3,3),dr(Wn)),[as.Mod]:bn(Mn(2,2),dr(Wn)),[as.Pow]:bn(Mn(2,2),dr(Wn)),[as.Abs]:bn(Mn(1,1),dr(Wn)),[as.Floor]:bn(Mn(1,1),dr(Wn)),[as.Ceil]:bn(Mn(1,1),dr(Wn)),[as.Round]:bn(Mn(1,1),dr(Wn)),[as.Sin]:bn(Mn(1,1),dr(Wn)),[as.Cos]:bn(Mn(1,1),dr(Wn)),[as.Atan]:bn(Mn(1,2),dr(Wn)),[as.Sqrt]:bn(Mn(1,1),dr(Wn)),[as.Match]:bn(Mn(4,1/0),aD,I7),[as.Between]:bn(Mn(3,3),dr(Wn)),[as.Interpolate]:bn(Mn(6,1/0),aD,j7),[as.Case]:bn(Mn(3,1/0),M7,O7),[as.In]:bn(Mn(2,2),w7),[as.Number]:bn(Mn(1,1/0),dr(Qx)),[as.String]:bn(Mn(1,1/0),dr(Qx)),[as.Array]:bn(Mn(1,1/0),dr(Wn)),[as.Color]:bn(Mn(1,4),dr(Wn)),[as.Band]:bn(Mn(1,3),dr(Wn)),[as.Palette]:bn(Mn(2,2),L7),[as.ToString]:bn(Mn(1,1),dr(Ha|Wn|Nl|Zo))};function rD(t,e,n){const r=t.length-1,i=new Array(r);for(let a=0;a<r;++a){const o=t[a+1];switch(typeof o){case"number":{i[a]=new Xi(Wn,o);break}case"string":{i[a]=new Xi(Nl,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}a===0&&n.properties.add(String(o))}return i}function D7(t,e,n){const r=t[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return n.variables.add(r),[new Xi(Nl,r)]}function R7(t,e,n){n.featureId=!0}function T7(t,e,n){n.geometryType=!0}function Kb(t,e,n){n.mapState=!0}function af(t,e,n){const r=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Mn(t,e){return function(n,r,i){const a=n[0],o=n.length-1;if(t===e){if(o!==t){const c=t===1?"":"s";throw new Error(`expected ${t} argument${c} for ${a}, got ${o}`)}}else if(o<t||o>e){const c=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${c} arguments for ${a}, got ${o}`)}}}function iD(t,e,n){const r=t.length-1,i=new Array(r);for(let a=0;a<r;++a){const o=Da(t[a+1],e,n);i[a]=o}return i}function dr(t){return function(e,n,r){const i=e.length-1,a=new Array(i);for(let o=0;o<i;++o){const c=Da(e[o+1],t,r);a[o]=c}return a}}function M7(t,e,n){const r=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function aD(t,e,n){const r=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function I7(t,e,n){const r=t.length-1,i=Nl|Wn|Ha,a=Da(t[1],i,n),o=Da(t[t.length-1],e,n),c=new Array(r-2);for(let u=0;u<r-2;u+=2){try{const h=Da(t[u+2],a.type,n);c[u]=h}catch(h){throw new Error(`failed to parse argument ${u+1} of match expression: ${h.message}`)}try{const h=Da(t[u+3],o.type,n);c[u+1]=h}catch(h){throw new Error(`failed to parse argument ${u+2} of match expression: ${h.message}`)}}return[a,...c,o]}function j7(t,e,n){const r=t[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const u=r[1];if(typeof u!="number"||u<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(u)} instead`);i=u;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const a=new Xi(Wn,i);let o;try{o=Da(t[2],Wn,n)}catch(u){throw new Error(`failed to parse argument 1 in interpolate expression: ${u.message}`)}const c=new Array(t.length-3);for(let u=0;u<c.length;u+=2){try{const h=Da(t[u+3],Wn,n);c[u]=h}catch(h){throw new Error(`failed to parse argument ${u+2} for interpolate expression: ${h.message}`)}try{const h=Da(t[u+4],e,n);c[u+1]=h}catch(h){throw new Error(`failed to parse argument ${u+3} for interpolate expression: ${h.message}`)}}return[a,o,...c]}function O7(t,e,n){const r=Da(t[t.length-1],e,n),i=new Array(t.length-1);for(let a=0;a<i.length-1;a+=2){try{const o=Da(t[a+1],Ha,n);i[a]=o}catch(o){throw new Error(`failed to parse argument ${a} of case expression: ${o.message}`)}try{const o=Da(t[a+2],r.type,n);i[a+1]=o}catch(o){throw new Error(`failed to parse argument ${a+1} of case expression: ${o.message}`)}}return i[i.length-1]=r,i}function w7(t,e,n){let r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Nl}else i=Wn;const a=new Array(r.length);for(let c=0;c<a.length;c++)try{const u=Da(r[c],i,n);a[c]=u}catch(u){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${u.message}`)}return[Da(t[1],i,n),...a]}function L7(t,e,n){let r;try{r=Da(t[1],Wn,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const a=new Array(i.length);for(let o=0;o<a.length;o++){let c;try{c=Da(i[o],Zo,n)}catch(u){throw new Error(`failed to parse color at index ${o} in palette expression: ${u.message}`)}if(!(c instanceof Xi))throw new Error(`the palette color at index ${o} must be a literal value`);a[o]=c}return[r,...a]}function bn(...t){return function(e,n,r){const i=e[0];let a;for(let o=0;o<t.length;o++){const c=t[o](e,n,r);if(o==t.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");a=c}}return new v7(n,i,...a)}}function P7(t,e,n){const r=t[0],i=E7[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(t,e,n)}function YI(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return YI(t.getGeometries()[0]);default:return""}}function $I(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ac(t,e,n){const r=Da(t,e,n);return sc(r)}function sc(t,e){if(t instanceof Xi){if(t.type===Zo&&typeof t.value=="string"){const r=kN(t.value);return function(){return r}}return function(){return t.value}}const n=t.operator;switch(n){case as.Number:case as.String:case as.Coalesce:return A7(t);case as.Get:case as.Var:case as.Has:return k7(t);case as.Id:return r=>r.featureId;case as.GeometryType:return r=>r.geometryType;case as.Concat:{const r=t.args.map(i=>sc(i));return i=>"".concat(...r.map(a=>a(i).toString()))}case as.Resolution:return r=>r.resolution;case as.Any:case as.All:case as.Between:case as.In:case as.Not:return B7(t);case as.Equal:case as.NotEqual:case as.LessThan:case as.LessThanOrEqualTo:case as.GreaterThan:case as.GreaterThanOrEqualTo:return U7(t);case as.Multiply:case as.Divide:case as.Add:case as.Subtract:case as.Clamp:case as.Mod:case as.Pow:case as.Abs:case as.Floor:case as.Ceil:case as.Round:case as.Sin:case as.Cos:case as.Atan:case as.Sqrt:return G7(t);case as.Case:return W7(t);case as.Match:return F7(t);case as.Interpolate:return K7(t);case as.ToString:return Q7(t);default:throw new Error(`Unsupported operator ${n}`)}}function A7(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=sc(t.args[a]);switch(n){case as.Coalesce:return a=>{for(let o=0;o<r;++o){const c=i[o](a);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case as.Number:case as.String:return a=>{for(let o=0;o<r;++o){const c=i[o](a);if(typeof c===n)return c}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function k7(t,e){const r=t.args[0].value;switch(t.operator){case as.Get:return i=>{const a=t.args;let o=i.properties[r];for(let c=1,u=a.length;c<u;++c){const m=a[c].value;o=o[m]}return o};case as.Var:return i=>i.variables[r];case as.Has:return i=>{const a=t.args;if(!(r in i.properties))return!1;let o=i.properties[r];for(let c=1,u=a.length;c<u;++c){const m=a[c].value;if(!o||!Object.hasOwn(o,m))return!1;o=o[m]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function U7(t,e){const n=t.operator,r=sc(t.args[0]),i=sc(t.args[1]);switch(n){case as.Equal:return a=>r(a)===i(a);case as.NotEqual:return a=>r(a)!==i(a);case as.LessThan:return a=>r(a)<i(a);case as.LessThanOrEqualTo:return a=>r(a)<=i(a);case as.GreaterThan:return a=>r(a)>i(a);case as.GreaterThanOrEqualTo:return a=>r(a)>=i(a);default:throw new Error(`Unsupported comparison operator ${n}`)}}function B7(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=sc(t.args[a]);switch(n){case as.Any:return a=>{for(let o=0;o<r;++o)if(i[o](a))return!0;return!1};case as.All:return a=>{for(let o=0;o<r;++o)if(!i[o](a))return!1;return!0};case as.Between:return a=>{const o=i[0](a),c=i[1](a),u=i[2](a);return o>=c&&o<=u};case as.In:return a=>{const o=i[0](a);for(let c=1;c<r;++c)if(o===i[c](a))return!0;return!1};case as.Not:return a=>!i[0](a);default:throw new Error(`Unsupported logical operator ${n}`)}}function G7(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=sc(t.args[a]);switch(n){case as.Multiply:return a=>{let o=1;for(let c=0;c<r;++c)o*=i[c](a);return o};case as.Divide:return a=>i[0](a)/i[1](a);case as.Add:return a=>{let o=0;for(let c=0;c<r;++c)o+=i[c](a);return o};case as.Subtract:return a=>i[0](a)-i[1](a);case as.Clamp:return a=>{const o=i[0](a),c=i[1](a);if(o<c)return c;const u=i[2](a);return o>u?u:o};case as.Mod:return a=>i[0](a)%i[1](a);case as.Pow:return a=>Math.pow(i[0](a),i[1](a));case as.Abs:return a=>Math.abs(i[0](a));case as.Floor:return a=>Math.floor(i[0](a));case as.Ceil:return a=>Math.ceil(i[0](a));case as.Round:return a=>Math.round(i[0](a));case as.Sin:return a=>Math.sin(i[0](a));case as.Cos:return a=>Math.cos(i[0](a));case as.Atan:return r===2?a=>Math.atan2(i[0](a),i[1](a)):a=>Math.atan(i[0](a));case as.Sqrt:return a=>Math.sqrt(i[0](a));default:throw new Error(`Unsupported numeric operator ${n}`)}}function W7(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=sc(t.args[i]);return i=>{for(let a=0;a<n-1;a+=2)if(r[a](i))return r[a+1](i);return r[n-1](i)}}function F7(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=sc(t.args[i]);return i=>{const a=r[0](i);for(let o=1;o<n-1;o+=2)if(a===r[o](i))return r[o+1](i);return r[n-1](i)}}function K7(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=sc(t.args[i]);return i=>{const a=r[0](i),o=r[1](i);let c,u;for(let h=2;h<n;h+=2){const m=r[h](i);let _=r[h+1](i);const p=Array.isArray(_);if(p&&(_=y7(_)),m>=o)return h===2?_:p?Y7(a,o,c,u,m,_):Rg(a,o,c,u,m,_);c=m,u=_}return u}}function Q7(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=sc(t.args[a]);switch(n){case as.ToString:return a=>{const o=i[0](a);return t.args[0].type===Zo?UN(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Rg(t,e,n,r,i,a){const o=i-n;if(o===0)return r;const c=e-n,u=t===1?c/o:(Math.pow(t,c)-1)/(Math.pow(t,o)-1);return r+u*(a-r)}function Y7(t,e,n,r,i,a){if(i-n===0)return r;const c=sD(r),u=sD(a);let h=u[2]-c[2];h>180?h-=360:h<-180&&(h+=360);const m=[Rg(t,e,n,c[0],i,u[0]),Rg(t,e,n,c[1],i,u[1]),c[2]+Rg(t,e,n,0,i,h),Rg(t,e,n,r[3],i,a[3])];return b7(m)}const Rn={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function $7(t,e,n){const r=t;let i=!0,a=!1,o=!1;const c=[Qp(r,In.LOAD,function(){o=!0,a||e()})];return r.src&&sI?(a=!0,r.decode().then(function(){i&&e()}).catch(function(u){i&&(o?e():n())})):c.push(Qp(r,In.ERROR,n)),function(){i=!1,c.forEach(ei)}}function V7(t,e){return new Promise((n,r)=>{function i(){o(),n(t)}function a(){o(),r(new Error("Image load error"))}function o(){t.removeEventListener("load",i),t.removeEventListener("error",a)}t.addEventListener("load",i),t.addEventListener("error",a)})}function z7(t,e){return e&&(t.src=e),t.src&&sI?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):V7(t)}class H7{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const r=this.cache_[n];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n){const r=Qb(e,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,n){const r=Qb(e,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,n,r,i){const a=Qb(e,n),o=a in this.cache_;this.cache_[a]=r,i&&(r.getImageState()===Rn.IDLE&&r.load(),r.getImageState()===Rn.LOADING?r.ready().then(()=>{this.patternCache_[a]=Zp().createPattern(r.getImage(1),"repeat")}):this.patternCache_[a]=Zp().createPattern(r.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Qb(t,e){const n=e?Jh(e):"null";return t+":"+n}const _o=new H7;let mg=null;class VI extends I1{constructor(e,n,r,i,a){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r==null?void 0:r.crossOrigin,this.referrerPolicy_=r==null?void 0:r.referrerPolicy,this.canvas_={},this.color_=a,this.imageState_=i===void 0?Rn.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_),this.referrerPolicy_!==void 0&&(this.image_.referrerPolicy=this.referrerPolicy_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Rn.LOADED){mg||(mg=Bi(1,1,void 0,{willReadFrequently:!0})),mg.drawImage(this.image_,0,0);try{mg.getImageData(0,0,1,1),this.tainted_=!1}catch{mg=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(In.CHANGE)}handleImageError_(){this.imageState_=Rn.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Rn.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}setImage(e){this.image_=e}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],r=Bi(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Rn.IDLE){this.image_||this.initializeImage_(),this.imageState_=Rn.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&z7(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Rn.LOADED)return;const n=this.image_,r=Bi(Math.ceil(n.width*e),Math.ceil(n.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=x7(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Rn.LOADED||this.imageState_===Rn.ERROR)e();else{const n=()=>{(this.imageState_===Rn.LOADED||this.imageState_===Rn.ERROR)&&(this.removeEventListener(In.CHANGE,n),e())};this.addEventListener(In.CHANGE,n)}})),this.ready_}}function Ug(t,e,n,r,i,a){let o=e===void 0?void 0:_o.get(e,i);return o||(o=new VI(t,t&&"src"in t?t.src||void 0:e,n,r,i),_o.set(e,i,o,a)),a&&o&&!_o.getPattern(e,i)&&_o.set(e,i,o,a),o}function Oc(t){return t?Array.isArray(t)?UN(t):typeof t=="object"&&"src"in t?q7(t):t:null}function q7(t){if(!t.offset||!t.size)return _o.getPattern(t.src,t.color);const e=t.src+":"+t.offset,n=_o.getPattern(e,t.color);if(n)return n;const r=_o.get(t.src,null);if(r.getImageState()!==Rn.LOADED)return null;const i=Bi(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Ug(i.canvas,e,void 0,Rn.LOADED,t.color,!0),_o.getPattern(e,t.color)}const zI="10px sans-serif",Sl="#000",um="round",Nd=[],Sd=0,hm="round",e_=10,X7=0,t_="#000",s_="center",e1="middle",wh=[0,0,0,0],n_=1,bf=new Bc;let gg=null,lD;const f2={},J7=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Z7(t,e,n){return`${t} ${e} 16px "${n}"`}const e9=(function(){let e,n;async function r(a){await n.ready;const o=await n.load(a);if(o.length===0)return!1;const c=u2(a),u=c.families[0].toLowerCase(),h=c.weight;return o.some(m=>{const _=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),p=d2[m.weight]||m.weight;return _===u&&m.style===c.style&&p==h})}async function i(){await n.ready;let a=!0;const o=bf.getProperties(),c=Object.keys(o).filter(u=>o[u]<100);for(let u=c.length-1;u>=0;--u){const h=c[u];let m=o[h];m<100&&(await r(h)?(C_(f2),bf.set(h,100)):(m+=10,bf.set(h,m,!0),m<100&&(a=!1)))}e=void 0,a||(e=setTimeout(i,100))}return async function(a){n||(n=mo?self.fonts:document.fonts);const o=u2(a);if(!o)return;const c=o.families;let u=!1;for(const h of c){if(J7.has(h))continue;const m=Z7(o.style,o.weight,h);bf.get(m)===void 0&&(bf.set(m,0,!0),u=!0)}u&&(clearTimeout(e),e=setTimeout(i,100))}})(),t9=(function(){let t;return function(e){let n=f2[e];if(n==null){if(mo){const r=u2(e),i=HI(e,"g");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);f2[e]=n}return n}})();function HI(t,e){return gg||(gg=Bi(1,1)),t!=lD&&(gg.font=t,lD=gg.font),gg.measureText(e)}function qI(t,e){return HI(t,e).width}function oD(t,e,n){if(e in n)return n[e];const r=e.split(`
`).reduce((i,a)=>Math.max(i,qI(t,a)),0);return n[e]=r,r}function s9(t,e){const n=[],r=[],i=[];let a=0,o=0,c=0,u=0;for(let h=0,m=e.length;h<=m;h+=2){const _=e[h];if(_===`
`||h===m){a=Math.max(a,o),i.push(o),o=0,c+=u,u=0;continue}const p=e[h+1]||t.font,g=qI(p,_);n.push(g),o+=g;const C=t9(p);r.push(C),u=Math.max(u,C)}return{width:a,height:c,widths:n,heights:r,lineWidths:i}}function n9(t,e,n,r,i,a,o,c,u,h,m){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=_=>_.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(u,h),t.scale(m[0],m[1]),r9(r,t)):m[0]<0||m[1]<0?(t.translate(u,h),t.scale(m[0],m[1]),t.drawImage(r,i,a,o,c,0,0,o,c)):t.drawImage(r,i,a,o,c,u,h,o*m[0],c*m[1]),t.restore()}function r9(t,e){const n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}class F1{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Dl(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new F1({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return sr()}getImage(e){return sr()}getHitDetectionImage(){return sr()}getPixelRatio(e){return 1}getImageState(){return sr()}getImageSize(){return sr()}getOrigin(){return sr()}getSize(){return sr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Dl(e)}listenImageChange(e){sr()}load(){sr()}unlistenImageChange(e){sr()}ready(){return Promise.resolve()}}class K1 extends F1{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Rn.LOADING:Rn.LOADED,this.imageState_===Rn.LOADING&&this.ready().then(()=>this.imageState_=Rn.LOADED),this.render()}clone(){const e=this.getScale(),n=new K1({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var a,o;const n=(a=this.fill_)==null?void 0:a.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let i=(o=_o.get(r,null))==null?void 0:o.getImage(1);if(!i){const c=this.renderOptions_,u=Math.ceil(c.size*e),h=Bi(u,u);this.draw_(c,h,e),i=h.canvas;const m=new VI(i,void 0,null,Rn.LOADED,null);_o.set(r,null,m),createImageBitmap(i).then(_=>{m.setImage(_)})}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}setRadius(e){this.radius!==e&&(this.radius=e,this.render())}getRadius2(){return this.radius2_}setRadius2(e){this.radius2_!==e&&(this.radius2_=e,this.render())}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius,a=this.radius2_===void 0?i:this.radius2_;if(i<a){const B=i;i=a,a=B}const o=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/o,u=a*Math.sin(c),h=Math.sqrt(a*a-u*u),m=i-h,_=Math.sqrt(u*u+m*m),p=_/u;if(e==="miter"&&p<=r)return p*n;const g=n/2/p,C=n/2*(m/_),N=Math.sqrt((i+g)*(i+g)+C*C)-i;if(this.radius2_===void 0||e==="bevel")return N*2;const v=i*Math.sin(c),P=Math.sqrt(i*i-v*v),w=a-P,k=Math.sqrt(v*v+w*w)/v;if(k<=r){const B=k*n/2-a-i;return 2*Math.max(N,B)}return N*2}createRenderOptions(){let e=um,n=hm,r=0,i=null,a=0,o,c=0;this.stroke_&&(o=Oc(this.stroke_.getColor()??t_),c=this.stroke_.getWidth()??n_,i=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??hm,e=this.stroke_.getLineCap()??um,r=this.stroke_.getMiterLimit()??e_);const u=this.calculateLineJoinSize_(n,c,r),h=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*h+u);return{strokeStyle:o,strokeWidth:c,size:m,lineCap:e,lineDash:i,lineDashOffset:a,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=Sl),n.fillStyle=Oc(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Jh(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=Bi(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const r=this.radius;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const a=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let c=0;c<n;c++){const u=a+c*o,h=c%2===0?r:i;e.lineTo(h*Math.cos(u),h*Math.sin(u))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=Sl,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Q1 extends K1{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new Q1({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}}class fm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new fm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=Ug(null,e.src,{crossOrigin:"anonymous"},void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Rn.IDLE&&n.load(),n.getImageState()===Rn.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?rr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Jh(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function cD(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}class Mc extends F1{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,a=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:a,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.referrerPolicy_=e.referrerPolicy;const o=e.img!==void 0?e.img:null;let c=e.src;_r(!(c!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&o&&(c=o.src||rr(o)),_r(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),_r(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let u;if(e.src!==void 0?u=Rn.IDLE:o!==void 0&&("complete"in o?o.complete?u=o.src?Rn.LOADED:Rn.IDLE:u=Rn.LOADING:u=Rn.LOADED),this.color_=e.color!==void 0?Jh(e.color):null,this.iconImage_=Ug(o,c,{crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_},u,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,m;if(e.size)[h,m]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)h=_.width,m=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const p=()=>{if(this.unlistenImageChange(p),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(cD(g[0],g[1],e.width,e.height))};this.listenImageChange(p);return}}h!==void 0&&this.setScale(cD(h,m,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Mc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}setColor(e){const n=e?Jh(e):null;if(this.color_===n||this.color_&&n&&this.color_.length===n.length&&this.color_.every((o,c)=>o===n[c]))return;this.color_=n;const r=this.getSrc(),i=r!==void 0?null:this.getHitDetectionImage(),a=r!==void 0?Rn.IDLE:this.iconImage_.getImageState();this.iconImage_=Ug(i,r,{crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_},a,this.color_)}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=Ug(null,e,{crossOrigin:this.crossOrigin_,referrerPolicy:this.referrerPolicy_},Rn.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Rn.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Rn.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(In.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(In.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Y1{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.offset_=e.offset,this.width_=e.width}clone(){const e=this.getColor();return new Y1({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),offset:this.getOffset(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getOffset(){return this.offset_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setOffset(e){this.offset_=e}setWidth(e){this.width_=e}}class Fl{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=dD,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Fl({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=dD,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function i9(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(_r(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let Yb=null;function XI(t,e){if(!Yb){const n=new fm({color:"rgba(255,255,255,0.4)"}),r=new Y1({color:"#3399CC",width:1.25});Yb=[new Fl({image:new Q1({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return Yb}function dD(t){return t.getGeometry()}const a9="#333";class GN{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Dl(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new fm({color:a9}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new GN({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof fm?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Dl(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function l9(t){return!0}function o9(t){const e=QI(),n=c9(t,e),r=$I();return function(i,a){if(r.properties=i.getPropertiesInternal(),r.resolution=a,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=YI(i.getGeometry())),n(r)}}function uD(t){const e=QI(),n=t.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=m2(t[o],e);const i=$I(),a=new Array(n);return function(o,c){if(i.properties=o.getPropertiesInternal(),i.resolution=c,e.featureId){const h=o.getId();h!==void 0?i.featureId=h:i.featureId=null}let u=0;for(let h=0;h<n;++h){const m=r[h](i);m&&(a[u]=m,u+=1)}return a.length=u,a}}function c9(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i){const a=t[i],o="filter"in a?Ac(a.filter,Ha,e):l9;let c;if(Array.isArray(a.style)){const u=a.style.length;c=new Array(u);for(let h=0;h<u;++h)c[h]=m2(a.style[h],e)}else c=[m2(a.style,e)];r[i]={filter:o,styles:c}}return function(i){const a=[];let o=!1;for(let c=0;c<n;++c){const u=r[c].filter;if(u(i)&&!(t[c].else&&o)){o=!0;for(const h of r[c].styles){const m=h(i);m&&a.push(m)}}}return a}}function m2(t,e){const n=r_(t,"",e),r=i_(t,"",e),i=d9(t,e),a=u9(t,e),o=Ea(t,"z-index",e);if(!n&&!r&&!i&&!a&&!om(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const c=new Fl;return function(u){let h=!0;if(n){const m=n(u);m&&(h=!1),c.setFill(m)}if(r){const m=r(u);m&&(h=!1),c.setStroke(m)}if(i){const m=i(u);m&&(h=!1),c.setText(m)}if(a){const m=a(u);m&&(h=!1),c.setImage(m)}return o&&c.setZIndex(o(u)),h?null:c}}function r_(t,e,n){let r;if(e+"fill-pattern-src"in t)r=g9(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return a=>null;r=$1(t,e+"fill-color",n)}if(!r)return null;const i=new fm;return function(a){const o=r(a);return o===AN?null:(i.setColor(o),i)}}function i_(t,e,n){const r=Ea(t,e+"stroke-width",n),i=$1(t,e+"stroke-color",n);if(!r&&!i)return null;const a=gd(t,e+"stroke-line-cap",n),o=gd(t,e+"stroke-line-join",n),c=JI(t,e+"stroke-line-dash",n),u=Ea(t,e+"stroke-line-dash-offset",n),h=Ea(t,e+"stroke-miter-limit",n),m=Ea(t,e+"stroke-offset",n),_=new Y1;return function(p){if(i){const g=i(p);if(g===AN)return null;_.setColor(g)}if(r&&_.setWidth(r(p)),a){const g=a(p);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");_.setLineCap(g)}if(o){const g=o(p);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");_.setLineJoin(g)}return c&&_.setLineDash(c(p)),u&&_.setLineDashOffset(u(p)),h&&_.setMiterLimit(h(p)),m&&_.setOffset(m(p)),_}}function d9(t,e){const n="text-",r=gd(t,n+"value",e);if(!r)return null;const i=r_(t,n,e),a=r_(t,n+"background-",e),o=i_(t,n,e),c=i_(t,n+"background-",e),u=gd(t,n+"font",e),h=Ea(t,n+"max-angle",e),m=Ea(t,n+"offset-x",e),_=Ea(t,n+"offset-y",e),p=Uf(t,n+"overflow",e),g=gd(t,n+"placement",e),C=Ea(t,n+"repeat",e),y=V1(t,n+"scale",e),N=Uf(t,n+"rotate-with-view",e),v=Ea(t,n+"rotation",e),P=gd(t,n+"align",e),w=gd(t,n+"justify",e),M=gd(t,n+"baseline",e),k=Uf(t,n+"keep-upright",e),B=JI(t,n+"padding",e),G=z1(t,n+"declutter-mode"),U=new GN({declutterMode:G});return function(I){if(U.setText(r(I)),i&&U.setFill(i(I)),a&&U.setBackgroundFill(a(I)),o&&U.setStroke(o(I)),c&&U.setBackgroundStroke(c(I)),u&&U.setFont(u(I)),h&&U.setMaxAngle(h(I)),m&&U.setOffsetX(m(I)),_&&U.setOffsetY(_(I)),p&&U.setOverflow(p(I)),g){const E=g(I);if(E!=="point"&&E!=="line")throw new Error("Expected point or line for text-placement");U.setPlacement(E)}if(C&&U.setRepeat(C(I)),y&&U.setScale(y(I)),N&&U.setRotateWithView(N(I)),v&&U.setRotation(v(I)),P){const E=P(I);if(E!=="left"&&E!=="center"&&E!=="right"&&E!=="end"&&E!=="start")throw new Error("Expected left, right, center, start, or end for text-align");U.setTextAlign(E)}if(w){const E=w(I);if(E!=="left"&&E!=="right"&&E!=="center")throw new Error("Expected left, right, or center for text-justify");U.setJustify(E)}if(M){const E=M(I);if(E!=="bottom"&&E!=="top"&&E!=="middle"&&E!=="alphabetic"&&E!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");U.setTextBaseline(E)}return B&&U.setPadding(B(I)),k&&U.setKeepUpright(k(I)),U}}function u9(t,e){return"icon-src"in t?h9(t,e):"shape-points"in t?f9(t,e):"circle-radius"in t?m9(t,e):null}function h9(t,e){const n="icon-",r=n+"src",i=ZI(t[r],r),a=t1(t,n+"anchor",e),o=V1(t,n+"scale",e),c=Ea(t,n+"opacity",e),u=t1(t,n+"displacement",e),h=Ea(t,n+"rotation",e),m=Uf(t,n+"rotate-with-view",e),_=fD(t,n+"anchor-origin"),p=mD(t,n+"anchor-x-units"),g=mD(t,n+"anchor-y-units"),C=wd(t,n+"color");let y,N=null;C!==void 0&&(Array.isArray(C)&&C.length>0&&typeof C[0]=="string"?N=$1(t,n+"color",e):y=ej(C,n+"color"));const v=x9(t,n+"cross-origin"),P=p9(t,n+"offset"),w=fD(t,n+"offset-origin"),M=g2(t,n+"width"),k=g2(t,n+"height"),B=_9(t,n+"size"),G=z1(t,n+"declutter-mode"),U={src:i,anchorOrigin:_,anchorXUnits:p,anchorYUnits:g,crossOrigin:v,offset:P,offsetOrigin:w,height:k,width:M,size:B,declutterMode:G};let I=null;return function(E){if(I)N&&I.setColor(N(E));else{const A=N?N(E):y;I=new Mc(A!==void 0?Object.assign({},U,{color:A}):Object.assign({},U))}return c&&I.setOpacity(c(E)),u&&I.setDisplacement(u(E)),h&&I.setRotation(h(E)),m&&I.setRotateWithView(m(E)),o&&I.setScale(o(E)),a&&I.setAnchor(a(E)),I}}function f9(t,e){const n="shape-",r=n+"points",i=n+"radius",a=WN(t[r],r);if(!(i in t))throw new Error(`Expected a number for ${i}`);const o=Ea(t,i,e),c=typeof t[i]=="number"?t[i]:5,u=n+"radius2",h=Ea(t,u,e),m=typeof t[u]=="number"?t[u]:void 0,_=r_(t,n,e),p=i_(t,n,e),g=V1(t,n+"scale",e),C=t1(t,n+"displacement",e),y=Ea(t,n+"rotation",e),N=Uf(t,n+"rotate-with-view",e),v=g2(t,n+"angle"),P=z1(t,n+"declutter-mode"),w=new K1({points:a,radius:c,radius2:m,angle:v,declutterMode:P});return function(M){return o&&w.setRadius(o(M)),h&&w.setRadius2(h(M)),_&&w.setFill(_(M)),p&&w.setStroke(p(M)),C&&w.setDisplacement(C(M)),y&&w.setRotation(y(M)),N&&w.setRotateWithView(N(M)),g&&w.setScale(g(M)),w}}function m9(t,e){const n="circle-",r=r_(t,n,e),i=i_(t,n,e),a=Ea(t,n+"radius",e),o=V1(t,n+"scale",e),c=t1(t,n+"displacement",e),u=Ea(t,n+"rotation",e),h=Uf(t,n+"rotate-with-view",e),m=z1(t,n+"declutter-mode"),_=new Q1({radius:5,declutterMode:m});return function(p){return a&&_.setRadius(a(p)),r&&_.setFill(r(p)),i&&_.setStroke(i(p)),c&&_.setDisplacement(c(p)),u&&_.setRotation(u(p)),h&&_.setRotateWithView(h(p)),o&&_.setScale(o(p)),_}}function wd(t,e){if(!(e in t))return;const n=t[e];return n===void 0?void 0:n}function Ea(t,e,n){const r=wd(t,e);if(r===void 0)return;const i=Ac(r,Wn,n);return function(a){return WN(i(a),e)}}function gd(t,e,n){const r=wd(t,e);if(r===void 0)return null;const i=Ac(r,Nl,n);return function(a){return ZI(i(a),e)}}function g9(t,e,n){const r=gd(t,e+"pattern-src",n),i=hD(t,e+"pattern-offset",n),a=hD(t,e+"pattern-size",n),o=$1(t,e+"color",n);return function(c){return{src:r(c),offset:i&&i(c),size:a&&a(c),color:o&&o(c)}}}function Uf(t,e,n){const r=wd(t,e);if(r===void 0)return null;const i=Ac(r,Ha,n);return function(a){const o=i(a);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function $1(t,e,n){const r=wd(t,e);if(r===void 0)return null;const i=Ac(r,Zo,n);return function(a){return ej(i(a),e)}}function JI(t,e,n){const r=wd(t,e);if(r===void 0)return null;if(Array.isArray(r)&&(r.length===0||typeof r[0]!="string")){const a=r.map((o,c)=>{if(typeof o=="number")return()=>o;const u=Ac(o,Wn,n);return function(h){return WN(u(h),`${e}[${c}]`)}});return function(o){const c=new Array(a.length);for(let u=0;u<a.length;++u)c[u]=a[u](o);return c}}const i=Ac(r,Zh,n);return function(a){return R_(i(a),e)}}function t1(t,e,n){const r=wd(t,e);if(r===void 0)return null;const i=Ac(r,Zh,n);return function(a){const o=R_(i(a),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function hD(t,e,n){const r=wd(t,e);if(r===void 0)return null;const i=Ac(r,Zh,n);return function(a){return tj(i(a),e)}}function V1(t,e,n){const r=wd(t,e);if(r===void 0)return null;const i=Ac(r,Zh|Wn,n);return function(a){return y9(i(a),e)}}function g2(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function _9(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return Dl(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function x9(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function fD(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function mD(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function p9(t,e){const n=t[e];if(n!==void 0)return R_(n,e)}function z1(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function R_(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function ZI(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function WN(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function ej(t,e){if(typeof t=="string")return t;const n=R_(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function tj(t,e){const n=R_(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function y9(t,e){return typeof t=="number"?t:tj(t,e)}const gD={RENDER_ORDER:"renderOrder"};class sj extends W1{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(gD.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new FI(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(gD.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?XI:e;const n=b9(e);this.styleFunction_=e===null?void 0:i9(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function b9(t){if(t===void 0)return XI;if(!t)return null;if(typeof t=="function"||t instanceof Fl)return t;if(!Array.isArray(t))return uD([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof Fl){const i=new Array(e);for(let a=0;a<e;++a){const o=t[a];if(!(o instanceof Fl))throw new Error("Expected a list of style instances");i[a]=o}return i}if("style"in n){const i=new Array(e);for(let a=0;a<e;++a){const o=t[a];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[a]=o}return o9(i)}return uD(t)}class nj extends Od{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}}class C9 extends T1{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){sr()}calculateMatrices2D(e){const n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Td(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),vI(i,r)}forEachFeatureAtCoordinate(e,n,r,i,a,o,c,u){let h;const m=n.viewState;function _(M,k,B,G){return a.call(o,k,M?B:null,G)}const p=m.projection,g=fI(e.slice(),p),C=[[0,0]];if(p.canWrapX()&&i){const M=p.getExtent(),k=ur(M);C.push([-k,0],[k,0])}const y=n.layerStatesArray,N=y.length,v=[],P=[];for(let M=0;M<C.length;M++)for(let k=N-1;k>=0;--k){const B=y[k],G=B.layer;if(G.hasRenderer()&&PN(B,m)&&c.call(u,G)){const U=G.getRenderer(),I=G.getSource();if(U&&I){const E=I.getWrapX()?g:e,A=_.bind(null,B.managed);P[0]=E[0]+C[M][0],P[1]=E[1]+C[M][1],h=U.forEachFeatureAtCoordinate(P,n,r,A,v)}if(h)return h}}if(v.length===0)return;const w=1/v.length;return v.forEach((M,k)=>M.distanceSq+=k*w),v.sort((M,k)=>M.distanceSq-k.distanceSq),v.some(M=>h=M.callback(M.feature,M.layer,M.geometry)),h}hasFeatureAtCoordinate(e,n,r,i,a,o){return this.forEachFeatureAtCoordinate(e,n,r,i,Hg,this,a,o)!==void 0}getMap(){return this.map_}renderFrame(e){sr()}scheduleExpireIconCache(e){_o.canExpireCache()&&e.postRenderFunctions.push(N9)}}function N9(t,e){_o.expire()}class S9 extends C9{constructor(e){super(e),this.fontChangeListenerKey_=nr(bf,lm.PROPERTYCHANGE,e.redrawText,e),this.element_=mo?PI():document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=B1+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const r=this.getMap();if(r.hasListener(e)){const i=new nj(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){ei(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(go.PRECOMPOSE,e);const n=e.layerStatesArray.sort((h,m)=>h.zIndex-m.zIndex);n.some(h=>h.layer instanceof sj&&h.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const a=[];let o=null;for(let h=0,m=n.length;h<m;++h){const _=n[h];e.layerIndex=h;const p=_.layer,g=p.getSourceState();if(!PN(_,i)||g!="ready"&&g!="undefined"){p.unrender();continue}const C=p.render(e,o);C&&(C!==o&&(this.children_.push(C),o=C),a.push(_))}this.declutter(e,a),wk(this.element_,this.children_);const u=this.getMap().getTargetElement();if(ku(u)){const h=u.getContext("2d");for(const m of this.children_){const _=m.firstElementChild||m,p=m.style.backgroundColor;if(p&&(!ku(_)||_.width>0)&&(h.fillStyle=p,h.fillRect(0,0,u.width,u.height)),ku(_)&&_.width>0){h.save();const g=m.style.opacity||_.style.opacity;h.globalAlpha=g===""?1:Number(g);const C=_.style.transform;if(C)h.transform(...c2(C));else{const y=parseFloat(_.style.width)/_.width,N=parseFloat(_.style.height)/_.height;h.transform(y,0,0,N,0,0)}h.drawImage(_,0,0),h.restore()}}}this.dispatchRenderEvent(go.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let r=n.length-1;r>=0;--r){const i=n[r],a=i.layer;a.getDeclutter()&&a.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}}}function rj(t){if(t instanceof W1){t.setMapInternal(null);return}t instanceof ym&&t.getLayers().forEach(rj)}function ij(t,e){if(t instanceof W1){t.setMapInternal(e);return}if(t instanceof ym){const n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)ij(n[r],e)}}let _D=class extends Bc{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=v9(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:i8,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ec(),this.pixelToCoordinateTransform_=ec(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,mo||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,mo||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=n.controls||(mo?new fo:kk()),this.interactions=n.interactions||(mo?new fo:i7({onFocusOnly:!0})),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new o8(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Aa.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Aa.VIEW,this.handleViewChanged_),this.addChangeListener(Aa.SIZE,this.handleSizeChanged_),this.addChangeListener(Aa.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;e.view&&!(e.view instanceof Jo)&&e.view.then(function(i){r.setView(new Jo(i))}),this.controls.addEventListener(Cl.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Cl.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Cl.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Cl.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Cl.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Cl.REMOVE,i=>{const a=i.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){ij(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){var e;this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),(e=this.resizeObserver_)==null||e.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const a=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Hg,c=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,c,n,null,o,null)}getFeaturesAtPixel(e,n){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){const e=[];function n(r){r.forEach(function(i){i instanceof ym?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const i=n.layerFilter!==void 0?n.layerFilter:Hg,a=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,a,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),a=r.width/i[0],o=r.height/i[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-r.left)/a,(c.clientY-r.top)/o]}getTarget(){return this.get(Aa.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return o2(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?fa(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Aa.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof fo){n.setLayers(e);return}const r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n];if(!i.visible)continue;const a=i.layer.getRenderer();if(a&&!a.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=fd(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?fa(n.coordinateToPixelTransform,e.slice(0,2)):null}getPixelRatio(){return this.pixelRatio_}setPixelRatio(e){this.pixelRatio_!==e&&(this.pixelRatio_=e,this.render())}getRenderer(){return this.renderer_}getSize(){return this.get(Aa.SIZE)}getView(){return this.get(Aa.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return c8(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;const r=new Su(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,r=n.type;if(r===ZC.POINTERDOWN||r===In.WHEEL||r===In.KEYDOWN){const i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=n.target,c=a instanceof ShadowRoot?a.host===o?a.host.ownerDocument:a:a===i?i.documentElement:a;if(this.overlayContainerStopEvent_.contains(o)||!c.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let a=i.length-1;a>=0;a--){const o=i[a];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,a=i;if(e){const o=e.viewHints;if(o[ka.ANIMATING]||o[ka.INTERACTING]){const c=Date.now()-e.time>8;i=c?0:8,a=c?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,a))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(go.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(go.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new pf(vu.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new pf(vu.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,a=r.length;i<a;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){var r,i;if(this.mapBrowserEventHandler_){for(let a=0,o=this.targetChangeHandlerKeys_.length;a<o;++a)ei(this.targetChangeHandlerKeys_[a]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(In.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(In.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!ku(this.targetElement_)){(r=this.resizeObserver_)==null||r.unobserve(this.targetElement_);const a=this.targetElement_.getRootNode();a instanceof ShadowRoot&&this.resizeObserver_.unobserve(a.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(ku(n)||n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new S9(this)),!ku(n)){this.mapBrowserEventHandler_=new a8(this,this.moveTolerance_);for(const o in pi)this.mapBrowserEventHandler_.addEventListener(pi[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(In.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(In.WHEEL,this.boundHandleBrowserEvent_,nI?{passive:!1}:!1);let a;if(this.keyboardEventTarget_)a=this.keyboardEventTarget_;else{const o=n.getRootNode();a=o instanceof ShadowRoot?o.host:n}if(this.targetChangeHandlerKeys_=[nr(a,In.KEYDOWN,this.handleBrowserEvent,this),nr(a,In.KEYPRESS,this.handleBrowserEvent,this)],n instanceof HTMLElement){const o=n.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),(i=this.resizeObserver_)==null||i.observe(n)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ei(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ei(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=nr(e,lm.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=nr(e,In.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ei),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Eu("addlayer",e)),this.layerGroupPropertyListenerKeys_=[nr(e,lm.PROPERTYCHANGE,this.render,this),nr(e,In.CHANGE,this.render,this),nr(e,"addlayer",this.handleLayerAdd_,this),nr(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let n=0,r=e.length;n<r;++n){const i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){rj(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),r=this.getView(),i=this.frameState_;let a=null;if(n!==void 0&&nD(n)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=r.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:n2(c.center,c.resolution,c.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:o,wantedTiles:{},mapId:rr(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const u=isNaN(c.nextRotation)?c.rotation:c.nextRotation;a.nextExtent=n2(c.nextCenter,c.nextResolution,u,n)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),i&&(!this.previousExtent_||!S_(this.previousExtent_)&&!Xg(a.extent,this.previousExtent_))&&(this.dispatchEvent(new pf(vu.MOVESTART,this,i)),this.previousExtent_=O1(this.previousExtent_)),this.previousExtent_&&!a.viewHints[ka.ANIMATING]&&!a.viewHints[ka.INTERACTING]&&!Xg(a.extent,this.previousExtent_)&&(this.dispatchEvent(new pf(vu.MOVEEND,this,a)),rI(a.extent,this.previousExtent_))),this.dispatchEvent(new pf(vu.POSTRENDER,this,a)),this.renderComplete_=(this.hasListener(vu.LOADSTART)||this.hasListener(vu.LOADEND)||this.hasListener(go.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Eu("removelayer",n)),this.set(Aa.LAYERGROUP,e)}setSize(e){this.set(Aa.SIZE,e)}setTarget(e){this.set(Aa.TARGET,e)}setView(e){if(!e||e instanceof Jo){this.set(Aa.VIEW,e);return}this.set(Aa.VIEW,new Jo);const n=this;e.then(function(r){n.setView(new Jo(r))})}updateSize(){const e=this.getTargetElement();let n;if(e){let i,a;if(ku(e)){const o=e.getContext("2d").getTransform();i=e.width/o.a,a=e.height/o.d}else{const o=getComputedStyle(e);i=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),a=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(i)&&!isNaN(a)&&(n=[Math.max(0,i),Math.max(0,a)],!nD(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&_I("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!Zu(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function v9(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new ym({layers:t.layers});n[Aa.LAYERGROUP]=r,n[Aa.TARGET]=t.target,n[Aa.VIEW]=t.view instanceof Jo?t.view:new Jo;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new fo(t.controls.slice()):(_r(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let a;t.interactions!==void 0&&(Array.isArray(t.interactions)?a=new fo(t.interactions.slice()):(_r(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new fo(t.overlays.slice()):(_r(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new fo,{controls:i,interactions:a,keyboardEventTarget:e,overlays:o,values:n}}class FN extends I1{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(In.CHANGE)}release(){this.setState(dn.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==dn.EMPTY){if(this.state!==dn.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){sr()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=n-r+1e3/60;return i>=this.transition_?1:gI(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function _2(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const E9=new Error("disposed"),D9=[256,256];class xD extends FN{constructor(e){const n=dn.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=_2(this.data_);return e?[e.width,e.height]:D9}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==dn.IDLE&&this.state!==dn.ERROR)return;this.state=dn.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=dn.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=dn.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(E9),this.controller_=null),super.disposeInternal()}}class aj extends FN{constructor(e,n,r,i,a,o){super(e,n,o),this.crossOrigin_=i==null?void 0:i.crossOrigin,this.referrerPolicy_=i==null?void 0:i.referrerPolicy,this.src_=r,this.key=r,this.image_,mo?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_),this.referrerPolicy_!==void 0&&(this.image_.referrerPolicy=this.referrerPolicy_)),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(e){this.image_=e,this.state=dn.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}getReferrerPolicy(){return this.referrerPolicy_}handleImageError_(){this.state=dn.ERROR,this.unlistenImage_(),this.image_=R9(),this.changed()}handleImageLoad_(){if(mo)this.state=dn.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=dn.LOADED:this.state=dn.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==dn.ERROR&&(this.state=dn.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_),this.referrerPolicy_!==void 0&&(this.image_.referrerPolicy=this.referrerPolicy_)),this.state==dn.IDLE&&(this.state=dn.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$7(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function R9(){const t=Bi(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class KN{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function lf(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new KN(t,e,n,r)}let $b;const Bf=[];function pD(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function Vb(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function T9(){if($b===void 0){const t=Bi(6,6,Bf);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",pD(t,4,5,4,0),pD(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;$b=Vb(e,0)||Vb(e,4)||Vb(e,8),G1(t),Bf.push(t.canvas)}return $b}function yD(t,e,n,r){const i=NN(n,e,t);let a=WE(e,r,n);const o=e.getMetersPerUnit();o!==void 0&&(a*=o);const c=t.getMetersPerUnit();c!==void 0&&(a/=c);const u=t.getExtent();if(!u||cm(u,i)){const h=WE(t,a,i)/a;isFinite(h)&&h>0&&(a/=h)}return a}function M9(t,e,n,r){const i=qh(n);let a=yD(t,e,i,r);return(!isFinite(a)||a<=0)&&cI(n,function(o){return a=yD(t,e,o,r),isFinite(a)&&a>0}),a}function I9(t,e,n,r,i,a,o,c,u,h,m,_,p,g){const C=Bi(Math.round(n*t),Math.round(n*e),Bf);if(_||(C.imageSmoothingEnabled=!1),u.length===0)return C.canvas;C.scale(n,n);function y(k){return Math.round(k*n)/n}C.globalCompositeOperation="lighter";const N=So();u.forEach(function(k,B,G){f8(N,k.extent)});let v;const P=n/r,w=(_?1:1+Math.pow(2,-24))/P;v=Bi(Math.round(ur(N)*P),Math.round(Xa(N)*P),Bf),_||(v.imageSmoothingEnabled=!1),u.forEach(function(k,B,G){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){v.save();const Y=(k.clipExtent[0]-N[0])*P,se=-(k.clipExtent[3]-N[3])*P,X=ur(k.clipExtent)*P,z=Xa(k.clipExtent)*P;v.rect(_?Y:Math.round(Y),_?se:Math.round(se),_?X:Math.round(Y+X)-Math.round(Y),_?z:Math.round(se+z)-Math.round(se)),v.clip()}const U=(k.extent[0]-N[0])*P,I=-(k.extent[3]-N[3])*P,E=ur(k.extent)*P,A=Xa(k.extent)*P;v.drawImage(k.image,h,h,k.image.width-2*h,k.image.height-2*h,_?U:Math.round(U),_?I:Math.round(I),_?E:Math.round(U+E)-Math.round(U),_?A:Math.round(I+A)-Math.round(I)),k.clipExtent&&v.restore()}});const M=h0(o);return c.getTriangles().forEach(function(k,B,G){const U=k.source,I=k.target;let E=U[0][0],A=U[0][1],Y=U[1][0],se=U[1][1],X=U[2][0],z=U[2][1];const $=y((I[0][0]-M[0])/a),F=y(-(I[0][1]-M[1])/a),L=y((I[1][0]-M[0])/a),re=y(-(I[1][1]-M[1])/a),fe=y((I[2][0]-M[0])/a),T=y(-(I[2][1]-M[1])/a),j=E,K=A;E=0,A=0,Y-=j,se-=K,X-=j,z-=K;const J=[[Y,se,0,0,L-$],[X,z,0,0,fe-$],[0,0,Y,se,re-F],[0,0,X,z,T-F]],q=u8(J);if(!q)return;if(C.save(),C.beginPath(),T9()||!_){C.moveTo(L,re);const ce=4,me=$-L,Ce=F-re;for(let ge=0;ge<ce;ge++)C.lineTo(L+y((ge+1)*me/ce),re+y(ge*Ce/(ce-1))),ge!=ce-1&&C.lineTo(L+y((ge+1)*me/ce),re+y((ge+1)*Ce/(ce-1)));C.lineTo(fe,T)}else C.moveTo(L,re),C.lineTo($,F),C.lineTo(fe,T);C.clip(),C.transform(q[0],q[2],q[1],q[3],$,F),C.translate(N[0]-j,N[3]-K);let V;if(v)V=v.canvas,C.scale(w,-w);else{const ce=u[0],me=ce.extent;V=ce.image,C.scale(ur(me)/V.width,-Xa(me)/V.height)}C.drawImage(V,0,0),C.restore()}),v&&(G1(v),Bf.push(v.canvas)),m&&(C.save(),C.globalCompositeOperation="source-over",C.strokeStyle="black",C.lineWidth=1,c.getTriangles().forEach(function(k,B,G){const U=k.target,I=(U[0][0]-M[0])/a,E=-(U[0][1]-M[1])/a,A=(U[1][0]-M[0])/a,Y=-(U[1][1]-M[1])/a,se=(U[2][0]-M[0])/a,X=-(U[2][1]-M[1])/a;C.beginPath(),C.moveTo(A,Y),C.lineTo(I,E),C.lineTo(se,X),C.closePath(),C.stroke()}),C.restore()),C.canvas}const j9=10,bD=.25;class O9{constructor(e,n,r,i,a,o,c){this.sourceProj_=e,this.targetProj_=n;let u={};const h=c?l2(w=>fa(c,NN(w,this.targetProj_,this.sourceProj_))):Xp(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const M=w[0]+"/"+w[1];return u[M]||(u[M]=h(w)),u[M]},this.maxSourceExtent_=i,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ur(i)>=ur(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ur(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ur(this.targetProj_.getExtent()):null;const m=h0(r),_=P1(r),p=L1(r),g=w1(r),C=this.transformInv_(m),y=this.transformInv_(_),N=this.transformInv_(p),v=this.transformInv_(g),P=j9+(o?Math.max(0,Math.ceil(Math.log2(s2(r)/(o*o*256*256)))):0);if(this.addQuad_(m,_,p,g,C,y,N,v,P),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(M,k,B){w=Math.min(w,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(M=>{if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-w>this.sourceWorldWidth_/2){const k=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];k[0][0]-w>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-w>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-w>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);const B=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-B<this.sourceWorldWidth_/2&&(M.source=k)}})}u={}}addTriangle_(e,n,r,i,a,o){this.triangles_.push({source:[i,a,o],target:[e,n,r]})}addQuad_(e,n,r,i,a,o,c,u,h){const m=$p([a,o,c,u]),_=this.sourceWorldWidth_?ur(m)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&_>.5&&_<1;let C=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const N=$p([e,n,r,i]);C=ur(N)/this.targetWorldWidth_>bD||C}!g&&this.sourceProj_.isGlobal()&&_&&(C=_>bD||C)}if(!C&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!vl(m,this.maxSourceExtent_))return;let y=0;if(!C&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(u[0])||!isFinite(u[1]))){if(h>0)C=!0;else if(y=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(h>0){if(!C){const N=[(e[0]+r[0])/2,(e[1]+r[1])/2],v=this.transformInv_(N);let P;g?P=(Af(a[0],p)+Af(c[0],p))/2-Af(v[0],p):P=(a[0]+c[0])/2-v[0];const w=(a[1]+c[1])/2-v[1];C=P*P+w*w>this.errorThresholdSquared_}if(C){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const N=[(n[0]+r[0])/2,(n[1]+r[1])/2],v=this.transformInv_(N),P=[(i[0]+e[0])/2,(i[1]+e[1])/2],w=this.transformInv_(P);this.addQuad_(e,n,N,P,a,o,v,w,h-1),this.addQuad_(P,N,r,i,w,v,c,u,h-1)}else{const N=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(N),P=[(r[0]+i[0])/2,(r[1]+i[1])/2],w=this.transformInv_(P);this.addQuad_(e,N,P,i,a,v,w,u,h-1),this.addQuad_(N,n,r,P,v,o,c,w,h-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(y&11)==0&&this.addTriangle_(e,r,i,a,c,u),(y&14)==0&&this.addTriangle_(e,r,n,a,c,o),y&&((y&13)==0&&this.addTriangle_(n,i,e,o,u,a),(y&7)==0&&this.addTriangle_(n,i,r,o,u,c))}calculateSourceExtent(){const e=So();return this.triangles_.forEach(function(n,r,i){const a=n.source;Ag(e,a[0]),Ag(e,a[1]),Ag(e,a[2])}),e}getTriangles(){return this.triangles_}}const w9=.5;class lj extends FN{constructor(e,n,r,i,a,o,c,u,h,m,_,p){super(a,dn.IDLE,p),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=c,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=o||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=i.getTileCoordExtent(this.wrappedTileCoord_),C=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const N=C?Qh(g,C):g;if(s2(N)===0){this.state=dn.EMPTY;return}const v=e.getExtent();v&&(y?y=Qh(y,v):y=v);const P=i.getResolution(this.wrappedTileCoord_[0]),w=M9(e,r,N,P);if(!isFinite(w)||w<=0){this.state=dn.EMPTY;return}const M=m!==void 0?m:w9;if(this.triangulation_=new O9(e,r,N,y,w*M,P),this.triangulation_.getTriangles().length===0){this.state=dn.EMPTY;return}this.sourceZ_=n.getZForResolution(w);let k=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(k[1]=Ur(k[1],y[1],y[3]),k[3]=Ur(k[3],y[1],y[3])):k=Qh(k,y)),!s2(k))this.state=dn.EMPTY;else{let B=0,G=0;e.canWrapX()&&(B=ur(v),G=Math.floor((k[0]-v[0])/B)),hI(k.slice(),e,!0).forEach(I=>{const E=n.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let A=E.minX;A<=E.maxX;A++)for(let Y=E.minY;Y<=E.maxY;Y++){const se=G*B;this.sourceTiles_.push({getTile:()=>h(this.sourceZ_,A,Y,c),offset:se})}++G}),this.sourceTiles_.length===0&&(this.state=dn.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{var i;const r=n.tile;if(r&&r.getState()==dn.LOADED){const a=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);a[0]+=n.offset,a[2]+=n.offset;const o=(i=this.clipExtent_)==null?void 0:i.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),e.push({extent:a,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=dn.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(n),c=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=I9(i,a,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=dn.LOADED}this.changed()}load(){for(const e of this.sourceTiles_)e.tile=e.getTile();if(this.state==dn.IDLE){this.state=dn.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==dn.IDLE||r==dn.LOADING){e++;const i=nr(n,In.CHANGE,a=>{const o=n.getState();(o==dn.LOADED||o==dn.ERROR||o==dn.EMPTY)&&(ei(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,i){n.getState()==dn.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ei),this.sourcesListenerKeys_=null}release(){this.canvas_&&(G1(this.canvas_.getContext("2d")),Bf.push(this.canvas_),this.canvas_=null),this.sourceTiles_.length=0,super.release()}}class CD{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof T1&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return _r(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return _r(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){_r(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function s1(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function L9(t,e,n){return t+"/"+e+"/"+n}function Cp(t,e,n,r,i){return`${rr(t)},${e},${L9(n,r,i)}`}function P9(t){return A9(t[0],t[1],t[2])}function A9(t,e,n){return(e<<t)+n}function k9(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const a=e.getFullTileRange(n);return a?a.containsXY(r,i):!0}class oj{constructor(){cr(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Zp(),{get:(e,n)=>{if(typeof Zp()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(e,n,r)=>(this.push_(n,r),!0)})}push_(...e){const n=this.instructions_,r=this.zIndex+this.offset_;n[r]||(n[r]=[]),n[r].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;++r){const a=n[r];if(typeof a=="function"){a(e);continue}const o=n[++r];if(typeof e[a]=="function")e[a](...o);else{if(typeof o=="function"){e[a]=o(e);continue}e[a]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const U9=5;class B9 extends N_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=U9}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return sr()}getData(e){return null}prepareFrame(e){return sr()}renderFrame(e,n){return sr()}forEachFeatureAtCoordinate(e,n,r,i,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===Rn.LOADED||n.getState()===Rn.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=Rn.LOADED&&n!=Rn.ERROR&&e.addEventListener(In.CHANGE,this.boundHandleImageChange_),n==Rn.IDLE&&(e.load(),n=e.getState()),n==Rn.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const ND=[];let Cf=null;function G9(){Cf=Bi(1,1,void 0,{willReadFrequently:!0})}class cj extends B9{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ec(),this.pixelTransform=ec(),this.inversePixelTransform=ec(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,r){Cf||G9(),Cf.clearRect(0,0,1,1);let i;try{Cf.drawImage(e,n,r,1,1,0,0,1,1),i=Cf.getImageData(0,0,1,1).data}catch{return Cf=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){const i=this.getLayer().getClassName();let a,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Zu(Jh(e.style.backgroundColor),Jh(r)))){const c=e.firstElementChild;ku(c)&&(o=c.getContext("2d"))}if(o&&tk(o.canvas.style.transform,n)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=mo?PI():document.createElement("div"),a.className=i;let c=a.style;c.position="absolute",c.width="100%",c.height="100%",o=Bi();const u=o.canvas;a.appendChild(u),c=u.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=a,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){const i=h0(r),a=P1(r),o=L1(r),c=w1(r);fa(n.coordinateToPixelTransform,i),fa(n.coordinateToPixelTransform,a),fa(n.coordinateToPixelTransform,o),fa(n.coordinateToPixelTransform,c);const u=this.inversePixelTransform;fa(u,i),fa(u,a),fa(u,o),fa(u,c),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,n){const r=e.extent,i=e.viewState.resolution,a=e.viewState.rotation,o=e.pixelRatio,c=Math.round(ur(r)/i*o),u=Math.round(Xa(r)/i*o);Td(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,a,-c/2,-u/2),vI(this.inversePixelTransform,this.pixelTransform);const h=ek(this.pixelTransform);if(this.useContainer(n,h,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=c||m.height!=u?(m.width=c,m.height=u):this.context.clearRect(0,0,c,u),h!==m.style.transform&&(m.style.transform=h)}}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){const a=new nj(e,this.inversePixelTransform,r,n);i.dispatchEvent(a)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(go.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(go.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new oj),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(go.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(go.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,a,o,c){const u=a/2,h=o/2,m=i/n,_=-m,p=-e[0]+c,g=-e[1];return Td(this.tempTransform,u,h,m,_,-r,p,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function zb(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const r=t[n],i=r.has(e);return i||r.add(e),!i}function W9(t,e,n){const r=t[n];return r?r.delete(e):!1}function SD(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=Qh(e,Au(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=Qh(e,i))}return e}class F9 extends cj{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=So(),this.tempTileRange_=new KN(0,0,0,0),this.tempTileCoord_=s1(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new CD(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new CD(512)),this.sourceTileCache_}getOrCreateTile(e,n,r,i){const a=this.tileCache_,c=this.getLayer().getSource(),u=Cp(c,c.getKey(),e,n,r);let h;if(a.containsKey(u))h=a.get(u);else{const m=i.viewState.projection,_=c.getProjection();if(h=c.getTile(e,n,r,i.pixelRatio,m,!_||bp(_,m)?void 0:this.getSourceTileCache()),!h)return null;a.set(u,h)}return h}getTile(e,n,r,i){const a=this.getOrCreateTile(e,n,r,i);return a||null}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=fa(n.pixelToCoordinateTransform,e.slice()),a=r.getExtent();if(a&&!cm(a,i))return null;const o=n.viewState,c=r.getRenderSource(),u=c.getTileGridForProjection(o.projection),h=c.getTilePixelRatio(n.pixelRatio);for(let m=u.getZForResolution(o.resolution);m>=u.getMinZoom();--m){const _=u.getTileCoordForCoordAndZ(i,m),p=this.getTile(m,_[1],_[2],n);if(!p||p.getState()!==dn.LOADED)continue;const g=u.getOrigin(m),C=Dl(u.getTileSize(m)),y=u.getResolution(m);let N;if(p instanceof aj||p instanceof lj)N=p.getImage();else if(p instanceof xD){if(N=_2(p.getData()),!N)continue}else continue;const v=Math.floor(h*((i[0]-g[0])/y-_[1]*C[0])),P=Math.floor(h*((g[1]-i[1])/y-_[2]*C[1])),w=Math.round(h*c.getGutterForProjection(o.projection));return this.getImageData(N,v+w,P+w)}return null}prepareFrame(e){var i;this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===n.getKey()&&(this.tileCache_.clear(),(i=this.sourceTileCache_)==null||i.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,n,r,i,a){const o=e.viewState,c=this.getLayer(),u=c.getRenderSource(),h=u.getTileGridForProjection(o.projection),m=rr(u);m in e.wantedTiles||(e.wantedTiles[m]={});const _=e.wantedTiles[m],p=c.getMapInternal(),g=Math.max(r-a,h.getMinZoom(),h.getZForResolution(Math.min(c.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):h.getResolution(0)),u.zDirection)),C=o.rotation,y=C?dI(o.center,o.resolution,C,e.size):void 0;for(let N=r;N>=g;--N){const v=h.getTileRangeForExtentAndZ(n,N,this.tempTileRange_),P=h.getResolution(N);for(let w=v.minX;w<=v.maxX;++w)for(let M=v.minY;M<=v.maxY;++M){if(C&&!h.tileCoordIntersectsViewport([N,w,M],y))continue;const k=this.getTile(N,w,M,e);if(!k||!zb(i,k,N))continue;const G=k.getKey();if(_[G]=!0,k.getState()===dn.IDLE&&!e.tileQueue.isKeyQueued(G)){const U=s1(N,w,M,this.tempTileCoord_);e.tileQueue.enqueue([k,m,h.getTileCoordCenter(U),P])}}}}findStaleTile_(e,n){const r=this.tileCache_,i=e[0],a=e[1],o=e[2],c=this.getStaleKeys();for(let u=0;u<c.length;++u){const h=Cp(this.getLayer().getSource(),c[u],i,a,o);if(r.containsKey(h)){const m=r.peek(h);if(m.getState()===dn.LOADED)return m.endTransition(rr(this)),zb(n,m,i),!0}}return!1}findAltTiles_(e,n,r,i){const a=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!a)return!1;let o=!0;const c=this.tileCache_,u=this.getLayer().getRenderSource(),h=u.getKey();for(let m=a.minX;m<=a.maxX;++m)for(let _=a.minY;_<=a.maxY;++_){const p=Cp(u,h,r,m,_);let g=!1;if(c.containsKey(p)){const C=c.peek(p);C.getState()===dn.LOADED&&(zb(i,C,r),g=!0)}g||(o=!1)}return o}renderFrame(e,n){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,a=i.projection,o=i.resolution,c=i.center,u=e.pixelRatio,h=this.getLayer(),m=h.getSource(),_=m.getTileGridForProjection(a),p=_.getZForResolution(o,m.zDirection),g=_.getResolution(p),C=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==C&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=C):this.renderedSourceKey_=C;let y=e.extent;const N=m.getTilePixelRatio(u);this.prepareContainer(e,n);const v=this.context.canvas.width,P=this.context.canvas.height,w=r.extent&&Au(r.extent);w&&(y=Qh(y,Au(r.extent)));const M=g*v/2/N,k=g*P/2/N,B=[c[0]-M,c[1]-k,c[0]+M,c[1]+k],G={};this.renderedTiles.length=0;const U=h.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const L=_.getZForResolution(i.nextResolution,m.zDirection),re=SD(e,e.nextExtent);this.enqueueTiles(e,re,L,G,U)}const I=SD(e,y);if(this.enqueueTiles(e,I,p,G,0),U>0&&setTimeout(()=>{this.enqueueTiles(e,I,p-1,G,U-1)},0),!(p in G))return this.container;const E=rr(this),A=e.time;for(const L of G[p]){const re=L.getState();if(re===dn.EMPTY)continue;const fe=L.tileCoord;if(re===dn.LOADED&&L.getAlpha(E,A)===1){L.endTransition(E);continue}if(re!==dn.ERROR&&(this.renderComplete=!1),this.findStaleTile_(fe,G)){W9(G,L,p),e.animate=!0;continue}if(this.findAltTiles_(_,fe,p+1,G))continue;const K=_.getMinZoom();for(let J=p-1;J>=K&&!this.findAltTiles_(_,fe,J,G);--J);}const Y=g/o*u/N,se=this.getRenderContext(e);Td(this.tempTransform,v/2,P/2,Y,Y,0,-v/2,-P/2),r.extent&&this.clipUnrotated(se,e,w),m.getInterpolate()||(se.imageSmoothingEnabled=!1),this.preRender(se,e);const X=Object.keys(G).map(Number);X.sort(Cd);let z;const $=[],F=[];for(let L=X.length-1;L>=0;--L){const re=X[L],fe=m.getTilePixelSize(re,u,a),j=_.getResolution(re)/g,K=fe[0]*j*Y,J=fe[1]*j*Y,q=_.getTileCoordForCoordAndZ(h0(B),re),V=_.getTileCoordExtent(q),ce=fa(this.tempTransform,[N*(V[0]-B[0])/g,N*(B[3]-V[3])/g]),me=N*m.getGutterForProjection(a);for(const Ce of G[re]){if(Ce.getState()!==dn.LOADED)continue;const ge=Ce.tileCoord,Ge=q[1]-ge[1],te=Math.round(ce[0]-(Ge-1)*K),he=q[2]-ge[2],de=Math.round(ce[1]-(he-1)*J),Q=Math.round(ce[0]-Ge*K),ee=Math.round(ce[1]-he*J),Z=te-Q,le=de-ee,xe=X.length===1;let be=!1;z=[Q,ee,Q+Z,ee,Q+Z,ee+le,Q,ee+le];for(let ne=0,ie=$.length;ne<ie;++ne)if(!xe&&re<F[ne]){const pe=$[ne];vl([Q,ee,Q+Z,ee+le],[pe[0],pe[3],pe[4],pe[7]])&&(be||(se.save(),be=!0),se.beginPath(),se.moveTo(z[0],z[1]),se.lineTo(z[2],z[3]),se.lineTo(z[4],z[5]),se.lineTo(z[6],z[7]),se.moveTo(pe[6],pe[7]),se.lineTo(pe[4],pe[5]),se.lineTo(pe[2],pe[3]),se.lineTo(pe[0],pe[1]),se.clip())}$.push(z),F.push(re),this.drawTile(Ce,e,Q,ee,Z,le,me,xe),be&&se.restore(),this.renderedTiles.unshift(Ce),this.updateUsedTiles(e.usedTiles,m,Ce)}}if(this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Xg(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=u,this.postRender(this.context,e),r.extent&&se.restore(),se.imageSmoothingEnabled=!0,this.renderComplete){const L=(re,fe)=>{var J;const T=rr(m),j=fe.wantedTiles[T],K=j?Object.keys(j).length:0;this.updateCacheSize(K),this.tileCache_.expireCache(),(J=this.sourceTileCache_)==null||J.expireCache()};e.postRenderFunctions.push(L)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,r,i,a,o,c,u){let h;if(e instanceof xD){if(h=_2(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const m=this.getRenderContext(n),_=rr(this),p=n.layerStatesArray[n.layerIndex],g=p.opacity*(u?e.getAlpha(_,n.time):1),C=g!==m.globalAlpha;C&&(m.save(),m.globalAlpha=g),m.drawImage(h,c,c,h.width-2*c,h.height-2*c,r,i,a,o),C&&m.restore(),g!==p.opacity?n.animate=!0:u&&e.endTransition(_)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,r){const i=rr(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const Yx={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class K9 extends W1{constructor(e){e=e||{};const n=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Yx.PRELOAD)}setPreload(e){this.set(Yx.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Yx.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Yx.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class vD extends K9{constructor(e){super(e)}createRenderer(){return new F9(this,{cacheSize:this.getCacheSize()})}}class dj{drawCustom(e,n,r,i,a){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const cn={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},$x=[cn.FILL],Uu=[cn.STROKE],Lh=[cn.BEGIN_PATH],ED=[cn.CLOSE_PATH];class T_ extends dj{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,a=this.coordinates;let o=a.length;for(let c=0,u=e.length;c<u;c+=n)i[0]=e[c],i[1]=e[c+1],cm(r,i)&&(a[o++]=i[0],a[o++]=i[1]);return o}appendFlatLineCoordinates(e,n,r,i,a,o){const c=this.coordinates;let u=c.length;const h=this.getBufferedMaxExtent();o&&(n+=i);let m=e[n],_=e[n+1];const p=this.tmpCoordinate_;let g=!0,C,y,N;for(C=n+i;C<r;C+=i)p[0]=e[C],p[1]=e[C+1],N=t2(h,p),N!==y?(g&&(c[u++]=m,c[u++]=_,g=!1),c[u++]=p[0],c[u++]=p[1]):N===ha.INTERSECTING?(c[u++]=p[0],c[u++]=p[1],g=!1):g=!0,m=p[0],_=p[1],y=N;return(a&&g||C===n+i)&&(c[u++]=m,c[u++]=_),u}drawCustomCoordinates_(e,n,r,i,a){for(let o=0,c=r.length;o<c;++o){const u=r[o],h=this.appendFlatLineCoordinates(e,n,u,i,!1,!1);a.push(h),n=u}return n}drawCustom(e,n,r,i,a){this.beginGeometry(e,n,a);const o=e.getType(),c=e.getStride(),u=this.coordinates.length;let h,m,_,p,g;switch(o){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),p=[];const C=e.getEndss();g=0;for(let y=0,N=C.length;y<N;++y){const v=[];g=this.drawCustomCoordinates_(h,g,C[y],c,v),p.push(v)}this.instructions.push([cn.CUSTOM,u,p,e,r,$E,a]),this.hitDetectionInstructions.push([cn.CUSTOM,u,p,e,i||r,$E,a]);break;case"Polygon":case"MultiLineString":_=[],h=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(h,0,e.getEnds(),c,_),this.instructions.push([cn.CUSTOM,u,_,e,r,Jp,a]),this.hitDetectionInstructions.push([cn.CUSTOM,u,_,e,i||r,Jp,a]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(h,0,h.length,c,!1,!1),this.instructions.push([cn.CUSTOM,u,m,e,r,Df,a]),this.hitDetectionInstructions.push([cn.CUSTOM,u,m,e,i||r,Df,a]);break;case"MultiPoint":h=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(h,c),m>u&&(this.instructions.push([cn.CUSTOM,u,m,e,r,Df,a]),this.hitDetectionInstructions.push([cn.CUSTOM,u,m,e,i||r,Df,a]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),m=this.coordinates.length,this.instructions.push([cn.CUSTOM,u,m,e,r,void 0,a]),this.hitDetectionInstructions.push([cn.CUSTOM,u,m,e,i||r,void 0,a]);break}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[cn.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[cn.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const r=e.length;let i,a,o=-1;for(n=0;n<r;++n)i=e[n],a=i[0],a==cn.END_GEOMETRY?o=n:a==cn.BEGIN_GEOMETRY&&(i[2]=n,J6(this.hitDetectionInstructions,o,n),o=-1)}fillStyleToState(e,n={}){if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=Oc(r||Sl)}else n.fillStyle=void 0;return n}strokeStyleToState(e,n={}){if(e){const r=e.getColor();n.strokeStyle=Oc(r||t_);const i=e.getLineCap();n.lineCap=i!==void 0?i:um;const a=e.getLineDash();n.lineDash=a?a.slice():Nd;const o=e.getLineDashOffset();n.lineDashOffset=o||Sd;const c=e.getLineJoin();n.lineJoin=c!==void 0?c:hm;const u=e.getWidth();n.lineWidth=u!==void 0?u:n_;const h=e.getMiterLimit();n.miterLimit=h!==void 0?h:e_;const m=e.getOffset();n.strokeOffset=m??X7,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0,n.strokeOffset=void 0;return n}setFillStrokeStyle(e,n){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(n,r)}createFill(e){const n=e.fillStyle,r=[cn.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[cn.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){const r=e.strokeStyle,i=e.lineCap,a=e.lineDash,o=e.lineDashOffset,c=e.lineJoin,u=e.lineWidth,h=e.miterLimit,m=e.strokeOffset;(e.currentStrokeStyle!=r||e.currentLineCap!=i||a!=e.currentLineDash&&!Zu(e.currentLineDash,a)||e.currentLineDashOffset!=o||e.currentLineJoin!=c||e.currentLineWidth!=u||e.currentMiterLimit!=h||e.currentStrokeOffset!=m)&&(n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=a,e.currentLineDashOffset=o,e.currentLineJoin=c,e.currentLineWidth=u,e.currentMiterLimit=h,e.currentStrokeOffset=m)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[cn.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=rI(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;fN(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Q9 extends T_{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!cm(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),a=e.getStride(),o=this.coordinates.length,c=this.appendFlatPointCoordinates(i,a);this.instructions.push([cn.DRAW_IMAGE,o,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([cn.DRAW_IMAGE,o,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),a=[];for(let u=0,h=i.length;u<h;u+=e.getStride())(!this.maxExtent||cm(this.maxExtent,i.slice(u,u+2)))&&a.push(i[u],i[u+1]);const o=this.coordinates.length,c=this.appendFlatPointCoordinates(a,2);this.instructions.push([cn.DRAW_IMAGE,o,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([cn.DRAW_IMAGE,o,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const r=e.getAnchor(),i=e.getSize(),a=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class Y9 extends T_{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i,a){const o=this.coordinates.length,c=this.appendFlatLineCoordinates(e,n,r,i,!1,!1);return this.instructions.push([cn.MOVE_TO_LINE_TO,o,c,a*this.pixelRatio]),this.hitDetectionInstructions.push([cn.MOVE_TO_LINE_TO,o,c,a]),r}drawLineString(e,n,r){const i=this.state,a=i.strokeStyle,o=i.lineWidth,c=i.strokeOffset;if(a===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([cn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nd,Sd],Lh);const u=e.getFlatCoordinates(),h=e.getStride();this.drawFlatCoordinates_(u,0,u.length,h,c),this.hitDetectionInstructions.push(Uu),this.endGeometry(n)}drawMultiLineString(e,n,r){const i=this.state,a=i.strokeStyle,o=i.lineWidth,c=i.strokeOffset;if(a===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([cn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nd,Sd],Lh);const u=e.getEnds(),h=e.getFlatCoordinates(),m=e.getStride();let _=0;for(let p=0,g=u.length;p<g;++p)_=this.drawFlatCoordinates_(h,_,u[p],m,c);this.hitDetectionInstructions.push(Uu),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Uu),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Uu),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Lh)}}class DD extends T_{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i,a){const o=this.state,c=o.fillStyle!==void 0,u=o.strokeStyle!==void 0,h=r.length;this.instructions.push(Lh),this.hitDetectionInstructions.push(Lh);for(let m=0;m<h;++m){const _=r[m],p=this.coordinates.length,g=this.appendFlatLineCoordinates(e,n,_,i,!0,!u);this.instructions.push([cn.MOVE_TO_LINE_TO,p,g,a*this.pixelRatio,!0]),this.hitDetectionInstructions.push([cn.MOVE_TO_LINE_TO,p,g,a,!0]),u&&(this.instructions.push(ED),this.hitDetectionInstructions.push(ED)),n=_}return c&&(this.instructions.push($x),this.hitDetectionInstructions.push($x)),u&&(this.instructions.push(Uu),this.hitDetectionInstructions.push(Uu)),n}drawCircle(e,n,r){const i=this.state,a=i.fillStyle,o=i.strokeStyle,c=i.strokeOffset;if(a===void 0&&o===void 0||this.handleStrokeOffset_(()=>this.drawCircle(e,n,r)))return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([cn.SET_FILL_STYLE,Sl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([cn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nd,Sd]);const u=e.getFlatCoordinates(),h=e.getStride(),m=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,h,!1,!1);const _=[cn.CIRCLE,m,c];this.instructions.push(Lh,_),this.hitDetectionInstructions.push(Lh,_),i.fillStyle!==void 0&&(this.instructions.push($x),this.hitDetectionInstructions.push($x)),i.strokeStyle!==void 0&&(this.instructions.push(Uu),this.hitDetectionInstructions.push(Uu)),this.endGeometry(n)}drawPolygon(e,n,r){const i=this.state,a=i.fillStyle,o=i.strokeStyle,c=i.strokeOffset;if(a===void 0&&o===void 0||this.handleStrokeOffset_(()=>this.drawPolygon(e,n,r)))return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([cn.SET_FILL_STYLE,Sl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([cn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nd,Sd]);const u=e.getEnds(),h=e.getOrientedFlatCoordinates(),m=e.getStride();this.drawFlatCoordinatess_(h,0,u,m,c),this.endGeometry(n)}drawMultiPolygon(e,n,r){const i=this.state,a=i.fillStyle,o=i.strokeStyle,c=i.strokeOffset;if(a===void 0&&o===void 0||this.handleStrokeOffset_(()=>this.drawMultiPolygon(e,n,r)))return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([cn.SET_FILL_STYLE,Sl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([cn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nd,Sd]);const u=e.getEndss(),h=e.getOrientedFlatCoordinates(),m=e.getStride();let _=0;for(let p=0,g=u.length;p<g;++p)_=this.drawFlatCoordinatess_(h,_,u[p],m,c);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=Sh(n[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}handleStrokeOffset_(e){const n=this.state,r=n.fillStyle,i=n.strokeStyle,a=n.strokeOffset;return Math.abs(a)>0&&r!==void 0&&i!==void 0?(n.strokeStyle=void 0,n.strokeOffset=0,e(),n.fillStyle=void 0,n.strokeStyle=i,n.strokeOffset=a,e(),n.fillStyle=r,!0):!1}}function $9(t,e,n,r,i){const a=[];let o=n,c=0,u=e.slice(n,2);for(;c<t&&o+i<r;){const[h,m]=u.slice(-2),_=e[o+i],p=e[o+i+1],g=Math.sqrt((_-h)*(_-h)+(p-m)*(p-m));if(c+=g,c>=t){const C=(t-c+g)/g,y=co(h,_,C),N=co(m,p,C);u.push(y,N),a.push(u),u=[y,N],c==t&&(o+=i),c=0}else if(c<t)u.push(e[o+i],e[o+i+1]),o+=i;else{const C=g-c,y=co(h,_,C/g),N=co(m,p,C/g);u.push(y,N),a.push(u),u=[y,N],c=0,o+=i}}return c>0&&a.push(u),a}function V9(t,e,n,r,i){let a=n,o=n,c=0,u=0,h=n,m,_,p,g,C,y,N,v,P,w;for(_=n;_<r;_+=i){const M=e[_],k=e[_+1];C!==void 0&&(P=M-C,w=k-y,g=Math.sqrt(P*P+w*w),N!==void 0&&(u+=p,m=Math.acos((N*P+v*w)/(p*g)),m>t&&(u>c&&(c=u,a=h,o=_),u=0,h=_-i)),p=g,N=P,v=w),C=M,y=k}return u+=g,u>c?[h,_]:[a,o]}const n1={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class z9 extends T_{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Sl]={fillStyle:Sl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){const i=this.textFillState_,a=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!a)return;const c=this.coordinates;let u=c.length;const h=e.getType();let m=null,_=e.getStride();if(o.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!vl(this.maxExtent,e.getExtent()))return;let p;if(m=e.getFlatCoordinates(),h=="LineString")p=[m.length];else if(h=="MultiLineString")p=e.getEnds();else if(h=="Polygon")p=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const N=e.getEndss();p=[];for(let v=0,P=N.length;v<P;++v)p.push(N[v][0])}this.beginGeometry(e,n,r);const g=o.repeat,C=g?void 0:o.textAlign;let y=0;for(let N=0,v=p.length;N<v;++N){let P;g?P=$9(g*this.resolution,m,y,p[N],_):P=[m.slice(y,p[N])];for(let w=0,M=P.length;w<M;++w){const k=P[w];let B=0,G=k.length;if(C==null){const I=V9(o.maxAngle,k,0,k.length,2);B=I[0],G=I[1]}for(let I=B;I<G;I+=_)c.push(k[I],k[I+1]);const U=c.length;y=p[N],this.drawChars_(u,U),u=U}}this.endGeometry(n)}else{let p=o.overflow?null:[];switch(h){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),_=2;break;case"Polygon":m=e.getFlatInteriorPoint(),o.overflow||p.push(m[2]/this.resolution),_=3;break;case"MultiPolygon":const M=e.getFlatInteriorPoints();m=[];for(let k=0,B=M.length;k<B;k+=3)o.overflow||p.push(M[k+2]/this.resolution),m.push(M[k],M[k+1]);if(m.length===0)return;_=2;break}const g=this.appendFlatPointCoordinates(m,_);if(g===u)return;if(p&&(g-u)/2!==m.length/_){let M=u/2;p=p.filter((k,B)=>{const G=c[(M+B)*2]===m[B*_]&&c[(M+B)*2+1]===m[B*_+1];return G||--M,G})}this.saveTextStates_();const C=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,y=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,n,r);let N=o.padding;if(N!=wh&&(o.scale[0]<0||o.scale[1]<0)){let M=o.padding[0],k=o.padding[1],B=o.padding[2],G=o.padding[3];o.scale[0]<0&&(k=-k,G=-G),o.scale[1]<0&&(M=-M,B=-B),N=[M,k,B,G]}const v=this.pixelRatio;this.instructions.push([cn.DRAW_IMAGE,u,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,N==wh?wh:N.map(function(M){return M*v}),C,y,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]);const P=1/v,w=C?C.slice(0):null;w&&(w[1]=Sl),this.hitDetectionInstructions.push([cn.DRAW_IMAGE,u,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[P,P],NaN,this.declutterMode_,this.declutterImageWithText_,N,w,y,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Sl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:n.font,textAlign:n.textAlign||s_,justify:n.justify,textBaseline:n.textBaseline||e1,scale:n.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,n){const r=this.textStrokeState_,i=this.textState_,a=this.strokeKey_,o=this.textKey_,c=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,h=n1[i.textBaseline],m=this.textOffsetY_*u,_=this.text_,p=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([cn.DRAW_CHARS,e,n,h,i.overflow,c,i.maxAngle,u,m,a,p*u,_,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([cn.DRAW_CHARS,e,n,h,i.overflow,c&&Sl,i.maxAngle,u,m,a,p*u,_,o,1/u,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let r,i,a;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Oc(o.getColor()||Sl)):(i=null,this.textFillState_=i);const c=e.getStroke();if(!c)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const y=c.getLineDash(),N=c.getLineDashOffset(),v=c.getWidth(),P=c.getMiterLimit();a.lineCap=c.getLineCap()||um,a.lineDash=y?y.slice():Nd,a.lineDashOffset=N===void 0?Sd:N,a.lineJoin=c.getLineJoin()||hm,a.lineWidth=v===void 0?n_:v,a.miterLimit=P===void 0?e_:P,a.strokeStyle=Oc(c.getColor()||t_)}r=this.textState_;const u=e.getFont()||zI;e9(u);const h=e.getScaleArray();r.overflow=e.getOverflow(),r.font=u,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||e1,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||wh,r.scale=h===void 0?[1,1]:h;const m=e.getOffsetX(),_=e.getOffsetY(),p=e.getRotateWithView(),g=e.getKeepUpright(),C=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=p===void 0?!1:p,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=C===void 0?0:C,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:rr(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+rr(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const H9={Circle:DD,Default:T_,Image:Q9,LineString:Y9,Polygon:DD,Text:z9};class q9{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const r=this.buildersByZIndex_[n];for(const i in r){const a=r[i].finish();e[n][i]=a}}return e}getBuilder(e,n){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let a=i[n];if(a===void 0){const o=H9[n];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=a}return a}}function X9(t,e,n,r){let i=t[e],a=t[e+1],o=0;for(let c=e+r;c<n;c+=r){const u=t[c],h=t[c+1];o+=Math.sqrt((u-i)*(u-i)+(h-a)*(h-a)),i=u,a=h}return o}function J9(t,e,n,r,i,a){i=i??[],a=a??e;const o=t[0],c=t[1],u=t[t.length-4],h=t[t.length-3];let m,_,p,g,C,y,N,v,P=0;for(let w=0;w<t.length;w+=e){p=m,g=_,C=void 0,y=void 0,w+e<t.length&&(C=t[w+e],y=t[w+e+1]),r&&w===0&&(p=u,g=h),r&&w===t.length-2&&(C=o,y=c),m=t[w],_=t[w+1],[N,v]=Np(m,_,p,g,C,y,n),i[P++]=N,i[P++]=v;for(let M=2;M<a;M++)i[P++]=t[w+M]}return i.length!=P&&(i.length=P),i}function Np(t,e,n,r,i,a,o){let c,u;n!==void 0&&r!==void 0?(c=t-n,u=e-r):i!==void 0&&a!==void 0?(c=i-t,u=a-e):(c=1,u=0);const h=Math.hypot(c,u),m=c/h,_=u/h;if(c=-_,u=m,n===void 0||r===void 0)return[t+c*o,e+u*o];if(i===void 0||a===void 0)return[t+c*o,e+u*o];const p=b8([t,e],[n,r],[i,a]);if(Math.cos(p)>.998)return[t+m*o,e+_*o];const g=Math.cos(p/2),C=Math.sin(p/2),y=C*c+g*u,N=-g*c+C*u,v=y*(1/C),P=N*(1/C);return[t+v*o,e+P*o]}function Z9(t,e,n,r,i,a,o,c,u,h,m,_,p=!0){let g=t[e],C=t[e+1],y=0,N=0,v=0,P=0;function w(){y=g,N=C,e+=r,g=t[e],C=t[e+1],P+=v,v=Math.sqrt((g-y)*(g-y)+(C-N)*(C-N))}do w();while(e<n-r&&P+v<a);let M=v===0?0:(a-P)/v;const k=co(y,g,M),B=co(N,C,M),G=e-r,U=P,I=a+c*u(h,i,m);for(;e<n-r&&P+v<I;)w();M=v===0?0:(I-P)/v;const E=co(y,g,M),A=co(N,C,M);let Y=!1;if(p)if(_){const F=[k,B,E,A];EI(F,0,4,2,_,F,F),Y=F[0]>F[2]}else Y=k>E;const se=Math.PI,X=[],z=G+r===e;e=G,v=0,P=U,g=t[e],C=t[e+1];let $;if(z){w(),$=Math.atan2(C-N,g-y),Y&&($+=$>0?-se:se);const F=(E+k)/2,L=(A+B)/2;return X[0]=[F,L,(I-a)/2,$,i],X}i=i.replace(/\n/g," ");for(let F=0,L=i.length;F<L;){w();let re=Math.atan2(C-N,g-y);if(Y&&(re+=re>0?-se:se),$!==void 0){let q=re-$;if(q+=q>se?-2*se:q<-se?2*se:0,Math.abs(q)>o)return null}$=re;const fe=F;let T=0;for(;F<L;++F){const q=Y?L-F-1:F,V=c*u(h,i[q],m);if(e+r<n&&P+v<a+T+V/2)break;T+=V}if(F===fe)continue;const j=Y?i.substring(L-fe,L-F):i.substring(fe,F);M=v===0?0:(a+T/2-P)/v;const K=co(y,g,M),J=co(N,C,M);X.push([K,J,T/2,re,j]),a+=T}return X}const of=So(),mu=[],ld=[],od=[],gu=[];function RD(t){return t[3].declutterBox}const TD=new RegExp("[-----]");function Hb(t,e){return e==="start"?e=TD.test(t)?"right":"left":e==="end"&&(e=TD.test(t)?"left":"right"),n1[e]}function eU(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}function tU(t,e,n){return n%2===0&&(t+=e),t}class sU{constructor(e,n,r,i,a){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=ec(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new oj:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){const a=e+n+r+i;if(this.labels_[a])return this.labels_[a];const o=i?this.strokeStates[i]:null,c=r?this.fillStates[r]:null,u=this.textStates[n],h=this.pixelRatio,m=[u.scale[0]*h,u.scale[1]*h],_=u.justify?n1[u.justify]:Hb(Array.isArray(e)?e[0]:e,u.textAlign||s_),p=i&&o.lineWidth?o.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(eU,[]),{width:C,height:y,widths:N,heights:v,lineWidths:P}=s9(u,g),w=C+p,M=[],k=(w+2)*m[0],B=(y+p)*m[1],G={width:k<0?Math.floor(k):Math.ceil(k),height:B<0?Math.floor(B):Math.ceil(B),contextInstructions:M};(m[0]!=1||m[1]!=1)&&M.push("scale",m),i&&(M.push("strokeStyle",o.strokeStyle),M.push("lineWidth",p),M.push("lineCap",o.lineCap),M.push("lineJoin",o.lineJoin),M.push("miterLimit",o.miterLimit),M.push("setLineDash",[o.lineDash]),M.push("lineDashOffset",o.lineDashOffset)),r&&M.push("fillStyle",c.fillStyle),M.push("textBaseline","middle"),M.push("textAlign","center");const U=.5-_;let I=_*w+U*p;const E=[],A=[];let Y=0,se=0,X=0,z=0,$;for(let F=0,L=g.length;F<L;F+=2){const re=g[F];if(re===`
`){se+=Y,Y=0,I=_*w+U*p,++z;continue}const fe=g[F+1]||u.font;fe!==$&&(i&&E.push("font",fe),r&&A.push("font",fe),$=fe),Y=Math.max(Y,v[X]);const T=[re,I+U*N[X]+_*(N[X]-P[z]),.5*(p+Y)+se];I+=N[X],i&&E.push("strokeText",T),r&&A.push("fillText",T),++X}return Array.prototype.push.apply(M,E),Array.prototype.push.apply(M,A),this.labels_[a]=G,G}replayTextBackground_(e,n,r,i,a,o,c){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,a),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,a,o,c,u,h,m,_,p,g,C,y,N){c*=p[0],u*=p[1];let v=r-c,P=i-u;const w=a+h>e?e-h:a,M=o+m>n?n-m:o,k=C[3]+w*p[0]+C[1],B=C[0]+M*p[1]+C[2],G=v-C[3],U=P-C[0];(y||_!==0)&&(mu[0]=G,gu[0]=G,mu[1]=U,ld[1]=U,ld[0]=G+k,od[0]=ld[0],od[1]=U+B,gu[1]=od[1]);let I;return _!==0?(I=Td(ec(),r,i,1,1,_,-r,-i),fa(I,mu),fa(I,ld),fa(I,od),fa(I,gu),Vu(Math.min(mu[0],ld[0],od[0],gu[0]),Math.min(mu[1],ld[1],od[1],gu[1]),Math.max(mu[0],ld[0],od[0],gu[0]),Math.max(mu[1],ld[1],od[1],gu[1]),of)):Vu(Math.min(G,G+k),Math.min(U,U+B),Math.max(G,G+k),Math.max(U,U+B),of),g&&(v=Math.round(v),P=Math.round(P)),{drawImageX:v,drawImageY:P,drawImageW:w,drawImageH:M,originX:h,originY:m,declutterBox:{minX:of[0],minY:of[1],maxX:of[2],maxY:of[3],value:N},canvasTransform:I,scale:p}}replayImageOrLabel_(e,n,r,i,a,o,c){const u=!!(o||c),h=i.declutterBox,m=c?c[2]*i.scale[0]/2:0;return h.minX-m<=n[0]&&h.maxX+m>=0&&h.minY-m<=n[1]&&h.maxY+m>=0&&(u&&this.replayTextBackground_(e,mu,ld,od,gu,o,c),n9(e,i.canvasTransform,a,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const r=fa(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],n[1]&&(e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6]))}drawLabelWithPointPlacement_(e,n,r,i){const a=this.textStates[n],o=this.createLabel(e,n,i,r),c=this.strokeStates[r],u=this.pixelRatio,h=Hb(Array.isArray(e)?e[0]:e,a.textAlign||s_),m=n1[a.textBaseline||e1],_=c&&c.lineWidth?c.lineWidth:0,p=o.width/u-2*a.scale[0],g=h*p+2*(.5-h)*_,C=m*o.height/u+2*(.5-m)*_;return{label:o,anchorX:g,anchorY:C}}execute_(e,n,r,i,a,o,c,u){const h=this.zIndexContext_;let m;this.pixelCoordinates_&&Zu(r,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Qu(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),X8(this.renderedTransform_,r));let _=0;const p=i.length;let g=0,C,y,N,v,P,w,M,k,B,G,U,I,E,A,Y,se,X=0,z=0;const $=this.coordinateCache_,F=this.viewRotation_,L=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,re={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},fe=this.instructions!=i||this.overlaps?0:200;let T,j,K,J;for(;_<p;){const q=i[_];switch(q[0]){case cn.BEGIN_GEOMETRY:T=q[1],J=q[3],T.getGeometry()?c!==void 0&&!vl(c,J.getExtent())?_=q[2]+1:++_:_=q[2],h&&(h.zIndex=q[4]);break;case cn.BEGIN_PATH:X>fe&&(this.fill_(e),X=0),z>fe&&(e.stroke(),z=0),!X&&!z&&(e.beginPath(),k=NaN,B=NaN),++_;break;case cn.CIRCLE:g=q[1],v=q[2]??0;const ce=m[g],me=m[g+1],Ce=m[g+2]-v,ge=m[g+3]-v,Ge=Ce-ce,te=ge-me,he=Math.sqrt(Ge*Ge+te*te);e.moveTo(ce+he,me),e.arc(ce,me,he,0,2*Math.PI,!0),++_;break;case cn.CLOSE_PATH:e.closePath(),++_;break;case cn.CUSTOM:g=q[1],C=q[2];const de=q[3],Q=q[4],ee=q[5];re.geometry=de,re.feature=T,_ in $||($[_]=[]);const Z=$[_];ee?ee(m,g,C,2,Z):(Z[0]=m[g],Z[1]=m[g+1],Z.length=2),h&&(h.zIndex=q[6]),Q(Z,re),++_;break;case cn.DRAW_IMAGE:g=q[1],C=q[2],I=q[3],y=q[4],N=q[5];let le=q[6];const xe=q[7],be=q[8],ne=q[9],ie=q[10];let pe=q[11];const ze=q[12];let xt=q[13];M=q[14]||"declutter";const st=q[15];if(!I&&q.length>=20){E=q[19],A=q[20],Y=q[21],se=q[22];const Ze=this.drawLabelWithPointPlacement_(E,A,Y,se);I=Ze.label,q[3]=I;const Le=q[23];y=(Ze.anchorX-Le)*this.pixelRatio,q[4]=y;const vt=q[24];N=(Ze.anchorY-vt)*this.pixelRatio,q[5]=N,le=I.height,q[6]=le,xt=I.width,q[13]=xt}let St;q.length>25&&(St=q[25]);let ot,Be,lt;q.length>17?(ot=q[16],Be=q[17],lt=q[18]):(ot=wh,Be=null,lt=null),ie&&L?pe+=F:!ie&&!L&&(pe-=F);let pt=0;for(;g<C;g+=2){if(St&&St[pt++]<xt/this.pixelRatio)continue;const Ze=this.calculateImageOrLabelDimensions_(I.width,I.height,m[g],m[g+1],xt,le,y,N,be,ne,pe,ze,a,ot,!!Be||!!lt,T),Le=[e,n,I,Ze,xe,Be,lt];if(u){let vt,je,ut;if(st){const Ve=C-g;if(!st[Ve]){st[Ve]={args:Le,declutterMode:M};continue}const Vt=st[Ve];vt=Vt.args,je=Vt.declutterMode,delete st[Ve],ut=RD(vt)}let gt,jt;if(vt&&(je!=="declutter"||!u.collides(ut))&&(gt=!0),(M!=="declutter"||!u.collides(Ze.declutterBox))&&(jt=!0),je==="declutter"&&M==="declutter"){const Ve=gt&&jt;gt=Ve,jt=Ve}gt&&(je!=="none"&&u.insert(ut),this.replayImageOrLabel_.apply(this,vt)),jt&&(M!=="none"&&u.insert(Ze.declutterBox),this.replayImageOrLabel_.apply(this,Le))}else this.replayImageOrLabel_.apply(this,Le)}++_;break;case cn.DRAW_CHARS:const mt=q[1],Ye=q[2],at=q[3],Fe=q[4];se=q[5];const tt=q[6],ct=q[7],Mt=q[8];Y=q[9];const dt=q[10];E=q[11],Array.isArray(E)&&(E=E.reduce(tU,"")),A=q[12];const Je=[q[13],q[13]];M=q[14]||"declutter";const De=q[15],$e=this.textStates[A],Ne=$e.font,ye=[$e.scale[0]*ct,$e.scale[1]*ct];let Ue;Ne in this.widths_?Ue=this.widths_[Ne]:(Ue={},this.widths_[Ne]=Ue);const ue=X9(m,mt,Ye,2),Oe=Math.abs(ye[0])*oD(Ne,E,Ue);if(Fe||Oe<=ue){const Ze=this.textStates[A].textAlign,Le=(ue-Oe)*Hb(E,Ze),vt=Z9(m,mt,Ye,2,E,Le,tt,Math.abs(ye[0]),oD,Ne,Ue,L?0:this.viewRotation_,De);e:if(vt){const je=[];let ut,gt,jt,Ve,Vt;if(Y)for(ut=0,gt=vt.length;ut<gt;++ut){Vt=vt[ut],jt=Vt[4],Ve=this.createLabel(jt,A,"",Y),y=Vt[2]+(ye[0]<0?-dt:dt),N=at*Ve.height+(.5-at)*2*dt*ye[1]/ye[0]-Mt;const ke=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,Vt[0],Vt[1],Ve.width,Ve.height,y,N,0,0,Vt[3],Je,!1,wh,!1,T);if(u&&M==="declutter"&&u.collides(ke.declutterBox))break e;je.push([e,n,Ve,ke,1,null,null])}if(se)for(ut=0,gt=vt.length;ut<gt;++ut){Vt=vt[ut],jt=Vt[4],Ve=this.createLabel(jt,A,se,""),y=Vt[2],N=at*Ve.height-Mt;const ke=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,Vt[0],Vt[1],Ve.width,Ve.height,y,N,0,0,Vt[3],Je,!1,wh,!1,T);if(u&&M==="declutter"&&u.collides(ke.declutterBox))break e;je.push([e,n,Ve,ke,1,null,null])}u&&M!=="none"&&u.load(je.map(RD));for(let ke=0,ss=je.length;ke<ss;++ke)this.replayImageOrLabel_.apply(this,je[ke])}}++_;break;case cn.END_GEOMETRY:if(o!==void 0){T=q[1];const Ze=o(T,J,M);if(Ze)return Ze}++_;break;case cn.FILL:fe?X++:this.fill_(e),++_;break;case cn.MOVE_TO_LINE_TO:for(g=q[1],C=q[2],v=q[3],P=q[4]??!1,j=m[g],K=m[g+1],v&&(w=g,[j,K]=Np(j,K,P?m[C-4]:void 0,P?m[C-3]:void 0,m[g+2],m[g+3],v)),e.moveTo(j,K),k=j+.5|0,B=K+.5|0,g+=2;g<C;g+=2)j=m[g],K=m[g+1],G=j+.5|0,U=K+.5|0,(g==C-2||G!==k||U!==B)&&(v&&(g==C-2?[j,K]=Np(j,K,m[g-2],m[g-1],P?m[w+2]:void 0,P?m[w+3]:void 0,v):[j,K]=Np(j,K,m[g-2],m[g-1],m[g+2],m[g+3],v)),e.lineTo(j,K),k=G,B=U);++_;break;case cn.SET_FILL_STYLE:this.alignAndScaleFill_=q[2],X&&(this.fill_(e),X=0,z&&(e.stroke(),z=0)),e.fillStyle=q[1],++_;break;case cn.SET_STROKE_STYLE:z&&(e.stroke(),z=0),this.setStrokeStyle_(e,q),++_;break;case cn.STROKE:fe?z++:e.stroke(),++_;break;default:++_;break}}X&&this.fill_(e),z&&e.stroke()}execute(e,n,r,i,a,o){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,a,void 0,void 0,o)}executeHitDetection(e,n,r,i,a){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,a)}}const Th=["Polygon","Circle","LineString","Image","Text","Default"],uj=["Image","Text"],nU=Th.filter(t=>!uj.includes(t));let hj=!1,fj=!1;function rU(){let t=0;const e=r=>{const i=Bi(1,1,null,{willReadFrequently:r});let a=0;const o=performance.now();for(;performance.now()-o<50;++a)i.fillStyle=`rgba(255,0,${a%256},1)`,i.fillRect(0,0,1,1),i.getImageData(0,0,1,1);return t=a>t?a:t,a};hj={[e(!0)]:!0,[e(!1)]:!1,[e(void 0)]:void 0}[t],fj=!0}class iU{constructor(e,n,r,i,a,o,c){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ec(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,c)}clip(e,n){const r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const a=e[r];for(const o in a){const c=a[o];i[o]=new sU(this.resolution_,this.pixelRatio_,this.overlaps_,c,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const r=this.executorsByZIndex_[n];for(let i=0,a=e.length;i<a;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,a,o){fj===!1&&rU(),i=Math.round(i);const c=i*2+1,u=Td(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Bi(c,c,null,{willReadFrequently:hj}));const m=this.hitDetectionContext_;m.canvas.width!==c||m.canvas.height!==c?(m.canvas.width=c,m.canvas.height=c):h||m.clearRect(0,0,c,c);let _;this.renderBuffer_!==void 0&&(_=So(),Ag(_,e),fN(_,n*(this.renderBuffer_+i),_));const p=aU(i);let g;function C(k,B,G){const U=m.getImageData(0,0,c,c).data;for(let I=0,E=p.length;I<E;I++)if(U[p[I]]>0){if(!o||G==="none"||g!=="Image"&&g!=="Text"||o.includes(k)){const A=(p[I]-3)/4,Y=i-A%c,se=i-(A/c|0),X=a(k,B,Y*Y+se*se);if(X)return X}m.clearRect(0,0,c,c);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(Cd);let N,v,P,w,M;for(N=y.length-1;N>=0;--N){const k=y[N].toString();for(P=this.executorsByZIndex_[k],v=Th.length-1;v>=0;--v)if(g=Th[v],w=P[g],w!==void 0&&(M=w.executeHitDetection(m,u,r,C,_),M))return M}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const r=n[0],i=n[1],a=n[2],o=n[3],c=[r,i,r,o,a,o,a,i];return Qu(c,0,8,2,e,c),c}isEmpty(){return om(this.executorsByZIndex_)}execute(e,n,r,i,a,o,c){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(c?X6:Cd),o=o||Th;const h=Th.length;for(let m=0,_=u.length;m<_;++m){const p=u[m].toString(),g=this.executorsByZIndex_[p];for(let C=0,y=o.length;C<y;++C){const N=o[C],v=g[N];if(v!==void 0){const P=c===null?void 0:v.getZIndexContext(),w=P?P.getContext():e,M=this.maxExtent_&&N!=="Image"&&N!=="Text";if(M&&(w.save(),this.clip(w,r)),!P||N==="Text"||N==="Image"?v.execute(w,n,r,i,a,c):P.pushFunction(k=>v.execute(k,n,r,i,a,c)),M&&w.restore(),P){P.offset();const k=u[m]*h+Th.indexOf(N);this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(P)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(Cd);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),e[n[r]].length=0}}const qb={};function aU(t){if(qb[t]!==void 0)return qb[t];const e=t*2+1,n=t*t,r=new Array(n+1);for(let a=0;a<=t;++a)for(let o=0;o<=t;++o){const c=a*a+o*o;if(c>n)break;let u=r[c];u||(u=[],r[c]=u),u.push(((t+a)*e+(t+o))*4+3),a>0&&u.push(((t-a)*e+(t+o))*4+3),o>0&&(u.push(((t+a)*e+(t-o))*4+3),a>0&&u.push(((t-a)*e+(t-o))*4+3))}const i=[];for(let a=0,o=r.length;a<o;++a)r[a]&&i.push(...r[a]);return qb[t]=i,i}class lU extends dj{constructor(e,n,r,i,a,o,c){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?j1(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=o,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ec()}drawImages_(e,n,r,i){if(!this.image_)return;const a=Qu(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,c=this.tmpLocalTransform_,u=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=u*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let m=0,_=a.length;m<_;m+=2){const p=a[m]-this.imageAnchorX_,g=a[m+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const C=p+this.imageAnchorX_,y=g+this.imageAnchorY_;Td(c,C,y,1,1,h,-C,-y),o.save(),o.transform.apply(o,c),o.translate(C,y),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=u)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=Qu(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);n<r;n+=i){const u=a[n]+this.textOffsetX_,h=a[n+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(u-this.textOffsetX_,h-this.textOffsetY_),o.rotate(c),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,u,h),this.textFillState_&&o.fillText(this.text_,u,h))}}moveToLineTo_(e,n,r,i,a,o){const c=this.context_;let u=Qu(e,n,r,i,this.transform_,this.pixelCoordinates_);Math.abs(o)>0&&(u=J9(u,i,o,a,u)),c.moveTo(u[0],u[1]);let h=u.length;a&&(h-=2);for(let m=2;m<h;m+=2)c.lineTo(u[m],u[m+1]);return a&&c.closePath(),r}drawRings_(e,n,r,i,a){for(let o=0,c=r.length;o<c;++o)n=this.moveToLineTo_(e,n,r[o],i,!0,a);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!vl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=lk(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],a=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(n[0],n[1],a,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!vl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1,this.strokeState_.strokeOffset),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(vl(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let a=0;const o=e.getEnds(),c=e.getStride();r.beginPath();for(let u=0,h=o.length;u<h;++u)a=this.moveToLineTo_(i,a,o[u],c,!1,this.strokeState_.strokeOffset);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){var n;if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!vl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_;r.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride(),(n=this.strokeState_)==null?void 0:n.strokeOffset),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}}drawMultiPolygon(e){var n;if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!vl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getOrientedFlatCoordinates();let a=0;const o=e.getEndss(),c=e.getStride();r.beginPath();for(let u=0,h=o.length;u<h;++u){const m=o[u];a=this.drawRings_(i,a,m,c,(n=this.strokeState_)==null?void 0:n.strokeOffset)}this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(this.text_!==""){const r=e.getFlatInteriorPoints();this.drawText_(r,0,r.length,2)}}}setContextFillState_(e){const n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),Zu(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:s_;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Oc(r||Sl)}}if(!n)this.strokeState_=null;else{const r=n.getColor(),i=n.getLineCap(),a=n.getLineDash(),o=n.getLineDashOffset(),c=n.getLineJoin(),u=n.getWidth(),h=n.getMiterLimit(),m=a||Nd,_=n.getOffset();this.strokeState_={lineCap:i!==void 0?i:um,lineDash:this.pixelRatio_===1?m:m.map(p=>p*this.pixelRatio_),lineDashOffset:(o||Sd)*this.pixelRatio_,lineJoin:c!==void 0?c:hm,lineWidth:(u!==void 0?u:n_)*this.pixelRatio_,miterLimit:h!==void 0?h:e_,strokeStyle:Oc(r||t_),strokeOffset:(_??0)*this.pixelRatio_}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),a=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const g=n.getColor();this.textFillState_={fillStyle:Oc(g||Sl)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const g=r.getColor(),C=r.getLineCap(),y=r.getLineDash(),N=r.getLineDashOffset(),v=r.getLineJoin(),P=r.getWidth(),w=r.getMiterLimit();this.textStrokeState_={lineCap:C!==void 0?C:um,lineDash:y||Nd,lineDashOffset:N||Sd,lineJoin:v!==void 0?v:hm,lineWidth:P!==void 0?P:n_,miterLimit:w!==void 0?w:e_,strokeStyle:Oc(g||t_)}}const i=e.getFont(),a=e.getOffsetX(),o=e.getOffsetY(),c=e.getRotateWithView(),u=e.getRotation(),h=e.getScaleArray(),m=e.getText(),_=e.getTextAlign(),p=e.getTextBaseline();this.textState_={font:i!==void 0?i:zI,textAlign:_!==void 0?_:s_,textBaseline:p!==void 0?p:e1},this.text_=m!==void 0?Array.isArray(m)?m.reduce((g,C,y)=>g+=y%2?" ":C,""):m:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=u!==void 0?u:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const jc=.5;function oU(t,e,n,r,i,a,o,c,u){const h=i,m=t[0]*jc,_=t[1]*jc,p=Bi(m,_);p.imageSmoothingEnabled=!1;const g=p.canvas,C=new lU(p,jc,i,null,o,c,null),y=n.length,N=Math.floor((256*256*256-1)/y),v={};for(let w=1;w<=y;++w){const M=n[w-1],k=M.getStyleFunction()||r;if(!k)continue;let B=k(M,a);if(!B)continue;Array.isArray(B)||(B=[B]);const U=(w*N).toString(16).padStart(7,"#00000");for(let I=0,E=B.length;I<E;++I){const A=B[I],Y=A.getGeometryFunction()(M);if(!Y||!vl(h,Y.getExtent()))continue;const se=A.clone(),X=se.getFill();X&&X.setColor(U);const z=se.getStroke();z&&(z.setColor(U),z.setLineDash(null)),se.setText(void 0);const $=A.getImage();if($){const fe=$.getImageSize();if(!fe)continue;const T=Bi(fe[0],fe[1],void 0,{alpha:!1}),j=T.canvas;T.fillStyle=U,T.fillRect(0,0,j.width,j.height),se.setImage(new Mc({img:j,anchor:$.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:$.getOrigin(),opacity:1,size:$.getSize(),scale:$.getScale(),rotation:$.getRotation(),rotateWithView:$.getRotateWithView()}))}const F=se.getZIndex()||0;let L=v[F];L||(L={},v[F]=L,L.Polygon=[],L.Circle=[],L.LineString=[],L.Point=[]);const re=Y.getType();if(re==="GeometryCollection"){const fe=Y.getGeometriesArrayRecursive();for(let T=0,j=fe.length;T<j;++T){const K=fe[T];L[K.getType().replace("Multi","")].push(K,se)}}else L[re.replace("Multi","")].push(Y,se)}}const P=Object.keys(v).map(Number).sort(Cd);for(let w=0,M=P.length;w<M;++w){const k=v[P[w]];for(const B in k){const G=k[B];for(let U=0,I=G.length;U<I;U+=2){C.setStyle(G[U+1]);for(let E=0,A=e.length;E<A;++E)C.setTransform(e[E]),C.drawGeometry(G[U])}}}return p.getImageData(0,0,g.width,g.height)}function cU(t,e,n){const r=[];if(n){const i=Math.floor(Math.round(t[0])*jc),a=Math.floor(Math.round(t[1])*jc),o=(Ur(i,0,n.width-1)+Ur(a,0,n.height-1)*n.width)*4,c=n.data[o],u=n.data[o+1],m=n.data[o+2]+256*(u+256*c),_=Math.floor((256*256*256-1)/e.length);m&&m%_===0&&r.push(e[m/_-1])}return r}const dU=.5,mj={Point:pU,LineString:gU,Polygon:bU,MultiPoint:yU,MultiLineString:_U,MultiPolygon:xU,GeometryCollection:mU,Circle:hU};function uU(t,e){return parseInt(rr(t),10)-parseInt(rr(e),10)}function MD(t,e){const n=gj(t,e);return n*n}function gj(t,e){return dU*t/e}function hU(t,e,n,r,i){const a=n.getFill(),o=n.getStroke();if(a||o){const u=t.getBuilder(n.getZIndex(),"Circle");u.setFillStrokeStyle(a,o),u.drawCircle(e,r,i)}const c=n.getText();if(c&&c.getText()){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(c),u.drawText(e,r)}}function ID(t,e,n,r,i,a,o,c){const u=[],h=n.getImage();if(h){let p=!0;const g=h.getImageState();g==Rn.LOADED||g==Rn.ERROR?p=!1:g==Rn.IDLE&&h.load(),p&&u.push(h.ready())}const m=n.getFill();m&&m.loading()&&u.push(m.ready());const _=u.length>0;return _&&Promise.all(u).then(()=>i(null)),fU(t,e,n,r,a,o,c),_}function fU(t,e,n,r,i,a,o){const c=n.getGeometryFunction()(e);if(!c)return;const u=c.simplifyTransformed(r,i);if(n.getRenderer())_j(t,u,n,e,o);else{const m=mj[u.getType()];m(t,u,n,e,o,a)}}function _j(t,e,n,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let c=0,u=o.length;c<u;++c)_j(t,o[c],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function mU(t,e,n,r,i,a){const o=e.getGeometriesArray();let c,u;for(c=0,u=o.length;c<u;++c){const h=mj[o[c].getType()];h(t,o[c],n,r,i,a)}}function gU(t,e,n,r,i){const a=n.getStroke();if(a){const c=t.getBuilder(n.getZIndex(),"LineString");c.setFillStrokeStyle(null,a),c.drawLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const c=t.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o),c.drawText(e,r,i)}}function _U(t,e,n,r,i){const a=n.getStroke();if(a){const c=t.getBuilder(n.getZIndex(),"LineString");c.setFillStrokeStyle(null,a),c.drawMultiLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const c=t.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o),c.drawText(e,r,i)}}function xU(t,e,n,r,i){const a=n.getFill(),o=n.getStroke();if(o||a){const u=t.getBuilder(n.getZIndex(),"Polygon");u.setFillStrokeStyle(a,o),u.drawMultiPolygon(e,r,i)}const c=n.getText();if(c&&c.getText()){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(c),u.drawText(e,r,i)}}function pU(t,e,n,r,i,a){const o=n.getImage(),c=n.getText(),u=c&&c.getText(),h=a&&o&&u?{}:void 0;if(o){if(o.getImageState()!=Rn.LOADED)return;const m=t.getBuilder(n.getZIndex(),"Image");m.setImageStyle(o,h),m.drawPoint(e,r,i)}if(u){const m=t.getBuilder(n.getZIndex(),"Text");m.setTextStyle(c,h),m.drawText(e,r,i)}}function yU(t,e,n,r,i,a){const o=n.getImage(),c=o&&o.getOpacity()!==0,u=n.getText(),h=u&&u.getText(),m=a&&c&&h?{}:void 0;if(c){if(o.getImageState()!=Rn.LOADED)return;const _=t.getBuilder(n.getZIndex(),"Image");_.setImageStyle(o,m),_.drawMultiPoint(e,r,i)}if(h){const _=t.getBuilder(n.getZIndex(),"Text");_.setTextStyle(u,m),_.drawText(e,r,i)}}function bU(t,e,n,r,i){const a=n.getFill(),o=n.getStroke();if(a||o){const u=t.getBuilder(n.getZIndex(),"Polygon");u.setFillStrokeStyle(a,o),u.drawPolygon(e,r,i)}const c=n.getText();if(c&&c.getText()){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(c),u.drawText(e,r,i)}}class CU extends cj{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipExtent_=null,this.extendX_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=So(),this.wrappedRenderedExtent_=So(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){const i=n.extent,a=n.viewState,o=a.center,c=a.resolution,u=a.projection,h=a.rotation,m=u.getExtent(),_=this.getLayer().getSource(),p=this.getLayer().getDeclutter(),g=n.pixelRatio,C=n.viewHints,y=!(C[ka.ANIMATING]||C[ka.INTERACTING]),N=this.context,v=Math.round(ur(i)/c*g),P=Math.round(Xa(i)/c*g),w=_.getWrapX()&&u.canWrapX(),M=w?ur(m):null,k=w?Math.ceil((i[2]-m[2])/M)+(this.extendX_?2:1):1;let B=w?Math.floor((i[0]-m[0])/M)-(this.extendX_?1:0):0;do{let G=this.getRenderTransform(o,c,0,g,v,P,B*M);n.declutter&&(G=G.slice(0)),e.execute(N,[N.canvas.width,N.canvas.height],G,h,y,r===void 0?Th:r?uj:nU,r?p&&n.declutter[p]:void 0)}while(++B<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Bi(this.context.canvas.width,this.context.canvas.height,ND))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,G1(this.context),ND.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.clipExtent_&&this.clipUnrotated(this.context,e,this.clipExtent_),this.replayGroup_.renderDeferred(),this.clipExtent_&&(this.context.restore(),this.clipExtent_=null),this.resetDrawContext_())}renderFrame(e,n){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,n);const a=this.context,o=this.replayGroup_;let c=o&&!o.isEmpty();if(!c&&!(this.getLayer().hasListener(go.PRERENDER)||this.getLayer().hasListener(go.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(a,e),i.projection,this.clipExtent_=null;let u=!1;if(c&&r.extent&&this.clipping){const h=Au(r.extent);c=vl(h,e.extent),c&&!Cg(h,e.extent)&&(e.declutter?this.clipExtent_=h:(this.clipUnrotated(a,e,h),u=!0))}return c&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),u&&a.restore(),this.postRender(a,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,a=this.renderedResolution_,o=this.renderedRotation_,c=this.renderedProjection_,u=this.wrappedRenderedExtent_,h=this.getLayer(),m=[],_=r[0]*jc,p=r[1]*jc;m.push(this.getRenderTransform(i,a,o,jc,_,p,0).slice());const g=h.getSource(),C=c.getExtent();if(g.getWrapX()&&c.canWrapX()&&!Cg(C,u)){let y=u[0];const N=ur(C);let v=0,P;for(;y<C[0];)--v,P=N*v,m.push(this.getRenderTransform(i,a,o,jc,_,p,P).slice()),y+=N;for(v=0,y=u[2];y>C[2];)++v,P=N*v,m.push(this.getRenderTransform(i,a,o,jc,_,p,P).slice()),y-=N}this.hitDetectionImageData_=oU(r,m,this.renderedFeatures_,h.getStyleFunction(),u,a,o,MD(a,this.renderedPixelRatio_))}n(cU(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,a){var p,g;if(!this.replayGroup_)return;const o=n.viewState.resolution,c=n.viewState.rotation,u=this.getLayer(),h={},m=function(C,y,N){const v=rr(C),P=h[v];if(P){if(P!==!0&&N<P.distanceSq){if(N===0)return h[v]=!0,a.splice(a.lastIndexOf(P),1),i(C,u,y);P.geometry=y,P.distanceSq=N}}else{if(N===0)return h[v]=!0,i(C,u,y);a.push(h[v]={feature:C,layer:u,geometry:y,distanceSq:N,callback:i})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,c,r,m,_?(g=(p=n.declutter)==null?void 0:p[_])==null?void 0:g.all().map(C=>C.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),r=n.getSource();if(!r)return!1;const i=e.viewHints[ka.ANIMATING],a=e.viewHints[ka.INTERACTING],o=n.getUpdateWhileAnimating(),c=n.getUpdateWhileInteracting();if(this.ready&&!o&&i||!c&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=e.extent,h=e.viewState,m=h.projection,_=h.resolution,p=e.pixelRatio,g=n.getRevision(),C=n.getRenderBuffer();let y=n.getRenderOrder();y===void 0&&(y=uU);const N=h.center.slice(),v=fN(u,C*_),P=v.slice(),w=[v.slice()],M=m.getExtent(),k=r.getWrapX()&&m.canWrapX();if(this.extendX_=!1,k){const z=r.getExtent();z&&!S_(z)&&(this.extendX_=z[0]<M[0]||z[2]>M[2])}if(k&&(!Cg(M,e.extent)||this.extendX_)){const z=ur(M),$=Math.max(ur(v)/2,z);let F=M[0],L=M[2];this.extendX_&&(F-=z,L+=z),v[0]=F-$,v[2]=L+$,fI(N,m);const re=uI(w[0],m);re[0]<M[0]&&re[2]<M[2]?w.push([re[0]+z,re[1],re[2]+z,re[3]]):re[0]>M[0]&&re[2]>M[2]&&w.push([re[0]-z,re[1],re[2]-z,re[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedPixelRatio_===p&&this.renderedRevision_==g&&this.renderedRenderOrder_==y&&this.renderedFrameDeclutter_===!!e.declutter&&Cg(this.wrappedRenderedExtent_,v))return Zu(this.renderedExtent_,P)||(this.hitDetectionImageData_=null,this.renderedExtent_=P),this.renderedCenter_=N,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const B=new q9(gj(_,p),v,_,p);let G;for(let z=0,$=w.length;z<$;++z)r.loadFeatures(w[z],_,m);const U=MD(_,p);let I=!0;const E=(z,$)=>{let F;const L=z.getStyleFunction()||n.getStyleFunction();if(L&&(F=L(z,_)),F){const re=this.renderFeature(z,U,F,B,G,this.getLayer().getDeclutter(),$);I=I&&!re}},A=SI(v),Y=r.getFeaturesInExtent(A);y&&Y.sort(y);for(let z=0,$=Y.length;z<$;++z)E(Y[z],z);this.renderedFeatures_=Y,this.ready=I;const se=B.finish(),X=new iU(v,_,p,r.getOverlaps(),se,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=g,this.renderedRenderOrder_=y,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=P,this.wrappedRenderedExtent_=v,this.renderedCenter_=N,this.renderedProjection_=m,this.renderedPixelRatio_=p,this.replayGroup_=X,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,a,o,c){if(!r)return!1;let u=!1;if(Array.isArray(r))for(let h=0,m=r.length;h<m;++h)u=ID(i,e,r[h],n,this.boundHandleStyleImageChange_,a,o,c)||u;else u=ID(i,e,r,n,this.boundHandleStyleImageChange_,a,o,c);return u}}class jD extends sj{constructor(e){super(e)}createRenderer(){return new CU(this)}}let NU=!1;function SU(t,e,n,r,i,a,o){const c=new XMLHttpRequest;c.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=NU,c.onload=function(u){if(!c.status||c.status>=200&&c.status<300){const h=e.getType();try{let m;h=="text"||h=="json"?m=c.responseText:h=="xml"?m=c.responseXML||c.responseText:h=="arraybuffer"&&(m=c.response),m?a(e.readFeatures(m,{extent:n,featureProjection:i}),e.readProjection(m)):o()}catch{o()}}else o()},c.onerror=o,c.send()}function OD(t,e){return function(n,r,i,a,o){SU(t,e,n,r,i,(c,u)=>{this.addFeatures(c),a!==void 0&&a(c)},()=>{this.changed(),o!==void 0&&o()})}}function vU(t,e){return[[-1/0,-1/0,1/0,1/0]]}class Du extends Bc{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Du(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ei(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=nr(e,In.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?EU(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function EU(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(_r(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}function DU(t,e,n,r){const i=[];let a=So();for(let o=0,c=n.length;o<c;++o){const u=n[o];a=mN(t,e,u[0],r),i.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=u[u.length-1]}return i}function wD(t,e,n,r,i,a,o){let c,u;const h=(n-e)/r;if(h===1)c=e;else if(h===2)c=e,u=i;else if(h!==0){let m=t[e],_=t[e+1],p=0;const g=[0];for(let N=e+r;N<n;N+=r){const v=t[N],P=t[N+1];p+=Math.sqrt((v-m)*(v-m)+(P-_)*(P-_)),g.push(p),m=v,_=P}const C=i*p,y=q6(g,C);y<0?(u=(C-g[-y-2])/(g[-y-1]-g[-y-2]),c=e+(-y-2)*r):c=e+y*r}o=o>1?o:2,a=a||new Array(o);for(let m=0;m<o;++m)a[m]=c===void 0?NaN:u===void 0?t[c+m]:co(t[c+m],t[c+r+m],u);return a}const LD=ec();class Xo{constructor(e,n,r,i,a,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=a,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?lI(this.flatCoordinates_):mN(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=qh(this.getExtent());this.flatInteriorPoints_=EN(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Ck(this.flatCoordinates_,this.ends_),n=DU(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=_k(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=wD(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let i=0,a=r.length;i<a;++i){const o=r[i],c=wD(e,n,o,2,.5);hN(this.flatMidpoints_,c),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ta(e);const n=e.getExtent(),r=e.getWorldExtent();if(n&&r){const i=Xa(r)/Xa(n);Td(LD,r[0],r[3],i,-i,0,0,0),Qu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,LD,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Xo(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=eI((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=vN(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=fk(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=II(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new Xo(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Xo.prototype.getFlatCoordinates=Xo.prototype.getOrientedFlatCoordinates;class PD{constructor(e){this.rbush_=new FI(e),this.items_={}}insert(e,n){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[rr(n)]=r}load(e,n){const r=new Array(n.length);for(let i=0,a=n.length;i<a;i++){const o=e[i],c=n[i],u={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:c};r[i]=u,this.items_[rr(c)]=u}this.rbush_.load(r)}remove(e){const n=rr(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){const r=this.items_[rr(n)],i=[r.minX,r.minY,r.maxX,r.maxY];Xg(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,a=e.length;i<a;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return om(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return Vu(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class xj extends Bc{constructor(e){super(),this.projection=Ta(e.projection),this.attributions_=AD(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=AD(e),this.changed()}setState(e){this.state_=e,this.changed()}}function AD(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const ro={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class _u extends Od{constructor(e,n,r){super(e),this.feature=n,this.features=r}}class kD extends xj{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=qg,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(_r(this.format_,"`format` must be set when `url` is set"),this.loader_=OD(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:vU;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new PD:null,this.loadedExtentsRtree_=new PD,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new fo(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=rr(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new _u(ro.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof Xo||(this.featureChangeKeys_[e]=[nr(n,In.CHANGE,this.handleFeatureChange_,this),nr(n,lm.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){const i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof Xo){const a=this.idIndex_[i];a instanceof Xo?Array.isArray(a)?a.push(n):this.idIndex_[i]=[a,n]:r=!1}else r=!1}return r&&(_r(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],r=[],i=[];for(let a=0,o=e.length;a<o;a++){const c=e[a],u=rr(c);this.addToIndex_(u,c)&&r.push(c)}for(let a=0,o=r.length;a<o;a++){const c=r[a],u=rr(c);this.setupChangeEvents_(u,c);const h=c.getGeometry();if(h){const m=h.getExtent();n.push(m),i.push(c)}else this.nullGeometryFeatures_[u]=c}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(ro.ADDFEATURE))for(let a=0,o=r.length;a<o;a++)this.dispatchEvent(new _u(ro.ADDFEATURE,r[a]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(ro.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(ro.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(Cl.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(Cl.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ei);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new _u(ro.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const a=i.getGeometry();if(a instanceof Xo||a.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof Xo||i.intersectsExtent(e)){const a=n(r);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),om(this.nullGeometryFeatures_)||hN(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=hI(e,n);return[].concat(...i.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const r=e[0],i=e[1];let a=null;const o=[NaN,NaN];let c=1/0;const u=[-1/0,-1/0,1/0,1/0];return n=n||Hg,this.featuresRtree_.forEachInExtent(u,function(h){if(n(h)){const m=h.getGeometry(),_=c;if(c=m instanceof Xo?0:m.closestPointXY(r,i,o,c),c<_){a=h;const p=Math.sqrt(c);u[0]=r-p,u[1]=i-p,u[2]=r+p,u[3]=i+p}}}),a}getExtent(e){var n;return((n=this.featuresRtree_)==null?void 0:n.getExtent(e))??null}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,r=rr(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const a=n.getId();if(a!==void 0){const o=a.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new _u(ro.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:rr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&om(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){const i=this.loadedExtentsRtree_,a=this.strategy_(e,n,r);for(let o=0,c=a.length;o<c;++o){const u=a[o];i.forEachInExtent(u,function(m){return Cg(m.extent,u)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _u(ro.FEATURESLOADSTART)),this.loader_.call(this,u,n,r,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new _u(ro.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new _u(ro.FEATURESLOADERROR))}),i.insert(u,{extent:u.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,r=n.forEachInExtent(e,function(i){if(Xg(i.extent,e))return i});r&&n.remove(r)}removeFeatures(e){let n=!1;for(let r=0,i=e.length;r<i;++r)n=this.removeFeatureInternal(e[r])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=rr(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[n];r==null||r.forEach(ei),delete this.featureChangeKeys_[n];const i=e.getId();if(i!==void 0){const a=i.toString(),o=this.idIndex_[a];o===e?delete this.idIndex_[a]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[a]=o[0]))}return delete this.uidIndex_[n],this.hasListener(ro.REMOVEFEATURE)&&this.dispatchEvent(new _u(ro.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){_r(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(OD(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const cf=[0,0,0],xu=5;class QN{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,_r(Z6(this.resolutions_,(i,a)=>a-i),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,a=this.resolutions_.length-1;i<a;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,_r(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=h0(r)),_r(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,_r(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:IN,_r(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,a)=>{const o=new KN(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const c=this.getTileRangeForExtentAndZ(r,a);o.minX=Math.max(c.minX,o.minX),o.maxX=Math.min(c.maxX,o.maxX),o.minY=Math.max(c.minY,o.minY),o.maxY=Math.min(c.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const i=this.getTileRangeForExtentAndZ(e,n);for(let a=i.minX,o=i.maxX;a<=o;++a)for(let c=i.minY,u=i.maxY;c<=u;++c)r([n,a,c])}forEachTileCoordParentTileRange(e,n,r,i){let a,o,c,u=null,h=e[0]-1;for(this.zoomFactor_===2?(o=e[1],c=e[2]):u=this.getTileCoordExtent(e,i);h>=this.minZoom;){if(o!==void 0&&c!==void 0?(o=Math.floor(o/2),c=Math.floor(c/2),a=lf(o,o,c,c,r)):a=this.getTileRangeForExtentAndZ(u,h,r),n(h,a))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getOrigins(){return this.origins_}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const a=e[1]*2,o=e[2]*2;return lf(a,a+1,o,o+1,n)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const i=e[0],a=e[1],o=e[2];if(n===i)return lf(a,o,a,o,r);if(this.zoomFactor_){const u=Math.pow(this.zoomFactor_,n-i),h=Math.floor(a*u),m=Math.floor(o*u);if(n<i)return lf(h,h,m,m,r);const _=Math.floor(u*(a+1))-1,p=Math.floor(u*(o+1))-1;return lf(h,_,m,p,r)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,cf);const i=cf[1],a=cf[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,cf);const o=cf[1],c=cf[2];return lf(i,o,a,c,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Dl(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),a=Dl(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*a[0]*i,c=r[1]-(e[2]+1)*a[1]*i,u=o+a[0]*i,h=c+a[1]*i;return Vu(o,c,u,h,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,a){const o=this.getZForResolution(r),c=r/this.getResolution(o),u=this.getOrigin(o),h=Dl(this.getTileSize(o),this.tmpSize_);let m=c*(e-u[0])/r/h[0],_=c*(u[1]-n)/r/h[1];return i?(m=kx(m,xu)-1,_=kx(_,xu)-1):(m=Ax(m,xu),_=Ax(_,xu)),s1(o,m,_,a)}getTileCoordForXYAndZ_(e,n,r,i,a){const o=this.getOrigin(r),c=this.getResolution(r),u=Dl(this.getTileSize(r),this.tmpSize_);let h=(e-o[0])/c/u[0],m=(o[1]-n)/c/u[1];return i?(h=kx(h,xu)-1,m=kx(m,xu)-1):(h=Ax(h,xu),m=Ax(m,xu)),s1(r,h,m,a)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=uN(this.resolutions_,e,n||0);return Ur(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return LI(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}class RU extends QN{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function pj(t){let e=t.getDefaultTileGrid();return e||(e=jU(t),t.setDefaultTileGrid(e)),e}function TU(t,e,n){const r=e[0],i=t.getTileCoordCenter(e),a=YN(n);if(!cm(a,i)){const o=ur(a),c=Math.ceil((a[0]-i[0])/o);return i[0]+=o*c,t.getTileCoordForCoordAndZ(i,r)}return e}function MU(t,e,n,r){r=r!==void 0?r:"top-left";const i=yj(t,e,n);return new QN({extent:t,origin:g8(t,r),resolutions:i,tileSize:n})}function IU(t){const e=t||{},n=e.extent||Ta("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:yj(n,e.maxZoom,e.tileSize,e.maxResolution)};return new QN(r)}function yj(t,e,n,r){e=e!==void 0?e:Dk,n=Dl(n!==void 0?n:IN);const i=Xa(t),a=ur(t);r=r>0?r:Math.max(a/n[0],i/n[1]);const o=e+1,c=new Array(o);for(let u=0;u<o;++u)c[u]=r/Math.pow(2,u);return c}function jU(t,e,n,r){const i=YN(t);return MU(i,e,n,r)}function YN(t){t=Ta(t);let e=t.getExtent();if(!e){const n=180*_N.degrees/t.getMetersPerUnit();e=Vu(-n,-n,n,n)}return e}const OU=/\{z\}/g,wU=/\{x\}/g,LU=/\{y\}/g,PU=/\{-y\}/g;function AU(t,e,n,r,i){return t.replace(OU,e.toString()).replace(wU,n.toString()).replace(LU,r.toString()).replace(PU,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function kU(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let a;for(a=r;a<=i;++a)e.push(t.replace(n[0],String.fromCharCode(a)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}function UU(t,e){return(function(n,r,i){if(!n)return;let a;const o=n[0];if(e){const c=e.getFullTileRange(o);c&&(a=c.getHeight()-1)}return AU(t,o,n[1],n[2],a)})}function BU(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=UU(t[i],e);return GU(r)}function GU(t){return t.length===1?t[0]:(function(e,n,r){if(!e)return;const i=P9(e),a=Af(i,t.length);return t[a](e,n,r)})}class WU extends xj{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&Dl(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||rr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,a,o){return sr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:pj(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),a=this.getTilePixelRatio(n),o=Dl(i.getTileSize(e),this.tmpSize);return a==1?o:C7(o,a,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const r=n!==void 0?n:this.getProjection(),i=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=TU(i,e,r)),k9(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class FU extends Od{constructor(e,n){super(e),this.tile=n}}const Xb={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class $N extends WU{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===$N.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=rr(n),i=n.getState();let a;i==dn.LOADING?(this.tileLoadingKeys_[r]=!0,a=Xb.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],a=i==dn.ERROR?Xb.TILELOADERROR:i==dn.LOADED?Xb.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new FU(a,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=kU(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(BU(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}}class KU extends $N{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:QU,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.referrerPolicy=e.referrerPolicy,this.tileClass=e.tileClass!==void 0?e.tileClass:aj,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!bp(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||bp(n,e)))return this.tileGrid;const r=rr(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=pj(e)),this.tileGridForProjection[r]}createTile_(e,n,r,i,a,o){const c=[e,n,r],u=this.getTileCoordForTileUrlFunction(c,a),h=u?this.tileUrlFunction(u,i,a):void 0,m=new this.tileClass(c,h!==void 0?dn.IDLE:dn.EMPTY,h!==void 0?h:"",{crossOrigin:this.crossOrigin,referrerPolicy:this.referrerPolicy},this.tileLoadFunction,this.tileOptions);return m.key=o,m.addEventListener(In.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,n,r,i,a,o){const c=this.getProjection();if(!c||!a||bp(c,a))return this.getTileInternal(e,n,r,i,c||a);const u=[e,n,r],h=this.getKey(),m=this.getTileGridForProjection(c),_=this.getTileGridForProjection(a),p=this.getTileCoordForTileUrlFunction(u,a),g=new lj(c,m,a,_,u,p,this.getTilePixelRatio(i),this.getGutter(),(C,y,N,v)=>this.getTileInternal(C,y,N,v,c,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=h,g}getTileInternal(e,n,r,i,a,o){const c=this.getKey(),u=Cp(this,c,e,n,r);if(o&&o.containsKey(u))return o.get(u);const h=this.createTile_(e,n,r,i,a,c);return o==null||o.set(u,h),h}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const r=Ta(e);if(r){const i=rr(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}}function QU(t,e){if(mo){const n=t.getCrossOrigin();let r="same-origin",i="same-origin";n==="anonymous"||n===""?(r="cors",i="omit"):n==="use-credentials"&&(r="cors",i="include");const a={mode:r,credentials:i,referrerPolicy:t.getReferrerPolicy()};fetch(e,a).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.blob()}).then(o=>createImageBitmap(o)).then(o=>{var h;const c=t.getImage();c.width=o.width,c.height=o.height,c.getContext("2d").drawImage(o,0,0),(h=o.close)==null||h.call(o),c.dispatchEvent(new Event("load"))}).catch(()=>{t.getImage().dispatchEvent(new Event("error"))});return}t.getImage().src=e}class UD extends KU{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:IU({extent:YN(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,referrerPolicy:e.referrerPolicy,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}function YU(t){const e=Object.keys(t.defs),n=e.length;let r,i;for(r=0;r<n;++r){const a=e[r];if(!pp(a)){const o=t.defs(a);let c=o.units;!c&&o.projName==="longlat"&&(c="degrees"),qp(new A1({code:a,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:c}))}}for(r=0;r<n;++r){const a=e[r],o=pp(a);for(i=0;i<n;++i){const c=e[i],u=pp(c);if(!yp(a,c))if(t.defs[a]===t.defs[c])a2([o,u]);else{const h=t(a,c);H8(o,u,FE(o,u,h.forward),FE(u,o,h.inverse))}}}}function $U(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var e0=1,t0=2,Gf=3,VU=4,x2=5,BD=6378137,zU=6356752314e-3,GD=.0066943799901413165,Bg=484813681109536e-20,ps=Math.PI/2,HU=.16666666666666666,qU=.04722222222222222,XU=.022156084656084655,Ts=1e-10,yi=.017453292519943295,Rl=57.29577951308232,mr=Math.PI/4,a_=Math.PI*2,vi=3.14159265359,Ml={};Ml.greenwich=0;Ml.lisbon=-9.131906111111;Ml.paris=2.337229166667;Ml.bogota=-74.080916666667;Ml.madrid=-3.687938888889;Ml.rome=12.452333333333;Ml.bern=7.439583333333;Ml.jakarta=106.807719444444;Ml.ferro=-17.666666666667;Ml.brussels=4.367975;Ml.stockholm=18.058277777778;Ml.athens=23.7163375;Ml.oslo=10.722916666667;const JU={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var WD=/[\s_\-\/\(\)]/g;function zu(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(WD,""),i=-1,a,o;++i<n.length;)if(a=n[i],o=a.toLowerCase().replace(WD,""),o===r)return t[a]}function p2(t){var e={},n=t.split("+").map(function(c){return c.trim()}).filter(function(c){return c}).reduce(function(c,u){var h=u.split("=");return h.push(!0),c[h[0].toLowerCase()]=h[1],c},{}),r,i,a,o={proj:"projName",datum:"datumCode",rf:function(c){e.rf=parseFloat(c)},lat_0:function(c){e.lat0=c*yi},lat_1:function(c){e.lat1=c*yi},lat_2:function(c){e.lat2=c*yi},lat_ts:function(c){e.lat_ts=c*yi},lon_0:function(c){e.long0=c*yi},lon_1:function(c){e.long1=c*yi},lon_2:function(c){e.long2=c*yi},alpha:function(c){e.alpha=parseFloat(c)*yi},gamma:function(c){e.rectified_grid_angle=parseFloat(c)*yi},lonc:function(c){e.longc=c*yi},x_0:function(c){e.x0=parseFloat(c)},y_0:function(c){e.y0=parseFloat(c)},k_0:function(c){e.k0=parseFloat(c)},k:function(c){e.k0=parseFloat(c)},a:function(c){e.a=parseFloat(c)},b:function(c){e.b=parseFloat(c)},r:function(c){e.a=e.b=parseFloat(c)},r_a:function(){e.R_A=!0},zone:function(c){e.zone=parseInt(c,10)},south:function(){e.utmSouth=!0},towgs84:function(c){e.datum_params=c.split(",").map(function(u){return parseFloat(u)})},to_meter:function(c){e.to_meter=parseFloat(c)},units:function(c){e.units=c;var u=zu(JU,c);u&&(e.to_meter=u.to_meter)},from_greenwich:function(c){e.from_greenwich=c*yi},pm:function(c){var u=zu(Ml,c);e.from_greenwich=(u||parseFloat(c))*yi},nadgrids:function(c){c==="@null"?e.datumCode="none":e.nadgrids=c},axis:function(c){var u="ewnsud";c.length===3&&u.indexOf(c.substr(0,1))!==-1&&u.indexOf(c.substr(1,1))!==-1&&u.indexOf(c.substr(2,1))!==-1&&(e.axis=c)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in n)i=n[r],r in o?(a=o[r],typeof a=="function"?a(i):e[a]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class bj{static getId(e){const n=e.find(r=>Array.isArray(r)&&r[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,a=e.find(c=>Array.isArray(c)&&c[0]==="ID"),o=a?{authority:a[1],code:parseInt(a[2],10)}:null;return{type:n,name:r,conversion_factor:i,id:o}}static convertAxis(e){const n=e[1]||"Unknown";let r;const i=n.match(/^\((.)\)$/);if(i){const h=i[1].toUpperCase();if(h==="E")r="east";else if(h==="N")r="north";else if(h==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${h}`)}else r=e[2]?e[2].toLowerCase():"unknown";const a=e.find(h=>Array.isArray(h)&&h[0]==="ORDER"),o=a?parseInt(a[1],10):null,c=e.find(h=>Array.isArray(h)&&(h[0]==="LENGTHUNIT"||h[0]==="ANGLEUNIT"||h[0]==="SCALEUNIT")),u=this.convertUnit(c);return{name:n,direction:r,unit:u,order:o}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,r)=>(n.order||0)-(r.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")):null,n.conversion=e.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")):null;const r=e.find(p=>Array.isArray(p)&&p[0]==="CS");r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT");if(i){const p=this.convertUnit(i);n.coordinate_system.unit=p}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const a=e.find(p=>Array.isArray(p)&&(p[0]==="DATUM"||p[0]==="ENSEMBLE"));if(a){const p=this.convert(a);a[0]==="ENSEMBLE"?n.datum_ensemble=p:n.datum=p;const g=e.find(C=>Array.isArray(C)&&C[0]==="PRIMEM");g&&g[1]!=="Greenwich"&&(p.prime_meridian={name:g[1],longitude:parseFloat(g[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(p=>Array.isArray(p)&&p[0]==="MEMBER").map(p=>({type:"DatumEnsembleMember",name:p[1],id:this.getId(p)}));const o=e.find(p=>Array.isArray(p)&&p[0]==="ENSEMBLEACCURACY");o&&(n.accuracy=parseFloat(o[1]));const c=e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID");c&&(n.ellipsoid=this.convert(c)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT")&&this.convert(e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,n.parameters=e.filter(p=>Array.isArray(p)&&p[0]==="PARAMETER").map(p=>this.convert(p));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(p=>Array.isArray(p)&&(p[0]==="LENGTHUNIT"||p[0]==="ANGLEUNIT"||p[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const u=e.find(p=>Array.isArray(p)&&p[0]==="SOURCECRS");if(u){const p=u.find(g=>Array.isArray(g));n.source_crs=p?this.convert(p):null}const h=e.find(p=>Array.isArray(p)&&p[0]==="TARGETCRS");if(h){const p=h.find(g=>Array.isArray(g));n.target_crs=p?this.convert(p):null}const m=e.find(p=>Array.isArray(p)&&p[0]==="ABRIDGEDTRANSFORMATION");m?n.transformation=this.convert(m):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,n.parameters=e.filter(p=>Array.isArray(p)&&(p[0]==="PARAMETER"||p[0]==="PARAMETERFILE")).map(p=>{if(p[0]==="PARAMETER")return this.convert(p);if(p[0]==="PARAMETERFILE")return{name:p[1],value:p[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const p=n.parameters[6];p.name==="Scale difference"&&(p.value=Math.round((p.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const _=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(p=>{p.unit||(p.unit=_)}),_.conversion_factor&&_.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:_});break;default:n.keyword=e[0];break}return n}}class ZU extends bj{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class eB extends bj{static convert(e,n={}){super.convert(e,n);const r=e.find(a=>Array.isArray(a)&&a[0]==="CS");r&&(n.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(a=>Array.isArray(a)&&a[0]==="USAGE");if(i){const a=i.find(u=>Array.isArray(u)&&u[0]==="SCOPE"),o=i.find(u=>Array.isArray(u)&&u[0]==="AREA"),c=i.find(u=>Array.isArray(u)&&u[0]==="BBOX");n.usage={},a&&(n.usage.scope=a[1]),o&&(n.usage.area=o[1]),c&&(n.usage.bbox=c.slice(1))}return n}}function tB(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function sB(t){return(tB(t)==="2019"?eB:ZU).convert(t)}function nB(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var l_=1,Cj=2,Nj=3,r1=4,Sj=5,VN=-1,rB=/\s/,iB=/[A-Za-z]/,aB=/[A-Za-z84_]/,H1=/[,\]]/,vj=/[\d\.E\-\+]/;function Ld(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=l_}Ld.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==r1)for(;rB.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case l_:return this.neutral(t);case Cj:return this.keyword(t);case r1:return this.quoted(t);case Sj:return this.afterquote(t);case Nj:return this.number(t);case VN:return}};Ld.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=r1;return}if(H1.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Ld.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=l_;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=l_,this.currentObject=this.stack.pop(),this.currentObject||(this.state=VN);return}};Ld.prototype.number=function(t){if(vj.test(t)){this.word+=t;return}if(H1.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Ld.prototype.quoted=function(t){if(t==='"'){this.state=Sj;return}this.word+=t};Ld.prototype.keyword=function(t){if(aB.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=l_;return}if(H1.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Ld.prototype.neutral=function(t){if(iB.test(t)){this.word=t,this.state=Cj;return}if(t==='"'){this.word="",this.state=r1;return}if(vj.test(t)){this.word=t,this.state=Nj;return}if(H1.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Ld.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===VN)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function lB(t){var e=new Ld(t);return e.output()}function Jb(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(a,o){return Rf(o,a),a},r);e&&(t[e]=i)}function Rf(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Rf(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Rf(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Rf(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Jb(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Jb(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Rf(t,e[n]);return Jb(e,n,t)}}var oB=.017453292519943295;function zo(t){return t*oB}function Ej(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=zo(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=zo(t.lat0>0?90:-90),delete t.lat1)}function FD(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function KD(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function QD(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=KD(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-KD(t.ellipsoid.semi_minor_axis))))}function i1(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(i1(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(r!==null)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,QD(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,QD(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const a=i.direction;if(a==="east")return"e";if(a==="north")return"n";if(a==="west")return"w";if(a==="south")return"s";throw new Error(`Unknown axis direction: ${a}`)}).join("")+"u",r.unit){const{units:i,to_meter:a}=FD(r.unit);e.units=i,e.to_meter=a}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:a}=FD(r.axis[0].unit);e.units=i,e.to_meter=a}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const a=i.name.toLowerCase().replace(/\s+/g,"_"),o=i.value;i.unit&&i.unit.conversion_factor?e[a]=o*i.unit.conversion_factor:i.unit==="degree"?e[a]=o*Math.PI/180:e[a]=o});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":i1(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),Ej(e),e)}var cB=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function dB(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function Dj(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];cB.indexOf(i)!==-1&&uB(t[i]),typeof t[i]=="object"&&Dj(t[i])}}function uB(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var a=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?n+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?n+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?n+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=zo(t.rectified_grid_angle));function c(m){var _=t.to_meter||1;return m*_}var u=function(m){return dB(t,m)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",zo],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",zo],["x0","false_easting",c],["y0","false_northing",c],["long0","central_meridian",zo],["lat0","latitude_of_origin",zo],["lat0","standard_parallel_1",zo],["lat1","standard_parallel_1",zo],["lat2","standard_parallel_2",zo],["azimuth","Azimuth"],["alpha","azimuth",zo],["srsCode","name"]];h.forEach(u),Ej(t)}function a1(t){if(typeof t=="object")return i1(t);const e=nB(t);var n=lB(t);if(e==="WKT2"){const a=sB(n);return i1(a)}var r=n[0],i={};return Rf(n,i),Dj(i),i[r]}function va(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?va[t]=p2(arguments[1]):va[t]=a1(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?va[t]=a1(arguments[1]):(va[t]=n,n||delete va[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){return Array.isArray(r)?va.apply(e,r):va(r)});if(typeof t=="string"){if(t in va)return va[t]}else"EPSG"in t?va["EPSG:"+t.EPSG]=t:"ESRI"in t?va["ESRI:"+t.ESRI]=t:"IAU2000"in t?va["IAU2000:"+t.IAU2000]=t:console.log(t);return}}$U(va);function hB(t){return typeof t=="string"}function fB(t){return t in va}function mB(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var gB=["3857","900913","3785","102113"];function _B(t){var e=zu(t,"authority");if(e){var n=zu(e,"epsg");return n&&gB.indexOf(n)>-1}}function xB(t){var e=zu(t,"extension");if(e)return zu(e,"proj4")}function pB(t){return t[0]==="+"}function yB(t){if(hB(t)){if(fB(t))return va[t];if(mB(t)){var e=a1(t);if(_B(e))return va["EPSG:3857"];var n=xB(e);return n?p2(n):e}if(pB(t))return p2(t)}else return"projName"in t?t:a1(t)}function YD(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function kc(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function M_(t){return t<0?-1:1}function Ps(t,e){return e||Math.abs(t)<=vi?t:t-M_(t)*a_}function tc(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(ps-e))/r}function o_(t,e){for(var n=.5*t,r,i,a=ps-2*Math.atan(e),o=0;o<=15;o++)if(r=t*Math.sin(a),i=ps-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-a,a+=i,Math.abs(i)<=1e-10)return a;return-9999}function bB(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=kc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function CB(t){var e=t.x,n=t.y;if(n*Rl>90&&n*Rl<-90&&e*Rl>180&&e*Rl<-180)return null;var r,i;if(Math.abs(Math.abs(n)-ps)<=Ts)return null;if(this.sphere)r=this.x0+this.a*this.k0*Ps(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(mr+.5*n));else{var a=Math.sin(n),o=tc(this.e,n,a);r=this.x0+this.a*this.k0*Ps(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=r,t.y=i,t}function NB(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=ps-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var a=Math.exp(-n/(this.a*this.k0));if(i=o_(this.e,a),i===-9999)return null}return r=Ps(this.long0+e/(this.a*this.k0),this.over),t.x=r,t.y=i,t}var SB=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const vB={init:bB,forward:CB,inverse:NB,names:SB};function EB(){}function $D(t){return t}var Rj=["longlat","identity"];const DB={init:EB,forward:$D,inverse:$D,names:Rj};var RB=[vB,DB],Eh={},Tf=[];function Tj(t,e){var n=Tf.length;return t.names?(Tf[n]=t,t.names.forEach(function(r){Eh[r.toLowerCase()]=n}),this):(console.log(e),!0)}function Mj(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function TB(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Eh[e]<"u"&&Tf[Eh[e]]||(e=Mj(e),e in Eh&&Tf[Eh[e]]))return Tf[Eh[e]]}function MB(){RB.forEach(Tj)}const IB={start:MB,add:Tj,get:TB};var Ij={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const jB=Ij.WGS84;function OB(t,e,n,r){var i=t*t,a=e*e,o=(i-a)/i,c=0;r?(t*=1-o*(HU+o*(qU+o*XU)),i=t*t,o=0):c=Math.sqrt(o);var u=(i-a)/a;return{es:o,e:c,ep2:u}}function wB(t,e,n,r,i){if(!t){var a=zu(Ij,r);a||(a=jB),t=a.a,e=a.b,n=a.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<Ts)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var Sp={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var LB in Sp){var Zb=Sp[LB];Zb.datumName&&(Sp[Zb.datumName]=Zb)}function PB(t,e,n,r,i,a,o){var c={};return t===void 0||t==="none"?c.datum_type=x2:c.datum_type=VU,e&&(c.datum_params=e.map(parseFloat),(c.datum_params[0]!==0||c.datum_params[1]!==0||c.datum_params[2]!==0)&&(c.datum_type=e0),c.datum_params.length>3&&(c.datum_params[3]!==0||c.datum_params[4]!==0||c.datum_params[5]!==0||c.datum_params[6]!==0)&&(c.datum_type=t0,c.datum_params[3]*=Bg,c.datum_params[4]*=Bg,c.datum_params[5]*=Bg,c.datum_params[6]=c.datum_params[6]/1e6+1)),o&&(c.datum_type=Gf,c.grids=o),c.a=n,c.b=r,c.es=i,c.ep2=a,c}var zN={};function AB(t,e,n){return e instanceof ArrayBuffer?kB(t,e,n):{ready:UB(t,e)}}function kB(t,e,n){var r=!0;n!==void 0&&n.includeErrorFields===!1&&(r=!1);var i=new DataView(e),a=WB(i),o=FB(i,a),c=KB(i,o,a,r),u={header:o,subgrids:c};return zN[t]=u,u}async function UB(t,e){for(var n=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var a=await e.getImage(i),o=await a.readRasters(),c=o,u=[a.getWidth(),a.getHeight()],h=a.getBoundingBox().map(VD),m=[a.fileDirectory.ModelPixelScale[0],a.fileDirectory.ModelPixelScale[1]].map(VD),_=h[0]+(u[0]-1)*m[0],p=h[3]-(u[1]-1)*m[1],g=c[0],C=c[1],y=[];for(let P=u[1]-1;P>=0;P--)for(let w=u[0]-1;w>=0;w--){var N=P*u[0]+w;y.push([-Bu(C[N]),Bu(g[N])])}n.push({del:m,lim:u,ll:[-_,p],cvs:y})}var v={header:{nSubgrids:r},subgrids:n};return zN[t]=v,v}function BB(t){if(t===void 0)return null;var e=t.split(",");return e.map(GB)}function GB(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:zN[t]||null,isNull:!1}}function VD(t){return t*Math.PI/180}function Bu(t){return t/3600*Math.PI/180}function WB(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function FB(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:y2(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function y2(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function KB(t,e,n,r){for(var i=176,a=[],o=0;o<e.nSubgrids;o++){var c=YB(t,i,n),u=$B(t,i,c,n,r),h=Math.round(1+(c.upperLongitude-c.lowerLongitude)/c.longitudeInterval),m=Math.round(1+(c.upperLatitude-c.lowerLatitude)/c.latitudeInterval);a.push({ll:[Bu(c.lowerLongitude),Bu(c.lowerLatitude)],del:[Bu(c.longitudeInterval),Bu(c.latitudeInterval)],lim:[h,m],count:c.gridNodeCount,cvs:QB(u)});var _=16;r===!1&&(_=8),i+=176+c.gridNodeCount*_}return a}function QB(t){return t.map(function(e){return[Bu(e.longitudeShift),Bu(e.latitudeShift)]})}function YB(t,e,n){return{name:y2(t,e+8,e+16).trim(),parent:y2(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function $B(t,e,n,r,i){var a=e+176,o=16;i===!1&&(o=8);for(var c=[],u=0;u<n.gridNodeCount;u++){var h={latitudeShift:t.getFloat32(a+u*o,r),longitudeShift:t.getFloat32(a+u*o+4,r)};i!==!1&&(h.latitudeAccuracy=t.getFloat32(a+u*o+8,r),h.longitudeAccuracy=t.getFloat32(a+u*o+12,r)),c.push(h)}return c}function yo(t,e){if(!(this instanceof yo))return new yo(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(h){if(h)throw h};var n=yB(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=yo.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var i=zu(Sp,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a=wB(n.a,n.b,n.rf,n.ellps,n.sphere),o=OB(a.a,a.b,a.rf,n.R_A),c=BB(n.nadgrids),u=n.datum||PB(n.datumCode,n.datum_params,a.a,a.b,o.es,o.ep2,c);YD(this,n),YD(this,r),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=u,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}yo.projections=IB;yo.projections.start();function VB(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===e0?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===t0?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function jj(t,e,n){var r=t.x,i=t.y,a=t.z?t.z:0,o,c,u,h;if(i<-ps&&i>-1.001*ps)i=-ps;else if(i>ps&&i<1.001*ps)i=ps;else{if(i<-ps)return{x:-1/0,y:-1/0,z:t.z};if(i>ps)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),c=Math.sin(i),h=Math.cos(i),u=c*c,o=n/Math.sqrt(1-e*u),{x:(o+a)*h*Math.cos(r),y:(o+a)*h*Math.sin(r),z:(o*(1-e)+a)*c}}function Oj(t,e,n,r){var i=1e-12,a=i*i,o=30,c,u,h,m,_,p,g,C,y,N,v,P,w,M=t.x,k=t.y,B=t.z?t.z:0,G,U,I;if(c=Math.sqrt(M*M+k*k),u=Math.sqrt(M*M+k*k+B*B),c/n<i){if(G=0,u/n<i)return U=ps,I=-r,{x:t.x,y:t.y,z:t.z}}else G=Math.atan2(k,M);h=B/u,m=c/u,_=1/Math.sqrt(1-e*(2-e)*m*m),C=m*(1-e)*_,y=h*_,w=0;do w++,g=n/Math.sqrt(1-e*y*y),I=c*C+B*y-g*(1-e*y*y),p=e*g/(g+I),_=1/Math.sqrt(1-p*(2-p)*m*m),N=m*(1-p)*_,v=h*_,P=v*C-N*y,C=N,y=v;while(P*P>a&&w<o);return U=Math.atan(v/Math.abs(N)),{x:G,y:U,z:I}}function zB(t,e,n){if(e===e0)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===t0){var r=n[0],i=n[1],a=n[2],o=n[3],c=n[4],u=n[5],h=n[6];return{x:h*(t.x-u*t.y+c*t.z)+r,y:h*(u*t.x+t.y-o*t.z)+i,z:h*(-c*t.x+o*t.y+t.z)+a}}}function HB(t,e,n){if(e===e0)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===t0){var r=n[0],i=n[1],a=n[2],o=n[3],c=n[4],u=n[5],h=n[6],m=(t.x-r)/h,_=(t.y-i)/h,p=(t.z-a)/h;return{x:m+u*_-c*p,y:-u*m+_+o*p,z:c*m-o*_+p}}}function Vx(t){return t===e0||t===t0}function qB(t,e,n){if(VB(t,e)||t.datum_type===x2||e.datum_type===x2)return n;var r=t.a,i=t.es;if(t.datum_type===Gf){var a=zD(t,!1,n);if(a!==0)return;r=BD,i=GD}var o=e.a,c=e.b,u=e.es;if(e.datum_type===Gf&&(o=BD,c=zU,u=GD),i===u&&r===o&&!Vx(t.datum_type)&&!Vx(e.datum_type))return n;if(n=jj(n,i,r),Vx(t.datum_type)&&(n=zB(n,t.datum_type,t.datum_params)),Vx(e.datum_type)&&(n=HB(n,e.datum_type,e.datum_params)),n=Oj(n,u,o,c),e.datum_type===Gf){var h=zD(e,!0,n);if(h!==0)return}return n}function zD(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},a=[];e:for(var o=0;o<t.grids.length;o++){var c=t.grids[o];if(a.push(c.name),c.isNull){i=r;break}if(c.grid===null){if(c.mandatory)return console.log("Unable to find mandatory grid '"+c.name+"'"),-1;continue}for(var u=c.grid.subgrids,h=0,m=u.length;h<m;h++){var _=u[h],p=(Math.abs(_.del[1])+Math.abs(_.del[0]))/1e4,g=_.ll[0]-p,C=_.ll[1]-p,y=_.ll[0]+(_.lim[0]-1)*_.del[0]+p,N=_.ll[1]+(_.lim[1]-1)*_.del[1]+p;if(!(C>r.y||g>r.x||N<r.y||y<r.x)&&(i=XB(r,e,_),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Rl+" "+r.y*Rl+" tried: '"+a+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function XB(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Ps(i.x-Math.PI)+Math.PI;var a=HD(i,n);if(e){if(isNaN(a.x))return r;a.x=i.x-a.x,a.y=i.y-a.y;var o=9,c=1e-12,u,h;do{if(h=HD(a,n),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:i.x-(h.x+a.x),y:i.y-(h.y+a.y)},a.x+=u.x,a.y+=u.y}while(o--&&Math.abs(u.x)>c&&Math.abs(u.y)>c);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Ps(a.x+n.ll[0]),r.y=a.y+n.ll[1]}else isNaN(a.x)||(r.x=t.x+a.x,r.y=t.y+a.y);return r}function HD(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},a={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return a;o=r.y*e.lim[0]+r.x;var c={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var u={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var m={x:e.cvs[o][0],y:e.cvs[o][1]},_=i.x*i.y,p=i.x*(1-i.y),g=(1-i.x)*(1-i.y),C=(1-i.x)*i.y;return a.x=g*c.x+p*u.x+C*m.x+_*h.x,a.y=g*c.y+p*u.y+C*m.y+_*h.y,a}function qD(t,e,n){var r=n.x,i=n.y,a=n.z||0,o,c,u,h={};for(u=0;u<3;u++)if(!(e&&u===2&&n.z===void 0))switch(u===0?(o=r,"ew".indexOf(t.axis[u])!==-1?c="x":c="y"):u===1?(o=i,"ns".indexOf(t.axis[u])!==-1?c="y":c="x"):(o=a,c="z"),t.axis[u]){case"e":h[c]=o;break;case"w":h[c]=-o;break;case"n":h[c]=o;break;case"s":h[c]=-o;break;case"u":n[c]!==void 0&&(h.z=o);break;case"d":n[c]!==void 0&&(h.z=-o);break;default:return null}return h}function wj(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function JB(t){XD(t.x),XD(t.y)}function XD(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ZB(t,e){return(t.datum.datum_type===e0||t.datum.datum_type===t0||t.datum.datum_type===Gf)&&e.datumCode!=="WGS84"||(e.datum.datum_type===e0||e.datum.datum_type===t0||e.datum.datum_type===Gf)&&t.datumCode!=="WGS84"}function l1(t,e,n,r){var i;Array.isArray(n)?n=wj(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var a=n.z!==void 0;if(JB(n),t.datum&&e.datum&&ZB(t,e)&&(i=new yo("WGS84"),n=l1(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=qD(t,!1,n)),t.projName==="longlat")n={x:n.x*yi,y:n.y*yi,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=qB(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Rl,y:n.y*Rl,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?qD(e,!0,n):(n&&!a&&delete n.z,n)}var JD=yo("WGS84");function eC(t,e,n,r){var i,a,o;return Array.isArray(n)?(i=l1(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(a=l1(t,e,n,r),o=Object.keys(n),o.length===2||o.forEach(function(c){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(c==="x"||c==="y"||c==="z")return}else if(c==="x"||c==="y")return;a[c]=n[c]}),a)}function zx(t){return t instanceof yo?t:typeof t=="object"&&"oProj"in t?t.oProj:yo(t)}function eG(t,e,n){var r,i,a=!1,o;return typeof e>"u"?(i=zx(t),r=JD,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,i=zx(t),r=JD,a=!0),r||(r=zx(t)),i||(i=zx(e)),n?eC(r,i,n):(o={forward:function(c,u){return eC(r,i,c,u)},inverse:function(c,u){return eC(i,r,c,u)}},a&&(o.oProj=i),o)}var ZD=6,Lj="AJSAJS",Pj="AFAFAF",Mf=65,xl=73,io=79,Tg=86,Mg=90;const tG={forward:Aj,inverse:sG,toPoint:kj};function Aj(t,e){return e=e||5,iG(nG({lat:t[1],lon:t[0]}),e)}function sG(t){var e=HN(Bj(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function kj(t){var e=HN(Bj(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function tC(t){return t*(Math.PI/180)}function eR(t){return 180*(t/Math.PI)}function nG(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,a=.9996,o,c,u,h,m,_,p,g=tC(e),C=tC(n),y,N;N=Math.floor((n+180)/6)+1,n===180&&(N=60),e>=56&&e<64&&n>=3&&n<12&&(N=32),e>=72&&e<84&&(n>=0&&n<9?N=31:n>=9&&n<21?N=33:n>=21&&n<33?N=35:n>=33&&n<42&&(N=37)),o=(N-1)*6-180+3,y=tC(o),c=i/(1-i),u=r/Math.sqrt(1-i*Math.sin(g)*Math.sin(g)),h=Math.tan(g)*Math.tan(g),m=c*Math.cos(g)*Math.cos(g),_=Math.cos(g)*(C-y),p=r*((1-i/4-3*i*i/64-5*i*i*i/256)*g-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*g)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*g)-35*i*i*i/3072*Math.sin(6*g));var v=a*u*(_+(1-h+m)*_*_*_/6+(5-18*h+h*h+72*m-58*c)*_*_*_*_*_/120)+5e5,P=a*(p+u*Math.tan(g)*(_*_/2+(5-h+9*m+4*m*m)*_*_*_*_/24+(61-58*h+h*h+600*m-330*c)*_*_*_*_*_*_/720));return e<0&&(P+=1e7),{northing:Math.round(P),easting:Math.round(v),zoneNumber:N,zoneLetter:rG(e)}}function HN(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var a=.9996,o=6378137,c=.00669438,u,h=(1-Math.sqrt(1-c))/(1+Math.sqrt(1-c)),m,_,p,g,C,y,N,v,P,w=n-5e5,M=e;r<"N"&&(M-=1e7),N=(i-1)*6-180+3,u=c/(1-c),y=M/a,v=y/(o*(1-c/4-3*c*c/64-5*c*c*c/256)),P=v+(3*h/2-27*h*h*h/32)*Math.sin(2*v)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*v)+151*h*h*h/96*Math.sin(6*v),m=o/Math.sqrt(1-c*Math.sin(P)*Math.sin(P)),_=Math.tan(P)*Math.tan(P),p=u*Math.cos(P)*Math.cos(P),g=o*(1-c)/Math.pow(1-c*Math.sin(P)*Math.sin(P),1.5),C=w/(m*a);var k=P-m*Math.tan(P)/g*(C*C/2-(5+3*_+10*p-4*p*p-9*u)*C*C*C*C/24+(61+90*_+298*p+45*_*_-252*u-3*p*p)*C*C*C*C*C*C/720);k=eR(k);var B=(C-(1+2*_+p)*C*C*C/6+(5-2*p+28*_-3*p*p+8*u+24*_*_)*C*C*C*C*C/120)/Math.cos(P);B=N+eR(B);var G;if(t.accuracy){var U=HN({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});G={top:U.lat,right:U.lon,bottom:k,left:B}}else G={lat:k,lon:B};return G}function rG(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function iG(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+aG(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function aG(t,e,n){var r=Uj(n),i=Math.floor(t/1e5),a=Math.floor(e/1e5)%20;return lG(i,a,r)}function Uj(t){var e=t%ZD;return e===0&&(e=ZD),e}function lG(t,e,n){var r=n-1,i=Lj.charCodeAt(r),a=Pj.charCodeAt(r),o=i+t-1,c=a+e,u=!1;o>Mg&&(o=o-Mg+Mf-1,u=!0),(o===xl||i<xl&&o>xl||(o>xl||i<xl)&&u)&&o++,(o===io||i<io&&o>io||(o>io||i<io)&&u)&&(o++,o===xl&&o++),o>Mg&&(o=o-Mg+Mf-1),c>Tg?(c=c-Tg+Mf-1,u=!0):u=!1,(c===xl||a<xl&&c>xl||(c>xl||a<xl)&&u)&&c++,(c===io||a<io&&c>io||(c>io||a<io)&&u)&&(c++,c===xl&&c++),c>Tg&&(c=c-Tg+Mf-1);var h=String.fromCharCode(o)+String.fromCharCode(c);return h}function Bj(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,a=0;!/[A-Z]/.test(i=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,a++}var o=parseInt(r,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+t;var c=t.charAt(a++);if(c<="A"||c==="B"||c==="Y"||c>="Z"||c==="I"||c==="O")throw"MGRSPoint zone letter "+c+" not handled: "+t;n=t.substring(a,a+=2);for(var u=Uj(o),h=oG(n.charAt(0),u),m=cG(n.charAt(1),u);m<dG(c);)m+=2e6;var _=e-a;if(_%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var p=_/2,g=0,C=0,y,N,v,P,w;return p>0&&(y=1e5/Math.pow(10,p),N=t.substring(a,a+p),g=parseFloat(N)*y,v=t.substring(a+p),C=parseFloat(v)*y),P=g+h,w=C+m,{easting:P,northing:w,zoneLetter:c,zoneNumber:o,accuracy:y}}function oG(t,e){for(var n=Lj.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===xl&&n++,n===io&&n++,n>Mg){if(i)throw"Bad character: "+t;n=Mf,i=!0}r+=1e5}return r}function cG(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=Pj.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===xl&&n++,n===io&&n++,n>Tg){if(i)throw"Bad character: "+t;n=Mf,i=!0}r+=1e5}return r}function dG(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function mm(t,e,n){if(!(this instanceof mm))return new mm(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}mm.fromMGRS=function(t){return new mm(kj(t))};mm.prototype.toMGRS=function(t){return Aj([this.x,this.y],t)};var uG=1,hG=.25,tR=.046875,sR=.01953125,nR=.01068115234375,fG=.75,mG=.46875,gG=.013020833333333334,_G=.007120768229166667,xG=.3645833333333333,pG=.005696614583333333,yG=.3076171875;function qN(t){var e=[];e[0]=uG-t*(hG+t*(tR+t*(sR+t*nR))),e[1]=t*(fG-t*(tR+t*(sR+t*nR)));var n=t*t;return e[2]=n*(mG-t*(gG+t*_G)),n*=t,e[3]=n*(xG-t*pG),e[4]=n*t*yG,e}function bm(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var bG=20;function XN(t,e,n){for(var r=1/(1-e),i=t,a=bG;a;--a){var o=Math.sin(i),c=1-e*o*o;if(c=(bm(i,o,Math.cos(i),n)-t)*(c*Math.sqrt(c))*r,i-=c,Math.abs(c)<Ts)return i}return i}function CG(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=qN(this.es),this.ml0=bm(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function NG(t){var e=t.x,n=t.y,r=Ps(e-this.long0,this.over),i,a,o,c=Math.sin(n),u=Math.cos(n);if(this.es){var m=u*r,_=Math.pow(m,2),p=this.ep2*Math.pow(u,2),g=Math.pow(p,2),C=Math.abs(u)>Ts?Math.tan(n):0,y=Math.pow(C,2),N=Math.pow(y,2);i=1-this.es*Math.pow(c,2),m=m/Math.sqrt(i);var v=bm(n,c,u,this.en);a=this.a*(this.k0*m*(1+_/6*(1-y+p+_/20*(5-18*y+N+14*p-58*y*p+_/42*(61+179*N-N*y-479*y)))))+this.x0,o=this.a*(this.k0*(v-this.ml0+c*r*m/2*(1+_/12*(5-y+9*p+4*g+_/30*(61+N-58*y+270*p-330*y*p+_/56*(1385+543*N-N*y-3111*y))))))+this.y0}else{var h=u*Math.sin(r);if(Math.abs(Math.abs(h)-1)<Ts)return 93;if(a=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=u*Math.cos(r)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>Ts)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=a,t.y=o,t}function SG(t){var e,n,r,i,a=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=XN(e,this.es,this.en),Math.abs(n)<ps){var _=Math.sin(n),p=Math.cos(n),g=Math.abs(p)>Ts?Math.tan(n):0,C=this.ep2*Math.pow(p,2),y=Math.pow(C,2),N=Math.pow(g,2),v=Math.pow(N,2);e=1-this.es*Math.pow(_,2);var P=a*Math.sqrt(e)/this.k0,w=Math.pow(P,2);e=e*g,r=n-e*w/(1-this.es)*.5*(1-w/12*(5+3*N-9*C*N+C-4*y-w/30*(61+90*N-252*C*N+45*v+46*C-w/56*(1385+3633*N+4095*v+1574*v*N)))),i=Ps(this.long0+P*(1-w/6*(1+2*N+C-w/20*(5+28*N+24*v+8*C*N+6*C-w/42*(61+662*N+1320*v+720*v*N))))/p,this.over)}else r=ps*M_(o),i=0;else{var c=Math.exp(a/this.k0),u=.5*(c-1/c),h=this.lat0+o/this.k0,m=Math.cos(h);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(u,2))),r=Math.asin(e),o<0&&(r=-r),u===0&&m===0?i=0:i=Ps(Math.atan2(u,m)+this.long0,this.over)}return t.x=i,t.y=r,t}var vG=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const vp={init:CG,forward:NG,inverse:SG,names:vG};function Gj(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function El(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function EG(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function DG(t){var e=Math.abs(t);return e=EG(e*(1+e/(El(1,e)+1))),t<0?-e:e}function JN(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],a=0,o;--r>=0;)o=-a+n*i+t[r],a=i,i=o;return e+o*Math.sin(2*e)}function RG(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],a=0,o;--r>=0;)o=-a+n*i+t[r],a=i,i=o;return Math.sin(e)*o}function TG(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Wj(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),a=Gj(n),o=TG(n),c=2*i*o,u=-2*r*a,h=t.length-1,m=t[h],_=0,p=0,g=0,C,y;--h>=0;)C=p,y=_,p=m,_=g,m=-C+c*p-u*_+t[h],g=-y+u*p+c*_;return c=r*o,u=i*a,[c*m-u*g,c*g+u*m]}function MG(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(vp.init.apply(this),this.forward=vp.forward,this.inverse=vp.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=JN(this.cbg,this.lat0);this.Zb=-this.Qn*(r+RG(this.gtu,2*r))}function IG(t){var e=Ps(t.x-this.long0,this.over),n=t.y;n=JN(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),a=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(a*i,El(r,i*o)),e=DG(Math.tan(e));var c=Wj(this.gtu,2*n,2*e);n=n+c[0],e=e+c[1];var u,h;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*n+this.Zb)+this.y0):(u=1/0,h=1/0),t.x=u,t.y=h,t}function jG(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var a=Wj(this.utg,2*n,2*e);n=n+a[0],e=e+a[1],e=Math.atan(Gj(e));var o=Math.sin(n),c=Math.cos(n),u=Math.sin(e),h=Math.cos(e);n=Math.atan2(o*h,El(u,h*c)),e=Math.atan2(u,h*c),r=Ps(e+this.long0,this.over),i=JN(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var OG=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Ep={init:MG,forward:IG,inverse:jG,names:OG};function wG(t,e){if(t===void 0){if(t=Math.floor((Ps(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var LG="etmerc";function PG(){var t=wG(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*yi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ep.init.apply(this),this.forward=Ep.forward,this.inverse=Ep.inverse}var AG=["Universal Transverse Mercator System","utm"];const kG={init:PG,names:AG,dependsOn:LG};function ZN(t,e){return Math.pow((1-t)/(1+t),e)}var UG=20;function BG(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+mr)/(Math.pow(Math.tan(.5*this.lat0+mr),this.C)*ZN(this.e*t,this.ratexp))}function GG(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+mr),this.C)*ZN(this.e*Math.sin(n),this.ratexp))-ps,t.x=this.C*e,t}function WG(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+mr)/this.K,1/this.C),a=UG;a>0&&(r=2*Math.atan(i*ZN(this.e*Math.sin(t.y),-.5*this.e))-ps,!(Math.abs(r-t.y)<e));--a)t.y=r;return a?(t.x=n,t.y=r,t):null}const eS={init:BG,forward:GG,inverse:WG};function FG(){eS.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function KG(t){var e,n,r,i;return t.x=Ps(t.x-this.long0,this.over),eS.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function QG(t){var e,n,r,i,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=El(t.x,t.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),r=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,eS.inverse.apply(this,[t]),t.x=Ps(t.x+this.long0,this.over),t}var YG=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const $G={init:FG,forward:KG,inverse:QG,names:YG};function tS(t,e,n){return e*=n,Math.tan(.5*(ps+t))*Math.pow((1-e)/(1+e),.5*n)}function VG(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ts&&(this.k0=.5*(1+M_(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ts&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ts&&Math.abs(Math.cos(this.lat_ts))>Ts&&(this.k0=.5*this.cons*kc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=kc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(tS(this.lat0,this.sinlat0,this.e))-ps,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function zG(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),a,o,c,u,h,m,_=Ps(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Ts&&Math.abs(n+this.lat0)<=Ts?(t.x=NaN,t.y=NaN,t):this.sphere?(a=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(_)),t.x=this.a*a*i*Math.sin(_)+this.x0,t.y=this.a*a*(this.coslat0*r-this.sinlat0*i*Math.cos(_))+this.y0,t):(o=2*Math.atan(tS(n,r,this.e))-ps,u=Math.cos(o),c=Math.sin(o),Math.abs(this.coslat0)<=Ts?(h=tc(this.e,n*this.con,this.con*r),m=2*this.a*this.k0*h/this.cons,t.x=this.x0+m*Math.sin(e-this.long0),t.y=this.y0-this.con*m*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Ts?(a=2*this.a*this.k0/(1+u*Math.cos(_)),t.y=a*c):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*c+this.cosX0*u*Math.cos(_))),t.y=a*(this.cosX0*c-this.sinX0*u*Math.cos(_))+this.y0),t.x=a*u*Math.sin(_)+this.x0,t))}function HG(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,a,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=Ts?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/o),Math.abs(this.coslat0)<Ts?this.lat0>0?e=Ps(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=Ps(this.long0+Math.atan2(t.x,t.y),this.over):e=Ps(this.long0+Math.atan2(t.x*Math.sin(c),o*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=Ts){if(o<=Ts)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*o_(this.e,r),e=this.con*Ps(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=Ts?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=Ps(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)),this.over)),n=-1*o_(this.e,Math.tan(.5*(ps+a)));return t.x=e,t.y=n,t}var qG=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const XG={init:VG,forward:zG,inverse:HG,names:qG,ssfn_:tS};function JG(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,a=2*i-Math.pow(i,2),o=this.e=Math.sqrt(a);this.R=this.k0*n*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var c=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=c-this.alpha*u+this.alpha*o/2*h}function ZG(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),c=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(c))/(1-Math.sin(c)))+this.y0,t.x=this.R*o+this.x0,t}function eW(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),c=this.lambda0+o/this.alpha,u=0,h=a,m=-1e3,_=0;Math.abs(h-m)>1e-7;){if(++_>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),m=h,h=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=c,t.y=h,t}var tW=["somerc"];const sW={init:JG,forward:ZG,inverse:eW,names:tW};var Nf=1e-7;function nW(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(Mj(n))!==-1}function rW(){var t,e,n,r,i,a,o,c,u,h,m=0,_,p=0,g=0,C=0,y=0,N=0,v=0;this.no_off=nW(this),this.no_rot="no_rot"in this;var P=!1;"alpha"in this&&(P=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),P&&(v=this.alpha),w&&(m=this.rectified_grid_angle),P||w)p=this.longc;else if(g=this.long1,y=this.lat1,C=this.long2,N=this.lat2,Math.abs(y-N)<=Nf||(t=Math.abs(y))<=Nf||Math.abs(t-ps)<=Nf||Math.abs(Math.abs(this.lat0)-ps)<=Nf||Math.abs(Math.abs(N)-ps)<=Nf)throw new Error;var M=1-this.es;e=Math.sqrt(M),Math.abs(this.lat0)>Ts?(c=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*c*c,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/M),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(tc(this.e,this.lat0,c),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),P||w?(P?(_=Math.asin(Math.sin(v)/r),w||(m=v)):(_=m,v=Math.asin(r*Math.sin(_))),this.lam0=p-Math.asin(.5*(i-1/i)*Math.tan(_))/this.B):(a=Math.pow(tc(this.e,y,Math.sin(y)),this.B),o=Math.pow(tc(this.e,N,Math.sin(N)),this.B),i=this.E/a,u=(o-a)/(o+a),h=this.E*this.E,h=(h-o*a)/(h+o*a),t=g-C,t<-Math.PI?C-=a_:t>Math.PI&&(C+=a_),this.lam0=Ps(.5*(g+C)-Math.atan(h*Math.tan(.5*this.B*(g-C))/u)/this.B,this.over),_=Math.atan(2*Math.sin(this.B*Ps(g-this.lam0,this.over))/(i-1/i)),m=v=Math.asin(r*Math.sin(_))),this.singam=Math.sin(_),this.cosgam=Math.cos(_),this.sinrot=Math.sin(m),this.cosrot=Math.cos(m),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*_,this.v_pole_n=this.ArB*Math.log(Math.tan(mr-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(mr+i))}function iW(t){var e={},n,r,i,a,o,c,u,h;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-ps)>Ts){if(o=this.E/Math.pow(tc(this.e,t.y,Math.sin(t.y)),this.B),c=1/o,n=.5*(o-c),r=.5*(o+c),a=Math.sin(this.B*t.x),i=(n*this.singam-a*this.cosgam)/r,Math.abs(Math.abs(i)-1)<Ts)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),c=Math.cos(this.B*t.x),Math.abs(c)<Nf?u=this.A*t.x:u=this.ArB*Math.atan2(n*this.cosgam+a*this.singam,c)}else h=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(e.x=u,e.y=h):(u-=this.u_0,e.x=h*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function aW(t){var e,n,r,i,a,o,c,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),a=.5*(r+1/r),o=Math.sin(this.BrA*e),c=(o*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(c)-1)<Ts)u.x=0,u.y=c<0?-ps:ps;else{if(u.y=this.E/Math.sqrt((1+c)/(1-c)),u.y=o_(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var lW=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const oW={init:rW,forward:iW,inverse:aW,names:lW};function cW(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ts)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=kc(this.e,e,n),i=tc(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),c=kc(this.e,a,o),u=tc(this.e,this.lat2,a),h=Math.abs(Math.abs(this.lat0)-ps)<Ts?0:tc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ts?this.ns=Math.log(r/c)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function dW(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Ts&&(n=M_(n)*(ps-2*Ts));var r=Math.abs(Math.abs(n)-ps),i,a;if(r>Ts)i=tc(this.e,n,Math.sin(n)),a=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;a=0}var o=this.ns*Ps(e-this.long0,this.over);return t.x=this.k0*(a*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,t}function uW(t){var e,n,r,i,a,o=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+c*c),n=1):(e=-Math.sqrt(o*o+c*c),n=-1);var u=0;if(e!==0&&(u=Math.atan2(n*o,n*c)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=o_(this.e,r),i===-9999)return null}else i=-ps;return a=Ps(u/this.ns+this.long0,this.over),t.x=a,t.y=i,t}var hW=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const fW={init:cW,forward:dW,inverse:uW,names:hW};function mW(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function gW(t){var e,n,r,i,a,o,c,u=t.x,h=t.y,m=Ps(u-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),r=-m*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),a=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*a,c=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=c*Math.cos(o)/1,t.x=c*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function _W(t){var e,n,r,i,a,o,c,u,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x),i=a/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,c=e,u=0;var m=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.e/2))-this.s45),Math.abs(c-t.y)<1e-10&&(u=1),c=t.y,m+=1;while(u===0&&m<15);return m>=15?null:t}var xW=["Krovak","krovak"];const pW={init:mW,forward:gW,inverse:_W,names:xW};function Ja(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function I_(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function j_(t){return .375*t*(1+.25*t*(1+.46875*t))}function O_(t){return .05859375*t*t*(1+.75*t)}function w_(t){return t*t*t*(35/3072)}function sS(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function eh(t){return Math.abs(t)<ps?t:t-M_(t)*Math.PI}function o1(t,e,n,r,i){var a,o;a=t/e;for(var c=0;c<15;c++)if(o=(t-(e*a-n*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function yW(){this.sphere||(this.e0=I_(this.es),this.e1=j_(this.es),this.e2=O_(this.es),this.e3=w_(this.es),this.ml0=this.a*Ja(this.e0,this.e1,this.e2,this.e3,this.lat0))}function bW(t){var e,n,r=t.x,i=t.y;if(r=Ps(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),c=sS(this.a,this.e,a),u=Math.tan(i)*Math.tan(i),h=r*Math.cos(i),m=h*h,_=this.es*o*o/(1-this.es),p=this.a*Ja(this.e0,this.e1,this.e2,this.e3,i);e=c*h*(1-m*u*(1/6-(8-u+8*_)*m/120)),n=p-this.ml0+c*a/o*m*(.5+(5-u+6*_)*m/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function CW(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var a=n+this.lat0;r=Math.asin(Math.sin(a)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(a))}else{var o=this.ml0/this.a+n,c=o1(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(c)-ps)<=Ts)return t.x=this.long0,t.y=ps,n<0&&(t.y*=-1),t;var u=sS(this.a,this.e,Math.sin(c)),h=u*u*u/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(c),2),_=e*this.a/u,p=_*_;r=c-u*Math.tan(c)/h*_*_*(.5-(1+3*m)*_*_/24),i=_*(1-p*(m/3+(1+3*m)*m*p/15))/Math.cos(c)}return t.x=Ps(i+this.long0,this.over),t.y=eh(r),t}var NW=["Cassini","Cassini_Soldner","cass"];const SW={init:yW,forward:bW,inverse:CW,names:NW};function Yu(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var b2=1,C2=2,N2=3,Dp=4;function vW(){var t=Math.abs(this.lat0);if(Math.abs(t-ps)<Ts?this.mode=this.lat0<0?b2:C2:Math.abs(t)<Ts?this.mode=N2:this.mode=Dp,this.es>0){var e;switch(this.qp=Yu(this.e,1),this.mmf=.5/(1-this.es),this.apa=wW(this.es),this.mode){case C2:this.dd=1;break;case b2:this.dd=1;break;case N2:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Dp:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Yu(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Dp&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function EW(t){var e,n,r,i,a,o,c,u,h,m,_=t.x,p=t.y;if(_=Ps(_-this.long0,this.over),this.sphere){if(a=Math.sin(p),m=Math.cos(p),r=Math.cos(_),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+m*r:1+this.sinph0*a+this.cosph0*m*r,n<=Ts)return null;n=Math.sqrt(2/n),e=n*m*Math.sin(_),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*m*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(p+this.lat0)<Ts)return null;n=mr-p*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(_),n*=r}}else{switch(c=0,u=0,h=0,r=Math.cos(_),i=Math.sin(_),a=Math.sin(p),o=Yu(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=o/this.qp,u=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:h=1+this.sinb1*c+this.cosb1*u*r;break;case this.EQUIT:h=1+u*r;break;case this.N_POLE:h=ps+p,o=this.qp-o;break;case this.S_POLE:h=p-ps,o=this.qp+o;break}if(Math.abs(h)<Ts)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?n=this.ymf*h*(this.cosb1*c-this.sinb1*u*r):n=(h=Math.sqrt(2/(1+u*r)))*c*this.ymf,e=this.xmf*h*u*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?h:-h)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function DW(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,a,o,c,u,h;if(this.sphere){var m=0,_,p=0;if(_=Math.sqrt(e*e+n*n),i=_*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(i),m=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(_)<=Ts?0:Math.asin(n*p/_),e*=p,n=m*_;break;case this.OBLIQ:i=Math.abs(_)<=Ts?this.lat0:Math.asin(m*this.sinph0+n*p*this.cosph0/_),e*=p*this.cosph0,n=(m-Math.sin(i)*this.sinph0)*_;break;case this.N_POLE:n=-n,i=ps-i;break;case this.S_POLE:i-=ps;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,u=Math.sqrt(e*e+n*n),u<Ts)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*u/this.rq),a=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=a*this.sinb1+n*o*this.cosb1/u,c=this.qp*h,n=u*this.cosb1*a-n*this.sinb1*o):(h=n*o/u,c=this.qp*h,n=u*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),c=e*e+n*n,!c)return t.x=this.long0,t.y=this.lat0,t;h=1-c/this.qp,this.mode===this.S_POLE&&(h=-h)}r=Math.atan2(e,n),i=LW(Math.asin(h),this.apa)}return t.x=Ps(this.long0+r,this.over),t.y=i,t}var RW=.3333333333333333,TW=.17222222222222222,MW=.10257936507936508,IW=.06388888888888888,jW=.0664021164021164,OW=.016415012942191543;function wW(t){var e,n=[];return n[0]=t*RW,e=t*t,n[0]+=e*TW,n[1]=e*IW,e*=t,n[0]+=e*MW,n[1]+=e*jW,n[2]=e*OW,n}function LW(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var PW=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const AW={init:vW,forward:EW,inverse:DW,names:PW,S_POLE:b2,N_POLE:C2,EQUIT:N2,OBLIQ:Dp};function Hu(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function kW(){Math.abs(this.lat1+this.lat2)<Ts||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=kc(this.e3,this.sin_po,this.cos_po),this.qs1=Yu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=kc(this.e3,this.sin_po,this.cos_po),this.qs2=Yu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Yu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ts?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function UW(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Yu(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*Ps(e-this.long0,this.over),o=i*Math.sin(a)+this.x0,c=this.rh-i*Math.cos(a)+this.y0;return t.x=o,t.y=c,t}function BW(t){var e,n,r,i,a,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),a=Ps(i/this.ns0+this.long0,this.over),t.x=a,t.y=o,t}function GW(t,e){var n,r,i,a,o,c=Hu(.5*e);if(t<Ts)return c;for(var u=t*t,h=1;h<=25;h++)if(n=Math.sin(c),r=Math.cos(c),i=t*n,a=1-i*i,o=.5*a*a/r*(e/(1-u)-n/a+.5/t*Math.log((1-i)/(1+i))),c=c+o,Math.abs(o)<=1e-7)return c;return null}var WW=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const FW={init:kW,forward:UW,inverse:BW,names:WW,phi1z:GW};function KW(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function QW(t){var e,n,r,i,a,o,c,u,h=t.x,m=t.y;return r=Ps(h-this.long0,this.over),e=Math.sin(m),n=Math.cos(m),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,a=1,o>0||Math.abs(o)<=Ts?(c=this.x0+this.a*a*n*Math.sin(r)/o,u=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*n*i)/o):(c=this.x0+this.infinity_dist*n*Math.sin(r),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=c,t.y=u,t}function YW(t){var e,n,r,i,a,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),o=Hu(r*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),a=Ps(this.long0+a,this.over)):(o=this.phic0,a=0),t.x=a,t.y=o,t}var $W=["gnom"];const VW={init:KW,forward:QW,inverse:YW,names:$W};function zW(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*ps:ps;for(var r=Math.asin(.5*e),i,a,o,c,u=0;u<30;u++)if(a=Math.sin(r),o=Math.cos(r),c=t*a,i=Math.pow(1-c*c,2)/(2*o)*(e/(1-t*t)-a/(1-c*c)+.5/t*Math.log((1-c)/(1+c))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function HW(){this.sphere||(this.k0=kc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function qW(t){var e=t.x,n=t.y,r,i,a=Ps(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var o=Yu(this.e,Math.sin(n));r=this.x0+this.a*this.k0*a,i=this.y0+this.a*o*.5/this.k0}return t.x=r,t.y=i,t}function XW(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Ps(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=zW(this.e,2*t.y*this.k0/this.a),e=Ps(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var JW=["cea"];const ZW={init:HW,forward:qW,inverse:XW,names:JW};function eF(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function tF(t){var e=t.x,n=t.y,r=Ps(e-this.long0,this.over),i=eh(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function sF(t){var e=t.x,n=t.y;return t.x=Ps(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=eh(this.lat0+(n-this.y0)/this.a),t}var nF=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const rF={init:eF,forward:tF,inverse:sF,names:nF};var rR=20;function iF(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=I_(this.es),this.e1=j_(this.es),this.e2=O_(this.es),this.e3=w_(this.es),this.ml0=this.a*Ja(this.e0,this.e1,this.e2,this.e3,this.lat0)}function aF(t){var e=t.x,n=t.y,r,i,a,o=Ps(e-this.long0,this.over);if(a=o*Math.sin(n),this.sphere)Math.abs(n)<=Ts?(r=this.a*o,i=-1*this.a*this.lat0):(r=this.a*Math.sin(a)/Math.tan(n),i=this.a*(eh(n-this.lat0)+(1-Math.cos(a))/Math.tan(n)));else if(Math.abs(n)<=Ts)r=this.a*o,i=-1*this.ml0;else{var c=sS(this.a,this.e,Math.sin(n))/Math.tan(n);r=c*Math.sin(a),i=this.a*Ja(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+c*(1-Math.cos(a))}return t.x=r+this.x0,t.y=i+this.y0,t}function lF(t){var e,n,r,i,a,o,c,u,h;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Ts)e=Ps(r/this.a+this.long0,this.over),n=0;else{o=this.lat0+i/this.a,c=r*r/this.a/this.a+o*o,u=o;var m;for(a=rR;a;--a)if(m=Math.tan(u),h=-1*(o*(u*m+1)-u-.5*(u*u+c)*m)/((u-o)/m-1),u+=h,Math.abs(h)<=Ts){n=u;break}e=Ps(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n),this.over)}else if(Math.abs(i+this.ml0)<=Ts)n=0,e=Ps(this.long0+r/this.a,this.over);else{o=(this.ml0+i)/this.a,c=r*r/this.a/this.a+o*o,u=o;var _,p,g,C,y;for(a=rR;a;--a)if(y=this.e*Math.sin(u),_=Math.sqrt(1-y*y)*Math.tan(u),p=this.a*Ja(this.e0,this.e1,this.e2,this.e3,u),g=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),C=p/this.a,h=(o*(_*C+1)-C-.5*_*(C*C+c))/(this.es*Math.sin(2*u)*(C*C+c-2*o*C)/(4*_)+(o-C)*(_*g-2/Math.sin(2*u))-g),u-=h,Math.abs(h)<=Ts){n=u;break}_=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ps(this.long0+Math.asin(r*_/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var oF=["Polyconic","American_Polyconic","poly"];const cF={init:iF,forward:aF,inverse:lF,names:oF};function dF(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function uF(t){var e,n=t.x,r=t.y,i=r-this.lat0,a=n-this.long0,o=i/Bg*1e-5,c=a,u=1,h=0;for(e=1;e<=10;e++)u=u*o,h=h+this.A[e]*u;var m=h,_=c,p=1,g=0,C,y,N=0,v=0;for(e=1;e<=6;e++)C=p*m-g*_,y=g*m+p*_,p=C,g=y,N=N+this.B_re[e]*p-this.B_im[e]*g,v=v+this.B_im[e]*p+this.B_re[e]*g;return t.x=v*this.a+this.x0,t.y=N*this.a+this.y0,t}function hF(t){var e,n=t.x,r=t.y,i=n-this.x0,a=r-this.y0,o=a/this.a,c=i/this.a,u=1,h=0,m,_,p=0,g=0;for(e=1;e<=6;e++)m=u*o-h*c,_=h*o+u*c,u=m,h=_,p=p+this.C_re[e]*u-this.C_im[e]*h,g=g+this.C_im[e]*u+this.C_re[e]*h;for(var C=0;C<this.iterations;C++){var y=p,N=g,v,P,w=o,M=c;for(e=2;e<=6;e++)v=y*p-N*g,P=N*p+y*g,y=v,N=P,w=w+(e-1)*(this.B_re[e]*y-this.B_im[e]*N),M=M+(e-1)*(this.B_im[e]*y+this.B_re[e]*N);y=1,N=0;var k=this.B_re[1],B=this.B_im[1];for(e=2;e<=6;e++)v=y*p-N*g,P=N*p+y*g,y=v,N=P,k=k+e*(this.B_re[e]*y-this.B_im[e]*N),B=B+e*(this.B_im[e]*y+this.B_re[e]*N);var G=k*k+B*B;p=(w*k+M*B)/G,g=(M*k-w*B)/G}var U=p,I=g,E=1,A=0;for(e=1;e<=9;e++)E=E*U,A=A+this.D[e]*E;var Y=this.lat0+A*Bg*1e5,se=this.long0+I;return t.x=se,t.y=Y,t}var fF=["New_Zealand_Map_Grid","nzmg"];const mF={init:dF,forward:uF,inverse:hF,names:fF};function gF(){}function _F(t){var e=t.x,n=t.y,r=Ps(e-this.long0,this.over),i=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=a,t}function xF(t){t.x-=this.x0,t.y-=this.y0;var e=Ps(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var pF=["Miller_Cylindrical","mill"];const yF={init:gF,forward:_F,inverse:xF,names:pF};var bF=20;function CF(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=qN(this.es)}function NF(t){var e,n,r=t.x,i=t.y;if(r=Ps(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var a=this.n*Math.sin(i),o=bF;o;--o){var c=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=c,Math.abs(c)<Ts)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),h=Math.cos(i);n=this.a*bm(i,u,h,this.en),e=this.a*r*h/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t}function SF(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=Hu((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Hu(Math.sin(e)/this.n)),r=Ps(r+this.long0,this.over),e=eh(e)):(e=XN(t.y/this.a,this.es,this.en),i=Math.abs(e),i<ps?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Ps(n,this.over)):i-Ts<ps&&(r=this.long0)),t.x=r,t.y=e,t}var vF=["Sinusoidal","sinu"];const EF={init:CF,forward:NF,inverse:SF,names:vF};function DF(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function RF(t){for(var e=t.x,n=t.y,r=Ps(e-this.long0,this.over),i=n,a=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=o,Math.abs(o)<Ts)break}i/=2,Math.PI/2-Math.abs(n)<Ts&&(r=0);var c=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=c,t.y=u,t}function TF(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Ps(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var MF=["Mollweide","moll"];const IF={init:DF,forward:RF,inverse:TF,names:MF};function jF(){Math.abs(this.lat1+this.lat2)<Ts||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=I_(this.es),this.e1=j_(this.es),this.e2=O_(this.es),this.e3=w_(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=kc(this.e,this.sin_phi,this.cos_phi),this.ml1=Ja(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ts?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=kc(this.e,this.sin_phi,this.cos_phi),this.ml2=Ja(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ja(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function OF(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=Ja(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var a=this.ns*Ps(e-this.long0,this.over),o=this.x0+r*Math.sin(a),c=this.y0+this.rh-r*Math.cos(a);return t.x=o,t.y=c,t}function wF(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;if(n!==0&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Ps(this.long0+a/this.ns,this.over),r=eh(this.g-n/this.a),t.x=i,t.y=r,t;var o=this.g-n/this.a;return r=o1(o,this.e0,this.e1,this.e2,this.e3),i=Ps(this.long0+a/this.ns,this.over),t.x=i,t.y=r,t}var LF=["Equidistant_Conic","eqdc"];const PF={init:jF,forward:OF,inverse:wF,names:LF};function AF(){this.R=this.a}function kF(t){var e=t.x,n=t.y,r=Ps(e-this.long0,this.over),i,a;Math.abs(n)<=Ts&&(i=this.x0+this.R*r,a=this.y0);var o=Hu(2*Math.abs(n/Math.PI));(Math.abs(r)<=Ts||Math.abs(Math.abs(n)-ps)<=Ts)&&(i=this.x0,n>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*o):a=this.y0+Math.PI*this.R*-Math.tan(.5*o));var c=.5*Math.abs(Math.PI/r-r/Math.PI),u=c*c,h=Math.sin(o),m=Math.cos(o),_=m/(h+m-1),p=_*_,g=_*(2/h-1),C=g*g,y=Math.PI*this.R*(c*(_-C)+Math.sqrt(u*(_-C)*(_-C)-(C+u)*(p-C)))/(C+u);r<0&&(y=-y),i=this.x0+y;var N=u+_;return y=Math.PI*this.R*(g*N-c*Math.sqrt((C+u)*(u+1)-N*N))/(C+u),n>=0?a=this.y0+y:a=this.y0-y,t.x=i,t.y=a,t}function UF(t){var e,n,r,i,a,o,c,u,h,m,_,p,g;return t.x-=this.x0,t.y-=this.y0,_=Math.PI*this.R,r=t.x/_,i=t.y/_,a=r*r+i*i,o=-Math.abs(i)*(1+a),c=o-2*i*i+r*r,u=-2*o+1+2*i*i+a*a,g=i*i/u+(2*c*c*c/u/u/u-9*o*c/u/u)/27,h=(o-c*c/3/u)/u,m=2*Math.sqrt(-h/3),_=3*g/h/m,Math.abs(_)>1&&(_>=0?_=1:_=-1),p=Math.acos(_)/3,t.y>=0?n=(-m*Math.cos(p+Math.PI/3)-c/3/u)*Math.PI:n=-(-m*Math.cos(p+Math.PI/3)-c/3/u)*Math.PI,Math.abs(r)<Ts?e=this.long0:e=Ps(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(r*r-i*i)+a*a))/2/r,this.over),t.x=e,t.y=n,t}var BF=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const GF={init:AF,forward:kF,inverse:UF,names:BF};function WF(t,e,n,r,i,a){const o=r-e,c=Math.atan((1-a)*Math.tan(t)),u=Math.atan((1-a)*Math.tan(n)),h=Math.sin(c),m=Math.cos(c),_=Math.sin(u),p=Math.cos(u);let g=o,C,y=100,N,v,P,w,M,k,B,G,U,I,E,A,Y,se;do{if(N=Math.sin(g),v=Math.cos(g),P=Math.sqrt(p*N*(p*N)+(m*_-h*p*v)*(m*_-h*p*v)),P===0)return{azi1:0,s12:0};w=h*_+m*p*v,M=Math.atan2(P,w),k=m*p*N/P,B=1-k*k,G=B!==0?w-2*h*_/B:0,U=a/16*B*(4+a*(4-3*B)),C=g,g=o+(1-U)*a*k*(M+U*P*(G+U*w*(-1+2*G*G)))}while(Math.abs(g-C)>1e-12&&--y>0);return y===0?{azi1:NaN,s12:NaN}:(I=B*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),E=1+I/16384*(4096+I*(-768+I*(320-175*I))),A=I/1024*(256+I*(-128+I*(74-47*I))),Y=A*P*(G+A/4*(w*(-1+2*G*G)-A/6*G*(-3+4*P*P)*(-3+4*G*G))),se=i*(1-a)*E*(M-Y),{azi1:Math.atan2(p*N,m*_-h*p*v),s12:se})}function FF(t,e,n,r,i,a){const o=Math.atan((1-a)*Math.tan(t)),c=Math.sin(o),u=Math.cos(o),h=Math.sin(n),m=Math.cos(n),_=Math.atan2(c,u*m),p=u*h,g=1-p*p,C=g*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),y=1+C/16384*(4096+C*(-768+C*(320-175*C))),N=C/1024*(256+C*(-128+C*(74-47*C)));let v=r/(i*(1-a)*y),P,w=100,M,k,B,G;do M=Math.cos(2*_+v),k=Math.sin(v),B=Math.cos(v),G=N*k*(M+N/4*(B*(-1+2*M*M)-N/6*M*(-3+4*k*k)*(-3+4*M*M))),P=v,v=r/(i*(1-a)*y)+G;while(Math.abs(v-P)>1e-12&&--w>0);if(w===0)return{lat2:NaN,lon2:NaN};const U=c*k-u*B*m,I=Math.atan2(c*B+u*k*m,(1-a)*Math.sqrt(p*p+U*U)),E=Math.atan2(k*h,u*B-c*k*m),A=a/16*g*(4+a*(4-3*g)),Y=E-(1-A)*a*p*(v+A*k*(M+A*B*(-1+2*M*M))),se=e+Y;return{lat2:I,lon2:se}}function KF(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function QF(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),a=Ps(e-this.long0,this.over),o,c,u,h,m,_,p,g,C,y,N;return this.sphere?Math.abs(this.sin_p12-1)<=Ts?(t.x=this.x0+this.a*(ps-n)*Math.sin(a),t.y=this.y0-this.a*(ps-n)*Math.cos(a),t):Math.abs(this.sin_p12+1)<=Ts?(t.x=this.x0+this.a*(ps+n)*Math.sin(a),t.y=this.y0+this.a*(ps+n)*Math.cos(a),t):(C=this.sin_p12*r+this.cos_p12*i*Math.cos(a),p=Math.acos(C),g=p?p/Math.sin(p):1,t.x=this.x0+this.a*g*i*Math.sin(a),t.y=this.y0+this.a*g*(this.cos_p12*r-this.sin_p12*i*Math.cos(a)),t):(o=I_(this.es),c=j_(this.es),u=O_(this.es),h=w_(this.es),Math.abs(this.sin_p12-1)<=Ts?(m=this.a*Ja(o,c,u,h,ps),_=this.a*Ja(o,c,u,h,n),t.x=this.x0+(m-_)*Math.sin(a),t.y=this.y0-(m-_)*Math.cos(a),t):Math.abs(this.sin_p12+1)<=Ts?(m=this.a*Ja(o,c,u,h,ps),_=this.a*Ja(o,c,u,h,n),t.x=this.x0+(m+_)*Math.sin(a),t.y=this.y0+(m+_)*Math.cos(a),t):Math.abs(e)<Ts&&Math.abs(n-this.lat0)<Ts?(t.x=t.y=0,t):(y=WF(this.lat0,this.long0,n,e,this.a,this.f),N=y.azi1,t.x=y.s12*Math.sin(N),t.y=y.s12*Math.cos(N),t))}function YF(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,a,o,c,u,h,m,_,p,g,C,y,N;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*ps*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=Ts?o=this.lat0:(o=Hu(i*this.sin_p12+t.y*r*this.cos_p12/e),c=Math.abs(this.lat0)-ps,Math.abs(c)<=Ts?this.lat0>=0?a=Ps(this.long0+Math.atan2(t.x,-t.y),this.over):a=Ps(this.long0-Math.atan2(-t.x,t.y),this.over):a=Ps(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r),this.over)),t.x=a,t.y=o,t)):(u=I_(this.es),h=j_(this.es),m=O_(this.es),_=w_(this.es),Math.abs(this.sin_p12-1)<=Ts?(p=this.a*Ja(u,h,m,_,ps),e=Math.sqrt(t.x*t.x+t.y*t.y),g=p-e,o=o1(g/this.a,u,h,m,_),a=Ps(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=a,t.y=o,t):Math.abs(this.sin_p12+1)<=Ts?(p=this.a*Ja(u,h,m,_,ps),e=Math.sqrt(t.x*t.x+t.y*t.y),g=e-p,o=o1(g/this.a,u,h,m,_),a=Ps(this.long0+Math.atan2(t.x,t.y),this.over),t.x=a,t.y=o,t):(C=Math.atan2(t.x,t.y),y=Math.sqrt(t.x*t.x+t.y*t.y),N=FF(this.lat0,this.long0,C,y,this.a,this.f),t.x=N.lon2,t.y=N.lat2,t))}var $F=["Azimuthal_Equidistant","aeqd"];const VF={init:KF,forward:QF,inverse:YF,names:$F};function zF(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function HF(t){var e,n,r,i,a,o,c,u,h=t.x,m=t.y;return r=Ps(h-this.long0,this.over),e=Math.sin(m),n=Math.cos(m),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,a=1,(o>0||Math.abs(o)<=Ts)&&(c=this.a*a*n*Math.sin(r),u=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=c,t.y=u,t}function qF(t){var e,n,r,i,a,o,c;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Hu(e/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=Ts?(c=this.lat0,t.x=o,t.y=c,t):(c=Hu(i*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.abs(this.lat0)-ps,Math.abs(a)<=Ts?(this.lat0>=0?o=Ps(this.long0+Math.atan2(t.x,-t.y),this.over):o=Ps(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=o,t.y=c,t):(o=Ps(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),this.over),t.x=o,t.y=c,t))}var XF=["ortho"];const JF={init:zF,forward:HF,inverse:qF,names:XF};var oi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},gr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function ZF(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ps-mr/2?this.face=oi.TOP:this.lat0<=-(ps-mr/2)?this.face=oi.BOTTOM:Math.abs(this.long0)<=mr?this.face=oi.FRONT:Math.abs(this.long0)<=ps+mr?this.face=this.long0>0?oi.RIGHT:oi.LEFT:this.face=oi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function eK(t){var e={x:0,y:0},n,r,i,a,o,c,u={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===oi.TOP)a=ps-n,r>=mr&&r<=ps+mr?(u.value=gr.AREA_0,i=r-ps):r>ps+mr||r<=-(ps+mr)?(u.value=gr.AREA_1,i=r>0?r-vi:r+vi):r>-(ps+mr)&&r<=-mr?(u.value=gr.AREA_2,i=r+ps):(u.value=gr.AREA_3,i=r);else if(this.face===oi.BOTTOM)a=ps+n,r>=mr&&r<=ps+mr?(u.value=gr.AREA_0,i=-r+ps):r<mr&&r>=-mr?(u.value=gr.AREA_1,i=-r):r<-mr&&r>=-(ps+mr)?(u.value=gr.AREA_2,i=-r-ps):(u.value=gr.AREA_3,i=r>0?-r+vi:-r-vi);else{var h,m,_,p,g,C,y;this.face===oi.RIGHT?r=Wf(r,+ps):this.face===oi.BACK?r=Wf(r,+vi):this.face===oi.LEFT&&(r=Wf(r,-ps)),p=Math.sin(n),g=Math.cos(n),C=Math.sin(r),y=Math.cos(r),h=g*y,m=g*C,_=p,this.face===oi.FRONT?(a=Math.acos(h),i=Hx(a,_,m,u)):this.face===oi.RIGHT?(a=Math.acos(m),i=Hx(a,_,-h,u)):this.face===oi.BACK?(a=Math.acos(-h),i=Hx(a,_,-m,u)):this.face===oi.LEFT?(a=Math.acos(-m),i=Hx(a,_,h,u)):(a=i=0,u.value=gr.AREA_0)}return c=Math.atan(12/vi*(i+Math.acos(Math.sin(i)*Math.cos(mr))-ps)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(c)*Math.cos(c))/(1-Math.cos(Math.atan(1/Math.cos(i))))),u.value===gr.AREA_1?c+=ps:u.value===gr.AREA_2?c+=vi:u.value===gr.AREA_3&&(c+=1.5*vi),e.x=o*Math.cos(c),e.y=o*Math.sin(c),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function tK(t){var e={lam:0,phi:0},n,r,i,a,o,c,u,h,m,_={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?_.value=gr.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(_.value=gr.AREA_1,n-=ps):t.x<0&&-t.x>=Math.abs(t.y)?(_.value=gr.AREA_2,n=n<0?n+vi:n-vi):(_.value=gr.AREA_3,n+=ps),m=vi/12*Math.tan(n),o=Math.sin(m)/(Math.cos(m)-1/Math.sqrt(2)),c=Math.atan(o),i=Math.cos(n),a=Math.tan(r),u=1-i*i*a*a*(1-Math.cos(Math.atan(1/Math.cos(c)))),u<-1?u=-1:u>1&&(u=1),this.face===oi.TOP)h=Math.acos(u),e.phi=ps-h,_.value===gr.AREA_0?e.lam=c+ps:_.value===gr.AREA_1?e.lam=c<0?c+vi:c-vi:_.value===gr.AREA_2?e.lam=c-ps:e.lam=c;else if(this.face===oi.BOTTOM)h=Math.acos(u),e.phi=h-ps,_.value===gr.AREA_0?e.lam=-c+ps:_.value===gr.AREA_1?e.lam=-c:_.value===gr.AREA_2?e.lam=-c-ps:e.lam=c<0?-c-vi:-c+vi;else{var p,g,C;p=u,m=p*p,m>=1?C=0:C=Math.sqrt(1-m)*Math.sin(c),m+=C*C,m>=1?g=0:g=Math.sqrt(1-m),_.value===gr.AREA_1?(m=g,g=-C,C=m):_.value===gr.AREA_2?(g=-g,C=-C):_.value===gr.AREA_3&&(m=g,g=C,C=-m),this.face===oi.RIGHT?(m=p,p=-g,g=m):this.face===oi.BACK?(p=-p,g=-g):this.face===oi.LEFT&&(m=p,p=g,g=-m),e.phi=Math.acos(-C)-ps,e.lam=Math.atan2(g,p),this.face===oi.RIGHT?e.lam=Wf(e.lam,-ps):this.face===oi.BACK?e.lam=Wf(e.lam,-vi):this.face===oi.LEFT&&(e.lam=Wf(e.lam,+ps))}if(this.es!==0){var y,N,v;y=e.phi<0?1:0,N=Math.tan(e.phi),v=this.b/Math.sqrt(N*N+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),y&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Hx(t,e,n,r){var i;return t<Ts?(r.value=gr.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=mr?r.value=gr.AREA_0:i>mr&&i<=ps+mr?(r.value=gr.AREA_1,i-=ps):i>ps+mr||i<=-(ps+mr)?(r.value=gr.AREA_2,i=i>=0?i-vi:i+vi):(r.value=gr.AREA_3,i+=ps)),i}function Wf(t,e){var n=t+e;return n<-vi?n+=a_:n>+vi&&(n-=a_),n}var sK=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const nK={init:ZF,forward:eK,inverse:tK,names:sK};var S2=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ig=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Fj=.8487,Kj=1.3523,Qj=Rl/5,rK=1/Qj,If=18,c1=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},iK=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function aK(t,e,n,r){for(var i=e;r;--r){var a=t(i);if(i-=a,Math.abs(a)<n)break}return i}function lK(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function oK(t){var e=Ps(t.x-this.long0,this.over),n=Math.abs(t.y),r=Math.floor(n*Qj);r<0?r=0:r>=If&&(r=If-1),n=Rl*(n-rK*r);var i={x:c1(S2[r],n)*e,y:c1(Ig[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Fj+this.x0,i.y=i.y*this.a*Kj+this.y0,i}function cK(t){var e={x:(t.x-this.x0)/(this.a*Fj),y:Math.abs(t.y-this.y0)/(this.a*Kj)};if(e.y>=1)e.x/=S2[If][0],e.y=t.y<0?-ps:ps;else{var n=Math.floor(e.y*If);for(n<0?n=0:n>=If&&(n=If-1);;)if(Ig[n][0]>e.y)--n;else if(Ig[n+1][0]<=e.y)++n;else break;var r=Ig[n],i=5*(e.y-r[0])/(Ig[n+1][0]-r[0]);i=aK(function(a){return(c1(r,a)-e.y)/iK(r,a)},i,Ts,100),e.x/=c1(S2[n],i),e.y=(5*n+i)*yi,t.y<0&&(e.y=-e.y)}return e.x=Ps(e.x+this.long0,this.over),e}var dK=["Robinson","robin"];const uK={init:lK,forward:oK,inverse:cK,names:dK};function hK(){this.name="geocent"}function fK(t){var e=jj(t,this.es,this.a);return e}function mK(t){var e=Oj(t,this.es,this.a,this.b);return e}var gK=["Geocentric","geocentric","geocent","Geocent"];const _K={init:hK,forward:fK,inverse:mK,names:gK};var Ua={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},_g={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function xK(){if(Object.keys(_g).forEach((function(n){if(typeof this[n]>"u")this[n]=_g[n].def;else{if(_g[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);_g[n].num&&(this[n]=parseFloat(this[n]))}_g[n].degrees&&(this[n]=this[n]*yi)}).bind(this)),Math.abs(Math.abs(this.lat0)-ps)<Ts?this.mode=this.lat0<0?Ua.S_POLE:Ua.N_POLE:Math.abs(this.lat0)<Ts?this.mode=Ua.EQUIT:(this.mode=Ua.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function pK(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,a;switch(this.mode){case Ua.OBLIQ:a=this.sinph0*e+this.cosph0*n*r;break;case Ua.EQUIT:a=n*r;break;case Ua.S_POLE:a=-e;break;case Ua.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),i=a*n*Math.sin(t.x),this.mode){case Ua.OBLIQ:a*=this.cosph0*e-this.sinph0*n*r;break;case Ua.EQUIT:a*=e;break;case Ua.N_POLE:a*=-(n*r);break;case Ua.S_POLE:a*=n*r;break}var o,c;return o=a*this.cg+i*this.sg,c=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-a*this.sg)*this.cw*c,a=o*c,t.x=i*this.a,t.y=a*this.a,t}function yK(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var a=El(t.x,t.y);if(Math.abs(a)<Ts)e.x=0,e.y=t.y;else{var o,c;switch(c=1-a*a*this.pfact,c=(this.p-Math.sqrt(c))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-c*c),this.mode){case Ua.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*c*this.cosph0/a),t.y=(o-this.sinph0*Math.sin(e.y))*a,t.x*=c*this.cosph0;break;case Ua.EQUIT:e.y=Math.asin(t.y*c/a),t.y=o*a,t.x*=c;break;case Ua.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case Ua.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var bK=["Tilted_Perspective","tpers"];const CK={init:xK,forward:pK,inverse:yK,names:bK};function NK(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function SK(t){var e=t.x,n=t.y,r,i,a,o;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var c=this.radius_p/El(this.radius_p*Math.cos(n),Math.sin(n));if(i=c*Math.cos(e)*Math.cos(n),a=c*Math.sin(e)*Math.cos(n),o=c*Math.sin(n),(this.radius_g-i)*i-a*a-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/El(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(a/r),t.y=this.radius_g_1*Math.atan(o/El(a,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,a=Math.sin(e)*r,o=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/El(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(a/r),t.y=this.radius_g_1*Math.atan(o/El(a,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function vK(t){var e=-1,n=0,r=0,i,a,o,c;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*El(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*El(1,n));var u=r/this.radius_p;if(i=n*n+u*u+e*e,a=2*this.radius_g*e,o=a*a-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;c=(-a-Math.sqrt(o))/(2*i),e=this.radius_g+c*e,n*=c,r*=c,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,a=2*this.radius_g*e,o=a*a-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;c=(-a-Math.sqrt(o))/(2*i),e=this.radius_g+c*e,n*=c,r*=c,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var EK=["Geostationary Satellite View","Geostationary_Satellite","geos"];const DK={init:NK,forward:SK,inverse:vK,names:EK};var Gg=1.340264,Wg=-.081106,Fg=893e-6,Kg=.003796,d1=Math.sqrt(3)/2;function RK(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function TK(t){var e=Ps(t.x-this.long0,this.over),n=t.y,r=Math.asin(d1*Math.sin(n)),i=r*r,a=i*i*i;return t.x=e*Math.cos(r)/(d1*(Gg+3*Wg*i+a*(7*Fg+9*Kg*i))),t.y=r*(Gg+Wg*i+a*(Fg+Kg*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function MK(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,a,o,c,u,h;for(h=0;h<n&&(i=r*r,a=i*i*i,o=r*(Gg+Wg*i+a*(Fg+Kg*i))-t.y,c=Gg+3*Wg*i+a*(7*Fg+9*Kg*i),r-=u=o/c,!(Math.abs(u)<e));++h);return i=r*r,a=i*i*i,t.x=d1*t.x*(Gg+3*Wg*i+a*(7*Fg+9*Kg*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/d1),t.x=Ps(t.x+this.long0,this.over),t}var IK=["eqearth","Equal Earth","Equal_Earth"];const jK={init:RK,forward:TK,inverse:MK,names:IK};var c_=1e-10;function OK(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<c_)throw new Error;this.es?(this.en=qN(this.es),this.m1=bm(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=LK,this.forward=wK):(Math.abs(this.phi1)+c_>=ps?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=AK,this.forward=PK)}function wK(t){var e=Ps(t.x-(this.long0||0),this.over),n=t.y,r,i,a;return r=this.am1+this.m1-bm(n,i=Math.sin(n),a=Math.cos(n),this.en),i=a*e/(r*Math.sqrt(1-this.es*i*i)),t.x=r*Math.sin(i),t.y=this.am1-r*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function LK(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,i;if(n=El(t.x,t.y=this.am1-t.y),i=XN(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<ps)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-ps)<=c_)r=0;else throw new Error;return t.x=Ps(r+(this.long0||0),this.over),t.y=eh(i),t}function PK(t){var e=Ps(t.x-(this.long0||0),this.over),n=t.y,r,i;return i=this.cphi1+this.phi1-n,Math.abs(i)>c_?(t.x=i*Math.sin(r=e*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function AK(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=El(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>ps)throw new Error;return Math.abs(Math.abs(n)-ps)<=c_?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=Ps(e+(this.long0||0),this.over),t.y=eh(n),t}var kK=["bonne","Bonne (Werner lat_1=90)"];const UK={init:OK,names:kK},iR={OBLIQUE:{forward:KK,inverse:YK},TRANSVERSE:{forward:QK,inverse:$K}},u1={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function BK(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=Rj.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=yo(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const r=Object.keys(u1),i=c=>{if(typeof this[c]>"u")return;const u=parseFloat(this[c])*yi;if(isNaN(u))throw new Error("Invalid value for "+c+": "+this[c]);return u};for(let c=0;c<r.length;c++){const u=r[c],h=u1[u],m=Object.entries(h);if(m.some(([p])=>typeof this[p]<"u")){n=h;for(let p=0;p<m.length;p++){const[g,C]=m[p],y=i(g);if(typeof y>"u")throw new Error("Missing parameter: "+g+".");this[C]=y}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:a,phip:o}=FK(this,n);this.lamp=a,Math.abs(o)>Ts?(this.cphip=Math.cos(o),this.sphip=Math.sin(o),this.projectionType=iR.OBLIQUE):this.projectionType=iR.TRANSVERSE}function GK(t){return this.projectionType.forward(this,t)}function WK(t){return this.projectionType.inverse(this,t)}function FK(t,e){let n,r;if(e===u1.ROTATE){let i=t.oLongC,a=t.oLatC,o=t.oAlpha;if(Math.abs(Math.abs(a)-ps)<=Ts)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(o),-1*Math.sin(o)*Math.sin(a)),n=Math.asin(Math.cos(a)*Math.sin(o))}else if(e===u1.NEW_POLE)r=t.oLongP,n=t.oLatP;else{let i=t.oLong1,a=t.oLat1,o=t.oLong2,c=t.oLat2,u=Math.abs(a);if(Math.abs(a)>ps-Ts)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(c)>ps-Ts)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(a-c)<Ts)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(u<Ts)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(a)*Math.sin(c)*Math.cos(i)-Math.sin(a)*Math.cos(c)*Math.cos(o),Math.sin(a)*Math.cos(c)*Math.sin(o)-Math.cos(a)*Math.sin(c)*Math.sin(i)),n=Math.atan(-1*Math.cos(r-i)/Math.tan(a))}return{lamp:r,phip:n}}function KK(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(n),a=Math.sin(r),o=Math.cos(r);e.x=Ps(Math.atan2(o*Math.sin(n),t.sphip*o*i+t.cphip*a)+t.lamp),e.y=Math.asin(t.sphip*a-t.cphip*o*i);const c=t.obliqueProjection.forward(e);return t.isIdentity&&(c.x*=Rl,c.y*=Rl),c}function QK(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(r),a=Math.cos(n);e.x=Ps(Math.atan2(i*Math.sin(n),Math.sin(r))+t.lamp),e.y=Math.asin(-1*i*a);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=Rl,o.y*=Rl),o}function YK(t,e){t.isIdentity&&(e.x*=yi,e.y*=yi);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){r-=t.lamp;const a=Math.cos(r),o=Math.sin(i),c=Math.cos(i);e.x=Math.atan2(c*Math.sin(r),t.sphip*c*a-t.cphip*o),e.y=Math.asin(t.sphip*o+t.cphip*c*a)}return e.x=Ps(e.x+t.long0),e}function $K(t,e){t.isIdentity&&(e.x*=yi,e.y*=yi);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){const a=Math.cos(i);r-=t.lamp,e.x=Math.atan2(a*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(a*Math.cos(r))}return e.x=Ps(e.x+t.long0),e}var VK=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const zK={init:BK,forward:GK,inverse:WK,names:VK};function HK(t){t.Proj.projections.add(vp),t.Proj.projections.add(Ep),t.Proj.projections.add(kG),t.Proj.projections.add($G),t.Proj.projections.add(XG),t.Proj.projections.add(sW),t.Proj.projections.add(oW),t.Proj.projections.add(fW),t.Proj.projections.add(pW),t.Proj.projections.add(SW),t.Proj.projections.add(AW),t.Proj.projections.add(FW),t.Proj.projections.add(VW),t.Proj.projections.add(ZW),t.Proj.projections.add(rF),t.Proj.projections.add(cF),t.Proj.projections.add(mF),t.Proj.projections.add(yF),t.Proj.projections.add(EF),t.Proj.projections.add(IF),t.Proj.projections.add(PF),t.Proj.projections.add(GF),t.Proj.projections.add(VF),t.Proj.projections.add(JF),t.Proj.projections.add(nK),t.Proj.projections.add(uK),t.Proj.projections.add(_K),t.Proj.projections.add(CK),t.Proj.projections.add(DK),t.Proj.projections.add(jK),t.Proj.projections.add(UK),t.Proj.projections.add(zK)}const v2=Object.assign(eG,{defaultDatum:"WGS84",Proj:yo,WGS84:new yo("WGS84"),Point:mm,toPoint:wj,defs:va,nadgrid:AB,transform:l1,mgrs:tG,version:"__VERSION__"});HK(v2);const df={:"#DC2626",:"#16A34A",:"#9CA3AF",default:"#EF4444"},qK="A4EED0C3-BED4-315A-AF7B-B47F94357975";function XK(t,e){const n=e+1,r=n>=100?9:n>=10?11:13,i=`<svg xmlns="http://www.w3.org/2000/svg" width="36" height="48" viewBox="0 0 36 48">
    <path fill="${t}" stroke="#fff" stroke-width="2" d="M18 2C9.163 2 2 9.163 2 18c0 12 16 28 16 28s16-16 16-28c0-8.837-7.163-16-16-16z"/>
    <circle fill="#fff" cx="18" cy="18" r="10"/>
    <text x="18" y="22" text-anchor="middle" font-size="${r}" font-weight="bold" fill="${t}" font-family="Arial,sans-serif">${n}</text>
  </svg>`;return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i)}function qx(){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">
    <circle cx="20" cy="20" r="18" fill="#3B82F6" fill-opacity="0.15" stroke="#3B82F6" stroke-width="1.5" stroke-opacity="0.4"/>
    <circle cx="20" cy="20" r="9" fill="#3B82F6" stroke="#fff" stroke-width="3"/>
  </svg>`)}function JK(){return new Promise(t=>{var r,i,a;if((i=(r=window.kakao)==null?void 0:r.maps)!=null&&i.services){t(!0);return}if((a=window.kakao)!=null&&a.maps){window.kakao.maps.load(()=>t(!!window.kakao.maps.services));return}let e=0;const n=setInterval(async()=>{var o;if(e++,(o=window.kakao)!=null&&o.maps){if(clearInterval(n),window.kakao.maps.services){t(!0);return}window.kakao.maps.load(()=>t(!!window.kakao.maps.services))}else if(e>25){clearInterval(n);const c=await cN(),u=Pg(c.kakao);if(!u){t(!1);return}const h=document.createElement("script");h.src=`https://dapi.kakao.com/v2/maps/sdk.js?appkey=${u}&libraries=services&autoload=false`,h.onload=()=>{var m;(m=window.kakao)!=null&&m.maps?window.kakao.maps.load(()=>t(!!window.kakao.maps.services)):t(!1)},h.onerror=()=>t(!1),document.head.appendChild(h)}},200)})}function ZK(t){return new Promise(e=>{var r,i;if(!((i=(r=window.kakao)==null?void 0:r.maps)!=null&&i.services)){e(null);return}const n=new window.kakao.maps.services.Geocoder;n.addressSearch(t,(a,o)=>{if(o===window.kakao.maps.services.Status.OK&&a[0])e({lat:parseFloat(a[0].y),lng:parseFloat(a[0].x)});else{const c=t.replace(/\(.*?\)/g,"").replace(/\d+[]/g,"").replace(/\s{2,}/g," ").trim();c!==t?n.addressSearch(c,(u,h)=>{h===window.kakao.maps.services.Status.OK&&u[0]?e({lat:parseFloat(u[0].y),lng:parseFloat(u[0].x)}):e(null)}):e(null)}})})}const Yj=({workOrders:t,onBack:e,onSelectWork:n})=>{var q,V;const r=b.useRef(null),i=b.useRef(null),a=b.useRef(null),o=b.useRef(null),c=b.useRef(null),u=b.useRef(null),h=b.useRef(null),m=b.useRef([]),_=b.useRef(null),p=b.useRef(null),g=b.useRef(null),C=b.useRef(null),y=b.useRef([]),N=b.useRef(null),[v,P]=b.useState("vworld"),[w,M]=b.useState(!0),[k,B]=b.useState(null),G=b.useRef(!0),U=b.useRef(!0),I=b.useRef(!0),[E,A]=b.useState(0),[Y,se]=b.useState(0),[X,z]=b.useState(null),[$,F]=b.useState(null),[L,re]=b.useState("");b.useEffect(()=>{let ce=!1;return(async()=>{var xt,st,St,ot,Be;const me=await cN(),Ce=Pg(me.vworld)||qK,ge=Pg(me.ngii);if(console.log(`[Map] VWorld  : ${Ce.substring(0,8)}...`),ge?console.log(`[Map] NGII  : ${ge.substring(0,8)}...`):console.warn("[Map] MOMP001 NGII  "),ce)return;const Ge=new kD;c.current=Ge;const te=new UD({url:`https://api.vworld.kr/req/wmts/1.0.0/${Ce}/Base/{z}/{y}/{x}.png`,maxZoom:19,attributions:" VWorld"});let he=0;te.on("tileloaderror",()=>{he++,he>=3&&G.current&&(G.current=!1,console.warn("[Map] VWorld   ,    "),U.current?P("kakao"):I.current?P("ngii"):B("    .   ."))});const de=new _D({target:r.current,layers:[new vD({source:te}),new jD({source:Ge})],view:new Jo({center:da([126.978,37.5665]),zoom:8,maxZoom:19,minZoom:6})});o.current=de,de.on("click",lt=>{const pt=de.forEachFeatureAtPixel(lt.pixel,mt=>mt);if(pt){const mt=pt.get("workId"),Ye=y.current.find(at=>at.work.id===mt);Ye&&(z(Ye.work),F(Ye.coords),de.getView().animate({center:da([Ye.coords.lng,Ye.coords.lat]),zoom:Math.max(de.getView().getZoom()||14,14),duration:300}))}else z(null),F(null)}),de.on("pointermove",lt=>{const pt=de.forEachFeatureAtPixel(lt.pixel,()=>!0);de.getTargetElement().style.cursor=pt?"pointer":""});let Q=null;const ee=()=>{var lt,pt;try{if(!((pt=(lt=window.kakao)==null?void 0:lt.maps)!=null&&pt.Map)||!i.current)return null;const mt=new window.kakao.maps.Map(i.current,{center:new window.kakao.maps.LatLng(37.5665,126.978),level:8});return h.current=mt,window.kakao.maps.event.addListener(mt,"click",()=>{z(null),F(null)}),U.current=!0,console.log("[Map]   "),mt}catch(mt){return console.warn("[Map]   :",mt),U.current=!1,G.current?P("vworld"):I.current?P("ngii"):B("    .   ."),null}};if(!((xt=window.kakao)!=null&&xt.maps)){const lt=Pg(me.kakao);lt?(console.log(`[Map]  SDK    (: ${lt.substring(0,8)}...)`),await new Promise(pt=>{const mt=document.createElement("script");mt.src=`https://dapi.kakao.com/v2/maps/sdk.js?appkey=${lt}&libraries=services&autoload=false`,mt.onload=()=>{var Ye;console.log("[Map]  SDK   "),(Ye=window.kakao)!=null&&Ye.maps?window.kakao.maps.load(()=>{console.log("[Map]  maps.load() "),pt()}):pt()},mt.onerror=()=>{console.error("[Map]  SDK   "),pt()},document.head.appendChild(mt)})):console.warn("[Map] MOMP001   ")}if(ce)return;(st=window.kakao)!=null&&st.maps?window.kakao.maps.Map?Q=ee():window.kakao.maps.load(()=>{Q=ee()}):(U.current=!1,console.warn("[Map]  SDK  "));let Z=null,le=null;if(ge&&a.current)try{v2.defs("EPSG:5179","+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),YU(v2);const lt=Ta("EPSG:5179");lt&&lt.setExtent([-2e5,-2802412362e-2,3182412362e-2,4e6]);const pt=[],mt=[];for(let tt=0;tt<14;tt++)pt.push(2088.96/Math.pow(2,tt)),mt.push("L"+String(tt+5).padStart(2,"0"));const Ye=new RU({origin:[-2e5,4e6],resolutions:pt,matrixIds:mt,tileSize:256}),at=new UD({projection:"EPSG:5179",tileGrid:Ye,tileUrlFunction:tt=>{if(!tt)return;const ct=tt[0],Mt=tt[1],dt=tt[2];if(ct<0||ct>=mt.length||Mt<0||dt<0)return;const Je=mt[ct];return console.log(`[NGII] tile: ${Je}/${dt}/${Mt}`),`/api/ngii-tile?apikey=${ge}&tilematrix=${Je}&tilerow=${dt}&tilecol=${Mt}`},attributions:" NGII"});at.on("tileloaderror",()=>{}),le=new kD,g.current=le;const Fe=lt?da([126.978,37.5665],"EPSG:5179"):[1e6,2e6];Z=new _D({target:a.current,layers:[new vD({source:at}),new jD({source:le})],view:new Jo({projection:"EPSG:5179",center:Fe,zoom:3,maxZoom:18,minZoom:0})}),p.current=Z,Z.on("click",tt=>{const ct=Z.forEachFeatureAtPixel(tt.pixel,Mt=>Mt);if(ct){const Mt=ct.get("workId"),dt=y.current.find(Je=>Je.work.id===Mt);dt&&(z(dt.work),F(dt.coords),Z.getView().animate({center:da([dt.coords.lng,dt.coords.lat],"EPSG:5179"),zoom:Math.max(Z.getView().getZoom()||9,9),duration:300}))}else z(null),F(null)}),Z.on("pointermove",tt=>{const ct=Z.forEachFeatureAtPixel(tt.pixel,()=>!0);Z.getTargetElement().style.cursor=ct?"pointer":""}),I.current=!0,console.log("[Map] NGII   ")}catch(lt){console.warn("[Map] NGII   :",lt),I.current=!1}else I.current=!1;const xe=(lt,pt)=>{N.current={lat:lt,lng:pt};const mt=qx(),Ye=new Du({geometry:new vh(da([pt,lt]))});if(Ye.set("isMyLocation",!0),Ye.setStyle(new Fl({image:new Mc({src:mt,anchor:[.5,.5],scale:1})})),Ge.addFeature(Ye),u.current=Ye,le){const at=new Du({geometry:new vh(da([pt,lt],"EPSG:5179"))});at.set("isMyLocation",!0),at.setStyle(new Fl({image:new Mc({src:mt,anchor:[.5,.5],scale:1})})),le.addFeature(at),C.current=at}if(Q){const at=new window.kakao.maps.MarkerImage(mt,new window.kakao.maps.Size(40,40),{offset:new window.kakao.maps.Point(20,20)}),Fe=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(lt,pt),image:at,map:Q,zIndex:10});_.current=Fe}console.log(`[Map]   : ${lt}, ${pt}`)};if(navigator.geolocation&&navigator.geolocation.getCurrentPosition(lt=>{ce||xe(lt.coords.latitude,lt.coords.longitude)},lt=>console.warn("[Map]   :",lt.message),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),!await JK()){B("     ."),M(!1);return}!Q&&((ot=(St=window.kakao)==null?void 0:St.maps)!=null&&ot.Map)&&(Q=ee()),console.log(`[Map] Geocoding : ${t.length}`);const ne=[],ie=[];let pe=0;for(let lt=0;lt<t.length;lt++){if(ce)return;const pt=t[lt],mt=(Be=pt.customer)==null?void 0:Be.address;if(mt){lt>0&&await new Promise(at=>setTimeout(at,80));const Ye=await ZK(mt);if(Ye){const at=df[pt.status]||df.default,Fe=XK(at,lt),tt=new Du({geometry:new vh(da([Ye.lng,Ye.lat]))});if(tt.set("workId",pt.id),tt.setStyle(new Fl({image:new Mc({src:Fe,anchor:[.5,1],scale:1})})),Ge.addFeature(tt),ie.push(da([Ye.lng,Ye.lat])),Q){const ct=new window.kakao.maps.MarkerImage(Fe,new window.kakao.maps.Size(36,48),{offset:new window.kakao.maps.Point(18,48)}),Mt=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(Ye.lat,Ye.lng),image:ct,map:Q}),dt=pt,Je=Ye;window.kakao.maps.event.addListener(Mt,"click",()=>{z(dt),F(Je),Q.panTo(new window.kakao.maps.LatLng(Je.lat,Je.lng))}),m.current.push(Mt)}if(le){const ct=new Du({geometry:new vh(da([Ye.lng,Ye.lat],"EPSG:5179"))});ct.set("workId",pt.id),ct.setStyle(new Fl({image:new Mc({src:Fe,anchor:[.5,1],scale:1})})),le.addFeature(ct)}ne.push({work:pt,coords:Ye}),pe++,console.log(`[Map] ${lt+1}/${t.length} : "${mt}"  ${Ye.lat},${Ye.lng}`)}else console.warn(`[Map] ${lt+1}/${t.length} : "${mt}"`)}A(lt+1),se(pe)}y.current=ne,console.log(`[Map] Geocoding : ${pe}/${t.length} `);const ze=N.current;if(ze&&ie.push(da([ze.lng,ze.lat])),ie.length>0&&(ie.length===1?de.getView().animate({center:ie[0],zoom:15,duration:300}):de.getView().fit($p(ie),{padding:[60,60,60,60],maxZoom:16,duration:300})),Q&&(ne.length>0||ze)){const lt=new window.kakao.maps.LatLngBounds;ne.forEach(pt=>{lt.extend(new window.kakao.maps.LatLng(pt.coords.lat,pt.coords.lng))}),ze&&lt.extend(new window.kakao.maps.LatLng(ze.lat,ze.lng)),Q.setBounds(lt)}if(Z&&le){const lt=ne.map(pt=>da([pt.coords.lng,pt.coords.lat],"EPSG:5179"));ze&&lt.push(da([ze.lng,ze.lat],"EPSG:5179")),lt.length>0&&(lt.length===1?Z.getView().animate({center:lt[0],zoom:10,duration:300}):Z.getView().fit($p(lt),{padding:[60,60,60,60],maxZoom:16,duration:300}))}M(!1)})(),()=>{ce=!0,o.current&&(o.current.setTarget(void 0),o.current=null),c.current=null,u.current=null,p.current&&(p.current.setTarget(void 0),p.current=null),g.current=null,C.current=null,m.current.forEach(me=>me.setMap(null)),m.current=[],_.current&&_.current.setMap(null),_.current=null,h.current=null,N.current=null}},[t]),b.useEffect(()=>{const ce=setTimeout(()=>{if(v==="vworld"&&o.current)o.current.updateSize();else if(v==="kakao"&&h.current){if(h.current.relayout(),y.current.length>0){const me=new window.kakao.maps.LatLngBounds;y.current.forEach(Ce=>{me.extend(new window.kakao.maps.LatLng(Ce.coords.lat,Ce.coords.lng))}),h.current.setBounds(me)}}else v==="ngii"&&p.current&&p.current.updateSize()},150);return()=>clearTimeout(ce)},[v]);const fe=b.useCallback(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(ce=>{const{latitude:me,longitude:Ce}=ce.coords;if(N.current={lat:me,lng:Ce},u.current)u.current.getGeometry().setCoordinates(da([Ce,me]));else if(c.current){const ge=new Du({geometry:new vh(da([Ce,me]))});ge.set("isMyLocation",!0),ge.setStyle(new Fl({image:new Mc({src:qx(),anchor:[.5,.5],scale:1})})),c.current.addFeature(ge),u.current=ge}if(C.current)C.current.getGeometry().setCoordinates(da([Ce,me],"EPSG:5179"));else if(g.current){const ge=new Du({geometry:new vh(da([Ce,me],"EPSG:5179"))});ge.set("isMyLocation",!0),ge.setStyle(new Fl({image:new Mc({src:qx(),anchor:[.5,.5],scale:1})})),g.current.addFeature(ge),C.current=ge}if(_.current)_.current.setPosition(new window.kakao.maps.LatLng(me,Ce));else if(h.current){const ge=new window.kakao.maps.MarkerImage(qx(),new window.kakao.maps.Size(40,40),{offset:new window.kakao.maps.Point(20,20)});_.current=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(me,Ce),image:ge,map:h.current,zIndex:10})}v==="vworld"&&o.current?o.current.getView().animate({center:da([Ce,me]),zoom:15,duration:500}):v==="kakao"&&h.current?(h.current.panTo(new window.kakao.maps.LatLng(me,Ce)),h.current.setLevel(3)):v==="ngii"&&p.current&&p.current.getView().animate({center:da([Ce,me],"EPSG:5179"),zoom:10,duration:500})},()=>re("    ."),{enableHighAccuracy:!0,timeout:1e4})},[v]),T=uo(ce=>ce.preferredNavApp),j=b.useCallback(()=>{var ce;!$||!X||zM(T,{lat:$.lat,lng:$.lng,name:((ce=X.customer)==null?void 0:ce.address)||""})},[$,X,T]),K=b.useCallback(()=>{z(null),F(null)},[]),J=b.useCallback(()=>{P(ce=>{const me=["kakao","vworld","ngii"],Ce={kakao:U,vworld:G,ngii:I},ge=me.indexOf(ce);for(let Ge=1;Ge<=me.length-1;Ge++){const te=me[(ge+Ge)%me.length];if(Ce[te].current)return te}return re("     ."),ce}),K()},[K]);return s.jsxs("div",{className:"fixed inset-0 bg-white flex flex-col",style:{zIndex:200},children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200",children:[s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-700",children:[s.jsx(z2,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:""})]}),s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:" "}),s.jsxs("button",{onClick:J,className:"flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold border",style:{background:v==="vworld"?"#EFF6FF":v==="kakao"?"#FEF9C3":"#ECFDF5",color:v==="vworld"?"#1D4ED8":v==="kakao"?"#92400E":"#065F46",borderColor:v==="vworld"?"#BFDBFE":v==="kakao"?"#FDE68A":"#A7F3D0"},children:[s.jsx(OL,{className:"w-3.5 h-3.5"}),v==="vworld"?"":v==="kakao"?"":"NGII"]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{ref:r,className:"absolute inset-0",style:{visibility:v==="vworld"?"visible":"hidden",zIndex:v==="vworld"?1:0}}),s.jsx("div",{ref:i,className:"absolute inset-0",style:{visibility:v==="kakao"?"visible":"hidden",zIndex:v==="kakao"?1:0}}),s.jsx("div",{ref:a,className:"absolute inset-0",style:{visibility:v==="ngii"?"visible":"hidden",zIndex:v==="ngii"?1:0}}),w&&!k&&s.jsxs("div",{className:"absolute inset-0 bg-white/80 flex flex-col items-center justify-center z-10",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsxs("p",{className:"text-gray-600",children:["  ... (",E,"/",t.length,")"]}),Y>0&&s.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[Y,"  "]})]}),k&&s.jsxs("div",{className:"absolute inset-0 bg-white flex flex-col items-center justify-center z-10 p-6",children:[s.jsx("p",{className:"text-gray-700 text-center mb-4",children:k}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:""})]}),!w&&!k&&s.jsx("div",{className:"absolute top-3 left-3 bg-white/90 backdrop-blur rounded-lg shadow p-2.5 z-20",children:s.jsxs("div",{className:"flex gap-3 text-[11px]",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-blue-500",style:{background:"#3B82F6"}}),s.jsx("span",{className:"text-gray-600 font-semibold",children:" "})]}),[["#DC2626",""],["#16A34A",""],["#EF4444",""],["#9CA3AF",""]].map(([ce,me])=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{background:ce}}),s.jsx("span",{className:"text-gray-600",children:me})]},me))]})}),s.jsx("button",{onClick:fe,title:" ",className:"absolute bottom-20 right-4 w-11 h-11 bg-white rounded-full shadow-lg flex items-center justify-center z-20",style:{bottom:X?"220px":"80px"},children:s.jsx(zL,{className:"w-5 h-5 text-blue-500"})}),s.jsxs("button",{onClick:e,className:"absolute left-4 px-4 py-2.5 bg-white rounded-full shadow-lg flex items-center gap-2 z-20",style:{bottom:X?"220px":"80px"},children:[s.jsx(H2,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:""})]}),X&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-30 px-3 pb-3",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 p-4 max-w-lg mx-auto relative",children:[s.jsx("button",{onClick:K,className:"absolute top-3 right-3 p-1",children:s.jsx(Mi,{size:16,className:"text-gray-400"})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold",style:{background:`${df[X.status]||df.default}15`,color:df[X.status]||df.default},children:X.typeDisplay||X.type}),s.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-500 text-xs",children:X.status})]}),s.jsx("div",{className:"font-semibold text-[15px] text-gray-900 mb-1 pr-6",children:((q=X.customer)==null?void 0:q.name)||" "}),s.jsx("div",{className:"text-[13px] text-gray-500 mb-3 leading-snug",children:((V=X.customer)==null?void 0:V.address)||" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{var ce;(ce=X.customer)!=null&&ce.phone&&(window.location.href=`tel:${X.customer.phone}`)},className:"flex-1 py-2.5 rounded-lg bg-blue-500 text-white text-xs font-medium active:bg-blue-600",children:""}),s.jsx("button",{onClick:j,className:"flex-1 py-2.5 rounded-lg bg-purple-500 text-white text-xs font-medium active:bg-purple-600",children:""}),s.jsx("button",{onClick:()=>n(X),className:"flex-1 py-2.5 rounded-lg bg-emerald-500 text-white text-xs font-medium active:bg-emerald-600",children:""})]})]})})]}),s.jsx("div",{className:"px-4 py-2.5 bg-white border-t border-gray-200",children:s.jsxs("div",{className:"text-center text-sm text-gray-500",children:[" ",t.length," ",Y>0&&!w&&`(${Y} )`]})}),s.jsx(Ba,{isOpen:!!L,onClose:()=>re(""),onConfirm:()=>re(""),message:L,type:"warning",showCancel:!1})]})};function vd(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function nS(t,e=[]){let n=[];function r(a,o){const c=b.createContext(o),u=n.length;n=[...n,o];const h=_=>{var v;const{scope:p,children:g,...C}=_,y=((v=p==null?void 0:p[t])==null?void 0:v[u])||c,N=b.useMemo(()=>C,Object.values(C));return s.jsx(y.Provider,{value:N,children:g})};h.displayName=a+"Provider";function m(_,p){var y;const g=((y=p==null?void 0:p[t])==null?void 0:y[u])||c,C=b.useContext(g);if(C)return C;if(o!==void 0)return o;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[h,m]}const i=()=>{const a=n.map(o=>b.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return b.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,eQ(i,...e)]}function eQ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:h})=>{const _=u(a)[`__scope${h}`];return{...c,..._}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function aR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $j(...t){return e=>{let n=!1;const r=t.map(i=>{const a=aR(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():aR(t[i],null)}}}}function h1(...t){return b.useCallback($j(...t),t)}function E2(t){const e=tQ(t),n=b.forwardRef((r,i)=>{const{children:a,...o}=r,c=b.Children.toArray(a),u=c.find(nQ);if(u){const h=u.props.children,m=c.map(_=>_===u?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:_);return s.jsx(e,{...o,ref:i,children:b.isValidElement(h)?b.cloneElement(h,void 0,m):null})}return s.jsx(e,{...o,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function tQ(t){const e=b.forwardRef((n,r)=>{const{children:i,...a}=n;if(b.isValidElement(i)){const o=iQ(i),c=rQ(a,i.props);return i.type!==b.Fragment&&(c.ref=r?$j(r,o):o),b.cloneElement(i,c)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var sQ=Symbol("radix.slottable");function nQ(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===sQ}function rQ(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const u=a(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function iQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function aQ(t){const e=t+"CollectionProvider",[n,r]=nS(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:N,children:v}=y,P=Zi.useRef(null),w=Zi.useRef(new Map).current;return s.jsx(i,{scope:N,itemMap:w,collectionRef:P,children:v})};o.displayName=e;const c=t+"CollectionSlot",u=E2(c),h=Zi.forwardRef((y,N)=>{const{scope:v,children:P}=y,w=a(c,v),M=h1(N,w.collectionRef);return s.jsx(u,{ref:M,children:P})});h.displayName=c;const m=t+"CollectionItemSlot",_="data-radix-collection-item",p=E2(m),g=Zi.forwardRef((y,N)=>{const{scope:v,children:P,...w}=y,M=Zi.useRef(null),k=h1(N,M),B=a(m,v);return Zi.useEffect(()=>(B.itemMap.set(M,{ref:M,...w}),()=>void B.itemMap.delete(M))),s.jsx(p,{[_]:"",ref:k,children:P})});g.displayName=m;function C(y){const N=a(t+"CollectionConsumer",y);return Zi.useCallback(()=>{const P=N.collectionRef.current;if(!P)return[];const w=Array.from(P.querySelectorAll(`[${_}]`));return Array.from(N.itemMap.values()).sort((B,G)=>w.indexOf(B.ref.current)-w.indexOf(G.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:o,Slot:h,ItemSlot:g},C,r]}var f1=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},lQ=eM[" useId ".trim().toString()]||(()=>{}),oQ=0;function Vj(t){const[e,n]=b.useState(lQ());return f1(()=>{n(r=>r??String(oQ++))},[t]),e?`radix-${e}`:""}var cQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cm=cQ.reduce((t,e)=>{const n=E2(`Primitive.${e}`),r=b.forwardRef((i,a)=>{const{asChild:o,...c}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...c,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function dQ(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var uQ=eM[" useInsertionEffect ".trim().toString()]||f1;function zj({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,o]=hQ({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:i;{const m=b.useRef(t!==void 0);b.useEffect(()=>{const _=m.current;_!==c&&console.warn(`${r} is changing from ${_?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const h=b.useCallback(m=>{var _;if(c){const p=fQ(m)?m(t):m;p!==t&&((_=o.current)==null||_.call(o,p))}else a(m)},[c,t,a,o]);return[u,h]}function hQ({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),i=b.useRef(n),a=b.useRef(e);return uQ(()=>{a.current=e},[e]),b.useEffect(()=>{var o;i.current!==n&&((o=a.current)==null||o.call(a,n),i.current=n)},[n,i]),[n,r,a]}function fQ(t){return typeof t=="function"}var mQ=b.createContext(void 0);function Hj(t){const e=b.useContext(mQ);return t||e||"ltr"}var sC="rovingFocusGroup.onEntryFocus",gQ={bubbles:!1,cancelable:!0},L_="RovingFocusGroup",[D2,qj,_Q]=aQ(L_),[xQ,Xj]=nS(L_,[_Q]),[pQ,yQ]=xQ(L_),Jj=b.forwardRef((t,e)=>s.jsx(D2.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(D2.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(bQ,{...t,ref:e})})}));Jj.displayName=L_;var bQ=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,..._}=t,p=b.useRef(null),g=h1(e,p),C=Hj(a),[y,N]=zj({prop:o,defaultProp:c??null,onChange:u,caller:L_}),[v,P]=b.useState(!1),w=dQ(h),M=qj(n),k=b.useRef(!1),[B,G]=b.useState(0);return b.useEffect(()=>{const U=p.current;if(U)return U.addEventListener(sC,w),()=>U.removeEventListener(sC,w)},[w]),s.jsx(pQ,{scope:n,orientation:r,dir:C,loop:i,currentTabStopId:y,onItemFocus:b.useCallback(U=>N(U),[N]),onItemShiftTab:b.useCallback(()=>P(!0),[]),onFocusableItemAdd:b.useCallback(()=>G(U=>U+1),[]),onFocusableItemRemove:b.useCallback(()=>G(U=>U-1),[]),children:s.jsx(Cm.div,{tabIndex:v||B===0?-1:0,"data-orientation":r,..._,ref:g,style:{outline:"none",...t.style},onMouseDown:vd(t.onMouseDown,()=>{k.current=!0}),onFocus:vd(t.onFocus,U=>{const I=!k.current;if(U.target===U.currentTarget&&I&&!v){const E=new CustomEvent(sC,gQ);if(U.currentTarget.dispatchEvent(E),!E.defaultPrevented){const A=M().filter($=>$.focusable),Y=A.find($=>$.active),se=A.find($=>$.id===y),z=[Y,se,...A].filter(Boolean).map($=>$.ref.current);t4(z,m)}}k.current=!1}),onBlur:vd(t.onBlur,()=>P(!1))})})}),Zj="RovingFocusGroupItem",e4=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...c}=t,u=Vj(),h=a||u,m=yQ(Zj,n),_=m.currentTabStopId===h,p=qj(n),{onFocusableItemAdd:g,onFocusableItemRemove:C,currentTabStopId:y}=m;return b.useEffect(()=>{if(r)return g(),()=>C()},[r,g,C]),s.jsx(D2.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:s.jsx(Cm.span,{tabIndex:_?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:vd(t.onMouseDown,N=>{r?m.onItemFocus(h):N.preventDefault()}),onFocus:vd(t.onFocus,()=>m.onItemFocus(h)),onKeyDown:vd(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){m.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const v=SQ(N,m.orientation,m.dir);if(v!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let w=p().filter(M=>M.focusable).map(M=>M.ref.current);if(v==="last")w.reverse();else if(v==="prev"||v==="next"){v==="prev"&&w.reverse();const M=w.indexOf(N.currentTarget);w=m.loop?vQ(w,M+1):w.slice(M+1)}setTimeout(()=>t4(w))}}),children:typeof o=="function"?o({isCurrentTabStop:_,hasTabStop:y!=null}):o})})});e4.displayName=Zj;var CQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function NQ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function SQ(t,e,n){const r=NQ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return CQ[r]}function t4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function vQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var EQ=Jj,DQ=e4;function RQ(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var s4=t=>{const{present:e,children:n}=t,r=TQ(e),i=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),a=h1(r.ref,MQ(i));return typeof n=="function"||r.isPresent?b.cloneElement(i,{ref:a}):null};s4.displayName="Presence";function TQ(t){const[e,n]=b.useState(),r=b.useRef(null),i=b.useRef(t),a=b.useRef("none"),o=t?"mounted":"unmounted",[c,u]=RQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=Xx(r.current);a.current=c==="mounted"?h:"none"},[c]),f1(()=>{const h=r.current,m=i.current;if(m!==t){const p=a.current,g=Xx(h);t?u("MOUNT"):g==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(m&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),f1(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,_=g=>{const y=Xx(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&y&&(u("ANIMATION_END"),!i.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},p=g=>{g.target===e&&(a.current=Xx(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:b.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Xx(t){return(t==null?void 0:t.animationName)||"none"}function MQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var q1="Tabs",[IQ]=nS(q1,[Xj]),n4=Xj(),[jQ,rS]=IQ(q1),r4=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:u="automatic",...h}=t,m=Hj(c),[_,p]=zj({prop:r,onChange:i,defaultProp:a??"",caller:q1});return s.jsx(jQ,{scope:n,baseId:Vj(),value:_,onValueChange:p,orientation:o,dir:m,activationMode:u,children:s.jsx(Cm.div,{dir:m,"data-orientation":o,...h,ref:e})})});r4.displayName=q1;var i4="TabsList",a4=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=rS(i4,n),o=n4(n);return s.jsx(EQ,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Cm.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});a4.displayName=i4;var l4="TabsTrigger",o4=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=rS(l4,n),c=n4(n),u=u4(o.baseId,r),h=h4(o.baseId,r),m=r===o.value;return s.jsx(DQ,{asChild:!0,...c,focusable:!i,active:m,children:s.jsx(Cm.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:e,onMouseDown:vd(t.onMouseDown,_=>{!i&&_.button===0&&_.ctrlKey===!1?o.onValueChange(r):_.preventDefault()}),onKeyDown:vd(t.onKeyDown,_=>{[" ","Enter"].includes(_.key)&&o.onValueChange(r)}),onFocus:vd(t.onFocus,()=>{const _=o.activationMode!=="manual";!m&&!i&&_&&o.onValueChange(r)})})})});o4.displayName=l4;var c4="TabsContent",d4=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,c=rS(c4,n),u=u4(c.baseId,r),h=h4(c.baseId,r),m=r===c.value,_=b.useRef(m);return b.useEffect(()=>{const p=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(s4,{present:i||m,children:({present:p})=>s.jsx(Cm.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:h,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:_.current?"0s":void 0},children:p&&a})})});d4.displayName=c4;function u4(t,e){return`${t}-trigger-${e}`}function h4(t,e){return`${t}-content-${e}`}var OQ=r4,f4=a4,m4=o4,g4=d4;function _4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=_4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wQ(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=_4(t))&&(r&&(r+=" "),r+=e);return r}const LQ=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},PQ=(t,e)=>({classGroupId:t,validator:e}),x4=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),m1="-",lR=[],AQ="arbitrary..",kQ=t=>{const e=BQ(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return UQ(o);const c=o.split(m1),u=c[0]===""&&c.length>1?1:0;return p4(c,u,e)},getConflictingClassGroupIds:(o,c)=>{if(c){const u=r[o],h=n[o];return u?h?LQ(h,u):u:h||lR}return n[o]||lR}}},p4=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],a=n.nextPart.get(i);if(a){const h=p4(t,e+1,a);if(h)return h}const o=n.validators;if(o===null)return;const c=e===0?t.join(m1):t.slice(e).join(m1),u=o.length;for(let h=0;h<u;h++){const m=o[h];if(m.validator(c))return m.classGroupId}},UQ=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?AQ+r:void 0})(),BQ=t=>{const{theme:e,classGroups:n}=t;return GQ(n,e)},GQ=(t,e)=>{const n=x4();for(const r in t){const i=t[r];iS(i,n,r,e)}return n},iS=(t,e,n,r)=>{const i=t.length;for(let a=0;a<i;a++){const o=t[a];WQ(o,e,n,r)}},WQ=(t,e,n,r)=>{if(typeof t=="string"){FQ(t,e,n);return}if(typeof t=="function"){KQ(t,e,n,r);return}QQ(t,e,n,r)},FQ=(t,e,n)=>{const r=t===""?e:y4(e,t);r.classGroupId=n},KQ=(t,e,n,r)=>{if(YQ(t)){iS(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(PQ(n,t))},QQ=(t,e,n,r)=>{const i=Object.entries(t),a=i.length;for(let o=0;o<a;o++){const[c,u]=i[o];iS(u,y4(e,c),n,r)}},y4=(t,e)=>{let n=t;const r=e.split(m1),i=r.length;for(let a=0;a<i;a++){const o=r[a];let c=n.nextPart.get(o);c||(c=x4(),n.nextPart.set(o,c)),n=c}return n},YQ=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,$Q=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(a,o)=>{n[a]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let o=n[a];if(o!==void 0)return o;if((o=r[a])!==void 0)return i(a,o),o},set(a,o){a in n?n[a]=o:i(a,o)}}},R2="!",oR=":",VQ=[],cR=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),zQ=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const a=[];let o=0,c=0,u=0,h;const m=i.length;for(let y=0;y<m;y++){const N=i[y];if(o===0&&c===0){if(N===oR){a.push(i.slice(u,y)),u=y+1;continue}if(N==="/"){h=y;continue}}N==="["?o++:N==="]"?o--:N==="("?c++:N===")"&&c--}const _=a.length===0?i:i.slice(u);let p=_,g=!1;_.endsWith(R2)?(p=_.slice(0,-1),g=!0):_.startsWith(R2)&&(p=_.slice(1),g=!0);const C=h&&h>u?h-u:void 0;return cR(a,g,p,C)};if(e){const i=e+oR,a=r;r=o=>o.startsWith(i)?a(o.slice(i.length)):cR(VQ,!1,o,void 0,!0)}if(n){const i=r;r=a=>n({className:a,parseClassName:i})}return r},HQ=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let a=0;a<n.length;a++){const o=n[a],c=o[0]==="[",u=e.has(o);c||u?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},qQ=t=>({cache:$Q(t.cacheSize),parseClassName:zQ(t),sortModifiers:HQ(t),...kQ(t)}),XQ=/\s+/,JQ=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,o=[],c=t.trim().split(XQ);let u="";for(let h=c.length-1;h>=0;h-=1){const m=c[h],{isExternal:_,modifiers:p,hasImportantModifier:g,baseClassName:C,maybePostfixModifierPosition:y}=n(m);if(_){u=m+(u.length>0?" "+u:u);continue}let N=!!y,v=r(N?C.substring(0,y):C);if(!v){if(!N){u=m+(u.length>0?" "+u:u);continue}if(v=r(C),!v){u=m+(u.length>0?" "+u:u);continue}N=!1}const P=p.length===0?"":p.length===1?p[0]:a(p).join(":"),w=g?P+R2:P,M=w+v;if(o.indexOf(M)>-1)continue;o.push(M);const k=i(v,N);for(let B=0;B<k.length;++B){const G=k[B];o.push(w+G)}u=m+(u.length>0?" "+u:u)}return u},ZQ=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=b4(n))&&(i&&(i+=" "),i+=r);return i},b4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=b4(t[r]))&&(n&&(n+=" "),n+=e);return n},eY=(t,...e)=>{let n,r,i,a;const o=u=>{const h=e.reduce((m,_)=>_(m),t());return n=qQ(h),r=n.cache.get,i=n.cache.set,a=c,c(u)},c=u=>{const h=r(u);if(h)return h;const m=JQ(u,n);return i(u,m),m};return a=o,(...u)=>a(ZQ(...u))},tY=[],qi=t=>{const e=n=>n[t]||tY;return e.isThemeGetter=!0,e},C4=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,N4=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sY=/^\d+\/\d+$/,nY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,aY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,uf=t=>sY.test(t),wn=t=>!!t&&!Number.isNaN(Number(t)),pu=t=>!!t&&Number.isInteger(Number(t)),nC=t=>t.endsWith("%")&&wn(t.slice(0,-1)),cd=t=>nY.test(t),oY=()=>!0,cY=t=>rY.test(t)&&!iY.test(t),S4=()=>!1,dY=t=>aY.test(t),uY=t=>lY.test(t),hY=t=>!Xs(t)&&!Js(t),fY=t=>Nm(t,D4,S4),Xs=t=>C4.test(t),Ch=t=>Nm(t,R4,cY),rC=t=>Nm(t,pY,wn),dR=t=>Nm(t,v4,S4),mY=t=>Nm(t,E4,uY),Jx=t=>Nm(t,T4,dY),Js=t=>N4.test(t),xg=t=>Sm(t,R4),gY=t=>Sm(t,yY),uR=t=>Sm(t,v4),_Y=t=>Sm(t,D4),xY=t=>Sm(t,E4),Zx=t=>Sm(t,T4,!0),Nm=(t,e,n)=>{const r=C4.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Sm=(t,e,n=!1)=>{const r=N4.exec(t);return r?r[1]?e(r[1]):n:!1},v4=t=>t==="position"||t==="percentage",E4=t=>t==="image"||t==="url",D4=t=>t==="length"||t==="size"||t==="bg-size",R4=t=>t==="length",pY=t=>t==="number",yY=t=>t==="family-name",T4=t=>t==="shadow",bY=()=>{const t=qi("color"),e=qi("font"),n=qi("text"),r=qi("font-weight"),i=qi("tracking"),a=qi("leading"),o=qi("breakpoint"),c=qi("container"),u=qi("spacing"),h=qi("radius"),m=qi("shadow"),_=qi("inset-shadow"),p=qi("text-shadow"),g=qi("drop-shadow"),C=qi("blur"),y=qi("perspective"),N=qi("aspect"),v=qi("ease"),P=qi("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...M(),Js,Xs],B=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto","contain","none"],U=()=>[Js,Xs,u],I=()=>[uf,"full","auto",...U()],E=()=>[pu,"none","subgrid",Js,Xs],A=()=>["auto",{span:["full",pu,Js,Xs]},pu,Js,Xs],Y=()=>[pu,"auto",Js,Xs],se=()=>["auto","min","max","fr",Js,Xs],X=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...U()],F=()=>[uf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...U()],L=()=>[t,Js,Xs],re=()=>[...M(),uR,dR,{position:[Js,Xs]}],fe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],T=()=>["auto","cover","contain",_Y,fY,{size:[Js,Xs]}],j=()=>[nC,xg,Ch],K=()=>["","none","full",h,Js,Xs],J=()=>["",wn,xg,Ch],q=()=>["solid","dashed","dotted","double"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[wn,nC,uR,dR],me=()=>["","none",C,Js,Xs],Ce=()=>["none",wn,Js,Xs],ge=()=>["none",wn,Js,Xs],Ge=()=>[wn,Js,Xs],te=()=>[uf,"full",...U()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cd],breakpoint:[cd],color:[oY],container:[cd],"drop-shadow":[cd],ease:["in","out","in-out"],font:[hY],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cd],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cd],shadow:[cd],spacing:["px",wn],text:[cd],"text-shadow":[cd],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",uf,Xs,Js,N]}],container:["container"],columns:[{columns:[wn,Xs,Js,c]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[pu,"auto",Js,Xs]}],basis:[{basis:[uf,"full","auto",c,...U()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wn,uf,"auto","initial","none",Xs]}],grow:[{grow:["",wn,Js,Xs]}],shrink:[{shrink:["",wn,Js,Xs]}],order:[{order:[pu,"first","last","none",Js,Xs]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":se()}],"auto-rows":[{"auto-rows":se()}],gap:[{gap:U()}],"gap-x":[{"gap-x":U()}],"gap-y":[{"gap-y":U()}],"justify-content":[{justify:[...X(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...X()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":X()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:U()}],px:[{px:U()}],py:[{py:U()}],ps:[{ps:U()}],pe:[{pe:U()}],pt:[{pt:U()}],pr:[{pr:U()}],pb:[{pb:U()}],pl:[{pl:U()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":U()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":U()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[c,"screen",...F()]}],"min-w":[{"min-w":[c,"screen","none",...F()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[o]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",n,xg,Ch]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Js,rC]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",nC,Xs]}],"font-family":[{font:[gY,Xs,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Js,Xs]}],"line-clamp":[{"line-clamp":[wn,"none",Js,rC]}],leading:[{leading:[a,...U()]}],"list-image":[{"list-image":["none",Js,Xs]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Js,Xs]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:[wn,"from-font","auto",Js,Ch]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[wn,"auto",Js,Xs]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Js,Xs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Js,Xs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:fe()}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},pu,Js,Xs],radial:["",Js,Xs],conic:[pu,Js,Xs]},xY,mY]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:j()}],"gradient-via-pos":[{via:j()}],"gradient-to-pos":[{to:j()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:J()}],"border-w-x":[{"border-x":J()}],"border-w-y":[{"border-y":J()}],"border-w-s":[{"border-s":J()}],"border-w-e":[{"border-e":J()}],"border-w-t":[{"border-t":J()}],"border-w-r":[{"border-r":J()}],"border-w-b":[{"border-b":J()}],"border-w-l":[{"border-l":J()}],"divide-x":[{"divide-x":J()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":J()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...q(),"hidden","none"]}],"divide-style":[{divide:[...q(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wn,Js,Xs]}],"outline-w":[{outline:["",wn,xg,Ch]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",m,Zx,Jx]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",_,Zx,Jx]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[wn,Ch]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":J()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",p,Zx,Jx]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[wn,Js,Xs]}],"mix-blend":[{"mix-blend":[...V(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":V()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[Js,Xs]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[wn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:fe()}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Js,Xs]}],filter:[{filter:["","none",Js,Xs]}],blur:[{blur:me()}],brightness:[{brightness:[wn,Js,Xs]}],contrast:[{contrast:[wn,Js,Xs]}],"drop-shadow":[{"drop-shadow":["","none",g,Zx,Jx]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",wn,Js,Xs]}],"hue-rotate":[{"hue-rotate":[wn,Js,Xs]}],invert:[{invert:["",wn,Js,Xs]}],saturate:[{saturate:[wn,Js,Xs]}],sepia:[{sepia:["",wn,Js,Xs]}],"backdrop-filter":[{"backdrop-filter":["","none",Js,Xs]}],"backdrop-blur":[{"backdrop-blur":me()}],"backdrop-brightness":[{"backdrop-brightness":[wn,Js,Xs]}],"backdrop-contrast":[{"backdrop-contrast":[wn,Js,Xs]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wn,Js,Xs]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wn,Js,Xs]}],"backdrop-invert":[{"backdrop-invert":["",wn,Js,Xs]}],"backdrop-opacity":[{"backdrop-opacity":[wn,Js,Xs]}],"backdrop-saturate":[{"backdrop-saturate":[wn,Js,Xs]}],"backdrop-sepia":[{"backdrop-sepia":["",wn,Js,Xs]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":U()}],"border-spacing-x":[{"border-spacing-x":U()}],"border-spacing-y":[{"border-spacing-y":U()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Js,Xs]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wn,"initial",Js,Xs]}],ease:[{ease:["linear","initial",v,Js,Xs]}],delay:[{delay:[wn,Js,Xs]}],animate:[{animate:["none",P,Js,Xs]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Js,Xs]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:ge()}],"scale-x":[{"scale-x":ge()}],"scale-y":[{"scale-y":ge()}],"scale-z":[{"scale-z":ge()}],"scale-3d":["scale-3d"],skew:[{skew:Ge()}],"skew-x":[{"skew-x":Ge()}],"skew-y":[{"skew-y":Ge()}],transform:[{transform:[Js,Xs,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:te()}],"translate-x":[{"translate-x":te()}],"translate-y":[{"translate-y":te()}],"translate-z":[{"translate-z":te()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Js,Xs]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Js,Xs]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[wn,xg,Ch,rC]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},CY=eY(bY);function aS(...t){return CY(wQ(t))}const M4=OQ,lS=b.forwardRef(({className:t,...e},n)=>s.jsx(f4,{ref:n,className:aS("inline-flex h-10 items-center justify-start rounded-md bg-muted p-1 text-muted-foreground overflow-x-auto scrollbar-hide",t),...e}));lS.displayName=f4.displayName;const oS=b.forwardRef(({className:t,...e},n)=>s.jsx(m4,{ref:n,className:aS("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));oS.displayName=m4.displayName;const oo=b.forwardRef(({className:t,...e},n)=>s.jsx(g4,{ref:n,className:aS("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));oo.displayName=g4.displayName;const I4=t=>Lw({queryKey:["workOrders",t.startDate,t.endDate],queryFn:()=>aA(t),enabled:!!t.startDate&&!!t.endDate,staleTime:120*1e3,gcTime:300*1e3}),NY=({onNavigateToMenu:t,onNavigateToView:e,onNavigateToComingSoon:n,userInfo:r,showToast:i})=>{const{setSelectedWorkItem:a,setSelectedWorkDirection:o}=uo(),[c,u]=b.useState(null),[h,m]=b.useState(null),[_,p]=b.useState(null),[g,C]=b.useState(!1),[y,N]=b.useState(null),[v,P]=b.useState(!1),[w,M]=b.useState(null),[k,B]=b.useState(!1),[G,U]=b.useState(null),[I,E]=b.useState({}),[A,Y]=b.useState(!1),{activeTab:se,setActiveTab:X,workFilters:z,setWorkFilters:$}=uo(),[F,L]=b.useState(!1),[re,fe]=b.useState(!0),T=b.useRef(null),j=b.useRef([]),K=b.useRef(null),J=b.useRef(0),[q,V]=b.useState(!1),[ce,me]=b.useState(()=>{const ye=localStorage.getItem("safety_warning_dismissed");if(ye){const Ue=new Date(ye).toDateString(),ue=new Date().toDateString();return Ue===ue}return!1}),{showMapView:Ce,setShowMapView:ge}=uo(),Ge=[{id:"safety-check",title:""},{id:"work-receipt",title:""},{id:"work-result-signal",title:""},{id:"signal-interlock",title:""}],te="YYYY-MM-DD",{startDate:he,endDate:de,filter:Q,workTypeFilter:ee=""}=z;b.useEffect(()=>{const ye=setTimeout(()=>{if(se==="work-receipt"){const Ue=uo.getState().workFilters;uo.getState().setWorkFilters({...Ue,filter:""})}},100);return()=>clearTimeout(ye)},[se]);const{data:Z=[],isLoading:le,error:xe,refetch:be}=I4({startDate:he,endDate:de}),ne=(xe==null?void 0:xe.message)||null,ie=ye=>{$({...z,...ye})},pe=ye=>{const Ue=md(ye);ie({startDate:Ue.startOf("month").format(te),endDate:Ue.endOf("month").format(te)})},ze=ye=>{const Ue=md(ye);ie({startDate:Ue.startOf("month").format(te),endDate:Ue.endOf("month").format(te)})},xt=()=>{const ye=md(he).subtract(1,"month");ie({startDate:ye.startOf("month").format(te),endDate:ye.endOf("month").format(te)})},st=()=>{const ye=md(he).add(1,"month");ie({startDate:ye.startOf("month").format(te),endDate:ye.endOf("month").format(te)})};b.useEffect(()=>{if(!qn()&&Z.length>0){Y(!0);const ye={};Z.forEach(Ue=>{const ue=tA(Ue.PROD_GRPS,Ue.WRK_STATS);ue&&ue.total>0?ye[Ue.id]=ue:ye[Ue.id]={total:1,pending:1,completed:0,cancelled:0,pendingByProdGrp:{},completedByProdGrp:{}}}),E(ye),Y(!1)}else Z.length===0&&Y(!1)},[Z]),b.useEffect(()=>{if(se==="work-receipt"){const ye=md(he),Ue=md(de),ue=ye.date()===1,Oe=Ue.date()===Ue.endOf("month").date();if(!ue||!Oe){const Ze=md();ie({startDate:Ze.startOf("month").format(te),endDate:Ze.endOf("month").format(te)})}}},[se]),b.useEffect(()=>{se==="work-receipt"&&(async()=>{if(r!=null&&r.userId)try{const Ue=await DM(r.userId),ue=Ue&&Ue.length>0;V(!ue)}catch(Ue){console.error("  :",Ue),V(!1)}})()},[r,se]),b.useEffect(()=>{const ye=K.current;if(!ye)return;let Ue=!1,ue=null;const Oe=vt=>{ue&&clearTimeout(ue),ue=setTimeout(()=>{fe(je=>je===vt?je:vt)},50)},Ze=()=>{const vt=ye.scrollTop,je=vt-J.current,ut=ye.scrollHeight-ye.clientHeight;if(ut<=30){Oe(!0),J.current=vt,Ue=!1;return}const gt=vt>=ut-10,jt=vt<=10;if(gt||jt){J.current=vt,Ue=!1;return}if(Math.abs(je)<15){Ue=!1;return}je>0&&vt>80?Oe(!1):je<-5&&Oe(!0),J.current=vt,Ue=!1},Le=()=>{Ue||(requestAnimationFrame(Ze),Ue=!0)};return ye.addEventListener("scroll",Le,{passive:!0}),()=>{ye.removeEventListener("scroll",Le),ue&&clearTimeout(ue)}},[]);const St=async(ye,Ue)=>{await be(),c&&c.id===ye&&u(null)},ot=ye=>{o(ye),e?e("work-item-list"):m(ye)},Be=ye=>{var Oe,Ze,Le;const Ue=vt=>vt?vt.includes("T")||vt.includes("-")?vt.replace(/[-:T]/g,"").substring(0,12):vt:"",ue={SO_ID:ye.SO_ID||"",CUST_ID:ye.CUST_ID||((Oe=ye.customer)==null?void 0:Oe.id)||"",CUST_NM:((Ze=ye.customer)==null?void 0:Ze.name)||"",SMS_RCV_TEL:((Le=ye.customer)==null?void 0:Le.phone)||ye.REQ_CUST_TEL_NO||"",SMS_SEND_TEL:"",WRK_HOPE_DTTM:Ue(ye.scheduledAt),WRKR_NM:(r==null?void 0:r.userName)||"",WRKR_NM_EN:(r==null?void 0:r.userNameEn)||(r==null?void 0:r.userName)||"",WRK_CD:ye.WRK_CD||"",WRK_CD_NM:ye.typeDisplay||"",WRK_DRCTN_ID:ye.WRK_DRCTN_ID||ye.id||"",RCPT_ID:ye.RCPT_ID||""};M(ue),P(!0)},lt=ye=>{U(ye),B(!0)},pt=()=>{be()},mt=async ye=>{if(y){setIsLoading(!0),C(!1);try{const Ue=await eN(ye);Ue.code==="SUCCESS"||Ue.code==="OK"?(i&&i("  .","success"),await St(y.id,_n.Cancelled)):i&&i(` : ${Ue.message}`,"error",!0)}catch(Ue){console.error(" :",Ue);const ue=Ue instanceof Qs?Ue.message:Ue.message||"   .";i&&i(ue,"error",!0)}finally{setIsLoading(!1),N(null)}}},Ye=ye=>{a(ye),e?e("work-complete-form"):p(ye)},at=async()=>{p(null),u(null),await be(),i&&i("  .","success")};if(!e){if(_)return s.jsx(Kp,{order:_,onBack:()=>p(null),onSuccess:at,showToast:i});if(h)return s.jsx(HM,{direction:h,onBack:()=>m(null)});if(c)return s.jsx(UM,{order:c,onBack:()=>u(null),onUpdateStatus:St,onComplete:Ye},c.id)}const Fe=Z.filter(ye=>{if(Q!==""){const Ue=I[ye.id],ue=(Ue==null?void 0:Ue.isEmpty)===!0;if(Q===_n.Cancelled){if(ye.status!==_n.Cancelled&&!ue)return!1}else if(ue||ye.status!==Q)return!1}return!(ee&&ee!==""&&ye.WRK_CD_NM!==ee)}),tt=()=>{let ye=0;return Q!==""&&ye++,ee!==""&&ye++,ye},ct=()=>{ie({filter:"",workTypeFilter:""})},Mt=Fe,dt=ye=>ye===""?Z.length:Z.filter(Ue=>{const ue=I[Ue.id],Oe=(ue==null?void 0:ue.isEmpty)===!0;return ye===_n.Cancelled?Ue.status===_n.Cancelled||Oe:Oe?!1:Ue.status===ye}).length,Je=ye=>{X(ye);const Ue=()=>{const Oe=T.current;if(!Oe)return;const Ze=Ge.findIndex(ut=>ut.id===ye),Le=j.current[Ze];if(!Le)return;const vt=Oe.getBoundingClientRect().width,je=Le.offsetLeft-vt/2+Le.offsetWidth/2;Oe.scrollTo({left:je,behavior:"smooth"})};if(typeof window<"u"&&("requestAnimationFrame"in window?requestAnimationFrame(Ue):setTimeout(Ue,50)),!["work-receipt","safety-check","signal-interlock","work-result-signal","lgu-construction","lgu-network-fault"].includes(ye)){const Oe=Ge.find(Ze=>Ze.id===ye);Oe&&n&&n(Oe.title)}},De={:1,:2,"A/S":3,:4,:5,:6,:7,:8,:9},$e=b.useMemo(()=>{const ye=new Set;Z.forEach(ue=>{ue.WRK_CD_NM&&ye.add(ue.WRK_CD_NM)});const Ue=Array.from(ye).sort((ue,Oe)=>{const Ze=De[ue]??99,Le=De[Oe]??99;return Ze-Le});return[{value:"",label:""},...Ue.map(ue=>({value:ue,label:ue}))]},[Z]);b.useEffect(()=>{const ye=$e.map(Ue=>Ue.value);ee&&!ye.includes(ee)&&ie({workTypeFilter:""})},[$e,ee]);const Ne=b.useMemo(()=>[{value:"",label:` (${dt("")})`,shortLabel:""},{value:_n.Pending,label:` (${dt(_n.Pending)})`,shortLabel:""},{value:_n.Completed,label:` (${dt(_n.Completed)})`,shortLabel:""},{value:_n.Cancelled,label:` (${dt(_n.Cancelled)})`,shortLabel:""}],[Z]);return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col overflow-hidden",children:[s.jsxs(M4,{value:se,onValueChange:Je,className:"w-full flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200",children:s.jsx(lS,{ref:T,className:"w-full justify-start bg-white rounded-none h-auto py-2 px-3 overflow-x-auto border-none",children:Ge.map((ye,Ue)=>s.jsx(oS,{value:ye.id,ref:ue=>j.current[Ue]=ue,className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=inactive]:text-gray-600 rounded-full px-4 py-2 text-sm font-medium flex-shrink-0 mx-1 transition-colors",children:ye.title},ye.id))})}),s.jsxs(oo,{value:"work-receipt",className:"flex-1 data-[state=active]:flex flex-col overflow-hidden",children:[s.jsx("div",{className:`flex-shrink-0 bg-gray-50 grid transition-[grid-template-rows] duration-300 ease-out ${re?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,style:{willChange:"grid-template-rows"},children:s.jsxs("div",{className:`min-h-0 overflow-hidden px-3 pt-1 transition-opacity duration-200 ${re?"opacity-100":"opacity-0"}`,children:[q&&!ce&&s.jsx("div",{className:"mb-3 bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(xo,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-semibold text-yellow-800",children:"   ."})})]}),s.jsx("button",{onClick:()=>{me(!0),localStorage.setItem("safety_warning_dismissed",new Date().toISOString())},className:"text-yellow-600 hover:text-yellow-800 transition-colors",title:"",children:s.jsx(Mi,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 mb-3 overflow-hidden",children:[s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:xt,className:"p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",children:s.jsx(gM,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:he,onChange:ye=>pe(ye.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",style:{colorScheme:"light"}}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(he).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})})]}),s.jsx("span",{className:"text-gray-300",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:de,onChange:ye=>ze(ye.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",style:{colorScheme:"light"}}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(de).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})})]})]}),s.jsx("button",{onClick:st,className:"p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",children:s.jsx(cL,{className:"w-5 h-5 text-gray-500"})})]})}),s.jsxs("button",{onClick:()=>L(!F),className:"w-full px-4 py-2.5 flex items-center justify-between border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),s.jsx("span",{className:"text-sm text-gray-600",children:""}),tt()>0&&s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500 text-white text-xs font-medium rounded-full",children:tt()})]}),s.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${F?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),F&&s.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),s.jsx(sn,{value:Q,onValueChange:ye=>ie({filter:ye}),options:Ne})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:""}),s.jsx(sn,{value:ee,onValueChange:ye=>ie({workTypeFilter:ye}),options:$e})]}),s.jsx("button",{onClick:ct,className:`p-2 rounded-lg transition-colors flex-shrink-0 ${tt()>0?"text-blue-600 bg-blue-50 hover:bg-blue-100":"text-gray-400 bg-gray-100"}`,title:" ",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]})]})}),s.jsxs("div",{ref:K,className:"flex-1 overflow-y-auto px-3 pb-4",children:[le||A?s.jsx(Lf,{size:"medium",message:le?"   ...":"   ..."}):ne?s.jsx(dN,{type:"error",message:ne,onRetry:()=>be()}):s.jsx("div",{children:Fe.length>0?s.jsx("div",{className:"space-y-3",children:Mt.map((ye,Ue)=>s.jsx(FP,{direction:ye,index:Ue+1,onSelect:ot,onSms:Be,onWorkerAdjust:lt,workStatusCounts:I[ye.id]},ye.id))}):s.jsxs("div",{className:"text-center py-10 sm:py-12 px-4 sm:px-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(C1,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2 whitespace-nowrap",children:"   "})]})}),y&&s.jsx(nN,{isOpen:g,onClose:()=>{C(!1),N(null)},onConfirm:mt,workOrder:y,userId:r==null?void 0:r.userId,showToast:i}),s.jsx(qM,{isOpen:v,onClose:()=>P(!1),smsData:w,userId:(r==null?void 0:r.userId)||""}),G&&s.jsx(XM,{isOpen:k,onClose:()=>{B(!1),U(null)},direction:G,onSuccess:pt,showToast:i,userInfo:r})]})]}),s.jsx(oo,{value:"safety-check",className:"px-3 pt-1 overflow-y-auto",children:s.jsx(V6,{onBack:t,userInfo:r,showToast:i})}),s.jsx(oo,{value:"work-result-signal",className:"px-3 pt-1 overflow-y-auto",children:s.jsx(z6,{onBack:t})}),s.jsx(oo,{value:"signal-interlock",className:"mt-0 flex-1 data-[state=active]:flex flex-col overflow-hidden",children:s.jsx(JM,{onBack:t,userInfo:r,showToast:i})})]}),se==="work-receipt"&&!le&&!ne&&Fe.length>0&&s.jsx(ZM,{onClick:()=>ge(!0),workCount:Fe.length}),Ce&&s.jsx(Yj,{workOrders:Fe,onBack:()=>ge(!1),onSelectWork:ye=>{ge(!1),ot(ye)}})]})},SY=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),vY=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 00-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H4.5a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),EY=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),DY=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),RY=({onLogin:t})=>{const[e,n]=b.useState("A20117965"),[r,i]=b.useState("dlive12!@#$"),[a,o]=b.useState(!1),[c,u]=b.useState(!1),[h,m]=b.useState(null),[_,p]=b.useState(!1),g=async(N,v=!1)=>{if(N.preventDefault(),!(!e||!r)){u(!0),m(null),p(!1);try{const P=await gE(e,r,v?"Y":"N");if(console.log("[Login] API :",P),console.log("[Login] telNo2:",P.telNo2),P.LOGIN_DUP_YN==="Y"||P.code==="LOGIN_DUP"){p(!0),u(!1);return}P.ok?(localStorage.removeItem("demoMode"),t(P.userId,P.userName,P.userNameEn,P.userRole,P.crrId,P.soId,P.mstSoId,P.telNo2,P.AUTH_SO_List)):m(" .")}catch(P){P.message&&P.message.includes("401")?m("   ."):P.message&&P.message.includes("400")?m("   ."):m("   ."),console.error(" :",P)}finally{u(!1)}}},C=async()=>{u(!0),p(!1);try{const N=await gE(e,r,"Y");console.log("[Login]   :",N),N.ok?(localStorage.removeItem("demoMode"),t(N.userId,N.userName,N.userNameEn,N.userRole,N.crrId,N.soId,N.mstSoId,N.telNo2,N.AUTH_SO_List)):m(" .")}catch(N){m("   ."),console.error("  :",N)}finally{u(!1)}},y="w-full py-3 bg-white border border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition";return s.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 font-sans bg-gray-100",children:[s.jsxs("div",{className:"w-full max-w-sm mx-auto bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[s.jsx("div",{className:"text-center space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-4xl font-bold tracking-wider text-blue-600",children:"D'LIVE"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"CONA"})]})}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"sr-only",children:" ID"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:s.jsx(SY,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:`${y} pl-10 pr-3`,placeholder:" ID",value:e,onChange:N=>n(N.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:s.jsx(vY,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:a?"text":"password",required:!0,className:`${y} pl-10 pr-10`,placeholder:"",value:r,onChange:N=>i(N.target.value)}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3.5 flex items-center",children:s.jsx("button",{type:"button",onClick:()=>o(!a),className:"text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":a?" ":" ",children:a?s.jsx(DY,{className:"h-5 w-5"}):s.jsx(EY,{className:"h-5 w-5"})})})]})]}),h&&s.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-lg",children:h}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-3 px-4 border border-transparent text-base font-bold rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:c?" ...":""}),s.jsxs("button",{type:"button",onClick:()=>{localStorage.setItem("demoMode","true"),t("demo","demo","demo")},className:"w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors shadow-sm",children:[s.jsx(bP,{className:"w-4 h-4"}),"UI  "]})]})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("div",{className:"mb-3",children:s.jsx("p",{className:"text-sm font-medium tracking-wide text-blue-600",children:"Smart Life Coordinator"})}),s.jsx("p",{className:"text-xs font-semibold text-blue-600",children:"COPYRIGHT 2025. D'LIVE CO. LTD"})]})]}),_&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"   "}),s.jsxs("p",{className:"text-sm text-gray-600",children:["     .",s.jsx("br",{}),"     ."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition",children:""}),s.jsx("button",{onClick:C,disabled:c,className:"flex-1 py-2.5 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:c?" ...":" "})]})]})})]})},TY=[{id:"work-management",title:" ",description:"   ",icon:s.jsx(Fu,{className:"h-10 w-10 text-white"})},{id:"customer-management",title:" ",description:"    ",icon:s.jsx(NM,{className:"h-10 w-10 text-white"})},{id:"equipment-management",title:" ",description:" , ,  ",icon:s.jsx(im,{className:"h-10 w-10 text-white"})},{id:"other-management",title:" ",description:"     ",icon:s.jsx(X2,{className:"h-10 w-10 text-white"})}],hR=({onSelectMenu:t})=>{const e=n=>{switch(n){case"work-management":t("work-management");break;case"customer-management":t("customer-management");break;case"equipment-management":t("equipment-management");break;case"other-management":t("other-management");break;default:t("coming-soon")}};return s.jsx("div",{className:"px-4 pt-8",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:TY.map((n,r)=>s.jsxs("button",{onClick:()=>e(n.id),className:"group text-left p-6 bg-white rounded-xl shadow-lg hover:shadow-cyan-500/30 transition-all duration-300 transform hover:-translate-y-1 flex items-center space-x-6",style:{animationDelay:`${r*100}ms`},children:[s.jsx("div",{className:"bg-gradient-to-br from-cyan-400 to-cyan-500 rounded-lg p-4 group-hover:scale-110 transition-transform",children:n.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-cyan-500 transition-colors",children:n.title}),s.jsx("p",{className:"text-gray-500 mt-1",children:n.description})]})]},n.id))})})},cS=({tabs:t,activeTab:e,onTabChange:n,className:r=""})=>{const i=b.useRef(null),a=b.useRef([]);return s.jsxs("div",{className:`
        bg-white border-b border-gray-200
        ${r}
      `,children:[s.jsx("style",{children:`
        @keyframes breathe {
          0%, 100% { background-color: #fff7ed; }
          50% { background-color: #f59e0b; color: #fff; }
        }
        .tab-breathe {
          animation: breathe 4s ease-in-out infinite;
        }
      `}),s.jsx("div",{ref:i,className:"w-full justify-start bg-white rounded-none h-auto py-2 px-3 overflow-x-auto border-none",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:s.jsx("div",{className:"flex",children:t.map((o,c)=>{const u=e===o.id,h=o.badge!=null&&o.badge>0,m=h&&!u;return s.jsxs("button",{ref:_=>a.current[c]=_,onClick:()=>n(o.id),className:`
                  rounded-full px-4 py-2 text-sm font-medium flex-shrink-0 mx-1 transition-colors
                  ${u?"bg-blue-500 text-white":m?"tab-breathe text-amber-800":"text-gray-600"}
                `,children:[o.title,h&&s.jsx("span",{className:`ml-1 inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-xs font-bold rounded-full ${u?"bg-white/30 text-white":"bg-amber-500 text-white"}`,children:o.badge})]},o.id)})})})]})},jg=({onNavigateToMenu:t,title:e="  .",description:n="    .  !",category:r})=>{const[i,a]=b.useState(""),c=(()=>{switch(r){case"customer-management":return[{id:"customer-info",title:"",description:"    "},{id:"business-bot",title:"",description:"   "}];case"equipment-management":return[{id:"equipment-assignment",title:"/",description:"    "},{id:"equipment-status",title:"",description:"  "},{id:"equipment-movement",title:" ",description:"    "},{id:"equipment-recovery",title:"  ",description:"   "}];case"other-management":return[{id:"overtime-application",title:"",description:"  "},{id:"overtime-input",title:"",description:"   "},{id:"announcements",title:"",description:" "}];default:return[]}})(),u=c.length>0;Zi.useEffect(()=>{u&&!i&&a(c[0].id)},[u,i,c]);const h=m=>{a(m)};return s.jsxs("div",{className:"",children:[u&&s.jsx(cS,{tabs:c,activeTab:i,onTabChange:h}),s.jsxs("div",{className:"text-center p-10 bg-white rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:e}),s.jsx("p",{className:"text-gray-600 mb-8",children:n}),s.jsx("button",{onClick:t,className:"px-6 py-2 bg-cyan-500 text-white font-bold rounded-md hover:bg-cyan-600 transition-colors",children:"  "})]})]})},MY=({currentView:t,onNavigate:e,onSelectMenu:n})=>{const r=a=>{n(a),e==null||e(a)},i=[{id:"work-management",label:"",icon:C1},{id:"customer-management",label:"",icon:RP},{id:"equipment-management",label:"",icon:Jw},{id:"other-management",label:"",icon:pM}];return s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex h-[52px]",children:i.map(a=>{const o=t===a.id,c=a.icon;return s.jsxs("button",{onClick:()=>r(a.id),className:"flex-1 flex flex-col items-center justify-center gap-0.5 px-2 py-1 transition-all duration-200 active:scale-95 touch-manipulation",children:[s.jsx(c,{className:`
                    transition-all duration-200
                    ${o?"h-5 w-5 text-blue-600":"h-5 w-5 text-gray-500"}
                  `,strokeWidth:o?2.5:2}),s.jsx("span",{className:`
                    text-[10px] transition-all duration-200
                    ${o?"text-blue-600 font-bold":"text-gray-500 font-medium"}
                  `,children:a.label})]},a.id)})})})})},Sc=({label:t,value:e,children:n})=>s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm font-medium text-gray-700 bg-blue-100 border-r border-gray-200 w-1/3",children:t}),s.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-900 w-2/3",children:n||e||"-"})]}),IY=t=>({1:"",2:"",3:"",4:"",7:"",9:""})[t||""]||t||"-",jY=t=>{if(!t)return new Date().toLocaleString("ko-KR");if(t.length>=8){const e=t.slice(0,4),n=t.slice(4,6),r=t.slice(6,8);if(t.length>=14){const i=t.slice(8,10),a=t.slice(10,12);return`${e}-${n}-${r} ${i}:${a}`}return`${e}-${n}-${r}`}return t},OY=({order:t,onBack:e})=>{var a,o,c,u;const n=localStorage.getItem("userInfo"),r=n?JSON.parse(n):{},i=r.userName||r.userId||"";return s.jsx("div",{className:"h-full overflow-y-auto max-w-4xl mx-auto p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"bg-blue-600 text-white px-3 py-2 text-sm sm:text-base font-semibold",children:[s6(t.WRK_CD)," [1.]"]}),s.jsxs("div",{className:"p-3 sm:p-4",children:[s.jsx("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:s.jsx("table",{className:"w-full",children:s.jsxs("tbody",{children:[s.jsx(Sc,{label:"",value:t.PROD_NM||t.productName||"-"}),s.jsx(Sc,{label:"",value:t.WRK_CD?`${t.WRK_CD} (${t.WRK_CD_NM||t.typeDisplay||""})`:"-"}),s.jsx(Sc,{label:"",value:((a=t.customer)==null?void 0:a.id)||t.CUST_ID||"-"}),s.jsx(Sc,{label:"",value:((o=t.customer)==null?void 0:o.name)||"-"}),s.jsx(Sc,{label:"",value:((c=t.customer)==null?void 0:c.phone)||"-"}),s.jsx(Sc,{label:"",value:t.CTRT_ID||"-"}),s.jsx(Sc,{label:"",value:t.installLocation||"-"}),s.jsx(Sc,{label:"CELL NO",value:t.cellNo||"-"}),s.jsx(Sc,{label:"",value:((u=t.customer)==null?void 0:u.address)||"-"}),s.jsx(Sc,{label:"",value:t.SO_NM||"-"})]})})}),s.jsxs("div",{className:"mt-4",children:[_f(t.WRK_CD)&&s.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-green-800 mb-2 flex items-center gap-1",children:[s.jsx(Ai,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-green-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    ( )"})]})]}),xf(t.WRK_CD)&&s.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-orange-800 mb-2 flex items-center gap-1",children:[s.jsx(Fu,{size:16}),"A/S   "]}),s.jsxs("ul",{className:"text-xs text-orange-700 space-y-1",children:[s.jsx("li",{children:" /    "}),s.jsx("li",{children:" A/S      "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "})]})]}),(wg(t.WRK_CD)||Lg(t.WRK_CD))&&s.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-red-800 mb-2 flex items-center gap-1",children:[s.jsx(im,{size:16}),"/  "]}),s.jsxs("ul",{className:"text-xs text-red-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsxs("li",{children:[" ",wg(t.WRK_CD)?"()    ":"  "]}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "})]})]}),xp(t.WRK_CD)&&s.jsxs("div",{className:"bg-purple-50 border border-purple-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-purple-800 mb-2 flex items-center gap-1",children:[s.jsx(Co,{size:16}),"  "]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"     ( )"}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),Lg(t.WRK_CD)&&s.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[s.jsx(Rd,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),AM(t.WRK_CD,t.WRK_DTL_TCD)&&s.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-orange-800 mb-2 flex items-center gap-1",children:[s.jsx(XL,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-orange-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    (:20)"}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"     "})]})]}),kM(t.WRK_CD,t.WRK_DTL_TCD)&&s.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-3 mb-3",children:[s.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[s.jsx(Ai,{size:16}),"   "]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    (:30/37)"}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]}),t.WRK_CD==="06"&&s.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3 mb-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "})]})]}),t.WRK_CD==="04"&&s.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3 mb-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsxs("li",{children:[" ",t.WRK_DTL_TCD==="0430"?" ":t.WRK_DTL_TCD==="0440"?" ":"  "]}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),t.WRK_CD==="09"&&s.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3 mb-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-800 mb-2",children:"   "}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsx("li",{children:"     "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"    "})]})]})]}),t.MEMO&&s.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:" "}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 whitespace-pre-wrap",children:t.MEMO})]}),s.jsxs("div",{className:"mt-4 bg-green-50 border border-green-300 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-green-800 mb-2",children:" "}),s.jsxs("div",{className:"space-y-1 text-xs sm:text-sm text-green-700",children:[s.jsxs("div",{children:[": ",jY(t.WRKR_CMPL_DT||t.WRK_END_DTTM)]}),s.jsxs("div",{children:[": ",i]}),s.jsxs("div",{children:[" ID: ",t.id]}),t.WRK_CD&&s.jsxs("div",{children:[" : ",t.WRK_CD," (",t.WRK_CD_NM||t.typeDisplay,")"]}),t.CTRT_ID&&s.jsxs("div",{children:[" ID: ",t.CTRT_ID]}),s.jsxs("div",{children:[": ",IY(t.WRK_STAT_CD)]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:e,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors text-sm sm:text-base",children:""})})]})]})})},wY=({onNavigateToView:t,onNavigateToComingSoon:e,userInfo:n,showToast:r})=>{const{setSelectedWorkItem:i,setSelectedWorkDirection:a}=uo(),[o,c]=b.useState(!1),[u,h]=b.useState(!1),[m,_]=b.useState(null),[p,g]=b.useState(!1),[C,y]=b.useState(null),{workFilters:N}=uo(),{startDate:v,endDate:P}=N,w=new Date,M=w.toISOString().split("T")[0],{data:k=[],isLoading:B,error:G,refetch:U}=I4({startDate:v,endDate:P}),I=k.filter(T=>T.scheduledAt?T.scheduledAt.split("T")[0]===M:!1),E=(G==null?void 0:G.message)||null,Y=(T=>{const j=["","","","","","",""],K=T.getFullYear(),J=T.getMonth()+1,q=T.getDate(),V=j[T.getDay()];return{full:`${K} ${J} ${q} (${V})`,short:`${J} ${q}`}})(w),se={pending:I.filter(T=>T.status===_n.Pending),completed:I.filter(T=>T.status===_n.Completed),cancelled:I.filter(T=>T.status===_n.Cancelled)},X=T=>{a(T),t&&t("work-item-list")},z=(T,j)=>{T.stopPropagation(),j?window.location.href=`tel:${j}`:r&&r(" .","warning")},$=(T,j)=>{T.stopPropagation(),y(j),g(!0)},F=(T,j)=>{T.stopPropagation();const K=q=>q?q.includes("T")||q.includes("-")?q.replace(/[-:T]/g,"").substring(0,12):q:"",J={SO_ID:j.SO_ID||"328",CUST_ID:j.CUST_ID||j.customer.id||"",CUST_NM:j.customer.name||"",SMS_RCV_TEL:j.customer.phone||"",SMS_SEND_TEL:"",WRK_HOPE_DTTM:K(j.scheduledAt),WRKR_NM:(n==null?void 0:n.userName)||"",WRKR_NM_EN:(n==null?void 0:n.userNameEn)||(n==null?void 0:n.userName)||"",WRK_CD:j.WRK_CD||"",WRK_CD_NM:j.typeDisplay||"",WRK_DRCTN_ID:j.WRK_DRCTN_ID||j.id||"",RCPT_ID:j.RCPT_ID||""};_(J),h(!0)},L=T=>{switch(T){case _n.Pending:return"bg-blue-100 text-blue-800 border-blue-300";case _n.Completed:return"bg-green-100 text-green-800 border-green-300";case _n.Cancelled:return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},re=(T,j)=>s.jsx("div",{onClick:()=>X(T),className:"bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 transition-all duration-200 cursor-pointer active:scale-[0.99] mb-3 touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[j!==void 0&&s.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center rounded-full bg-blue-500 text-white text-sm font-bold",children:j}),s.jsxs("h3",{className:"font-bold text-gray-900 text-base truncate",children:[T.customer.name,T.customer.id&&s.jsxs("span",{className:"text-gray-400 font-normal ml-1",children:["(",T.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),s.jsx(J2,{customer:T.customer})]}),s.jsx("div",{className:"flex items-center gap-1.5 flex-shrink-0 flex-wrap justify-end",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${L(T.status)}`,children:T.status})})]}),s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium bg-blue-50 text-blue-700 border border-blue-200",children:T.typeDisplay}),T.WRK_CD==="04"&&T.WRK_DTL_TCD==="0440"&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-cyan-50 text-cyan-700 border border-cyan-200",children:""})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:T.scheduledAt?new Date(T.scheduledAt).toLocaleString("ko-KR",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):" "})]})]}),s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsxs("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:T.customer.address||"  "})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("button",{onClick:K=>z(K,T.customer.phone),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),""]}),s.jsxs("button",{onClick:K=>F(K,T),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),""]}),s.jsxs("button",{onClick:K=>$(K,T),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm font-medium flex-1",children:[s.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"whitespace-nowrap",children:""})]})]})]})},T.id),fe=(T,j,K,J,q)=>j.length===0?null:s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:`flex items-center justify-between mb-3 px-4 py-2 rounded-lg ${K} shadow-sm`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[q,s.jsx("h3",{className:`font-bold text-base ${J}`,children:T})]}),s.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full bg-white ${J} font-bold text-sm shadow-sm`,children:j.length})]}),s.jsx("div",{className:"space-y-3",children:j.map((V,ce)=>re(V,ce+1))})]});return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-blue-600 text-white shadow-lg z-30",children:s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(rm,{className:"w-5 h-5"}),s.jsx("h1",{className:"text-xl font-bold",children:" "})]}),s.jsx("p",{className:"text-blue-100 text-sm",children:Y.full})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold",children:I.length}),s.jsx("div",{className:"text-xs text-blue-100",children:" "})]})]})})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:B?s.jsx(Lf,{size:"medium",message:"   ..."}):E?s.jsx(dN,{type:"error",message:E,onRetry:()=>window.location.reload()}):I.length===0?s.jsx("div",{className:"text-center py-16 px-6",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-8 mx-auto max-w-sm border border-gray-200",children:[s.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(rm,{className:"w-10 h-10 text-blue-600"})}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 whitespace-nowrap",children:"   "}),s.jsx("p",{className:"text-gray-500",children:"  !"})]})}):s.jsxs("div",{children:[fe("",se.pending,"bg-blue-100","text-blue-700",s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center",children:s.jsx(_M,{className:"w-4 h-4 text-white"})})),fe("",se.completed,"bg-green-100","text-green-700",s.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})),fe("",se.cancelled,"bg-red-100","text-red-700",s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-600 flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}))]})}),!B&&!E&&I.length>0&&s.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-200 shadow-lg px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-around text-center max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:se.pending.length}),s.jsx("div",{className:"text-xs text-gray-600",children:""})]}),s.jsx("div",{className:"w-px h-10 bg-gray-300"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:se.completed.length}),s.jsx("div",{className:"text-xs text-gray-600",children:""})]}),s.jsx("div",{className:"w-px h-10 bg-gray-300"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:se.cancelled.length}),s.jsx("div",{className:"text-xs text-gray-600",children:""})]})]})}),!B&&!E&&I.length>0&&s.jsx(ZM,{onClick:()=>c(!0),workCount:I.length}),o&&s.jsx(Yj,{workOrders:I,onBack:()=>c(!1),onSelectWork:T=>{c(!1),X(T)}}),s.jsx(qM,{isOpen:u,onClose:()=>h(!1),smsData:m,userId:(n==null?void 0:n.userId)||""}),C&&s.jsx(XM,{isOpen:p,onClose:()=>{g(!1),y(null)},direction:C,onSuccess:()=>{U()},showToast:r,userInfo:n})]})},LY=({workItem:t,onNext:e,onBack:n})=>{var fe,T,j,K,J;const[r,i]=b.useState(null),[a,o]=b.useState(!1),[c,u]=b.useState(null),[h,m]=b.useState(null),[_,p]=b.useState(!1),[g,C]=b.useState([]),y=t.WRK_CD==="05",N=t.WRK_CD==="07",v=t.WRK_CD==="08",P=N||v,[w,M]=b.useState(null),[k,B]=b.useState(!1),[G,U]=b.useState(null);b.useEffect(()=>{(async()=>{const V=y&&t.DTL_CTRT_ID?t.DTL_CTRT_ID:t.CTRT_ID;if(!V){console.log("[ContractInfo] CTRT_ID  - getCtrtDetailInfo ");return}o(!0),u(null);try{console.log("[ContractInfo] getCtrtDetailInfo  :",{CTRT_ID:V,CUST_ID:t.CUST_ID,isProductChange:y,DTL_CTRT_ID:t.DTL_CTRT_ID});const ce=await jM(V,t.CUST_ID);if(ce&&(console.log("[ContractInfo] getCtrtDetailInfo :",ce),i({PROM_CNT:ce.PROM_CNT,CTRT_APLY_STRT_DT:ce.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:ce.CTRT_APLY_END_DT,GRP_ID:ce.GRP_ID,GRP_NM:ce.GRP_NM,IP_CNT:ce.IP_CNT,SO_NM:ce.SO_NM,BASIC_PROD_CD_NM:ce.BASIC_PROD_CD_NM})),y&&t.CUST_ID){console.log("[ContractInfo]  - getFullContractInfo  ");const me=await RM({CUST_ID:t.CUST_ID,CTRT_ID:t.CTRT_ID});console.log("[ContractInfo] getFullContractInfo :",me),C(me.contracts||[])}}catch(ce){console.error("[ContractInfo]    :",ce),u(ce.message||"   .")}finally{o(!1)}})()},[y,t.CUST_ID,t.CTRT_ID,t.DTL_CTRT_ID]),b.useEffect(()=>{(async()=>{if(!t.CUST_ID){console.log("[ContractInfo] CUST_ID  -    ");return}p(!0);try{console.log("[ContractInfo]    :",{CUST_ID:t.CUST_ID,WRK_DRCTN_ID:t.WRK_DRCTN_ID});const V=await RA(t.CUST_ID,t.WRK_DRCTN_ID);console.log("[ContractInfo]    :",V),m(V)}catch(V){console.error("[ContractInfo]    :",V)}finally{p(!1)}})()},[t.CUST_ID,t.WRK_DRCTN_ID]),b.useEffect(()=>{(async()=>{if(t.WRK_DRCTN_ID)try{const V=await OM(t.WRK_DRCTN_ID);V&&(console.log("[ContractInfo] getAfterProcInfo :",V),U(V))}catch(V){console.error("[ContractInfo] getAfterProcInfo :",V)}})()},[t.WRK_DRCTN_ID]),b.useEffect(()=>{(async()=>{const V=t.WRK_ID||t.id;if(!P||!V){console.log("[ContractInfo]     (WRK_CD:",t.WRK_CD,", WRK_ID:",V,")");return}B(!0);try{console.log("[ContractInfo]    :",{WRK_CD:t.WRK_CD,WRK_ID:V,RCPT_ID:t.RCPT_ID});const ce=await x_({WRK_CD:t.WRK_CD||"",WRK_ID:V,RCPT_ID:t.RCPT_ID});console.log("[ContractInfo]    :",ce),M(ce)}catch(ce){console.error("[ContractInfo]    :",ce)}finally{B(!1)}})()},[P,t.WRK_CD,t.WRK_ID,t.id,t.RCPT_ID]);const[I,E]=b.useState([]),[A,Y]=b.useState(null),[se,X]=b.useState(!1),[z,$]=b.useState(null),[F,L]=b.useState(!1);b.useEffect(()=>{var V,ce,me;if(console.log("[ContractInfo] VIP :",{"customer.isVip":(V=t.customer)==null?void 0:V.isVip,VIP_GB:t.VIP_GB,customer:t.customer}),((ce=t.customer)==null?void 0:ce.isVip)||t.VIP_GB&&String(t.VIP_GB).length>0){const Ce=((me=t.customer)==null?void 0:me.vipLevel)||(t.VIP_GB==="VIP_VVIP"?"VVIP":"VIP");Y({label:"VIP",value:`${Ce} .`})}else Y(null)},[(fe=t.customer)==null?void 0:fe.isVip,(T=t.customer)==null?void 0:T.vipLevel,t.VIP_GB]),b.useEffect(()=>{(async()=>{var ce;if(!(((ce=t.customer)==null?void 0:ce.isVip)||t.VIP_GB&&String(t.VIP_GB).length>0)){$(null);return}L(!0);try{console.log("[ContractInfo] VIP  DB  ");const me=await zg({COMMON_GRP:"MOWO001",COMMON_CD:"AL1"});console.log("[ContractInfo] VIP  DB  :",me),me&&me.length>0&&me[0].REF_CODE?$(me[0].REF_CODE):$(null)}catch(me){console.error("[ContractInfo] VIP  DB  :",me),$(null)}finally{L(!1)}})()},[(j=t.customer)==null?void 0:j.isVip,t.VIP_GB]),b.useEffect(()=>{var me,Ce,ge,Ge,te;const q=[],V=t.WRK_CD||((me=h==null?void 0:h.workAlarm)==null?void 0:me.WRK_CD);if(_||!h){E([]);return}G&&(G.CLOSE_DANGER==="Y"?q.push({label:"",value:" "}):q.push({label:"",value:"  "})),h.workAlarm&&(h.workAlarm.OTT_SALE_DESC&&q.push({label:"OTT",value:h.workAlarm.OTT_SALE_DESC}),h.workAlarm.BUNDLE_ISP_TG==="Y"&&q.push({label:"",value:" "}),["01","05","07"].includes(V||"")&&h.workAlarm.PYM_MTHD==="01"&&h.workAlarm.ATMT_YN==="Y"&&q.push({label:"",value:"/Email"}),["01","05","06","07"].includes(V||"")&&h.workAlarm.RLNM_AUTH_YN_NM&&q.push({label:"",value:h.workAlarm.RLNM_AUTH_YN_NM}),h.workAlarm.COUPON_VAL&&h.workAlarm.COUPON_VAL!=="0"&&Number(h.workAlarm.COUPON_VAL)>0&&q.push({label:"VOD",value:` ${Number(h.workAlarm.COUPON_VAL).toLocaleString()}`}));const ce=((Ce=h.vodLastDate)==null?void 0:Ce.max_dt)||((ge=h.vodLastDate)==null?void 0:ge.MAX_DT);if(ce&&String(ce).trim().length>7&&q.push({label:"VOD",value:`(6M)VOD: ${AY(String(ce))}`}),(Ge=h.specialVod5k)!=null&&Ge.BIGO&&q.push({label:"",value:h.specialVod5k.BIGO}),(te=h.custBasicInfo)!=null&&te.SMS_RCV_YN){const he=String(h.custBasicInfo.SMS_RCV_YN);he==="Y"?q.push({label:"",value:""}):he==="N"&&q.push({label:"",value:""})}if(h.specialBigo&&h.specialBigo.length>0){const he=h.specialBigo.find(de=>de.SPECIAL_GB==="G"&&de.BIGO);he&&q.push({label:"",value:he.BIGO||""})}q.length>0&&console.log("[ContractInfo]  :",q),E(q)},[h,_,t.WRK_CD,G]);const re={PROM_CNT:(r==null?void 0:r.PROM_CNT)||t.PROM_CNT,CTRT_APLY_STRT_DT:(r==null?void 0:r.CTRT_APLY_STRT_DT)||t.CTRT_APLY_STRT_DT,CTRT_APLY_END_DT:(r==null?void 0:r.CTRT_APLY_END_DT)||t.CTRT_APLY_END_DT,GRP_ID:(r==null?void 0:r.GRP_ID)||t.GRP_ID,GRP_NM:(r==null?void 0:r.GRP_NM)||t.GRP_NM,IP_CNT:(r==null?void 0:r.IP_CNT)||t.IP_CNT,SO_NM:(r==null?void 0:r.SO_NM)||t.SO_NM,MSO_NM:t.MSO_NM};return s.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-6 pb-4 space-y-3 sm:space-y-4 overflow-x-hidden",children:[a&&s.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"animate-spin w-4 h-4 sm:w-5 sm:h-5 border-2 border-blue-500 border-t-transparent rounded-full flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm text-blue-700",children:"    ..."})]})}),c&&!a&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-100 rounded-xl p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-xs sm:text-sm text-yellow-700",children:c})]})}),!a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:" "}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:[t.customer.name,t.customer.id&&s.jsxs("span",{className:"text-gray-400 font-normal ml-1",children:["(",t.customer.id.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),")"]})]}),t.customer.isVip&&s.jsx("span",{className:`
                  px-1.5 sm:px-2 py-0.5 rounded-full text-[0.625rem] sm:text-xs font-semibold flex-shrink-0
                  ${t.customer.vipLevel==="VVIP"?"bg-purple-100 text-purple-700":"bg-yellow-100 text-yellow-700"}
                `,children:t.customer.vipLevel})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.customer.phone||"-"})]}),s.jsxs("div",{className:"flex items-start pt-1 border-t border-gray-100",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-16 sm:w-20 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 leading-relaxed flex-1 break-words",children:t.customer.address})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-all",children:Ji(t.PYM_ACNT_ID)||"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.PYM_MTHD||"-"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:re.PROM_CNT?`${re.PROM_CNT}`:"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:re.CTRT_APLY_STRT_DT?fR(re.CTRT_APLY_STRT_DT):"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:re.CTRT_APLY_END_DT?fR(re.CTRT_APLY_END_DT):"-"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:re.GRP_ID||"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words",children:re.GRP_NM||"-"})]})]})]}),A&&s.jsxs("div",{className:"bg-amber-50 border border-amber-300 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>X(!se),className:"w-full flex items-center justify-between px-3 py-2 hover:bg-amber-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs sm:text-sm font-bold text-amber-600 w-20 sm:w-24 flex-shrink-0",children:"VIP"}),s.jsx("span",{className:"text-xs sm:text-sm font-bold text-amber-700",children:A.value})]}),s.jsx("svg",{className:`w-4 h-4 text-amber-600 transition-transform duration-200 ${se?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),se&&s.jsx("div",{className:"px-3 py-3 border-t border-amber-200 bg-amber-50",children:s.jsx("div",{className:"text-xs sm:text-sm text-amber-800",children:F?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-amber-500 border-t-transparent rounded-full"}),s.jsx("span",{children:"VIP   ..."})]}):z?s.jsx("p",{className:"whitespace-pre-wrap",children:z}):s.jsx("p",{className:"text-amber-600",children:"VIP .   ."})})})]}),I.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsx("div",{className:"space-y-2 sm:space-y-3",children:I.map((q,V)=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:q.label}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words flex-1",children:q.value})]},V))})]}),y?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 pb-2 border-b border-gray-200",children:" "}),s.jsx("div",{className:"space-y-2",children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words",children:t.OLD_PROD_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:"ID"}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700",children:Ji(t.OLD_CTRT_ID||t.CTRT_ID)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700",children:t.OLD_CTRT_STAT_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700",children:t.OLD_PROM_CNT?`${t.OLD_PROM_CNT}`:"-"})]})]})})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[s.jsx("div",{className:"text-xs font-semibold text-blue-600 mb-2 pb-2 border-b border-blue-200",children:" "}),s.jsx("div",{className:"space-y-2",children:(()=>{const q=g.find(ce=>ce.CTRT_ID===t.DTL_CTRT_ID),V=(r==null?void 0:r.BASIC_PROD_CD_NM)||(q==null?void 0:q.BASIC_PROD_CD_NM);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-700 break-words",children:V||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:"ID"}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600",children:Ji(t.DTL_CTRT_ID||(q==null?void 0:q.CTRT_ID))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600",children:(q==null?void 0:q.CTRT_STAT_NM)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-400",children:""}),s.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600",children:q!=null&&q.PROM_CNT?`${q.PROM_CNT}`:"-"})]})]})})()})]})]})]}):P?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),k?s.jsxs("div",{className:"flex items-center justify-center gap-2 py-4",children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"   ..."})]}):s.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:`rounded-lg p-3 ${v?"bg-blue-50 border border-blue-200":"bg-gray-50"}`,children:[s.jsx("div",{className:`text-xs font-semibold mb-2 pb-2 border-b ${v?"text-blue-600 border-blue-200":"text-gray-500 border-gray-200"}`,children:""}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${v?"text-blue-700":"text-gray-900"}`,children:v?(r==null?void 0:r.BASIC_PROD_CD_NM)||"-":(w==null?void 0:w.PROD_NM)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:"ID"}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${v?"text-blue-600":"text-gray-700"}`,children:Ji(v?t.CTRT_ID:(w==null?void 0:w.OLD_CTRT_ID)||(w==null?void 0:w.CTRT_ID))})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${v?"text-blue-600":"text-gray-700"}`,children:v?((K=t.customer)==null?void 0:K.address)||"-":(w==null?void 0:w.ADDR_ORD)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${v?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${v?"text-blue-600":"text-gray-700"}`,children:v?t.WRK_STAT_NM||"-":(w==null?void 0:w.WRK_STAT_NM)||"-"})]})]})]}),s.jsxs("div",{className:`rounded-lg p-3 ${N?"bg-blue-50 border border-blue-200":"bg-gray-50"}`,children:[s.jsx("div",{className:`text-xs font-semibold mb-2 pb-2 border-b ${N?"text-blue-600 border-blue-200":"text-gray-500 border-gray-200"}`,children:""}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${N?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${N?"text-blue-700":"text-gray-900"}`,children:N?(r==null?void 0:r.BASIC_PROD_CD_NM)||"-":(w==null?void 0:w.PROD_NM)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${N?"text-blue-400":"text-gray-400"}`,children:"ID"}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${N?"text-blue-600":"text-gray-700"}`,children:Ji(N?t.CTRT_ID:w==null?void 0:w.CTRT_ID)})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${N?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium break-words ${N?"text-blue-600":"text-gray-700"}`,children:N?((J=t.customer)==null?void 0:J.address)||"-":(w==null?void 0:w.ADDR_ORD)||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-[0.625rem] sm:text-xs ${N?"text-blue-400":"text-gray-400"}`,children:""}),s.jsx("div",{className:`text-xs sm:text-sm font-medium ${N?"text-blue-600":"text-gray-700"}`,children:N?t.WRK_STAT_NM||"-":(w==null?void 0:w.WRK_STAT_NM)||"-"})]})]})]})]})]}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:""}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:"ID"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:Ji(t.CTRT_ID)})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.CTRT_STAT_NM||PY(t.CTRT_STAT)})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words flex-1",children:(r==null?void 0:r.BASIC_PROD_CD_NM)||t.productName||"-"})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-20 sm:w-24 flex-shrink-0",children:"IP"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:re.IP_CNT||"-"})]})]})]})]})]})},PY=t=>({10:"",20:"",30:"",37:"()",90:""})[t||""]||"  ",fR=t=>{if(!t)return"-";const e=String(t),n=e.replace(/\D/g,"");return n.length>=8?`${n.slice(0,4)}-${n.slice(4,6)}-${n.slice(6,8)}`:e||"-"},AY=t=>!t||t.length<8?"-":`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`,kY=({workItem:t,onNext:e,onBack:n,showToast:r})=>{var G,U,I;const[i,a]=b.useState(!1),[o,c]=b.useState([]),[u,h]=b.useState(!1),[m,_]=b.useState(!1),[p,g]=b.useState(!1),[C,y]=b.useState([]),[N,v]=b.useState(!1),[P,w]=b.useState(!1);b.useEffect(()=>{(async()=>{var A;if((A=t.customer)!=null&&A.id&&!m){h(!0);try{const Y=await NA(t.customer.id);c(Y),_(!0)}catch(Y){console.error("  :",Y),c([]),_(!0)}finally{h(!1)}}})()},[(G=t.customer)==null?void 0:G.id]),b.useEffect(()=>{(async()=>{var A;if((A=t.customer)!=null&&A.id&&!P){v(!0);try{const Y=await SA(t.customer.id);y(Y),w(!0)}catch(Y){console.error("  :",Y),y([]),w(!0)}finally{v(!1)}}})()},[(U=t.customer)==null?void 0:U.id]);const M=()=>{a(!i)},k=()=>{g(!p)},B=()=>{r&&r("   .","info")};return s.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-6 pb-3 sm:pb-4 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-3 sm:mb-4",children:"  "}),s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:"ID"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:Ji(t.RCPT_ID)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:"ID"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:Ji(t.id)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-blue-600 whitespace-nowrap",children:t.typeDisplay})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:BY(t.WRK_STAT_CD)})]}),s.jsxs("div",{className:"flex items-center justify-between pt-1.5 sm:pt-2 mt-1.5 sm:mt-2 border-t border-gray-100",children:[s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-blue-600 whitespace-nowrap",children:GY(t.scheduledAt)})]})]})]}),UY(t),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2.5 sm:mb-3",children:"  "}),s.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg text-xs sm:text-sm text-gray-700 leading-relaxed min-h-20 whitespace-pre-line",children:(I=t.details)==null?void 0:I.replace(/  /g,`
`)})]}),t.installLocation&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2.5 sm:mb-3",children:" "}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gray-50 rounded-lg",children:[s.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:t.installLocation})]})]}),t.cellNo&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-5",children:[s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 mb-2.5 sm:mb-3",children:" "}),s.jsxs("div",{className:"flex items-center justify-between gap-2 p-2.5 sm:p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:t.cellNo}),s.jsxs("button",{className:"min-h-10 sm:min-h-12 px-3 sm:px-4 py-2 bg-green-500 hover:bg-green-600 text-white text-xs sm:text-sm font-medium rounded-lg transition-colors flex items-center gap-1.5 sm:gap-2 whitespace-nowrap flex-shrink-0",children:[s.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})," "]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("button",{onClick:M,className:"w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:""}),u?s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-gray-100 text-gray-500 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:"..."}):m&&s.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 bg-blue-100 text-blue-700 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:[o.length,""]})]}),s.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 transition-transform flex-shrink-0 ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&s.jsx("div",{className:"border-t border-gray-100 p-3 sm:p-5",children:u?s.jsxs("div",{className:"flex items-center justify-center py-6 sm:py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2 sm:ml-3 text-xs sm:text-sm text-gray-500",children:" ..."})]}):o.length===0?s.jsx("div",{className:"text-center py-6 sm:py-8 text-gray-500 text-xs sm:text-sm",children:" 7  ."}):s.jsx("div",{className:"space-y-2.5 sm:space-y-3 max-h-64 sm:max-h-80 overflow-y-auto",children:o.map((E,A)=>s.jsxs("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5 sm:mb-2 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[s.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-medium rounded whitespace-nowrap ${E.MSG_TYP==="KKO"?"bg-yellow-100 text-yellow-700":E.MSG_TYP==="LMS"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:E.MSG_TYP||"SMS"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:E.EML_SMS_SND_TP_NM||"-"})]}),s.jsx("span",{className:`text-[0.625rem] sm:text-xs font-medium whitespace-nowrap ${E.RESULT===""?"text-green-600":E.RESULT===""?"text-red-600":"text-gray-500"}`,children:E.RESULT||"-"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs text-gray-500 mb-1.5 sm:mb-2",children:[s.jsxs("div",{className:"truncate",children:[": ",E.CELL_PHN||"-"]}),s.jsxs("div",{className:"truncate",children:[": ",E.SMS_RCV_NO||"-"]}),E.SEND_TIME&&s.jsxs("div",{className:"col-span-2",children:[": ",E.SEND_TIME]}),E.REG_NM&&s.jsxs("div",{className:"col-span-2",children:[": ",E.REG_NM]})]}),E.MESSAGE&&s.jsx("div",{className:"mt-1.5 sm:mt-2 p-2 bg-white rounded border border-gray-200 text-xs sm:text-sm text-gray-700 whitespace-pre-wrap",children:E.MESSAGE})]},A))})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsxs("button",{onClick:B,className:"w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:""})]}),s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("button",{onClick:k,className:"w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),s.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:""}),N?s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-gray-100 text-gray-500 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:"..."}):P&&s.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 bg-green-100 text-green-700 text-[0.625rem] sm:text-xs font-medium rounded-full whitespace-nowrap",children:[C.length,""]})]}),s.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 transition-transform flex-shrink-0 ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&s.jsx("div",{className:"border-t border-gray-100 p-3 sm:p-5",children:N?s.jsxs("div",{className:"flex items-center justify-center py-6 sm:py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-green-500"}),s.jsx("span",{className:"ml-2 sm:ml-3 text-xs sm:text-sm text-gray-500",children:" ..."})]}):C.length===0?s.jsx("div",{className:"text-center py-6 sm:py-8 text-gray-500 text-xs sm:text-sm",children:" ."}):s.jsx("div",{className:"space-y-2.5 sm:space-y-3 max-h-64 sm:max-h-80 overflow-y-auto",children:C.map((E,A)=>s.jsxs("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5 sm:mb-2 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-medium rounded whitespace-nowrap bg-green-100 text-green-700",children:E.RCPT_TP_NM||""}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:E.CNSL_MST_CL_NM||"-"})]}),s.jsx("span",{className:"text-[0.625rem] sm:text-xs text-gray-500 whitespace-nowrap",children:E.START_DD||"-"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs text-gray-500 mb-1.5 sm:mb-2",children:[E.CNSL_MID_CL_NM&&s.jsxs("div",{className:"truncate",children:[": ",E.CNSL_MID_CL_NM]}),E.CNSL_SLV_CL_NM&&s.jsxs("div",{className:"truncate",children:[": ",E.CNSL_SLV_CL_NM]}),E.CNSL_RSLT_NM&&s.jsxs("div",{className:"truncate",children:[": ",E.CNSL_RSLT_NM]}),E.RCPT_PSN_NM&&s.jsxs("div",{className:"truncate",children:[": ",E.RCPT_PSN_NM]})]}),E.REQ_CTX&&s.jsxs("div",{className:"mt-1.5 sm:mt-2 p-2 bg-white rounded border border-gray-200 text-xs sm:text-sm text-gray-700",children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"whitespace-pre-wrap",children:E.REQ_CTX})]}),E.PROC_CT&&s.jsxs("div",{className:"mt-1.5 sm:mt-2 p-2 bg-blue-50 rounded border border-blue-100 text-xs sm:text-sm text-gray-700",children:[s.jsx("div",{className:"text-[0.625rem] sm:text-xs text-blue-600 mb-1",children:""}),s.jsx("div",{className:"whitespace-pre-wrap",children:E.PROC_CT})]})]},A))})})]})]})},UY=t=>{const e=t.WRK_CD;return e==="0410"||e==="06"?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[s.jsx("h4",{className:"text-base font-bold text-gray-900 mb-4",children:"  "}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.mmtSusCd&&s.jsxs("div",{className:"space-y-1 col-span-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"  "}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.mmtSusCd})]}),t.susHopeDd&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:" "}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:mR(t.susHopeDd)})]}),t.mmtSusHopeDd&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:" "}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:mR(t.mmtSusHopeDd)})]}),t.termDays&&s.jsxs("div",{className:"space-y-1 col-span-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"  "}),s.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[t.termDays,""]})]})]})]}):null},BY=t=>({1:"",2:"",3:"",4:"",7:"",9:""})[t||""]||"  ",GY=t=>{try{const e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return`${n}-${r}-${i} ${a}:${o}`}catch{return t}},mR=t=>t&&t.length===8?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t,m0=({isOpen:t,onClose:e,prodCd:n,ctrtId:r,prodGrp:i,prodNm:a,wrkCdNm:o,onSave:c,showToast:u,customerEquipmentCount:h=0,installedEquipmentCount:m=0})=>{const[_,p]=b.useState([]),[g,C]=b.useState([]),[y,N]=b.useState({}),[v,P]=b.useState([]),[w,M]=b.useState([]),[k,B]=b.useState([]),[G,U]=b.useState([]),[I,E]=b.useState(""),[A,Y]=b.useState([]),[se,X]=b.useState(!1),[z,$]=b.useState(!1),[F,L]=b.useState(""),[re,fe]=b.useState("1");b.useEffect(()=>{t&&T()},[t,n,r]);const T=async()=>{X(!0);try{console.log("[Modal]     "),console.log("  PROD_CD:",n),console.log("  CTRT_ID:",r);const ee=await hA(n,r);console.log("[Modal]   :",ee);const Z=await fA("LENT,EQT_USE_STAT,ITLLMT_PRD");console.log("[Modal]  :",Z);let le=[],xe=[],be=[];const ne=ot=>Array.isArray(ot)?ot.map(Be=>{if(typeof Be=="string"||typeof Be=="number"){const tt=String(Be);return{COMMON_CD:tt,COMMON_CD_NM:tt}}const lt=(Be==null?void 0:Be.COMMON_CD)??(Be==null?void 0:Be.CODE)??(Be==null?void 0:Be.CD)??(Be==null?void 0:Be.value)??(Be==null?void 0:Be.COMMONCODE)??(Be==null?void 0:Be.code),pt=(Be==null?void 0:Be.COMMON_CD_NM)??(Be==null?void 0:Be.CD_NM)??(Be==null?void 0:Be.NAME)??(Be==null?void 0:Be.label)??(Be==null?void 0:Be.text)??(Be==null?void 0:Be.COMMONCDNM)??(Be==null?void 0:Be.name),mt=(Be==null?void 0:Be.REF_CODE)??(Be==null?void 0:Be.REF)??(Be==null?void 0:Be.refCode)??(Be==null?void 0:Be.ref),Ye=(Be==null?void 0:Be.COMMON_GRP)??(Be==null?void 0:Be.GROUP)??(Be==null?void 0:Be.group),at=(Be==null?void 0:Be.SORT_NO)??(Be==null?void 0:Be.SORT)??(Be==null?void 0:Be.order)??void 0,Fe=(Be==null?void 0:Be.DEFAULT_YN)??(Be==null?void 0:Be.DEFAULT)??(Be==null?void 0:Be.default)??void 0;return{COMMON_CD:typeof lt=="string"?lt:lt!=null?String(lt):"",COMMON_CD_NM:typeof pt=="string"?pt:pt!=null?String(pt):"",REF_CODE:typeof mt=="string"?mt:mt!=null?String(mt):void 0,COMMON_GRP:Ye!=null?String(Ye):void 0,SORT_NO:typeof at=="number"?at:at!=null?Number(at):void 0,DEFAULT_YN:Fe!=null?String(Fe):void 0}}).filter(Be=>Be.COMMON_CD):[];if(Z&&!Array.isArray(Z)&&typeof Z=="object"){const ot=(Array.isArray(Z.LENT)?Z.LENT:void 0)??(Array.isArray(Z.CMCU027)?Z.CMCU027:[]),Be=(Array.isArray(Z.EQT_USE_STAT)?Z.EQT_USE_STAT:void 0)??(Array.isArray(Z.CMEP314)?Z.CMEP314:[]),lt=(Array.isArray(Z.ITLLMT_PRD)?Z.ITLLMT_PRD:void 0)??(Array.isArray(Z.CMCU064)?Z.CMCU064:[]),pt=(Fe,tt)=>Array.isArray(Fe)?Fe.length>0&&!("COMMON_GRP_NM"in(Fe[0]||{})||"GROUP_NM"in(Fe[0]||{}))?Fe:Fe.filter(ct=>{const Mt=String((ct==null?void 0:ct.COMMON_GRP_NM)||(ct==null?void 0:ct.GROUP_NM)||"");return tt.some(dt=>Mt.indexOf(dt)>=0)}):[],mt=pt(ot,[""]),Ye=pt(Be,["",""]),at=pt(lt,["","",""]);le=ne(mt.length?mt:ot),xe=ne(Ye.length?Ye:Be),be=ne(at.length?at:lt)}else{let ot=[];Array.isArray(Z)?ot=ne(Z):Z!=null&&Z.codes&&Array.isArray(Z.codes)&&(ot=ne(Z.codes)),ot.length>0&&(le=ot.filter(Be=>Be.COMMON_GRP==="LENT"||Be.COMMON_GRP==="CMCU027"),xe=ot.filter(Be=>Be.COMMON_GRP==="EQT_USE_STAT"||Be.COMMON_GRP==="CMEP314"),be=ot.filter(Be=>Be.COMMON_GRP==="ITLLMT_PRD"||Be.COMMON_GRP==="CMCU064"))}console.log("   :",(le==null?void 0:le.length)||0,""),console.log("   :",(xe==null?void 0:xe.length)||0,""),console.log("   :",(be==null?void 0:be.length)||0,""),P(le||[]),M(xe||[]),B(be||[]);try{const Be=(await zg({COMMON_GRP:"LGCT001"})).map(lt=>lt.COMMON_CD).filter(Boolean);Y(Be),console.log("  LG   (LGCT001):",Be.length,"")}catch(ot){console.warn("  LGCT001  , AP  :",ot),Y([])}const ie=ee.output2||[];console.log("   :",ie.length),console.log("    ( ):",ie[0]);const pe=i==="V"?"09":"10",ze=ie.filter(ot=>(!ot.SEL||ot.SEL==="0")&&ot.EQT===pe);C(ze),console.log("    :",ze.length,"(PROD_GRP:",i,",  EQT:",pe,")");const xt=ie.map((ot,Be)=>(console.log(`  [${Be}]:`,{EQT:ot.EQT,PROD_TYP:ot.PROD_TYP,EQUIP_SEQ:ot.EQUIP_SEQ,SVC_CMPS_ID:ot.SVC_CMPS_ID,SEL:ot.SEL}),{...ot,SEL:ot.SEL||"0",LENT:ot.LENT||"10",EQT_USE_STAT_CD:ot.EQT_USE_STAT_CD||"1",ITLLMT_PRD:ot.ITLLMT_PRD||"00",PROD_TYP:ot.PROD_TYP||"2",EQUIP_SEQ:ot.EQUIP_SEQ||ot.SVC_CMPS_ID||String(Be+1)}));if(p(xt),ee.output1&&ee.output1.length>0){const ot=ee.output1[0];console.log("[Modal]   :",ot);const Be=ot.ITEM_MID_CDS||"",lt=ot.EQT_CLS||"",pt=(ot.LENTS||"").replace(/\[|\]/g,""),mt=ot.EQT_USE_STATS||"",Ye=ot.ITLLMT_PRDS||"",at=ot.EQT_SALE_AMTS||"",Fe=ot.PROD_CMPS_CLS||"",tt=ot.PROD_GRPS||"",ct=ot.PROD_CDS||"",Mt=ot.SVC_CDS||"";console.log("[Modal] PROD_CMPS_CLS :",Fe,"(:",Fe.length,")");const dt=Math.floor(Be.length/10),Je=[...xt],$e=(Ne=>{const ye=[];let Ue=0;for(;Ue<Ne.length;){const ue=Ne.charAt(Ue);Ue++;let Oe="";for(;Ue<Ne.length&&/\d/.test(Ne.charAt(Ue))&&(Oe+=Ne.charAt(Ue),Ue++,!(Oe.length>=2)););(ue||Oe)&&ye.push({prodTyp:ue,equipSeq:Oe})}return ye})(Fe);console.log("[Modal] PROD_CMPS_CLS :",$e);for(let Ne=0;Ne<dt;Ne++){const ye=Be.substr(Ne*10,10).trim(),Ue=lt.substr(Ne*10,10).trim(),ue=pt.substr(Ne*2,2).trim(),Oe=mt.substr(Ne*1,1).trim(),Ze=Ye.substr(Ne*2,2).trim(),Le=at.substr(Ne*10,10).trim(),vt=tt.charAt(Ne)||"D",je=ct.substr(Ne*10,10).trim(),ut=Mt.substr(Ne*10,10).trim(),gt=$e[Ne]||{prodTyp:"2",equipSeq:String(Ne+1)},jt=Je.findIndex(Ve=>Ve.SEL!=="1"&&Ve.EQT===ye);jt>-1&&(Je[jt]={...Je[jt],SEL:"1",EQT_CL:Ue,LENT:ue||"10",EQT_USE_STAT_CD:Oe||"1",ITLLMT_PRD:Ze||"00",EQT_SALE_AMT:parseInt(Le)||0,PROD_TYP:Je[jt].PROD_TYP,EQUIP_SEQ:Je[jt].EQUIP_SEQ,PROD_GRP:vt||Je[jt].PROD_GRP,PROD_CD:je||Je[jt].PROD_CD,SVC_CD:ut||Je[jt].SVC_CD},console.log(`  [${jt}]  (output2   ):`,{EQT:Je[jt].EQT,PROD_TYP:Je[jt].PROD_TYP,EQUIP_SEQ:Je[jt].EQUIP_SEQ,SEL:"1"}))}console.log("[Modal]   :",Je.filter(Ne=>Ne.SEL==="1")),p(Je)}U(ee.output3||[]);const st=await uA(n,r),St={};st.forEach(ot=>{St[ot.EQT_CD]||(St[ot.EQT_CD]=[]),St[ot.EQT_CD].some(Be=>Be.EQT_CL_CD===ot.EQT_CL_CD)||St[ot.EQT_CD].push({EQT_CL_CD:ot.EQT_CL_CD,EQT_CL_NM:ot.EQT_CL_NM,SUB_EQT_1:ot.SUB_EQT_1,SUB_EQT_2:ot.SUB_EQT_2,SUB_EQT_3:ot.SUB_EQT_3,DEL_EQT_1:ot.DEL_EQT_1,DEL_EQT_2:ot.DEL_EQT_2,DEL_EQT_3:ot.DEL_EQT_3})}),ie.forEach(ot=>{const Be=ot.EQT_CD||ot.EQT;if(!Be)return;St[Be]||(St[Be]=[]),!St[Be].some(pt=>pt.EQT_CL_CD===ot.EQT_CL)&&ot.EQT_CL&&ot.EQT_CL_NM&&St[Be].push({EQT_CL_CD:ot.EQT_CL,EQT_CL_NM:ot.EQT_CL_NM,SUB_EQT_1:ot.SUB_EQT_1,SUB_EQT_2:ot.SUB_EQT_2,SUB_EQT_3:ot.SUB_EQT_3,DEL_EQT_1:ot.DEL_EQT_1,DEL_EQT_2:ot.DEL_EQT_2,DEL_EQT_3:ot.DEL_EQT_3})}),N(St),console.log("   (API ):",St),console.log("[Modal]   ")}catch(ee){console.error("[Modal]   :",ee),u==null||u("   .","error",!0)}finally{X(!1)}},j=ee=>{const Z=[..._],le=Z[ee],xe=le.SEL,be=xe==="1"?"0":"1";Z[ee].SEL=be,console.log(`[Modal]  : [${ee}] ${le.EQT} - SEL: ${xe}  ${be}`);const ne=[];if(le.EQT_CL){const pe=(y[le.EQT_CD]||[]).find(ze=>ze.EQT_CL_CD===le.EQT_CL);pe&&(pe.SUB_EQT_1&&ne.push(pe.SUB_EQT_1),pe.SUB_EQT_2&&ne.push(pe.SUB_EQT_2),pe.SUB_EQT_3&&ne.push(pe.SUB_EQT_3))}if(be==="0"&&ne.length>0){let ie=0;Z.forEach((pe,ze)=>{if(ze!==ee){const xt=K(pe.EQT);ne.includes(xt)&&pe.SEL==="1"&&(pe.SEL="0",ie++,console.log(`[Modal]   - SUB_EQT  : ${pe.EQT_NM||pe.EQT}`))}}),ie>0&&(u==null||u(`${ie}    .`,"info"))}if(be==="1"&&ne.length>0&&le.EQT_CL){let ie=0;Z.forEach((pe,ze)=>{if(ze!==ee){const xt=K(pe.EQT);ne.includes(xt)&&pe.SEL!=="1"&&(pe.SEL="1",ie++,console.log(`[Modal]   - SUB_EQT  : ${pe.EQT_NM||pe.EQT}`))}}),ie>0&&(u==null||u(`${ie}    .`,"info"))}p(Z),console.log(`      : ${Z.filter(ie=>ie.SEL==="1").length}`)},K=ee=>(ee==null?"":String(ee).trim()).padStart(2,"0"),J=(ee,Z,le)=>{const xe=[..._];if(xe[ee][Z]=le,Z==="EQT_CL"){const be=xe[ee],ie=(y[be.EQT_CD]||[]).find(pe=>pe.EQT_CL_CD===le);if(ie){xe[ee].EQT_CL_NM=ie.EQT_CL_NM,console.log("[Modal]  :",{index:ee,EQT_CL_CD:le,EQT_CL_NM:ie.EQT_CL_NM});const pe=[],ze=[];ie.SUB_EQT_1&&pe.push(ie.SUB_EQT_1),ie.SUB_EQT_2&&pe.push(ie.SUB_EQT_2),ie.SUB_EQT_3&&pe.push(ie.SUB_EQT_3),ie.DEL_EQT_1&&ze.push(ie.DEL_EQT_1),ie.DEL_EQT_2&&ze.push(ie.DEL_EQT_2),ie.DEL_EQT_3&&ze.push(ie.DEL_EQT_3),console.log("[Modal]   :",{EQT:be.EQT,model:le,modelName:ie.EQT_CL_NM,SUB_EQTs:pe,DEL_EQTs:ze});let xt=0,st=0;if(pe.length>0&&xe.forEach((Be,lt)=>{if(lt!==ee){const pt=K(Be.EQT);pe.includes(pt)&&Be.SEL!=="1"&&(Be.SEL="1",xt++,console.log(`[Modal] SUB_EQT  : ${Be.EQT_NM||Be.EQT} (EQT: ${pt})`))}}),ze.length>0&&xe.forEach((Be,lt)=>{if(lt!==ee){const pt=K(Be.EQT);ze.includes(pt)&&Be.SEL==="1"&&(Be.SEL="0",st++,console.log(`[Modal] DEL_EQT  : ${Be.EQT_NM||Be.EQT} (EQT: ${pt})`))}}),xt>0||st>0){const Be=[];xt>0&&Be.push(`${xt}   `),st>0&&Be.push(`${st}   `),u==null||u(Be.join(", "),"info")}const St=le==="090491",ot=be.EQT==="21"||be.EQT==="22";(St||ot)&&(xe[ee].LENT="40",console.log(`[Modal]   LENT=40  : ${St?"XCAS":"EQT="+be.EQT}`))}}Z==="LENT"&&(le!=="31"&&(xe[ee].ITLLMT_PRD="00"),["30","31","60"].includes(le)||(xe[ee].EQT_USE_STAT_CD="1")),p(xe)},q=()=>{if(!F){u==null||u("  .","warning");return}const ee=parseInt(re);if(isNaN(ee)||ee<1){u==null||u("  .","warning");return}const Z=g.find(xe=>xe.EQT===F);if(!Z)return;const le=[..._];for(let xe=0;xe<ee;xe++)le.push({...Z,SEL:"1",LENT:"10",EQT_USE_STAT_CD:"1",ITLLMT_PRD:"00",PROD_TYP:Z.PROD_TYP||"2",EQUIP_SEQ:Z.EQUIP_SEQ||Z.SVC_CMPS_ID||String(le.length+1)});p(le),fe("1")},V=async()=>{if(console.log(`
 [Modal]    `),m>0){u==null||u("      .   .","error");return}console.log("  equipmentList :",_.length,""),console.log("    SEL :"),_.forEach((ie,pe)=>{console.log(`    [${pe}] ${ie.EQT} - SEL: "${ie.SEL}" (: ${ie.SEL==="1"?"O":"X"})`)});const ee=_.filter(ie=>ie.SEL==="1");if(console.log(" :",ee.length,""),ee.forEach((ie,pe)=>{console.log(`  [${pe}] ${ie.EQT} - PROD_TYP: ${ie.PROD_TYP}, EQUIP_SEQ: ${ie.EQUIP_SEQ}`)}),ee.length===0){u==null||u("  .","warning");return}const Z=ie=>(ie==null?"":String(ie).trim()).padStart(2,"0"),le=ie=>{const pe=Z(ie.EQT),ze=Z(ie.ITEM_MID_CD),xt=Z(ie.ITM_MID_CD),st=Z(ie.EQT_CD);return pe==="04"||ze==="04"||xt==="04"||st==="04"};ee.filter(le);const xe=ee.filter(ie=>ie.EQT==="10").length,be=ee[0];if(be&&be.CMPS_QTY_FROM==="2"){if(xe!==2){u==null||u("   2 .","warning");return}}else if(A.includes(n)&&xe>1){u==null||u("    1 .","warning");return}const ne=ee.filter(ie=>ie.EQT==="09").length;if(ne>180){u==null||u(` 180  . HANDY : ${ne}`,"warning");return}if(xe>180){u==null||u(` 180  . (AP) : ${xe}`,"warning");return}$(!0);try{console.log(" [Modal] onSave  - selectedEquipments:",ee.length,""),console.log("    :"),ee.forEach((ie,pe)=>{console.log(`    [${pe}]`,{EQT:ie.EQT,SEL:ie.SEL,PROD_TYP:ie.PROD_TYP,EQUIP_SEQ:ie.EQUIP_SEQ,PROD_GRP:ie.PROD_GRP,PROD_CD:ie.PROD_CD,SVC_CD:ie.SVC_CD,EQT_CL:ie.EQT_CL,LENT:ie.LENT,EQT_USE_STAT_CD:ie.EQT_USE_STAT_CD,ITLLMT_PRD:ie.ITLLMT_PRD})}),await c(ee,I),e()}catch(ie){console.error("[Modal]  :",ie)}finally{$(!1)}},ce=ee=>G.filter(Z=>Z.PRED==="1"&&Z.EQT_USE_STAT_CD===ee.EQT_USE_STAT_CD&&Z.EQT_CL_CD===ee.EQT_CL),me=ee=>{const Z=v.find(le=>le.COMMON_CD===ee);return Z?Z.COMMON_CD_NM:ee},Ce=(ee,Z)=>{const le=ee.LENT_YN,xe=ee.EQT_CL;if(!le||typeof le!="string"||!Z||Z.length===0)return console.log("[] LENT_YN    ",{lentYn:le,allLentCodesCount:Z.length}),[];const be=le.split("|").map(pe=>pe.trim()).filter(Boolean);if(!be.length)return console.log("[] LENT_YN     ",{lentYn:le}),[];const ne=new Set;if(be.forEach(pe=>{if(pe.length>=7){const ze=pe.substring(0,6),xt=pe.charAt(6);xe&&ze===xe&&ne.add(xt)}}),console.log("[]  ",{eqtCl:xe,lentYn:le,tokens:be,allowedRefCodes:Array.from(ne),allLentCodes:Z.map(pe=>({code:pe.COMMON_CD,name:pe.COMMON_CD_NM,refCode:pe.REF_CODE}))}),ne.size===0)return console.log("[]  REF_CODE    "),[];const ie=Z.filter(pe=>{const ze=pe.REF_CODE,xt=ze&&ne.has(ze);return console.log(`  - ${pe.COMMON_CD} (${pe.COMMON_CD_NM}): REF_CODE=${ze}  ${xt?"":""}`),xt}).map(pe=>pe.COMMON_CD);return console.log("[]  :",ie),ie},ge=ee=>{const Z=w.find(le=>le.COMMON_CD===ee);return Z?Z.COMMON_CD_NM:ee},Ge=b.useMemo(()=>(v||[]).map(Z=>({value:Z.COMMON_CD,label:Z.COMMON_CD_NM||Z.COMMON_CD,SORT_NO:Z.SORT_NO,DEFAULT_YN:Z.DEFAULT_YN,REF_CODE:Z.REF_CODE})),[v]);b.useMemo(()=>(w||[]).map(Z=>({value:Z.COMMON_CD,label:Z.COMMON_CD_NM||Z.COMMON_CD})),[w]);const te=b.useMemo(()=>(k||[]).map(Z=>({value:Z.COMMON_CD,label:Z.COMMON_CD_NM||Z.COMMON_CD})),[k]),he=b.useMemo(()=>(g||[]).map(ee=>({value:ee.EQT,label:ee.EQT_NM})),[g]),de=se?null:s.jsxs("div",{className:"modal-subheader",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("span",{className:"info-value",title:r,children:r||"-"})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("span",{className:"info-value",title:o,children:o||"-"})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("span",{className:"info-value",title:a,children:a||"-"})]}),i==="V"&&te.length>0&&s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:""}),s.jsx("div",{className:"info-select",children:s.jsx(sn,{value:I||"",onValueChange:E,options:te,placeholder:""})})]})]}),Q=s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn btn-secondary btn-sm",onClick:e,disabled:z,children:""}),s.jsx("button",{className:"btn btn-primary btn-sm",onClick:V,disabled:z||se,children:z?" ...":""})]});return s.jsx(Ra,{isOpen:t,onClose:e,title:"  ",size:"large",subHeader:de,footer:Q,children:s.jsx("div",{className:"equipment-model-change-modal-content",children:se?s.jsxs("div",{className:"loading-message",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"   ..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"add-equipment-section",children:[s.jsx("h3",{children:" "}),s.jsxs("div",{className:"add-equipment-form",children:[s.jsx("div",{className:"flex-1",children:s.jsx(sn,{value:F,onValueChange:L,options:he,placeholder:"  "})}),s.jsx("input",{type:"number",className:"count-input",value:re,onChange:ee=>fe(ee.target.value),min:"1",max:"99"}),s.jsx("span",{className:"unit",children:""}),s.jsx("button",{className:"add-btn",onClick:q,children:""})]})]}),s.jsxs("div",{className:"equipment-section",children:[s.jsxs("h3",{children:["  (",_.filter(ee=>ee.SEL==="1").length," )"]}),_.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"  ."})}):s.jsx("div",{className:"equipment-list",children:_.map((ee,Z)=>{const le=y[ee.EQT_CD]||[],xe=ee.SEL==="1";xe&&["30","31","60"].includes(ee.LENT);const be=xe&&ee.LENT==="31",ne=ce(ee);return s.jsxs("div",{className:`equipment-item ${xe?"selected":""}`,children:[s.jsx("div",{className:"equipment-header",children:s.jsxs("label",{className:"checkbox-wrapper",children:[s.jsx("input",{type:"checkbox",checked:xe,onChange:()=>j(Z)}),s.jsxs("span",{className:"equipment-title",children:[ee.EQT_NM,ee.EQT_BASIC_YN==="Y"&&s.jsx("span",{className:"badge",children:""})]})]})}),xe&&s.jsxs("div",{className:"equipment-details",children:[s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsx("div",{style:{flex:1},children:s.jsx(sn,{value:ee.EQT_CL||"",onValueChange:ie=>J(Z,"EQT_CL",ie),options:(()=>{const ie=(le||[]).map(pe=>({value:pe.EQT_CL_CD,label:pe.EQT_CL_NM}));return ie.length===0&&console.warn("  .",{eqtCd:ee.EQT_CD,models:le}),ie})(),placeholder:""})})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsx("div",{style:{flex:1},children:s.jsx(sn,{value:ee.LENT||"10",onValueChange:ie=>J(Z,"LENT",ie),options:(()=>{let ie=Ce(ee,v||[]);ie.includes("31")&&(ce(ee).some(xt=>xt.PRED==="1")||(ie=ie.filter(xt=>xt!=="31")));const pe=Ge.filter(ze=>ie.includes(ze.value));return pe.length===0&&console.warn("   .",{eq:ee,allowed:ie}),pe.map(ze=>({value:ze.value,label:ze.label}))})(),placeholder:""})})]}),be&&s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsx("div",{style:{flex:1},children:s.jsx(sn,{value:ee.ITLLMT_PRD||"00",onValueChange:ie=>J(Z,"ITLLMT_PRD",ie),options:(()=>{const ie=[{value:"00",label:""},...ne.map(pe=>({value:pe.INSTL_PERD,label:`${pe.INSTL_PERD}`}))];return ne.length===0&&console.warn("  .",{eq:ee,installmentPeriods:ne}),ie})(),placeholder:""})})]}),ee.EQT_SALE_AMT>0&&s.jsxs("div",{className:"detail-row",children:[s.jsx("label",{children:""}),s.jsxs("span",{className:"price",children:[ee.EQT_SALE_AMT.toLocaleString(),""]})]})]}),!xe&&s.jsxs("div",{className:"equipment-summary",children:[s.jsx("span",{className:"tag",children:me(ee.LENT)}),s.jsx("span",{className:"tag",children:ge(ee.EQT_USE_STAT_CD)})]})]},Z)})})]})]})})})},g0=({isOpen:t,onClose:e,ctrtId:n})=>{const[r,i]=b.useState([]),[a,o]=b.useState(!1),[c,u]=b.useState(null),h=async()=>{if(!n){console.error("[LDAP] ID ");return}o(!0),u(null);try{console.log("[LDAP]   CTRT_ID:",n);const p=await Z2(n);console.log("[LDAP]  :",p),i(p.data||[])}catch(p){console.error("[LDAP]  :",p),u(p instanceof Error?p.message:"   ")}finally{o(!1)}};b.useEffect(()=>{t&&n&&h()},[t,n]);const m=s.jsxs("div",{className:"text-xs text-gray-700 space-y-0.5",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-600",children:"ID:"})," ",s.jsx("span",{className:"font-medium text-blue-700",children:Ji(n)})]}),s.jsx("div",{className:"text-gray-600",children:"LGU+ LDAP  "})]}),_=s.jsx("button",{onClick:e,className:"btn btn-secondary btn-sm",children:""});return s.jsx(Ra,{isOpen:t,onClose:e,title:"LDAP",size:"medium",subHeader:m,footer:_,children:s.jsxs("div",{children:[a&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:" ..."})}),c&&s.jsx("div",{className:"flex items-center justify-center py-8 px-4",children:s.jsx("div",{className:"text-red-500 text-xs text-center",children:c})}),!a&&!c&&r.length===0&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-500 text-xs",children:"LDAP  "})}),!a&&!c&&r.length>0&&s.jsx("div",{className:"space-y-2.5 p-2.5",children:r.map((p,g)=>s.jsx("div",{className:`rounded-lg border shadow-sm p-2.5 ${g%2===0?"bg-white border-gray-200":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"space-y-1.5",children:[p.ONT_EQT_NO&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"ONT :"})," ",p.ONT_EQT_NO]})}),p.ONT_MAC_ADDR&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"ONT MAC:"})," ",p.ONT_MAC_ADDR]})}),p.AP_EQT_NO&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"AP :"})," ",p.AP_EQT_NO]})}),p.AP_MAC_ADDR&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:"AP MAC:"})," ",p.AP_MAC_ADDR]})}),p.PROC_DV_CD&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",p.PROC_DV_CD]})}),p.PRSS_RSLT_CD&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",s.jsx("span",{className:p.PRSS_RSLT_CD==="0000"?"text-green-600":"text-red-600",children:p.PRSS_RSLT_CD})]})}),p.PRSS_RSLT_MSG&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",p.PRSS_RSLT_MSG]})}),p.REG_DTTM&&s.jsx("div",{className:"bg-white rounded px-2.5 py-1.5 border border-gray-100",children:s.jsxs("div",{className:"text-xs text-gray-900 font-medium",children:[s.jsx("span",{className:"text-gray-600 font-normal",children:":"})," ",p.REG_DTTM]})})]})},g))})]})})},_0=t=>({"01":"","02":"","03":"A/S","04":"","05":"","06":"","07":"","08":"","09":""})[t||""]||"",$u=t=>({10:"",20:"",30:"",40:"",90:""})[t||""]||"",WY=["091001","091005","091006","091401","092401","090251"],P_=t=>!t||["01","05","06","07","09"].includes(t)?"01":["02","08"].includes(t)?"02":t==="03"?"03":t==="04"?"04":"01",dS=t=>t.LENT_YN==="40"||t.VOIP_CUSTOWN_EQT==="Y"||t.eqtClCd==="090852",gR=t=>`equipment_draft_${t}`,_R=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u="",onLdapConnect:h,isLdapDone:m=!1,ldapLoading:_=!1,ldapBlocked:p=!1})=>{var ot;const g=t.id,C=o||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:y}=ta(),{initWorkState:N,setApiData:v,setDataLoaded:P,addInstalledEquipment:w,removeInstalledEquipment:M,setInstalledEquipments:k,clearInstalledEquipments:B,setSelectedContract:G,setSelectedStock:U,setSignalStatus:I,setSignalResult:E}=Ui(),{contractEquipments:A,technicianEquipments:Y,installedEquipments:se,selectedContract:X,selectedStock:z,signalStatus:$,signalResult:F,filteringData:L,isReady:re}=xa(g),[fe,T]=b.useState(!1),[j,K]=b.useState(!1),[J,q]=b.useState(!1),[V,ce]=b.useState(!1),[me,Ce]=b.useState(!1),[ge,Ge]=b.useState(!1),[te,he]=b.useState(!1),[de,Q]=b.useState(0);b.useEffect(()=>{if(re&&(se.length>0||A.length>0)){console.log("[-]    -   ");return}N(g),ee()},[t.id]);const ee=async(Be=!1)=>{var lt,pt,mt,Ye,at,Fe;try{let tt;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Be)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),tt=i;else{Be?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const ye=localStorage.getItem("userInfo");if(!ye){console.error("  .");return}const Ue=JSON.parse(ye),ue=t.WRK_CD||"",Oe=t.WRK_DTL_TCD||"",Ze={WRKR_ID:t.WRKR_ID||Ue.userId||Ue.workerId||"",SO_ID:t.SO_ID||Ue.soId,WRK_ID:t.id,CUST_ID:(lt=t.customer)==null?void 0:lt.id,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:ue,WRK_DTL_TCD:Oe,WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-]    (API )"),console.log("[-] :",Ze),tt=await Eo(Ze),Be&&a&&(console.log("[-]   preloadedData "),a(tt))}console.log("[-] :"),console.log("  -  (output2):",((pt=tt.contractEquipments)==null?void 0:pt.length)||0,""),console.log("  -  (output3):",((mt=tt.technicianEquipments)==null?void 0:mt.length)||0,""),console.log("  -  (output4):",((Ye=tt.customerEquipments)==null?void 0:Ye.length)||0,"");const Mt={kpiProdGrpCd:tt.kpiProdGrpCd,prodChgGb:tt.prodChgGb,chgKpiProdGrpCd:tt.chgKpiProdGrpCd,prodGrp:tt.prodGrp};y(Mt),window.__equipmentFilterData=Mt;const dt=(tt.contractEquipments||[]).map(ye=>({id:ye.SVC_CMPS_ID||ye.PROD_CMPS_ID,type:ye.ITEM_MID_NM||ye.EQT_NM,model:ye.EQT_CL_NM,serialNumber:"N/A",itemMidCd:ye.ITEM_MID_CD,eqtClCd:ye.EQT_CL_CD||ye.EQT_CL,SVC_CMPS_ID:ye.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ye.BASIC_PROD_CMPS_ID,PROD_CD:ye.PROD_CD,SVC_CD:ye.SVC_CD})),Je=(tt.technicianEquipments||[]).map(ye=>({id:ye.EQT_NO,type:ye.ITEM_MID_NM,model:ye.EQT_CL_NM,serialNumber:ye.EQT_SERNO,itemMidCd:ye.ITEM_MID_CD,eqtClCd:ye.EQT_CL_CD||ye.EQT_CL,macAddress:ye.MAC_ADDRESS,SVC_CMPS_ID:ye.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ye.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:ye.EQT_PROD_CMPS_ID,PROD_CD:ye.PROD_CD,SVC_CD:ye.SVC_CD,EQT_SALE_AMT:ye.EQT_SALE_AMT,MST_SO_ID:ye.MST_SO_ID,SO_ID:ye.SO_ID,OLD_LENT_YN:ye.OLD_LENT_YN,LENT:ye.LENT,ITLLMT_PRD:ye.ITLLMT_PRD,EQT_USE_STAT_CD:ye.EQT_USE_STAT_CD})),De=new Set,$e=(tt.customerEquipments||[]).map(ye=>{const Ue=dt.find(ue=>ue.itemMidCd===ye.ITEM_MID_CD&&!De.has(ue.id));return Ue&&De.add(Ue.id),{contractEquipment:Ue||{id:"unknown",type:ye.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:ye.ITEM_MID_CD},actualEquipment:{id:ye.EQT_NO,type:ye.ITEM_MID_NM,model:ye.EQT_CL_NM,serialNumber:ye.EQT_SERNO,itemMidCd:ye.ITEM_MID_CD,macAddress:ye.MAC_ADDRESS||ye.MAC_ADDR,EQT_KND:ye.EQT_KND,EQT_CL_CD:ye.EQT_CL_CD},macAddress:ye.MAC_ADDRESS||ye.MAC_ADDR,installLocation:ye.INSTL_LCTN}});console.log("[-]  :"),console.log("  -  :",dt.length,""),console.log("  -  :",Je.length,""),console.log("  -  :",$e.length,""),v(g,{contractEquipments:dt,technicianEquipments:Je,filteringData:Mt}),Q($e.length);const Ne=Ui.getState().getWorkState(g);$e.length>0&&!((at=Ne==null?void 0:Ne.installedEquipments)!=null&&at.length)?(console.log("[-] API     :",$e.length,""),k(g,$e)):(Fe=Ne==null?void 0:Ne.installedEquipments)!=null&&Fe.length,requestAnimationFrame(()=>P(g,!0))}catch(tt){console.error("[-]    :",tt),v(g,{contractEquipments:[],technicianEquipments:[]}),k(g,[]),requestAnimationFrame(()=>P(g,!0))}},Z=b.useCallback(Be=>{const lt=se.find(pt=>pt.contractEquipment.id===Be.id);(X==null?void 0:X.id)===Be.id?(G(g,null),U(g,null)):(G(g,Be),lt?U(g,lt.actualEquipment):U(g,null))},[g,se,X]),le=b.useCallback(Be=>{(z==null?void 0:z.id)===Be.id?U(g,null):U(g,Be)},[g,z]),xe=b.useCallback(()=>{if(!X||!z)return;if(X.itemMidCd!==z.itemMidCd||X.model!==z.model){r==null||r("      .","warning");return}console.log("[-]  :",{:X.type,:`${z.type} (S/N: ${z.serialNumber})`});const Be={contractEquipment:X,actualEquipment:z,macAddress:z.macAddress||"",installLocation:""};w(g,Be),I(g,"idle"),U(g,null)},[g,X,z]),be=async(Be,lt)=>{try{const pt=localStorage.getItem("userInfo");if(!pt){r==null||r("  .","error");return}const mt=JSON.parse(pt),Ye=Be.map((Fe,tt)=>{let ct=Fe.ITEM_MID_CD||Fe.ITM_MID_CD||Fe.EQT||Fe.EQT_CD||"",Mt=Fe.EQT_CL||Fe.EQT_CL_CD||"",dt=Fe.SVC_CMPS_ID||Fe.PROD_CMPS_ID||Fe.SVC_CMPS_SEQ||Fe.EQUIP_SEQ||"";return ct=String(ct).trim().padStart(2,"0"),Mt=String(Mt).trim().padStart(6,"0"),dt=String(dt||tt+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||mt.crrId||"",WRKR_ID:t.WRKR_ID||mt.userId||mt.workerId||"",REG_UID:mt.userId||mt.workerId||"A20130708",ITEM_MID_CD:ct,EQT_CL:Mt,SVC_CMPS_ID:dt,EQT:ct,EQT_CD:ct,LENT:String(Fe.LENT||"10"),EQT_USE_STAT_CD:String(Fe.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(Fe.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(Fe.EQT_SALE_AMT||0),PROD_GRP:String(Fe.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(Fe.PROD_CD||t.PROD_CD||""),SVC_CD:String(Fe.SVC_CD||""),PROM_CNT:lt||"",SEL:"1",EQT_BASIC_YN:String(Fe.EQT_BASIC_YN||"N"),PROD_TYP:Fe.PROD_TYP,EQUIP_SEQ:Fe.EQUIP_SEQ}}),at=await d0({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:lt||"",equipments:Ye});if(at.MSGCODE==="SUCCESS"||at.MSGCODE==="0"||at.code==="SUCCESS")r==null||r("  .","success"),B(g),U(g,null),await ee(!0);else throw new Error(at.MESSAGE||at.message||"   .")}catch(pt){throw console.error("[-]    :",pt),r==null||r(pt.message||"     .","error",!0),pt}},ne=Be=>se.find(lt=>{var mt,Ye;return(((mt=lt.actualEquipment)==null?void 0:mt.itemMidCd)||((Ye=lt.actualEquipment)==null?void 0:Ye.ITEM_MID_CD)||"")===Be}),ie=()=>{var tt,ct,Mt,dt,Je,De,$e,Ne,ye,Ue,ue,Oe,Ze,Le;const Be=t.PROD_GRP||"";if(t.VOIP_PROD_CD||""){const vt=ne("08");return vt?{eqtNo:((tt=vt.actualEquipment)==null?void 0:tt.id)||((ct=vt.actualEquipment)==null?void 0:ct.EQT_NO)||"",itemMidCd:"08"}:null}const pt=ne("05");if(pt)return{eqtNo:((Mt=pt.actualEquipment)==null?void 0:Mt.id)||((dt=pt.actualEquipment)==null?void 0:dt.EQT_NO)||"",itemMidCd:"05"};const mt=ne("01");if(mt)return{eqtNo:((Je=mt.actualEquipment)==null?void 0:Je.id)||((De=mt.actualEquipment)==null?void 0:De.EQT_NO)||"",itemMidCd:"01"};const Ye=ne("03");if(Ye)return{eqtNo:(($e=Ye.actualEquipment)==null?void 0:$e.id)||((Ne=Ye.actualEquipment)==null?void 0:Ne.EQT_NO)||"",itemMidCd:"03"};if(Be==="I"){const vt=ne("02");if(vt)return{eqtNo:((ye=vt.actualEquipment)==null?void 0:ye.id)||((Ue=vt.actualEquipment)==null?void 0:Ue.EQT_NO)||"",itemMidCd:"02"}}const at=ne("08");if(at)return{eqtNo:((ue=at.actualEquipment)==null?void 0:ue.id)||((Oe=at.actualEquipment)==null?void 0:Oe.EQT_NO)||"",itemMidCd:"08"};const Fe=ne("04");return Fe?{eqtNo:((Ze=Fe.actualEquipment)==null?void 0:Ze.id)||((Le=Fe.actualEquipment)==null?void 0:Le.EQT_NO)||"",itemMidCd:"04"}:null},pe=()=>(t.PROD_GRP||"")==="V"?"SMR60":"SMR03",ze=async()=>{var ct,Mt;const Be=dt=>{var Ne,ye,Ue;const Je=((Ne=dt.actualEquipment)==null?void 0:Ne.eqtClCd)||dt.eqtClCd||"",De=((ye=dt.actualEquipment)==null?void 0:ye.itemMidCd)||dt.itemMidCd||"",$e=(((Ue=dt.actualEquipment)==null?void 0:Ue.type)||dt.type||"").toLowerCase();return!!(Je.startsWith("0904")||De==="05"||$e.includes("stb")||$e.includes("")||$e.includes(""))},lt=dt=>{var Ne,ye,Ue;const Je=((Ne=dt.actualEquipment)==null?void 0:Ne.eqtClCd)||dt.eqtClCd||"",De=((ye=dt.actualEquipment)==null?void 0:ye.itemMidCd)||dt.itemMidCd||"",$e=(((Ue=dt.actualEquipment)==null?void 0:Ue.type)||dt.type||"").toLowerCase();return!!(Je.startsWith("0902")||De==="04"||$e.includes("modem")||$e.includes("")||$e.includes(""))};if(se.length===0){r==null||r("    . STB    .","warning"),I(g,"fail");return}const pt=t.PROD_GRP||"",mt=t.VOIP_PROD_CD||"";if(pt==="V"&&!mt&&!t.CTRT_JOIN_ID){r==null||r("VoIP   .","warning"),I(g,"fail");return}const Ye=t.ISP_PROD_CD||"";if(pt==="I"&&Ye&&!t.CTRT_JOIN_ID){r==null||r("  ISP .   .","warning"),I(g,"fail");return}const at=ie(),Fe=se.some(Be),tt=se.some(lt);if(!Fe&&!tt&&!at){r==null||r("  STB    .","warning"),I(g,"fail");return}try{Ce(!0),ce(!0),E(g," ...");const dt=localStorage.getItem("userInfo");if(!dt){E(g,"    ."),I(g,"fail"),Ce(!1);return}const Je=JSON.parse(dt),De=Je.userId||Je.id||"UNKNOWN",$e=(at==null?void 0:at.eqtNo)||"",Ne=se.find(Be),ye=se.find(lt),Ue=((ct=Ne==null?void 0:Ne.actualEquipment)==null?void 0:ct.id)||"",ue=((Mt=ye==null?void 0:ye.actualEquipment)==null?void 0:Mt.id)||"",Oe=pe(),Ze=await Xu(De,t.CTRT_ID||"",t.id,Oe,Ue||$e,ue||"");Ze.O_IFSVC_RESULT&&Ze.O_IFSVC_RESULT.startsWith("TRUE")?(E(g,` 

: ${Ze.O_IFSVC_RESULT||""}`),I(g,"success")):(E(g,` 

${Ze.MESSAGE||"   "}`),I(g,"fail"))}catch(dt){E(g,` 

${dt.message||"   "}`),I(g,"fail")}finally{Ce(!1)}},xt=b.useMemo(()=>{const Be=new Set(se.map(pt=>pt.actualEquipment.id));let lt=Y.filter(pt=>!Be.has(pt.id));return X&&(lt=lt.filter(pt=>pt.itemMidCd===X.itemMidCd&&pt.model===X.model)),lt},[Y,se,X]),st=()=>{Ge(!0),setTimeout(()=>{Ge(!1),r==null||r("    .","info")},500)},St=async()=>{if(!(te||C)){he(!0);try{await ee(!0),r==null||r("  .","success")}catch(Be){console.error("[-]  :",Be),r==null||r("   .","error")}finally{he(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4 relative",children:[te&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-20 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsx("button",{onClick:St,disabled:te||C,className:`p-1.5 rounded-lg transition-all ${te||C?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:s.jsx(ki,{className:`w-4 h-4 ${te?"animate-spin":""}`})})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[A.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{C||T(!0)},disabled:C,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":_?"border-yellow-300 bg-yellow-100 text-yellow-700":p?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>h==null?void 0:h(),disabled:_||C,children:[_?s.jsx(pn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C||t.PROD_GRP==="V"?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed opacity-50":$==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":$==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>{if(t.PROD_GRP==="V"){r==null||r("VOIP    .","info");return}!C&&!me&&ze()},children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-orange-200 bg-orange-50 text-orange-600 hover:bg-orange-100 hover:border-orange-300 transition-all active:scale-95 min-h-[56px] opacity-50 cursor-not-allowed",disabled:!0,title:"     ",children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300 transition-all active:scale-95 min-h-[56px]",onClick:()=>q(!0),children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${t.PROD_GRP==="V"?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed opacity-50":"border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300"}`,onClick:()=>{if(t.PROD_GRP==="V"){r==null||r("VOIP    .","info");return}K(!0)},children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:""})]})]})]}),re?A.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:A.map(Be=>{const lt=se.find(mt=>mt.contractEquipment.id===Be.id),pt=(X==null?void 0:X.id)===Be.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${C?lt?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":pt?"border-blue-500 bg-blue-50 cursor-pointer":lt?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!C&&Z(Be),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Be.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Be.model})]}),lt&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",lt.actualEquipment.model]})}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",lt.actualEquipment.serialNumber]}),lt.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",lt.macAddress]})]})]})},Be.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!C&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!X||!se.some(Be=>Be.contractEquipment.id===(X==null?void 0:X.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-red-500 bg-red-50 text-red-600 hover:bg-red-100 cursor-pointer active:scale-95"}`,onClick:()=>{X&&(M(g,X.id),I(g,"idle"),U(g,null),r==null||r("  .","info"))},disabled:!X||!se.some(Be=>Be.contractEquipment.id===(X==null?void 0:X.id)),title:"   ",children:s.jsx(i0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!X||!z||se.some(Be=>Be.actualEquipment.id===z.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:xe,disabled:!X||!z||se.some(Be=>Be.actualEquipment.id===z.id),title:"   ",children:s.jsx(a0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!C&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 border-b border-gray-100 gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",X&&s.jsxs("span",{className:"text-blue-600",children:[" (",X.type,")"]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[X?xt.length:0,""]})]}),X?xt.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:xt.map(Be=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(z==null?void 0:z.id)===Be.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>le(Be),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Be.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Be.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Be.serialNumber]}),Be.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Be.macAddress]})]})]}),(z==null?void 0:z.id)===Be.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Be.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})]}),(()=>{var mt;const Be=t.WRK_CD_NM||_0(t.WRK_CD)||t.workType||"-",lt=t.PROD_NM||t.productName||((mt=t.customer)==null?void 0:mt.productName)||"-",pt=t.CTRT_STAT_NM||$u(t.CTRT_STAT)||"-";return s.jsx(m0,{isOpen:fe,onClose:()=>T(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:pt,prodGrp:t.PROD_GRP||"",prodNm:lt,wrkCdNm:Be,onSave:be,showToast:r,installedEquipmentCount:se.length})})(),!C&&s.jsx("button",{onClick:st,disabled:ge,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${ge?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(o0,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(el,{isOpen:j,onClose:()=>K(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((ot=t.customer)==null?void 0:ot.id)}),s.jsx(g0,{isOpen:J,onClose:()=>q(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),V&&Ju.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!me&&ce(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Be=>Be.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:me?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(pn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):$==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(l0,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:F})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(bo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:F})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${$==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>ce(!1),disabled:me,children:me?" ...":""})})]})}),document.body)]})},FY=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1})=>{const c=t.id,u=o||t.WRK_STAT_CD==="4"||t.status==="",{initWorkState:h,setApiData:m,setDataLoaded:_,toggleRemovalStatus:p,setFullRemovalStatus:g}=Ui(),{removeEquipments:C,removalStatus:y,isReady:N}=xa(c),[v,P]=b.useState(!1);b.useEffect(()=>{if(N&&C.length>0){console.log("[-]    -   ");return}h(c),w()},[t.id]);const w=async(B=!1)=>{var G,U,I;try{console.log("[-]    - isWorkCompleted:",u,"WRK_STAT_CD:",t.WRK_STAT_CD);let E;if(i&&!B)console.log("[-] Pre-loaded   - API  "),E=i;else{const Y=localStorage.getItem("userInfo");if(!Y){console.error("  .");return}const se=JSON.parse(Y),X={WRKR_ID:t.WRKR_ID||se.userId||se.workerId||"",SO_ID:t.SO_ID||se.soId,WRK_ID:t.id,CUST_ID:((G=t.customer)==null?void 0:G.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"02",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-]    (API )"),console.log("[-] :",X),E=await Eo(X)}console.log("[-] :"),console.log("  -  (output5):",((U=E.removedEquipments)==null?void 0:U.length)||0,""),((I=E.removedEquipments)==null?void 0:I.length)>0&&console.log("[-]  API [0]:",E.removedEquipments[0]);const A=(E.removedEquipments||[]).map(Y=>({...Y,id:Y.EQT_NO,type:Y.ITEM_MID_NM,model:Y.EQT_CL_NM,serialNumber:Y.EQT_SERNO,itemMidCd:Y.ITEM_MID_CD,eqtClCd:Y.EQT_CL_CD||Y.EQT_CL,macAddress:Y.MAC_ADDRESS||Y.MAC_ADDR,installLocation:Y.INSTL_LCTN}));console.log("[-]  :"),console.log("  -  :",A.length,""),m(c,{removeEquipments:A}),requestAnimationFrame(()=>_(c,!0))}catch(E){console.error("[-]    :",E),r==null||r("   .","error",!0),m(c,{removeEquipments:[]}),requestAnimationFrame(()=>_(c,!0))}},M=(B,G)=>{p(c,B,G)},k=async()=>{if(!(v||u)){P(!0);try{await w(!0),r==null||r("  .","success")}catch(B){console.error("[-]  :",B),r==null||r("   .","error")}finally{P(!1)}}};return s.jsx("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[v&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Co,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(ki,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),""]}),s.jsxs("button",{onClick:k,disabled:v||u,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${v||u?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(Co,{className:`w-3.5 h-3.5 ${v?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2 sm:px-2.5 py-0.5 sm:py-1 bg-orange-100 text-orange-700 text-[0.625rem] sm:text-xs font-semibold rounded-full",children:[C.length,""]})]}),C.length===0?s.jsx("div",{className:"py-12 text-center",children:s.jsx("div",{className:"text-sm text-gray-500",children:"   "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:C.map(B=>{const G=B.id,U=y[G]||{},I=dS(B);return s.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-gray-200 bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:B.model||B.type}),s.jsxs("div",{className:"text-xs text-gray-600",children:["S/N: ",B.serialNumber]}),B.macAddress&&s.jsxs("div",{className:"text-xs text-gray-500",children:["MAC: ",B.macAddress]})]}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:B.EQT_LOC_TP_NM||""})]}),!u&&!o&&s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${I?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:U.EQT_LOSS_YN==="1",onChange:()=>!I&&M(G,"EQT_LOSS_YN"),disabled:I,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${I?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:U.PART_LOSS_BRK_YN==="1",onChange:()=>!I&&M(G,"PART_LOSS_BRK_YN"),disabled:I,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${I?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:U.EQT_BRK_YN==="1",onChange:()=>!I&&M(G,"EQT_BRK_YN"),disabled:I,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${I?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:U.EQT_CABL_LOSS_YN==="1",onChange:()=>!I&&M(G,"EQT_CABL_LOSS_YN"),disabled:I,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg active:bg-gray-100 whitespace-nowrap ${I?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:U.EQT_CRDL_LOSS_YN==="1",onChange:()=>!I&&M(G,"EQT_CRDL_LOSS_YN"),disabled:I,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]})]}),I&&!u&&s.jsx("div",{className:"mt-2 text-xs text-orange-600 bg-orange-50 p-2 rounded",children:"   "})]},B.id)})})]})})},KY=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u="",onLdapConnect:h,isLdapDone:m=!1,ldapLoading:_=!1,ldapBlocked:p=!1})=>{var $e;const g=t.id,C=o||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:y}=ta(),{initWorkState:N,setApiData:v,setDataLoaded:P,addInstalledEquipment:w,removeInstalledEquipment:M,setInstalledEquipments:k,clearInstalledEquipments:B,setSelectedContract:G,setSelectedStock:U,clearSelection:I,toggleRemovalStatus:E,addMarkedForRemoval:A,removeMarkedForRemoval:Y,setMarkedForRemoval:se,setPendingLossStatusList:X,setSignalStatus:z,setSignalResult:$,setFullRemovalStatus:F}=Ui(),{contractEquipments:L,technicianEquipments:re,removeEquipments:fe,installedEquipments:T,removalStatus:j,markedForRemoval:K,pendingLossStatusList:J,selectedContract:q,selectedStock:V,signalStatus:ce,signalResult:me,filteringData:Ce,isReady:ge}=xa(g),[Ge,te]=b.useState(0),[he,de]=b.useState("removal"),[Q,ee]=b.useState(!1),[Z,le]=b.useState(!1),[xe,be]=b.useState(!1),[ne,ie]=b.useState(!1),[pe,ze]=b.useState(!1),[xt,st]=b.useState(!1),[St,ot]=b.useState(!1);b.useEffect(()=>{if(ge&&(T.length>0||K.length>0||L.length>0)){console.log("[-AS]    -   ");return}N(g),Be()},[t.id]);const Be=async(Ne=!1)=>{var ye,Ue,ue,Oe,Ze;try{let Le;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Ne)console.log("[-AS] Pre-loaded   -",i.contractEquipments.length," "),Le=i;else{Ne?console.log("[-AS]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-AS] preloadedApiData   - API ");const ke=localStorage.getItem("userInfo");if(!ke){console.error("  .");return}const ss=JSON.parse(ke),ls=P_(t.WRK_CD),ds={WRKR_ID:t.WRKR_ID||ss.userId||ss.workerId||"",SO_ID:t.SO_ID||ss.soId,WRK_ID:t.id,CUST_ID:((ye=t.customer)==null?void 0:ye.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:ls,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-AS] API :",ds),Le=await Eo(ds),Ne&&a&&(console.log("[-AS]   preloadedData "),a(Le))}console.log("[-AS] API :",{contractEquipments:((Ue=Le.contractEquipments)==null?void 0:Ue.length)||0,technicianEquipments:((ue=Le.technicianEquipments)==null?void 0:ue.length)||0,customerEquipments:((Oe=Le.customerEquipments)==null?void 0:Oe.length)||0,removedEquipments:((Ze=Le.removedEquipments)==null?void 0:Ze.length)||0});const je={kpiProdGrpCd:Le.kpiProdGrpCd,prodChgGb:Le.prodChgGb,chgKpiProdGrpCd:Le.chgKpiProdGrpCd,prodGrp:Le.prodGrp};y(je),window.__equipmentFilterData=je;const ut=(Le.contractEquipments||[]).map(ke=>({id:ke.SVC_CMPS_ID||ke.PROD_CMPS_ID,type:ke.ITEM_MID_NM||ke.EQT_NM,model:ke.EQT_CL_NM,serialNumber:"N/A",itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,PROD_CD:ke.PROD_CD,SVC_CD:ke.SVC_CD})),gt=(Le.technicianEquipments||[]).map(ke=>({id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:ke.EQT_PROD_CMPS_ID,PROD_CD:ke.PROD_CD,SVC_CD:ke.SVC_CD,EQT_SALE_AMT:ke.EQT_SALE_AMT,MST_SO_ID:ke.MST_SO_ID,SO_ID:ke.SO_ID,OLD_LENT_YN:ke.OLD_LENT_YN,LENT:ke.LENT,LENT_YN:ke.LENT_YN,ITLLMT_PRD:ke.ITLLMT_PRD,EQT_USE_STAT_CD:ke.EQT_USE_STAT_CD})),jt=new Set,Ve=(Le.customerEquipments||[]).map(ke=>{const ss=ut.find(ls=>ls.itemMidCd===ke.ITEM_MID_CD&&!jt.has(ls.id));return ss&&jt.add(ss.id),{contractEquipment:ss||{id:"unknown",type:ke.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:ke.ITEM_MID_CD},actualEquipment:{id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,LENT_YN:ke.LENT_YN,VOIP_CUSTOWN_EQT:ke.VOIP_CUSTOWN_EQT},macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,installLocation:ke.INSTL_LCTN}}),Vt=(Le.removedEquipments||[]).map(ke=>({id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,installLocation:ke.INSTL_LCTN,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,MST_SO_ID:ke.MST_SO_ID,SO_ID:ke.SO_ID,LENT_YN:ke.LENT_YN,VOIP_CUSTOWN_EQT:ke.VOIP_CUSTOWN_EQT}));if(v(g,{contractEquipments:ut,technicianEquipments:gt,removeEquipments:Vt}),te(Ve.length),Ve.length>0){const ke=new Set(K.map(Ss=>Ss.id)),ss=Ve.filter(Ss=>!ke.has(Ss.actualEquipment.id)),ls=[],ds=[];if(ss.forEach(Ss=>{const Ae=ut.find(ft=>ft.itemMidCd===Ss.actualEquipment.itemMidCd);Ae&&Ae.eqtClCd===Ss.actualEquipment.eqtClCd?ls.push(Ss):ds.push(Ss.actualEquipment)}),ds.length>0){const Ss=[...K,...ds.filter(Ae=>!K.some(ft=>ft.id===Ae.id))];se(g,Ss),console.log("[-AS]     :",ds.length,"")}console.log("[-AS] API    :",Ve.length,"   :",ls.length,",  :",ds.length,""),k(g,ls);const vs=localStorage.getItem(gR(t.id));if(vs)try{const Ss=JSON.parse(vs);Ss.lastSignalStatus&&z(g,Ss.lastSignalStatus),Ss.removalStatus&&Object.keys(Ss.removalStatus).length>0&&F(g,Ss.removalStatus),Ss.pendingLossStatusList&&Ss.pendingLossStatusList.length>0&&X(g,Ss.pendingLossStatusList)}catch{}}else{const ke=localStorage.getItem(gR(t.id));if(ke)try{const ss=JSON.parse(ke);ss.installedEquipments&&ss.installedEquipments.length>0&&(console.log("[-AS] localStorage  :",ss.installedEquipments.length,""),k(g,ss.installedEquipments)),ss.markedForRemoval&&ss.markedForRemoval.length>0&&se(g,ss.markedForRemoval),ss.removalStatus&&Object.keys(ss.removalStatus).length>0&&F(g,ss.removalStatus),ss.pendingLossStatusList&&ss.pendingLossStatusList.length>0&&X(g,ss.pendingLossStatusList),ss.lastSignalStatus&&z(g,ss.lastSignalStatus)}catch(ss){console.warn("[-AS] localStorage   :",ss)}}requestAnimationFrame(()=>P(g,!0))}catch(Le){console.error("[-AS]    :",Le),requestAnimationFrame(()=>P(g,!0))}},lt=Ne=>{const ye=T.find(Ue=>Ue.contractEquipment.id===Ne.id&&Ue.actualEquipment.eqtClCd===Ne.eqtClCd);(q==null?void 0:q.id)===Ne.id?(G(g,null),U(g,null)):(G(g,Ne),ye?U(g,ye.actualEquipment):U(g,null))},pt=Ne=>{(V==null?void 0:V.id)===Ne.id?U(g,null):U(g,Ne)},mt=()=>{if(!q||!V)return;if(q.itemMidCd!==V.itemMidCd||q.model!==V.model){r==null||r("      .","warning");return}const Ne=t.CTRT_STAT;if(Ne&&Ne!=="20"){const Ue=$u(Ne);r==null||r(` ${Ue}     .`,"error");return}const ye=T.findIndex(Ue=>Ue.contractEquipment.id===q.id);if(ye>=0){const Ue=[...T];Ue[ye]={contractEquipment:q,actualEquipment:V,macAddress:V.macAddress||"",installLocation:""},k(g,Ue)}else{const Ue={contractEquipment:q,actualEquipment:V,macAddress:V.macAddress||"",installLocation:""};k(g,[...T,Ue])}z(g,"idle"),U(g,null)},Ye=()=>{if(!V)return;const Ne=t.CTRT_STAT;if(Ne&&Ne!=="20"){const Oe=$u(Ne);r==null||r(` ${Oe}     .`,"error");return}const ye=T.findIndex(Oe=>Oe.actualEquipment.id===V.id);if(ye>=0){const Oe=[...T],Ze=Oe.splice(ye,1)[0];k(g,Oe);const Le=Ze.actualEquipment;K.some(je=>je.id===Le.id)||se(g,[...K,Le]),z(g,"idle"),U(g,null);return}if(K.some(Oe=>Oe.id===V.id))return;fe.some(Oe=>Oe.id===V.id)&&se(g,[...K,V])},at=async(Ne,ye)=>{try{const Ue=localStorage.getItem("userInfo");if(!Ue){r==null||r("  .","error");return}const ue=JSON.parse(Ue),Oe=Ne.map((Le,vt)=>{let je=Le.ITEM_MID_CD||Le.ITM_MID_CD||Le.EQT||Le.EQT_CD||"",ut=Le.EQT_CL||Le.EQT_CL_CD||"",gt=Le.SVC_CMPS_ID||Le.PROD_CMPS_ID||Le.SVC_CMPS_SEQ||Le.EQUIP_SEQ||"";return je=String(je).trim().padStart(2,"0"),ut=String(ut).trim().padStart(6,"0"),gt=String(gt||vt+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||ue.crrId||"",WRKR_ID:t.WRKR_ID||ue.userId||ue.workerId||"",REG_UID:ue.userId||ue.workerId||"A20130708",ITEM_MID_CD:je,EQT_CL:ut,SVC_CMPS_ID:gt,EQT:je,EQT_CD:je,LENT:String(Le.LENT||"10"),EQT_USE_STAT_CD:String(Le.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(Le.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(Le.EQT_SALE_AMT||0),PROD_GRP:String(Le.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(Le.PROD_CD||t.PROD_CD||""),SVC_CD:String(Le.SVC_CD||""),PROM_CNT:ye||"",SEL:"1",EQT_BASIC_YN:String(Le.EQT_BASIC_YN||"N"),PROD_TYP:Le.PROD_TYP,EQUIP_SEQ:Le.EQUIP_SEQ}}),Ze=await d0({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:ye||"",equipments:Oe});if(Ze.MSGCODE==="SUCCESS"||Ze.MSGCODE==="0"||Ze.code==="SUCCESS"){r==null||r("  .","success");const Le=T.filter(vt=>!re.some(je=>je.id===vt.actualEquipment.id));if(Le.length>0){const vt=Le.map(ut=>ut.actualEquipment),je=[...K,...vt.filter(ut=>!K.some(gt=>gt.id===ut.id))];se(g,je),console.log("[]    :",vt.length,"")}B(g),U(g,null),await Be(!0)}else throw new Error(Ze.MESSAGE||Ze.message||"   .")}catch(Ue){throw console.error("[] :",Ue),r==null||r(Ue.message||"     .","error",!0),Ue}},Fe=async()=>{var Ne,ye,Ue,ue;if(T.length===0){r==null||r("    .","warning"),z(g,"fail");return}try{ze(!0),ie(!0),$(g," ...");const Oe=localStorage.getItem("userInfo");if(!Oe){$(g,"    ."),z(g,"fail"),ze(!1);return}const Ze=JSON.parse(Oe),Le=Ze.userId||Ze.id||"UNKNOWN",vt=ke=>{var vs,Ss,Ae,ft,rt;const ss=((vs=ke.actualEquipment)==null?void 0:vs.eqtClCd)||ke.eqtClCd||((Ss=ke.actualEquipment)==null?void 0:Ss.EQT_CL_CD)||"",ls=((Ae=ke.actualEquipment)==null?void 0:Ae.itemMidCd)||ke.itemMidCd||((ft=ke.actualEquipment)==null?void 0:ft.ITEM_MID_CD)||"",ds=(((rt=ke.actualEquipment)==null?void 0:rt.type)||ke.type||"").toLowerCase();return!!(ss.startsWith("0904")||ls==="02"||ds.includes("stb")||ds.includes(""))},je=ke=>{var vs,Ss,Ae,ft,rt;const ss=((vs=ke.actualEquipment)==null?void 0:vs.eqtClCd)||ke.eqtClCd||((Ss=ke.actualEquipment)==null?void 0:Ss.EQT_CL_CD)||"",ls=((Ae=ke.actualEquipment)==null?void 0:Ae.itemMidCd)||ke.itemMidCd||((ft=ke.actualEquipment)==null?void 0:ft.ITEM_MID_CD)||"",ds=(((rt=ke.actualEquipment)==null?void 0:rt.type)||ke.type||"").toLowerCase();return!!(ss.startsWith("0902")||ls==="03"||ds.includes("modem")||ds.includes(""))},ut=T.find(vt),gt=T.find(je),jt=((Ne=ut==null?void 0:ut.actualEquipment)==null?void 0:Ne.id)||"",Ve=((ye=gt==null?void 0:gt.actualEquipment)==null?void 0:ye.id)||"",Vt=await Xu(Le,t.CTRT_ID||"",t.id,"SMR03",jt||((ue=(Ue=T[0])==null?void 0:Ue.actualEquipment)==null?void 0:ue.id)||"",Ve||"");Vt.O_IFSVC_RESULT&&Vt.O_IFSVC_RESULT.startsWith("TRUE")?($(g,` 

: ${Vt.O_IFSVC_RESULT||""}`),z(g,"success")):($(g,` 

${Vt.MESSAGE||"   "}`),z(g,"fail"))}catch(Oe){$(g,` 

${Oe.message||"   "}`),z(g,"fail")}finally{ze(!1)}},tt=(Ne,ye,Ue)=>{const ue={...j,[Ne]:{...j[Ne]||{},[ye]:Ue==="1"?"0":"1"}};F(g,ue)},ct=()=>{const Ne=new Set(T.map(Ue=>Ue.actualEquipment.id));let ye=re.filter(Ue=>!Ne.has(Ue.id));return q&&(ye=ye.filter(Ue=>Ue.itemMidCd===q.itemMidCd&&Ue.model===q.model)),ye},Mt=()=>{const Ne=new Set(T.map(Ue=>Ue.actualEquipment.id));let ye=K.filter(Ue=>!Ne.has(Ue.id));return q&&(ye=ye.filter(Ue=>Ue.itemMidCd===q.itemMidCd&&Ue.model===q.model)),ye},dt=()=>{st(!0),setTimeout(()=>{st(!1),r==null||r("    .","info")},500)},Je=async()=>{if(!(St||C)){ot(!0);try{await Be(!0),r==null||r("  .","success")}catch(Ne){console.error("[-AS]  :",Ne),r==null||r("   .","error")}finally{ot(!1)}}},De=ct();return Mt(),s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[St&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsxs("button",{onClick:Je,disabled:St||C,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${St||C?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(ki,{className:`w-3.5 h-3.5 ${St?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[L.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{if(C)return;const Ne=t.CTRT_STAT;if(Ne&&Ne!=="20"){r==null||r("A/S   (20)   .","warning");return}ee(!0)},disabled:C,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":_?"border-yellow-300 bg-yellow-100 text-yellow-700":p?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>h==null?void 0:h(),disabled:_||C,children:[_?s.jsx(pn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":ce==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":ce==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!C&&!pe&&Fe(),disabled:C||pe,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300 transition-all active:scale-95 min-h-[56px]",onClick:()=>c?be(!0):le(!0),children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:c?"LDAP":""})]})]})]}),ge?L.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:L.map(Ne=>{const ye=T.find(ue=>ue.contractEquipment.id===Ne.id&&ue.actualEquipment.eqtClCd===Ne.eqtClCd),Ue=(q==null?void 0:q.id)===Ne.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${C?ye?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":Ue?"border-blue-500 bg-blue-50 cursor-pointer":ye?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!C&&lt(Ne),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Ne.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Ne.model})]}),ye&&(()=>{const ue=re.some(Oe=>Oe.id===ye.actualEquipment.id);return s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",ye.actualEquipment.model]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${ue?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:ue?"":""})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",ye.actualEquipment.serialNumber]}),ye.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",ye.macAddress]})]})})()]})},Ne.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!C&&s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!V||!T.some(Ne=>Ne.actualEquipment.id===(V==null?void 0:V.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!V)return;if(re.some(Oe=>Oe.id===V.id)){if(he!=="stock"){r==null||r("  .   .","warning");return}const Oe=T.findIndex(Ze=>Ze.actualEquipment.id===V.id);if(Oe>=0){const Ze=[...T];Ze.splice(Oe,1),k(g,Ze),U(g,null),console.log("=== [-]     ==="),console.log(":",Ze.map(Le=>({type:Le.actualEquipment.type,model:Le.actualEquipment.model,serialNumber:Le.actualEquipment.serialNumber,id:Le.actualEquipment.id}))),console.log(":",K.map(Le=>({type:Le.type,model:Le.model,serialNumber:Le.serialNumber,id:Le.id,removalStatus:j[Le.id]||{}}))),r==null||r("  .","success")}return}const ye=T.findIndex(Oe=>Oe.actualEquipment.id===V.id);let Ue=[...T],ue=[...K];if(ye>=0){const Ze=Ue.splice(ye,1)[0].actualEquipment;ue.some(vt=>vt.id===Ze.id)||(ue=[...ue,Ze])}console.log("=== [-]     ==="),console.log(":",Ue.map(Oe=>({type:Oe.actualEquipment.type,model:Oe.actualEquipment.model,serialNumber:Oe.actualEquipment.serialNumber,id:Oe.actualEquipment.id}))),console.log(":",ue.map(Oe=>({type:Oe.type,model:Oe.model,serialNumber:Oe.serialNumber,id:Oe.id,removalStatus:j[Oe.id]||{}}))),Ye(),de("removal")},disabled:!V||!T.some(Ne=>Ne.actualEquipment.id===(V==null?void 0:V.id)),children:s.jsx(i0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!V||T.some(Ne=>Ne.actualEquipment.id===(V==null?void 0:V.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!V)return;if(K.some(Le=>Le.id===V.id)){if(q&&(q.itemMidCd!==V.itemMidCd||q.eqtClCd!==V.eqtClCd)){r==null||r("      .","warning");return}const Le=q||L.find(je=>je.itemMidCd===V.itemMidCd&&je.eqtClCd===V.eqtClCd);if(!Le){r==null||r("      .   .","warning");return}if(T.find(je=>je.contractEquipment.id===Le.id&&!re.some(ut=>ut.id===je.actualEquipment.id))){r==null||r("   .","warning");return}if(Le){const je={contractEquipment:Le,actualEquipment:V,macAddress:V.macAddress},ut=[...T,je],gt=K.filter(Ve=>Ve.id!==V.id);k(g,ut),se(g,gt);const jt={...j};delete jt[V.id],F(g,jt),U(g,null),console.log("=== [-]     ==="),console.log(":",ut.map(Ve=>({type:Ve.actualEquipment.type,model:Ve.actualEquipment.model,serialNumber:Ve.actualEquipment.serialNumber,id:Ve.actualEquipment.id}))),console.log(":",gt.map(Ve=>({type:Ve.type,model:Ve.model,serialNumber:Ve.serialNumber,id:Ve.id,removalStatus:jt[Ve.id]||{}}))),r==null||r("   .","success")}else r==null||r("    .","error");return}if(!q){r==null||r("   .","warning");return}const ye=T.find(Le=>Le.contractEquipment.itemMidCd===q.itemMidCd&&!re.some(vt=>vt.id===Le.actualEquipment.id)),Ue=ye&&K.some(Le=>Le.id===ye.actualEquipment.id);if(ye&&!Ue){r==null||r("   .","warning");return}const ue={contractEquipment:q,actualEquipment:V,macAddress:V.macAddress||""},Oe=T.findIndex(Le=>Le.contractEquipment.id===q.id);let Ze;Oe>=0?(Ze=[...T],Ze[Oe]=ue):Ze=[...T,ue],console.log("=== [-]     ==="),console.log(":",Ze.map(Le=>({type:Le.actualEquipment.type,model:Le.actualEquipment.model,serialNumber:Le.actualEquipment.serialNumber,id:Le.actualEquipment.id}))),console.log(":",K.map(Le=>({type:Le.type,model:Le.model,serialNumber:Le.serialNumber,id:Le.id,removalStatus:j[Le.id]||{}}))),mt()},disabled:!V||T.some(Ne=>Ne.actualEquipment.id===(V==null?void 0:V.id)),children:s.jsx(a0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!C&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${he==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>de("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),K.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${he==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:K.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${he==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>de("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),q&&De.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${he==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:De.length})]})})]}),he==="removal"?s.jsx(s.Fragment,{children:K.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:K.map((Ne,ye)=>{const Ue=Ne.id,ue=j[Ue]||{},Oe=ue.EQT_LOSS_YN==="1"||ue.PART_LOSS_BRK_YN==="1"||ue.EQT_BRK_YN==="1"||ue.EQT_CABL_LOSS_YN==="1"||ue.EQT_CRDL_LOSS_YN==="1",Ze=(V==null?void 0:V.id)===Ne.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Ze?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>pt(Ne),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Ne.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Ne.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Ne.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${Oe?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:Oe?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(Le=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${ue[Le.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:vt=>{vt.stopPropagation(),tt(Ue,Le.key,ue[Le.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:ue[Le.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:Le.label})]},Le.key))})]},Ue||ye)})})}):s.jsx(s.Fragment,{children:q?De.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:De.map(Ne=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(V==null?void 0:V.id)===Ne.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>pt(Ne),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Ne.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Ne.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Ne.serialNumber]}),Ne.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Ne.macAddress]})]})]}),(V==null?void 0:V.id)===Ne.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Ne.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var ue;const Ne=t.WRK_CD_NM||_0(t.WRK_CD)||t.workType||"-",ye=t.PROD_NM||t.productName||((ue=t.customer)==null?void 0:ue.productName)||"-",Ue=t.CTRT_STAT_NM||$u(t.CTRT_STAT)||"-";return s.jsx(m0,{isOpen:Q,onClose:()=>ee(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:Ue,prodGrp:t.PROD_GRP||"",prodNm:ye,wrkCdNm:Ne,onSave:at,showToast:r,installedEquipmentCount:T.length})})(),!C&&s.jsx("button",{onClick:dt,disabled:xt,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${xt?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(o0,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(el,{isOpen:Z,onClose:()=>le(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||(($e=t.customer)==null?void 0:$e.id)}),s.jsx(g0,{isOpen:xe,onClose:()=>be(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),ne&&Ju.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!pe&&ie(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Ne=>Ne.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:pe?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(pn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):ce==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(l0,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:me})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(bo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:me})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${ce==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>ie(!1),disabled:pe,children:pe?" ...":""})})]})}),document.body)]})},QY=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u="",onLdapConnect:h,isLdapDone:m=!1,ldapLoading:_=!1,ldapBlocked:p=!1})=>{var Je;const g=t.id,C=o||t.WRK_STAT_CD==="4"||t.status==="",y=t.WRK_DTL_TCD==="0440",{setFilteringData:N}=ta(),{initWorkState:v,setApiData:P,setDataLoaded:w,addInstalledEquipment:M,removeInstalledEquipment:k,setInstalledEquipments:B,setSelectedContract:G,setSelectedStock:U,clearSelection:I,toggleRemovalStatus:E,setFullRemovalStatus:A,addMarkedForRemoval:Y,removeMarkedForRemoval:se,setMarkedForRemoval:X,setSignalStatus:z,setSignalResult:$}=Ui(),{contractEquipments:F,technicianEquipments:L,removeEquipments:re,installedEquipments:fe,markedForRemoval:T,removalStatus:j,selectedContract:K,selectedStock:J,signalStatus:q,signalResult:V,filteringData:ce,isReady:me}=xa(g),[Ce,ge]=b.useState(0),[Ge,te]=b.useState("removal"),[he,de]=b.useState(!1),[Q,ee]=b.useState(!1),[Z,le]=b.useState(!1),[xe,be]=b.useState(!1),[ne,ie]=b.useState(!1),[pe,ze]=b.useState(!1),[xt,st]=b.useState(!1);b.useEffect(()=>{if(me&&(fe.length>0||T.length>0||F.length>0)){console.log("[-]    -   ");return}v(g),St()},[t.id]);const St=async(De=!1)=>{var $e,Ne,ye,Ue,ue;try{let Oe;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!De)console.log("[-Suspension] Pre-loaded   -",i.contractEquipments.length," "),Oe=i;else{De?console.log("[-Suspension]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-Suspension] preloadedApiData   - API ");const ke=localStorage.getItem("userInfo");if(!ke){console.error("  .");return}const ss=JSON.parse(ke),ls=P_(t.WRK_CD),ds={WRKR_ID:t.WRKR_ID||ss.userId||ss.workerId||"",SO_ID:t.SO_ID||ss.soId,WRK_ID:t.id,CUST_ID:(($e=t.customer)==null?void 0:$e.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:ls,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-Suspension] API :",ds),Oe=await Eo(ds),De&&a&&(console.log("[-Suspension]   preloadedData "),a(Oe))}console.log("[-Suspension] API :",{contractEquipments:((Ne=Oe.contractEquipments)==null?void 0:Ne.length)||0,technicianEquipments:((ye=Oe.technicianEquipments)==null?void 0:ye.length)||0,customerEquipments:((Ue=Oe.customerEquipments)==null?void 0:Ue.length)||0,removedEquipments:((ue=Oe.removedEquipments)==null?void 0:ue.length)||0});const Le={kpiProdGrpCd:Oe.kpiProdGrpCd,prodChgGb:Oe.prodChgGb,chgKpiProdGrpCd:Oe.chgKpiProdGrpCd,prodGrp:Oe.prodGrp};N(Le),window.__equipmentFilterData=Le;const vt=(Oe.contractEquipments||[]).map(ke=>({id:ke.SVC_CMPS_ID||ke.PROD_CMPS_ID,type:ke.ITEM_MID_NM||ke.EQT_NM,model:ke.EQT_CL_NM,serialNumber:"N/A",itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,PROD_CD:ke.PROD_CD,SVC_CD:ke.SVC_CD})),je=(Oe.technicianEquipments||[]).map(ke=>({id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:ke.EQT_PROD_CMPS_ID,PROD_CD:ke.PROD_CD,SVC_CD:ke.SVC_CD,EQT_SALE_AMT:ke.EQT_SALE_AMT,MST_SO_ID:ke.MST_SO_ID,SO_ID:ke.SO_ID,OLD_LENT_YN:ke.OLD_LENT_YN,LENT:ke.LENT,LENT_YN:ke.LENT_YN,ITLLMT_PRD:ke.ITLLMT_PRD,EQT_USE_STAT_CD:ke.EQT_USE_STAT_CD})),ut=new Set,gt=(Oe.customerEquipments||[]).map(ke=>{const ss=vt.find(ls=>ls.itemMidCd===ke.ITEM_MID_CD&&!ut.has(ls.id));return ss&&ut.add(ss.id),{contractEquipment:ss||{id:"unknown",type:ke.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:ke.ITEM_MID_CD},actualEquipment:{id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,LENT_YN:ke.LENT_YN,VOIP_CUSTOWN_EQT:ke.VOIP_CUSTOWN_EQT},macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,installLocation:ke.INSTL_LCTN}}),jt=(Oe.removedEquipments||[]).map(ke=>({id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,installLocation:ke.INSTL_LCTN,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,MST_SO_ID:ke.MST_SO_ID,SO_ID:ke.SO_ID,LENT_YN:ke.LENT_YN,VOIP_CUSTOWN_EQT:ke.VOIP_CUSTOWN_EQT}));P(g,{contractEquipments:vt,technicianEquipments:je,removeEquipments:jt,filteringData:Le}),ge(gt.length);const Ve=T||[],Vt=fe||[];if(gt.length>0)if(console.log("[-Suspension] API    :",gt.length,""),Ve.length>0){console.log("[-Suspension] Zustand  :",Ve.length,"");const ke=new Set(Ve.map(ls=>ls.id)),ss=gt.filter(ls=>!ke.has(ls.actualEquipment.id));console.log("[-Suspension]     :",ss.length,""),B(g,ss)}else{const ke=new Set(vt.map(ds=>ds.SVC_CMPS_ID).filter(Boolean)),ss=[],ls=[];gt.forEach(ds=>{const vs=ds.actualEquipment.SVC_CMPS_ID,Ss=ds.actualEquipment.EQT_KND;vs&&!ke.has(vs)&&Ss==="CUST"?ss.push(ds.actualEquipment):ls.push(ds)}),ss.length>0?(console.log("[-Suspension]  :      :",ss.length,""),X(g,ss),B(g,ls)):B(g,gt)}else Vt.length>0&&console.log("[-Suspension] Zustand  :",Vt.length,"");requestAnimationFrame(()=>w(g,!0))}catch(Oe){console.error("[-Suspension]    :",Oe),requestAnimationFrame(()=>w(g,!0))}},ot=async(De,$e)=>{try{const Ne=localStorage.getItem("userInfo");if(!Ne){r==null||r("  .","error");return}const ye=JSON.parse(Ne),Ue=De.map((Oe,Ze)=>{let Le=Oe.ITEM_MID_CD||Oe.ITM_MID_CD||Oe.EQT||Oe.EQT_CD||"",vt=Oe.EQT_CL||Oe.EQT_CL_CD||"",je=Oe.SVC_CMPS_ID||Oe.PROD_CMPS_ID||Oe.SVC_CMPS_SEQ||Oe.EQUIP_SEQ||"";return Le=String(Le).trim().padStart(2,"0"),vt=String(vt).trim().padStart(6,"0"),je=String(je||Ze+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||ye.crrId||"",WRKR_ID:t.WRKR_ID||ye.userId||ye.workerId||"",REG_UID:ye.userId||ye.workerId||"A20130708",ITEM_MID_CD:Le,EQT_CL:vt,SVC_CMPS_ID:je,EQT:Le,EQT_CD:Le,LENT:String(Oe.LENT||"10"),EQT_USE_STAT_CD:String(Oe.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(Oe.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(Oe.EQT_SALE_AMT||0),PROD_GRP:String(Oe.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(Oe.PROD_CD||t.PROD_CD||""),SVC_CD:String(Oe.SVC_CD||""),PROM_CNT:$e||"",SEL:"1",EQT_BASIC_YN:String(Oe.EQT_BASIC_YN||"N"),PROD_TYP:Oe.PROD_TYP,EQUIP_SEQ:Oe.EQUIP_SEQ}}),ue=await d0({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:$e||"",equipments:Ue});if(ue.MSGCODE==="SUCCESS"||ue.MSGCODE==="0"||ue.code==="SUCCESS")r==null||r("  .","success"),B(g,[]),X(g,[]),I(g),await St(!0);else throw new Error(ue.MESSAGE||ue.message||"   .")}catch(Ne){throw console.error("[-]    :",Ne),r==null||r(Ne.message||"     .","error",!0),Ne}},Be=De=>{const $e=fe.find(Ne=>Ne.contractEquipment.id===De.id);(K==null?void 0:K.id)===De.id?(G(g,null),U(g,null)):(G(g,De),$e?U(g,$e.actualEquipment):U(g,null))},lt=()=>{if(!K||!J)return;if(K.itemMidCd!==J.itemMidCd||K.model!==J.model){r==null||r("      .","warning");return}if(T.some(Ue=>Ue.id===J.id)){mt(J);return}const $e=fe.find(Ue=>Ue.contractEquipment.id===K.id&&!L.some(ue=>ue.id===Ue.actualEquipment.id)),Ne=$e&&T.some(Ue=>Ue.id===$e.actualEquipment.id);if($e&&!Ne){r==null||r("   .","warning");return}const ye=fe.findIndex(Ue=>Ue.contractEquipment.id===K.id);if(ye>=0){const Ue=[...fe];Ue[ye]={contractEquipment:K,actualEquipment:J,macAddress:J.macAddress||"",installLocation:""},B(g,Ue)}else{const Ue={contractEquipment:K,actualEquipment:J,macAddress:J.macAddress||"",installLocation:""};B(g,[...fe,Ue])}z(g,"idle"),U(g,null)},pt=()=>{if(!J)return;const De=fe.findIndex(ye=>ye.actualEquipment.id===J.id);if(De>=0){const ye=[...fe],Ue=ye.splice(De,1)[0];B(g,ye);const ue=Ue.actualEquipment;T.some(Ze=>Ze.id===ue.id)||Y(g,ue),z(g,"idle"),U(g,null);return}if(T.some(ye=>ye.id===J.id))return;re.some(ye=>ye.id===J.id)&&Y(g,J)},mt=De=>{if(T.findIndex(ue=>ue.id===De.id)===-1){r==null||r("       .","error");return}if(K&&(K.itemMidCd!==De.itemMidCd||K.model!==De.model)){r==null||r("      .","warning");return}const Ne=K||F.find(ue=>ue.itemMidCd===De.itemMidCd&&ue.model===De.model);if(!Ne){r==null||r("      .","warning");return}if(Ne&&fe.find(Oe=>Oe.contractEquipment.id===Ne.id&&!L.some(Ze=>Ze.id===Oe.actualEquipment.id))){r==null||r("   .","warning");return}const ye={contractEquipment:Ne,actualEquipment:{...De,EQT_CHG_GB:"3"},macAddress:De.macAddress};B(g,[...fe,ye]),se(g,De.id);const Ue={...j};delete Ue[De.id],A(g,Ue),U(g,null),console.log("[-Suspension]  :",De.model||De.type),r==null||r(" .","success")},Ye=async()=>{var De,$e,Ne,ye;if(fe.length===0){r==null||r("    .","warning"),z(g,"fail");return}try{ze(!0),ie(!0),$(g," ...");const Ue=localStorage.getItem("userInfo");if(!Ue){$(g,"    ."),z(g,"fail"),ze(!1);return}const ue=JSON.parse(Ue),Oe=ue.userId||ue.id||"UNKNOWN",Ze=Ve=>{var ls,ds,vs,Ss,Ae;const Vt=((ls=Ve.actualEquipment)==null?void 0:ls.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",ke=((vs=Ve.actualEquipment)==null?void 0:vs.itemMidCd)||Ve.itemMidCd||((Ss=Ve.actualEquipment)==null?void 0:Ss.ITEM_MID_CD)||"",ss=(((Ae=Ve.actualEquipment)==null?void 0:Ae.type)||Ve.type||"").toLowerCase();return!!(Vt.startsWith("0904")||ke==="02"||ss.includes("stb")||ss.includes(""))},Le=Ve=>{var ls,ds,vs,Ss,Ae;const Vt=((ls=Ve.actualEquipment)==null?void 0:ls.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",ke=((vs=Ve.actualEquipment)==null?void 0:vs.itemMidCd)||Ve.itemMidCd||((Ss=Ve.actualEquipment)==null?void 0:Ss.ITEM_MID_CD)||"",ss=(((Ae=Ve.actualEquipment)==null?void 0:Ae.type)||Ve.type||"").toLowerCase();return!!(Vt.startsWith("0902")||ke==="03"||ss.includes("modem")||ss.includes(""))},vt=fe.find(Ze),je=fe.find(Le),ut=((De=vt==null?void 0:vt.actualEquipment)==null?void 0:De.id)||"",gt=(($e=je==null?void 0:je.actualEquipment)==null?void 0:$e.id)||"",jt=await Xu(Oe,t.CTRT_ID||"",t.id,"SMR03",ut||((ye=(Ne=fe[0])==null?void 0:Ne.actualEquipment)==null?void 0:ye.id)||"",gt||"");jt.O_IFSVC_RESULT&&jt.O_IFSVC_RESULT.startsWith("TRUE")?($(g,` 

: ${jt.O_IFSVC_RESULT||""}`),z(g,"success")):($(g,` 

${jt.MESSAGE||"   "}`),z(g,"fail"))}catch(Ue){$(g,` 

${Ue.message||"   "}`),z(g,"fail")}finally{ze(!1)}},at=(De,$e,Ne)=>{const ye={...j,[De]:{...j[De]||{},[$e]:Ne==="1"?"0":"1"}};A(g,ye)},Fe=De=>{(J==null?void 0:J.id)===De.id?U(g,null):U(g,De)},tt=()=>{const De=new Set(fe.map(Ne=>Ne.actualEquipment.id));let $e=L.filter(Ne=>!De.has(Ne.id));return K&&($e=$e.filter(Ne=>Ne.itemMidCd===K.itemMidCd&&Ne.model===K.model)),$e},ct=()=>{be(!0),setTimeout(()=>{be(!1),r==null||r("    .","info")},500)},Mt=async()=>{if(!(xt||C)){st(!0);try{await St(!0),r==null||r("  .","success")}catch(De){console.error("[-]  :",De),r==null||r("   .","error")}finally{st(!1)}}},dt=tt();return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[xt&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsxs("button",{onClick:Mt,disabled:xt||C,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${xt||C?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(ki,{className:`w-3.5 h-3.5 ${xt?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[F.length,""]})]}),s.jsxs("div",{className:`grid gap-2 ${y?"grid-cols-3":"grid-cols-1"}`,children:[y&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{C||le(!0)},disabled:C,children:[s.jsx(X2,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":_?"border-yellow-300 bg-yellow-100 text-yellow-700":p?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>h==null?void 0:h(),disabled:_||C,children:[_?s.jsx(pn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":q==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":q==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!C&&!pe&&Ye(),disabled:C||pe,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>c?ee(!0):de(!0),children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:c?"LDAP":""})]})]})]}),me?F.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:F.map(De=>{const $e=fe.find(ye=>ye.contractEquipment.id===De.id),Ne=(K==null?void 0:K.id)===De.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${C?$e?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":y?Ne?"border-blue-500 bg-blue-50 cursor-pointer":$e?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer":$e?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default"}`,onClick:()=>!C&&Be(De),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:De.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:De.model})]}),$e&&(()=>{const ye=L.some(Ue=>Ue.id===$e.actualEquipment.id);return s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",$e.actualEquipment.model]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${ye?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:ye?"":""})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",$e.actualEquipment.serialNumber]}),$e.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",$e.macAddress]})]})})()]})},De.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!C&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!J||!fe.some(De=>De.actualEquipment.id===J.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!J)return;if(L.some($e=>$e.id===J.id)){const $e=fe.findIndex(Ne=>Ne.actualEquipment.id===J.id);if($e>=0){const Ne=[...fe];Ne.splice($e,1),B(g,Ne),U(g,null),r==null||r("  .","success")}return}pt(),te("removal")},disabled:!J||!fe.some(De=>De.actualEquipment.id===J.id),children:s.jsx(i0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),y&&s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!K||!J||fe.some(De=>De.actualEquipment.id===J.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:lt,disabled:!K||!J||fe.some(De=>De.actualEquipment.id===J.id),children:s.jsx(a0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!C&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Ge==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>te("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),T.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Ge==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:T.length})]})}),y&&s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${Ge==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>te("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),K&&dt.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Ge==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:dt.length})]})})]}),Ge==="removal"?s.jsx(s.Fragment,{children:T.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:T.map((De,$e)=>{const Ne=De.id,ye=j[Ne]||{},Ue=ye.EQT_LOSS_YN==="1"||ye.PART_LOSS_BRK_YN==="1"||ye.EQT_BRK_YN==="1"||ye.EQT_CABL_LOSS_YN==="1"||ye.EQT_CRDL_LOSS_YN==="1",ue=(J==null?void 0:J.id)===De.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${ue?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>Fe(De),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:De.type}),s.jsx("div",{className:"text-xs text-gray-600",children:De.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",De.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${Ue?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:Ue?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(Oe=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${ye[Oe.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:Ze=>{Ze.stopPropagation(),at(Ne,Oe.key,ye[Oe.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:ye[Oe.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:Oe.label})]},Oe.key))})]},Ne||$e)})})}):s.jsx(s.Fragment,{children:K?dt.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:dt.map(De=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(J==null?void 0:J.id)===De.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>Fe(De),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:De.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:De.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",De.serialNumber]}),De.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",De.macAddress]})]})]}),(J==null?void 0:J.id)===De.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},De.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),!C&&y&&s.jsx("button",{onClick:ct,disabled:xe,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${xe?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(o0,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(el,{isOpen:he,onClose:()=>de(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((Je=t.customer)==null?void 0:Je.id)}),s.jsx(g0,{isOpen:Q,onClose:()=>ee(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),y&&(()=>{const De=t.PROD_NM||t.details||"-",$e=t.WRK_CD_NM||_0(t.WRK_CD)||"-";return s.jsx(m0,{isOpen:Z,onClose:()=>le(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",prodGrp:t.PROD_GRP||"",prodNm:De,wrkCdNm:$e,onSave:ot,showToast:r,installedEquipmentCount:fe.length})})(),ne&&Ju.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!pe&&ie(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:De=>De.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:pe?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(pn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):q==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(l0,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:V})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(bo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:V})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${q==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>ie(!1),disabled:pe,children:pe?" ...":""})})]})}),document.body)]})},YY=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u="",onLdapConnect:h,isLdapDone:m=!1,ldapLoading:_=!1,ldapBlocked:p=!1})=>{var dt;const g=t.id,C=o||t.WRK_STAT_CD==="4"||t.status==="",[y,N]=b.useState(""),{setFilteringData:v}=ta(),{initWorkState:P,setApiData:w,setDataLoaded:M,setInstalledEquipments:k,setSelectedContract:B,setSelectedStock:G,toggleRemovalStatus:U,setFullRemovalStatus:I,addMarkedForRemoval:E,removeMarkedForRemoval:A,setMarkedForRemoval:Y,setSignalStatus:se,setSignalResult:X}=Ui(),{contractEquipments:z,technicianEquipments:$,removeEquipments:F,installedEquipments:L,markedForRemoval:re,removalStatus:fe,pendingLossStatusList:T,selectedContract:j,selectedStock:K,signalStatus:J,signalResult:q,filteringData:V,isReady:ce}=xa(g),[me,Ce]=b.useState(0),[ge,Ge]=b.useState("removal"),[te,he]=b.useState(!1),[de,Q]=b.useState(!1),[ee,Z]=b.useState(!1),[le,xe]=b.useState(!1),[be,ne]=b.useState(!1),[ie,pe]=b.useState(!1),[ze,xt]=b.useState(!1),[st,St]=b.useState("");b.useEffect(()=>{const Je=t.DTL_CTRT_ID||t.CTRT_ID;Je&&jM(Je,t.CUST_ID).then(De=>{De!=null&&De.BASIC_PROD_CD_NM&&St(De.BASIC_PROD_CD_NM)})},[t.DTL_CTRT_ID,t.CTRT_ID,t.CUST_ID]),b.useEffect(()=>{if(ce&&(L.length>0||re.length>0||z.length>0)){console.log("[-]    -   ");return}P(g),ot()},[t.id]);const ot=async(Je=!1)=>{var De,$e,Ne,ye,Ue;try{let ue;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Je)console.log("[Equipment-ProductChange] Using preloadedApiData with",i.contractEquipments.length,"contract equipments"),ue=i;else{Je?console.log("[Equipment-ProductChange] Force refresh - calling API"):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[Equipment-ProductChange] preloadedApiData has no contract equipments, calling API fresh");const ke=localStorage.getItem("userInfo");if(!ke){console.error("User info not found");return}const ss=JSON.parse(ke),ls=t.DTL_CTRT_ID||t.CTRT_ID,ds={WRKR_ID:t.WRKR_ID||ss.userId||ss.workerId||"",SO_ID:t.SO_ID||ss.soId,WRK_ID:t.id,CUST_ID:((De=t.customer)==null?void 0:De.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:ls,OLD_CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"05",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[Equipment-ProductChange] API call (DTL_CTRT_ID ):",ds),ue=await Eo(ds),Je&&a&&(console.log("[Equipment-ProductChange] Updating parent preloadedData"),a(ue))}console.log("[Equipment-ProductChange] API response:",{contractEquipments:(($e=ue.contractEquipments)==null?void 0:$e.length)||0,technicianEquipments:((Ne=ue.technicianEquipments)==null?void 0:Ne.length)||0,customerEquipments:((ye=ue.customerEquipments)==null?void 0:ye.length)||0,removedEquipments:((Ue=ue.removedEquipments)==null?void 0:Ue.length)||0});const Ze={kpiProdGrpCd:ue.kpiProdGrpCd,prodChgGb:ue.prodChgGb,chgKpiProdGrpCd:ue.chgKpiProdGrpCd,prodGrp:ue.prodGrp};v(Ze),window.__equipmentFilterData=Ze;const Le=(ue.contractEquipments||[]).map(ke=>({id:ke.SVC_CMPS_ID||ke.PROD_CMPS_ID,type:ke.ITEM_MID_NM||ke.EQT_NM,model:ke.EQT_CL_NM,serialNumber:"N/A",itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,PROD_CD:ke.PROD_CD,SVC_CD:ke.SVC_CD})),vt=ue.chgResnCd||t.CHG_RESN_CD||"";N(vt);let je=(ue.technicianEquipments||[]).map(ke=>({id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:ke.EQT_PROD_CMPS_ID,PROD_CD:ke.PROD_CD,SVC_CD:ke.SVC_CD,EQT_SALE_AMT:ke.EQT_SALE_AMT,MST_SO_ID:ke.MST_SO_ID,SO_ID:ke.SO_ID,OLD_LENT_YN:ke.OLD_LENT_YN,LENT:ke.LENT,LENT_YN:ke.LENT_YN,ITLLMT_PRD:ke.ITLLMT_PRD,EQT_USE_STAT_CD:ke.EQT_USE_STAT_CD,BAR_CD:ke.BAR_CD,CHG_RESN_CD:ke.CHG_RESN_CD}));vt==="H08"&&(je=je.filter(ke=>(ke.itemMidCd!=="04",!0)),console.log("[Equipment-ProductChange] CHG_RESN_CD=H08 (ARPU) - STB BAR_CD  "));const ut=new Set,gt=(ue.customerEquipments||[]).map(ke=>{const ss=Le.find(ls=>ls.itemMidCd===ke.ITEM_MID_CD&&!ut.has(ls.id));return ss&&ut.add(ss.id),{contractEquipment:ss||{id:"unknown",type:ke.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:ke.ITEM_MID_CD},actualEquipment:{id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,LENT_YN:ke.LENT_YN,VOIP_CUSTOWN_EQT:ke.VOIP_CUSTOWN_EQT},macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,installLocation:ke.INSTL_LCTN}}),jt=(ue.removedEquipments||[]).map(ke=>({id:ke.EQT_NO,type:ke.ITEM_MID_NM,model:ke.EQT_CL_NM,serialNumber:ke.EQT_SERNO,itemMidCd:ke.ITEM_MID_CD,eqtClCd:ke.EQT_CL_CD||ke.EQT_CL,macAddress:ke.MAC_ADDRESS||ke.MAC_ADDR,installLocation:ke.INSTL_LCTN,SVC_CMPS_ID:ke.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ke.BASIC_PROD_CMPS_ID,MST_SO_ID:ke.MST_SO_ID,SO_ID:ke.SO_ID,LENT_YN:ke.LENT_YN,VOIP_CUSTOWN_EQT:ke.VOIP_CUSTOWN_EQT}));w(g,{contractEquipments:Le,technicianEquipments:je,removeEquipments:jt,filteringData:Ze}),Ce(gt.length),console.log("[Equipment-ProductChange] ====== Equipment Initialization Started ======");const Ve=L||[],Vt=re||[];if(gt.length>0?(console.log("[Equipment-ProductChange] Using customer equipment from API:",gt.length,"items"),k(g,gt)):Ve.length>0&&console.log("[Equipment-ProductChange] Zustand  :",Ve.length,""),jt.length>0&&Vt.length===0)console.log("[Equipment-ProductChange] API output5  markedForRemoval :",jt.length,""),Y(g,jt);else if(jt.length>0){const ke=new Set(Vt.map(ls=>ls.id)),ss=jt.filter(ls=>!ke.has(ls.id));ss.length>0&&(console.log("[Equipment-ProductChange] API output5  :",ss.length," "),Y(g,[...Vt,...ss]))}console.log("[Equipment-ProductChange] ====== Equipment Initialization Complete ======"),requestAnimationFrame(()=>M(g,!0))}catch(ue){console.error("[Equipment-ProductChange] Failed to load equipment data:",ue),requestAnimationFrame(()=>M(g,!0))}},Be=Je=>{const De=L.find($e=>$e.contractEquipment.id===Je.id);(j==null?void 0:j.id)===Je.id?(B(g,null),G(g,null)):(B(g,Je),De?G(g,De.actualEquipment):G(g,null))},lt=Je=>{(K==null?void 0:K.id)===Je.id?G(g,null):G(g,Je)},pt=()=>{if(!j||!K)return;if(j.itemMidCd!==K.itemMidCd||j.model!==K.model){r==null||r("      .","warning");return}const Je=F.some(Ne=>Ne.id===K.id);console.log("[Equipment-ProductChange] Registering equipment:",{contractEquipment:j.type,stockEquipment:`${K.type} (S/N: ${K.serialNumber})`,isReuse:Je});const De=L.findIndex(Ne=>Ne.contractEquipment.id===j.id),$e={...K,EQT_CHG_GB:Je?"3":K.EQT_CHG_GB||"1"};if(De>=0){const Ne=[...L];Ne[De]={contractEquipment:j,actualEquipment:$e,macAddress:K.macAddress||"",installLocation:""},k(g,Ne)}else{const Ne={contractEquipment:j,actualEquipment:$e,macAddress:K.macAddress||"",installLocation:""};k(g,[...L,Ne])}Je&&A(g,K.id),se(g,"idle"),G(g,null)},mt=()=>{if(!K)return;const Je=L.findIndex(Ne=>Ne.actualEquipment.id===K.id);if(Je>=0){const Ne=[...L],ye=Ne.splice(Je,1)[0];k(g,Ne);const Ue=ye.actualEquipment;re.some(Oe=>Oe.id===Ue.id)||E(g,Ue),se(g,"idle"),G(g,null);return}if(re.some(Ne=>Ne.id===K.id))return;F.some(Ne=>Ne.id===K.id)&&E(g,K)},Ye=async(Je,De)=>{try{const $e=localStorage.getItem("userInfo");if(!$e){r==null||r("  .","error");return}const Ne=JSON.parse($e),ye=t.DTL_CTRT_ID||t.CTRT_ID,Ue=Je.map((Oe,Ze)=>{let Le=Oe.ITEM_MID_CD||Oe.ITM_MID_CD||Oe.EQT||Oe.EQT_CD||"",vt=Oe.EQT_CL||Oe.EQT_CL_CD||"",je=Oe.SVC_CMPS_ID||Oe.PROD_CMPS_ID||Oe.SVC_CMPS_SEQ||Oe.EQUIP_SEQ||"";return Le=String(Le).trim().padStart(2,"0"),vt=String(vt).trim().padStart(6,"0"),je=String(je||Ze+1),{CTRT_ID:ye,RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Ne.crrId||"",WRKR_ID:t.WRKR_ID||Ne.userId||Ne.workerId||"",REG_UID:Ne.userId||Ne.workerId||"A20130708",ITEM_MID_CD:Le,EQT_CL:vt,SVC_CMPS_ID:je,EQT:Le,EQT_CD:Le,LENT:String(Oe.LENT||"10"),EQT_USE_STAT_CD:String(Oe.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(Oe.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(Oe.EQT_SALE_AMT||0),PROD_GRP:String(Oe.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(Oe.PROD_CD||t.PROD_CD||""),SVC_CD:String(Oe.SVC_CD||""),PROM_CNT:De||"",SEL:"1",EQT_BASIC_YN:String(Oe.EQT_BASIC_YN||"N"),PROD_TYP:Oe.PROD_TYP,EQUIP_SEQ:Oe.EQUIP_SEQ}}),ue=await d0({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:ye,CRR_ID:t.CRR_ID||"",PROM_CNT:De||"",equipments:Ue});if(ue.MSGCODE==="SUCCESS"||ue.MSGCODE==="0"||ue.code==="SUCCESS")r==null||r("  .","success"),await ot(!0);else throw new Error(ue.MESSAGE||ue.message||"   .")}catch($e){throw console.error("[] :",$e),r==null||r($e.message||"     .","error",!0),$e}},at=async()=>{var Je,De,$e,Ne;if(L.length===0){r==null||r("    .","warning"),se(g,"fail");return}try{ne(!0),xe(!0),X(g," ...");const ye=localStorage.getItem("userInfo");if(!ye){X(g,"    ."),se(g,"fail"),ne(!1);return}const Ue=JSON.parse(ye),ue=Ue.userId||Ue.id||"UNKNOWN",Oe=Ve=>{var ls,ds,vs,Ss,Ae;const Vt=((ls=Ve.actualEquipment)==null?void 0:ls.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",ke=((vs=Ve.actualEquipment)==null?void 0:vs.itemMidCd)||Ve.itemMidCd||((Ss=Ve.actualEquipment)==null?void 0:Ss.ITEM_MID_CD)||"",ss=(((Ae=Ve.actualEquipment)==null?void 0:Ae.type)||Ve.type||"").toLowerCase();return!!(Vt.startsWith("0904")||ke==="02"||ss.includes("stb")||ss.includes(""))},Ze=Ve=>{var ls,ds,vs,Ss,Ae;const Vt=((ls=Ve.actualEquipment)==null?void 0:ls.eqtClCd)||Ve.eqtClCd||((ds=Ve.actualEquipment)==null?void 0:ds.EQT_CL_CD)||"",ke=((vs=Ve.actualEquipment)==null?void 0:vs.itemMidCd)||Ve.itemMidCd||((Ss=Ve.actualEquipment)==null?void 0:Ss.ITEM_MID_CD)||"",ss=(((Ae=Ve.actualEquipment)==null?void 0:Ae.type)||Ve.type||"").toLowerCase();return!!(Vt.startsWith("0902")||ke==="03"||ss.includes("modem")||ss.includes(""))},Le=L.find(Oe),vt=L.find(Ze),je=((Je=Le==null?void 0:Le.actualEquipment)==null?void 0:Je.id)||"",ut=((De=vt==null?void 0:vt.actualEquipment)==null?void 0:De.id)||"",gt=t.DTL_CTRT_ID||t.CTRT_ID,jt=await Xu(ue,gt,t.id,"SMR03",je||((Ne=($e=L[0])==null?void 0:$e.actualEquipment)==null?void 0:Ne.id)||"",ut||"");jt.O_IFSVC_RESULT&&jt.O_IFSVC_RESULT.startsWith("TRUE")?(X(g,` 

: ${jt.O_IFSVC_RESULT||""}`),se(g,"success")):(X(g,` 

${jt.MESSAGE||"   "}`),se(g,"fail"))}catch(ye){X(g,` 

${ye.message||"   "}`),se(g,"fail")}finally{ne(!1)}},Fe=(Je,De)=>{U(g,Je,De)},tt=b.useMemo(()=>{const Je=new Set(L.map($e=>$e.actualEquipment.id));let De=$.filter($e=>!Je.has($e.id));return j&&(De=De.filter($e=>$e.itemMidCd===j.itemMidCd&&$e.model===j.model)),De},[L,$,j]);b.useMemo(()=>{const Je=new Set(L.map($e=>$e.actualEquipment.id));let De=re.filter($e=>!Je.has($e.id));return j&&(De=De.filter($e=>$e.itemMidCd===j.itemMidCd&&$e.model===j.model)),De},[L,re,j]);const ct=()=>{pe(!0),setTimeout(()=>{pe(!1),r==null||r("    .","info")},500)},Mt=async()=>{if(!(ze||C)){xt(!0);try{await ot(!0),r==null||r("  .","success")}catch(Je){console.error("[-]  :",Je),r==null||r("   .","error")}finally{xt(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[ze&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 truncate",children:["  ",st&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",st,")"]})]}),s.jsxs("button",{onClick:Mt,disabled:ze||C,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${ze||C?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(ki,{className:`w-3.5 h-3.5 ${ze?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[z.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{C||he(!0)},disabled:C,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":_?"border-yellow-300 bg-yellow-100 text-yellow-700":p?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>h==null?void 0:h(),disabled:_||C,children:[_?s.jsx(pn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${C?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":J==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":J==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!C&&!be&&at(),disabled:C||be,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300 transition-all active:scale-95 min-h-[56px]",onClick:()=>c?Z(!0):Q(!0),children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:c?"LDAP":""})]})]})]}),ce?z.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:z.map(Je=>{const De=L.find(Ne=>Ne.contractEquipment.id===Je.id),$e=(j==null?void 0:j.id)===Je.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${C?De?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":$e?"border-blue-500 bg-blue-50 cursor-pointer":De?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!C&&Be(Je),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Je.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Je.model})]}),De&&(()=>{const Ne=$.some(ye=>ye.id===De.actualEquipment.id);return s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",De.actualEquipment.model]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${Ne?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:Ne?"":""})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",De.actualEquipment.serialNumber]}),De.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",De.macAddress]})]})})()]})},Je.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"  ..."})]})})]}),!C&&s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${t.WRK_DTL_TCD==="0510"||!K||!L.some(Je=>Je.actualEquipment.id===(K==null?void 0:K.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(t.WRK_DTL_TCD==="0510"||!K)return;if($.some(ye=>ye.id===K.id)){if(ge!=="stock"){r==null||r("  .   .","warning");return}const ye=L.findIndex(Ue=>Ue.actualEquipment.id===K.id);if(ye>=0){const Ue=[...L];Ue.splice(ye,1),k(g,Ue),G(g,null),console.log("=== [-]     ==="),console.log(":",Ue.map(ue=>({type:ue.actualEquipment.type,model:ue.actualEquipment.model,serialNumber:ue.actualEquipment.serialNumber,id:ue.actualEquipment.id}))),console.log(":",re.map(ue=>({type:ue.type,model:ue.model,serialNumber:ue.serialNumber,id:ue.id,removalStatus:fe[ue.id]||{}}))),r==null||r("  .","success")}return}const De=L.findIndex(ye=>ye.actualEquipment.id===K.id);let $e=[...L],Ne=[...re];if(De>=0){const Ue=$e.splice(De,1)[0].actualEquipment;Ne.some(Oe=>Oe.id===Ue.id)||(Ne=[...Ne,Ue])}console.log("=== [-]     ==="),console.log(":",$e.map(ye=>({type:ye.actualEquipment.type,model:ye.actualEquipment.model,serialNumber:ye.actualEquipment.serialNumber,id:ye.actualEquipment.id}))),console.log(":",Ne.map(ye=>({type:ye.type,model:ye.model,serialNumber:ye.serialNumber,id:ye.id,removalStatus:fe[ye.id]||{}}))),mt(),Ge("removal")},disabled:t.WRK_DTL_TCD==="0510"||!K||!L.some(Je=>Je.actualEquipment.id===(K==null?void 0:K.id)),children:s.jsx(i0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!K||L.some(Je=>Je.actualEquipment.id===(K==null?void 0:K.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!K)return;if(re.some(Ue=>Ue.id===K.id)){if(j&&(j.itemMidCd!==K.itemMidCd||j.eqtClCd!==K.eqtClCd)){r==null||r("      .","warning");return}const Ue=j||z.find(je=>je.itemMidCd===K.itemMidCd&&je.eqtClCd===K.eqtClCd);if(!Ue){r==null||r("      .   .","warning");return}if(L.find(je=>je.contractEquipment.id===Ue.id)){r==null||r("   .","warning");return}const Oe={contractEquipment:Ue,actualEquipment:K,macAddress:K.macAddress},Ze=[...L,Oe],Le=re.filter(je=>je.id!==K.id);k(g,Ze),Y(g,Le);const vt={...fe};delete vt[K.id],I(g,vt),G(g,null),console.log("=== [-]     ==="),console.log(":",Ze.map(je=>({type:je.actualEquipment.type,model:je.actualEquipment.model,serialNumber:je.actualEquipment.serialNumber,id:je.actualEquipment.id}))),console.log(":",Le.map(je=>({type:je.type,model:je.model,serialNumber:je.serialNumber,id:je.id,removalStatus:vt[je.id]||{}}))),r==null||r("   .","success");return}if(!j){r==null||r("   .","warning");return}if(L.find(Ue=>Ue.contractEquipment.id===j.id)){r==null||r("   .","warning");return}const $e={contractEquipment:j,actualEquipment:K,macAddress:K.macAddress||""},Ne=L.findIndex(Ue=>Ue.contractEquipment.id===j.id);let ye;Ne>=0?(ye=[...L],ye[Ne]=$e):ye=[...L,$e],console.log("=== [-]     ==="),console.log(":",ye.map(Ue=>({type:Ue.actualEquipment.type,model:Ue.actualEquipment.model,serialNumber:Ue.actualEquipment.serialNumber,id:Ue.actualEquipment.id}))),console.log(":",re.map(Ue=>({type:Ue.type,model:Ue.model,serialNumber:Ue.serialNumber,id:Ue.id,removalStatus:fe[Ue.id]||{}}))),pt()},disabled:!K||L.some(Je=>Je.actualEquipment.id===(K==null?void 0:K.id)),children:s.jsx(a0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!C&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${ge==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>Ge("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),re.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${ge==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:re.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${ge==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>Ge("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),j&&tt.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${ge==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:tt.length})]})})]}),ge==="removal"?s.jsx(s.Fragment,{children:re.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:re.map((Je,De)=>{const $e=Je.id,Ne=fe[$e]||{},ye=Ne.EQT_LOSS_YN==="1"||Ne.PART_LOSS_BRK_YN==="1"||Ne.EQT_BRK_YN==="1"||Ne.EQT_CABL_LOSS_YN==="1"||Ne.EQT_CRDL_LOSS_YN==="1",Ue=(K==null?void 0:K.id)===Je.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Ue?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>lt(Je),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Je.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Je.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Je.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${ye?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:ye?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(ue=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${Ne[ue.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:Oe=>{Oe.stopPropagation(),Fe($e,ue.key)},children:[s.jsx("input",{type:"checkbox",checked:Ne[ue.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:ue.label})]},ue.key))})]},$e||De)})})}):s.jsx(s.Fragment,{children:j?tt.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:tt.map(Je=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(K==null?void 0:K.id)===Je.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>lt(Je),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Je.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Je.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Je.serialNumber]}),Je.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Je.macAddress]})]})]}),(K==null?void 0:K.id)===Je.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Je.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var Ne;const Je=t.WRK_CD_NM||_0(t.WRK_CD)||t.workType||"-",De=t.PROD_NM||t.productName||((Ne=t.customer)==null?void 0:Ne.productName)||"-",$e=t.CTRT_STAT_NM||$u(t.CTRT_STAT)||"-";return s.jsx(m0,{isOpen:te,onClose:()=>he(!1),prodCd:t.PROD_CD||"",ctrtId:t.DTL_CTRT_ID||t.CTRT_ID||"",ctrtStatNm:$e,prodGrp:t.PROD_GRP||"",prodNm:De,wrkCdNm:Je,onSave:Ye,showToast:r,installedEquipmentCount:L.length,customerEquipmentCount:me})})(),!C&&s.jsx("button",{onClick:ct,disabled:ie,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${ie?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:"Barcode Scan",children:s.jsx(o0,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(el,{isOpen:de,onClose:()=>Q(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID,custId:t.CUST_ID||((dt=t.customer)==null?void 0:dt.id)}),s.jsx(g0,{isOpen:ee,onClose:()=>Z(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),le&&Ju.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!be&&xe(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Je=>Je.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:be?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(pn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):J==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(l0,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:q})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(bo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:q})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${J==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>xe(!1),disabled:be,children:be?" ...":""})})]})}),document.body)]})},$Y=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u="",onLdapConnect:h,isLdapDone:m=!1,ldapLoading:_=!1,ldapBlocked:p=!1})=>{var at;const g=o||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:C}=ta(),y=t.id,{initWorkState:N,setApiData:v,setDataLoaded:P,setInstalledEquipments:w,setMarkedForRemoval:M,addMarkedForRemoval:k,removeMarkedForRemoval:B,setSelectedContract:G,setSelectedStock:U,setSignalStatus:I,setSignalResult:E,setPendingLossStatusList:A,setRemovalStatus:Y}=Ui(),{contractEquipments:se,technicianEquipments:X,customerEquipments:z,removeEquipments:$,installedEquipments:F,markedForRemoval:L,removalStatus:re,pendingLossStatusList:fe,selectedContract:T,selectedStock:j,signalStatus:K,signalResult:J,isReady:q}=xa(y);z.length;const[V,ce]=b.useState(!1),[me,Ce]=b.useState(!1),[ge,Ge]=b.useState(!1),[te,he]=b.useState(!1),[de,Q]=b.useState(!1),[ee,Z]=b.useState(!1),[le,xe]=b.useState(!1),[be,ne]=b.useState("stock");b.useEffect(()=>{if(q&&(F.length>0||L.length>0||se.length>0)){console.log("[-]    -   ");return}N(y),ie()},[t.id]);const ie=async(Fe=!1)=>{var tt,ct,Mt,dt,Je;try{let De;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Fe)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),De=i;else{Fe?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const je=localStorage.getItem("userInfo");if(!je){console.error("  .");return}const ut=JSON.parse(je),gt=P_(t.WRK_CD),jt={WRKR_ID:t.WRKR_ID||ut.userId||ut.workerId||"",SO_ID:t.SO_ID||ut.soId,WRK_ID:t.id,CUST_ID:((tt=t.customer)==null?void 0:tt.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:gt,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-] API :",jt),De=await Eo(jt),Fe&&a&&(console.log("[-]   preloadedData "),a(De))}console.log("[-] API :",{contractEquipments:((ct=De.contractEquipments)==null?void 0:ct.length)||0,technicianEquipments:((Mt=De.technicianEquipments)==null?void 0:Mt.length)||0,customerEquipments:((dt=De.customerEquipments)==null?void 0:dt.length)||0,removedEquipments:((Je=De.removedEquipments)==null?void 0:Je.length)||0});const Ne={kpiProdGrpCd:De.kpiProdGrpCd,prodChgGb:De.prodChgGb,chgKpiProdGrpCd:De.chgKpiProdGrpCd,prodGrp:De.prodGrp};C(Ne),window.__equipmentFilterData=Ne;const ye=(De.contractEquipments||[]).map(je=>({id:je.SVC_CMPS_ID||je.PROD_CMPS_ID,type:je.ITEM_MID_NM||je.EQT_NM,model:je.EQT_CL_NM,serialNumber:"N/A",itemMidCd:je.ITEM_MID_CD,eqtClCd:je.EQT_CL_CD||je.EQT_CL,SVC_CMPS_ID:je.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:je.BASIC_PROD_CMPS_ID,PROD_CD:je.PROD_CD,SVC_CD:je.SVC_CD})),Ue=(De.technicianEquipments||[]).map(je=>({id:je.EQT_NO,type:je.ITEM_MID_NM,model:je.EQT_CL_NM,serialNumber:je.EQT_SERNO,itemMidCd:je.ITEM_MID_CD,eqtClCd:je.EQT_CL_CD||je.EQT_CL,macAddress:je.MAC_ADDRESS,SVC_CMPS_ID:je.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:je.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:je.EQT_PROD_CMPS_ID,PROD_CD:je.PROD_CD,SVC_CD:je.SVC_CD,EQT_SALE_AMT:je.EQT_SALE_AMT,MST_SO_ID:je.MST_SO_ID,SO_ID:je.SO_ID,OLD_LENT_YN:je.OLD_LENT_YN,LENT:je.LENT,LENT_YN:je.LENT_YN,ITLLMT_PRD:je.ITLLMT_PRD,EQT_USE_STAT_CD:je.EQT_USE_STAT_CD})),ue=new Set,Oe=(De.customerEquipments||[]).map(je=>{const ut=ye.find(gt=>gt.itemMidCd===je.ITEM_MID_CD&&!ue.has(gt.id));return ut&&ue.add(ut.id),{contractEquipment:ut||{id:"unknown",type:je.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:je.ITEM_MID_CD},actualEquipment:{id:je.EQT_NO,type:je.ITEM_MID_NM,model:je.EQT_CL_NM,serialNumber:je.EQT_SERNO,itemMidCd:je.ITEM_MID_CD,eqtClCd:je.EQT_CL_CD||je.EQT_CL,macAddress:je.MAC_ADDRESS||je.MAC_ADDR,LENT_YN:je.LENT_YN,VOIP_CUSTOWN_EQT:je.VOIP_CUSTOWN_EQT},macAddress:je.MAC_ADDRESS||je.MAC_ADDR,installLocation:je.INSTL_LCTN}}),Ze=(De.customerEquipments||[]).map(je=>({id:je.EQT_NO,type:je.ITEM_MID_NM,model:je.EQT_CL_NM,serialNumber:je.EQT_SERNO,itemMidCd:je.ITEM_MID_CD,eqtClCd:je.EQT_CL_CD||je.EQT_CL,macAddress:je.MAC_ADDRESS||je.MAC_ADDR,SVC_CMPS_ID:je.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:je.BASIC_PROD_CMPS_ID,LENT_YN:je.LENT_YN,VOIP_CUSTOWN_EQT:je.VOIP_CUSTOWN_EQT})),Le=(De.removedEquipments||[]).map(je=>({id:je.EQT_NO,type:je.ITEM_MID_NM,model:je.EQT_CL_NM,serialNumber:je.EQT_SERNO,itemMidCd:je.ITEM_MID_CD,eqtClCd:je.EQT_CL_CD||je.EQT_CL,macAddress:je.MAC_ADDRESS||je.MAC_ADDR,installLocation:je.INSTL_LCTN,SVC_CMPS_ID:je.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:je.BASIC_PROD_CMPS_ID,MST_SO_ID:je.MST_SO_ID,SO_ID:je.SO_ID,LENT_YN:je.LENT_YN,VOIP_CUSTOWN_EQT:je.VOIP_CUSTOWN_EQT}));v(y,{contractEquipments:ye,technicianEquipments:Ue,customerEquipments:Ze,removeEquipments:Le,filteringData:Ne});const vt=L||[];if(Oe.length>0)if(console.log("[-] API     :",Oe.length,""),vt.length>0){const je=new Set(vt.map(gt=>gt.id)),ut=Oe.filter(gt=>!je.has(gt.actualEquipment.id));w(y,ut)}else w(y,Oe);requestAnimationFrame(()=>P(y,!0))}catch(De){console.error("[-]    :",De),requestAnimationFrame(()=>P(y,!0))}},pe=Fe=>Fe?WY.includes(Fe):!1,ze=Fe=>{const tt=F.find(ct=>ct.contractEquipment.id===Fe.id);(T==null?void 0:T.id)===Fe.id?(G(y,null),U(y,null)):(G(y,Fe),tt?U(y,tt.actualEquipment):U(y,null))},xt=Fe=>{(j==null?void 0:j.id)===Fe.id?U(y,null):U(y,Fe)},st=()=>{if(!T||!j)return;if(T.itemMidCd!==j.itemMidCd||T.model!==j.model){r==null||r("      .","warning");return}const Fe=j.eqtClCd||j.EQT_CL_CD;if(!pe(Fe)){r==null||r(`     .
`,"error");return}const tt=F.findIndex(ct=>ct.contractEquipment.id===T.id);if(tt>=0){const ct=[...F];ct[tt]={contractEquipment:T,actualEquipment:j,macAddress:j.macAddress||"",installLocation:""},w(y,ct)}else{const ct={contractEquipment:T,actualEquipment:j,macAddress:j.macAddress||"",installLocation:""};w(y,[...F,ct])}I(y,"idle"),U(y,null)},St=()=>{if(!j)return;const Fe=j.eqtClCd||j.EQT_CL_CD;if(!pe(Fe)){r==null||r(`     .
`,"error");return}const tt=F.findIndex(dt=>dt.actualEquipment.id===j.id);if(tt>=0){const dt=[...F],Je=dt.splice(tt,1)[0];w(y,dt);const De=Je.actualEquipment;L.some(Ne=>Ne.id===De.id)||k(y,De),I(y,"idle"),U(y,null),ne("removal");return}if(L.some(dt=>dt.id===j.id))return;$.some(dt=>dt.id===j.id)&&(k(y,j),ne("removal"))},ot=async(Fe,tt)=>{try{const ct=localStorage.getItem("userInfo");if(!ct){r==null||r("  .","error");return}const Mt=JSON.parse(ct),dt=Fe.map((De,$e)=>{let Ne=De.ITEM_MID_CD||De.ITM_MID_CD||De.EQT||De.EQT_CD||"",ye=De.EQT_CL||De.EQT_CL_CD||"",Ue=De.SVC_CMPS_ID||De.PROD_CMPS_ID||De.SVC_CMPS_SEQ||De.EQUIP_SEQ||"";return Ne=String(Ne).trim().padStart(2,"0"),ye=String(ye).trim().padStart(6,"0"),Ue=String(Ue||$e+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Mt.crrId||"",WRKR_ID:t.WRKR_ID||Mt.userId||Mt.workerId||"",REG_UID:Mt.userId||Mt.workerId||"A20130708",ITEM_MID_CD:Ne,EQT_CL:ye,SVC_CMPS_ID:Ue,EQT:Ne,EQT_CD:Ne,LENT:String(De.LENT||"10"),EQT_USE_STAT_CD:String(De.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(De.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(De.EQT_SALE_AMT||0),PROD_GRP:String(De.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(De.PROD_CD||t.PROD_CD||""),SVC_CD:String(De.SVC_CD||""),PROM_CNT:tt||"",SEL:"1",EQT_BASIC_YN:String(De.EQT_BASIC_YN||"N"),PROD_TYP:De.PROD_TYP,EQUIP_SEQ:De.EQUIP_SEQ}}),Je=await d0({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:tt||"",equipments:dt});if(Je.MSGCODE==="SUCCESS"||Je.MSGCODE==="0"||Je.code==="SUCCESS")r==null||r("  .","success"),await ie(!0);else throw new Error(Je.MESSAGE||Je.message||"   .")}catch(ct){throw console.error("[] :",ct),r==null||r(ct.message||"     .","error",!0),ct}},Be=async()=>{var Fe,tt,ct,Mt;if(F.length===0){r==null||r("    .","warning"),I(y,"fail");return}try{Q(!0),he(!0),E(y," ...");const dt=localStorage.getItem("userInfo");if(!dt){E(y,"    ."),I(y,"fail"),Q(!1);return}const Je=JSON.parse(dt),De=Je.userId||Je.id||"UNKNOWN",$e=Le=>{var gt,jt,Ve,Vt,ke;const vt=((gt=Le.actualEquipment)==null?void 0:gt.eqtClCd)||Le.eqtClCd||((jt=Le.actualEquipment)==null?void 0:jt.EQT_CL_CD)||"",je=((Ve=Le.actualEquipment)==null?void 0:Ve.itemMidCd)||Le.itemMidCd||((Vt=Le.actualEquipment)==null?void 0:Vt.ITEM_MID_CD)||"",ut=(((ke=Le.actualEquipment)==null?void 0:ke.type)||Le.type||"").toLowerCase();return!!(vt.startsWith("0904")||je==="02"||ut.includes("stb")||ut.includes(""))},Ne=Le=>{var gt,jt,Ve,Vt,ke;const vt=((gt=Le.actualEquipment)==null?void 0:gt.eqtClCd)||Le.eqtClCd||((jt=Le.actualEquipment)==null?void 0:jt.EQT_CL_CD)||"",je=((Ve=Le.actualEquipment)==null?void 0:Ve.itemMidCd)||Le.itemMidCd||((Vt=Le.actualEquipment)==null?void 0:Vt.ITEM_MID_CD)||"",ut=(((ke=Le.actualEquipment)==null?void 0:ke.type)||Le.type||"").toLowerCase();return!!(vt.startsWith("0902")||je==="03"||ut.includes("modem")||ut.includes(""))},ye=F.find($e),Ue=F.find(Ne),ue=((Fe=ye==null?void 0:ye.actualEquipment)==null?void 0:Fe.id)||"",Oe=((tt=Ue==null?void 0:Ue.actualEquipment)==null?void 0:tt.id)||"",Ze=await Xu(De,t.CTRT_ID||"",t.id,"SMR03",ue||((Mt=(ct=F[0])==null?void 0:ct.actualEquipment)==null?void 0:Mt.id)||"",Oe||"");Ze.O_IFSVC_RESULT&&Ze.O_IFSVC_RESULT.startsWith("TRUE")?(E(y,` 

: ${Ze.O_IFSVC_RESULT||""}`),I(y,"success")):(E(y,` 

${Ze.MESSAGE||"   "}`),I(y,"fail"))}catch(dt){E(y,` 

${dt.message||"   "}`),I(y,"fail")}finally{Q(!1)}},lt=(Fe,tt,ct)=>{Y(y,Fe,tt,ct==="1"?"0":"1")},pt=b.useMemo(()=>{const Fe=new Set(F.map(ct=>ct.actualEquipment.id));let tt=X.filter(ct=>!Fe.has(ct.id));return T&&(tt=tt.filter(ct=>ct.itemMidCd===T.itemMidCd&&ct.model===T.model)),tt},[F,X,T]);b.useMemo(()=>{const Fe=new Set(F.map(ct=>ct.actualEquipment.id));let tt=L.filter(ct=>!Fe.has(ct.id));return T&&(tt=tt.filter(ct=>ct.itemMidCd===T.itemMidCd&&ct.model===T.model)),tt},[F,L,T]);const mt=()=>{Z(!0),setTimeout(()=>{Z(!1),r==null||r("    .","info")},500)},Ye=async()=>{if(!(le||g)){xe(!0);try{await ie(!0),r==null||r("  .","success")}catch(Fe){console.error("[-]  :",Fe),r==null||r("   .","error")}finally{xe(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[le&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsx("button",{onClick:Ye,disabled:le||g,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${le||g?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:s.jsx(ki,{className:`w-4 h-4 ${le?"animate-spin":""}`})})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[se.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>!g&&ce(!0),disabled:g,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":_?"border-yellow-300 bg-yellow-100 text-yellow-700":p?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>h==null?void 0:h(),disabled:_||g,children:[_?s.jsx(pn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":K==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":K==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!g&&!de&&Be(),disabled:g||de,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>c?Ge(!0):Ce(!0),children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:c?"LDAP":""})]})]})]}),q?se.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:se.map(Fe=>{const tt=F.find(Mt=>Mt.contractEquipment.id===Fe.id),ct=(T==null?void 0:T.id)===Fe.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${g?tt?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":ct?"border-blue-500 bg-blue-50 cursor-pointer":tt?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!g&&ze(Fe),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),tt&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",tt.actualEquipment.model]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",tt.actualEquipment.serialNumber]}),tt.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",tt.macAddress]})]})]})},Fe.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!g&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!j||!(F.some(Fe=>Fe.actualEquipment.id===j.id)||$.some(Fe=>Fe.id===j.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-red-500 bg-red-50 text-red-600 hover:bg-red-100 cursor-pointer active:scale-95"}`,onClick:St,disabled:!j||!(F.some(Fe=>Fe.actualEquipment.id===j.id)||$.some(Fe=>Fe.id===j.id)),children:s.jsx(i0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!T||!j||F.some(Fe=>Fe.actualEquipment.id===j.id)?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:st,disabled:!T||!j||F.some(Fe=>Fe.actualEquipment.id===j.id),children:s.jsx(a0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!g&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${be==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>ne("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),L.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${be==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:L.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${be==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>ne("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),T&&pt.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${be==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:pt.length})]})})]}),be==="removal"?s.jsx(s.Fragment,{children:L.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:L.map((Fe,tt)=>{const ct=Fe.id,Mt=re[ct]||{},dt=Mt.EQT_LOSS_YN==="1"||Mt.PART_LOSS_BRK_YN==="1"||Mt.EQT_BRK_YN==="1"||Mt.EQT_CABL_LOSS_YN==="1"||Mt.EQT_CRDL_LOSS_YN==="1",Je=(j==null?void 0:j.id)===Fe.id;return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Je?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>xt(Fe),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Fe.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Fe.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Fe.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${dt?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:dt?"":""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map(De=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${Mt[De.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:$e=>{$e.stopPropagation(),lt(ct,De.key,Mt[De.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:Mt[De.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:De.label})]},De.key))})]},ct||tt)})})}):s.jsx(s.Fragment,{children:T?pt.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:pt.map(Fe=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(j==null?void 0:j.id)===Fe.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>xt(Fe),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Fe.serialNumber]}),Fe.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Fe.macAddress]})]})]}),(j==null?void 0:j.id)===Fe.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Fe.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var Mt;const Fe=t.WRK_CD_NM||_0(t.WRK_CD)||t.workType||"-",tt=t.PROD_NM||t.productName||((Mt=t.customer)==null?void 0:Mt.productName)||"-",ct=t.CTRT_STAT_NM||$u(t.CTRT_STAT)||"-";return s.jsx(m0,{isOpen:V,onClose:()=>ce(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:ct,prodGrp:t.PROD_GRP||"",prodNm:tt,wrkCdNm:Fe,onSave:ot,showToast:r,installedEquipmentCount:F.length})})(),!g&&s.jsx("button",{onClick:mt,disabled:ee,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${ee?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(o0,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(el,{isOpen:me,onClose:()=>Ce(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((at=t.customer)==null?void 0:at.id)}),s.jsx(g0,{isOpen:ge,onClose:()=>Ge(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),te&&Ju.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!de&&he(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Fe=>Fe.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:de?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(pn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):K==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(l0,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:J})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(bo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:J})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${K==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>he(!1),disabled:de,children:de?" ...":""})})]})}),document.body)]})},VY=t=>{switch(t){case"10":return"";case"20":return"";case"40":return"";default:return t||"-"}},zY=({isOpen:t,onClose:e,removedEquipmentsData:n=[],custId:r,rcptId:i,wrkId:a,ctrtId:o,mstSoId:c="",soId:u="",crrId:h="",wrkrId:m="",chgUid:_="",wrkCd:p="07",hideTransfer:g=!1,deferLossProcessing:C=!1,showToast:y,onSuccess:N,onSaveLossStatus:v,alreadyProcessedSerials:P=new Set})=>{const[w,M]=b.useState(!0),[k,B]=b.useState(!1),[G,U]=b.useState([]),[I,E]=b.useState([]),[A,Y]=b.useState(new Set),[se,X]=b.useState(null),[z,$]=b.useState(!1),[F,L]=b.useState(new Map),[re,fe]=b.useState({}),[T,j]=b.useState([]),[K,J]=b.useState(new Set),[q,V]=b.useState(!1);b.useEffect(()=>{t&&r&&i&&(M(!0),V(!1),X(null),U([]),E([]),Y(new Set),fe({}),J(new Set),ce())},[t,r,i,a]);const ce=async()=>{M(!0),X(null);try{const[Z,le,xe]=await Promise.all([wM({CUST_ID:r,RCPT_ID:i}),LM({WRK_ID:a}),Eo({WRK_ID:a,WRKR_ID:m,SO_ID:u,CUST_ID:r,CTRT_ID:o,RCPT_ID:i})]);E(le);const be=Z.length>0?Z.map(ie=>({...ie,ITEM_MID_CD:ie.ITEM_MID_CD||(ie.ITEM_CD?ie.ITEM_CD.substring(2,4):void 0)})):n.map(ie=>({EQT_NO:ie.EQT_NO,EQT_SERNO:ie.EQT_SERNO,EQT_CL_CD:ie.EQT_CL_CD||ie.EQT_CL,EQT_CL:ie.EQT_CL||ie.EQT_CL_CD,EQT_CL_NM:ie.EQT_CL_NM||"",ITEM_MID_CD:ie.ITEM_MID_CD,ITEM_MID_NM:ie.ITEM_MID_NM||"",ITEM_NM:ie.ITEM_MID_NM||"",MAC_ADDRESS:ie.MAC_ADDRESS||"",SVC_CMPS_ID:ie.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:ie.BASIC_PROD_CMPS_ID,LENT_YN:ie.LENT_YN,LENT_YN_NM:ie.LENT_YN_NM||VY(ie.LENT_YN),VOIP_CUSTOWN_EQT:ie.VOIP_CUSTOWN_EQT}));if(console.log("[]   :",be.length,"",Z.length>0?"(API )":"(  )"),U(be),be&&be.length>0){console.log("[]   ():",JSON.stringify(be[0],null,2));const ie=be.map(pe=>({EQT_NO:pe.EQT_NO,EQT_SERNO:pe.EQT_SERNO,EQT_CL_CD:pe.EQT_CL_CD||pe.EQT_CL,EQT_CL:pe.EQT_CL||pe.EQT_CL_CD,ITEM_MID_CD:pe.ITEM_MID_CD,SVC_CMPS_ID:pe.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:pe.BASIC_PROD_CMPS_ID,LENT_YN:pe.LENT_YN}));j(ie),console.log("[] EQT_NO :",ie.length,""),ie.forEach((pe,ze)=>{console.log(`[] ${ze+1}: EQT_SERNO=${pe.EQT_SERNO}, EQT_NO=${pe.EQT_NO}, EQT_CL_CD=${pe.EQT_CL_CD}`)})}const ne=new Map;be.forEach(ie=>{ie.EQT_SERNO&&ne.set(ie.EQT_SERNO,ie.EQT_CL_NM||ie.ITEM_NM||"-")}),L(ie=>new Map([...ie,...ne])),be.length===0&&X("      .")}catch(Z){console.error("   :",Z),X(Z.message||"   .")}finally{M(!1),requestAnimationFrame(()=>{V(!0)})}},me=Z=>{Y(le=>{const xe=new Set(le);return xe.has(Z)?(xe.delete(Z),fe(be=>{const ne={...be};return delete ne[Z],ne})):xe.add(Z),xe})},Ce=()=>{if(A.size===G.length)Y(new Set),fe({});else{const Z=G.filter(le=>le.EQT_SERNO).map(le=>le.EQT_SERNO);Y(new Set(Z))}},ge=(Z,le)=>{fe(xe=>{var be;return{...xe,[Z]:{...xe[Z],[le]:((be=xe[Z])==null?void 0:be[le])==="1"?"0":"1"}}})},Ge=Z=>{const le=re[Z];return le?le.EQT_LOSS_YN==="1"||le.PART_LOSS_BRK_YN==="1"||le.EQT_BRK_YN==="1"||le.EQT_CABL_LOSS_YN==="1"||le.EQT_CRDL_LOSS_YN==="1":!1},te=()=>{if(A.size===0){y==null||y("  .","error");return}if(g){const Z=[];if(A.forEach(le=>{Ge(le)||Z.push(le)}),Z.length>0){y==null||y(" (,  ) .","error");return}}$(!0)},he=async()=>{$(!1),B(!0);try{const Z=new Map(F);A.forEach(ot=>{const Be=G.find(lt=>lt.EQT_SERNO===ot);Be&&Be.EQT_SERNO&&Z.set(Be.EQT_SERNO,Be.EQT_CL_NM||Be.ITEM_NM||"-")}),L(Z);let le=0,xe=0,be=0,ne=0;const ie=[],pe=[],ze=[],xt=[];for(const ot of A){const Be=G.find(mt=>mt.EQT_SERNO===ot),lt=re[ot]||{};if(Ge(ot)&&Be){console.log(`[]   - ${ot}`,lt);const mt=T.find(De=>De.EQT_SERNO===ot)||n.find(De=>De.EQT_SERNO===ot),Ye=(mt==null?void 0:mt.EQT_NO)||Be.EQT_NO||"",at=(mt==null?void 0:mt.ITEM_MID_CD)||Be.ITEM_MID_CD||"",Fe=(mt==null?void 0:mt.EQT_CL_CD)||(mt==null?void 0:mt.EQT_CL)||Be.EQT_CL_CD||Be.EQT_CL||"",tt=(mt==null?void 0:mt.EQT_CL_NM)||Be.EQT_CL_NM||"",ct=(mt==null?void 0:mt.SVC_CMPS_ID)||Be.SVC_CMPS_ID||"",Mt=(mt==null?void 0:mt.BASIC_PROD_CMPS_ID)||Be.BASIC_PROD_CMPS_ID||"",dt=(mt==null?void 0:mt.LENT_YN)||Be.LENT_YN||"";if(C&&v){console.log(`[]   defer - ${ot}`),xt.push({EQT_NO:Ye,EQT_SERNO:ot,EQT_CL_CD:Fe,EQT_CL:Fe,EQT_CL_NM:tt,ITEM_MID_CD:at,SVC_CMPS_ID:ct,BASIC_PROD_CMPS_ID:Mt,LENT_YN:dt,EQT_LOSS_YN:lt.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:lt.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:lt.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:lt.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:lt.EQT_CRDL_LOSS_YN||"0"}),be++,ze.push(ot);continue}if(!Ye){console.error(`[] EQT_NO  - ${ot}`),ne++;continue}const Je=await MA({WRK_ID:a,CUST_ID:r,CTRT_ID:o,MST_SO_ID:c,SO_ID:u,EQT_NO:Ye,ITEM_MID_CD:at,EQT_CL_CD:Fe,EQT_CL:Fe,EQT_CL_NM:tt,REG_UID:_,WRK_CD:p,CRR_ID:h,WRKR_ID:m,RCPT_ID:i,SVC_CMPS_ID:ct,BASIC_PROD_CMPS_ID:Mt,OLD_LENT_YN:dt,EQT_CHG_GB:"02",REUSE_YN:"0",EQT_LOSS_YN:lt.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:lt.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:lt.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:lt.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:lt.EQT_CRDL_LOSS_YN||"0"});if((Je==null?void 0:Je.MSGCODE)==="SUCCESS"){be++,ze.push(ot),J(De=>new Set([...De,ot]));try{await Xu(_||m||"",o,a,"SMR05",Ye,"")}catch(De){console.log("[]    ():",De)}}else ne++,console.error(`[]    - ${ot}:`,Je==null?void 0:Je.MESSAGE)}else{if(g){console.log(`[] hideTransfer=true,   - ${ot} `);continue}const mt=await TA({MST_SO_ID:c,SO_ID:u,CUST_ID:r,CTRT_ID:o,RCPT_ID:i,WRK_ID:a,WRK_CD:p,CRR_ID:h,WRKR_ID:m,EQT_SERNO:ot,CHG_UID:_});if((mt==null?void 0:mt.MSGCODE)==="SUCCESS")le++,ze.push(ot);else if((mt==null?void 0:mt.MSGCODE)==="CHARGE")ie.push(ot);else{xe++;const Ye=(mt==null?void 0:mt.message)||(mt==null?void 0:mt.MESSAGE);Ye&&pe.push(Ye)}}}xt.length>0&&v&&(console.log("[EquipmentMoveModal]    (  ):",xt.length,""),v(xt)),await ce(),Y(new Set),fe({});const st=le+be,St=xe+ne;if(ie.length>0)y==null||y(` [${ie.join(", ")}]   .`,"error");else if(St>0){const ot=pe.length>0?pe.join(`
`):`  (: ${le}, : ${be}, : ${St})`;y==null||y(ot,"error")}else be>0&&le>0?y==null||y(` ${le},  ${be} `,"success"):be>0?y==null||y(` ${be} `,"success"):y==null||y("  .","success");st>0&&(N==null||N(ze))}catch(Z){console.error("  :",Z),y==null||y(Z.message||"  .","error",!0)}finally{B(!1)}},de=Z=>I.some(le=>le.EQT_SERNO===Z&&le.SUCCESS_GUBN==="SUCCESS")||K.has(Z)||P.has(Z),Q=Z=>K.has(Z)||P.has(Z),ee=s.jsxs(s.Fragment,{children:[!g&&s.jsx("button",{onClick:te,disabled:k||A.size===0,className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg text-sm sm:text-base font-semibold transition-colors flex items-center justify-center gap-2",children:k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),s.jsxs("span",{children:[" (",A.size,")"]})]})}),s.jsx("button",{onClick:()=>{if(g&&C&&v&&A.size>0){const Z=[];for(const le of A){const xe=G.find(ne=>ne.EQT_SERNO===le),be=re[le]||{};if(xe){const ne=T.find(ie=>ie.EQT_SERNO===le)||n.find(ie=>ie.EQT_SERNO===le);Z.push({EQT_NO:(ne==null?void 0:ne.EQT_NO)||xe.EQT_NO||"",EQT_SERNO:le,EQT_CL_CD:(ne==null?void 0:ne.EQT_CL_CD)||(ne==null?void 0:ne.EQT_CL)||xe.EQT_CL_CD||xe.EQT_CL||"",EQT_CL:(ne==null?void 0:ne.EQT_CL)||(ne==null?void 0:ne.EQT_CL_CD)||xe.EQT_CL||xe.EQT_CL_CD||"",EQT_CL_NM:(ne==null?void 0:ne.EQT_CL_NM)||xe.EQT_CL_NM||"",ITEM_MID_CD:(ne==null?void 0:ne.ITEM_MID_CD)||xe.ITEM_MID_CD||"",SVC_CMPS_ID:(ne==null?void 0:ne.SVC_CMPS_ID)||xe.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:(ne==null?void 0:ne.BASIC_PROD_CMPS_ID)||xe.BASIC_PROD_CMPS_ID||"",LENT_YN:(ne==null?void 0:ne.LENT_YN)||xe.LENT_YN||"",EQT_LOSS_YN:be.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:be.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:be.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:be.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:be.EQT_CRDL_LOSS_YN||"0"})}}Z.length>0&&(console.log("[EquipmentMoveModal]    :",Z.length,""),v(Z),y==null||y(` ${Z.length} .`,"success"))}e()},disabled:k,className:`${g?"flex-1":""} px-3 sm:px-4 py-2 sm:py-2.5 ${g?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} rounded-lg text-sm sm:text-base font-semibold transition-colors disabled:opacity-50`,children:g?"":""})]});return s.jsxs(s.Fragment,{children:[s.jsx(Ra,{isOpen:t,onClose:k?()=>{}:e,title:g?"":"  ",size:"large",footer:ee,children:w||!q?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"   ..."})]}):se&&G.length===0&&I.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-red-500 mb-2",children:se}),s.jsx("button",{onClick:()=>{V(!1),ce()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:" "})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" "}),s.jsx("button",{onClick:Ce,className:"text-xs text-blue-600 hover:underline",children:A.size===G.length?"":""})]}),G.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500 bg-gray-50 rounded-lg",children:I.some(Z=>Z.SUCCESS_GUBN==="SUCCESS")?"   .":"    ."}):s.jsx("div",{className:"space-y-2",children:G.map((Z,le)=>{const xe=Z.EQT_SERNO||"",be=xe?de(xe):!1,ne=xe?A.has(xe):!1,ie=re[xe]||{},pe=Ge(xe);return s.jsx("div",{className:`p-3 rounded-lg border ${be?"bg-green-50 border-green-200":pe?"bg-orange-50 border-orange-300":ne?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:ne,onChange:()=>xe&&me(xe),disabled:be||k,className:"mt-1 w-5 h-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500 disabled:opacity-50"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:Z.EQT_CL_NM||Z.ITEM_NM||""}),be&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full",children:Q(xe)?"":""}),pe&&!be&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded-full",children:""}),ne&&!pe&&!be&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full",children:""})]}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsxs("div",{children:["S/N: ",Z.EQT_SERNO||"-"]}),s.jsxs("div",{className:"flex gap-4 mt-1",children:[s.jsx("span",{children:Z.LENT_YN_NM||"-"}),s.jsx("span",{children:Z.NOTRECEV||"-"}),s.jsx("span",{children:Z.EQT_STAT_CD||"-"})]}),Z.MAC_ADDRESS&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["MAC: ",Z.MAC_ADDRESS]})]}),ne&&!be&&s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 mt-3 border-t border-gray-200",children:[s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ie.EQT_LOSS_YN==="1",onChange:()=>ge(xe,"EQT_LOSS_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ie.PART_LOSS_BRK_YN==="1",onChange:()=>ge(xe,"PART_LOSS_BRK_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ie.EQT_BRK_YN==="1",onChange:()=>ge(xe,"EQT_BRK_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ie.EQT_CABL_LOSS_YN==="1",onChange:()=>ge(xe,"EQT_CABL_LOSS_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg active:bg-gray-100 whitespace-nowrap cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ie.EQT_CRDL_LOSS_YN==="1",onChange:()=>ge(xe,"EQT_CRDL_LOSS_YN"),disabled:k,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]})]})]})]})},Z.EQT_SERNO||le)})})]}),I.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:" "}),s.jsx("div",{className:"max-h-48 overflow-auto space-y-2",children:I.map((Z,le)=>s.jsxs("div",{className:`p-3 rounded-lg border ${Z.SUCCESS_GUBN==="SUCCESS"?"bg-green-50 border-green-200":Z.SUCCESS_GUBN==="CHARGE"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsxs("span",{className:"text-xs text-gray-500 shrink-0",children:["#",le+1]}),s.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:F.get(Z.EQT_SERNO||"")||Z.EQT_CL_NM||Z.ITEM_NM||"-"})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full whitespace-nowrap shrink-0 ${Z.SUCCESS_GUBN==="SUCCESS"?"bg-green-500 text-white":Z.SUCCESS_GUBN==="CHARGE"?"bg-yellow-500 text-white":"bg-red-500 text-white"}`,children:Z.SUCCESS_GUBN==="SUCCESS"?"":Z.SUCCESS_GUBN==="CHARGE"?"":Z.SUCCESS_GUBN||"-"})]}),s.jsxs("div",{className:"mt-1.5 text-xs text-gray-600 font-mono",children:["S/N: ",Z.EQT_SERNO||"-"]})]},Z.EQT_SERNO||le))})]})]})}),!g&&s.jsx(Ba,{isOpen:z,onClose:()=>$(!1),onConfirm:he,title:"",message:" ?     .",type:"confirm",confirmText:"",cancelText:""})]})},HY=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u="",onLdapConnect:h,isLdapDone:m=!1,ldapLoading:_=!1,ldapBlocked:p=!1})=>{var ye,Ue;const g=o||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:C}=ta(),y=t.id,{initWorkState:N,setApiData:v,setDataLoaded:P,setInstalledEquipments:w,setMarkedForRemoval:M,addMarkedForRemoval:k,removeMarkedForRemoval:B,setSelectedContract:G,setSelectedStock:U,setSignalStatus:I,setSignalResult:E,setPendingLossStatusList:A,setRemovalStatus:Y}=Ui(),{contractEquipments:se,technicianEquipments:X,customerEquipments:z,removeEquipments:$,installedEquipments:F,markedForRemoval:L,removalStatus:re,pendingLossStatusList:fe,selectedContract:T,selectedStock:j,signalStatus:K,signalResult:J,isReady:q}=xa(y),V=z.length,[ce,me]=b.useState(!1),[Ce,ge]=b.useState(!1),[Ge,te]=b.useState(!1),[he,de]=b.useState(!1),[Q,ee]=b.useState(!1),[Z,le]=b.useState(!1),[xe,be]=b.useState(!1),[ne,ie]=b.useState(!1),[pe,ze]=b.useState("stock"),[xt,st]=b.useState([]),[St,ot]=b.useState(new Set),[Be,lt]=b.useState(new Set),pt=t.WRK_CD==="07"&&z.length===0?xt.filter(ue=>!St.has(ue.EQT_SERNO||"")).length:0;b.useEffect(()=>{if(q&&(F.length>0||L.length>0||se.length>0)){console.log("[-]    -   ");return}N(y),mt()},[t.id]);const mt=async(ue=!1)=>{var Oe,Ze,Le,vt,je,ut;try{let gt;const jt=localStorage.getItem("userInfo"),Ve=jt?JSON.parse(jt):null;if(console.log("[-] WRKR_ID :",{"workItem.WRKR_ID":t.WRKR_ID,"user.userId":Ve==null?void 0:Ve.userId,"user.workerId":Ve==null?void 0:Ve.workerId," WRKR_ID":t.WRKR_ID||(Ve==null?void 0:Ve.userId)||(Ve==null?void 0:Ve.workerId)||"",forceRefresh:ue}),i&&i.contractEquipments&&i.contractEquipments.length>0&&!ue)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),console.log('[-]  preloaded    -    " "  '),gt=i;else{ue?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const _t=localStorage.getItem("userInfo");if(!_t){console.error("  .");return}const qt=JSON.parse(_t),Ot=P_(t.WRK_CD),_e={WRKR_ID:t.WRKR_ID||qt.userId||qt.workerId||"",SO_ID:t.SO_ID||qt.soId,WRK_ID:t.id,CUST_ID:((Oe=t.customer)==null?void 0:Oe.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:Ot,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-] API :",_e),gt=await Eo(_e),ue&&a&&(console.log("[-]   preloadedData "),a(gt))}console.log("[-] API :",{contractEquipments:((Ze=gt.contractEquipments)==null?void 0:Ze.length)||0,technicianEquipments:((Le=gt.technicianEquipments)==null?void 0:Le.length)||0,customerEquipments:((vt=gt.customerEquipments)==null?void 0:vt.length)||0,removedEquipments:((je=gt.removedEquipments)==null?void 0:je.length)||0});const ke=((ut=t.customer)==null?void 0:ut.id)||t.CUST_ID||"",ss=t.RCPT_ID||"";if(ke&&ss)try{const _t=await wM({CUST_ID:ke,RCPT_ID:ss});console.log("[-]  :",_t.length,""),st(_t)}catch(_t){console.error("[-]    :",_t)}const ls={kpiProdGrpCd:gt.kpiProdGrpCd,prodChgGb:gt.prodChgGb,chgKpiProdGrpCd:gt.chgKpiProdGrpCd,prodGrp:gt.prodGrp};C(ls),window.__equipmentFilterData=ls;const ds=(gt.contractEquipments||[]).map(_t=>({id:_t.SVC_CMPS_ID||_t.PROD_CMPS_ID,type:_t.ITEM_MID_NM||_t.EQT_NM,model:_t.EQT_CL_NM,serialNumber:"N/A",itemMidCd:_t.ITEM_MID_CD,eqtClCd:_t.EQT_CL_CD||_t.EQT_CL,SVC_CMPS_ID:_t.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:_t.BASIC_PROD_CMPS_ID,PROD_CD:_t.PROD_CD,SVC_CD:_t.SVC_CD})),vs=(gt.technicianEquipments||[]).map(_t=>({id:_t.EQT_NO,type:_t.ITEM_MID_NM,model:_t.EQT_CL_NM,serialNumber:_t.EQT_SERNO,itemMidCd:_t.ITEM_MID_CD,eqtClCd:_t.EQT_CL_CD||_t.EQT_CL,macAddress:_t.MAC_ADDRESS,SVC_CMPS_ID:_t.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:_t.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:_t.EQT_PROD_CMPS_ID,PROD_CD:_t.PROD_CD,SVC_CD:_t.SVC_CD,EQT_SALE_AMT:_t.EQT_SALE_AMT,MST_SO_ID:_t.MST_SO_ID,SO_ID:_t.SO_ID,OLD_LENT_YN:_t.OLD_LENT_YN,LENT:_t.LENT,LENT_YN:_t.LENT_YN,ITLLMT_PRD:_t.ITLLMT_PRD,EQT_USE_STAT_CD:_t.EQT_USE_STAT_CD})),Ss=new Set,Ae=(gt.customerEquipments||[]).map(_t=>{const qt=ds.find(Ot=>Ot.itemMidCd===_t.ITEM_MID_CD&&!Ss.has(Ot.id));return qt&&Ss.add(qt.id),{contractEquipment:qt||{id:"unknown",type:_t.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:_t.ITEM_MID_CD},actualEquipment:{id:_t.EQT_NO,type:_t.ITEM_MID_NM,model:_t.EQT_CL_NM,serialNumber:_t.EQT_SERNO,itemMidCd:_t.ITEM_MID_CD,eqtClCd:_t.EQT_CL_CD||_t.EQT_CL,macAddress:_t.MAC_ADDRESS||_t.MAC_ADDR,LENT_YN:_t.LENT_YN,VOIP_CUSTOWN_EQT:_t.VOIP_CUSTOWN_EQT},macAddress:_t.MAC_ADDRESS||_t.MAC_ADDR,installLocation:_t.INSTL_LCTN}}),ft=(gt.customerEquipments||[]).map(_t=>({id:_t.EQT_NO,type:_t.ITEM_MID_NM,model:_t.EQT_CL_NM,serialNumber:_t.EQT_SERNO,itemMidCd:_t.ITEM_MID_CD,eqtClCd:_t.EQT_CL_CD||_t.EQT_CL,macAddress:_t.MAC_ADDRESS||_t.MAC_ADDR,SVC_CMPS_ID:_t.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:_t.BASIC_PROD_CMPS_ID,LENT_YN:_t.LENT_YN,VOIP_CUSTOWN_EQT:_t.VOIP_CUSTOWN_EQT})),rt=(gt.removedEquipments||[]).map(_t=>({id:_t.EQT_NO,type:_t.ITEM_MID_NM,model:_t.EQT_CL_NM,serialNumber:_t.EQT_SERNO,itemMidCd:_t.ITEM_MID_CD,eqtClCd:_t.EQT_CL_CD||_t.EQT_CL,macAddress:_t.MAC_ADDRESS||_t.MAC_ADDR,installLocation:_t.INSTL_LCTN,SVC_CMPS_ID:_t.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:_t.BASIC_PROD_CMPS_ID,MST_SO_ID:_t.MST_SO_ID,SO_ID:_t.SO_ID,LENT_YN:_t.LENT_YN,VOIP_CUSTOWN_EQT:_t.VOIP_CUSTOWN_EQT}));v(y,{contractEquipments:ds,technicianEquipments:vs,customerEquipments:ft,removeEquipments:rt,filteringData:ls}),t.WRK_CD==="07"&&t.id&&LM({WRK_ID:t.id}).then(_t=>{const qt=new Set(_t.filter(Ot=>Ot.SUCCESS_GUBN==="SUCCESS").map(Ot=>Ot.EQT_SERNO).filter(Boolean));qt.size>0&&ot(qt)}).catch(()=>{});const Wt=L||[];if(Ae.length>0)if(console.log("[-] API     :",Ae.length,""),Wt.length>0){const _t=new Set(Wt.map(Ot=>Ot.id)),qt=Ae.filter(Ot=>!_t.has(Ot.actualEquipment.id));w(y,qt)}else w(y,Ae);requestAnimationFrame(()=>P(y,!0))}catch(gt){console.error("[-]    :",gt),requestAnimationFrame(()=>P(y,!0))}},Ye=ue=>{const Oe=F.find(Ze=>Ze.contractEquipment.id===ue.id);(T==null?void 0:T.id)===ue.id?(G(y,null),U(y,null)):(G(y,ue),Oe?U(y,Oe.actualEquipment):U(y,null))},at=ue=>{(j==null?void 0:j.id)===ue.id?U(y,null):U(y,ue)},Fe=()=>{if(!T||!j)return;if(T.itemMidCd!==j.itemMidCd||T.model!==j.model){r==null||r("      .","warning");return}const ue=F.findIndex(Oe=>Oe.contractEquipment.id===T.id);if(ue>=0){const Oe=[...F];Oe[ue]={contractEquipment:T,actualEquipment:j,macAddress:j.macAddress||"",installLocation:""},w(y,Oe)}else{const Oe={contractEquipment:T,actualEquipment:j,macAddress:j.macAddress||"",installLocation:""};w(y,[...F,Oe])}I(y,"idle"),U(y,null)},tt=()=>{if(!j)return;const ue=F.findIndex(Le=>Le.actualEquipment.id===j.id);if(ue>=0){const Le=[...F],vt=Le.splice(ue,1)[0];w(y,Le);const je=vt.actualEquipment;L.some(gt=>gt.id===je.id)||k(y,je),I(y,"idle"),U(y,null),ze("removal");return}if(L.some(Le=>Le.id===j.id))return;$.some(Le=>Le.id===j.id)&&(k(y,j),ze("removal"))},ct=async(ue,Oe)=>{try{const Ze=localStorage.getItem("userInfo");if(!Ze){r==null||r("  .","error");return}const Le=JSON.parse(Ze),vt=ue.map((ut,gt)=>{let jt=ut.ITEM_MID_CD||ut.ITM_MID_CD||ut.EQT||ut.EQT_CD||"",Ve=ut.EQT_CL||ut.EQT_CL_CD||"",Vt=ut.SVC_CMPS_ID||ut.PROD_CMPS_ID||ut.SVC_CMPS_SEQ||ut.EQUIP_SEQ||"";return jt=String(jt).trim().padStart(2,"0"),Ve=String(Ve).trim().padStart(6,"0"),Vt=String(Vt||gt+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Le.crrId||"",WRKR_ID:t.WRKR_ID||Le.userId||Le.workerId||"",REG_UID:Le.userId||Le.workerId||"A20130708",ITEM_MID_CD:jt,EQT_CL:Ve,SVC_CMPS_ID:Vt,EQT:jt,EQT_CD:jt,LENT:String(ut.LENT||"10"),EQT_USE_STAT_CD:String(ut.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(ut.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(ut.EQT_SALE_AMT||0),PROD_GRP:String(ut.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(ut.PROD_CD||t.PROD_CD||""),SVC_CD:String(ut.SVC_CD||""),PROM_CNT:Oe||"",SEL:"1",EQT_BASIC_YN:String(ut.EQT_BASIC_YN||"N"),PROD_TYP:ut.PROD_TYP,EQUIP_SEQ:ut.EQUIP_SEQ}}),je=await d0({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:Oe||"",equipments:vt});if(je.MSGCODE==="SUCCESS"||je.MSGCODE==="0"||je.code==="SUCCESS")r==null||r("  .","success"),await mt(!0);else throw new Error(je.MESSAGE||je.message||"   .")}catch(Ze){throw console.error("[] :",Ze),r==null||r(Ze.message||"     .","error",!0),Ze}},Mt=async()=>{var ue,Oe,Ze,Le;if(F.length===0){r==null||r("    .","warning"),I(y,"fail");return}try{le(!0),ee(!0),E(y," ...");const vt=localStorage.getItem("userInfo");if(!vt){E(y,"    ."),I(y,"fail"),le(!1);return}const je=JSON.parse(vt),ut=je.userId||je.id||"UNKNOWN",gt=ds=>{var ft,rt,Wt,_t,qt;const vs=((ft=ds.actualEquipment)==null?void 0:ft.eqtClCd)||ds.eqtClCd||((rt=ds.actualEquipment)==null?void 0:rt.EQT_CL_CD)||"",Ss=((Wt=ds.actualEquipment)==null?void 0:Wt.itemMidCd)||ds.itemMidCd||((_t=ds.actualEquipment)==null?void 0:_t.ITEM_MID_CD)||"",Ae=(((qt=ds.actualEquipment)==null?void 0:qt.type)||ds.type||"").toLowerCase();return!!(vs.startsWith("0904")||Ss==="02"||Ae.includes("stb")||Ae.includes(""))},jt=ds=>{var ft,rt,Wt,_t,qt;const vs=((ft=ds.actualEquipment)==null?void 0:ft.eqtClCd)||ds.eqtClCd||((rt=ds.actualEquipment)==null?void 0:rt.EQT_CL_CD)||"",Ss=((Wt=ds.actualEquipment)==null?void 0:Wt.itemMidCd)||ds.itemMidCd||((_t=ds.actualEquipment)==null?void 0:_t.ITEM_MID_CD)||"",Ae=(((qt=ds.actualEquipment)==null?void 0:qt.type)||ds.type||"").toLowerCase();return!!(vs.startsWith("0902")||Ss==="03"||Ae.includes("modem")||Ae.includes(""))},Ve=F.find(gt),Vt=F.find(jt),ke=((ue=Ve==null?void 0:Ve.actualEquipment)==null?void 0:ue.id)||"",ss=((Oe=Vt==null?void 0:Vt.actualEquipment)==null?void 0:Oe.id)||"",ls=await Xu(ut,t.CTRT_ID||"",t.id,"SMR03",ke||((Le=(Ze=F[0])==null?void 0:Ze.actualEquipment)==null?void 0:Le.id)||"",ss||"");ls.O_IFSVC_RESULT&&ls.O_IFSVC_RESULT.startsWith("TRUE")?(E(y,` 

: ${ls.O_IFSVC_RESULT||""}`),I(y,"success")):(E(y,` 

${ls.MESSAGE||"   "}`),I(y,"fail"))}catch(vt){E(y,` 

${vt.message||"   "}`),I(y,"fail")}finally{le(!1)}},dt=ue=>{console.log("[-]    (  API  ):",ue.length,"");const Oe=new Set(ue.map(Le=>Le.EQT_SERNO)),Ze=fe.filter(Le=>!Oe.has(Le.EQT_SERNO));A(y,[...Ze,...ue])},Je=b.useMemo(()=>{const ue=new Set(F.map(Le=>Le.actualEquipment.id));let Oe=X.filter(Le=>!ue.has(Le.id));return T&&(Oe=Oe.filter(Le=>Le.itemMidCd===T.itemMidCd&&Le.model===T.model)),(St.size>0||Be.size>0)&&Oe.sort((Le,vt)=>{const je=Le.serialNumber||"",ut=vt.serialNumber||"",gt=Be.has(je),jt=Be.has(ut),Ve=St.has(je),Vt=St.has(ut);return gt&&!jt?-1:!gt&&jt?1:Ve&&!Vt?-1:!Ve&&Vt?1:0}),Oe},[F,X,T,St,Be]);b.useMemo(()=>{const ue=new Set(F.map(Ze=>Ze.actualEquipment.id));let Oe=L.filter(Ze=>!ue.has(Ze.id));return T&&(Oe=Oe.filter(Ze=>Ze.itemMidCd===T.itemMidCd&&Ze.model===T.model)),Oe},[F,L,T]);const De=b.useMemo(()=>{const ue=new Set(F.map(Ze=>Ze.actualEquipment.id));return[...L,...$.filter(Ze=>!ue.has(Ze.id)&&!L.some(Le=>Le.id===Ze.id))]},[L,$,F]),$e=()=>{be(!0),setTimeout(()=>{be(!1),r==null||r("    .","info")},500)},Ne=async()=>{if(!(ne||g)){ie(!0);try{await mt(!0),r==null||r("  .","success")}catch(ue){console.error("[-]  :",ue),r==null||r("   .","error")}finally{ie(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[ne&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsx("button",{onClick:Ne,disabled:ne||g,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${ne||g?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:s.jsx(ki,{className:`w-4 h-4 ${ne?"animate-spin":""}`})})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[se.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>!g&&me(!0),disabled:g,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":_?"border-yellow-300 bg-yellow-100 text-yellow-700":p?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>h==null?void 0:h(),disabled:_||g,children:[_?s.jsx(pn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":K==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":K==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!g&&!Z&&Mt(),disabled:g||Z,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:`relative flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g||z.length>0?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-indigo-200 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 hover:border-indigo-300"}`,onClick:()=>!g&&z.length===0&&de(!0),disabled:g||z.length>0,children:[pt>0&&s.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[20px] h-5 px-1.5 flex items-center justify-center text-xs font-bold text-white bg-red-500 rounded-full shadow-sm",children:pt}),s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>c?te(!0):ge(!0),children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:c?"LDAP":""})]})]})]}),q?se.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:se.map(ue=>{const Oe=F.find(Le=>Le.contractEquipment.id===ue.id),Ze=(T==null?void 0:T.id)===ue.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${g?Oe?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":Ze?"border-blue-500 bg-blue-50 cursor-pointer":Oe?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!g&&Ye(ue),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:ue.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:ue.model})]}),Oe&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",Oe.actualEquipment.model]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",Oe.actualEquipment.serialNumber]}),Oe.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",Oe.macAddress]})]})]})},ue.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!g&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!j||!F.some(ue=>ue.actualEquipment.id===(j==null?void 0:j.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-red-500 bg-red-50 text-red-600 hover:bg-red-100 cursor-pointer active:scale-95"}`,onClick:tt,disabled:!j||!F.some(ue=>ue.actualEquipment.id===(j==null?void 0:j.id)),children:s.jsx(i0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!j||F.some(ue=>ue.actualEquipment.id===(j==null?void 0:j.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!j)return;if(L.some(Ze=>Ze.id===j.id)){if(T&&(T.itemMidCd!==j.itemMidCd||T.model!==j.model)){r==null||r("      .","warning");return}const Ze=T||se.find(je=>je.itemMidCd===j.itemMidCd&&je.model===j.model);if(!Ze){r==null||r("  .","warning");return}if(F.find(je=>je.contractEquipment.id===Ze.id)){r==null||r("   .","warning");return}const vt={contractEquipment:Ze,actualEquipment:j,macAddress:j.macAddress||""};w(y,[...F,vt]),B(y,j.id),U(y,null),r==null||r(" .","success");return}if(!T){r==null||r("   .","warning");return}if(F.find(Ze=>Ze.contractEquipment.id===T.id)){r==null||r("   .","warning");return}Fe()},disabled:!j||F.some(ue=>ue.actualEquipment.id===(j==null?void 0:j.id)),children:s.jsx(a0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!g&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[ne&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),z.length>0?s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${pe==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>ze("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${pe==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:De.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${pe==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>ze("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),T&&Je.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${pe==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:Je.length})]})})]}):s.jsx("div",{className:"py-3 px-4 border-b-2 border-blue-500",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-blue-600",children:""}),T&&Je.length>0&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-bold rounded-full bg-blue-500 text-white",children:Je.length})]})}),z.length>0&&pe==="removal"?s.jsx("div",{className:"p-3 sm:p-4 space-y-3 max-h-80 overflow-y-auto",children:De.map((ue,Oe)=>{const Ze=ue.id,Le=(j==null?void 0:j.id)===Ze,vt=L.some(je=>je.id===Ze);return s.jsx("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Le?"border-blue-500 bg-blue-50":vt?"border-red-200 bg-red-50 hover:border-red-300":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>at(ue),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${vt?"bg-red-500 text-white":"bg-orange-500 text-white"}`,children:vt?"":Oe+1}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:ue.type}),s.jsx("div",{className:"text-xs text-gray-600",children:ue.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",ue.serialNumber]}),ue.macAddress&&s.jsxs("div",{className:"text-xs text-gray-500",children:["MAC: ",ue.macAddress]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${vt?"bg-red-500 text-white":"bg-orange-500 text-white"}`,children:vt?"":""})]})},`removal-${Ze||Oe}`)})}):s.jsx(s.Fragment,{children:T?Je.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:Je.map(ue=>{const Oe=ue.serialNumber||"",Ze=Be.has(Oe),Le=St.has(Oe),vt=Ze||Le;return s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(j==null?void 0:j.id)===ue.id?"border-blue-500 bg-blue-50":Ze?"border-purple-500 bg-purple-50 ring-2 ring-purple-300 ring-opacity-50 animate-pulse":Le?"border-purple-400 bg-purple-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>at(ue),children:[vt&&s.jsx("div",{className:`absolute -top-2 left-3 px-2 py-0.5 text-white text-[0.625rem] sm:text-xs font-bold rounded-full shadow-sm ${Ze?"bg-purple-600":"bg-purple-500"}`,children:Ze?" ":""}),s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:ue.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:ue.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",ue.serialNumber]}),ue.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",ue.macAddress]})]})]}),(j==null?void 0:j.id)===ue.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},ue.id)})}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var Le;const ue=t.WRK_CD_NM||_0(t.WRK_CD)||t.workType||"-",Oe=t.PROD_NM||t.productName||((Le=t.customer)==null?void 0:Le.productName)||"-",Ze=t.CTRT_STAT_NM||$u(t.CTRT_STAT)||"-";return s.jsx(m0,{isOpen:ce,onClose:()=>me(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:Ze,prodGrp:t.PROD_GRP||"",prodNm:Oe,wrkCdNm:ue,onSave:ct,showToast:r,installedEquipmentCount:F.length,customerEquipmentCount:V})})(),!g&&s.jsx("button",{onClick:$e,disabled:xe,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${xe?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(o0,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(el,{isOpen:Ce,onClose:()=>ge(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((ye=t.customer)==null?void 0:ye.id)}),s.jsx(g0,{isOpen:Ge,onClose:()=>te(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),s.jsx(zY,{isOpen:he,onClose:()=>{de(!1),mt(!0)},removedEquipmentsData:($.length>0?$:z).map(ue=>({EQT_NO:ue.id||ue.EQT_NO||"",EQT_SERNO:ue.serialNumber||ue.EQT_SERNO||"",EQT_CL_CD:ue.eqtClCd||ue.EQT_CL_CD||ue.EQT_CL||"",EQT_CL_NM:ue.model||ue.EQT_CL_NM||"",ITEM_MID_CD:ue.itemMidCd||ue.ITEM_MID_CD||"",ITEM_MID_NM:ue.type||ue.ITEM_MID_NM||"",MAC_ADDRESS:ue.macAddress||ue.MAC_ADDRESS||"",SVC_CMPS_ID:ue.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:ue.BASIC_PROD_CMPS_ID||"",LENT_YN:ue.LENT_YN||"",VOIP_CUSTOWN_EQT:ue.VOIP_CUSTOWN_EQT||""})),custId:t.CUST_ID||((Ue=t.customer)==null?void 0:Ue.id)||"",rcptId:t.RCPT_ID||"",wrkId:t.id,ctrtId:t.CTRT_ID||"",hideTransfer:!1,mstSoId:t.MST_SO_ID||"",soId:t.SO_ID||"",crrId:t.CRR_ID||"",wrkrId:t.WRKR_ID||"",chgUid:t.REG_UID||t.WRKR_ID||"",showToast:r,deferLossProcessing:!1,onSaveLossStatus:dt,alreadyProcessedSerials:St,onSuccess:ue=>{console.log("[EquipmentMoveRemoval]   -  :",ue),ot(new Set([...St,...ue])),lt(new Set(ue)),setTimeout(()=>{lt(new Set)},1e4)}}),Q&&Ju.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!Z&&ee(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:ue=>ue.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:Z?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(pn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):K==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(l0,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:J})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(bo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:J})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${K==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>ee(!1),disabled:Z,children:Z?" ...":""})})]})}),document.body)]})},qY=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1})=>{const c=t.id,u=o||t.WRK_STAT_CD==="4"||t.status==="",{initWorkState:h,setApiData:m,setDataLoaded:_,toggleRemovalStatus:p,setFullRemovalStatus:g,setRemovalStatus:C,setReuseAll:y}=Ui(),{removeEquipments:N,removalStatus:v,isReady:P}=xa(c),[w,M]=b.useState(!1),[k,B]=b.useState(!1),G=Ui(X=>{var z;return((z=X.workStates[c])==null?void 0:z.reuseAll)??!1}),U=X=>{y(c,X)},I=async X=>{var z;try{const $=localStorage.getItem("userInfo"),F=$?JSON.parse($):{},L=await x_({RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",CRR_ID:t.CRR_ID||"",WRKR_ID:t.WRKR_ID||F.userId||"",PROD_CD:t.PROD_CD||"",CRR_TSK_CL:"02",WRK_ID:t.id||"",ADDR_ORD:t.ADDR_ORD||((z=t.customer)==null?void 0:z.ADDR_ORD)||"",WRK_CD:t.WRK_CD||"08",WRK_STAT_CD:t.WRK_STAT_CD||""}),re=(L==null?void 0:L.MVM_TP)||"",fe=(L==null?void 0:L.WRK_STAT_CD)||"",T=(L==null?void 0:L.CTRT_ID)||"",j=(L==null?void 0:L.OLD_CTRT_ID)||"",K=fe==="2";B(K),console.log("[-]  :",{WRK_STAT_CD:fe,CTRT_ID:T,OLD_CTRT_ID:j,:K}),X&&(K?(y(c,!0),console.log("[-]   : true")):y(c,!1))}catch($){console.error("[-]   :",$),B(!1),X&&y(c,!1)}};b.useEffect(()=>{const X=!P||N.length===0;if(I(X),!X){console.log("[-]    -   , reuseAll:",G);return}h(c),E()},[t.id]);const E=async(X=!1)=>{var z,$;try{console.log("[-]    - isWorkCompleted:",u,"WRK_STAT_CD:",t.WRK_STAT_CD);let F;if(i&&!X)console.log("[-] Pre-loaded   - API  "),F=i;else{const re=localStorage.getItem("userInfo");if(!re){console.error("  .");return}const fe=JSON.parse(re),T={WRKR_ID:t.WRKR_ID||fe.userId||fe.workerId||"",SO_ID:t.SO_ID||fe.soId,WRK_ID:t.id,CUST_ID:((z=t.customer)==null?void 0:z.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"08",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-]    (API )"),console.log("[-] :",T),F=await Eo(T)}console.log("[-] :"),console.log("  -  (output5):",(($=F.removedEquipments)==null?void 0:$.length)||0,"");const L=(F.removedEquipments||[]).map(re=>({...re,id:re.EQT_NO,type:re.ITEM_MID_NM,model:re.EQT_CL_NM,serialNumber:re.EQT_SERNO,itemMidCd:re.ITEM_MID_CD,eqtClCd:re.EQT_CL_CD||re.EQT_CL,macAddress:re.MAC_ADDRESS||re.MAC_ADDR,installLocation:re.INSTL_LCTN}));console.log("[-]  :"),console.log("  -  :",L.length,""),m(c,{removeEquipments:L}),requestAnimationFrame(()=>_(c,!0))}catch(F){console.error("[-]    :",F),r==null||r("   .","error",!0),m(c,{removeEquipments:[]}),requestAnimationFrame(()=>_(c,!0))}},A=()=>{const X=!G;U(X),N.forEach(z=>{C(c,z.id,"REUSE_YN",X?"1":"0"),X&&(C(c,z.id,"EQT_LOSS_YN","0"),C(c,z.id,"PART_LOSS_BRK_YN","0"),C(c,z.id,"EQT_BRK_YN","0"),C(c,z.id,"EQT_CABL_LOSS_YN","0"),C(c,z.id,"EQT_CRDL_LOSS_YN","0"))}),X&&(r==null||r("   .   .","info"))},Y=(X,z)=>{var F;p(c,X,z),(((F=v[X])==null?void 0:F[z])||"0")==="0"&&G&&(U(!1),N.forEach(L=>{C(c,L.id,"REUSE_YN","0")}),r==null||r("    .","warning"))},se=async()=>{if(!(w||u)){M(!0);try{await E(!0),r==null||r("  .","success")}catch(X){console.error("[-]  :",X),r==null||r("   .","error")}finally{M(!1)}}};return s.jsx("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[w&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Co,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(ki,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),""]}),s.jsxs("button",{onClick:se,disabled:w||u,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${w||u?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(Co,{className:`w-3.5 h-3.5 ${w?"animate-spin":""}`}),s.jsx("span",{children:" "})]}),k&&!u&&!o&&N.length>0&&s.jsxs("label",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg cursor-pointer hover:bg-blue-50 active:bg-blue-100",children:[s.jsx("input",{type:"checkbox",checked:G,onChange:A,className:"w-4 h-4 rounded border-blue-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-blue-700 font-medium",children:""})]})]}),s.jsxs("span",{className:"px-2 sm:px-2.5 py-0.5 sm:py-1 bg-orange-100 text-orange-700 text-[0.625rem] sm:text-xs font-semibold rounded-full",children:[N.length,""]})]}),N.length===0?s.jsx("div",{className:"py-12 text-center",children:s.jsx("div",{className:"text-sm text-gray-500",children:"   "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:N.map(X=>{const z=X.id,$=v[z]||{},F=dS(X);return s.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-gray-200 bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:X.model||X.type}),s.jsxs("div",{className:"text-xs text-gray-600",children:["S/N: ",X.serialNumber]}),X.macAddress&&s.jsxs("div",{className:"text-xs text-gray-500",children:["MAC: ",X.macAddress]})]}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:X.EQT_LOC_TP_NM||""})]}),!u&&!o&&s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100",children:[s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${F?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:$.EQT_LOSS_YN==="1",onChange:()=>Y(z,"EQT_LOSS_YN"),disabled:F,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${F?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:$.PART_LOSS_BRK_YN==="1",onChange:()=>Y(z,"PART_LOSS_BRK_YN"),disabled:F,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${F?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:$.EQT_BRK_YN==="1",onChange:()=>Y(z,"EQT_BRK_YN"),disabled:F,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${F?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:$.EQT_CABL_LOSS_YN==="1",onChange:()=>Y(z,"EQT_CABL_LOSS_YN"),disabled:F,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]}),s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg whitespace-nowrap ${F?"opacity-50 cursor-not-allowed":"cursor-pointer active:bg-gray-100"}`,children:[s.jsx("input",{type:"checkbox",checked:$.EQT_CRDL_LOSS_YN==="1",onChange:()=>Y(z,"EQT_CRDL_LOSS_YN"),disabled:F,className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-xs text-gray-700 font-medium",children:""})]})]}),F&&!u&&s.jsx("div",{className:"mt-2 text-xs text-orange-600 bg-orange-50 p-2 rounded",children:"   "})]},X.id)})})]})})},XY=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u="",onLdapConnect:h,isLdapDone:m=!1,ldapLoading:_=!1,ldapBlocked:p=!1})=>{var at;const g=o||t.WRK_STAT_CD==="4"||t.status==="",{setFilteringData:C}=ta(),y=t.id,{initWorkState:N,setApiData:v,setDataLoaded:P,setInstalledEquipments:w,addMarkedForRemoval:M,setMarkedForRemoval:k,toggleRemovalStatus:B,setFullRemovalStatus:G,setSelectedContract:U,setSelectedStock:I,setSignalStatus:E,setSignalResult:A,clearSelection:Y}=Ui(),{contractEquipments:se,technicianEquipments:X,customerEquipments:z,removeEquipments:$,installedEquipments:F,markedForRemoval:L,removalStatus:re,selectedContract:fe,selectedStock:T,signalStatus:j,signalResult:K,isReady:J}=xa(y),q=z.length,[V,ce]=b.useState(!1),[me,Ce]=b.useState(!1),[ge,Ge]=b.useState(!1),[te,he]=b.useState(!1),[de,Q]=b.useState(!1),[ee,Z]=b.useState(!1),[le,xe]=b.useState(!1),[be,ne]=b.useState("stock");b.useEffect(()=>{if(J&&(F.length>0||L.length>0||se.length>0)){console.log("[-]    -   ");return}N(y),ie()},[t.id]);const ie=async(Fe=!1)=>{var tt,ct,Mt,dt,Je,De,$e,Ne;try{let ye;if(i&&i.contractEquipments&&i.contractEquipments.length>0&&!Fe)console.log("[-] Pre-loaded   -",i.contractEquipments.length," "),ye=i;else{Fe?console.log("[-]   - API "):i&&(!i.contractEquipments||i.contractEquipments.length===0)&&console.log("[-] preloadedApiData   - API ");const Ve=localStorage.getItem("userInfo");if(!Ve){console.error("  .");return}const Vt=JSON.parse(Ve),ke=P_(t.WRK_CD),ss={WRKR_ID:t.WRKR_ID||Vt.userId||Vt.workerId||"",SO_ID:t.SO_ID||Vt.soId,WRK_ID:t.id,CUST_ID:((tt=t.customer)==null?void 0:tt.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:t.CTRT_ID||null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:ke,WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null};console.log("[-] API :",ss),ye=await Eo(ss),Fe&&a&&(console.log("[-]   preloadedData "),a(ye))}console.log("=== [-] API Output  ==="),console.log("  output1 ():",ye.productInfo||"N/A"),console.log("  output2 ():",((ct=ye.contractEquipments)==null?void 0:ct.length)||0,""),((Mt=ye.contractEquipments)==null?void 0:Mt.length)>0&&ye.contractEquipments.forEach((Ve,Vt)=>{console.log(`    [${Vt}] ${Ve.ITEM_MID_NM} / ${Ve.EQT_CL_NM} / SVC_CMPS_ID: ${Ve.SVC_CMPS_ID}`)}),console.log("  output3 ():",((dt=ye.technicianEquipments)==null?void 0:dt.length)||0,""),console.log("  output4 ():",((Je=ye.customerEquipments)==null?void 0:Je.length)||0,""),((De=ye.customerEquipments)==null?void 0:De.length)>0&&ye.customerEquipments.forEach((Ve,Vt)=>{console.log(`    [${Vt}] ${Ve.ITEM_MID_NM} / ${Ve.EQT_CL_NM} / EQT_NO: ${Ve.EQT_NO} / S/N: ${Ve.EQT_SERNO}`)}),console.log("  output5 ():",(($e=ye.removedEquipments)==null?void 0:$e.length)||0,""),((Ne=ye.removedEquipments)==null?void 0:Ne.length)>0&&ye.removedEquipments.forEach((Ve,Vt)=>{console.log(`    [${Vt}] ${Ve.ITEM_MID_NM} / ${Ve.EQT_CL_NM} / EQT_NO: ${Ve.EQT_NO} / S/N: ${Ve.EQT_SERNO}`)}),console.log("==========================================");const ue={kpiProdGrpCd:ye.kpiProdGrpCd,prodChgGb:ye.prodChgGb,chgKpiProdGrpCd:ye.chgKpiProdGrpCd,prodGrp:ye.prodGrp};C(ue),window.__equipmentFilterData=ue;const Oe=(ye.contractEquipments||[]).map(Ve=>({id:Ve.SVC_CMPS_ID||Ve.PROD_CMPS_ID,type:Ve.ITEM_MID_NM||Ve.EQT_NM,model:Ve.EQT_CL_NM,serialNumber:"N/A",itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,SVC_CMPS_ID:Ve.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Ve.BASIC_PROD_CMPS_ID,PROD_CD:Ve.PROD_CD,SVC_CD:Ve.SVC_CD})),Ze=(ye.technicianEquipments||[]).map(Ve=>({id:Ve.EQT_NO,type:Ve.ITEM_MID_NM,model:Ve.EQT_CL_NM,serialNumber:Ve.EQT_SERNO,itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,macAddress:Ve.MAC_ADDRESS,SVC_CMPS_ID:Ve.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Ve.BASIC_PROD_CMPS_ID,EQT_PROD_CMPS_ID:Ve.EQT_PROD_CMPS_ID,PROD_CD:Ve.PROD_CD,SVC_CD:Ve.SVC_CD,EQT_SALE_AMT:Ve.EQT_SALE_AMT,MST_SO_ID:Ve.MST_SO_ID,SO_ID:Ve.SO_ID,OLD_LENT_YN:Ve.OLD_LENT_YN,LENT:Ve.LENT,LENT_YN:Ve.LENT_YN,ITLLMT_PRD:Ve.ITLLMT_PRD,EQT_USE_STAT_CD:Ve.EQT_USE_STAT_CD})),Le=new Set,vt=(ye.customerEquipments||[]).map(Ve=>{const Vt=Oe.find(ke=>ke.itemMidCd===Ve.ITEM_MID_CD&&!Le.has(ke.id));return Vt&&Le.add(Vt.id),{contractEquipment:Vt||{id:"unknown",type:Ve.ITEM_MID_NM,model:"",serialNumber:"N/A",itemMidCd:Ve.ITEM_MID_CD},actualEquipment:{id:Ve.EQT_NO,type:Ve.ITEM_MID_NM,model:Ve.EQT_CL_NM,serialNumber:Ve.EQT_SERNO,itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,macAddress:Ve.MAC_ADDRESS||Ve.MAC_ADDR,LENT_YN:Ve.LENT_YN,VOIP_CUSTOWN_EQT:Ve.VOIP_CUSTOWN_EQT},macAddress:Ve.MAC_ADDRESS||Ve.MAC_ADDR,installLocation:Ve.INSTL_LCTN}}),je=(ye.removedEquipments||[]).map(Ve=>({id:Ve.EQT_NO,type:Ve.ITEM_MID_NM,model:Ve.EQT_CL_NM,serialNumber:Ve.EQT_SERNO,itemMidCd:Ve.ITEM_MID_CD,eqtClCd:Ve.EQT_CL_CD||Ve.EQT_CL,macAddress:Ve.MAC_ADDRESS||Ve.MAC_ADDR,installLocation:Ve.INSTL_LCTN,SVC_CMPS_ID:Ve.SVC_CMPS_ID,BASIC_PROD_CMPS_ID:Ve.BASIC_PROD_CMPS_ID,MST_SO_ID:Ve.MST_SO_ID,SO_ID:Ve.SO_ID,LENT_YN:Ve.LENT_YN,VOIP_CUSTOWN_EQT:Ve.VOIP_CUSTOWN_EQT}));v(y,{contractEquipments:Oe,technicianEquipments:Ze,removeEquipments:je,filteringData:ue});const ut=L||[],gt=F||[];if(console.log("[-]   :",{existingMarkedForRemoval:ut.length,existingInstalledEquipments:gt.length,apiInstalled:vt.length,apiRemoved:je.length}),ut.length===0&&gt.length===0)console.log("[-]   - API  "),vt.length>0&&(console.log("[-]   :",vt.length,""),w(y,vt)),je.length>0&&(console.log("[-]  markedForRemoval :",je.length,""),k(y,je));else if(console.log("[-]  -   "),vt.length>0){const Ve=new Set(ut.map(ke=>ke.id)),Vt=vt.filter(ke=>!Ve.has(ke.actualEquipment.id));w(y,Vt)}requestAnimationFrame(()=>P(y,!0))}catch(ye){console.error("[-]    :",ye),requestAnimationFrame(()=>P(y,!0))}},pe=Fe=>{const tt=F.find(ct=>ct.contractEquipment.id===Fe.id);(fe==null?void 0:fe.id)===Fe.id?(U(y,null),I(y,null)):(U(y,Fe),tt?I(y,tt.actualEquipment):I(y,null))},ze=Fe=>{(T==null?void 0:T.id)===Fe.id?I(y,null):I(y,Fe)},xt=()=>{if(!fe||!T)return;if(fe.itemMidCd!==T.itemMidCd||fe.model!==T.model){r==null||r("      .","warning");return}const Fe=F.findIndex(tt=>tt.contractEquipment.id===fe.id);if(Fe>=0){const tt=[...F];tt[Fe]={contractEquipment:fe,actualEquipment:T,macAddress:T.macAddress||"",installLocation:""},w(y,tt)}else{const tt={contractEquipment:fe,actualEquipment:T,macAddress:T.macAddress||"",installLocation:""};w(y,[...F,tt])}E(y,"idle"),I(y,null)},st=()=>{if(!T)return;const Fe=F.findIndex(Mt=>Mt.actualEquipment.id===T.id);if(Fe>=0){const Mt=[...F],dt=Mt.splice(Fe,1)[0];w(y,Mt);const Je=dt.actualEquipment;L.some($e=>$e.id===Je.id)||M(y,Je),E(y,"idle"),I(y,null);return}if(L.some(Mt=>Mt.id===T.id))return;$.some(Mt=>Mt.id===T.id)&&M(y,T)},St=async(Fe,tt)=>{try{const ct=localStorage.getItem("userInfo");if(!ct){r==null||r("  .","error");return}const Mt=JSON.parse(ct),dt=Fe.map((De,$e)=>{let Ne=De.ITEM_MID_CD||De.ITM_MID_CD||De.EQT||De.EQT_CD||"",ye=De.EQT_CL||De.EQT_CL_CD||"",Ue=De.SVC_CMPS_ID||De.PROD_CMPS_ID||De.SVC_CMPS_SEQ||De.EQUIP_SEQ||"";return Ne=String(Ne).trim().padStart(2,"0"),ye=String(ye).trim().padStart(6,"0"),Ue=String(Ue||$e+1),{CTRT_ID:t.CTRT_ID||"",RCPT_ID:t.RCPT_ID||"",CRR_ID:t.CRR_ID||Mt.crrId||"",WRKR_ID:t.WRKR_ID||Mt.userId||Mt.workerId||"",REG_UID:Mt.userId||Mt.workerId||"A20130708",ITEM_MID_CD:Ne,EQT_CL:ye,SVC_CMPS_ID:Ue,EQT:Ne,EQT_CD:Ne,LENT:String(De.LENT||"10"),EQT_USE_STAT_CD:String(De.EQT_USE_STAT_CD||"1"),ITLLMT_PRD:String(De.ITLLMT_PRD||"00"),EQT_SALE_AMT:Number(De.EQT_SALE_AMT||0),PROD_GRP:String(De.PROD_GRP||t.PROD_GRP||""),PROD_CD:String(De.PROD_CD||t.PROD_CD||""),SVC_CD:String(De.SVC_CD||""),PROM_CNT:tt||"",SEL:"1",EQT_BASIC_YN:String(De.EQT_BASIC_YN||"N"),PROD_TYP:De.PROD_TYP,EQUIP_SEQ:De.EQUIP_SEQ}}),Je=await d0({WRK_ID:t.id,RCPT_ID:t.RCPT_ID||"",CTRT_ID:t.CTRT_ID||"",PROM_CNT:tt||"",equipments:dt});if(Je.MSGCODE==="SUCCESS"||Je.MSGCODE==="0"||Je.code==="SUCCESS")r==null||r("  .","success"),await ie(!0);else throw new Error(Je.MESSAGE||Je.message||"   .")}catch(ct){throw console.error("[] :",ct),r==null||r(ct.message||"     .","error",!0),ct}},ot=async()=>{var Fe,tt,ct,Mt;if(F.length===0){r==null||r("    .","warning"),E(y,"fail");return}try{Q(!0),he(!0),A(y," ...");const dt=localStorage.getItem("userInfo");if(!dt){A(y,"    ."),E(y,"fail"),Q(!1);return}const Je=JSON.parse(dt),De=Je.userId||Je.id||"UNKNOWN",$e=Le=>{var gt,jt,Ve,Vt,ke;const vt=((gt=Le.actualEquipment)==null?void 0:gt.eqtClCd)||Le.eqtClCd||((jt=Le.actualEquipment)==null?void 0:jt.EQT_CL_CD)||"",je=((Ve=Le.actualEquipment)==null?void 0:Ve.itemMidCd)||Le.itemMidCd||((Vt=Le.actualEquipment)==null?void 0:Vt.ITEM_MID_CD)||"",ut=(((ke=Le.actualEquipment)==null?void 0:ke.type)||Le.type||"").toLowerCase();return!!(vt.startsWith("0904")||je==="02"||ut.includes("stb")||ut.includes(""))},Ne=Le=>{var gt,jt,Ve,Vt,ke;const vt=((gt=Le.actualEquipment)==null?void 0:gt.eqtClCd)||Le.eqtClCd||((jt=Le.actualEquipment)==null?void 0:jt.EQT_CL_CD)||"",je=((Ve=Le.actualEquipment)==null?void 0:Ve.itemMidCd)||Le.itemMidCd||((Vt=Le.actualEquipment)==null?void 0:Vt.ITEM_MID_CD)||"",ut=(((ke=Le.actualEquipment)==null?void 0:ke.type)||Le.type||"").toLowerCase();return!!(vt.startsWith("0902")||je==="03"||ut.includes("modem")||ut.includes(""))},ye=F.find($e),Ue=F.find(Ne),ue=((Fe=ye==null?void 0:ye.actualEquipment)==null?void 0:Fe.id)||"",Oe=((tt=Ue==null?void 0:Ue.actualEquipment)==null?void 0:tt.id)||"",Ze=await Xu(De,t.CTRT_ID||"",t.id,"SMR03",ue||((Mt=(ct=F[0])==null?void 0:ct.actualEquipment)==null?void 0:Mt.id)||"",Oe||"");Ze.O_IFSVC_RESULT&&Ze.O_IFSVC_RESULT.startsWith("TRUE")?(A(y,` 

: ${Ze.O_IFSVC_RESULT||""}`),E(y,"success")):(A(y,` 

${Ze.MESSAGE||"   "}`),E(y,"fail"))}catch(dt){A(y,` 

${dt.message||"   "}`),E(y,"fail")}finally{Q(!1)}},Be=(Fe,tt,ct)=>{const Mt={...re,[Fe]:{...re[Fe]||{},[tt]:ct==="1"?"0":"1"}};G(y,Mt)},lt=()=>{if(!T||!L.some($e=>$e.id===T.id))return;if(fe&&(fe.itemMidCd!==T.itemMidCd||fe.model!==T.model)){r==null||r("      .","warning");return}const tt=fe||se.find($e=>$e.itemMidCd===T.itemMidCd&&$e.model===T.model);if(!tt){r==null||r("      .","warning");return}if(F.find($e=>$e.contractEquipment.id===tt.id)){r==null||r("   .","warning");return}const Mt={contractEquipment:tt,actualEquipment:T,macAddress:T.macAddress||"",installLocation:""},dt=[...F,Mt],Je=L.filter($e=>$e.id!==T.id);w(y,dt),k(y,Je);const De={...re};delete De[T.id],G(y,De),I(y,null),console.log("[-]  :",{:dt.length,:Je.length}),r==null||r("   .","success")},pt=b.useMemo(()=>{const Fe=new Set(F.map(ct=>ct.actualEquipment.id));let tt=X.filter(ct=>!Fe.has(ct.id));return fe&&(tt=tt.filter(ct=>ct.itemMidCd===fe.itemMidCd&&ct.model===fe.model)),tt},[F,X,fe]),mt=()=>{Z(!0),setTimeout(()=>{Z(!1),r==null||r("    .","info")},500)},Ye=async()=>{if(!(le||g)){xe(!0);try{await ie(!0),r==null||r("  .","success")}catch(Fe){console.error("[-]  :",Fe),r==null||r("   .","error")}finally{xe(!1)}}};return s.jsxs("div",{className:"px-2 sm:px-4 py-4 sm:py-6 space-y-3 sm:space-y-4 bg-gray-50 pb-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 relative",children:[le&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ki,{className:"w-8 h-8 text-blue-500 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"   ..."})]})}),s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-900",children:["  ",(t.productName||t.PROD_NM)&&s.jsxs("span",{className:"font-normal text-blue-600 ml-1",children:["(",t.productName||t.PROD_NM,")"]})]}),s.jsxs("button",{onClick:Ye,disabled:le||g,className:`flex items-center gap-1 px-2 py-1 rounded-lg transition-all text-xs font-medium ${le||g?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-600 hover:bg-blue-50 active:scale-95"}`,title:"  ",children:[s.jsx(ki,{className:`w-3.5 h-3.5 ${le?"animate-spin":""}`}),s.jsx("span",{children:" "})]})]}),s.jsxs("span",{className:"px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 text-xs sm:text-sm font-semibold rounded-full",children:[se.length,""]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>{g||ce(!0)},disabled:g,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),c?s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${m?"border-green-300 bg-green-100 text-green-700":_?"border-yellow-300 bg-yellow-100 text-yellow-700":p?"border-gray-300 bg-gray-100 text-gray-400":"border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200 hover:border-blue-400"}`,onClick:()=>h==null?void 0:h(),disabled:_||g,children:[_?s.jsx(pn,{className:"w-5 h-5 mb-1 animate-spin"}):s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.858 15.355-5.858 21.213 0"})}),s.jsx("span",{className:"text-xs font-semibold",children:m?"LDAP":"LDAP"})]}):s.jsxs("button",{className:`flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] ${g?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":j==="success"?"border-green-300 bg-green-100 text-green-700 hover:bg-green-200 hover:border-green-400":j==="fail"?"border-red-500 bg-red-200 text-red-800 hover:bg-red-300 hover:border-red-600":"border-red-300 bg-red-100 text-red-700 hover:bg-red-200 hover:border-red-400"}`,onClick:()=>!g&&!de&&ot(),disabled:g||de,children:[s.jsx("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs font-semibold",children:""})]}),s.jsxs("button",{className:"flex flex-col items-center justify-center py-2.5 px-1 rounded-lg border-2 transition-all active:scale-95 min-h-[56px] border-purple-200 bg-purple-50 text-purple-600 hover:bg-purple-100 hover:border-purple-300",onClick:()=>c?Ge(!0):Ce(!0),children:[s.jsx(Dd,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-semibold",children:c?"LDAP":""})]})]})]}),J?se.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400",children:"    []  "})]}):s.jsx("div",{className:"p-4 space-y-2",children:se.map(Fe=>{const tt=F.find(Mt=>Mt.contractEquipment.id===Fe.id),ct=(fe==null?void 0:fe.id)===Fe.id;return s.jsx("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all active:scale-[0.98] ${g?tt?"border-green-200 bg-green-50 cursor-default":"border-gray-200 bg-white cursor-default":ct?"border-blue-500 bg-blue-50 cursor-pointer":tt?"border-green-200 bg-green-50 cursor-pointer":"border-gray-200 bg-white hover:border-gray-300 cursor-pointer"}`,onClick:()=>!g&&pe(Fe),children:s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),tt&&s.jsxs("div",{className:"pt-2.5 border-t border-gray-200 space-y-1.5",children:[s.jsxs("div",{className:"text-sm text-green-700 font-medium",children:[" : ",tt.actualEquipment.model]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["S/N: ",tt.actualEquipment.serialNumber]}),tt.macAddress&&s.jsxs("div",{className:"text-sm text-gray-600",children:["MAC: ",tt.macAddress]})]})]})},Fe.id)})}):s.jsx("div",{className:"py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-sm text-gray-500",children:"   ..."})]})})]}),!g&&s.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!T||!F.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-orange-500 bg-orange-50 text-orange-600 hover:bg-orange-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!T)return;if(X.some(tt=>tt.id===T.id)){if(be!=="stock"){r==null||r("  .   .","warning");return}const tt=F.findIndex(ct=>ct.actualEquipment.id===T.id);if(tt>=0){const ct=[...F];ct.splice(tt,1),w(y,ct),I(y,null),r==null||r("  .","success")}return}st(),ne("removal")},disabled:!T||!F.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id)),children:s.jsx(i0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})}),s.jsx("button",{className:`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 transition-all ${!T||F.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id))?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-blue-500 bg-blue-50 text-blue-600 hover:bg-blue-100 cursor-pointer active:scale-95"}`,onClick:()=>{if(!T)return;if(L.some(Mt=>Mt.id===T.id)){lt();return}if(!fe){r==null||r("   .","warning");return}const tt=F.find(Mt=>Mt.contractEquipment.id===fe.id&&!X.some(dt=>dt.id===Mt.actualEquipment.id)),ct=tt&&L.some(Mt=>Mt.id===tt.actualEquipment.id);if(tt&&!ct){r==null||r("   .","warning");return}xt()},disabled:!T||F.some(Fe=>Fe.actualEquipment.id===(T==null?void 0:T.id)),children:s.jsx(a0,{size:32,className:"sm:w-10 sm:h-10",strokeWidth:2.5})})]}),!g&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex border-b-2 border-gray-200",children:[s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${be==="removal"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>ne("removal"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),L.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${be==="removal"?"bg-orange-500 text-white":"bg-gray-300 text-gray-600"}`,children:L.length})]})}),s.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-semibold transition-all border-b-2 -mb-[2px] ${be==="stock"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>ne("stock"),children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),fe&&pt.length>0&&s.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${be==="stock"?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:pt.length})]})})]}),be==="removal"?s.jsx(s.Fragment,{children:L.length===0?s.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"  "}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"        "})]}):s.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:L.map((Fe,tt)=>{const ct=Fe.id,Mt=re[ct]||{},dt=Mt.EQT_LOSS_YN==="1"||Mt.PART_LOSS_BRK_YN==="1"||Mt.EQT_BRK_YN==="1"||Mt.EQT_CABL_LOSS_YN==="1"||Mt.EQT_CRDL_LOSS_YN==="1",Je=(T==null?void 0:T.id)===Fe.id,De=dS(Fe);return s.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${Je?"border-blue-500 bg-blue-50":"border-orange-200 bg-orange-50 hover:border-orange-300"}`,onClick:()=>ze(Fe),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-bold",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Fe.type}),s.jsx("div",{className:"text-xs text-gray-600",children:Fe.model}),s.jsxs("div",{className:"text-xs text-gray-500",children:["S/N: ",Fe.serialNumber]})]})]}),s.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full ${dt?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:dt?"":""})]}),!De&&s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{key:"EQT_LOSS_YN",label:""},{key:"PART_LOSS_BRK_YN",label:""},{key:"EQT_BRK_YN",label:""},{key:"EQT_CABL_LOSS_YN",label:""},{key:"EQT_CRDL_LOSS_YN",label:""}].map($e=>s.jsxs("label",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg border cursor-pointer transition-all ${Mt[$e.key]==="1"?"border-red-300 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,onClick:Ne=>{Ne.stopPropagation(),Be(ct,$e.key,Mt[$e.key]||"0")},children:[s.jsx("input",{type:"checkbox",checked:Mt[$e.key]==="1",onChange:()=>{},className:"w-3.5 h-3.5 rounded border-gray-300 text-red-500 focus:ring-red-500"}),s.jsx("span",{className:"text-xs font-medium",children:$e.label})]},$e.key))}),De&&s.jsx("div",{className:"mt-2 text-xs text-orange-600 bg-orange-100 p-2 rounded",children:"   "})]},ct||tt)})})}):s.jsx(s.Fragment,{children:fe?pt.length===0?s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})}):s.jsx("div",{className:"p-3 sm:p-4 space-y-2.5 max-h-72 overflow-y-auto",children:pt.map(Fe=>s.jsxs("div",{className:`p-4 sm:p-5 rounded-xl border-2 transition-all cursor-pointer relative active:scale-[0.98] ${(T==null?void 0:T.id)===Fe.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>ze(Fe),children:[s.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:Fe.type}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-gray-600",children:Fe.model})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-1.5",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["S/N: ",Fe.serialNumber]}),Fe.macAddress&&s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["MAC: ",Fe.macAddress]})]})]}),(T==null?void 0:T.id)===Fe.id&&s.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm sm:text-base font-bold",children:""})]},Fe.id))}):s.jsx("div",{className:"py-8 sm:py-12 text-center",children:s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"     "})})})]}),(()=>{var Mt;const Fe=t.WRK_CD_NM||_0(t.WRK_CD)||t.workType||"-",tt=t.PROD_NM||t.productName||((Mt=t.customer)==null?void 0:Mt.productName)||"-",ct=t.CTRT_STAT_NM||$u(t.CTRT_STAT)||"-";return s.jsx(m0,{isOpen:V,onClose:()=>ce(!1),prodCd:t.PROD_CD||"",ctrtId:t.CTRT_ID||"",ctrtStatNm:ct,prodGrp:t.PROD_GRP||"",prodNm:tt,wrkCdNm:Fe,onSave:St,showToast:r,installedEquipmentCount:F.length,customerEquipmentCount:q})})(),!g&&s.jsx("button",{onClick:mt,disabled:ee,className:`fixed bottom-24 right-4 z-40 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center transition-all active:scale-95 ${ee?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:" ",children:s.jsx(o0,{className:"w-7 h-7 sm:w-8 sm:h-8"})}),s.jsx(el,{isOpen:me,onClose:()=>Ce(!1),ctrtId:t.CTRT_ID,custId:t.CUST_ID||((at=t.customer)==null?void 0:at.id)}),s.jsx(g0,{isOpen:ge,onClose:()=>Ge(!1),ctrtId:t.DTL_CTRT_ID||t.CTRT_ID}),te&&Ju.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:()=>!de&&he(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full overflow-hidden",onClick:Fe=>Fe.stopPropagation(),children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:""})}),s.jsx("div",{className:"px-6 py-8",children:de?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-blue-500",children:s.jsx(pn,{className:"animate-spin",size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" ..."}),s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):j==="success"?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-green-500",children:s.jsx(l0,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" !"}),s.jsx("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono",children:K})})]}):s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"text-red-500",children:s.jsx(bo,{size:64})}),s.jsx("p",{className:"text-base font-semibold text-gray-900",children:" "}),s.jsx("div",{className:"w-full p-4 bg-red-50 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap font-mono",children:K})})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:s.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-colors ${j==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:()=>he(!1),disabled:de,children:de?" ...":""})})]})}),document.body)]})},JY=t=>{const{workItem:e}=t,n=e.WRK_CD;switch(n){case"01":return s.jsx(_R,{...t});case"02":return s.jsx(FY,{...t});case"03":return s.jsx(KY,{...t});case"04":return s.jsx(QY,{...t});case"05":return s.jsx(YY,{...t});case"06":return s.jsx($Y,{...t});case"07":return s.jsx(HY,{...t});case"08":return s.jsx(qY,{...t});case"09":return s.jsx(XY,{...t});default:return console.warn(`[EquipmentRouter] Unknown WRK_CD: ${n}, using default (Install)`),s.jsx(_R,{...t})}},ZY=({ctrtId:t,certifyOpLnkdCd:e,installedEquipments:n,showToast:r})=>{const[i,a]=b.useState(!1),{ldapResult:o,setLdapResult:c}=Za();return{handleLdapConnect:async(m=!1)=>{const _=["F","FG","Z","ZG"].includes(e),p=["N","NG"].includes(e),g=n.some(y=>{var v,P,w,M;const N=((v=y.actualEquipment)==null?void 0:v.ITEM_MID_CD)||((P=y.actualEquipment)==null?void 0:P.itemMidCd)||((w=y.contractEquipment)==null?void 0:w.ITEM_MID_CD)||((M=y.contractEquipment)==null?void 0:M.itemMidCd)||y.ITEM_MID_CD||y.itemMidCd||"";return N==="02"||N==="31"}),C=n.some(y=>{var v,P,w,M;const N=((v=y.actualEquipment)==null?void 0:v.ITEM_MID_CD)||((P=y.actualEquipment)==null?void 0:P.itemMidCd)||((w=y.contractEquipment)==null?void 0:w.ITEM_MID_CD)||((M=y.contractEquipment)==null?void 0:M.itemMidCd)||y.ITEM_MID_CD||y.itemMidCd||"";return N==="10"||N==="32"});if(_){if(!g){r==null||r("FTTH  ONT  .","warning");return}if(!C){r==null||r("FTTH  AP  .","warning");return}}else if(p&&!C){r==null||r("  AP  .","warning");return}if(n.length<1){r==null||r(" .","warning");return}if(!t){r==null||r(" ID .","error");return}a(!0);try{console.log("[useLdapConnect]  :",{ctrtId:t,opLnkdCd:e});const y=await Z2(t);if(console.log("[useLdapConnect]  :",y),y.exists&&y.data.length>0){const N=y.data[0];c(N),r==null||r("LDAP  .","success")}else c({_empty:!0}),r==null||r("LDAP  . (  )","info")}catch(y){console.error("[useLdapConnect]  :",y),r==null||r(y.message||"LDAP  .","error")}finally{a(!1)}},ldapLoading:i,ldapResult:o,isLdapDone:!!o}},e$=["01","05","06","07"],t$=({equipList:t,portList:e,isFtth:n,onEquipChange:r,selectedEqipId:i,onClose:a,showToast:o,entrNo:c,entrRqstNo:u,workItem:h})=>{const m=t.find(z=>z.EQIP_ID===i),_=b.useMemo(()=>t.map(z=>({value:z.EQIP_ID,label:`${z.EQIP_ID} - ${z.ESTB_PLC_NM||z.EQIP_NM||""}`})),[t]),[p,g]=b.useState(!1),[C,y]=b.useState([]),[N,v]=b.useState(!1),[P,w]=b.useState(!1),[M,k]=b.useState([]),[B,G]=b.useState(""),[U,I]=b.useState(""),[E,A]=b.useState(!1),Y=async()=>{if(g(!0),!(C.length>0)){v(!0);try{const z=await zg({COMMON_GRP:"LGCT015"});y(z||[])}catch(z){console.error("[PortStatusModal] LGCT015  :",z)}finally{v(!1)}}},se=async()=>{if(w(!0),!(M.length>0))try{const z=await No(["LGWO001"]),$=(z==null?void 0:z.LGWO001)||(z==null?void 0:z.output13)||[];k(Array.isArray($)?$:[])}catch(z){console.error("[PortStatusModal] LGWO001  :",z)}},X=async(z,$)=>{if(!B){o==null||o(" .","warning");return}if(!U.trim()){o==null||o("  .","warning");return}A(!0);try{const F=await HP({ENTR_RQST_NO:z.entrRqstNo||"",CONS_REQ_RSN_CD:B,HSVC_INCR_RSN_CNTN:U,HSVC_CONS_RQMN_DIVS_CD:"2",SBGN_DEAL_NM:$.crrNm||$.name||"",SBGN_DEAL_TLNO:"",SBGN_EGNR_NM:$.name||$.userName||"",SBGN_EGNR_HPHN_TLNO:$.phone||$.hpNo||"",CTRT_ID:z.ctrtId||"",RCPT_ID:z.rcptId||"",WRK_ID:z.wrkId||"",ENTR_NO:c||""});F.RESULT_CD&&!F.RESULT_CD.startsWith("N")?(o==null||o(" .","success"),w(!1),G(""),I("")):o==null||o(F.RESULT_MSG||"  .","error")}catch(F){console.error("[PortStatusModal] Port :",F),o==null||o(F.message||"  .","error")}finally{A(!1)}};return p?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"LGU+ L2  "}),s.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:s.jsx(Mi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-3",children:N?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):C.length===0?s.jsx("div",{className:"text-center py-8 text-sm text-gray-500",children:" ."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",style:{minWidth:"400px"},children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:C.map((z,$)=>s.jsxs("tr",{className:`border-b border-gray-50 ${$%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("td",{className:"px-2 py-2 text-gray-900 whitespace-nowrap",children:z.COMMON_CD_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:z.REF_CODE||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:z.REF_CODE2||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:z.REF_CODE3||"-"})]},$))})]})})}),s.jsx("div",{className:"p-3 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700",children:""})})]})}):P?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"Port  "}),s.jsx("button",{onClick:()=>w(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:s.jsx(Mi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:""}),s.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-800 font-mono",children:c||"-"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:""}),s.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-800",children:(()=>{try{const z=JSON.parse(localStorage.getItem("userInfo")||"{}");return z.name||z.userName||"-"}catch{return"-"}})()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:""}),s.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-800 font-mono",children:(()=>{try{const z=JSON.parse(localStorage.getItem("userInfo")||"{}");return z.phone||z.hpNo||"-"}catch{return"-"}})()})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(sn,{value:B,onChange:z=>G(z),placeholder:"",options:M.map((z,$)=>({value:z.COMMON_CD||z.code||"",label:z.COMMON_CD_NM||z.name||z.COMMON_CD||""}))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:U,onChange:z=>I(z.target.value.slice(0,512)),placeholder:"     ",rows:4,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg resize-none focus:border-orange-400 focus:outline-none"}),s.jsxs("div",{className:"text-right text-xs text-gray-400 mt-0.5",children:[U.length,"/512"]})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[s.jsx("button",{onClick:()=>{const z=(()=>{try{return JSON.parse(localStorage.getItem("userInfo")||"{}")}catch{return{}}})(),$={entrRqstNo:u||"",ctrtId:(h==null?void 0:h.CTRT_ID)||(h==null?void 0:h.ctrtId)||"",rcptId:(h==null?void 0:h.RCPT_ID)||(h==null?void 0:h.rcptId)||(h==null?void 0:h.receiptId)||"",wrkId:(h==null?void 0:h.id)||(h==null?void 0:h.WRK_ID)||"",crrNm:(h==null?void 0:h.CRR_NM)||""};X({...$,crrNm:$.crrNm},{...z,crrNm:$.crrNm})},disabled:E,className:`w-full py-3 rounded-lg text-sm font-semibold transition-colors ${E?"bg-gray-300 text-gray-500":"bg-orange-500 text-white hover:bg-orange-600"}`,children:E?" ...":" "}),s.jsx("button",{onClick:()=>w(!1),className:"w-full py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700",children:""})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 whitespace-nowrap",children:["LGU+ ",n?"RN":"L2"," "]}),s.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-gray-100",children:s.jsx(Mi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.length===0?s.jsx("div",{className:"text-center text-gray-500 py-8",children:"  ."}):s.jsxs(s.Fragment,{children:[n&&c&&s.jsxs("div",{className:"bg-purple-50 rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-purple-600 font-semibold whitespace-nowrap",children:"LGU+ "}),s.jsx("span",{className:"text-xs font-mono font-bold text-purple-900 whitespace-nowrap",children:c})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 whitespace-nowrap",children:" "}),s.jsx(sn,{value:i,onValueChange:r,options:_,placeholder:" "})]}),m&&s.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:n?s.jsxs("div",{className:"space-y-1.5 text-xs",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-semibold truncate",children:m.MDL_NM||"-"})]}),s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"truncate",children:m.EQIP_ESTB_FLOO_NM||"-"})]})]}):s.jsxs("div",{className:"space-y-1.5 text-xs",children:[s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-semibold truncate",children:m.ESTB_PLC_NM||"-"})]}),s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-semibold truncate",children:m.MDL_NM||"-"})]}),s.jsxs("div",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"truncate",children:m.EQIP_ESTB_FLOO_NM||"-"})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-600 whitespace-nowrap",children:" "}),s.jsxs("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:[e.length,""]})]}),s.jsxs("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:[s.jsxs("div",{className:"grid grid-cols-4 bg-gray-100 text-xs font-semibold text-gray-600 px-2 py-2 border-b min-w-[320px]",children:[s.jsx("div",{className:"whitespace-nowrap",children:""}),s.jsx("div",{className:"whitespace-nowrap",children:"U+"}),s.jsx("div",{className:"whitespace-nowrap",children:""}),s.jsx("div",{className:"text-center whitespace-nowrap",children:""})]}),e.length===0?s.jsx("div",{className:"text-center text-gray-400 text-xs py-4",children:" "}):s.jsx("div",{className:"max-h-64 overflow-y-auto divide-y",children:e.map((z,$)=>s.jsxs("div",{className:`grid grid-cols-4 text-xs px-2 py-2 hover:bg-gray-50 min-w-[320px] ${z.PT_USE==="Y"?"bg-red-50/50":""}`,children:[s.jsx("div",{className:"font-mono whitespace-nowrap",children:z.PORT_NO||"-"}),s.jsx("div",{className:"font-mono text-gray-600 whitespace-nowrap truncate",children:z.ENTR_NO||"-"}),s.jsx("div",{className:"font-mono text-gray-600 whitespace-nowrap truncate",children:z.CTRT_ID||"-"}),s.jsx("div",{className:"text-center whitespace-nowrap",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[0.625rem] font-medium whitespace-nowrap ${z.PT_USE==="Y"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:z.PT_USE==="Y"?"":""})})]},$))})]})]})]})}),s.jsxs("div",{className:"p-4 border-t space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[!n&&s.jsxs("button",{onClick:Y,className:"flex-1 py-2 bg-purple-500 text-white rounded-lg font-semibold text-sm flex items-center justify-center gap-1.5 hover:bg-purple-600 transition-colors whitespace-nowrap",children:[s.jsx(xM,{className:"w-4 h-4 flex-shrink-0"}),"L2 "]}),s.jsx("button",{onClick:se,className:"flex-1 py-2 bg-orange-500 text-white rounded-lg font-semibold text-sm hover:bg-orange-600 transition-colors whitespace-nowrap",children:"Port"})]}),s.jsx("button",{onClick:a,className:"w-full py-2 bg-gray-600 text-white rounded-lg font-semibold",children:""})]})]})})},s$=({workItem:t,onSave:e,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o=!1,isCertifyProd:c=!1,certifyOpLnkdCd:u=""})=>{const{setEquipmentData:h}=ta(),{entrNo:m,entrRqstNo:_,setEntrNo:p,lguMarketCd:g,lguOperatorId:C,lguJobType:y,lguJobTypeConf:N,setLguCommonCd:v,cl02PortData:P,setCl02PortData:w,isSubscriptionDone:M,setIsSubscriptionDone:k}=Za(),B=t.id||t.WRK_ID||"",G=Ui(le=>{var xe;return((xe=le.workStates[B])==null?void 0:xe.installedEquipments)||[]}),{handleLdapConnect:U,ldapLoading:I,ldapResult:E,isLdapDone:A}=ZY({ctrtId:t.DTL_CTRT_ID||t.CTRT_ID||"",certifyOpLnkdCd:u,installedEquipments:G,showToast:r}),[Y,se]=b.useState(!1),[X,z]=b.useState(!1),[$,F]=b.useState(!1),[L,re]=b.useState([]),[fe,T]=b.useState([]),[j,K]=b.useState(""),J=["F","FG","Z","ZG"].includes(u),[q,V]=b.useState({isOpen:!1,message:"",onConfirm:()=>{}}),ce=t.WRK_CD||"",me=t.DTL_CTRT_ID||t.CTRT_ID||"",Ce=e$.includes(ce),ge=Ce&&!M,Ge=b.useCallback(()=>{if(Ce&&!M){r==null||r("  .","warning");return}V({isOpen:!0,title:"LDAP ",message:"LDAP  ?",type:"confirm",onConfirm:()=>U(!0)})},[U,Ce,M,P,r]),te=b.useCallback(()=>{try{const le=localStorage.getItem("userInfo");if(le)return JSON.parse(le)}catch{}return{}},[]);b.useEffect(()=>{if(!c||g)return;(async()=>{try{const xe=await No(["LGCT002"]),be=(xe==null?void 0:xe.LGCT002)||(xe==null?void 0:xe.output13);if(be&&Array.isArray(be)&&be.length>0){const ne=be[0];v(ne.REF_CODE||"",ne.REF_CODE2||"",ne.REF_CODE4||"",ne.REF_CODE5||""),console.log("[LGU+]  : MRKT_CD=",ne.REF_CODE,"OPERATOR_ID=",ne.REF_CODE2,"JOB_TYPE=",ne.REF_CODE4,"JOB_TYPE_CONF=",ne.REF_CODE5)}}catch(xe){console.error("[LGU+]   :",xe)}})()},[c,g,v]),b.useEffect(()=>{if(!c||!Ce||!me||m||M)return;(async()=>{var xe;try{const be=await zC({CTRT_ID:me}),ne=((xe=be==null?void 0:be[0])==null?void 0:xe.ENTR_NO)||"";ne&&(console.log("[LGU+]   :",ne),p(ne,null),k(!0))}catch(be){console.error("[LGU+]   :",be)}})()},[c,Ce,me,m,M]);const he=async le=>{var ne,ie,pe;const xe=te(),be=xe.userId||xe.id||"";se(!0);try{if(le){const xt=t.CRR_ID||"",st=t.SO_ID||"",St=t.CUST_ID||((ne=t.customer)==null?void 0:ne.id)||"";(!xt||!st)&&console.warn("[LGU+]    - CRR_ID:",xt,"SO_ID:",st),await vM({CTRT_ID:me,CUST_ID:St,WRK_ID:B,CRR_ID:xt,SO_ID:st,REG_UID:be,CANCEL_TYPE:"SUBSCRIPTION",MRKT_CD:g,OPERATOR_ID:C}),console.log("[LGU+]    ")}const ze=await VP({WRK_ID:B,CTRT_ID:me,MRKT_CD:g,OPERATOR_ID:C,REG_UID:be});if(ze.RESULT_CD==="Y"){if(r==null||r("  .","success"),p(ze.ENTR_NO||null,ze.ENTR_RQST_NO||null),k(!0),E&&!E._empty){const xt=t.SO_ID||"";xt||console.warn("[LGU+] LDAP   - SO_ID ");try{(E.AP_MAC_ADDR||E.AP_EQT_NO)&&(await fE({MSG_ID:"SMR05",EVNT_CD:"",CUST_ID:t.CUST_ID||((ie=t.customer)==null?void 0:ie.id)||"",CTRT_ID:me,SO_ID:xt,AP_MAC:E.AP_MAC_ADDR||"",AP_EQT_NO:E.AP_EQT_NO||"",ONT_MAC:"",ONT_EQT_NO:"",REG_UID:be,JOB_TYPE:y,JOB_TYPE_CONF:N,ENTR_NO:ze.ENTR_NO||""}),console.log("[LGU+] AP   ")),(E.ONT_MAC_ADDR||E.ONT_EQT_NO)&&(await fE({MSG_ID:"SMR05",EVNT_CD:"FM",CUST_ID:t.CUST_ID||((pe=t.customer)==null?void 0:pe.id)||"",CTRT_ID:me,SO_ID:xt,AP_MAC:"000000000000",AP_EQT_NO:"",ONT_MAC:"",ONT_EQT_NO:"",REG_UID:be,JOB_TYPE:y,JOB_TYPE_CONF:N,ENTR_NO:ze.ENTR_NO||""}),console.log("[LGU+] ONT   "))}catch(st){console.warn("[LGU+] LDAP    ():",st)}}}else r==null||r(ze.RESULT_MSG||"  .","error")}catch(ze){console.error("[LGU+]  :",ze),r==null||r(ze.message||" .","error")}finally{se(!1)}},de=async()=>{var le;if(!me){r==null||r(" ID .","error");return}if(!g||!C){r==null||r("LGU+    .    .","error"),console.error("[LGU+]   - lguMarketCd:",g,"lguOperatorId:",C);return}se(!0);try{const xe=await zC({CTRT_ID:me}),be=((le=xe==null?void 0:xe[0])==null?void 0:le.ENTR_NO)||"";se(!1),V(be?{isOpen:!0,title:"U+  ",message:`  .
 ?`,type:"warning",onConfirm:()=>he(be)}:{isOpen:!0,title:"U+  ",message:"U+  ?",type:"confirm",onConfirm:()=>he("")})}catch(xe){se(!1),console.error("[LGU+]  :",xe),r==null||r(xe.message||" .","error")}},Q=async()=>{var ne;if(L.length>0){z(!0);return}if(!m){r==null||r("(ENTR_NO) .   .","error");return}const le=_?"01":"02",xe=_||"null",be=J?"ftthEqipList":"opticEqipList";F(!0);try{const ie=await SM({COMMAND:be,ENTR_NO:m,ENTR_RQST_NO:xe,BIZ_TYPE:le,CTRT_ID:me});if(!ie||ie.length===0){r==null||r("  .","info"),F(!1);return}if((ne=ie[0])!=null&&ne.RESULT_CD&&ie[0].RESULT_CD.startsWith("N")){r==null||r(` : ${ie[0].RESULT_MSG||""}`,"error"),F(!1);return}re(ie);const pe=ie[0].EQIP_ID;K(pe);const xt=await HC({COMMAND:J?"ftthEqipPortList":"opticEqipPortList",EQIP_ID:pe,CTRT_ID:me});T(xt||[]),z(!0)}catch(ie){console.error("[LGU+]  :",ie),r==null||r(ie.message||" .","error")}finally{F(!1)}},ee=async le=>{K(le);const xe=J?"ftthEqipPortList":"opticEqipPortList";try{const be=await HC({COMMAND:xe,EQIP_ID:le,CTRT_ID:me});T(be||[])}catch(be){console.error("[LGU+]   :",be),T([])}},Z=le=>{console.log("[WorkEquipmentManagement]  :",le),h(le),e(le)};return s.jsxs("div",{className:"work-equipment-management",children:[c&&!o&&Ce&&s.jsx("div",{className:"mx-3 mt-2 mb-1",children:s.jsx("div",{className:`rounded-lg border p-3 ${M?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(zh,{className:`w-5 h-5 flex-shrink-0 ${M?"text-green-600":"text-orange-600"}`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:`text-sm font-semibold whitespace-nowrap ${M?"text-green-800":"text-orange-800"}`,children:"U+ "}),m&&s.jsxs("div",{className:"text-xs text-gray-600 truncate",children:[": ",s.jsx("span",{className:"font-mono font-semibold",children:m})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:de,disabled:Y,className:`px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-colors bg-orange-500 text-white hover:bg-orange-600 ${Y?"opacity-50":""}`,children:Y?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"}),"..."]}):""}),s.jsx("button",{onClick:Q,disabled:$,className:"px-3 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200",children:$?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(pn,{className:"w-3 h-3 animate-spin"}),""]}):s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Lc,{className:"w-3 h-3"}),""]})})]})]})})}),c&&o&&m&&s.jsx("div",{className:"mx-3 mt-2 mb-1",children:s.jsx("div",{className:"rounded-lg border p-3 bg-green-50 border-green-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ai,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-semibold text-green-800",children:""}),s.jsx("span",{className:"text-xs text-gray-600 font-mono",children:m})]})})}),s.jsx(JY,{workItem:t,onSave:Z,onBack:n,showToast:r,preloadedApiData:i,onPreloadedDataUpdate:a,readOnly:o,isCertifyProd:c,certifyOpLnkdCd:u,onLdapConnect:Ge,isLdapDone:A,ldapLoading:I,ldapBlocked:ge}),X&&s.jsx(t$,{equipList:L,portList:fe,isFtth:J,onEquipChange:ee,selectedEqipId:j,onClose:()=>z(!1),showToast:r,entrNo:m||"",entrRqstNo:_||"",workItem:t}),s.jsx(Ba,{isOpen:q.isOpen,onClose:()=>V(le=>({...le,isOpen:!1})),onConfirm:q.onConfirm,title:q.title,message:q.message,type:q.type})]})},n$=[],r$=({workItem:t,showToast:e,readOnly:n=!1})=>{const[r,i]=b.useState(!1),[a,o]=b.useState(null),[c,u]=b.useState(null),[h,m]=b.useState(!1),[_,p]=b.useState(0),[g,C]=b.useState(null),[y,N]=b.useState(!1),[v,P]=b.useState(!1),[w,M]=b.useState(null),[k,B]=b.useState(null),[G,U]=b.useState([]),[I,E]=b.useState(""),[A,Y]=b.useState([]),[se,X]=b.useState(-1),[z,$]=b.useState(!1),[F,L]=b.useState(!1),[re,fe]=b.useState(""),[T,j]=b.useState(""),[K,J]=b.useState(!1),[q,V]=b.useState(!1),[ce,me]=b.useState([]),[Ce,ge]=b.useState(!1),[Ge,te]=b.useState(!1),{certifyRegconfInfo:he,setCertifyRegconfInfo:de,certifyOpLnkdCd:Q,isLineRegistrationDone:ee,setIsLineRegistrationDone:Z,entrNo:le,lguMarketCd:xe}=Za(),be=["F","FG","Z","ZG"].includes(Q),ne=()=>["F","FG","Z","ZG"].includes(Q)?"ftthEqipList":["V","VG"].includes(Q)?"vdslEqipList":"opticEqipList",ie=()=>["F","FG","Z","ZG"].includes(Q)?"ftthEqipPortList":["V","VG"].includes(Q)?"vdslEqipPortList":"opticEqipPortList",pe=t.id,ze=Ui(De=>{var $e;return(($e=De.workStates[pe])==null?void 0:$e.installedEquipments)??n$}),xt=b.useMemo(()=>ze.map(De=>{var $e;return(($e=De.actualEquipment)==null?void 0:$e.id)||""}).sort().join(","),[ze]),st=b.useRef(xt);b.useEffect(()=>{if(he){const De=he._equipmentFingerprint;if(De&&De!==xt){de(null);return}o(he),m(!0)}},[]),b.useEffect(()=>{(async()=>{const $e=t.CTRT_ID||"";if($e){J(!0);try{const Ne=await zC({CTRT_ID:$e});if(Ne&&Ne.length>0){const ye=Ne[0];fe(ye.ENTR_NO||""),j(ye.ENTR_RQST_NO||"")}}catch(Ne){console.error("[] ENTR_NO  :",Ne)}finally{J(!1)}}})()},[t.CTRT_ID]),b.useEffect(()=>{st.current!==xt&&(st.current=xt,h&&(o(null),de(null),m(!1),p(0),Z(!1)))},[xt]),b.useEffect(()=>{st.current===xt&&h&&(o(null),de(null),m(!1),Z(!1))},[_]);const{ontMac:St,apMac:ot,ontSerial:Be,apList:lt}=b.useMemo(()=>{var Ue;let De="",$e="";const Ne=[];for(const ue of ze){const Oe=ue.actualEquipment||{},Ze=ue.contractEquipment||{},Le=Oe.itemMidCd||Oe.ITEM_MID_CD||Ze.itemMidCd||Ze.ITEM_MID_CD||"",vt=Oe.macAddress||Oe.MAC_ADDRESS||ue.macAddress||"",je=Oe.serialNumber||Oe.EQT_SERNO||"";(Le==="02"||Le==="31")&&(De=vt||je,$e=je),(Le==="10"||Le==="32")&&Ne.push({mac:vt||je,serialNumber:je,model:Oe.model||Oe.EQT_CL_NM||"",type:Ze.type||Oe.type||"AP"})}const ye=Ne.length>0?((Ue=Ne[_])==null?void 0:Ue.mac)||Ne[0].mac:"";return{ontMac:De,apMac:ye,ontSerial:$e,apList:Ne}},[ze,_]),pt=b.useCallback(async()=>{if(!n){if(!re){M("ENTR_NO . LGU+  ."),e==null||e("ENTR_NO .","error");return}N(!0),M(null);try{const De=t.CTRT_ID||"",$e=await uE({ENTR_NO:re,CTRT_ID:De});if(!$e||($e.RESULT_CD||"").startsWith("N")){const gt=($e==null?void 0:$e.RESULT_MSG)||"L2  ";M(`LGU    (${De})
${gt}`),e==null||e(`L2  : ${gt}`,"error");return}const Ne=$e.MDL_NM||"",ye=$e.EQIP_ID||"",Ue=$e.PRT_INDX_NM||"",ue=$e.ESTB_PLC_NM||"";try{await hE({ENTR_NO:re,ENTR_RQST_NO:T||"null",BIZ_TYPE:"01",CTRT_ID:De})}catch(gt){console.warn("[L2] getUplsEntrEqipDtl error (non-critical):",gt)}let Oe="",Ze="",Le="",vt="";if(Ne)try{const gt=await zg({COMMON_GRP:"LGCT015"});if(gt){const jt=gt.find(Ve=>Ve.COMMON_CD===Ne);jt&&(Oe=jt.COMMON_CD_NM||"",Ze=jt.REF_CODE||"",Le=jt.REF_CODE2||"",vt=jt.REF_CODE3||"")}}catch(gt){console.warn("[L2] LGCT015 lookup error:",gt)}C({autoYn:"Y",buildingName:ue,portNo:Ue,equipId:ye,modelNm:Oe,maxSpeed:Ze,manufacturer:Le,remarks:vt,mdlNmRaw:Ne}),P(!0),de({...he||{},EQIP_ID:ye,EQIP_PORT_NO:Ue,EQIP_DIVS:"L2",DEL_YN:"N"}),e==null||e("L2  .","success")}catch{M("L2    ."),e==null||e("L2    .","error")}finally{N(!1)}}},[re,T,t.CTRT_ID,n,he,de,e]),mt=b.useCallback(async()=>{var De;if(!(n||!re)){$(!0),M(null);try{const $e=t.CTRT_ID||"",Ne=await uE({ENTR_NO:re,CTRT_ID:$e});if(!Ne||(Ne.RESULT_CD||"").startsWith("N")){const Ze=(Ne==null?void 0:Ne.RESULT_MSG)||"OLT  ";M(`LGU OLT    (${$e})
${Ze}`),e==null||e(`OLT  : ${Ze}`,"error");return}const ye={OLT_ID:Ne.EQIP_ID||"",OLT_MDL_NM:Ne.MDL_NM||"",OLT_PORT_NO:Ne.PRT_INDX_NM||"",ESTB_PLC_NM:Ne.ESTB_PLC_NM||""};B(ye);try{await hE({ENTR_NO:re,ENTR_RQST_NO:T||"null",BIZ_TYPE:"01",CTRT_ID:$e})}catch(Ze){console.warn("[FTTH] getUplsEntrEqipDtl error:",Ze)}const Ue=await SM({COMMAND:ne(),ENTR_NO:re,ENTR_RQST_NO:T||"null",BIZ_TYPE:"01",CTRT_ID:$e});if(!Ue||Ue.length===0){M("RN   ."),e==null||e("RN   .","warning");return}const ue=Ue.map(Ze=>{const Le={};for(const vt of Object.keys(Ze))Le[vt.toUpperCase()]=Ze[vt];return Le});U(ue);const Oe=((De=ue[0])==null?void 0:De.EQIP_ID)||"";E(Oe),Oe&&await at(Oe,$e),e==null||e("FTTH  ","success")}catch($e){console.error("[FTTH]  :",$e),M("FTTH    ."),e==null||e("FTTH  ","error")}finally{$(!1)}}},[re,T,t.CTRT_ID,n,Q,e]),Ye=b.useRef(!1);b.useEffect(()=>{Ye.current||n||!re||K||(Ye.current=!0,be?mt():pt())},[re,K,n,be,pt,mt]);const at=async(De,$e)=>{L(!0),X(-1);try{const ye=(await HC({COMMAND:ie(),EQIP_ID:De,CTRT_ID:$e})||[]).map(Ue=>{const ue={};for(const Oe of Object.keys(Ue))ue[Oe.toUpperCase()]=Ue[Oe];return ue});Y(ye)}catch(Ne){console.error("[FTTH]   :",Ne),Y([])}finally{L(!1)}},Fe=async De=>{E(De),X(-1);const $e=t.CTRT_ID||"";De&&await at(De,$e)},tt=De=>{X(De);const $e=A[De];if(!$e||!k)return;de({...he||{},OLT_ID:k.OLT_ID,OLT_PORT:k.OLT_PORT_NO,EQIP_ID:I,EQIP_PORT_NO:$e.PORT_NO,EQIP_PORT_USE:$e.PT_USE,PORT_ENTR_NO:$e.ENTR_NO,EQIP_DIVS:"OLT",DEL_YN:"N"})},ct=b.useCallback(async()=>{if(V(!0),!(ce.length>0)){ge(!0);try{const De=await zg({COMMON_GRP:"LGCT015"});me(De||[])}catch(De){console.error("[L2] LGCT015  :",De)}finally{ge(!1)}}},[ce.length]),Mt=async()=>{if(n)return;const De=he;if(!(De!=null&&De.EQIP_PORT_NO)){e==null||e(" .    .","warning");return}te(!0),u(null);try{if(be&&De.EQIP_PORT_USE==="Y"&&De.PORT_ENTR_NO!==(le||re)){e==null||e("  .    .","error"),te(!1);return}if(!be&&(Q==="N"||Q==="NG")){const $e=(De.EQIP_PORT_NO||"").replace(/\//g,"__"),Ne=await zP({ENTR_NO:le||re,EQIP_ID:De.EQIP_ID||"",PORT_NM:$e,CTRT_ID:t.CTRT_ID||""});if(!Ne.success){e==null||e(`LGU+   
${Ne.RESULT_MSG}`,"error"),te(!1);return}if(Ne.ENTR_EXIST==="Y"){e==null||e("LGU+  .   .","error"),de(null),te(!1);return}}Z(!0),e==null||e("LGU+  .","success")}catch($e){console.error("[]  :",$e),u("    ."),e==null||e("  ","error")}finally{te(!1)}},dt=({label:De,value:$e})=>s.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-gray-100 last:border-b-0",children:[s.jsx("span",{className:"text-xs text-gray-500",children:De}),s.jsx("span",{className:"text-xs font-medium text-gray-900 text-right max-w-[60%] truncate",children:$e||"-"})]}),Je=G.find(De=>De.EQIP_ID===I);return s.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-6 pb-3 sm:pb-4 space-y-3 sm:space-y-4",children:[lt.length>1&&!n&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 sm:p-4",children:[s.jsxs("h5",{className:"text-xs sm:text-sm font-semibold text-amber-800 mb-2 flex items-center gap-1.5",children:[s.jsx(Up,{className:"w-4 h-4"}),"AP  (",lt.length," )"]}),s.jsx("div",{className:"space-y-2",children:lt.map((De,$e)=>s.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg border cursor-pointer transition-colors ${_===$e?"border-amber-400 bg-amber-100":"border-gray-200 bg-white hover:border-amber-300"}`,onClick:()=>p($e),children:[s.jsx("input",{type:"radio",name:"apSelect",checked:_===$e,onChange:()=>p($e),className:"w-4 h-4 text-amber-600"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:[De.type," ",De.model&&`(${De.model})`]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono truncate",children:["MAC: ",De.mac||"-"]})]})]},$e))})]}),!be&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("h5",{className:"text-xs sm:text-sm font-bold text-gray-900 flex items-center gap-1.5",children:[s.jsx(lE,{className:"w-4 h-4 text-purple-500"}),"()",v&&s.jsx(Ai,{className:"w-3.5 h-3.5 text-green-500 ml-1"}),y&&s.jsx("div",{className:"w-3.5 h-3.5 border-2 border-purple-500 border-t-transparent rounded-full animate-spin ml-1"})]})}),w&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 mb-2 flex items-start gap-1.5",children:[s.jsx($r,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-red-700",children:w})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsx(dt,{label:"",value:"L2"}),s.jsx(dt,{label:"",value:(g==null?void 0:g.autoYn)||"-"}),s.jsx(dt,{label:"",value:(g==null?void 0:g.buildingName)||"-"}),s.jsx(dt,{label:"",value:(g==null?void 0:g.portNo)||"-"}),s.jsx(dt,{label:"ID",value:(g==null?void 0:g.equipId)||"-"}),s.jsx(dt,{label:"",value:(g==null?void 0:g.modelNm)||"-"}),s.jsx(dt,{label:"",value:(g==null?void 0:g.maxSpeed)||"-"}),s.jsx(dt,{label:"",value:(g==null?void 0:g.manufacturer)||"-"}),s.jsx(dt,{label:"",value:(g==null?void 0:g.remarks)||"-"})]}),s.jsx("div",{className:"mt-2 flex justify-end",children:s.jsxs("button",{onClick:ct,className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-1 transition-colors",children:[s.jsx(xM,{className:"w-3 h-3"})," L2 "]})})]}),be&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("h5",{className:"text-xs sm:text-sm font-bold text-gray-900 flex items-center gap-1.5",children:[s.jsx(lE,{className:"w-4 h-4 text-orange-500"}),"(OLT)",k&&s.jsx(Ai,{className:"w-3.5 h-3.5 text-green-500 ml-1"}),z&&s.jsx("div",{className:"w-3.5 h-3.5 border-2 border-orange-500 border-t-transparent rounded-full animate-spin ml-1"})]})}),w&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 mb-2 flex items-start gap-1.5",children:[s.jsx($r,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-red-700",children:w})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsx(dt,{label:"",value:"OLT"}),s.jsx(dt,{label:"",value:(k==null?void 0:k.OLT_MDL_NM)||"-"}),s.jsx(dt,{label:"",value:(k==null?void 0:k.OLT_PORT_NO)||"-"}),s.jsx(dt,{label:"",value:(k==null?void 0:k.ESTB_PLC_NM)||"-"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[s.jsxs("h5",{className:"text-xs sm:text-sm font-bold text-gray-900 mb-2 flex items-center gap-1.5",children:[s.jsx(iE,{className:"w-4 h-4 text-orange-500"}),"RN  "]}),G.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:"RN  "}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:I,onChange:De=>Fe(De.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg bg-white appearance-none pr-8 focus:border-orange-400 focus:outline-none",children:G.map(De=>s.jsxs("option",{value:De.EQIP_ID,children:[De.EQIP_ID," - ",De.MDL_NM||De.EQIP_NM||""]},De.EQIP_ID))}),s.jsx(hr,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none"})]}),Je&&s.jsxs("div",{className:"mt-1.5 grid grid-cols-2 gap-x-4 gap-y-1",children:[s.jsx(dt,{label:"",value:Je.MDL_NM||"-"}),s.jsx(dt,{label:"",value:Je.EQIP_ESTB_FLOO_NM||"-"})]})]}),A.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:["  (",A.length,")"]}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"max-h-48 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-left font-semibold text-gray-600 border-b",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-center font-semibold text-gray-600 border-b",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-left font-semibold text-gray-600 border-b",children:"ID"})]})}),s.jsx("tbody",{children:A.map((De,$e)=>s.jsxs("tr",{onClick:()=>!n&&tt($e),className:`cursor-pointer transition-colors ${se===$e?"bg-orange-100 border-l-2 border-l-orange-500":De.PT_USE==="Y"?"bg-red-50/50":$e%2===0?"bg-white":"bg-gray-50/50"} hover:bg-orange-50`,children:[s.jsx("td",{className:"px-2 py-1.5 font-mono border-b",children:De.PORT_NO||"-"}),s.jsx("td",{className:"px-2 py-1.5 text-center border-b",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[0.625rem] font-medium ${De.PT_USE==="Y"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:De.PT_USE==="Y"?"":""})}),s.jsx("td",{className:"px-2 py-1.5 font-mono text-gray-600 border-b",children:De.ENTR_NO||"-"})]},`${De.EQIP_ID}-${De.PORT_NO}-${$e}`))})]})})})]}),F&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"inline-block w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"   ..."})]})]})]}),!n&&s.jsx("button",{onClick:Mt,disabled:Ge||ee,className:`w-full py-3 sm:py-4 rounded-xl font-semibold text-sm sm:text-base flex items-center justify-center gap-2 transition-colors ${ee?"bg-green-500 text-white cursor-default":Ge?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,children:ee?s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"w-4 h-4 sm:w-5 sm:h-5"})," "]}):Ge?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(iE,{className:"w-4 h-4 sm:w-5 sm:h-5"}),""]})}),c&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 flex items-start gap-2",children:[s.jsx($r,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs sm:text-sm text-red-700",children:c})]}),ee&&!n&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 sm:p-4",children:s.jsx("p",{className:"text-xs sm:text-sm text-green-700",children:" .       ."})}),q&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"LGU+ L2  "}),s.jsx("button",{onClick:()=>V(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:s.jsx(Mi,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-3",children:Ce?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):ce.length===0?s.jsx("div",{className:"text-center py-8 text-sm text-gray-500",children:" ."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",style:{minWidth:"400px"},children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""}),s.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 whitespace-nowrap",children:""})]})}),s.jsx("tbody",{children:ce.map((De,$e)=>s.jsxs("tr",{className:`border-b border-gray-50 ${$e%2===0?"bg-white":"bg-gray-50"}`,children:[s.jsx("td",{className:"px-2 py-2 text-gray-900 whitespace-nowrap",children:De.COMMON_CD_NM||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:De.REF_CODE||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:De.REF_CODE2||"-"}),s.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:De.REF_CODE3||"-"})]},$e))})]})})}),s.jsx("div",{className:"p-3 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700",children:""})})]})})]})},xR=({order:t,onBack:e,onComplete:n,showToast:r})=>{var k,B;const[i,a]=b.useState(!1),[o,c]=b.useState(!0),[u,h]=b.useState(!0),[m,_]=b.useState(!0),[p,g]=b.useState(""),C=t.WRK_CD||"",y=["01","03","05","07"].includes(C);b.useEffect(()=>{const G=t.PYM_MTHD||"",U=t.ATMT_YN||"";["01","05","07"].includes(C)&&G==="01"&&U==="Y"?(_(!1),g("/Email")):(_(!0),g(""))},[C,t]),b.useEffect(()=>{(async()=>{var I,E;const U=t.WRK_DRCTN_ID;if(!U){console.log("[PostProcess] WRK_DRCTN_ID ,    ");const A=t.SIGN_TYP||"",Y=t.CUST_CL||((I=t.customer)==null?void 0:I.CUST_CL)||"",se=t.PDA_CLICK_YN||"";c(A==="NN"||Y==="H"||se==="Y");return}try{console.log("[PostProcess] getAfterProcInfo :",U);const A=await OM(U);if(A)console.log("[PostProcess] getAfterProcInfo :",A),c(A.WRK_DRCTN_PRNT_YN!=="Y"),h(A.CLOSE_DANGER!=="Y"),A.AUTO_PAYMENTS_YN==="Y"&&(_(!1),g("/Email"));else{const Y=t.SIGN_TYP||"",se=t.CUST_CL||((E=t.customer)==null?void 0:E.CUST_CL)||"",X=t.PDA_CLICK_YN||"";c(Y==="NN"||se==="H"||X==="Y")}}catch(A){console.error("[PostProcess] getAfterProcInfo :",A)}})()},[t]);const N=()=>{r==null||r("     .","info")},v=()=>{r==null||r("AS     .","info")},P=()=>{if(o){r==null||r("  .","warning");return}r==null||r("()   ","info")},w=()=>{if(u){r==null||r("  .","warning");return}r==null||r("()   ","info")},M=()=>{if(m){r==null||r("  .","warning");return}r==null||r("   ","info")};return s.jsxs("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:" "})}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:((k=t.customer)==null?void 0:k.name)||t.CUST_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.typeDisplay||t.WRK_CD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-gray-100",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("span",{className:"text-sm font-medium text-gray-800 text-right max-w-[60%] truncate",children:t.PROD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-start py-1.5",children:[s.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:""}),s.jsx("span",{className:"text-xs text-gray-700 text-right ml-2",children:((B=t.customer)==null?void 0:B.address)||t.ST_ADDR||"-"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:" "})}),s.jsx("div",{className:"p-4 space-y-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{type:"button",onClick:N,className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-50 hover:bg-blue-100 active:bg-blue-200 text-blue-700 rounded-lg font-semibold transition-all text-sm border border-blue-200",children:[s.jsx("span",{children:""}),s.jsx(cg,{className:"w-3.5 h-3.5"})]}),s.jsxs("button",{type:"button",onClick:v,className:"flex items-center justify-center gap-2 px-4 py-3 bg-orange-50 hover:bg-orange-100 active:bg-orange-200 text-orange-700 rounded-lg font-semibold transition-all text-sm border border-orange-200",children:[s.jsx("span",{children:"AS"}),s.jsx(cg,{className:"w-3.5 h-3.5"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:""})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("button",{type:"button",onClick:P,disabled:o,className:`w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-lg font-semibold transition-all text-sm ${o?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-500 hover:bg-purple-600 active:bg-purple-700 text-white shadow-sm"}`,children:[s.jsx("span",{children:" ()"}),!o&&s.jsx(cg,{className:"w-3.5 h-3.5"})]}),s.jsxs("button",{type:"button",onClick:w,disabled:u,className:`w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-lg font-semibold transition-all text-sm ${u?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 active:bg-green-700 text-white shadow-sm"}`,children:[s.jsx("span",{children:" ()"}),!u&&s.jsx(cg,{className:"w-3.5 h-3.5"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-cyan-700 px-4 py-3",children:s.jsx("h3",{className:"text-sm font-bold text-white",children:"/"})}),s.jsx("div",{className:"p-4",children:s.jsxs("button",{type:"button",onClick:M,disabled:m,className:`w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-lg font-semibold transition-all text-sm ${m?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 active:bg-cyan-700 text-white shadow-sm"}`,children:[s.jsx("span",{children:p}),!m&&s.jsx(cg,{className:"w-3.5 h-3.5"})]})})]}),y&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>a(!i),className:"w-full flex items-center justify-between px-4 py-3.5 bg-amber-50 hover:bg-amber-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-semibold text-amber-800",children:" "}),i?s.jsx(Pr,{className:"w-5 h-5 text-amber-600"}):s.jsx(hr,{className:"w-5 h-5 text-amber-600"})]}),i&&s.jsx("div",{className:"p-4 bg-white border-t border-amber-100",children:s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"  ."})})]}),s.jsx("div",{className:"pt-2 pb-4",children:s.jsx("button",{type:"button",onClick:n,className:"w-full px-4 py-4 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-800 hover:to-slate-900 active:from-slate-900 active:to-black text-white rounded-xl font-bold text-base shadow-lg transition-all",children:""})})]})},i$=({prodCd:t,soId:e,isCertifyProdField:n})=>{const[r,i]=b.useState([]),[a,o]=b.useState(!1),[c,u]=b.useState([]),[h,m]=b.useState(!1),[_,p]=b.useState([]),[g,C]=b.useState(!1),y=a&&h&&g;b.useEffect(()=>{(async()=>{try{const M=(await qa("CMIF006")).map(k=>k.code||k.COMMON_CD);i(M),console.log("[useCertifyDetection] CMIF006 SO :",M.length,"")}catch(w){console.error("[useCertifyDetection] CMIF006  :",w)}o(!0)})()},[]),b.useEffect(()=>{(async()=>{try{const w=await N1();u(w),console.log("[useCertifyDetection] CertifyProdMap:",w.length,"")}catch(w){console.error("[useCertifyDetection] CertifyProdMap  :",w)}m(!0)})()},[]),b.useEffect(()=>{(async()=>{try{const M=(await qa("LGCT001")).map(k=>({code:k.code||k.COMMON_CD,opLnkdCd:k.ref_code8||""}));p(M),console.log("[useCertifyDetection] LGCT001 UPLS :",M.length,"")}catch(w){console.error("[useCertifyDetection] LGCT001  :",w)}C(!0)})()},[]);const N=b.useMemo(()=>{const P=_.find(M=>M.code===t),w=!!P;return console.log("[useCertifyDetection] PROD_CD:",t,"| SO_ID:",e,"| LGCT001:",P?P.opLnkdCd:"N/A","| result:",w),w},[t,e,_]),v=b.useMemo(()=>{const P=_.find(w=>w.code===t);return(P==null?void 0:P.opLnkdCd)||""},[t,_]);return{isCertifyProd:N,certifyOpLnkdCd:v,isLoaded:y,certifyProdList:c,certifySoList:r,uplsProdList:_}},a$=({workItem:t,onComplete:e,onBack:n,showToast:r})=>{var $;const i=t.WRK_STAT_CD==="3"||t.WRK_STAT_CD==="4"||t.WRK_STAT_CD==="7"||t.status==="";t.WRK_STAT_CD==="1"||t.WRK_STAT_CD;const{currentStep:a,setCurrentStep:o,setCurrentWorkId:c,equipmentData:u,setEquipmentData:h,filteringData:m,setFilteringData:_}=ta(),[p,g]=b.useState(null),{isCertifyProd:C,certifyOpLnkdCd:y,isLoaded:N}=i$({prodCd:t.PROD_CD||"",soId:t.SO_ID||"",isCertifyProdField:t.IS_CERTIFY_PROD});b.useEffect(()=>{c(t.id);const F=()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0};F(),requestAnimationFrame(()=>{F()}),setTimeout(()=>{F()},50)},[t.id,c]),b.useEffect(()=>{(async()=>{var L;if(!(t.WRK_CD!=="01"&&t.WRK_CD!=="02")&&!i)try{const re=await S1({WRK_ID:t.id,RCPT_ID:t.RCPT_ID,CUST_ID:((L=t.customer)==null?void 0:L.id)||t.CUST_ID});if(re){const fe=re.OST_WORKABLE_STAT||"";if(fe==="0"||fe==="1"||fe==="4"){const T=t.WRK_CD==="01"?"    .":"    .";r==null||r(T,"warning",!0)}}}catch(re){console.error("[WorkProcessFlow] OST   :",re)}})()},[t.id,t.WRK_CD,t.RCPT_ID,($=t.customer)==null?void 0:$.id,t.CUST_ID,i,r]),b.useEffect(()=>{(async()=>{var re;const L=t.WRK_CD==="05"&&t.DTL_CTRT_ID||t.CTRT_ID;try{const fe=localStorage.getItem("userInfo"),T=fe?JSON.parse(fe):{};console.log("[WorkProcessFlow]   - WRK_CD:",t.WRK_CD,"CTRT_ID:",L||"()");const j=await Eo({WRKR_ID:T.workerId||"A20130708",SO_ID:t.SO_ID||T.soId,WRK_ID:t.id,CUST_ID:((re=t.customer)==null?void 0:re.id)||t.CUST_ID,RCPT_ID:t.RCPT_ID||null,CTRT_ID:L||"",OLD_CTRT_ID:t.WRK_CD==="05"?t.CTRT_ID:null,CRR_ID:t.CRR_ID||null,ADDR_ORD:t.ADDR_ORD||null,CRR_TSK_CL:t.WRK_CD||"",WRK_DTL_TCD:t.WRK_DTL_TCD||"",WRK_CD:t.WRK_CD||null,WRK_STAT_CD:t.WRK_STAT_CD||null,WRK_DRCTN_ID:t.WRK_DRCTN_ID||t.directionId||null,BLD_ID:t.BLD_ID||null,PROD_CD:t.PROD_CD||null}),K={kpiProdGrpCd:j.kpiProdGrpCd,prodChgGb:j.prodChgGb,chgKpiProdGrpCd:j.chgKpiProdGrpCd,prodGrp:j.prodGrp,upCtrlCl:j.upCtrlCl,prodPromoInfo:j.prodPromoInfo||[]};if(g(j),_(K),["02","08","09"].includes(t.WRK_CD||"")||(h({installedEquipments:[],removedEquipments:[],prodPromoInfo:j.prodPromoInfo||[],...K}),console.log("[WorkProcessFlow]   - prodPromoInfo :",(j.prodPromoInfo||[]).length,"")),["02","08","09"].includes(t.WRK_CD||"")){const V=localStorage.getItem("userInfo"),ce=V?JSON.parse(V):{},me=(j.removedEquipments||[]).map(Ce=>{var ge;return{id:Ce.EQT_NO,type:Ce.ITEM_MID_NM,model:Ce.EQT_CL_NM,serialNumber:Ce.EQT_SERNO,itemMidCd:Ce.ITEM_MID_CD,eqtClCd:Ce.EQT_CL_CD||Ce.EQT_CL,macAddress:Ce.MAC_ADDRESS||Ce.MAC_ADDR,CUST_ID:((ge=t.customer)==null?void 0:ge.id)||t.CUST_ID,CTRT_ID:t.CTRT_ID,EQT_NO:Ce.EQT_NO,ITEM_CD:Ce.ITEM_CD||"",EQT_SERNO:Ce.EQT_SERNO,WRK_ID:t.id,WRK_CD:t.WRK_CD,EQT_CL:Ce.EQT_CL||Ce.EQT_CL_CD||"",EQT_CL_CD:Ce.EQT_CL_CD||Ce.EQT_CL||"",ITEM_MID_CD:Ce.ITEM_MID_CD||"",SVC_CMPS_ID:Ce.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:Ce.BASIC_PROD_CMPS_ID||"",MST_SO_ID:Ce.MST_SO_ID||t.SO_ID||ce.soId,SO_ID:Ce.SO_ID||t.SO_ID||ce.soId,REG_UID:ce.userId||ce.workerId||"A20230019",EQT_LOSS_YN:"0",PART_LOSS_BRK_YN:"0",EQT_BRK_YN:"0",EQT_CABL_LOSS_YN:"0",EQT_CRDL_LOSS_YN:"0"}});h({installedEquipments:[],removedEquipments:me,prodPromoInfo:j.prodPromoInfo||[],...K}),console.log("[WorkProcessFlow]    :",me.length,", prodPromoInfo:",(j.prodPromoInfo||[]).length,"")}}catch(fe){console.error(" API Pre-loading :",fe)}})()},[t.id]);const v=()=>{var re,fe,T,j,K,J;if(((re=u==null?void 0:u.installedEquipments)==null?void 0:re.length)>0||((fe=u==null?void 0:u.removedEquipments)==null?void 0:fe.length)>0)return console.log("[WorkProcessFlow] Store     - "),u;const F=`equipment_draft_${t.id}`,L=localStorage.getItem(F);if(L)try{const q=JSON.parse(L),V=q.installedEquipments&&q.installedEquipments.length>0,ce=q.markedForRemoval&&q.markedForRemoval.length>0;if(V||ce){const me=localStorage.getItem("userInfo"),Ce=me?JSON.parse(me):{},ge=t.DTL_CTRT_ID||t.CTRT_ID,Ge=(q.markedForRemoval||[]).map(de=>{var ee,Z;const Q=((ee=q.removalStatus)==null?void 0:ee[de.id])||{};return{...de,id:de.id,type:de.type,model:de.model,serialNumber:de.serialNumber,itemMidCd:de.itemMidCd,EQT_NO:de.id,EQT_SERNO:de.serialNumber,ITEM_MID_CD:de.itemMidCd,EQT_CL_CD:de.eqtClCd,MAC_ADDRESS:de.macAddress,WRK_ID:t.id,CUST_ID:((Z=t.customer)==null?void 0:Z.id)||t.CUST_ID,CTRT_ID:ge,WRK_CD:t.WRK_CD,CHG_YN:t.WRK_CD==="05"?"Y":void 0,SVC_CMPS_ID:de.SVC_CMPS_ID||"",BASIC_PROD_CMPS_ID:de.BASIC_PROD_CMPS_ID||"",MST_SO_ID:de.MST_SO_ID||t.SO_ID||Ce.soId,SO_ID:de.SO_ID||t.SO_ID||Ce.soId,REG_UID:Ce.userId||Ce.workerId||"A20230019",EQT_LOSS_YN:Q.EQT_LOSS_YN||"0",PART_LOSS_BRK_YN:Q.PART_LOSS_BRK_YN||"0",EQT_BRK_YN:Q.EQT_BRK_YN||"0",EQT_CABL_LOSS_YN:Q.EQT_CABL_LOSS_YN||"0",EQT_CRDL_LOSS_YN:Q.EQT_CRDL_LOSS_YN||"0"}}),te=(q.installedEquipments||[]).map(de=>{const Q=de.actualEquipment||{},ee=de.contractEquipment||{};return{actualEquipment:{...Q,id:Q.id,type:Q.type,model:Q.model,serialNumber:Q.serialNumber,itemMidCd:Q.itemMidCd,eqtClCd:Q.eqtClCd,macAddress:de.macAddress||Q.macAddress,BASIC_PROD_CMPS_ID:Q.BASIC_PROD_CMPS_ID||ee.BASIC_PROD_CMPS_ID||"",EQT_PROD_CMPS_ID:Q.EQT_PROD_CMPS_ID||ee.SVC_CMPS_ID||ee.id,PROD_CD:Q.PROD_CD||ee.PROD_CD||t.PROD_CD,SVC_CD:Q.SVC_CD||ee.SVC_CD||"",SVC_CMPS_ID:Q.SVC_CMPS_ID||ee.SVC_CMPS_ID||ee.id,EQT_SALE_AMT:Q.EQT_SALE_AMT||"0",MST_SO_ID:Q.MST_SO_ID||t.SO_ID||Ce.soId,SO_ID:Q.SO_ID||t.SO_ID||Ce.soId,OLD_LENT_YN:Q.OLD_LENT_YN||"N",LENT:Q.LENT||"10",ITLLMT_PRD:Q.ITLLMT_PRD||"00",EQT_USE_STAT_CD:Q.EQT_USE_STAT_CD||"1",EQT_CHG_GB:Q.EQT_CHG_GB||"1",IF_DTL_ID:Q.IF_DTL_ID||""},contractEquipment:{...ee,id:ee.id,SVC_CMPS_ID:ee.SVC_CMPS_ID||ee.id,BASIC_PROD_CMPS_ID:ee.BASIC_PROD_CMPS_ID||"",PROD_CD:ee.PROD_CD||"",SVC_CD:ee.SVC_CD||""},macAddress:de.macAddress||Q.macAddress}}),he={installedEquipments:te,removedEquipments:Ge,kpiProdGrpCd:(m==null?void 0:m.kpiProdGrpCd)||q.kpiProdGrpCd,prodChgGb:(m==null?void 0:m.prodChgGb)||q.prodChgGb,chgKpiProdGrpCd:(m==null?void 0:m.chgKpiProdGrpCd)||q.chgKpiProdGrpCd,prodGrp:(m==null?void 0:m.prodGrp)||q.prodGrp,upCtrlCl:(m==null?void 0:m.upCtrlCl)||q.upCtrlCl};return console.log("[WorkProcessFlow] localStorage   :",{installed:he.installedEquipments.length,removed:he.removedEquipments.length,_PROD_CD:(j=(T=te[0])==null?void 0:T.actualEquipment)==null?void 0:j.PROD_CD,_SVC_CMPS_ID:(J=(K=te[0])==null?void 0:K.actualEquipment)==null?void 0:J.SVC_CMPS_ID}),he}}catch(q){console.error("   :",q)}return null};w6(t.WRK_CD||"");const P=t.WRK_CD||"",w=C&&!i&&P!=="08"&&P!=="02",M=w?6:5,k=b.useMemo(()=>w?[{id:1,title:" ",completed:i||a>1},{id:2,title:" ",completed:i||a>2},{id:3,title:" ",completed:i||a>3},{id:4,title:" ",completed:i||a>4},{id:5,title:" ",completed:i||a>5},{id:6,title:"",completed:a>6}]:[{id:1,title:" ",completed:i||a>1},{id:2,title:" ",completed:i||a>2},{id:3,title:" ",completed:i||a>3},{id:4,title:" ",completed:i||a>4},{id:5,title:"",completed:a>5}],[w,i,a]);b.useEffect(()=>{a>M&&o(M)},[a,M]);const B=()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},G=()=>{if(!C)return!0;const F=Ui.getState().getWorkState(t.id),L=(F==null?void 0:F.installedEquipments)||[],re=(F==null?void 0:F.contractEquipments)||[];if(console.log("[FTTH ] :",re.length," | :",L.length,""),L.length===0)return r==null||r("  .","error"),!1;for(const fe of re)if(!L.some(j=>{var K;return((K=j.contractEquipment)==null?void 0:K.id)===fe.id})){const j=fe.type||fe.EQT_CL_NM||"ONT-PON";return r==null||r(` ${j}  .`,"error"),!1}return console.log("[FTTH ]  -   "),!0},U=F=>{if(!w)return!0;const L=Za.getState(),re=["N","NG"].includes(y);return F>=4&&re&&!L.ldapResult?(r==null||r("LDAP   .","warning"),!1):F>=5&&!L.certifyRegconfInfo?(r==null||r("  .","warning"),!1):!0},I=(F=!1)=>{var L,re,fe,T,j;if(a<M){const K=a+1;if(w&&K>=4&&(!G()||!U(K)))return;if(a===3&&!F){const J=v();J&&h(J)}if(a===3){const J=Ui.getState().getWorkState(t.id),q=me=>me?me.EQT_LOSS_YN==="Y"||me.EQT_LOSS_YN==="1"||me.PART_LOSS_BRK_YN==="Y"||me.PART_LOSS_BRK_YN==="1"||me.EQT_BRK_YN==="Y"||me.EQT_BRK_YN==="1"||me.EQT_CABL_LOSS_YN==="Y"||me.EQT_CABL_LOSS_YN==="1"||me.EQT_CRDL_LOSS_YN==="Y"||me.EQT_CRDL_LOSS_YN==="1":!1,V=me=>{if(!me)return"";const Ce=[];return(me.EQT_LOSS_YN==="Y"||me.EQT_LOSS_YN==="1")&&Ce.push(""),(me.PART_LOSS_BRK_YN==="Y"||me.PART_LOSS_BRK_YN==="1")&&Ce.push(""),(me.EQT_BRK_YN==="Y"||me.EQT_BRK_YN==="1")&&Ce.push(""),(me.EQT_CABL_LOSS_YN==="Y"||me.EQT_CABL_LOSS_YN==="1")&&Ce.push(""),(me.EQT_CRDL_LOSS_YN==="Y"||me.EQT_CRDL_LOSS_YN==="1")&&Ce.push(""),Ce.length>0?Ce.join(", "):""};console.log(""),console.log(" [Step 34]    (workEquipmentStore)"),console.log(""),console.log("  (installedEquipments):",((L=J==null?void 0:J.installedEquipments)==null?void 0:L.length)||0,""),(re=J==null?void 0:J.installedEquipments)==null||re.forEach((me,Ce)=>{const ge=me.actualEquipment||{},Ge=me.contractEquipment||{};console.log(`  [${Ce}] ${Ge.type||ge.type||""} | : ${ge.model||"-"} | S/N: ${ge.serialNumber||"-"}`)}),console.log(""),console.log("  (markedForRemoval):",((fe=J==null?void 0:J.markedForRemoval)==null?void 0:fe.length)||0,""),(T=J==null?void 0:J.markedForRemoval)==null||T.forEach((me,Ce)=>{var Q;const ge=me.id||me.EQT_NO,Ge=((Q=J==null?void 0:J.removalStatus)==null?void 0:Q[ge])||{},te=q(Ge),he=V(Ge),de=te?`  (${he})`:" ";console.log(`  [${Ce}] ${me.type||me.ITEM_MID_NM||""} | : ${me.model||"-"} | S/N: ${me.serialNumber||"-"}  ${de}`)}),console.log(""),console.log("  (removeEquipments - API):",((j=J==null?void 0:J.removeEquipments)==null?void 0:j.length)||0,""),console.log(""),console.log(" removalStatus  :");const ce=Object.keys((J==null?void 0:J.removalStatus)||{});ce.length>0?ce.forEach(me=>{var Ge;const Ce=(Ge=J==null?void 0:J.removalStatus)==null?void 0:Ge[me],ge=q(Ce);console.log(`  "${me}"  ${ge?"":""}`,Ce)}):console.log("  ( -  )"),console.log("")}o(J=>J+1),requestAnimationFrame(()=>B())}},E=()=>{a>1&&(o(F=>F-1),requestAnimationFrame(()=>B()))},A=F=>{var L,re,fe,T,j;if(!(w&&F>=4&&(!G()||!U(F)))){if(a===3&&F!==3){const K=v();if(K&&h(K),F>3){const J=Ui.getState().getWorkState(t.id),q=me=>me?me.EQT_LOSS_YN==="Y"||me.EQT_LOSS_YN==="1"||me.PART_LOSS_BRK_YN==="Y"||me.PART_LOSS_BRK_YN==="1"||me.EQT_BRK_YN==="Y"||me.EQT_BRK_YN==="1"||me.EQT_CABL_LOSS_YN==="Y"||me.EQT_CABL_LOSS_YN==="1"||me.EQT_CRDL_LOSS_YN==="Y"||me.EQT_CRDL_LOSS_YN==="1":!1,V=me=>{if(!me)return"";const Ce=[];return(me.EQT_LOSS_YN==="Y"||me.EQT_LOSS_YN==="1")&&Ce.push(""),(me.PART_LOSS_BRK_YN==="Y"||me.PART_LOSS_BRK_YN==="1")&&Ce.push(""),(me.EQT_BRK_YN==="Y"||me.EQT_BRK_YN==="1")&&Ce.push(""),(me.EQT_CABL_LOSS_YN==="Y"||me.EQT_CABL_LOSS_YN==="1")&&Ce.push(""),(me.EQT_CRDL_LOSS_YN==="Y"||me.EQT_CRDL_LOSS_YN==="1")&&Ce.push(""),Ce.length>0?Ce.join(", "):""};console.log(""),console.log(` [Step 3${F}]    (workEquipmentStore)`),console.log(""),console.log("  (installedEquipments):",((L=J==null?void 0:J.installedEquipments)==null?void 0:L.length)||0,""),(re=J==null?void 0:J.installedEquipments)==null||re.forEach((me,Ce)=>{const ge=me.actualEquipment||{},Ge=me.contractEquipment||{};console.log(`  [${Ce}] ${Ge.type||ge.type||""} | : ${ge.model||"-"} | S/N: ${ge.serialNumber||"-"}`)}),console.log(""),console.log("  (markedForRemoval):",((fe=J==null?void 0:J.markedForRemoval)==null?void 0:fe.length)||0,""),(T=J==null?void 0:J.markedForRemoval)==null||T.forEach((me,Ce)=>{var Q;const ge=me.id||me.EQT_NO,Ge=((Q=J==null?void 0:J.removalStatus)==null?void 0:Q[ge])||{},te=q(Ge),he=V(Ge),de=te?`  (${he})`:" ";console.log(`  [${Ce}] ${me.type||me.ITEM_MID_NM||""} | : ${me.model||"-"} | S/N: ${me.serialNumber||"-"}  ${de}`)}),console.log(""),console.log("  (removeEquipments - API):",((j=J==null?void 0:J.removeEquipments)==null?void 0:j.length)||0,""),console.log(""),console.log(" removalStatus  :");const ce=Object.keys((J==null?void 0:J.removalStatus)||{});ce.length>0?ce.forEach(me=>{var Ge;const Ce=(Ge=J==null?void 0:J.removalStatus)==null?void 0:Ge[me],ge=q(Ce);console.log(`  "${me}"  ${ge?"":""}`,Ce)}):console.log("  ( -  )"),console.log("")}}o(F),requestAnimationFrame(()=>B())}},Y=F=>{h({...F,prodPromoInfo:F.prodPromoInfo||(u==null?void 0:u.prodPromoInfo)||[],kpiProdGrpCd:F.kpiProdGrpCd||(u==null?void 0:u.kpiProdGrpCd),prodChgGb:F.prodChgGb||(u==null?void 0:u.prodChgGb),chgKpiProdGrpCd:F.chgKpiProdGrpCd||(u==null?void 0:u.chgKpiProdGrpCd),prodGrp:F.prodGrp||(u==null?void 0:u.prodGrp),upCtrlCl:F.upCtrlCl||(u==null?void 0:u.upCtrlCl)}),I(!0)},se=()=>{I()},X=()=>s.jsxs("div",{className:"flex items-center px-2 pt-3 sm:pt-4 pb-2 sm:pb-3 bg-white w-full",children:[s.jsx("button",{onClick:E,disabled:a<=1,className:`
          w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full transition-all flex-shrink-0
          ${a<=1?"text-gray-300 cursor-not-allowed":"text-blue-600 hover:bg-blue-50 active:bg-blue-100"}
        `,style:{marginBottom:"18px"},children:s.jsx(z2,{className:"w-6 h-6 sm:w-7 sm:h-7",strokeWidth:2.5})}),s.jsx("div",{className:"flex items-center justify-between flex-1 mx-1",children:k.map((F,L)=>s.jsxs(Zi.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center gap-0.5 sm:gap-1 cursor-pointer transition-all",onClick:()=>A(F.id),children:[s.jsx("div",{className:`
                  w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm transition-all
                  ${a===F.id?"bg-blue-500 text-white shadow-lg scale-110":F.completed?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}
                `,children:F.completed?s.jsx(ho,{className:"w-4 h-4 sm:w-5 sm:h-5"}):F.id}),s.jsx("div",{className:`
                  text-[0.5625rem] sm:text-[0.625rem] font-medium text-center transition-all whitespace-nowrap
                  ${a===F.id?"text-blue-600 font-bold":F.completed?"text-green-600":"text-gray-500"}
                `,children:F.title})]}),L<k.length-1&&s.jsx("div",{className:`flex-1 h-0.5 mx-1 rounded-full ${F.completed?"bg-green-400":"bg-gray-200"}`,style:{marginBottom:"18px",maxWidth:"24px"}})]},F.id))}),s.jsx("button",{onClick:I,disabled:a>=M,className:`
          w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full transition-all flex-shrink-0
          ${a>=M?"text-gray-300 cursor-not-allowed":"text-blue-600 hover:bg-blue-50 active:bg-blue-100"}
        `,style:{marginBottom:"18px"},children:s.jsx(Hw,{className:"w-6 h-6 sm:w-7 sm:h-7",strokeWidth:2.5})})]}),z=()=>{switch(a){case 1:return s.jsx(LY,{workItem:t,onNext:I,onBack:E});case 2:return s.jsx(kY,{workItem:t,onNext:I,onBack:E,showToast:r});case 3:return s.jsx(s$,{workItem:t,onSave:Y,onBack:E,showToast:r,preloadedApiData:p,onPreloadedDataUpdate:g,readOnly:i,isCertifyProd:C,certifyOpLnkdCd:y});case 4:return w?s.jsx(r$,{workItem:t,onNext:I,onBack:E,showToast:r,readOnly:i}):s.jsx(Kp,{order:t,onBack:E,onSuccess:se,showToast:r,equipmentData:u||m,readOnly:i,isCertifyProd:C,onEquipmentRefreshNeeded:()=>{console.log("[WorkProcessFlow]   -   "),g(null)}});case 5:return w?s.jsx(Kp,{order:t,onBack:E,onSuccess:se,showToast:r,equipmentData:u||m,readOnly:i,isCertifyProd:C,onEquipmentRefreshNeeded:()=>{console.log("[WorkProcessFlow]   -   "),g(null)}}):s.jsx(xR,{order:t,onBack:E,onComplete:e,showToast:r});case 6:return s.jsx(xR,{order:t,onBack:E,onComplete:e,showToast:r});default:return null}};return N?s.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden",children:[s.jsxs("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 shadow-sm",children:[i&&s.jsx("div",{className:"bg-green-50 border-b border-green-200 px-3 sm:px-4 py-1.5 sm:py-2",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 sm:gap-2",children:[s.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-[0.625rem] sm:text-xs font-medium text-green-800 whitespace-nowrap",children:"  ( )"})]})}),X()]}),s.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:z()})]}):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-gray-50",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"   ..."})]})},l$=({message:t,type:e="info",onClose:n})=>{const r=()=>{switch(e){case"success":return s.jsx(Ai,{className:"w-8 h-8 text-green-500"});case"error":return s.jsx(bo,{className:"w-8 h-8 text-red-500"});case"warning":return s.jsx($r,{className:"w-8 h-8 text-yellow-500"});default:return s.jsx(bM,{className:"w-8 h-8 text-blue-500"})}},i=()=>{switch(e){case"success":return"bg-green-500 hover:bg-green-600 active:bg-green-700";case"error":return"bg-red-500 hover:bg-red-600 active:bg-red-700";case"warning":return"bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700";default:return"bg-blue-500 hover:bg-blue-600 active:bg-blue-700"}},a=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";default:return""}};return s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center",style:{zIndex:9999},children:[s.jsx("div",{className:"fixed inset-0 bg-black/40",onClick:n}),s.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-[85vw] max-w-[320px] overflow-hidden",children:[s.jsxs("div",{className:"flex flex-col items-center px-6 pt-6 pb-4",children:[r(),s.jsx("h3",{className:"mt-3 text-base font-bold text-gray-900",children:a()}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 text-center leading-relaxed whitespace-pre-line",children:t})]}),s.jsx("div",{className:"px-6 pb-6",children:s.jsx("button",{onClick:n,className:`w-full py-3 text-sm font-semibold text-white rounded-xl transition-colors ${i()}`,children:""})})]})]})},o$=({isOpen:t,onClose:e,userName:n="",userId:r="",stats:i={todayInProgress:0,todayCompleted:0,weekTotal:0,monthTotal:0},onLogout:a,onNavigate:o})=>{const{fontScale:c,setFontScale:u,preferredNavApp:h,setPreferredNavApp:m}=uo(),_=[{key:"small",label:"",size:"14px"},{key:"medium",label:"",size:"16px"},{key:"large",label:"",size:"18px"},{key:"xlarge",label:" ",size:"20px"}],p=[{key:"kakao",label:"",letter:"K",color:"bg-yellow-400 text-yellow-900"},{key:"tmap",label:"T",letter:"T",color:"bg-blue-500 text-white"},{key:"naver",label:"",letter:"N",color:"bg-green-500 text-white"}],g=()=>{a&&(a(),e())},C=y=>{o&&o(y),e()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,"aria-hidden":"true",style:{zIndex:9998}}),s.jsx("div",{className:`fixed top-0 left-0 h-full w-80 bg-white shadow-2xl transform transition-transform duration-300 ease-out ${t?"translate-x-0":"-translate-x-full"}`,style:{touchAction:"pan-y",zIndex:9999},children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"bg-blue-600 p-6 relative",children:[s.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:bg-white/20 rounded-full p-2 transition-colors","aria-label":"",children:s.jsx(Mi,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx(c0,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{className:"text-white",children:[s.jsx("p",{className:"text-xl font-bold",children:n}),s.jsx("p",{className:"text-sm text-white/90",children:r})]})]})]}),s.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-3",children:" "}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:" "}),s.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.todayInProgress})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.todayCompleted})]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:" "}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.weekTotal})]})}),s.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:" "}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:i.monthTotal})]})})]})]}),s.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>C("today-work"),children:[s.jsx(rm,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:" "})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>C("work-management"),children:[s.jsx(C1,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>C("customer-management"),children:[s.jsx(NM,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>C("equipment-management"),children:[s.jsx(im,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})}),s.jsx("li",{children:s.jsxs("button",{className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 text-gray-700 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>C("other-management"),children:[s.jsx(pM,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:""})]})})]}),s.jsxs("div",{className:"mt-4 px-3",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:_.map(y=>s.jsxs("button",{onClick:()=>u(y.key),className:`flex flex-col items-center py-2 rounded-lg border-2 transition-all ${c===y.key?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[s.jsx("span",{className:`font-bold ${c===y.key?"text-blue-600":"text-gray-700"}`,style:{fontSize:y.size},children:""}),s.jsx("span",{className:`text-[0.625rem] mt-0.5 ${c===y.key?"text-blue-600 font-semibold":"text-gray-500"}`,children:y.label})]},y.key))})]}),s.jsxs("div",{className:"mt-4 px-3",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:p.map(y=>s.jsxs("button",{onClick:()=>m(y.key),className:`flex flex-col items-center py-2 rounded-lg border-2 transition-all ${h===y.key?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[s.jsx("span",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold ${y.color}`,children:y.letter}),s.jsx("span",{className:`text-[0.625rem] mt-1 ${h===y.key?"text-blue-600 font-semibold":"text-gray-500"}`,children:y.label})]},y.key))})]})]}),s.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200",children:s.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors font-medium text-sm sm:text-base",children:[s.jsx(UL,{className:"w-5 h-5"}),s.jsx("span",{children:""})]})})]})})]})};class c$ extends b.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),console.error("Production Error:",{error:e.toString(),componentStack:n.componentStack})}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),s.jsx("p",{className:"text-gray-600",children:"  .      ."})]}),!1,s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:this.handleReload,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})," "]}),!1]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-sm text-gray-500",children:"   ."})]})}):this.props.children}}const j4="/api",d$=1440*60*1e3;function pR(t){const e=Date.now();return t.filter(n=>e-n.timestamp<d$)}function Ic(t){try{const e=sessionStorage.getItem(`pendingPayments_${t}`);if(e)return pR(JSON.parse(e));const n=sessionStorage.getItem(`pendingPayment_${t}`);if(n){const r=JSON.parse(n),i=pR([{...r,pendingBillYms:r.pendingBillYms||[]}]);return sessionStorage.setItem(`pendingPayments_${t}`,JSON.stringify(i)),sessionStorage.removeItem(`pendingPayment_${t}`),i}}catch(e){console.error("[PendingPayment] getPendingPayments error:",e)}return[]}function u$(t,e){try{const n=Ic(t);n.push(e),sessionStorage.setItem(`pendingPayments_${t}`,JSON.stringify(n))}catch(n){console.error("[PendingPayment] savePendingPayment error:",n)}}function ep(t,e){try{const r=Ic(t).filter(i=>i.orderNo!==e);r.length>0?sessionStorage.setItem(`pendingPayments_${t}`,JSON.stringify(r)):sessionStorage.removeItem(`pendingPayments_${t}`)}catch(n){console.error("[PendingPayment] removePendingPayment error:",n)}}const h$=(t,e)=>{const n=t.replace(/[-\s]/g,"");if(!n)return" .";if(n.length<9)return"  .";let r="",i="";if(n.slice(-4),n.startsWith("02")?(r=n.substring(0,2),i=n.substring(2,n.length-4)):n.startsWith("0130")?(r=n.substring(0,4),i=n.substring(4,n.length-4)):(r=n.substring(0,3),i=n.substring(3,n.length-4)),i.length<3||i==="111"||i==="1111")return"  .";if(r==="010"&&i.length<4)return"  .";if(e==="hp"&&!["010","011","016","017","018","019"].includes(r))return"  .";if(r!=="0130"&&i.startsWith("0"))return"  .";let a=0;for(let o=0;o<n.length-1;o++)if(n[o]===n[o+1]){if(a++,a>=6)return"  ."}else a=0;return null},f$=t=>{const e=t.replace(/[^0-9]/g,"");let n="",r="";const i=e.slice(-4);return e.startsWith("02")?(n=e.substring(0,2),r=e.substring(2,e.length-4)):e.startsWith("0130")?(n=e.substring(0,4),r=e.substring(4,e.length-4)):(n=e.substring(0,3),r=e.substring(3,e.length-4)),{ddd:n,fix:r,dtl:i}},mn=async(t,e={},n="POST",r)=>{try{const i=`${j4}${t}`,a={method:n,headers:{"Content-Type":"application/json"},credentials:"include",body:n==="POST"?JSON.stringify(e):void 0};let o,c;r&&(o=new AbortController,a.signal=o.signal,c=setTimeout(()=>o.abort(),r));try{const u=await fetch(i,a);if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const h=await u.json();return Array.isArray(h)?{success:!0,data:h}:h.code==="SUCCESS"||h.resultCode==="0000"||h.success?{success:!0,data:h.data||h.resultData||h,totalCount:h.totalCount||h.resultCount}:{success:!1,message:h.message||h.resultMsg||"  .",errorCode:h.code||h.resultCode||h.errorCode}}finally{c&&clearTimeout(c)}}catch(i){return i instanceof DOMException&&i.name==="AbortError"?{success:!1,message:"TIMEOUT",errorCode:"TIMEOUT"}:(console.error("[CustomerAPI] Error:",i),{success:!1,message:i instanceof Error?i.message:"  ."})}},X1=()=>{try{const t=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(t){const e=JSON.parse(t);return e.userId||e.USR_ID||e.LOGIN_ID||"SYSTEM"}}catch{console.log("[CustomerAPI] Failed to get LOGIN_ID from session")}return"SYSTEM"},Dh=t=>{const e=()=>{if(t.ADDR_DTL)return t.ADDR_DTL;if(t.ADDR_FULL){const c=t.ADDR_FULL,u=t.ADDRESS||t.ADDR||"";return u&&c.startsWith(u+" "+u)?c.substring(u.length+1):c}const a=[],o=t.ADDRESS||t.ADDR||"";return o&&a.push(o),t.BUN_NO&&a.push(`${t.BUN_NO}`),t.HO_NM&&a.push(`${t.HO_NM}`),t.BLD_NM&&a.push(t.BLD_NM),a.join(" ")||""},n=()=>{const a=[],o=t.TEL_NO||t.TEL_NO1||"";o&&a.push({type:"tel",typeNm:"",number:o,fieldName:"TEL_NO"});const c=t.HP_NO||t.TEL_NO2||"";c&&a.push({type:"hp",typeNm:"",number:c,fieldName:"HP_NO"});for(let u=3;u<=9;u++){const h=`TEL_NO${u}`,m=t[h];if(m){const _=m.startsWith("010")||m.startsWith("011")||m.startsWith("016")||m.startsWith("017")||m.startsWith("018")||m.startsWith("019");a.push({type:_?"hp":"tel",typeNm:_?`${u-1}`:`${u-1}`,number:m,fieldName:h})}}return a},r=e(),i=n();return{CUST_ID:t.CUST_ID||"",CUST_NM:t.CUST_NM||"",TEL_NO:t.TEL_NO||t.TEL_NO1||"",HP_NO:t.HP_NO||t.TEL_NO2||"",PHONE_LIST:i.length>0?i:void 0,CUST_ADDR:r||t.CUST_ADDR||t.ADDR||t.ADDRESS||"",ROAD_ADDR:t.ROAD_ADDR||r||"",INST_ADDR:t.INST_ADDR||r||"",BILL_ADDR:t.BILL_ADDR||"",UNPAY_AMT:t.UNPAY_AMT||0,CUST_TP_CD:t.CUST_TP_CD||t.CUST_TP||"",CUST_TP_NM:t.CUST_TP_NM||t.CUST_CL_NM||"",GRP_NO:t.GRP_NO||t.GRP_ID||"",GRP_NM:t.GRP_NM||"",REG_DT:t.REG_DT||"",CTRT_ID:t.CTRT_ID||""}},m$=t=>{const e=r=>r==null||r==="None"||r==="null"?"":r,n=r=>r==null||r==="None"||r==="null"?0:r;return{CTRT_ID:e(t.CTRT_ID),CTRT_STAT_CD:e(t.CTRT_STAT_CD)||e(t.CTRT_STAT),CTRT_STAT_NM:e(t.CTRT_STAT_NM),PROD_NM:e(t.PROD_NM)||e(t.BASIC_PROD_CD_NM),PROD_GRP_NM:e(t.PROD_GRP_NM),INST_ADDR:e(t.INST_ADDR)||e(t.ADDR_FULL)||e(t.ADDR),INSTL_LOC:e(t.INSTL_LOC),POST_ID:e(t.POST_ID),OPNG_DT:e(t.OPNG_DT)||e(t.OPEN_DD),TERM_DT:e(t.TERM_DT),AGMT_MON:e(t.AGMT_MON)||(t.PROM_CNT!=null&&t.PROM_CNT!=="None"?String(t.PROM_CNT):""),AGMT_ST_DT:e(t.AGMT_ST_DT)||e(t.RATE_STRT_DT),AGMT_END_DT:e(t.AGMT_END_DT)||e(t.RATE_END_DT),GRP_NO:e(t.GRP_NO)||e(t.GRP_ID),GRP_NM:e(t.GRP_NM),PYM_ACNT_ID:e(t.PYM_ACNT_ID),DPST_AMT:n(t.DPST_AMT)||n(t.ASSR_BAL),PREPAY_AMT:n(t.PREPAY_AMT)||n(t.PREPD_BAL),EQT_NM:e(t.EQT_NM),EQT_MDL_NM:e(t.EQT_MDL_NM)||e(t.VIEW_MOD_NM),EQT_SERNO:e(t.EQT_SERNO)||e(t.SERNO_DTOA),PREV_MON_AMT:n(t.PREV_MON_AMT)||n(t.BILL_AMT_BEFORE),CUR_MON_AMT:n(t.CUR_MON_AMT)||n(t.BILL_AMT_NOW),SO_NM:e(t.SO_NM),SO_ID:e(t.SO_ID),PROD_GRP:e(t.PROD_GRP),STREET_ADDR_FULL:e(t.STREET_ADDR_FULL)||e(t.ROAD_ADDR),ADDR_FULL:e(t.ADDR_FULL)||e(t.JIBUN_ADDR),CTRT_APLY_STRT_DT:e(t.CTRT_APLY_STRT_DT),CTRT_APLY_END_DT:e(t.CTRT_APLY_END_DT),NOTRECEV:e(t.NOTRECEV)||e(t.NOT_RECV),CLOSE_DANGER:e(t.CLOSE_DANGER),ADDR_DTL:e(t.ADDR_DTL),BLD_CL:e(t.BLD_CL)||"0",BLD_NM:e(t.BLD_NM),BLD_ID:e(t.BLD_ID),BUN_CL:e(t.BUN_CL),BUN_NO:e(t.BUN_NO),HO_NM:e(t.HO_NM),APT_DONG_NO:e(t.APT_DONG_NO),APT_HO_CNT:e(t.APT_HO_CNT),STREET_ID:e(t.STREET_ID)}},g$=async t=>{let e="SYSTEM";try{const n=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(n){const r=JSON.parse(n);e=r.userId||r.USR_ID||r.LOGIN_ID||"SYSTEM"}}catch{console.log("[CustomerAPI] Failed to get LOGIN_ID from session")}if(t.searchType==="CUSTOMER_ID"&&t.customerId){const n={CUST_ID:t.customerId,SERCH_GB:"3",LOGIN_ID:e},r=await mn("/customer/common/customercommon/getConditionalCustList2",n);if(r.success&&r.data){const a=(Array.isArray(r.data)?r.data:[r.data]).map(Dh);return{...r,data:a}}return{...r,data:[]}}if(t.searchType==="CONTRACT_ID"&&t.contractId){let n="";try{const i=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(i){const a=JSON.parse(i),o=a.authSoList||a.AUTH_SO_List||[];o.length>0&&(n=o[0].SO_ID||o[0].soId||""),n||(n=a.soId||a.SO_ID||"")}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session")}if(n)try{console.log("[CustomerAPI] Trying getCtrtIDforSmartPhone for CONTRACT_ID: "+t.contractId);const i=await mn("/customer/phoneNumber/getCtrtIDforSmartPhone",{SO_ID:n,CTRT_ID:t.contractId});if(i.success&&i.data){const a=Array.isArray(i.data)?i.data:[i.data];if(a.length>0){console.log("[CustomerAPI] getCtrtIDforSmartPhone success for CONTRACT_ID");const o=a.map(Dh);return{...i,data:o}}}console.log("[CustomerAPI] getCtrtIDforSmartPhone returned no data for CONTRACT_ID, trying fallback...")}catch(i){console.log("[CustomerAPI] getCtrtIDforSmartPhone failed for CONTRACT_ID, trying fallback...",i)}const r=await mn("/customer/negociation/getCustomerCtrtInfo",{CTRT_ID:t.contractId});if(r.success&&r.data){const i=Array.isArray(r.data)?r.data[0]:r.data,a=i==null?void 0:i.CUST_ID;if(a){const o=await mn("/customer/common/customercommon/getConditionalCustList2",{CUST_ID:a,SERCH_GB:"3",LOGIN_ID:e});if(o.success&&o.data){const u=(Array.isArray(o.data)?o.data:[o.data]).map(Dh);return{...o,data:u}}}}return{success:!1,message:"ID    .",data:[]}}if(t.searchType==="PHONE_NAME"){if(!t.phoneNumber&&!t.customerName)return{success:!1,message:"   .",data:[]};let n="";try{const i=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(i){const a=JSON.parse(i),o=a.authSoList||a.AUTH_SO_List||[];o.length>0&&(n=o[0].SO_ID||o[0].soId||""),n||(n=a.soId||a.SO_ID||"")}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session")}if(n)try{const i={SO_ID:n};t.phoneNumber&&(i.TEL_NO=t.phoneNumber),t.customerName&&(i.CUST_NM=t.customerName);const a=await mn("/customer/phoneNumber/getCtrtIDforSmartPhone",i);if(a.success&&a.data){const o=Array.isArray(a.data)?a.data:[a.data];if(o.length>0){console.log("[CustomerAPI] getCtrtIDforSmartPhone success:",o.length,"results");const c=o.map(Dh);return{...a,data:c}}}console.log("[CustomerAPI] getCtrtIDforSmartPhone returned no data, trying fallback...")}catch(i){console.log("[CustomerAPI] getCtrtIDforSmartPhone failed, trying fallback...",i)}const r={SERCH_GB:"3",LOGIN_ID:e};t.phoneNumber&&(r.TEL_NO=t.phoneNumber),t.customerName&&(r.CUST_NM=t.customerName);try{const i=await mn("/customer/common/customercommon/getConditionalCustList2",r);if(i.success&&i.data){const o=(Array.isArray(i.data)?i.data:[i.data]).map(Dh);return{...i,data:o}}return{...i,data:[]}}catch{return{success:!1,message:"   . ID .",data:[]}}}if(t.searchType==="EQUIPMENT_NO"&&t.equipmentNo){const n={SERCH_GB:"3",LOGIN_ID:e,EQT_SERNO:t.equipmentNo,MAC_ADDR:""};try{const r=await mn("/customer/common/customercommon/getConditionalCustList2",n);if(r.success&&r.data){const a=(Array.isArray(r.data)?r.data:[r.data]).map(Dh);return{...r,data:a}}return{...r,data:[]}}catch{return{success:!1,message:"   . ID .",data:[]}}}return{success:!1,message:"  .",data:[]}},_$=async t=>{let e="SYSTEM";try{const r=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(r){const i=JSON.parse(r);e=i.userId||i.USR_ID||i.LOGIN_ID||"SYSTEM"}}catch{console.log("[CustomerAPI] Failed to get session info")}const n={SERCH_GB:"3",LOGIN_ID:e};t.custId&&(n.CUST_ID=t.custId),t.contractId&&(n.CTRT_ID=t.contractId),t.phoneNumber&&(n.TEL_NO=t.phoneNumber),t.equipmentNo&&(n.EQT_SERNO=t.equipmentNo),t.customerName&&!t.custId&&!t.contractId&&!t.phoneNumber&&!t.equipmentNo&&(n.CUST_NM=t.customerName);try{const r=await mn("/customer/common/customercommon/getConditionalCustList2",n);if(r.success&&r.data){const a=(Array.isArray(r.data)?r.data:[r.data]).map(Dh);return{...r,data:a}}return{...r,data:[]}}catch(r){return console.error("[CustomerAPI] searchCustomerAll :",r),{success:!1,message:"   .",data:[]}}},uS=async t=>{const e=await mn("/customer/negociation/getCustCtrtAll",{CUST_ID:t});if(e.success&&e.data){const r=(Array.isArray(e.data)?e.data:[e.data]).map(m$);return{...e,data:r}}return e},hS=async(t,e)=>{const n=X1(),r=await mn("/customer/negociation/getCustAccountInfo_m",{CUST_ID:t,LOGIN_ID:n},"POST",e);return r.success&&r.data?{success:!0,data:r.data.filter(a=>a.PYM_ACNT_ID&&/^\d{10}$/.test(a.PYM_ACNT_ID)).map(a=>({PYM_ACNT_ID:a.PYM_ACNT_ID,PYM_MTHD_NM:a.PYM_MTHD_NM||"",BANK_CARD_NM:a.BANK_CARD_NM||null,BANK_CARD_NO:a.BANK_CARD_NO||null,BILL_MTHD:a.BILL_MTHD||"",UPYM_AMT_ACNT:a.UPYM_AMT??a.UPYM_AMT_ACNT??0,SO_ID:a.SO_ID||void 0})),code:"SUCCESS",message:"OK"}:r},yR=async(t,e,n)=>{const r=X1(),i={CUST_ID:t,LOGIN_ID:r};return e&&(i.PYM_ACNT_ID=e),mn("/customer/negociation/getCustBillInfo_m",i,"POST",n)},x$=async t=>mn("/customer/negociation/getHPPayList",{CUST_ID:t}),p$=async t=>mn("/customer/negociation/saveHPPayInfo",t),g1=async(t,e,n=10)=>{const r=X1(),i={CUST_ID:t,PAGE_SIZE:n,LOGIN_ID:r};return e&&(i.CTRT_ID=e),mn("/customer/negociation/getTgtCtrtRcptHist_m",i)},_1=async(t,e,n=10)=>{const r=X1(),i={CUST_ID:t,PAGE_SIZE:n,LOGIN_ID:r};return e&&(i.CTRT_ID=e),mn("/customer/negociation/getTgtCtrtWorkList_m",i)},y$=async t=>{let e=t.CHG_UID||"SYSTEM";try{const n=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(n){const r=JSON.parse(n);e=r.userId||r.USR_ID||e}}catch{console.log("[CustomerAPI] Failed to get CHG_UID from session")}return mn("/customer/negociation/updateCustTelDetailInfo",{...t,CHG_UID:e,TEL_NO_TP:t.TEL_NO_TP||"2",USE_YN:t.USE_YN||"Y",MAIN_TEL_YN:t.MAIN_TEL_YN||"N",CUST_REL:t.CUST_REL||""})},b$=async t=>{let e=t.CHG_UID||"SYSTEM";try{const n=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(n){const r=JSON.parse(n);e=r.userId||r.USR_ID||e}}catch{console.log("[CustomerAPI] Failed to get CHG_UID from session")}return mn("/customer/etc/saveMargeAddrOrdInfo",{CTRT_ID:t.CTRT_ID,POST_ID:t.POST_ID,BLD_ID:t.BLD_ID||"",BUN_NO:t.BUN_NO||"",HO_NM:t.HO_NM||"",BLD_CL:t.BLD_CL||"0",BLD_NM:t.BLD_NM||"",APT_DONG_NO:t.APT_DONG_NO||"",APT_HO_CNT:t.APT_HO_CNT||"",ADDR_DTL:t.ADDR_DTL||"",STREET_ID:(t.STREET_ID||"").substring(0,10),INSTL_LOC:t.INSTL_LOC||"",CUST_FLAG:t.CUST_FLAG||"0",PYM_FLAG:t.PYM_FLAG||"0",CHG_UID:e})},C$=async t=>{let e="SYSTEM";try{const n=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(n){const r=JSON.parse(n);e=r.userId||r.USR_ID||e}}catch{console.log("[CustomerAPI] Failed to get CHG_UID from session")}return mn("/customer/negociation/updateInstlLoc",{CTRT_ID:t.CTRT_ID,INSTL_LOC:t.INSTL_LOC,CUST_FLAG:t.CUST_FLAG||"1",CHG_UID:e})},O4=async t=>{let e=t.USR_ID||"MOBILE_USER",n=t.SO_ID||"",r=t.MST_SO_ID||"",i="";try{const a=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(a){const o=JSON.parse(a);if(e=o.userId||o.USR_ID||e,i=o.crrId||o.CRR_ID||"",!n){const c=o.authSoList||o.AUTH_SO_List||[];c.length>0&&(n=c[0].SO_ID||c[0].soId||""),n||(n=o.soId||o.SO_ID||"")}r||(r=o.mstSoId||o.MST_SO_ID||n)}}catch{console.log("[CustomerAPI] Failed to get session info for payment change")}return mn("/customer/customer/general/customerPymChgAddManager",{...t,USR_ID:e,SO_ID:n,PYM_SO_ID:n,MST_SO_ID:r,ATRT_CRR_ID:i,ATRT_EMP_ID:e,INSERT_YN:"N"})},N$=async t=>{let e=t.SO_ID||"",n=t.MST_SO_ID||"",r="";try{const i=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(i){const a=JSON.parse(i);if(r=a.userId||a.USR_ID||a.usrId||"",!e){const o=a.authSoList||a.AUTH_SO_List||[];o.length>0&&(e=o[0].SO_ID||o[0].soId||"",n||(n=o[0].MST_SO_ID||"")),e||(e=a.soId||a.SO_ID||"")}n||(n=a.mstSoId||a.MST_SO_ID||e)}}catch{console.log("[CustomerAPI] Failed to get session info for bank verify")}try{const i=await mn("/customer/payment/verifyBankAccount",{CHECK_TYPE:"E",CUST_NM:t.ACNT_OWNER_NM,CUST_TP:t.CUST_TP||"A",RSDT_CRRNO:t.RSDT_CRRNO||"",CARD_ACNT_CD:t.BANK_CD,CARD_ACNT_NO:t.ACNT_NO,SO_ID:e,MST_SO_ID:n,ID_TYPE_CD:t.ID_TYPE_CD||"01",CUST_ID:t.CUST_ID||"",PYM_ACNT_ID:t.PYM_ACNT_ID||"",USR_ID:r});if(i.success&&i.data){const a=i.data,o=a.RSPN_CD||a.RES_MSG_CD||"";if(o==="0000"||a.success==="true"||a.RESP_CD==="0000")return{success:!0,data:{verified:!0,...a},message:a.RES_MSG||"  ."};if(o||a.success==="false")return{success:!1,data:a,message:a.RES_MSG||a.MESSAGE||a.RESP_MSG||"  . ("+o+")"}}return i.success?{success:!0,data:{verified:!0},message:"  ."}:{success:!1,message:i.message||"  ."}}catch(i){return console.error("[BankVerify] Error:",i),{success:!1,message:(i==null?void 0:i.message)||"    ."}}},S$=async t=>{try{const e=await mn("/customer/payment/verifyCreditCard",{SO_ID:t.SO_ID||"",PYM_ACNT_ID:t.PYM_ACNT_ID||"",CUST_ID:t.CUST_ID||"",CUST_NM:t.CUST_NM||t.CARD_OWNER_NM||"",CARD_NO:t.CARD_NO,CARD_EXPYEAR:t.CARD_EXPYEAR||(t.CARD_VALID_YM?t.CARD_VALID_YM.substring(0,2):""),CARD_EXPMON:t.CARD_EXPMON||(t.CARD_VALID_YM?t.CARD_VALID_YM.substring(2,4):""),KOR_ID:t.KOR_ID||""});if(e.success&&e.data){const n=e.data;return n.success==="true"||n.RESP_CD==="0000"?{success:!0,data:{verified:!0,RESP_CD:n.RESP_CD},message:"  ."}:{success:!1,data:n,message:n.RESP_MSG||"  ."}}return{success:!1,message:e.message||"  ."}}catch(e){return console.error("[CardVerify] Error:",e),{success:!1,message:(e==null?void 0:e.message)||"    ."}}},v$=async t=>{var e;return console.warn("[CustomerAPI] savePaymentSignature stub called:",{CUST_ID:t.CUST_ID,PYM_ACNT_ID:t.PYM_ACNT_ID,SIGN_TYPE:t.SIGN_TYPE,DATA_SIZE:((e=t.SIGNATURE_DATA)==null?void 0:e.length)||0}),Promise.resolve({success:!0,data:{saved:!1,stub:!0},message:"  API  (stub)"})},w4=async t=>{let e=t.SO_ID||"",n=t.MST_SO_ID||"",r="",i="";try{const u=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(u){const h=JSON.parse(u);if(r=h.userId||h.USR_ID||h.usrId||"",i=h.crrId||h.CRR_ID||"",!e){const m=h.authSoList||h.AUTH_SO_List||[];m.length>0&&(e=m[0].SO_ID||m[0].soId||""),e||(e=h.soId||h.SO_ID||"")}n||(n=h.mstSoId||h.MST_SO_ID||e)}}catch{console.log("[CustomerAPI] Failed to get user info from session/localStorage")}const a=t.CNSL_MST_CL||"";let o=t.CNSL_MID_CL||"",c=t.CNSL_SLV_CL||"";if(o.startsWith(a)&&o.length>a.length&&(o=o.substring(a.length)),c.startsWith(o.length>0?a+o:"")&&c.length>4)c=c.substring((a+o).length);else if(c.length>4){const u=t.CNSL_MID_CL||"";c.startsWith(u)&&c.length>u.length?c=c.substring(u.length):c=c.substring(c.length-3)}return mn("/customer/negociation/saveCnslRcptInfo",{...t,CNSL_MST_CL:a,CNSL_MID_CL:o,CNSL_SLV_CL:c,SO_ID:e,MST_SO_ID:n,USR_ID:r,CRR_ID:i,CALLER_UID:r,CNSL_RSLT:t.CNSL_RSLT||"5",RCPT_TP:"G1",CUST_REL:"A",PRESS_RCPT_YN:"N",SUBS_TP:"1",CTI_CID:"0"})},E$=async t=>{let e="MOBILE_USER",n="",r="",i="";try{const u=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(u){const h=JSON.parse(u);e=h.userId||h.USR_ID||e,n=h.crrId||h.CRR_ID||"";const m=h.authSoList||h.AUTH_SO_List||[];m.length>0&&(r=m[0].SO_ID||m[0].soId||""),r||(r=h.soId||h.SO_ID||""),i=h.mstSoId||h.MST_SO_ID||r}}catch{console.log("[CustomerAPI] Failed to get user info from session")}const a=t,o="AS_CL_CD"in t,c={PG_GUBUN:o&&a.PG_GUBUN||"1",POST_ID:t.POST_ID||"",CUST_ID:t.CUST_ID,CTRT_ID:t.CTRT_ID||"",WRK_HOPE_DTTM:o?a.SCHD_DT+a.SCHD_TM:t.WRK_HOPE_DTTM,HOPE_DTTM:o?a.SCHD_DT+a.SCHD_TM:t.HOPE_DTTM||t.WRK_HOPE_DTTM,WRK_DTL_TCD:o?a.AS_CL_CD:t.WRK_DTL_TCD,WRK_RCPT_CL:o?a.AS_RESN_L_CD:t.WRK_RCPT_CL,WRK_RCPT_CL_DTL:o?a.AS_RESN_M_CD||"":t.WRK_RCPT_CL_DTL,MEMO:o?a.AS_CNTN:t.MEMO,EMRG_YN:"N",HOLY_YN:"N",TRANS_PROC_YN:"Y",CRR_ID:n,WRKR_ID:e,REG_UID:e,SO_ID:o&&a.SO_ID||r,MST_SO_ID:o&&a.MST_SO_ID||i,BLD_CL:o?a.BLD_CL||"":t.BLD_CL||"",BLD_NM:o?a.BLD_NM||"":t.BLD_NM||"",BLD_ID:o?a.BLD_ID||"":t.BLD_ID||"",BUN_CL:o?a.BUN_CL||"":t.BUN_CL||"",BUN_NO:o?a.BUN_NO||"":t.BUN_NO||"",HO_NM:o?a.HO_NM||"":t.HO_NM||"",APT_DONG_NO:o?a.APT_DONG_NO||"":t.APT_DONG_NO||"",APT_HO_CNT:o?a.APT_HO_CNT||"":t.APT_HO_CNT||"",ADDR_DTL:o?a.ADDR_DTL||"":t.ADDR_DTL||"",ADDR:o?a.ADDR||"":t.ADDR||"",ADDR_ORD:o?a.ADDR_ORD||"1":t.ADDR_ORD||"1",CNSL_RSLT:"3"};return o&&a.AS_CL_DTL_CD&&(c.AS_BIZ_CL=a.AS_CL_DTL_CD),o&&a.TRIP_FEE_CD&&(c.BIZ_EXPNS_GUIDE=a.TRIP_FEE_CD),mn("/customer/work/modAsPdaReceipt",c)},D$=async t=>mn("/customer/customer/general/customerManager",{...t,ACTION:"INSERT"}),R$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCS010"}),T$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCS020"}),M$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCS030"}),I$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMWT001"}),j$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMAS000"}),O$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMAS001"}),w$=async t=>mn("/customer/work/getProd_Grp",{CTRT_ID:t}),L$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CUST_TP"}),P$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU052"}),L4=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"BLPY015"}),P4=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"BLPY016"}),A4=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU005"}),A$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU079"}),k$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU002"}),U$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU112"}),B$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU111"}),G$=async t=>{if(t.SO_ID){const o={SO_ID:t.SO_ID,MST_SO_ID:"200",USE_FLAG:t.USE_FLAG||"Y"};return t.DONGMYONG&&(o.DONGMYONG=t.DONGMYONG),mn("/statistics/customer/getPostList",o)}let e=[];try{const o=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(o){const c=JSON.parse(o),u=c.authSoList||c.AUTH_SO_List||[];if(u.length>0&&(e=u.map(h=>({soId:h.SO_ID||h.soId||"",mstSoId:h.MST_SO_ID||h.mstSoId||""})).filter(h=>h.soId)),e.length===0){const h=c.soId||c.SO_ID||"",m=c.mstSoId||c.MST_SO_ID||"";h&&(e=[{soId:h,mstSoId:m}])}}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session for address search")}if(e.length===0)return console.log("[CustomerAPI] searchPostAddress: SO_ID   "),{success:!1,data:[],message:"SO_ID   ."};const n=e.map(o=>{const c={SO_ID:o.soId,MST_SO_ID:o.mstSoId||"200",USE_FLAG:t.USE_FLAG||"Y"};return t.DONGMYONG&&(c.DONGMYONG=t.DONGMYONG),mn("/statistics/customer/getPostList",c).catch(u=>(console.log(`[CustomerAPI] searchPostAddress SO_ID=${o.soId} :`,u),{success:!1,data:[],message:""}))}),r=await Promise.all(n),i=new Set,a=[];for(const o of r)if(o.success&&o.data)for(const c of o.data){const u=c.POST_ID||`${c.SO_ID}_${c.DONGMYON_NM}_${c.ADDR}`;i.has(u)||(i.add(u),a.push(c))}return{success:!0,data:a,message:""}},W$=async t=>{const e={};t.STREET_NM&&(e.STREET_NM=t.STREET_NM),t.STREET_BUN_M&&(e.STREET_BUN_M=t.STREET_BUN_M),t.STREET_BUN_S&&(e.STREET_BUN_S=t.STREET_BUN_S),t.SO_ID&&(e.SO_ID=t.SO_ID);const n=await mn("/customer/common/customercommon/getStreetAddrList",e);return n.success&&n.data?{success:!0,data:n.data,message:""}:{success:!1,data:[],message:n.message||"  "}},iC=t=>{if(!t)return"";const e=t.replace(/\D/g,"");if(e.startsWith("02")){if(e.length===10)return`${e.slice(0,2)}-${e.slice(2,6)}-${e.slice(6)}`;if(e.length===9)return`${e.slice(0,2)}-${e.slice(2,5)}-${e.slice(5)}`}return e.length===11?`${e.slice(0,3)}-${e.slice(3,7)}-${e.slice(7)}`:e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6)}`:t},T2=t=>{if(!t)return"";const e=t.replace(/\D/g,"");if(e.startsWith("02")){if(e.length===10)return`${e.slice(0,2)}-****-${e.slice(6)}`;if(e.length===9)return`${e.slice(0,2)}-***-${e.slice(5)}`}return e.length===11?`${e.slice(0,3)}-****-${e.slice(7)}`:e.length===10?`${e.slice(0,3)}-***-${e.slice(6)}`:e.length>7?`${e.slice(0,3)}-${"*".repeat(e.length-7)}-${e.slice(-4)}`:t},bl=t=>isNaN(t)?"0":t.toLocaleString("ko-KR"),aC=t=>!t||t.length!==8?t||"":`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6)}`,F$=(t,e=4,n=4)=>{if(!t||t.length<=e+n)return t;const r="*".repeat(t.length-e-n);return t.slice(0,e)+r+t.slice(-n)},K$=()=>{try{const t=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(t){const e=JSON.parse(t),n=e.authSoList||e.AUTH_SO_List||[];return n.length>0?n[0].SO_ID||n[0].soId||"":e.soId||e.SO_ID||""}}catch{console.log("[CustomerAPI] Failed to get SO_ID from session")}return""},Q$=async t=>{const e=t||K$();return mn("/billing/payment/anony/getCardVendorBySoId",{SO_ID:e})},Y$=async t=>{const e={MID:t.master_store_id,OID:t.order_no,ORDER_DT:t.order_dt,SO_ID:t.ctrt_so_id,CUST_ID:t.cust_id,CUST_NM:t.reqr_nm,AMT:t.encrypted_amt,PYM_ACNT_ID:t.pym_acnt_id,USER_ID:t.user_id,RCPT_BILL_EMP_ID:t.rcpt_bill_emp_id,SMRY:t.smry,PYR_REL:t.pyr_rel,PROD_INFO_CD:t.prod_info_cd,CUST_EMAIL:t.cust_email,STAGE:t.stage||""};return t.dtlList&&(e.DTL_LIST=t.dtlList.map(n=>({MID:n.master_store_id,OID:n.order_no,ORDER_DT:n.order_dt,BILL_SEQ_NO:n.BILL_SEQ_NO,SO_ID:n.SO_ID,BILL_AMT:n.BILL_AMT,PRE_RCPT_AMT:n.PRE_RCPT_AMT,RCPT_AMT:n.RCPT_AMT}))),mn("/billing/payment/anony/insertDpstAndDTL",e)},$$=async(t,e=1e4)=>{const n={MID:t.mid,OID:t.oid,ORDER_DT:t.order_dt,AMT:t.amount,CUST_NM:t.buyer,GOODNAME:t.productinfo,CARD_NO:t.card_no,CARD_EXPIRY:t.card_expyear+t.card_expmon,CARD_EXPYEAR:t.card_expyear,CARD_EXPMON:t.card_expmon,KOR_ID:t.kor_id,INSTALL_PERIOD:t.install,PYM_ACNT_ID:t.pym_acnt_id,ENCRYPTED_AMT:t.encrypted_amt,SO_ID:t.so_id||"",CUST_ID:t.cust_id||"",CTRT_ID:t.ctrt_id||"",STAGE:t.stage||"",CARD_VENDOR:t.card_vendor||""},r=`${j4}/billing/payment/anony/processCardPayment`,i=new AbortController,a=setTimeout(()=>i.abort(),e);try{console.log(`[CustomerAPI] POST ${r} (timeout=${e}ms)`);const o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n),signal:i.signal});if(clearTimeout(a),!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const c=await o.json();return console.log("[CustomerAPI] processCardPayment Response:",JSON.stringify(c,null,2)),c.code==="SUCCESS"||c.resultCode==="0000"||c.success?{success:!0,data:c.data||c.resultData||c}:{success:!1,message:c.message||c.resultMsg||"  .",errorCode:c.code||c.resultCode}}catch(o){return clearTimeout(a),o.name==="AbortError"?(console.warn("[CustomerAPI] processCardPayment: timeout after "+e+"ms"),{success:!1,message:"TIMEOUT",errorCode:"TIMEOUT"}):(console.error("[CustomerAPI] processCardPayment Error:",o),{success:!1,message:o.message||"  ."})}},V$=async(t,e)=>mn("/billing/payment/anony/processCardPayment",{...t,BUYER:"",CARD_NO:"",CARD_EXPYEAR:"",CARD_EXPMON:"",KOR_ID:"",INSTALL:"00",CHECK_ONLY:"Y"},"POST",e),z$=async t=>mn("/customer/etc/getPromOfContract",{CTRT_ID:t}),H$=async t=>{const e=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");let n="SYSTEM";if(e)try{const r=JSON.parse(e);n=r.USR_ID||r.userId||"SYSTEM"}catch{}return mn("/customer/etc/saveCtrtAgreeInfo",{...t,AGREE_YN:t.AGREE_YN||"Y",WRKR_ID:t.WRKR_ID||n})},q$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU064"}),X$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU072"}),J$=async()=>mn("/common/getCommonCodes",{CODE_GROUP:"CMCU252"}),Z$=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},eV=t=>{switch(t){case"10":case"Y":return"bg-green-100 text-green-700";case"20":return"bg-yellow-100 text-yellow-700";case"30":case"90":case"N":return"bg-gray-100 text-gray-600";case"82":return"bg-sky-100 text-sky-700";default:return"bg-blue-100 text-blue-700"}},tV=({contracts:t,isLoading:e,expanded:n,onToggle:r,onContractSelect:i,showToast:a,onNavigateToConsultation:o,onNavigateToAS:c,onNavigateToAddressChange:u,onNavigateToReContract:h,initialSearchKeyword:m})=>{const[_,p]=b.useState("active"),[g,C]=b.useState(m||"");b.useEffect(()=>{C(m||"")},[m]);const[y,N]=b.useState(null),[v,P]=b.useState(null),w=I=>{const E=I.CTRT_STAT_CD||"";return!["10","50","90"].includes(E)},M=I=>{const E=I.CTRT_STAT_CD||"",A=I.CTRT_STAT_NM||"",Y=["20","30","82"].includes(E),se=I.CLOSE_DANGER==="Y"&&A.includes("");return Y?{consultation:!0,as:!0,addressChange:!0,reContract:se}:{consultation:!1,as:!1,addressChange:!1,reContract:!1}},k=t.filter(I=>{var E,A,Y,se;if(_==="active"&&!w(I)||_==="recommit"&&(!w(I)||I.CLOSE_DANGER!=="Y"||!(I.CTRT_STAT_NM||"").includes("")))return!1;if(g){const X=g.toLowerCase(),z=(E=I.CTRT_ID)==null?void 0:E.toLowerCase().includes(X),$=(A=I.PROD_NM)==null?void 0:A.toLowerCase().includes(X),F=(Y=I.EQT_SERNO)==null?void 0:Y.toLowerCase().includes(X),L=(se=I.NOTRECEV)==null?void 0:se.toLowerCase().includes(X);return z||$||F||L}return!0}),B={all:t.length,active:t.filter(I=>w(I)).length,recommit:t.filter(I=>w(I)&&I.CLOSE_DANGER==="Y"&&(I.CTRT_STAT_NM||"").includes("")).length},G=I=>{N(I.CTRT_ID),i(I)},U=I=>{const E=I.CTRT_ID;P(v===E?null:E),G(I)};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:r,className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zh,{className:"w-5 h-5 text-purple-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:" "}),s.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.length,")"]})]}),n?s.jsx(Pr,{className:"w-5 h-5 text-gray-400"}):s.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),n&&s.jsx("div",{className:"px-4 pb-4",children:e?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(pn,{className:"w-6 h-6 animate-spin text-gray-400"})}):t.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"  ."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>p("all"),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${_==="all"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",B.all,")"]}),s.jsxs("button",{onClick:()=>p("active"),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${_==="active"?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",B.active,")"]}),s.jsxs("button",{onClick:()=>p("recommit"),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${_==="recommit"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",B.recommit,")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(yM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:g,onChange:I=>C(I.target.value),placeholder:"ID, ,  ",className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),g&&s.jsx("button",{onClick:()=>C(""),className:"flex-shrink-0 px-3 py-2 text-xs font-medium text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors",children:""})]})]}),s.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[k.map((I,E)=>s.jsxs("div",{className:`p-3 rounded-lg border transition-colors ${y===I.CTRT_ID?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>U(I),children:[s.jsxs("div",{className:"flex items-center justify-between mb-1 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center rounded-full bg-blue-500 text-white text-sm font-bold",children:E+1}),s.jsx("span",{className:"text-sm text-gray-600 truncate",children:I.PROD_NM})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded whitespace-nowrap ${I.CLOSE_DANGER==="Y"&&(I.CTRT_STAT_NM||"").includes("")?"bg-orange-100 text-orange-700":eV(I.CTRT_STAT_CD)}`,children:(()=>{const A=I.CTRT_STAT_NM||(I.CTRT_STAT_CD==="90"?"":I.CTRT_STAT_CD==="20"?"":"");return I.CLOSE_DANGER==="Y"&&A.includes("")?"()":A})()}),s.jsx(hr,{className:`w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ${v===I.CTRT_ID?"rotate-180":""}`})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1 ml-9 gap-2 flex-nowrap overflow-hidden",children:[s.jsxs("span",{className:"text-sm text-gray-600 flex-shrink-0 whitespace-nowrap",children:[" ID: ",Z$(I.CTRT_ID)]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded whitespace-nowrap",children:I.INSTL_LOC||"N/A"}),I.SO_NM&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-purple-50 text-purple-600 rounded whitespace-nowrap",children:I.SO_NM})]})]}),(I.STREET_ADDR_FULL||I.ADDR_FULL||I.INST_ADDR)&&s.jsxs("div",{className:"flex items-start gap-1 text-sm text-gray-600 mt-1",children:[s.jsx(Rd,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"min-w-0",children:I.STREET_ADDR_FULL?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs text-blue-600 mr-1",children:"[]"}),s.jsx("span",{children:I.STREET_ADDR_FULL})]}):s.jsx("span",{children:I.ADDR_FULL||I.INST_ADDR})})]})]}),v===I.CTRT_ID&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",I.AGMT_MON?`${I.AGMT_MON} (${aC(I.CTRT_APLY_STRT_DT)||"-"} ~ ${aC(I.CTRT_APLY_END_DT)||"-"})`:"-"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",I.OPNG_DT?aC(I.OPNG_DT):"-"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",I.NOTRECEV||"-"]}),I.GRP_NM&&s.jsxs("div",{className:"text-sm text-gray-600",children:[": ",I.GRP_NM]}),(()=>{const A=M(I);return s.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200",children:[s.jsx("button",{onClick:Y=>{Y.stopPropagation(),A.consultation&&(G(I),o&&o(I))},disabled:!A.consultation,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${A.consultation?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:""}),s.jsx("button",{onClick:Y=>{Y.stopPropagation(),A.as&&(G(I),c&&c(I))},disabled:!A.as,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${A.as?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"AS"}),s.jsx("button",{onClick:Y=>{Y.stopPropagation(),A.addressChange&&(G(I),u&&u(I))},disabled:!A.addressChange,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${A.addressChange?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:""}),s.jsx("button",{onClick:Y=>{Y.stopPropagation(),A.reContract&&(G(I),h&&h(I))},disabled:!A.reContract,className:`flex-1 flex items-center justify-center gap-1 px-2 py-2 text-xs font-medium rounded-lg transition-colors ${A.reContract?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:""})]})})()]})]},I.CTRT_ID)),k.length===0&&s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"   ."})]})]})})]})},bR=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},sV=t=>!t||t.length<2?t||"-":t.length===2?t[0]+"*":t[0]+"*".repeat(t.length-2)+t[t.length-1],nV=t=>!t||t.length<6?t||"-":`${t.slice(0,4)}-${t.slice(4,6)}`,rV=t=>(t==null?void 0:t.replace(/\d*/g,"").trim())||"",iV=({isOpen:t,onClose:e,custId:n,custNm:r,pymAcntId:i,unpaymentList:a,showToast:o,onSuccess:c})=>{const[u,h]=b.useState(new Set),[m,_]=b.useState([]),[p,g]=b.useState(""),[C,y]=b.useState(""),[N,v]=b.useState(""),[P,w]=b.useState(""),[M,k]=b.useState("00"),[B,G]=b.useState(!1),[U,I]=b.useState([]),[E,A]=b.useState(!0),[Y,se]=b.useState(new Set),[X,z]=b.useState(!1),[$,F]=b.useState(!1);b.useEffect(()=>{if(t&&i){const ee=Ic(i);_(ee),se(new Set),z(!1),F(!1);const Z=a.filter(le=>!ee.some(xe=>xe.pendingBillYms.includes(le.BILL_YM))).map(le=>le.BILL_YM);h(new Set(Z))}},[t,i,a]),b.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const L=b.useMemo(()=>{const ee=new Map;for(const Z of m)for(const le of Z.pendingBillYms)ee.set(le,Z);return ee},[m]),re=b.useMemo(()=>a.filter(ee=>u.has(ee.BILL_YM)&&!L.has(ee.BILL_YM)),[a,u,L]),fe=b.useMemo(()=>re.reduce((ee,Z)=>ee+(Z.UNPAY_AMT||0),0),[re]),T=b.useMemo(()=>a.filter(ee=>L.has(ee.BILL_YM)),[a,L]),j=b.useMemo(()=>T.reduce((ee,Z)=>ee+(Z.UNPAY_AMT||0),0),[T]),K=b.useMemo(()=>a.filter(ee=>!L.has(ee.BILL_YM)),[a,L]),J=K.length>0&&K.every(ee=>u.has(ee.BILL_YM)),q=b.useCallback(ee=>{L.has(ee)||h(Z=>{const le=new Set(Z);return le.has(ee)?le.delete(ee):le.add(ee),le})},[L]),V=b.useCallback(()=>{h(J?ee=>{const Z=new Set(ee);return K.forEach(le=>Z.delete(le.BILL_YM)),Z}:ee=>{const Z=new Set(ee);return K.forEach(le=>Z.add(le.BILL_YM)),Z})},[J,K]),[ce,me]=b.useState(null),Ce=b.useCallback(async ee=>{me(ee.orderNo);try{const Z=await V$({OID:ee.orderNo,MID:ee.mid,AMT:ee.selectedTotal,ORDER_DT:ee.orderDt,PYM_ACNT_ID:i},1e4);if(Z.errorCode==="TIMEOUT"){z(!0),o==null||o("   .","warning");return}if(z(!1),Z.success)ep(i,ee.orderNo),_(Ic(i)),se(le=>{const xe=new Set(le);return ee.pendingBillYms.forEach(be=>xe.add(be)),xe}),o==null||o(`${bl(ee.selectedTotal)}   .`,"success"),c==null||c();else{const le=Z.message||"    .";Z.errorCode==="NOT_FOUND"||Z.errorCode==="PENDING"?o==null||o(" .    .","info"):(ep(i,ee.orderNo),_(Ic(i)),o==null||o(`  : ${le}`,"error"))}}catch(Z){console.error("[UnpaymentModal] Check result error:",Z),o==null||o("    .","error")}finally{me(null)}},[i,o,c]),ge=()=>{try{const ee=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");if(ee){const Z=JSON.parse(ee),le=Z.authSoList||Z.AUTH_SO_List||[];return le.length>0?le[0].SO_ID||le[0].soId||"":Z.soId||Z.SO_ID||""}}catch{console.error("[UnpaymentModal] Failed to get SO_ID")}return""},Ge=()=>{const ee=Date.now().toString().slice(-7),Z=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return ee+Z},te=async()=>{if(re.length===0){o==null||o("  .","warning");return}const ee=p.replace(/\s/g,"");if(ee.length!==16){o==null||o(" 16 .","warning");return}if(!C||!N){o==null||o(" .","warning");return}if(!P||P.length!==6&&P.length!==10){o==null||o("(6)  (10) .","warning");return}const Z=re.map(le=>le.BILL_YM);G(!0),I(Z);try{const le=ge();let xe="";if(le){const st=await Q$(le);if(st.success&&st.data){const St=Array.isArray(st.data)?st.data[0]:st.data;xe=(St==null?void 0:St.MID)||(St==null?void 0:St.CARD_VENDOR)||""}}if(!xe){o==null||o("    .  .","error"),G(!1),I([]);return}const be=Ge(),ne=new Date,ie=ne.getFullYear().toString()+(ne.getMonth()+1).toString().padStart(2,"0")+ne.getDate().toString().padStart(2,"0"),pe=await Y$({master_store_id:xe,order_dt:ie,order_no:be,ctrt_so_id:le,pym_acnt_id:i,cust_id:n,prod_info_cd:"01",encrypted_amt:String(fe),reqr_nm:r||"",pyr_rel:"",user_id:"",rcpt_bill_emp_id:"",smry:"DLIVE_UNPAY",cust_email:""});if(!pe.success){o==null||o(`  : ${pe.message||"   "}`,"error"),G(!1),I([]);return}const ze={cardNo:ee.slice(-4),expMonth:C,expYear:N,installment:M,korId:P.slice(0,2)+"****",mid:xe,orderNo:be,orderDt:ie,selectedTotal:fe,timestamp:Date.now(),pendingBillYms:Z};u$(i,ze),_(Ic(i)),h(st=>{const St=new Set(st);return Z.forEach(ot=>St.delete(ot)),St});const xt=await $$({mid:xe,oid:be,order_dt:ie,amount:String(fe),buyer:r||"",productinfo:"DLIVE_UNPAY",card_no:ee,card_expyear:N,card_expmon:C,kor_id:P,install:M,pym_acnt_id:i,encrypted_amt:String(fe),so_id:le,cust_id:n});xt.success?(ep(i,be),_(Ic(i)),se(st=>{const St=new Set(st);return Z.forEach(ot=>St.add(ot)),St}),o==null||o(`${bl(fe)}  .`,"success"),c==null||c()):xt.errorCode==="TIMEOUT"?(z(!0),o==null||o("   . []  .","warning")):(ep(i,be),_(Ic(i)),o==null||o(` : ${xt.message||" "}`,"error"))}catch(le){console.error("[UnpaymentModal] Payment error:",le),o==null||o("    .   .","warning")}finally{G(!1),I([])}},he=b.useCallback(async()=>{F(!0),z(!1);for(const ee of m)await Ce(ee);F(!1)},[m,Ce]),de=ee=>{const Z=ee.replace(/\D/g,"").slice(0,16),le=Z.match(/.{1,4}/g);return le?le.join(" "):Z};if(!t)return null;const Q=m.reduce((ee,Z)=>ee+Z.pendingBillYms.length,0);return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 max-h-[90vh] flex flex-col",onClick:ee=>ee.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-red-500 to-red-600 rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-white",children:[s.jsx(Pp,{className:"w-5 h-5"}),s.jsx("h3",{className:"font-semibold",children:" "})]}),s.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",disabled:B,children:s.jsx(Mi,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-medium text-gray-900",children:sV(r)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"ID: "}),s.jsx("span",{className:"font-mono text-primary-700",children:bR(n)})]}),i&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx("span",{className:"font-mono text-purple-600",children:bR(i)})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[Q>0&&s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"}),s.jsxs("span",{className:"text-sm font-medium",children:["  ",m.length," (",Q," , ",bl(j),")"]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:" "}),K.length>0&&s.jsx("button",{onClick:V,disabled:B,className:"text-xs text-blue-500 hover:text-blue-600 disabled:opacity-50",children:J?" ":" "})]}),s.jsx("div",{className:"space-y-2",children:a.map(ee=>{const Z=L.has(ee.BILL_YM),le=Z?L.get(ee.BILL_YM):null,xe=Y.has(ee.BILL_YM),be=U.includes(ee.BILL_YM),ne=u.has(ee.BILL_YM);return s.jsx("div",{className:`rounded-lg border p-3 transition-colors ${xe?"bg-green-50 border-green-200":Z?"bg-amber-50 border-amber-200":be?"bg-blue-50 border-blue-200":ne?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:Z?s.jsx("div",{className:"w-5 h-5 rounded bg-amber-400 flex items-center justify-center",children:s.jsx(AL,{className:"w-3 h-3 text-white"})}):xe?s.jsx("div",{className:"w-5 h-5 rounded bg-green-500 flex items-center justify-center",children:s.jsx(Ai,{className:"w-3 h-3 text-white"})}):be?s.jsx(pn,{className:"w-5 h-5 text-blue-500 animate-spin"}):s.jsx("input",{type:"checkbox",checked:ne,onChange:()=>q(ee.BILL_YM),className:"w-5 h-5 rounded border-gray-300 text-red-600 focus:ring-red-500",disabled:B})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:nV(ee.BILL_YM)}),Z&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-amber-200 text-amber-800 rounded",children:""}),xe&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-green-200 text-green-800 rounded",children:""}),be&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-blue-200 text-blue-800 rounded",children:""})]}),s.jsxs("span",{className:`text-sm font-bold ${xe?"text-green-600":"text-red-600"}`,children:[bl(ee.UNPAY_AMT),""]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5 truncate",children:[rV(ee.PROD_NM),ee.UNPAY_DAYS>0&&` |  ${ee.UNPAY_DAYS}`]}),Z&&le&&s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-amber-600",children:[" ****",le.cardNo," | ",bl(le.selectedTotal),""]}),s.jsx("button",{onClick:ie=>{ie.stopPropagation(),Ce(le)},disabled:X||ce===le.orderNo,className:"text-xs text-blue-600 hover:text-blue-700 underline flex items-center gap-1 disabled:opacity-50",children:ce===le.orderNo?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-3 h-3 animate-spin"}),""]}):s.jsxs(s.Fragment,{children:[s.jsx(Lc,{className:"w-3 h-3"})," "]})})]})]})]})},ee.BILL_YM+"_"+ee.CTRT_ID)})})]}),s.jsxs("div",{className:"space-y-2",children:[re.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["  (",re.length,")"]}),s.jsxs("span",{className:"text-xl font-bold text-red-600",children:[bl(fe),""]})]}),T.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-200",children:[s.jsxs("span",{className:"text-sm text-amber-700",children:[" (",T.length,")"]}),s.jsxs("span",{className:"text-sm font-medium text-amber-700",children:[bl(j),""]})]})]}),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>A(!E),className:"w-full flex items-center justify-between mb-2",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:[s.jsx(Pp,{className:"w-4 h-4"}),"  "]}),E?s.jsx(Pr,{className:"w-4 h-4 text-gray-400"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400"})]}),E&&s.jsxs("div",{className:"space-y-3 bg-gray-50 rounded-lg p-3 border border-gray-200",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("input",{type:"text",inputMode:"numeric",placeholder:"0000 0000 0000 0000",value:de(p),onChange:ee=>g(ee.target.value.replace(/\D/g,"").slice(0,16)),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:B})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" ()"}),s.jsxs("select",{value:C,onChange:ee=>y(ee.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:B,children:[s.jsx("option",{value:"",children:"MM"}),Array.from({length:12},(ee,Z)=>(Z+1).toString().padStart(2,"0")).map(ee=>s.jsx("option",{value:ee,children:ee},ee))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" ()"}),s.jsxs("select",{value:N,onChange:ee=>v(ee.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:B,children:[s.jsx("option",{value:"",children:"YY"}),Array.from({length:10},(ee,Z)=>{const le=(new Date().getFullYear()%100+Z).toString().padStart(2,"0");return s.jsx("option",{value:le,children:le},le)})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"(6) / (10)"}),s.jsx("input",{type:"text",inputMode:"numeric",placeholder:"YYMMDD",value:P,onChange:ee=>w(ee.target.value.replace(/\D/g,"").slice(0,10)),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:B})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsxs("select",{value:M,onChange:ee=>k(ee.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:B,children:[s.jsx("option",{value:"00",children:""}),s.jsx("option",{value:"02",children:"2"}),s.jsx("option",{value:"03",children:"3"}),s.jsx("option",{value:"06",children:"6"}),s.jsx("option",{value:"12",children:"12"})]})]})]})]})]}),X&&s.jsx("div",{className:"px-4 pb-2",children:s.jsxs("div",{className:"border-t border-orange-200 pt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-orange-600",children:[s.jsx($r,{className:"w-4 h-4"}),s.jsx("span",{children:"  .    ."})]}),s.jsx("button",{onClick:he,disabled:$,className:"w-full py-2.5 text-sm font-medium text-white bg-orange-500 rounded-lg hover:bg-orange-600 disabled:bg-gray-400 flex items-center justify-center gap-2",children:$?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Co,{className:"w-4 h-4"}),""]})})]})}),s.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:e,disabled:B,className:"flex-1 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors",children:""}),re.length>0?s.jsx("button",{onClick:te,disabled:X||B||p.replace(/\D/g,"").length!==16,className:"flex-1 py-3 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:B?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"})," ..."]}):`${bl(fe)} `}):Q>0?s.jsx("button",{onClick:()=>{m.length>0&&!ce&&Ce(m[0])},disabled:X||!!ce,className:"flex-1 py-3 text-sm font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:ce?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Lc,{className:"w-4 h-4"})," "]})}):s.jsx("button",{disabled:!0,className:"flex-1 py-3 text-sm font-medium text-white bg-gray-400 rounded-lg cursor-not-allowed",children:" "})]}),s.jsx("p",{className:"mt-3 text-xs text-gray-400 text-center",children:"*     ."})]})]})})},k4=({onSave:t,onCancel:e,width:n=340,height:r=200,penColor:i="#000000",backgroundColor:a="#ffffff",title:o=""})=>{const c=b.useRef(null),[u,h]=b.useState(!1),[m,_]=b.useState(!1),p=b.useRef(null),[g,C]=b.useState({isOpen:!1,type:"warning",message:"",onConfirm:()=>{}});b.useEffect(()=>{const B=c.current;if(!B)return;const G=B.getContext("2d");G&&(G.fillStyle=a,G.fillRect(0,0,B.width,B.height),G.strokeStyle=i,G.lineWidth=2,G.lineCap="round",G.lineJoin="round")},[a,i]);const y=b.useCallback(B=>{const G=c.current;if(!G)return null;const U=G.getBoundingClientRect(),I=G.width/U.width,E=G.height/U.height;if("touches"in B){const A=B.touches[0];return{x:(A.clientX-U.left)*I,y:(A.clientY-U.top)*E}}else return{x:(B.clientX-U.left)*I,y:(B.clientY-U.top)*E}},[]),N=b.useCallback(B=>{B.preventDefault();const G=y(B);if(!G)return;h(!0),p.current=G;const U=c.current,I=U==null?void 0:U.getContext("2d");I&&(I.beginPath(),I.moveTo(G.x,G.y))},[y]),v=b.useCallback(B=>{if(!u)return;B.preventDefault();const G=y(B);if(!G||!p.current)return;const U=c.current,I=U==null?void 0:U.getContext("2d");I&&(I.beginPath(),I.moveTo(p.current.x,p.current.y),I.lineTo(G.x,G.y),I.stroke(),p.current=G,_(!0))},[u,y]),P=b.useCallback(()=>{h(!1),p.current=null},[]),w=b.useCallback(()=>{const B=c.current,G=B==null?void 0:B.getContext("2d");!G||!B||(G.fillStyle=a,G.fillRect(0,0,B.width,B.height),_(!1))},[a]),M=b.useCallback(()=>{const B=c.current;if(!B||!m)return;let G=B.toDataURL("image/png");if(G=G.replace(/\+/g,"%2B"),G.length<5e3){C({isOpen:!0,type:"error",message:`    .
  .`,onConfirm:()=>w()});return}if(G.length<1e4){C({isOpen:!0,type:"warning",message:`      .
  .`,onConfirm:()=>w()});return}t(G)},[m,t,w]),k=b.useCallback(()=>{C(B=>({...B,isOpen:!1}))},[]);return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx(Ba,{isOpen:g.isOpen,onClose:k,onConfirm:g.onConfirm,title:" ",message:g.message,type:g.type,showCancel:!1,confirmText:""}),s.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[s.jsx("h3",{className:"font-medium",children:o}),s.jsx("p",{className:"text-xs text-blue-100 mt-0.5",children:"  "})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-50",children:s.jsx("canvas",{ref:c,width:n,height:r,className:"touch-none w-full",style:{maxWidth:"100%",height:"auto",aspectRatio:`${n}/${r}`},onMouseDown:N,onMouseMove:v,onMouseUp:P,onMouseLeave:P,onTouchStart:N,onTouchMove:v,onTouchEnd:P})}),!m&&s.jsx("div",{className:"text-center mt-2 text-sm text-gray-400",children:"   "})]}),s.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[s.jsxs("button",{onClick:w,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(ki,{className:"w-4 h-4"})," "]}),e&&s.jsxs("button",{onClick:e,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(NP,{className:"w-4 h-4"}),""]}),s.jsxs("button",{onClick:M,disabled:!m,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ho,{className:"w-4 h-4"}),""]})]})]})};function Nr(t){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(t)}var nc=Uint8Array,Kl=Uint16Array,fS=Int32Array,mS=new nc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gS=new nc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),CR=new nc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U4=function(t,e){for(var n=new Kl(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new fS(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},B4=U4(mS,2),aV=B4.b,M2=B4.r;aV[28]=258,M2[258]=28;var lV=U4(gS,0),NR=lV.r,I2=new Kl(32768);for(var Yr=0;Yr<32768;++Yr){var yu=(Yr&43690)>>1|(Yr&21845)<<1;yu=(yu&52428)>>2|(yu&13107)<<2,yu=(yu&61680)>>4|(yu&3855)<<4,I2[Yr]=((yu&65280)>>8|(yu&255)<<8)>>1}var Qg=(function(t,e,n){for(var r=t.length,i=0,a=new Kl(e);i<r;++i)t[i]&&++a[t[i]-1];var o=new Kl(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var c;if(n){c=new Kl(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var h=i<<4|t[i],m=e-t[i],_=o[t[i]-1]++<<m,p=_|(1<<m)-1;_<=p;++_)c[I2[_]>>u]=h}else for(c=new Kl(r),i=0;i<r;++i)t[i]&&(c[i]=I2[o[t[i]-1]++]>>15-t[i]);return c}),s0=new nc(288);for(var Yr=0;Yr<144;++Yr)s0[Yr]=8;for(var Yr=144;Yr<256;++Yr)s0[Yr]=9;for(var Yr=256;Yr<280;++Yr)s0[Yr]=7;for(var Yr=280;Yr<288;++Yr)s0[Yr]=8;var x1=new nc(32);for(var Yr=0;Yr<32;++Yr)x1[Yr]=5;var oV=Qg(s0,9,0),cV=Qg(x1,5,0),G4=function(t){return(t+7)/8|0},dV=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new nc(t.subarray(e,n))},dd=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},pg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},lC=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:F4,l:0};if(i==1){var o=new nc(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(k,B){return k.f-B.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],h=0,m=1,_=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};m!=i-1;)c=n[n[h].f<n[_].f?h++:_++],u=n[h!=m&&n[h].f<n[_].f?h++:_++],n[m++]={s:-1,f:c.f+u.f,l:c,r:u};for(var p=a[0].s,r=1;r<i;++r)a[r].s>p&&(p=a[r].s);var g=new Kl(p+1),C=j2(n[m-1],g,0);if(C>e){var r=0,y=0,N=C-e,v=1<<N;for(a.sort(function(B,G){return g[G.s]-g[B.s]||B.f-G.f});r<i;++r){var P=a[r].s;if(g[P]>e)y+=v-(1<<C-g[P]),g[P]=e;else break}for(y>>=N;y>0;){var w=a[r].s;g[w]<e?y-=1<<e-g[w]++-1:++r}for(;r>=0&&y;--r){var M=a[r].s;g[M]==e&&(--g[M],++y)}C=e}return{t:new nc(g),l:C}},j2=function(t,e,n){return t.s==-1?Math.max(j2(t.l,e,n+1),j2(t.r,e,n+1)):e[t.s]=n},SR=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Kl(++e),r=0,i=t[0],a=1,o=function(u){n[r++]=u},c=1;c<=e;++c)if(t[c]==i&&c!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[c]}return{c:n.subarray(0,r),n:e}},yg=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},W4=function(t,e,n){var r=n.length,i=G4(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<r;++a)t[i+a+4]=n[a];return(i+4+r)*8},vR=function(t,e,n,r,i,a,o,c,u,h,m){dd(e,m++,n),++i[256];for(var _=lC(i,15),p=_.t,g=_.l,C=lC(a,15),y=C.t,N=C.l,v=SR(p),P=v.c,w=v.n,M=SR(y),k=M.c,B=M.n,G=new Kl(19),U=0;U<P.length;++U)++G[P[U]&31];for(var U=0;U<k.length;++U)++G[k[U]&31];for(var I=lC(G,7),E=I.t,A=I.l,Y=19;Y>4&&!E[CR[Y-1]];--Y);var se=h+5<<3,X=yg(i,s0)+yg(a,x1)+o,z=yg(i,p)+yg(a,y)+o+14+3*Y+yg(G,E)+2*G[16]+3*G[17]+7*G[18];if(u>=0&&se<=X&&se<=z)return W4(e,m,t.subarray(u,u+h));var $,F,L,re;if(dd(e,m,1+(z<X)),m+=2,z<X){$=Qg(p,g,0),F=p,L=Qg(y,N,0),re=y;var fe=Qg(E,A,0);dd(e,m,w-257),dd(e,m+5,B-1),dd(e,m+10,Y-4),m+=14;for(var U=0;U<Y;++U)dd(e,m+3*U,E[CR[U]]);m+=3*Y;for(var T=[P,k],j=0;j<2;++j)for(var K=T[j],U=0;U<K.length;++U){var J=K[U]&31;dd(e,m,fe[J]),m+=E[J],J>15&&(dd(e,m,K[U]>>5&127),m+=K[U]>>12)}}else $=oV,F=s0,L=cV,re=x1;for(var U=0;U<c;++U){var q=r[U];if(q>255){var J=q>>18&31;pg(e,m,$[J+257]),m+=F[J+257],J>7&&(dd(e,m,q>>23&31),m+=mS[J]);var V=q&31;pg(e,m,L[V]),m+=re[V],V>3&&(pg(e,m,q>>5&8191),m+=gS[V])}else pg(e,m,$[q]),m+=F[q]}return pg(e,m,$[256]),m+F[256]},uV=new fS([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F4=new nc(0),hV=function(t,e,n,r,i,a){var o=a.z||t.length,c=new nc(r+o+5*(1+Math.ceil(o/7e3))+i),u=c.subarray(r,c.length-i),h=a.l,m=(a.r||0)&7;if(e){m&&(u[0]=a.r>>3);for(var _=uV[e-1],p=_>>13,g=_&8191,C=(1<<n)-1,y=a.p||new Kl(32768),N=a.h||new Kl(C+1),v=Math.ceil(n/3),P=2*v,w=function(de){return(t[de]^t[de+1]<<v^t[de+2]<<P)&C},M=new fS(25e3),k=new Kl(288),B=new Kl(32),G=0,U=0,I=a.i||0,E=0,A=a.w||0,Y=0;I+2<o;++I){var se=w(I),X=I&32767,z=N[se];if(y[X]=z,N[se]=X,A<=I){var $=o-I;if((G>7e3||E>24576)&&($>423||!h)){m=vR(t,u,0,M,k,B,U,E,Y,I-Y,m),E=G=U=0,Y=I;for(var F=0;F<286;++F)k[F]=0;for(var F=0;F<30;++F)B[F]=0}var L=2,re=0,fe=g,T=X-z&32767;if($>2&&se==w(I-T))for(var j=Math.min(p,$)-1,K=Math.min(32767,I),J=Math.min(258,$);T<=K&&--fe&&X!=z;){if(t[I+L]==t[I+L-T]){for(var q=0;q<J&&t[I+q]==t[I+q-T];++q);if(q>L){if(L=q,re=T,q>j)break;for(var V=Math.min(T,q-2),ce=0,F=0;F<V;++F){var me=I-T+F&32767,Ce=y[me],ge=me-Ce&32767;ge>ce&&(ce=ge,z=me)}}}X=z,z=y[X],T+=X-z&32767}if(re){M[E++]=268435456|M2[L]<<18|NR[re];var Ge=M2[L]&31,te=NR[re]&31;U+=mS[Ge]+gS[te],++k[257+Ge],++B[te],A=I+L,++G}else M[E++]=t[I],++k[t[I]]}}for(I=Math.max(I,A);I<o;++I)M[E++]=t[I],++k[t[I]];m=vR(t,u,h,M,k,B,U,E,Y,I-Y,m),h||(a.r=m&7|u[m/8|0]<<3,m-=7,a.h=N,a.p=y,a.i=I,a.w=A)}else{for(var I=a.w||0;I<o+h;I+=65535){var he=I+65535;he>=o&&(u[m/8|0]=h,he=o),m=W4(u,m+1,t.subarray(I,he))}a.i=o}return dV(c,0,r+G4(m)+i)},K4=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=n.length|0,o=0;o!=a;){for(var c=Math.min(o+2655,a);o<c;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},fV=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new nc(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return hV(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Q4=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},mV=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=K4();i.p(e.dictionary),Q4(t,2,i.d())}};function O2(t,e){e||(e={});var n=K4();n.p(t);var r=fV(t,e,e.dictionary?6:2,4);return mV(r,e),Q4(r,r.length-4,n.d()),r}var gV=typeof TextDecoder<"u"&&new TextDecoder,_V=0;try{gV.decode(F4,{stream:!0}),_V=1}catch{}function xV(t){if(Array.isArray(t))return t}function pV(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,c=[],u=!0,h=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(m){h=!0,i=m}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}function ER(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function yV(t,e){if(t){if(typeof t=="string")return ER(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ER(t,e):void 0}}function bV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DR(t,e){return xV(t)||pV(t,e)||yV(t,e)||bV()}function RR(t,e="utf8"){return new TextDecoder(e).decode(t)}const CV=new TextEncoder;function NV(t){return CV.encode(t)}const SV=1024*8,vV=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),oC={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class _S{constructor(e=SV,n={}){cr(this,"buffer");cr(this,"byteLength");cr(this,"byteOffset");cr(this,"length");cr(this,"offset");cr(this,"lastWrittenByte");cr(this,"littleEndian");cr(this,"_data");cr(this,"_mark");cr(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,a=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof _S)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=oC[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===vV&&n!=="uint8"&&n!=="int8"){const c=new Uint8Array(this.buffer.slice(i,i+r));c.reverse();const u=new oC[n](c.buffer);return this.offset+=r,u.reverse(),u}const o=new oC[n](a);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return RR(this.readBytes(e))}decodeText(e=1,n="utf8"){return RR(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(NV(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function vm(t){let e=t.length;for(;--e>=0;)t[e]=0}const EV=3,DV=258,Y4=29,RV=256,TV=RV+1+Y4,$4=30,MV=512,IV=new Array((TV+2)*2);vm(IV);const jV=new Array($4*2);vm(jV);const OV=new Array(MV);vm(OV);const wV=new Array(DV-EV+1);vm(wV);const LV=new Array(Y4);vm(LV);const PV=new Array($4);vm(PV);const AV=(t,e,n,r)=>{let i=t&65535|0,a=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var w2=AV;const kV=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},UV=new Uint32Array(kV()),BV=(t,e,n,r)=>{const i=UV,a=r+n;t^=-1;for(let o=r;o<a;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var vc=BV,L2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},V4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const GV=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var WV=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)GV(n,r)&&(t[r]=n[r])}}return t},FV=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,a=t.length;r<a;r++){let o=t[r];n.set(o,i),i+=o.length}return n},z4={assign:WV,flattenChunks:FV};let H4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{H4=!1}const d_=new Uint8Array(256);for(let t=0;t<256;t++)d_[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;d_[254]=d_[254]=1;var KV=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,a,o=t.length,c=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(c),a=0,i=0;a<c;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const QV=(t,e)=>{if(e<65534&&t.subarray&&H4)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var YV=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){a[i++]=o;continue}let c=d_[o];if(c>4){a[i++]=65533,r+=c-1;continue}for(o&=c===2?31:c===3?15:7;c>1&&r<n;)o=o<<6|t[r++]&63,c--;if(c>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return QV(a,i)},$V=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+d_[t[n]]>e?n:e},P2={string2buf:KV,buf2string:YV,utf8border:$V};function VV(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zV=VV;const tp=16209,HV=16191;var qV=function(e,n){let r,i,a,o,c,u,h,m,_,p,g,C,y,N,v,P,w,M,k,B,G,U,I,E;const A=e.state;r=e.next_in,I=e.input,i=r+(e.avail_in-5),a=e.next_out,E=e.output,o=a-(n-e.avail_out),c=a+(e.avail_out-257),u=A.dmax,h=A.wsize,m=A.whave,_=A.wnext,p=A.window,g=A.hold,C=A.bits,y=A.lencode,N=A.distcode,v=(1<<A.lenbits)-1,P=(1<<A.distbits)-1;e:do{C<15&&(g+=I[r++]<<C,C+=8,g+=I[r++]<<C,C+=8),w=y[g&v];t:for(;;){if(M=w>>>24,g>>>=M,C-=M,M=w>>>16&255,M===0)E[a++]=w&65535;else if(M&16){k=w&65535,M&=15,M&&(C<M&&(g+=I[r++]<<C,C+=8),k+=g&(1<<M)-1,g>>>=M,C-=M),C<15&&(g+=I[r++]<<C,C+=8,g+=I[r++]<<C,C+=8),w=N[g&P];s:for(;;){if(M=w>>>24,g>>>=M,C-=M,M=w>>>16&255,M&16){if(B=w&65535,M&=15,C<M&&(g+=I[r++]<<C,C+=8,C<M&&(g+=I[r++]<<C,C+=8)),B+=g&(1<<M)-1,B>u){e.msg="invalid distance too far back",A.mode=tp;break e}if(g>>>=M,C-=M,M=a-o,B>M){if(M=B-M,M>m&&A.sane){e.msg="invalid distance too far back",A.mode=tp;break e}if(G=0,U=p,_===0){if(G+=h-M,M<k){k-=M;do E[a++]=p[G++];while(--M);G=a-B,U=E}}else if(_<M){if(G+=h+_-M,M-=_,M<k){k-=M;do E[a++]=p[G++];while(--M);if(G=0,_<k){M=_,k-=M;do E[a++]=p[G++];while(--M);G=a-B,U=E}}}else if(G+=_-M,M<k){k-=M;do E[a++]=p[G++];while(--M);G=a-B,U=E}for(;k>2;)E[a++]=U[G++],E[a++]=U[G++],E[a++]=U[G++],k-=3;k&&(E[a++]=U[G++],k>1&&(E[a++]=U[G++]))}else{G=a-B;do E[a++]=E[G++],E[a++]=E[G++],E[a++]=E[G++],k-=3;while(k>2);k&&(E[a++]=E[G++],k>1&&(E[a++]=E[G++]))}}else if((M&64)===0){w=N[(w&65535)+(g&(1<<M)-1)];continue s}else{e.msg="invalid distance code",A.mode=tp;break e}break}}else if((M&64)===0){w=y[(w&65535)+(g&(1<<M)-1)];continue t}else if(M&32){A.mode=HV;break e}else{e.msg="invalid literal/length code",A.mode=tp;break e}break}}while(r<i&&a<c);k=C>>3,r-=k,C-=k<<3,g&=(1<<C)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<c?257+(c-a):257-(a-c),A.hold=g,A.bits=C};const hf=15,TR=852,MR=592,IR=0,cC=1,jR=2,XV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),JV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ZV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ez=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),tz=(t,e,n,r,i,a,o,c)=>{const u=c.bits;let h=0,m=0,_=0,p=0,g=0,C=0,y=0,N=0,v=0,P=0,w,M,k,B,G,U=null,I;const E=new Uint16Array(hf+1),A=new Uint16Array(hf+1);let Y=null,se,X,z;for(h=0;h<=hf;h++)E[h]=0;for(m=0;m<r;m++)E[e[n+m]]++;for(g=u,p=hf;p>=1&&E[p]===0;p--);if(g>p&&(g=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,c.bits=1,0;for(_=1;_<p&&E[_]===0;_++);for(g<_&&(g=_),N=1,h=1;h<=hf;h++)if(N<<=1,N-=E[h],N<0)return-1;if(N>0&&(t===IR||p!==1))return-1;for(A[1]=0,h=1;h<hf;h++)A[h+1]=A[h]+E[h];for(m=0;m<r;m++)e[n+m]!==0&&(o[A[e[n+m]]++]=m);if(t===IR?(U=Y=o,I=20):t===cC?(U=XV,Y=JV,I=257):(U=ZV,Y=ez,I=0),P=0,m=0,h=_,G=a,C=g,y=0,k=-1,v=1<<g,B=v-1,t===cC&&v>TR||t===jR&&v>MR)return 1;for(;;){se=h-y,o[m]+1<I?(X=0,z=o[m]):o[m]>=I?(X=Y[o[m]-I],z=U[o[m]-I]):(X=96,z=0),w=1<<h-y,M=1<<C,_=M;do M-=w,i[G+(P>>y)+M]=se<<24|X<<16|z|0;while(M!==0);for(w=1<<h-1;P&w;)w>>=1;if(w!==0?(P&=w-1,P+=w):P=0,m++,--E[h]===0){if(h===p)break;h=e[n+o[m]]}if(h>g&&(P&B)!==k){for(y===0&&(y=g),G+=_,C=h-y,N=1<<C;C+y<p&&(N-=E[C+y],!(N<=0));)C++,N<<=1;if(v+=1<<C,t===cC&&v>TR||t===jR&&v>MR)return 1;k=P&B,i[k]=g<<24|C<<16|G-a|0}}return P!==0&&(i[G+P]=h-y<<24|64<<16|0),c.bits=g,0};var Yg=tz;const sz=0,q4=1,X4=2,{Z_FINISH:OR,Z_BLOCK:nz,Z_TREES:sp,Z_OK:n0,Z_STREAM_END:rz,Z_NEED_DICT:iz,Z_STREAM_ERROR:vo,Z_DATA_ERROR:J4,Z_MEM_ERROR:Z4,Z_BUF_ERROR:az,Z_DEFLATED:wR}=V4,J1=16180,LR=16181,PR=16182,AR=16183,kR=16184,UR=16185,BR=16186,GR=16187,WR=16188,FR=16189,p1=16190,ud=16191,dC=16192,KR=16193,uC=16194,QR=16195,YR=16196,$R=16197,VR=16198,np=16199,rp=16200,zR=16201,HR=16202,qR=16203,XR=16204,JR=16205,hC=16206,ZR=16207,eT=16208,Zr=16209,eO=16210,tO=16211,lz=852,oz=592,cz=15,dz=cz,tT=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function uz(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const x0=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<J1||e.mode>tO?1:0},sO=t=>{if(x0(t))return vo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=J1,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(lz),e.distcode=e.distdyn=new Int32Array(oz),e.sane=1,e.back=-1,n0},nO=t=>{if(x0(t))return vo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,sO(t)},rO=(t,e)=>{let n;if(x0(t))return vo;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?vo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,nO(t))},iO=(t,e)=>{if(!t)return vo;const n=new uz;t.state=n,n.strm=t,n.window=null,n.mode=J1;const r=rO(t,e);return r!==n0&&(t.state=null),r},hz=t=>iO(t,dz);let sT=!0,fC,mC;const fz=t=>{if(sT){fC=new Int32Array(512),mC=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Yg(q4,t.lens,0,288,fC,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Yg(X4,t.lens,0,32,mC,0,t.work,{bits:5}),sT=!1}t.lencode=fC,t.lenbits=9,t.distcode=mC,t.distbits=5},aO=(t,e,n,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},mz=(t,e)=>{let n,r,i,a,o,c,u,h,m,_,p,g,C,y,N=0,v,P,w,M,k,B,G,U;const I=new Uint8Array(4);let E,A;const Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(x0(t)||!t.output||!t.input&&t.avail_in!==0)return vo;n=t.state,n.mode===ud&&(n.mode=dC),o=t.next_out,i=t.output,u=t.avail_out,a=t.next_in,r=t.input,c=t.avail_in,h=n.hold,m=n.bits,_=c,p=u,U=n0;e:for(;;)switch(n.mode){case J1:if(n.wrap===0){n.mode=dC;break}for(;m<16;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(n.wrap&2&&h===35615){n.wbits===0&&(n.wbits=15),n.check=0,I[0]=h&255,I[1]=h>>>8&255,n.check=vc(n.check,I,2,0),h=0,m=0,n.mode=LR;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((h&255)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=Zr;break}if((h&15)!==wR){t.msg="unknown compression method",n.mode=Zr;break}if(h>>>=4,m-=4,G=(h&15)+8,n.wbits===0&&(n.wbits=G),G>15||G>n.wbits){t.msg="invalid window size",n.mode=Zr;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=h&512?FR:ud,h=0,m=0;break;case LR:for(;m<16;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(n.flags=h,(n.flags&255)!==wR){t.msg="unknown compression method",n.mode=Zr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Zr;break}n.head&&(n.head.text=h>>8&1),n.flags&512&&n.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,n.check=vc(n.check,I,2,0)),h=0,m=0,n.mode=PR;case PR:for(;m<32;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}n.head&&(n.head.time=h),n.flags&512&&n.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,I[2]=h>>>16&255,I[3]=h>>>24&255,n.check=vc(n.check,I,4,0)),h=0,m=0,n.mode=AR;case AR:for(;m<16;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}n.head&&(n.head.xflags=h&255,n.head.os=h>>8),n.flags&512&&n.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,n.check=vc(n.check,I,2,0)),h=0,m=0,n.mode=kR;case kR:if(n.flags&1024){for(;m<16;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}n.length=h,n.head&&(n.head.extra_len=h),n.flags&512&&n.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,n.check=vc(n.check,I,2,0)),h=0,m=0}else n.head&&(n.head.extra=null);n.mode=UR;case UR:if(n.flags&1024&&(g=n.length,g>c&&(g=c),g&&(n.head&&(G=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+g),G)),n.flags&512&&n.wrap&4&&(n.check=vc(n.check,r,g,a)),c-=g,a+=g,n.length-=g),n.length))break e;n.length=0,n.mode=BR;case BR:if(n.flags&2048){if(c===0)break e;g=0;do G=r[a+g++],n.head&&G&&n.length<65536&&(n.head.name+=String.fromCharCode(G));while(G&&g<c);if(n.flags&512&&n.wrap&4&&(n.check=vc(n.check,r,g,a)),c-=g,a+=g,G)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=GR;case GR:if(n.flags&4096){if(c===0)break e;g=0;do G=r[a+g++],n.head&&G&&n.length<65536&&(n.head.comment+=String.fromCharCode(G));while(G&&g<c);if(n.flags&512&&n.wrap&4&&(n.check=vc(n.check,r,g,a)),c-=g,a+=g,G)break e}else n.head&&(n.head.comment=null);n.mode=WR;case WR:if(n.flags&512){for(;m<16;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(n.wrap&4&&h!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Zr;break}h=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ud;break;case FR:for(;m<32;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}t.adler=n.check=tT(h),h=0,m=0,n.mode=p1;case p1:if(n.havedict===0)return t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=c,n.hold=h,n.bits=m,iz;t.adler=n.check=1,n.mode=ud;case ud:if(e===nz||e===sp)break e;case dC:if(n.last){h>>>=m&7,m-=m&7,n.mode=hC;break}for(;m<3;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}switch(n.last=h&1,h>>>=1,m-=1,h&3){case 0:n.mode=KR;break;case 1:if(fz(n),n.mode=np,e===sp){h>>>=2,m-=2;break e}break;case 2:n.mode=YR;break;case 3:t.msg="invalid block type",n.mode=Zr}h>>>=2,m-=2;break;case KR:for(h>>>=m&7,m-=m&7;m<32;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if((h&65535)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Zr;break}if(n.length=h&65535,h=0,m=0,n.mode=uC,e===sp)break e;case uC:n.mode=QR;case QR:if(g=n.length,g){if(g>c&&(g=c),g>u&&(g=u),g===0)break e;i.set(r.subarray(a,a+g),o),c-=g,a+=g,u-=g,o+=g,n.length-=g;break}n.mode=ud;break;case YR:for(;m<14;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(n.nlen=(h&31)+257,h>>>=5,m-=5,n.ndist=(h&31)+1,h>>>=5,m-=5,n.ncode=(h&15)+4,h>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Zr;break}n.have=0,n.mode=$R;case $R:for(;n.have<n.ncode;){for(;m<3;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}n.lens[Y[n.have++]]=h&7,h>>>=3,m-=3}for(;n.have<19;)n.lens[Y[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},U=Yg(sz,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,U){t.msg="invalid code lengths set",n.mode=Zr;break}n.have=0,n.mode=VR;case VR:for(;n.have<n.nlen+n.ndist;){for(;N=n.lencode[h&(1<<n.lenbits)-1],v=N>>>24,P=N>>>16&255,w=N&65535,!(v<=m);){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(w<16)h>>>=v,m-=v,n.lens[n.have++]=w;else{if(w===16){for(A=v+2;m<A;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(h>>>=v,m-=v,n.have===0){t.msg="invalid bit length repeat",n.mode=Zr;break}G=n.lens[n.have-1],g=3+(h&3),h>>>=2,m-=2}else if(w===17){for(A=v+3;m<A;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}h>>>=v,m-=v,G=0,g=3+(h&7),h>>>=3,m-=3}else{for(A=v+7;m<A;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}h>>>=v,m-=v,G=0,g=11+(h&127),h>>>=7,m-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Zr;break}for(;g--;)n.lens[n.have++]=G}}if(n.mode===Zr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Zr;break}if(n.lenbits=9,E={bits:n.lenbits},U=Yg(q4,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,U){t.msg="invalid literal/lengths set",n.mode=Zr;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},U=Yg(X4,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,U){t.msg="invalid distances set",n.mode=Zr;break}if(n.mode=np,e===sp)break e;case np:n.mode=rp;case rp:if(c>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=c,n.hold=h,n.bits=m,qV(t,p),o=t.next_out,i=t.output,u=t.avail_out,a=t.next_in,r=t.input,c=t.avail_in,h=n.hold,m=n.bits,n.mode===ud&&(n.back=-1);break}for(n.back=0;N=n.lencode[h&(1<<n.lenbits)-1],v=N>>>24,P=N>>>16&255,w=N&65535,!(v<=m);){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(P&&(P&240)===0){for(M=v,k=P,B=w;N=n.lencode[B+((h&(1<<M+k)-1)>>M)],v=N>>>24,P=N>>>16&255,w=N&65535,!(M+v<=m);){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}h>>>=M,m-=M,n.back+=M}if(h>>>=v,m-=v,n.back+=v,n.length=w,P===0){n.mode=JR;break}if(P&32){n.back=-1,n.mode=ud;break}if(P&64){t.msg="invalid literal/length code",n.mode=Zr;break}n.extra=P&15,n.mode=zR;case zR:if(n.extra){for(A=n.extra;m<A;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=HR;case HR:for(;N=n.distcode[h&(1<<n.distbits)-1],v=N>>>24,P=N>>>16&255,w=N&65535,!(v<=m);){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if((P&240)===0){for(M=v,k=P,B=w;N=n.distcode[B+((h&(1<<M+k)-1)>>M)],v=N>>>24,P=N>>>16&255,w=N&65535,!(M+v<=m);){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}h>>>=M,m-=M,n.back+=M}if(h>>>=v,m-=v,n.back+=v,P&64){t.msg="invalid distance code",n.mode=Zr;break}n.offset=w,n.extra=P&15,n.mode=qR;case qR:if(n.extra){for(A=n.extra;m<A;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Zr;break}n.mode=XR;case XR:if(u===0)break e;if(g=p-u,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Zr;break}g>n.wnext?(g-=n.wnext,C=n.wsize-g):C=n.wnext-g,g>n.length&&(g=n.length),y=n.window}else y=i,C=o-n.offset,g=n.length;g>u&&(g=u),u-=g,n.length-=g;do i[o++]=y[C++];while(--g);n.length===0&&(n.mode=rp);break;case JR:if(u===0)break e;i[o++]=n.length,u--,n.mode=rp;break;case hC:if(n.wrap){for(;m<32;){if(c===0)break e;c--,h|=r[a++]<<m,m+=8}if(p-=u,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?vc(n.check,i,p,o-p):w2(n.check,i,p,o-p)),p=u,n.wrap&4&&(n.flags?h:tT(h))!==n.check){t.msg="incorrect data check",n.mode=Zr;break}h=0,m=0}n.mode=ZR;case ZR:if(n.wrap&&n.flags){for(;m<32;){if(c===0)break e;c--,h+=r[a++]<<m,m+=8}if(n.wrap&4&&h!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Zr;break}h=0,m=0}n.mode=eT;case eT:U=rz;break e;case Zr:U=J4;break e;case eO:return Z4;case tO:default:return vo}return t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=c,n.hold=h,n.bits=m,(n.wsize||p!==t.avail_out&&n.mode<Zr&&(n.mode<hC||e!==OR))&&aO(t,t.output,t.next_out,p-t.avail_out),_-=t.avail_in,p-=t.avail_out,t.total_in+=_,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?vc(n.check,i,p,t.next_out-p):w2(n.check,i,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ud?128:0)+(n.mode===np||n.mode===uC?256:0),(_===0&&p===0||e===OR)&&U===n0&&(U=az),U},gz=t=>{if(x0(t))return vo;let e=t.state;return e.window&&(e.window=null),t.state=null,n0},_z=(t,e)=>{if(x0(t))return vo;const n=t.state;return(n.wrap&2)===0?vo:(n.head=e,e.done=!1,n0)},xz=(t,e)=>{const n=e.length;let r,i,a;return x0(t)||(r=t.state,r.wrap!==0&&r.mode!==p1)?vo:r.mode===p1&&(i=1,i=w2(i,e,n,0),i!==r.check)?J4:(a=aO(t,e,n,n),a?(r.mode=eO,Z4):(r.havedict=1,n0))};var pz=nO,yz=rO,bz=sO,Cz=hz,Nz=iO,Sz=mz,vz=gz,Ez=_z,Dz=xz,Rz="pako inflate (from Nodeca project)",_d={inflateReset:pz,inflateReset2:yz,inflateResetKeep:bz,inflateInit:Cz,inflateInit2:Nz,inflate:Sz,inflateEnd:vz,inflateGetHeader:Ez,inflateSetDictionary:Dz,inflateInfo:Rz};function Tz(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Mz=Tz;const lO=Object.prototype.toString,{Z_NO_FLUSH:Iz,Z_FINISH:jz,Z_OK:u_,Z_STREAM_END:gC,Z_NEED_DICT:_C,Z_STREAM_ERROR:Oz,Z_DATA_ERROR:nT,Z_MEM_ERROR:wz}=V4;function A_(t){this.options=z4.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zV,this.strm.avail_out=0;let n=_d.inflateInit2(this.strm,e.windowBits);if(n!==u_)throw new Error(L2[n]);if(this.header=new Mz,_d.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=P2.string2buf(e.dictionary):lO.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=_d.inflateSetDictionary(this.strm,e.dictionary),n!==u_)))throw new Error(L2[n])}A_.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,c;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?jz:Iz,lO.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=_d.inflate(n,o),a===_C&&i&&(a=_d.inflateSetDictionary(n,i),a===u_?a=_d.inflate(n,o):a===nT&&(a=_C));n.avail_in>0&&a===gC&&n.state.wrap>0&&t[n.next_in]!==0;)_d.inflateReset(n),a=_d.inflate(n,o);switch(a){case Oz:case nT:case _C:case wz:return this.onEnd(a),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||a===gC))if(this.options.to==="string"){let u=P2.utf8border(n.output,n.next_out),h=n.next_out-u,m=P2.buf2string(n.output,u);n.next_out=h,n.avail_out=r-h,h&&n.output.set(n.output.subarray(u,u+h),0),this.onData(m)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===u_&&c===0)){if(a===gC)return a=_d.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};A_.prototype.onData=function(t){this.chunks.push(t)};A_.prototype.onEnd=function(t){t===u_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=z4.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Lz(t,e){const n=new A_(e);if(n.push(t),n.err)throw n.msg||L2[n.err];return n.result}var Pz=A_,Az=Lz,kz={Inflate:Pz,inflate:Az};const{Inflate:Uz,inflate:Bz}=kz;var rT=Uz,Gz=Bz;const oO=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;oO[t]=e}const iT=4294967295;function Wz(t,e,n){let r=t;for(let i=0;i<n;i++)r=oO[(r^e[i])&255]^r>>>8;return r}function Fz(t,e){return(Wz(iT,t,e)^iT)>>>0}function aT(t,e,n){const r=t.readUint32(),i=Fz(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function cO(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function dO(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function uO(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function hO(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(n[a]>>1)&255;for(;a<r;a++)e[a]=t[a]+(e[a-i]+n[a]>>1)&255}}function fO(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+n[a]&255;for(;a<r;a++)e[a]=t[a]+Kz(e[a-i],n[a],n[a-i])&255}}function Kz(t,e,n){const r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),o=Math.abs(r-n);return i<=a&&i<=o?t:a<=o?e:n}function Qz(t,e,n,r,i,a){switch(t){case 0:cO(e,n,i);break;case 1:dO(e,n,i,a);break;case 2:uO(e,n,r,i);break;case 3:hO(e,n,r,i,a);break;case 4:fO(e,n,r,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Yz=new Uint16Array([255]),$z=new Uint8Array(Yz.buffer),Vz=$z[0]===255;function zz(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(a/8)*i,u=new Uint8Array(r*n*c);let h=0;for(let m=0;m<7;m++){const _=o[m],p=Math.ceil((n-_.x)/_.xStep),g=Math.ceil((r-_.y)/_.yStep);if(p<=0||g<=0)continue;const C=p*c,y=new Uint8Array(C);for(let N=0;N<g;N++){const v=e[h++],P=e.subarray(h,h+C);h+=C;const w=new Uint8Array(C);Qz(v,P,w,y,C,c),y.set(w);for(let M=0;M<p;M++){const k=_.x+M*_.xStep,B=_.y+N*_.yStep;if(!(k>=n||B>=r))for(let G=0;G<c;G++)u[(B*n+k)*c+G]=w[M*c+G]}}}if(a===16){const m=new Uint16Array(u.buffer);if(Vz)for(let _=0;_<m.length;_++)m[_]=Hz(m[_]);return m}else return u}function Hz(t){return(t&255)<<8|t>>8&255}const qz=new Uint16Array([255]),Xz=new Uint8Array(qz.buffer),Jz=Xz[0]===255,Zz=new Uint8Array(0);function lT(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,o=Math.ceil(a/8)*i,c=Math.ceil(a/8*i*n),u=new Uint8Array(r*c);let h=Zz,m=0,_,p;for(let g=0;g<r;g++){switch(_=e.subarray(m+1,m+1+c),p=u.subarray(g*c,(g+1)*c),e[m]){case 0:cO(_,p,c);break;case 1:dO(_,p,c,o);break;case 2:uO(_,p,h,c);break;case 3:hO(_,p,h,c,o);break;case 4:fO(_,p,h,c,o);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}h=p,m+=c+1}if(a===16){const g=new Uint16Array(u.buffer);if(Jz)for(let C=0;C<g.length;C++)g[C]=eH(g[C]);return g}else return u}function eH(t){return(t&255)<<8|t>>8&255}const Rp=Uint8Array.of(137,80,78,71,13,10,26,10);function oT(t){if(!tH(t.readBytes(Rp.length)))throw new Error("wrong PNG signature")}function tH(t){if(t.length<Rp.length)return!1;for(let e=0;e<Rp.length;e++)if(t[e]!==Rp[e])return!1;return!0}const sH="tEXt",nH=0,mO=new TextDecoder("latin1");function rH(t){if(aH(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const iH=/^[\u0000-\u00FF]*$/;function aH(t){if(!iH.test(t))throw new Error("invalid latin1 text")}function lH(t,e,n){const r=gO(e);t[r]=oH(e,n-r.length-1)}function gO(t){for(t.mark();t.readByte()!==nH;);const e=t.offset;t.reset();const n=mO.decode(t.readBytes(e-t.offset-1));return t.skip(1),rH(n),n}function oH(t,e){return mO.decode(t.readBytes(e))}const Wl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},xC={UNKNOWN:-1,DEFLATE:0},cT={UNKNOWN:-1,ADAPTIVE:0},pC={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ip={NONE:0,BACKGROUND:1,PREVIOUS:2},yC={SOURCE:0,OVER:1};class cH extends _S{constructor(n,r={}){super(n);cr(this,"_checkCrc");cr(this,"_inflator");cr(this,"_png");cr(this,"_apng");cr(this,"_end");cr(this,"_hasPalette");cr(this,"_palette");cr(this,"_hasTransparency");cr(this,"_transparency");cr(this,"_compressionMethod");cr(this,"_filterMethod");cr(this,"_interlaceMethod");cr(this,"_colorType");cr(this,"_isAnimated");cr(this,"_numberOfFrames");cr(this,"_numberOfPlays");cr(this,"_frames");cr(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new rT,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=xC.UNKNOWN,this._filterMethod=cT.UNKNOWN,this._interlaceMethod=pC.UNKNOWN,this._colorType=Wl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(oT(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(oT(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case sH:lH(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?aT(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?aT(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=dH(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Wl.GREYSCALE:i=1;break;case Wl.TRUECOLOUR:i=3;break;case Wl.INDEXED_COLOUR:i=1;break;case Wl.GREYSCALE_ALPHA:i=2;break;case Wl.TRUECOLOUR_ALPHA:i=4;break;case Wl.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==xC.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<r;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Wl.GREYSCALE:case Wl.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Wl.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Wl.UNKNOWN:case Wl.GREYSCALE_ALPHA:case Wl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=gO(this),i=this.readUint8();if(i!==xC.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Gz(a)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=lT({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(i,a,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case ip.NONE:break;case ip.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const c=(a*n.width+o)*this._png.channels;for(let u=0;u<this._png.channels;u++)i.data[c+u]=0}break;case ip.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,a=(o,c)=>{const u=((o+r.yOffset)*this._png.width+r.xOffset+c)*this._png.channels,h=(o*r.width+c)*this._png.channels;return{index:u,frameIndex:h}};switch(r.blendOp){case yC.SOURCE:for(let o=0;o<r.height;o++)for(let c=0;c<r.width;c++){const{index:u,frameIndex:h}=a(o,c);for(let m=0;m<this._png.channels;m++)n.data[u+m]=r.data[h+m]}break;case yC.OVER:for(let o=0;o<r.height;o++)for(let c=0;c<r.width;c++){const{index:u,frameIndex:h}=a(o,c);for(let m=0;m<this._png.channels;m++){const _=r.data[h+this._png.channels-1]/i,p=m%(this._png.channels-1)===0?1:r.data[h+m],g=Math.floor(_*p+(1-_)*n.data[u+m]);n.data[u+m]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==cT.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===pC.NO_INTERLACE)this._png.data=lT({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===pC.ADAM7)this._png.data=zz({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ip.NONE,blendOp:yC.SOURCE,data:n}),this._inflator=new rT,this._writingDataChunks=!1}}function dH(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var dT;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(dT||(dT={}));function uH(t,e){return new cH(t,e).decode()}var Cn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function bC(){Cn.console&&typeof Cn.console.log=="function"&&Cn.console.log.apply(Cn.console,arguments)}var Lr={log:bC,warn:function(t){Cn.console&&(typeof Cn.console.warn=="function"?Cn.console.warn.apply(Cn.console,arguments):bC.call(null,arguments))},error:function(t){Cn.console&&(typeof Cn.console.error=="function"?Cn.console.error.apply(Cn.console,arguments):bC(t))}};function CC(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Rh(r.response,e,n)},r.onerror=function(){Lr.error("could not download file")},r.send()}function uT(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ap(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Rh=Cn.saveAs||((typeof window>"u"?"undefined":Nr(window))!=="object"||window!==Cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Cn.URL||Cn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?uT(i.href)?CC(t,e,n):ap(i,i.target="_blank"):ap(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ap(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(uT(t))CC(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){ap(r)})}else navigator.msSaveOrOpenBlob((function(i,a){return a===void 0?a={autoBom:!1}:Nr(a)!=="object"&&(Lr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return CC(t,e,n);var i=t.type==="application/octet-stream",a=/constructor/i.test(Cn.HTMLElement)||Cn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":Nr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=o?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},c.readAsDataURL(t)}else{var u=Cn.URL||Cn.webkitURL,h=u.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _O(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+c+u+h}}var Tp=Cn.atob.bind(Cn),hT=Cn.btoa.bind(Cn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function NC(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];n=Oa(n,r,i,a,e[0],7,-680876936),a=Oa(a,n,r,i,e[1],12,-389564586),i=Oa(i,a,n,r,e[2],17,606105819),r=Oa(r,i,a,n,e[3],22,-1044525330),n=Oa(n,r,i,a,e[4],7,-176418897),a=Oa(a,n,r,i,e[5],12,1200080426),i=Oa(i,a,n,r,e[6],17,-1473231341),r=Oa(r,i,a,n,e[7],22,-45705983),n=Oa(n,r,i,a,e[8],7,1770035416),a=Oa(a,n,r,i,e[9],12,-1958414417),i=Oa(i,a,n,r,e[10],17,-42063),r=Oa(r,i,a,n,e[11],22,-1990404162),n=Oa(n,r,i,a,e[12],7,1804603682),a=Oa(a,n,r,i,e[13],12,-40341101),i=Oa(i,a,n,r,e[14],17,-1502002290),n=wa(n,r=Oa(r,i,a,n,e[15],22,1236535329),i,a,e[1],5,-165796510),a=wa(a,n,r,i,e[6],9,-1069501632),i=wa(i,a,n,r,e[11],14,643717713),r=wa(r,i,a,n,e[0],20,-373897302),n=wa(n,r,i,a,e[5],5,-701558691),a=wa(a,n,r,i,e[10],9,38016083),i=wa(i,a,n,r,e[15],14,-660478335),r=wa(r,i,a,n,e[4],20,-405537848),n=wa(n,r,i,a,e[9],5,568446438),a=wa(a,n,r,i,e[14],9,-1019803690),i=wa(i,a,n,r,e[3],14,-187363961),r=wa(r,i,a,n,e[8],20,1163531501),n=wa(n,r,i,a,e[13],5,-1444681467),a=wa(a,n,r,i,e[2],9,-51403784),i=wa(i,a,n,r,e[7],14,1735328473),n=La(n,r=wa(r,i,a,n,e[12],20,-1926607734),i,a,e[5],4,-378558),a=La(a,n,r,i,e[8],11,-2022574463),i=La(i,a,n,r,e[11],16,1839030562),r=La(r,i,a,n,e[14],23,-35309556),n=La(n,r,i,a,e[1],4,-1530992060),a=La(a,n,r,i,e[4],11,1272893353),i=La(i,a,n,r,e[7],16,-155497632),r=La(r,i,a,n,e[10],23,-1094730640),n=La(n,r,i,a,e[13],4,681279174),a=La(a,n,r,i,e[0],11,-358537222),i=La(i,a,n,r,e[3],16,-722521979),r=La(r,i,a,n,e[6],23,76029189),n=La(n,r,i,a,e[9],4,-640364487),a=La(a,n,r,i,e[12],11,-421815835),i=La(i,a,n,r,e[15],16,530742520),n=Pa(n,r=La(r,i,a,n,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Pa(a,n,r,i,e[7],10,1126891415),i=Pa(i,a,n,r,e[14],15,-1416354905),r=Pa(r,i,a,n,e[5],21,-57434055),n=Pa(n,r,i,a,e[12],6,1700485571),a=Pa(a,n,r,i,e[3],10,-1894986606),i=Pa(i,a,n,r,e[10],15,-1051523),r=Pa(r,i,a,n,e[1],21,-2054922799),n=Pa(n,r,i,a,e[8],6,1873313359),a=Pa(a,n,r,i,e[15],10,-30611744),i=Pa(i,a,n,r,e[6],15,-1560198380),r=Pa(r,i,a,n,e[13],21,1309151649),n=Pa(n,r,i,a,e[4],6,-145523070),a=Pa(a,n,r,i,e[11],10,-1120210379),i=Pa(i,a,n,r,e[2],15,718787259),r=Pa(r,i,a,n,e[9],21,-343485551),t[0]=Gu(n,t[0]),t[1]=Gu(r,t[1]),t[2]=Gu(i,t[2]),t[3]=Gu(a,t[3])}function Z1(t,e,n,r,i,a){return e=Gu(Gu(e,t),Gu(r,a)),Gu(e<<i|e>>>32-i,n)}function Oa(t,e,n,r,i,a,o){return Z1(e&n|~e&r,t,e,i,a,o)}function wa(t,e,n,r,i,a,o){return Z1(e&r|n&~r,t,e,i,a,o)}function La(t,e,n,r,i,a,o){return Z1(e^n^r,t,e,i,a,o)}function Pa(t,e,n,r,i,a,o){return Z1(n^(e|~r),t,e,i,a,o)}function xO(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)NC(r,hH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(NC(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,NC(r,i),r}function hH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var fT="0123456789abcdef".split("");function fH(t){for(var e="",n=0;n<4;n++)e+=fT[t>>8*n+4&15]+fT[t>>8*n&15];return e}function mH(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function A2(t){return xO(t).map(mH).join("")}var gH=(function(t){for(var e=0;e<t.length;e++)t[e]=fH(t[e]);return t.join("")})(xO("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gu(t,e){if(gH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function k2(t,e){var n,r,i,a;if(t!==n){for(var o=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),c=[],u=0;u<256;u++)c[u]=u;var h=0;for(u=0;u<256;u++){var m=c[u];h=(h+m+o.charCodeAt(u))%256,c[u]=c[h],c[h]=m}n=t,r=c}else c=r;var _=e.length,p=0,g=0,C="";for(u=0;u<_;u++)g=(g+(m=c[p=(p+1)%256]))%256,c[p]=c[g],c[g]=m,o=c[(c[p]+c[g])%256],C+=String.fromCharCode(e.charCodeAt(u)^o);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var mT={print:4,modify:8,copy:16,"annot-forms":32};function Sf(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(c){if(mT.perm!==void 0)throw new Error("Invalid permission: "+c);i+=mT[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=A2(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=k2(this.encryptionKey,this.padding)}function vf(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function gT(t){if(Nr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[n]){var o=e[n][a];try{o[0].apply(t,r)}catch(c){Cn.console&&Lr.error("jsPDF PubSub Error",c.message,c)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function y1(t){if(!(this instanceof y1))return new y1(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function pO(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Mh(t,e,n,r,i){if(!(this instanceof Mh))return new Mh(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,pO.call(this,r,i)}function jf(t,e,n,r,i){if(!(this instanceof jf))return new jf(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,pO.call(this,r,i)}function nn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],c=1,u=16,h="S",m=null;Nr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,a=t.compress||t.compressPdf||a,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),h=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var _=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=gT;var C="1.3",y=g.__private__.getPdfVersion=function(){return C};g.__private__.setPdfVersion=function(W){C=W};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return N};var v=g.__private__.getPageFormat=function(W){return N[W]};i=i||"a4";var P="compat",w="advanced",M=P;function k(){this.saveGraphicsState(),Q(new Le(lt,0,0,-lt,0,Ro()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),h="n",M=w}function B(){this.restoreGraphicsState(),h="S",M=P}var G=g.__private__.combineFontStyleAndFontWeight=function(W,ve){if(W=="bold"&&ve=="normal"||W=="bold"&&ve==400||W=="normal"&&ve=="italic"||W=="bold"&&ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ve&&(W=ve==400||ve==="normal"?W==="italic"?"italic":"normal":ve!=700&&ve!=="bold"||W!=="normal"?(ve==700?"bold":ve)+""+W:"bold"),W};g.advancedAPI=function(W){var ve=M===P;return ve&&k.call(this),typeof W!="function"||(W(this),ve&&B.call(this)),this},g.compatAPI=function(W){var ve=M===w;return ve&&B.call(this),typeof W!="function"||(W(this),ve&&k.call(this)),this},g.isAdvancedAPI=function(){return M===w};var U,I=function(W){if(M!==w)throw new Error(W+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=g.roundToPrecision=g.__private__.roundToPrecision=function(W,ve){var et=e||ve;if(isNaN(W)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return W.toFixed(et).replace(/0+$/,"")};U=g.hpf=g.__private__.hpf=typeof u=="number"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return E(W,u)}:u==="smart"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return E(W,W>-1&&W<1?16:5)}:function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return E(W,16)};var A=g.f2=g.__private__.f2=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f2");return E(W,2)},Y=g.__private__.f3=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f3");return E(W,3)},se=g.scale=g.__private__.scale=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.scale");return M===P?W*lt:M===w?W:void 0},X=function(W){return se((function(ve){return M===P?Ro()-ve:M===w?ve:void 0})(W))};g.__private__.setPrecision=g.setPrecision=function(W){typeof parseInt(W,10)=="number"&&(e=parseInt(W,10))};var z,$="00000000000000000000000000000000",F=g.__private__.getFileId=function(){return $},L=g.__private__.setFileId=function(W){return $=W!==void 0&&/^[a-fA-F0-9]{32}$/.test(W)?W.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Bs=new Sf(m.userPermissions,m.userPassword,m.ownerPassword,$)),$};g.setFileId=function(W){return L(W),this},g.getFileId=function(){return F()};var re=g.__private__.convertDateToPDFDate=function(W){var ve=W.getTimezoneOffset(),et=ve<0?"+":"-",Nt=Math.floor(Math.abs(ve/60)),wt=Math.abs(ve%60),rs=[et,J(Nt),"'",J(wt),"'"].join("");return["D:",W.getFullYear(),J(W.getMonth()+1),J(W.getDate()),J(W.getHours()),J(W.getMinutes()),J(W.getSeconds()),rs].join("")},fe=g.__private__.convertPDFDateToDate=function(W){var ve=parseInt(W.substr(2,4),10),et=parseInt(W.substr(6,2),10)-1,Nt=parseInt(W.substr(8,2),10),wt=parseInt(W.substr(10,2),10),rs=parseInt(W.substr(12,2),10),gs=parseInt(W.substr(14,2),10);return new Date(ve,et,Nt,wt,rs,gs,0)},T=g.__private__.setCreationDate=function(W){var ve;if(W===void 0&&(W=new Date),W instanceof Date)ve=re(W);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(W))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ve=W}return z=ve},j=g.__private__.getCreationDate=function(W){var ve=z;return W==="jsDate"&&(ve=fe(z)),ve};g.setCreationDate=function(W){return T(W),this},g.getCreationDate=function(W){return j(W)};var K,J=g.__private__.padd2=function(W){return("0"+parseInt(W)).slice(-2)},q=g.__private__.padd2Hex=function(W){return("00"+(W=W.toString())).substr(W.length)},V=0,ce=[],me=[],Ce=0,ge=[],Ge=[],te=!1,he=me;g.__private__.setCustomOutputDestination=function(W){te=!0,he=W};var de=function(W){te||(he=W)};g.__private__.resetCustomOutputDestination=function(){te=!1,he=me};var Q=g.__private__.out=function(W){return W=W.toString(),Ce+=W.length+1,he.push(W),he},ee=g.__private__.write=function(W){return Q(arguments.length===1?W.toString():Array.prototype.join.call(arguments," "))},Z=g.__private__.getArrayBuffer=function(W){for(var ve=W.length,et=new ArrayBuffer(ve),Nt=new Uint8Array(et);ve--;)Nt[ve]=W.charCodeAt(ve);return et},le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return le};var xe=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(W){return xe=M===w?W/lt:W,this};var be,ne=g.__private__.getFontSize=g.getFontSize=function(){return M===P?xe:xe*lt},ie=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(W){return ie=W,this},g.__private__.getR2L=g.getR2L=function(){return ie};var pe,ze=g.__private__.setZoomMode=function(W){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(W))be=W;else if(isNaN(W)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(W)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+W+'" is not recognized.');be=W}else be=parseInt(W,10)};g.__private__.getZoomMode=function(){return be};var xt,st=g.__private__.setPageMode=function(W){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(W)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+W+'" is not recognized.');pe=W};g.__private__.getPageMode=function(){return pe};var St=g.__private__.setLayoutMode=function(W){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(W)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+W+'" is not recognized.');xt=W};g.__private__.getLayoutMode=function(){return xt},g.__private__.setDisplayMode=g.setDisplayMode=function(W,ve,et){return ze(W),St(ve),st(et),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(W){if(Object.keys(ot).indexOf(W)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[W]},g.__private__.getDocumentProperties=function(){return ot},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(W){for(var ve in ot)ot.hasOwnProperty(ve)&&W[ve]&&(ot[ve]=W[ve]);return this},g.__private__.setDocumentProperty=function(W,ve){if(Object.keys(ot).indexOf(W)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[W]=ve};var Be,lt,pt,mt,Ye,at={},Fe={},tt=[],ct={},Mt={},dt={},Je={},De=null,$e=0,Ne=[],ye=new gT(g),Ue=t.hotfixes||[],ue={},Oe={},Ze=[],Le=function W(ve,et,Nt,wt,rs,gs){if(!(this instanceof W))return new W(ve,et,Nt,wt,rs,gs);isNaN(ve)&&(ve=1),isNaN(et)&&(et=0),isNaN(Nt)&&(Nt=0),isNaN(wt)&&(wt=1),isNaN(rs)&&(rs=0),isNaN(gs)&&(gs=0),this._matrix=[ve,et,Nt,wt,rs,gs]};Object.defineProperty(Le.prototype,"sx",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(Le.prototype,"shy",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(Le.prototype,"shx",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(Le.prototype,"sy",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(Le.prototype,"tx",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(Le.prototype,"ty",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(Le.prototype,"a",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(Le.prototype,"b",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(Le.prototype,"c",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(Le.prototype,"d",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(Le.prototype,"e",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(Le.prototype,"f",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(Le.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Le.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Le.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Le.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Le.prototype.join=function(W){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(W)},Le.prototype.multiply=function(W){var ve=W.sx*this.sx+W.shy*this.shx,et=W.sx*this.shy+W.shy*this.sy,Nt=W.shx*this.sx+W.sy*this.shx,wt=W.shx*this.shy+W.sy*this.sy,rs=W.tx*this.sx+W.ty*this.shx+this.tx,gs=W.tx*this.shy+W.ty*this.sy+this.ty;return new Le(ve,et,Nt,wt,rs,gs)},Le.prototype.decompose=function(){var W=this.sx,ve=this.shy,et=this.shx,Nt=this.sy,wt=this.tx,rs=this.ty,gs=Math.sqrt(W*W+ve*ve),zs=(W/=gs)*et+(ve/=gs)*Nt;et-=W*zs,Nt-=ve*zs;var en=Math.sqrt(et*et+Nt*Nt);return zs/=en,W*(Nt/=en)<ve*(et/=en)&&(W=-W,ve=-ve,zs=-zs,gs=-gs),{scale:new Le(gs,0,0,en,0,0),translate:new Le(1,0,0,1,wt,rs),rotate:new Le(W,ve,-ve,W,0,0),skew:new Le(1,0,zs,1,0,0)}},Le.prototype.toString=function(W){return this.join(" ")},Le.prototype.inversed=function(){var W=this.sx,ve=this.shy,et=this.shx,Nt=this.sy,wt=this.tx,rs=this.ty,gs=1/(W*Nt-ve*et),zs=Nt*gs,en=-ve*gs,gn=-et*gs,Nn=W*gs;return new Le(zs,en,gn,Nn,-zs*wt-gn*rs,-en*wt-Nn*rs)},Le.prototype.applyToPoint=function(W){var ve=W.x*this.sx+W.y*this.shx+this.tx,et=W.x*this.shy+W.y*this.sy+this.ty;return new $n(ve,et)},Le.prototype.applyToRectangle=function(W){var ve=this.applyToPoint(W),et=this.applyToPoint(new $n(W.x+W.w,W.y+W.h));return new si(ve.x,ve.y,et.x-ve.x,et.y-ve.y)},Le.prototype.clone=function(){var W=this.sx,ve=this.shy,et=this.shx,Nt=this.sy,wt=this.tx,rs=this.ty;return new Le(W,ve,et,Nt,wt,rs)},g.Matrix=Le;var vt=g.matrixMult=function(W,ve){return ve.multiply(W)},je=new Le(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=je;var ut=function(W,ve){if(!Mt[W]){var et=(ve instanceof Mh?"Sh":"P")+(Object.keys(ct).length+1).toString(10);ve.id=et,Mt[W]=et,ct[et]=ve,ye.publish("addPattern",ve)}};g.ShadingPattern=Mh,g.TilingPattern=jf,g.addShadingPattern=function(W,ve){return I("addShadingPattern()"),ut(W,ve),this},g.beginTilingPattern=function(W){I("beginTilingPattern()"),Do(W.boundingBox[0],W.boundingBox[1],W.boundingBox[2]-W.boundingBox[0],W.boundingBox[3]-W.boundingBox[1],W.matrix)},g.endTilingPattern=function(W,ve){I("endTilingPattern()"),ve.stream=Ge[K].join(`
`),ut(W,ve),ye.publish("endTilingPattern",ve),Ze.pop().restore()};var gt,jt=g.__private__.newObject=function(){var W=Ve();return Vt(W,!0),W},Ve=g.__private__.newObjectDeferred=function(){return V++,ce[V]=function(){return Ce},V},Vt=function(W,ve){return ve=typeof ve=="boolean"&&ve,ce[W]=Ce,ve&&Q(W+" 0 obj"),W},ke=g.__private__.newAdditionalObject=function(){var W={objId:Ve(),content:""};return ge.push(W),W},ss=Ve(),ls=Ve(),ds=g.__private__.decodeColorString=function(W){var ve=W.split(" ");if(ve.length!==2||ve[1]!=="g"&&ve[1]!=="G")ve.length!==5||ve[4]!=="k"&&ve[4]!=="K"||(ve=[(1-ve[0])*(1-ve[3]),(1-ve[1])*(1-ve[3]),(1-ve[2])*(1-ve[3]),"r"]);else{var et=parseFloat(ve[0]);ve=[et,et,et,"r"]}for(var Nt="#",wt=0;wt<3;wt++)Nt+=("0"+Math.floor(255*parseFloat(ve[wt])).toString(16)).slice(-2);return Nt},vs=g.__private__.encodeColorString=function(W){var ve;typeof W=="string"&&(W={ch1:W});var et=W.ch1,Nt=W.ch2,wt=W.ch3,rs=W.ch4,gs=W.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var zs=new _O(et);if(zs.ok)et=zs.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var en=parseInt(et.substr(1),16);et=en>>16&255,Nt=en>>8&255,wt=255&en}if(Nt===void 0||rs===void 0&&et===Nt&&Nt===wt)ve=typeof et=="string"?et+" "+gs[0]:W.precision===2?A(et/255)+" "+gs[0]:Y(et/255)+" "+gs[0];else if(rs===void 0||Nr(rs)==="object"){if(rs&&!isNaN(rs.a)&&rs.a===0)return["1.","1.","1.",gs[1]].join(" ");ve=typeof et=="string"?[et,Nt,wt,gs[1]].join(" "):W.precision===2?[A(et/255),A(Nt/255),A(wt/255),gs[1]].join(" "):[Y(et/255),Y(Nt/255),Y(wt/255),gs[1]].join(" ")}else ve=typeof et=="string"?[et,Nt,wt,rs,gs[2]].join(" "):W.precision===2?[A(et),A(Nt),A(wt),A(rs),gs[2]].join(" "):[Y(et),Y(Nt),Y(wt),Y(rs),gs[2]].join(" ");return ve},Ss=g.__private__.getFilters=function(){return o},Ae=g.__private__.putStream=function(W){var ve=(W=W||{}).data||"",et=W.filters||Ss(),Nt=W.alreadyAppliedFilters||[],wt=W.addLength1||!1,rs=ve.length,gs=W.objectId,zs=function(Ci){return Ci};if(m!==null&&gs===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(zs=Bs.encryptor(gs,0));var en={};et===!0&&(et=["FlateEncode"]);var gn=W.additionalKeyValues||[],Nn=(en=nn.API.processDataByFilters!==void 0?nn.API.processDataByFilters(ve,et):{data:ve,reverseChain:[]}).reverseChain+(Array.isArray(Nt)?Nt.join(" "):Nt.toString());if(en.data.length!==0&&(gn.push({key:"Length",value:en.data.length}),wt===!0&&gn.push({key:"Length1",value:rs})),Nn.length!=0)if(Nn.split("/").length-1==1)gn.push({key:"Filter",value:Nn});else{gn.push({key:"Filter",value:"["+Nn+"]"});for(var Fn=0;Fn<gn.length;Fn+=1)if(gn[Fn].key==="DecodeParms"){for(var Gr=[],ni=0;ni<en.reverseChain.split("/").length-1;ni+=1)Gr.push("null");Gr.push(gn[Fn].value),gn[Fn].value="["+Gr.join(" ")+"]"}}Q("<<");for(var Sr=0;Sr<gn.length;Sr++)Q("/"+gn[Sr].key+" "+gn[Sr].value);Q(">>"),en.data.length!==0&&(Q("stream"),Q(zs(en.data)),Q("endstream"))},ft=g.__private__.putPage=function(W){var ve=W.number,et=W.data,Nt=W.objId,wt=W.contentsObjId;Vt(Nt,!0),Q("<</Type /Page"),Q("/Parent "+W.rootDictionaryObjId+" 0 R"),Q("/Resources "+W.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(U(W.mediaBox.bottomLeftX))+" "+parseFloat(U(W.mediaBox.bottomLeftY))+" "+U(W.mediaBox.topRightX)+" "+U(W.mediaBox.topRightY)+"]"),W.cropBox!==null&&Q("/CropBox ["+U(W.cropBox.bottomLeftX)+" "+U(W.cropBox.bottomLeftY)+" "+U(W.cropBox.topRightX)+" "+U(W.cropBox.topRightY)+"]"),W.bleedBox!==null&&Q("/BleedBox ["+U(W.bleedBox.bottomLeftX)+" "+U(W.bleedBox.bottomLeftY)+" "+U(W.bleedBox.topRightX)+" "+U(W.bleedBox.topRightY)+"]"),W.trimBox!==null&&Q("/TrimBox ["+U(W.trimBox.bottomLeftX)+" "+U(W.trimBox.bottomLeftY)+" "+U(W.trimBox.topRightX)+" "+U(W.trimBox.topRightY)+"]"),W.artBox!==null&&Q("/ArtBox ["+U(W.artBox.bottomLeftX)+" "+U(W.artBox.bottomLeftY)+" "+U(W.artBox.topRightX)+" "+U(W.artBox.topRightY)+"]"),typeof W.userUnit=="number"&&W.userUnit!==1&&Q("/UserUnit "+W.userUnit),ye.publish("putPage",{objId:Nt,pageContext:Ne[ve],pageNumber:ve,page:et}),Q("/Contents "+wt+" 0 R"),Q(">>"),Q("endobj");var rs=et.join(`
`);return M===w&&(rs+=`
Q`),Vt(wt,!0),Ae({data:rs,filters:Ss(),objectId:wt}),Q("endobj"),Nt},rt=g.__private__.putPages=function(){var W,ve,et=[];for(W=1;W<=$e;W++)Ne[W].objId=Ve(),Ne[W].contentsObjId=Ve();for(W=1;W<=$e;W++)et.push(ft({number:W,data:Ge[W],objId:Ne[W].objId,contentsObjId:Ne[W].contentsObjId,mediaBox:Ne[W].mediaBox,cropBox:Ne[W].cropBox,bleedBox:Ne[W].bleedBox,trimBox:Ne[W].trimBox,artBox:Ne[W].artBox,userUnit:Ne[W].userUnit,rootDictionaryObjId:ss,resourceDictionaryObjId:ls}));Vt(ss,!0),Q("<</Type /Pages");var Nt="/Kids [";for(ve=0;ve<$e;ve++)Nt+=et[ve]+" 0 R ";Q(Nt+"]"),Q("/Count "+$e),Q(">>"),Q("endobj"),ye.publish("postPutPages")},Wt=function(W){ye.publish("putFont",{font:W,out:Q,newObject:jt,putStream:Ae}),W.isAlreadyPutted!==!0&&(W.objectNumber=jt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+vf(W.postScriptName)),Q("/Subtype /Type1"),typeof W.encoding=="string"&&Q("/Encoding /"+W.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},_t=function(W){W.objectNumber=jt();var ve=[];ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Form"}),ve.push({key:"BBox",value:"["+[U(W.x),U(W.y),U(W.x+W.width),U(W.y+W.height)].join(" ")+"]"}),ve.push({key:"Matrix",value:"["+W.matrix.toString()+"]"});var et=W.pages[1].join(`
`);Ae({data:et,additionalKeyValues:ve,objectId:W.objectNumber}),Q("endobj")},qt=function(W,ve){ve||(ve=21);var et=jt(),Nt=(function(gs,zs){var en,gn=[],Nn=1/(zs-1);for(en=0;en<1;en+=Nn)gn.push(en);if(gn.push(1),gs[0].offset!=0){var Fn={offset:0,color:gs[0].color};gs.unshift(Fn)}if(gs[gs.length-1].offset!=1){var Gr={offset:1,color:gs[gs.length-1].color};gs.push(Gr)}for(var ni="",Sr=0,Ci=0;Ci<gn.length;Ci++){for(en=gn[Ci];en>gs[Sr+1].offset;)Sr++;var di=gs[Sr].offset,Wi=(en-di)/(gs[Sr+1].offset-di),To=gs[Sr].color,Ol=gs[Sr+1].color;ni+=q(Math.round((1-Wi)*To[0]+Wi*Ol[0]).toString(16))+q(Math.round((1-Wi)*To[1]+Wi*Ol[1]).toString(16))+q(Math.round((1-Wi)*To[2]+Wi*Ol[2]).toString(16))}return ni.trim()})(W.colors,ve),wt=[];wt.push({key:"FunctionType",value:"0"}),wt.push({key:"Domain",value:"[0.0 1.0]"}),wt.push({key:"Size",value:"["+ve+"]"}),wt.push({key:"BitsPerSample",value:"8"}),wt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae({data:Nt,additionalKeyValues:wt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),Q("endobj"),W.objectNumber=jt(),Q("<< /ShadingType "+W.type),Q("/ColorSpace /DeviceRGB");var rs="/Coords ["+U(parseFloat(W.coords[0]))+" "+U(parseFloat(W.coords[1]))+" ";W.type===2?rs+=U(parseFloat(W.coords[2]))+" "+U(parseFloat(W.coords[3])):rs+=U(parseFloat(W.coords[2]))+" "+U(parseFloat(W.coords[3]))+" "+U(parseFloat(W.coords[4]))+" "+U(parseFloat(W.coords[5])),Q(rs+="]"),W.matrix&&Q("/Matrix ["+W.matrix.toString()+"]"),Q("/Function "+et+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Ot=function(W,ve){var et=Ve(),Nt=jt();ve.push({resourcesOid:et,objectOid:Nt}),W.objectNumber=Nt;var wt=[];wt.push({key:"Type",value:"/Pattern"}),wt.push({key:"PatternType",value:"1"}),wt.push({key:"PaintType",value:"1"}),wt.push({key:"TilingType",value:"1"}),wt.push({key:"BBox",value:"["+W.boundingBox.map(U).join(" ")+"]"}),wt.push({key:"XStep",value:U(W.xStep)}),wt.push({key:"YStep",value:U(W.yStep)}),wt.push({key:"Resources",value:et+" 0 R"}),W.matrix&&wt.push({key:"Matrix",value:"["+W.matrix.toString()+"]"}),Ae({data:W.stream,additionalKeyValues:wt,objectId:W.objectNumber}),Q("endobj")},_e=function(W){for(var ve in W.objectNumber=jt(),Q("<<"),W)switch(ve){case"opacity":Q("/ca "+A(W[ve]));break;case"stroke-opacity":Q("/CA "+A(W[ve]))}Q(">>"),Q("endobj")},Se=function(W){Vt(W.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ve in Q("/Font <<"),at)at.hasOwnProperty(ve)&&(_===!1||_===!0&&p.hasOwnProperty(ve))&&Q("/"+ve+" "+at[ve].objectNumber+" 0 R");Q(">>")})(),(function(){if(Object.keys(ct).length>0){for(var ve in Q("/Shading <<"),ct)ct.hasOwnProperty(ve)&&ct[ve]instanceof Mh&&ct[ve].objectNumber>=0&&Q("/"+ve+" "+ct[ve].objectNumber+" 0 R");ye.publish("putShadingPatternDict"),Q(">>")}})(),(function(ve){if(Object.keys(ct).length>0){for(var et in Q("/Pattern <<"),ct)ct.hasOwnProperty(et)&&ct[et]instanceof g.TilingPattern&&ct[et].objectNumber>=0&&ct[et].objectNumber<ve&&Q("/"+et+" "+ct[et].objectNumber+" 0 R");ye.publish("putTilingPatternDict"),Q(">>")}})(W.objectOid),(function(){if(Object.keys(dt).length>0){var ve;for(ve in Q("/ExtGState <<"),dt)dt.hasOwnProperty(ve)&&dt[ve].objectNumber>=0&&Q("/"+ve+" "+dt[ve].objectNumber+" 0 R");ye.publish("putGStateDict"),Q(">>")}})(),(function(){for(var ve in Q("/XObject <<"),ue)ue.hasOwnProperty(ve)&&ue[ve].objectNumber>=0&&Q("/"+ve+" "+ue[ve].objectNumber+" 0 R");ye.publish("putXobjectDict"),Q(">>")})(),Q(">>"),Q("endobj")},Ie=function(W){Fe[W.fontName]=Fe[W.fontName]||{},Fe[W.fontName][W.fontStyle]=W.id},Te=function(W,ve,et,Nt,wt){var rs={id:"F"+(Object.keys(at).length+1).toString(10),postScriptName:W,fontName:ve,fontStyle:et,encoding:Nt,isStandardFont:wt||!1,metadata:{}};return ye.publish("addFont",{font:rs,instance:this}),at[rs.id]=rs,Ie(rs),rs.id},nt=g.__private__.pdfEscape=g.pdfEscape=function(W,ve){return(function(et,Nt){var wt,rs,gs,zs,en,gn,Nn,Fn,Gr;if(gs=(Nt=Nt||{}).sourceEncoding||"Unicode",en=Nt.outputEncoding,(Nt.autoencode||en)&&at[Be].metadata&&at[Be].metadata[gs]&&at[Be].metadata[gs].encoding&&(zs=at[Be].metadata[gs].encoding,!en&&at[Be].encoding&&(en=at[Be].encoding),!en&&zs.codePages&&(en=zs.codePages[0]),typeof en=="string"&&(en=zs[en]),en)){for(Nn=!1,gn=[],wt=0,rs=et.length;wt<rs;wt++)(Fn=en[et.charCodeAt(wt)])?gn.push(String.fromCharCode(Fn)):gn.push(et[wt]),gn[wt].charCodeAt(0)>>8&&(Nn=!0);et=gn.join("")}for(wt=et.length;Nn===void 0&&wt!==0;)et.charCodeAt(wt-1)>>8&&(Nn=!0),wt--;if(!Nn)return et;for(gn=Nt.noBOM?[]:[254,255],wt=0,rs=et.length;wt<rs;wt++){if((Gr=(Fn=et.charCodeAt(wt))>>8)>>8)throw new Error("Character at position "+wt+" of string '"+et+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gn.push(Gr),gn.push(Fn-(Gr<<8))}return String.fromCharCode.apply(void 0,gn)})(W,ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Re=g.__private__.beginPage=function(W){Ge[++$e]=[],Ne[$e]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(W[0]),topRightY:Number(W[1])}},Et($e),de(Ge[K])},Ct=function(W,ve){var et,Nt,wt;switch(n=ve||n,typeof W=="string"&&(et=v(W.toLowerCase()),Array.isArray(et)&&(Nt=et[0],wt=et[1])),Array.isArray(W)&&(Nt=W[0]*lt,wt=W[1]*lt),isNaN(Nt)&&(Nt=i[0],wt=i[1]),(Nt>14400||wt>14400)&&(Lr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Nt=Math.min(14400,Nt),wt=Math.min(14400,wt)),i=[Nt,wt],n.substr(0,1)){case"l":wt>Nt&&(i=[wt,Nt]);break;case"p":Nt>wt&&(i=[wt,Nt])}Re(i),xs($s),Q(Vr),tl!==0&&Q(tl+" J"),Ds!==0&&Q(Ds+" j"),ye.publish("addPage",{pageNumber:$e})},Ke=function(W){W>0&&W<=$e&&(Ge.splice(W,1),Ne.splice(W,1),$e--,K>$e&&(K=$e),this.setPage(K))},Et=function(W){W>0&&W<=$e&&(K=W)},Rt=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Ge.length-1},He=function(W,ve,et){var Nt,wt=void 0;return et=et||{},W=W!==void 0?W:at[Be].fontName,ve=ve!==void 0?ve:at[Be].fontStyle,Nt=W.toLowerCase(),Fe[Nt]!==void 0&&Fe[Nt][ve]!==void 0?wt=Fe[Nt][ve]:Fe[W]!==void 0&&Fe[W][ve]!==void 0?wt=Fe[W][ve]:et.disableWarning===!1&&Lr.warn("Unable to look up font label for font '"+W+"', '"+ve+"'. Refer to getFontList() for available fonts."),wt||et.noFallback||(wt=Fe.times[ve])==null&&(wt=Fe.times.normal),wt},ht=g.__private__.putInfo=function(){var W=jt(),ve=function(Nt){return Nt};for(var et in m!==null&&(ve=Bs.encryptor(W,0)),Q("<<"),Q("/Producer ("+nt(ve("jsPDF "+nn.version))+")"),ot)ot.hasOwnProperty(et)&&ot[et]&&Q("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+nt(ve(ot[et]))+")");Q("/CreationDate ("+nt(ve(z))+")"),Q(">>"),Q("endobj")},Pt=g.__private__.putCatalog=function(W){var ve=(W=W||{}).rootDictionaryObjId||ss;switch(jt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+ve+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+be;et.substr(et.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+A(be)+"]")}switch(xt||(xt="continuous"),xt){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}pe&&Q("/PageMode /"+pe),ye.publish("putCatalog"),Q(">>"),Q("endobj")},Bt=g.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(V+1)),Q("/Root "+V+" 0 R"),Q("/Info "+(V-1)+" 0 R"),m!==null&&Q("/Encrypt "+Bs.oid+" 0 R"),Q("/ID [ <"+$+"> <"+$+"> ]"),Q(">>")},Yt=g.__private__.putHeader=function(){Q("%PDF-"+C),Q("%")},Xt=g.__private__.putXRef=function(){var W="0000000000";Q("xref"),Q("0 "+(V+1)),Q("0000000000 65535 f ");for(var ve=1;ve<=V;ve++)typeof ce[ve]=="function"?Q((W+ce[ve]()).slice(-10)+" 00000 n "):ce[ve]!==void 0?Q((W+ce[ve]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},ts=g.__private__.buildDocument=function(){var W;V=0,Ce=0,me=[],ce=[],ge=[],ss=Ve(),ls=Ve(),de(me),ye.publish("buildDocument"),Yt(),rt(),(function(){ye.publish("putAdditionalObjects");for(var et=0;et<ge.length;et++){var Nt=ge[et];Vt(Nt.objId,!0),Q(Nt.content),Q("endobj")}ye.publish("postPutAdditionalObjects")})(),W=[],(function(){for(var et in at)at.hasOwnProperty(et)&&(_===!1||_===!0&&p.hasOwnProperty(et))&&Wt(at[et])})(),(function(){var et;for(et in dt)dt.hasOwnProperty(et)&&_e(dt[et])})(),(function(){for(var et in ue)ue.hasOwnProperty(et)&&_t(ue[et])})(),(function(et){var Nt;for(Nt in ct)ct.hasOwnProperty(Nt)&&(ct[Nt]instanceof Mh?qt(ct[Nt]):ct[Nt]instanceof jf&&Ot(ct[Nt],et))})(W),ye.publish("putResources"),W.forEach(Se),Se({resourcesOid:ls,objectOid:Number.MAX_SAFE_INTEGER}),ye.publish("postPutResources"),m!==null&&(Bs.oid=jt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Bs.v),Q("/R "+Bs.r),Q("/U <"+Bs.toHexString(Bs.U)+">"),Q("/O <"+Bs.toHexString(Bs.O)+">"),Q("/P "+Bs.P),Q(">>"),Q("endobj")),ht(),Pt();var ve=Ce;return Xt(),Bt(),Q("startxref"),Q(""+ve),Q("%%EOF"),de(Ge[K]),me.join(`
`)},Ut=g.__private__.getBlob=function(W){return new Blob([Z(W)],{type:"application/pdf"})},Ms=g.output=g.__private__.output=(gt=function(W,ve){switch(typeof(ve=ve||{})=="string"?ve={filename:ve}:ve.filename=ve.filename||"generated.pdf",W){case void 0:return ts();case"save":g.save(ve.filename);break;case"arraybuffer":return Z(ts());case"blob":return Ut(ts());case"bloburi":case"bloburl":if(Cn.URL!==void 0&&typeof Cn.URL.createObjectURL=="function")return Cn.URL&&Cn.URL.createObjectURL(Ut(ts()))||void 0;Lr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",Nt=ts();try{et=hT(Nt)}catch{et=hT(unescape(encodeURIComponent(Nt)))}return"data:application/pdf;filename="+ve.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var wt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",rs=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ve.pdfObjectUrl&&(wt=ve.pdfObjectUrl,rs="");var gs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+wt+'"'+rs+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ve)+");<\/script></body></html>",zs=Cn.open();return zs!==null&&zs.document.write(gs),zs}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var en='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ve.filename+'" width="500px" height="400px" /></body></html>',gn=Cn.open();if(gn!==null){gn.document.write(en);var Nn=this;gn.document.documentElement.querySelector("#pdfViewer").onload=function(){gn.document.title=ve.filename,gn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nn.output("bloburl"))}}return gn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ve)+'"></iframe></body></html>',Gr=Cn.open();if(Gr!==null&&(Gr.document.write(Fn),Gr.document.title=ve.filename),Gr||typeof safari>"u")return Gr;break;case"datauri":case"dataurl":return Cn.document.location.href=this.output("datauristring",ve);default:return null}},gt.foo=function(){try{return gt.apply(this,arguments)}catch(et){var W=et.stack||"";~W.indexOf(" at ")&&(W=W.split(" at ")[1]);var ve="Error in function "+W.split(`
`)[0].split("<")[0]+": "+et.message;if(!Cn.console)throw new Error(ve);Cn.console.error(ve,et),Cn.alert&&alert(ve)}},gt.foo.bar=gt,gt.foo),Cs=function(W){return Array.isArray(Ue)===!0&&Ue.indexOf(W)>-1};switch(r){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=Cs("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);lt=r}var Bs=null;T(),L();var _s=g.__private__.getPageInfo=g.getPageInfo=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ne[W].objId,pageNumber:W,pageContext:Ne[W]}},Es=g.__private__.getPageInfoByObjId=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ve in Ne)if(Ne[ve].objId===W)break;return _s(ve)},js=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Ne[K].objId,pageNumber:K,pageContext:Ne[K]}};g.addPage=function(){return Ct.apply(this,arguments),this},g.setPage=function(){return Et.apply(this,arguments),de.call(this,Ge[K]),this},g.insertPage=function(W){return this.addPage(),this.movePage(K,W),this},g.movePage=function(W,ve){var et,Nt;if(W>ve){et=Ge[W],Nt=Ne[W];for(var wt=W;wt>ve;wt--)Ge[wt]=Ge[wt-1],Ne[wt]=Ne[wt-1];Ge[ve]=et,Ne[ve]=Nt,this.setPage(ve)}else if(W<ve){et=Ge[W],Nt=Ne[W];for(var rs=W;rs<ve;rs++)Ge[rs]=Ge[rs+1],Ne[rs]=Ne[rs+1];Ge[ve]=et,Ne[ve]=Nt,this.setPage(ve)}return this},g.deletePage=function(){return Ke.apply(this,arguments),this},g.__private__.text=g.text=function(W,ve,et,Nt,wt){var rs,gs,zs,en,gn,Nn,Fn,Gr,ni,Sr=(Nt=Nt||{}).scope||this;if(typeof W=="number"&&typeof ve=="number"&&(typeof et=="string"||Array.isArray(et))){var Ci=et;et=ve,ve=W,W=Ci}if(arguments[3]instanceof Le==0?(zs=arguments[4],en=arguments[5],Nr(Fn=arguments[3])==="object"&&Fn!==null||(typeof zs=="string"&&(en=zs,zs=null),typeof Fn=="string"&&(en=Fn,Fn=null),typeof Fn=="number"&&(zs=Fn,Fn=null),Nt={flags:Fn,angle:zs,align:en})):(I("The transform parameter of text() with a Matrix value"),ni=wt),isNaN(ve)||isNaN(et)||W==null)throw new Error("Invalid arguments passed to jsPDF.text");if(W.length===0)return Sr;var di,Wi="",To=typeof Nt.lineHeightFactor=="number"?Nt.lineHeightFactor:Ws,Ol=Sr.internal.scaleFactor;function Mo(Jn){return Jn=Jn.split("	").join(Array(Nt.TabLen||9).join(" ")),nt(Jn,Fn)}function th(Jn){for(var Kn,vr=Jn.concat(),ii=[],Xl=vr.length;Xl--;)typeof(Kn=vr.shift())=="string"?ii.push(Kn):Array.isArray(Jn)&&(Kn.length===1||Kn[1]===void 0&&Kn[2]===void 0)?ii.push(Kn[0]):ii.push([Kn[0],Kn[1],Kn[2]]);return ii}function Pd(Jn,Kn){var vr;if(typeof Jn=="string")vr=Kn(Jn)[0];else if(Array.isArray(Jn)){for(var ii,Xl,Al=Jn.concat(),Kc=[],rh=Al.length;rh--;)typeof(ii=Al.shift())=="string"?Kc.push(Kn(ii)[0]):Array.isArray(ii)&&typeof ii[0]=="string"&&(Xl=Kn(ii[0],ii[1],ii[2]),Kc.push([Xl[0],Xl[1],Xl[2]]));vr=Kc}return vr}var Ql=!1,wl=!0;if(typeof W=="string")Ql=!0;else if(Array.isArray(W)){var Wc=W.concat();gs=[];for(var Io,Oi=Wc.length;Oi--;)(typeof(Io=Wc.shift())!="string"||Array.isArray(Io)&&typeof Io[0]!="string")&&(wl=!1);Ql=wl}if(Ql===!1)throw new Error('Type of text must be string or Array. "'+W+'" is not recognized.');typeof W=="string"&&(W=W.match(/[\r?\n]/)?W.split(/\r\n|\r|\n/g):[W]);var ac=xe/Sr.internal.scaleFactor,lc=ac*(To-1);switch(Nt.baseline){case"bottom":et-=lc;break;case"top":et+=ac-lc;break;case"hanging":et+=ac-2*lc;break;case"middle":et+=ac/2-lc}if((Nn=Nt.maxWidth||0)>0&&(typeof W=="string"?W=Sr.splitTextToSize(W,Nn):Object.prototype.toString.call(W)==="[object Array]"&&(W=W.reduce(function(Jn,Kn){return Jn.concat(Sr.splitTextToSize(Kn,Nn))},[]))),rs={text:W,x:ve,y:et,options:Nt,mutex:{pdfEscape:nt,activeFontKey:Be,fonts:at,activeFontSize:xe}},ye.publish("preProcessText",rs),W=rs.text,zs=(Nt=rs.options).angle,ni instanceof Le==0&&zs&&typeof zs=="number"){zs*=Math.PI/180,Nt.rotationDirection===0&&(zs=-zs),M===w&&(zs=-zs);var Ad=Math.cos(zs),Yl=Math.sin(zs);ni=new Le(Ad,Yl,-Yl,Ad,0,0)}else zs&&zs instanceof Le&&(ni=zs);M!==w||ni||(ni=je),(gn=Nt.charSpace||Ir)!==void 0&&(Wi+=U(se(gn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Gr=Nt.horizontalScale)!==void 0&&(Wi+=U(100*Gr)+` Tz
`),Nt.lang;var pa=-1,jo=Nt.renderingMode!==void 0?Nt.renderingMode:Nt.stroke,kd=Sr.internal.getCurrentPageInfo().pageContext;switch(jo){case 0:case!1:case"fill":pa=0;break;case 1:case!0:case"stroke":pa=1;break;case 2:case"fillThenStroke":pa=2;break;case 3:case"invisible":pa=3;break;case 4:case"fillAndAddForClipping":pa=4;break;case 5:case"strokeAndAddPathForClipping":pa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":pa=6;break;case 7:case"addToPathForClipping":pa=7}var sh=kd.usedRenderingMode!==void 0?kd.usedRenderingMode:-1;pa!==-1?Wi+=pa+` Tr
`:sh!==-1&&(Wi+=`0 Tr
`),pa!==-1&&(kd.usedRenderingMode=pa),en=Nt.align||"left";var Wa,Ll=xe*To,Oo=Sr.internal.pageSize.getWidth(),nh=at[Be];gn=Nt.charSpace||Ir,Nn=Nt.maxWidth||0,Fn=Object.assign({autoencode:!0,noBOM:!0},Nt.flags);var Pl=[],oc=function(Jn){return Sr.getStringUnitWidth(Jn,{font:nh,charSpace:gn,fontSize:xe,doKerning:!1})*xe/Ol};if(Object.prototype.toString.call(W)==="[object Array]"){var Ma;gs=th(W),en!=="left"&&(Wa=gs.map(oc));var ya,$l=0;if(en==="right"){ve-=Wa[0],W=[],Oi=gs.length;for(var Vl=0;Vl<Oi;Vl++)Vl===0?(ya=Mr(ve),Ma=hn(et)):(ya=se($l-Wa[Vl]),Ma=-Ll),W.push([gs[Vl],ya,Ma]),$l=Wa[Vl]}else if(en==="center"){ve-=Wa[0]/2,W=[],Oi=gs.length;for(var wo=0;wo<Oi;wo++)wo===0?(ya=Mr(ve),Ma=hn(et)):(ya=se(($l-Wa[wo])/2),Ma=-Ll),W.push([gs[wo],ya,Ma]),$l=Wa[wo]}else if(en==="left"){W=[],Oi=gs.length;for(var Ud=0;Ud<Oi;Ud++)W.push(gs[Ud])}else if(en==="justify"&&nh.encoding==="Identity-H"){W=[],Oi=gs.length,Nn=Nn!==0?Nn:Oo;for(var Bd=0,ri=0;ri<Oi;ri++)if(Ma=ri===0?hn(et):-Ll,ya=ri===0?Mr(ve):Bd,ri<Oi-1){var C0=se((Nn-Wa[ri])/(gs[ri].split(" ").length-1)),zl=gs[ri].split(" ");W.push([zl[0]+" ",ya,Ma]),Bd=0;for(var Hl=1;Hl<zl.length;Hl++){var Fi=(oc(zl[Hl-1]+" "+zl[Hl])-oc(zl[Hl]))*Ol+C0;Hl==zl.length-1?W.push([zl[Hl],Fi,0]):W.push([zl[Hl]+" ",Fi,0]),Bd-=Fi}}else W.push([gs[ri],ya,Ma]);W.push(["",Bd,0])}else{if(en!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(W=[],Oi=gs.length,Nn=Nn!==0?Nn:Oo,ri=0;ri<Oi;ri++){Ma=ri===0?hn(et):-Ll,ya=ri===0?Mr(ve):0;var Lo=gs[ri].split(" ").length-1,Gd=Lo>0?(Nn-Wa[ri])/Lo:0;ri<Oi-1?Pl.push(U(se(Gd))):Pl.push(0),W.push([gs[ri],ya,Ma])}}}(typeof Nt.R2L=="boolean"?Nt.R2L:ie)===!0&&(W=Pd(W,function(Jn,Kn,vr){return[Jn.split("").reverse().join(""),Kn,vr]})),rs={text:W,x:ve,y:et,options:Nt,mutex:{pdfEscape:nt,activeFontKey:Be,fonts:at,activeFontSize:xe}},ye.publish("postProcessText",rs),W=rs.text,di=rs.mutex.isHex||!1;var Wd=at[Be].encoding;Wd!=="WinAnsiEncoding"&&Wd!=="StandardEncoding"||(W=Pd(W,function(Jn,Kn,vr){return[Mo(Jn),Kn,vr]})),gs=th(W),W=[];for(var Po,Ao,ql,Fc=Array.isArray(gs[0])?1:0,Fa="",ko=function(Jn,Kn,vr){var ii="";return vr instanceof Le?(vr=typeof Nt.angle=="number"?vt(vr,new Le(1,0,0,1,Jn,Kn)):vt(new Le(1,0,0,1,Jn,Kn),vr),M===w&&(vr=vt(new Le(1,0,0,-1,0,0),vr)),ii=vr.join(" ")+` Tm
`):ii=U(Jn)+" "+U(Kn)+` Td
`,ii},ra=0;ra<gs.length;ra++){switch(Fa="",Fc){case 1:ql=(di?"<":"(")+gs[ra][0]+(di?">":")"),Po=parseFloat(gs[ra][1]),Ao=parseFloat(gs[ra][2]);break;case 0:ql=(di?"<":"(")+gs[ra]+(di?">":")"),Po=Mr(ve),Ao=hn(et)}Pl!==void 0&&Pl[ra]!==void 0&&(Fa=Pl[ra]+` Tw
`),ra===0?W.push(Fa+ko(Po,Ao,ni)+ql):Fc===0?W.push(Fa+ql):Fc===1&&W.push(Fa+ko(Po,Ao,ni)+ql)}W=Fc===0?W.join(` Tj
T* `):W.join(` Tj
`),W+=` Tj
`;var sl=`BT
/`;return sl+=Be+" "+xe+` Tf
`,sl+=U(xe*To)+` TL
`,sl+=kr+`
`,sl+=Wi,sl+=W,Q(sl+="ET"),p[Be]=!0,Sr};var cs=g.__private__.clip=g.clip=function(W){return Q(W==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return cs("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Q("n"),this};var fs=g.__private__.isValidStyle=function(W){var ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(W)!==-1&&(ve=!0),ve};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(W){return fs(W)&&(h=W),this};var Ys=g.__private__.getStyle=g.getStyle=function(W){var ve=h;switch(W){case"D":case"S":ve="S";break;case"F":ve="f";break;case"FD":case"DF":ve="B";break;case"f":case"f*":case"B":case"B*":ve=W}return ve},Ls=g.close=function(){return Q("h"),this};g.stroke=function(){return Q("S"),this},g.fill=function(W){return it("f",W),this},g.fillEvenOdd=function(W){return it("f*",W),this},g.fillStroke=function(W){return it("B",W),this},g.fillStrokeEvenOdd=function(W){return it("B*",W),this};var it=function(W,ve){Nr(ve)==="object"?zt(ve,W):Q(W)},Ft=function(W){W===null||M===w&&W===void 0||(W=Ys(W),Q(W))};function bs(W,ve,et,Nt,wt){var rs=new jf(ve||this.boundingBox,et||this.xStep,Nt||this.yStep,this.gState,wt||this.matrix);rs.stream=this.stream;var gs=W+"$$"+this.cloneIndex+++"$$";return ut(gs,rs),rs}var zt=function(W,ve){var et=Mt[W.key],Nt=ct[et];if(Nt instanceof Mh)Q("q"),Q(ws(ve)),Nt.gState&&g.setGState(Nt.gState),Q(W.matrix.toString()+" cm"),Q("/"+et+" sh"),Q("Q");else if(Nt instanceof jf){var wt=new Le(1,0,0,-1,0,Ro());W.matrix&&(wt=wt.multiply(W.matrix||je),et=bs.call(Nt,W.key,W.boundingBox,W.xStep,W.yStep,wt).id),Q("q"),Q("/Pattern cs"),Q("/"+et+" scn"),Nt.gState&&g.setGState(Nt.gState),Q(ve),Q("Q")}},ws=function(W){switch(W){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},es=g.moveTo=function(W,ve){return Q(U(se(W))+" "+U(X(ve))+" m"),this},Os=g.lineTo=function(W,ve){return Q(U(se(W))+" "+U(X(ve))+" l"),this},As=g.curveTo=function(W,ve,et,Nt,wt,rs){return Q([U(se(W)),U(X(ve)),U(se(et)),U(X(Nt)),U(se(wt)),U(X(rs)),"c"].join(" ")),this};g.__private__.line=g.line=function(W,ve,et,Nt,wt){if(isNaN(W)||isNaN(ve)||isNaN(et)||isNaN(Nt)||!fs(wt))throw new Error("Invalid arguments passed to jsPDF.line");return M===P?this.lines([[et-W,Nt-ve]],W,ve,[1,1],wt||"S"):this.lines([[et-W,Nt-ve]],W,ve,[1,1]).stroke()},g.__private__.lines=g.lines=function(W,ve,et,Nt,wt,rs){var gs,zs,en,gn,Nn,Fn,Gr,ni,Sr,Ci,di,Wi;if(typeof W=="number"&&(Wi=et,et=ve,ve=W,W=Wi),Nt=Nt||[1,1],rs=rs||!1,isNaN(ve)||isNaN(et)||!Array.isArray(W)||!Array.isArray(Nt)||!fs(wt)||typeof rs!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(es(ve,et),gs=Nt[0],zs=Nt[1],gn=W.length,Ci=ve,di=et,en=0;en<gn;en++)(Nn=W[en]).length===2?(Ci=Nn[0]*gs+Ci,di=Nn[1]*zs+di,Os(Ci,di)):(Fn=Nn[0]*gs+Ci,Gr=Nn[1]*zs+di,ni=Nn[2]*gs+Ci,Sr=Nn[3]*zs+di,Ci=Nn[4]*gs+Ci,di=Nn[5]*zs+di,As(Fn,Gr,ni,Sr,Ci,di));return rs&&Ls(),Ft(wt),this},g.path=function(W){for(var ve=0;ve<W.length;ve++){var et=W[ve],Nt=et.c;switch(et.op){case"m":es(Nt[0],Nt[1]);break;case"l":Os(Nt[0],Nt[1]);break;case"c":As.apply(this,Nt);break;case"h":Ls()}}return this},g.__private__.rect=g.rect=function(W,ve,et,Nt,wt){if(isNaN(W)||isNaN(ve)||isNaN(et)||isNaN(Nt)||!fs(wt))throw new Error("Invalid arguments passed to jsPDF.rect");return M===P&&(Nt=-Nt),Q([U(se(W)),U(X(ve)),U(se(et)),U(se(Nt)),"re"].join(" ")),Ft(wt),this},g.__private__.triangle=g.triangle=function(W,ve,et,Nt,wt,rs,gs){if(isNaN(W)||isNaN(ve)||isNaN(et)||isNaN(Nt)||isNaN(wt)||isNaN(rs)||!fs(gs))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-W,Nt-ve],[wt-et,rs-Nt],[W-wt,ve-rs]],W,ve,[1,1],gs,!0),this},g.__private__.roundedRect=g.roundedRect=function(W,ve,et,Nt,wt,rs,gs){if(isNaN(W)||isNaN(ve)||isNaN(et)||isNaN(Nt)||isNaN(wt)||isNaN(rs)||!fs(gs))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zs=4/3*(Math.SQRT2-1);return wt=Math.min(wt,.5*et),rs=Math.min(rs,.5*Nt),this.lines([[et-2*wt,0],[wt*zs,0,wt,rs-rs*zs,wt,rs],[0,Nt-2*rs],[0,rs*zs,-wt*zs,rs,-wt,rs],[2*wt-et,0],[-wt*zs,0,-wt,-rs*zs,-wt,-rs],[0,2*rs-Nt],[0,-rs*zs,wt*zs,-rs,wt,-rs]],W+wt,ve,[1,1],gs,!0),this},g.__private__.ellipse=g.ellipse=function(W,ve,et,Nt,wt){if(isNaN(W)||isNaN(ve)||isNaN(et)||isNaN(Nt)||!fs(wt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var rs=4/3*(Math.SQRT2-1)*et,gs=4/3*(Math.SQRT2-1)*Nt;return es(W+et,ve),As(W+et,ve-gs,W+rs,ve-Nt,W,ve-Nt),As(W-rs,ve-Nt,W-et,ve-gs,W-et,ve),As(W-et,ve+gs,W-rs,ve+Nt,W,ve+Nt),As(W+rs,ve+Nt,W+et,ve+gs,W+et,ve),Ft(wt),this},g.__private__.circle=g.circle=function(W,ve,et,Nt){if(isNaN(W)||isNaN(ve)||isNaN(et)||!fs(Nt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(W,ve,et,et,Nt)},g.setFont=function(W,ve,et){return et&&(ve=G(ve,et)),Be=He(W,ve,{disableWarning:!1}),this};var ms=g.__private__.getFont=g.getFont=function(){return at[He.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var W,ve,et={};for(W in Fe)if(Fe.hasOwnProperty(W))for(ve in et[W]=[],Fe[W])Fe[W].hasOwnProperty(ve)&&et[W].push(ve);return et},g.addFont=function(W,ve,et,Nt,wt){var rs=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&rs.indexOf(arguments[3])!==-1?wt=arguments[3]:arguments[3]&&rs.indexOf(arguments[3])==-1&&(et=G(et,Nt)),Te.call(this,W,ve,et,wt=wt||"Identity-H")};var Ws,$s=t.lineWidth||.200025,Is=g.__private__.getLineWidth=g.getLineWidth=function(){return $s},xs=g.__private__.setLineWidth=g.setLineWidth=function(W){return $s=W,Q(U(se(W))+" w"),this};g.__private__.setLineDash=nn.API.setLineDash=nn.API.setLineDashPattern=function(W,ve){if(W=W||[],ve=ve||0,isNaN(ve)||!Array.isArray(W))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return W=W.map(function(et){return U(se(et))}).join(" "),ve=U(se(ve)),Q("["+W+"] "+ve+" d"),this};var Br=g.__private__.getLineHeight=g.getLineHeight=function(){return xe*Ws};g.__private__.getLineHeight=g.getLineHeight=function(){return xe*Ws};var Ar=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(W){return typeof(W=W||1.15)=="number"&&(Ws=W),this},ti=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Ws};Ar(t.lineHeight);var Mr=g.__private__.getHorizontalCoordinate=function(W){return se(W)},hn=g.__private__.getVerticalCoordinate=function(W){return M===w?W:Ne[K].mediaBox.topRightY-Ne[K].mediaBox.bottomLeftY-se(W)},fr=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(W){return U(Mr(W))},ci=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(W){return U(hn(W))},Vr=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ds(Vr)},g.__private__.setStrokeColor=g.setDrawColor=function(W,ve,et,Nt){return Vr=vs({ch1:W,ch2:ve,ch3:et,ch4:Nt,pdfColorType:"draw",precision:2}),Q(Vr),this};var sa=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ds(sa)},g.__private__.setFillColor=g.setFillColor=function(W,ve,et,Nt){return sa=vs({ch1:W,ch2:ve,ch3:et,ch4:Nt,pdfColorType:"fill",precision:2}),Q(sa),this};var kr=t.textColor||"0 g",na=g.__private__.getTextColor=g.getTextColor=function(){return ds(kr)};g.__private__.setTextColor=g.setTextColor=function(W,ve,et,Nt){return kr=vs({ch1:W,ch2:ve,ch3:et,ch4:Nt,pdfColorType:"text",precision:3}),this};var Ir=t.charSpace,Ga=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ir||0)};g.__private__.setCharSpace=g.setCharSpace=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ir=W,this};var tl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(W){var ve=g.CapJoinStyles[W];if(ve===void 0)throw new Error("Line cap style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tl=ve,Q(ve+" J"),this};var Ds=0;g.__private__.setLineJoin=g.setLineJoin=function(W){var ve=g.CapJoinStyles[W];if(ve===void 0)throw new Error("Line join style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ds=ve,Q(ve+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(W){if(W=W||0,isNaN(W))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(U(se(W))+" M"),this},g.GState=y1,g.setGState=function(W){(W=typeof W=="string"?dt[Je[W]]:Un(null,W)).equals(De)||(Q("/"+W.id+" gs"),De=W)};var Un=function(W,ve){if(!W||!Je[W]){var et=!1;for(var Nt in dt)if(dt.hasOwnProperty(Nt)&&dt[Nt].equals(ve)){et=!0;break}if(et)ve=dt[Nt];else{var wt="GS"+(Object.keys(dt).length+1).toString(10);dt[wt]=ve,ve.id=wt}return W&&(Je[W]=ve.id),ye.publish("addGState",ve),ve}};g.addGState=function(W,ve){return Un(W,ve),this},g.saveGraphicsState=function(){return Q("q"),tt.push({key:Be,size:xe,color:kr}),this},g.restoreGraphicsState=function(){Q("Q");var W=tt.pop();return Be=W.key,xe=W.size,kr=W.color,De=null,this},g.setCurrentTransformationMatrix=function(W){return Q(W.toString()+" cm"),this},g.comment=function(W){return Q("#"+W),this};var $n=function(W,ve){var et=W||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(rs){isNaN(rs)||(et=parseFloat(rs))}});var Nt=ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Nt},set:function(rs){isNaN(rs)||(Nt=parseFloat(rs))}});var wt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return wt},set:function(rs){wt=rs.toString()}}),this},si=function(W,ve,et,Nt){$n.call(this,W,ve),this.type="rect";var wt=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return wt},set:function(gs){isNaN(gs)||(wt=parseFloat(gs))}});var rs=Nt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return rs},set:function(gs){isNaN(gs)||(rs=parseFloat(gs))}}),this},Ii=function(){this.page=$e,this.currentPage=K,this.pages=Ge.slice(0),this.pagesContext=Ne.slice(0),this.x=pt,this.y=mt,this.matrix=Ye,this.width=ks(K),this.height=zr(K),this.outputDestination=he,this.id="",this.objectNumber=-1};Ii.prototype.restore=function(){$e=this.page,K=this.currentPage,Ne=this.pagesContext,Ge=this.pages,pt=this.x,mt=this.y,Ye=this.matrix,Xn(K,this.width),ji(K,this.height),he=this.outputDestination};var Do=function(W,ve,et,Nt,wt){Ze.push(new Ii),$e=K=0,Ge=[],pt=W,mt=ve,Ye=wt,Re([et,Nt])};for(var jl in g.beginFormObject=function(W,ve,et,Nt,wt){return Do(W,ve,et,Nt,wt),this},g.endFormObject=function(W){return(function(ve){if(Oe[ve])Ze.pop().restore();else{var et=new Ii,Nt="Xo"+(Object.keys(ue).length+1).toString(10);et.id=Nt,Oe[ve]=Nt,ue[Nt]=et,ye.publish("addFormObject",et),Ze.pop().restore()}})(W),this},g.doFormObject=function(W,ve){var et=ue[Oe[W]];return Q("q"),Q(ve.toString()+" cm"),Q("/"+et.id+" Do"),Q("Q"),this},g.getFormObject=function(W){var ve=ue[Oe[W]];return{x:ve.x,y:ve.y,width:ve.width,height:ve.height,matrix:ve.matrix}},g.save=function(W,ve){return W=W||"generated.pdf",(ve=ve||{}).returnPromise=ve.returnPromise||!1,ve.returnPromise===!1?(Rh(Ut(ts()),W),typeof Rh.unload=="function"&&Cn.setTimeout&&setTimeout(Rh.unload,911),this):new Promise(function(et,Nt){try{var wt=Rh(Ut(ts()),W);typeof Rh.unload=="function"&&Cn.setTimeout&&setTimeout(Rh.unload,911),et(wt)}catch(rs){Nt(rs.message)}})},nn.API)nn.API.hasOwnProperty(jl)&&(jl==="events"&&nn.API.events.length?(function(W,ve){var et,Nt,wt;for(wt=ve.length-1;wt!==-1;wt--)et=ve[wt][0],Nt=ve[wt][1],W.subscribe.apply(W,[et].concat(typeof Nt=="function"?[Nt]:Nt))})(ye,nn.API.events):g[jl]=nn.API[jl]);function ks(W){return Ne[W].mediaBox.topRightX-Ne[W].mediaBox.bottomLeftX}function Xn(W,ve){Ne[W].mediaBox.topRightX=ve+Ne[W].mediaBox.bottomLeftX}function zr(W){return Ne[W].mediaBox.topRightY-Ne[W].mediaBox.bottomLeftY}function ji(W,ve){Ne[W].mediaBox.topRightY=ve+Ne[W].mediaBox.bottomLeftY}var Gi=g.getPageWidth=function(W){return ks(W=W||K)/lt},y0=g.setPageWidth=function(W,ve){Xn(W,ve*lt)},Ro=g.getPageHeight=function(W){return zr(W=W||K)/lt},b0=g.setPageHeight=function(W,ve){ji(W,ve*lt)};return g.internal={pdfEscape:nt,getStyle:Ys,getFont:ms,getFontSize:ne,getCharSpace:Ga,getTextColor:na,getLineHeight:Br,getLineHeightFactor:ti,getLineWidth:Is,write:ee,getHorizontalCoordinate:Mr,getVerticalCoordinate:hn,getCoordinateString:fr,getVerticalCoordinateString:ci,collections:{},newObject:jt,newAdditionalObject:ke,newObjectDeferred:Ve,newObjectDeferredBegin:Vt,getFilters:Ss,putStream:Ae,events:ye,scaleFactor:lt,pageSize:{getWidth:function(){return Gi(K)},setWidth:function(W){y0(K,W)},getHeight:function(){return Ro(K)},setHeight:function(W){b0(K,W)}},encryptionOptions:m,encryption:Bs,getEncryptor:function(W){return m!==null?Bs.encryptor(W,0):function(ve){return ve}},output:Ms,getNumberOfPages:Rt,get pages(){return Ge},out:Q,f2:A,f3:Y,getPageInfo:_s,getPageInfoByObjId:Es,getCurrentPageInfo:js,getPDFVersion:y,Point:$n,Rectangle:si,Matrix:Le,hasHotfix:Cs},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Gi(K)},set:function(W){y0(K,W)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ro(K)},set:function(W){b0(K,W)},enumerable:!0,configurable:!0}),(function(W){for(var ve=0,et=le.length;ve<et;ve++){var Nt=Te.call(this,W[ve][0],W[ve][1],W[ve][2],le[ve][3],!0);_===!1&&(p[Nt]=!0);var wt=W[ve][0].split("-");Ie({id:Nt,fontName:wt[0],fontStyle:wt[1]||""})}ye.publish("addFonts",{fonts:at,dictionary:Fe})}).call(g,le),Be="F1",Ct(i,n),ye.publish("initialized"),g}Sf.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Sf.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sf.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Sf.prototype.processOwnerPassword=function(t,e){return k2(A2(e).substr(0,5),t)},Sf.prototype.encryptor=function(t,e){var n=A2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return k2(n,r)}},y1.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Nr(t)!==Nr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},nn.API={events:[]},nn.version="4.2.0";var bi=nn.API,xS=1,p0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ff=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},r0=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var n=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},En=function(t){return t.toFixed(2)},bu=function(t){return t.toFixed(5)};bi.__acroform__={};var Il=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},_T=function(t){return t*xS},Ec=function(t){var e=new bO,n=Zs.internal.getHeight(t)||0,r=Zs.internal.getWidth(t)||0;return e.BBox=[0,0,Number(En(r)),Number(En(n))],e},_H=bi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},xH=bi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},pH=bi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Di=bi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pH(t,e-1)},Ri=bi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _H(t,e-1)},Ti=bi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xH(t,e-1)},yH=bi.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],c=t[3],u={};return u.lowerLeft_X=n(i)||0,u.lowerLeft_Y=r(a+c)||0,u.upperRight_X=n(i+o)||0,u.upperRight_Y=r(a)||0,[Number(En(u.lowerLeft_X)),Number(En(u.lowerLeft_Y)),Number(En(u.upperRight_X)),Number(En(u.upperRight_Y))]},bH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=U2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+En(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Ec(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},U2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var a=n,o=Zs.internal.getHeight(t)||0;o=o<0?-o:o;var c=Zs.internal.getWidth(t)||0;c=c<0?-c:c;var u=function(A,Y,se){if(A+1<i.length){var X=Y+" "+i[A+1][0];return lp(X,t,se).width<=c-4}return!1};a++;e:for(;a>0;){e="",a--;var h,m,_=lp("3",t,a).height,p=t.multiline?o-a:(o-_)/2,g=p+=2,C=0,y=0,N=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+lp(e,t,a=12).width+", FieldWidth:"+c+`
`;break}for(var v="",P=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var M=!1;if(i[w].length!==1&&N!==i[w].length-1){if((_+2)*(P+2)+2>o)continue e;v+=i[w][N],M=!0,y=w,w--}else{v=(v+=i[w][N]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var k=parseInt(w),B=u(k,v,a),G=w>=i.length-1;if(B&&!G){v+=" ",N=0;continue}if(B||G){if(G)y=k;else if(t.multiline&&(_+2)*(P+2)+2>o)continue e}else{if(!t.multiline||(_+2)*(P+2)+2>o)continue e;y=k}}for(var U="",I=C;I<=y;I++){var E=i[I];if(t.multiline){if(I===y){U+=E[N]+" ",N=(N+1)%E.length;continue}if(I===C){U+=E[E.length-1]+" ";continue}}U+=E[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,m=lp(U,t,a).width,t.textAlign){case"right":h=c-m-2;break;case"center":h=(c-m)/2;break;default:h=2}e+=En(h)+" "+En(g)+` Td
`,e+="("+p0(U)+`) Tj
`,e+=-En(h)+` 0 Td
`,g=-(a+2),m=0,C=M?y:y+1,P++,v=""}break}return r.text=e,r.fontSize=a,r},lp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},CH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},NH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},SH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(rc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(CH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xS=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new CO,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&NH(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var c=r[o],u=[],h=c.Rect;if(c.Rect&&(c.Rect=yH(c.Rect,i)),i.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Zs.createDefaultAppearanceStream(c),Nr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=bH(c);u.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var _="";for(var p in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(p)){var g=c.appearanceStreamContent[p];if(_+="/"+p+" ",_+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var C=g[o];typeof C=="function"&&(C=C.call(i,c)),_+="/"+o+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=g)=="function"&&(C=C.call(i,c)),_+="/"+o+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);_+=">>"}u.push({key:"AP",value:`<<
`+_+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:c.objId}),i.internal.out("endobj")}a&&(function(y,N){for(var v in y)if(y.hasOwnProperty(v)){var P=v,w=y[v];N.internal.newObjectDeferredBegin(w.objId,!0),Nr(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete y[P]}})(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},yO=bi.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),Nr(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)==="/"?i+="/"+r0(t[a].substr(1)):(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+p0(r(t[a].toString()))+")")}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},SC=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+p0(r(t))+")"},wc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wc.prototype.toString=function(){return this.objId+" 0 R"},wc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},wc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:yO(i,this.objId,this.scope)}):i instanceof wc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var bO=function(){wc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Il(bO,wc);var CO=function(){wc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+p0(n(t))+")"}},set:function(n){t=n}})};Il(CO,wc);var rc=function t(){wc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Di(e,3)},set:function(v){v?this.F=Ri(e,3):this.F=Ti(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof b1)return;a="FieldObject"+t.FieldNum++}var v=function(P){return P};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+p0(v(a))+")"},set:function(v){a=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(v){a=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/xS:h},set:function(v){h=v}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(v){m=v}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof b1||this instanceof Yh))return SC(_,this.objId,this.scope)},set:function(v){v=v.toString(),_=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ma==0?SC(p,this.objId,this.scope):p},set:function(v){v=v.toString(),p=this instanceof ma==0?v.substr(0,1)==="("?ff(v.substr(1,v.length-2)):ff(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ma==1?ff(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof ma==1?"/"+r0(v):v}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ma==0?SC(g,this.objId,this.scope):g},set:function(v){v=v.toString(),g=this instanceof ma==0?v.substr(0,1)==="("?ff(v.substr(1,v.length-2)):ff(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ma==1?ff(g.substr(1,g.length-1)):g},set:function(v){v=v.toString(),g=this instanceof ma==1?"/"+r0(v):v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(v){v=!!v,y=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(v){C=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,1)},set:function(v){v?this.Ff=Ri(this.Ff,1):this.Ff=Ti(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,2)},set:function(v){v?this.Ff=Ri(this.Ff,2):this.Ff=Ti(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,3)},set:function(v){v?this.Ff=Ri(this.Ff,3):this.Ff=Ti(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');N=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(N){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};Il(rc,wc);var Ff=function(){rc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return yO(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(a,o,c){c||(c=1);for(var u,h=[];u=o.exec(a);)h.push(u[c]);return h})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,18)},set:function(n){n?this.Ff=Ri(this.Ff,18):this.Ff=Ti(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ri(this.Ff,19):this.Ff=Ti(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,20)},set:function(n){n?(this.Ff=Ri(this.Ff,20),e.sort()):this.Ff=Ti(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,22)},set:function(n){n?this.Ff=Ri(this.Ff,22):this.Ff=Ti(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,23)},set:function(n){n?this.Ff=Ri(this.Ff,23):this.Ff=Ti(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,27)},set:function(n){n?this.Ff=Ri(this.Ff,27):this.Ff=Ti(this.Ff,27)}}),this.hasAppearanceStream=!1};Il(Ff,rc);var Kf=function(){Ff.call(this),this.fontName="helvetica",this.combo=!1};Il(Kf,Ff);var Qf=function(){Kf.call(this),this.combo=!0};Il(Qf,Kf);var Mp=function(){Qf.call(this),this.edit=!0};Il(Mp,Qf);var ma=function(){rc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,15)},set:function(n){n?this.Ff=Ri(this.Ff,15):this.Ff=Ti(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,16)},set:function(n){n?this.Ff=Ri(this.Ff,16):this.Ff=Ti(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,17)},set:function(n){n?this.Ff=Ri(this.Ff,17):this.Ff=Ti(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,26)},set:function(n){n?this.Ff=Ri(this.Ff,26):this.Ff=Ti(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+p0(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Nr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){var r=n==null?"":n.toString();r.substr(0,1)==="/"&&(r=r.substr(1)),t="/"+r0(r)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+r0(n)}})};Il(ma,rc);var Ip=function(){ma.call(this),this.pushButton=!0};Il(Ip,ma);var Yf=function(){ma.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Il(Yf,ma);var b1=function(){var t,e;rc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(c){return c};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+p0(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Nr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){var a=i==null?"":i.toString();a.substr(0,1)==="/"&&(a=a.substr(1)),n="/"+r0(a)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){var a=i==null?"":i.toString();a.substr(0,1)==="/"&&(a=a.substr(1)),n="/"+r0(a)}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Zs.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Il(b1,rc),Yf.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Yf.prototype.createOption=function(t){var e=new b1;return e.Parent=this,e.optionName=t,this.Kids.push(e),vH.call(this.scope,e),e};var jp=function(){ma.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Zs.CheckBox.createAppearanceStream()};Il(jp,ma);var Yh=function(){rc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,13)},set:function(e){e?this.Ff=Ri(this.Ff,13):this.Ff=Ti(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,21)},set:function(e){e?this.Ff=Ri(this.Ff,21):this.Ff=Ti(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,23)},set:function(e){e?this.Ff=Ri(this.Ff,23):this.Ff=Ti(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,24)},set:function(e){e?this.Ff=Ri(this.Ff,24):this.Ff=Ti(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,25)},set:function(e){e?this.Ff=Ri(this.Ff,25):this.Ff=Ti(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,26)},set:function(e){e?this.Ff=Ri(this.Ff,26):this.Ff=Ti(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Il(Yh,rc);var Op=function(){Yh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,14)},set:function(t){t?this.Ff=Ri(this.Ff,14):this.Ff=Ti(this.Ff,14)}}),this.password=!0};Il(Op,Yh);var Zs={CheckBox:{createAppearanceStream:function(){return{N:{On:Zs.CheckBox.YesNormal},D:{On:Zs.CheckBox.YesPushDown,Off:Zs.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=U2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+En(Zs.internal.getWidth(t))+" "+En(Zs.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+En(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ec(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],a=Zs.internal.getHeight(t),o=Zs.internal.getWidth(t),c=U2(t,t.caption);return i.push("1 g"),i.push("0 0 "+En(o)+" "+En(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+En(o-1)+" "+En(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+En(c.fontSize)+" Tf "+r),i.push(c.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(Zs.internal.getWidth(t))+" "+En(Zs.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Zs.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Zs.RadioButton.Circle.YesNormal,e.D[t]=Zs.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=Zs.internal.getWidth(t)<=Zs.internal.getHeight(t)?Zs.internal.getWidth(t)/4:Zs.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Zs.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+bu(Zs.internal.getWidth(t)/2)+" "+bu(Zs.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=Zs.internal.getWidth(t)<=Zs.internal.getHeight(t)?Zs.internal.getWidth(t)/4:Zs.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Zs.internal.Bezier_C).toFixed(5)),o=Number((r*Zs.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+bu(Zs.internal.getWidth(t)/2)+" "+bu(Zs.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+bu(Zs.internal.getWidth(t)/2)+" "+bu(Zs.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=Zs.internal.getWidth(t)<=Zs.internal.getHeight(t)?Zs.internal.getWidth(t)/4:Zs.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Zs.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+bu(Zs.internal.getWidth(t)/2)+" "+bu(Zs.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Zs.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Zs.RadioButton.Cross.YesNormal,e.D[t]=Zs.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=Zs.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+En(Zs.internal.getWidth(t)-2)+" "+En(Zs.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(En(r.x1.x)+" "+En(r.x1.y)+" m"),n.push(En(r.x2.x)+" "+En(r.x2.y)+" l"),n.push(En(r.x4.x)+" "+En(r.x4.y)+" m"),n.push(En(r.x3.x)+" "+En(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=Zs.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+En(Zs.internal.getWidth(t))+" "+En(Zs.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+En(Zs.internal.getWidth(t)-2)+" "+En(Zs.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(En(n.x1.x)+" "+En(n.x1.y)+" m"),r.push(En(n.x2.x)+" "+En(n.x2.y)+" l"),r.push(En(n.x4.x)+" "+En(n.x4.y)+" m"),r.push(En(n.x3.x)+" "+En(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(Zs.internal.getWidth(t))+" "+En(Zs.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Zs.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Zs.internal.getWidth(t),n=Zs.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Zs.internal.getWidth=function(t){var e=0;return Nr(t)==="object"&&(e=_T(t.Rect[2])),e},Zs.internal.getHeight=function(t){var e=0;return Nr(t)==="object"&&(e=_T(t.Rect[3])),e};var vH=bi.addField=function(t){if(SH(this,t),!(t instanceof rc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};bi.AcroFormChoiceField=Ff,bi.AcroFormListBox=Kf,bi.AcroFormComboBox=Qf,bi.AcroFormEditBox=Mp,bi.AcroFormButton=ma,bi.AcroFormPushButton=Ip,bi.AcroFormRadioButton=Yf,bi.AcroFormCheckBox=jp,bi.AcroFormTextField=Yh,bi.AcroFormPasswordField=Op,bi.AcroFormAppearance=Zs,bi.AcroForm={ChoiceField:Ff,ListBox:Kf,ComboBox:Qf,EditBox:Mp,Button:ma,PushButton:Ip,RadioButton:Yf,CheckBox:jp,TextField:Yh,PasswordField:Op,Appearance:Zs},nn.AcroForm={ChoiceField:Ff,ListBox:Kf,ComboBox:Qf,EditBox:Mp,Button:ma,PushButton:Ip,RadioButton:Yf,CheckBox:jp,TextField:Yh,PasswordField:Op,Appearance:Zs};nn.AcroForm;function NO(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(A,Y){var se,X,z,$,F,L=n;if((Y=Y||n)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(B(A))for(F in r)for(z=r[F],se=0;se<z.length;se+=1){for($=!0,X=0;X<z[se].length;X+=1)if(z[se][X]!==void 0&&z[se][X]!==A[X]){$=!1;break}if($===!0){L=F;break}}else for(F in r)for(z=r[F],se=0;se<z.length;se+=1){for($=!0,X=0;X<z[se].length;X+=1)if(z[se][X]!==void 0&&z[se][X]!==A.charCodeAt(X)){$=!1;break}if($===!0){L=F;break}}return L===n&&Y!==n&&(L=Y),L},a=function A(Y){for(var se=this.internal.write,X=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);Y.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:Y.width}),$.push({key:"Height",value:Y.height}),Y.colorSpace===v.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Y.palette.length/3-1)+" "+("sMask"in Y&&Y.sMask!==void 0?Y.objectId+2:Y.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+Y.colorSpace}),Y.colorSpace===v.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:Y.bitsPerComponent}),"decodeParameters"in Y&&Y.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+Y.decodeParameters+">>"}),"transparency"in Y&&Array.isArray(Y.transparency)&&Y.transparency.length>0){for(var F="",L=0,re=Y.transparency.length;L<re;L++)F+=Y.transparency[L]+" "+Y.transparency[L]+" ";$.push({key:"Mask",value:"["+F+"]"})}Y.sMask!==void 0&&$.push({key:"SMask",value:Y.objectId+1+" 0 R"});var fe=Y.filter!==void 0?["/"+Y.filter]:void 0;if(X({data:Y.data,additionalKeyValues:$,alreadyAppliedFilters:fe,objectId:Y.objectId}),se("endobj"),"sMask"in Y&&Y.sMask!==void 0){var T,j=(T=Y.sMaskBitsPerComponent)!==null&&T!==void 0?T:Y.bitsPerComponent,K={width:Y.width,height:Y.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:Y.sMask};"filter"in Y&&(K.decodeParameters="/Predictor ".concat(Y.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(Y.width),K.filter=Y.filter),A.call(this,K)}if(Y.colorSpace===v.INDEXED){var J=this.internal.newObject();X({data:U(new Uint8Array(Y.palette)),objectId:J}),se("endobj")}},o=function(){var A=this.internal.collections[e+"images"];for(var Y in A)a.call(this,A[Y])},c=function(){var A,Y=this.internal.collections[e+"images"],se=this.internal.write;for(var X in Y)se("/I"+(A=Y[X]).index,A.objectId,"0","R")},u=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},h=function(){var A=this.internal.collections[e+"images"];return u.call(this),A},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},_=function(A){return typeof t["process"+A.toUpperCase()]=="function"},p=function(A){return Nr(A)==="object"&&A.nodeType===1},g=function(A,Y){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var se=""+A.getAttribute("src");if(se.indexOf("data:image/")===0)return Tp(unescape(se).split("base64,").pop());var X=t.loadFile(se,!0);if(X!==void 0)return X}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var z;switch(Y){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;default:z="image/jpeg"}return Tp(A.toDataURL(z,1).split("base64,").pop())}},C=function(A){var Y=this.internal.collections[e+"images"];if(Y){for(var se in Y)if(A===Y[se].alias)return Y[se]}},y=function(A,Y,se){return A||Y||(A=-96,Y=-96),A<0&&(A=-1*se.width*72/A/this.internal.scaleFactor),Y<0&&(Y=-1*se.height*72/Y/this.internal.scaleFactor),A===0&&(A=Y*se.width/se.height),Y===0&&(Y=A*se.height/se.width),[A,Y]},N=function(A,Y,se,X,z,$){var F=y.call(this,se,X,z),L=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,fe=h.call(this);if(se=F[0],X=F[1],fe[z.index]=z,$){$*=Math.PI/180;var T=Math.cos($),j=Math.sin($),K=function(q){return q.toFixed(4)},J=[K(T),K(j),K(-1*j),K(T),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,L(A),re(Y+X),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([L(se),"0","0",L(X),"0","0","cm"].join(" "))):this.internal.write([L(se),"0","0",L(X),L(A),re(Y+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=t.__addimage__.sHashCode=function(A){var Y,se,X=0;if(typeof A=="string")for(se=A.length,Y=0;Y<se;Y++)X=(X<<5)-X+A.charCodeAt(Y),X|=0;else if(B(A))for(se=A.byteLength/2,Y=0;Y<se;Y++)X=(X<<5)-X+A[Y],X|=0;return X},M=t.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var Y=!0;return A.length===0&&(Y=!1),A.length%4!=0&&(Y=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(Y=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(Y=!1),Y},k=t.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var Y=A.indexOf(",");return Y<0?null:A.substring(0,Y).trim().endsWith("base64")?A.substring(Y+1):null};t.__addimage__.isArrayBuffer=function(A){return A instanceof ArrayBuffer};var B=t.__addimage__.isArrayBufferView=function(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array},G=t.__addimage__.binaryStringToUint8Array=function(A){for(var Y=A.length,se=new Uint8Array(Y),X=0;X<Y;X++)se[X]=A.charCodeAt(X);return se},U=t.__addimage__.arrayBufferToBinaryString=function(A){for(var Y="",se=B(A)?A:new Uint8Array(A),X=0;X<se.length;X+=8192)Y+=String.fromCharCode.apply(null,se.subarray(X,X+8192));return Y};t.addImage=function(){var A,Y,se,X,z,$,F,L,re;if(typeof arguments[1]=="number"?(Y=n,se=arguments[1],X=arguments[2],z=arguments[3],$=arguments[4],F=arguments[5],L=arguments[6],re=arguments[7]):(Y=arguments[1],se=arguments[2],X=arguments[3],z=arguments[4],$=arguments[5],F=arguments[6],L=arguments[7],re=arguments[8]),Nr(A=arguments[0])==="object"&&!p(A)&&"imageData"in A){var fe=A;A=fe.imageData,Y=fe.format||Y||n,se=fe.x||se||0,X=fe.y||X||0,z=fe.w||fe.width||z,$=fe.h||fe.height||$,F=fe.alias||F,L=fe.compression||L,re=fe.rotation||fe.angle||re}var T=this.internal.getFilters();if(L===void 0&&T.indexOf("FlateEncode")!==-1&&(L="SLOW"),isNaN(se)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var j=I.call(this,A,Y,F,L);return N.call(this,se,X,z,$,j,re),this};var I=function(A,Y,se,X){var z,$,F;if(typeof A=="string"&&i(A)===n){A=unescape(A);var L=E(A,!1);(L!==""||(L=t.loadFile(A,!0))!==void 0)&&(A=L)}if(p(A)&&(A=g(A,Y)),Y=i(A,Y),!_(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(((F=se)==null||F.length===0)&&(se=(function(re){return typeof re=="string"||B(re)?w(re):B(re.data)?w(re.data):null})(A)),(z=C.call(this,se))||(A instanceof Uint8Array||Y==="RGBA"||($=A,A=G(A)),z=this["process"+Y.toUpperCase()](A,m.call(this),se,(function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in t.image_compression?re:P.NONE})(X),$)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},E=t.__addimage__.convertBase64ToBinaryString=function(A,Y){Y=typeof Y!="boolean"||Y;var se,X="";if(typeof A=="string"){var z;se=(z=k(A))!==null&&z!==void 0?z:A;try{X=Tp(se)}catch($){if(Y)throw M(se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(A){var Y,se,X="";if(p(A)&&(A=g(A)),typeof A=="string"&&i(A)===n&&((X=E(A,!1))===""&&(X=t.loadFile(A)||""),A=X),se=i(A),!_(se))throw new Error("addImage does not support files of type '"+se+"', please ensure that a plugin for '"+se+"' support is added.");if(A instanceof Uint8Array||(A=G(A)),!(Y=this["process"+se.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return Y.fileType=se,Y}})(nn.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};nn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,a,o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,m=!1,_=0;_<h.length&&!m;_++)switch((r=h[_]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var p=0;p<h.length;p++){r=h[p];var g=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(y.objId),P=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+g(v(r.contents))+")",a+=" /Popup "+N.objId+" 0 R",a+=" /P "+u.objId+" 0 R",a+=" /T ("+g(v(P))+") >>",y.content=a;var w=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(a+=" /Open true"),a+=" >>",N.content=a,this.internal.write(y.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+c(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var M=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(C(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var k=this.annotations._nameMap[r.options.name];r.options.pageNumber=k.page,r.options.top=k.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var B=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+B+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,a,o){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(n),y:h(r),w:u(n+i),h:h(r+a)},options:o,type:"link"})},t.textWithLink=function(n,r,i,a){var o,c,u=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){c=a.maxWidth;var m=this.splitTextToSize(n,c).length;o=Math.ceil(h*m)}else c=u,o=h;return this.text(n,r,i,a),i+=.2*h,a.align==="center"&&(r-=u/2),a.align==="right"&&(r-=u),this.link(r,i-h,c,o,a),u},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(nn.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},c=t.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&i.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length==4},_=t.__arabicParser__.resolveLigatures=function(y){var N=0,v=n,P="",w=0;for(N=0;N<y.length;N+=1)v[y.charCodeAt(N)]!==void 0?(w++,typeof(v=v[y.charCodeAt(N)])=="number"&&(P+=String.fromCharCode(v),v=n,w=0),N===y.length-1&&(v=n,P+=y.charAt(N-(w-1)),N-=w-1,w=0)):(v=n,P+=y.charAt(N-w),N-=w,w=0);return P};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,N,v){return o(y)?a(y)===!1?-1:!h(y)||!o(N)&&!o(v)||!o(v)&&c(N)||c(y)&&!o(N)||c(y)&&u(N)||c(y)&&c(N)?0:m(y)&&o(N)&&!c(N)&&o(v)&&h(v)?3:c(y)||!o(v)?1:2:-1},g=function(y){var N=0,v=0,P=0,w="",M="",k="",B=(y=y||"").split("\\s+"),G=[];for(N=0;N<B.length;N+=1){for(G.push(""),v=0;v<B[N].length;v+=1)w=B[N][v],M=B[N][v-1],k=B[N][v+1],o(w)?(P=p(w,M,k),G[N]+=P!==-1?String.fromCharCode(e[w.charCodeAt(0)][P]):w):G[N]+=w;G[N]=_(G[N])}return G.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var y,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(N)){var P=0;for(v=[],P=0;P<N.length;P+=1)Array.isArray(N[P])?v.push([g(N[P][0]),N[P][1],N[P][2]]):v.push([g(N[P])]);y=v}else y=g(N);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",C])})(nn.API),nn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(c){a=c}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(c){o=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(nn.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(y){_=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(y){C=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,h){r.call(this);var m=(h=h||{}).fontSize||this.getFontSize(),_=h.font||this.getFont(),p=h.scaleFactor||this.internal.scaleFactor,g=0,C=0,y=0,N=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var v=h.maxWidth;v>0?typeof u=="string"?u=this.splitTextToSize(u,v):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(w,M){return w.concat(N.splitTextToSize(M,v))},[])):u=Array.isArray(u)?u:[u];for(var P=0;P<u.length;P++)g<(y=this.getStringUnitWidth(u[P],{font:_})*m)&&(g=y);return g!==0&&(C=u.length),{w:g/=p,h:Math.max((C*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var u;u=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var h=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,_=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===u.lineNumber?(u.x=(h.x||0)+(h.width||0),u.y=h.y||0):h.y+h.height+u.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=_.top,g&&p&&(this.printHeaderRow(u.lineNumber,!0),u.y+=p[0].height)):u.y=h.y+h.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-m,u.y+m,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+m,{align:"center",baseline:"top",maxWidth:u.width-m-m}):this.text(u.text,u.x+m,u.y+m,{align:"left",baseline:"top",maxWidth:u.width-m-m})),this.internal.__cell__.lastCell=u,this};t.table=function(u,h,m,_,p){if(r.call(this),!m)throw new Error("No data for PDF table.");var g,C,y,N,v=[],P=[],w=[],M={},k={},B=[],G=[],U=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,E=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,A=p.margins||Object.assign({width:this.getPageWidth()},e),Y=typeof p.padding=="number"?p.padding:3,se=p.headerBackgroundColor||"#c8c8c8",X=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=Y,this.internal.__cell__.headerBackgroundColor=se,this.internal.__cell__.headerTextColor=X,this.setFontSize(E),_==null)P=v=Object.keys(m[0]),w=v.map(function(){return"left"});else if(Array.isArray(_)&&Nr(_[0])==="object")for(v=_.map(function(fe){return fe.name}),P=_.map(function(fe){return fe.prompt||fe.name||""}),w=_.map(function(fe){return fe.align||"left"}),g=0;g<_.length;g+=1)k[_[g].name]=.7499990551181103*_[g].width;else Array.isArray(_)&&typeof _[0]=="string"&&(P=v=_,w=v.map(function(){return"left"}));if(U||Array.isArray(_)&&typeof _[0]=="string")for(g=0;g<v.length;g+=1){for(M[N=v[g]]=m.map(function(fe){return fe[N]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(P[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=M[N],this.setFont(void 0,"normal"),y=0;y<C.length;y+=1)B.push(this.getTextDimensions(C[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[N]=Math.max.apply(null,B)+Y+Y,B=[]}if(I){var z={};for(g=0;g<v.length;g+=1)z[v[g]]={},z[v[g]].text=P[g],z[v[g]].align=w[g];var $=c.call(this,z,k);G=v.map(function(fe){return new a(u,h,k[fe],$,z[fe].text,void 0,z[fe].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var F=_.reduce(function(fe,T){return fe[T.name]=T.align,fe},{});for(g=0;g<m.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:m[g]},this);var L=c.call(this,m[g],k);for(y=0;y<v.length;y+=1){var re=m[g][v[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:y,data:re},this),o.call(this,new a(u,h,k[v[y]],L,re,g+2,F[v[y]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=h,this};var c=function(u,h){var m=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(u).map(function(g){var C=u[g];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,h[g]-m-m)},this).map(function(g){return this.getLineHeightFactor()*g.length*_/p+m+m},this).reduce(function(g,C){return Math.max(g,C)},0)};t.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){m=this.internal.__cell__.tableHeaderRow[g].clone(),h&&(m.y=this.internal.__cell__.margins.top||0,p.push(m)),m.lineNumber=u;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,m),this.setTextColor(C)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}})(nn.API);var SO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},vO=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],B2=NO(vO),EO=[100,200,300,400,500,600,700,800,900],EH=NO(EO);function vC(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(a){return SO[a=a||"normal"]?a:"normal"})(t.style),r=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(t.weight),i=(function(a){return typeof B2[a=a||"normal"]=="number"?a:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function xT(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var DH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},pT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yT(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function bT(t){return t.trimLeft()}function RH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function TH(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var mf,op,CT,NT,ST,EC=["times"];function vT(t,e,n,r,i){var a=4,o=DT;switch(i){case nn.API.image_compression.FAST:a=1,o=ET;break;case nn.API.image_compression.MEDIUM:a=6,o=RT;break;case nn.API.image_compression.SLOW:a=9,o=TT}t=(function(u,h,m,_){for(var p,g=u.length/h,C=new Uint8Array(u.length+g),y=[MH,ET,DT,RT,TT],N=0;N<g;N+=1){var v=N*h,P=u.subarray(v,v+h);if(_)C.set(_(P,m,p),v+N);else{for(var w=y.length,M=[],k=0;k<w;k+=1)M[k]=y[k](P,m,p);var B=jH(M.concat());C.set(M[B],v+N)}p=P}return C})(t,e,Math.ceil(n*r/8),o);var c=O2(t,{level:a});return nn.API.__addimage__.arrayBufferToBinaryString(c)}function MH(t){var e=Array.apply([],t);return e.unshift(0),e}function ET(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var a=t[i-e]||0;r[i+1]=t[i]-a+256&255}return r}function DT(t,e,n){var r=t.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var o=n&&n[a]||0;i[a+1]=t[a]-o+256&255}return i}function RT(t,e,n){var r=t.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var o=t[a-e]||0,c=n&&n[a]||0;i[a+1]=t[a]+256-(o+c>>>1)&255}return i}function TT(t,e,n){var r=t.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var o=IH(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0);i[a+1]=t[a]-o+256&255}return i}function IH(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),a=Math.abs(t+e-n-n);return r<=i&&r<=a?t:i<=a?e:n}function jH(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function DC(t,e,n){var r=e*n,i=Math.floor(r/8),a=16-(r-8*i+n),o=(1<<n)-1;return DO(t,i)>>a&o}function MT(t,e,n,r){var i=n*r,a=Math.floor(i/8),o=16-(i-8*a+r),c=(1<<r)-1,u=(e&c)<<o;(function(h,m,_){if(m+1<h.byteLength)h.setUint16(m,_,!1);else{var p=_>>8&255;h.setUint8(m,p)}})(t,a,DO(t,a)&~(c<<o)&65535|u)}function DO(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function OH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<1+(7&i);t[e++],t[e++];var c=null,u=null;a&&(c=e,u=o,e+=3*o);var h=!0,m=[],_=0,p=null,g=0,C=null;for(this.width=n,this.height=r;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];_=t[e++]|t[e++]<<8,p=t[e++],1&y||(p=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var N=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,P=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,M=t[e++],k=M>>6&1,B=1<<1+(7&M),G=c,U=u,I=!1;M>>7&&(I=!0,G=e,U=B,e+=3*B);var E=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}m.push({x:N,y:v,width:P,height:w,has_local_palette:I,palette_offset:G,palette_size:U,data_offset:E,data_length:e-E,transparent_index:p,interlaced:!!k,delay:_,disposal:g});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return C},this.frameInfo=function(Y){if(Y<0||Y>=m.length)throw new Error("Frame index out of range.");return m[Y]},this.decodeAndBlitFrameBGRA=function(Y,se){var X=this.frameInfo(Y),z=X.width*X.height;if(z>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var $=new Uint8Array(z);IT(t,X.data_offset,$,z);var F=X.palette_offset,L=X.transparent_index;L===null&&(L=256);var re=X.width,fe=n-re,T=re,j=4*(X.y*n+X.x),K=4*((X.y+X.height)*n+X.x),J=j,q=4*fe;X.interlaced===!0&&(q+=4*n*7);for(var V=8,ce=0,me=$.length;ce<me;++ce){var Ce=$[ce];if(T===0&&(T=re,(J+=q)>=K&&(q=4*fe+4*n*(V-1),J=j+(re+fe)*(V<<1),V>>=1)),Ce===L)J+=4;else{var ge=t[F+3*Ce],Ge=t[F+3*Ce+1],te=t[F+3*Ce+2];se[J++]=te,se[J++]=Ge,se[J++]=ge,se[J++]=255}--T}},this.decodeAndBlitFrameRGBA=function(Y,se){var X=this.frameInfo(Y),z=X.width*X.height;if(z>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var $=new Uint8Array(z);IT(t,X.data_offset,$,z);var F=X.palette_offset,L=X.transparent_index;L===null&&(L=256);var re=X.width,fe=n-re,T=re,j=4*(X.y*n+X.x),K=4*((X.y+X.height)*n+X.x),J=j,q=4*fe;X.interlaced===!0&&(q+=4*n*7);for(var V=8,ce=0,me=$.length;ce<me;++ce){var Ce=$[ce];if(T===0&&(T=re,(J+=q)>=K&&(q=4*fe+4*n*(V-1),J=j+(re+fe)*(V<<1),V>>=1)),Ce===L)J+=4;else{var ge=t[F+3*Ce],Ge=t[F+3*Ce+1],te=t[F+3*Ce+2];se[J++]=ge,se[J++]=Ge,se[J++]=te,se[J++]=255}--T}}}function IT(t,e,n,r){for(var i=t[e++],a=1<<i,o=a+1,c=o+1,u=i+1,h=(1<<u)-1,m=0,_=0,p=0,g=t[e++],C=new Int32Array(4096),y=null;;){for(;m<16&&g!==0;)_|=t[e++]<<m,m+=8,g===1?g=t[e++]:--g;if(m<u)break;var N=_&h;if(_>>=u,m-=u,N!==a){if(N===o)break;for(var v=N<c?N:y,P=0,w=v;w>a;)w=C[w]>>8,++P;var M=w;if(p+P+(v!==N?1:0)>r)return void Lr.log("Warning, gif stream longer than expected.");n[p++]=M;var k=p+=P;for(v!==N&&(n[p++]=M),w=v;P--;)w=C[w],n[--k]=255&w,w>>=8;y!==null&&c<4096&&(C[c++]=y<<8|M,c>=h+1&&u<12&&(++u,h=h<<1|1)),y=N}else c=o+1,h=(1<<(u=i+1))-1,y=null}return p!==r&&Lr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function RC(t){var e,n,r,i,a,o=Math.floor,c=new Array(64),u=new Array(64),h=new Array(64),m=new Array(64),_=new Array(65535),p=new Array(65535),g=new Array(64),C=new Array(64),y=[],N=0,v=7,P=new Array(64),w=new Array(64),M=new Array(64),k=new Array(256),B=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],se=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(j,K){for(var J=0,q=0,V=new Array,ce=1;ce<=16;ce++){for(var me=1;me<=j[ce];me++)V[K[q]]=[],V[K[q]][0]=J,V[K[q]][1]=ce,q++,J++;J*=2}return V}function F(j){for(var K=j[0],J=j[1]-1;J>=0;)K&1<<J&&(N|=1<<v),J--,--v<0&&(N==255?(L(255),L(0)):L(N),v=7,N=0)}function L(j){y.push(j)}function re(j){L(j>>8&255),L(255&j)}function fe(j,K,J,q,V){for(var ce,me=V[0],Ce=V[240],ge=(function(xe,be){var ne,ie,pe,ze,xt,st,St,ot,Be,lt,pt=0;for(Be=0;Be<8;++Be){ne=xe[pt],ie=xe[pt+1],pe=xe[pt+2],ze=xe[pt+3],xt=xe[pt+4],st=xe[pt+5],St=xe[pt+6];var mt=ne+(ot=xe[pt+7]),Ye=ne-ot,at=ie+St,Fe=ie-St,tt=pe+st,ct=pe-st,Mt=ze+xt,dt=ze-xt,Je=mt+Mt,De=mt-Mt,$e=at+tt,Ne=at-tt;xe[pt]=Je+$e,xe[pt+4]=Je-$e;var ye=.707106781*(Ne+De);xe[pt+2]=De+ye,xe[pt+6]=De-ye;var Ue=.382683433*((Je=dt+ct)-(Ne=Fe+Ye)),ue=.5411961*Je+Ue,Oe=1.306562965*Ne+Ue,Ze=.707106781*($e=ct+Fe),Le=Ye+Ze,vt=Ye-Ze;xe[pt+5]=vt+ue,xe[pt+3]=vt-ue,xe[pt+1]=Le+Oe,xe[pt+7]=Le-Oe,pt+=8}for(pt=0,Be=0;Be<8;++Be){ne=xe[pt],ie=xe[pt+8],pe=xe[pt+16],ze=xe[pt+24],xt=xe[pt+32],st=xe[pt+40],St=xe[pt+48];var je=ne+(ot=xe[pt+56]),ut=ne-ot,gt=ie+St,jt=ie-St,Ve=pe+st,Vt=pe-st,ke=ze+xt,ss=ze-xt,ls=je+ke,ds=je-ke,vs=gt+Ve,Ss=gt-Ve;xe[pt]=ls+vs,xe[pt+32]=ls-vs;var Ae=.707106781*(Ss+ds);xe[pt+16]=ds+Ae,xe[pt+48]=ds-Ae;var ft=.382683433*((ls=ss+Vt)-(Ss=jt+ut)),rt=.5411961*ls+ft,Wt=1.306562965*Ss+ft,_t=.707106781*(vs=Vt+jt),qt=ut+_t,Ot=ut-_t;xe[pt+40]=Ot+rt,xe[pt+24]=Ot-rt,xe[pt+8]=qt+Wt,xe[pt+56]=qt-Wt,pt++}for(Be=0;Be<64;++Be)lt=xe[Be]*be[Be],g[Be]=lt>0?lt+.5|0:lt-.5|0;return g})(j,K),Ge=0;Ge<64;++Ge)C[G[Ge]]=ge[Ge];var te=C[0]-J;J=C[0],te==0?F(q[0]):(F(q[p[ce=32767+te]]),F(_[ce]));for(var he=63;he>0&&C[he]==0;)he--;if(he==0)return F(me),J;for(var de,Q=1;Q<=he;){for(var ee=Q;C[Q]==0&&Q<=he;)++Q;var Z=Q-ee;if(Z>=16){de=Z>>4;for(var le=1;le<=de;++le)F(Ce);Z&=15}ce=32767+C[Q],F(V[(Z<<4)+p[ce]]),F(_[ce]),Q++}return he!=63&&F(me),J}function T(j){j=Math.min(Math.max(j,1),100),a!=j&&((function(K){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var V=o((J[q]*K+50)/100);V=Math.min(Math.max(V,1),255),c[G[q]]=V}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var Ce=o((ce[me]*K+50)/100);Ce=Math.min(Math.max(Ce,1),255),u[G[me]]=Ce}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ge=0,te=0;te<8;te++)for(var he=0;he<8;he++)h[Ge]=1/(c[G[Ge]]*ge[te]*ge[he]*8),m[Ge]=1/(u[G[Ge]]*ge[te]*ge[he]*8),Ge++})(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),a=j)}this.encode=function(j,K){K&&T(K),y=new Array,N=0,v=7,re(65496),re(65504),re(16),L(74),L(70),L(73),L(70),L(0),L(1),L(1),L(0),re(1),re(1),L(0),L(0),(function(){re(65499),re(132),L(0);for(var ie=0;ie<64;ie++)L(c[ie]);L(1);for(var pe=0;pe<64;pe++)L(u[pe])})(),(function(ie,pe){re(65472),re(17),L(8),re(pe),re(ie),L(3),L(1),L(17),L(0),L(2),L(17),L(1),L(3),L(17),L(1)})(j.width,j.height),(function(){re(65476),re(418),L(0);for(var ie=0;ie<16;ie++)L(U[ie+1]);for(var pe=0;pe<=11;pe++)L(I[pe]);L(16);for(var ze=0;ze<16;ze++)L(E[ze+1]);for(var xt=0;xt<=161;xt++)L(A[xt]);L(1);for(var st=0;st<16;st++)L(Y[st+1]);for(var St=0;St<=11;St++)L(se[St]);L(17);for(var ot=0;ot<16;ot++)L(X[ot+1]);for(var Be=0;Be<=161;Be++)L(z[Be])})(),re(65498),re(12),L(3),L(1),L(0),L(2),L(17),L(3),L(17),L(0),L(63),L(0);var J=0,q=0,V=0;N=0,v=7,this.encode.displayName="_encode_";for(var ce,me,Ce,ge,Ge,te,he,de,Q,ee=j.data,Z=j.width,le=j.height,xe=4*Z,be=0;be<le;){for(ce=0;ce<xe;){for(Ge=xe*be+ce,he=-1,de=0,Q=0;Q<64;Q++)te=Ge+(de=Q>>3)*xe+(he=4*(7&Q)),be+de>=le&&(te-=xe*(be+1+de-le)),ce+he>=xe&&(te-=ce+he-xe+4),me=ee[te++],Ce=ee[te++],ge=ee[te++],P[Q]=(B[me]+B[Ce+256|0]+B[ge+512|0]>>16)-128,w[Q]=(B[me+768|0]+B[Ce+1024|0]+B[ge+1280|0]>>16)-128,M[Q]=(B[me+1280|0]+B[Ce+1536|0]+B[ge+1792|0]>>16)-128;J=fe(P,h,J,e,r),q=fe(w,m,q,n,i),V=fe(M,m,V,n,i),ce+=32}be+=8}if(v>=0){var ne=[];ne[1]=v+1,ne[0]=(1<<v+1)-1,F(ne)}return re(65497),new Uint8Array(y)},t=t||50,(function(){for(var j=String.fromCharCode,K=0;K<256;K++)k[K]=j(K)})(),e=$(U,I),n=$(Y,se),r=$(E,A),i=$(X,z),(function(){for(var j=1,K=2,J=1;J<=15;J++){for(var q=j;q<K;q++)p[32767+q]=J,_[32767+q]=[],_[32767+q][1]=J,_[32767+q][0]=q;for(var V=-(K-1);V<=-j;V++)p[32767+V]=J,_[32767+V]=[],_[32767+V][1]=J,_[32767+V][0]=K-1+V;j<<=1,K<<=1}})(),(function(){for(var j=0;j<256;j++)B[j]=19595*j,B[j+256|0]=38470*j,B[j+512|0]=7471*j+32768,B[j+768|0]=-11059*j,B[j+1024|0]=-21709*j,B[j+1280|0]=32768*j+8421375,B[j+1536|0]=-27439*j,B[j+1792|0]=-5329*j})(),T(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Vo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jT(t){function e(I){if(!I)throw Error("assert :P")}function n(I,E,A){for(var Y=0;4>Y;Y++)if(I[E+Y]!=A.charCodeAt(Y))return!0;return!1}function r(I,E,A,Y,se){for(var X=0;X<se;X++)I[E+X]=A[Y+X]}function i(I,E,A,Y){for(var se=0;se<Y;se++)I[E+se]=A}function a(I){return new Int32Array(I)}function o(I,E){for(var A=[],Y=0;Y<I;Y++)A.push(new E);return A}function c(I,E){var A=[];return(function Y(se,X,z){for(var $=z[X],F=0;F<$&&(se.push(z.length>X+1?[]:new E),!(z.length<X+1));F++)Y(se[F],X+1,z)})(A,0,I),A}var u=function(){var I=this;function E(S,R){for(var H=1<<R-1>>>0;S&H;)H>>>=1;return H?(S&H-1)+H:S}function A(S,R,H,ae,Ee){e(!(ae%H));do S[R+(ae-=H)]=Ee;while(0<ae)}function Y(S,R,H,ae,Ee){if(e(2328>=Ee),512>=Ee)var Me=a(512);else if((Me=a(Ee))==null)return 0;return(function(we,We,Qe,Xe,Dt,Gt){var qe,It,At=We,Zt=1<<Qe,kt=a(16),Jt=a(16);for(e(Dt!=0),e(Xe!=null),e(we!=null),e(0<Qe),It=0;It<Dt;++It){if(15<Xe[It])return 0;++kt[Xe[It]]}if(kt[0]==Dt)return 0;for(Jt[1]=0,qe=1;15>qe;++qe){if(kt[qe]>1<<qe)return 0;Jt[qe+1]=Jt[qe]+kt[qe]}for(It=0;It<Dt;++It)qe=Xe[It],0<Xe[It]&&(Gt[Jt[qe]++]=It);if(Jt[15]==1)return(Xe=new se).g=0,Xe.value=Gt[0],A(we,At,1,Zt,Xe),Zt;var is,ys=-1,hs=Zt-1,qs=0,Fs=1,yn=1,Vs=1<<Qe;for(It=0,qe=1,Dt=2;qe<=Qe;++qe,Dt<<=1){if(Fs+=yn<<=1,0>(yn-=kt[qe]))return 0;for(;0<kt[qe];--kt[qe])(Xe=new se).g=qe,Xe.value=Gt[It++],A(we,At+qs,Dt,Vs,Xe),qs=E(qs,qe)}for(qe=Qe+1,Dt=2;15>=qe;++qe,Dt<<=1){if(Fs+=yn<<=1,0>(yn-=kt[qe]))return 0;for(;0<kt[qe];--kt[qe]){if(Xe=new se,(qs&hs)!=ys){for(At+=Vs,is=1<<(ys=qe)-Qe;15>ys&&!(0>=(is-=kt[ys]));)++ys,is<<=1;Zt+=Vs=1<<(is=ys-Qe),we[We+(ys=qs&hs)].g=is+Qe,we[We+ys].value=At-We-ys}Xe.g=qe-Qe,Xe.value=Gt[It++],A(we,At+(qs>>Qe),Dt,Vs,Xe),qs=E(qs,qe)}}return Fs!=2*Jt[15]-1?0:Zt})(S,R,H,ae,Ee,Me)}function se(){this.value=this.g=0}function X(){this.value=this.g=0}function z(){this.G=o(5,se),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(oc,X)}function $(S,R,H,ae){e(S!=null),e(R!=null),e(2147483648>ae),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=R,S.pa=H,S.Jd=R,S.Yc=H+ae,S.Zc=4<=ae?H+ae-4+1:H,me(S)}function F(S,R){for(var H=0;0<R--;)H|=ge(S,128)<<R;return H}function L(S,R){var H=F(S,R);return Ce(S)?-H:H}function re(S,R,H,ae){var Ee,Me=0;for(e(S!=null),e(R!=null),e(4294967288>ae),S.Sb=ae,S.Ra=0,S.u=0,S.h=0,4<ae&&(ae=4),Ee=0;Ee<ae;++Ee)Me+=R[H+Ee]<<8*Ee;S.Ra=Me,S.bb=ae,S.oa=R,S.pa=H}function fe(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<$l-8>>>0,++S.bb,S.u-=8;q(S)&&(S.h=1,S.u=0)}function T(S,R){if(e(0<=R),!S.h&&R<=ya){var H=J(S)&Ma[R];return S.u+=R,fe(S),H}return S.h=1,S.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(S){return S.Ra>>>(S.u&$l-1)>>>0}function q(S){return e(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>$l}function V(S,R){S.u=R,S.h=q(S)}function ce(S){S.u>=Vl&&(e(S.u>=Vl),fe(S))}function me(S){e(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(e(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function Ce(S){return F(S,1)}function ge(S,R){var H=S.Ca;0>S.b&&me(S);var ae=S.b,Ee=H*R>>>8,Me=(S.I>>>ae>Ee)+0;for(Me?(H-=Ee,S.I-=Ee+1<<ae>>>0):H=Ee+1,ae=H,Ee=0;256<=ae;)Ee+=8,ae>>=8;return ae=7^Ee+wo[ae],S.b-=ae,S.Ca=(H<<ae)-1,Me}function Ge(S,R,H){S[R+0]=H>>24&255,S[R+1]=H>>16&255,S[R+2]=H>>8&255,S[R+3]=255&H}function te(S,R){return S[R+0]|S[R+1]<<8}function he(S,R){return te(S,R)|S[R+2]<<16}function de(S,R){return te(S,R)|te(S,R+2)<<16}function Q(S,R){var H=1<<R;return e(S!=null),e(0<R),S.X=a(H),S.X==null?0:(S.Mb=32-R,S.Xa=R,1)}function ee(S,R){e(S!=null),e(R!=null),e(S.Xa==R.Xa),r(R.X,0,S.X,0,1<<R.Xa)}function Z(){this.X=[],this.Xa=this.Mb=0}function le(S,R,H,ae){e(H!=null),e(ae!=null);var Ee=H[0],Me=ae[0];return Ee==0&&(Ee=(S*Me+R/2)/R),Me==0&&(Me=(R*Ee+S/2)/S),0>=Ee||0>=Me?0:(H[0]=Ee,ae[0]=Me,1)}function xe(S,R){return S+(1<<R)-1>>>R}function be(S,R){return((4278255360&S)+(4278255360&R)>>>0&4278255360)+((16711935&S)+(16711935&R)>>>0&16711935)>>>0}function ne(S,R){I[R]=function(H,ae,Ee,Me,we,We,Qe){var Xe;for(Xe=0;Xe<we;++Xe){var Dt=I[S](We[Qe+Xe-1],Ee,Me+Xe);We[Qe+Xe]=be(H[ae+Xe],Dt)}}}function ie(){this.ud=this.hd=this.jd=0}function pe(S,R){return((4278124286&(S^R))>>>1)+(S&R)>>>0}function ze(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function xt(S,R){return ze(S+(S-R+.5>>1))}function st(S,R,H){return Math.abs(R-H)-Math.abs(S-H)}function St(S,R,H,ae,Ee,Me,we){for(ae=Me[we-1],H=0;H<Ee;++H)Me[we+H]=ae=be(S[R+H],ae)}function ot(S,R,H,ae,Ee){var Me;for(Me=0;Me<H;++Me){var we=S[R+Me],We=we>>8&255,Qe=16711935&(Qe=(Qe=16711935&we)+((We<<16)+We));ae[Ee+Me]=(4278255360&we)+Qe>>>0}}function Be(S,R){R.jd=255&S,R.hd=S>>8&255,R.ud=S>>16&255}function lt(S,R,H,ae,Ee,Me){var we;for(we=0;we<ae;++we){var We=R[H+we],Qe=We>>>8,Xe=We,Dt=255&(Dt=(Dt=We>>>16)+((S.jd<<24>>24)*(Qe<<24>>24)>>>5));Xe=255&(Xe=(Xe+=(S.hd<<24>>24)*(Qe<<24>>24)>>>5)+((S.ud<<24>>24)*(Dt<<24>>24)>>>5)),Ee[Me+we]=(4278255360&We)+(Dt<<16)+Xe}}function pt(S,R,H,ae,Ee){I[R]=function(Me,we,We,Qe,Xe,Dt,Gt,qe,It){for(Qe=Gt;Qe<qe;++Qe)for(Gt=0;Gt<It;++Gt)Xe[Dt++]=Ee(We[ae(Me[we++])])},I[S]=function(Me,we,We,Qe,Xe,Dt,Gt){var qe=8>>Me.b,It=Me.Ea,At=Me.K[0],Zt=Me.w;if(8>qe)for(Me=(1<<Me.b)-1,Zt=(1<<qe)-1;we<We;++we){var kt,Jt=0;for(kt=0;kt<It;++kt)kt&Me||(Jt=ae(Qe[Xe++])),Dt[Gt++]=Ee(At[Jt&Zt]),Jt>>=qe}else I["VP8LMapColor"+H](Qe,Xe,At,Zt,Dt,Gt,we,We,It)}}function mt(S,R,H,ae,Ee){for(H=R+H;R<H;){var Me=S[R++];ae[Ee++]=Me>>16&255,ae[Ee++]=Me>>8&255,ae[Ee++]=255&Me}}function Ye(S,R,H,ae,Ee){for(H=R+H;R<H;){var Me=S[R++];ae[Ee++]=Me>>16&255,ae[Ee++]=Me>>8&255,ae[Ee++]=255&Me,ae[Ee++]=Me>>24&255}}function at(S,R,H,ae,Ee){for(H=R+H;R<H;){var Me=(we=S[R++])>>16&240|we>>12&15,we=240&we|we>>28&15;ae[Ee++]=Me,ae[Ee++]=we}}function Fe(S,R,H,ae,Ee){for(H=R+H;R<H;){var Me=(we=S[R++])>>16&248|we>>13&7,we=we>>5&224|we>>3&31;ae[Ee++]=Me,ae[Ee++]=we}}function tt(S,R,H,ae,Ee){for(H=R+H;R<H;){var Me=S[R++];ae[Ee++]=255&Me,ae[Ee++]=Me>>8&255,ae[Ee++]=Me>>16&255}}function ct(S,R,H,ae,Ee,Me){if(Me==0)for(H=R+H;R<H;)Ge(ae,((Me=S[R++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Ee+=32;else r(ae,Ee,S,R,H)}function Mt(S,R){I[R][0]=I[S+"0"],I[R][1]=I[S+"1"],I[R][2]=I[S+"2"],I[R][3]=I[S+"3"],I[R][4]=I[S+"4"],I[R][5]=I[S+"5"],I[R][6]=I[S+"6"],I[R][7]=I[S+"7"],I[R][8]=I[S+"8"],I[R][9]=I[S+"9"],I[R][10]=I[S+"10"],I[R][11]=I[S+"11"],I[R][12]=I[S+"12"],I[R][13]=I[S+"13"],I[R][14]=I[S+"0"],I[R][15]=I[S+"0"]}function dt(S){return S==dh||S==D0||S==Kd||S==R0}function Je(){this.eb=[],this.size=this.A=this.fb=0}function De(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $e(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Je,this.f.kb=new De,this.sd=null}function Ne(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ye(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ue(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function ue(S,R){var H=S.T,ae=R.ba.f.RGBA,Ee=ae.eb,Me=ae.fb+S.ka*ae.A,we=Yi[R.ba.S],We=S.y,Qe=S.O,Xe=S.f,Dt=S.N,Gt=S.ea,qe=S.W,It=R.cc,At=R.dc,Zt=R.Mc,kt=R.Nc,Jt=S.ka,is=S.ka+S.T,ys=S.U,hs=ys+1>>1;for(Jt==0?we(We,Qe,null,null,Xe,Dt,Gt,qe,Xe,Dt,Gt,qe,Ee,Me,null,null,ys):(we(R.ec,R.fc,We,Qe,It,At,Zt,kt,Xe,Dt,Gt,qe,Ee,Me-ae.A,Ee,Me,ys),++H);Jt+2<is;Jt+=2)It=Xe,At=Dt,Zt=Gt,kt=qe,Dt+=S.Rc,qe+=S.Rc,Me+=2*ae.A,we(We,(Qe+=2*S.fa)-S.fa,We,Qe,It,At,Zt,kt,Xe,Dt,Gt,qe,Ee,Me-ae.A,Ee,Me,ys);return Qe+=S.fa,S.j+is<S.o?(r(R.ec,R.fc,We,Qe,ys),r(R.cc,R.dc,Xe,Dt,hs),r(R.Mc,R.Nc,Gt,qe,hs),H--):1&is||we(We,Qe,null,null,Xe,Dt,Gt,qe,Xe,Dt,Gt,qe,Ee,Me+ae.A,null,null,ys),H}function Oe(S,R,H){var ae=S.F,Ee=[S.J];if(ae!=null){var Me=S.U,we=R.ba.S,We=we==ch||we==Kd;R=R.ba.f.RGBA;var Qe=[0],Xe=S.ka;Qe[0]=S.T,S.Kb&&(Xe==0?--Qe[0]:(--Xe,Ee[0]-=S.width),S.j+S.ka+S.T==S.o&&(Qe[0]=S.o-S.j-Xe));var Dt=R.eb;Xe=R.fb+Xe*R.A,S=ih(ae,Ee[0],S.width,Me,Qe,Dt,Xe+(We?0:3),R.A),e(H==Qe),S&&dt(we)&&Qc(Dt,Xe,We,Me,Qe,R.A)}return 0}function Ze(S){var R=S.ma,H=R.ba.S,ae=11>H,Ee=H==aa||H==rl||H==ch||H==Fd||H==12||dt(H);if(R.memory=null,R.Ib=null,R.Jb=null,R.Nd=null,!Oo(R.Oa,S,Ee?11:12))return 0;if(Ee&&dt(H)&&th(),S.da)alert("todo:use_scaling");else{if(ae){if(R.Ib=Ue,S.Kb){if(H=S.U+1>>1,R.memory=a(S.U+2*H),R.memory==null)return 0;R.ec=R.memory,R.fc=0,R.cc=R.ec,R.dc=R.fc+S.U,R.Mc=R.cc,R.Nc=R.dc+H,R.Ib=ue,th()}}else alert("todo:EmitYUV");Ee&&(R.Jb=Oe,ae&&Ol())}if(ae&&!gc){for(S=0;256>S;++S)$i[S]=89858*(S-128)+$d>>dl,sy[S]=-22014*(S-128)+$d,F_[S]=-45773*(S-128),O0[S]=113618*(S-128)+$d>>dl;for(S=zc;S<mc;++S)R=76283*(S-16)+$d>>dl,ny[S-zc]=ht(R,255),ry[S-zc]=ht(R+8>>4,15);gc=1}return 1}function Le(S){var R=S.ma,H=S.U,ae=S.T;return e(!(1&S.ka)),0>=H||0>=ae?0:(H=R.Ib(S,R),R.Jb!=null&&R.Jb(S,R,H),R.Dc+=H,1)}function vt(S){S.ma.memory=null}function je(S,R,H,ae){return T(S,8)!=47?0:(R[0]=T(S,14)+1,H[0]=T(S,14)+1,ae[0]=T(S,1),T(S,3)!=0?0:!S.h)}function ut(S,R){if(4>S)return S+1;var H=S-2>>1;return(2+(1&S)<<H)+T(R,H)+1}function gt(S,R){return 120<R?R-120:1<=(H=((H=al[R-1])>>4)*S+(8-(15&H)))?H:1;var H}function jt(S,R,H){var ae=J(H),Ee=S[R+=255&ae].g-8;return 0<Ee&&(V(H,H.u+8),ae=J(H),R+=S[R].value,R+=ae&(1<<Ee)-1),V(H,H.u+S[R].g),S[R].value}function Ve(S,R,H){return H.g+=S.g,H.value+=S.value<<R>>>0,e(8>=H.g),S.g}function Vt(S,R,H){var ae=S.xc;return e((R=ae==0?0:S.vc[S.md*(H>>ae)+(R>>ae)])<S.Wb),S.Ya[R]}function ke(S,R,H,ae){var Ee=S.ab,Me=S.c*R,we=S.C;R=we+R;var We=H,Qe=ae;for(ae=S.Ta,H=S.Ua;0<Ee--;){var Xe=S.gc[Ee],Dt=we,Gt=R,qe=We,It=Qe,At=(Qe=ae,We=H,Xe.Ea);switch(e(Dt<Gt),e(Gt<=Xe.nc),Xe.hc){case 2:ri(qe,It,(Gt-Dt)*At,Qe,We);break;case 0:var Zt=Dt,kt=Gt,Jt=Qe,is=We,ys=(Vs=Xe).Ea;Zt==0&&(Ud(qe,It,null,null,1,Jt,is),St(qe,It+1,0,0,ys-1,Jt,is+1),It+=ys,is+=ys,++Zt);for(var hs=1<<Vs.b,qs=hs-1,Fs=xe(ys,Vs.b),yn=Vs.K,Vs=Vs.w+(Zt>>Vs.b)*Fs;Zt<kt;){var Ln=yn,Or=Vs,Sn=1;for(Bd(qe,It,Jt,is-ys,1,Jt,is);Sn<ys;){var Ks=(Sn&~qs)+hs;Ks>ys&&(Ks=ys),(0,Lo[Ln[Or++]>>8&15])(qe,It+ +Sn,Jt,is+Sn-ys,Ks-Sn,Jt,is+Sn),Sn=Ks}It+=ys,is+=ys,++Zt&qs||(Vs+=Fs)}Gt!=Xe.nc&&r(Qe,We-At,Qe,We+(Gt-Dt-1)*At,At);break;case 1:for(At=qe,kt=It,ys=(qe=Xe.Ea)-(is=qe&~(Jt=(It=1<<Xe.b)-1)),Zt=xe(qe,Xe.b),hs=Xe.K,Xe=Xe.w+(Dt>>Xe.b)*Zt;Dt<Gt;){for(qs=hs,Fs=Xe,yn=new ie,Vs=kt+is,Ln=kt+qe;kt<Vs;)Be(qs[Fs++],yn),Gd(yn,At,kt,It,Qe,We),kt+=It,We+=It;kt<Ln&&(Be(qs[Fs++],yn),Gd(yn,At,kt,ys,Qe,We),kt+=ys,We+=ys),++Dt&Jt||(Xe+=Zt)}break;case 3:if(qe==Qe&&It==We&&0<Xe.b){for(kt=Qe,qe=At=We+(Gt-Dt)*At-(is=(Gt-Dt)*xe(Xe.Ea,Xe.b)),It=Qe,Jt=We,Zt=[],is=(ys=is)-1;0<=is;--is)Zt[is]=It[Jt+is];for(is=ys-1;0<=is;--is)kt[qe+is]=Zt[is];C0(Xe,Dt,Gt,Qe,At,Qe,We)}else C0(Xe,Dt,Gt,qe,It,Qe,We)}We=ae,Qe=H}Qe!=H&&r(ae,H,We,Qe,Me)}function ss(S,R){var H=S.V,ae=S.Ba+S.c*S.C,Ee=R-S.C;if(e(R<=S.l.o),e(16>=Ee),0<Ee){var Me=S.l,we=S.Ta,We=S.Ua,Qe=Me.width;if(ke(S,Ee,H,ae),Ee=We=[We],e((H=S.C)<(ae=R)),e(Me.v<Me.va),ae>Me.o&&(ae=Me.o),H<Me.j){var Xe=Me.j-H;H=Me.j,Ee[0]+=Xe*Qe}if(H>=ae?H=0:(Ee[0]+=4*Me.v,Me.ka=H-Me.j,Me.U=Me.va-Me.v,Me.T=ae-H,H=1),H){if(We=We[0],11>(H=S.ca).S){var Dt=H.f.RGBA,Gt=(ae=H.S,Ee=Me.U,Me=Me.T,Xe=Dt.eb,Dt.A),qe=Me;for(Dt=Dt.fb+S.Ma*Dt.A;0<qe--;){var It=we,At=We,Zt=Ee,kt=Xe,Jt=Dt;switch(ae){case v0:Wd(It,At,Zt,kt,Jt);break;case aa:Po(It,At,Zt,kt,Jt);break;case dh:Po(It,At,Zt,kt,Jt),Qc(kt,Jt,0,Zt,1,0);break;case E0:Fc(It,At,Zt,kt,Jt);break;case rl:ct(It,At,Zt,kt,Jt,1);break;case D0:ct(It,At,Zt,kt,Jt,1),Qc(kt,Jt,0,Zt,1,0);break;case ch:ct(It,At,Zt,kt,Jt,0);break;case Kd:ct(It,At,Zt,kt,Jt,0),Qc(kt,Jt,1,Zt,1,0);break;case Fd:Ao(It,At,Zt,kt,Jt);break;case R0:Ao(It,At,Zt,kt,Jt),nl(kt,Jt,Zt,1,0);break;case cc:ql(It,At,Zt,kt,Jt);break;default:e(0)}We+=Qe,Dt+=Gt}S.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(S.Ma<=H.height)}}S.C=R,e(S.C<=S.i)}function ls(S){var R;if(0<S.ua)return 0;for(R=0;R<S.Wb;++R){var H=S.Ya[R].G,ae=S.Ya[R].H;if(0<H[1][ae[1]+0].g||0<H[2][ae[2]+0].g||0<H[3][ae[3]+0].g)return 0}return 1}function ds(S,R,H,ae,Ee,Me){if(S.Z!=0){var we=S.qd,We=S.rd;for(e(Bo[S.Z]!=null);R<H;++R)Bo[S.Z](we,We,ae,Ee,ae,Ee,Me),we=ae,We=Ee,Ee+=Me;S.qd=we,S.rd=We}}function vs(S,R){var H=S.l.ma,ae=H.Z==0||H.Z==1?S.l.j:S.C;if(ae=S.C<ae?ae:S.C,e(R<=S.l.o),R>ae){var Ee=S.l.width,Me=H.ca,we=H.tb+Ee*ae,We=S.V,Qe=S.Ba+S.c*ae,Xe=S.gc;e(S.ab==1),e(Xe[0].hc==3),Hl(Xe[0],ae,R,We,Qe,Me,we),ds(H,ae,R,Me,we,Ee)}S.C=S.Ma=R}function Ss(S,R,H,ae,Ee,Me,we){var We=S.$/ae,Qe=S.$%ae,Xe=S.m,Dt=S.s,Gt=H+S.$,qe=Gt;Ee=H+ae*Ee;var It=H+ae*Me,At=280+Dt.ua,Zt=S.Pb?We:16777216,kt=0<Dt.ua?Dt.Wa:null,Jt=Dt.wc,is=Gt<It?Vt(Dt,Qe,We):null;e(S.C<Me),e(It<=Ee);var ys=!1;e:for(;;){for(;ys||Gt<It;){var hs=0;if(We>=Zt){var qs=Gt-H;e((Zt=S).Pb),Zt.wd=Zt.m,Zt.xd=qs,0<Zt.s.ua&&ee(Zt.s.Wa,Zt.s.vb),Zt=We+dc}if(Qe&Jt||(is=Vt(Dt,Qe,We)),e(is!=null),is.Qb&&(R[Gt]=is.qb,ys=!0),!ys)if(ce(Xe),is.jc){hs=Xe,qs=R;var Fs=Gt,yn=is.pd[J(hs)&oc-1];e(is.jc),256>yn.g?(V(hs,hs.u+yn.g),qs[Fs]=yn.value,hs=0):(V(hs,hs.u+yn.g-256),e(256<=yn.value),hs=yn.value),hs==0&&(ys=!0)}else hs=jt(is.G[0],is.H[0],Xe);if(Xe.h)break;if(ys||256>hs){if(!ys)if(is.nd)R[Gt]=(is.qb|hs<<8)>>>0;else{if(ce(Xe),ys=jt(is.G[1],is.H[1],Xe),ce(Xe),qs=jt(is.G[2],is.H[2],Xe),Fs=jt(is.G[3],is.H[3],Xe),Xe.h)break;R[Gt]=(Fs<<24|ys<<16|hs<<8|qs)>>>0}if(ys=!1,++Gt,++Qe>=ae&&(Qe=0,++We,we!=null&&We<=Me&&!(We%16)&&we(S,We),kt!=null))for(;qe<Gt;)hs=R[qe++],kt.X[(506832829*hs&4294967295)>>>kt.Mb]=hs}else if(280>hs){if(hs=ut(hs-256,Xe),qs=jt(is.G[4],is.H[4],Xe),ce(Xe),qs=gt(ae,qs=ut(qs,Xe)),Xe.h)break;if(Gt-H<qs||Ee-Gt<hs)break e;for(Fs=0;Fs<hs;++Fs)R[Gt+Fs]=R[Gt+Fs-qs];for(Gt+=hs,Qe+=hs;Qe>=ae;)Qe-=ae,++We,we!=null&&We<=Me&&!(We%16)&&we(S,We);if(e(Gt<=Ee),Qe&Jt&&(is=Vt(Dt,Qe,We)),kt!=null)for(;qe<Gt;)hs=R[qe++],kt.X[(506832829*hs&4294967295)>>>kt.Mb]=hs}else{if(!(hs<At))break e;for(ys=hs-280,e(kt!=null);qe<Gt;)hs=R[qe++],kt.X[(506832829*hs&4294967295)>>>kt.Mb]=hs;hs=Gt,e(!(ys>>>(qs=kt).Xa)),R[hs]=qs.X[ys],ys=!0}ys||e(Xe.h==q(Xe))}if(S.Pb&&Xe.h&&Gt<Ee)e(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&ee(S.s.vb,S.s.Wa);else{if(Xe.h)break e;we!=null&&we(S,We>Me?Me:We),S.a=0,S.$=Gt-H}return 1}return S.a=3,0}function Ae(S){e(S!=null),S.vc=null,S.yc=null,S.Ya=null;var R=S.Wa;R!=null&&(R.X=null),S.vb=null,e(S!=null)}function ft(){var S=new gn;return S==null?null:(S.a=0,S.xb=Im,Mt("Predictor","VP8LPredictors"),Mt("Predictor","VP8LPredictors_C"),Mt("PredictorAdd","VP8LPredictorsAdd"),Mt("PredictorAdd","VP8LPredictorsAdd_C"),ri=ot,Gd=lt,Wd=mt,Po=Ye,Ao=at,ql=Fe,Fc=tt,I.VP8LMapColor32b=zl,I.VP8LMapColor8b=Fi,S)}function rt(S,R,H,ae,Ee){var Me=1,we=[S],We=[R],Qe=ae.m,Xe=ae.s,Dt=null,Gt=0;e:for(;;){if(H)for(;Me&&T(Qe,1);){var qe=we,It=We,At=ae,Zt=1,kt=At.m,Jt=At.gc[At.ab],is=T(kt,2);if(At.Oc&1<<is)Me=0;else{switch(At.Oc|=1<<is,Jt.hc=is,Jt.Ea=qe[0],Jt.nc=It[0],Jt.K=[null],++At.ab,e(4>=At.ab),is){case 0:case 1:Jt.b=T(kt,3)+2,Zt=rt(xe(Jt.Ea,Jt.b),xe(Jt.nc,Jt.b),0,At,Jt.K),Jt.K=Jt.K[0];break;case 3:var ys,hs=T(kt,8)+1,qs=16<hs?0:4<hs?1:2<hs?2:3;if(qe[0]=xe(Jt.Ea,qs),Jt.b=qs,ys=Zt=rt(hs,1,0,At,Jt.K)){var Fs,yn=hs,Vs=Jt,Ln=1<<(8>>Vs.b),Or=a(Ln);if(Or==null)ys=0;else{var Sn=Vs.K[0],Ks=Vs.w;for(Or[0]=Vs.K[0][0],Fs=1;Fs<1*yn;++Fs)Or[Fs]=be(Sn[Ks+Fs],Or[Fs-1]);for(;Fs<4*Ln;++Fs)Or[Fs]=0;Vs.K[0]=null,Vs.K[0]=Or,ys=1}}Zt=ys;break;case 2:break;default:e(0)}Me=Zt}}if(we=we[0],We=We[0],Me&&T(Qe,1)&&!(Me=1<=(Gt=T(Qe,4))&&11>=Gt)){ae.a=3;break e}var Rs;if(Rs=Me)t:{var Wr,un,Dn,ar=ae,Ni=we,Vi=We,Er=Gt,ui=H,la=ar.m,hi=ar.s,jn=[null],Vn=1,Fr=0,Zn=ll[Er];s:for(;;){if(ui&&T(la,1)){var Si=T(la,3)+2,Kr=xe(Ni,Si),zn=xe(Vi,Si),li=Kr*zn;if(!rt(Kr,zn,0,ar,jn))break s;for(jn=jn[0],hi.xc=Si,Wr=0;Wr<li;++Wr){var lr=jn[Wr]>>8&65535;jn[Wr]=lr,lr>=Vn&&(Vn=lr+1)}}if(la.h)break s;for(un=0;5>un;++un){var fi=$c[un];!un&&0<Er&&(fi+=1<<Er),Fr<fi&&(Fr=fi)}var mi=o(Vn*Zn,se),pr=Vn,Qn=o(pr,z);if(Qn==null)var oa=null;else e(65536>=pr),oa=Qn;var qr=a(Fr);if(oa==null||qr==null||mi==null){ar.a=1;break s}var rn=mi;for(Wr=Dn=0;Wr<Vn;++Wr){var ln=oa[Wr],Hn=ln.G,Ia=ln.H,ul=0,Ca=1,gi=0;for(un=0;5>un;++un){fi=$c[un],Hn[un]=rn,Ia[un]=Dn,!un&&0<Er&&(fi+=1<<Er);r:{var _c,xc=fi,L0=ar,Dr=qr,Om=rn,wm=Dn,P0=0,Go=L0.m,iy=T(Go,1);if(i(Dr,0,0,xc),iy){var Lm=T(Go,1)+1,Pm=T(Go,1),A0=T(Go,Pm==0?1:8);Dr[A0]=1,Lm==2&&(Dr[A0=T(Go,8)]=1);var wi=1}else{var Xr=a(19),mh=T(Go,4)+4;if(19<mh){L0.a=3;var pc=0;break r}for(_c=0;_c<mh;++_c)Xr[uh[_c]]=T(Go,3);var zd=void 0,Hc=void 0,Zl=L0,k0=Xr,Hd=xc,U0=Dr,B0=0,Wo=Zl.m,Am=8,km=o(128,se);n:for(;Y(km,0,7,k0,19);){if(T(Wo,1)){var K_=2+2*T(Wo,3);if((zd=2+T(Wo,K_))>Hd)break n}else zd=Hd;for(Hc=0;Hc<Hd&&zd--;){ce(Wo);var Um=km[0+(127&J(Wo))];V(Wo,Wo.u+Um.g);var yc=Um.value;if(16>yc)U0[Hc++]=yc,yc!=0&&(Am=yc);else{var Q_=yc==16,Y_=yc-16,$_=Qd[Y_],Bm=T(Wo,il[Y_])+$_;if(Hc+Bm>Hd)break n;for(var V_=Q_?Am:0;0<Bm--;)U0[Hc++]=V_}}B0=1;break n}B0||(Zl.a=3),wi=B0}(wi=wi&&!Go.h)&&(P0=Y(Om,wm,8,Dr,xc)),wi&&P0!=0?pc=P0:(L0.a=3,pc=0)}if(pc==0)break s;if(Ca&&T0[un]==1&&(Ca=rn[Dn].g==0),ul+=rn[Dn].g,Dn+=pc,3>=un){var qc,G0=qr[0];for(qc=1;qc<fi;++qc)qr[qc]>G0&&(G0=qr[qc]);gi+=G0}}if(ln.nd=Ca,ln.Qb=0,Ca&&(ln.qb=(Hn[3][Ia[3]+0].value<<24|Hn[1][Ia[1]+0].value<<16|Hn[2][Ia[2]+0].value)>>>0,ul==0&&256>Hn[0][Ia[0]+0].value&&(ln.Qb=1,ln.qb+=Hn[0][Ia[0]+0].value<<8)),ln.jc=!ln.Qb&&6>gi,ln.jc){var gh,eo=ln;for(gh=0;gh<oc;++gh){var Fo=gh,Ko=eo.pd[Fo],W0=eo.G[0][eo.H[0]+Fo];256<=W0.value?(Ko.g=W0.g+256,Ko.value=W0.value):(Ko.g=0,Ko.value=0,Fo>>=Ve(W0,8,Ko),Fo>>=Ve(eo.G[1][eo.H[1]+Fo],16,Ko),Fo>>=Ve(eo.G[2][eo.H[2]+Fo],0,Ko),Ve(eo.G[3][eo.H[3]+Fo],24,Ko))}}}hi.vc=jn,hi.Wb=Vn,hi.Ya=oa,hi.yc=mi,Rs=1;break t}Rs=0}if(!(Me=Rs)){ae.a=3;break e}if(0<Gt){if(Xe.ua=1<<Gt,!Q(Xe.Wa,Gt)){ae.a=1,Me=0;break e}}else Xe.ua=0;var F0=ae,Xc=we,z_=We,qd=F0.s,Xd=qd.xc;if(F0.c=Xc,F0.i=z_,qd.md=xe(Xc,Xd),qd.wc=Xd==0?-1:(1<<Xd)-1,H){ae.xb=uc;break e}if((Dt=a(we*We))==null){ae.a=1,Me=0;break e}Me=(Me=Ss(ae,Dt,0,we,We,We,null))&&!Qe.h;break e}return Me?(Ee!=null?Ee[0]=Dt:(e(Dt==null),e(H)),ae.$=0,H||Ae(Xe)):Ae(Xe),Me}function Wt(S,R){var H=S.c*S.i,ae=H+R+16*R;return e(S.c<=R),S.V=a(ae),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+H+R,1)}function _t(S,R){var H=S.C,ae=R-H,Ee=S.V,Me=S.Ba+S.c*H;for(e(R<=S.l.o);0<ae;){var we=16<ae?16:ae,We=S.l.ma,Qe=S.l.width,Xe=Qe*we,Dt=We.ca,Gt=We.tb+Qe*H,qe=S.Ta,It=S.Ua;ke(S,we,Ee,Me),Ka(qe,It,Dt,Gt,Xe),ds(We,H,H+we,Dt,Gt,Qe),ae-=we,Ee+=we*S.c,H+=we}e(H==R),S.C=S.Ma=R}function qt(){this.ub=this.yd=this.td=this.Rb=0}function Ot(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _e(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Se(){this.Yb=(function(){var S=[];return(function R(H,ae,Ee){for(var Me=Ee[ae],we=0;we<Me&&(H.push(Ee.length>ae+1?[]:0),!(Ee.length<ae+1));we++)R(H[we],ae+1,Ee)})(S,0,[3,11]),S})()}function Ie(){this.jb=a(3),this.Wc=c([4,8],Se),this.Xc=c([4,17],Se)}function Te(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function nt(){this.ld=this.La=this.dd=this.tc=0}function Re(){this.Na=this.la=0}function Ct(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ke(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Et(){this.uc=this.M=this.Nb=0,this.wa=Array(new nt),this.Y=0,this.ya=Array(new Ke),this.aa=0,this.l=new Pt}function Rt(){this.y=a(16),this.f=a(8),this.ea=a(8)}function He(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new qt,this.Kc=new Ot,this.ed=new Te,this.Qa=new _e,this.Ic=this.$c=this.Aa=0,this.D=new Et,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,j),this.ia=0,this.pb=o(4,Ct),this.Pa=new Ie,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Rt),this.Hd=0,this.rb=Array(new Re),this.sb=0,this.wa=Array(new nt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ke),this.L=this.aa=0,this.gd=c([4,2],nt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ht(S,R){return 0>S?0:S>R?R:S}function Pt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bt(){var S=new He;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,Qa||(Qa=Ut)),S}function Yt(S,R,H){return S.a==0&&(S.a=R,S.sc=H,S.cb=0),0}function Xt(S,R,H){return 3<=H&&S[R+0]==157&&S[R+1]==1&&S[R+2]==42}function ts(S,R){if(S==null)return 0;if(S.a=0,S.sc="OK",R==null)return Yt(S,2,"null VP8Io passed to VP8GetHeaders()");var H=R.data,ae=R.w,Ee=R.ha;if(4>Ee)return Yt(S,7,"Truncated header.");var Me=H[ae+0]|H[ae+1]<<8|H[ae+2]<<16,we=S.Od;if(we.Rb=!(1&Me),we.td=Me>>1&7,we.yd=Me>>4&1,we.ub=Me>>5,3<we.td)return Yt(S,3,"Incorrect keyframe parameters.");if(!we.yd)return Yt(S,4,"Frame not displayable.");ae+=3,Ee-=3;var We=S.Kc;if(we.Rb){if(7>Ee)return Yt(S,7,"cannot parse picture header");if(!Xt(H,ae,Ee))return Yt(S,3,"Bad code word");We.c=16383&(H[ae+4]<<8|H[ae+3]),We.Td=H[ae+4]>>6,We.i=16383&(H[ae+6]<<8|H[ae+5]),We.Ud=H[ae+6]>>6,ae+=7,Ee-=7,S.za=We.c+15>>4,S.Ub=We.i+15>>4,R.width=We.c,R.height=We.i,R.Da=0,R.j=0,R.v=0,R.va=R.width,R.o=R.height,R.da=0,R.ib=R.width,R.hb=R.height,R.U=R.width,R.T=R.height,i((Me=S.Pa).jb,0,255,Me.jb.length),e((Me=S.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(we.ub>Ee)return Yt(S,7,"bad partition length");$(Me=S.m,H,ae,we.ub),ae+=we.ub,Ee-=we.ub,we.Rb&&(We.Ld=Ce(Me),We.Kd=Ce(Me)),We=S.Qa;var Qe,Xe=S.Pa;if(e(Me!=null),e(We!=null),We.Cb=Ce(Me),We.Cb){if(We.Bb=Ce(Me),Ce(Me)){for(We.Fb=Ce(Me),Qe=0;4>Qe;++Qe)We.Zb[Qe]=Ce(Me)?L(Me,7):0;for(Qe=0;4>Qe;++Qe)We.Lb[Qe]=Ce(Me)?L(Me,6):0}if(We.Bb)for(Qe=0;3>Qe;++Qe)Xe.jb[Qe]=Ce(Me)?F(Me,8):255}else We.Bb=0;if(Me.Ka)return Yt(S,3,"cannot parse segment header");if((We=S.ed).zd=Ce(Me),We.Tb=F(Me,6),We.wb=F(Me,3),We.Pc=Ce(Me),We.Pc&&Ce(Me)){for(Xe=0;4>Xe;++Xe)Ce(Me)&&(We.vd[Xe]=L(Me,6));for(Xe=0;4>Xe;++Xe)Ce(Me)&&(We.od[Xe]=L(Me,6))}if(S.L=We.Tb==0?0:We.zd?1:2,Me.Ka)return Yt(S,3,"cannot parse filter header");var Dt=Ee;if(Ee=Qe=ae,ae=Qe+Dt,We=Dt,S.Xb=(1<<F(S.m,2))-1,Dt<3*(Xe=S.Xb))H=7;else{for(Qe+=3*Xe,We-=3*Xe,Dt=0;Dt<Xe;++Dt){var Gt=H[Ee+0]|H[Ee+1]<<8|H[Ee+2]<<16;Gt>We&&(Gt=We),$(S.Jc[+Dt],H,Qe,Gt),Qe+=Gt,We-=Gt,Ee+=3}$(S.Jc[+Xe],H,Qe,We),H=Qe<ae?0:5}if(H!=0)return Yt(S,H,"cannot parse partitions");for(H=F(Qe=S.m,7),Ee=Ce(Qe)?L(Qe,4):0,ae=Ce(Qe)?L(Qe,4):0,We=Ce(Qe)?L(Qe,4):0,Xe=Ce(Qe)?L(Qe,4):0,Qe=Ce(Qe)?L(Qe,4):0,Dt=S.Qa,Gt=0;4>Gt;++Gt){if(Dt.Cb){var qe=Dt.Zb[Gt];Dt.Fb||(qe+=H)}else{if(0<Gt){S.pb[Gt]=S.pb[0];continue}qe=H}var It=S.pb[Gt];It.Sc[0]=ol[ht(qe+Ee,127)],It.Sc[1]=cl[ht(qe+0,127)],It.Eb[0]=2*ol[ht(qe+ae,127)],It.Eb[1]=101581*cl[ht(qe+We,127)]>>16,8>It.Eb[1]&&(It.Eb[1]=8),It.Qc[0]=ol[ht(qe+Xe,117)],It.Qc[1]=cl[ht(qe+Qe,127)],It.lc=qe+Qe}if(!we.Rb)return Yt(S,4,"Not a key frame.");for(Ce(Me),we=S.Pa,H=0;4>H;++H){for(Ee=0;8>Ee;++Ee)for(ae=0;3>ae;++ae)for(We=0;11>We;++We)Xe=ge(Me,jr[H][Ee][ae][We])?F(Me,8):W_[H][Ee][ae][We],we.Wc[H][Ee].Yb[ae][We]=Xe;for(Ee=0;17>Ee;++Ee)we.Xc[H][Ee]=we.Wc[H][Pn[Ee]]}return S.kc=Ce(Me),S.kc&&(S.Bd=F(Me,8)),S.cb=1}function Ut(S,R,H,ae,Ee,Me,we){var We=R[Ee].Yb[H];for(H=0;16>Ee;++Ee){if(!ge(S,We[H+0]))return Ee;for(;!ge(S,We[H+1]);)if(We=R[++Ee].Yb[0],H=0,Ee==16)return 16;var Qe=R[Ee+1].Yb;if(ge(S,We[H+2])){var Xe=S,Dt=0;if(ge(Xe,(qe=We)[(Gt=H)+3]))if(ge(Xe,qe[Gt+6])){for(We=0,Gt=2*(Dt=ge(Xe,qe[Gt+8]))+(qe=ge(Xe,qe[Gt+9+Dt])),Dt=0,qe=G_[Gt];qe[We];++We)Dt+=Dt+ge(Xe,qe[We]);Dt+=3+(8<<Gt)}else ge(Xe,qe[Gt+7])?(Dt=7+2*ge(Xe,165),Dt+=ge(Xe,145)):Dt=5+ge(Xe,159);else Dt=ge(Xe,qe[Gt+4])?3+ge(Xe,qe[Gt+5]):2;We=Qe[2]}else Dt=1,We=Qe[1];Qe=we+Mm[Ee],0>(Xe=S).b&&me(Xe);var Gt,qe=Xe.b,It=(Gt=Xe.Ca>>1)-(Xe.I>>qe)>>31;--Xe.b,Xe.Ca+=It,Xe.Ca|=1,Xe.I-=(Gt+1&It)<<qe,Me[Qe]=((Dt^It)-It)*ae[(0<Ee)+0]}return 16}function Ms(S){var R=S.rb[S.sb-1];R.la=0,R.Na=0,i(S.zc,0,0,S.zc.length),S.ja=0}function Cs(S,R,H,ae,Ee){Ee=S[R+H+32*ae]+(Ee>>3),S[R+H+32*ae]=-256&Ee?0>Ee?0:255:Ee}function Bs(S,R,H,ae,Ee,Me){Cs(S,R,0,H,ae+Ee),Cs(S,R,1,H,ae+Me),Cs(S,R,2,H,ae-Me),Cs(S,R,3,H,ae-Ee)}function _s(S){return(20091*S>>16)+S}function Es(S,R,H,ae){var Ee,Me=0,we=a(16);for(Ee=0;4>Ee;++Ee){var We=S[R+0]+S[R+8],Qe=S[R+0]-S[R+8],Xe=(35468*S[R+4]>>16)-_s(S[R+12]),Dt=_s(S[R+4])+(35468*S[R+12]>>16);we[Me+0]=We+Dt,we[Me+1]=Qe+Xe,we[Me+2]=Qe-Xe,we[Me+3]=We-Dt,Me+=4,R++}for(Ee=Me=0;4>Ee;++Ee)We=(S=we[Me+0]+4)+we[Me+8],Qe=S-we[Me+8],Xe=(35468*we[Me+4]>>16)-_s(we[Me+12]),Cs(H,ae,0,0,We+(Dt=_s(we[Me+4])+(35468*we[Me+12]>>16))),Cs(H,ae,1,0,Qe+Xe),Cs(H,ae,2,0,Qe-Xe),Cs(H,ae,3,0,We-Dt),Me++,ae+=32}function js(S,R,H,ae){var Ee=S[R+0]+4,Me=35468*S[R+4]>>16,we=_s(S[R+4]),We=35468*S[R+1]>>16;Bs(H,ae,0,Ee+we,S=_s(S[R+1]),We),Bs(H,ae,1,Ee+Me,S,We),Bs(H,ae,2,Ee-Me,S,We),Bs(H,ae,3,Ee-we,S,We)}function cs(S,R,H,ae,Ee){Es(S,R,H,ae),Ee&&Es(S,R+16,H,ae+4)}function fs(S,R,H,ae){ko(S,R+0,H,ae,1),ko(S,R+32,H,ae+128,1)}function Ys(S,R,H,ae){var Ee;for(S=S[R+0]+4,Ee=0;4>Ee;++Ee)for(R=0;4>R;++R)Cs(H,ae,R,Ee,S)}function Ls(S,R,H,ae){S[R+0]&&Jn(S,R+0,H,ae),S[R+16]&&Jn(S,R+16,H,ae+4),S[R+32]&&Jn(S,R+32,H,ae+128),S[R+48]&&Jn(S,R+48,H,ae+128+4)}function it(S,R,H,ae){var Ee,Me=a(16);for(Ee=0;4>Ee;++Ee){var we=S[R+0+Ee]+S[R+12+Ee],We=S[R+4+Ee]+S[R+8+Ee],Qe=S[R+4+Ee]-S[R+8+Ee],Xe=S[R+0+Ee]-S[R+12+Ee];Me[0+Ee]=we+We,Me[8+Ee]=we-We,Me[4+Ee]=Xe+Qe,Me[12+Ee]=Xe-Qe}for(Ee=0;4>Ee;++Ee)we=(S=Me[0+4*Ee]+3)+Me[3+4*Ee],We=Me[1+4*Ee]+Me[2+4*Ee],Qe=Me[1+4*Ee]-Me[2+4*Ee],Xe=S-Me[3+4*Ee],H[ae+0]=we+We>>3,H[ae+16]=Xe+Qe>>3,H[ae+32]=we-We>>3,H[ae+48]=Xe-Qe>>3,ae+=64}function Ft(S,R,H){var ae,Ee=R-32,Me=ia,we=255-S[Ee-1];for(ae=0;ae<H;++ae){var We,Qe=Me,Xe=we+S[R-1];for(We=0;We<H;++We)S[R+We]=Qe[Xe+S[Ee+We]];R+=32}}function bs(S,R){Ft(S,R,4)}function zt(S,R){Ft(S,R,8)}function ws(S,R){Ft(S,R,16)}function es(S,R){var H;for(H=0;16>H;++H)r(S,R+32*H,S,R-32,16)}function Os(S,R){var H;for(H=16;0<H;--H)i(S,R,S[R-1],16),R+=32}function As(S,R,H){var ae;for(ae=0;16>ae;++ae)i(R,H+32*ae,S,16)}function ms(S,R){var H,ae=16;for(H=0;16>H;++H)ae+=S[R-1+32*H]+S[R+H-32];As(ae>>5,S,R)}function Ws(S,R){var H,ae=8;for(H=0;16>H;++H)ae+=S[R-1+32*H];As(ae>>4,S,R)}function $s(S,R){var H,ae=8;for(H=0;16>H;++H)ae+=S[R+H-32];As(ae>>4,S,R)}function Is(S,R){As(128,S,R)}function xs(S,R,H){return S+2*R+H+2>>2}function Br(S,R){var H,ae=R-32;for(ae=new Uint8Array([xs(S[ae-1],S[ae+0],S[ae+1]),xs(S[ae+0],S[ae+1],S[ae+2]),xs(S[ae+1],S[ae+2],S[ae+3]),xs(S[ae+2],S[ae+3],S[ae+4])]),H=0;4>H;++H)r(S,R+32*H,ae,0,ae.length)}function Ar(S,R){var H=S[R-1],ae=S[R-1+32],Ee=S[R-1+64],Me=S[R-1+96];Ge(S,R+0,16843009*xs(S[R-1-32],H,ae)),Ge(S,R+32,16843009*xs(H,ae,Ee)),Ge(S,R+64,16843009*xs(ae,Ee,Me)),Ge(S,R+96,16843009*xs(Ee,Me,Me))}function ti(S,R){var H,ae=4;for(H=0;4>H;++H)ae+=S[R+H-32]+S[R-1+32*H];for(ae>>=3,H=0;4>H;++H)i(S,R+32*H,ae,4)}function Mr(S,R){var H=S[R-1+0],ae=S[R-1+32],Ee=S[R-1+64],Me=S[R-1-32],we=S[R+0-32],We=S[R+1-32],Qe=S[R+2-32],Xe=S[R+3-32];S[R+0+96]=xs(ae,Ee,S[R-1+96]),S[R+1+96]=S[R+0+64]=xs(H,ae,Ee),S[R+2+96]=S[R+1+64]=S[R+0+32]=xs(Me,H,ae),S[R+3+96]=S[R+2+64]=S[R+1+32]=S[R+0+0]=xs(we,Me,H),S[R+3+64]=S[R+2+32]=S[R+1+0]=xs(We,we,Me),S[R+3+32]=S[R+2+0]=xs(Qe,We,we),S[R+3+0]=xs(Xe,Qe,We)}function hn(S,R){var H=S[R+1-32],ae=S[R+2-32],Ee=S[R+3-32],Me=S[R+4-32],we=S[R+5-32],We=S[R+6-32],Qe=S[R+7-32];S[R+0+0]=xs(S[R+0-32],H,ae),S[R+1+0]=S[R+0+32]=xs(H,ae,Ee),S[R+2+0]=S[R+1+32]=S[R+0+64]=xs(ae,Ee,Me),S[R+3+0]=S[R+2+32]=S[R+1+64]=S[R+0+96]=xs(Ee,Me,we),S[R+3+32]=S[R+2+64]=S[R+1+96]=xs(Me,we,We),S[R+3+64]=S[R+2+96]=xs(we,We,Qe),S[R+3+96]=xs(We,Qe,Qe)}function fr(S,R){var H=S[R-1+0],ae=S[R-1+32],Ee=S[R-1+64],Me=S[R-1-32],we=S[R+0-32],We=S[R+1-32],Qe=S[R+2-32],Xe=S[R+3-32];S[R+0+0]=S[R+1+64]=Me+we+1>>1,S[R+1+0]=S[R+2+64]=we+We+1>>1,S[R+2+0]=S[R+3+64]=We+Qe+1>>1,S[R+3+0]=Qe+Xe+1>>1,S[R+0+96]=xs(Ee,ae,H),S[R+0+64]=xs(ae,H,Me),S[R+0+32]=S[R+1+96]=xs(H,Me,we),S[R+1+32]=S[R+2+96]=xs(Me,we,We),S[R+2+32]=S[R+3+96]=xs(we,We,Qe),S[R+3+32]=xs(We,Qe,Xe)}function ci(S,R){var H=S[R+0-32],ae=S[R+1-32],Ee=S[R+2-32],Me=S[R+3-32],we=S[R+4-32],We=S[R+5-32],Qe=S[R+6-32],Xe=S[R+7-32];S[R+0+0]=H+ae+1>>1,S[R+1+0]=S[R+0+64]=ae+Ee+1>>1,S[R+2+0]=S[R+1+64]=Ee+Me+1>>1,S[R+3+0]=S[R+2+64]=Me+we+1>>1,S[R+0+32]=xs(H,ae,Ee),S[R+1+32]=S[R+0+96]=xs(ae,Ee,Me),S[R+2+32]=S[R+1+96]=xs(Ee,Me,we),S[R+3+32]=S[R+2+96]=xs(Me,we,We),S[R+3+64]=xs(we,We,Qe),S[R+3+96]=xs(We,Qe,Xe)}function Vr(S,R){var H=S[R-1+0],ae=S[R-1+32],Ee=S[R-1+64],Me=S[R-1+96];S[R+0+0]=H+ae+1>>1,S[R+2+0]=S[R+0+32]=ae+Ee+1>>1,S[R+2+32]=S[R+0+64]=Ee+Me+1>>1,S[R+1+0]=xs(H,ae,Ee),S[R+3+0]=S[R+1+32]=xs(ae,Ee,Me),S[R+3+32]=S[R+1+64]=xs(Ee,Me,Me),S[R+3+64]=S[R+2+64]=S[R+0+96]=S[R+1+96]=S[R+2+96]=S[R+3+96]=Me}function sa(S,R){var H=S[R-1+0],ae=S[R-1+32],Ee=S[R-1+64],Me=S[R-1+96],we=S[R-1-32],We=S[R+0-32],Qe=S[R+1-32],Xe=S[R+2-32];S[R+0+0]=S[R+2+32]=H+we+1>>1,S[R+0+32]=S[R+2+64]=ae+H+1>>1,S[R+0+64]=S[R+2+96]=Ee+ae+1>>1,S[R+0+96]=Me+Ee+1>>1,S[R+3+0]=xs(We,Qe,Xe),S[R+2+0]=xs(we,We,Qe),S[R+1+0]=S[R+3+32]=xs(H,we,We),S[R+1+32]=S[R+3+64]=xs(ae,H,we),S[R+1+64]=S[R+3+96]=xs(Ee,ae,H),S[R+1+96]=xs(Me,Ee,ae)}function kr(S,R){var H;for(H=0;8>H;++H)r(S,R+32*H,S,R-32,8)}function na(S,R){var H;for(H=0;8>H;++H)i(S,R,S[R-1],8),R+=32}function Ir(S,R,H){var ae;for(ae=0;8>ae;++ae)i(R,H+32*ae,S,8)}function Ga(S,R){var H,ae=8;for(H=0;8>H;++H)ae+=S[R+H-32]+S[R-1+32*H];Ir(ae>>4,S,R)}function tl(S,R){var H,ae=4;for(H=0;8>H;++H)ae+=S[R+H-32];Ir(ae>>3,S,R)}function Ds(S,R){var H,ae=4;for(H=0;8>H;++H)ae+=S[R-1+32*H];Ir(ae>>3,S,R)}function Un(S,R){Ir(128,S,R)}function $n(S,R,H){var ae=S[R-H],Ee=S[R+0],Me=3*(Ee-ae)+Uo[1020+S[R-2*H]-S[R+H]],we=oh[112+(Me+4>>3)];S[R-H]=ia[255+ae+oh[112+(Me+3>>3)]],S[R+0]=ia[255+Ee-we]}function si(S,R,H,ae){var Ee=S[R+0],Me=S[R+H];return Ki[255+S[R-2*H]-S[R-H]]>ae||Ki[255+Me-Ee]>ae}function Ii(S,R,H,ae){return 4*Ki[255+S[R-H]-S[R+0]]+Ki[255+S[R-2*H]-S[R+H]]<=ae}function Do(S,R,H,ae,Ee){var Me=S[R-3*H],we=S[R-2*H],We=S[R-H],Qe=S[R+0],Xe=S[R+H],Dt=S[R+2*H],Gt=S[R+3*H];return 4*Ki[255+We-Qe]+Ki[255+we-Xe]>ae?0:Ki[255+S[R-4*H]-Me]<=Ee&&Ki[255+Me-we]<=Ee&&Ki[255+we-We]<=Ee&&Ki[255+Gt-Dt]<=Ee&&Ki[255+Dt-Xe]<=Ee&&Ki[255+Xe-Qe]<=Ee}function jl(S,R,H,ae){var Ee=2*ae+1;for(ae=0;16>ae;++ae)Ii(S,R+ae,H,Ee)&&$n(S,R+ae,H)}function ks(S,R,H,ae){var Ee=2*ae+1;for(ae=0;16>ae;++ae)Ii(S,R+ae*H,1,Ee)&&$n(S,R+ae*H,1)}function Xn(S,R,H,ae){var Ee;for(Ee=3;0<Ee;--Ee)jl(S,R+=4*H,H,ae)}function zr(S,R,H,ae){var Ee;for(Ee=3;0<Ee;--Ee)ks(S,R+=4,H,ae)}function ji(S,R,H,ae,Ee,Me,we,We){for(Me=2*Me+1;0<Ee--;){if(Do(S,R,H,Me,we))if(si(S,R,H,We))$n(S,R,H);else{var Qe=S,Xe=R,Dt=H,Gt=Qe[Xe-2*Dt],qe=Qe[Xe-Dt],It=Qe[Xe+0],At=Qe[Xe+Dt],Zt=Qe[Xe+2*Dt],kt=27*(is=Uo[1020+3*(It-qe)+Uo[1020+Gt-At]])+63>>7,Jt=18*is+63>>7,is=9*is+63>>7;Qe[Xe-3*Dt]=ia[255+Qe[Xe-3*Dt]+is],Qe[Xe-2*Dt]=ia[255+Gt+Jt],Qe[Xe-Dt]=ia[255+qe+kt],Qe[Xe+0]=ia[255+It-kt],Qe[Xe+Dt]=ia[255+At-Jt],Qe[Xe+2*Dt]=ia[255+Zt-is]}R+=ae}}function Gi(S,R,H,ae,Ee,Me,we,We){for(Me=2*Me+1;0<Ee--;){if(Do(S,R,H,Me,we))if(si(S,R,H,We))$n(S,R,H);else{var Qe=S,Xe=R,Dt=H,Gt=Qe[Xe-Dt],qe=Qe[Xe+0],It=Qe[Xe+Dt],At=oh[112+(4+(Zt=3*(qe-Gt))>>3)],Zt=oh[112+(Zt+3>>3)],kt=At+1>>1;Qe[Xe-2*Dt]=ia[255+Qe[Xe-2*Dt]+kt],Qe[Xe-Dt]=ia[255+Gt+Zt],Qe[Xe+0]=ia[255+qe-At],Qe[Xe+Dt]=ia[255+It-kt]}R+=ae}}function y0(S,R,H,ae,Ee,Me){ji(S,R,H,1,16,ae,Ee,Me)}function Ro(S,R,H,ae,Ee,Me){ji(S,R,1,H,16,ae,Ee,Me)}function b0(S,R,H,ae,Ee,Me){var we;for(we=3;0<we;--we)Gi(S,R+=4*H,H,1,16,ae,Ee,Me)}function W(S,R,H,ae,Ee,Me){var we;for(we=3;0<we;--we)Gi(S,R+=4,1,H,16,ae,Ee,Me)}function ve(S,R,H,ae,Ee,Me,we,We){ji(S,R,Ee,1,8,Me,we,We),ji(H,ae,Ee,1,8,Me,we,We)}function et(S,R,H,ae,Ee,Me,we,We){ji(S,R,1,Ee,8,Me,we,We),ji(H,ae,1,Ee,8,Me,we,We)}function Nt(S,R,H,ae,Ee,Me,we,We){Gi(S,R+4*Ee,Ee,1,8,Me,we,We),Gi(H,ae+4*Ee,Ee,1,8,Me,we,We)}function wt(S,R,H,ae,Ee,Me,we,We){Gi(S,R+4,1,Ee,8,Me,we,We),Gi(H,ae+4,1,Ee,8,Me,we,We)}function rs(){this.ba=new $e,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ye,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function zs(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function en(){this.ua=0,this.Wa=new Z,this.vb=new Z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new se}function gn(){this.xb=this.a=0,this.l=new Pt,this.ca=new $e,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new en,this.ab=0,this.gc=o(4,zs),this.Oc=0}function Nn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Pt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(S,R,H,ae,Ee,Me,we){for(S=S==null?0:S[R+0],R=0;R<we;++R)Ee[Me+R]=S+H[ae+R]&255,S=Ee[Me+R]}function Gr(S,R,H,ae,Ee,Me,we){var We;if(S==null)Fn(null,null,H,ae,Ee,Me,we);else for(We=0;We<we;++We)Ee[Me+We]=S[R+We]+H[ae+We]&255}function ni(S,R,H,ae,Ee,Me,we){if(S==null)Fn(null,null,H,ae,Ee,Me,we);else{var We,Qe=S[R+0],Xe=Qe,Dt=Qe;for(We=0;We<we;++We)Xe=Dt+(Qe=S[R+We])-Xe,Dt=H[ae+We]+(-256&Xe?0>Xe?0:255:Xe)&255,Xe=Qe,Ee[Me+We]=Dt}}function Sr(S,R,H,ae){var Ee=R.width,Me=R.o;if(e(S!=null&&R!=null),0>H||0>=ae||H+ae>Me)return null;if(!S.Cc){if(S.ga==null){var we;if(S.ga=new Nn,(we=S.ga==null)||(we=R.width*R.o,e(S.Gb.length==0),S.Gb=a(we),S.Uc=0,S.Gb==null?we=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,we=1),we=!we),!we){we=S.ga;var We=S.Fa,Qe=S.P,Xe=S.qc,Dt=S.mb,Gt=S.nb,qe=Qe+1,It=Xe-1,At=we.l;if(e(We!=null&&Dt!=null&&R!=null),Bo[0]=null,Bo[1]=Fn,Bo[2]=Gr,Bo[3]=ni,we.ca=Dt,we.tb=Gt,we.c=R.width,we.i=R.height,e(0<we.c&&0<we.i),1>=Xe)R=0;else if(we.$a=3&We[Qe+0],we.Z=We[Qe+0]>>2&3,we.Lc=We[Qe+0]>>4&3,Qe=We[Qe+0]>>6&3,0>we.$a||1<we.$a||4<=we.Z||1<we.Lc||Qe)R=0;else if(At.put=Le,At.ac=Ze,At.bc=vt,At.ma=we,At.width=R.width,At.height=R.height,At.Da=R.Da,At.v=R.v,At.va=R.va,At.j=R.j,At.o=R.o,we.$a)e:{e(we.$a==1),R=ft();t:for(;;){if(R==null){R=0;break e}if(e(we!=null),we.mc=R,R.c=we.c,R.i=we.i,R.l=we.l,R.l.ma=we,R.l.width=we.c,R.l.height=we.i,R.a=0,re(R.m,We,qe,It),!rt(we.c,we.i,1,R,null)||(R.ab==1&&R.gc[0].hc==3&&ls(R.s)?(we.ic=1,We=R.c*R.i,R.Ta=null,R.Ua=0,R.V=a(We),R.Ba=0,R.V==null?(R.a=1,R=0):R=1):(we.ic=0,R=Wt(R,we.c)),!R))break t;R=1;break e}we.mc=null,R=0}else R=It>=we.c*we.i;we=!R}if(we)return null;S.ga.Lc!=1?S.Ga=0:ae=Me-H}e(S.ga!=null),e(H+ae<=Me);e:{if(R=(We=S.ga).c,Me=We.l.o,We.$a==0){if(qe=S.rc,It=S.Vc,At=S.Fa,Qe=S.P+1+H*R,Xe=S.mb,Dt=S.nb+H*R,e(Qe<=S.P+S.qc),We.Z!=0)for(e(Bo[We.Z]!=null),we=0;we<ae;++we)Bo[We.Z](qe,It,At,Qe,Xe,Dt,R),qe=Xe,It=Dt,Dt+=R,Qe+=R;else for(we=0;we<ae;++we)r(Xe,Dt,At,Qe,R),qe=Xe,It=Dt,Dt+=R,Qe+=R;S.rc=qe,S.Vc=It}else{if(e(We.mc!=null),R=H+ae,e((we=We.mc)!=null),e(R<=we.i),we.C>=R)R=1;else if(We.ic||Ol(),We.ic){We=we.V,qe=we.Ba,It=we.c;var Zt=we.i,kt=(At=1,Qe=we.$/It,Xe=we.$%It,Dt=we.m,Gt=we.s,we.$),Jt=It*Zt,is=It*R,ys=Gt.wc,hs=kt<is?Vt(Gt,Xe,Qe):null;e(kt<=Jt),e(R<=Zt),e(ls(Gt));t:for(;;){for(;!Dt.h&&kt<is;){if(Xe&ys||(hs=Vt(Gt,Xe,Qe)),e(hs!=null),ce(Dt),256>(Zt=jt(hs.G[0],hs.H[0],Dt)))We[qe+kt]=Zt,++kt,++Xe>=It&&(Xe=0,++Qe<=R&&!(Qe%16)&&vs(we,Qe));else{if(!(280>Zt)){At=0;break t}Zt=ut(Zt-256,Dt);var qs,Fs=jt(hs.G[4],hs.H[4],Dt);if(ce(Dt),!(kt>=(Fs=gt(It,Fs=ut(Fs,Dt)))&&Jt-kt>=Zt)){At=0;break t}for(qs=0;qs<Zt;++qs)We[qe+kt+qs]=We[qe+kt+qs-Fs];for(kt+=Zt,Xe+=Zt;Xe>=It;)Xe-=It,++Qe<=R&&!(Qe%16)&&vs(we,Qe);kt<is&&Xe&ys&&(hs=Vt(Gt,Xe,Qe))}e(Dt.h==q(Dt))}vs(we,Qe>R?R:Qe);break t}!At||Dt.h&&kt<Jt?(At=0,we.a=Dt.h?5:3):we.$=kt,R=At}else R=Ss(we,we.V,we.Ba,we.c,we.i,R,_t);if(!R){ae=0;break e}}H+ae>=Me&&(S.Cc=1),ae=1}if(!ae)return null;if(S.Cc&&((ae=S.ga)!=null&&(ae.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+H*Ee}function Ci(S,R,H,ae,Ee,Me){for(;0<Ee--;){var we,We=S,Qe=R+(H?1:0),Xe=S,Dt=R+(H?0:3);for(we=0;we<ae;++we){var Gt=Xe[Dt+4*we];Gt!=255&&(Gt*=32897,We[Qe+4*we+0]=We[Qe+4*we+0]*Gt>>23,We[Qe+4*we+1]=We[Qe+4*we+1]*Gt>>23,We[Qe+4*we+2]=We[Qe+4*we+2]*Gt>>23)}R+=Me}}function di(S,R,H,ae,Ee){for(;0<ae--;){var Me;for(Me=0;Me<H;++Me){var we=S[R+2*Me+0],We=15&(Xe=S[R+2*Me+1]),Qe=4369*We,Xe=(240&Xe|Xe>>4)*Qe>>16;S[R+2*Me+0]=(240&we|we>>4)*Qe>>16&240|(15&we|we<<4)*Qe>>16>>4&15,S[R+2*Me+1]=240&Xe|We}R+=Ee}}function Wi(S,R,H,ae,Ee,Me,we,We){var Qe,Xe,Dt=255;for(Xe=0;Xe<Ee;++Xe){for(Qe=0;Qe<ae;++Qe){var Gt=S[R+Qe];Me[we+4*Qe]=Gt,Dt&=Gt}R+=H,we+=We}return Dt!=255}function To(S,R,H,ae,Ee){var Me;for(Me=0;Me<Ee;++Me)H[ae+Me]=S[R+Me]>>8}function Ol(){Qc=Ci,nl=di,ih=Wi,Ka=To}function Mo(S,R,H){I[S]=function(ae,Ee,Me,we,We,Qe,Xe,Dt,Gt,qe,It,At,Zt,kt,Jt,is,ys){var hs,qs=ys-1>>1,Fs=We[Qe+0]|Xe[Dt+0]<<16,yn=Gt[qe+0]|It[At+0]<<16;e(ae!=null);var Vs=3*Fs+yn+131074>>2;for(R(ae[Ee+0],255&Vs,Vs>>16,Zt,kt),Me!=null&&(Vs=3*yn+Fs+131074>>2,R(Me[we+0],255&Vs,Vs>>16,Jt,is)),hs=1;hs<=qs;++hs){var Ln=We[Qe+hs]|Xe[Dt+hs]<<16,Or=Gt[qe+hs]|It[At+hs]<<16,Sn=Fs+Ln+yn+Or+524296,Ks=Sn+2*(Ln+yn)>>3;Vs=Ks+Fs>>1,Fs=(Sn=Sn+2*(Fs+Or)>>3)+Ln>>1,R(ae[Ee+2*hs-1],255&Vs,Vs>>16,Zt,kt+(2*hs-1)*H),R(ae[Ee+2*hs-0],255&Fs,Fs>>16,Zt,kt+(2*hs-0)*H),Me!=null&&(Vs=Sn+yn>>1,Fs=Ks+Or>>1,R(Me[we+2*hs-1],255&Vs,Vs>>16,Jt,is+(2*hs-1)*H),R(Me[we+2*hs+0],255&Fs,Fs>>16,Jt,is+(2*hs+0)*H)),Fs=Ln,yn=Or}1&ys||(Vs=3*Fs+yn+131074>>2,R(ae[Ee+ys-1],255&Vs,Vs>>16,Zt,kt+(ys-1)*H),Me!=null&&(Vs=3*yn+Fs+131074>>2,R(Me[we+ys-1],255&Vs,Vs>>16,Jt,is+(ys-1)*H)))}}function th(){Yi[v0]=Vc,Yi[aa]=Yd,Yi[E0]=jm,Yi[rl]=I0,Yi[ch]=hc,Yi[Fd]=Jl,Yi[cc]=fc,Yi[dh]=Yd,Yi[D0]=I0,Yi[Kd]=hc,Yi[R0]=Jl}function Pd(S){return S&-16384?0>S?0:255:S>>j0}function Ql(S,R){return Pd((19077*S>>8)+(26149*R>>8)-14234)}function wl(S,R,H){return Pd((19077*S>>8)-(6419*R>>8)-(13320*H>>8)+8708)}function Wc(S,R){return Pd((19077*S>>8)+(33050*R>>8)-17685)}function Io(S,R,H,ae,Ee){ae[Ee+0]=Ql(S,H),ae[Ee+1]=wl(S,R,H),ae[Ee+2]=Wc(S,R)}function Oi(S,R,H,ae,Ee){ae[Ee+0]=Wc(S,R),ae[Ee+1]=wl(S,R,H),ae[Ee+2]=Ql(S,H)}function ac(S,R,H,ae,Ee){var Me=wl(S,R,H);R=Me<<3&224|Wc(S,R)>>3,ae[Ee+0]=248&Ql(S,H)|Me>>5,ae[Ee+1]=R}function lc(S,R,H,ae,Ee){var Me=240&Wc(S,R)|15;ae[Ee+0]=240&Ql(S,H)|wl(S,R,H)>>4,ae[Ee+1]=Me}function Ad(S,R,H,ae,Ee){ae[Ee+0]=255,Io(S,R,H,ae,Ee+1)}function Yl(S,R,H,ae,Ee){Oi(S,R,H,ae,Ee),ae[Ee+3]=255}function pa(S,R,H,ae,Ee){Io(S,R,H,ae,Ee),ae[Ee+3]=255}function jo(S,R,H){I[S]=function(ae,Ee,Me,we,We,Qe,Xe,Dt,Gt){for(var qe=Dt+(-2&Gt)*H;Dt!=qe;)R(ae[Ee+0],Me[we+0],We[Qe+0],Xe,Dt),R(ae[Ee+1],Me[we+0],We[Qe+0],Xe,Dt+H),Ee+=2,++we,++Qe,Dt+=2*H;1&Gt&&R(ae[Ee+0],Me[we+0],We[Qe+0],Xe,Dt)}}function kd(S,R,H){return H==0?S==0?R==0?6:5:R==0?4:0:H}function sh(S,R,H,ae,Ee){switch(S>>>30){case 3:ko(R,H,ae,Ee,0);break;case 2:ra(R,H,ae,Ee);break;case 1:Jn(R,H,ae,Ee)}}function Wa(S,R){var H,ae,Ee=R.M,Me=R.Nb,we=S.oc,We=S.pc+40,Qe=S.oc,Xe=S.pc+584,Dt=S.oc,Gt=S.pc+600;for(H=0;16>H;++H)we[We+32*H-1]=129;for(H=0;8>H;++H)Qe[Xe+32*H-1]=129,Dt[Gt+32*H-1]=129;for(0<Ee?we[We-1-32]=Qe[Xe-1-32]=Dt[Gt-1-32]=129:(i(we,We-32-1,127,21),i(Qe,Xe-32-1,127,9),i(Dt,Gt-32-1,127,9)),ae=0;ae<S.za;++ae){var qe=R.ya[R.aa+ae];if(0<ae){for(H=-1;16>H;++H)r(we,We+32*H-4,we,We+32*H+12,4);for(H=-1;8>H;++H)r(Qe,Xe+32*H-4,Qe,Xe+32*H+4,4),r(Dt,Gt+32*H-4,Dt,Gt+32*H+4,4)}var It=S.Gd,At=S.Hd+ae,Zt=qe.ad,kt=qe.Hc;if(0<Ee&&(r(we,We-32,It[At].y,0,16),r(Qe,Xe-32,It[At].f,0,8),r(Dt,Gt-32,It[At].ea,0,8)),qe.Za){var Jt=we,is=We-32+16;for(0<Ee&&(ae>=S.za-1?i(Jt,is,It[At].y[15],4):r(Jt,is,It[At+1].y,0,4)),H=0;4>H;H++)Jt[is+128+H]=Jt[is+256+H]=Jt[is+384+H]=Jt[is+0+H];for(H=0;16>H;++H,kt<<=2)Jt=we,is=We+ai[H],Hr[qe.Ob[H]](Jt,is),sh(kt,Zt,16*+H,Jt,is)}else if(Jt=kd(ae,Ee,qe.Ob[0]),ba[Jt](we,We),kt!=0)for(H=0;16>H;++H,kt<<=2)sh(kt,Zt,16*+H,we,We+ai[H]);for(H=qe.Gc,Jt=kd(ae,Ee,qe.Dd),kl[Jt](Qe,Xe),kl[Jt](Dt,Gt),kt=Zt,Jt=Qe,is=Xe,255&(qe=0|H)&&(170&qe?sl(kt,256,Jt,is):Kn(kt,256,Jt,is)),qe=Dt,kt=Gt,255&(H>>=8)&&(170&H?sl(Zt,320,qe,kt):Kn(Zt,320,qe,kt)),Ee<S.Ub-1&&(r(It[At].y,0,we,We+480,16),r(It[At].f,0,Qe,Xe+224,8),r(It[At].ea,0,Dt,Gt+224,8)),H=8*Me*S.B,It=S.sa,At=S.ta+16*ae+16*Me*S.R,Zt=S.qa,qe=S.ra+8*ae+H,kt=S.Ha,Jt=S.Ia+8*ae+H,H=0;16>H;++H)r(It,At+H*S.R,we,We+32*H,16);for(H=0;8>H;++H)r(Zt,qe+H*S.B,Qe,Xe+32*H,8),r(kt,Jt+H*S.B,Dt,Gt+32*H,8)}}function Ll(S,R,H,ae,Ee,Me,we,We,Qe){var Xe=[0],Dt=[0],Gt=0,qe=Qe!=null?Qe.kd:0,It=Qe??new gs;if(S==null||12>H)return 7;It.data=S,It.w=R,It.ha=H,R=[R],H=[H],It.gb=[It.gb];e:{var At=R,Zt=H,kt=It.gb;if(e(S!=null),e(Zt!=null),e(kt!=null),kt[0]=0,12<=Zt[0]&&!n(S,At[0],"RIFF")){if(n(S,At[0]+8,"WEBP")){kt=3;break e}var Jt=de(S,At[0]+4);if(12>Jt||4294967286<Jt){kt=3;break e}if(qe&&Jt>Zt[0]-8){kt=7;break e}kt[0]=Jt,At[0]+=12,Zt[0]-=12}kt=0}if(kt!=0)return kt;for(Jt=0<It.gb[0],H=H[0];;){e:{var is=S;Zt=R,kt=H;var ys=Xe,hs=Dt,qs=At=[0];if((Vs=Gt=[Gt])[0]=0,8>kt[0])kt=7;else{if(!n(is,Zt[0],"VP8X")){if(de(is,Zt[0]+4)!=10){kt=3;break e}if(18>kt[0]){kt=7;break e}var Fs=de(is,Zt[0]+8),yn=1+he(is,Zt[0]+12);if(2147483648<=yn*(is=1+he(is,Zt[0]+15))){kt=3;break e}qs!=null&&(qs[0]=Fs),ys!=null&&(ys[0]=yn),hs!=null&&(hs[0]=is),Zt[0]+=18,kt[0]-=18,Vs[0]=1}kt=0}}if(Gt=Gt[0],At=At[0],kt!=0)return kt;if(Zt=!!(2&At),!Jt&&Gt)return 3;if(Me!=null&&(Me[0]=!!(16&At)),we!=null&&(we[0]=Zt),We!=null&&(We[0]=0),we=Xe[0],At=Dt[0],Gt&&Zt&&Qe==null){kt=0;break}if(4>H){kt=7;break}if(Jt&&Gt||!Jt&&!Gt&&!n(S,R[0],"ALPH")){H=[H],It.na=[It.na],It.P=[It.P],It.Sa=[It.Sa];e:{Fs=S,kt=R,Jt=H;var Vs=It.gb;ys=It.na,hs=It.P,qs=It.Sa,yn=22,e(Fs!=null),e(Jt!=null),is=kt[0];var Ln=Jt[0];for(e(ys!=null),e(qs!=null),ys[0]=null,hs[0]=null,qs[0]=0;;){if(kt[0]=is,Jt[0]=Ln,8>Ln){kt=7;break e}var Or=de(Fs,is+4);if(4294967286<Or){kt=3;break e}var Sn=8+Or+1&-2;if(yn+=Sn,0<Vs&&yn>Vs){kt=3;break e}if(!n(Fs,is,"VP8 ")||!n(Fs,is,"VP8L")){kt=0;break e}if(Ln[0]<Sn){kt=7;break e}n(Fs,is,"ALPH")||(ys[0]=Fs,hs[0]=is+8,qs[0]=Or),is+=Sn,Ln-=Sn}}if(H=H[0],It.na=It.na[0],It.P=It.P[0],It.Sa=It.Sa[0],kt!=0)break}H=[H],It.Ja=[It.Ja],It.xa=[It.xa];e:if(Vs=S,kt=R,Jt=H,ys=It.gb[0],hs=It.Ja,qs=It.xa,Fs=kt[0],is=!n(Vs,Fs,"VP8 "),yn=!n(Vs,Fs,"VP8L"),e(Vs!=null),e(Jt!=null),e(hs!=null),e(qs!=null),8>Jt[0])kt=7;else{if(is||yn){if(Vs=de(Vs,Fs+4),12<=ys&&Vs>ys-12){kt=3;break e}if(qe&&Vs>Jt[0]-8){kt=7;break e}hs[0]=Vs,kt[0]+=8,Jt[0]-=8,qs[0]=yn}else qs[0]=5<=Jt[0]&&Vs[Fs+0]==47&&!(Vs[Fs+4]>>5),hs[0]=Jt[0];kt=0}if(H=H[0],It.Ja=It.Ja[0],It.xa=It.xa[0],R=R[0],kt!=0)break;if(4294967286<It.Ja)return 3;if(We==null||Zt||(We[0]=It.xa?2:1),we=[we],At=[At],It.xa){if(5>H){kt=7;break}We=we,qe=At,Zt=Me,S==null||5>H?S=0:5<=H&&S[R+0]==47&&!(S[R+4]>>5)?(Jt=[0],Vs=[0],ys=[0],re(hs=new K,S,R,H),je(hs,Jt,Vs,ys)?(We!=null&&(We[0]=Jt[0]),qe!=null&&(qe[0]=Vs[0]),Zt!=null&&(Zt[0]=ys[0]),S=1):S=0):S=0}else{if(10>H){kt=7;break}We=At,S==null||10>H||!Xt(S,R+3,H-3)?S=0:(qe=S[R+0]|S[R+1]<<8|S[R+2]<<16,Zt=16383&(S[R+7]<<8|S[R+6]),S=16383&(S[R+9]<<8|S[R+8]),1&qe||3<(qe>>1&7)||!(qe>>4&1)||qe>>5>=It.Ja||!Zt||!S?S=0:(we&&(we[0]=Zt),We&&(We[0]=S),S=1))}if(!S||(we=we[0],At=At[0],Gt&&(Xe[0]!=we||Dt[0]!=At)))return 3;Qe!=null&&(Qe[0]=It,Qe.offset=R-Qe.w,e(4294967286>R-Qe.w),e(Qe.offset==Qe.ha-H));break}return kt==0||kt==7&&Gt&&Qe==null?(Me!=null&&(Me[0]|=It.na!=null&&0<It.na.length),ae!=null&&(ae[0]=we),Ee!=null&&(Ee[0]=At),0):kt}function Oo(S,R,H){var ae=R.width,Ee=R.height,Me=0,we=0,We=ae,Qe=Ee;if(R.Da=S!=null&&0<S.Da,R.Da&&(We=S.cd,Qe=S.bd,Me=S.v,we=S.j,11>H||(Me&=-2,we&=-2),0>Me||0>we||0>=We||0>=Qe||Me+We>ae||we+Qe>Ee))return 0;if(R.v=Me,R.j=we,R.va=Me+We,R.o=we+Qe,R.U=We,R.T=Qe,R.da=S!=null&&0<S.da,R.da){if(!le(We,Qe,H=[S.ib],Me=[S.hb]))return 0;R.ib=H[0],R.hb=Me[0]}return R.ob=S!=null&&S.ob,R.Kb=S==null||!S.Sd,R.da&&(R.ob=R.ib<3*ae/4&&R.hb<3*Ee/4,R.Kb=0),1}function nh(S){if(S==null)return 2;if(11>S.S){var R=S.f.RGBA;R.fb+=(S.height-1)*R.A,R.A=-R.A}else R=S.f.kb,S=S.height,R.O+=(S-1)*R.fa,R.fa=-R.fa,R.N+=(S-1>>1)*R.Ab,R.Ab=-R.Ab,R.W+=(S-1>>1)*R.Db,R.Db=-R.Db,R.F!=null&&(R.J+=(S-1)*R.lb,R.lb=-R.lb);return 0}function Pl(S,R,H,ae){if(ae==null||0>=S||0>=R)return 2;if(H!=null){if(H.Da){var Ee=H.cd,Me=H.bd,we=-2&H.v,We=-2&H.j;if(0>we||0>We||0>=Ee||0>=Me||we+Ee>S||We+Me>R)return 2;S=Ee,R=Me}if(H.da){if(!le(S,R,Ee=[H.ib],Me=[H.hb]))return 2;S=Ee[0],R=Me[0]}}ae.width=S,ae.height=R;e:{var Qe=ae.width,Xe=ae.height;if(S=ae.S,0>=Qe||0>=Xe||!(S>=v0&&13>S))S=2;else{if(0>=ae.Rd&&ae.sd==null){we=Me=Ee=R=0;var Dt=(We=Qe*w0[S])*Xe;if(11>S||(Me=(Xe+1)/2*(R=(Qe+1)/2),S==12&&(we=(Ee=Qe)*Xe)),(Xe=a(Dt+2*Me+we))==null){S=1;break e}ae.sd=Xe,11>S?((Qe=ae.f.RGBA).eb=Xe,Qe.fb=0,Qe.A=We,Qe.size=Dt):((Qe=ae.f.kb).y=Xe,Qe.O=0,Qe.fa=We,Qe.Fd=Dt,Qe.f=Xe,Qe.N=0+Dt,Qe.Ab=R,Qe.Cd=Me,Qe.ea=Xe,Qe.W=0+Dt+Me,Qe.Db=R,Qe.Ed=Me,S==12&&(Qe.F=Xe,Qe.J=0+Dt+2*Me),Qe.Tc=we,Qe.lb=Ee)}if(R=1,Ee=ae.S,Me=ae.width,we=ae.height,Ee>=v0&&13>Ee)if(11>Ee)S=ae.f.RGBA,R&=(We=Math.abs(S.A))*(we-1)+Me<=S.size,R&=We>=Me*w0[Ee],R&=S.eb!=null;else{S=ae.f.kb,We=(Me+1)/2,Dt=(we+1)/2,Qe=Math.abs(S.fa),Xe=Math.abs(S.Ab);var Gt=Math.abs(S.Db),qe=Math.abs(S.lb),It=qe*(we-1)+Me;R&=Qe*(we-1)+Me<=S.Fd,R&=Xe*(Dt-1)+We<=S.Cd,R=(R&=Gt*(Dt-1)+We<=S.Ed)&Qe>=Me&Xe>=We&Gt>=We,R&=S.y!=null,R&=S.f!=null,R&=S.ea!=null,Ee==12&&(R&=qe>=Me,R&=It<=S.Tc,R&=S.F!=null)}else R=0;S=R?0:2}}return S!=0||H!=null&&H.fd&&(S=nh(ae)),S}var oc=64,Ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ya=24,$l=32,Vl=8,wo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ne("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(S){return S},I.Predictor2=function(S,R,H){return R[H+0]},I.Predictor3=function(S,R,H){return R[H+1]},I.Predictor4=function(S,R,H){return R[H-1]},I.Predictor5=function(S,R,H){return pe(pe(S,R[H+1]),R[H+0])},I.Predictor6=function(S,R,H){return pe(S,R[H-1])},I.Predictor7=function(S,R,H){return pe(S,R[H+0])},I.Predictor8=function(S,R,H){return pe(R[H-1],R[H+0])},I.Predictor9=function(S,R,H){return pe(R[H+0],R[H+1])},I.Predictor10=function(S,R,H){return pe(pe(S,R[H-1]),pe(R[H+0],R[H+1]))},I.Predictor11=function(S,R,H){var ae=R[H+0];return 0>=st(ae>>24&255,S>>24&255,(R=R[H-1])>>24&255)+st(ae>>16&255,S>>16&255,R>>16&255)+st(ae>>8&255,S>>8&255,R>>8&255)+st(255&ae,255&S,255&R)?ae:S},I.Predictor12=function(S,R,H){var ae=R[H+0];return(ze((S>>24&255)+(ae>>24&255)-((R=R[H-1])>>24&255))<<24|ze((S>>16&255)+(ae>>16&255)-(R>>16&255))<<16|ze((S>>8&255)+(ae>>8&255)-(R>>8&255))<<8|ze((255&S)+(255&ae)-(255&R)))>>>0},I.Predictor13=function(S,R,H){var ae=R[H-1];return(xt((S=pe(S,R[H+0]))>>24&255,ae>>24&255)<<24|xt(S>>16&255,ae>>16&255)<<16|xt(S>>8&255,ae>>8&255)<<8|xt(255&S,255&ae))>>>0};var Ud=I.PredictorAdd0;I.PredictorAdd1=St,ne("Predictor2","PredictorAdd2"),ne("Predictor3","PredictorAdd3"),ne("Predictor4","PredictorAdd4"),ne("Predictor5","PredictorAdd5"),ne("Predictor6","PredictorAdd6"),ne("Predictor7","PredictorAdd7"),ne("Predictor8","PredictorAdd8"),ne("Predictor9","PredictorAdd9"),ne("Predictor10","PredictorAdd10"),ne("Predictor11","PredictorAdd11"),ne("Predictor12","PredictorAdd12"),ne("Predictor13","PredictorAdd13");var Bd=I.PredictorAdd2;pt("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var ri,C0=I.ColorIndexInverseTransform,zl=I.MapARGB,Hl=I.VP8LColorIndexInverseTransformAlpha,Fi=I.MapAlpha,Lo=I.VP8LPredictorsAdd=[];Lo.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Gd,Wd,Po,Ao,ql,Fc,Fa,ko,ra,sl,Jn,Kn,vr,ii,Xl,Al,Kc,rh,Dm,k_,U_,B_,Rm,Tm,Qc,nl,ih,Ka,Yc=a(511),N0=a(2041),ah=a(225),lh=a(767),S0=0,Uo=N0,oh=ah,ia=lh,Ki=Yc,v0=0,aa=1,E0=2,rl=3,ch=4,Fd=5,cc=6,dh=7,D0=8,Kd=9,R0=10,il=[2,3,7],Qd=[3,3,11],$c=[280,256,256,256,40],T0=[0,1,1,1,0],uh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],al=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ll=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dc=8,ol=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],cl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qa=null,G_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],M0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],W_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Pn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ba=[],Hr=[],kl=[],uc=1,Im=2,Bo=[],Yi=[];Mo("UpsampleRgbLinePair",Io,3),Mo("UpsampleBgrLinePair",Oi,3),Mo("UpsampleRgbaLinePair",pa,4),Mo("UpsampleBgraLinePair",Yl,4),Mo("UpsampleArgbLinePair",Ad,4),Mo("UpsampleRgba4444LinePair",lc,2),Mo("UpsampleRgb565LinePair",ac,2);var Vc=I.UpsampleRgbLinePair,jm=I.UpsampleBgrLinePair,Yd=I.UpsampleRgbaLinePair,I0=I.UpsampleBgraLinePair,hc=I.UpsampleArgbLinePair,Jl=I.UpsampleRgba4444LinePair,fc=I.UpsampleRgb565LinePair,dl=16,$d=1<<dl-1,zc=-227,mc=482,j0=6,gc=0,$i=a(256),O0=a(256),F_=a(256),sy=a(256),ny=a(mc-zc),ry=a(mc-zc);jo("YuvToRgbRow",Io,3),jo("YuvToBgrRow",Oi,3),jo("YuvToRgbaRow",pa,4),jo("YuvToBgraRow",Yl,4),jo("YuvToArgbRow",Ad,4),jo("YuvToRgba4444Row",lc,2),jo("YuvToRgb565Row",ac,2);var ai=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vd=[0,2,8],hh=[8,7,6,4,4,2,2,2,1,1,1,1],fh=1;this.WebPDecodeRGBA=function(S,R,H,ae,Ee){var Me=aa,we=new rs,We=new $e;we.ba=We,We.S=Me,We.width=[We.width],We.height=[We.height];var Qe=We.width,Xe=We.height,Dt=new Ne;if(Dt==null||S==null)var Gt=2;else e(Dt!=null),Gt=Ll(S,R,H,Dt.width,Dt.height,Dt.Pd,Dt.Qd,Dt.format,null);if(Gt!=0?Qe=0:(Qe!=null&&(Qe[0]=Dt.width[0]),Xe!=null&&(Xe[0]=Dt.height[0]),Qe=1),Qe){We.width=We.width[0],We.height=We.height[0],ae!=null&&(ae[0]=We.width),Ee!=null&&(Ee[0]=We.height);e:{if(ae=new Pt,(Ee=new gs).data=S,Ee.w=R,Ee.ha=H,Ee.kd=1,R=[0],e(Ee!=null),((S=Ll(Ee.data,Ee.w,Ee.ha,null,null,null,R,null,Ee))==0||S==7)&&R[0]&&(S=4),(R=S)==0){if(e(we!=null),ae.data=Ee.data,ae.w=Ee.w+Ee.offset,ae.ha=Ee.ha-Ee.offset,ae.put=Le,ae.ac=Ze,ae.bc=vt,ae.ma=we,Ee.xa){if((S=ft())==null){we=1;break e}if((function(qe,It){var At=[0],Zt=[0],kt=[0];t:for(;;){if(qe==null)return 0;if(It==null)return qe.a=2,0;if(qe.l=It,qe.a=0,re(qe.m,It.data,It.w,It.ha),!je(qe.m,At,Zt,kt)){qe.a=3;break t}if(qe.xb=Im,It.width=At[0],It.height=Zt[0],!rt(At[0],Zt[0],1,qe,null))break t;return 1}return e(qe.a!=0),0})(S,ae)){if(ae=(R=Pl(ae.width,ae.height,we.Oa,we.ba))==0){t:{ae=S;s:for(;;){if(ae==null){ae=0;break t}if(e(ae.s.yc!=null),e(ae.s.Ya!=null),e(0<ae.s.Wb),e((H=ae.l)!=null),e((Ee=H.ma)!=null),ae.xb!=0){if(ae.ca=Ee.ba,ae.tb=Ee.tb,e(ae.ca!=null),!Oo(Ee.Oa,H,rl)){ae.a=2;break s}if(!Wt(ae,H.width)||H.da)break s;if((H.da||dt(ae.ca.S))&&Ol(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ol()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!Q(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break s}ae.xb=0}if(!Ss(ae,ae.V,ae.Ba,ae.c,ae.i,H.o,ss))break s;Ee.Dc=ae.Ma,ae=1;break t}e(ae.a!=0),ae=0}ae=!ae}ae&&(R=S.a)}else R=S.a}else{if((S=new Bt)==null){we=1;break e}if(S.Fa=Ee.na,S.P=Ee.P,S.qc=Ee.Sa,ts(S,ae)){if((R=Pl(ae.width,ae.height,we.Oa,we.ba))==0){if(S.Aa=0,H=we.Oa,e((Ee=S)!=null),H!=null){if(0<(Qe=0>(Qe=H.Md)?0:100<Qe?255:255*Qe/100)){for(Xe=Dt=0;4>Xe;++Xe)12>(Gt=Ee.pb[Xe]).lc&&(Gt.ia=Qe*hh[0>Gt.lc?0:Gt.lc]>>3),Dt|=Gt.ia;Dt&&(alert("todo:VP8InitRandom"),Ee.ia=1)}Ee.Ga=H.Id,100<Ee.Ga?Ee.Ga=100:0>Ee.Ga&&(Ee.Ga=0)}(function(qe,It){if(qe==null)return 0;if(It==null)return Yt(qe,2,"NULL VP8Io parameter in VP8Decode().");if(!qe.cb&&!ts(qe,It))return 0;if(e(qe.cb),It.ac==null||It.ac(It)){It.ob&&(qe.L=0);var At=Vd[qe.L];if(qe.L==2?(qe.yb=0,qe.zb=0):(qe.yb=It.v-At>>4,qe.zb=It.j-At>>4,0>qe.yb&&(qe.yb=0),0>qe.zb&&(qe.zb=0)),qe.Va=It.o+15+At>>4,qe.Hb=It.va+15+At>>4,qe.Hb>qe.za&&(qe.Hb=qe.za),qe.Va>qe.Ub&&(qe.Va=qe.Ub),0<qe.L){var Zt=qe.ed;for(At=0;4>At;++At){var kt;if(qe.Qa.Cb){var Jt=qe.Qa.Lb[At];qe.Qa.Fb||(Jt+=Zt.Tb)}else Jt=Zt.Tb;for(kt=0;1>=kt;++kt){var is=qe.gd[At][kt],ys=Jt;if(Zt.Pc&&(ys+=Zt.vd[0],kt&&(ys+=Zt.od[0])),0<(ys=0>ys?0:63<ys?63:ys)){var hs=ys;0<Zt.wb&&(hs=4<Zt.wb?hs>>2:hs>>1)>9-Zt.wb&&(hs=9-Zt.wb),1>hs&&(hs=1),is.dd=hs,is.tc=2*ys+hs,is.ld=40<=ys?2:15<=ys?1:0}else is.tc=0;is.La=kt}}}At=0}else Yt(qe,6,"Frame setup failed"),At=qe.a;if(At=At==0){if(At){qe.$c=0,0<qe.Aa||(qe.Ic=fh);t:{At=qe.Ic,Zt=4*(hs=qe.za);var qs=32*hs,Fs=hs+1,yn=0<qe.L?hs*(0<qe.Aa?2:1):0,Vs=(qe.Aa==2?2:1)*hs;if((is=Zt+832+(kt=3*(16*At+Vd[qe.L])/2*qs)+(Jt=qe.Fa!=null&&0<qe.Fa.length?qe.Kc.c*qe.Kc.i:0))!=is)At=0;else{if(is>qe.Vb){if(qe.Vb=0,qe.Ec=a(is),qe.Fc=0,qe.Ec==null){At=Yt(qe,1,"no memory during frame initialization.");break t}qe.Vb=is}is=qe.Ec,ys=qe.Fc,qe.Ac=is,qe.Bc=ys,ys+=Zt,qe.Gd=o(qs,Rt),qe.Hd=0,qe.rb=o(Fs+1,Re),qe.sb=1,qe.wa=yn?o(yn,nt):null,qe.Y=0,qe.D.Nb=0,qe.D.wa=qe.wa,qe.D.Y=qe.Y,0<qe.Aa&&(qe.D.Y+=hs),e(!0),qe.oc=is,qe.pc=ys,ys+=832,qe.ya=o(Vs,Ke),qe.aa=0,qe.D.ya=qe.ya,qe.D.aa=qe.aa,qe.Aa==2&&(qe.D.aa+=hs),qe.R=16*hs,qe.B=8*hs,hs=(qs=Vd[qe.L])*qe.R,qs=qs/2*qe.B,qe.sa=is,qe.ta=ys+hs,qe.qa=qe.sa,qe.ra=qe.ta+16*At*qe.R+qs,qe.Ha=qe.qa,qe.Ia=qe.ra+8*At*qe.B+qs,qe.$c=0,ys+=kt,qe.mb=Jt?is:null,qe.nb=Jt?ys:null,e(ys+Jt<=qe.Fc+qe.Vb),Ms(qe),i(qe.Ac,qe.Bc,0,Zt),At=1}}if(At){if(It.ka=0,It.y=qe.sa,It.O=qe.ta,It.f=qe.qa,It.N=qe.ra,It.ea=qe.Ha,It.Vd=qe.Ia,It.fa=qe.R,It.Rc=qe.B,It.F=null,It.J=0,!S0){for(At=-255;255>=At;++At)Yc[255+At]=0>At?-At:At;for(At=-1020;1020>=At;++At)N0[1020+At]=-128>At?-128:127<At?127:At;for(At=-112;112>=At;++At)ah[112+At]=-16>At?-16:15<At?15:At;for(At=-255;510>=At;++At)lh[255+At]=0>At?0:255<At?255:At;S0=1}Fa=it,ko=cs,sl=fs,Jn=Ys,Kn=Ls,ra=js,vr=y0,ii=Ro,Xl=ve,Al=et,Kc=b0,rh=W,Dm=Nt,k_=wt,U_=jl,B_=ks,Rm=Xn,Tm=zr,Hr[0]=ti,Hr[1]=bs,Hr[2]=Br,Hr[3]=Ar,Hr[4]=Mr,Hr[5]=fr,Hr[6]=hn,Hr[7]=ci,Hr[8]=sa,Hr[9]=Vr,ba[0]=ms,ba[1]=ws,ba[2]=es,ba[3]=Os,ba[4]=Ws,ba[5]=$s,ba[6]=Is,kl[0]=Ga,kl[1]=zt,kl[2]=kr,kl[3]=na,kl[4]=Ds,kl[5]=tl,kl[6]=Un,At=1}else At=0}At&&(At=(function(Ln,Or){for(Ln.M=0;Ln.M<Ln.Va;++Ln.M){var Sn,Ks=Ln.Jc[Ln.M&Ln.Xb],Rs=Ln.m,Wr=Ln;for(Sn=0;Sn<Wr.za;++Sn){var un=Rs,Dn=Wr,ar=Dn.Ac,Ni=Dn.Bc+4*Sn,Vi=Dn.zc,Er=Dn.ya[Dn.aa+Sn];if(Dn.Qa.Bb?Er.$b=ge(un,Dn.Pa.jb[0])?2+ge(un,Dn.Pa.jb[2]):ge(un,Dn.Pa.jb[1]):Er.$b=0,Dn.kc&&(Er.Ad=ge(un,Dn.Bd)),Er.Za=!ge(un,145)+0,Er.Za){var ui=Er.Ob,la=0;for(Dn=0;4>Dn;++Dn){var hi,jn=Vi[0+Dn];for(hi=0;4>hi;++hi){jn=Qi[ar[Ni+hi]][jn];for(var Vn=M0[ge(un,jn[0])];0<Vn;)Vn=M0[2*Vn+ge(un,jn[Vn])];jn=-Vn,ar[Ni+hi]=jn}r(ui,la,ar,Ni,4),la+=4,Vi[0+Dn]=jn}}else jn=ge(un,156)?ge(un,128)?1:3:ge(un,163)?2:0,Er.Ob[0]=jn,i(ar,Ni,jn,4),i(Vi,0,jn,4);Er.Dd=ge(un,142)?ge(un,114)?ge(un,183)?1:3:2:0}if(Wr.m.Ka)return Yt(Ln,7,"Premature end-of-partition0 encountered.");for(;Ln.ja<Ln.za;++Ln.ja){if(Wr=Ks,un=(Rs=Ln).rb[Rs.sb-1],ar=Rs.rb[Rs.sb+Rs.ja],Sn=Rs.ya[Rs.aa+Rs.ja],Ni=Rs.kc?Sn.Ad:0)un.la=ar.la=0,Sn.Za||(un.Na=ar.Na=0),Sn.Hc=0,Sn.Gc=0,Sn.ia=0;else{var Fr,Zn;if(un=ar,ar=Wr,Ni=Rs.Pa.Xc,Vi=Rs.ya[Rs.aa+Rs.ja],Er=Rs.pb[Vi.$b],Dn=Vi.ad,ui=0,la=Rs.rb[Rs.sb-1],jn=hi=0,i(Dn,ui,0,384),Vi.Za)var Si=0,Kr=Ni[3];else{Vn=a(16);var zn=un.Na+la.Na;if(zn=Qa(ar,Ni[1],zn,Er.Eb,0,Vn,0),un.Na=la.Na=(0<zn)+0,1<zn)Fa(Vn,0,Dn,ui);else{var li=Vn[0]+3>>3;for(Vn=0;256>Vn;Vn+=16)Dn[ui+Vn]=li}Si=1,Kr=Ni[0]}var lr=15&un.la,fi=15&la.la;for(Vn=0;4>Vn;++Vn){var mi=1&fi;for(li=Zn=0;4>li;++li)lr=lr>>1|(mi=(zn=Qa(ar,Kr,zn=mi+(1&lr),Er.Sc,Si,Dn,ui))>Si)<<7,Zn=Zn<<2|(3<zn?3:1<zn?2:Dn[ui+0]!=0),ui+=16;lr>>=4,fi=fi>>1|mi<<7,hi=(hi<<8|Zn)>>>0}for(Kr=lr,Si=fi>>4,Fr=0;4>Fr;Fr+=2){for(Zn=0,lr=un.la>>4+Fr,fi=la.la>>4+Fr,Vn=0;2>Vn;++Vn){for(mi=1&fi,li=0;2>li;++li)zn=mi+(1&lr),lr=lr>>1|(mi=0<(zn=Qa(ar,Ni[2],zn,Er.Qc,0,Dn,ui)))<<3,Zn=Zn<<2|(3<zn?3:1<zn?2:Dn[ui+0]!=0),ui+=16;lr>>=2,fi=fi>>1|mi<<5}jn|=Zn<<4*Fr,Kr|=lr<<4<<Fr,Si|=(240&fi)<<Fr}un.la=Kr,la.la=Si,Vi.Hc=hi,Vi.Gc=jn,Vi.ia=43690&jn?0:Er.ia,Ni=!(hi|jn)}if(0<Rs.L&&(Rs.wa[Rs.Y+Rs.ja]=Rs.gd[Sn.$b][Sn.Za],Rs.wa[Rs.Y+Rs.ja].La|=!Ni),Wr.Ka)return Yt(Ln,7,"Premature end-of-file encountered.")}if(Ms(Ln),Rs=Or,Wr=1,Sn=(Ks=Ln).D,un=0<Ks.L&&Ks.M>=Ks.zb&&Ks.M<=Ks.Va,Ks.Aa==0)t:{if(Sn.M=Ks.M,Sn.uc=un,Wa(Ks,Sn),Wr=1,Sn=(Zn=Ks.D).Nb,un=(jn=Vd[Ks.L])*Ks.R,ar=jn/2*Ks.B,Vn=16*Sn*Ks.R,li=8*Sn*Ks.B,Ni=Ks.sa,Vi=Ks.ta-un+Vn,Er=Ks.qa,Dn=Ks.ra-ar+li,ui=Ks.Ha,la=Ks.Ia-ar+li,fi=(lr=Zn.M)==0,hi=lr>=Ks.Va-1,Ks.Aa==2&&Wa(Ks,Zn),Zn.uc)for(mi=(zn=Ks).D.M,e(zn.D.uc),Zn=zn.yb;Zn<zn.Hb;++Zn){Si=Zn,Kr=mi;var pr=(Qn=(gi=zn).D).Nb;Fr=gi.R;var Qn=Qn.wa[Qn.Y+Si],oa=gi.sa,qr=gi.ta+16*pr*Fr+16*Si,rn=Qn.dd,ln=Qn.tc;if(ln!=0)if(e(3<=ln),gi.L==1)0<Si&&B_(oa,qr,Fr,ln+4),Qn.La&&Tm(oa,qr,Fr,ln),0<Kr&&U_(oa,qr,Fr,ln+4),Qn.La&&Rm(oa,qr,Fr,ln);else{var Hn=gi.B,Ia=gi.qa,ul=gi.ra+8*pr*Hn+8*Si,Ca=gi.Ha,gi=gi.Ia+8*pr*Hn+8*Si;pr=Qn.ld,0<Si&&(ii(oa,qr,Fr,ln+4,rn,pr),Al(Ia,ul,Ca,gi,Hn,ln+4,rn,pr)),Qn.La&&(rh(oa,qr,Fr,ln,rn,pr),k_(Ia,ul,Ca,gi,Hn,ln,rn,pr)),0<Kr&&(vr(oa,qr,Fr,ln+4,rn,pr),Xl(Ia,ul,Ca,gi,Hn,ln+4,rn,pr)),Qn.La&&(Kc(oa,qr,Fr,ln,rn,pr),Dm(Ia,ul,Ca,gi,Hn,ln,rn,pr))}}if(Ks.ia&&alert("todo:DitherRow"),Rs.put!=null){if(Zn=16*lr,lr=16*(lr+1),fi?(Rs.y=Ks.sa,Rs.O=Ks.ta+Vn,Rs.f=Ks.qa,Rs.N=Ks.ra+li,Rs.ea=Ks.Ha,Rs.W=Ks.Ia+li):(Zn-=jn,Rs.y=Ni,Rs.O=Vi,Rs.f=Er,Rs.N=Dn,Rs.ea=ui,Rs.W=la),hi||(lr-=jn),lr>Rs.o&&(lr=Rs.o),Rs.F=null,Rs.J=null,Ks.Fa!=null&&0<Ks.Fa.length&&Zn<lr&&(Rs.J=Sr(Ks,Rs,Zn,lr-Zn),Rs.F=Ks.mb,Rs.F==null&&Rs.F.length==0)){Wr=Yt(Ks,3,"Could not decode alpha data.");break t}Zn<Rs.j&&(jn=Rs.j-Zn,Zn=Rs.j,e(!(1&jn)),Rs.O+=Ks.R*jn,Rs.N+=Ks.B*(jn>>1),Rs.W+=Ks.B*(jn>>1),Rs.F!=null&&(Rs.J+=Rs.width*jn)),Zn<lr&&(Rs.O+=Rs.v,Rs.N+=Rs.v>>1,Rs.W+=Rs.v>>1,Rs.F!=null&&(Rs.J+=Rs.v),Rs.ka=Zn-Rs.j,Rs.U=Rs.va-Rs.v,Rs.T=lr-Zn,Wr=Rs.put(Rs))}Sn+1!=Ks.Ic||hi||(r(Ks.sa,Ks.ta-un,Ni,Vi+16*Ks.R,un),r(Ks.qa,Ks.ra-ar,Er,Dn+8*Ks.B,ar),r(Ks.Ha,Ks.Ia-ar,ui,la+8*Ks.B,ar))}if(!Wr)return Yt(Ln,6,"Output aborted.")}return 1})(qe,It)),It.bc!=null&&It.bc(It),At&=1}return At?(qe.cb=0,At):0})(S,ae)||(R=S.a)}}else R=S.a}R==0&&we.Oa!=null&&we.Oa.fd&&(R=nh(we.ba))}we=R}Me=we!=0?null:11>Me?We.f.RGBA.eb:We.f.kb.y}else Me=null;return Me};var w0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(I,E){for(var A="",Y=0;Y<4;Y++)A+=String.fromCharCode(I[E++]);return A}function m(I,E){return I[E+0]|I[E+1]<<8}function _(I,E){return(I[E+0]|I[E+1]<<8|I[E+2]<<16)>>>0}function p(I,E){return(I[E+0]|I[E+1]<<8|I[E+2]<<16|I[E+3]<<24)>>>0}new u;var g=[0],C=[0],y=[],N=new u,v=t,P=(function(I,E){var A={},Y=0,se=!1,X=0,z=0;if(A.frames=[],!(function(j,K){for(var J=0;J<4;J++)if(j[K+J]!="RIFF".charCodeAt(J))return!0;return!1})(I,E)){for(p(I,E+=4),E+=8;E<I.length;){var $=h(I,E),F=p(I,E+=4);E+=4;var L=F+(1&F);switch($){case"VP8 ":case"VP8L":A.frames[Y]===void 0&&(A.frames[Y]={}),(T=A.frames[Y]).src_off=se?z:E-8,T.src_size=X+F+8,Y++,se&&(se=!1,X=0,z=0);break;case"VP8X":(T=A.header={}).feature_flags=I[E];var re=E+4;T.canvas_width=1+_(I,re),re+=3,T.canvas_height=1+_(I,re),re+=3;break;case"ALPH":se=!0,X=L+8,z=E-8;break;case"ANIM":(T=A.header).bgcolor=p(I,E),re=E+4,T.loop_count=m(I,re),re+=2;break;case"ANMF":var fe,T;(T=A.frames[Y]={}).offset_x=2*_(I,E),E+=3,T.offset_y=2*_(I,E),E+=3,T.width=1+_(I,E),E+=3,T.height=1+_(I,E),E+=3,T.duration=_(I,E),E+=3,fe=I[E++],T.dispose=1&fe,T.blend=fe>>1&1}$!="ANMF"&&(E+=L)}return A}})(v,0);P.response=v,P.rgbaoutput=!0,P.dataurl=!1;var w=P.header?P.header:null,M=P.frames?P.frames:null;if(w){w.loop_counter=w.loop_count,g=[w.canvas_height],C=[w.canvas_width];for(var k=0;k<M.length&&M[k].blend!=0;k++);}var B=M[0],G=N.WebPDecodeRGBA(v,B.src_off,B.src_size,C,g);B.rgba=G,B.imgwidth=C[0],B.imgheight=g[0];for(var U=0;U<C[0]*g[0]*4;U++)y[U]=G[U];return this.width=C,this.height=g,this.data=y,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function wH(){var t,e=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(e));t=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function LH(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var e,n,r,i,a,o,c,u,h,m=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new u,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new o,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new o,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new _(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,h=new m}]);var _=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=j;Object.defineProperty(this,"pdf",{get:function(){return K}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Q){J=!!Q}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(Q){q=!!Q}});var V=0;Object.defineProperty(this,"posX",{get:function(){return V},set:function(Q){isNaN(Q)||(V=Q)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(Q){isNaN(Q)||(ce=Q)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Q){var ee;typeof Q=="number"?ee=[Q,Q,Q,Q]:((ee=new Array(4))[0]=Q[0],ee[1]=Q.length>=2?Q[1]:ee[0],ee[2]=Q.length>=3?Q[2]:ee[0],ee[3]=Q.length>=4?Q[3]:ee[1]),h.margin=ee}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Q){me=Q}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Q){Ce=Q}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(Q){ge=Q}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Q){Q instanceof m&&(h=Q)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Q){h.path=Q}});var Ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ge},set:function(Q){Ge=Q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Q){var ee;ee=p(Q),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Q){var ee=p(Q);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Q){["butt","round","square"].indexOf(Q)!==-1&&(this.ctx.lineCap=Q,this.pdf.setLineCap(Q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Q){isNaN(Q)||(this.ctx.lineWidth=Q,this.pdf.setLineWidth(Q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Q){["bevel","round","miter"].indexOf(Q)!==-1&&(this.ctx.lineJoin=Q,this.pdf.setLineJoin(Q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Q){isNaN(Q)||(this.ctx.miterLimit=Q,this.pdf.setMiterLimit(Q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Q){this.ctx.textBaseline=Q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Q){["right","end","center","left","start"].indexOf(Q)!==-1&&(this.ctx.textAlign=Q)}});var te=null,he=null,de=null;Object.defineProperty(this,"fontFaces",{get:function(){return de},set:function(Q){te=null,he=null,de=Q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Q){var ee;if(this.ctx.font=Q,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Q))!==null){var Z=ee[1];ee[2];var le=ee[3],xe=ee[4];ee[5];var be=ee[6],ne=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xe)[2];xe=Math.floor(ne==="px"?parseFloat(xe)*this.pdf.internal.scaleFactor:ne==="em"?parseFloat(xe)*this.pdf.getFontSize():parseFloat(xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xe);var ie=(function(pt){var mt,Ye,at=[],Fe=pt.trim();if(Fe==="")return EC;if(Fe in pT)return[pT[Fe]];for(;Fe!=="";){switch(Ye=null,mt=(Fe=bT(Fe)).charAt(0)){case'"':case"'":Ye=RH(Fe.substring(1),mt);break;default:Ye=TH(Fe)}if(Ye===null||(at.push(Ye[0]),(Fe=bT(Ye[1]))!==""&&Fe.charAt(0)!==","))return EC;Fe=Fe.replace(/^,/,"")}return at})(be);if(this.fontFaces){var pe=(function(pt,mt){var Ye=pt.getFontList(),at=JSON.stringify(Ye);if(te===null||he!==at){var Fe=(function(tt){var ct=[];return Object.keys(tt).forEach(function(Mt){tt[Mt].forEach(function(dt){var Je=null;switch(dt){case"bold":Je={family:Mt,weight:"bold"};break;case"italic":Je={family:Mt,style:"italic"};break;case"bolditalic":Je={family:Mt,weight:"bold",style:"italic"};break;case"":case"normal":Je={family:Mt}}Je!==null&&(Je.ref={name:Mt,style:dt},ct.push(Je))})}),ct})(Ye);te=(function(tt){for(var ct={},Mt=0;Mt<tt.length;++Mt){var dt=vC(tt[Mt]),Je=dt.family,De=dt.stretch,$e=dt.style,Ne=dt.weight;ct[Je]=ct[Je]||{},ct[Je][De]=ct[Je][De]||{},ct[Je][De][$e]=ct[Je][De][$e]||{},ct[Je][De][$e][Ne]=dt}return ct})(Fe.concat(mt)),he=at}return te})(this.pdf,this.fontFaces),ze=ie.map(function(pt){return{family:pt,stretch:"normal",weight:le,style:Z}}),xt=(function(pt,mt,Ye){for(var at=(Ye=Ye||{}).defaultFontFamily||"times",Fe=Object.assign({},DH,Ye.genericFontFamilies||{}),tt=null,ct=null,Mt=0;Mt<mt.length;++Mt)if(Fe[(tt=vC(mt[Mt])).family]&&(tt.family=Fe[tt.family]),pt.hasOwnProperty(tt.family)){ct=pt[tt.family];break}if(!(ct=ct||pt[at]))throw new Error("Could not find a font-family for the rule '"+yT(tt)+"' and default family '"+at+"'.");if(ct=(function(dt,Je){if(Je[dt])return Je[dt];var De=B2[dt],$e=De<=B2.normal?-1:1,Ne=xT(Je,vO,De,$e);if(!Ne)throw new Error("Could not find a matching font-stretch value for "+dt);return Ne})(tt.stretch,ct),ct=(function(dt,Je){if(Je[dt])return Je[dt];for(var De=SO[dt],$e=0;$e<De.length;++$e)if(Je[De[$e]])return Je[De[$e]];throw new Error("Could not find a matching font-style for "+dt)})(tt.style,ct),!(ct=(function(dt,Je){if(Je[dt])return Je[dt];if(dt===400&&Je[500])return Je[500];if(dt===500&&Je[400])return Je[400];var De=EH[dt],$e=xT(Je,EO,De,dt<400?-1:1);if(!$e)throw new Error("Could not find a matching font-weight for value "+dt);return $e})(tt.weight,ct)))throw new Error("Failed to resolve a font for the rule '"+yT(tt)+"'.");return ct})(pe,ze);this.pdf.setFont(xt.ref.name,xt.ref.style)}else{var st="";(le==="bold"||parseInt(le,10)>=700||Z==="bold")&&(st="bold"),Z==="italic"&&(st+="italic"),st.length===0&&(st="normal");for(var St="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<ie.length;Be++){if(this.pdf.internal.getFont(ie[Be],st,{noFallback:!0,disableWarning:!0})!==void 0){St=ie[Be];break}if(st==="bolditalic"&&this.pdf.internal.getFont(ie[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)St=ie[Be],st="bold";else if(this.pdf.internal.getFont(ie[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){St=ie[Be],st="normal";break}}if(St===""){for(var lt=0;lt<ie.length;lt++)if(ot[ie[lt]]){St=ot[ie[lt]];break}}St=St===""?"Times":St,this.pdf.setFont(St,st)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Q){this.ctx.globalCompositeOperation=Q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Q){this.ctx.globalAlpha=Q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Q){this.ctx.lineDashOffset=Q,T.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Q){this.ctx.lineDash=Q,T.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Q){this.ctx.ignoreClearRect=!!Q}})};_.prototype.setLineDash=function(j){this.lineDash=j},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){M.call(this,"fill",!1)},_.prototype.stroke=function(){M.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(j,K){if(isNaN(j)||isNaN(K))throw Lr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(j,K));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(j,K)},_.prototype.closePath=function(){var j=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Nr(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){j=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(j.x,j.y)},_.prototype.lineTo=function(j,K){if(isNaN(j)||isNaN(K))throw Lr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(j,K));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},_.prototype.quadraticCurveTo=function(j,K,J,q){if(isNaN(J)||isNaN(q)||isNaN(j)||isNaN(K))throw Lr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var V=this.ctx.transform.applyToPoint(new o(J,q)),ce=this.ctx.transform.applyToPoint(new o(j,K));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},_.prototype.bezierCurveTo=function(j,K,J,q,V,ce){if(isNaN(V)||isNaN(ce)||isNaN(j)||isNaN(K)||isNaN(J)||isNaN(q))throw Lr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(V,ce)),Ce=this.ctx.transform.applyToPoint(new o(j,K)),ge=this.ctx.transform.applyToPoint(new o(J,q));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:ge.x,y2:ge.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},_.prototype.arc=function(j,K,J,q,V,ce){if(isNaN(j)||isNaN(K)||isNaN(J)||isNaN(q)||isNaN(V))throw Lr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(j,K));j=me.x,K=me.y;var Ce=this.ctx.transform.applyToPoint(new o(0,J)),ge=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(Ce.x-ge.x,2)+Math.pow(Ce.y-ge.y,2))}Math.abs(V-q)>=2*Math.PI&&(q=0,V=2*Math.PI),this.path.push({type:"arc",x:j,y:K,radius:J,startAngle:q,endAngle:V,counterclockwise:ce})},_.prototype.arcTo=function(j,K,J,q,V){throw new Error("arcTo not implemented.")},_.prototype.rect=function(j,K,J,q){if(isNaN(j)||isNaN(K)||isNaN(J)||isNaN(q))throw Lr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,K),this.lineTo(j+J,K),this.lineTo(j+J,K+q),this.lineTo(j,K+q),this.lineTo(j,K),this.lineTo(j+J,K),this.lineTo(j,K)},_.prototype.fillRect=function(j,K,J,q){if(isNaN(j)||isNaN(K)||isNaN(J)||isNaN(q))throw Lr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var V={};this.lineCap!=="butt"&&(V.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(V.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,K,J,q),this.fill(),V.hasOwnProperty("lineCap")&&(this.lineCap=V.lineCap),V.hasOwnProperty("lineJoin")&&(this.lineJoin=V.lineJoin)}},_.prototype.strokeRect=function(j,K,J,q){if(isNaN(j)||isNaN(K)||isNaN(J)||isNaN(q))throw Lr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(j,K,J,q),this.stroke())},_.prototype.clearRect=function(j,K,J,q){if(isNaN(j)||isNaN(K)||isNaN(J)||isNaN(q))throw Lr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,K,J,q))},_.prototype.save=function(j){j=typeof j!="boolean"||j;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},_.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(K),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(j){var K,J,q,V;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))K=0,J=0,q=0,V=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(ce!==null)K=parseInt(ce[1]),J=parseInt(ce[2]),q=parseInt(ce[3]),V=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)K=parseInt(ce[1]),J=parseInt(ce[2]),q=parseInt(ce[3]),V=parseFloat(ce[4]);else{if(V=1,typeof j=="string"&&j.charAt(0)!=="#"){var me=new _O(j);j=me.ok?me.toHex():"#000000"}j.length===4?(K=j.substring(1,2),K+=K,J=j.substring(2,3),J+=J,q=j.substring(3,4),q+=q):(K=j.substring(1,3),J=j.substring(3,5),q=j.substring(5,7)),K=parseInt(K,16),J=parseInt(J,16),q=parseInt(q,16)}}return{r:K,g:J,b:q,a:V,style:j}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(j,K,J,q){if(isNaN(K)||isNaN(J)||typeof j!="string")throw Lr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!g.call(this)){var V=L(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;Y.call(this,{text:j,x:K,y:J,scale:ce,angle:V,align:this.textAlign,maxWidth:q})}},_.prototype.strokeText=function(j,K,J,q){if(isNaN(K)||isNaN(J)||typeof j!="string")throw Lr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){q=isNaN(q)?void 0:q;var V=L(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;Y.call(this,{text:j,x:K,y:J,scale:ce,renderingMode:"stroke",angle:V,align:this.textAlign,maxWidth:q})}},_.prototype.measureText=function(j){if(typeof j!="string")throw Lr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,J=this.pdf.internal.scaleFactor,q=K.internal.getFontSize(),V=K.getStringUnitWidth(j)*q/K.internal.scaleFactor;return new function(ce){var me=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:V*=Math.round(96*J/72*1e4)/1e4})},_.prototype.scale=function(j,K){if(isNaN(j)||isNaN(K))throw Lr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new u(j,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},_.prototype.rotate=function(j){if(isNaN(j))throw Lr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new u(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},_.prototype.translate=function(j,K){if(isNaN(j)||isNaN(K))throw Lr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new u(1,0,0,1,j,K);this.ctx.transform=this.ctx.transform.multiply(J)},_.prototype.transform=function(j,K,J,q,V,ce){if(isNaN(j)||isNaN(K)||isNaN(J)||isNaN(q)||isNaN(V)||isNaN(ce))throw Lr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new u(j,K,J,q,V,ce);this.ctx.transform=this.ctx.transform.multiply(me)},_.prototype.setTransform=function(j,K,J,q,V,ce){j=isNaN(j)?1:j,K=isNaN(K)?0:K,J=isNaN(J)?0:J,q=isNaN(q)?1:q,V=isNaN(V)?0:V,ce=isNaN(ce)?0:ce,this.ctx.transform=new u(j,K,J,q,V,ce)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(j,K,J,q,V,ce,me,Ce,ge){var Ge=this.pdf.getImageProperties(j),te=1,he=1,de=1,Q=1;q!==void 0&&Ce!==void 0&&(de=Ce/q,Q=ge/V,te=Ge.width/q*Ce/q,he=Ge.height/V*ge/V),ce===void 0&&(ce=K,me=J,K=0,J=0),q!==void 0&&Ce===void 0&&(Ce=q,ge=V),q===void 0&&Ce===void 0&&(Ce=Ge.width,ge=Ge.height);var ee=this.ctx.transform.decompose(),Z=L(ee.rotate.shx),le=new u,xe=(le=(le=(le=le.multiply(ee.translate)).multiply(ee.skew)).multiply(ee.scale)).applyToRectangle(new c(ce-K*de,me-J*Q,q*te,V*he));if(this.autoPaging){for(var be,ne=N.call(this,xe),ie=[],pe=0;pe<ne.length;pe+=1)ie.indexOf(ne[pe])===-1&&ie.push(ne[pe]);w(ie);for(var ze=ie[0],xt=ie[ie.length-1],st=ze;st<xt+1;st++){this.pdf.setPage(st);var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=st===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=st===1?0:Be+(st-2)*lt;if(this.ctx.clip_path.length!==0){var mt=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(be,this.posX+this.margin[3],-pt+ot+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=mt}var Ye=JSON.parse(JSON.stringify(xe));Ye=P([Ye],this.posX+this.margin[3],-pt+ot+this.ctx.prevPageLastElemOffset)[0];var at=(st>ze||st<xt)&&y.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,lt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Ye.x,Ye.y,Ye.w,Ye.h,null,null,Z),at&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(j,"JPEG",xe.x,xe.y,xe.w,xe.h,null,null,Z)};var N=function(j,K,J){var q=[];K=K||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var V=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":q.push(Math.floor((j.y+V)/J)+1);break;case"arc":q.push(Math.floor((j.y+V-j.radius)/J)+1),q.push(Math.floor((j.y+V+j.radius)/J)+1);break;case"qct":var ce=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);q.push(Math.floor((ce.y+V)/J)+1),q.push(Math.floor((ce.y+ce.h+V)/J)+1);break;case"bct":var me=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);q.push(Math.floor((me.y+V)/J)+1),q.push(Math.floor((me.y+me.h+V)/J)+1);break;case"rect":q.push(Math.floor((j.y+V)/J)+1),q.push(Math.floor((j.y+j.h+V)/J)+1)}for(var Ce=0;Ce<q.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<q[Ce];)v.call(this);return q},v=function(){var j=this.fillStyle,K=this.strokeStyle,J=this.font,q=this.lineCap,V=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=K,this.font=J,this.lineCap=q,this.lineWidth=V,this.lineJoin=ce},P=function(j,K,J){for(var q=0;q<j.length;q++)switch(j[q].type){case"bct":j[q].x2+=K,j[q].y2+=J;case"qct":j[q].x1+=K,j[q].y1+=J;default:j[q].x+=K,j[q].y+=J}return j},w=function(j){return j.sort(function(K,J){return K-J})},M=function(j,K){var J=this.fillStyle,q=this.strokeStyle,V=this.lineCap,ce=this.lineWidth,me=Math.abs(ce*this.ctx.transform.scaleX),Ce=this.lineJoin;if(this.autoPaging){for(var ge,Ge,te=JSON.parse(JSON.stringify(this.path)),he=JSON.parse(JSON.stringify(this.path)),de=[],Q=0;Q<he.length;Q++)if(he[Q].x!==void 0)for(var ee=N.call(this,he[Q]),Z=0;Z<ee.length;Z+=1)de.indexOf(ee[Z])===-1&&de.push(ee[Z]);for(var le=0;le<de.length;le++)for(;this.pdf.internal.getNumberOfPages()<de[le];)v.call(this);w(de);for(var xe=de[0],be=de[de.length-1],ne=xe;ne<be+1;ne++){this.pdf.setPage(ne),this.fillStyle=J,this.strokeStyle=q,this.lineCap=V,this.lineWidth=me,this.lineJoin=Ce;var ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=ne===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=ne===1?0:ze+(ne-2)*xt;if(this.ctx.clip_path.length!==0){var St=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(ge,this.posX+this.margin[3],-st+pe+this.ctx.prevPageLastElemOffset),k.call(this,j,!0),this.path=St}if(Ge=JSON.parse(JSON.stringify(te)),this.path=P(Ge,this.posX+this.margin[3],-st+pe+this.ctx.prevPageLastElemOffset),K===!1||ne===0){var ot=(ne>xe||ne<be)&&y.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ie,xt,null).clip().discardPath()),k.call(this,j,K),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}this.path=te}else this.lineWidth=me,k.call(this,j,K),this.lineWidth=ce},k=function(j,K){if((j!=="stroke"||K||!C.call(this))&&(j==="stroke"||K||!g.call(this))){for(var J,q,V=[],ce=this.path,me=0;me<ce.length;me++){var Ce=ce[me];switch(Ce.type){case"begin":V.push({begin:!0});break;case"close":V.push({close:!0});break;case"mt":V.push({start:Ce,deltas:[],abs:[]});break;case"lt":var ge=V.length;if(ce[me-1]&&!isNaN(ce[me-1].x)&&(J=[Ce.x-ce[me-1].x,Ce.y-ce[me-1].y],ge>0)){for(;ge>=0;ge--)if(V[ge-1].close!==!0&&V[ge-1].begin!==!0){V[ge-1].deltas.push(J),V[ge-1].abs.push(Ce);break}}break;case"bct":J=[Ce.x1-ce[me-1].x,Ce.y1-ce[me-1].y,Ce.x2-ce[me-1].x,Ce.y2-ce[me-1].y,Ce.x-ce[me-1].x,Ce.y-ce[me-1].y],V[V.length-1].deltas.push(J);break;case"qct":var Ge=ce[me-1].x+2/3*(Ce.x1-ce[me-1].x),te=ce[me-1].y+2/3*(Ce.y1-ce[me-1].y),he=Ce.x+2/3*(Ce.x1-Ce.x),de=Ce.y+2/3*(Ce.y1-Ce.y),Q=Ce.x,ee=Ce.y;J=[Ge-ce[me-1].x,te-ce[me-1].y,he-ce[me-1].x,de-ce[me-1].y,Q-ce[me-1].x,ee-ce[me-1].y],V[V.length-1].deltas.push(J);break;case"arc":V.push({deltas:[],abs:[],arc:!0}),Array.isArray(V[V.length-1].abs)&&V[V.length-1].abs.push(Ce)}}q=K?null:j==="stroke"?"stroke":"fill";for(var Z=!1,le=0;le<V.length;le++)if(V[le].arc)for(var xe=V[le].abs,be=0;be<xe.length;be++){var ne=xe[be];ne.type==="arc"?U.call(this,ne.x,ne.y,ne.radius,ne.startAngle,ne.endAngle,ne.counterclockwise,void 0,K,!Z):se.call(this,ne.x,ne.y),Z=!0}else if(V[le].close===!0)this.pdf.internal.out("h"),Z=!1;else if(V[le].begin!==!0){var ie=V[le].start.x,pe=V[le].start.y;X.call(this,V[le].deltas,ie,pe),Z=!0}q&&I.call(this,q),K&&E.call(this)}},B=function(j){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-J;case"top":return j+K-J;case"hanging":return j+K-2*J;case"middle":return j+K/2-J;default:return j}},G=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(K,J){this.colorStops.push([K,J])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(j,K,J,q,V,ce,me,Ce,ge){for(var Ge=$.call(this,J,q,V,ce),te=0;te<Ge.length;te++){var he=Ge[te];te===0&&(ge?A.call(this,he.x1+j,he.y1+K):se.call(this,he.x1+j,he.y1+K)),z.call(this,j,K,he.x2,he.y2,he.x3,he.y3,he.x4,he.y4)}Ce?E.call(this):I.call(this,me)},I=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},E=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(j,K){this.pdf.internal.out(n(j)+" "+r(K)+" m")},Y=function(j){var K;switch(j.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var J,q,V,ce=this.pdf.getTextDimensions(j.text),me=B.call(this,j.y),Ce=G.call(this,me)-ce.h,ge=this.ctx.transform.applyToPoint(new o(j.x,me));if(this.autoPaging){var Ge=this.ctx.transform.decompose(),te=new u;te=(te=(te=te.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale);for(var he=this.ctx.transform.applyToRectangle(new c(j.x,me,ce.w,ce.h)),de=te.applyToRectangle(new c(j.x,Ce,ce.w,ce.h)),Q=N.call(this,de),ee=[],Z=0;Z<Q.length;Z+=1)ee.indexOf(Q[Z])===-1&&ee.push(Q[Z]);w(ee);for(var le=ee[0],xe=ee[ee.length-1],be=le;be<xe+1;be++){this.pdf.setPage(be);var ne=be===1?this.posY+this.margin[0]:this.margin[0],ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[2],ze=pe-this.margin[0],xt=this.pdf.internal.pageSize.width-this.margin[1],st=xt-this.margin[3],St=be===1?0:ie+(be-2)*ze;if(this.ctx.clip_path.length!==0){var ot=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(J,this.posX+this.margin[3],-1*St+ne),k.call(this,"fill",!0),this.path=ot}var Be=P([JSON.parse(JSON.stringify(de))],this.posX+this.margin[3],-St+ne+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(q*j.scale),V=this.lineWidth,this.lineWidth=V*j.scale);var lt=this.autoPaging!=="text";if(lt||Be.y+Be.h<=pe){if(lt||Be.y>=ne&&Be.x<=xt){var pt=lt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||xt-Be.x)[0],mt=P([JSON.parse(JSON.stringify(he))],this.posX+this.margin[3],-St+ne+this.ctx.prevPageLastElemOffset)[0],Ye=lt&&(be>le||be<xe)&&y.call(this);Ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,ze,null).clip().discardPath()),this.pdf.text(pt,mt.x,mt.y,{angle:j.angle,align:K,renderingMode:j.renderingMode}),Ye&&this.pdf.restoreGraphicsState()}}else Be.y<pe&&(this.ctx.prevPageLastElemOffset+=pe-Be.y);j.scale>=.01&&(this.pdf.setFontSize(q),this.lineWidth=V)}}else j.scale>=.01&&(q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(q*j.scale),V=this.lineWidth,this.lineWidth=V*j.scale),this.pdf.text(j.text,ge.x+this.posX,ge.y+this.posY,{angle:j.angle,align:K,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(q),this.lineWidth=V)},se=function(j,K,J,q){J=J||0,q=q||0,this.pdf.internal.out(n(j+J)+" "+r(K+q)+" l")},X=function(j,K,J){return this.pdf.lines(j,K,J,null,null)},z=function(j,K,J,q,V,ce,me,Ce){this.pdf.internal.out([e(i(J+j)),e(a(q+K)),e(i(V+j)),e(a(ce+K)),e(i(me+j)),e(a(Ce+K)),"c"].join(" "))},$=function(j,K,J,q){for(var V=2*Math.PI,ce=Math.PI/2;K>J;)K-=V;var me=Math.abs(J-K);me<V&&q&&(me=V-me);for(var Ce=[],ge=q?-1:1,Ge=K;me>1e-5;){var te=Ge+ge*Math.min(me,ce);Ce.push(F.call(this,j,Ge,te)),me-=Math.abs(te-Ge),Ge=te}return Ce},F=function(j,K,J){var q=(J-K)/2,V=j*Math.cos(q),ce=j*Math.sin(q),me=V,Ce=-ce,ge=me*me+Ce*Ce,Ge=ge+me*V+Ce*ce,te=4/3*(Math.sqrt(2*ge*Ge)-Ge)/(me*ce-Ce*V),he=me-te*Ce,de=Ce+te*me,Q=he,ee=-de,Z=q+K,le=Math.cos(Z),xe=Math.sin(Z);return{x1:j*Math.cos(K),y1:j*Math.sin(K),x2:he*le-de*xe,y2:he*xe+de*le,x3:Q*le-ee*xe,y3:Q*xe+ee*le,x4:j*Math.cos(J),y4:j*Math.sin(J)}},L=function(j){return 180*j/Math.PI},re=function(j,K,J,q,V,ce){var me=j+.5*(J-j),Ce=K+.5*(q-K),ge=V+.5*(J-V),Ge=ce+.5*(q-ce),te=Math.min(j,V,me,ge),he=Math.max(j,V,me,ge),de=Math.min(K,ce,Ce,Ge),Q=Math.max(K,ce,Ce,Ge);return new c(te,de,he-te,Q-de)},fe=function(j,K,J,q,V,ce,me,Ce){var ge,Ge,te,he,de,Q,ee,Z,le,xe,be,ne,ie,pe,ze=J-j,xt=q-K,st=V-J,St=ce-q,ot=me-V,Be=Ce-ce;for(Ge=0;Ge<41;Ge++)le=(ee=(te=j+(ge=Ge/40)*ze)+ge*((de=J+ge*st)-te))+ge*(de+ge*(V+ge*ot-de)-ee),xe=(Z=(he=K+ge*xt)+ge*((Q=q+ge*St)-he))+ge*(Q+ge*(ce+ge*Be-Q)-Z),Ge==0?(be=le,ne=xe,ie=le,pe=xe):(be=Math.min(be,le),ne=Math.min(ne,xe),ie=Math.max(ie,le),pe=Math.max(pe,xe));return new c(Math.round(be),Math.round(ne),Math.round(ie-be),Math.round(pe-ne))},T=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,K,J=(j=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:K}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(nn.API),(function(t){var e=function(o){var c,u,h,m,_,p,g,C,y,N;for(u=[],h=0,m=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;m>h;h+=4)(_=(o.charCodeAt(h)<<24)+(o.charCodeAt(h+1)<<16)+(o.charCodeAt(h+2)<<8)+o.charCodeAt(h+3))!==0?(p=(_=((_=((_=((_=(_-(N=_%85))/85)-(y=_%85))/85)-(C=_%85))/85)-(g=_%85))/85)%85,u.push(p+33,g+33,C+33,y+33,N+33)):u.push(122);return(function(v,P){for(var w=P;w>0;w--)v.pop()})(u,c.length),String.fromCharCode.apply(String,u)+"~>"},n=function(o){var c,u,h,m,_,p=String,g="length",C=255,y="charCodeAt",N="slice",v="replace";for(o[N](-2),o=o[N](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),h=[],m=0,_=(o+=c="uuuuu"[N](o[g]%5||5))[g];_>m;m+=5)u=52200625*(o[y](m)-33)+614125*(o[y](m+1)-33)+7225*(o[y](m+2)-33)+85*(o[y](m+3)-33)+(o[y](m+4)-33),h.push(C&u>>24,C&u>>16,C&u>>8,C&u);return(function(P,w){for(var M=w;M>0;M--)P.pop()})(h,c[g]),p.fromCharCode.apply(p,h)},r=function(o){return o.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",h=0;h<o.length;h+=2)u+=String.fromCharCode("0x"+(o[h]+o[h+1]));return u},a=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return(c=O2(c)).reduce(function(h,m){return h+String.fromCharCode(m)},"")};t.processDataByFilters=function(o,c){var u=0,h=o||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=r(h),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=a(h),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:h,reverseChain:m.reverse().join(" ")}}})(nn.API),(function(t){t.loadFile=function(e,n,r){return(function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var c=void 0;try{c=(function(u,h,m){var _=new XMLHttpRequest,p=0,g=function(C){var y=C.length,N=[],v=String.fromCharCode;for(p=0;p<y;p+=1)N.push(v(255&C.charCodeAt(p)));return N.join("")};if(_.open("GET",u,!h),_.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(_.onload=function(){_.status===200?m(g(this.responseText)):m(void 0)}),_.send(null),h&&_.status===200)return g(_.responseText)})(i,a,o)}catch{}return c})(e,n,r)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(nn.API),(function(t){function e(){return(Cn.html2canvas?Promise.resolve(Cn.html2canvas):bb(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(Cn.DOMPurify?Promise.resolve(Cn.DOMPurify):bb(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var u=Nr(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(c,u){var h=document.createElement(c);for(var m in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[m]=u.style[m];return h},a=function c(u,h){for(var m=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),_=u.firstChild;_;_=_.nextSibling)h!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||m.appendChild(c(_,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(m.width=u.width,m.height=u.height,m.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(m.value=u.value),m.addEventListener("load",function(){m.scrollTop=u.scrollTop,m.scrollLeft=u.scrollLeft},!0)),m},o=function c(u){var h=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),h);return(m=m.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||(function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),u){case"string":return this.then(n).then(function(h){return this.set({src:i("div",{innerHTML:c,dompurify:h})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=this.opt.jsPDF,m=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=m,m)for(var g=0;g<m.length;++g){var C=m[g],y=C.src.find(function(N){return N.format==="truetype"});y&&h.addFont(y.url,C.ref.name,C.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,h.context2d.save(!0),u(this.prop.container,p)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(r(c)!=="object")return this;var u=Object.keys(c||{}).map(function(h){if(h in o.template.prop)return function(){this.prop[h]=c[h]};switch(h){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[h]=c[h]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var h=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(h):h})},o.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(h,m){return Math.floor(h*m/72*96)}return this.then(function(){(c=c||nn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,h,m){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,h,m){return this.setProgress(c?this.progress.val+c:null,u||null,h?this.progress.n+h:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(c,u){var h=this;return this.thenCore(c,u,function(m,_){return h.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(p){return h.updateProgress(null,m),p}).then(m,_).then(function(p){return h.updateProgress(1),p})})},o.prototype.thenCore=function(c,u,h){h=h||Promise.prototype.then;var m=this;c&&(c=c.bind(m)),u&&(u=u.bind(m));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:o.convert(Object.assign({},m),Promise.prototype),p=h.call(_,c,u);return o.convert(p,m.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(h){u=u.thenCore(h)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,nn.getPageSize=function(c,u,h){if(Nr(c)==="object"){var m=c;c=m.orientation,u=m.unit||u,h=m.format||h}u=u||"mm",h=h||"a4",c=(""+(c||"P")).toLowerCase();var _,p=(""+h).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+u}var C,y=0,N=0;if(g.hasOwnProperty(p))y=g[p][1]/_,N=g[p][0]/_;else try{y=h[1],N=h[0]}catch{throw new Error("Invalid format: "+h)}if(c==="p"||c==="portrait")c="p",N>y&&(C=N,N=y,y=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",y>N&&(C=N,N=y,y=C)}return{width:N,height:y,unit:u,k:_,orientation:c}},t.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(vC):null;var h=new o(u);return u.worker?h:h.from(c).doCallback()}})(nn.API),nn.API.addJS=function(t){var e,n,r=(function(i){for(var a="",o=0;o<i.length;o++){var c=i[o];if(c==="("||c===")"){for(var u=0,h=o-1;h>=0&&i[h]==="\\";h--)u++;a+=u%2==0?"\\"+c:c}else a+=c}return a})(t);return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],c=r.exec(o);if(c!=null){var u=c[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,m=[];for(a=0;a<h;a++){var _=n.internal.newObject();m.push(_);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<m.length;a++)n.internal.write("(page_"+(a+1)+")"+m[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var c=this.count=this.count_r({count:0},o);if(c>0&&this.line("/Count "+c),o.options&&o.options.pageNumber){var u=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])})(nn.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,a,o,c){var u,h=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,u=(function(_){for(var p,g=256*_.charCodeAt(4)+_.charCodeAt(5),C=_.length,y={width:0,height:0,numcomponents:1},N=4;N<C;N+=2){if(N+=g,e.indexOf(_.charCodeAt(N+1))!==-1){p=256*_.charCodeAt(N+5)+_.charCodeAt(N+6),y={width:256*_.charCodeAt(N+7)+_.charCodeAt(N+8),height:p,numcomponents:_.charCodeAt(N+9)};break}g=256*_.charCodeAt(N+2)+_.charCodeAt(N+3)}return y})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),u.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:n,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:h,index:r,alias:i}}return m}})(nn.API),nn.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=uH(t,{checkCrc:!0}),o=a.width,c=a.height,u=a.channels,h=a.palette,m=a.depth;i=h&&u===1?(function(U){for(var I=U.width,E=U.height,A=U.data,Y=U.palette,se=U.depth,X=!1,z=[],$=[],F=void 0,L=!1,re=0,fe=0;fe<Y.length;fe++){var T=DR(Y[fe],4),j=T[0],K=T[1],J=T[2],q=T[3];z.push(j,K,J),q!=null&&(q===0?(re++,$.length<1&&$.push(fe)):q<255&&(L=!0))}if(L||re>1){X=!0,$=void 0;var V=I*E;F=new Uint8Array(V);for(var ce=new DataView(A.buffer),me=0;me<V;me++){var Ce=DC(ce,me,se),ge=DR(Y[Ce],4)[3];F[me]=ge}}else re===0&&($=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:A,alphaBytes:F,needSMask:X,palette:z,mask:$}})(a):u===2||u===4?(function(U){for(var I=U.data,E=U.width,A=U.height,Y=U.channels,se=U.depth,X=Y===2?"DeviceGray":"DeviceRGB",z=Y-1,$=E*A,F=z,L=$*F,re=1*$,fe=Math.ceil(L*se/8),T=Math.ceil(re*se/8),j=new Uint8Array(fe),K=new Uint8Array(T),J=new DataView(I.buffer),q=new DataView(j.buffer),V=new DataView(K.buffer),ce=!1,me=0;me<$;me++){for(var Ce=me*Y,ge=0;ge<F;ge++)MT(q,DC(J,Ce+ge,se),me*F+ge,se);var Ge=DC(J,Ce+F,se);Ge<(1<<se)-1&&(ce=!0),MT(V,Ge,1*me,se)}return{colorSpace:X,colorsPerPixel:z,sMaskBitsPerComponent:ce?se:void 0,colorBytes:j,alphaBytes:K,needSMask:ce}})(a):(function(U){var I=U.data,E=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:E,colorsPerPixel:E==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(A){for(var Y=A.length,se=new Uint8Array(2*Y),X=new DataView(se.buffer,se.byteOffset,se.byteLength),z=0;z<Y;z++)X.setUint16(2*z,A[z],!1);return se})(I):I,needSMask:!1}})(a);var _,p,g,C=i,y=C.colorSpace,N=C.colorsPerPixel,v=C.sMaskBitsPerComponent,P=C.colorBytes,w=C.alphaBytes,M=C.needSMask,k=C.palette,B=C.mask,G=null;return r!==nn.API.image_compression.NONE&&typeof O2=="function"?(G=(function(U){var I;switch(U){case nn.API.image_compression.FAST:I=11;break;case nn.API.image_compression.MEDIUM:I=13;break;case nn.API.image_compression.SLOW:I=14;break;default:I=12}return I})(r),_=this.decode.FLATE_DECODE,p="/Predictor ".concat(G," /Colors ").concat(N," /BitsPerComponent ").concat(m," /Columns ").concat(o),t=vT(P,Math.ceil(o*N*m/8),N,m,r),M&&(g=vT(w,Math.ceil(o*v/8),1,v,r))):(_=void 0,p=void 0,t=P,M&&(g=w)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:n,data:t,index:e,filter:_,decodeParameters:p,transparency:B,palette:k,sMask:g,predictor:G,width:o,height:c,bitsPerComponent:m,sMaskBitsPerComponent:v,colorSpace:y}}},(function(t){t.processGIF89A=function(e,n,r,i){var a=new OH(e),o=a.width,c=a.height,u=[];a.decodeAndBlitFrameRGBA(0,u);var h={data:u,width:o,height:c},m=new RC(100).encode(h,100);return t.processJPEG.call(this,m,n,r,i)},t.processGIF87A=t.processGIF89A})(nn.API),Vo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vo.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[t]()}catch(n){Lr.log("bit decode error:"+n)}},Vo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,c=0;c<8&&8*i+c<this.width;c++){var u=this.palette[a>>7-c&1];this.data[o+4*c]=u.blue,this.data[o+4*c+1]=u.green,this.data[o+4*c+2]=u.red,this.data[o+4*c+3]=255}n!==0&&(this.pos+=4-n)}},Vo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,c=a>>4,u=15&a,h=this.palette[c];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*i+1>=this.width)break;h=this.palette[u],this.data[o+4]=h.blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Vo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Vo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&e)/e*255|0,u=(a>>10&e)/e*255|0,h=a>>15?255:0,m=r*this.width*4+4*i;this.data[m]=u,this.data[m+1]=c,this.data[m+2]=o,this.data[m+3]=h}this.pos+=t}},Vo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,u=(o>>5&n)/n*255|0,h=(o>>11)/e*255|0,m=i*this.width*4+4*a;this.data[m]=h,this.data[m+1]=u,this.data[m+2]=c,this.data[m+3]=255}this.pos+=t}},Vo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Vo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=a,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=o}},Vo.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var a=new Vo(e,!1),o=a.width,c=a.height,u={data:a.getData(),width:o,height:c},h=new RC(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)}})(nn.API),jT.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var a=new jT(e),o=a.width,c=a.height,u={data:a.getData(),width:o,height:c},h=new RC(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)}})(nn.API),nn.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),c=0,u=0,h=0;h<i;h+=4){var m=r[h],_=r[h+1],p=r[h+2],g=r[h+3];a[c++]=m,a[c++]=_,a[c++]=p,o[u++]=g}var C=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},nn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mf=nn.API,op=mf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:i.metadata.Unicode.widths,u=c.fof?c.fof:1,h=e.kerning?e.kerning:i.metadata.Unicode.kerning,m=h.fof?h.fof:1,_=e.doKerning!==!1,p=0,g=t.length,C=0,y=c[0]||u,N=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(p=_&&Nr(h[r])==="object"&&!isNaN(parseInt(h[r][C],10))?h[r][C]/m:0,N.push((c[r]||y)/u+p)),C=r;return N},CT=mf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return mf.processArabic&&(t=mf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:op.apply(this,arguments).reduce(function(a,o){return a+o},0)},NT=function(t,e,n,r){for(var i=[],a=0,o=t.length,c=0;a!==o&&c+e[a]<n;)c+=e[a],a++;i.push(t.slice(0,a));var u=a;for(c=0;a!==o;)c+e[a]>r&&(i.push(t.slice(u,a)),c=0,u=a),c+=e[a],a++;return u!==a&&i.push(t.slice(u,a)),i},ST=function(t,e,n){n||(n={});var r,i,a,o,c,u,h,m=[],_=[m],p=n.textIndent||0,g=0,C=0,y=t.split(" "),N=op.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var v=Array(u).join(" "),P=[];y.map(function(M){(M=M.split(/\s*\n/)).length>1?P=P.concat(M.map(function(k,B){return(B&&k.length?`
`:"")+k})):P.push(M[0])}),y=P,u=CT.apply(this,[v,n])}for(a=0,o=y.length;a<o;a++){var w=0;if(r=y[a],u&&r[0]==`
`&&(r=r.substr(1),w=1),p+g+(C=(i=op.apply(this,[r,n])).reduce(function(M,k){return M+k},0))>e||w){if(C>e){for(c=NT.apply(this,[r,i,e-(p+g),e]),m.push(c.shift()),m=[c.pop()];c.length;)_.push([c.shift()]);C=i.slice(r.length-(m[0]?m[0].length:0)).reduce(function(M,k){return M+k},0)}else m=[r];_.push(m),p=C+u,g=N}else m.push(r),p+=g+C,g=N}return h=u?function(M,k){return(k?v:"")+M.join(" ")}:function(M){return M.join(" ")},_.map(h)},mf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var _=this.internal.getFont(m.fontName,m.fontStyle),p="Unicode";return _.metadata[p]?{widths:_.metadata[p].widths||{0:1},kerning:_.metadata[p].kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var c,u,h=[];for(c=0,u=r.length;c<u;c++)h=h.concat(ST.apply(this,[r[c],o,a]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[n[a]]=e[a],i[e[a]]=n[a];var o=function(p){return"0x"+parseInt(p,10).toString(16)},c=t.__fontmetrics__.compress=function(p){var g,C,y,N,v=["{"];for(var P in p){if(g=p[P],isNaN(parseInt(P,10))?C="'"+P+"'":(P=parseInt(P,10),C=(C=o(P).slice(2)).slice(0,-1)+i[C.slice(-1)]),typeof g=="number")g<0?(y=o(g).slice(3),N="-"):(y=o(g).slice(2),N=""),y=N+y.slice(0,-1)+i[y.slice(-1)];else{if(Nr(g)!=="object")throw new Error("Don't know what to do with value type "+Nr(g)+".");y=c(g)}v.push(C+y)}return v.push("}"),v.join("")},u=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,C,y,N,v={},P=1,w=v,M=[],k="",B="",G=p.length-1,U=1;U<G;U+=1)(N=p[U])=="'"?g?(y=g.join(""),g=void 0):g=[]:g?g.push(N):N=="{"?(M.push([w,y]),w={},y=void 0):N=="}"?((C=M.pop())[0][C[1]]=w,y=void 0,w=C[0]):N=="-"?P=-1:y===void 0?r.hasOwnProperty(N)?(k+=r[N],y=parseInt(k,16)*P,P=1,k=""):k+=N:r.hasOwnProperty(N)?(B+=r[N],w[y]=parseInt(B,16)*P,P=1,y=void 0,B=""):B+=N;return v},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},_={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var g=p.font,C=_.Unicode[g.postScriptName];C&&(g.metadata.Unicode={},g.metadata.Unicode.widths=C.widths,g.metadata.Unicode.kerning=C.kerning);var y=m.Unicode[g.postScriptName];y&&(g.metadata.Unicode.encoding=y,g.encoding=y.codePages[0])}])})(nn.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Tp(c)),o.metadata=t.API.TTFFont.open(c),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])})(nn),nn.API.addSvgAsImage=function(t,e,n,r,i,a,o,c){if(isNaN(e)||isNaN(n))throw Lr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Lr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=i;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return(Cn.canvg?Promise.resolve(Cn.canvg):bb(()=>import("./index.es-Df2AJ5GO.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(h,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(m)}).then(function(){_.addImage(u.toDataURL("image/jpeg",1),e,n,r,i,o,c)})},nn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},nn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(o),u=[],h=0,m=0,_=0;function p(C,y){var N,v=!1;for(N=0;N<C.length;N+=1)C[N]===y&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=c.length;for(_=0;_<g;_+=1)n[c[_]].value=n[c[_]].defaultValue,n[c[_]].explicitSet=!1}if(Nr(t)==="object"){for(i in t)if(a=t[i],p(c,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&p(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(h=0;h<a.length;h+=1)if(r=!0,a[h].length===1&&typeof a[h][0]=="number")u.push(String(a[h]-1));else if(a[h].length>1){for(m=0;m<a[h].length;m+=1)typeof a[h][m]!="number"&&(r=!1);r===!0&&u.push([a[h][0]-1,a[h][1]-1].join(" "))}n[i].value="["+u.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,y=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?y.push("/"+C+" /"+n[C].value):y.push("/"+C+" "+n[C].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},nn.API.addMetadata=function(t,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",LH),this.internal.events.subscribe("postPutResources",wH)),this},(function(t){var e=t.API,n=e.pdfEscape16=function(a,o){for(var c,u=o.metadata.Unicode.widths,h=["","0","00","000","0000"],m=[""],_=0,p=a.length;_<p;++_){if(c=o.metadata.characterToGlyph(a.charCodeAt(_)),o.metadata.glyIdsUsed.push(c),o.metadata.toUnicode[c]=a.charCodeAt(_),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(o.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(h[4-c.length],c)}return m.join("")},r=function(a){var o,c,u,h,m,_,p;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],_=0,p=(c=Object.keys(a).sort(function(g,C){return g-C})).length;_<p;_++)o=c[_],u.length>=100&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(h=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+h+">"));return u.length&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var c=o.font,u=o.out,h=o.newObject,m=o.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var _=c.metadata.Unicode.widths,p=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),g="",C=0;C<p.length;C++)g+=String.fromCharCode(p[C]);var y=h();m({data:g,addLength1:!0,objectId:y}),u("endobj");var N=h();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var v=h();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+vf(c.fontName)),u("/FontFile2 "+y+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var P=h();u("<<"),u("/Type /Font"),u("/BaseFont /"+vf(c.fontName)),u("/FontDescriptor "+v+" 0 R"),u("/W "+t.API.PDFObject.convert(_)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=h(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+N+" 0 R"),u("/BaseFont /"+vf(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+P+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var c=o.font,u=o.out,h=o.newObject,m=o.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var _=c.metadata.rawData,p="",g=0;g<_.length;g++)p+=String.fromCharCode(_[g]);var C=h();m({data:p,addLength1:!0,objectId:C}),u("endobj");var y=h();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:y}),u("endobj");var N=h();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+C+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+vf(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=h();for(var v=0;v<c.metadata.hmtx.widths.length;v++)c.metadata.hmtx.widths[v]=parseInt(c.metadata.hmtx.widths[v]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+vf(c.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,c=a.text||"",u=a.x,h=a.y,m=a.options||{},_=a.mutex||{},p=_.pdfEscape,g=_.activeFontKey,C=_.fonts,y=g,N="",v=0,P="",w=C[y].encoding;if(C[y].encoding!=="Identity-H")return{text:c,x:u,y:h,options:m,mutex:_};for(P=c,y=g,Array.isArray(c)&&(P=c[0]),v=0;v<P.length;v+=1)C[y].metadata.hasOwnProperty("cmap")&&(o=C[y].metadata.cmap.unicode.codeMap[P[v].charCodeAt(0)]),o||P[v].charCodeAt(0)<256&&C[y].metadata.hasOwnProperty("Unicode")?N+=P[v]:N+="";var M="";return parseInt(y.slice(1))<14||w==="WinAnsiEncoding"?M=p(N,y).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(M=n(N,C[y])),_.isHex=!0,{text:M,x:u,y:h,options:m,mutex:_}};e.events.push(["postProcessText",function(a){var o=a.text||"",c=[],u={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var h=0;for(h=0;h<o.length;h+=1)Array.isArray(o[h])&&o[h].length===3?c.push([i(Object.assign({},u,{text:o[h][0]})).text,o[h][1],o[h][2]]):c.push(i(Object.assign({},u,{text:o[h]})).text);a.text=c}else a.text=i(Object.assign({},u,{text:o})).text}])})(nn),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(nn.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,a,o,c,u,h,m,_=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,w=0;this.__bidiEngine__={};var M=function(A){var Y=A.charCodeAt(),se=Y>>8,X=y[se];return X!==void 0?_[256*X+(255&Y)]:se===252||se===253?"AL":v.test(se)?"L":se===8?"R":"N"},k=function(A){for(var Y,se=0;se<A.length;se++){if((Y=M(A.charAt(se)))==="L")return!1;if(Y==="R")return!0}return!1},B=function(A,Y,se,X){var z,$,F,L,re=Y[X];switch(re){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&(re="AN");break;case"AL":P=!0,re="R";break;case"WS":case"BN":re="N";break;case"CS":X<1||X+1>=Y.length||(z=se[X-1])!=="EN"&&z!=="AN"||($=Y[X+1])!=="EN"&&$!=="AN"?re="N":P&&($="AN"),re=$===z?$:"N";break;case"ES":re=(z=X>0?se[X-1]:"B")==="EN"&&X+1<Y.length&&Y[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&se[X-1]==="EN"){re="EN";break}if(P){re="N";break}for(F=X+1,L=Y.length;F<L&&Y[F]==="ET";)F++;re=F<L&&Y[F]==="EN"?"EN":"N";break;case"NSM":if(o&&!c){for(L=Y.length,F=X+1;F<L&&Y[F]==="NSM";)F++;if(F<L){var fe=A[X],T=fe>=1425&&fe<=2303||fe===64286;if(z=Y[F],T&&(z==="R"||z==="AL")){re="R";break}}}re=X<1||(z=Y[X-1])==="B"?"N":se[X-1];break;case"B":P=!1,i=!0,re=w;break;case"S":a=!0,re="N"}return re},G=function(A,Y,se){var X=A.split("");return se&&U(X,se,{hiLevel:w}),X.reverse(),Y&&Y.reverse(),X.join("")},U=function(A,Y,se){var X,z,$,F,L,re=-1,fe=A.length,T=0,j=[],K=w?g:p,J=[];for(P=!1,i=!1,a=!1,z=0;z<fe;z++)J[z]=M(A[z]);for($=0;$<fe;$++){if(L=T,j[$]=B(A,J,j,$),X=240&(T=K[L][C[j[$]]]),T&=15,Y[$]=F=K[T][5],X>0)if(X===16){for(z=re;z<$;z++)Y[z]=1;re=-1}else re=-1;if(K[T][6])re===-1&&(re=$);else if(re>-1){for(z=re;z<$;z++)Y[z]=F;re=-1}J[$]==="B"&&(Y[$]=0),se.hiLevel|=F}a&&(function(q,V,ce){for(var me=0;me<ce;me++)if(q[me]==="S"){V[me]=w;for(var Ce=me-1;Ce>=0&&q[Ce]==="WS";Ce--)V[Ce]=w}})(J,Y,fe)},I=function(A,Y,se,X,z){if(!(z.hiLevel<A)){if(A===1&&w===1&&!i)return Y.reverse(),void(se&&se.reverse());for(var $,F,L,re,fe=Y.length,T=0;T<fe;){if(X[T]>=A){for(L=T+1;L<fe&&X[L]>=A;)L++;for(re=T,F=L-1;re<F;re++,F--)$=Y[re],Y[re]=Y[F],Y[F]=$,se&&($=se[re],se[re]=se[F],se[F]=$);T=L}T++}}},E=function(A,Y,se){var X=A.split(""),z={hiLevel:w};return se||(se=[]),U(X,se,z),(function($,F,L){if(L.hiLevel!==0&&m)for(var re,fe=0;fe<$.length;fe++)F[fe]===1&&(re=N.indexOf($[fe]))>=0&&($[fe]=N[re+1])})(X,se,z),I(2,X,Y,se,z),I(1,X,Y,se,z),X.join("")};return this.__bidiEngine__.doBidiReorder=function(A,Y,se){if((function(z,$){if($)for(var F=0;F<z.length;F++)$[F]=F;c===void 0&&(c=k(z)),h===void 0&&(h=k(z))})(A,Y),o||!u||h)if(o&&u&&c^h)w=c?1:0,A=G(A,Y,se);else if(!o&&u&&h)w=c?1:0,A=E(A,Y,se),A=G(A,Y);else if(!o||c||u||h){if(o&&!u&&c^h)A=G(A,Y),c?(w=0,A=E(A,Y,se)):(w=1,A=E(A,Y,se),A=G(A,Y));else if(o&&c&&!u&&h)w=1,A=E(A,Y,se),A=G(A,Y);else if(!o&&!u&&c^h){var X=m;c?(w=1,A=E(A,Y,se),w=0,m=!1,A=E(A,Y,se),m=X):(w=0,A=E(A,Y,se),A=G(A,Y),w=1,m=!1,A=E(A,Y,se),m=X,A=G(A,Y))}}else w=0,A=E(A,Y,se);else w=c?1:0,A=E(A,Y,se);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,u=A.isOutputVisual,c=A.isInputRtl,h=A.isOutputRtl,m=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var c=0;for(o=[],c=0;c<i.length;c+=1)Object.prototype.toString.call(i[c])==="[object Array]"?o.push([n.doBidiReorder(i[c][0]),i[c][1],i[c][2]]):o.push([n.doBidiReorder(i[c])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(nn),nn.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new qu(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new HH(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new PH(this.contents),this.head=new kH(this),this.name=new FH(this),this.cmap=new RO(this),this.toUnicode={},this.hhea=new UH(this),this.maxp=new KH(this),this.hmtx=new QH(this),this.post=new GH(this),this.os2=new BH(this),this.loca=new zH(this),this.glyf=new YH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,c,u,h;for(h=[],o=0,c=(u=this.bbox).length;o<c;o++)e=u[o],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,a,o,c;for(o=0,a=0,c=(e=""+e).length;0<=c?a<c:a>c;a=0<=c?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var ic,qu=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,a,o,c,u;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^c)+(255^u)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*o+256*c+u},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)n=e[r],a.push(this.writeByte(n));return a},t})(),PH=(function(){var t;function e(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,a,o,c,u,h,m,_,p,g,C,y;for(y in g=Object.keys(n).length,u=Math.log(2),_=16*Math.floor(Math.log(g)/u),o=Math.floor(_/u),m=16*g-_,(i=new qu).writeInt(this.scalarType),i.writeShort(g),i.writeShort(_),i.writeShort(o),i.writeShort(m),a=16*g,h=i.pos+a,c=null,C=[],n)for(p=n[y],i.writeString(y),i.writeInt(t(p)),i.writeInt(h),i.writeInt(p.length),C=C.concat(p),y==="head"&&(c=h),h+=p.length;h%4;)C.push(0),h++;return i.write(C),r=2981146554-t(i.data),i.pos=c+8,i.writeUInt32(r),i.data},t=function(n){var r,i,a,o;for(n=TO.call(n);n.length%4;)n.push(0);for(a=new qu(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e})(),AH={}.hasOwnProperty,Gc=function(t,e){for(var n in e)AH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ic=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var kH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new qu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),OT=(function(){function t(e,n){var r,i,a,o,c,u,h,m,_,p,g,C,y,N,v,P,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),_=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,a=(function(){var M,k;for(k=[],u=M=0;0<=p?M<p:M>p;u=0<=p?++M:--M)k.push(e.readUInt16());return k})(),e.pos+=2,y=(function(){var M,k;for(k=[],u=M=0;0<=p?M<p:M>p;u=0<=p?++M:--M)k.push(e.readUInt16());return k})(),h=(function(){var M,k;for(k=[],u=M=0;0<=p?M<p:M>p;u=0<=p?++M:--M)k.push(e.readUInt16());return k})(),m=(function(){var M,k;for(k=[],u=M=0;0<=p?M<p:M>p;u=0<=p?++M:--M)k.push(e.readUInt16());return k})(),i=(this.length-e.pos+this.offset)/2,c=(function(){var M,k;for(k=[],u=M=0;0<=i?M<i:M>i;u=0<=i?++M:--M)k.push(e.readUInt16());return k})(),u=v=0,w=a.length;v<w;u=++v)for(N=a[u],r=P=C=y[u];C<=N?P<=N:P>=N;r=C<=N?++P:--P)m[u]===0?o=r+h[u]:(o=c[m[u]/2+(r-C)-(p-u)]||0)!==0&&(o+=h[u]),this.codeMap[r]=65535&o}e.pos=_}return t.encode=function(e,n){var r,i,a,o,c,u,h,m,_,p,g,C,y,N,v,P,w,M,k,B,G,U,I,E,A,Y,se,X,z,$,F,L,re,fe,T,j,K,J,q,V,ce,me,Ce,ge,Ge,te;switch(X=new qu,o=Object.keys(e).sort(function(he,de){return he-de}),n){case"macroman":for(y=0,N=(function(){var he=[];for(C=0;C<256;++C)he.push(0);return he})(),P={0:0},a={},z=0,re=o.length;z<re;z++)P[Ce=e[i=o[z]]]==null&&(P[Ce]=++y),a[i]={old:e[i],new:P[e[i]]},N[i]=P[e[i]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(N),{charMap:a,subtable:X.data,maxGlyphID:y+1};case"unicode":for(Y=[],_=[],w=0,P={},r={},v=h=null,$=0,fe=o.length;$<fe;$++)P[k=e[i=o[$]]]==null&&(P[k]=++w),r[i]={old:k,new:P[k]},c=P[k]-i,v!=null&&c===h||(v&&_.push(v),Y.push(i),h=c),v=i;for(v&&_.push(v),_.push(65535),Y.push(65535),E=2*(I=Y.length),U=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(U/2)/Math.LN2,G=2*I-U,u=[],B=[],g=[],C=F=0,T=Y.length;F<T;C=++F){if(A=Y[C],m=_[C],A===65535){u.push(0),B.push(0);break}if(A-(se=r[A].new)>=32768)for(u.push(0),B.push(2*(g.length+I-C)),i=L=A;A<=m?L<=m:L>=m;i=A<=m?++L:--L)g.push(r[i].new);else u.push(se-A),B.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*I+2*g.length),X.writeUInt16(0),X.writeUInt16(E),X.writeUInt16(U),X.writeUInt16(p),X.writeUInt16(G),ce=0,j=_.length;ce<j;ce++)i=_[ce],X.writeUInt16(i);for(X.writeUInt16(0),me=0,K=Y.length;me<K;me++)i=Y[me],X.writeUInt16(i);for(ge=0,J=u.length;ge<J;ge++)c=u[ge],X.writeUInt16(c);for(Ge=0,q=B.length;Ge<q;Ge++)M=B[Ge],X.writeUInt16(M);for(te=0,V=g.length;te<V;te++)y=g[te],X.writeUInt16(y);return{charMap:r,subtable:X.data,maxGlyphID:w+1}}},t})(),RO=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new OT(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=OT.encode(e,n),(i=new qu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t})(),UH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),BH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),GH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(e.readUInt32());return u}).call(this)}},t})(),WH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},FH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,a,o,c,u,h,m,_,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),c=e.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(u={},a=m=0,_=r.length;m<_;a=++m)i=r[a],e.pos=i.offset,h=e.readString(i.length),o=new WH(h,i),u[p=i.nameID]==null&&(u[p]=[]),u[i.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t})(),KH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),QH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,a,o,c,u;for(e.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,m;for(m=[],n=h=0;0<=i?h<i:h>i;n=0<=i?++h:--h)m.push(e.readInt16());return m})(),this.widths=(function(){var h,m,_,p;for(p=[],h=0,m=(_=this.metrics).length;h<m;h++)a=_[h],p.push(a.advance);return p}).call(this),r=this.widths[this.widths.length-1],u=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)u.push(this.widths.push(r));return u},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),TO=[].slice,YH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,a,o,c,u,h,m,_;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(c=new qu(n.read(i))).readShort(),h=c.readShort(),_=c.readShort(),u=c.readShort(),m=c.readShort(),this.cache[e]=o===-1?new VH(c,h,_,u,m):new $H(c,o,h,_,u,m),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,a,o,c,u;for(o=[],a=[],c=0,u=n.length;c<u;c++)i=e[n[c]],a.push(o.length),i&&(o=o.concat(i.encode(r)));return a.push(o.length),{table:o,offsets:a}},t})(),$H=(function(){function t(e,n,r,i,a,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),VH=(function(){function t(e,n,r,i,a){var o,c;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;c=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&c;)o.pos+=1&c?4:2,128&c?o.pos+=8:64&c?o.pos+=4:8&c&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new qu(TO.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),zH=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Gc(t,ic),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<r.length;++o)if(r[o]=i,a<n.length&&n[a]==o){++a,r[o]=i;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(i+=u)}for(var h=new Array(4*r.length),m=0;m<r.length;++m)h[4*m+3]=255&r[m],h[4*m+2]=(65280&r[m])>>8,h[4*m+1]=(16711680&r[m])>>16,h[4*m]=(4278190080&r[m])>>24;return h},t})(),HH=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,a,o,c,u;for(i={},o=0,c=e.length;o<c;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in u=this.glyphsFor(n))r=u[a],i[a]=r;return i},t.prototype.encode=function(e,n){var r,i,a,o,c,u,h,m,_,p,g,C,y,N,v;for(i in r=RO.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},v=r.charMap)g[(u=v[i]).old]=u.new;for(C in p=r.maxGlyphID,o)C in g||(g[C]=p++);return m=(function(P){var w,M;for(w in M={},P)M[P[w]]=w;return M})(g),_=Object.keys(m).sort(function(P,w){return P-w}),y=(function(){var P,w,M;for(M=[],P=0,w=_.length;P<w;P++)c=_[P],M.push(m[c]);return M})(),a=this.font.glyf.encode(o,y,g),h=this.font.loca.encode(a.offsets,y),N={cmap:this.font.cmap.raw(),glyf:a.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},t})();nn.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,a,o;if(Array.isArray(n))return"["+(function(){var c,u,h;for(h=[],c=0,u=n.length;c<u;c++)r=n[c],h.push(e.convert(r));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)o=n[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+n},e})();async function qH(t){const e=new nn("p","mm","a4"),n=210,r=20,i=n-r*2,a=(y,N=12,v="normal",P="#000000",w=i*3)=>{const M=document.createElement("canvas"),k=M.getContext("2d"),B=3,G=`${v} ${N*B}px "Malgun Gothic", " ", sans-serif`;k.font=G;const U=k.measureText(y);return M.width=Math.min(Math.ceil(U.width)+10,w*B),M.height=Math.ceil(N*B*1.5),k.fillStyle="#ffffff",k.fillRect(0,0,M.width,M.height),k.font=G,k.fillStyle=P,k.textBaseline="middle",k.fillText(y,2,M.height/2),M.toDataURL("image/png")},o=(y,N,v)=>{const P=a(y,10,"bold","#555555"),w=a(N||"-",10,"normal","#000000"),M=6;return e.addImage(P,"PNG",r,v,35,M-1),e.addImage(w,"PNG",r+38,v,i-40,M-1),e.setDrawColor(220,220,220),e.line(r,v+M,r+i,v+M),v+M+1};let c=r;const u=a("   ",16,"bold","#1a1a1a");e.addImage(u,"PNG",r,c,i,8),c+=12,e.setDrawColor(0,0,0),e.setLineWidth(.5),e.line(r,c,r+i,c),c+=6;const h=a(" ",12,"bold","#2563eb");e.addImage(h,"PNG",r,c,40,5),c+=8,c=o("ID",t.custId,c),c=o("",t.custNm,c),c=o("ID",t.pymAcntId,c),c+=4;const m=a(" ",12,"bold","#2563eb");e.addImage(m,"PNG",r,c,40,5),c+=8,c=o("",t.pymMthNm,c),c=o("",t.changeReasonNm,c),c=o("",t.acntHolderNm,c),c=o("",t.idTypeNm,c),c=o("",t.birthDt,c),c=o("",t.bankNm,c),c=o("",XH(t.acntNo),c),c=o("",t.pyrRelNm,c),c+=4;const _=a(" ",12,"bold","#2563eb");if(e.addImage(_,"PNG",r,c,40,5),c+=8,t.signatureData){e.setDrawColor(180,180,180),e.setLineWidth(.3),e.rect(r,c,60,25);try{e.addImage(t.signatureData,"PNG",r+2,c+2,56,21)}catch(y){console.warn("Signature image insert failed:",y)}c+=28}else c=o("","( )",c);c+=6,e.setDrawColor(0,0,0),e.setLineWidth(.3),e.line(r,c,r+i,c),c+=4;const p=t.createdAt||new Date().toLocaleString("ko-KR"),g=a(`: ${p}`,8,"normal","#999999");e.addImage(g,"PNG",r,c,i,3),c+=5;const C=a("  D'Live     .",8,"normal","#999999");return e.addImage(C,"PNG",r,c,i,3),e.output("blob")}function XH(t){if(!t||t.length<6)return t;const e=t.slice(0,3),n=t.slice(-3),r="*".repeat(t.length-6);return e+r+n}function JH(t,e){const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,r.style.display="none",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(n)},100)}const ZH=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},wT={pymMthCd:"01",changeReasonL:"",acntHolderNm:"",idType:"A",idNumber:"",bankCd:"",acntNo:"",cardExpMm:"",cardExpYy:"",joinCardYn:"N",cardCl:"10",pyrRel:"A",pymDay:""},eq=({isOpen:t,onClose:e,custId:n,custNm:r,custTpCd:i,soId:a,initialPymAcntId:o,showToast:c,onSuccess:u})=>{const[h,m]=b.useState([]),[_,p]=b.useState(o||""),[g,C]=b.useState(!1),[y,N]=b.useState({...wT}),[v,P]=b.useState(!1),[w,M]=b.useState(!1),[k,B]=b.useState(""),[G,U]=b.useState(!1),[I,E]=b.useState(!1),[A,Y]=b.useState(!1),[se,X]=b.useState(""),[z,$]=b.useState({show:!1,title:"",message:"",type:"info"}),[F,L]=b.useState([{CODE:"003",CODE_NM:"IBK"},{CODE:"004",CODE_NM:"KB"},{CODE:"011",CODE_NM:"NH"},{CODE:"020",CODE_NM:""},{CODE:"081",CODE_NM:""},{CODE:"088",CODE_NM:""}]),[re,fe]=b.useState([]),[T,j]=b.useState([]),[K,J]=b.useState([]),[q,V]=b.useState([]),ce=b.useRef(null),me=b.useRef(!1),[Ce,ge]=b.useState([]);b.useEffect(()=>{t&&n&&Ge()},[t,n]),b.useEffect(()=>{if(t){const ie=(pe,ze)=>{pe().then(xt=>{if(xt.success&&xt.data&&xt.data.length>0){const st=xt.data.filter(St=>St.code&&St.name&&St.name!==""&&St.code!=="[]").map(St=>({CODE:St.code,CODE_NM:St.name.trim()}));st.length>0&&ze(st)}}).catch(()=>{})};ie(L4,L),ie(P4,fe),ie(B$,V),ie(A4,ge),ie(A$,j),ie(U$,J)}},[t]),b.useEffect(()=>{t&&(N({...wT}),P(!1),E(!1),X(""),o&&p(o))},[t,o]),b.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const Ge=async()=>{C(!0);try{const ie=await hS(n);ie.success&&ie.data&&(m(ie.data),ie.data.length>0&&!_&&p(ie.data[0].PYM_ACNT_ID))}catch(ie){console.error("Load payment accounts error:",ie)}finally{C(!1)}},te=(ie,pe="info")=>{$({show:!0,title:pe==="success"?"":pe==="error"?"":pe==="warning"?"":"",message:ie,type:pe})},he=async()=>{var ze;const ie=((ze=ce.current)==null?void 0:ze.value)||y.acntHolderNm;if(ie!==y.acntHolderNm&&N(xt=>({...xt,acntHolderNm:ie})),!ie){te("/  .","warning");return}if(!y.bankCd){te("/ .","warning");return}if(!y.acntNo){te("/ .","warning");return}if(!y.idNumber){const xt=y.idType==="A"?"":y.idType==="B"?"":"()";te(`${xt} .`,"warning");return}if(y.pymMthCd==="02"&&(!y.cardExpMm||!y.cardExpYy)){te("  .","warning");return}M(!0),B("  ...");const pe=async()=>{var st;const xt=((st=ce.current)==null?void 0:st.value)||ie;if(y.pymMthCd==="01"){const St=await N$({BANK_CD:y.bankCd,ACNT_NO:y.acntNo,ACNT_OWNER_NM:xt,RSDT_CRRNO:y.idNumber,SO_ID:a||"",CUST_TP:i||"A",ID_TYPE_CD:y.idType,CUST_ID:n,PYM_ACNT_ID:_||o||""});return{success:St.success,message:St.message||""}}else{const St=await S$({CARD_NO:y.acntNo,CARD_EXPYEAR:y.cardExpYy,CARD_EXPMON:y.cardExpMm,CARD_OWNER_NM:xt,KOR_ID:y.idNumber,SO_ID:a||"",PYM_ACNT_ID:o||"",CUST_ID:n,CUST_NM:r||""});return{success:St.success,message:St.message||""}}};try{if(B("  ..."),(await pe()).success)P(!0),B(""),te(y.pymMthCd==="01"?"  .":"  .","success");else{B(" ...  ."),await new Promise(St=>setTimeout(St,5e3));const st=await pe();st.success?(P(!0),B(""),te(y.pymMthCd==="01"?"  .":"  .","success")):(B(""),te(` .
   .

`+(st.message||""),"error"))}}catch(xt){console.error("Verify error:",xt),B(""),te(`   .
   .`,"error")}finally{M(!1),B("")}},de=()=>{if(!_){te(" .","warning");return}if(!v){te("   .","warning");return}if(!y.changeReasonL){te(" .","warning");return}Y(!0)},Q=ie=>{Y(!1),X(ie)},ee=()=>{X("")},Z=(ie,pe)=>{var ze;return((ze=ie.find(xt=>xt.CODE===pe))==null?void 0:ze.CODE_NM)||pe},le=()=>Z(T,y.changeReasonL),xe=async()=>{try{const ie=await qH({custId:n,custNm:r||"",pymAcntId:_,pymMthNm:"()",changeReasonNm:le(),acntHolderNm:y.acntHolderNm,idTypeNm:Z(q,y.idType),birthDt:y.idNumber,bankNm:Z(F,y.bankCd),acntNo:y.acntNo,pyrRelNm:Z(Ce,y.pyrRel),signatureData:se}),pe=new Date().toISOString().slice(0,10).replace(/-/g,""),ze=`__${n}_${pe}.pdf`;JH(ie,ze),c==null||c("PDF  ","success")}catch(ie){console.error("PDF generation error:",ie),te("PDF  .","error")}},be=async()=>{if(y.pymMthCd==="01"&&!se){te("  .","warning");return}U(!0);try{const ie=y.idNumber.length===6?y.idNumber+"0000000":y.idNumber,pe=await O4({CUST_ID:n,PYM_ACNT_ID:_,PYM_MTH_CD:y.pymMthCd,BANK_CD:y.bankCd,ACNT_NO:y.acntNo,ACNT_OWNER_NM:y.acntHolderNm,ID_TYPE_CD:y.idType,BIRTH_DT:ie,PAYER_REL_CD:y.pyrRel,PAY_DAY_CD:y.pymDay,CARD_VALID_YM:y.pymMthCd==="02"?y.cardExpYy+y.cardExpMm:void 0,JOIN_CARD_YN:y.pymMthCd==="02"?y.joinCardYn:void 0,CARD_CL:y.pymMthCd==="02"?y.cardCl:void 0,CHG_RESN_L_CD:y.changeReasonL,AGR_FILE_GB:y.pymMthCd==="01"?"A":void 0,PYM_AUTH_CHECK:v?"Y":"N"});if(pe.success){try{await v$({CUST_ID:n,PYM_ACNT_ID:_,SIGN_TYPE:"PYM_CHG",SIGNATURE_DATA:se})}catch(ze){console.log("[PaymentChange] Signature save stub (API not connected yet):",ze)}if(y.pymMthCd==="01"&&se)try{await xe()}catch(ze){console.warn("[PaymentChange] PDF auto-download failed:",ze)}E(!0),U(!1),c==null||c(" .","success"),u==null||u(),setTimeout(()=>{e()},1e3)}else te(pe.message||"  .","error")}catch(ie){console.error("Save payment error:",ie),te("    .","error")}finally{U(!1)}},ne=h.find(ie=>ie.PYM_ACNT_ID===_);return t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:[w&&k&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[85vw] max-w-[280px] p-6 flex flex-col items-center",children:[s.jsx(pn,{className:"w-10 h-10 text-blue-500 animate-spin mb-4"}),s.jsx("p",{className:"text-sm text-gray-700 text-center font-medium",children:k})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 max-h-[90vh] flex flex-col",onClick:ie=>ie.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-orange-500 to-orange-600 rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-white",children:[s.jsx(Pp,{className:"w-5 h-5"}),s.jsx("h3",{className:"font-semibold",children:" "})]}),s.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",disabled:G,children:s.jsx(Mi,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:g?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(pn,{className:"w-6 h-6 text-orange-500 animate-spin"})}):ne?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-3 rounded-lg bg-orange-50 border border-orange-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-mono text-sm text-blue-600",children:ZH(ne.PYM_ACNT_ID)}),s.jsx("span",{className:"text-xs text-gray-500",children:ne.PYM_MTHD_NM||"-"})]}),s.jsxs("div",{className:"text-sm text-gray-700",children:[ne.BANK_CARD_NM||"-"," ",ne.BANK_CARD_NO||""]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("select",{value:y.pymMthCd,onChange:ie=>{N(pe=>({...pe,pymMthCd:ie.target.value,bankCd:"",acntNo:""})),P(!1)},className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"01",children:"()"}),s.jsx("option",{value:"02",children:""})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("select",{value:y.changeReasonL,onChange:ie=>N(pe=>({...pe,changeReasonL:ie.target.value})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"",children:""}),T.map(ie=>s.jsx("option",{value:ie.CODE,children:ie.CODE_NM},ie.CODE))]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:y.pymMthCd==="01"?"":""}),s.jsx("input",{type:"text",value:y.acntHolderNm,ref:ce,onChange:ie=>{N(pe=>({...pe,acntHolderNm:ie.target.value})),P(!1)},onCompositionStart:()=>{me.current=!0},onCompositionEnd:ie=>{me.current=!1,N(pe=>({...pe,acntHolderNm:ie.target.value}))},placeholder:" ",className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsx("select",{value:y.idType,onChange:ie=>{N(pe=>({...pe,idType:ie.target.value,idNumber:""})),P(!1)},className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:q.map(ie=>s.jsx("option",{value:ie.CODE,children:ie.CODE_NM},ie.CODE))})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:y.idType==="A"?"":y.idType==="B"?"":"()"}),s.jsx("input",{type:"text",value:y.idNumber,onChange:ie=>{N(pe=>({...pe,idNumber:ie.target.value.replace(/[^0-9]/g,"").slice(0,y.idType==="B"?10:6)})),P(!1)},placeholder:y.idType==="A"?" 6 (YYMMDD)":y.idType==="B"?" 10 (- )":" 6 (YYMMDD)",maxLength:y.idType==="B"?10:6,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:y.pymMthCd==="01"?"":""}),s.jsxs("select",{value:y.bankCd,onChange:ie=>{N(pe=>({...pe,bankCd:ie.target.value})),P(!1)},className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"",children:""}),(y.pymMthCd==="01"?F:re).map(ie=>s.jsx("option",{value:ie.CODE,children:ie.CODE_NM},ie.CODE))]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:y.pymMthCd==="01"?"":""}),s.jsxs("div",{className:"flex-1 flex gap-2",children:[s.jsx("input",{type:"text",value:y.acntNo,onChange:ie=>{N(pe=>({...pe,acntNo:ie.target.value.replace(/[^0-9]/g,"")})),P(!1)},placeholder:y.pymMthCd==="01"?" (- )":" (- )",className:"flex-1 min-w-0 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500"}),s.jsx("button",{onClick:he,disabled:w||v,className:`flex-shrink-0 px-3 py-1.5 text-sm rounded font-medium transition-colors whitespace-nowrap flex items-center gap-1 ${v?"bg-green-100 text-green-700 border border-green-300":w?"bg-blue-400 text-white cursor-wait":"bg-blue-500 text-white hover:bg-blue-600"}`,children:w?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-3.5 h-3.5 animate-spin"})," "]}):v?s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"w-3.5 h-3.5"}),""]}):""})]})]}),y.pymMthCd==="02"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"text",value:y.cardExpMm,onChange:ie=>{N(pe=>({...pe,cardExpMm:ie.target.value.replace(/[^0-9]/g,"").slice(0,2)})),P(!1)},placeholder:"MM",maxLength:2,className:"w-14 px-2 py-1.5 text-sm border border-gray-300 rounded text-center focus:ring-1 focus:ring-orange-500"}),s.jsx("span",{className:"text-gray-400",children:"/"}),s.jsx("input",{type:"text",value:y.cardExpYy,onChange:ie=>{N(pe=>({...pe,cardExpYy:ie.target.value.replace(/[^0-9]/g,"").slice(0,2)})),P(!1)},placeholder:"YY",maxLength:2,className:"w-14 px-2 py-1.5 text-sm border border-gray-300 rounded text-center focus:ring-1 focus:ring-orange-500"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsxs("select",{value:y.joinCardYn,onChange:ie=>N(pe=>({...pe,joinCardYn:ie.target.value})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"N",children:""}),s.jsx("option",{value:"Y",children:""})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsx("select",{value:y.cardCl,onChange:ie=>N(pe=>({...pe,cardCl:ie.target.value})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:K.length>0?K.map(ie=>s.jsx("option",{value:ie.CODE,children:ie.CODE_NM},ie.CODE)):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"10",children:""}),s.jsx("option",{value:"20",children:""})]})})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"w-20 flex-shrink-0 text-xs text-gray-500",children:""}),s.jsx("select",{value:y.pyrRel,onChange:ie=>N(pe=>({...pe,pyrRel:ie.target.value})),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500",children:Ce.map(ie=>s.jsx("option",{value:ie.CODE,children:ie.CODE_NM},ie.CODE))})]})]}),y.pymMthCd==="01"&&s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-700",children:" "}),s.jsx("div",{className:"flex items-center gap-2",children:se&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:xe,className:"text-xs text-blue-500 hover:text-blue-600 flex items-center gap-0.5",children:[s.jsx(vL,{className:"w-3 h-3"}),"PDF"]}),s.jsx("button",{onClick:ee,className:"text-xs text-red-500 hover:text-red-600",children:" "})]})})]}),se?s.jsxs("div",{className:"border border-green-300 rounded-lg bg-green-50 p-2 flex flex-col items-center",children:[s.jsx("img",{src:se,alt:"",className:"max-h-24 rounded border border-gray-200 bg-white"}),s.jsxs("div",{className:"flex items-center gap-1 mt-1.5",children:[s.jsx(ho,{className:"w-3.5 h-3.5 text-green-600"}),s.jsx("span",{className:"text-xs text-green-600 font-medium",children:" "})]})]}):s.jsxs("button",{onClick:de,disabled:!v,className:`w-full py-4 border-2 border-dashed rounded-lg flex flex-col items-center gap-1.5 transition-colors ${v?"border-blue-300 bg-blue-50 hover:bg-blue-100 text-blue-600 cursor-pointer":"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[s.jsx(CM,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:v?"  ":"    "})]})]}),s.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-orange-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-orange-700",children:[s.jsx("p",{children:"     ."}),s.jsx("p",{className:"text-xs mt-1",children:"      ."})]})]})})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Pp,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),s.jsx("p",{children:"  ."})]})}),ne&&s.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:be,disabled:G||I||!v||y.pymMthCd==="01"&&!se,className:`flex-1 py-2.5 rounded-lg transition-colors text-sm font-medium flex items-center justify-center gap-2 ${I?"bg-green-100 text-green-700 border border-green-300":v&&(y.pymMthCd==="02"||se)?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:I?s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"w-4 h-4"}),""]}):G?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"})," ..."]}):""}),s.jsx("button",{onClick:e,disabled:G,className:"flex-1 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:""})]})})]}),A&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsx(k4,{title:"  ",onSave:Q,onCancel:()=>Y(!1)})})}),z.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${z.type==="success"?"bg-green-100":z.type==="error"?"bg-red-100":z.type==="warning"?"bg-orange-100":"bg-blue-100"}`,children:z.type==="success"?s.jsx(ho,{className:"w-5 h-5 text-green-500"}):s.jsx($r,{className:`w-5 h-5 ${z.type==="error"?"text-red-500":z.type==="warning"?"text-orange-500":"text-blue-500"}`})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:z.title})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-5 whitespace-pre-line",children:z.message}),s.jsx("button",{onClick:()=>$({show:!1,title:"",message:"",type:"info"}),className:`w-full px-4 py-2 text-sm text-white rounded-lg transition-colors ${z.type==="success"?"bg-green-500 hover:bg-green-600":z.type==="error"?"bg-red-500 hover:bg-red-600":z.type==="warning"?"bg-orange-500 hover:bg-orange-600":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})})]}):null},cp=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},tq=t=>!t||t.length<6?t||"-":`${t.slice(0,4)}-${t.slice(4,6)}`,sq=({custId:t,custNm:e,custTpCd:n,expanded:r,onToggle:i,showToast:a,onNavigateToPaymentChange:o,paymentChangeInProgress:c,onCancelPaymentChange:u,currentWorkingPymAcntId:h,selectedPymAcntIdFromContract:m,contracts:_=[]})=>{const[p,g]=b.useState([]),[C,y]=b.useState([]),[N,v]=b.useState(!1),[P,w]=b.useState(!1),[M,k]=b.useState(null),[B,G]=b.useState(!0),[U,I]=b.useState(!1),[E,A]=b.useState([]),[Y,se]=b.useState(!1),[X,z]=b.useState(!1),[$,F]=b.useState(""),[L,re]=b.useState(!1),[fe,T]=b.useState(null),[j,K]=b.useState(!1),[J,q]=b.useState(!1);b.useEffect(()=>{r&&t&&V()},[r,t]),b.useEffect(()=>{m&&m!==M&&k(m)},[m]),b.useEffect(()=>{if(M&&t){ce(M);const he=Ic(M);T(he.length>0?he:null)}},[M,t]);const V=async()=>{v(!0);try{const he=await hS(t,1e4);if(he.errorCode==="TIMEOUT"){K(!0),a==null||a("   .","warning");return}K(!1),he.success&&he.data&&(g(he.data),he.data.length>0&&(m&&he.data.some(de=>de.PYM_ACNT_ID===m)?k(m):k(he.data[0].PYM_ACNT_ID)))}catch(he){console.error("Load payment accounts error:",he)}finally{v(!1)}},ce=async he=>{w(!0);try{const de=await yR(t,he,1e4);if(de.errorCode==="TIMEOUT"){K(!0),a==null||a("   .","warning");return}K(!1),de.success&&de.data?y(de.data):y([])}catch(de){console.error("Load billing details error:",de),y([])}finally{w(!1)}},me=he=>{k(he)},Ce=()=>{u&&u(),o&&$&&o($),z(!1),F("")},ge=async()=>{q(!0),K(!1),await V(),M&&await ce(M),q(!1)},Ge=p.find(he=>he.PYM_ACNT_ID===M),te=async()=>{if(!M){a==null||a(" .","warning");return}se(!0);try{const he=await yR(t,M,1e4);if(he.errorCode==="TIMEOUT"){K(!0),a==null||a("    .","warning");return}if(he.success&&he.data){const de=he.data.filter(Q=>Q.UPYM_AMT>0).map(Q=>({BILL_YM:Q.BILL_YYMM,CTRT_ID:"",PROD_NM:Q.BILL_CYCL||"",BILL_AMT:Q.BILL_AMT,UNPAY_AMT:Q.UPYM_AMT,UNPAY_DAYS:0,UNPAY_STAT_NM:"",BILL_SEQ_NO:Q.BILL_SEQ_NO||"",SO_ID:Q.SO_ID||""}));de.length>0?(A(de),I(!0)):a==null||a("  .","info")}else a==null||a("   .","error")}catch(he){console.error("Load unpayment list error:",he),a==null||a("     .","error")}finally{se(!1)}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:i,className:"w-full px-3 py-2.5 flex items-center justify-between text-left",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"font-medium text-gray-800",children:" / "})}),r?s.jsx(Pr,{className:"w-4 h-4 text-gray-400"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400"})]}),r&&s.jsx("div",{className:"px-3 pb-3",children:N?s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx(pn,{className:"w-5 h-5 animate-spin text-gray-400"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),s.jsxs("span",{className:"text-xs text-gray-500",children:[p.length,""]})]}),p.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-1 mb-3",children:p.map((he,de)=>{const Q=h===he.PYM_ACNT_ID,ee=M===he.PYM_ACNT_ID;return s.jsx("div",{onClick:()=>me(he.PYM_ACNT_ID),className:`p-2 rounded-lg border cursor-pointer transition-all ${Q?"bg-orange-50 border-orange-300":ee?"bg-blue-50 border-blue-400":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium text-gray-700",children:[de+1,"."]}),s.jsx("span",{className:"text-gray-800",children:cp(he.PYM_ACNT_ID)}),s.jsx("span",{className:"text-gray-400",children:"|"}),s.jsx("span",{className:"text-gray-600",children:he.PYM_MTHD_NM||"-"}),Q&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-orange-500 text-white rounded-full animate-pulse",children:""})]}),s.jsxs("span",{className:`font-medium ${he.UPYM_AMT_ACNT>0?"text-red-600":"text-gray-600"}`,children:[bl(he.UPYM_AMT_ACNT||0),""]})]})},he.PYM_ACNT_ID)})}),Ge&&s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsx("span",{className:"text-gray-800",children:Ge.PYM_MTHD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"/"}),s.jsx("span",{className:"text-gray-800",children:Ge.BANK_CARD_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"/"}),s.jsx("span",{className:"text-gray-800",children:F$(Ge.BANK_CARD_NO||"",4,4)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsx("span",{className:"text-gray-800",children:Ge.BILL_MTHD||"-"})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-blue-200",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:`font-bold ${Ge.UPYM_AMT_ACNT>0?"text-red-600":"text-gray-800"}`,children:[bl(Ge.UPYM_AMT_ACNT||0),""]})]})]})})]}),p.some(he=>he.UPYM_AMT_ACNT>0)&&s.jsx("button",{onClick:te,disabled:j||Y||!M,className:`w-full mt-3 py-2.5 text-sm text-white rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2 ${fe?"bg-amber-500 hover:bg-amber-600 animate-pulse":"bg-red-500 hover:bg-red-600"}`,children:Y?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"})," ..."]}):fe?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-white rounded-full"}),"   (",cp(M||""),")"]}):`  (${cp(M||"")})`}),M&&s.jsx("button",{onClick:()=>re(!0),disabled:j,className:`w-full mt-2 py-2 text-sm rounded-lg transition-colors font-medium ${j?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-indigo-600 bg-indigo-50 hover:bg-indigo-100"}`,children:" "})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("button",{onClick:()=>G(!B),className:"w-full flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:""}),Ge&&s.jsx("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-0.5 rounded",children:cp(Ge.PYM_ACNT_ID)})]}),s.jsx(hr,{className:`w-4 h-4 text-gray-400 transition-transform ${B?"rotate-180":""}`})]}),B&&s.jsx(s.Fragment,{children:M?P?s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx(pn,{className:"w-4 h-4 animate-spin text-gray-400"})}):C.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:" 3      ."}):s.jsxs("div",{className:"space-y-2",children:[C.slice(0,10).map((he,de)=>s.jsxs("div",{className:`p-3 rounded-lg border ${he.UPYM_AMT>0?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-gray-200",children:[s.jsx("span",{className:"font-medium text-gray-800",children:tq(he.BILL_YYMM)}),s.jsx("span",{className:"text-xs text-gray-500",children:he.BILL_CYCL||""})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:"text-gray-800",children:[bl(he.BILL_AMT),""]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:"text-green-600",children:[bl(he.RCPT_AMT),""]})]}),he.UPYM_AMT>0&&s.jsxs("div",{className:"flex justify-between pt-1 border-t border-gray-200",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:""}),s.jsxs("span",{className:"text-red-600 font-bold",children:[bl(he.UPYM_AMT),""]})]})]})]},de)),C.length>10&&s.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["+",C.length-10,"  "]})]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:" ."})})]}),j&&s.jsxs("div",{className:"border-t border-orange-200 pt-3 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-orange-600",children:[s.jsx($r,{className:"w-4 h-4"}),s.jsx("span",{children:"  .    ."})]}),s.jsx("button",{onClick:ge,disabled:J,className:"w-full py-2.5 text-sm font-medium text-white bg-orange-500 rounded-lg hover:bg-orange-600 disabled:bg-gray-400 flex items-center justify-center gap-2",children:J?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Co,{className:"w-4 h-4"}),""]})})]})]})}),s.jsx(iV,{isOpen:U,onClose:()=>{if(I(!1),V(),M){ce(M);const he=Ic(M);T(he.length>0?he:null)}},custId:t,custNm:e,pymAcntId:M||"",unpaymentList:E,showToast:a,onSuccess:()=>{V(),M&&ce(M)},soId:(()=>{var he,de;if(M){const Q=p.find(ee=>ee.PYM_ACNT_ID===M);if(Q!=null&&Q.SO_ID)return Q.SO_ID}if(M&&_.length>0){const Q=_.filter(ee=>ee.PYM_ACNT_ID===M&&ee.SO_ID);if(Q.length>0)return(Q.find(Z=>Z.CTRT_STAT_CD==="10")||Q[0]).SO_ID}try{const Q=JSON.parse(sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo")||"{}"),ee=Q.authSoList||Q.AUTH_SO_List||[];return((he=ee[0])==null?void 0:he.SO_ID)||((de=ee[0])==null?void 0:de.soId)||Q.soId||Q.SO_ID||""}catch{return""}})()}),s.jsx(eq,{isOpen:L,onClose:()=>{re(!1),V(),M&&ce(M)},custId:t,custNm:e,custTpCd:n,soId:(()=>{var he,de;if(M){const Q=p.find(ee=>ee.PYM_ACNT_ID===M);if(Q!=null&&Q.SO_ID)return Q.SO_ID}if(M&&_.length>0){const Q=_.filter(ee=>ee.PYM_ACNT_ID===M&&ee.SO_ID);if(Q.length>0)return(Q.find(ee=>ee.CTRT_STAT_CD==="10")||Q[0]).SO_ID}try{const Q=JSON.parse(sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo")||"{}"),ee=Q.authSoList||Q.AUTH_SO_List||[];return((he=ee[0])==null?void 0:he.SO_ID)||((de=ee[0])==null?void 0:de.soId)||Q.soId||Q.SO_ID||""}catch{return""}})(),initialPymAcntId:M||"",showToast:a,onSuccess:()=>{V()}}),X&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:s.jsx($r,{className:"w-5 h-5 text-orange-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:"  "})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:["     .",s.jsx("br",{}),"     ?"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{z(!1),F("")},className:"flex-1 px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:""}),s.jsx("button",{onClick:Ce,className:"flex-1 px-4 py-2 text-sm text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition-colors",children:" "})]})]})})]})},TC=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},nq=({onBack:t,showToast:e,onContractSelect:n,onNavigateToPaymentChange:r,onNavigateToConsultationAS:i,onNavigateToAddressChange:a,onNavigateToReContract:o,selectedCustomer:c,savedContract:u,cachedContracts:h=[],cachedConsultationHistory:m=[],cachedWorkHistory:_=[],cachedDataCustId:p="",onDataLoaded:g,paymentChangeInProgress:C,onCancelPaymentChange:y,currentWorkingPymAcntId:N})=>{const[v,P]=b.useState([]),[w,M]=b.useState([]),[k,B]=b.useState([]),[G,U]=b.useState("byDate"),[I,E]=b.useState([]),[A,Y]=b.useState([]),[se,X]=b.useState(""),[z,$]=b.useState(!1),[F,L]=b.useState(!1),[re,fe]=b.useState({customerInfo:!0,contracts:!0,payment:!1,consultation:!1,work:!1}),[T,j]=b.useState(new Set),[K,J]=b.useState(new Set),q=ne=>{j(ie=>{const pe=new Set(ie);return pe.has(ne)?pe.delete(ne):pe.add(ne),pe})},V=ne=>{J(ie=>{const pe=new Set(ie);return pe.has(ne)?pe.delete(ne):pe.add(ne),pe})},[ce,me]=b.useState(null);b.useEffect(()=>{c&&c.CUST_ID!==ce?(me(c.CUST_ID),X(""),p===c.CUST_ID&&(h.length>0||m.length>0||_.length>0)?(P(h),M(m),B(_),I.length===0&&A.length===0&&Q(c.CUST_ID)):ee(c.CUST_ID)):!c&&ce&&(me(null),P([]),M([]),B([]))},[c,p]),b.useEffect(()=>{c&&u&&u.ctrtId&&u.ctrtId!==ge&&(Ge(u.ctrtId),de(c.CUST_ID,u.ctrtId))},[c,u]),b.useEffect(()=>{if(c!=null&&c.EQT_SERNO&&v.length>0){const ne=c.EQT_SERNO.toLowerCase(),ie=v.find(pe=>{var ze,xt;return((ze=pe.NOTRECEV)==null?void 0:ze.toLowerCase().includes(ne))||((xt=pe.EQT_SERNO)==null?void 0:xt.toLowerCase().includes(ne))});X(ie?ie.CTRT_ID:"")}else X("")},[c==null?void 0:c.EQT_SERNO,v]);const Ce=async ne=>{$(!0);try{const ie=await uS(ne);return ie.success&&ie.data?(P(ie.data),ie.data):(P([]),[])}catch(ie){return console.error("Load contracts error:",ie),P([]),[]}finally{$(!1)}},[ge,Ge]=b.useState(""),[te,he]=b.useState(""),de=async(ne,ie)=>{L(!0);try{const[pe,ze]=await Promise.all([g1(ne,ie,10),_1(ne,ie,10)]),xt=pe.success&&pe.data?pe.data:[],st=ze.success&&ze.data?ze.data:[];return M(xt),B(st),{consultation:xt,work:st}}catch(pe){return console.error("Load history error:",pe),{consultation:[],work:[]}}finally{L(!1)}},Q=async ne=>{L(!0);try{const[ie,pe]=await Promise.all([g1(ne,void 0,10),_1(ne,void 0,10)]),ze=ie.success&&ie.data?ie.data:[],xt=pe.success&&pe.data?pe.data:[];E(ze),Y(xt)}catch(ie){console.error("Load all history error:",ie)}finally{L(!1)}},ee=async ne=>{M([]),B([]),Ge("");const ie=await Ce(ne);U("byDate"),await Q(ne),g&&g(ne,ie,[],[])},Z=ne=>{fe(ie=>({...ie,[ne]:!ie[ne]}))},le=ne=>{n({ctrtId:ne.CTRT_ID,prodNm:ne.PROD_NM,instAddr:ne.INST_ADDR,streetAddr:ne.STREET_ADDR_FULL,instlLoc:ne.INSTL_LOC,postId:ne.POST_ID,notrecev:ne.NOTRECEV,soId:ne.SO_ID,prodGrp:ne.PROD_GRP}),Ge(ne.CTRT_ID),U("byContract"),c&&de(c.CUST_ID,ne.CTRT_ID),ne.PYM_ACNT_ID&&he(ne.PYM_ACNT_ID)},xe=G==="byContract"?ge?w:[]:I,be=G==="byContract"?ge?k:[]:A;return s.jsx("div",{className:"h-full overflow-y-auto bg-gray-50",children:s.jsx("div",{className:"p-4 space-y-4",children:c?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>Z("customerInfo"),className:"w-full px-3 py-2.5 flex items-center justify-between text-left",children:[s.jsx("span",{className:"font-medium text-gray-800",children:" "}),re.customerInfo?s.jsx(Pr,{className:"w-4 h-4 text-gray-400"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400"})]}),re.customerInfo&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"font-medium text-gray-800 text-right flex-1 break-all",children:TC(c.CUST_ID)})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"font-medium text-gray-800 text-right flex-1 break-all",children:c.CUST_NM})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1",children:T2(c.TEL_NO)||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1",children:T2(c.HP_NO)||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1",children:c.CUST_TP_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0 w-14",children:""}),s.jsx("span",{className:"text-gray-800 text-right flex-1 break-all",children:c.GRP_NM||"-"})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-100 text-sm space-y-1",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("span",{className:"text-gray-500",children:""})}),s.jsx("div",{className:"text-gray-700 break-words",children:c.ROAD_ADDR||c.INST_ADDR||c.CUST_ADDR||"-"})]}),c.UNPAY_AMT>0&&s.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded border border-red-200",children:[s.jsx("span",{className:"text-red-700 text-sm",children:""}),s.jsxs("span",{className:"text-red-600 font-bold",children:[bl(c.UNPAY_AMT),""]})]})]})]}),s.jsx(tV,{contracts:v,isLoading:z,expanded:re.contracts,onToggle:()=>Z("contracts"),onContractSelect:le,showToast:e,initialSearchKeyword:se||(c==null?void 0:c.CTRT_ID)||"",onNavigateToConsultation:ne=>{le(ne),i&&i("consultation")},onNavigateToAS:ne=>{le(ne),i&&i("as")},onNavigateToAddressChange:ne=>{le(ne),a&&a()},onNavigateToReContract:ne=>{le(ne),o&&o()}}),s.jsx(sq,{custId:c.CUST_ID,custNm:c.CUST_NM,custTpCd:c.CUST_TP_CD,expanded:re.payment,onToggle:()=>Z("payment"),showToast:e,onNavigateToPaymentChange:r,paymentChangeInProgress:C,onCancelPaymentChange:y,currentWorkingPymAcntId:N,selectedPymAcntIdFromContract:te,contracts:v}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[s.jsxs("button",{onClick:()=>Z("consultation"),className:"flex items-center gap-2 flex-1 text-left",children:[s.jsx("span",{className:"font-medium text-gray-800",children:""}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",xe.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[s.jsx("button",{onClick:ne=>{ne.stopPropagation(),U("byDate"),c&&I.length===0&&A.length===0&&Q(c.CUST_ID)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byDate"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:ne=>{ne.stopPropagation(),U("byContract"),c&&ge&&de(c.CUST_ID,ge)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byContract"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]}),s.jsx("button",{onClick:()=>Z("consultation"),children:re.consultation?s.jsx(Pr,{className:"w-4 h-4 text-gray-400"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400"})})]}),re.consultation&&s.jsx("div",{className:"px-3 pb-3",children:F?s.jsx("div",{className:"flex items-center justify-center py-3",children:s.jsx(pn,{className:"w-4 h-4 animate-spin text-gray-400"})}):G==="byContract"&&!ge?s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:"   "}):xe.length>0?s.jsx("div",{className:"space-y-3",children:xe.map((ne,ie)=>{var pe;return s.jsxs("div",{className:"bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"p-3 cursor-pointer flex items-center justify-between",onClick:()=>q(ie),children:[s.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs flex-1",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:ne.CTRT_ID?TC(ne.CTRT_ID):"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ne.START_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:ne.CNSL_SLV_CL_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(pe=ne.CNSL_RSLT)!=null&&pe.includes("")?"text-green-600":"text-yellow-600"}`,children:ne.CNSL_RSLT||""})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ne.RCPT_NM||"-"})]})]}),T.has(ie)?s.jsx(Pr,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"})]}),T.has(ie)&&s.jsxs("div",{className:"px-3 pb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:ne.REQ_CTX||"-"})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:ne.PROC_CT||"-"})]})]})]},ie)})}):s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:" "})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[s.jsxs("button",{onClick:()=>Z("work"),className:"flex items-center gap-2 flex-1 text-left",children:[s.jsx("span",{className:"font-medium text-gray-800",children:""}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",be.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[s.jsx("button",{onClick:ne=>{ne.stopPropagation(),U("byDate"),c&&I.length===0&&A.length===0&&Q(c.CUST_ID)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byDate"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:ne=>{ne.stopPropagation(),U("byContract"),c&&ge&&de(c.CUST_ID,ge)},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${G==="byContract"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]}),s.jsx("button",{onClick:()=>Z("work"),children:re.work?s.jsx(Pr,{className:"w-4 h-4 text-gray-400"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400"})})]}),re.work&&s.jsx("div",{className:"px-3 pb-3",children:F?s.jsx("div",{className:"flex items-center justify-center py-3",children:s.jsx(pn,{className:"w-4 h-4 animate-spin text-gray-400"})}):G==="byContract"&&!ge?s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:"   "}):be.length>0?s.jsx("div",{className:"space-y-3",children:be.map((ne,ie)=>{var pe,ze;return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:ne.CTRT_ID?TC(ne.CTRT_ID):"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ne.HOPE_DT||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ne.WRK_CD_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(pe=ne.WRK_STAT_CD_NM)!=null&&pe.includes("")?"text-green-600":(ze=ne.WRK_STAT_CD_NM)!=null&&ze.includes("")?"text-blue-600":"text-gray-800"}`,children:ne.WRK_STAT_CD_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-center",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:ne.PROD_NM||"-"})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ne.CMPL_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ne.WRK_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ne.WRK_CRR_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-start",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800",children:ne.CTRT_ADDR||"-"})]}),s.jsxs("div",{className:"mt-3 cursor-pointer",onClick:()=>V(ie),children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"text-xs text-gray-500",children:""}),K.has(ie)?s.jsx(Pr,{className:"w-3.5 h-3.5 text-gray-400"}):s.jsx(hr,{className:"w-3.5 h-3.5 text-gray-400"})]}),K.has(ie)&&s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:ne.MEMO||"-"})]})]},ie)})}):s.jsx("div",{className:"text-center py-3 text-gray-500 text-sm",children:" "})})]})]}):s.jsx("div",{className:"flex items-center justify-center h-48 text-gray-400 text-sm",children:"   ."})})})},rq=({onBack:t,showToast:e,selectedCustomer:n,selectedContract:r,initialSection:i="phone",initialPymAcntId:a="",onPaymentChangeStart:o,onPaymentChangeEnd:c,savedPaymentForm:u,savedPymAcntId:h="",savedIsVerified:m=!1,onPaymentFormChange:_,onAddressChanged:p})=>{var Ls;const[g,C]=b.useState({phone:!1,address:i==="address",payment:i==="payment",hpPay:i==="hpPay"}),[y,N]=b.useState({telNoType:"hp",telNo:"",telTpCd:"",disconnYn:"N"}),[v,P]=b.useState([]),[w,M]=b.useState("address"),[k,B]=b.useState({addr:"",instlLoc:""}),[G,U]=b.useState(!1),[I,E]=b.useState({zipCd:"",addr1:"",addr2:"",instlLoc:"",changeBillAddr:!1,postId:"",streetId:"",dongmyonNm:"",bldCl:"0",bldNm:"",bunNo:"",hoNm:""}),[A,Y]=b.useState(!1),[se,X]=b.useState(!1),[z,$]=b.useState(!1),[F,L]=b.useState([]),[re,fe]=b.useState(!1),[T,j]=b.useState(!1),[K,J]=b.useState([]),[q,V]=b.useState(h),[ce,me]=b.useState(!1),[Ce,ge]=b.useState(!1),Ge={pymMthCd:"01",changeReasonL:"",changeReasonM:"",acntHolderNm:"",idType:"01",birthDt:"",bankCd:"",acntNo:"",cardExpMm:"",cardExpYy:"",joinCardYn:"N",pyrRel:"01",pymDay:""},[te,he]=b.useState(u||Ge),[de,Q]=b.useState(!1),[ee,Z]=b.useState(m),[le,xe]=b.useState(!1),[be,ne]=b.useState(!1),[ie,pe]=b.useState(null),[ze,xt]=b.useState(!1),[st,St]=b.useState(""),[ot,Be]=b.useState(RE),[lt,pt]=b.useState({isOpen:!1,message:"",type:"info"}),mt=(it,Ft="info")=>{pt({isOpen:!0,message:it,type:Ft})},Ye=it=>{console.log("[ ] :",it),console.log("[ ]   :",te.acntHolderNm);const Ft={...Ge};he(Ft),Z(!1),V(it),o==null||o(),xt(!1),St(""),console.log("[ ]   ")},[at,Fe]=b.useState(!1),[tt,ct]=b.useState("post"),[Mt,dt]=b.useState(""),[Je,De]=b.useState({streetNm:"",streetBunM:"",streetBunS:""}),[$e,Ne]=b.useState([]),[ye,Ue]=b.useState([]),[ue,Oe]=b.useState(!1),[Ze,Le]=b.useState(""),[vt,je]=b.useState([]),[ut,gt]=b.useState([]),[jt,Ve]=b.useState([]),[Vt,ke]=b.useState({}),[ss,ls]=b.useState([]),[ds,vs]=b.useState([]),[Ss,Ae]=b.useState([]);b.useEffect(()=>{rt(),Wt()},[]),b.useEffect(()=>{n&&!Ce&&qt()},[n]),b.useEffect(()=>{r&&(B({addr:r.streetAddr||r.instAddr||"",instlLoc:r.instlLoc||""}),U(K.length===1))},[r,K.length]),b.useEffect(()=>{_&&_(te,q,ee)},[te,q,ee]);const ft=it=>it.filter(Ft=>Ft.code&&Ft.code!=="[]"&&Ft.name!=="").map(Ft=>({CODE:Ft.code||Ft.CODE,CODE_NM:Ft.name||Ft.CODE_NM,ref_code:Ft.ref_code||""})),rt=async()=>{Y(!0);try{const it=await P$();it.success&&it.data&&P(ft(it.data))}catch(it){console.error("Load telecom codes error:",it)}finally{Y(!1)}},Wt=async()=>{try{const[it,Ft,bs,zt]=await Promise.all([L4(),P4(),A4(),k$()]);it.success&&it.data&&je(ft(it.data)),Ft.success&&Ft.data&&gt(ft(Ft.data)),bs.success&&bs.data&&vs(ft(bs.data)),zt.success&&zt.data&&ls(ft(zt.data)),Ve([{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""}]),ke({"01":[{CODE:"0101",CODE_NM:"/ "},{CODE:"0102",CODE_NM:" "},{CODE:"0103",CODE_NM:" "}],"02":[{CODE:"0201",CODE_NM:" "},{CODE:"0202",CODE_NM:" "},{CODE:"0203",CODE_NM:" "}],"03":[{CODE:"0301",CODE_NM:" "},{CODE:"0302",CODE_NM:" "}],"04":[{CODE:"0401",CODE_NM:" "}]}),Ae([{CODE:"05",CODE_NM:"5"},{CODE:"10",CODE_NM:"10"},{CODE:"15",CODE_NM:"15"},{CODE:"20",CODE_NM:"20"},{CODE:"25",CODE_NM:"25"},{CODE:"27",CODE_NM:"27"}])}catch(it){console.error("Load payment codes error:",it)}},_t=async()=>{if(n){fe(!0);try{const it=await x$(n.custId);it.success&&it.data?L(it.data):L([]),j(!0)}catch(it){console.error("Load HP pay list error:",it),L([])}finally{fe(!1)}}},qt=async()=>{if(n){me(!0);try{const it=await hS(n.custId);if(it.success&&it.data){if(J(it.data),it.data.length>0){const Ft=a&&it.data.find(bs=>bs.PYM_ACNT_ID===a)?a:it.data[0].PYM_ACNT_ID;V(Ft)}}else J([]);ge(!0)}catch(it){console.error("Load payment info error:",it),J([])}finally{me(!1)}}};b.useEffect(()=>{i==="payment"&&n&&!Ce&&qt()},[i,n]);const Ot=async it=>{ne(!1),pe(it),xe(!0);try{const Ft={PYM_ACNT_ID:q,CUST_ID:n.custId,ACNT_NM:te.acntHolderNm,PYM_MTHD:te.pymMthCd==="01"?"02":"04",BANK_CARD:te.bankCd,ACNT_CARD_NO:te.acntNo,CHG_RESN_L:te.changeReasonL,CHG_RESN_M:te.changeReasonM,ID_TP:te.idType,BIRTH_DT:te.birthDt,PYR_REL:te.pyrRel,PYM_DAY:te.pymDay,SIGNATURE:it};te.pymMthCd==="02"&&te.cardExpYy&&te.cardExpMm&&(Ft.CDTCD_EXP_DT=te.cardExpYy+te.cardExpMm,Ft.REQR_NM=te.acntHolderNm,Ft.JOIN_CARD_YN=te.joinCardYn),te.pymMthCd==="01"&&(Ft.PYM_CUST_NM=te.acntHolderNm);const bs=await O4(Ft);bs.success?(mt(" .","success"),he({pymMthCd:"01",changeReasonL:"",changeReasonM:"",acntHolderNm:"",idType:"01",birthDt:"",bankCd:"",acntNo:"",cardExpMm:"",cardExpYy:"",joinCardYn:"N",pyrRel:"01",pymDay:""}),Z(!1),pe(null),c==null||c(),qt()):mt(bs.message||"  .","error")}catch(Ft){console.error("Save payment error:",Ft),mt("    .","error")}finally{xe(!1)}},_e=it=>{const Ft=!g[it];C(bs=>({...bs,[it]:Ft})),it==="hpPay"&&Ft&&!T&&_t(),it==="payment"&&Ft&&!Ce&&qt()},Se=async(it,Ft)=>{if(!n)return;const bs=Ft==="",zt=JSON.parse(sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo")||"{}");try{const ws={CUST_ID:n.custId,CTRT_ID:it.CTRT_ID,HP_PAY_STAT:bs?"Y":"N",SO_ID:(r==null?void 0:r.soId)||zt.soId||"",MST_SO_ID:zt.mstSoId||"200",USR_ID:zt.userId||zt.USR_ID||""},es=await p$(ws);if(es.success){mt(` ${Ft} .`,"success"),_t();return}console.warn("HP Pay direct save failed, falling back to consultation:",es.message);const Os={CUST_ID:n.custId,CTRT_ID:it.CTRT_ID,CNSL_MST_CL:"04",CNSL_MID_CL:"0401",CNSL_SLV_CL:"040101",REQ_CTX:`[ ${Ft} ]
: ${it.PROD_NM}
ID: ${it.CTRT_ID}
: ${it.HP_STAT||""}
: ${Ft}`},As=await w4(Os);As.success?(mt(` ${Ft}  .    .`,"info"),_t()):mt(As.message||`${Ft}  .`,"error")}catch(ws){console.error("HP Pay change error:",ws),mt(`${Ft}    .`,"error")}},Ie=F.filter(it=>it.CTRT_STAT_NM===""),Te=Ie.filter(it=>it.HP_STAT!==""),nt=Ie.filter(it=>it.HP_STAT===""),[Re,Ct]=b.useState(new Set),[Ke,Et]=b.useState(new Set),Rt=(it,Ft)=>{it==="apply"?Ct(Ft?new Set(Te.map(bs=>bs.CTRT_ID)):new Set):Et(Ft?new Set(nt.map(bs=>bs.CTRT_ID)):new Set)},He=(it,Ft,bs)=>{(it==="apply"?Ct:Et)(ws=>{const es=new Set(ws);return bs?es.add(Ft):es.delete(Ft),es})},ht=async()=>{if(Re.size===0){mt("  .","warning");return}const it=Te.filter(Ft=>Re.has(Ft.CTRT_ID));Be({isOpen:!0,title:"  ",message:`${it.length} ?`,type:"confirm",onConfirm:async()=>{for(const Ft of it)await Se(Ft,"");Ct(new Set)}})},Pt=async()=>{if(Ke.size===0){mt("  .","warning");return}const it=nt.filter(Ft=>Ke.has(Ft.CTRT_ID));Be({isOpen:!0,title:"  ",message:`${it.length} ?`,type:"confirm",onConfirm:async()=>{for(const Ft of it)await Se(Ft,"");Et(new Set)}})},Bt=async()=>{var Ft,bs;if(!n){mt("  .","warning");return}const it=y.telNo.replace(/[^0-9]/g,"");if(y.disconnYn!=="Y"){const zt=h$(it,y.telNoType);if(zt){mt(zt,"warning");return}}else if(!it){mt(" .","warning");return}X(!0);try{const{ddd:zt,fix:ws,dtl:es}=f$(it),Os=y.telNoType==="tel"?"1":"2",As=y.telNoType==="tel"?"":"",ms=y.telNoType==="tel"?((Ft=n.telNo)==null?void 0:Ft.replace(/[^0-9]/g,""))||"":((bs=n.hpNo)==null?void 0:bs.replace(/[^0-9]/g,""))||"",Ws={CUST_ID:n.custId,TEL_NO:ms,TEL_DDD:zt,TEL_FIX:ws,TEL_DTL:es,MB_CORP_TP:y.telTpCd,NO_SVC_YN:y.disconnYn,TEL_NO_TP:Os,USE_YN:"Y",CTRT_ID:(r==null?void 0:r.ctrtId)||"",MAIN_TEL_YN:"N",CHG_UID:""},$s=await y$(Ws);$s.success?(mt(`${As} .`,"success"),N({telNoType:"hp",telNo:"",telTpCd:"",disconnYn:"N"})):mt($s.message||"  .","error")}catch(zt){console.error("Update phone error:",zt),mt("    .","error")}finally{X(!1)}},Yt=async()=>{if(!(r!=null&&r.ctrtId)){mt("     .","warning");return}if(!I.zipCd||!I.addr1){mt("  .","warning");return}if(!I.postId){mt("    .","warning");return}$(!0);try{const it={CTRT_ID:r.ctrtId,POST_ID:I.postId,BLD_CL:I.bldCl||"0",BLD_NM:I.bldNm||"",BUN_NO:I.bunNo||"",HO_NM:I.hoNm||"",ADDR_DTL:I.addr2||"",STREET_ID:I.streetId||void 0,INSTL_LOC:k.instlLoc||void 0,CUST_FLAG:"0",PYM_FLAG:I.changeBillAddr?"1":"0"},Ft=await b$(it);if(Ft.success){mt(" .","success");const bs=`${I.addr1}${I.addr2?" "+I.addr2:""}`;B(zt=>({...zt,addr:bs})),E({zipCd:"",addr1:"",addr2:"",instlLoc:"",changeBillAddr:!1,postId:"",streetId:"",dongmyonNm:"",bldCl:"0",bldNm:"",bunNo:"",hoNm:""}),Le(""),p==null||p()}else mt(Ft.message||"  .","error")}catch(it){console.error("Update address error:",it),mt("    .","error")}finally{$(!1)}},[Xt,ts]=b.useState(!1),[Ut,Ms]=b.useState(""),Cs=async()=>{if(!(r!=null&&r.ctrtId)){mt("     .","warning");return}if(!Ut){mt("  .","warning");return}ts(!0);try{const it=await C$({CTRT_ID:r.ctrtId,INSTL_LOC:Ut,CUST_FLAG:"1"});it.success?(mt(" .","success"),B(Ft=>({...Ft,instlLoc:Ut})),Ms(""),p==null||p()):mt(it.message||"  .","error")}catch(it){console.error("Update location error:",it),mt("    .","error")}finally{ts(!1)}},Bs=()=>{Fe(!0),dt(""),De({streetNm:"",streetBunM:"",streetBunS:""}),Ne([]),Ue([])},_s=()=>{Fe(!1),Ne([]),Ue([])},Es=(it,Ft)=>{const bs=Ft.toLowerCase();return it.filter(zt=>{const ws=(zt.DONGMYON_NM||"").toLowerCase(),es=(zt.ADDR||"").toLowerCase(),Os=(zt.GUGUN_NM||"").toLowerCase(),As=(zt.BLD_NM||"").toLowerCase();return ws.includes(bs)||es.includes(bs)||Os.includes(bs)||As.includes(bs)})},js=async()=>{if(!Mt||Mt.length<2){mt("/  2  .","warning");return}Oe(!0);try{const it=(r==null?void 0:r.soId)||"",Ft=await G$({DONGMYONG:Mt,...it?{SO_ID:it}:{}});if(Ft.success&&Ft.data){let bs=Ft.data;if(bs.length>0){const zt=Es(bs,Mt);console.log(`[AddressSearch] : ${bs.length}  ${zt.length} (: ${Mt})`),bs=zt}Ne(bs),bs.length===0&&mt("   .","info")}else mt(Ft.message||"  .","error"),Ne([])}catch(it){console.error("Search post address error:",it),mt("    .","error"),Ne([])}finally{Oe(!1)}},cs=async()=>{if(!Je.streetNm||Je.streetNm.length<2){mt(" 2  .","warning");return}Oe(!0);try{const it=await W$({STREET_NM:Je.streetNm,STREET_BUN_M:Je.streetBunM||"",STREET_BUN_S:Je.streetBunS||"",SO_ID:(r==null?void 0:r.soId)||""});it.success&&it.data?(Ue(it.data),it.data.length===0&&mt("   .","info")):(mt(it.message||"  .","warning"),Ue([]))}catch(it){console.error("Search street address error:",it),mt("    .","error"),Ue([])}finally{Oe(!1)}},fs=it=>{const Ft=it.BLD_NM?it.BLD_NM.includes("")||it.BLD_NM.includes("APT")?"2":"1":"0";E(bs=>({...bs,zipCd:it.ZIP_CD,addr1:it.ADDR_FULL||it.ADDR,addr2:"",postId:it.POST_ID,streetId:"",dongmyonNm:it.DONGMYON_NM||"",bldCl:Ft,bldNm:it.BLD_NM||"",bunNo:it.STRT_BUNGIHO||"",hoNm:""})),Le(it.POST_ID),_s(),mt(" .  .","info")},Ys=it=>{const Ft=it.BLD_NM?it.BLD_NM.includes("")||it.BLD_NM.includes("APT")?"2":"1":"0";E(bs=>({...bs,zipCd:it.ZIP_CD,addr1:it.STREET_ADDR||it.ADDR_FULL,addr2:"",postId:it.POST_ID,streetId:it.STREET_ID,dongmyonNm:it.DONGMYON_NM||it.NM_SMALL||"",bldCl:Ft,bldNm:it.BLD_NM||"",bunNo:it.BUN_NO||"",hoNm:it.HO_NM||""})),Le(it.POST_ID),_s(),mt(" .  .","info")};return n?s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50",children:[s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>_e("phone"),className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($C,{className:"w-5 h-5 text-blue-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:" "})]}),g.phone?s.jsx(Pr,{className:"w-5 h-5 text-gray-400"}):s.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),g.phone&&s.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"   ()"}),n.phoneList&&n.phoneList.length>2?s.jsx("div",{className:"space-y-2",children:n.phoneList.map((it,Ft)=>s.jsxs("button",{type:"button",onClick:()=>N(bs=>({...bs,telNoType:it.type})),className:`w-full p-2 rounded border flex justify-between items-center transition-colors ${y.telNoType===it.type?"bg-blue-50 border-blue-500 ring-2 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300"}`,children:[s.jsx("div",{className:`text-xs ${y.telNoType===it.type?"text-blue-600 font-medium":"text-gray-500"}`,children:it.typeNm}),s.jsx("div",{className:`font-medium text-sm ${y.telNoType===it.type?"text-blue-700":"text-gray-800"}`,children:iC(it.number)||"-"})]},Ft))}):s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>N(it=>({...it,telNoType:"tel"})),className:`p-2 rounded border text-left transition-colors ${y.telNoType==="tel"?"bg-blue-50 border-blue-500 ring-2 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300"}`,children:[s.jsx("div",{className:`text-xs ${y.telNoType==="tel"?"text-blue-600 font-medium":"text-gray-500"}`,children:""}),s.jsx("div",{className:`font-medium text-sm ${y.telNoType==="tel"?"text-blue-700":"text-gray-800"}`,children:iC(n.telNo)||"-"})]}),s.jsxs("button",{type:"button",onClick:()=>N(it=>({...it,telNoType:"hp"})),className:`p-2 rounded border text-left transition-colors ${y.telNoType==="hp"?"bg-blue-50 border-blue-500 ring-2 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300"}`,children:[s.jsx("div",{className:`text-xs ${y.telNoType==="hp"?"text-blue-600 font-medium":"text-gray-500"}`,children:""}),s.jsx("div",{className:`font-medium text-sm ${y.telNoType==="hp"?"text-blue-700":"text-gray-800"}`,children:iC(n.hpNo)||"-"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:[" ",y.telNoType==="tel"?"":""]}),s.jsx("input",{type:"tel",value:y.telNo,onChange:it=>N(Ft=>({...Ft,telNo:it.target.value.replace(/[^0-9]/g,"")})),placeholder:y.telNoType==="tel"?"0212345678":"01012345678",maxLength:12,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsxs("select",{value:y.telTpCd,onChange:it=>N(Ft=>({...Ft,telTpCd:it.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:""}),v.map(it=>s.jsx("option",{value:it.CODE,children:it.CODE_NM},it.CODE)),v.length===0&&A&&s.jsx("option",{value:"",disabled:!0,children:"..."})]})]}),s.jsx("button",{onClick:Bt,disabled:se,className:"w-full flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 transition-colors",children:se?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[y.telNoType==="tel"?"":""," "]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>_e("address"),className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rd,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:" / "})]}),g.address?s.jsx(Pr,{className:"w-5 h-5 text-gray-400"}):s.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),g.address&&s.jsx("div",{className:"px-4 pb-4 space-y-4",children:r!=null&&r.ctrtId?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-3 bg-gray-100 border border-gray-300 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(eL,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"  "})]}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",r.prodNm]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",k.addr||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",k.instlLoc||"-"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:I.zipCd,readOnly:!0,placeholder:"  ",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-pointer",onClick:Bs}),s.jsxs("button",{onClick:Bs,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center gap-1",children:[s.jsx(Lc,{className:"w-4 h-4"}),""]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:I.addr1,onChange:it=>E(Ft=>({...Ft,addr1:it.target.value})),placeholder:" ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:I.addr2,onChange:it=>E(Ft=>({...Ft,addr2:it.target.value})),placeholder:"  ()",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsxs("label",{className:`flex items-center gap-2 ${G?"cursor-pointer":"cursor-not-allowed opacity-50"}`,children:[s.jsx("input",{type:"checkbox",checked:I.changeBillAddr,onChange:it=>E(Ft=>({...Ft,changeBillAddr:it.target.checked})),disabled:!G,className:"w-4 h-4 text-green-600 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"  "}),!G&&s.jsxs("span",{className:"text-xs text-orange-500",children:["( ",K.length," -   )"]})]}),I.changeBillAddr&&G&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[s.jsxs("p",{className:"text-blue-700",children:[s.jsx("strong",{children:" :"})," ",((Ls=K[0])==null?void 0:Ls.BILL_ADDR)||"  "]}),s.jsx("p",{className:"text-blue-600 mt-1",children:"     "})]})]}),s.jsx("button",{onClick:Yt,disabled:z,className:"w-full flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-400 transition-colors",children:z?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):" "}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:" "}),s.jsx("div",{children:s.jsx("input",{type:"text",value:Ut,onChange:it=>Ms(it.target.value),placeholder:k.instlLoc?`: ${k.instlLoc}`:": , ,  ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),s.jsx("button",{onClick:Cs,disabled:Xt,className:"w-full flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-400 transition-colors",children:Xt?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):" "})]})]}):s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($r,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"  "}),s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"     /  ."})]})]})})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("button",{onClick:()=>_e("hpPay"),className:"w-full p-4 flex items-center justify-between text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(VC,{className:"w-5 h-5 text-purple-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:"() "})]}),g.hpPay?s.jsx(Pr,{className:"w-5 h-5 text-gray-400"}):s.jsx(hr,{className:"w-5 h-5 text-gray-400"})]}),g.hpPay&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:_t,disabled:re,className:"flex items-center gap-1 px-3 py-1 text-sm text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:s.jsx(Co,{className:`w-4 h-4 ${re?"animate-spin":""}`})})}),re&&s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(pn,{className:"w-6 h-6 text-purple-500 animate-spin"}),s.jsx("span",{className:"ml-2 text-gray-500",children:" ..."})]}),!re&&T&&Ie.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(VC,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),s.jsx("p",{children:"   ."})]}),!re&&Te.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-purple-700",children:[s.jsx("input",{type:"checkbox",checked:Te.length>0&&Re.size===Te.length,onChange:it=>Rt("apply",it.target.checked),className:"w-4 h-4 text-purple-600 rounded"}),"  (",Te.length,")"]}),s.jsxs("button",{onClick:ht,disabled:Re.size===0,className:"px-3 py-1 text-xs font-medium bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:bg-gray-300 transition-colors",children:["  (",Re.size,")"]})]}),Te.map((it,Ft)=>s.jsxs("div",{className:`p-3 rounded-lg border ${Re.has(it.CTRT_ID)?"bg-purple-50 border-purple-300":"bg-gray-50 border-gray-100"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"checkbox",checked:Re.has(it.CTRT_ID),onChange:bs=>He("apply",it.CTRT_ID,bs.target.checked),className:"w-4 h-4 text-purple-600 rounded flex-shrink-0"}),s.jsx("span",{className:"font-medium text-gray-800 text-sm flex-1",children:it.PROD_NM||" "}),s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full flex-shrink-0 bg-orange-100 text-orange-700",children:""})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1 ml-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"ID:"}),s.jsx("span",{className:"text-gray-700",children:it.CTRT_ID})]}),it.ADDR&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:": "}),s.jsx("span",{className:"text-gray-700 break-all",children:it.ADDR})]})]})]},it.CTRT_ID||`apply-${Ft}`))]}),!re&&nt.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-green-700",children:[s.jsx("input",{type:"checkbox",checked:nt.length>0&&Ke.size===nt.length,onChange:it=>Rt("cancel",it.target.checked),className:"w-4 h-4 text-green-600 rounded"}),"  (",nt.length,")"]}),s.jsxs("button",{onClick:Pt,disabled:Ke.size===0,className:"px-3 py-1 text-xs font-medium bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-300 transition-colors",children:["  (",Ke.size,")"]})]}),nt.map((it,Ft)=>s.jsxs("div",{className:`p-3 rounded-lg border ${Ke.has(it.CTRT_ID)?"bg-green-50 border-green-300":"bg-gray-50 border-gray-100"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"checkbox",checked:Ke.has(it.CTRT_ID),onChange:bs=>He("cancel",it.CTRT_ID,bs.target.checked),className:"w-4 h-4 text-green-600 rounded flex-shrink-0"}),s.jsx("span",{className:"font-medium text-gray-800 text-sm flex-1",children:it.PROD_NM||" "}),s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full flex-shrink-0 bg-green-100 text-green-700",children:""})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1 ml-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"ID:"}),s.jsx("span",{className:"text-gray-700",children:it.CTRT_ID})]}),it.ADDR&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:": "}),s.jsx("span",{className:"text-gray-700 break-all",children:it.ADDR})]})]})]},it.CTRT_ID||`cancel-${Ft}`))]}),s.jsx("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-purple-600 mt-0.5"}),s.jsx("div",{className:"text-sm text-purple-700",children:s.jsx("p",{children:"/     ,    ."})})]})})]})]})]}),at&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden max-h-[85vh] flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-gray-100 bg-gradient-to-r from-green-500 to-green-600 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(Rd,{className:"w-4 h-4"})," "]}),s.jsx("button",{onClick:_s,className:"text-white/80 hover:text-white",children:s.jsx(Mi,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"p-3 border-b border-gray-200 flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{ct("post"),Ne([]),Ue([])},className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${tt==="post"?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:()=>{ct("street"),Ne([]),Ue([])},className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${tt==="street"?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]})}),s.jsxs("div",{className:"p-3 border-b border-gray-200 flex-shrink-0",children:[tt==="post"?s.jsx("div",{className:"space-y-2",children:s.jsx("input",{type:"text",value:Mt,onChange:it=>dt(it.target.value),onKeyPress:it=>it.key==="Enter"&&js(),placeholder:"//   (: )",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" *"}),s.jsx("input",{type:"text",value:Je.streetNm,onChange:it=>De(Ft=>({...Ft,streetNm:it.target.value})),onKeyPress:it=>it.key==="Enter"&&cs(),placeholder:": ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("input",{type:"text",value:Je.streetBunM,onChange:it=>De(Ft=>({...Ft,streetBunM:it.target.value.replace(/[^0-9]/g,"")})),placeholder:": 123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),s.jsx("input",{type:"text",value:Je.streetBunS,onChange:it=>De(Ft=>({...Ft,streetBunS:it.target.value.replace(/[^0-9]/g,"")})),placeholder:": 0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]})]}),s.jsx("button",{onClick:tt==="post"?js:cs,disabled:ue,className:"w-full mt-3 flex items-center justify-center gap-2 py-2.5 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-400 transition-colors",children:ue?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Lc,{className:"w-4 h-4"}),""]})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 min-h-0",children:tt==="post"?$e.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",$e.length,""]}),$e.map((it,Ft)=>s.jsxs("button",{onClick:()=>fs(it),className:"w-full p-3 bg-gray-50 hover:bg-green-50 rounded-lg border border-gray-200 hover:border-green-300 text-left transition-colors",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:it.ADDR_FULL||it.ADDR}),s.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[": ",it.ZIP_CD," | ",it.SIDO_NAME," ",it.GUGUN_NM," ",it.DONGMYON_NM]})]},it.POST_ID||Ft))]}):s.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"//   ."}):ye.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",ye.length,""]}),ye.map((it,Ft)=>s.jsxs("button",{onClick:()=>Ys(it),className:"w-full p-3 bg-gray-50 hover:bg-green-50 rounded-lg border border-gray-200 hover:border-green-300 text-left transition-colors",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:it.STREET_ADDR}),s.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[": ",it.ZIP_CD," | ",it.ADDR_FULL]}),it.BLD_NM&&s.jsxs("div",{className:"mt-0.5 text-xs text-green-600",children:[": ",it.BLD_NM]})]},it.STREET_ID||Ft))]}):s.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"  ."})}),s.jsx("div",{className:"p-3 border-t border-gray-200 flex-shrink-0",children:s.jsx("button",{onClick:_s,className:"w-full py-2.5 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:""})})]})}),be&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsx(k4,{title:"  ",onSave:Ot,onCancel:()=>ne(!1)})})}),ze&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-yellow-500 to-orange-500",children:s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx($r,{className:"w-5 h-5"}),"  "]})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("p",{className:"text-gray-700 text-sm",children:["      .",s.jsx("br",{}),"     ."]}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"?"})]}),s.jsxs("div",{className:"p-4 bg-gray-50 flex gap-2",children:[s.jsx("button",{onClick:()=>{xt(!1),St("")},className:"flex-1 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:""}),s.jsx("button",{onClick:()=>Ye(st),className:"flex-1 py-2.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:""})]})]})}),s.jsx(Ba,{isOpen:ot.isOpen,onClose:()=>Be(RE),onConfirm:ot.onConfirm,title:ot.title,message:ot.message,type:ot.type,confirmText:"",cancelText:""}),s.jsx(Ba,{isOpen:lt.isOpen,onClose:()=>pt({isOpen:!1,message:"",type:"info"}),onConfirm:()=>{},message:lt.message,type:lt.type==="success"?"confirm":lt.type==="warning"?"warning":lt.type==="error"?"error":"info",confirmText:"",showCancel:!1})]}):s.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx($r,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"  "}),s.jsxs("p",{className:"text-gray-500",children:["     ",s.jsx("br",{}),"   ."]})]})})},Em=({isOpen:t,onClose:e,onScan:n,isMultiScanMode:r=!1,scanCount:i=0})=>{const a=b.useRef(null),[o,c]=b.useState(!1),[u,h]=b.useState(null),[m,_]=b.useState(!1);b.useEffect(()=>t?((async()=>{try{screen.orientation&&screen.orientation.lock&&await screen.orientation.lock("portrait")}catch{console.log("Screen orientation lock not supported")}})(),()=>{try{screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock()}catch{}}):void 0,[t]),b.useEffect(()=>t?(h(null),c(!1),(async()=>{if(window.Html5Qrcode){await p();return}const P=document.createElement("script");P.src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js",P.async=!0,P.onload=()=>{p()},P.onerror=()=>{h("    .")},document.body.appendChild(P)})(),()=>{C()}):void 0,[t]);const p=async()=>{var v,P,w;try{if(h(null),!window.Html5Qrcode){h("Html5Qrcode not loaded");return}await g()}catch(M){console.error("Camera init error:",M),M.name==="NotAllowedError"||(v=M.message)!=null&&v.includes("Permission")?h(`   .
   .`):(P=M.message)!=null&&P.includes("secure context")||(w=M.message)!=null&&w.includes("https")?h(` HTTPS  localhost  .

 S/N .`):h(`   :
`+(M.message||M))}},g=async()=>{try{const v=window.Html5Qrcode;if(!v)return;if(a.current){try{await a.current.stop(),a.current.clear()}catch{}a.current=null}await new Promise(w=>setTimeout(w,100)),a.current=new v("barcode-reader");const P={fps:15,qrbox:{width:300,height:180},aspectRatio:1.777778,disableFlip:!1};await a.current.start({facingMode:"environment"},P,w=>{console.log("Barcode scanned:",w),navigator.vibrate&&navigator.vibrate(100),n(w),r||y()},w=>{});try{const w=document.querySelector("#barcode-reader video");if(w&&w.srcObject){const M=w.srcObject.getVideoTracks()[0];if(M){await M.applyConstraints({width:{ideal:4096},height:{ideal:2160}});try{await M.applyConstraints({advanced:[{focusMode:"continuous"}]})}catch{}}}}catch(w){console.log("Camera enhancement not supported:",w)}c(!0),h(null)}catch(v){console.error("Scanner start error:",v),h(`   .
`+(v.message||" ."))}},C=async()=>{if(a.current){try{await a.current.stop(),a.current.clear()}catch{}a.current=null}c(!1)},y=async()=>{await C(),e()},N=async()=>{_(!0),h(null),await C(),await new Promise(v=>setTimeout(v,300)),await p(),_(!1)};return t?s.jsxs("div",{className:"fixed inset-0 bg-black barcode-scanner-container z-[999999]",children:[s.jsxs("button",{onClick:y,className:"absolute top-4 right-4 z-30 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 transition-colors active:scale-95 flex items-center gap-2",style:{marginTop:"env(safe-area-inset-top, 0px)"},children:[s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("span",{className:"text-white font-medium text-sm",children:""})]}),r&&s.jsxs("div",{className:"absolute top-4 left-4 z-30 px-3 py-2 bg-blue-500 text-white text-sm font-bold rounded-full",style:{marginTop:"env(safe-area-inset-top, 0px)"},children:[i,""]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{top:"60px",bottom:"180px"},children:s.jsx("div",{id:"barcode-reader",className:"w-full max-w-md mx-4"})}),o&&s.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:s.jsxs("div",{className:"w-[300px] h-[180px] relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-green-400 rounded-tl-lg"}),s.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-green-400 rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-green-400 rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-green-400 rounded-br-lg"}),s.jsx("div",{className:"absolute left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-green-400 to-transparent animate-scan"})]})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 px-4 pt-3 z-20",style:{paddingBottom:"max(20px, env(safe-area-inset-bottom, 20px))"},children:[u?s.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-3",children:[s.jsx("p",{className:"text-red-200 text-sm text-center whitespace-pre-line",children:u}),s.jsx("button",{onClick:N,disabled:m,className:"w-full mt-3 py-2.5 bg-red-500 hover:bg-red-600 disabled:bg-red-400 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:m?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"  ..."]}):" "})]}):s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("p",{className:"text-white/80 text-sm mb-1",children:"    "}),s.jsx("p",{className:"text-white/50 text-xs",children:r?"   -    ":"S/N   "})]}),s.jsx("button",{onClick:y,className:"w-full py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg font-semibold transition-colors active:scale-[0.98] border border-gray-500",children:"  "})]}),s.jsx("style",{children:`
        @keyframes scan {
          0% { top: 10%; }
          50% { top: 85%; }
          100% { top: 10%; }
        }
        .animate-scan {
          animation: scan 2s ease-in-out infinite;
        }
        #barcode-reader {
          border: none !important;
          background: transparent !important;
          width: 100% !important;
        }
        #barcode-reader video {
          width: 100% !important;
          height: auto !important;
          object-fit: cover !important;
        }
        #barcode-reader__scan_region {
          background: transparent !important;
          min-height: 300px !important;
        }
        #barcode-reader__scan_region img {
          display: none !important;
        }
        #barcode-reader__scan_region br {
          display: none !important;
        }
        /* Hide the qrbox border */
        #barcode-reader__scan_region > div {
          border: none !important;
          box-shadow: none !important;
        }
        #qr-shaded-region {
          border: none !important;
        }
        /* Hide all library UI elements */
        #barcode-reader__dashboard,
        #barcode-reader__dashboard_section,
        #barcode-reader__dashboard_section_swaplink,
        #barcode-reader__dashboard_section_csr,
        #barcode-reader__status_span,
        #barcode-reader__header_message,
        #barcode-reader img[alt="Info icon"],
        #barcode-reader a {
          display: none !important;
        }
        #barcode-reader > div:last-child {
          display: none !important;
        }
        /*       */
        @media screen and (orientation: landscape) {
          .barcode-scanner-container {
            transform: rotate(-90deg);
            transform-origin: left top;
            width: 100vh !important;
            height: 100vw !important;
            position: fixed !important;
            top: 100% !important;
            left: 0 !important;
          }
        }
      `})]}):null},iq=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},Nh=t=>t.replace(/[^0-9]/g,""),aq=({onCustomerSelect:t,onCustomerClear:e,showToast:n,selectedCustomer:r})=>{const[i,a]=b.useState(!1),[o,c]=b.useState(""),[u,h]=b.useState(""),[m,_]=b.useState(""),[p,g]=b.useState(""),[C,y]=b.useState(""),[N,v]=b.useState(!1),[P,w]=b.useState([]),[M,k]=b.useState(!1),[B,G]=b.useState(!1),U=b.useRef({customerId:"",contractId:"",phoneNumber:"",customerName:"",equipmentNo:""}),[I,E]=b.useState({show:!1,title:"",message:""}),A=()=>{c(U.current.customerId),h(U.current.contractId),_(U.current.phoneNumber),g(U.current.customerName),y(U.current.equipmentNo),a(!0)},Y=()=>{a(!1)},se=()=>{c(""),h(""),_(""),g(""),y(""),w([])},X=async()=>{let L=Nh(o),re=Nh(u);const fe=Nh(m);L.length>0&&L.length<10&&(L=L.padStart(10,"0"),c(L)),re.length>0&&re.length<10&&(re=re.padStart(10,"0"),h(re));const T=L.length>=4,j=re.length>=4,K=fe.length>=4,J=p.length>=2,q=C.length>=4;if(p.length===1){E({show:!0,title:" ",message:" 2  ."});return}if(!T&&!j&&!K&&!J&&!q){E({show:!0,title:" ",message:`  .
(ID/ID/S/N 4,  4,  2)`});return}U.current={customerId:L,contractId:re,phoneNumber:m,customerName:p,equipmentNo:C},v(!0),k(!0);try{const V=await _$({custId:T?L:void 0,contractId:j?re:void 0,phoneNumber:K?fe:void 0,customerName:J?p:void 0,equipmentNo:q?C:void 0});if(V.success&&V.data&&V.data.length>0){let ce=V.data;if(j&&ce.length>0&&(ce=ce.map(me=>({...me,CTRT_ID:re}))),q&&ce.length>0)try{const me=ce[0].CUST_ID,Ce=await uS(me);if(Ce.success&&Ce.data){const ge=C.toLowerCase(),Ge=Ce.data.find(te=>{var he,de;return((he=te.NOTRECEV)==null?void 0:he.toLowerCase().includes(ge))||((de=te.EQT_SERNO)==null?void 0:de.toLowerCase().includes(ge))});Ge&&(ce=ce.map(te=>({...te,CTRT_ID:Ge.CTRT_ID})))}}catch(me){console.log("[CustomerSearch] S/N  CTRT_ID lookup failed:",me)}T&&(ce=ce.filter(me=>(me.CUST_ID||"").includes(L))),j&&(ce=ce.filter(me=>(me.CTRT_ID||"").includes(re))),J&&(ce=ce.filter(me=>(me.CUST_NM||"").includes(p))),K&&(ce=ce.filter(me=>[me.TEL_NO,me.HP_NO,...(me.PHONE_LIST||[]).map(ge=>ge.TEL_NO||ge.HP_NO)].filter(Boolean).map(ge=>ge.replace(/[^0-9]/g,"")).some(ge=>ge.includes(fe)||fe.includes(ge)))),q&&(ce=ce.filter(me=>(me.EQT_SERNO||"").toLowerCase().includes(C.toLowerCase())||(me.NOTRECEV||"").toLowerCase().includes(C.toLowerCase()))),ce.length>0?w(ce):(w([]),E({show:!0,title:" ",message:` .
  .`}))}else w([]),E({show:!0,title:" ",message:` .
  .`})}catch(V){console.error("Customer search error:",V),E({show:!0,title:"",message:"   ."}),w([])}finally{v(!1)}},z=L=>{L.key==="Enter"&&X()},$=L=>{y(L.toUpperCase()),G(!1)},F=L=>{const re=L.CUST_ID||"",fe=Nh(L.TEL_NO||L.HP_NO||""),T=L.CUST_NM||"",j=L.CTRT_ID||u;c(re),_(fe),g(T),L.CTRT_ID&&h(L.CTRT_ID),U.current={customerId:re,contractId:j,phoneNumber:fe,customerName:T,equipmentNo:C};const K={...L,EQT_SERNO:C||L.EQT_SERNO||void 0};t(K),Y()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm p-3",children:s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex gap-2 cursor-pointer min-w-0 overflow-hidden",onClick:A,children:[s.jsx("input",{readOnly:!0,className:"flex-1 min-w-0 px-2 py-2 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer truncate",placeholder:"",type:"text",value:(r==null?void 0:r.CUST_NM)||""}),s.jsx("input",{readOnly:!0,className:"flex-1 min-w-0 px-2 py-2 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer",placeholder:"ID",type:"text",value:r?iq(r.CUST_ID):""})]})]})})}),i&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden max-h-[80vh] flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-gray-100 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(c0,{className:"w-4 h-4"})," "]}),s.jsx("button",{onClick:se,className:"px-3 py-1 text-xs font-medium text-blue-600 bg-white rounded-lg hover:bg-gray-100 transition-colors",children:""})]})}),s.jsxs("div",{className:"p-4 space-y-3 flex-1 overflow-y-auto min-h-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:o,onChange:L=>c(Nh(L.target.value)),onKeyPress:z,placeholder:"0000000000",maxLength:10,className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:u,onChange:L=>h(Nh(L.target.value)),onKeyPress:z,placeholder:"0000000000",maxLength:10,className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex gap-2 min-w-0",children:[s.jsx("input",{type:"tel",value:m,onChange:L=>_(Nh(L.target.value)),onKeyPress:z,placeholder:"01000000000",maxLength:11,className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",value:p,onChange:L=>g(L.target.value),onKeyPress:z,placeholder:"",className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:C,onChange:L=>y(L.target.value.toUpperCase()),onKeyPress:z,placeholder:"S/N  MAC  ",className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono"}),s.jsxs("button",{onClick:()=>G(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-white flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:X,disabled:N,className:"flex-1 py-2.5 text-sm text-white bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 rounded-lg font-medium flex items-center justify-center",children:N?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin mr-2"})," ..."]}):""}),s.jsx("button",{onClick:Y,className:"flex-1 py-2.5 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:""})]})}),s.jsx("div",{className:"px-4 pb-4 flex-shrink-0",children:M?P.length>0?s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3 bg-gray-50",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",P.length,""]}),P.map((L,re)=>s.jsxs("button",{onClick:()=>F(L),className:"w-full p-3 bg-white hover:bg-blue-50 rounded-lg border border-gray-200 hover:border-blue-300 text-left transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-blue-600 font-mono text-sm",children:L.CUST_ID}),s.jsx("span",{className:"font-semibold text-gray-900",children:L.CUST_NM})]}),L.CTRT_ID&&s.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[s.jsx("span",{className:"text-gray-400",children:"ID:"})," ",s.jsx("span",{className:"font-mono",children:L.CTRT_ID})]}),s.jsxs("div",{className:"mt-1 text-xs text-gray-500 truncate",children:[T2(L.TEL_NO||L.HP_NO),L.CUST_ADDR&&` | ${L.CUST_ADDR}`]}),L.UNPAY_AMT>0&&s.jsxs("div",{className:"mt-1 text-xs text-red-500 font-medium",children:[": ",L.UNPAY_AMT.toLocaleString(),""]})]},L.CUST_ID||re))]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm border border-gray-200 rounded-lg bg-gray-50",children:"  ."}):s.jsx("div",{className:"text-center py-4 text-gray-400 text-sm border border-dashed border-gray-200 rounded-lg",children:"     ."})})]})}),s.jsx(Em,{isOpen:B,onClose:()=>G(!1),onScan:$}),I.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:s.jsx($r,{className:"w-5 h-5 text-orange-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:I.title})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-5 whitespace-pre-line",children:I.message}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:()=>E({show:!1,title:"",message:""}),className:"flex-1 px-4 py-2 text-sm text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition-colors",children:""})})]})})]})},dp=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},lq=({onBack:t,showToast:e,selectedCustomer:n,selectedContract:r,contracts:i=[],onNavigateToBasicInfo:a,initialTab:o="consultation"})=>{var ye,Ue;const[c,u]=b.useState(o);b.useEffect(()=>{(o==="consultation"||o==="as")&&u(o)},[o]);const[h,m]=b.useState([]),[_,p]=b.useState([]),[g,C]=b.useState(r?"byContract":"byDate"),[y,N]=b.useState([]),[v,P]=b.useState([]),[w,M]=b.useState([]),[k,B]=b.useState("customer"),[G,U]=b.useState("subscriber"),[I,E]=b.useState(!1),A=ue=>{ue==="contract"?r?B("contract"):E(!0):B("customer")};b.useEffect(()=>{r&&B("contract")},[r]);const[Y,se]=b.useState({cnslLClCd:"",cnslMClCd:"",cnslSClCd:"",reqCntn:"",transYn:"N",transDeptCd:""}),[X,z]=b.useState(new Set),[$,F]=b.useState(new Set),L=ue=>{z(Oe=>{const Ze=new Set(Oe);return Ze.has(ue)?Ze.delete(ue):Ze.add(ue),Ze})},re=ue=>{F(Oe=>{const Ze=new Set(Oe);return Ze.has(ue)?Ze.delete(ue):Ze.add(ue),Ze})},[fe,T]=b.useState([]),[j,K]=b.useState([]),[J,q]=b.useState([]),[V,ce]=b.useState([]),me=ue=>{if(!ue){se(je=>({...je,cnslLClCd:"",cnslMClCd:"",cnslSClCd:""}));return}const Oe=V.find(je=>je.code===ue),Ze=(Oe==null?void 0:Oe.ref_code)||"",Le=j.find(je=>je.code===Ze),vt=(Le==null?void 0:Le.ref_code)||"";se(je=>({...je,cnslLClCd:vt,cnslMClCd:Ze,cnslSClCd:ue}))},Ce=()=>{const ue=new Date().getHours()+1;return ue>=9&&ue<=21?ue.toString().padStart(2,"0"):"09"},[ge,Ge]=b.useState({asClCd:"",asClDtlCd:"",asResnLCd:"",asResnMCd:"",asCntn:"",schdDt:new Date().toISOString().split("T")[0],schdHour:Ce(),schdMin:"00"}),[te,he]=b.useState([]),[de,Q]=b.useState([]),[ee,Z]=b.useState([]),[le,xe]=b.useState([]),[be,ne]=b.useState([]),ie=r!=null&&r.prodGrp?ee.filter(ue=>!ue.ref_code||ue.ref_code.includes(r.prodGrp)):ee,pe=ue=>{Ge(Ze=>({...Ze,asResnLCd:ue,asResnMCd:""}));const Oe=le.filter(Ze=>Ze.ref_code===ue);ne(Oe)},ze=Array.from({length:13},(ue,Oe)=>{const Ze=(9+Oe).toString().padStart(2,"0");return{value:Ze,label:`${Ze}`}}),xt=Array.from({length:6},(ue,Oe)=>{const Ze=(Oe*10).toString().padStart(2,"0");return{value:Ze,label:`${Ze}`}}),[st,St]=b.useState(!1),[ot,Be]=b.useState(!1),[lt,pt]=b.useState(!1),[mt,Ye]=b.useState({show:!1,type:"success",title:"",message:""}),at=(ue,Oe,Ze)=>{Ye({show:!0,type:ue,title:Oe,message:Ze})},[Fe,tt]=b.useState(!0),ct=g==="byContract"?r!=null&&r.ctrtId?h:[]:y,Mt=g==="byContract"?r!=null&&r.ctrtId?_:[]:v;b.useEffect(()=>{dt(),n&&r?(C("byContract"),De()):n&&(C("byDate"),Je())},[n,r]),b.useEffect(()=>{n&&y.length===0&&v.length===0&&Je()},[i]),b.useEffect(()=>{r!=null&&r.ctrtId&&(r==null?void 0:r.prodGrp)==="C"?w$(r.ctrtId).then(ue=>{if(ue.success&&ue.data){const Oe=(Array.isArray(ue.data)?ue.data:[ue.data]).filter(Ze=>Ze.biz_cl||Ze.BIZ_CL||Ze.code).map(Ze=>({CODE:Ze.biz_cl||Ze.BIZ_CL||Ze.code||"",CODE_NM:Ze.SVC_NM||Ze.svc_nm||Ze.name||Ze.biz_cl||""}));Q(Oe)}}).catch(()=>Q([])):Q([])},[r]);const dt=async()=>{Be(!0);try{const[ue,Oe,Ze,Le,vt,je]=await Promise.all([R$(),T$(),M$(),I$(),j$(),O$()]),ut=gt=>gt.filter(jt=>jt.code&&jt.code!=="[]"&&jt.name!=="").map(jt=>({code:jt.code,name:jt.name,ref_code:jt.ref_code,ref_code2:jt.ref_code2,ref_code12:jt.ref_code12}));if(ue.success&&ue.data&&T(ut(ue.data)),Oe.success&&Oe.data&&K(ut(Oe.data)),Ze.success&&Ze.data){const gt=ut(Ze.data);q(gt),ce(gt.filter(jt=>jt.ref_code12==="Y"))}if(Le.success&&Le.data){const gt=["0350","0360","0370"],jt=Le.data.filter(Ve=>Ve.code&&Ve.code!=="[]"&&Ve.ref_code==="03"&&!gt.includes(Ve.code)).map(Ve=>({CODE:Ve.code,CODE_NM:Ve.name}));he(jt)}if(vt.success&&vt.data){const gt=vt.data.filter(jt=>jt.code&&jt.code!=="[]"&&jt.name!=="").map(jt=>({CODE:jt.code,CODE_NM:jt.name,ref_code:jt.ref_code2||""}));Z(gt)}if(je.success&&je.data){const gt=je.data.filter(jt=>jt.code&&jt.code!=="[]"&&jt.name!=="").map(jt=>({CODE:jt.code,CODE_NM:jt.name,ref_code:jt.ref_code}));xe(gt)}}catch(ue){console.error("Load codes error:",ue)}finally{Be(!1)}},Je=async()=>{if(!n){N([]),P([]);return}St(!0);try{const[ue,Oe]=await Promise.all([g1(n.custId,void 0,10),_1(n.custId,void 0,10)]),Ze=ue.success&&ue.data?ue.data:[],Le=Oe.success&&Oe.data?Oe.data:[];N(Ze),P(Le)}catch(ue){console.error("Load all history error:",ue)}finally{St(!1)}},De=async()=>{if(!n||!r){m([]),p([]);return}St(!0);try{const[ue,Oe]=await Promise.all([g1(n.custId,r.ctrtId,10),_1(n.custId,r.ctrtId,10)]);ue.success&&ue.data&&m(ue.data),Oe.success&&Oe.data&&p(Oe.data)}catch(ue){console.error("Load history error:",ue)}finally{St(!1)}},$e=async()=>{if(!n){at("warning","","  .");return}if(!r){at("warning","",`   .
     .`);return}if(!Y.cnslSClCd){at("warning",""," .");return}if(!Y.reqCntn.trim()){at("warning",""," .");return}pt(!0);try{const ue={CUST_ID:n.custId,CTRT_ID:(r==null?void 0:r.ctrtId)||"",CNSL_MST_CL:Y.cnslLClCd,CNSL_MID_CL:Y.cnslMClCd,CNSL_SLV_CL:Y.cnslSClCd,REQ_CTX:Y.reqCntn,POST_ID:(r==null?void 0:r.postId)||"",SAVE_TP:"2",CNSL_RSLT:"5",RCPT_TP:"G1",CUST_REL:"A",PRESS_RCPT_YN:"N",SUBS_TP:"1",CTI_CID:"0",SO_ID:"",MST_SO_ID:""},Oe=await w4(ue);Oe.success?(at("success","  ","  ."),se({cnslLClCd:"",cnslMClCd:"",cnslSClCd:"",reqCntn:"",transYn:"N",transDeptCd:""}),setCnslMCodes([]),setCnslSCodes([]),De(),Je()):at("error","  ",Oe.message||"  .")}catch(ue){console.error("Register consultation error:",ue),at("error","","    .")}finally{pt(!1)}},Ne=async()=>{var ue,Oe,Ze,Le;if(!n){at("warning","","  .");return}if(G==="subscriber"&&!r){at("warning",""," AS    .");return}if(!ge.asClCd){at("warning","","AS .");return}if(!ge.asResnLCd){at("warning","","AS() .");return}if(be.length>0&&!ge.asResnMCd){at("warning","","AS() .");return}if(!ge.asCntn.trim()){at("warning","","AS  .");return}pt(!0);try{const vt=JSON.parse(localStorage.getItem("userInfo")||"{}"),je=G==="subscriber",ut=je?null:i.find(Vt=>Vt.CTRT_STAT_CD==="82"||Vt.CTRT_STAT_CD==="80")||i[0],gt=je?i.find(Vt=>Vt.CTRT_ID===(r==null?void 0:r.ctrtId)):ut,jt={CUST_ID:n.custId,CTRT_ID:je&&(r==null?void 0:r.ctrtId)||"",POST_ID:je?(r==null?void 0:r.postId)||"":(ut==null?void 0:ut.POST_ID)||"",INST_ADDR:je&&(r==null?void 0:r.instAddr)||"",AS_CL_CD:ge.asClCd,AS_RESN_L_CD:ge.asResnLCd,AS_RESN_M_CD:ge.asResnMCd,AS_CNTN:ge.asCntn,SCHD_DT:ge.schdDt.replace(/-/g,""),SCHD_TM:ge.schdHour+ge.schdMin,WRKR_ID:vt.userId||"",PG_GUBUN:"1",SO_ID:je?(r==null?void 0:r.soId)||"":(ut==null?void 0:ut.SO_ID)||((Oe=(ue=vt.authSoList)==null?void 0:ue[0])==null?void 0:Oe.SO_ID)||((Le=(Ze=vt.authSoList)==null?void 0:Ze[0])==null?void 0:Le.soId)||vt.soId||vt.SO_ID||"",MST_SO_ID:"",BLD_CL:(gt==null?void 0:gt.BLD_CL)||"",BLD_NM:(gt==null?void 0:gt.BLD_NM)||"",BLD_ID:(gt==null?void 0:gt.BLD_ID)||"",BUN_CL:(gt==null?void 0:gt.BUN_CL)||"",BUN_NO:(gt==null?void 0:gt.BUN_NO)||"",HO_NM:(gt==null?void 0:gt.HO_NM)||"",APT_DONG_NO:(gt==null?void 0:gt.APT_DONG_NO)||"",APT_HO_CNT:(gt==null?void 0:gt.APT_HO_CNT)||"",ADDR_DTL:(gt==null?void 0:gt.ADDR_DTL)||"",ADDR:(gt==null?void 0:gt.INST_ADDR)||(gt==null?void 0:gt.ADDR_FULL)||"",ADDR_ORD:"1"},Ve=await E$(jt);Ve.success?(at("success","AS  ","AS  ."),Ge({asClCd:"",asClDtlCd:"",asResnLCd:"",asResnMCd:"",asCntn:"",schdDt:new Date().toISOString().split("T")[0],schdHour:Ce(),schdMin:"00"}),ne([]),De(),Je()):at("error","AS  ",Ve.message||"AS  .")}catch(vt){console.error("Register AS error:",vt),at("error","","AS    .")}finally{pt(!1)}};return n?s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50",children:[s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-1 flex gap-1",children:[s.jsxs("button",{onClick:()=>u("consultation"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg transition-colors text-sm ${c==="consultation"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(YC,{className:"w-4 h-4"}),""]}),s.jsxs("button",{onClick:()=>u("as"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg transition-colors text-sm ${c==="as"?"bg-orange-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx(Fu,{className:"w-4 h-4"}),"AS"]})]}),c==="consultation"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[s.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[s.jsx(YC,{className:"w-5 h-5 text-blue-500"})," "]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("span",{className:"font-medium",children:n.custNm}),s.jsxs("span",{className:"ml-1 text-blue-600 text-xs",children:["(ID: ",dp(n.custId),")"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"targetUnit",value:"customer",checked:k==="customer",onChange:()=>A("customer"),className:"w-3.5 h-3.5 text-blue-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"targetUnit",value:"contract",checked:k==="contract",onChange:()=>A("contract"),className:"w-3.5 h-3.5 text-blue-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]})]})]}),k==="contract"&&r&&s.jsxs("div",{className:"text-xs text-blue-700 pt-1 border-t border-blue-200 space-y-0.5",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{className:"font-medium",children:r.prodNm})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:"ID"}),s.jsx("span",{children:dp(r.ctrtId)})]}),r.instAddr&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.instAddr})]}),r.notrecev&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-blue-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.notrecev})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsxs("select",{value:Y.cnslSClCd,onChange:ue=>me(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:""}),V.map(ue=>s.jsx("option",{value:ue.code,children:ue.name},ue.code))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",readOnly:!0,value:((ye=fe.find(ue=>ue.code===Y.cnslLClCd))==null?void 0:ye.name)||"",placeholder:" ",className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 text-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",readOnly:!0,value:((Ue=j.find(ue=>ue.code===Y.cnslMClCd))==null?void 0:Ue.name)||"",placeholder:" ",className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-100 text-gray-600"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsx("textarea",{value:Y.reqCntn,onChange:ue=>se(Oe=>({...Oe,reqCntn:ue.target.value})),placeholder:" .",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"transYn",checked:Y.transYn==="Y",onChange:ue=>se(Oe=>({...Oe,transYn:ue.target.checked?"Y":"N"})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"transYn",className:"text-sm text-gray-600",children:"  (/ )"})]}),s.jsx("button",{onClick:$e,disabled:lt,className:"w-full flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 transition-colors",children:lt?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(q2,{className:"w-5 h-5"})," "]})})]}),c==="as"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[s.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[s.jsx(Fu,{className:"w-5 h-5 text-orange-500"}),"AS "]}),s.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm text-orange-800",children:[s.jsx("span",{className:"font-medium",children:n.custNm}),s.jsxs("span",{className:"ml-1 text-orange-600 text-xs",children:["(ID: ",dp(n.custId),")"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"asSubscriberType",value:"subscriber",checked:G==="subscriber",onChange:()=>U("subscriber"),className:"w-3.5 h-3.5 text-orange-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]}),s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"asSubscriberType",value:"nonSubscriber",checked:G==="nonSubscriber",onChange:()=>U("nonSubscriber"),className:"w-3.5 h-3.5 text-orange-600"}),s.jsx("span",{className:"text-xs text-gray-700",children:""})]})]})]}),G==="subscriber"&&r&&s.jsxs("div",{className:"text-xs text-orange-700 pt-1 border-t border-orange-200 space-y-0.5",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{className:"font-medium",children:r.prodNm})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:"ID"}),s.jsx("span",{children:dp(r.ctrtId)})]}),r.instAddr&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.instAddr})]}),r.notrecev&&s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-orange-500 w-14 flex-shrink-0",children:""}),s.jsx("span",{children:r.notrecev})]})]}),G==="nonSubscriber"&&s.jsx("div",{className:"text-xs text-orange-600 pt-1 border-t border-orange-200",children:" AS -   ."})]}),G==="subscriber"&&!r?s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($r,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"AS    "}),s.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"      AS  ."}),s.jsx("button",{onClick:a,className:"mt-2 text-sm text-yellow-700 underline hover:text-yellow-800",children:"   "})]})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"AS *"}),s.jsxs("select",{value:ge.asClCd,onChange:ue=>Ge(Oe=>({...Oe,asClCd:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[s.jsx("option",{value:"",children:""}),te.map(ue=>s.jsx("option",{value:ue.CODE,children:ue.CODE_NM},ue.CODE))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"AS() *"}),s.jsxs("select",{value:ge.asResnLCd,onChange:ue=>pe(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[s.jsx("option",{value:"",children:""}),ie.map(ue=>s.jsx("option",{value:ue.CODE,children:ue.CODE_NM},ue.CODE))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["AS() ",be.length>0?"*":""]}),s.jsxs("select",{value:ge.asResnMCd,onChange:ue=>Ge(Oe=>({...Oe,asResnMCd:ue.target.value})),disabled:!ge.asResnLCd||be.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100",children:[s.jsx("option",{value:"",children:be.length===0?"":""}),be.map(ue=>s.jsx("option",{value:ue.CODE,children:ue.CODE_NM},ue.CODE))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"AS  *"}),s.jsx("textarea",{value:ge.asCntn,onChange:ue=>Ge(Oe=>({...Oe,asCntn:ue.target.value})),placeholder:"AS  .",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:" *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",value:ge.schdDt,onChange:ue=>Ge(Oe=>({...Oe,schdDt:ue.target.value})),min:new Date().toISOString().split("T")[0],className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),s.jsx("select",{value:ge.schdHour,onChange:ue=>Ge(Oe=>({...Oe,schdHour:ue.target.value})),className:"w-20 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:ze.map(ue=>s.jsx("option",{value:ue.value,children:ue.label},ue.value))}),s.jsx("select",{value:ge.schdMin,onChange:ue=>Ge(Oe=>({...Oe,schdMin:ue.target.value})),className:"w-20 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:xt.map(ue=>s.jsx("option",{value:ue.value,children:ue.label},ue.value))})]})]}),s.jsx("button",{onClick:Ne,disabled:lt,className:"w-full flex items-center justify-center gap-2 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:bg-gray-400 transition-colors",children:lt?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Fu,{className:"w-5 h-5"}),"AS "]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("button",{onClick:()=>tt(!Fe),className:"flex items-center gap-2 flex-1 text-left",children:[s.jsx(zh,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{className:"font-medium text-gray-800",children:c==="consultation"?" ":" "}),s.jsxs("span",{className:"text-sm text-gray-500",children:["(",c==="consultation"?ct.length:Mt.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[s.jsx("button",{onClick:ue=>{ue.stopPropagation(),C("byDate"),y.length===0&&v.length===0&&Je()},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${g==="byDate"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),s.jsx("button",{onClick:ue=>{ue.stopPropagation(),C("byContract"),r!=null&&r.ctrtId&&De()},className:`px-2 py-0.5 text-xs rounded-full transition-colors ${g==="byContract"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]}),s.jsx("button",{onClick:ue=>{ue.stopPropagation(),Je()},className:"p-1 text-gray-400 hover:text-gray-600",children:s.jsx(Co,{className:`w-4 h-4 ${st?"animate-spin":""}`})}),s.jsx("button",{onClick:()=>tt(!Fe),children:Fe?s.jsx(Pr,{className:"w-5 h-5 text-gray-400"}):s.jsx(hr,{className:"w-5 h-5 text-gray-400"})})]})]}),Fe&&s.jsx("div",{className:"px-4 pb-4",children:st?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(pn,{className:"w-6 h-6 animate-spin text-gray-400"})}):g==="byContract"&&!r?s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."}):c==="consultation"?ct.length>0?s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:ct.map((ue,Oe)=>{var Ze;return s.jsxs("div",{className:"bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"p-3 cursor-pointer flex items-center justify-between",onClick:()=>L(Oe),children:[s.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs flex-1",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:ue.CTRT_ID||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ue.START_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:ue.CNSL_SLV_CL_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(Ze=ue.CNSL_RSLT)!=null&&Ze.includes("")?"text-green-600":"text-yellow-600"}`,children:ue.CNSL_RSLT||""})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ue.RCPT_NM||"-"})]})]}),X.has(Oe)?s.jsx(Pr,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"})]}),X.has(Oe)&&s.jsxs("div",{className:"px-3 pb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:ue.REQ_CTX||"-"})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:ue.PROC_CT||"-"})]})]})]},Oe)})}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."}):Mt.length>0?s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:Mt.map((ue,Oe)=>{var Ze,Le;return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm border border-gray-100",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:"ID"}),s.jsx("span",{className:"text-gray-800 font-medium text-[10px]",children:ue.CTRT_ID||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ue.HOPE_DT||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ue.WRK_CD_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:`font-medium ${(Ze=ue.WRK_STAT_CD_NM)!=null&&Ze.includes("")?"text-green-600":(Le=ue.WRK_STAT_CD_NM)!=null&&Le.includes("")?"text-blue-600":"text-gray-800"}`,children:ue.WRK_STAT_CD_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-center",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium truncate",children:ue.PROD_NM||"-"})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ue.CMPL_DATE||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ue.WRK_NM||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800 font-medium",children:ue.WRK_CRR_NM||"-"})]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-[auto_1fr] gap-2 text-xs items-start",children:[s.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:""}),s.jsx("span",{className:"text-gray-800",children:ue.CTRT_ADDR||"-"})]}),s.jsxs("div",{className:"mt-3 cursor-pointer",onClick:()=>re(Oe),children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"text-xs text-gray-500",children:""}),$.has(Oe)?s.jsx(Pr,{className:"w-3.5 h-3.5 text-gray-400"}):s.jsx(hr,{className:"w-3.5 h-3.5 text-gray-400"})]}),$.has(Oe)&&s.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded min-h-[48px] text-gray-700 text-xs",children:ue.MEMO||"-"})]})]},Oe)})}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."})})]})]}),mt.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${mt.type==="success"?"bg-green-100":mt.type==="error"?"bg-red-100":"bg-yellow-100"}`,children:mt.type==="success"?s.jsx(Ai,{className:"w-5 h-5 text-green-500"}):mt.type==="error"?s.jsx(bo,{className:"w-5 h-5 text-red-500"}):s.jsx($r,{className:"w-5 h-5 text-yellow-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:mt.title})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-5",children:mt.message}),s.jsx("button",{onClick:()=>Ye(ue=>({...ue,show:!1})),className:`w-full px-4 py-2 text-sm text-white rounded-lg transition-colors ${mt.type==="success"?"bg-green-500 hover:bg-green-600":mt.type==="error"?"bg-red-500 hover:bg-red-600":"bg-yellow-500 hover:bg-yellow-600"}`,children:""})]})}),I&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-5 max-w-sm mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(zh,{className:"w-5 h-5 text-blue-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-900",children:"  "})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:["       .",s.jsx("br",{}),"    ?"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:""}),s.jsx("button",{onClick:()=>{E(!1),a()},className:"flex-1 px-4 py-2 text-sm text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors",children:" "})]})]})})]}):s.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx($r,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"  "}),s.jsxs("p",{className:"text-gray-500 mb-4",children:["     ",s.jsx("br",{}),"/AS   ."]}),s.jsxs("button",{onClick:a,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[s.jsx(z2,{className:"w-4 h-4 inline mr-2"})," "]})]})})},up=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},hp=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===8?`${e.substring(0,4)}-${e.substring(4,6)}-${e.substring(6,8)}`:t},oq=({onBack:t,showToast:e,selectedCustomer:n,selectedContract:r,contracts:i,onNavigateToBasicInfo:a})=>{var Z;const o=i.filter(le=>{const xe=!["",""].some(ie=>(le.CTRT_STAT_NM||"").includes(ie)),be=le.CLOSE_DANGER==="Y",ne=(le.CTRT_STAT_NM||"").includes("");return xe&&be&&ne}),[c,u]=b.useState(new Set),[h,m]=b.useState({}),[_,p]=b.useState(new Set),[g,C]=b.useState([]),[y,N]=b.useState([]),[v,P]=b.useState([]),[w,M]=b.useState(!1),k=(()=>{const le=new Date;return`${le.getFullYear()}${String(le.getMonth()+1).padStart(2,"0")}${String(le.getDate()).padStart(2,"0")}`})(),[B,G]=b.useState({promChgCd:"",promChgrsnCd:"",promCnt:"36",startDate:k,endDate:""}),[U,I]=b.useState("face"),[E,A]=b.useState(""),[Y,se]=b.useState(""),[X,z]=b.useState(!1),[$,F]=b.useState(!1),[L,re]=b.useState(!1),[fe,T]=b.useState(!1),[j,K]=b.useState(""),J=b.useRef(null),[q,V]=b.useState(!1),[ce,me]=b.useState(null),[Ce,ge]=b.useState({show:!1,success:!1,message:""}),Ge=b.useCallback(async()=>{if(!w)try{const[le,xe,be]=await Promise.all([q$(),X$(),J$()]),ne=(ie,pe,ze)=>{if(ie.success&&ie.data){const xt=ie.data.map(St=>({CODE:St.code||St.CODE||"",CODE_NM:St.name||St.CODE_NM||""})).filter(St=>St.CODE&&St.CODE!=="[]"),st=ze?xt.filter(St=>ze.includes(St.CODE)):xt;return st.length>0?st:pe}return pe};C(ne(le,[{CODE:"0",CODE_NM:""},{CODE:"12",CODE_NM:"12"},{CODE:"24",CODE_NM:"24"},{CODE:"36",CODE_NM:"36"}])),N(ne(xe,[{CODE:"A",CODE_NM:""},{CODE:"B",CODE_NM:"TM"},{CODE:"C",CODE_NM:""},{CODE:"D",CODE_NM:""}])),P(ne(be,[{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""}],["02","03"])),M(!0)}catch(le){console.error("Code loading failed:",le),C([{CODE:"0",CODE_NM:""},{CODE:"12",CODE_NM:"12"},{CODE:"24",CODE_NM:"24"},{CODE:"36",CODE_NM:"36"}]),N([{CODE:"A",CODE_NM:""},{CODE:"B",CODE_NM:"TM"},{CODE:"C",CODE_NM:""},{CODE:"D",CODE_NM:""}]),P([{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""}]),M(!0)}},[w]);b.useEffect(()=>{Ge()},[Ge]),b.useEffect(()=>{o.length>0&&c.size===0&&u(new Set(o.map(le=>le.CTRT_ID)))},[o.length]);const te=(()=>{if(!n)return[];if(n.phoneList&&n.phoneList.length>0){const le=n.phoneList.filter(xe=>xe.number&&xe.type==="hp");if(le.length>0)return le}return n.hpNo?[{type:"hp",typeNm:"",number:n.hpNo,fieldName:"HP_NO"}]:[]})();b.useEffect(()=>{te.length>0&&!E&&(A(te[0].fieldName),se(te[0].number))},[n==null?void 0:n.custId]),b.useEffect(()=>{r&&o.some(xe=>xe.CTRT_ID===r.ctrtId)&&(u(new Set([r.ctrtId])),me(r.ctrtId),he(r.ctrtId))},[r==null?void 0:r.ctrtId]);const he=async le=>{if(!(h[le]!==void 0||_.has(le))){p(xe=>new Set(xe).add(le));try{const xe=await z$(le);xe.success&&xe.data&&xe.data.length>0?m(be=>({...be,[le]:xe.data[0]})):m(be=>({...be,[le]:null}))}catch{m(be=>({...be,[le]:null}))}finally{p(xe=>{const be=new Set(xe);return be.delete(le),be})}}},de=()=>{c.size===o.length?u(new Set):u(new Set(o.map(le=>le.CTRT_ID)))},Q=le=>{const xe=new Set(c);xe.has(le)?xe.delete(le):(xe.add(le),he(le)),u(xe)};b.useEffect(()=>{if(B.startDate&&B.promCnt&&B.promCnt!=="0"){const le=parseInt(B.promCnt,10);if(!isNaN(le)&&le>0){const xe=B.startDate.replace(/[^0-9]/g,"");if(xe.length===8){const be=parseInt(xe.substring(0,4),10),ne=parseInt(xe.substring(4,6),10)-1,ie=parseInt(xe.substring(6,8),10),pe=new Date(be,ne+le,ie-1),ze=`${pe.getFullYear()}${String(pe.getMonth()+1).padStart(2,"0")}${String(pe.getDate()).padStart(2,"0")}`;G(xt=>({...xt,endDate:ze}))}}}else B.promCnt==="0"&&G(le=>({...le,endDate:""}))},[B.startDate,B.promCnt]);const ee=async()=>{if(!n)return;if(c.size===0){e==null||e("  .","warning");return}if(!B.promChgCd||!B.promChgrsnCd||!B.promCnt||!B.startDate){e==null||e("   .","warning");return}V(!0);let le=0,xe=0;const be=[];for(const ne of c)try{const ie=h[ne],pe={CUST_ID:n.custId,CTRT_ID:ne,RCPT_ID:(ie==null?void 0:ie.RCPT_ID)||"",WRK_ID:"",AGREE_YN:"Y",AGREE_GB:B.promChgrsnCd,AGREE_SIGN:"",WRK_CD:B.promChgCd},ze=await H$(pe);ze.success?le++:(xe++,be.push(`${up(ne)}: ${ze.message||""}`))}catch{xe++,be.push(`${up(ne)}:  `)}V(!1),xe===0?(ge({show:!0,success:!0,message:`${le}  .`}),re(!0)):(ge({show:!0,success:!1,message:` ${le},  ${xe}

${be.join(`
`)}`}),le>0&&re(!0)),m({})};return n?s.jsxs("div",{className:"h-full overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[s.jsx(Co,{className:"w-5 h-5 text-purple-500"})," "]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[" ",o.length,""]})]}),s.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:s.jsxs("div",{className:"text-sm text-purple-800",children:[s.jsx("span",{className:"font-medium",children:n.custNm}),s.jsxs("span",{className:"ml-1 text-purple-600 text-xs",children:["(ID: ",up(n.custId),")"]})]})}),o.length===0?s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[s.jsx($r,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"   ."}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"()     ."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-purple-50 rounded-lg cursor-pointer border border-purple-200",children:[s.jsx("input",{type:"checkbox",checked:c.size===o.length,onChange:de,className:"w-5 h-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500",disabled:q}),s.jsxs("span",{className:"flex-1 font-medium text-purple-700",children:["  (",o.length,")"]}),s.jsxs("span",{className:"text-xs text-purple-500",children:[c.size," "]})]}),s.jsx("div",{className:"space-y-2",children:o.map(le=>{const xe=c.has(le.CTRT_ID),be=ce===le.CTRT_ID,ne=h[le.CTRT_ID],ie=_.has(le.CTRT_ID);return s.jsxs("div",{className:`rounded-lg border transition-all ${xe?"bg-purple-50 border-purple-300":"bg-white border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx("input",{type:"checkbox",checked:xe,onChange:()=>Q(le.CTRT_ID),className:"w-4 h-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500",disabled:q}),s.jsx("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>{me(be?null:le.CTRT_ID),be||he(le.CTRT_ID)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:le.PROD_NM||" "}),s.jsxs("span",{className:"text-xs text-gray-400 flex-shrink-0",children:["(ID: ",up(le.CTRT_ID),")"]})]}),s.jsx("span",{className:"text-xs text-orange-600 bg-orange-100 px-1.5 py-0.5 rounded-full flex-shrink-0 ml-1",children:"()"})]})}),s.jsx("button",{onClick:()=>{me(be?null:le.CTRT_ID),be||he(le.CTRT_ID)},className:"flex-shrink-0",children:be?s.jsx(Pr,{className:"w-4 h-4 text-gray-400"}):s.jsx(hr,{className:"w-4 h-4 text-gray-400"})})]}),be&&s.jsx("div",{className:"px-3 pb-3 pt-1 border-t border-gray-100",children:ie?s.jsxs("div",{className:"flex items-center justify-center py-3",children:[s.jsx(pn,{className:"w-4 h-4 animate-spin text-purple-500"}),s.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"  ..."})]}):ne?s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:":"})," ",s.jsx("span",{className:ne.PROM_YN==="Y"?"text-green-600 font-medium":"text-gray-600",children:ne.PROM_YN==="Y"?"":""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:":"})," ",s.jsx("span",{className:"font-medium",children:ne.PROM_CNT_NM||ne.PROM_CNT||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:":"})," ",s.jsx("span",{children:hp(ne.CTRT_APLY_STRT_DT)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:":"})," ",s.jsx("span",{children:hp(ne.CTRT_APLY_END_DT)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:":"})," ",s.jsx("span",{children:ne.PROM_CHG_CD_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:":"})," ",s.jsx("span",{children:ne.PROM_CHGRSN_CD_NM||"-"})]})]}):s.jsx("div",{className:"text-xs text-gray-400 text-center py-2",children:" "})})]},le.CTRT_ID)})}),c.size>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg border border-purple-300 p-4 space-y-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-purple-700",children:[s.jsx(zh,{className:"w-4 h-4"}),"  (",c.size,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600 flex-shrink-0 w-16",children:" "}),s.jsxs("select",{value:B.promChgCd,onChange:le=>G(xe=>({...xe,promChgCd:le.target.value})),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:""}),v.map(le=>s.jsx("option",{value:le.CODE,children:le.CODE_NM},le.CODE))]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600 flex-shrink-0 w-16",children:""}),s.jsxs("select",{value:B.promChgrsnCd,onChange:le=>G(xe=>({...xe,promChgrsnCd:le.target.value})),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:""}),y.filter(le=>le.CODE!=="0").map(le=>s.jsx("option",{value:le.CODE,children:le.CODE_NM},le.CODE))]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600 flex-shrink-0 w-16",children:""}),s.jsx("span",{className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg bg-gray-50 text-gray-700 font-medium",children:"36"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600 flex-shrink-0 w-16",children:""}),s.jsx("span",{className:"flex-1 px-2 py-2 text-sm border border-gray-200 rounded-lg bg-gray-50 text-gray-700 font-medium",children:hp(B.startDate)}),s.jsx("span",{className:"text-xs text-gray-400",children:"~"}),s.jsx("span",{className:"flex-1 px-2 py-2 text-sm border border-gray-200 rounded-lg bg-gray-50 text-gray-600",children:B.endDate?hp(B.endDate):"-"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-purple-300 p-4 space-y-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600 flex-shrink-0 w-16",children:""}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"receiptMethod",value:"face",checked:U==="face",onChange:()=>I("face"),disabled:L,className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),s.jsx("span",{className:`text-sm ${L?"text-gray-400":"text-gray-700"}`,children:""})]}),s.jsxs("label",{className:`flex items-center gap-2 ${L?"cursor-default":"cursor-pointer"}`,children:[s.jsx("input",{type:"radio",name:"receiptMethod",value:"direct",checked:U==="direct",onChange:()=>{I("direct"),setTimeout(()=>{var le;return(le=J.current)==null?void 0:le.scrollIntoView({behavior:"smooth",block:"center"})},100)},disabled:L,className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),s.jsx("span",{className:`text-sm ${L?"text-gray-400":"text-gray-700"}`,children:""})]})]}),U==="direct"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex-shrink-0 w-24 relative",children:[s.jsxs("button",{type:"button",onClick:()=>F(!$),disabled:X||L,className:`w-full px-2 py-2 text-sm text-left border rounded-lg flex items-center justify-between ${X||L?"bg-gray-100 border-gray-200 text-gray-400":"bg-white border-gray-300 hover:border-gray-400"}`,children:[s.jsx("span",{className:"whitespace-nowrap text-xs",children:X?"":((Z=te.find(le=>le.fieldName===E))==null?void 0:Z.typeNm)||""}),s.jsx(hr,{className:"w-3 h-3 text-gray-400 flex-shrink-0 ml-1"})]}),$&&!X&&s.jsx("div",{className:"absolute top-full left-0 mt-1 w-32 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:te.map(le=>s.jsxs("button",{type:"button",onClick:()=>{A(le.fieldName),se(le.number),F(!1)},className:`w-full px-3 py-2 text-left text-sm hover:bg-purple-50 ${E===le.fieldName?"bg-purple-50 text-purple-700 font-medium":"text-gray-700"}`,children:[s.jsx("div",{children:le.typeNm}),s.jsx("div",{className:"text-xs text-gray-400",children:le.number})]},le.fieldName))})]}),s.jsx("input",{type:"tel",value:Y,onChange:le=>se(le.target.value),readOnly:!X||L,placeholder:" ",className:`flex-1 px-3 py-2 text-sm border rounded-lg ${X&&!L?"border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500":"border-gray-200 bg-gray-50 text-gray-700"}`}),s.jsxs("label",{className:"flex items-center gap-1 flex-shrink-0 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:X,disabled:L,onChange:le=>{if(z(le.target.checked),F(!1),le.target.checked)se("");else if(te.length>0){const xe=te.find(be=>be.fieldName===E)||te[0];se(xe.number)}},className:"w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:""})]})]}),s.jsx("button",{onClick:ee,disabled:L||q||!B.promChgCd||!B.promChgrsnCd||!B.promCnt||!B.startDate,className:`w-full flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-colors ${L?"bg-green-100 text-green-700 border border-green-300 cursor-default":q||!B.promChgCd||!B.promChgrsnCd||!B.promCnt||!B.startDate?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:L?s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"w-4 h-4"})," "]}):q?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 animate-spin"}),"  ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(q2,{className:"w-4 h-4"}),"   (",c.size,")"]})}),s.jsxs("div",{ref:J,className:"flex gap-2",children:[s.jsxs("button",{onClick:async()=>{T(!0);try{await new Promise(le=>setTimeout(le,500)),ge({show:!0,success:!0,message:" ."})}catch{ge({show:!0,success:!1,message:"  ."})}finally{T(!1)}},disabled:!(U==="direct"&&L)||fe,className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-colors ${U==="direct"&&L&&!fe?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[fe?s.jsx(pn,{className:"w-4 h-4 animate-spin"}):s.jsx(YC,{className:"w-4 h-4"}),""]}),s.jsxs("button",{onClick:()=>{const le=j||"";le?window.open(le,"_blank"):e==null||e(" URL   .","warning")},disabled:!(U==="face"&&L),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-colors ${U==="face"&&L?"bg-amber-500 hover:bg-amber-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[s.jsx(CM,{className:"w-4 h-4"}),""]})]}),j&&U==="face"&&L&&s.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" URL"}),s.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 underline break-all",children:j})]})]}),s.jsxs("button",{onClick:()=>{re(!1),e==null||e("  .","info")},disabled:!L,className:`w-full flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-colors ${L?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[s.jsx(bo,{className:"w-4 h-4"}),"  "]})]})]}),Ce.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-6",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ce.success?s.jsx(Ai,{className:"w-12 h-12 text-green-500 mb-3"}):s.jsx(bo,{className:"w-12 h-12 text-red-500 mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:Ce.success?" ":" "}),s.jsx("p",{className:"text-sm text-gray-600 mb-4 whitespace-pre-line",children:Ce.message}),s.jsx("button",{onClick:()=>ge({show:!1,success:!1,message:""}),className:`w-full py-2.5 rounded-lg text-sm font-bold text-white ${Ce.success?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"}`,children:""})]})})})]}):s.jsx("div",{className:"h-full overflow-y-auto p-4",children:s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($r,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"  ."}),s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"       ."}),s.jsx("button",{onClick:a,className:"mt-2 text-xs text-blue-600 hover:text-blue-800 underline",children:" "})]})]})})})},cq=({onBack:t,showToast:e})=>{const[n,r]=b.useState({custNm:"",juminNo1:"",juminNo2:"",custTpCd:"01",telNo:"",hpNo:"",addr:""}),[i,a]=b.useState([]),[o,c]=b.useState(!1),[u,h]=b.useState(!1),[m,_]=b.useState(!1),[p,g]=b.useState(!1),[C,y]=b.useState({});b.useEffect(()=>{N()},[]);const N=async()=>{c(!0);try{const B=await L$();B.success&&B.data&&a(B.data)}catch(B){console.error("Load customer type codes error:",B)}finally{c(!1)}},v=(B,G)=>{r(U=>({...U,[B]:G})),C[B]&&y(U=>({...U,[B]:""})),(B==="juminNo1"||B==="juminNo2")&&g(!1)},P=()=>{const B={};return n.custNm.trim()?n.custNm.length<2&&(B.custNm=" 2  ."):B.custNm=" .",n.custTpCd!=="04"&&((!n.juminNo1||n.juminNo1.length!==6)&&(B.juminNo1="  6 ."),(!n.juminNo2||n.juminNo2.length!==7)&&(B.juminNo2="  7 .")),n.hpNo&&n.hpNo.length<10&&(B.hpNo="   ."),y(B),Object.keys(B).length===0},w=async()=>{if(n.custTpCd==="04"){g(!0),e==null||e("    .","info");return}if(!n.custNm||!n.juminNo1||!n.juminNo2){e==null||e("  .","warning");return}_(!0);try{await new Promise(B=>setTimeout(B,1500)),g(!0),e==null||e(" .","success")}catch(B){console.error("Verify error:",B),e==null||e(" .","error"),g(!1)}finally{_(!1)}},M=async()=>{if(!P()){e==null||e("  .","warning");return}if(n.custTpCd!=="04"&&!p){e==null||e("  .","warning");return}h(!0);try{const B={CUST_NM:n.custNm,JUMIN_NO:n.juminNo1+n.juminNo2,CUST_TP_CD:n.custTpCd,TEL_NO:n.telNo||void 0,HP_NO:n.hpNo||void 0,ADDR:n.addr||void 0},G=await D$(B);G.success?(e==null||e(" .","success"),r({custNm:"",juminNo1:"",juminNo2:"",custTpCd:"01",telNo:"",hpNo:"",addr:""}),g(!1)):e==null||e(G.message||"  .","error")}catch(B){console.error("Create customer error:",B),e==null||e("    .","error")}finally{h(!1)}},k=()=>{r({custNm:"",juminNo1:"",juminNo2:"",custTpCd:"01",telNo:"",hpNo:"",addr:""}),y({}),g(!1)};return s.jsx("div",{className:"h-full overflow-y-auto bg-gray-50",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(MP,{className:"w-6 h-6 text-teal-500"}),s.jsx("h2",{className:"text-lg font-medium text-gray-800",children:" "})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"  .     ."})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:(i.length>0?i:[{CODE:"01",CODE_NM:""},{CODE:"02",CODE_NM:""},{CODE:"03",CODE_NM:""},{CODE:"04",CODE_NM:""}]).map(B=>s.jsx("button",{onClick:()=>{v("custTpCd",B.CODE),g(!1)},className:`py-2 px-3 text-sm rounded-lg border transition-colors ${n.custTpCd===B.CODE?"bg-teal-500 text-white border-teal-500":"bg-white text-gray-600 border-gray-300 hover:border-gray-400"}`,children:B.CODE_NM},B.CODE))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"relative",children:[s.jsx(c0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:n.custNm,onChange:B=>v("custNm",B.target.value),placeholder:" ",className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${C.custNm?"border-red-300":"border-gray-300"}`})]}),C.custNm&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:C.custNm})]}),n.custTpCd!=="04"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:n.juminNo1,onChange:B=>v("juminNo1",B.target.value.replace(/[^0-9]/g,"")),placeholder:" 6",maxLength:6,className:`flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${C.juminNo1?"border-red-300":"border-gray-300"}`}),s.jsx("span",{className:"text-gray-400",children:"-"}),s.jsx("input",{type:"password",value:n.juminNo2,onChange:B=>v("juminNo2",B.target.value.replace(/[^0-9]/g,"")),placeholder:" 7",maxLength:7,className:`flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${C.juminNo2?"border-red-300":"border-gray-300"}`}),s.jsx("button",{onClick:w,disabled:m||p,className:`px-4 py-2 rounded-lg transition-colors whitespace-nowrap ${p?"bg-green-100 text-green-700":"bg-teal-500 text-white hover:bg-teal-600 disabled:bg-gray-400"}`,children:m?s.jsx(pn,{className:"w-5 h-5 animate-spin"}):p?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ho,{className:"w-4 h-4"}),""]}):""})]}),(C.juminNo1||C.juminNo2)&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:C.juminNo1||C.juminNo2})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx($C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:n.hpNo,onChange:B=>v("hpNo",B.target.value.replace(/[^0-9]/g,"")),placeholder:"01012345678",maxLength:11,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${C.hpNo?"border-red-300":"border-gray-300"}`})]}),C.hpNo&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:C.hpNo})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx($C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:n.telNo,onChange:B=>v("telNo",B.target.value.replace(/[^0-9]/g,"")),placeholder:"0212345678",maxLength:11,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx(Rd,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("textarea",{value:n.addr,onChange:B=>v("addr",B.target.value),placeholder:" ",rows:2,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none"})]})]}),n.custTpCd!=="04"&&!p&&s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-700",children:["    .",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"   ."})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsxs("button",{onClick:k,className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(Mi,{className:"w-5 h-5"}),""]}),s.jsx("button",{onClick:M,disabled:u||n.custTpCd!=="04"&&!p,className:"flex-1 flex items-center justify-center gap-2 py-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600 disabled:bg-gray-400 transition-colors",children:u?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(cP,{className:"w-5 h-5"})," "]})})]})]})]})})},dq=({onNavigateToMenu:t,showToast:e})=>{const[n,r]=b.useState("basic-info"),[i,a]=b.useState(null),[o,c]=b.useState(null),[u,h]=b.useState("phone"),[m,_]=b.useState(""),[p,g]=b.useState(!1),[C,y]=b.useState(null),[N,v]=b.useState(""),[P,w]=b.useState(!1),[M,k]=b.useState([]),[B,G]=b.useState([]),[U,I]=b.useState([]),[E,A]=b.useState(""),[Y,se]=b.useState("consultation"),X=M.filter(q=>{const V=!["",""].some(Ce=>(q.CTRT_STAT_NM||"").includes(Ce)),ce=q.CLOSE_DANGER==="Y",me=(q.CTRT_STAT_NM||"").includes("");return V&&ce&&me}).length,z=[{id:"basic-info",title:"",description:"    "},{id:"info-change",title:"",description:"/ "},{id:"consultation-as",title:"/AS",description:", AS"},{id:"re-contract",title:"",description:" /",badge:X}],$=q=>{r(q)},F=q=>{k([]),G([]),I([]),A(""),r("basic-info"),a(null),setTimeout(()=>{a(q),c(null)},0)},L=()=>{a(null),c(null),k([]),G([]),I([]),A("")},re=(q,V,ce,me)=>{A(q),k(V),G(ce),I(me)},fe=q=>{c(q)},T=async()=>{if(i)try{const q=await uS(i.CUST_ID);if(q.success&&q.data&&(k(q.data),A(i.CUST_ID),o)){const V=q.data.find(ce=>ce.CTRT_ID===o.ctrtId);V&&c({ctrtId:V.CTRT_ID,prodNm:V.PROD_NM,instAddr:V.INST_ADDR,streetAddr:V.STREET_ADDR_FULL,instlLoc:V.INSTL_LOC,postId:V.POST_ID,notrecev:V.NOTRECEV,soId:V.SO_ID,prodGrp:V.PROD_GRP})}}catch(q){console.error("Failed to refresh contracts after address change:",q)}},j=q=>{r(q)},K=q=>{h("payment"),_(q),r("info-change")},J=()=>{switch(n){case"info-change":return s.jsx(rq,{onBack:t,showToast:e,selectedCustomer:i?{custId:i.CUST_ID,custNm:i.CUST_NM,telNo:i.TEL_NO||"",hpNo:i.HP_NO||"",phoneList:i.PHONE_LIST}:null,selectedContract:o,initialSection:u,initialPymAcntId:m,onPaymentChangeStart:()=>g(!0),onPaymentChangeEnd:()=>{g(!1),y(null),v(""),w(!1)},savedPaymentForm:C,savedPymAcntId:N,savedIsVerified:P,onPaymentFormChange:(q,V,ce)=>{y(q),v(V),w(ce)},onAddressChanged:T});case"consultation-as":return s.jsx(lq,{onBack:t,showToast:e,selectedCustomer:i?{custId:i.CUST_ID,custNm:i.CUST_NM,telNo:i.TEL_NO||i.HP_NO||""}:null,selectedContract:o,contracts:M,onNavigateToBasicInfo:()=>j("basic-info"),initialTab:Y});case"re-contract":return s.jsx(oq,{onBack:t,showToast:e,selectedCustomer:i?{custId:i.CUST_ID,custNm:i.CUST_NM,telNo:i.TEL_NO||"",hpNo:i.HP_NO||"",phoneList:i.PHONE_LIST}:null,selectedContract:o,contracts:M,onNavigateToBasicInfo:()=>j("basic-info")});case"customer-create":return s.jsx(cq,{onBack:t,showToast:e});default:return null}};return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 z-40",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsx(cS,{tabs:z,activeTab:n,onTabChange:$})}),p&&n!=="info-change"&&s.jsx("button",{onClick:()=>{h("payment"),r("info-change")},className:"flex-shrink-0 mr-2 px-3 py-1.5 text-sm bg-orange-500 text-white rounded-lg hover:bg-orange-600 flex items-center gap-1",children:""})]})}),s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 p-3",children:s.jsx(aq,{onCustomerSelect:F,onCustomerClear:L,showToast:e,selectedCustomer:i})}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsx("div",{className:`h-full ${n==="basic-info"?"":"hidden"}`,children:s.jsx(nq,{onBack:t,showToast:e,onContractSelect:fe,onNavigateToPaymentChange:K,onNavigateToConsultationAS:q=>{se(q),r("consultation-as")},onNavigateToAddressChange:()=>{h("address"),r("info-change")},onNavigateToReContract:()=>{r("re-contract")},selectedCustomer:i,savedContract:o,cachedContracts:M,cachedConsultationHistory:B,cachedWorkHistory:U,cachedDataCustId:E,onDataLoaded:re,paymentChangeInProgress:p,onCancelPaymentChange:()=>{g(!1),y(null),v(""),w(!1)},currentWorkingPymAcntId:N})}),n!=="basic-info"&&J()]})]})},uq=!0,ey="[EQUIPMENT-MGT-DEBUG]",ty=[],hq=()=>{const t=new Date;return t.toLocaleTimeString("ko-KR",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+String(t.getMilliseconds()).padStart(3,"0")},MC=(t,e,n)=>{var a;const r={timestamp:hq(),component:t,action:e,...n};ty.push(r);const i=n!=null&&n.error?"color: #ff4444; font-weight: bold;":n!=null&&n.response?"color: #44aa44; font-weight: bold;":"color: #4488ff; font-weight: bold;";if(console.log(`%c${ey} [${r.timestamp}] ${t} - ${e}`,i),n!=null&&n.api&&console.log(`  API: ${n.api}`),n!=null&&n.params&&console.log("  Params:",n.params),(n==null?void 0:n.response)!==void 0){const o=JSON.stringify(n.response);o.length>500?(console.log("  Response (preview):",o.slice(0,500)+"..."),console.log("  Response (full):",n.response)):console.log("  Response:",n.response),Array.isArray(n.response)&&n.response.length===0&&console.warn("  WARNING: Empty array returned!"),(a=n.response)!=null&&a.data&&Array.isArray(n.response.data)&&n.response.data.length===0&&console.warn("  WARNING: response.data is empty array!")}n!=null&&n.error&&console.error("  Error:",n.error),n!=null&&n.duration&&console.log(`  Duration: ${n.duration}ms`)},Ei=async(t,e,n,r)=>{const i=Date.now();MC(t,`API_CALL_START: ${e}`,{api:e,params:r});try{const a=await n(),o=Date.now()-i;return MC(t,`API_CALL_SUCCESS: ${e}`,{api:e,response:a,duration:o}),a}catch(a){const o=Date.now()-i;throw MC(t,`API_CALL_FAILED: ${e}`,{api:e,error:a,duration:o}),a}},fq=()=>[...ty],mq=()=>{ty.length=0,console.log(`${ey} Logs cleared`)},gq=()=>{console.log(`
`+"=".repeat(70)),console.log(`${ey} API CALL SUMMARY`),console.log("=".repeat(70));const t=ty.filter(i=>i.api),e=t.filter(i=>i.response&&!i.error),n=t.filter(i=>i.error),r=t.filter(i=>{var a;return!!(Array.isArray(i.response)&&i.response.length===0||(a=i.response)!=null&&a.data&&Array.isArray(i.response.data)&&i.response.data.length===0)});console.log(`Total API calls: ${t.length}`),console.log(`Success: ${e.length}`),console.log(`Failed: ${n.length}`),console.log(`Empty responses: ${r.length}`),r.length>0&&(console.log(`
APIs returning empty:`),r.forEach(i=>{console.log(`  - ${i.api} (${i.component})`)})),n.length>0&&(console.log(`
Failed APIs:`),n.forEach(i=>{var a;console.log(`  - ${i.api}: ${((a=i.error)==null?void 0:a.message)||i.error}`)})),console.log("=".repeat(70)+`
`)};typeof window<"u"&&(window.eqtDebug={getLogs:fq,clear:mq,summary:gq,enabled:uq},console.log(`${ey} Debug utility loaded. Use window.eqtDebug.summary() to see summary.`));const LT=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}.${t.slice(4,6)}.${t.slice(6,8)}`:t.includes("-")?t.replace(/-/g,"."):t:"",_q=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",xq=typeof window<"u"&&window.location.hostname!=="localhost"?`${window.location.protocol}//${window.location.hostname}:8080/api`:"http://52.63.232.141:8080/api",pq=async()=>{try{const t=localStorage.getItem("branchList");if(t){const r=JSON.parse(t);if(Array.isArray(r)&&r.length>0)return console.log(" [] branchList   :",r.length,""),r}const e=localStorage.getItem("userInfo");if(e){const r=JSON.parse(e);if(r.authSoList&&Array.isArray(r.authSoList)&&r.authSoList.length>0)return console.log(" [] authSoList   :",r.authSoList.length,""),r.authSoList}console.log(" [] API    ...");const n=await fetch(`${xq}/statistics/equipment/getAuthSoList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({USR_ID:e?JSON.parse(e).userId:""})});if(n.ok){const r=await n.json();if(Array.isArray(r)&&r.length>0)return console.log(" [] API   :",r.length,""),localStorage.setItem("branchList",JSON.stringify(r)),r}return console.log(" []    -   "),[]}catch(t){return console.error(" []    :",t),[]}},yq=({onBack:t,showToast:e})=>{const r=(()=>{try{const ge=localStorage.getItem("userInfo");return ge?JSON.parse(ge):null}catch{return null}})(),i=()=>{const ge=new Date;return ge.setDate(ge.getDate()-7),ge.toISOString().slice(0,10).replace(/-/g,"")},[a,o]=b.useState(i()),[c,u]=b.useState(new Date().toISOString().slice(0,10).replace(/-/g,"")),[h,m]=b.useState((r==null?void 0:r.soId)||""),[_,p]=b.useState([]),[g,C]=b.useState(null),[y,N]=b.useState([]),[v,P]=b.useState([]);b.useEffect(()=>{(async()=>{const Ge=await pq();P(Ge)})()},[]),b.useEffect(()=>{p([]),C(null),N([])},[h]);const[w,M]=b.useState(!1),[k,B]=b.useState(!1),[G,U]=b.useState(!1),[I,E]=b.useState(null),[A,Y]=b.useState("simple"),[se,X]=b.useState(new Set),z=b.useRef(null),$=ge=>ge.length===8?`${ge.slice(0,4)}-${ge.slice(4,6)}-${ge.slice(6,8)}`:ge,F=ge=>ge.replace(/-/g,""),L=async()=>{M(!0);try{let ge=[];if(!h&&v.length>0){console.log("[]     - ",v.length," ");const Ge=v.map(he=>{const de={FROM_OUT_REQ_DT:a,TO_OUT_REQ_DT:c,SO_ID:he.SO_ID,PROC_STAT:"%"};return _E(de).catch(()=>[])});ge=(await Promise.all(Ge)).flat(),console.log("[]     - ",ge.length,"")}else{const Ge={FROM_OUT_REQ_DT:a,TO_OUT_REQ_DT:c,SO_ID:h||(r==null?void 0:r.soId)||"209",PROC_STAT:"%"};ge=await Ei("EquipmentAssignment","getEquipmentOutList",()=>_E(Ge),Ge)||[]}if(ge.sort((Ge,te)=>(Ge.SO_NM||"").localeCompare(te.SO_NM||"")),ge.length===0)p([]),C(null),N([]),e==null||e("   .","info");else{const Ge=await Promise.all(ge.map(async te=>{try{const he=await bE({OUT_REQ_NO:te.OUT_REQ_NO}),de=Array.isArray(he)?he:he.output1||[];if(de.length===0)return{...te,_receiveStatus:"none",_receivedCount:0,_totalCount:0};const Q=de.filter(le=>le.PROC_YN==="Y").length,ee=de.length;let Z="none";return Q===ee?Z="received":Q>0&&(Z="partial"),{...te,_receiveStatus:Z,_receivedCount:Q,_totalCount:ee}}catch{return{...te,_receiveStatus:"none",_receivedCount:0,_totalCount:0}}}));p(Ge),C(null),N([]),e==null||e(`${Ge.length}   .`,"success")}}catch(ge){console.error(" []  :",ge),e==null||e(ge.message||"  .","error")}finally{M(!1)}},re=ge=>{X(Ge=>{const te=new Set(Array.from(Ge));return te.has(ge)?te.delete(ge):te.add(ge),te})},fe=y.reduce((ge,Ge,te)=>{const he=Ge.ITEM_MID_CD_NM||"";return ge[he]||(ge[he]=[]),ge[he].push({...Ge,_idx:te}),ge},{});Object.keys(fe).forEach(ge=>{fe[ge].sort((Ge,te)=>{const he=Ge.EQT_CL_NM||"",de=te.EQT_CL_NM||"";return he.localeCompare(de)})});const T=Object.keys(fe).sort(),j=async ge=>{C(ge),B(!0);try{const Ge={OUT_REQ_NO:ge.OUT_REQ_NO},te=await Ei("EquipmentAssignment","getOutEquipmentTargetList",()=>bE(Ge),Ge),he=Array.isArray(te)?te:te.output1||[];N(he.map(de=>({...de,CHK:!1}))),he.length===0&&(e==null||e("   .","info")),setTimeout(()=>{var de;(de=z.current)==null||de.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(Ge){console.error(" []    :",Ge),e==null||e(Ge.message||"   .","error"),N([])}finally{B(!1)}},K=async()=>{if(console.log("[]  "),console.log("[] selectedEqtOut:",g),!g){e==null||e("  .","warning");return}const ge=y.filter(te=>te.CHK&&te.PROC_YN!=="Y");if(console.log("[]  :",ge.length,""),console.log("[]   :",ge),ge.length===0){e==null||e("   .","warning");return}const Ge=ge;console.log("[]  :",Ge.length,"");try{const te={OUT_REQ_NO:g.OUT_REQ_NO,SO_ID:g.SO_ID||(r==null?void 0:r.soId)||"",WRKR_ID:(r==null?void 0:r.userId)||"",CARRIER_ID:g.CRR_ID||(r==null?void 0:r.crrId)||"",CRR_ID:g.CRR_ID||(r==null?void 0:r.crrId)||"",equipmentList:Ge.map(he=>({EQT_NO:he.EQT_NO||"",EQT_SERNO:he.EQT_SERNO||"",OUT_REQ_NO:he.OUT_REQ_NO||"",PROC_YN:"Y",CHG_UID:(r==null?void 0:r.userId)||""}))};console.log("[] API  :",te),await Ei("EquipmentAssignment","addEquipmentQuota",()=>_A(te),te),e==null||e(`${Ge.length}   .`,"success"),await L()}catch(te){console.error(" []  :",te),e==null||e(te.message||" .","error")}},J=ge=>{N(y.map(Ge=>{const te=Ge.PROC_YN==="Y",he=Ge.EQT_SERNO&&Ge.EQT_SERNO.trim()!=="";return!te&&he?{...Ge,CHK:ge}:Ge}))},q=(ge,Ge)=>{const te=[...y];te[ge].CHK=Ge,N(te)},V=(ge,Ge)=>{N(y.map(te=>{if((te.ITEM_MID_CD_NM||"")!==ge)return te;const de=te.PROC_YN==="Y",Q=te.EQT_SERNO&&te.EQT_SERNO.trim()!=="";return!de&&Q?{...te,CHK:Ge}:te}))},ce=ge=>ge&&ge.length>=8?`${ge.slice(0,4)}-${ge.slice(4,6)}-${ge.slice(6,8)}`:ge||"-",me=ge=>{if(!ge._receiveStatus)return{label:"-",color:"bg-gray-400 text-white"};switch(ge._receiveStatus){case"received":return{label:"",color:"bg-green-500 text-white"};case"partial":return{label:`(${ge._receivedCount}/${ge._totalCount})`,color:"bg-yellow-500 text-white"};case"none":return{label:"",color:"bg-red-500 text-white"};default:return{label:"-",color:"bg-gray-400 text-white"}}},Ce=ge=>{var Ge;return ge?ge.includes(":")||ge.includes("-")?ge:((Ge=ge.match(/.{1,2}/g))==null?void 0:Ge.join(":"))||ge:"-"};return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[s.jsxs("div",{className:"relative flex-1 min-w-0",children:[s.jsx("input",{type:"date",value:$(a),onChange:ge=>o(F(ge.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),s.jsxs("div",{className:"flex items-center px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white pointer-events-none",children:[s.jsx("span",{className:"flex-1",children:LT(a)}),s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]}),s.jsx("span",{className:"text-gray-400 flex-shrink-0",children:"~"}),s.jsxs("div",{className:"relative flex-1 min-w-0",children:[s.jsx("input",{type:"date",value:$(c),onChange:ge=>u(F(ge.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),s.jsxs("div",{className:"flex items-center px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white pointer-events-none",children:[s.jsx("span",{className:"flex-1",children:LT(c)}),s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("select",{value:h,onChange:ge=>m(ge.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:""}),v.map(ge=>s.jsx("option",{value:ge.SO_ID,children:ge.SO_NM},ge.SO_ID))]})]}),s.jsx("button",{onClick:L,disabled:w,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2.5 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation flex items-center justify-center gap-2",style:{WebkitTapHighlightColor:"transparent"},children:w?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):""})]})}),_.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"mb-2",children:s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:" (  )"})}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200 flex items-center text-[11px] font-semibold text-gray-600",children:[s.jsx("span",{className:"w-16 text-center",children:""}),s.jsx("span",{className:"w-20 text-center",children:""}),s.jsx("span",{className:"flex-1 text-center",children:""}),s.jsx("span",{className:"w-20 text-center flex-shrink-0",children:""})]}),s.jsx("div",{children:(()=>{const ge=_.reduce((te,he)=>{const de=he.SO_NM||"";return te[de]||(te[de]=[]),te[de].push(he),te},{});return Object.keys(ge).sort().map(te=>s.jsxs("div",{children:[s.jsxs("div",{className:"bg-gray-100 px-3 py-2 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>re(te),children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:te}),s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",ge[te].length,")"]})]}),se.has(te)?s.jsx(hr,{className:"w-4 h-4 text-gray-500"}):s.jsx(Pr,{className:"w-4 h-4 text-gray-500"})]}),!se.has(te)&&ge[te].map((he,de)=>s.jsx("div",{onClick:()=>j(he),className:`px-3 py-2 border-b border-gray-50 cursor-pointer transition-colors ${(g==null?void 0:g.OUT_REQ_NO)===he.OUT_REQ_NO?"bg-blue-50 border-l-4 border-l-blue-500":"hover:bg-blue-50/50"}`,children:s.jsxs("div",{className:"flex items-center text-[11px]",children:[s.jsx("span",{className:"w-16 text-center text-gray-900",children:ce(he.OUT_DTTM||he.OUT_REQ_DT)}),s.jsx("span",{className:"w-20 text-center text-gray-600 truncate",children:he.CRR_NM||"-"}),s.jsx("span",{className:"flex-1 text-center text-gray-700 font-mono",children:he.OUT_REQ_NO}),s.jsx("span",{className:`w-20 text-center px-1.5 py-0.5 rounded text-[10px] font-bold whitespace-nowrap flex-shrink-0 ${me(he).color}`,children:me(he).label})]})},de))]},te))})()})]})]}),g&&s.jsxs("div",{ref:z,children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"  "})}),k?s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin h-6 w-6 text-blue-500 mr-2",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-sm text-gray-600",children:"   ..."})]}):y.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:ge=>J(ge.target.checked),checked:y.filter(ge=>ge.PROC_YN!=="Y").length>0&&y.filter(ge=>ge.PROC_YN!=="Y").every(ge=>ge.CHK),disabled:y.filter(ge=>ge.PROC_YN!=="Y").length===0,className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[y.length," (: ",y.filter(ge=>ge.CHK&&ge.PROC_YN!=="Y").length,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>Y("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${A==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>Y("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${A==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:T.map(ge=>{const Ge=fe[ge],te=se.has(ge),he=Ge.length,de=Ge.filter(Z=>Z.PROC_YN!=="Y"&&Z.EQT_SERNO&&Z.EQT_SERNO.trim()!==""),Q=de.filter(Z=>Z.CHK).length,ee=de.length>0&&Q===de.length;return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>re(ge),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:ee,onClick:Z=>Z.stopPropagation(),onChange:Z=>V(ge,Z.target.checked),className:"rounded w-4 h-4",disabled:de.length===0}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:ge}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[he," ",Q>0&&`(${Q})`]})]}),te?s.jsx(hr,{className:"w-3 h-3 text-gray-500"}):s.jsx(Pr,{className:"w-3 h-3 text-gray-500"})]}),!te&&s.jsx("div",{className:"space-y-2",children:Ge.map(Z=>{const le=Z._idx,xe=Z.PROC_YN==="Y",be=Z.EQT_SERNO&&Z.EQT_SERNO.trim()!=="",ne=!xe&&be;return s.jsxs("div",{onClick:()=>ne&&q(le,!Z.CHK),className:`p-3 rounded-lg border-2 transition-all ${ne?"cursor-pointer":"cursor-not-allowed opacity-70"} ${Z.CHK?"bg-blue-50 border-blue-400":xe?"bg-green-50/50 border-green-200":be?"bg-gray-50 border-gray-200 hover:border-gray-300":"bg-gray-100/50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:xe?!0:Z.CHK||!1,onChange:ie=>{ie.stopPropagation(),ne&&q(le,ie.target.checked)},disabled:!ne,className:`w-5 h-5 rounded focus:ring-blue-500 mt-0.5 ${ne?"text-blue-500":"text-gray-300 cursor-not-allowed"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 truncate",children:Z.EQT_CL_NM||Z.ITEM_MID_CD_NM||"()"}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${xe?"bg-green-100 text-green-700":be?"bg-blue-100 text-blue-700":"bg-red-100 text-red-600"}`,children:xe?"":be?"":""})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:`text-sm ${be?"text-gray-600":"text-gray-400 italic"}`,children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),Z.EQT_SERNO||"( )"]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${Z.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":Z.EQT_USE_ARR_YN==="A"?"bg-purple-100 text-purple-700":Z.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:Z.EQT_USE_ARR_YN==="Y"?"":Z.EQT_USE_ARR_YN==="A"?"":Z.EQT_USE_ARR_YN==="N"?"":"N/A"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),Ce(Z.MAC_ADDRESS||"")]}),s.jsx("span",{className:"text-sm text-gray-600",children:_q(Z.EQT_USE_END_DT||"")})]})]})]}),A==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:Z.ITEM_MODEL||Z.MODEL_NM||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:(g==null?void 0:g.SO_NM)||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Z.EQT_STAT_CD_NM||(be?"-":"")})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:Z.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Z.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Z.EQT_LOC_NM||Z.EQT_LOC_TP_NM||(be?"-":"()")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Z.OLD_EQT_LOC_NM||"-"})]})]})]},le)})})]},ge)})}),!1]}),s.jsx("div",{className:"h-20"}),s.jsx("div",{className:"fixed bottom-[56px] left-0 right-0 p-3 z-40",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsxs("button",{onClick:K,disabled:!y.some(ge=>ge.CHK&&ge.PROC_YN!=="Y"),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-3 px-6 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation disabled:cursor-not-allowed",style:{WebkitTapHighlightColor:"transparent"},children:["   (",y.filter(ge=>ge.CHK&&ge.PROC_YN!=="Y").length,")"]})})]}):s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"  "})]})})]}),_.length===0&&!w&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"     "})]})}),s.jsx(Ra,{isOpen:G,onClose:()=>U(!1),title:"  ",size:"md",children:I&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:" "}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:I.ITEM_MAX_CD_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:I.EQT_CL_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:I.ITEM_MID_CD||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:I.ITEM_MID_CD_NM||"-"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-700 mb-2",children:"  "}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"font-mono font-medium",children:I.EQT_NO||"-"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"font-mono font-medium",children:I.EQT_SERNO||"-"})]}),I.MAC_ADDRESS&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"MAC :"}),s.jsx("span",{className:"font-mono font-medium",children:I.MAC_ADDRESS})]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:" "}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500",children:""}),s.jsx("div",{className:"text-lg font-bold text-gray-800",children:I.OUT_REQ_QTY||0})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500",children:""}),s.jsx("div",{className:"text-lg font-bold text-green-600",children:I.OUT_QTY||0})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500",children:""}),s.jsx("div",{className:"text-lg font-bold text-blue-600",children:I.IBGO_QTY||0})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-yellow-700 mb-2",children:" "}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:`px-2 py-1 rounded font-medium ${I.PROC_YN==="Y"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:I.PROC_YN==="Y"?"":""})]}),I.REMARK&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("p",{className:"mt-1 text-gray-700 bg-white p-2 rounded",children:I.REMARK})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded font-medium text-sm transition-colors",children:""})})]})})]})},bq={10:"",11:"()",20:"",35:"",50:"",60:"",70:"",71:"",72:"",73:"AS",74:"",75:"",80:"",81:"",82:"",83:"",84:"",90:""},Cq={1:"SO()",2:"",3:"",4:""},PT=t=>bq[t]||t,AT=t=>Cq[t]||t,Nq=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",Sq=typeof window<"u"?(()=>{const t=window.location.hostname;return t==="localhost"||t==="127.0.0.1"?"http://52.63.232.141:8080/api":"/api"})():"/api",vq=async()=>{try{const t=localStorage.getItem("branchList");if(t){const r=JSON.parse(t);if(Array.isArray(r)&&r.length>0)return console.log(" [] branchList   :",r.length,""),r}const e=localStorage.getItem("userInfo");if(e){const r=JSON.parse(e);if(r.authSoList&&Array.isArray(r.authSoList)&&r.authSoList.length>0)return console.log(" [] authSoList   :",r.authSoList.length,""),r.authSoList}console.log(" [] API    ...");const n=await fetch(`${Sq}/statistics/equipment/getAuthSoList`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({USR_ID:e?JSON.parse(e).userId:""})});if(n.ok){const r=await n.json();if(Array.isArray(r)&&r.length>0)return console.log(" [] API   :",r.length,""),localStorage.setItem("branchList",JSON.stringify(r)),r}return console.log(" []    -   "),[]}catch(t){return console.error(" []    :",t),[]}},Eq=[{COMMON_CD:"",COMMON_CD_NM:""},{COMMON_CD:"02",COMMON_CD_NM:""},{COMMON_CD:"03",COMMON_CD_NM:"CVT"},{COMMON_CD:"04",COMMON_CD_NM:"STB"},{COMMON_CD:"05",COMMON_CD_NM:"Smart card"},{COMMON_CD:"06",COMMON_CD_NM:""},{COMMON_CD:"07",COMMON_CD_NM:"Cable Card"},{COMMON_CD:"08",COMMON_CD_NM:"IP"},{COMMON_CD:"10",COMMON_CD_NM:"(AP)"},{COMMON_CD:"23",COMMON_CD_NM:"OTT_STB()"}],Dq=({onBack:t,showToast:e})=>{var rt,Wt,_t,qt,Ot;const r=(()=>{try{const _e=localStorage.getItem("userInfo");return _e?JSON.parse(_e):null}catch{return null}})(),[i,a]=b.useState(""),[o,c]=b.useState(""),[u,h]=b.useState(""),[m,_]=b.useState([]),[p,g]=b.useState(!1),[C,y]=b.useState(""),[N,v]=b.useState(!1),[P,w]=b.useState("OWNED"),[M,k]=b.useState(!1),B=()=>{let _e=0;return i&&_e++,o&&_e++,u&&_e++,C&&_e++,_e},[G,U]=b.useState(!1),[I,E]=b.useState([]),[A,Y]=b.useState([]),[se,X]=b.useState([]),[z]=b.useState(Eq);b.useEffect(()=>{(async()=>{let Se=await vq();if(r!=null&&r.soId&&!Se.find(Ie=>Ie.SO_ID===r.soId)){const Ie=r.soNm||(r.soId==="100"?"":`(${r.soId})`);Se=[{SO_ID:r.soId,SO_NM:Ie},...Se],console.log("[]  soId :",r.soId,Ie)}X(Se)})()},[r==null?void 0:r.soId]),b.useEffect(()=>{if(!o){_([]),h("");return}(async()=>{g(!0);try{console.log("[]  API :",o);const Se=await PM({ITEM_MID_CD:o});console.log("[]  API :",Se);const Ie=Array.isArray(Se)?Se:(Se==null?void 0:Se.data)||[];if(Array.isArray(Ie)&&Ie.length>0){const Te=Ie.map(nt=>({code:nt.COMMON_CD||nt.EQT_CL_CD||"",name:nt.COMMON_CD_NM||nt.EQT_CL_NM||""})).filter(nt=>nt.code&&nt.name).sort((nt,Re)=>nt.name.localeCompare(Re.name));console.log("[]  :",Te.length,""),_(Te)}else _([])}catch(Se){console.error("[]   :",Se),_([])}finally{g(!1)}})(),h("")},[o]);const[$,F]=b.useState(!1),[L,re]=b.useState(!1),[fe,T]=b.useState(!1),[j,K]=b.useState({current:0,total:0,item:"",action:""}),[J,q]=b.useState(!1),[V,ce]=b.useState(null),[me,Ce]=b.useState(""),[ge,Ge]=b.useState(""),[te,he]=b.useState(""),[de,Q]=b.useState(!1);b.useEffect(()=>{Y([]),ce(null)},[P]);const[ee,Z]=b.useState("simple"),[le,xe]=b.useState(new Set),[be,ne]=b.useState(!0),[ie,pe]=b.useState(!0),[ze,xt]=b.useState(!0),St=P!=="OWNED"?A:A.filter(_e=>{const Se=_e._category==="RETURN_REQUESTED"||_e._hasReturnRequest,Ie=_e._category==="INSPECTION_WAITING"||_e.EQT_USE_ARR_YN==="A",Te=!Se&&!Ie;return!(Se&&!ze||Ie&&!ie||Te&&!be)}),[ot,Be]=b.useState(null),[lt,pt]=b.useState(!1),[mt,Ye]=b.useState(!1),[at,Fe]=b.useState([]),[tt,ct]=b.useState(!1),[Mt,dt]=b.useState([]);b.useEffect(()=>{Je()},[]),b.useEffect(()=>{if(C==="705KVQS022868"&&(r!=null&&r.userId)){console.log(" [] S/N    ...");const _e=setTimeout(()=>{De()},500);return()=>clearTimeout(_e)}},[r==null?void 0:r.userId]);const Je=async()=>{console.log(" []  ")},De=async()=>{if(console.log("=====   ====="),console.log("[DEBUG] userInfo:",r),console.log("[DEBUG] userInfo.soId:",r==null?void 0:r.soId),console.log("[DEBUG] selectedSoId (state):",i),console.log("[DEBUG] localStorage userInfo:",localStorage.getItem("userInfo")),!(r!=null&&r.userId)){e==null||e("  .  .","error");return}F(!0),Y([]);try{console.log(" [] :",{selectedCategory:P,SO_ID:i,userInfo_soId:r.soId,WRKR_ID:r.userId,CRR_ID:r.crrId,ITEM_MID_CD:o,EQT_SERNO:C});let _e=[];{const Te={WRKR_ID:r.userId,CRR_ID:r.crrId,SO_ID:i||r.soId||void 0,ITEM_MID_CD:o||void 0},nt=[];if(P==="OWNED")try{const Re={WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||""};console.log("[DEBUG]  API  :",Re);const Ct=await Ei("EquipmentInquiry","getWrkrHaveEqtListAll ()",()=>Og(Re),Re);console.log("[DEBUG]  API :",{isArray:Array.isArray(Ct),length:Array.isArray(Ct)?Ct.length:"N/A",raw:Ct});let Ke=new Set;try{const Et=await CE({WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||r.soId||void 0});console.log("[]   :",Et),Array.isArray(Et)&&(Et.forEach(Rt=>{Rt.EQT_NO&&(Ke.add(Rt.EQT_NO),console.log("[] EQT_NO :",Rt.EQT_NO))}),console.log("[]    :",Ke.size,"/ EQT_NO Set:",Array.from(Ke)))}catch(Et){console.log("[]     ():",Et)}if(Array.isArray(Ct)){let Et=Ct;o&&(Et=Et.filter(ht=>ht.ITEM_MID_CD===o)),u&&(console.log("[1 ]  EQT_CL_CD  :",Et.length,""),console.log("[1 ] selectedEqtClCd:",u),console.log("[1 ]  EQT_CL_CD :",Et.map(ht=>({serno:ht.EQT_SERNO,eqtClCd:ht.EQT_CL_CD}))),Et=Et.filter(ht=>ht.EQT_CL_CD===u),console.log("[1 ]  EQT_CL_CD  :",Et.length,"")),console.log("[]  ( ):",Et.length,""),nt.push(...Et.map(ht=>{const Pt=Ke.has(ht.EQT_NO);return Pt&&console.log("[]   :",ht.EQT_NO,ht.EQT_SERNO),{...ht,_category:"OWNED",_hasReturnRequest:Pt}}));const{merged:Rt,transferredCount:He}=GA(nt,r.userId);He>0&&(console.log("[]   :",He,""),nt.length=0,nt.push(...Rt.map(ht=>({...ht,_category:ht._category||"OWNED",_hasReturnRequest:Ke.has(ht.EQT_NO)}))));try{const ht=await NE({WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||""});if(Array.isArray(ht)){const Pt=new Set(nt.map(Yt=>Yt.EQT_NO)),Bt=ht.filter(Yt=>Yt.EQT_NO&&!Pt.has(Yt.EQT_NO));Bt.length>0?(console.log("[]  API   :",Bt.length,""),nt.push(...Bt.map(Yt=>({...Yt,_category:"OWNED",_hasReturnRequest:Ke.has(Yt.EQT_NO),EQT_USE_ARR_YN:Yt.EQT_USE_ARR_YN||"A"})))):console.log("[]  API -    (  )")}}catch(ht){console.log("[]  API   ():",ht)}}}catch(Re){console.log("   (getCustProdInfo):",Re)}if(P==="RETURN_REQUESTED"){const Re={WRKR_ID:r.userId,SO_ID:i||r.soId||void 0,CRR_ID:r.crrId};try{const Ct=await Ei("EquipmentInquiry","getEquipmentReturnRequestListAll ()",()=>CE(Re),Re);if(Array.isArray(Ct)){let Ke=Ct;o&&(Ke=Ke.filter(He=>He.ITEM_MID_CD===o)),u&&(Ke=Ke.filter(He=>He.EQT_CL_CD===u));const Et=new Map;Ke.forEach(He=>{He.EQT_NO&&(Et.has(He.EQT_NO)||Et.set(He.EQT_NO,[]),Et.get(He.EQT_NO).push(He))});const Rt=[];Et.forEach((He,ht)=>{const Pt=He[0],Bt=He.map(Yt=>({REQ_DT:Yt.REQ_DT,RETURN_TP:Yt.RETURN_TP||"2",EQT_USE_ARR_YN:Yt.EQT_USE_ARR_YN||"Y"}));Rt.push({...Pt,_allReqDts:Bt})}),Ke.length!==Rt.length&&console.log("[]  :",Ke.length,"->",Rt.length,"(_allReqDts )"),nt.push(...Rt.map(He=>({...He,_category:"RETURN_REQUESTED"})))}}catch(Ct){console.log("  :",Ct)}}if(P==="INSPECTION_WAITING"){const Re={WRKR_ID:r.userId,CRR_ID:r.crrId||"",SO_ID:i||""};try{const Ct=await Ei("EquipmentInquiry","getEquipmentChkStndByAAll ()",()=>NE(Re),Re);if(Array.isArray(Ct)){let Ke=Ct.filter(Et=>Et.ITEM_MID_CD==="04");console.log("[] API :",Ct.length,", STB:",Ke.length,""),nt.push(...Ke.map(Et=>({...Et,_category:"INSPECTION_WAITING"})))}}catch(Ct){console.log("  :",Ct)}}if(_e=nt,C&&C.trim().length>0){const Re=C.trim().toUpperCase();_e=_e.filter(Ct=>{const Ke=(Ct.EQT_SERNO||"").toUpperCase(),Et=(Ct.MAC_ADDRESS||"").toUpperCase();return Ke.includes(Re)||Et.includes(Re)}),console.log(" [] S/N  :",_e.length," (:",Re,")")}}let Ie=(Array.isArray(_e)?_e:[]).map(Te=>({CHK:!1,EQT_NO:Te.EQT_NO||"",EQT_SERNO:Te.EQT_SERNO||Te.SERIAL_NO||"",MAC_ADDRESS:Te.MAC_ADDRESS||Te.MAC||Te.TA_MAC_ADDRESS||"",EQT_CL_CD:Te.EQT_CL_CD||"",EQT_CL_NM:Te.EQT_CL_NM||Te.EQT_TYPE||"",ITEM_MID_CD:Te.ITEM_MID_CD||"",ITEM_MID_NM:Te.ITEM_MID_NM||"",ITEM_NM:Te.ITEM_NM||Te.ITEM_MODEL||"",ITEM_MODEL:Te.ITEM_MODEL||Te.MODEL_NM||"",SO_ID:Te.SO_ID||i,SO_NM:Te.SO_NM||"",EQT_STAT_CD:Te.EQT_STAT_CD||Te.STATUS||"",EQT_STAT_NM:Te.EQT_STAT_NM||Te.EQT_STAT_CD_NM||PT(Te.EQT_STAT_CD||Te.STATUS||"")||"",EQT_LOC_TP_CD:Te.EQT_LOC_TP_CD||"",EQT_LOC_TP_NM:Te.EQT_LOC_TP_NM||Te.EQT_LOC_TP_CD_NM||AT(Te.EQT_LOC_TP_CD||""),EQT_LOC_NM:Te.EQT_LOC_NM||"",OLD_EQT_LOC_NM:Te.OLD_EQT_LOC_NM||Te.BEF_EQT_LOC_NM||Te.BEF_LOC_NM||"",CHG_KND_NM:Te.CHG_KND_NM||Te.CHG_TP_NM||Te.EQT_CHG_TP_NM||"",PROC_STAT:Te.PROC_STAT||"",PROC_STAT_NM:Te.PROC_STAT_NM||"",WRKR_ID:Te.WRKR_ID||r.userId,WRKR_NM:Te.WRKR_NM||r.userName,CUST_ID:Te.CUST_ID||"",CTRT_ID:Te.CTRT_ID||"",CTRT_STAT:Te.CTRT_STAT||"",WRK_ID:Te.WRK_ID||"",EQT_USE_END_DT:Te.EQT_USE_END_DT||Te.USE_END_DT||Te.EXPIRE_DT||"",RETN_RESN_CD:Te.RETN_RESN_CD||"",RETN_RESN_NM:Te.RETN_RESN_NM||Te.RETN_RESN_CD_NM||"",REQ_DT:Te.REQ_DT||"",RETURN_TP:Te.RETURN_TP||"2",EQT_USE_ARR_YN:Te.EQT_USE_ARR_YN||"",_category:Te._category||void 0,_hasReturnRequest:Te._hasReturnRequest||!1}));o&&(Ie=Ie.filter(Te=>Te.ITEM_MID_CD===o)),u&&(Ie=Ie.filter(Te=>Te.EQT_CL_CD===u)),Ie.sort((Te,nt)=>{const Re=He=>He._category==="RETURN_REQUESTED"||He._hasReturnRequest?3:He._category==="INSPECTION_WAITING"||He.EQT_USE_ARR_YN==="A"?2:1,Ct=Re(Te),Ke=Re(nt);if(Ct!==Ke)return Ct-Ke;const Et=Te.ITEM_MID_CD||"",Rt=nt.ITEM_MID_CD||"";return Et.localeCompare(Rt)}),Y(Ie),Ie.length===0?e==null||e("  .","info"):e==null||e(`${Ie.length}  .`,"success")}catch(_e){console.error(" [] :",_e),e==null||e(_e.message||"  .","error")}finally{F(!1)}},$e=_e=>{_e.CHK=!0,Y([_e]),U(!1),E([]),e==null||e(" .","success")},Ne=_e=>{Y(A.map(Se=>({...Se,CHK:Se._category==="OWNED"&&Se._hasReturnRequest?!1:_e})))},ye=(_e,Se)=>{Y(A.map(Ie=>Ie.EQT_NO===_e?{...Ie,CHK:Se}:Ie))},Ue=_e=>{var Se;return _e?_e.includes(":")||_e.includes("-")?_e:((Se=_e.match(/.{1,2}/g))==null?void 0:Se.join(":"))||_e:"-"},ue=()=>{const _e=A.filter(Ie=>Ie.CHK);if(_e.length===0){e==null||e("  .","warning");return}const Se=_e.filter(Ie=>Ie._hasReturnRequest);if(Se.length>0){dt(Se),ct(!0);return}re(!0)},Oe=async _e=>{var Ie,Te;const Se=A.filter(nt=>nt.CHK);if(Se.length===0){e==null||e("  .","warning");return}if(_e==="RETURN"){if(!me){Q(!0);return}if(me==="03"&&!ge.trim()){Q(!0);return}}try{const nt=_e==="RETURN"||Se.length>=3;nt&&(K({current:0,total:Se.length,item:"",action:_e==="CANCEL"?"":""}),T(!0));const Re=(Ct,Ke,Et)=>{nt&&K({current:Ct,total:Ke,item:Et,action:_e==="CANCEL"?"":""})};if(_e==="CANCEL"){const Ct=[];Se.forEach(Rt=>{Rt._allReqDts&&Array.isArray(Rt._allReqDts)&&Rt._allReqDts.length>0?Rt._allReqDts.forEach(He=>{Ct.push({EQT_NO:Rt.EQT_NO,EQT_SERNO:Rt.EQT_SERNO,REQ_DT:He.REQ_DT,RETURN_TP:He.RETURN_TP||"2",EQT_USE_ARR_YN:He.EQT_USE_ARR_YN||"Y"})}):Ct.push({EQT_NO:Rt.EQT_NO,EQT_SERNO:Rt.EQT_SERNO,REQ_DT:Rt.REQ_DT,RETURN_TP:Rt.RETURN_TP||"2",EQT_USE_ARR_YN:Rt.EQT_USE_ARR_YN||""})}),console.log("[]    :",Ct.length,"(",Se.length,")");const Ke={WRKR_ID:(r==null?void 0:r.userId)||"",CRR_ID:(r==null?void 0:r.crrId)||"",SO_ID:((Ie=Se[0])==null?void 0:Ie.SO_ID)||i||(r==null?void 0:r.soId)||"",equipmentList:Ct},Et=await Ei("EquipmentInquiry","delEquipmentReturnRequest",()=>LA(Ke,Re),Ke)}else{if(!me){e==null||e(" .","warning"),T(!1);return}if(me==="03"&&!ge.trim()){e==null||e("  .","warning"),T(!1);return}const Ct={WRKR_ID:(r==null?void 0:r.userId)||"",CRR_ID:(r==null?void 0:r.crrId)||"",SO_ID:((Te=Se[0])==null?void 0:Te.SO_ID)||i||(r==null?void 0:r.soId)||"",MST_SO_ID:(r==null?void 0:r.mstSoId)||(r==null?void 0:r.soId)||"",RETURN_TP:"2",RETN_RESN_TEXT:me==="03"?ge:void 0,equipmentList:Se.map(Et=>({EQT_NO:Et.EQT_NO,EQT_SERNO:Et.EQT_SERNO,ACTION:_e,RETN_RESN_CD:me,EQT_USE_ARR_YN:Et.EQT_USE_ARR_YN}))},Ke=await Ei("EquipmentInquiry","addEquipmentReturnRequest",()=>xA(Ct,Re),Ct)}T(!1),e==null||e(_e==="RETURN"?`${Se.length}    .`:`${Se.length}   .`,"success"),re(!1),Ce(""),Ge(""),await De()}catch(nt){console.error("   :",nt),e==null||e(nt.message||"  .","error"),T(!1)}},Ze=async()=>{if(V)try{const _e={EQT_NO:V.EQT_NO,EQT_SERNO:V.EQT_SERNO||"",WRKR_ID:(r==null?void 0:r.userId)||"",CRR_ID:(r==null?void 0:r.crrId)||"",SO_ID:V.SO_ID||i||(r==null?void 0:r.soId)||"",EQT_CL_CD:V.EQT_CL_CD||"",LOSS_REASON:te||void 0},Se=await Ei("EquipmentInquiry","processEquipmentLoss",()=>pA(_e),_e);e==null||e("   .","success"),q(!1),ce(null),he(""),await De()}catch(_e){console.error("   :",_e),e==null||e(_e.message||"  .","error")}},Le=()=>{const _e=A.filter(Se=>Se.CHK);if(_e.length===0){e==null||e("   .","warning");return}Fe(_e),Ye(!0)},[vt,je]=b.useState(!1),ut=b.useRef(!1),gt=async()=>{var Re,Ct;if(ut.current){console.log("[]   . (ref check)");return}if(ut.current=!0,vt){console.log("[]   . (state check)"),ut.current=!1;return}Ye(!1);const _e=at;if(_e.length===0)return;const Se=_e.filter(Ke=>Ke.EQT_USE_ARR_YN!=="Y");if(Se.length===0){e==null||e("    .","info"),Fe([]);return}je(!0),K({current:0,total:Se.length,item:"",action:""}),T(!0);const Ie={success:[],failed:[]},Te=new Set;let nt=0;try{for(const Ke of Se){if(Te.has(Ke.EQT_NO)){console.log("[]   :",Ke.EQT_SERNO);continue}Te.add(Ke.EQT_NO),nt++,K({current:nt,total:Se.length,item:Ke.EQT_SERNO||"",action:""});const Et={EQT_NO:Ke.EQT_NO,SO_ID:Ke.SO_ID||(r==null?void 0:r.soId)||"",EQT_SERNO:Ke.EQT_SERNO||"",USER_ID:(r==null?void 0:r.userId)||"",CRR_ID:Ke.CRR_ID||(r==null?void 0:r.crrId)||"",WRKR_ID:(r==null?void 0:r.userId)||"",CUST_ID:Ke.CUST_ID||"",WRK_ID:Ke.WRK_ID||"",CTRT_ID:Ke.CTRT_ID||"",CTRT_STAT:Ke.CTRT_STAT||"",PROG_GB:"M"};let Rt=0;const He=0;let ht=null,Pt=!1;for(;Rt<=He;)try{await Ei("EquipmentInquiry","setEquipmentCheckStandby",()=>yA(Et),Et),Ie.success.push({EQT_SERNO:Ke.EQT_SERNO,EQT_NO:Ke.EQT_NO,ITEM_NM:Ke.ITEM_NM||Ke.ITEM_MID_NM||""}),Pt=!0;break}catch(Bt){ht=Bt;const Yt=(Bt==null?void 0:Bt.message)||"";if(Yt.includes("ORA-00001")&&Rt<He){Rt++,console.log(`[] ORA-00001 , ${Rt}/${He}  (1 ):`,Ke.EQT_SERNO),await new Promise(Xt=>setTimeout(Xt,1e3));continue}if(Yt.includes("ORA-00001")){console.log("[] ORA-00001 ,    :",Ke.EQT_SERNO);try{const Xt=await am({EQT_SERNO:Ke.EQT_SERNO});console.log("[]   :",Xt);let ts;(Re=Xt==null?void 0:Xt.data)!=null&&Re[0]?ts=Xt.data[0]:(Ct=Xt==null?void 0:Xt.resultList)!=null&&Ct[0]?ts=Xt.resultList[0]:Array.isArray(Xt)&&Xt.length>0?ts=Xt[0]:ts=Xt,console.log("[]  :",ts);const Ut=ts==null?void 0:ts.EQT_USE_ARR_YN;if(console.log("[]   EQT_USE_ARR_YN:",Ut),Ut==="Y"||Ut&&Ut!=="A"){console.log(`[]     (${Ut}),  :`,Ke.EQT_SERNO),Ie.success.push({EQT_SERNO:Ke.EQT_SERNO,EQT_NO:Ke.EQT_NO,ITEM_NM:Ke.ITEM_NM||Ke.ITEM_MID_NM||"",note:Ut==="Y"?"  ":`: ${Ut}`}),Pt=!0;break}else console.log("[]    A (),  ")}catch(Xt){console.error("[]    :",Xt)}}console.error("  :",Ke.EQT_SERNO,Bt),Ie.failed.push({EQT_SERNO:Ke.EQT_SERNO,EQT_NO:Ke.EQT_NO,ITEM_NM:Ke.ITEM_NM||Ke.ITEM_MID_NM||"",error:Rt>0?`${Yt} (${Rt}   )`:Yt||"    "});break}await new Promise(Bt=>setTimeout(Bt,200))}Be(Ie),pt(!0),Fe([]),Ie.success.length>0&&await De()}catch(Ke){console.error("  :",Ke),e==null||e(Ke.message||"  .","error")}finally{T(!1),je(!1),ut.current=!1}},jt=_e=>{console.log("Barcode scanned:",_e),y(_e.toUpperCase()),v(!1),e==null||e(`  : ${_e}`,"success"),setTimeout(()=>{De()},300)};A.filter(_e=>_e.CHK).length;const Ve=A.filter(_e=>_e.CHK&&_e._category==="OWNED").length,Vt=A.filter(_e=>_e.CHK&&_e._category==="RETURN_REQUESTED").length,ke=A.filter(_e=>_e.CHK&&_e._category==="INSPECTION_WAITING").length,ss=A.filter(_e=>_e._category==="OWNED").length,ls=A.filter(_e=>_e._category==="RETURN_REQUESTED").length,ds=A.filter(_e=>_e._category==="INSPECTION_WAITING").length,vs=(_e,Se,Ie)=>{Y(A.map(Te=>{const nt=Te.SO_NM||Te.SO_ID||"",Re=Te.ITEM_MID_NM||"";return nt!==_e||Re!==Se||Te._category==="OWNED"&&Te._hasReturnRequest?Te:{...Te,CHK:Ie}}))},Ss=_e=>{xe(Se=>{const Ie=new Set(Array.from(Se));return Ie.has(_e)?Ie.delete(_e):Ie.add(_e),Ie})},Ae=St.reduce((_e,Se,Ie)=>{var Rt,He,ht,Pt;let Te="";const nt=(Rt=Se.SO_NM)==null?void 0:Rt.trim(),Re=(He=Se.MST_SO_NM)==null?void 0:He.trim(),Ct=(ht=Se.SO_ID)==null?void 0:ht.trim(),Ke=(Pt=Se.MST_SO_ID)==null?void 0:Pt.trim();nt&&nt!=="100"?Te=nt:Re&&Re!=="100"?Te=Re:Ct==="100"||Ke==="100"||nt==="100"||Re==="100"?Te="":Ct&&(Te=Ct);const Et=Se.ITEM_MID_NM||"";return _e[Te]||(_e[Te]={}),_e[Te][Et]||(_e[Te][Et]=[]),_e[Te][Et].push({...Se,_globalIdx:Ie}),_e},{});Object.keys(Ae).forEach(_e=>{Object.keys(Ae[_e]).forEach(Se=>{Ae[_e][Se].sort((Ie,Te)=>{const nt=Ie.EQT_CL_NM||Ie.ITEM_NM||"",Re=Te.EQT_CL_NM||Te.ITEM_NM||"";return nt.localeCompare(Re)})})});const ft=Object.keys(Ae).sort();return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-1",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("button",{type:"button",onClick:()=>w("OWNED"),className:`p-2 rounded-lg border-2 transition-all text-center active:scale-[0.98] touch-manipulation ${P==="OWNED"?"bg-green-50 border-green-500 text-green-700 shadow-sm":"border-gray-200 hover:bg-gray-50 text-gray-400"}`,style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${P==="OWNED"?"bg-green-500 border-green-500":"border-gray-300"}`,children:P==="OWNED"&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-sm font-bold",children:""})]})}),s.jsx("button",{type:"button",onClick:()=>w("RETURN_REQUESTED"),className:`p-2 rounded-lg border-2 transition-all text-center active:scale-[0.98] touch-manipulation ${P==="RETURN_REQUESTED"?"bg-amber-50 border-amber-500 text-amber-700 shadow-sm":"border-gray-200 hover:bg-gray-50 text-gray-400"}`,style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${P==="RETURN_REQUESTED"?"bg-orange-500 border-amber-500":"border-gray-300"}`,children:P==="RETURN_REQUESTED"&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-sm font-bold",children:""})]})}),s.jsx("button",{type:"button",onClick:()=>w("INSPECTION_WAITING"),className:`p-2 rounded-lg border-2 transition-all text-center active:scale-[0.98] touch-manipulation ${P==="INSPECTION_WAITING"?"bg-purple-50 border-purple-500 text-purple-700 shadow-sm":"border-gray-200 hover:bg-gray-50 text-gray-400"}`,style:{WebkitTapHighlightColor:"transparent"},children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${P==="INSPECTION_WAITING"?"bg-purple-500 border-purple-500":"border-gray-300"}`,children:P==="INSPECTION_WAITING"&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-sm font-bold",children:""})]})})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("button",{onClick:()=>k(!M),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" "}),(i||o||C)&&s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500 text-white text-[10px] rounded-full font-medium",children:B()})]}),s.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${M?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),M&&s.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("select",{value:i,onChange:_e=>a(_e.target.value),className:"flex-1 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:""}),se.map(_e=>s.jsx("option",{value:_e.SO_ID,children:_e.SO_NM},_e.SO_ID))]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsx("select",{value:o,onChange:_e=>c(_e.target.value),className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent truncate",children:z.map(_e=>s.jsx("option",{value:_e.COMMON_CD,children:_e.COMMON_CD_NM},_e.COMMON_CD))}),s.jsxs("select",{value:u,onChange:_e=>h(_e.target.value),disabled:!o||p||m.length===0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed truncate",children:[s.jsx("option",{value:"",children:o?p?"...":m.length===0?"-":"":"-"}),m.map(_e=>s.jsx("option",{value:_e.code,children:_e.name},_e.code))]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:C,onChange:_e=>y(_e.target.value.toUpperCase()),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg uppercase focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono",placeholder:"S/N  MAC  "}),s.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-1",children:s.jsx("button",{onClick:De,disabled:$,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 rounded-xl font-bold text-base shadow-md transition-all flex items-center justify-center gap-2 active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:$?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),""]})})}),A.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:_e=>Ne(_e.target.checked),checked:St.length>0&&St.filter(_e=>!(_e._category==="OWNED"&&_e._hasReturnRequest)).length>0&&St.filter(_e=>!(_e._category==="OWNED"&&_e._hasReturnRequest)).every(_e=>_e.CHK),className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[St.length," (: ",St.filter(_e=>_e.CHK).length,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>Z("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${ee==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>Z("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${ee==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:ft.map(_e=>{const Se=Ae[_e],Ie=Object.keys(Se).sort(),Te=Ie.reduce((Re,Ct)=>Re+Se[Ct].length,0),nt=le.has(`so_${_e}`);return s.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 flex items-center justify-between cursor-pointer hover:bg-blue-100",onClick:()=>Ss(`so_${_e}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-bold text-blue-800",children:_e}),s.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:[Te,""]})]}),nt?s.jsx(hr,{className:"w-4 h-4 text-blue-600"}):s.jsx(Pr,{className:"w-4 h-4 text-blue-600"})]}),!nt&&Ie.map(Re=>{const Ct=Se[Re],Ke=le.has(`so_${_e}_mid_${Re}`),Et=Ct.filter(ht=>!(ht._category==="OWNED"&&ht._hasReturnRequest)),Rt=Et.filter(ht=>ht.CHK).length,He=Et.length>0&&Rt===Et.length;return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>Ss(`so_${_e}_mid_${Re}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:He,onClick:ht=>ht.stopPropagation(),onChange:ht=>vs(_e,Re,ht.target.checked),className:"rounded w-4 h-4",disabled:Et.length===0}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:Re}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[Ct.length," ",Rt>0&&`(${Rt})`]})]}),Ke?s.jsx(hr,{className:"w-3 h-3 text-gray-500"}):s.jsx(Pr,{className:"w-3 h-3 text-gray-500"})]}),!Ke&&s.jsx("div",{className:"space-y-2",children:Ct.map((ht,Pt)=>s.jsxs("div",{onClick:()=>{ht._category==="OWNED"&&ht._hasReturnRequest||ye(ht.EQT_NO,!ht.CHK)},className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${ht.CHK?"bg-blue-50 border-blue-400":ht._category==="OWNED"?"bg-green-50/50 border-green-200 hover:border-green-300":ht._category==="RETURN_REQUESTED"?"bg-amber-50/50 border-amber-200 hover:border-amber-300":ht._category==="INSPECTION_WAITING"?"bg-purple-50/50 border-purple-200 hover:border-purple-300":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:ht.CHK||!1,disabled:ht._category==="OWNED"&&ht._hasReturnRequest,onChange:Bt=>{Bt.stopPropagation(),ye(ht.EQT_NO,Bt.target.checked)},className:`w-5 h-5 rounded focus:ring-blue-500 mt-0.5 ${ht._category==="OWNED"&&ht._hasReturnRequest?"text-gray-300 cursor-not-allowed":"text-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 truncate",children:ht.EQT_CL_NM||ht.ITEM_NM||"-"}),s.jsx("div",{className:"flex-shrink-0 ml-2",children:ht._hasReturnRequest||ht._category==="RETURN_REQUESTED"?s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:""}):s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:""})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),ht.EQT_SERNO||"-"]}),s.jsxs("div",{className:"flex-shrink-0 ml-2",children:[ht.EQT_USE_ARR_YN==="Y"&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:""}),ht.EQT_USE_ARR_YN==="A"&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:""}),ht.EQT_USE_ARR_YN==="N"&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:""}),!ht.EQT_USE_ARR_YN&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:"N/A"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),Ue(ht.MAC_ADDRESS)]}),s.jsx("span",{className:"text-sm text-gray-600",children:Nq(ht.EQT_USE_END_DT||ht.USE_END_DT||"")})]})]})]}),ee==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:ht.ITEM_MODEL||ht.MODEL_NM||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:ht.SO_NM||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ht.EQT_STAT_NM||ht.EQT_STAT_CD_NM||PT(ht.EQT_STAT_CD||"")||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:ht.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ht.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ht.EQT_LOC_NM||ht.EQT_LOC_TP_NM||AT(ht.EQT_LOC_TP_CD||"")||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:ht.OLD_EQT_LOC_NM||"-"})]})]})]},ht.EQT_NO||Pt))})]},Re)})]},_e)})}),!1]}),A.length===0&&!$&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"     "})]})}),s.jsx("div",{className:"h-20"}),s.jsx("div",{className:"fixed bottom-[56px] left-0 right-0 p-3 z-40",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsxs("div",{className:"flex gap-2",children:[ss>0&&s.jsxs("button",{onClick:ue,disabled:Ve===0,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation ${Ve>0?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:[" ",Ve>0&&`(${Ve})`]}),ls>0&&s.jsxs("button",{onClick:()=>Oe("CANCEL"),disabled:Vt===0,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation ${Vt>0?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:[" ",Vt>0&&`(${Vt})`]}),ds>0&&s.jsx("button",{onClick:Le,disabled:ke===0||vt,className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation ${ke>0&&!vt?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:vt?"...":` ${ke>0?`(${ke})`:""}`})]})}),s.jsx(Ra,{isOpen:G,onClose:()=>{U(!1),E([])},title:" ",size:"md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[I.length,"  .   ."]}),s.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg divide-y divide-gray-100",children:I.map((_e,Se)=>s.jsx("button",{onClick:()=>$e(_e),className:"w-full p-3 text-left hover:bg-blue-50 transition-colors active:bg-blue-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:_e.EQT_CL_NM||_e.ITEM_NM||""}),s.jsx("div",{className:"text-sm text-gray-600 font-mono",children:_e.EQT_SERNO}),s.jsxs("div",{className:"text-xs text-gray-500",children:[_e.SO_NM," | ",Ue(_e.MAC_ADDRESS)]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${_e.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":_e.EQT_USE_ARR_YN==="A"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:_e.EQT_USE_ARR_YN==="Y"?"":_e.EQT_USE_ARR_YN==="A"?"":"N/A"}),s.jsx("span",{className:"text-xs text-gray-400",children:_e.ITEM_MID_NM})]})]})},Se))}),s.jsx("button",{onClick:()=>{U(!1),E([])},className:"w-full py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm transition-all",children:""})]})}),s.jsx(Ra,{isOpen:L,onClose:()=>re(!1),title:"-",size:"md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:((rt=A.filter(_e=>_e.CHK)[0])==null?void 0:rt.SO_NM)||((Wt=se.find(_e=>_e.SO_ID===i))==null?void 0:Wt.SO_NM)||((_t=se.find(_e=>_e.SO_ID===(r==null?void 0:r.soId)))==null?void 0:_t.SO_NM)||(r==null?void 0:r.soId)||"-",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:me,onChange:_e=>{Ce(_e.target.value),_e.target.value!=="03"&&Ge("")},className:`w-full px-2 py-1.5 text-sm border rounded ${me?"border-gray-300":"border-red-300"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"01",children:"  "}),s.jsx("option",{value:"02",children:"  (  )"}),s.jsx("option",{value:"03",children:""})]})]}),me==="03"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsxs("span",{className:"text-gray-400 ml-1",children:["(",ge.length,"/100 bytes)"]})]}),s.jsx("textarea",{value:ge,onChange:_e=>{const Se=_e.target.value;new Blob([Se]).size<=100&&Ge(Se)},className:`w-full px-2 py-1.5 text-sm border rounded h-20 resize-none ${ge.trim()?"border-gray-300":"border-red-300"}`,placeholder:"   ( 100)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-left",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:"S/N"}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:""})]})}),s.jsx("tbody",{children:A.filter(_e=>_e.CHK).map((_e,Se)=>s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"px-2 py-1.5",children:_e.ITEM_NM||_e.EQT_CL_NM}),s.jsx("td",{className:"px-2 py-1.5 font-mono text-[10px]",children:_e.EQT_SERNO}),s.jsx("td",{className:"px-2 py-1.5",children:s.jsx("span",{className:`px-1 py-0.5 rounded text-[10px] ${_e.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":_e.EQT_USE_ARR_YN==="A"?"bg-amber-100 text-amber-700":_e.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:_e.EQT_STAT_NM||(_e.EQT_USE_ARR_YN==="Y"?"":_e.EQT_USE_ARR_YN==="A"?"":_e.EQT_USE_ARR_YN==="N"?"":"N/A")})})]},Se))})]})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{re(!1),Ce(""),Ge("")},className:"flex-1 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""}),s.jsx("button",{onClick:()=>Oe("RETURN"),className:"flex-1 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""})]})]})}),de&&s.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[250]",onClick:()=>Q(!1),children:s.jsxs("div",{className:"bg-white rounded-xl p-5 mx-4 shadow-2xl max-w-sm animate-pulse",onClick:_e=>_e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-800",children:" "}),s.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:me==="03"?"  .":"   ."})]})]}),s.jsx("button",{onClick:()=>Q(!1),className:"w-full py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold text-sm transition-all",children:""})]})}),fe&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200]",children:s.jsx("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-semibold text-gray-800 mb-4",children:[j.action,"  ..."]}),s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:j.total>0?`${j.current/j.total*100}%`:"0%"}})})}),s.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[j.current," / ",j.total]}),s.jsx("div",{className:"text-xs text-gray-400 truncate",children:j.item&&` : ${j.item}`})]})})}),s.jsx(Ra,{isOpen:J,onClose:()=>{q(!1),ce(null)},title:"-",size:"md",children:V&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:V.SO_NM||((qt=se.find(_e=>_e.SO_ID===V.SO_ID))==null?void 0:qt.SO_NM)||((Ot=se.find(_e=>_e.SO_ID===(r==null?void 0:r.soId)))==null?void 0:Ot.SO_NM)||"-",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("textarea",{value:te,onChange:_e=>he(_e.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded h-20 resize-none",placeholder:"  "})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1.5 text-left",children:""}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:"S/N"}),s.jsx("th",{className:"px-2 py-1.5 text-left",children:""})]})}),s.jsx("tbody",{children:s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"px-2 py-1.5",children:V.ITEM_NM||V.EQT_CL_NM}),s.jsx("td",{className:"px-2 py-1.5 font-mono text-[10px]",children:V.EQT_SERNO}),s.jsx("td",{className:"px-2 py-1.5",children:s.jsx("span",{className:`px-1 py-0.5 rounded text-[10px] ${V.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":V.EQT_USE_ARR_YN==="A"?"bg-amber-100 text-amber-700":V.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:V.EQT_STAT_NM||(V.EQT_USE_ARR_YN==="Y"?"":V.EQT_USE_ARR_YN==="A"?"":V.EQT_USE_ARR_YN==="N"?"":"N/A")})})]})})]})})]}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-xs text-red-600",children:"       ."})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{q(!1),ce(null)},className:"flex-1 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""}),s.jsx("button",{onClick:Ze,className:"flex-1 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:""})]})]})}),mt&&at.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-blue-600",children:[s.jsx("h3",{className:"font-semibold text-white text-lg",children:" "}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[" : ",at.length,""]})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-sm text-amber-800 font-medium mb-1",children:"  "}),s.jsx("p",{className:"text-xs text-amber-600",children:"         ."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),s.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:at.map((_e,Se)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg text-xs",children:[s.jsx("span",{className:"font-mono text-gray-800",children:_e.EQT_SERNO}),s.jsx("span",{className:"text-gray-600",children:_e.ITEM_NM||_e.ITEM_MID_NM})]},Se))})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex gap-2",children:[s.jsx("button",{onClick:()=>{Ye(!1),Fe([])},className:"flex-1 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:""}),s.jsx("button",{onClick:gt,disabled:vt,className:`flex-1 py-2.5 rounded-lg font-medium transition-colors ${vt?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:vt?"...":""})]})]})}),lt&&ot&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${ot.failed.length===0?"bg-gradient-to-r from-green-500 to-green-600":ot.success.length===0?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-amber-500 to-amber-600"}`,children:[s.jsx("h3",{className:"font-semibold text-white text-lg",children:ot.failed.length===0?"  ":ot.success.length===0?" ":"  ( )"}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[": ",ot.success.length," / : ",ot.failed.length,""]})]}),s.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto space-y-4",children:[ot.success.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:[" (",ot.success.length,")"]}),s.jsx("div",{className:"space-y-1",children:ot.success.map((_e,Se)=>s.jsxs("div",{className:"p-2 bg-green-50 rounded-lg text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-green-800",children:_e.EQT_SERNO}),s.jsx("span",{className:"text-green-600",children:_e.ITEM_NM})]}),_e.note&&s.jsxs("div",{className:"text-amber-600 mt-1 text-[10px]",children:[" ",_e.note]})]},Se))})]}),ot.failed.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-red-700 mb-2",children:[" (",ot.failed.length,")"]}),s.jsx("div",{className:"space-y-1",children:ot.failed.map((_e,Se)=>s.jsxs("div",{className:"p-2 bg-red-50 rounded-lg text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-red-800",children:_e.EQT_SERNO}),s.jsx("span",{className:"text-red-600",children:_e.ITEM_NM})]}),s.jsx("div",{className:"text-red-500 mt-1",children:_e.error})]},Se))})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{pt(!1),Be(null)},className:"w-full py-2.5 bg-gray-800 hover:bg-gray-900 text-white rounded-lg font-medium transition-colors",children:""})})]})}),tt&&Mt.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-amber-500 to-amber-600",children:[s.jsxs("h3",{className:"font-semibold text-white text-lg flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"  "]}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[Mt.length,"     "]})]}),s.jsxs("div",{className:"p-4 max-h-60 overflow-y-auto",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"     .    ."}),s.jsx("div",{className:"space-y-2",children:Mt.map((_e,Se)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-amber-50 rounded-lg text-xs",children:[s.jsx("span",{className:"font-mono text-amber-800",children:_e.EQT_SERNO}),s.jsx("span",{className:"text-amber-600",children:_e.ITEM_NM||_e.ITEM_MID_NM||""})]},Se))})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{ct(!1),dt([])},className:"w-full py-2.5 bg-orange-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors",children:""})})]})}),s.jsx(Em,{isOpen:N,onClose:()=>v(!1),onScan:jt})]})},fp=[{code:"",name:""},{code:"02",name:""},{code:"03",name:"CVT"},{code:"04",name:"STB"},{code:"05",name:"Smart card"},{code:"06",name:""},{code:"07",name:"Cable Card"},{code:"08",name:"IP"},{code:"10",name:"(AP)"},{code:"23",name:"OTT_STB()"}],kT=t=>{var n;if(!t)return"-";const e=t.replace(/[^A-Fa-f0-9]/g,"");return e.length!==12?t:((n=e.match(/.{2}/g))==null?void 0:n.join(":"))||t},Rq=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",Tq=({onBack:t,showToast:e})=>{const[n,r]=b.useState({userId:"",userName:"",soId:"",crrId:""}),[i,a]=b.useState({WRKR_ID:"",WRKR_NM:"",SO_ID:"",CRR_ID:""}),[o,c]=b.useState([]),[u,h]=b.useState([]),[m,_]=b.useState([]),[p,g]=b.useState(!1),[C,y]=b.useState(!1),N=b.useRef(!1),v=b.useRef(0),[P,w]=b.useState(null),[M,k]=b.useState([]),[B,G]=b.useState(!1),[U,I]=b.useState(!1),[E,A]=b.useState(!1),[Y,se]=b.useState([]),[X,z]=b.useState(""),[$,F]=b.useState(null),[L,re]=b.useState(!1),[fe,T]=b.useState(new Set),[j,K]=b.useState("simple"),[J,q]=b.useState(!1),[V,ce]=b.useState(""),[me,Ce]=b.useState(!1),[ge,Ge]=b.useState(null),[te,he]=b.useState([]),[de,Q]=b.useState(!1),[ee,Z]=b.useState(""),[le,xe]=b.useState(""),[be,ne]=b.useState([]),[ie,pe]=b.useState(""),[ze,xt]=b.useState(!1),[st,St]=b.useState(""),[ot,Be]=b.useState(""),[lt,pt]=b.useState([]),[mt,Ye]=b.useState(!1),[at,Fe]=b.useState(!1),[tt,ct]=b.useState(null),[Mt,dt]=b.useState("");b.useEffect(()=>{Je()},[]),b.useEffect(()=>{if(!st){pt([]),Be("");return}(async()=>{try{console.log("[]  API :",st);const ft=await PM({ITEM_MID_CD:st});console.log("[]  API :",ft);const Wt=(Array.isArray(ft)?ft:(ft==null?void 0:ft.data)||[]).map(_t=>({code:_t.COMMON_CD||_t.EQT_CL_CD||"",name:_t.COMMON_CD_NM||_t.EQT_CL_NM||""})).filter(_t=>_t.code&&_t.name).sort((_t,qt)=>_t.name.localeCompare(qt.name));pt(Wt),console.log("[]   :",Wt.length,"",Wt)}catch(ft){console.error("[]  API :",ft);const rt=new Map;o.forEach(_t=>{_t.ITEM_MID_CD===st&&_t.EQT_CL_CD&&_t.EQT_CL_NM&&rt.set(_t.EQT_CL_CD,_t.EQT_CL_NM)});const Wt=Array.from(rt.entries()).map(([_t,qt])=>({code:_t,name:qt})).sort((_t,qt)=>_t.name.localeCompare(qt.name));pt(Wt),console.log("[]  fallback:",Wt.length,"")}})(),Be("")},[st]);const Je=async()=>{try{const Ae=localStorage.getItem("userInfo");if(Ae){const ft=JSON.parse(Ae),rt=ft.authSoList&&Array.isArray(ft.authSoList)?ft.authSoList:[];ne(rt);let Wt=ft.soId||"";!Wt&&rt.length>0&&(Wt=rt[0].SO_ID||""),r({userId:ft.userId||"",userName:ft.userName||"",soId:Wt,crrId:ft.crrId||""}),rt.length>0&&pe(rt[0].SO_ID||"")}}catch(Ae){console.warn("   :",Ae)}await De()},De=async()=>{const Ae=localStorage.getItem("userInfo"),ft=localStorage.getItem("branchList");if(Ae)try{const rt=JSON.parse(Ae);let Wt=[];if(rt.authSoList&&Array.isArray(rt.authSoList)&&rt.authSoList.length>0)Wt=rt.authSoList;else if(ft)try{const _t=JSON.parse(ft);Array.isArray(_t)&&_t.length>0&&(Wt=_t)}catch{}Wt.length===0&&rt.soId&&(Wt=[{SO_ID:rt.soId,SO_NM:rt.soNm||`(${rt.soId})`}]),Wt.length>0&&(h(Wt),a(_t=>({..._t,SO_ID:Wt[0].SO_ID}))),rt.crrId&&(_([{CRR_ID:rt.crrId,CORP_NM:rt.crrNm||rt.corpNm||`(${rt.crrId})`}]),a(_t=>({..._t,CRR_ID:rt.crrId})))}catch(rt){console.warn("   :",rt)}},$e=async Ae=>{const ft=Ae.toUpperCase().replace(/[:-]/g,"");if(M.includes(ft)){e==null||e("  .","warning");return}k(rt=>[...new Set([ft,...rt])]),G(!0),A(!1)},Ne=async()=>{if(M.length===0){e==null||e("  .","warning");return}w(null),g(!0);try{const Ae=M[0],ft=await Ei("EquipmentMovement","getEquipmentHistoryInfo",()=>am({EQT_SERNO:Ae}),{EQT_SERNO:Ae});if(ft&&ft.length>0){const rt=ft[0];let Wt=rt.WRKR_ID||rt.OWNER_WRKR_ID;if(!Wt&&rt.EQT_LOC_NM){const Ot=rt.EQT_LOC_NM.match(/\(([A-Z]?\d+)\)$/);Ot&&(Wt=Ot[1])}const _t=rt.WRKR_NM||rt.OWNER_WRKR_NM||"",qt=rt.CRR_ID||"";Wt?(a(Ot=>({...Ot,WRKR_ID:Wt,WRKR_NM:_t,CRR_ID:qt})),await Ue(Wt,_t,qt,Ae),q(!0)):w(`(${Ae})   .`)}else w(`(${Ae})   .`)}catch(Ae){console.error("  :",Ae),w("  .")}finally{g(!1)}},ye=async()=>{const Ae=X.trim().toUpperCase().replace(/[:-]/g,"");if(!Ae){e==null||e("(S/N) .","warning");return}w(null),g(!0),G(!1),console.log("========================================"),console.log("[ ] S/N  :",Ae),console.log("[ ]  :",n.userId),console.log("[ ]   - 1:",st||"",", 2:",ot||"");try{const ft=await Ei("EquipmentMovement","getEquipmentHistoryInfo",()=>am({EQT_SERNO:Ae}),{EQT_SERNO:Ae});console.log("[ ] getEquipmentHistoryInfo :",JSON.stringify(ft).substring(0,500));const rt=Array.isArray(ft)?ft[0]:ft;if(console.log("[ ]   :",rt?"OK":"NULL"),rt&&rt.EQT_SERNO){const Wt=rt.EQT_LOC_TP_CD||"",_t=rt.EQT_LOC_TP_CD_NM||rt.EQT_LOC_TP_NM||"";if(console.log("[ ] EQT_LOC_TP_CD:",Wt||""),console.log("[ ] EQT_LOC_TP_CD_NM:",_t||""),console.log("[ ] EQT_LOC_NM:",rt.EQT_LOC_NM||""),console.log("[ ] WRKR_ID  :",rt.WRKR_ID||""),console.log("[ ] OWNER_WRKR_ID  :",rt.OWNER_WRKR_ID||""),Wt==="4"){ct({EQT_SERNO:rt.EQT_SERNO,EQT_NO:rt.EQT_NO||"",ITEM_NM:rt.ITEM_NM||rt.EQT_CL_NM||"",ITEM_MID_NM:rt.ITEM_MID_NM||"",SO_NM:rt.SO_NM||"",EQT_LOC_NM:rt.EQT_LOC_NM||"",EQT_LOC_TP_NM:"",MAC_ADDRESS:rt.MAC_ADDRESS||"",WRKR_NM:rt.WRKR_NM||rt.OWNER_WRKR_NM||"-"}),Fe(!0),g(!1),z("");return}let qt=rt.WRKR_ID||rt.OWNER_WRKR_ID;if(!qt&&rt.EQT_LOC_NM){const Se=rt.EQT_LOC_NM.match(/\(([A-Z]?\d+)\)$/);Se&&(qt=Se[1]),console.log("[ ]   :",Se?Se[1]:" ")}const Ot=rt.WRKR_NM||rt.OWNER_WRKR_NM||"",_e=rt.CRR_ID||"";if(console.log("[ ]  ownerWrkrId:",qt||""),console.log("[ ] ownerWrkrNm:",Ot),qt)console.log("[ ]  WRKR_ID    searchEquipmentByWorker "),k([Ae]),G(!1),a(Se=>({...Se,WRKR_ID:qt,WRKR_NM:Ot,CRR_ID:_e})),await Ue(qt,Ot,_e,Ae),q(!0);else{console.log("[ ]  WRKR_ID     "),console.log("[]   :",Ae,":",_t);try{const Se=await wA({EQT_SERNO:Ae}),Ie=Array.isArray(Se)?Se[0]:Se,Te=(Ie==null?void 0:Ie.EQT_LOC_TP_NM)||_t||"",nt=Te===""?"":Te;ct({EQT_SERNO:Ae,EQT_NO:(Ie==null?void 0:Ie.EQT_NO)||rt.EQT_NO||"",ITEM_NM:(Ie==null?void 0:Ie.ITEM_NM)||rt.ITEM_NM||rt.EQT_CL_NM||"",ITEM_MID_NM:(Ie==null?void 0:Ie.ITEM_MID_NM)||rt.ITEM_MID_NM||"",SO_NM:(Ie==null?void 0:Ie.SO_NM)||rt.SO_NM||"",EQT_LOC_NM:(Ie==null?void 0:Ie.EQT_LOC_NM)||rt.EQT_LOC_NM||"",EQT_LOC_TP_NM:nt,MAC_ADDRESS:(Ie==null?void 0:Ie.MAC_ADDRESS)||rt.MAC_ADDRESS||"",WRKR_NM:Ot}),Fe(!0)}catch{const Ie=_t===""?"":_t||" ";ct({EQT_SERNO:Ae,EQT_NO:rt.EQT_NO||"",ITEM_NM:rt.ITEM_NM||rt.EQT_CL_NM||"",ITEM_MID_NM:rt.ITEM_MID_NM||"",SO_NM:rt.SO_NM||"",EQT_LOC_NM:rt.EQT_LOC_NM||"",EQT_LOC_TP_NM:Ie,MAC_ADDRESS:rt.MAC_ADDRESS||"",WRKR_NM:Ot}),Fe(!0)}}}else dt(`S/N: ${Ae}`),q(!0),w(`(${Ae})   .`)}catch(ft){console.error("  :",ft),w("  .")}finally{g(!1),z("")}},Ue=async(Ae,ft,rt,Wt)=>{var _t,qt,Ot,_e;g(!0);try{const Se={WRKR_ID:Ae,CRR_ID:"",SO_ID:""};if(Wt){const Te=M.length>0?[...new Set([Wt,...M])]:[Wt];Se.EQT_SERNO=Te.map(nt=>`'${nt}'`).join(",")}else M.length>0&&(Se.EQT_SERNO=M.map(Te=>`'${Te}'`).join(","));Wt||(st&&(Se.ITEM_MID_CD=st),ot&&(Se.EQT_CL_CD=ot));const Ie=await Ei("EquipmentMovement","getWrkrHaveEqtList",()=>Og(Se),Se);if(console.log("[ ] getWrkrHaveEqtList  :",Array.isArray(Ie)?Ie.length:"NOT_ARRAY"),Array.isArray(Ie)&&Ie.length>0){let Te=Ie;Wt?console.log("[ ] S/N   -   "):(st&&(Te=Ie.filter(Re=>Re.ITEM_MID_CD===st),console.log("[ ] 1   :",Te.length," (:",st,")")),ot&&(Te=Te.filter(Re=>Re.EQT_CL_CD===ot),console.log("[ ] 2   :",Te.length," (:",ot,")")));let nt=Te.map(Re=>({CHK:!1,EQT_NO:Re.EQT_NO||"",ITEM_MAX_NM:Re.ITEM_MAX_NM||"",ITEM_MID_CD:Re.ITEM_MID_CD||"",ITEM_MID_NM:Re.ITEM_MID_NM||"",EQT_CL_CD:Re.EQT_CL_CD||"",EQT_CL_NM:Re.EQT_CL_NM||"",ITEM_NM:Re.ITEM_NM||"",ITEM_SPEC:Re.ITEM_SPEC||"",MST_SO_ID:Re.MST_SO_ID||"",MST_SO_NM:Re.MST_SO_NM||"",SO_ID:Re.SO_ID||"",SO_NM:Re.SO_NM||"",EQT_SERNO:Re.EQT_SERNO||"",MAC_ADDRESS:Re.MAC_ADDRESS||"",TA_MAC_ADDRESS:Re.TA_MAC_ADDRESS||"",WRKR_NM:Re.WRKR_NM||ft,CRR_NM:Re.CRR_NM||"",EQT_STAT_CD_NM:Re.EQT_STAT_CD_NM||"",CHG_KND_NM:Re.CHG_KND_NM||"",EQT_LOC_NM:Re.EQT_LOC_NM||"",EQT_LOC_TP_NM:Re.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:Re.OLD_EQT_LOC_NM||"",OLD_EQT_LOC_TP_NM:Re.OLD_EQT_LOC_TP_NM||"",ITEM_MODEL:Re.ITEM_MODEL||"",MODEL_NM:Re.MODEL_NM||"",EQT_USE_ARR_YN:Re.EQT_USE_ARR_YN||"",EQT_USE_END_DT:Re.EQT_USE_END_DT||"",isScanned:Wt&&Re.EQT_SERNO===Wt||M.includes(Re.EQT_SERNO),isTransferable:!0}));if(nt.sort((Re,Ct)=>Re.isScanned&&!Ct.isScanned?-1:!Re.isScanned&&Ct.isScanned?1:0),nt=nt.map(Re=>({...Re,CHK:Re.isScanned||!1})),nt.length>0)console.log("[ ]   :",nt.length," "),c(nt);else{console.log("[ ]     0 -    "),c([]);const Re=st?(_t=fp.find(Et=>Et.code===st))==null?void 0:_t.name:"",Ct=ot?(qt=lt.find(Et=>Et.code===ot))==null?void 0:qt.name:"";let Ke="";Re&&(Ke+=`, 1: ${Re}`),Ct&&(Ke+=`, 2: ${Ct}`),dt(`: ${ft}${Ke}`)}}else{console.log("[ ]  API      "),c([]);const Te=st?(Ot=fp.find(Ct=>Ct.code===st))==null?void 0:Ot.name:"",nt=ot?(_e=lt.find(Ct=>Ct.code===ot))==null?void 0:_e.name:"";let Re="";Te&&(Re+=`, 1: ${Te}`),nt&&(Re+=`, 2: ${nt}`),dt(`: ${ft}${Re}`)}}catch(Se){console.error("  :",Se),w("  ."),c([])}finally{g(!1)}},ue=async()=>{if(w(null),!i.WRKR_ID){e==null||e(" .","warning");return}await Ue(i.WRKR_ID,i.WRKR_NM,i.CRR_ID),q(!0)},Oe=()=>{ce(""),se([]),I(!0)},Ze=async()=>{const Ae=V.trim();if(!Ae){e==null||e("  ID .","warning");return}const rt=/[-]/.test(Ae);if(rt&&Ae.length<2){e==null||e(" 2  .","warning");return}Ce(!0);try{if(rt){console.log("[]  :",Ae);let Wt=await _p({USR_NM:Ae});if(console.log("[]   :",Wt.length,""),Wt.length===0){const _t=localStorage.getItem("user")||localStorage.getItem("userInfo");if(_t)try{const qt=JSON.parse(_t),Ot=qt.AUTH_SO_List||qt.authSoList||[];if(Ot.length>0){console.log("[]     -  SO_ID  :",Ot.map(Re=>Re.SO_ID).join(", "));const _e=Ot.map(Re=>_p({SO_ID:Re.SO_ID}).catch(()=>[])),Se=await Promise.all(_e),Ie=new Map;Se.forEach(Re=>{Re.forEach(Ct=>{Ct.USR_ID&&!Ie.has(Ct.USR_ID)&&Ie.set(Ct.USR_ID,Ct)})});const Te=Array.from(Ie.values());console.log("[]  :",Te.length," ()");const nt=Ae.toLowerCase();Wt=Te.filter(Re=>(Re.USR_NM||Re.USR_NAME_EN||"").toLowerCase().includes(nt)),console.log("[]   :",Wt.length,"")}}catch(qt){console.error("[] user  :",qt)}}if(Wt.length>0){const _t=Wt.slice(0,30).map(qt=>({USR_ID:qt.USR_ID||qt.WRKR_ID||"",USR_NM:qt.USR_NM||qt.USR_NAME_EN||qt.WRKR_NM||"-",CRR_ID:qt.CRR_ID||"",SO_ID:qt.SO_ID||"",SO_NM:qt.SO_NM||"",CORP_NM:qt.CORP_NM||""}));se(_t)}else se([])}else{console.log("[] ID :",Ae.toUpperCase());const Wt=await _p({USR_ID:Ae.toUpperCase()});if(Wt&&Wt.length>0){const _t=Wt[0];se([{USR_ID:_t.USR_ID||Ae.toUpperCase(),USR_NM:_t.USR_NM||_t.WRKR_NM||Ae.toUpperCase(),CRR_ID:_t.CRR_ID||"",SO_ID:_t.SO_ID||"",SO_NM:_t.SO_NM||"",CORP_NM:_t.CORP_NM||""}])}else se([])}}catch(Wt){console.error("  :",Wt),e==null||e("  .","error"),se([])}finally{Ce(!1)}},Le=(Ae,ft)=>{const rt=[...te];rt[Ae].CHK=ft,he(rt)},vt=Ae=>{he(te.map(ft=>!ee||(ft.ITEM_MID_NM||ft.EQT_CL_NM||"")===ee?{...ft,CHK:Ae}:ft))},je=()=>{const Ae=te.filter(ft=>ft.CHK);if(Ae.length===0){e==null||e("  .","warning");return}ge&&a(ft=>({...ft,WRKR_ID:ge.USR_ID,WRKR_NM:ge.USR_NM,CRR_ID:ge.CRR_ID||""})),c(Ae),q(!0),Ge(null),he([]),se([]),ce(""),I(!1)},ut=()=>{Ge(null),he([])},gt=Ae=>{a(ft=>({...ft,WRKR_ID:Ae.USR_ID,WRKR_NM:Ae.USR_NM,CRR_ID:Ae.CRR_ID||""})),I(!1),c([]),k([]),q(!1)},jt=()=>{q(!1),c([]),k([]),a(Ae=>({...Ae,WRKR_ID:"",WRKR_NM:""})),z(""),setSelectionMode("none")},Ve=async()=>{if(N.current){console.log("[] transferLockRef  -   ");return}const Ae=Date.now();if(Ae-v.current<3e3){console.log("[]   - 3   ");return}if(p||C){console.log("[] isLoading/isTransferring  -   ");return}N.current=!0,v.current=Ae;const ft=o.filter(qt=>qt.CHK);if(ft.length===0){N.current=!1,e==null||e("  .","warning");return}if(!n.userId){N.current=!1,e==null||e("  .","error");return}if(i.WRKR_ID===n.userId){N.current=!1,e==null||e("    .","warning");return}g(!0),y(!0);const rt={success:[],failed:[]},_t=`TRANSFER_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log(""),console.log(""),console.log("                                                "),console.log(""),console.log(` DEBUG_ID: ${_t}`),console.log(` : ${new Date().toISOString()}`),console.log(` : ${ft.length}`),console.log(` : ${i.WRKR_ID} (${i.WRKR_NM})`),console.log(` : ${n.userId} (${n.userName})`),console.log(`  CRR_ID: ${n.crrId}`),console.log(` SO_ID: ${ie||"( SO_ID )"}`),console.log(` AUTH_SO_LIST: [${be.map(qt=>qt.SO_ID).join(", ")}]`),console.log(""),console.log(""),console.log("[DEBUG]   :"),ft.forEach((qt,Ot)=>{console.log(`  [${Ot+1}] EQT_NO=${qt.EQT_NO}, EQT_SERNO=${qt.EQT_SERNO}, SO_ID=${qt.SO_ID}, SO_NM=${qt.SO_NM||"-"}`)}),console.log("");try{for(let qt=0;qt<ft.length;qt++){const Ot=ft[qt],_e=Date.now();console.log(""),console.log(""),console.log(`  [${qt+1}/${ft.length}]    `),console.log(` EQT_SERNO: ${Ot.EQT_SERNO}`),console.log(` EQT_NO: ${Ot.EQT_NO}`),console.log(`  SO_ID: ${Ot.SO_ID}`),console.log("");try{const Se={SO_ID:Ot.SO_ID,EQT_NO:Ot.EQT_NO,EQT_SERNO:Ot.EQT_SERNO,CHG_UID:n.userId,MV_SO_ID:ie||Ot.SO_ID,MV_CRR_ID:n.crrId,MV_WRKR_ID:n.userId};console.log("[DEBUG] API  :",JSON.stringify(Se,null,2)),console.log(`[DEBUG] API  : ${new Date().toISOString()}`);const Ie=await bA(Se),Te=Date.now()-_e;console.log(`[DEBUG] API  : ${new Date().toISOString()} (: ${Te}ms)`),console.log("[DEBUG] API :",JSON.stringify(Ie,null,2)),rt.success.push({EQT_SERNO:Ot.EQT_SERNO,EQT_NO:Ot.EQT_NO,ITEM_NM:Ot.ITEM_NM||Ot.EQT_CL_NM}),AA({EQT_NO:Ot.EQT_NO,EQT_SERNO:Ot.EQT_SERNO,ITEM_NM:Ot.ITEM_NM||Ot.EQT_CL_NM,ITEM_MID_NM:Ot.ITEM_MID_NM,ITEM_MAX_NM:Ot.ITEM_MAX_NM,EQT_CL_NM:Ot.EQT_CL_NM,SO_ID:Ot.SO_ID||"",SO_NM:Ot.SO_NM||Ot.MST_SO_NM||"",FROM_WRKR_ID:i.WRKR_ID,FROM_WRKR_NM:i.WRKR_NM,TO_WRKR_ID:n.userId})}catch(Se){console.error("  :",Ot.EQT_SERNO,Se),rt.failed.push({EQT_SERNO:Ot.EQT_SERNO,EQT_NO:Ot.EQT_NO,ITEM_NM:Ot.ITEM_NM||Ot.EQT_CL_NM,error:(Se==null?void 0:Se.message)||"   "})}}if(F(rt),re(!0),rt.success.length>0){const qt=new Set(rt.success.map(Ot=>Ot.EQT_NO));c(Ot=>Ot.filter(_e=>!qt.has(_e.EQT_NO))),k(Ot=>Ot.filter(_e=>!rt.success.some(Se=>Se.EQT_SERNO===_e)))}}catch(qt){console.error("  :",qt),e==null||e("  .","error")}finally{g(!1),y(!1),setTimeout(()=>{N.current=!1},1e3)}},Vt=Ae=>{c(o.map(ft=>({...ft,CHK:Ae})))},ke=(Ae,ft)=>{const rt=[...o];rt[Ae].CHK=ft,c(rt)},ss=(Ae,ft)=>{c(o.map(rt=>(rt.SO_NM||rt.SO_ID||"")===Ae?{...rt,CHK:ft}:rt))},ls=(Ae,ft,rt)=>{c(o.map(Wt=>{const _t=Wt.SO_NM||Wt.SO_ID||"",qt=Wt.ITEM_MID_NM||"";return _t===Ae&&qt===ft?{...Wt,CHK:rt}:Wt}))},ds=Ae=>{T(ft=>{const rt=new Set(Array.from(ft));return rt.has(Ae)?rt.delete(Ae):rt.add(Ae),rt})},vs=o.reduce((Ae,ft,rt)=>{var Ie,Te,nt,Re;let Wt="";const _t=(Ie=ft.SO_NM)==null?void 0:Ie.trim(),qt=(Te=ft.MST_SO_NM)==null?void 0:Te.trim(),Ot=(nt=ft.SO_ID)==null?void 0:nt.trim(),_e=(Re=ft.MST_SO_ID)==null?void 0:Re.trim();_t&&_t!=="100"?Wt=_t:qt&&qt!=="100"?Wt=qt:Ot==="100"||_e==="100"||_t==="100"||qt==="100"?Wt="":Ot&&(Wt=Ot);const Se=ft.ITEM_MID_NM||"";return Ae[Wt]||(Ae[Wt]={}),Ae[Wt][Se]||(Ae[Wt][Se]=[]),Ae[Wt][Se].push({...ft,_globalIdx:rt}),Ae},{});Object.keys(vs).forEach(Ae=>{Object.keys(vs[Ae]).forEach(ft=>{vs[Ae][ft].sort((rt,Wt)=>{const _t=rt.EQT_CL_NM||rt.ITEM_NM||"",qt=Wt.EQT_CL_NM||Wt.ITEM_NM||"";return _t.localeCompare(qt)})})});const Ss=Object.keys(vs).sort();return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-1 cursor-pointer",onClick:Oe,children:[s.jsx("input",{type:"text",value:i.WRKR_NM||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer truncate text-center",placeholder:""}),s.jsx("input",{type:"text",value:i.WRKR_ID||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer font-mono text-center",placeholder:"ID"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("select",{value:st,onChange:Ae=>St(Ae.target.value),className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent truncate",children:[s.jsx("option",{value:"",children:""}),fp.filter(Ae=>Ae.code!=="").map(Ae=>s.jsx("option",{value:Ae.code,children:Ae.name},Ae.code))]}),s.jsxs("select",{value:ot,onChange:Ae=>Be(Ae.target.value),disabled:!st||mt||lt.length===0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed truncate",children:[s.jsx("option",{value:"",children:st?mt?"...":lt.length===0?"-":"":"-"}),lt.map(Ae=>s.jsx("option",{value:Ae.code,children:Ae.name},Ae.code))]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:X,onChange:Ae=>z(Ae.target.value.toUpperCase()),onKeyDown:Ae=>Ae.key==="Enter"&&X.trim()&&ye(),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono",placeholder:"S/N  MAC  "}),s.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),M.length>0&&s.jsxs("div",{className:`p-3 border rounded-lg ${B?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:`text-xs font-medium ${B?"text-purple-700":"text-blue-700"}`,children:[B?" ":" "," (",M.length,")"]}),s.jsx("button",{onClick:()=>{k([]),c([])},className:"text-xs text-gray-500 hover:text-gray-700",children:""})]}),s.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:M.map((Ae,ft)=>s.jsxs("div",{className:"flex items-center justify-between text-xs bg-white px-2 py-1 rounded",children:[s.jsx("span",{className:"font-mono text-gray-800",children:Ae}),s.jsx("button",{onClick:()=>{const rt=M.filter(Wt=>Wt!==Ae);k(rt),rt.length===0&&c([])},className:"text-red-400 hover:text-red-600",children:s.jsx(Mi,{className:"w-3 h-3"})})]},ft))})]}),s.jsx("button",{onClick:()=>{var ft,rt;const Ae=[];if(i.WRKR_NM&&Ae.push(`: ${i.WRKR_NM}`),st){const Wt=(ft=fp.find(_t=>_t.code===st))==null?void 0:ft.name;Wt&&Ae.push(`1: ${Wt}`)}if(ot){const Wt=(rt=lt.find(_t=>_t.code===ot))==null?void 0:rt.name;Wt&&Ae.push(`2: ${Wt}`)}X.trim()&&Ae.push(`S/N: ${X.trim()}`),dt(Ae.join(", ")||""),X.trim()?ye():M.length>0?Ne():i.WRKR_ID?ue():e==null||e("   .","warning")},disabled:p||!i.WRKR_ID&&!X.trim()&&M.length===0,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-2.5 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation",children:p?" ...":""})]})}),o.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:jt,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",title:"",children:s.jsx(ki,{className:"w-4 h-4"})}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:Ae=>Vt(Ae.target.checked),checked:o.length>0&&o.every(Ae=>Ae.CHK),className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[o.length," (: ",o.filter(Ae=>Ae.CHK).length,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>K("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${j==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>K("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${j==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:Ss.map(Ae=>{const ft=vs[Ae],rt=Object.keys(ft).sort(),Wt=fe.has(Ae),_t=rt.reduce((Se,Ie)=>Se+ft[Ie].length,0),qt=rt.flatMap(Se=>ft[Se]),Ot=qt.every(Se=>Se.CHK),_e=qt.some(Se=>Se.CHK);return s.jsxs("div",{children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 flex items-center justify-between cursor-pointer hover:bg-blue-100",onClick:()=>ds(Ae),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:Ot,onClick:Se=>Se.stopPropagation(),onChange:Se=>ss(Ae,Se.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-bold text-blue-800",children:Ae}),s.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:[_t," ",_e&&!Ot&&`(${qt.filter(Se=>Se.CHK).length})`]})]}),Wt?s.jsx(hr,{className:"w-4 h-4 text-blue-600"}):s.jsx(Pr,{className:"w-4 h-4 text-blue-600"})]}),!Wt&&rt.map(Se=>{const Ie=ft[Se],Te=`${Ae}-${Se}`,nt=fe.has(Te),Re=Ie.every(Ke=>Ke.CHK),Ct=Ie.some(Ke=>Ke.CHK);return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>ds(Te),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:Re,onClick:Ke=>Ke.stopPropagation(),onChange:Ke=>ls(Ae,Se,Ke.target.checked),className:"rounded w-4 h-4"}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:Se}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[Ie.length," ",Ct&&!Re&&`(${Ie.filter(Ke=>Ke.CHK).length})`]})]}),nt?s.jsx(hr,{className:"w-3 h-3 text-gray-500"}):s.jsx(Pr,{className:"w-3 h-3 text-gray-500"})]}),!nt&&s.jsx("div",{className:"space-y-2",children:Ie.map((Ke,Et)=>{const Rt=Ke._globalIdx;return s.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${Ke.isScanned?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:Ke.CHK||!1,onChange:He=>ke(Rt,He.target.checked),className:"w-5 h-5 rounded focus:ring-blue-500 mt-0.5 text-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-base font-bold truncate text-gray-900",children:Ke.EQT_CL_NM||Ke.ITEM_NM||"-"}),s.jsx("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:Ke.isScanned&&B&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:""})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),Ke.EQT_SERNO||"-"]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${Ke.EQT_USE_ARR_YN==="Y"?"bg-green-100 text-green-700":Ke.EQT_USE_ARR_YN==="A"?"bg-purple-100 text-purple-700":Ke.EQT_USE_ARR_YN==="N"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:Ke.EQT_USE_ARR_YN==="Y"?"":Ke.EQT_USE_ARR_YN==="A"?"":Ke.EQT_USE_ARR_YN==="N"?"":"N/A"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),kT(Ke.MAC_ADDRESS)]}),s.jsx("span",{className:"text-sm text-gray-600",children:Rq(Ke.EQT_USE_END_DT||"")})]})]})]}),j==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:Ke.ITEM_MODEL||Ke.MODEL_NM||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:Ke.SO_NM||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.EQT_STAT_CD_NM||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:Ke.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.EQT_LOC_NM||Ke.EQT_LOC_TP_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:Ke.OLD_EQT_LOC_NM||"-"})]})]})]},Ke.EQT_NO||Et)})})]},Te)})]},Ae)})})]}),s.jsx("div",{className:"h-24"})]}),o.length===0&&!p&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:P?s.jsx(s.Fragment,{children:"   "}):s.jsx(s.Fragment,{children:"  "})}),s.jsx("p",{className:"text-gray-400 text-xs",children:P?s.jsx(s.Fragment,{children:"S/N  MAC  "}):s.jsx(s.Fragment,{children:"     "})})]})}),p&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsx("p",{className:"text-center text-gray-500 text-sm",children:" ..."})}),o.length>0&&s.jsx("div",{className:"fixed bottom-16 left-0 right-0 px-4 pb-2 z-[45]",children:s.jsx("button",{onClick:()=>!C&&xt(!0),disabled:o.filter(Ae=>Ae.CHK).length===0||C,className:`w-full py-4 rounded-xl font-bold text-base shadow-lg flex items-center justify-center gap-2 transition-all touch-manipulation ${C?"bg-gray-400 text-gray-200 cursor-not-allowed":o.filter(Ae=>Ae.CHK).length>0?"bg-gradient-to-r from-blue-500 to-blue-600 text-white active:scale-[0.98]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:C?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"w-5 h-5"}),"  (",o.filter(Ae=>Ae.CHK).length,")"]})})}),s.jsx(Ra,{isOpen:ze,onClose:()=>xt(!1),title:"  ",size:"large",footer:s.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[s.jsx("button",{onClick:()=>xt(!1),className:"py-4 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-semibold text-base transition-colors touch-manipulation",children:""}),s.jsx("button",{onClick:()=>{C||(xt(!1),Ve())},disabled:C,className:`py-4 rounded-xl font-semibold text-base shadow-lg transition-all touch-manipulation ${C?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 text-white active:scale-[0.98]"}`,children:C?"...":""})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl p-4 bg-blue-50 border border-blue-200",children:[s.jsx("label",{className:"block text-sm font-semibold mb-2 text-blue-800",children:" "}),be.length>1?s.jsxs(s.Fragment,{children:[s.jsx("select",{value:ie,onChange:Ae=>pe(Ae.target.value),className:"w-full px-4 py-3 border border-blue-300 rounded-xl text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:be.map(Ae=>s.jsxs("option",{value:Ae.SO_ID,children:[Ae.SO_NM," (",Ae.SO_ID,")"]},Ae.SO_ID))}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"   "})]}):be.length===1?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"w-full px-4 py-3 border border-blue-300 rounded-xl text-sm bg-blue-100 text-blue-900 font-semibold",children:[be[0].SO_NM," (",be[0].SO_ID,")"]}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"    "})]}):null]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" "})}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("span",{className:"font-medium text-gray-900",children:[i.WRKR_NM," (",i.WRKR_ID,")"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("span",{className:"font-medium text-gray-900",children:[n.userName," (",n.userId,")"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("span",{className:"font-bold text-blue-600",children:[o.filter(Ae=>Ae.CHK).length,""]})]})]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"bg-gray-100 px-4 py-2 border-b border-gray-200",children:s.jsx("span",{className:"text-xs font-semibold text-gray-600",children:" "})}),s.jsx("div",{className:"max-h-48 overflow-y-auto divide-y divide-gray-100",children:o.filter(Ae=>Ae.CHK).map((Ae,ft)=>s.jsxs("div",{className:"px-4 py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded font-medium",children:Ae.ITEM_MID_NM||Ae.EQT_CL_NM||""}),s.jsx("span",{className:"text-xs font-mono text-gray-800",children:Ae.EQT_SERNO})]}),s.jsx("span",{className:"text-[10px] text-gray-500",children:Ae.SO_NM||Ae.SO_ID})]},Ae.EQT_NO||ft))})]})]})}),s.jsx(Ra,{isOpen:U,onClose:()=>{I(!1),Ge(null),he([]),se([]),ce("")},title:ge?`${ge.USR_NM} `:" ",size:"large",subHeader:ge?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:ut,className:"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-900",children:[s.jsx(Pr,{className:"w-4 h-4 rotate-[-90deg]"}),""]}),s.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",onChange:Ae=>vt(Ae.target.checked),checked:(()=>{const Ae=te.filter(ft=>!ee||(ft.ITEM_MID_NM||ft.EQT_CL_NM||"")===ee);return Ae.length>0&&Ae.every(ft=>ft.CHK)})(),className:"rounded"}),ee?`${ee} `:""]})]}):s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:V,onChange:Ae=>ce(Ae.target.value),onKeyDown:Ae=>Ae.key==="Enter"&&Ze(),className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"  ID ",autoFocus:!0}),s.jsx("button",{onClick:Ze,disabled:me,className:"px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded-lg font-medium text-sm touch-manipulation",children:me?"...":""})]})}),footer:ge?s.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:ut,className:"py-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-semibold text-sm transition-colors touch-manipulation",children:""}),s.jsxs("button",{onClick:je,disabled:te.filter(Ae=>Ae.CHK).length===0,className:"py-3 bg-gradient-to-r from-blue-500 to-blue-600 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl font-semibold text-sm shadow-lg active:scale-[0.98] transition-all touch-manipulation",children:["  (",te.filter(Ae=>Ae.CHK).length,")"]})]}):s.jsx("button",{onClick:()=>I(!1),className:"w-full py-2.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg font-medium transition-colors touch-manipulation",children:""}),children:ge?de?s.jsx("div",{className:"py-8 text-center text-gray-500 text-sm",children:"  ..."}):te.length===0?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"    "})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-4 py-2 border-b border-gray-100 bg-gray-50",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-600 font-medium",children:":"}),s.jsxs("select",{value:ee,onChange:Ae=>Z(Ae.target.value),className:"flex-1 text-xs border border-gray-200 rounded-lg px-2 py-1.5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsxs("option",{value:"",children:[" (",te.length,")"]}),Array.from(new Set(te.map(Ae=>Ae.ITEM_MID_NM||Ae.EQT_CL_NM||""))).sort().map(Ae=>{const ft=te.filter(rt=>(rt.ITEM_MID_NM||rt.EQT_CL_NM||"")===Ae).length;return s.jsxs("option",{value:Ae,children:[Ae," (",ft,")"]},Ae)})]})]})}),s.jsx("div",{className:"divide-y divide-gray-100 max-h-72 overflow-y-auto",children:te.map((Ae,ft)=>({item:Ae,idx:ft})).filter(({item:Ae})=>!ee||(Ae.ITEM_MID_NM||Ae.EQT_CL_NM||"")===ee).map(({item:Ae,idx:ft})=>s.jsxs("div",{className:`px-4 py-3 flex items-center gap-3 ${Ae.CHK?"bg-blue-50":"hover:bg-gray-50"}`,children:[s.jsx("input",{type:"checkbox",checked:Ae.CHK||!1,onChange:rt=>Le(ft,rt.target.checked),className:"rounded flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded font-medium bg-blue-100 text-blue-700",children:Ae.ITEM_MID_NM||Ae.EQT_CL_NM||""}),s.jsx("span",{className:"font-mono text-xs truncate text-gray-800",children:Ae.EQT_SERNO||"-"})]}),s.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:Ae.SO_NM||Ae.SO_ID||""})]})]},Ae.EQT_NO||ft))})]}):Y.length===0?s.jsx("div",{className:"py-8 text-center text-gray-500 text-sm",children:me?" ...":"  ID "}):s.jsx("div",{className:"divide-y divide-gray-100",children:Y.map((Ae,ft)=>s.jsxs("button",{onClick:()=>gt(Ae),className:"w-full px-4 py-3 text-left hover:bg-green-50 flex justify-between items-center transition-colors active:bg-green-100 touch-manipulation",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:Ae.USR_NM}),s.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["(",Ae.USR_ID,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Ae.SO_NM&&s.jsx("span",{className:"text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:Ae.SO_NM}),Ae.CORP_NM&&s.jsx("span",{className:"text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:Ae.CORP_NM}),!Ae.SO_NM&&!Ae.CORP_NM&&s.jsx("span",{className:"text-gray-400",children:"-"})]})]}),s.jsx("span",{className:"text-xs px-2 py-1 rounded text-blue-600 bg-blue-50 font-medium",children:Ae.EQT_COUNT!==void 0?`${Ae.EQT_COUNT}`:""})]},ft))})}),s.jsx(Em,{isOpen:E,onClose:()=>A(!1),onScan:$e,isMultiScanMode:!1,scanCount:M.length}),L&&$&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${$.failed.length===0?"bg-gradient-to-r from-green-500 to-green-600":$.success.length===0?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-amber-500 to-amber-600"}`,children:[s.jsx("h3",{className:"font-semibold text-white text-lg",children:$.failed.length===0?" ":$.success.length===0?" ":" "}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[": ",$.success.length," / : ",$.failed.length,""]})]}),s.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto space-y-4",children:[$.success.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-green-700 mb-2 flex items-center gap-2",children:[s.jsx(ho,{className:"w-4 h-4"})," (",$.success.length,")"]}),s.jsx("div",{className:"space-y-1",children:$.success.map((Ae,ft)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg text-xs",children:[s.jsx("span",{className:"font-mono text-green-800",children:Ae.EQT_SERNO}),s.jsx("span",{className:"text-green-600",children:Ae.ITEM_NM})]},ft))})]}),$.failed.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-red-700 mb-2 flex items-center gap-2",children:[s.jsx(Mi,{className:"w-4 h-4"})," (",$.failed.length,")"]}),s.jsx("div",{className:"space-y-1",children:$.failed.map((Ae,ft)=>s.jsxs("div",{className:"p-2 bg-red-50 rounded-lg text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-red-800",children:Ae.EQT_SERNO}),s.jsx("span",{className:"text-red-600",children:Ae.ITEM_NM})]}),s.jsx("div",{className:"text-red-500 mt-1",children:Ae.error})]},ft))})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{re(!1),F(null)},className:"w-full py-2.5 bg-gray-800 hover:bg-gray-900 text-white rounded-lg font-medium transition-colors",children:""})})]})}),at&&tt&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${tt.EQT_LOC_TP_NM===""?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gradient-to-r from-purple-500 to-purple-600"}`,children:[s.jsxs("h3",{className:"font-semibold text-white text-lg flex items-center gap-2",children:[s.jsx(xo,{className:"w-5 h-5"}),tt.EQT_LOC_TP_NM===""?" ":" "]}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:["  ",tt.EQT_LOC_TP_NM===""?"  ":tt.EQT_LOC_TP_NM===""?" ":" "]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"S/N"}),s.jsx("span",{className:"font-mono font-medium text-gray-900",children:tt.EQT_SERNO})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:tt.ITEM_NM||"-"})]}),tt.ITEM_MID_NM&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700",children:tt.ITEM_MID_NM})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700",children:tt.SO_NM||"-"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:`font-medium ${tt.EQT_LOC_TP_NM===""?"text-amber-600":tt.EQT_LOC_TP_NM===""?"text-purple-600":"text-gray-600"}`,children:tt.EQT_LOC_TP_NM})]}),tt.EQT_LOC_NM&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700 text-right max-w-[200px] truncate",children:tt.EQT_LOC_NM})]}),tt.WRKR_NM&&tt.WRKR_NM!=="-"&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:""}),s.jsx("span",{className:"text-gray-700",children:tt.WRKR_NM})]}),tt.MAC_ADDRESS&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"MAC"}),s.jsx("span",{className:"font-mono text-xs text-gray-600",children:kT(tt.MAC_ADDRESS)})]})]}),tt.EQT_LOC_TP_NM===""&&s.jsx("p",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded-lg",children:"    . /   ."})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:s.jsx("button",{onClick:()=>{Fe(!1),ct(null)},className:"w-full py-2.5 bg-gray-800 hover:bg-gray-900 text-white rounded-lg font-medium transition-colors",children:""})})]})})]})},Mq=t=>t?t.length===8&&!t.includes("-")&&!t.includes(".")?`${t.slice(0,4)}-${t.slice(4,6)}-${t.slice(6,8)}`:t.includes(".")?t.replace(/\./g,"-"):t:"-",Iq=t=>{var n;if(!t)return"-";const e=t.replace(/[^A-Fa-f0-9]/g,"");return e.length!==12?t:((n=e.match(/.{2}/g))==null?void 0:n.join(":"))||t},jq=t=>{if(!t)return"-";const e=t.replace(/[^0-9]/g,"");return e.length===10?`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`:t},Oq=({isOpen:t,onClose:e,selectedItems:n,onProcess:r,isProcessing:i,soList:a,userSoId:o,showToast:c})=>{const[u,h]=b.useState("");if(b.useEffect(()=>{t&&h("")},[t]),!t)return null;const m=()=>{if(!u){c==null||c("      .","warning");return}r("1",u)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-green-500 to-green-600",children:[s.jsx("h3",{className:"font-semibold text-white",children:"  "}),s.jsxs("p",{className:"text-xs text-white/80 mt-1",children:[n.length,"  "]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-32 overflow-y-auto",children:n.map((_,p)=>s.jsxs("div",{className:"text-xs text-gray-600 py-1 border-b border-gray-100 last:border-0",children:[s.jsx("span",{className:"font-mono font-medium",children:_.EQT_SERNO}),s.jsx("span",{className:"text-gray-400 ml-2",children:_.CUST_NM})]},p))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-700",children:"  "}),s.jsxs("select",{value:u,onChange:_=>h(_.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:i,children:[s.jsx("option",{value:"",children:" "}),a.map(_=>s.jsxs("option",{value:_.SO_ID,children:[_.SO_NM," (",_.SO_ID,")"]},_.SO_ID))]})]}),s.jsxs("button",{onClick:m,disabled:i,className:"w-full py-3 text-sm text-white bg-green-500 hover:bg-green-600 disabled:bg-gray-300 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx(ho,{className:"w-4 h-4"}),i?" ...":" "]}),s.jsx("button",{onClick:e,disabled:i,className:"w-full py-2.5 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:""})]})]})})},wq=({isOpen:t,onClose:e,onSelect:n,onSerialSearch:r})=>{const[i,a]=b.useState(""),[o,c]=b.useState(""),[u,h]=b.useState(""),[m,_]=b.useState(""),[p,g]=b.useState(""),[C,y]=b.useState(!1),[N,v]=b.useState([]),[P,w]=b.useState(!1),[M,k]=b.useState(!1),[B,G]=b.useState(null),U=A=>{g(A.toUpperCase()),k(!1)};if(!t)return null;const I=async()=>{G(null);const A=i.length>=4,Y=o.length>=4,se=u.length>=4,X=m.length>=2,z=se&&X,$=p.length>=4;if(se&&!X||!se&&X){G(`   .
( 4 ,  2 )`);return}if(!A&&!Y&&!z&&!$){G(`    .
 ID (4 )
 ID (4 )
  +  (  )
 S/N (4 )`);return}let F="PHONE_NAME";A?F="CUSTOMER_ID":Y?F="CONTRACT_ID":$&&(F="EQUIPMENT_NO"),y(!0),w(!0);try{const L=await g$({searchType:F,customerId:A?i:void 0,contractId:Y?o:void 0,phoneNumber:z?u:void 0,customerName:z?m:void 0,equipmentNo:$?p:void 0});if(L.success&&L.data&&L.data.length>0)v(L.data);else if($&&r){r(p),e();return}else v([])}catch(L){if(console.error("Customer search error:",L),$&&r){r(p),e();return}v([])}finally{y(!1)}},E=A=>{A.key==="Enter"&&I()};return s.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden max-h-[80vh] flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-gray-100 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0",children:s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(c0,{className:"w-4 h-4"})," "]})}),s.jsxs("div",{className:"p-4 space-y-3 flex-1 overflow-y-auto min-h-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:i,onChange:A=>{a(A.target.value),G(null)},onKeyPress:E,placeholder:"ID",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"ID"}),s.jsx("input",{type:"text",value:o,onChange:A=>{c(A.target.value),G(null)},onKeyPress:E,placeholder:"ID",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:""}),s.jsxs("div",{className:"flex-1 flex gap-2 min-w-0",children:[s.jsx("input",{type:"tel",value:u,onChange:A=>{h(A.target.value.replace(/[^0-9]/g,"")),G(null)},onKeyPress:E,placeholder:"",className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",value:m,onChange:A=>{_(A.target.value),G(null)},onKeyPress:E,placeholder:"",className:"flex-1 min-w-0 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-16 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:p,onChange:A=>{g(A.target.value.toUpperCase()),G(null)},onKeyPress:E,placeholder:"S/N  MAC  ",className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono"}),s.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),B&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-red-600 text-sm whitespace-pre-line",children:B})}),P&&s.jsx("div",{className:"border-t border-gray-100 pt-3",children:N.length>0?s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",N.length,""]}),N.map((A,Y)=>s.jsxs("button",{onClick:()=>{_(A.CUST_NM),n({CUST_ID:A.CUST_ID,CUST_NM:A.CUST_NM}),e()},className:"w-full p-3 bg-gray-50 hover:bg-blue-50 rounded-lg border border-gray-200 hover:border-blue-300 text-left transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-blue-600 font-mono text-sm",children:A.CUST_ID}),s.jsx("span",{className:"font-semibold text-gray-900",children:A.CUST_NM})]}),(A.INST_ADDR||A.ADDR||A.ADDRESS)&&s.jsx("div",{className:"mt-1 text-xs text-gray-500 truncate",children:A.INST_ADDR||A.ADDR||A.ADDRESS})]},A.CUST_ID||Y))]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"  ."})})]}),s.jsx("div",{className:"p-4 border-t border-gray-100 bg-white flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:I,disabled:C,className:"flex-1 py-2.5 text-sm text-white bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 rounded-lg font-medium flex items-center justify-center",children:C?" ...":""}),s.jsx("button",{onClick:e,className:"flex-1 py-2.5 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:""})]})})]}),s.jsx(Em,{isOpen:M,onClose:()=>k(!1),onScan:U})]})},Lq=({onBack:t,showToast:e})=>{const[n,r]=b.useState({CUST_ID:"",CUST_NM:"",PHONE_NO:"",EQT_CL_CD:"",EQT_SERNO:""}),[i,a]=b.useState(!1),[o,c]=b.useState(null),[u,h]=b.useState([]),[m,_]=b.useState(!1),[p,g]=b.useState(!1),[C,y]=b.useState(!1),[N,v]=b.useState(!1),[P,w]=b.useState([]),[M,k]=b.useState([]),[B,G]=b.useState(""),[U,I]=b.useState("simple"),[E,A]=b.useState("all"),[Y,se]=b.useState(new Set),X=te=>{if(!te)return"";if(te==="100")return"";const he=/^\d+$/.test(te);if(!he&&M.find(ee=>ee.SO_NM===te))return te;const de=M.find(Q=>Q.SO_ID===te);return de&&de.SO_NM?de.SO_NM:he?`(${te})`:te},z=te=>{se(he=>{const de=new Set(Array.from(he));return de.has(te)?de.delete(te):de.add(te),de})},$=te=>te.EQT_STAT_CD_NM===""?!0:te.LOSS_AMT!==""&&te.LOSS_AMT!=="0"&&Number(te.LOSS_AMT)>0,L=E==="all"?u:E==="lost"?u.filter(te=>$(te)):u.filter(te=>!$(te)),re=u.filter(te=>$(te)).length;u.length-re;const fe=L.reduce((te,he,de)=>{var ne,ie,pe,ze;let Q="";const ee=(ne=he.SO_NM)==null?void 0:ne.trim(),Z=(ie=he.MST_SO_NM)==null?void 0:ie.trim(),le=(pe=he.SO_ID)==null?void 0:pe.trim(),xe=(ze=he.MST_SO_ID)==null?void 0:ze.trim();ee&&ee!=="100"?Q=ee:Z&&Z!=="100"?Q=Z:le==="100"||xe==="100"||ee==="100"||Z==="100"?Q="":le&&(Q=le);const be=he.BIZ_CL_NM||he.ITEM_MID_NM||he.EQT_CL_NM||"";return te[Q]||(te[Q]={}),te[Q][be]||(te[Q][be]=[]),te[Q][be].push({...he,_globalIdx:de}),te},{});Object.keys(fe).forEach(te=>{Object.keys(fe[te]).forEach(he=>{fe[te][he].sort((de,Q)=>{const ee=de.EQT_CL_NM||de.ITEM_NM||"",Z=Q.EQT_CL_NM||Q.ITEM_NM||"";return ee.localeCompare(Z)})})});const T=Object.keys(fe).sort(),j=(te,he)=>{h(u.map(de=>{const Q=de.SO_NM||de.SO_ID||"",ee=$(de);return Q===te&&ee?{...de,CHK:he}:de}))},K=(te,he,de)=>{h(u.map(Q=>{const ee=Q.SO_NM||Q.SO_ID||"",Z=Q.BIZ_CL_NM||Q.ITEM_MID_NM||Q.EQT_CL_NM||"",le=$(Q);return ee===te&&Z===he&&le?{...Q,CHK:de}:Q}))};b.useEffect(()=>{(()=>{try{const he=sessionStorage.getItem("userInfo");if(he){const ee=JSON.parse(he),Z=ee.soId||ee.SO_ID||"";Z&&(G(Z),console.log("[]   :",Z))}const de=localStorage.getItem("branchList");if(de){const ee=JSON.parse(de);if(Array.isArray(ee)&&ee.length>0){console.log("[] branchList   :",ee.length,"");const Z=ee.map(xe=>({SO_ID:xe.SO_ID||xe.soId||"",SO_NM:xe.SO_NM||xe.soNm||xe.SO_ID||""})).filter(xe=>xe.SO_ID),le=new Set;ee.forEach(xe=>{const be=xe.MST_SO_ID||xe.mstSoId;be&&!Z.some(ne=>ne.SO_ID===be)&&le.add(be)}),le.forEach(xe=>{Z.push({SO_ID:xe,SO_NM:""})}),k(Z);return}}const Q=localStorage.getItem("userInfo");if(Q){const ee=JSON.parse(Q),Z=ee.authSoList||ee.AUTH_SO_List||[];if(Array.isArray(Z)&&Z.length>0){console.log("[] authSoList   :",Z.length,"");const le=Z.map(be=>({SO_ID:be.SO_ID||be.soId||"",SO_NM:be.SO_NM||be.soNm||be.SO_ID||""})).filter(be=>be.SO_ID),xe=new Set;Z.forEach(be=>{const ne=be.MST_SO_ID||be.mstSoId;ne&&!le.some(ie=>ie.SO_ID===ne)&&xe.add(ne)}),xe.forEach(be=>{le.push({SO_ID:be,SO_NM:""})}),k(le);return}}if(he){const ee=JSON.parse(he),Z=ee.authSoList||ee.AUTH_SO_List||[];if(Array.isArray(Z)&&Z.length>0){console.log("[] sessionStorage authSoList   :",Z.length,"");const ne=Z.map(pe=>({SO_ID:pe.SO_ID||pe.soId||"",SO_NM:pe.SO_NM||pe.soNm||pe.SO_ID||""})).filter(pe=>pe.SO_ID),ie=new Set;Z.forEach(pe=>{const ze=pe.MST_SO_ID||pe.mstSoId;ze&&!ne.some(xt=>xt.SO_ID===ze)&&ie.add(ze)}),ie.forEach(pe=>{ne.push({SO_ID:pe,SO_NM:""})}),k(ne);return}const le=JSON.parse(he),xe=le.soId||le.SO_ID,be=le.soNm||le.SO_NM||xe;if(xe){console.log("[]  SO  :",xe,be),k([{SO_ID:xe,SO_NM:be}]);return}}console.log("[]   ")}catch(he){console.error("[] SO list load failed:",he)}})()},[]);const J=async te=>{_(!0);try{w(Q=>[...new Set([te,...Q])]);const he={EQT_SERNO:te},de=await Ei("EquipmentRecovery","getUnreturnedEquipmentList (barcode)",()=>Eb(he),he);if(de&&de.length>0){const Q=de.map(ee=>{var Z,le;return{CHK:ee.EQT_SERNO===te,CUST_ID:ee.CUST_ID||"",CUST_NM:ee.CUST_NM||"",CTRT_ID:ee.CTRT_ID||"",EQT_NO:ee.EQT_NO||"",EQT_SERNO:ee.EQT_SERNO||"",EQT_CL_CD:ee.EQT_CL_CD||ee.EQT_CL||"",EQT_CL_NM:ee.EQT_CL_NM||ee.EQT_NM||"",ITEM_NM:ee.ITEM_NM||ee.EQT_NM||"",TRML_DT:ee.TRML_DT||((le=(Z=ee.CMPL_DATE)==null?void 0:Z.split(" ")[0])==null?void 0:le.replace(/-/g,""))||"",WRK_ID:ee.WRK_ID||"",WRKR_ID:ee.WRKR_ID||"",WRKR_NM:ee.WRKR_NM||"",SO_ID:ee.SO_ID||"",SO_NM:ee.SO_NM||X(ee.SO_ID)||"",PHONE_NO:ee.PHONE_NO||ee.TEL_NO||ee.TEL_NO_1||"",ADDRESS:ee.ADDRESS||ee.WORK_ADDR||ee.CTRT_ADDR||"",RETN_REQ_YN:ee.RETN_REQ_YN||"",LOSS_AMT:ee.LOSS_AMT||"",CRR_ID:ee.CRR_ID||"",CMPL_DATE:ee.CMPL_DATE||"",EQT_STAT_CD_NM:ee.EQT_STAT_NM||ee.EQT_STAT_CD_NM||"",isScanned:ee.EQT_SERNO===te,MAC_ADDRESS:ee.MAC_ADDRESS||ee.MAC_ADDR||"",EQT_USE_END_DT:ee.EQT_USE_END_DT||"",CHG_KND_NM:ee.CHG_KND_NM||"",EQT_LOC_NM:ee.EQT_LOC_NM||"",EQT_LOC_TP_NM:ee.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:ee.OLD_EQT_LOC_NM||"",ITEM_MODEL:ee.ITEM_MODEL||ee.MODEL_NM||"",EQT_USE_ARR_YN:ee.EQT_USE_ARR_YN||"",BIZ_CL_NM:ee.BIZ_CL_NM||"",MST_SO_ID:ee.MST_SO_ID||"",MST_SO_NM:ee.MST_SO_NM||""}});h(Q)}else{const Q=await Ei("EquipmentRecovery","getEquipmentHistoryInfo",()=>am({EQT_SERNO:te}),{EQT_SERNO:te});if(Q&&Q.length>0){const ee=Q[0];e==null||e(` (${te})   . : ${ee.EQT_STAT_NM||ee.EQT_STAT_CD_NM||"  "}`,"warning")}else e==null||e(` (${te})   .`,"error");h([])}}catch(he){console.error("Barcode scan failed:",he),e==null||e("  .","error")}finally{_(!1)}},q=te=>{h([]),w([]),c(te),r({...n,CUST_ID:te.CUST_ID,CUST_NM:te.CUST_NM})},V=async()=>{if(!n.EQT_SERNO&&!o){e==null||e("  S/N .","warning");return}_(!0);try{const te={};n.EQT_SERNO&&(te.EQT_SERNO=n.EQT_SERNO),o&&(te.CUST_ID=o.CUST_ID);const he=await Ei("EquipmentRecovery","getUnreturnedEquipmentList",()=>Eb(te),te);if(!o&&n.EQT_SERNO&&he&&he.length>0){const Q=he[0];Q.CUST_ID&&Q.CUST_NM&&c({CUST_ID:Q.CUST_ID,CUST_NM:Q.CUST_NM})}const de=(he||[]).map(Q=>{var ee,Z;return{CHK:P.includes(Q.EQT_SERNO),CUST_ID:Q.CUST_ID||"",CUST_NM:Q.CUST_NM||"",CTRT_ID:Q.CTRT_ID||"",EQT_NO:Q.EQT_NO||"",EQT_SERNO:Q.EQT_SERNO||"",EQT_CL_CD:Q.EQT_CL_CD||Q.EQT_CL||"",EQT_CL_NM:Q.EQT_CL_NM||Q.EQT_NM||"",ITEM_NM:Q.ITEM_NM||Q.EQT_NM||"",TRML_DT:Q.TRML_DT||((Z=(ee=Q.CMPL_DATE)==null?void 0:ee.split(" ")[0])==null?void 0:Z.replace(/-/g,""))||"",WRK_ID:Q.WRK_ID||"",WRKR_ID:Q.WRKR_ID||"",WRKR_NM:Q.WRKR_NM||"",SO_ID:Q.SO_ID||"",SO_NM:Q.SO_NM||X(Q.SO_ID)||"",PHONE_NO:Q.PHONE_NO||Q.TEL_NO||Q.TEL_NO_1||"",ADDRESS:Q.ADDRESS||Q.WORK_ADDR||Q.CTRT_ADDR||"",RETN_REQ_YN:Q.RETN_REQ_YN||"",LOSS_AMT:Q.LOSS_AMT||"",CRR_ID:Q.CRR_ID||"",CMPL_DATE:Q.CMPL_DATE||"",EQT_STAT_CD_NM:Q.EQT_STAT_NM||Q.EQT_STAT_CD_NM||"",isScanned:P.includes(Q.EQT_SERNO),MAC_ADDRESS:Q.MAC_ADDRESS||Q.MAC_ADDR||"",EQT_USE_END_DT:Q.EQT_USE_END_DT||"",CHG_KND_NM:Q.CHG_KND_NM||"",EQT_LOC_NM:Q.EQT_LOC_NM||"",EQT_LOC_TP_NM:Q.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:Q.OLD_EQT_LOC_NM||"",ITEM_MODEL:Q.ITEM_MODEL||Q.MODEL_NM||"",EQT_USE_ARR_YN:Q.EQT_USE_ARR_YN||"",BIZ_CL_NM:Q.BIZ_CL_NM||"",MST_SO_ID:Q.MST_SO_ID||"",MST_SO_NM:Q.MST_SO_NM||""}});de.sort((Q,ee)=>Q.isScanned&&!ee.isScanned?-1:!Q.isScanned&&ee.isScanned?1:0),h(de)}catch(te){console.error("Unreturned equipment lookup failed:",te),e==null||e("  .","error"),h([])}finally{_(!1)}},ce=async(te,he)=>{const de=u.filter(Q=>Q.CHK);if(de.length!==0){v(!0);try{let Q=0,ee=0;for(const Z of de)try{if(!Z.EQT_NO||Z.EQT_NO.length!==20||!/^\d+$/.test(Z.EQT_NO)){console.warn("Invalid EQT_NO format:",Z.EQT_SERNO,Z.EQT_NO),ee++;continue}const le=typeof window<"u"?sessionStorage.getItem("userInfo"):null,xe=le?JSON.parse(le):{},be=new Date().toISOString().slice(0,10).replace(/-/g,""),ne={EQT_NO:Z.EQT_NO,EQT_SERNO:Z.EQT_SERNO,PROC_CL:te,CUST_ID:Z.CUST_ID,CTRT_ID:Z.CTRT_ID,WRK_ID:Z.WRK_ID,CRR_ID:Z.CRR_ID||xe.crrId||"",WRKR_ID:Z.WRKR_ID||xe.userId||"",SO_ID:he||Z.SO_ID||xe.soId||"",CHG_UID:xe.userId||"",PROC_UID_SO_ID:he||xe.soId||Z.SO_ID||"",RTN_DD:be,RTN_TP:"3",STTL_YN:"N",BILL_YN:Z.BILL_YN||"N",RCPT_YN:Z.RCPT_YN||"0",EQT_PROD_CMPS_ID:Z.EQT_PROD_CMPS_ID||"",BASIC_PROD_CMPS_ID:Z.BASIC_PROD_CMPS_ID||"",EQT_CL_CD:Z.EQT_CL_CD||Z.EQT_CL||"",EQT_USE_STAT_CD:Z.EQT_USE_STAT_CD||"1",SVC_CD:Z.SVC_CD||"",IF_DTL_ID:Z.IF_DTL_ID||"0000000000"};await Ei("EquipmentRecovery","processEquipmentRecovery",()=>vA(ne),ne),Q++}catch(le){console.error("Recovery process failed:",Z.EQT_SERNO,le);const xe=(le==null?void 0:le.message)||(le==null?void 0:le.toString())||"";if(xe.includes("    ")||xe.includes("ORA-30926")){console.log("[Workaround] Oracle    ,     ...");try{await new Promise(pe=>setTimeout(pe,500));const be=await am({EQT_SERNO:Z.EQT_SERNO}),ne=Array.isArray(be)?be[0]:be,ie=(ne==null?void 0:ne.CHG_KND_CD_NM)||(ne==null?void 0:ne.CHG_KND_NM)||"";console.log("[Workaround]   :",Z.EQT_SERNO,"- CHG_KND_NM:",ie),ie.includes("")||ie.includes("")||ie==="SO"?(console.log("[Workaround]     :",Z.EQT_SERNO),Q++):console.log("[Workaround]    ,  :",ie)}catch(be){console.error("[Workaround]  :",be)}}}if(Q>0){let Z=Q+"  ";ee>0&&(Z+=` (${ee} )`),e==null||e(Z,"success"),y(!1),w([]),V()}else throw new Error(" ")}catch(Q){console.error("Recovery process failed:",Q),e==null||e(" .","error")}finally{v(!1)}}},me=te=>{h(u.map(he=>{const de=$(he);return{...he,CHK:de?te:!1}}))},Ce=(te,he)=>{const de=[...u],Q=de[te];$(Q)&&(de[te].CHK=he,h(de))},ge=u.filter(te=>te.CHK).length,Ge=te=>{const he=$(te),de=he,Q=u.findIndex(ee=>ee.EQT_SERNO===te.EQT_SERNO);return s.jsxs("div",{onClick:()=>de&&Ce(Q,!te.CHK),className:`p-3 rounded-lg border-2 transition-all ${de?"cursor-pointer":"cursor-not-allowed opacity-70"} ${te.CHK?"bg-blue-50 border-blue-400":te.isScanned?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:te.CHK||!1,onChange:ee=>{ee.stopPropagation(),Ce(Q,ee.target.checked)},disabled:!de,className:`w-5 h-5 rounded focus:ring-blue-500 mt-0.5 ${de?"text-blue-500":"text-gray-300 cursor-not-allowed"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 truncate",children:te.EQT_CL_NM||te.ITEM_NM||"-"}),te.isScanned&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700 flex-shrink-0",children:""})]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${he?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:he?"":te.EQT_STAT_CD_NM||""})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"S/N : "}),te.EQT_SERNO||"-"]}),(()=>{const ee=te.EQT_USE_ARR_YN;if(!ee)return null;let Z="bg-gray-100 text-gray-700",le=ee;return ee==="Y"?(Z="bg-green-100 text-green-700",le=""):ee==="A"?(Z="bg-purple-100 text-purple-700",le=""):ee==="N"?(Z="bg-red-100 text-red-700",le=""):ee==="W"?(Z="bg-blue-100 text-blue-700",le=""):ee==="R"?(Z="bg-yellow-100 text-yellow-700",le=""):ee==="D"&&(Z="bg-orange-100 text-orange-700",le=""),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${Z}`,children:le})})()]}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:"MAC : "}),Iq(te.MAC_ADDRESS)||"-"]}),s.jsx("span",{className:"text-sm text-gray-600",children:Mq(te.EQT_USE_END_DT||"")})]})]})]}),U==="detail"&&s.jsxs("div",{className:"bg-gray-100 rounded-lg p-2 mt-2 text-xs space-y-1 ml-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:" : "}),s.jsx("span",{className:"text-gray-800",children:te.ITEM_MODEL||"-"})]}),s.jsx("span",{className:"font-medium text-gray-800",children:X(te.SO_NM||te.SO_ID)||"-"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.EQT_STAT_CD_NM||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs",children:te.EQT_NO||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.CHG_KND_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.EQT_LOC_NM||te.EQT_LOC_TP_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"  : "}),s.jsx("span",{className:"text-gray-800",children:te.OLD_EQT_LOC_NM||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"ID    : "}),s.jsx("span",{className:"text-gray-800 font-mono",children:jq(te.CTRT_ID)})]})]})]},te._globalIdx)};return s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[P.length>0&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium text-orange-700",children:["  (",P.length,")"]}),s.jsx("button",{onClick:()=>w([]),className:"text-xs text-orange-600 hover:text-orange-800",children:""})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:P.map((te,he)=>s.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-md font-mono",children:te},he))})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:""}),s.jsxs("div",{onClick:()=>a(!0),className:"flex-1 flex gap-2 cursor-pointer min-w-0 overflow-hidden",children:[s.jsx("input",{type:"text",value:(o==null?void 0:o.CUST_NM)||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer truncate",placeholder:""}),s.jsx("input",{type:"text",value:(o==null?void 0:o.CUST_ID)||"",readOnly:!0,className:"flex-1 min-w-0 px-2 py-2.5 text-sm border border-gray-200 rounded-lg bg-gray-50 cursor-pointer",placeholder:"ID"})]}),o&&s.jsx("button",{onClick:te=>{te.stopPropagation(),c(null),r({...n,CUST_ID:"",CUST_NM:""}),h([])},className:"w-9 h-9 flex items-center justify-center text-red-500 bg-red-50 hover:bg-red-100 rounded-lg transition-all flex-shrink-0",title:" ",children:s.jsx(Mi,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{type:"text",value:n.EQT_SERNO,onChange:te=>r({...n,EQT_SERNO:te.target.value.toUpperCase()}),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono",placeholder:"S/N  MAC  "}),s.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),s.jsx("button",{onClick:V,disabled:m||!o&&!n.EQT_SERNO,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-3 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},children:m?" ...":""})]})}),u.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:te=>me(te.target.checked),checked:L.length>0&&L.filter(te=>$(te)).every(te=>te.CHK),className:"w-4 h-4 text-blue-500 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:""})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[L.length," (: ",ge,")"]})]}),s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>I("simple"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${U==="simple"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),s.jsx("button",{onClick:()=>I("detail"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${U==="detail"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]}),s.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:s.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>A("all"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${E==="all"?"bg-white text-orange-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[" (",u.length,")"]}),s.jsxs("button",{onClick:()=>A("lost"),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all ${E==="lost"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[" (",re,")"]})]})}),s.jsx("div",{className:"divide-y divide-gray-100",children:T.map(te=>{const he=fe[te],de=Object.keys(he).sort(),Q=de.reduce((xe,be)=>xe+he[be].length,0),ee=de.reduce((xe,be)=>xe+he[be].filter(ne=>ne.CHK).length,0),Z=de.reduce((xe,be)=>xe+he[be].filter(ne=>$(ne)).length,0),le=Y.has(`so_${te}`);return s.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 flex items-center justify-between cursor-pointer hover:bg-blue-100",onClick:()=>z(`so_${te}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:Z>0&&ee===Z,onChange:xe=>{xe.stopPropagation(),j(te,xe.target.checked)},onClick:xe=>xe.stopPropagation(),className:"rounded",disabled:Z===0}),s.jsx("span",{className:"text-sm font-bold text-blue-800",children:X(te)}),s.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:[Q,""]})]}),le?s.jsx(hr,{className:"w-4 h-4 text-blue-600"}):s.jsx(Pr,{className:"w-4 h-4 text-blue-600"})]}),!le&&de.map(xe=>{const be=he[xe],ne=be.filter(ze=>$(ze)).length,ie=be.filter(ze=>ze.CHK).length,pe=Y.has(`so_${te}_type_${xe}`);return s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-1.5 bg-gray-50 flex items-center justify-between cursor-pointer hover:bg-gray-100",onClick:()=>z(`so_${te}_type_${xe}`),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:ne>0&&ie===ne,onChange:ze=>{ze.stopPropagation(),K(te,xe,ze.target.checked)},onClick:ze=>ze.stopPropagation(),className:"rounded",disabled:ne===0}),s.jsx("span",{className:"text-xs font-semibold text-gray-700",children:xe}),s.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:[be.length,""]})]}),pe?s.jsx(hr,{className:"w-3 h-3 text-gray-500"}):s.jsx(Pr,{className:"w-3 h-3 text-gray-500"})]}),!pe&&s.jsx("div",{className:"space-y-2",children:be.map(ze=>Ge(ze))})]},xe)})]},te)})})]}),s.jsx("div",{className:"h-20"})]}):s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:m?" ...":"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"     "})]})}),u.length>0&&s.jsx("div",{className:"fixed bottom-[56px] left-0 right-0 p-3 z-40",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsxs("button",{onClick:()=>y(!0),disabled:ge===0,className:`w-full py-3 px-4 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation flex items-center justify-center gap-2 ${ge>0?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx(ho,{className:"w-4 h-4"}),"  ",ge>0&&`(${ge})`]})}),s.jsx(Em,{isOpen:p,onClose:()=>g(!1),onScan:J}),s.jsx(Oq,{isOpen:C,onClose:()=>y(!1),selectedItems:u.filter(te=>te.CHK),onProcess:ce,isProcessing:N,soList:M,userSoId:B,showToast:e}),s.jsx(wq,{isOpen:i,onClose:()=>a(!1),onSelect:q,onSerialSearch:te=>{r({...n,EQT_SERNO:te}),a(!1),setTimeout(()=>{const he={EQT_SERNO:te};_(!0),Eb(he).then(de=>{if(de&&de.length>0){const Q=de[0];Q.CUST_ID&&Q.CUST_NM&&c({CUST_ID:Q.CUST_ID,CUST_NM:Q.CUST_NM}),h(de.map(ee=>{var Z,le;return{CHK:!1,CUST_ID:ee.CUST_ID||"",CUST_NM:ee.CUST_NM||"",CTRT_ID:ee.CTRT_ID||"",EQT_NO:ee.EQT_NO||"",EQT_SERNO:ee.EQT_SERNO||"",EQT_CL_CD:ee.EQT_CL_CD||ee.EQT_CL||"",EQT_CL_NM:ee.EQT_CL_NM||ee.EQT_NM||"",ITEM_NM:ee.ITEM_NM||ee.EQT_NM||"",TRML_DT:ee.TRML_DT||((le=(Z=ee.CMPL_DATE)==null?void 0:Z.split(" ")[0])==null?void 0:le.replace(/-/g,""))||"",WRK_ID:ee.WRK_ID||"",WRKR_ID:ee.WRKR_ID||"",WRKR_NM:ee.WRKR_NM||"",SO_ID:ee.SO_ID||"",SO_NM:ee.SO_NM||X(ee.SO_ID)||"",PHONE_NO:ee.PHONE_NO||ee.TEL_NO||ee.TEL_NO_1||"",ADDRESS:ee.ADDRESS||ee.WORK_ADDR||ee.CTRT_ADDR||"",RETN_REQ_YN:ee.RETN_REQ_YN||"",LOSS_AMT:ee.LOSS_AMT||"",CRR_ID:ee.CRR_ID||"",CMPL_DATE:ee.CMPL_DATE||"",EQT_STAT_CD_NM:ee.EQT_STAT_NM||ee.EQT_STAT_CD_NM||"",isScanned:!1,MAC_ADDRESS:ee.MAC_ADDRESS||ee.MAC_ADDR||"",EQT_USE_END_DT:ee.EQT_USE_END_DT||"",CHG_KND_NM:ee.CHG_KND_NM||"",EQT_LOC_NM:ee.EQT_LOC_NM||"",EQT_LOC_TP_NM:ee.EQT_LOC_TP_NM||"",OLD_EQT_LOC_NM:ee.OLD_EQT_LOC_NM||"",ITEM_MODEL:ee.ITEM_MODEL||ee.MODEL_NM||"",EQT_USE_ARR_YN:ee.EQT_USE_ARR_YN||"",BIZ_CL_NM:ee.BIZ_CL_NM||"",MST_SO_ID:ee.MST_SO_ID||"",MST_SO_NM:ee.MST_SO_NM||""}})),e==null||e(`${de.length}   .`,"success")}else e==null||e(` (${te})   .`,"error"),h([])}).catch(()=>{e==null||e("  .","error")}).finally(()=>_(!1))},100)}})]})},Pq={10:"",11:"()",20:"",35:"",50:"",60:"",70:"",71:"",72:"",73:"AS",74:"",75:"",80:"",81:"",82:"",83:"",84:"",90:""},Aq={1:"SO()",2:"",3:"",4:""},kq=t=>Pq[t]||t,UT=t=>Aq[t]||t,gf=t=>{const e={...t};return e.EQT_STAT_CD&&!e.EQT_STAT_CD_NM&&(e.EQT_STAT_CD_NM=kq(e.EQT_STAT_CD)),e.EQT_LOC_TP_CD&&!e.EQT_LOC_TP_CD_NM&&(e.EQT_LOC_TP_CD_NM=UT(e.EQT_LOC_TP_CD)),e.OLD_EQT_LOC_TP_CD&&!e.OLD_EQT_LOC_TP_CD_NM&&(e.OLD_EQT_LOC_TP_CD_NM=UT(e.OLD_EQT_LOC_TP_CD)),e},IC=t=>{if(!t)return{name:"-",id:""};const e=t.match(/^(.+?)\(([A-Za-z0-9]+)\)$/);return e?{name:e[1],id:e[2]}:{name:t,id:""}},Uq=({onBack:t,showToast:e})=>{const[n,r]=b.useState(""),[i,a]=b.useState(!1),[o,c]=b.useState(null),[u,h]=b.useState(null),[m,_]=b.useState(null),[p,g]=b.useState([]),[C,y]=b.useState(!1),[N,v]=b.useState("manual"),[P,w]=b.useState(!1),[M,k]=b.useState([]),[B,G]=b.useState([]),U=N==="multi",I=Zi.useRef(new Set),[E,A]=b.useState(0),[Y,se]=b.useState([]),X="1644-1100",[z,$]=b.useState(!1),[F,L]=b.useState(!1),re=Zi.useRef(null),fe=()=>{try{const te=localStorage.getItem("user");if(te){const he=JSON.parse(te),de=he.USR_ID||he.WRKR_ID||he.userId||null,Q=he.soId||he.SO_ID||null,ee=he.AUTH_SO_List||null;return console.log("[]  :",{userId:de,soId:Q||"()",authSoListCount:(ee==null?void 0:ee.length)||0}),de?{userId:de,soId:Q,authSoList:ee}:null}}catch(te){console.warn("   :",te)}return null};b.useEffect(()=>{(async()=>{const he=fe();if(he){y(!0);try{let de=[];if(he.soId){const Q={WRKR_ID:he.userId,SO_ID:he.soId};console.log("[]  - SO_ID :",Q);const ee=await Ei("EquipmentList","getWrkrHaveEqtList",()=>Og(Q),Q);de=Array.isArray(ee)?ee:(ee==null?void 0:ee.data)||[]}else if(he.authSoList&&he.authSoList.length>0){console.log("[]  - AUTH_SO_List :",he.authSoList);for(const ee of he.authSoList)try{const Z={WRKR_ID:he.userId,SO_ID:ee.SO_ID},le=await Ei("EquipmentList",`getWrkrHaveEqtList(SO_ID=${ee.SO_ID})`,()=>Og(Z),Z),be=(Array.isArray(le)?le:(le==null?void 0:le.data)||[]).filter(ne=>ne.WRKR_ID===he.userId||ne.ID===he.userId);de=[...de,...be]}catch(Z){console.warn(`SO_ID ${ee.SO_ID}  :`,Z)}const Q=new Map;de.forEach(ee=>{ee.EQT_SERNO&&!Q.has(ee.EQT_SERNO)&&Q.set(ee.EQT_SERNO,ee)}),de=Array.from(Q.values()),console.log("[]   :",de.length,"")}else{const Q={WRKR_ID:he.userId};console.log("[]   (SO_ID ):",Q);const ee=await Ei("EquipmentList","getWrkrHaveEqtList",()=>Og(Q),Q);de=Array.isArray(ee)?ee:(ee==null?void 0:ee.data)||[]}g(de)}catch(de){console.warn("    :",de)}finally{y(!1)}}})()},[]);const T=te=>{const he=te.toUpperCase().replace(/[:-]/g,"");for(const de of p){const Q=(de.EQT_SERNO||de.SERIAL_NO||de.SN||"").toUpperCase().replace(/[:-]/g,"");if(Q&&Q.includes(he))return de;const ee=(de.MAC_ADDRESS||de.MAC||de.MAC_ADDR||"").toUpperCase().replace(/[:-]/g,"");if(ee&&ee.includes(he))return de;const Z=(de.EQT_NO||"").toUpperCase();if(Z&&Z.includes(he))return de}return null},j=async te=>{console.log("Barcode scanned:",te);const he=te.toUpperCase().replace(/[:-]/g,"");if(U){if(I.current.has(he)){e==null||e("  .","warning");return}I.current.add(he),A(I.current.size)}r(te.toUpperCase()),U||L(!1),e==null||e(` : ${te}`,"success");const de=te.toUpperCase();setTimeout(()=>{K(de)},100)},K=async te=>{const he=te||n.trim();if(!he){e==null||e(" .","warning");return}a(!0),_(null),U||c(null),h(null);const de=String(he||""),Q=typeof de=="string"&&de.includes(",")?[...new Set(de.split(",").map(xe=>xe.trim().toUpperCase().replace(/[\s:-]/g,"")).filter(xe=>xe.length>0))]:[de.toUpperCase().replace(/[\s:-]/g,"")].filter(xe=>xe.length>0);if(Q.length===0){e==null||e(" S/N .","warning"),a(!1);return}const ee=async xe=>{if(p.length>0){const be=T(xe);if(be)return{found:!0,equipment:be,source:"myEquipments"}}try{const be=fe(),ne={EQT_SERNO:xe,SO_ID:(be==null?void 0:be.soId)||void 0,WRKR_ID:be==null?void 0:be.userId},ie=await Ei("EquipmentList","getEquipmentHistoryInfo",()=>am(ne),ne);if(ie){const pe=Array.isArray(ie)?ie:[ie];if(pe.length>1)return{found:!0,equipments:pe,source:"getEquipmentHistoryInfo",isMultiple:!0};if(pe.length===1)return{found:!0,equipment:pe[0],source:"getEquipmentHistoryInfo"}}}catch(be){console.error("[]  :",xe,be)}return{found:!1}};if(console.log("[]  :",{searchValues:Q,count:Q.length,isMultiScanMode:U}),Q.length>1){const xe=await Promise.all(Q.map(async ie=>({searchVal:ie,...await ee(ie)}))),be=[],ne=[];if(xe.forEach(({searchVal:ie,found:pe,equipment:ze})=>{pe&&ze?be.push(ze):ne.push(ie)}),console.log("[]   :",{found:be.length,notFound:ne.length}),be.length>0){const ie=[];be.forEach(pe=>{B.some(xt=>xt.EQT_SERNO===pe.EQT_SERNO||xt.EQT_NO===pe.EQT_NO||xt.MAC_ADDRESS&&pe.MAC_ADDRESS&&xt.MAC_ADDRESS===pe.MAC_ADDRESS)||ie.push(pe)}),ie.length>0&&(G(pe=>[...pe,...ie]),ie.forEach(pe=>{const ze=(pe.EQT_SERNO||"").toUpperCase().replace(/[:-]/g,"");ze&&I.current.add(ze)}),A(I.current.size)),ne.length>0&&se(pe=>{const ze=Array.isArray(pe)?pe:[];return[...ze,...ne.filter(xt=>!ze.includes(xt))]}),$(!0),c(null),r(""),e==null||e(`${ie.length}  ${ne.length>0?`, ${ne.length} `:""}`,"success")}else se(ie=>{const pe=Array.isArray(ie)?ie:[];return[...pe,...ne.filter(ze=>!pe.includes(ze))]}),_("     ."),e==null||e("   .","error");a(!1);return}const Z=Q[0],le=await ee(Z);if(le.found){if(le.isMultiple&&le.equipments&&le.equipments.length>1){k(le.equipments),w(!0),r(""),e==null||e(`${le.equipments.length}  . .`,"info"),a(!1);return}const xe=le.equipment;if(xe)if(U)if(Ce(xe)){const ne=Array.from(I.current).join(", ");r(ne),e==null||e(` . (${B.length+1})`,"success")}else{const ne=Z.toUpperCase().replace(/[\s:-]/g,"");I.current.delete(ne),A(I.current.size);const ie=Array.from(I.current).join(", ");r(ie||"")}else c(gf(xe)),h({successApi:le.source,data:xe,source:le.source}),e==null||e("  .","success")}else if(U){I.current.delete(Z),A(I.current.size),se(be=>{const ne=Array.isArray(be)?be:[];return ne.includes(Z)?ne:[...ne,Z]});const xe=Array.from(I.current).join(", ");r(xe),e==null||e("   .","error")}else _("   . S/N  MAC  ."),e==null||e("   .","error");a(!1)},J=({label:te,value:he})=>s.jsxs("div",{className:"flex border-b border-gray-100 py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-gray-500",children:te}),s.jsx("span",{className:"flex-1 text-xs text-gray-900 font-medium break-all",children:he||"-"})]}),q=({title:te})=>s.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white px-3 py-2 -mx-4 mt-4 mb-2 first:mt-0 border-y border-gray-100",children:s.jsx("h4",{className:"text-xs font-bold text-gray-600",children:te})}),V=te=>{const he=B[te];if(he){const de=(he.EQT_SERNO||he.MAC_ADDRESS||"").toUpperCase().replace(/[:-]/g,"");I.current.delete(de)}G(de=>de.filter((Q,ee)=>ee!==te))},ce=()=>{L(!1),U&&(B.length>0||Y.length>0||E>0)&&($(!0),c(null))},me=()=>{window.location.href=`tel:${X}`},Ce=te=>B.some(de=>de.EQT_SERNO===te.EQT_SERNO||de.EQT_NO===te.EQT_NO||de.MAC_ADDRESS&&te.MAC_ADDRESS&&de.MAC_ADDRESS===te.MAC_ADDRESS)?(e==null||e("  . ( )","warning"),!1):(G(de=>[...de,te]),!0),[ge,Ge]=b.useState(null);return b.useEffect(()=>()=>{ge&&clearTimeout(ge)},[ge]),s.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50 px-4 py-4 space-y-3",children:[s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 w-14 flex-shrink-0",children:"S/N"}),s.jsx("input",{ref:re,type:"text",value:n,onChange:te=>r(te.target.value.toUpperCase()),onKeyDown:te=>te.key==="Enter"&&K(),className:"flex-1 min-w-0 px-3 py-2.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase transition-all font-mono",placeholder:"S/N  MAC  ",autoFocus:!0}),s.jsxs("button",{onClick:()=>L(!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] touch-manipulation flex items-center gap-1.5 flex-shrink-0",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),""]})]}),s.jsx("button",{onClick:()=>K(),disabled:i||!n.trim(),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-3 rounded-lg font-semibold text-sm shadow-sm transition-all active:scale-[0.98] touch-manipulation flex items-center justify-center gap-2",style:{WebkitTapHighlightColor:"transparent"},children:i?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):""})]})}),U&&B.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-sm font-bold text-blue-700 flex items-center gap-2",children:[s.jsx("span",{children:"  "}),s.jsxs("span",{className:"bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full text-xs",children:[B.length,""]})]}),s.jsx("button",{onClick:()=>$(!z),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${z?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:z?" ":" "})]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:B.map((te,he)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsxs("div",{className:"flex-1 cursor-pointer active:bg-gray-100 rounded-lg -m-1 p-1",onClick:()=>c(gf(te)),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-800",children:te.EQT_CL_NM||te.ITEM_NM||""}),s.jsx("span",{className:"text-xs text-gray-500 font-mono",children:te.EQT_SERNO||"-"})]}),s.jsxs("div",{className:"text-[10px] text-gray-400 mt-0.5",children:[te.EQT_STAT_CD_NM||te.EQT_USE_STAT_CD_NM||"",(()=>{const de=IC(te.EQT_LOC_NM);return de.id?`  ${de.name}(${de.id})`:te.WRKR_NM?`  ${te.WRKR_NM}`:""})()]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>c(gf(te)),className:"text-blue-500 hover:text-blue-700 p-1.5 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),s.jsx("button",{onClick:()=>V(he),className:"text-red-400 hover:text-red-600 p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},he))})]}),U&&z&&B.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-green-200 shadow-sm p-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-green-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"  "}),s.jsxs("span",{className:"bg-green-100 text-green-600 px-2 py-0.5 rounded-full text-xs",children:[B.length,""]})]}),s.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:B.map((te,he)=>{const de=gf(te);return s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-all active:scale-[0.99]",onClick:()=>{c(de),$(!1)},children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsxs("span",{className:"bg-blue-500 text-white text-xs font-bold px-1.5 py-0.5 rounded flex-shrink-0",children:["#",he+1]}),s.jsx("span",{className:"font-bold text-gray-800 text-sm truncate",children:de.EQT_CL_NM||de.ITEM_NM||""})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-semibold whitespace-nowrap ${de.EQT_STAT_CD==="10"?"bg-green-100 text-green-700":de.EQT_STAT_CD==="20"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:de.EQT_STAT_CD_NM||"-"}),s.jsx("span",{className:"text-[10px] text-blue-500 whitespace-nowrap",children:""})]})]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:"S/N"}),s.jsx("span",{className:"font-mono text-gray-800 truncate",children:de.EQT_SERNO||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:"MAC"}),s.jsx("span",{className:"font-mono text-gray-700 truncate",children:de.MAC_ADDRESS||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:"No."}),s.jsx("span",{className:"font-mono text-gray-700 truncate",children:de.EQT_NO||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-8 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:de.EQT_LOC_TP_CD_NM||"-"}),de.EQT_LOC_NM&&s.jsxs("span",{className:"text-gray-500 ml-1 truncate",children:[" ",de.EQT_LOC_NM]})]})]})]},he)})})]}),m&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"   "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"S/N  MAC  "})]})}),o&&!z&&s.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("h3",{className:"text-sm font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-500",children:""}),"   "]})})}),s.jsxs("div",{className:"p-4 max-h-[60vh] overflow-y-auto",children:[s.jsx(q,{title:" "}),s.jsx(J,{label:"",value:o.EQT_NO}),s.jsx(J,{label:"(S/N)",value:o.EQT_SERNO}),s.jsx(J,{label:"MAC ",value:o.MAC_ADDRESS}),s.jsx(q,{title:" "}),s.jsx(J,{label:"",value:o.EQT_CL_NM||o.EQT_CL_CD}),s.jsx(J,{label:"",value:o.EQT_TP_CD_NM||o.EQT_TP_CD}),s.jsx(J,{label:"",value:o.ITEM_CD}),s.jsx(J,{label:"",value:o.ITEM_NM}),s.jsx(J,{label:"",value:o.MAKER}),s.jsx(J,{label:"",value:o.MNFCT_DT}),s.jsxs("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-3 -mx-4 my-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-amber-50 px-3 py-2 -mx-3 -mt-3 mb-2 border-b border-amber-200",children:s.jsxs("h4",{className:"text-xs font-bold text-amber-700 flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})," "]})}),s.jsxs("div",{className:"flex border-b border-amber-200 py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-amber-700 font-medium",children:""}),s.jsx("span",{className:"flex-1 text-xs text-gray-900 font-medium break-all",children:o.EQT_STAT_CD_NM||o.EQT_STAT_CD||"-"})]}),s.jsxs("div",{className:"flex border-b border-amber-200 py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-amber-700 font-medium",children:""}),s.jsx("span",{className:`flex-1 text-xs font-bold break-all ${o.EQT_USE_ARR_YN==="Y"?"text-green-600":o.EQT_USE_ARR_YN==="A"?"text-purple-600":o.EQT_USE_ARR_YN==="N"?"text-red-600":"text-gray-900"}`,children:o.EQT_USE_ARR_YN_NM||o.EQT_USE_ARR_YN||"-"})]}),s.jsxs("div",{className:"flex py-1.5",children:[s.jsx("span",{className:"w-28 flex-shrink-0 text-xs text-amber-700 font-medium",children:""}),s.jsx("span",{className:"flex-1 text-xs text-gray-900 font-medium break-all",children:o.EQT_USE_END_DT||"-"})]})]}),s.jsx(q,{title:" "}),s.jsx(J,{label:"",value:o.EQT_LOC_NM||o.EQT_LOC_TP_CD_NM}),s.jsx(J,{label:"",value:o.OLD_EQT_LOC_NM||o.OLD_EQT_LOC_TP_CD_NM}),s.jsx(q,{title:"/"}),s.jsx(J,{label:"",value:o.SO_NM||o.SO_ID}),s.jsx(J,{label:"",value:o.CRR_NM||o.CRR_ID}),s.jsx(J,{label:"",value:o.OLD_SO_NM||o.OLD_SO_ID}),s.jsx(J,{label:"",value:o.OLD_CRR_NM||o.OLD_CRR_ID}),s.jsx(q,{title:" "}),s.jsx(J,{label:"",value:(()=>{const te=IC(o.EQT_LOC_NM);return te.id?`${te.name} (${te.id})`:o.WRKR_NM?`${o.WRKR_NM} (${o.WRKR_ID})`:o.WRKR_ID||"-"})()}),s.jsx(J,{label:"",value:(()=>{const te=IC(o.OLD_EQT_LOC_NM);return te.id?`${te.name} (${te.id})`:o.OLD_WRKR_NM?`${o.OLD_WRKR_NM} (${o.OLD_WRKR_ID})`:o.OLD_WRKR_ID||"-"})()}),s.jsx(q,{title:"/ "}),s.jsx(J,{label:"ID",value:o.CUST_ID}),s.jsx(J,{label:"",value:o.CUST_NM}),s.jsx(J,{label:"ID",value:o.CTRT_ID}),s.jsx(q,{title:" "}),s.jsx(J,{label:"",value:o.FIRST_IN_DT}),s.jsx(q,{title:"STB  "}),s.jsx(J,{label:"CM MAC",value:o.STB_CM_MAC_ADDR}),s.jsx(J,{label:"RTCA ID",value:o.STB_RTCA_ID}),s.jsx(q,{title:" "}),s.jsx(J,{label:"",value:o.CHG_KND_CD_NM||o.CHG_KND_CD}),s.jsx(J,{label:"",value:o.CHG_DATE}),s.jsx(J,{label:"",value:o.CHG_UID_NM||o.CHG_UID})]})]}),u&&s.jsx("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:s.jsxs("details",{children:[s.jsx("summary",{className:"text-xs font-medium text-gray-600 cursor-pointer",children:"API   ()"}),s.jsx("pre",{className:"mt-2 text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap bg-white p-3 rounded-lg border border-gray-100 max-h-48 overflow-y-auto",children:JSON.stringify(u,null,2)})]})}),!i&&!o&&!m&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"  "}),s.jsx("p",{className:"text-gray-400 text-xs",children:"S/N  MAC   "})]})}),!o&&p.length>0&&s.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:s.jsxs("details",{children:[s.jsxs("summary",{className:"text-xs font-medium text-gray-700 cursor-pointer",children:["    (",p.length,")"]}),s.jsxs("div",{className:"mt-3 space-y-2 max-h-48 overflow-y-auto",children:[p.slice(0,20).map((te,he)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg text-xs cursor-pointer hover:bg-blue-50 transition-colors active:scale-[0.99] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"},onClick:()=>{r(te.EQT_SERNO||te.SERIAL_NO||te.MAC_ADDRESS||te.MAC||""),c(gf(te)),h({source:"    ",data:te})},children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-800",children:te.EQT_CL_NM||te.EQT_TP_CD||""}),s.jsx("span",{className:"ml-2 text-gray-500 font-mono",children:te.EQT_SERNO||te.SERIAL_NO||"-"})]}),s.jsx("span",{className:"text-gray-400 text-xs bg-gray-100 px-2 py-0.5 rounded",children:te.EQT_STAT_CD_NM||te.EQT_USE_STAT_CD||""})]},he)),p.length>20&&s.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["...  ",p.length-20,""]})]})]})}),Y.length>0&&s.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-200 shadow-sm p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-sm font-bold text-red-700 flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"  "}),s.jsxs("span",{className:"bg-red-100 text-red-600 px-2 py-0.5 rounded-full text-xs",children:[Y.length,""]})]}),s.jsx("button",{onClick:()=>se([]),className:"text-xs text-red-500 hover:text-red-700",children:" "})]}),s.jsx("div",{className:"space-y-2 mb-4",children:Y.map((te,he)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg border border-red-100",children:[s.jsx("span",{className:"text-xs font-mono text-red-800",children:te}),s.jsx("span",{className:"text-xs text-red-500",children:""})]},he))}),s.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[s.jsxs("p",{className:"text-xs text-gray-600 mb-3 text-center",children:["  .",s.jsx("br",{}),"     ."]}),s.jsxs("button",{onClick:me,className:"w-full py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold text-sm transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),X," "]})]})]}),s.jsx(Em,{isOpen:F,onClose:ce,onScan:j,isMultiScanMode:U,scanCount:E}),P&&M.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-white rounded-t-2xl flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-base font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-500",children:""})," "]}),s.jsx("button",{onClick:()=>{w(!1),k([])},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[M.length,"  .  ."]})]}),s.jsx("div",{className:"p-4 space-y-3 overflow-y-auto flex-1",children:M.map((te,he)=>{const de=gf(te),Q=(de.EQT_STAT_CD_NM||"").includes("")||(de.CHG_KND_CD_NM||"").includes(""),ee=de.EQT_USE_ARR_YN==="Y"||(de.EQT_USE_ARR_YN_NM||"").includes("");return s.jsxs("div",{className:`p-4 rounded-xl border-2 cursor-pointer transition-all active:scale-[0.98] ${Q?"bg-red-50 border-red-200 hover:bg-red-100 hover:border-red-300":"bg-green-50 border-green-200 hover:bg-green-100 hover:border-green-300"}`,onClick:()=>{c(de),w(!1),k([]),h({source:"multiple_result_selection",data:de}),e==null||e(" .","success")},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${Q?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:Q?" ":" "}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ee?"bg-blue-100 text-blue-700":"bg-gray-200 text-gray-600"}`,children:de.EQT_USE_ARR_YN_NM||(ee?"":"")})]}),s.jsxs("span",{className:"text-xs text-gray-400",children:[he+1,"/",M.length]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"font-bold text-gray-800 text-sm mb-1",children:de.EQT_CL_NM||de.ITEM_NM||""}),s.jsxs("div",{className:"text-xs text-gray-500",children:[de.ITEM_MODEL&&`: ${de.ITEM_MODEL}`,de.MAKER&&`  ${de.MAKER}`]})]}),s.jsxs("div",{className:"space-y-1.5 text-xs bg-white/60 rounded-lg p-2.5",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"S/N"}),s.jsx("span",{className:"font-mono text-gray-800 font-medium",children:de.EQT_SERNO||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:`font-medium ${Q?"text-red-600":"text-green-600"}`,children:de.EQT_STAT_CD_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:`${de.EQT_TP_CD_NM===""?"text-orange-600":"text-gray-700"}`,children:de.EQT_TP_CD_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-700",children:de.EQT_LOC_NM||de.SO_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:`${Q?"text-red-600 font-medium":"text-gray-700"}`,children:de.CHG_KND_CD_NM||"-"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-400 w-16 flex-shrink-0",children:""}),s.jsx("span",{className:"text-gray-600",children:de.CHG_DATE?de.CHG_DATE.split(" ")[0]:"-"})]})]}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsxs("span",{className:`text-xs flex items-center gap-1 px-3 py-1.5 rounded-lg ${Q?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:["  ",s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]},he)})}),s.jsx("div",{className:"px-5 py-3 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex-shrink-0",children:s.jsx("button",{onClick:()=>{w(!1),k([])},className:"w-full py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium text-sm transition-all",children:""})})]})})]})},Bq=({onNavigateToMenu:t,showToast:e})=>{const[n,r]=b.useState("equipment-assignment"),i=[{id:"equipment-assignment",title:"",description:"    "},{id:"equipment-inquiry",title:"",description:"    /  / "},{id:"equipment-list",title:"",description:"S/N     "},{id:"equipment-movement",title:"",description:"    "},{id:"equipment-recovery",title:"",description:"   "}],a=o=>{r(o)};return s.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col bg-gray-50 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 z-40",children:s.jsx(cS,{tabs:i,activeTab:n,onTabChange:a})}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsx("div",{style:{display:n==="equipment-assignment"?"contents":"none"},children:s.jsx(yq,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-inquiry"?"contents":"none"},children:s.jsx(Dq,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-list"?"contents":"none"},children:s.jsx(Uq,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-movement"?"contents":"none"},children:s.jsx(Tq,{onBack:t,showToast:e})}),s.jsx("div",{style:{display:n==="equipment-recovery"?"contents":"none"},children:s.jsx(Lq,{onBack:t,showToast:e})})]})]})},BT=[{id:"getEquipmentInfo",category:"-",name:"[]    ",path:"/work/equipment-info",description:"GET -     (workmanAssignManagement.getCustProdInfo)",params:[{name:"CTRT_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1},{name:"WRKR_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"BLD_ID",type:"string",required:!1},{name:"QUERY_TYPE",type:"string",required:!1}]},{id:"getCustProdInfo",category:"-",name:"[] /  ",path:"/customer/work/getCustProdInfo",description:"POST - /    (workmanAssignManagement.getCustProdInfo)",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"SO_ID",type:"string",required:!1},{name:"WORK_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"CRR_TSK_CL",type:"string",required:!1},{name:"WRK_DTL_TCD",type:"string",required:!1},{name:"CTRT_ID",type:"string",required:!1},{name:"requestType",type:"string",required:!1}]},{id:"equipmentWorkerTransfer",category:"-",name:"[]   ",path:"/equipment/worker-transfer",description:"POST -     (equipmentManager.changeEqtWrkr_3)",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1},{name:"EQT_NO",type:"string",required:!1},{name:"CRR_ID",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"eqtCmpsInfoChg",category:"-",name:"[]   ",path:"/customer/work/eqtCmpsInfoChg",description:"POST -     (workmanAssignManagement.eqtCmpsInfoChg)",params:[{name:"WRK_ID",type:"string",required:!1},{name:"RCPT_ID",type:"string",required:!1},{name:"CTRT_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"CRR_ID",type:"string",required:!1},{name:"WRKR_ID",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1},{name:"equipments",type:"array",required:!0,default:"[]"}]},{id:"signalCheck",category:"-",name:"[]   (Stub)",path:"/customer/work/signalCheck",description:"POST -   ( stub )",params:[{name:"CUST_ID",type:"string",required:!1},{name:"WRK_ID",type:"string",required:!1},{name:"CHECK_TYPE",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1}]},{id:"ensHistory",category:"-",name:"[] ENS  ",path:"/signal/ens-history",description:"GET - ENS    (sigtransManagement.getENSSendHist)",params:[{name:"CUST_ID",type:"string",required:!1},{name:"DEST_INFO",type:"string",required:!1},{name:"REG_DATE1",type:"string",required:!1},{name:"REG_DATE2",type:"string",required:!1},{name:"RSLT_DATE1",type:"string",required:!1},{name:"RSLT_DATE2",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1}]},{id:"checkStbServerConnection",category:"-",name:"[] STB   ",path:"/customer/work/checkStbServerConnection",description:"POST - STB     (workmanAssignManagement.checkStbServerConnection)",params:[{name:"REG_UID",type:"string",required:!1},{name:"CTRT_ID",type:"string",required:!1},{name:"WRK_ID",type:"string",required:!1},{name:"MSG_ID",type:"string",required:!1},{name:"STB_EQT_NO",type:"string",required:!1},{name:"MODEM_EQT_NO",type:"string",required:!1}]},{id:"getEquipmentNmListOfProd",category:"-",name:"[]   ",path:"/customer/receipt/contract/getEquipmentNmListOfProd",description:"POST -     (contract.getEquipmentNmListOfProd)",params:[{name:"CTRT_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1}]},{id:"getContractEqtList",category:"-",name:"[]   ",path:"/customer/receipt/contract/getContractEqtList",description:"POST -     (contract.getContractEqtList)",params:[{name:"CTRT_ID",type:"string",required:!1},{name:"PROD_CD",type:"string",required:!1}]},{id:"getCustomerCtrtInfo",category:"-",name:"[]   ",path:"/customer/negociation/getCustomerCtrtInfo",description:"POST -     (commonCodeManagement.getCustomerCtrtInfo)",params:[{name:"CTRT_ID",type:"string",required:!0}]},{id:"getWorkReceiptList",category:"-",name:"[]   ",path:"/work/receipts",description:"GET -     (workmanAssignManagement.getWorkReceiptList)",params:[{name:"WRKR_ID",type:"string",required:!1},{name:"WORK_DT",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1}]},{id:"getWorkdrctnList",category:"-",name:"[]   ",path:"/work/directions",description:"GET -     (workmanAssignManagement.getWorkdrctnList)",params:[{name:"WRKR_ID",type:"string",required:!1},{name:"WORK_DT",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1}]},{id:"modWorkCancel",category:"-",name:"[]  ",path:"/work/cancel",description:"POST -    (workmanAssignManagement.modWorkCancel)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"CANCEL_REASON",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"modWorkComplete",category:"-",name:"[]  ",path:"/work/complete",description:"POST -    (workmanAssignManagement.modWorkComplete)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"COMPLETE_MEMO",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"modWorkDivision",category:"-",name:"[]  ",path:"/work/worker-adjustment",description:"POST -  / (workmanAssignManagement.modWorkDivision)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"FROM_WRKR_ID",type:"string",required:!0},{name:"TO_WRKR_ID",type:"string",required:!0},{name:"REG_UID",type:"string",required:!1}]},{id:"workCompleteWithParams",category:"-",name:"[]   ()",path:"/customer/work/workComplete",description:"POST -    with 7 parameters (workmanAssignManagement.modWorkComplete)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"COMPLETE_DT",type:"string",required:!1},{name:"COMPLETE_MEMO",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"getRsltSinho4Wrk",category:"-",name:"[]   ",path:"/work/result-signals",description:"POST -     (equipmentManager.getRsltSinho4Wrk_2)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1}]},{id:"saveInstallInfo",category:"-",name:"[]   ",path:"/customer/work/saveInstallInfo",description:"POST -    (workmanAssignManagement.modNetInfo)",params:[{name:"WRK_ID",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"INSTALL_ADDR",type:"string",required:!1},{name:"INSTALL_MEMO",type:"string",required:!1},{name:"REG_UID",type:"string",required:!1}]},{id:"getEquipmentHistoryInfo",category:"-",name:"[]    (S/N, MAC)",path:"/statistics/equipment/getEquipmentHistoryInfo",description:"POST - S/N  MAC     (  )",params:[{name:"EQT_SERNO",type:"string",required:!1},{name:"MAC_ADDRESS",type:"string",required:!1}]},{id:"getEquipmentOutList",category:"-",name:"[]   ",path:"/customer/equipment/getEquipmentOutList",description:"POST - /    (  )",params:[{name:"FROM_OUT_REQ_DT",type:"string",required:!0,default:"20250101"},{name:"TO_OUT_REQ_DT",type:"string",required:!0,default:"20250131"},{name:"SO_ID",type:"string",required:!1},{name:"OUT_REQ_NO",type:"string",required:!1},{name:"PROC_STAT",type:"string",required:!1}]},{id:"checkEquipmentProc",category:"-",name:"[]     ",path:"/customer/equipment/getEquipmentProcYnCheck",description:"POST -       (  )",params:[{name:"OUT_REQ_NO",type:"string",required:!0}]},{id:"addEquipmentQuota",category:"-",name:"[]    ()",path:"/customer/equipment/addCorporationEquipmentQuota",description:"POST -     (  )",params:[{name:"OUT_REQ_NO",type:"string",required:!0},{name:"equipmentList",type:"array",required:!0,default:"[]"}]},{id:"getEquipmentReturnRequestList",category:"-",name:"[]     ()",path:"/customer/equipment/getEquipmentReturnRequestList",description:"POST -      (  )",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"SO_ID",type:"string",required:!1}]},{id:"checkEquipmentReturn",category:"-",name:"[]   ",path:"/customer/equipment/getEquipmentReturnRequestCheck",description:"POST -     (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0}]},{id:"addEquipmentReturnRequest",category:"-",name:"[]   ",path:"/customer/equipment/addEquipmentReturnRequest",description:"POST -     (  )",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"equipmentList",type:"array",required:!0,default:"[]"}]},{id:"getWorkerEquipmentList",category:"-",name:"[]    ",path:"/customer/equipment/getWrkrHaveEqtList",description:"POST -      (  )",params:[{name:"WRKR_ID",type:"string",required:!0},{name:"SO_ID",type:"string",required:!1},{name:"ITEM_MID_CD",type:"string",required:!1},{name:"EQT_SERNO",type:"string",required:!1}]},{id:"changeEquipmentWorker",category:"-",name:"[]    ()",path:"/customer/equipment/changeEqtWrkr_3",description:"POST -     (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"FROM_WRKR_ID",type:"string",required:!0},{name:"TO_WRKR_ID",type:"string",required:!0}]},{id:"processEquipmentLoss",category:"-",name:"[]   ",path:"/customer/equipment/cmplEqtCustLossIndem",description:"POST -    (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"WRKR_ID",type:"string",required:!0},{name:"LOSS_REASON",type:"string",required:!1}]},{id:"setEquipmentCheckStandby",category:"-",name:"[]    ()",path:"/customer/equipment/setEquipmentChkStndByY",description:"POST -      (  )",params:[{name:"EQT_NO",type:"string",required:!0}]},{id:"getUnreturnedEquipmentList",category:"-",name:"[]   ",path:"/customer/work/getEquipLossInfo",description:"POST -     (  )",params:[{name:"FROM_DT",type:"string",required:!1},{name:"TO_DT",type:"string",required:!1},{name:"CUST_ID",type:"string",required:!1},{name:"CUST_NM",type:"string",required:!1},{name:"EQT_SERNO",type:"string",required:!1}]},{id:"processEquipmentRecovery",category:"-",name:"[]    ",path:"/customer/work/modEquipLoss",description:"POST -      (  )",params:[{name:"EQT_NO",type:"string",required:!0},{name:"CTRT_ID",type:"string",required:!0},{name:"WRK_ID",type:"string",required:!1}]},{id:"findUserList",category:"-",name:"[] () ",path:"/system/cm/getFindUsrList3",description:"POST - /ID   (  )",params:[{name:"USR_NM",type:"string",required:!1},{name:"USR_ID",type:"string",required:!1},{name:"SO_ID",type:"string",required:!1}]},{id:"sendSmsNotification",category:"-",name:"[]   (ENS)",path:"/customer/sigtrans/saveENSSendHist",description:"POST -   (   ) (  )",params:[{name:"RECV_PHONE_NO",type:"string",required:!0},{name:"MSG_CONTENT",type:"string",required:!0},{name:"SEND_UID",type:"string",required:!0}]},{id:"changeEqtWrkrBatch",category:"-",name:"[]    ()",path:"/customer/equipment/changeEqtWrkr_3",description:"POST -       (  )",params:[{name:"FROM_WRKR_ID",type:"string",required:!0},{name:"TO_WRKR_ID",type:"string",required:!0},{name:"equipmentList",type:"array",required:!0,default:"[]"}]},{id:"getCodeDetail",category:"-",name:"[]  ",path:"/system/cm/getCodeDetail",description:"POST -      (  )",params:[{name:"GRP_CD",type:"string",required:!0,default:"EQT_STS"}]},{id:"getTodayWorkList",category:"-",name:"[]   ",path:"/customer/work/getTodayWorkList",description:"POST -      (  )",params:[{name:"WORK_DT",type:"string",required:!1},{name:"WRKR_ID",type:"string",required:!1}]}],Gq=()=>{const[t,e]=b.useState(null),[n,r]=b.useState({}),[i,a]=b.useState([]),[o,c]=b.useState(null),[u,h]=b.useState(!1),[m,_]=b.useState(""),[p,g]=b.useState("");b.useEffect(()=>{const G=localStorage.getItem("apiExplorer_calls");if(G)try{a(JSON.parse(G))}catch(U){console.error("Failed to restore API calls",U)}},[]),b.useEffect(()=>{localStorage.setItem("apiExplorer_calls",JSON.stringify(i))},[i]),b.useEffect(()=>{if(t){const G={},U=localStorage.getItem("userInfo");let I=null;if(U)try{I=JSON.parse(U)}catch(E){console.error("Failed to parse userInfo",E)}t.params.forEach(E=>{if(E.default!==void 0&&(G[E.name]=E.default),I)switch(E.name){case"WRKR_ID":G[E.name]=I.workerId||"A20130708";break;case"SO_ID":case"MST_SO_ID":G[E.name]=I.soId||"";break;case"CRR_ID":G[E.name]=I.crrId||"";break;case"REG_UID":case"SEND_UID":G[E.name]=I.userId||I.workerId||"";break;case"USR_ID":G[E.name]=I.userId||"";break}}),r(G)}},[t]);const C=(G,U)=>{r(I=>({...I,[G]:U}))},y=async()=>{if(!t)return;const G=`${Date.now()}-${Math.random()}`,U=performance.now(),I={id:G,timestamp:new Date().toISOString(),method:"POST",url:t.path,params:{...n},response:null,error:null,duration:0,status:"pending"};a(E=>[I,...E]),c(I),h(!0);try{const E=await fetch(`/api${t.path}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),Y=performance.now()-U;if(!E.ok)throw new Error(`HTTP ${E.status}: ${E.statusText}`);const se=await E.json();a(X=>X.map(z=>z.id===G?{...z,response:se,duration:Math.round(Y),status:"success"}:z)),c({...I,response:se,duration:Math.round(Y),status:"success"})}catch(E){const Y=performance.now()-U;a(se=>se.map(X=>X.id===G?{...X,error:E.message,duration:Math.round(Y),status:"error"}:X)),c({...I,error:E.message,duration:Math.round(Y),status:"error"})}finally{h(!1)}},N=()=>{confirm(" API   ?")&&(a([]),c(null),localStorage.removeItem("apiExplorer_calls"))},v=()=>{if(!t)return;const G=localStorage.getItem("userInfo");let U=null;if(G)try{U=JSON.parse(G)}catch(E){console.error("Failed to parse userInfo",E)}const I={...n};t.params.forEach(E=>{if(!(I[E.name]&&I[E.name]!==""))switch(E.name){case"WORK_ID":case"WRK_ID":I[E.name]="W202501020001";break;case"RCPT_ID":I[E.name]="R202501020001";break;case"CTRT_ID":I[E.name]="C202501020001";break;case"WRK_DRCTN_ID":I[E.name]="D202501020001";break;case"EQT_NO":I[E.name]="EQ20250102001";break;case"EQT_SERNO":I[E.name]="SN20250102001";break;case"ITEM_MID_CD":I[E.name]="05";break;case"EQT_CL_CD":case"EQT_CL":I[E.name]="090401";break;case"MAC_ADDRESS":I[E.name]="00:11:22:33:44:55";break;case"CUST_ID":I[E.name]="CUST20250102001";break;case"CUST_NM":I[E.name]="";break;case"PHONE_NO":case"RECV_PHONE_NO":I[E.name]="010-1234-5678";break;case"WORK_DT":case"FROM_DT":case"TO_DT":const A=new Date().toISOString().slice(0,10).replace(/-/g,"");I[E.name]=A;break;case"WRK_STAT_CD":I[E.name]="2";break;case"EQT_USE_STAT_CD":I[E.name]="1";break;case"PROD_CD":I[E.name]="PROD001";break;case"SVC_CD":I[E.name]="SVC001";break;case"BLD_ID":I[E.name]="BLD20250102001";break;case"ADDR_ORD":I[E.name]="1";break;case"GRP_CD":I[E.name]="EQT_STS";break;case"USR_NM":I[E.name]="";break;case"MSG_CONTENT":I[E.name]=" .";break;case"LOSS_REASON":I[E.name]="";break}}),r(I)},P=()=>{const G=JSON.stringify(i,null,2),U="data:application/json;charset=utf-8,"+encodeURIComponent(G),I=`api-calls-${new Date().toISOString().slice(0,10)}.json`,E=document.createElement("a");E.setAttribute("href",U),E.setAttribute("download",I),E.click()},w=()=>{const G=["Timestamp","Method","URL","Status","Duration (ms)","Error"],U=i.map(se=>[se.timestamp,se.method,se.url,se.status,se.duration,se.error||""]),I=[G.join(","),...U.map(se=>se.map(X=>`"${X}"`).join(","))].join(`
`),E="data:text/csv;charset=utf-8,"+encodeURIComponent(I),A=`api-calls-${new Date().toISOString().slice(0,10)}.csv`,Y=document.createElement("a");Y.setAttribute("href",E),Y.setAttribute("download",A),Y.click()},M=BT.filter(G=>{const U=m===""||G.name.toLowerCase().includes(m.toLowerCase())||G.path.toLowerCase().includes(m.toLowerCase()),I=p===""||G.category===p;return U&&I}),k=["",...Array.from(new Set(BT.map(G=>G.category)))],B=i.filter(G=>m===""?!0:G.url.toLowerCase().includes(m.toLowerCase())||JSON.stringify(G.params).toLowerCase().includes(m.toLowerCase()));return s.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"API Explorer"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"D-Live   API  "})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"API "}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("select",{value:p,onChange:G=>g(G.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",children:k.map(G=>s.jsx("option",{value:G,children:G},G))})]}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",placeholder:"...",value:m,onChange:G=>_(G.target.value),className:"w-full border border-gray-300 rounded px-3 py-2"})}),s.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:M.map(G=>s.jsxs("button",{onClick:()=>e(G),className:`w-full text-left p-3 rounded border ${(t==null?void 0:t.id)===G.id?"bg-blue-50 border-blue-500":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("div",{className:"font-medium text-sm",children:G.name}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:G.path}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:G.category})]},G.id))})]})}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),t?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-medium text-lg",children:t.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),s.jsxs("code",{className:"block bg-gray-100 p-2 rounded mt-2 text-sm",children:["POST ",t.path]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium",children:""}),t.params.length>0&&s.jsx("button",{onClick:v,className:"text-xs bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200",children:"  "})]}),t.params.length>0?s.jsx("div",{className:"space-y-3",children:t.params.map(G=>{var U;return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[G.name,G.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"}),s.jsxs("span",{className:"text-gray-400 ml-2 text-xs",children:["(",G.type,")"]})]}),s.jsx("input",{type:"text",value:n[G.name]||"",onChange:I=>C(G.name,I.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:((U=G.default)==null?void 0:U.toString())||""})]},G.name)})}):s.jsx("p",{className:"text-sm text-gray-500",children:" "})]}),s.jsx("button",{onClick:y,disabled:u,className:"w-full bg-blue-600 text-white py-3 rounded font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:u?" ...":"API "})]}):s.jsx("p",{className:"text-gray-500 text-center py-8",children:" API  "})]}),o&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-medium",children:""}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${o.status==="success"?"bg-green-100 text-green-800":o.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:o.status}),s.jsxs("span",{className:"text-xs text-gray-500",children:[o.duration,"ms"]})]})]}),o.error?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 text-red-700 text-sm",children:o.error}):o.response?s.jsx("div",{className:"bg-gray-50 rounded p-3 max-h-[400px] overflow-y-auto",children:s.jsx("pre",{className:"text-xs",children:JSON.stringify(o.response,null,2)})}):s.jsx("p",{className:"text-gray-500 text-sm",children:"  ..."})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:P,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",disabled:i.length===0,children:"JSON"}),s.jsx("button",{onClick:w,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",disabled:i.length===0,children:"CSV"}),s.jsx("button",{onClick:N,className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",disabled:i.length===0,children:""})]})]}),s.jsx("div",{className:"space-y-2 max-h-[800px] overflow-y-auto",children:B.length>0?B.map(G=>s.jsxs("button",{onClick:()=>c(G),className:`w-full text-left p-3 rounded border ${(o==null?void 0:o.id)===G.id?"bg-blue-50 border-blue-500":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(G.timestamp).toLocaleTimeString("ko-KR")}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${G.status==="success"?"bg-green-100 text-green-800":G.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[G.duration,"ms"]})]}),s.jsx("div",{className:"text-sm font-medium truncate",children:G.url}),G.error&&s.jsx("div",{className:"text-xs text-red-600 truncate mt-1",children:G.error})]},G.id)):s.jsx("p",{className:"text-gray-500 text-center py-8 text-sm",children:"  "})})]})})]})]})})},Wq=({onBack:t,userInfo:e,showToast:n})=>{const[r,i]=b.useState([]),[a,o]=b.useState(null),[c,u]=b.useState(!1),[h,m]=b.useState(null);b.useEffect(()=>{_()},[]);const _=async()=>{try{u(!0),m(null);const N=new Date,v=new Date;v.setMonth(N.getMonth()-1);const P={ENTR_NO:"",CTRT_ID:"",WORK_DT_FROM:v.toISOString().slice(0,10).replace(/-/g,""),WORK_DT_TO:N.toISOString().slice(0,10).replace(/-/g,""),WRKR_ID:(e==null?void 0:e.userId)||""},w=await $P(P);i(w),w.length>0&&o(w[0]),console.log(" LGU    :",w.length)}catch(N){console.error(" LGU    :",N),m("   .")}finally{u(!1)}},p=N=>{o(N)},g=()=>{n&&n("   .","info")},C=()=>{if(!a||!a.CONSREQNO){n&&n("     .","warning");return}n&&n("   .","info")},y=()=>{if(!a||!a.CONSREQNO){n&&n("     .","warning");return}n&&n("   .","info")};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-2 sm:mb-3 flex items-center justify-between gap-2",children:[s.jsx("div",{children:s.jsx("h2",{className:"text-base sm:text-lg font-bold text-gray-900",children:"(LGU) "})}),s.jsxs("button",{onClick:_,disabled:c,className:"flex items-center gap-1 px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-100 hover:bg-gray-200 rounded text-xs sm:text-sm text-gray-700 disabled:opacity-50",children:[s.jsx(Co,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 ${c?"animate-spin":""}`}),""]})]}),c?s.jsxs("div",{className:"text-center p-6 sm:p-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-4 border-orange-500 border-t-transparent"}),s.jsx("p",{className:"mt-2 text-gray-600 text-sm sm:text-base",children:" ..."})]}):h?s.jsxs("div",{className:"text-center p-6 sm:p-10 bg-white rounded-lg shadow-sm border border-red-200",children:[s.jsx("p",{className:"text-red-500 text-sm sm:text-base",children:h}),s.jsx("button",{onClick:_,className:"mt-3 sm:mt-4 px-3 sm:px-4 py-1.5 sm:py-2 bg-orange-500 text-white text-sm rounded-lg hover:bg-orange-600",children:" "})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-2 sm:mb-3",children:r.length>0?s.jsx("div",{className:"max-h-40 sm:max-h-48 overflow-y-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:"ID"}),s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""}),s.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xs font-semibold text-gray-700 border-b",children:""})]})}),s.jsx("tbody",{children:r.map((N,v)=>s.jsxs("tr",{onClick:()=>p(N),className:`cursor-pointer hover:bg-orange-50 transition-colors ${a===N?"bg-orange-100":""}`,children:[s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:N.CONSREQNO||"-"}),s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:N.CTRT_ID||"-"}),s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:N.CONSCHRRNM||"-"}),s.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs text-gray-900 border-b",children:N.CONSFNSHSCDLDT||"-"})]},v))})]})}):s.jsx("div",{className:"p-4 sm:p-6 text-center text-gray-500 text-xs sm:text-sm",children:"   "})}),a&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4 space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSREQNO||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSCHRRNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSCHRRTLNO||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("textarea",{value:a.CONSCHRRMAKRMKS||"",readOnly:!0,rows:2,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 resize-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSFNSHSCDLDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSFNSHDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSNEEDDIVSNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSDLYRSNNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSIPSBPRSSDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSIPSBRSNNM||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("input",{type:"text",value:a.CONSNREQPRSSDT||"",readOnly:!0,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),s.jsx("textarea",{value:a.CONSNREQRSNNM||"",readOnly:!0,rows:2,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 resize-none"})]})]}),s.jsxs("div",{className:"mt-3 sm:mt-4 grid grid-cols-3 gap-1.5 sm:gap-2",children:[s.jsx("button",{onClick:g,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""}),s.jsx("button",{onClick:C,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""}),s.jsx("button",{onClick:y,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""})]})]})]})},Of={WORK_FILTERS:"dlive_work_filters",WORK_SELECTED_ORDER:"dlive_work_selected_order",WORK_SELECTED_DIRECTION:"dlive_work_selected_direction",WORK_FORM_DATA:"dlive_work_form_data",ACTIVE_TAB:"dlive_active_tab",ACTIVE_VIEW:"dlive_active_view",LGU_CONSTRUCTION_FORM:"dlive_lgu_construction_form",LGU_NETWORK_FAULT_FORM:"dlive_lgu_network_fault_form",SIGNAL_HISTORY_FILTERS:"dlive_signal_history_filters",WORK_RESULT_SIGNAL_FILTERS:"dlive_work_result_signal_filters",WORK_PROCESS_STEP:"dlive_work_process_step",WORK_PROCESS_EQUIPMENT:"dlive_work_process_equipment"},Fq=(t,e)=>{try{typeof window<"u"&&localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("  :",n)}},Kq=t=>{try{if(typeof window<"u"){const e=localStorage.getItem(t);return e?JSON.parse(e):null}return null}catch(e){return console.error("  :",e),null}},GT=t=>{try{typeof window<"u"&&localStorage.removeItem(t)}catch(e){console.error("  :",e)}},Qq=()=>{try{if(typeof window<"u"){Object.values(Of).forEach(n=>{localStorage.removeItem(n)});const t=["dlive-work-equipment-storage","dlive-work-process-storage","dlive-equipment-storage","dlive-ui-storage"];t.forEach(n=>{localStorage.removeItem(n)});const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&(r.startsWith("work_complete_draft_")||r.startsWith("equipment_draft_"))&&e.push(r)}e.forEach(n=>{localStorage.removeItem(n)}),console.log("[clearAllSessions]  :",{sessionKeys:Object.values(Of).length,zustandKeys:t.length,draftKeys:e.length})}}catch(t){console.error("   :",t)}},Yq=({onBack:t,userInfo:e,showToast:n})=>{const r=Kq(Of.LGU_NETWORK_FAULT_FORM),[i,a]=b.useState({CTRT_ID:(r==null?void 0:r.CTRT_ID)||"",CUST_ID:(r==null?void 0:r.CUST_ID)||"",WRK_ID:(r==null?void 0:r.WRK_ID)||"",CANCEL_TYPE:(r==null?void 0:r.CANCEL_TYPE)||""}),[o,c]=b.useState(!1),[u,h]=b.useState(null);b.useEffect(()=>{Fq(Of.LGU_NETWORK_FAULT_FORM,i)},[i]);const m=(p,g)=>{a(C=>({...C,[p]:g}))},_=async p=>{if(p.preventDefault(),!i.CTRT_ID||!i.CUST_ID||!i.WRK_ID){n&&n("   .","warning");return}c(!0),h(null);try{const g={...i,CRR_ID:(e==null?void 0:e.crrId)||"01",SO_ID:(e==null?void 0:e.soId)||"",REG_UID:(e==null?void 0:e.userId)||"mobile_user"},C=await vM(g);console.log(" LGU   :",C),h({success:!0,data:C}),n&&n("LGU   .","success"),a({CTRT_ID:"",CUST_ID:"",WRK_ID:"",CANCEL_TYPE:""}),GT(Of.LGU_NETWORK_FAULT_FORM)}catch(g){console.error(" LGU   :",g),h({success:!1,error:g.message}),n&&n(`LGU   : ${g.message}`,"error")}finally{c(!1)}};return s.jsxs("div",{children:[s.jsx("div",{className:"mb-2 sm:mb-3",children:s.jsx("h2",{className:"text-base sm:text-lg font-bold text-gray-900",children:"(LGU) "})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4",children:s.jsxs("form",{onSubmit:_,className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" ID ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.CTRT_ID,onChange:p=>m("CTRT_ID",p.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:" ID ",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" ID ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.CUST_ID,onChange:p=>m("CUST_ID",p.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:" ID ",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" ID ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.WRK_ID,onChange:p=>m("WRK_ID",p.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:" ID ",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),s.jsx("input",{type:"text",value:i.CANCEL_TYPE,onChange:p=>m("CANCEL_TYPE",p.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded",placeholder:"  ()"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:[s.jsx("button",{type:"submit",disabled:o,className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:o?" ...":" "}),s.jsx("button",{type:"button",onClick:()=>{a({CTRT_ID:"",CUST_ID:"",WRK_ID:"",CANCEL_TYPE:""}),h(null),GT(Of.LGU_NETWORK_FAULT_FORM)},className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium text-xs sm:text-sm shadow-md transition-all",children:""})]})]})}),u&&s.jsxs("div",{className:"mt-2 sm:mt-3 bg-white rounded-lg shadow-sm border border-gray-200 p-2.5 sm:p-3",children:[s.jsx("div",{className:"mb-1.5 sm:mb-2",children:s.jsx("span",{className:`text-xs sm:text-sm font-semibold flex items-center gap-1 ${u.success?"text-green-600":"text-red-600"}`,children:u.success?s.jsxs(s.Fragment,{children:[s.jsx(Ai,{size:14,className:"sm:w-4 sm:h-4"}),"  "]}):s.jsxs(s.Fragment,{children:[s.jsx($r,{size:14,className:"sm:w-4 sm:h-4"}),"  "]})})}),s.jsx("div",{className:"bg-gray-50 rounded p-1.5 sm:p-2",children:s.jsx("pre",{className:"text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap break-words",children:JSON.stringify(u.success?u.data:u.error,null,2)})})]})]})},$q=({onNavigateToMenu:t,userInfo:e,showToast:n})=>{const[r,i]=b.useState("time-request"),a=Zi.useRef(null),o=Zi.useRef([]),c=[{id:"time-request",title:""},{id:"time-record",title:""},{id:"notice",title:""},{id:"signal-interlock",title:""},{id:"lgu-construction",title:"(LGU)"},{id:"lgu-network-fault",title:"(LGU)"},{id:"auto-confirm",title:""}],u=h=>{i(h),setTimeout(()=>{const _=a.current,p=o.current[c.findIndex(g=>g.id===h)];if(_&&p){const g=_.getBoundingClientRect(),C=p.getBoundingClientRect(),y=C.left-g.left-g.width/2+C.width/2;_.scrollTo({left:_.scrollLeft+y,behavior:"smooth"})}},0)};return s.jsx("div",{className:"w-full",children:s.jsxs(M4,{value:r,onValueChange:u,className:"w-full",children:[s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{ref:a,className:"w-full overflow-x-auto scrollbar-hide",children:s.jsx(lS,{className:"inline-flex justify-start bg-white rounded-none h-auto py-2 px-3 border-none min-w-max overflow-visible",children:c.map((h,m)=>s.jsx(oS,{value:h.id,ref:_=>o.current[m]=_,className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=inactive]:text-gray-600 rounded-full px-4 py-2 text-sm font-medium flex-shrink-0 mx-1 transition-colors whitespace-nowrap",children:h.title},h.id))})})}),s.jsx(oo,{value:"time-request",className:"px-3 pt-1",children:s.jsx(jg,{onNavigateToMenu:t,title:"",description:"    ."})}),s.jsx(oo,{value:"time-record",className:"px-3 pt-1",children:s.jsx(jg,{onNavigateToMenu:t,title:"",description:"     ."})}),s.jsx(oo,{value:"notice",className:"px-3 pt-1",children:s.jsx(jg,{onNavigateToMenu:t,title:"",description:"   ."})}),s.jsx(oo,{value:"signal-interlock",className:"px-3 pt-1",children:s.jsx(JM,{onBack:t,userInfo:e,showToast:n})}),s.jsx(oo,{value:"lgu-construction",className:"px-3 pt-1",children:s.jsx(Wq,{onBack:t,userInfo:e,showToast:n})}),s.jsx(oo,{value:"lgu-network-fault",className:"px-3 pt-1",children:s.jsx(Yq,{onBack:t,userInfo:e,showToast:n})}),s.jsx(oo,{value:"auto-confirm",className:"px-3 pt-1",children:s.jsx(jg,{onNavigateToMenu:t,title:"",description:"   ."})})]})})},Vq=[{key:"small",label:"",size:"14px",preview:"text-xs"},{key:"medium",label:"",size:"16px",preview:"text-sm"},{key:"large",label:"",size:"18px",preview:"text-base"},{key:"xlarge",label:" ",size:"20px",preview:"text-lg"}],zq=({onBack:t})=>{const{fontScale:e,setFontScale:n}=uo();return s.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"p-1 -ml-1",children:s.jsx(gM,{className:"w-5 h-5 text-gray-600"})}),s.jsx("h1",{className:"font-bold text-base",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[s.jsx("h2",{className:"font-semibold text-sm text-gray-800 mb-3",children:" "}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:Vq.map(r=>s.jsxs("button",{onClick:()=>n(r.key),className:`flex flex-col items-center justify-center py-3 px-2 rounded-lg border-2 transition-all ${e===r.key?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[s.jsx("span",{className:`font-bold mb-1 ${e===r.key?"text-blue-600":"text-gray-700"}`,style:{fontSize:r.size},children:""}),s.jsx("span",{className:`text-xs ${e===r.key?"text-blue-600 font-semibold":"text-gray-500"}`,children:r.label})]},r.key))}),s.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"  .     ."})]})})]})},Hq="/shuild.png",MO="notice_popup_dismissed",qq=()=>{try{return localStorage.getItem(MO)}catch{return null}},Xq=()=>{try{const t=new Date().toISOString().split("T")[0];localStorage.setItem(MO,t)}catch{}},Jq=()=>{const t=qq();if(!t)return!0;const e=new Date().toISOString().split("T")[0];return t!==e},Zq=({isOpen:t,onClose:e})=>{const[n,r]=b.useState(!1);if(b.useEffect(()=>{t&&r(!1)},[t]),!t)return null;const i=()=>{n&&Xq(),e()},a=o=>{o.target===o.currentTarget&&i()};return s.jsx("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:a,children:s.jsxs("div",{className:"relative w-full max-w-md",children:[s.jsx("button",{onClick:i,className:"absolute -top-12 right-0 p-2 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all z-10",children:s.jsx(Mi,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl bg-white",children:s.jsx("img",{src:Hq,alt:"  ",className:"w-full h-auto"})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between px-1",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:o=>r(o.target.checked),className:"w-4 h-4 rounded border-white/50 bg-white/20 text-blue-500 focus:ring-0"}),s.jsx("span",{className:"text-sm text-white/90",children:"   "})]}),s.jsx("button",{onClick:i,className:"px-5 py-2 bg-white/20 hover:bg-white/30 text-white text-sm font-semibold rounded-full transition-all backdrop-blur-sm",children:""})]})]})})},eX={"today-work":null,menu:"today-work","work-management":"today-work","work-item-list":"work-management","work-order-detail":"work-item-list","work-process-flow":"work-item-list","work-complete-form":"work-order-detail","work-complete-detail":"work-item-list","customer-management":"today-work","equipment-management":"today-work","other-management":"today-work","api-explorer":"today-work","coming-soon":"today-work",settings:"today-work"},tX=()=>{const[t,e]=b.useState(!1),[n,r]=b.useState(null),[i,a]=b.useState(null),[o,c]=b.useState(""),[u,h]=b.useState(!1),[m,_]=b.useState({todayInProgress:0,todayCompleted:0,weekTotal:0,monthTotal:0}),{isDrawerOpen:p,openDrawer:g,closeDrawer:C,currentView:y,setCurrentView:N,setWorkFilters:v,selectedWorkItem:P,setSelectedWorkItem:w,selectedWorkDirection:M,setSelectedWorkDirection:k,fontScale:B}=uo();b.useEffect(()=>{const $={small:"14px",medium:"16px",large:"18px",xlarge:"20px"};document.documentElement.style.fontSize=$[B]||"16px"},[B]),b.useEffect(()=>{const $=L=>{console.error("Unhandled Promise Rejection:",L.reason),A("   .","error")},F=L=>{console.error("Global Error:",L.error)};return window.addEventListener("unhandledrejection",$),window.addEventListener("error",F),()=>{window.removeEventListener("unhandledrejection",$),window.removeEventListener("error",F)}},[]);const G=($,F,L,re,fe,T,j,K,J)=>{if(e(!0),N("today-work"),$){const V={userId:$,userName:F||"",userNameEn:L||F||"",userRole:re||"",crrId:fe,soId:T,mstSoId:j,telNo2:K,authSoList:J||[]};r(V),localStorage.setItem("userInfo",JSON.stringify(V)),sessionStorage.setItem("userInfo",JSON.stringify(V)),localStorage.setItem("user",JSON.stringify({USR_ID:$,WRKR_ID:$,userId:$,soId:T,SO_ID:T,AUTH_SO_List:J||[]})),J&&J.length>0&&localStorage.setItem("branchList",JSON.stringify(J))}const q=new Date().toISOString().split("T")[0];v({startDate:q,endDate:q,filter:""}),Jq()&&h(!0)},U=()=>{e(!1),r(null),localStorage.removeItem("userInfo"),localStorage.removeItem("user"),localStorage.removeItem("branchList"),Qq(),w(null),k(null),N("today-work"),sE.clear()},I=()=>{N("today-work")},E=$=>{c($),N("coming-soon")},A=b.useCallback(($,F="info",L=!1)=>{a({message:$,type:F,persistent:L})},[]),Y=($,F)=>{if(N($),F)switch($){case"work-order-detail":case"work-process-flow":case"work-complete-form":case"work-complete-detail":w(F);break;case"work-item-list":k(F);break}},se=()=>{const $=eX[y];$&&N($)};if(!t)return s.jsx(RY,{onLogin:G});const X=()=>{switch(y){case"today-work":return s.jsx(wY,{onNavigateToView:Y,onNavigateToComingSoon:E,userInfo:n,showToast:A});case"menu":return s.jsx(hR,{onSelectMenu:Y});case"work-management":return s.jsx(NY,{onNavigateToMenu:I,onNavigateToView:Y,userInfo:n,showToast:A});case"work-order-detail":return P?s.jsx(UM,{order:P,onBack:se,onStartWorkProcess:$=>{w($),N("work-process-flow")},onComplete:$=>{w($),N("work-process-flow")},showToast:A},P.id):s.jsx("div",{children:"     ."});case"work-process-flow":return P?s.jsx(a$,{workItem:P,onComplete:()=>{A("  .","success"),N("work-item-list")},onBack:se,showToast:A}):s.jsx("div",{children:"    ."});case"work-complete-form":return P?s.jsx(Kp,{order:P,onBack:se,onSuccess:()=>{A("  .","success"),N("work-item-list")},showToast:A}):s.jsx("div",{children:"    ."});case"work-complete-detail":return P?s.jsx(OY,{order:P,onBack:()=>{w(null),N("work-item-list")}}):s.jsx("div",{children:"    ."});case"work-item-list":return M?s.jsx(HM,{direction:M,onBack:se,onNavigateToView:Y,userId:n==null?void 0:n.userId,showToast:A}):s.jsx("div",{children:"    ."});case"customer-management":return null;case"equipment-management":return null;case"api-explorer":return s.jsx(Gq,{});case"other-management":return s.jsx($q,{onNavigateToMenu:I,userInfo:n,showToast:A});case"settings":return s.jsx(zq,{onBack:se});case"coming-soon":return s.jsx(jg,{onNavigateToMenu:I,title:o});default:return s.jsx(hR,{onSelectMenu:Y})}},z=$=>{switch($){case"today-work":Y("today-work");break;case"work-management":Y("work-management");break;case"customer-management":Y("customer-management");break;case"equipment-management":Y("equipment-management");break;case"other-management":Y("other-management");break;default:Y("today-work")}};return s.jsxs(Nw,{client:sE,children:[s.jsx(c$,{children:s.jsxs("div",{className:"h-[100dvh] bg-white font-sans overflow-hidden flex flex-col",children:[s.jsx(o$,{isOpen:p,onClose:C,userName:n==null?void 0:n.userName,userId:n==null?void 0:n.userId,stats:m,onLogout:U,onNavigate:z}),s.jsx(kP,{onLogout:U,onNavigateHome:I,onNavigateBack:se,onMenuClick:g,currentView:y,userInfo:n,selectedWorkItem:P}),s.jsxs("main",{className:"flex-1 w-full max-w-7xl mx-auto pt-12 pb-[calc(52px+env(safe-area-inset-bottom,0px))] flex flex-col overflow-hidden",children:[X(),s.jsx("div",{style:{display:y==="customer-management"?"contents":"none"},children:s.jsx(dq,{onNavigateToMenu:I,showToast:A})}),s.jsx("div",{style:{display:y==="equipment-management"?"contents":"none"},children:s.jsx(Bq,{onNavigateToMenu:I,showToast:A})})]}),s.jsx(MY,{currentView:y,onSelectMenu:Y}),i&&s.jsx(l$,{message:i.message,type:i.type,persistent:i.persistent,onClose:()=>a(null)}),s.jsx(Zq,{isOpen:u,onClose:()=>h(!1)})]})}),s.jsx(Uw,{initialIsOpen:!1})]})},WT=500;let wf=[],IO=!0;const sX=t=>{const e={...t,id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()};return wf.unshift(e),wf.length>WT&&(wf=wf.slice(0,WT)),IO&&aX(e),typeof window<"u"&&window.dispatchEvent(new CustomEvent("api-log-added",{detail:e})),e},nX=()=>[...wf],rX=()=>{wf=[]},iX=t=>{IO=t},aX=t=>{const e={success:"",error:"",timeout:""}[t.status],n={success:"color: #10B981",error:"color: #EF4444",timeout:"color: #F59E0B"}[t.status];console.group(`%c${e} [${t.method}] ${t.api} (${t.duration}ms)`,`font-weight: bold; ${n}`),console.log("%c Request:","color: #3B82F6; font-weight: bold"),console.table(t.request),t.status==="success"?(console.log("%c Response:","color: #10B981; font-weight: bold"),Array.isArray(t.response)?(console.log(`Array[${t.response.length}]`),t.response.length>0&&(console.log("First item fields:",Object.keys(t.response[0])),console.table(t.response.slice(0,3)))):typeof t.response=="object"?console.table(t.response):console.log(t.response)):console.log("%c Error:","color: #EF4444; font-weight: bold",t.error),console.groupEnd()},jO=[{name:"",api:"/customer/equipment/getEquipmentOutList",method:"POST",params:{WRKR_ID:"20230019"},expectedFields:["EQT_NO","EQT_TYPE","SERIAL_NO","WRKR_ID"],description:"   "},{name:"",api:"/customer/equipment/getEquipmentProcYnCheck",method:"POST",params:{WRKR_ID:"20230019",SO_ID:"SO001",EQT_NO:"EQT001"},expectedFields:["PROC_YN","EQT_NO"],description:"    "},{name:"",api:"/customer/equipment/addCorporationEquipmentQuota",method:"POST",params:{SO_ID:"SO001",EQT_NO:"EQT001",CARRIER_ID:"CRR001",WRKR_ID:"20230019"},expectedFields:["RESULT","MESSAGE"],description:"    ()"},{name:"",api:"/customer/equipment/getEquipmentReturnRequestList",method:"POST",params:{WRKR_ID:"20230019"},expectedFields:["REQUEST_ID","EQT_NO","STATUS"],description:"  "},{name:"",api:"/customer/equipment/getEquipmentReturnRequestCheck",method:"POST",params:{WRKR_ID:"20230019",SO_ID:"SO001",EQT_NO:"EQT001"},expectedFields:["RETURN_YN"],description:"     "},{name:"",api:"/customer/equipment/addEquipmentReturnRequest",method:"POST",params:{EQT_NO:"EQT001",WRKR_ID:"20230019"},expectedFields:["RESULT","REQUEST_ID"],description:"   "},{name:"",api:"/customer/equipment/getWrkrHaveEqtList",method:"POST",params:{WRKR_ID:"20230019"},expectedFields:["EQT_NO","EQT_TYPE","SERIAL_NO","STATUS"],description:"   "},{name:"",api:"/customer/equipment/cmplEqtCustLossIndem",method:"POST",params:{EQT_NO:"EQT001"},expectedFields:["RESULT","INDEM_AMOUNT"],description:"   "},{name:"()",api:"/customer/equipment/setEquipmentChkStndByY",method:"POST",params:{EQT_NO:"EQT001",WRKR_ID:"20230019"},expectedFields:["RESULT","NEW_STATUS"],description:"  "},{name:"",api:"/statistics/equipment/getEquipmentHistoryInfo",method:"POST",params:{EQT_NO:"EQT001"},expectedFields:["HIST_ID","HIST_TYPE","HIST_DATE"],description:"  "},{name:"",api:"/customer/equipment/changeEqtWrkr_3_ForM",method:"POST",params:{EQT_NO:"EQT001",TO_WRKR_ID:"20230020"},expectedFields:["MSGCODE","MESSAGE","MV_WRKR_ID"],description:"    (Map  )"},{name:"",api:"/system/cm/getFindUsrList3",method:"POST",params:{USR_NM:""},expectedFields:["USR_ID","USR_NM","MOBILE"],description:" "},{name:"",api:"/customer/sigtrans/saveENSSendHist",method:"POST",params:{EQT_NO:"EQT001",TO_WRKR_ID:"20230020",FROM_WRKR_ID:"20230019"},expectedFields:["RESULT","ENS_ID"],description:"   "},{name:"",api:"/customer/work/getEquipLossInfo",method:"POST",params:{},expectedFields:["LOSS_ID","EQT_NO","STATE"],description:"/  "},{name:"",api:"/customer/work/modEquipLoss",method:"POST",params:{EQT_NO:"EQT001",STATE:"Recovered"},expectedFields:["RESULT","NEW_STATE"],description:"   "},{name:"",api:"/customer/work/getCustProdInfo",method:"POST",params:{WRKR_ID:"20230019",EQT_SEL:"0",EQT_CL:"ALL"},expectedFields:["output1","output2","output3"],description:" 3  "},{name:"",api:"/customer/work/eqtCmpsInfoChg",method:"POST",params:{WRK_ID:"WRK001",parameters:[]},expectedFields:["RESULT"],description:"    "},{name:"",api:"/customer/work/signalCheck",method:"POST",params:{serialNo:"TEST001",equipmentType:"modem"},expectedFields:["status","message"],description:"/STB  "},{name:"",api:"/customer/receipt/contract/getEquipmentNmListOfProd",method:"POST",params:{PROD_CD:"PROD001"},expectedFields:["EQT_CL_CD","EQT_CL_NM"],description:"    "},{name:"",api:"/customer/receipt/contract/getContractEqtList",method:"POST",params:{CTRT_ID:"CTRT001",PROD_CD:"PROD001"},expectedFields:["SVC_CMPS_ID","EQT_NO"],description:"  "}],lX={"/customer/equipment/getWrkrHaveEqtList":[{param:"EQT_STAT_CD",values:["10","3","20","30","Assigned","Available","Lost"],description:"   ( vs )"},{param:"ITEM_MID_CD",values:["04","05","07","03","4","5","MODEM","STB"],description:"  (04:, 05:STB)"},{param:"EQT_SEL",values:["0","1","Y","N","ALL"],description:"  "},{param:"EQT_CL",values:["ALL","MODEM","STB","04","05"],description:" "}],"/customer/equipment/getEquipmentOutList":[{param:"OUT_STAT",values:["Y","N","1","0","OUT","IN"],description:" "},{param:"SEARCH_TYPE",values:["1","2","3","A","B","ALL"],description:" "}],"/customer/work/getCustProdInfo":[{param:"EQT_SEL",values:["0","1","2","Y","N"],description:"  "},{param:"EQT_CL",values:["ALL","04","05","MODEM","STB","1","2"],description:"  "},{param:"CRR_TSK_CL",values:["01","05","07","09","11","1","5","7","9"],description:"  (01:, 05:, 07:, 09:AS)"}],"/system/cm/getFindUsrList3":[{param:"SEARCH_TYPE",values:["1","2","3","NM","ID","ALL"],description:" "},{param:"USR_TYPE",values:["W","M","A","Worker","Manager","1","2"],description:" "}]},oX=async(t,e,n,r)=>{const i={api:t,workingParams:[],failedParams:[],discoveredFields:[],notes:[]};console.group(`%c  : ${t}`,"font-weight: bold; color: #8B5CF6"),console.log(" :",e),console.log(" :",n.length," ");try{const a=await FT(r+t,"POST",e);a.success&&(i.workingParams.push({...e,_note:" "}),i.discoveredFields=a.fields,i.notes.push("    "))}catch{i.notes.push("   ")}for(const a of n){console.log(`
: ${a.param} - ${a.description}`);for(const o of a.values){const c={...e,[a.param]:o};try{const u=await FT(r+t,"POST",c);u.success?(console.log(`   ${a.param}=${o}   (${u.fields.length} fields)`),i.workingParams.push({...c,_note:`${a.param}=${o} `}),u.fields.forEach(h=>{i.discoveredFields.includes(h)||(i.discoveredFields.push(h),i.notes.push(`   : ${h} (${a.param}=${o})`))})):(console.log(`   ${a.param}=${o}  `),i.failedParams.push({...c,_error:u.error}))}catch{console.log(`   ${a.param}=${o}  `)}await new Promise(u=>setTimeout(u,100))}}return console.groupEnd(),i},FT=async(t,e,n)=>{try{const r=await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});if(!r.ok)return{success:!1,fields:[],error:`HTTP ${r.status}`};const i=await r.json();let a=[];return Array.isArray(i)&&i.length>0?a=Object.keys(i[0]):typeof i=="object"&&i!==null&&(a=Object.keys(i)),i.code==="ERROR"||i.error||i.RESULT==="FAIL"?{success:!1,fields:a,error:i.message||i.error}:{success:!0,fields:a}}catch(r){return{success:!1,fields:[],error:r.message}}},cX=async(t,e=jO,n=1e4)=>{const r=Date.now();console.clear(),console.log("%c D'Live  API   ","font-size: 20px; font-weight: bold; color: #3B82F6"),console.log(` : ${new Date().toLocaleString()}`),console.log(`API Base: ${t}`),console.log(` : ${e.length}`),console.log("".repeat(60));const i=[];for(let m=0;m<e.length;m++){const _=e[m],p=`[${m+1}/${e.length}]`;console.log(`
${p} : ${_.name}`),console.log(`  API: ${_.api}`),console.log("  Params:",_.params);const g=Date.now();try{const C=new AbortController,y=setTimeout(()=>C.abort(),n),N=await fetch(t+_.api,{method:_.method,headers:{"Content-Type":"application/json"},body:_.method==="POST"?JSON.stringify(_.params):void 0,credentials:"include",signal:C.signal});clearTimeout(y);const v=Date.now()-g;if(!N.ok){console.log(`   HTTP Error: ${N.status}`),i.push({name:_.name,api:_.api,status:"error",duration:v,error:`HTTP ${N.status}`});continue}const P=await N.json();let w=[];if(Array.isArray(P)&&P.length>0?(w=Object.keys(P[0]),console.log(`    (${v}ms) - Array[${P.length}]`),console.log(`   : ${w.join(", ")}`)):P.output1||P.output2?(w=Object.keys(P),console.log(`    (${v}ms) - Multi-output`),Object.keys(P).forEach(M=>{Array.isArray(P[M])&&console.log(`    ${M}: Array[${P[M].length}]`)})):typeof P=="object"&&(w=Object.keys(P),console.log(`    (${v}ms)`),console.log(`   : ${w.join(", ")}`)),_.expectedFields){const M=_.expectedFields.filter(k=>!w.includes(k));M.length>0&&console.log(`     : ${M.join(", ")}`)}i.push({name:_.name,api:_.api,status:"success",duration:v,responseFields:w})}catch(C){const y=Date.now()-g;C.name==="AbortError"?(console.log(`    (${n}ms)`),i.push({name:_.name,api:_.api,status:"timeout",duration:y,error:"Timeout"})):(console.log(`   : ${C.message}`),i.push({name:_.name,api:_.api,status:"error",duration:y,error:C.message}))}await new Promise(C=>setTimeout(C,200))}const a=i.filter(m=>m.status==="success").length,o=i.filter(m=>m.status==="error").length,c=i.filter(m=>m.status==="timeout").length,u=Date.now()-r;console.log(`
`+"".repeat(60)),console.log("%c   ","font-size: 16px; font-weight: bold"),console.log("".repeat(60)),console.log(` API: ${e.length}`),console.log(`%c : ${a}`,"color: #10B981"),console.log(`%c : ${o}`,"color: #EF4444"),console.log(`%c : ${c}`,"color: #F59E0B"),console.log(` : ${(u/1e3).toFixed(1)}`),console.log("".repeat(60)),(o>0||c>0)&&(console.log(`
%c   API:`,"font-weight: bold; color: #F59E0B"),i.filter(m=>m.status!=="success").forEach(m=>{console.log(`  - ${m.name}: ${m.error||m.status}`)})),console.log(`
%c   :`,"font-weight: bold; color: #3B82F6"),i.filter(m=>m.status==="success"&&m.responseFields).forEach(m=>{var _;console.log(`  ${m.name}: ${(_=m.responseFields)==null?void 0:_.join(", ")}`)});const h={timestamp:new Date().toISOString(),totalApis:e.length,successCount:a,failCount:o,timeoutCount:c,results:i,summary:`${a}/${e.length} APIs working (${o} failed, ${c} timeout)`};return typeof window<"u"&&(window.__lastApiCheck=h,console.log(`
  : window.__lastApiCheck`)),h},dX=t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`api-check-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(n)};typeof window<"u"&&(window.dliveDebug={runFullCheck:t=>cX(t||"/api"),getLogs:nX,clearLogs:rX,setDebugMode:iX,testCases:jO,paramVariations:lX,discoverParams:oX,downloadResult:dX},window.addEventListener("api-call-complete",(t=>{const e=t.detail;e&&e.api&&sX(e)})),console.log("%c D'Live API  ","font-weight: bold; color: #8B5CF6"),console.log("".repeat(50)),console.log("%c  :","font-weight: bold"),console.log("  dliveDebug.runFullCheck()     -    API "),console.log("  dliveDebug.getLogs()          -  API  "),console.log("  dliveDebug.clearLogs()        -   "),console.log("  dliveDebug.setDebugMode(true) -    ON/OFF"),console.log("".repeat(50)),console.log("%c :  > API   UI  ","color: #6366F1"));const OO=document.getElementById("root");if(!OO)throw new Error("Could not find root element to mount to");const uX=J3.createRoot(OO);uX.render(s.jsx(Zi.StrictMode,{children:s.jsx(tX,{})}));export{Nr as _,fX as c,W2 as g};
